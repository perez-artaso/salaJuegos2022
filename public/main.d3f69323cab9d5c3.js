"use strict";(self.webpackChunksala_juegos_2022=self.webpackChunksala_juegos_2022||[]).push([[179],{440:(jt,$e,j)=>{j.d($e,{nm:()=>Vi});var p=j(5813);j(4650),j(5867);var he=j(5861),tt=j(9681),et=j(4859),yt=j(2090),Je=j(1877);const oe=new Map,He={activated:!1,tokenObservers:[]},ne={initialized:!1,enabled:!1};function ye(Ae){return oe.get(Ae)||He}function ce(Ae,Te){oe.set(Ae,Te)}function Oe(){return ne}class tn{constructor(Te,Pe,ot,wt,Kt){if(this.operation=Te,this.retryPolicy=Pe,this.getWaitDuration=ot,this.lowerBound=wt,this.upperBound=Kt,this.pending=null,this.nextErrorWaitInterval=wt,wt>Kt)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(Te){var Pe=this;return(0,he.Z)(function*(){Pe.stop();try{Pe.pending=new yt.BH,yield function qt(Ae){return new Promise(Te=>{setTimeout(Te,Ae)})}(Pe.getNextRun(Te)),Pe.pending.resolve(),yield Pe.pending.promise,Pe.pending=new yt.BH,yield Pe.operation(),Pe.pending.resolve(),yield Pe.pending.promise,Pe.process(!0).catch(()=>{})}catch(ot){Pe.retryPolicy(ot)?Pe.process(!1).catch(()=>{}):Pe.stop()}})()}getNextRun(Te){if(Te)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const Pe=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),Pe}}}const Ft=new yt.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function an(Ae){if(!ye(Ae).activated)throw Ft.create("use-before-activation",{appName:Ae.name})}function Nr(Ae,Te){return Ar.apply(this,arguments)}function Ar(){return(Ar=(0,he.Z)(function*({url:Ae,body:Te},Pe){var ot,wt;const Kt={"Content-Type":"application/json"},_n=Pe.getImmediate({optional:!0});if(_n){const Br=yield _n.getHeartbeatsHeader();Br&&(Kt["X-Firebase-Client"]=Br)}const di={method:"POST",body:JSON.stringify(Te),headers:Kt};let or,hi;try{or=yield fetch(Ae,di)}catch(Br){throw Ft.create("fetch-network-error",{originalErrorMessage:null===(ot=Br)||void 0===ot?void 0:ot.message})}if(200!==or.status)throw Ft.create("fetch-status-error",{httpStatus:or.status});try{hi=yield or.json()}catch(Br){throw Ft.create("fetch-parse-error",{originalErrorMessage:null===(wt=Br)||void 0===wt?void 0:wt.message})}const so=hi.ttl.match(/^([\d.]+)(s)$/);if(!so||!so[2]||isNaN(Number(so[1])))throw Ft.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${hi.ttl}`});const Vs=1e3*Number(so[1]),ai=Date.now();return{token:hi.token,expireTimeMillis:ai+Vs,issuedAtTimeMillis:ai}})).apply(this,arguments)}function Jt(Ae,Te){const{projectId:Pe,appId:ot,apiKey:wt}=Ae.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${Pe}/apps/${ot}:exchangeDebugToken?key=${wt}`,body:{debug_token:Te}}}const mr="firebase-app-check-store";let zn=null;function wn(){return zn||(zn=new Promise((Ae,Te)=>{var Pe;try{const ot=indexedDB.open("firebase-app-check-database",1);ot.onsuccess=wt=>{Ae(wt.target.result)},ot.onerror=wt=>{var Kt;Te(Ft.create("storage-open",{originalErrorMessage:null===(Kt=wt.target.error)||void 0===Kt?void 0:Kt.message}))},ot.onupgradeneeded=wt=>{0===wt.oldVersion&&wt.target.result.createObjectStore(mr,{keyPath:"compositeKey"})}}catch(ot){Te(Ft.create("storage-open",{originalErrorMessage:null===(Pe=ot)||void 0===Pe?void 0:Pe.message}))}}),zn)}function Vn(){return(Vn=(0,he.Z)(function*(Ae,Te){const ot=(yield wn()).transaction(mr,"readwrite"),Kt=ot.objectStore(mr).put({compositeKey:Ae,value:Te});return new Promise((_n,di)=>{Kt.onsuccess=or=>{_n()},ot.onerror=or=>{var hi;di(Ft.create("storage-set",{originalErrorMessage:null===(hi=or.target.error)||void 0===hi?void 0:hi.message}))}})})).apply(this,arguments)}const Jn=new Je.Yd("@firebase/app-check");function un(Ae,Te){return(0,yt.hl)()?function vi(Ae,Te){return function An(Ae,Te){return Vn.apply(this,arguments)}(function ir(Ae){return`${Ae.options.appId}-${Ae.name}`}(Ae),Te)}(Ae,Te).catch(Pe=>{Jn.warn(`Failed to write token to IndexedDB. Error: ${Pe}`)}):Promise.resolve()}function Ei(){return Oe().enabled}function Pn(){return Ie.apply(this,arguments)}function Ie(){return(Ie=(0,he.Z)(function*(){const Ae=Oe();if(Ae.enabled&&Ae.token)return Ae.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const le={error:"UNKNOWN_ERROR"};function ve(Ae){return yt.US.encodeString(JSON.stringify(Ae),!1)}function _e(Ae){return at.apply(this,arguments)}function at(){return(at=(0,he.Z)(function*(Ae,Te=!1){const Pe=Ae.app;an(Pe);const ot=ye(Pe);let Kt,wt=ot.token;if(!wt){const or=yield ot.cachedTokenPromise;or&&Dn(or)&&(wt=or)}if(!Te&&wt&&Dn(wt))return{token:wt.token};let di,_n=!1;if(Ei()){ot.exchangeTokenPromise||(ot.exchangeTokenPromise=Nr(Jt(Pe,yield Pn()),Ae.heartbeatServiceProvider).then(hi=>(ot.exchangeTokenPromise=void 0,hi)),_n=!0);const or=yield ot.exchangeTokenPromise;return yield un(Pe,or),ce(Pe,Object.assign(Object.assign({},ot),{token:or})),{token:or.token}}try{ot.exchangeTokenPromise||(ot.exchangeTokenPromise=ot.provider.getToken().then(or=>(ot.exchangeTokenPromise=void 0,or)),_n=!0),wt=yield ot.exchangeTokenPromise}catch(or){"appCheck/throttled"===or.code?Jn.warn(or.message):Jn.error(or),Kt=or}return wt?(di={token:wt.token},ce(Pe,Object.assign(Object.assign({},ot),{token:wt})),yield un(Pe,wt)):di=dn(Kt),_n&&fr(Pe,di),di})).apply(this,arguments)}function Vt(Ae,Te){const Pe=ye(Ae),ot=Pe.tokenObservers.filter(wt=>wt.next!==Te);0===ot.length&&Pe.tokenRefresher&&Pe.tokenRefresher.isRunning()&&Pe.tokenRefresher.stop(),ce(Ae,Object.assign(Object.assign({},Pe),{tokenObservers:ot}))}function sr(Ae){const{app:Te}=Ae,Pe=ye(Te);let ot=Pe.tokenRefresher;ot||(ot=function In(Ae){const{app:Te}=Ae;return new tn((0,he.Z)(function*(){let ot;if(ot=ye(Te).token?yield _e(Ae,!0):yield _e(Ae),ot.error)throw ot.error}),()=>!0,()=>{const Pe=ye(Te);if(Pe.token){let ot=Pe.token.issuedAtTimeMillis+.5*(Pe.token.expireTimeMillis-Pe.token.issuedAtTimeMillis)+3e5;return ot=Math.min(ot,Pe.token.expireTimeMillis-3e5),Math.max(0,ot-Date.now())}return 0},3e4,96e4)}(Ae),ce(Te,Object.assign(Object.assign({},Pe),{tokenRefresher:ot}))),!ot.isRunning()&&Pe.isTokenAutoRefreshEnabled&&ot.start()}function fr(Ae,Te){const Pe=ye(Ae).tokenObservers;for(const ot of Pe)try{"EXTERNAL"===ot.type&&null!=Te.error?ot.error(Te.error):ot.next(Te)}catch{}}function Dn(Ae){return Ae.expireTimeMillis-Date.now()>0}function dn(Ae){return{token:ve(le),error:Ae}}class Xn{constructor(Te,Pe){this.app=Te,this.heartbeatServiceProvider=Pe}_delete(){const{tokenObservers:Te}=ye(this.app);for(const Pe of Te)Vt(this.app,Pe.next);return Promise.resolve()}}const fs="app-check-internal";!function $n(){(0,tt._registerComponent)(new et.wA("app-check",Ae=>function vr(Ae,Te){return new Xn(Ae,Te)}(Ae.getProvider("app").getImmediate(),Ae.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((Ae,Te,Pe)=>{Ae.getProvider(fs).initialize()})),(0,tt._registerComponent)(new et.wA(fs,Ae=>function Jr(Ae){return{getToken:Te=>_e(Ae,Te),addTokenListener:Te=>function gt(Ae,Te,Pe,ot){const{app:wt}=Ae,Kt=ye(wt),_n={next:Pe,error:ot,type:Te};if(ce(wt,Object.assign(Object.assign({},Kt),{tokenObservers:[...Kt.tokenObservers,_n]})),Kt.token&&Dn(Kt.token)){const di=Kt.token;Promise.resolve().then(()=>{Pe({token:di.token}),sr(Ae)}).catch(()=>{})}Kt.cachedTokenPromise.then(()=>sr(Ae))}(Ae,"INTERNAL",Te),removeTokenListener:Te=>Vt(Ae.app,Te)}}(Ae.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,tt.registerVersion)("@firebase/app-check","0.5.12")}();class Vi{constructor(){return(0,p.vb)("app-check")}}typeof window<"u"&&window},1205:(jt,$e,j)=>{j.d($e,{zQ:()=>lt,ww:()=>_t,rT:()=>ne,f7:()=>ce,L6:()=>oe,_Q:()=>He,lh:()=>ye,Qv:()=>Je,nw:()=>Oe});var p=j(4650),T=j(7579),G=j(9646),De=j(9751),we=j(8996),xe=j(6451),Me=j(5363),Re=j(3900),Fe=j(4004),fe=j(6063);class ue extends T.x{constructor(Ot=1/0,Bt=1/0,ct=fe.l){super(),this._bufferSize=Ot,this._windowTime=Bt,this._timestampProvider=ct,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=Bt===1/0,this._bufferSize=Math.max(1,Ot),this._windowTime=Math.max(1,Bt)}next(Ot){const{isStopped:Bt,_buffer:ct,_infiniteTimeWindow:tn,_timestampProvider:qt,_windowTime:rn}=this;Bt||(ct.push(Ot),!tn&&ct.push(qt.now()+rn)),this._trimBuffer(),super.next(Ot)}_subscribe(Ot){this._throwIfClosed(),this._trimBuffer();const Bt=this._innerSubscribe(Ot),{_infiniteTimeWindow:ct,_buffer:tn}=this,qt=tn.slice();for(let rn=0;rn<qt.length&&!Ot.closed;rn+=ct?1:2)Ot.next(qt[rn]);return this._checkFinalizedStatuses(Ot),Bt}_trimBuffer(){const{_bufferSize:Ot,_timestampProvider:Bt,_buffer:ct,_infiniteTimeWindow:tn}=this,qt=(tn?1:2)*Ot;if(Ot<1/0&&qt<ct.length&&ct.splice(0,ct.length-qt),!tn){const rn=Bt.now();let Ft=0;for(let Sn=1;Sn<ct.length&&ct[Sn]<=rn;Sn+=2)Ft=Sn;Ft&&ct.splice(0,Ft+1)}}}var Ee=j(3099);function mt(Et,Ot,Bt){let ct,tn=!1;return Et&&"object"==typeof Et?({bufferSize:ct=1/0,windowTime:Ot=1/0,refCount:tn=!1,scheduler:Bt}=Et):ct=Et??1/0,(0,Ee.B)({connector:()=>new ue(ct,Ot,Bt),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:tn})}var rt=j(590),Ge=j(576);function kt(Et,Ot){return(0,Ge.m)(Ot)?(0,Re.w)(()=>Et,Ot):(0,Re.w)(()=>Et)}var Ze=j(9468),ze=j(9300),Pt=j(5813),xt=j(2011),he=j(6895),tt=j(440),et=j(127);const Je=new p.OlP("angularfire2.auth.use-emulator"),oe=new p.OlP("angularfire2.auth.settings"),He=new p.OlP("angularfire2.auth.tenant-id"),ne=new p.OlP("angularfire2.auth.langugage-code"),ye=new p.OlP("angularfire2.auth.use-device-language"),ce=new p.OlP("angularfire.auth.persistence"),Oe=(Et,Ot,Bt,ct,tn,qt,rn,Ft)=>(0,xt.cc)(`${Et.name}.auth`,"AngularFireAuth",Et.name,()=>{const Sn=Ot.runOutsideAngular(()=>Et.auth());if(Bt&&Sn.useEmulator(...Bt),ct&&(Sn.tenantId=ct),Sn.languageCode=tn,qt&&Sn.useDeviceLanguage(),rn)for(const[an,Fn]of Object.entries(rn))Sn.settings[an]=Fn;return Ft&&Sn.setPersistence(Ft),Sn},[Bt,ct,tn,qt,rn,Ft]);let lt=(()=>{class Et{constructor(Bt,ct,tn,qt,rn,Ft,Sn,an,Fn,Oi,Nr,Ar){const Tr=new T.x,zr=(0,G.of)(void 0).pipe((0,Me.Q)(rn.outsideAngular),(0,Re.w)(()=>qt.runOutsideAngular(()=>Promise.resolve().then(j.bind(j,2274)))),(0,Fe.U)(()=>(0,xt.on)(Bt,qt,ct)),(0,Fe.U)(Jt=>Oe(Jt,qt,Ft,an,Fn,Oi,Sn,Nr)),mt({bufferSize:1,refCount:!1}));if((0,he.PM)(tn))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,G.of)(null);else{zr.pipe((0,rt.P)()).subscribe();const nr=zr.pipe((0,Re.w)(dt=>dt.getRedirectResult().then(zn=>zn,()=>null)),Pt.iC,mt({bufferSize:1,refCount:!1})),Ln=zr.pipe((0,Re.w)(dt=>new De.y(zn=>({unsubscribe:qt.runOutsideAngular(()=>dt.onAuthStateChanged(wn=>zn.next(wn),wn=>zn.error(wn),()=>zn.complete()))})))),mr=zr.pipe((0,Re.w)(dt=>new De.y(zn=>({unsubscribe:qt.runOutsideAngular(()=>dt.onIdTokenChanged(wn=>zn.next(wn),wn=>zn.error(wn),()=>zn.complete()))}))));this.authState=nr.pipe(kt(Ln),(0,Ze.R)(rn.outsideAngular),(0,Me.Q)(rn.insideAngular)),this.user=nr.pipe(kt(mr),(0,Ze.R)(rn.outsideAngular),(0,Me.Q)(rn.insideAngular)),this.idToken=this.user.pipe((0,Re.w)(dt=>dt?(0,we.D)(dt.getIdToken()):(0,G.of)(null))),this.idTokenResult=this.user.pipe((0,Re.w)(dt=>dt?(0,we.D)(dt.getIdTokenResult()):(0,G.of)(null))),this.credential=(0,xe.T)(nr,Tr,this.authState.pipe((0,ze.h)(dt=>!dt))).pipe((0,Fe.U)(dt=>dt?.user?dt:null),(0,Ze.R)(rn.outsideAngular),(0,Me.Q)(rn.insideAngular))}return(0,xt.pX)(this,zr,qt,{spy:{apply:(Jt,nr,Ln)=>{(Jt.startsWith("signIn")||Jt.startsWith("createUser"))&&Ln.then(mr=>Tr.next(mr))}}})}}return Et.\u0275fac=function(Bt){return new(Bt||Et)(p.LFG(xt.Dh),p.LFG(xt.xv,8),p.LFG(p.Lbi),p.LFG(p.R0b),p.LFG(Pt.HU),p.LFG(Je,8),p.LFG(oe,8),p.LFG(He,8),p.LFG(ne,8),p.LFG(ye,8),p.LFG(ce,8),p.LFG(tt.nm,8))},Et.\u0275prov=p.Yz7({token:Et,factory:Et.\u0275fac,providedIn:"any"}),Et})(),_t=(()=>{class Et{constructor(){et.Z.registerVersion("angularfire",Pt.q4.full,"auth-compat")}}return Et.\u0275fac=function(Bt){return new(Bt||Et)},Et.\u0275mod=p.oAB({type:Et}),Et.\u0275inj=p.cJS({providers:[lt]}),Et})()},7566:(jt,$e,j)=>{j.d($e,{ST:()=>mv,yb:()=>ky});var p=j(4650),T=j(4986),G=j(9751),De=j(8996),we=j(9646),xe=j(5813),Me=j(8675),Re=j(4482),Fe=j(5403);function fe(){return(0,Re.e)((i,e)=>{let t,o=!1;i.subscribe((0,Fe.x)(e,u=>{const d=t;t=u,o&&e.next([d,u]),o=!0}))})}var ue=j(4004),Ee=j(5026),mt=j(4671);function Ge(i,e){return i===e}var ne,kt=j(9300),Ze=j(2011),ze=j(6895),xt=(j(2274),j(3942)),he=j(5861),tt=j(9681),et=j(4859),yt=j(1877),Je=j(2090),oe=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},He={},ye=ye||{},ce=oe||self;function Oe(){}function lt(i){var e=typeof i;return"array"==(e="object"!=e?e:i?Array.isArray(i)?"array":e:"null")||"object"==e&&"number"==typeof i.length}function _t(i){var e=typeof i;return"object"==e&&null!=i||"function"==e}var Ot="closure_uid_"+(1e9*Math.random()>>>0),Bt=0;function ct(i,e,t){return i.call.apply(i.bind,arguments)}function tn(i,e,t){if(!i)throw Error();if(2<arguments.length){var o=Array.prototype.slice.call(arguments,2);return function(){var u=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(u,o),i.apply(e,u)}}return function(){return i.apply(e,arguments)}}function qt(i,e,t){return(qt=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?ct:tn).apply(null,arguments)}function rn(i,e){var t=Array.prototype.slice.call(arguments,1);return function(){var o=t.slice();return o.push.apply(o,arguments),i.apply(this,o)}}function Ft(i,e){function t(){}t.prototype=e.prototype,i.Z=e.prototype,i.prototype=new t,i.prototype.constructor=i,i.Vb=function(o,u,d){for(var g=Array(arguments.length-2),C=2;C<arguments.length;C++)g[C-2]=arguments[C];return e.prototype[u].apply(o,g)}}function Sn(){this.s=this.s,this.o=this.o}var Fn={};Sn.prototype.s=!1,Sn.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var i=function Et(i){return Object.prototype.hasOwnProperty.call(i,Ot)&&i[Ot]||(i[Ot]=++Bt)}(this);delete Fn[i]}},Sn.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Oi=Array.prototype.indexOf?function(i,e){return Array.prototype.indexOf.call(i,e,void 0)}:function(i,e){if("string"==typeof i)return"string"!=typeof e||1!=e.length?-1:i.indexOf(e,0);for(let t=0;t<i.length;t++)if(t in i&&i[t]===e)return t;return-1},Nr=Array.prototype.forEach?function(i,e,t){Array.prototype.forEach.call(i,e,t)}:function(i,e,t){const o=i.length,u="string"==typeof i?i.split(""):i;for(let d=0;d<o;d++)d in u&&e.call(t,u[d],d,i)};function Tr(i){return Array.prototype.concat.apply([],arguments)}function zr(i){const e=i.length;if(0<e){const t=Array(e);for(let o=0;o<e;o++)t[o]=i[o];return t}return[]}function Jt(i){return/^[\s\xa0]*$/.test(i)}var dt,nr=String.prototype.trim?function(i){return i.trim()}:function(i){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(i)[1]};function Ln(i,e){return-1!=i.indexOf(e)}function mr(i,e){return i<e?-1:i>e?1:0}e:{var zn=ce.navigator;if(zn){var wn=zn.userAgent;if(wn){dt=wn;break e}}dt=""}function rr(i,e,t){for(const o in i)e.call(t,i[o],o,i)}function vi(i){const e={};for(const t in i)e[t]=i[t];return e}var Si="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Pr(i,e){let t,o;for(let u=1;u<arguments.length;u++){for(t in o=arguments[u],o)i[t]=o[t];for(let d=0;d<Si.length;d++)t=Si[d],Object.prototype.hasOwnProperty.call(o,t)&&(i[t]=o[t])}}function An(i){return An[" "](i),i}An[" "]=Oe;var wi,i,Ht=Ln(dt,"Opera"),$t=Ln(dt,"Trident")||Ln(dt,"MSIE"),ir=Ln(dt,"Edge"),Jn=ir||$t,ar=Ln(dt,"Gecko")&&!(Ln(dt.toLowerCase(),"webkit")&&!Ln(dt,"Edge"))&&!(Ln(dt,"Trident")||Ln(dt,"MSIE"))&&!Ln(dt,"Edge"),ri=Ln(dt.toLowerCase(),"webkit")&&!Ln(dt,"Edge");function un(){var i=ce.document;return i?i.documentMode:void 0}e:{var Nn="",Ei=(i=dt,ar?/rv:([^\);]+)(\)|;)/.exec(i):ir?/Edge\/([\d\.]+)/.exec(i):$t?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(i):ri?/WebKit\/(\S+)/.exec(i):Ht?/(?:Version)[ \/]?(\S+)/.exec(i):void 0);if(Ei&&(Nn=Ei?Ei[1]:""),$t){var Pn=un();if(null!=Pn&&Pn>parseFloat(Nn)){wi=String(Pn);break e}}wi=Nn}var Ie={};var _e=ce.document&&$t&&(un()||parseInt(wi,10))||void 0,at=function(){if(!ce.addEventListener||!Object.defineProperty)return!1;var i=!1,e=Object.defineProperty({},"passive",{get:function(){i=!0}});try{ce.addEventListener("test",Oe,e),ce.removeEventListener("test",Oe,e)}catch{}return i}();function gt(i,e){this.type=i,this.g=this.target=e,this.defaultPrevented=!1}function Vt(i,e){if(gt.call(this,i?i.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,i){var t=this.type=i.type,o=i.changedTouches&&i.changedTouches.length?i.changedTouches[0]:null;if(this.target=i.target||i.srcElement,this.g=e,e=i.relatedTarget){if(ar){e:{try{An(e.nodeName);var u=!0;break e}catch{}u=!1}u||(e=null)}}else"mouseover"==t?e=i.fromElement:"mouseout"==t&&(e=i.toElement);this.relatedTarget=e,o?(this.clientX=void 0!==o.clientX?o.clientX:o.pageX,this.clientY=void 0!==o.clientY?o.clientY:o.pageY,this.screenX=o.screenX||0,this.screenY=o.screenY||0):(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0),this.button=i.button,this.key=i.key||"",this.ctrlKey=i.ctrlKey,this.altKey=i.altKey,this.shiftKey=i.shiftKey,this.metaKey=i.metaKey,this.pointerId=i.pointerId||0,this.pointerType="string"==typeof i.pointerType?i.pointerType:sr[i.pointerType]||"",this.state=i.state,this.i=i,i.defaultPrevented&&Vt.Z.h.call(this)}}gt.prototype.h=function(){this.defaultPrevented=!0},Ft(Vt,gt);var sr={2:"touch",3:"pen",4:"mouse"};Vt.prototype.h=function(){Vt.Z.h.call(this);var i=this.i;i.preventDefault?i.preventDefault():i.returnValue=!1};var In="closure_listenable_"+(1e6*Math.random()|0),fr=0;function Dn(i,e,t,o,u){this.listener=i,this.proxy=null,this.src=e,this.type=t,this.capture=!!o,this.ia=u,this.key=++fr,this.ca=this.fa=!1}function dn(i){i.ca=!0,i.listener=null,i.proxy=null,i.src=null,i.ia=null}function Xn(i){this.src=i,this.g={},this.h=0}function vr(i,e){var t=e.type;if(t in i.g){var d,o=i.g[t],u=Oi(o,e);(d=0<=u)&&Array.prototype.splice.call(o,u,1),d&&(dn(e),0==i.g[t].length&&(delete i.g[t],i.h--))}}function Jr(i,e,t,o){for(var u=0;u<i.length;++u){var d=i[u];if(!d.ca&&d.listener==e&&d.capture==!!t&&d.ia==o)return u}return-1}Xn.prototype.add=function(i,e,t,o,u){var d=i.toString();(i=this.g[d])||(i=this.g[d]=[],this.h++);var g=Jr(i,e,o,u);return-1<g?(e=i[g],t||(e.fa=!1)):((e=new Dn(e,this.src,d,!!o,u)).fa=t,i.push(e)),e};var Ur="closure_lm_"+(1e6*Math.random()|0),Er={};function ge(i,e,t,o,u){if(o&&o.once)return Le(i,e,t,o,u);if(Array.isArray(e)){for(var d=0;d<e.length;d++)ge(i,e[d],t,o,u);return null}return t=fn(t),i&&i[In]?i.N(e,t,_t(o)?!!o.capture:!!o,u):ae(i,e,t,!1,o,u)}function ae(i,e,t,o,u,d){if(!e)throw Error("Invalid event type");var g=_t(u)?!!u.capture:!!u,C=ur(i);if(C||(i[Ur]=C=new Xn(i)),(t=C.add(e,t,o,g,d)).proxy)return t;if(o=function re(){var e=En;return function i(t){return e.call(i.src,i.listener,t)}}(),t.proxy=o,o.src=i,o.listener=t,i.addEventListener)at||(u=g),void 0===u&&(u=!1),i.addEventListener(e.toString(),o,u);else if(i.attachEvent)i.attachEvent(hn(e.toString()),o);else{if(!i.addListener||!i.removeListener)throw Error("addEventListener and attachEvent are unavailable.");i.addListener(o)}return t}function Le(i,e,t,o,u){if(Array.isArray(e)){for(var d=0;d<e.length;d++)Le(i,e[d],t,o,u);return null}return t=fn(t),i&&i[In]?i.O(e,t,_t(o)?!!o.capture:!!o,u):ae(i,e,t,!0,o,u)}function it(i,e,t,o,u){if(Array.isArray(e))for(var d=0;d<e.length;d++)it(i,e[d],t,o,u);else o=_t(o)?!!o.capture:!!o,t=fn(t),i&&i[In]?(i=i.i,(e=String(e).toString())in i.g&&-1<(t=Jr(d=i.g[e],t,o,u))&&(dn(d[t]),Array.prototype.splice.call(d,t,1),0==d.length&&(delete i.g[e],i.h--))):i&&(i=ur(i))&&(e=i.g[e.toString()],i=-1,e&&(i=Jr(e,t,o,u)),(t=-1<i?e[i]:null)&&Ut(t))}function Ut(i){if("number"!=typeof i&&i&&!i.ca){var e=i.src;if(e&&e[In])vr(e.i,i);else{var t=i.type,o=i.proxy;e.removeEventListener?e.removeEventListener(t,o,i.capture):e.detachEvent?e.detachEvent(hn(t),o):e.addListener&&e.removeListener&&e.removeListener(o),(t=ur(e))?(vr(t,i),0==t.h&&(t.src=null,e[Ur]=null)):dn(i)}}}function hn(i){return i in Er?Er[i]:Er[i]="on"+i}function En(i,e){if(i.ca)i=!0;else{e=new Vt(e,this);var t=i.listener,o=i.ia||i.src;i.fa&&Ut(i),i=t.call(o,e)}return i}function ur(i){return(i=i[Ur])instanceof Xn?i:null}var ii="__closure_events_fn_"+(1e9*Math.random()>>>0);function fn(i){return"function"==typeof i?i:(i[ii]||(i[ii]=function(e){return i.handleEvent(e)}),i[ii])}function Cn(){Sn.call(this),this.i=new Xn(this),this.P=this,this.I=null}function Wn(i,e){var t,o=i.I;if(o)for(t=[];o;o=o.I)t.push(o);if(i=i.P,o=e.type||e,"string"==typeof e)e=new gt(e,i);else if(e instanceof gt)e.target=e.target||i;else{var u=e;Pr(e=new gt(o,i),u)}if(u=!0,t)for(var d=t.length-1;0<=d;d--){var g=e.g=t[d];u=rs(g,o,!0,e)&&u}if(u=rs(g=e.g=i,o,!0,e)&&u,u=rs(g,o,!1,e)&&u,t)for(d=0;d<t.length;d++)u=rs(g=e.g=t[d],o,!1,e)&&u}function rs(i,e,t,o){if(!(e=i.i.g[String(e)]))return!0;e=e.concat();for(var u=!0,d=0;d<e.length;++d){var g=e[d];if(g&&!g.ca&&g.capture==t){var C=g.listener,V=g.ia||g.src;g.fa&&vr(i.i,g),u=!1!==C.call(V,o)&&u}}return u&&!o.defaultPrevented}Ft(Cn,Sn),Cn.prototype[In]=!0,Cn.prototype.removeEventListener=function(i,e,t,o){it(this,i,e,t,o)},Cn.prototype.M=function(){if(Cn.Z.M.call(this),this.i){var e,i=this.i;for(e in i.g){for(var t=i.g[e],o=0;o<t.length;o++)dn(t[o]);delete i.g[e],i.h--}}this.I=null},Cn.prototype.N=function(i,e,t,o){return this.i.add(String(i),e,!1,t,o)},Cn.prototype.O=function(i,e,t,o){return this.i.add(String(i),e,!0,t,o)};var si=ce.JSON.stringify;function kr(){var i=$n;let e=null;return i.g&&(e=i.g,i.g=i.g.next,i.g||(i.h=null),e.next=null),e}var Kn,Ni=new class{constructor(i,e){this.i=i,this.j=e,this.h=0,this.g=null}get(){let i;return 0<this.h?(this.h--,i=this.g,this.g=i.next,i.next=null):i=this.i(),i}}(()=>new pr,i=>i.reset());class pr{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function xr(i){ce.setTimeout(()=>{throw i},0)}function Ai(i,e){Kn||function Ao(){var i=ce.Promise.resolve(void 0);Kn=function(){i.then(ps)}}(),fs||(Kn(),fs=!0),$n.add(i,e)}var fs=!1,$n=new class is{constructor(){this.h=this.g=null}add(e,t){const o=Ni.get();o.set(e,t),this.h?this.h.next=o:this.g=o,this.h=o}};function ps(){for(var i;i=kr();){try{i.h.call(i.g)}catch(t){xr(t)}var e=Ni;e.j(i),100>e.h&&(e.h++,i.next=e.g,e.g=i)}fs=!1}function ci(i,e){Cn.call(this),this.h=i||1,this.g=e||ce,this.j=qt(this.kb,this),this.l=Date.now()}function Vi(i){i.da=!1,i.S&&(i.g.clearTimeout(i.S),i.S=null)}function qi(i,e,t){if("function"==typeof i)t&&(i=qt(i,t));else{if(!i||"function"!=typeof i.handleEvent)throw Error("Invalid listener argument");i=qt(i.handleEvent,i)}return 2147483647<Number(e)?-1:ce.setTimeout(i,e||0)}function Mr(i){i.g=qi(()=>{i.g=null,i.i&&(i.i=!1,Mr(i))},i.j);const e=i.h;i.h=null,i.m.apply(null,e)}Ft(ci,Cn),(ne=ci.prototype).da=!1,ne.S=null,ne.kb=function(){if(this.da){var i=Date.now()-this.l;0<i&&i<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-i):(this.S&&(this.g.clearTimeout(this.S),this.S=null),Wn(this,"tick"),this.da&&(Vi(this),this.start()))}},ne.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},ne.M=function(){ci.Z.M.call(this),Vi(this),delete this.g};class ss extends Sn{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Mr(this)}M(){super.M(),this.g&&(ce.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ir(i){Sn.call(this),this.h=i,this.g={}}Ft(Ir,Sn);var oi=[];function Fs(i,e,t,o){Array.isArray(t)||(t&&(oi[0]=t.toString()),t=oi);for(var u=0;u<t.length;u++){var d=ge(e,t[u],o||i.handleEvent,!1,i.h||i);if(!d)break;i.g[d.key]=d}}function Ms(i){rr(i.g,function(e,t){this.g.hasOwnProperty(t)&&Ut(e)},i),i.g={}}function ro(){this.g=!0}function Zi(i,e,t,o){i.info(function(){return"XMLHTTP TEXT ("+e+"): "+function Ls(i,e){if(!i.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(i=0;i<t.length;i++)if(Array.isArray(t[i])){var o=t[i];if(!(2>o.length)){var u=o[1];if(Array.isArray(u)&&!(1>u.length)){var d=u[0];if("noop"!=d&&"stop"!=d&&"close"!=d)for(var g=1;g<u.length;g++)u[g]=""}}}return si(t)}catch{return e}}(i,t)+(o?" "+o:"")})}Ir.prototype.M=function(){Ir.Z.M.call(this),Ms(this)},Ir.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},ro.prototype.Aa=function(){this.g=!1},ro.prototype.info=function(){};var Rs={},Wr=null;function Ae(){return Wr=Wr||new Cn}function Te(i){gt.call(this,Rs.Ma,i)}function Pe(i){const e=Ae();Wn(e,new Te(e,i))}function ot(i,e){gt.call(this,Rs.STAT_EVENT,i),this.stat=e}function wt(i){const e=Ae();Wn(e,new ot(e,i))}function Kt(i,e){gt.call(this,Rs.Na,i),this.size=e}function _n(i,e){if("function"!=typeof i)throw Error("Fn must not be null and must be a function");return ce.setTimeout(function(){i()},e)}Rs.Ma="serverreachability",Ft(Te,gt),Rs.STAT_EVENT="statevent",Ft(ot,gt),Rs.Na="timingevent",Ft(Kt,gt);var di={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},or={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function hi(){}function Vs(){}hi.prototype.h=null;var fi,ai={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function Br(){gt.call(this,"d")}function Ui(){gt.call(this,"c")}function vo(){}function pi(i,e,t,o){this.l=i,this.j=e,this.m=t,this.X=o||1,this.V=new Ir(this),this.P=Pi,this.W=new ci(i=Jn?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new os}function os(){this.i=null,this.g="",this.h=!1}Ft(Br,gt),Ft(Ui,gt),Ft(vo,hi),vo.prototype.g=function(){return new XMLHttpRequest},vo.prototype.i=function(){return{}},fi=new vo;var Pi=45e3,as={},Ws={};function gs(i,e,t){i.K=1,i.v=uo(ui(e)),i.s=t,i.U=!0,wo(i,null)}function wo(i,e){i.F=Date.now(),lr(i),i.A=ui(i.v);var t=i.A,o=i.X;Array.isArray(o)||(o=[String(o)]),Dr(t.h,"t",o),i.C=0,t=i.l.H,i.h=new os,i.g=Ma(i.l,t?e:null,!i.s),0<i.O&&(i.L=new ss(qt(i.Ia,i,i.g),i.O)),Fs(i.V,i.g,"readystatechange",i.gb),e=i.H?vi(i.H):{},i.s?(i.u||(i.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",i.g.ea(i.A,i.u,i.s,e)):(i.u="GET",i.g.ea(i.A,i.u,null,e)),Pe(1),function Rr(i,e,t,o,u,d){i.info(function(){if(i.g)if(d)for(var g="",C=d.split("&"),V=0;V<C.length;V++){var H=C[V].split("=");if(1<H.length){var J=H[0];H=H[1];var me=J.split("_");g=2<=me.length&&"type"==me[1]?g+(J+"=")+H+"&":g+(J+"=redacted&")}}else g=null;else g=d;return"XMLHTTP REQ ("+o+") [attempt "+u+"]: "+e+"\n"+t+"\n"+g})}(i.j,i.u,i.A,i.m,i.X,i.s)}function $o(i){return!!i.g&&"GET"==i.u&&2!=i.K&&i.l.Ba}function qs(i,e,t){let u,o=!0;for(;!i.I&&i.C<t.length;){if(u=ms(i,t),u==Ws){4==e&&(i.o=4,wt(14),o=!1),Zi(i.j,i.m,null,"[Incomplete Response]");break}if(u==as){i.o=4,wt(15),Zi(i.j,i.m,t,"[Invalid Chunk]"),o=!1;break}Zi(i.j,i.m,u,null),ao(i,u)}$o(i)&&u!=Ws&&u!=as&&(i.h.g="",i.C=0),4!=e||0!=t.length||i.h.h||(i.o=1,wt(16),o=!1),i.i=i.i&&o,o?0<t.length&&!i.aa&&(i.aa=!0,(e=i.l).g==i&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+t.length),ei(e),e.L=!0,wt(11))):(Zi(i.j,i.m,t,"[Invalid Chunked Response]"),qr(i),oo(i))}function ms(i,e){var t=i.C,o=e.indexOf("\n",t);return-1==o?Ws:(t=Number(e.substring(t,o)),isNaN(t)?as:(o+=1)+t>e.length?Ws:(e=e.substr(o,t),i.C=o+t,e))}function lr(i){i.Y=Date.now()+i.P,xi(i,i.P)}function xi(i,e){if(null!=i.B)throw Error("WatchDog timer not null");i.B=_n(qt(i.eb,i),e)}function Ii(i){i.B&&(ce.clearTimeout(i.B),i.B=null)}function oo(i){0==i.l.G||i.I||xu(i.l,i)}function qr(i){Ii(i);var e=i.L;e&&"function"==typeof e.na&&e.na(),i.L=null,Vi(i.W),Ms(i.V),i.g&&(e=i.g,i.g=null,e.abort(),e.na())}function ao(i,e){try{var t=i.l;if(0!=t.G&&(t.g==i||L(t.i,i)))if(t.I=i.N,!i.J&&L(t.i,i)&&3==t.G){try{var o=t.Ca.g.parse(e)}catch{o=null}if(Array.isArray(o)&&3==o.length){var u=o;if(0==u[0]){e:if(!t.u){if(t.g){if(!(t.g.F+3e3<i.F))break e;xa(t),gr(t)}zo(t),wt(18)}}else t.ta=u[1],0<t.ta-t.U&&37500>u[2]&&t.N&&0==t.A&&!t.v&&(t.v=_n(qt(t.ab,t),6e3));if(1>=ta(t.i)&&t.ka){try{t.ka()}catch{}t.ka=void 0}}else Ro(t,11)}else if((i.J||t.g==i)&&xa(t),!Jt(e))for(u=t.Ca.g.parse(e),e=0;e<u.length;e++){let H=u[e];if(t.U=H[0],H=H[1],2==t.G)if("c"==H[0]){t.J=H[1],t.la=H[2];const J=H[3];null!=J&&(t.ma=J,t.h.info("VER="+t.ma));const me=H[4];null!=me&&(t.za=me,t.h.info("SVER="+t.za));const Ue=H[5];null!=Ue&&"number"==typeof Ue&&0<Ue&&(t.K=o=1.5*Ue,t.h.info("backChannelRequestTimeoutMs_="+o)),o=t;const st=i.g;if(st){const ht=st.g?st.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ht){var d=o.i;!d.g&&(Ln(ht,"spdy")||Ln(ht,"quic")||Ln(ht,"h2"))&&(d.j=d.l,d.g=new Set,d.h&&(P(d,d.h),d.h=null))}if(o.D){const Wt=st.g?st.g.getResponseHeader("X-HTTP-Session-Id"):null;Wt&&(o.sa=Wt,kn(o.F,o.D,Wt))}}t.G=3,t.j&&t.j.xa(),t.$&&(t.O=Date.now()-i.F,t.h.info("Handshake RTT: "+t.O+"ms"));var g=i;if((o=t).oa=Wo(o,o.H?o.la:null,o.W),g.J){R(o.i,g);var C=g,V=o.K;V&&C.setTimeout(V),C.B&&(Ii(C),lr(C)),o.g=g}else Ns(o);0<t.l.length&&ws(t)}else"stop"!=H[0]&&"close"!=H[0]||Ro(t,7);else 3==t.G&&("stop"==H[0]||"close"==H[0]?"stop"==H[0]?Ro(t,7):Xr(t):"noop"!=H[0]&&t.j&&t.j.wa(H),t.A=0)}Pe(4)}catch{}}function Fr(i,e){if(i.forEach&&"function"==typeof i.forEach)i.forEach(e,void 0);else if(lt(i)||"string"==typeof i)Nr(i,e,void 0);else{if(i.T&&"function"==typeof i.T)var t=i.T();else if(i.R&&"function"==typeof i.R)t=void 0;else if(lt(i)||"string"==typeof i){t=[];for(var o=i.length,u=0;u<o;u++)t.push(u)}else for(u in t=[],o=0,i)t[o++]=u;o=function ea(i){if(i.R&&"function"==typeof i.R)return i.R();if("string"==typeof i)return i.split("");if(lt(i)){for(var e=[],t=i.length,o=0;o<t;o++)e.push(i[o]);return e}for(o in e=[],t=0,i)e[t++]=i[o];return e}(i),u=o.length;for(var d=0;d<u;d++)e.call(void 0,o[d],t&&t[d],i)}}function us(i,e){this.h={},this.g=[],this.i=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var o=0;o<t;o+=2)this.set(arguments[o],arguments[o+1])}else if(i)if(i instanceof us)for(t=i.T(),o=0;o<t.length;o++)this.set(t[o],i.get(t[o]));else for(o in i)this.set(o,i[o])}function Ho(i){if(i.i!=i.g.length){for(var e=0,t=0;e<i.g.length;){var o=i.g[e];yr(i.h,o)&&(i.g[t++]=o),e++}i.g.length=t}if(i.i!=i.g.length){var u={};for(t=e=0;e<i.g.length;)yr(u,o=i.g[e])||(i.g[t++]=o,u[o]=1),e++;i.g.length=t}}function yr(i,e){return Object.prototype.hasOwnProperty.call(i,e)}(ne=pi.prototype).setTimeout=function(i){this.P=i},ne.gb=function(i){i=i.target;const e=this.L;e&&3==Qe(i)?e.l():this.Ia(i)},ne.Ia=function(i){try{if(i==this.g)e:{const J=Qe(this.g);var e=this.g.Da();const me=this.g.ba();if(!(3>J)&&(3!=J||Jn||this.g&&(this.h.h||this.g.ga()||Zt(this.g)))){this.I||4!=J||7==e||Pe(8==e||0>=me?3:2),Ii(this);var t=this.g.ba();this.N=t;t:if($o(this)){var o=Zt(this.g);i="";var u=o.length,d=4==Qe(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){qr(this),oo(this);var g="";break t}this.h.i=new ce.TextDecoder}for(e=0;e<u;e++)this.h.h=!0,i+=this.h.i.decode(o[e],{stream:d&&e==u-1});o.splice(0,u),this.h.g+=i,this.C=0,g=this.h.g}else g=this.g.ga();if(this.i=200==t,function io(i,e,t,o,u,d,g){i.info(function(){return"XMLHTTP RESP ("+o+") [ attempt "+u+"]: "+e+"\n"+t+"\n"+d+" "+g})}(this.j,this.u,this.A,this.m,this.X,J,t),this.i){if(this.$&&!this.J){t:{if(this.g){var C,V=this.g;if((C=V.g?V.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Jt(C)){var H=C;break t}}H=null}if(!(t=H)){this.i=!1,this.o=3,wt(12),qr(this),oo(this);break e}Zi(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,ao(this,t)}this.U?(qs(this,J,g),Jn&&this.i&&3==J&&(Fs(this.V,this.W,"tick",this.fb),this.W.start())):(Zi(this.j,this.m,g,null),ao(this,g)),4==J&&qr(this),this.i&&!this.I&&(4==J?xu(this.l,this):(this.i=!1,lr(this)))}else 400==t&&0<g.indexOf("Unknown SID")?(this.o=3,wt(12)):(this.o=0,wt(13)),qr(this),oo(this)}}}catch{}},ne.fb=function(){if(this.g){var i=Qe(this.g),e=this.g.ga();this.C<e.length&&(Ii(this),qs(this,i,e),this.i&&4!=i&&lr(this))}},ne.cancel=function(){this.I=!0,qr(this)},ne.eb=function(){this.B=null;const i=Date.now();0<=i-this.Y?(function jo(i,e){i.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(Pe(3),wt(17)),qr(this),this.o=2,oo(this)):xi(this,this.Y-i)},(ne=us.prototype).R=function(){Ho(this);for(var i=[],e=0;e<this.g.length;e++)i.push(this.h[this.g[e]]);return i},ne.T=function(){return Ho(this),this.g.concat()},ne.get=function(i,e){return yr(this.h,i)?this.h[i]:e},ne.set=function(i,e){yr(this.h,i)||(this.i++,this.g.push(i)),this.h[i]=e},ne.forEach=function(i,e){for(var t=this.T(),o=0;o<t.length;o++){var u=t[o],d=this.get(u);i.call(e,d,u,this)}};var jr=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Bi(i,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,i instanceof Bi){this.g=void 0!==e?e:i.g,Hn(this,i.j),this.s=i.s,Sr(this,i.i),ji(this,i.m),this.l=i.l,e=i.h;var t=new ut;t.i=e.i,e.g&&(t.g=new us(e.g),t.h=e.h),Go(this,t),this.o=i.o}else i&&(t=String(i).match(jr))?(this.g=!!e,Hn(this,t[1]||"",!0),this.s=Zs(t[2]||""),Sr(this,t[3]||"",!0),ji(this,t[4]),this.l=Zs(t[5]||"",!0),Go(this,t[6]||"",!0),this.o=Zs(t[7]||"")):(this.g=!!e,this.h=new ut(null,this.g))}function ui(i){return new Bi(i)}function Hn(i,e,t){i.j=t?Zs(e,!0):e,i.j&&(i.j=i.j.replace(/:$/,""))}function Sr(i,e,t){i.i=t?Zs(e,!0):e}function ji(i,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);i.m=e}else i.m=null}function Go(i,e,t){e instanceof ut?(i.h=e,function js(i,e){e&&!i.j&&(Tn(i),i.i=null,i.g.forEach(function(t,o){var u=o.toLowerCase();o!=u&&(Ys(this,o),Dr(this,u,t))},i)),i.j=e}(i.h,i.g)):(t||(e=Ks(e,ki)),i.h=new ut(e,i.g))}function kn(i,e,t){i.h.set(e,t)}function uo(i){return kn(i,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),i}function Zs(i,e){return i?e?decodeURI(i.replace(/%25/g,"%2525")):decodeURIComponent(i):""}function Ks(i,e,t){return"string"==typeof i?(i=encodeURI(i).replace(e,xo),t&&(i=i.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),i):null}function xo(i){return"%"+((i=i.charCodeAt(0))>>4&15).toString(16)+(15&i).toString(16)}Bi.prototype.toString=function(){var i=[],e=this.j;e&&i.push(Ks(e,Us,!0),":");var t=this.i;return(t||"file"==e)&&(i.push("//"),(e=this.s)&&i.push(Ks(e,Us,!0),"@"),i.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&i.push(":",String(t))),(t=this.l)&&(this.i&&"/"!=t.charAt(0)&&i.push("/"),i.push(Ks(t,"/"==t.charAt(0)?ys:$i,!0))),(t=this.h.toString())&&i.push("?",t),(t=this.o)&&i.push("#",Ks(t,Yi)),i.join("")};var Us=/[#\/\?@]/g,$i=/[#\?:]/g,ys=/[#\?]/g,ki=/[#\?@]/g,Yi=/#/g;function ut(i,e){this.h=this.g=null,this.i=i||null,this.j=!!e}function Tn(i){i.g||(i.g=new us,i.h=0,i.i&&function Ki(i,e){if(i){i=i.split("&");for(var t=0;t<i.length;t++){var o=i[t].indexOf("="),u=null;if(0<=o){var d=i[t].substring(0,o);u=i[t].substring(o+1)}else d=i[t];e(d,u?decodeURIComponent(u.replace(/\+/g," ")):"")}}}(i.i,function(e,t){i.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function Ys(i,e){Tn(i),e=Hi(i,e),yr(i.g.h,e)&&(i.i=null,i.h-=i.g.get(e).length,yr((i=i.g).h,e)&&(delete i.h[e],i.i--,i.g.length>2*i.i&&Ho(i)))}function Bs(i,e){return Tn(i),e=Hi(i,e),yr(i.g.h,e)}function Dr(i,e,t){Ys(i,e),0<t.length&&(i.i=null,i.g.set(Hi(i,e),zr(t)),i.h+=t.length)}function Hi(i,e){return e=String(e),i.j&&(e=e.toLowerCase()),e}function Mo(i){this.l=i||Qs,i=ce.PerformanceNavigationTiming?0<(i=ce.performance.getEntriesByType("navigation")).length&&("hq"==i[0].nextHopProtocol||"h2"==i[0].nextHopProtocol):!!(ce.g&&ce.g.Ea&&ce.g.Ea()&&ce.g.Ea().Zb),this.j=i?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(ne=ut.prototype).add=function(i,e){Tn(this),this.i=null,i=Hi(this,i);var t=this.g.get(i);return t||this.g.set(i,t=[]),t.push(e),this.h+=1,this},ne.forEach=function(i,e){Tn(this),this.g.forEach(function(t,o){Nr(t,function(u){i.call(e,u,o,this)},this)},this)},ne.T=function(){Tn(this);for(var i=this.g.R(),e=this.g.T(),t=[],o=0;o<e.length;o++)for(var u=i[o],d=0;d<u.length;d++)t.push(e[o]);return t},ne.R=function(i){Tn(this);var e=[];if("string"==typeof i)Bs(this,i)&&(e=Tr(e,this.g.get(Hi(this,i))));else{i=this.g.R();for(var t=0;t<i.length;t++)e=Tr(e,i[t])}return e},ne.set=function(i,e){return Tn(this),this.i=null,Bs(this,i=Hi(this,i))&&(this.h-=this.g.get(i).length),this.g.set(i,[e]),this.h+=1,this},ne.get=function(i,e){return i&&0<(i=this.R(i)).length?String(i[0]):e},ne.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var i=[],e=this.g.T(),t=0;t<e.length;t++){var o=e[t],u=encodeURIComponent(String(o));o=this.R(o);for(var d=0;d<o.length;d++){var g=u;""!==o[d]&&(g+="="+encodeURIComponent(String(o[d]))),i.push(g)}}return this.i=i.join("&")};var Qs=10;function lo(i){return!!i.h||!!i.g&&i.g.size>=i.j}function ta(i){return i.h?1:i.g?i.g.size:0}function L(i,e){return i.h?i.h==e:!!i.g&&i.g.has(e)}function P(i,e){i.g?i.g.add(e):i.h=e}function R(i,e){i.h&&i.h==e?i.h=null:i.g&&i.g.has(e)&&i.g.delete(e)}function Y(i){if(null!=i.h)return i.i.concat(i.h.D);if(null!=i.g&&0!==i.g.size){let e=i.i;for(const t of i.g.values())e=e.concat(t.D);return e}return zr(i.i)}function Ke(){}function Xt(){this.g=new Ke}function cr(i,e,t){const o=t||"";try{Fr(i,function(u,d){let g=u;_t(u)&&(g=si(u)),e.push(o+d+"="+encodeURIComponent(g))})}catch(u){throw e.push(o+"type="+encodeURIComponent("_badmap")),u}}function Di(i,e,t,o,u){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,u(o)}catch{}}function _r(i){this.l=i.$b||null,this.j=i.ib||!1}function _s(i,e){Cn.call(this),this.D=i,this.u=e,this.m=void 0,this.readyState=Js,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Mo.prototype.cancel=function(){if(this.i=Y(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const i of this.g.values())i.cancel();this.g.clear()}},Ke.prototype.stringify=function(i){return ce.JSON.stringify(i,void 0)},Ke.prototype.parse=function(i){return ce.JSON.parse(i,void 0)},Ft(_r,hi),_r.prototype.g=function(){return new _s(this.l,this.j)},_r.prototype.i=function(i){return function(){return i}}({}),Ft(_s,Cn);var Js=0;function vs(i){i.j.read().then(i.Sa.bind(i)).catch(i.ha.bind(i))}function Eo(i){i.readyState=4,i.l=null,i.j=null,i.A=null,co(i)}function co(i){i.onreadystatechange&&i.onreadystatechange.call(i)}(ne=_s.prototype).open=function(i,e){if(this.readyState!=Js)throw this.abort(),Error("Error reopening a connection");this.C=i,this.B=e,this.readyState=1,co(this)},ne.send=function(i){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};i&&(e.body=i),(this.D||ce).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},ne.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Eo(this)),this.readyState=Js},ne.Va=function(i){if(this.g&&(this.l=i,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=i.headers,this.readyState=2,co(this)),this.g&&(this.readyState=3,co(this),this.g)))if("arraybuffer"===this.responseType)i.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(typeof ce.ReadableStream<"u"&&"body"in i){if(this.j=i.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;vs(this)}else i.text().then(this.Ua.bind(this),this.ha.bind(this))},ne.Sa=function(i){if(this.g){if(this.u&&i.value)this.response.push(i.value);else if(!this.u){var e=i.value?i.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!i.done}))&&(this.response=this.responseText+=e)}i.done?Eo(this):co(this),3==this.readyState&&vs(this)}},ne.Ua=function(i){this.g&&(this.response=this.responseText=i,Eo(this))},ne.Ta=function(i){this.g&&(this.response=i,Eo(this))},ne.ha=function(){this.g&&Eo(this)},ne.setRequestHeader=function(i,e){this.v.append(i,e)},ne.getResponseHeader=function(i){return this.h&&this.h.get(i.toLowerCase())||""},ne.getAllResponseHeaders=function(){if(!this.h)return"";const i=[],e=this.h.entries();for(var t=e.next();!t.done;)i.push((t=t.value)[0]+": "+t[1]),t=e.next();return i.join("\r\n")},Object.defineProperty(_s.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(i){this.m=i?"include":"same-origin"}});var Ta=ce.JSON.parse;function dr(i){Cn.call(this),this.headers=new us,this.u=i||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=na,this.K=this.L=!1}Ft(dr,Cn);var na="",Sa=/^https?$/i,ha=["POST","PUT"];function x(i){return"content-type"==i.toLowerCase()}function $(i,e){i.h=!1,i.g&&(i.l=!0,i.g.abort(),i.l=!1),i.j=e,i.m=5,N(i),de(i)}function N(i){i.D||(i.D=!0,Wn(i,"complete"),Wn(i,"error"))}function Z(i){if(i.h&&typeof ye<"u"&&(!i.C[1]||4!=Qe(i)||2!=i.ba()))if(i.v&&4==Qe(i))qi(i.Fa,0,i);else if(Wn(i,"readystatechange"),4==Qe(i)){i.h=!1;try{const C=i.ba();e:switch(C){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var o;if(o=0===C){var u=String(i.H).match(jr)[1]||null;if(!u&&ce.self&&ce.self.location){var d=ce.self.location.protocol;u=d.substr(0,d.length-1)}o=!Sa.test(u?u.toLowerCase():"")}t=o}if(t)Wn(i,"complete"),Wn(i,"success");else{i.m=6;try{var g=2<Qe(i)?i.g.statusText:""}catch{g=""}i.j=g+" ["+i.ba()+"]",N(i)}}finally{de(i)}}}function de(i,e){if(i.g){Be(i);const t=i.g,o=i.C[0]?Oe:null;i.g=null,i.C=null,e||Wn(i,"ready");try{t.onreadystatechange=o}catch{}}}function Be(i){i.g&&i.K&&(i.g.ontimeout=null),i.A&&(ce.clearTimeout(i.A),i.A=null)}function Qe(i){return i.g?i.g.readyState:0}function Zt(i){try{if(!i.g)return null;if("response"in i.g)return i.g.response;switch(i.J){case na:case"text":return i.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in i.g)return i.g.mozResponseArrayBuffer}return null}catch{return null}}function er(i,e,t){e:{for(o in t){var o=!1;break e}o=!0}o||(t=function Yn(i){let e="";return rr(i,function(t,o){e+=o,e+=":",e+=t,e+="\r\n"}),e}(t),"string"==typeof i?null!=t&&encodeURIComponent(String(t)):kn(i,e,t))}function qn(i,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[i]||e}function Un(i){this.za=0,this.l=[],this.h=new ro,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=qn("failFast",!1,i),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=qn("baseRetryDelayMs",5e3,i),this.$a=qn("retryDelaySeedMs",1e4,i),this.Ya=qn("forwardChannelMaxRetries",2,i),this.ra=qn("forwardChannelRequestTimeoutMs",2e4,i),this.qa=i&&i.xmlHttpFactory||void 0,this.Ba=i&&i.Yb||!1,this.K=void 0,this.H=i&&i.supportsCrossDomainXhr||!1,this.J="",this.i=new Mo(i&&i.concurrentRequestLimit),this.Ca=new Xt,this.ja=i&&i.fastHandshake||!1,this.Ra=i&&i.Wb||!1,i&&i.Aa&&this.h.Aa(),i&&i.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&i&&i.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!i||!1!==i.Xb}function Xr(i){if(Or(i),3==i.G){var e=i.V++,t=ui(i.F);kn(t,"SID",i.J),kn(t,"RID",e),kn(t,"TYPE","terminate"),ds(i,t),(e=new pi(i,i.h,e,void 0)).K=2,e.v=uo(ui(t)),t=!1,ce.navigator&&ce.navigator.sendBeacon&&(t=ce.navigator.sendBeacon(e.v.toString(),"")),!t&&ce.Image&&((new Image).src=e.v,t=!0),t||(e.g=Ma(e.l,null),e.g.ea(e.v)),e.F=Date.now(),lr(e)}pa(i)}function gr(i){i.g&&(ei(i),i.g.cancel(),i.g=null)}function Or(i){gr(i),i.u&&(ce.clearTimeout(i.u),i.u=null),xa(i),i.i.cancel(),i.m&&("number"==typeof i.m&&ce.clearTimeout(i.m),i.m=null)}function Os(i,e){i.l.push(new class{constructor(i,e){this.h=i,this.g=e}}(i.Za++,e)),3==i.G&&ws(i)}function ws(i){lo(i.i)||i.m||(i.m=!0,Ai(i.Ha,i),i.C=0)}function ho(i,e){var t;t=e?e.m:i.V++;const o=ui(i.F);kn(o,"SID",i.J),kn(o,"RID",t),kn(o,"AID",i.U),ds(i,o),i.o&&i.s&&er(o,i.o,i.s),t=new pi(i,i.h,t,i.C+1),null===i.o&&(t.H=i.s),e&&(i.l=e.D.concat(i.l)),e=$s(i,t,1e3),t.setTimeout(Math.round(.5*i.ra)+Math.round(.5*i.ra*Math.random())),P(i.i,t),gs(t,o,e)}function ds(i,e){i.j&&Fr({},function(t,o){kn(e,o,t)})}function $s(i,e,t){t=Math.min(i.l.length,t);var o=i.j?qt(i.j.Oa,i.j,i):null;e:{var u=i.l;let d=-1;for(;;){const g=["count="+t];-1==d?0<t?(d=u[0].h,g.push("ofs="+d)):d=0:g.push("ofs="+d);let C=!0;for(let V=0;V<t;V++){let H=u[V].h;const J=u[V].g;if(H-=d,0>H)d=Math.max(0,u[V].h-100),C=!1;else try{cr(J,g,"req"+H+"_")}catch{o&&o(J)}}if(C){o=g.join("&");break e}}}return i=i.l.splice(0,t),e.D=i,o}function Ns(i){i.g||i.u||(i.Y=1,Ai(i.Ga,i),i.A=0)}function zo(i){return!(i.g||i.u||3<=i.A||(i.Y++,i.u=_n(qt(i.Ga,i),ou(i,i.A)),i.A++,0))}function ei(i){null!=i.B&&(ce.clearTimeout(i.B),i.B=null)}function fa(i){i.g=new pi(i,i.h,"rpc",i.Y),null===i.o&&(i.g.H=i.s),i.g.O=0;var e=ui(i.oa);kn(e,"RID","rpc"),kn(e,"SID",i.J),kn(e,"CI",i.N?"0":"1"),kn(e,"AID",i.U),ds(i,e),kn(e,"TYPE","xmlhttp"),i.o&&i.s&&er(e,i.o,i.s),i.K&&i.g.setTimeout(i.K);var t=i.g;i=i.la,t.K=1,t.v=uo(ui(e)),t.s=null,t.U=!0,wo(t,i)}function xa(i){null!=i.v&&(ce.clearTimeout(i.v),i.v=null)}function xu(i,e){var t=null;if(i.g==e){xa(i),ei(i),i.g=null;var o=2}else{if(!L(i.i,e))return;t=e.D,R(i.i,e),o=1}if(i.I=e.N,0!=i.G)if(e.i)if(1==o){t=e.s?e.s.length:0,e=Date.now()-e.F;var u=i.C;Wn(o=Ae(),new Kt(o,t,e,u)),ws(i)}else Ns(i);else if(3==(u=e.o)||0==u&&0<i.I||!(1==o&&function Xs(i,e){return!(ta(i.i)>=i.i.j-(i.m?1:0)||(i.m?(i.l=e.D.concat(i.l),0):1==i.G||2==i.G||i.C>=(i.Xa?0:i.Ya)||(i.m=_n(qt(i.Ha,i,e),ou(i,i.C)),i.C++,0)))}(i,e)||2==o&&zo(i)))switch(t&&0<t.length&&(e=i.i,e.i=e.i.concat(t)),u){case 1:Ro(i,5);break;case 4:Ro(i,10);break;case 3:Ro(i,6);break;default:Ro(i,2)}}function ou(i,e){let t=i.Pa+Math.floor(Math.random()*i.$a);return i.j||(t*=2),t*e}function Ro(i,e){if(i.h.info("Error code "+e),2==e){var t=null;i.j&&(t=null);var o=qt(i.jb,i);t||(t=new Bi("//www.google.com/images/cleardot.gif"),ce.location&&"http"==ce.location.protocol||Hn(t,"https"),uo(t)),function cs(i,e){const t=new ro;if(ce.Image){const o=new Image;o.onload=rn(Di,t,o,"TestLoadImage: loaded",!0,e),o.onerror=rn(Di,t,o,"TestLoadImage: error",!1,e),o.onabort=rn(Di,t,o,"TestLoadImage: abort",!1,e),o.ontimeout=rn(Di,t,o,"TestLoadImage: timeout",!1,e),ce.setTimeout(function(){o.ontimeout&&o.ontimeout()},1e4),o.src=i}else e(!1)}(t.toString(),o)}else wt(2);i.G=0,i.j&&i.j.va(e),pa(i),Or(i)}function pa(i){i.G=0,i.I=-1,i.j&&((0!=Y(i.i).length||0!=i.l.length)&&(i.i.i.length=0,zr(i.l),i.l.length=0),i.j.ua())}function Wo(i,e,t){let o=function Zr(i){return i instanceof Bi?ui(i):new Bi(i,void 0)}(t);if(""!=o.i)e&&Sr(o,e+"."+o.i),ji(o,o.m);else{const u=ce.location;o=function pn(i,e,t,o){var u=new Bi(null,void 0);return i&&Hn(u,i),e&&Sr(u,e),t&&ji(u,t),o&&(u.l=o),u}(u.protocol,e?e+"."+u.hostname:u.hostname,+u.port,t)}return i.aa&&rr(i.aa,function(u,d){kn(o,d,u)}),t=i.sa,(e=i.D)&&t&&kn(o,e,t),kn(o,"VER",i.ma),ds(i,o),o}function Ma(i,e,t){if(e&&!i.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new dr(t&&i.Ba&&!i.qa?new _r({ib:!0}):i.qa)).L=i.H,e}function ga(){}function ma(){if($t&&!(10<=Number(_e)))throw Error("Environmental error: no available transport.")}function Es(i,e){Cn.call(this),this.g=new Un(e),this.l=i,this.h=e&&e.messageUrlParams||null,i=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(i?i["X-Client-Protocol"]="webchannel":i={"X-Client-Protocol":"webchannel"}),this.g.s=i,i=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(i?i["X-WebChannel-Content-Type"]=e.messageContentType:i={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(i?i["X-WebChannel-Client-Profile"]=e.ya:i={"X-WebChannel-Client-Profile":e.ya}),this.g.P=i,(i=e&&e.httpHeadersOverwriteParam)&&!Jt(i)&&(this.g.o=i),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Jt(e)&&(this.g.D=e,null!==(i=this.h)&&e in i&&e in(i=this.h)&&delete i[e]),this.j=new Io(this)}function Fi(i){Br.call(this);var e=i.__sm__;if(e){e:{for(const t in e){i=t;break e}i=void 0}(this.i=i)&&(i=this.i,e=null!==e&&i in e?e[i]:void 0),this.data=e}else this.data=i}function ya(){Ui.call(this),this.status=1}function Io(i){this.g=i}(ne=dr.prototype).ea=function(i,e,t,o){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+i);e=e?e.toUpperCase():"GET",this.H=i,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():fi.g(),this.C=function so(i){return i.h||(i.h=i.i())}(this.u?this.u:fi),this.g.onreadystatechange=qt(this.Fa,this);try{this.F=!0,this.g.open(e,String(i),!0),this.F=!1}catch(d){return void $(this,d)}i=t||"";const u=new us(this.headers);o&&Fr(o,function(d,g){u.set(g,d)}),o=function Ar(i){e:{var e=x;const t=i.length,o="string"==typeof i?i.split(""):i;for(let u=0;u<t;u++)if(u in o&&e.call(void 0,o[u],u,i)){e=u;break e}e=-1}return 0>e?null:"string"==typeof i?i.charAt(e):i[e]}(u.T()),t=ce.FormData&&i instanceof ce.FormData,!(0<=Oi(ha,e))||o||t||u.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),u.forEach(function(d,g){this.g.setRequestHeader(g,d)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Be(this),0<this.B&&((this.K=function Aa(i){return $t&&function ie(){return function Vn(i){var e=Ie;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=i(9)}(function(){let i=0;const e=nr(String(wi)).split("."),t=nr("9").split("."),o=Math.max(e.length,t.length);for(let g=0;0==i&&g<o;g++){var u=e[g]||"",d=t[g]||"";do{if(u=/(\d*)(\D*)(.*)/.exec(u)||["","","",""],d=/(\d*)(\D*)(.*)/.exec(d)||["","","",""],0==u[0].length&&0==d[0].length)break;i=mr(0==u[1].length?0:parseInt(u[1],10),0==d[1].length?0:parseInt(d[1],10))||mr(0==u[2].length,0==d[2].length)||mr(u[2],d[2]),u=u[3],d=d[3]}while(0==i)}return 0<=i})}()&&"number"==typeof i.timeout&&void 0!==i.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=qt(this.pa,this)):this.A=qi(this.pa,this.B,this)),this.v=!0,this.g.send(i),this.v=!1}catch(d){$(this,d)}},ne.pa=function(){typeof ye<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Wn(this,"timeout"),this.abort(8))},ne.abort=function(i){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=i||7,Wn(this,"complete"),Wn(this,"abort"),de(this))},ne.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),de(this,!0)),dr.Z.M.call(this)},ne.Fa=function(){this.s||(this.F||this.v||this.l?Z(this):this.cb())},ne.cb=function(){Z(this)},ne.ba=function(){try{return 2<Qe(this)?this.g.status:-1}catch{return-1}},ne.ga=function(){try{return this.g?this.g.responseText:""}catch{return""}},ne.Qa=function(i){if(this.g){var e=this.g.responseText;return i&&0==e.indexOf(i)&&(e=e.substring(i.length)),Ta(e)}},ne.Da=function(){return this.m},ne.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(ne=Un.prototype).ma=8,ne.G=1,ne.hb=function(i){try{this.h.info("Origin Trials invoked: "+i)}catch{}},ne.Ha=function(i){if(this.m)if(this.m=null,1==this.G){if(!i){this.V=Math.floor(1e5*Math.random()),i=this.V++;const u=new pi(this,this.h,i,void 0);let d=this.s;if(this.P&&(d?(d=vi(d),Pr(d,this.P)):d=this.P),null===this.o&&(u.H=d),this.ja)e:{for(var e=0,t=0;t<this.l.length;t++){var o=this.l[t];if(void 0===(o="__data__"in o.g&&"string"==typeof(o=o.g.__data__)?o.length:void 0))break;if(4096<(e+=o)){e=t;break e}if(4096===e||t===this.l.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=$s(this,u,e),kn(t=ui(this.F),"RID",i),kn(t,"CVER",22),this.D&&kn(t,"X-HTTP-Session-Id",this.D),ds(this,t),this.o&&d&&er(t,this.o,d),P(this.i,u),this.Ra&&kn(t,"TYPE","init"),this.ja?(kn(t,"$req",e),kn(t,"SID","null"),u.$=!0,gs(u,t,null)):gs(u,t,e),this.G=2}}else 3==this.G&&(i?ho(this,i):0==this.l.length||lo(this.i)||ho(this))},ne.Ga=function(){if(this.u=null,fa(this),this.$&&!(this.L||null==this.g||0>=this.O)){var i=2*this.O;this.h.info("BP detection timer enabled: "+i),this.B=_n(qt(this.bb,this),i)}},ne.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,wt(10),gr(this),fa(this))},ne.ab=function(){null!=this.v&&(this.v=null,gr(this),zo(this),wt(19))},ne.jb=function(i){i?(this.h.info("Successfully pinged google.com"),wt(2)):(this.h.info("Failed to ping google.com"),wt(1))},(ne=ga.prototype).xa=function(){},ne.wa=function(){},ne.va=function(){},ne.ua=function(){},ne.Oa=function(){},ma.prototype.g=function(i,e){return new Es(i,e)},Ft(Es,Cn),Es.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var i=this.g,e=this.l,t=this.h||void 0;i.Wa&&(i.h.info("Origin Trials enabled."),Ai(qt(i.hb,i,e))),wt(0),i.W=e,i.aa=t||{},i.N=i.X,i.F=Wo(i,null,i.W),ws(i)},Es.prototype.close=function(){Xr(this.g)},Es.prototype.u=function(i){if("string"==typeof i){var e={};e.__data__=i,Os(this.g,e)}else this.v?((e={}).__data__=si(i),Os(this.g,e)):Os(this.g,i)},Es.prototype.M=function(){this.g.j=null,delete this.j,Xr(this.g),delete this.g,Es.Z.M.call(this)},Ft(Fi,Br),Ft(ya,Ui),Ft(Io,ga),Io.prototype.xa=function(){Wn(this.g,"a")},Io.prototype.wa=function(i){Wn(this.g,new Fi(i))},Io.prototype.va=function(i){Wn(this.g,new ya(i))},Io.prototype.ua=function(){Wn(this.g,"b")},ma.prototype.createWebChannel=ma.prototype.g,Es.prototype.send=Es.prototype.u,Es.prototype.open=Es.prototype.m,Es.prototype.close=Es.prototype.close,di.NO_ERROR=0,di.TIMEOUT=8,di.HTTP_ERROR=6,or.COMPLETE="complete",Vs.EventType=ai,ai.OPEN="a",ai.CLOSE="b",ai.ERROR="c",ai.MESSAGE="d",Cn.prototype.listen=Cn.prototype.N,dr.prototype.listenOnce=dr.prototype.O,dr.prototype.getLastError=dr.prototype.La,dr.prototype.getLastErrorCode=dr.prototype.Da,dr.prototype.getStatus=dr.prototype.ba,dr.prototype.getResponseJson=dr.prototype.Qa,dr.prototype.getResponseText=dr.prototype.ga,dr.prototype.send=dr.prototype.ea;var Oo=He.createWebChannelTransport=function(){return new ma},Ra=He.getStatEventTarget=function(){return Ae()},Mu=He.ErrorCode=di,Oa=He.EventType=or,Na=He.Event=Rs,gi=He.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},hs=He.FetchXmlHttpFactory=_r,No=He.WebChannel=Vs,ra=He.XhrIo=dr;const Ps="@firebase/firestore";class Ci{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ci.UNAUTHENTICATED=new Ci(null),Ci.GOOGLE_CREDENTIALS=new Ci("google-credentials-uid"),Ci.FIRST_PARTY=new Ci("first-party-uid"),Ci.MOCK_USER=new Ci("mock-user");let Do="9.9.4";const ks=new yt.Yd("@firebase/firestore");function _a(){return ks.logLevel}function It(i,...e){if(ks.logLevel<=yt.in.DEBUG){const t=e.map(Pa);ks.debug(`Firestore (${Do}): ${i}`,...t)}}function Cr(i,...e){if(ks.logLevel<=yt.in.ERROR){const t=e.map(Pa);ks.error(`Firestore (${Do}): ${i}`,...t)}}function fo(i,...e){if(ks.logLevel<=yt.in.WARN){const t=e.map(Pa);ks.warn(`Firestore (${Do}): ${i}`,...t)}}function Pa(i){if("string"==typeof i)return i;try{return JSON.stringify(i)}catch{return i}}function Gt(i="Unexpected state"){const e=`FIRESTORE (${Do}) INTERNAL ASSERTION FAILED: `+i;throw Cr(e),new Error(e)}function ln(i,e){i||Gt()}function Lt(i,e){return i}const We={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ft extends Je.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Mi{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class Ri{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Ya{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Ci.UNAUTHENTICATED))}shutdown(){}}class ia{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class wa{constructor(e){this.t=e,this.currentUser=Ci.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var o=this;let u=this.i;const d=H=>this.i!==u?(u=this.i,t(H)):Promise.resolve();let g=new Mi;this.o=()=>{this.i++,this.currentUser=this.u(),g.resolve(),g=new Mi,e.enqueueRetryable(()=>d(this.currentUser))};const C=()=>{const H=g;e.enqueueRetryable((0,he.Z)(function*(){yield H.promise,yield d(o.currentUser)}))},V=H=>{It("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=H,this.auth.addAuthTokenListener(this.o),C()};this.t.onInit(H=>V(H)),setTimeout(()=>{if(!this.auth){const H=this.t.getImmediate({optional:!0});H?V(H):(It("FirebaseAuthCredentialsProvider","Auth not yet detected"),g.resolve(),g=new Mi)}},0),C()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(o=>this.i!==e?(It("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):o?(ln("string"==typeof o.accessToken),new Ri(o.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return ln(null===e||"string"==typeof e),new Ci(e)}}class Ea{constructor(e,t,o,u){this.h=e,this.l=t,this.m=o,this.g=u,this.type="FirstParty",this.user=Ci.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(ln(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class b{constructor(e,t,o,u){this.h=e,this.l=t,this.m=o,this.g=u}getToken(){return Promise.resolve(new Ea(this.h,this.l,this.m,this.g))}start(e,t){e.enqueueRetryable(()=>t(Ci.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class I{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class M{constructor(e){this.T=e,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(e,t){const o=d=>{null!=d.error&&It("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${d.error.message}`);const g=d.token!==this.A;return this.A=d.token,It("FirebaseAppCheckTokenProvider",`Received ${g?"new":"existing"} token.`),g?t(d.token):Promise.resolve()};this.o=d=>{e.enqueueRetryable(()=>o(d))};const u=d=>{It("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=d,this.appCheck.addTokenListener(this.o)};this.T.onInit(d=>u(d)),setTimeout(()=>{if(!this.appCheck){const d=this.T.getImmediate({optional:!0});d?u(d):It("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(ln("string"==typeof t.token),this.A=t.token,new I(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function X(i){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(i);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let o=0;o<i;o++)t[o]=Math.floor(256*Math.random());return t}class Ce{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let o="";for(;o.length<20;){const u=X(40);for(let d=0;d<u.length;++d)o.length<20&&u[d]<t&&(o+=e.charAt(u[d]%e.length))}return o}}function ke(i,e){return i<e?-1:i>e?1:0}function bt(i,e,t){return i.length===e.length&&i.every((o,u)=>t(o,e[u]))}function nt(i){return i+"\0"}class Nt{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ft(We.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ft(We.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new ft(We.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ft(We.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Nt.fromMillis(Date.now())}static fromDate(e){return Nt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),o=Math.floor(1e6*(e-1e3*t));return new Nt(t,o)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ke(this.nanoseconds,e.nanoseconds):ke(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Tt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Tt(e)}static min(){return new Tt(new Nt(0,0))}static max(){return new Tt(new Nt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Qn{constructor(e,t,o){void 0===t?t=0:t>e.length&&Gt(),void 0===o?o=e.length-t:o>e.length-t&&Gt(),this.segments=e,this.offset=t,this.len=o}get length(){return this.len}isEqual(e){return 0===Qn.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Qn?e.forEach(o=>{t.push(o)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,o=this.limit();t<o;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const o=Math.min(e.length,t.length);for(let u=0;u<o;u++){const d=e.get(u),g=t.get(u);if(d<g)return-1;if(d>g)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Yt extends Qn{construct(e,t,o){return new Yt(e,t,o)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const o of e){if(o.indexOf("//")>=0)throw new ft(We.INVALID_ARGUMENT,`Invalid segment (${o}). Paths must not contain // in them.`);t.push(...o.split("/").filter(u=>u.length>0))}return new Yt(t)}static emptyPath(){return new Yt([])}}const Gn=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class nn extends Qn{construct(e,t,o){return new nn(e,t,o)}static isValidIdentifier(e){return Gn.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),nn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new nn(["__name__"])}static fromServerFormat(e){const t=[];let o="",u=0;const d=()=>{if(0===o.length)throw new ft(We.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(o),o=""};let g=!1;for(;u<e.length;){const C=e[u];if("\\"===C){if(u+1===e.length)throw new ft(We.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const V=e[u+1];if("\\"!==V&&"."!==V&&"`"!==V)throw new ft(We.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);o+=V,u+=2}else"`"===C?(g=!g,u++):"."!==C||g?(o+=C,u++):(d(),u++)}if(d(),g)throw new ft(We.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new nn(t)}static emptyPath(){return new nn([])}}class Dt{constructor(e){this.path=e}static fromPath(e){return new Dt(Yt.fromString(e))}static fromName(e){return new Dt(Yt.fromString(e).popFirst(5))}static empty(){return new Dt(Yt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Yt.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Yt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Dt(new Yt(e.slice()))}}class wr{constructor(e,t,o,u){this.indexId=e,this.collectionGroup=t,this.fields=o,this.indexState=u}}function Kr(i){return i.fields.find(e=>2===e.kind)}function Qi(i){return i.fields.filter(e=>2!==e.kind)}wr.UNKNOWN_ID=-1;class Yr{constructor(e,t){this.fieldPath=e,this.kind=t}}class Po{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Po(0,$r.min())}}function Co(i,e){const t=i.toTimestamp().seconds,o=i.toTimestamp().nanoseconds+1,u=Tt.fromTimestamp(1e9===o?new Nt(t+1,0):new Nt(t,o));return new $r(u,Dt.empty(),e)}function Ji(i){return new $r(i.readTime,i.key,-1)}class $r{constructor(e,t,o){this.readTime=e,this.documentKey=t,this.largestBatchId=o}static min(){return new $r(Tt.min(),Dt.empty(),-1)}static max(){return new $r(Tt.max(),Dt.empty(),-1)}}function au(i,e){let t=i.readTime.compareTo(e.readTime);return 0!==t?t:(t=Dt.comparator(i.documentKey,e.documentKey),0!==t?t:ke(i.largestBatchId,e.largestBatchId))}const ka="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class sa{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function ko(i){return Ku.apply(this,arguments)}function Ku(){return Ku=(0,he.Z)(function*(i){if(i.code!==We.FAILED_PRECONDITION||i.message!==ka)throw i;It("LocalStore","Unexpectedly lost primary lease")}),Ku.apply(this,arguments)}class je{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Gt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new je((o,u)=>{this.nextCallback=d=>{this.wrapSuccess(e,d).next(o,u)},this.catchCallback=d=>{this.wrapFailure(t,d).next(o,u)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof je?t:je.resolve(t)}catch(t){return je.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):je.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):je.reject(t)}static resolve(e){return new je((t,o)=>{t(e)})}static reject(e){return new je((t,o)=>{o(e)})}static waitFor(e){return new je((t,o)=>{let u=0,d=0,g=!1;e.forEach(C=>{++u,C.next(()=>{++d,g&&d===u&&t()},V=>o(V))}),g=!0,d===u&&t()})}static or(e){let t=je.resolve(!1);for(const o of e)t=t.next(u=>u?je.resolve(u):o());return t}static forEach(e,t){const o=[];return e.forEach((u,d)=>{o.push(t.call(this,u,d))}),this.waitFor(o)}static mapArray(e,t){return new je((o,u)=>{const d=e.length,g=new Array(d);let C=0;for(let V=0;V<d;V++){const H=V;t(e[H]).next(J=>{g[H]=J,++C,C===d&&o(g)},J=>u(J))}})}static doWhile(e,t){return new je((o,u)=>{const d=()=>{!0===e()?t().next(()=>{d()},u):o()};d()})}}class Fa{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.P=new Mi,this.transaction.oncomplete=()=>{this.P.resolve()},this.transaction.onabort=()=>{t.error?this.P.reject(new Ds(e,t.error)):this.P.resolve()},this.transaction.onerror=o=>{const u=S(o.target.error);this.P.reject(new Ds(e,u))}}static open(e,t,o,u){try{return new Fa(t,e.transaction(u,o))}catch(d){throw new Ds(t,d)}}get v(){return this.P.promise}abort(e){e&&this.P.reject(e),this.aborted||(It("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}V(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new v(t)}}class Is{constructor(e,t,o){this.name=e,this.version=t,this.S=o,12.2===Is.D((0,Je.z$)())&&Cr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return It("SimpleDb","Removing database:",e),w(window.indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!(0,Je.hl)())return!1;if(Is.N())return!0;const e=(0,Je.z$)(),t=Is.D(e),o=0<t&&t<10,u=Is.k(e),d=0<u&&u<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||o||d)}static N(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.M)}static O(e,t){return e.store(t)}static D(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),o=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(o)}static k(e){const t=e.match(/Android ([\d.]+)/i),o=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(o)}F(e){var t=this;return(0,he.Z)(function*(){return t.db||(It("SimpleDb","Opening database:",t.name),t.db=yield new Promise((o,u)=>{const d=indexedDB.open(t.name,t.version);d.onsuccess=g=>{o(g.target.result)},d.onblocked=()=>{u(new Ds(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},d.onerror=g=>{const C=g.target.error;u("VersionError"===C.name?new ft(We.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===C.name?new ft(We.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+C):new Ds(e,C))},d.onupgradeneeded=g=>{It("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',g.oldVersion),t.S.$(g.target.result,d.transaction,g.oldVersion,t.version).next(()=>{It("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.B&&(t.db.onversionchange=o=>t.B(o)),t.db})()}L(e){this.B=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,o,u){var d=this;return(0,he.Z)(function*(){const g="readonly"===t;let C=0;for(;;){++C;try{d.db=yield d.F(e);const V=Fa.open(d.db,e,g?"readonly":"readwrite",o),H=u(V).next(J=>(V.V(),J)).catch(J=>(V.abort(J),je.reject(J))).toPromise();return H.catch(()=>{}),yield V.v,H}catch(V){const H=V,J="FirebaseError"!==H.name&&C<3;if(It("SimpleDb","Transaction failed with error:",H.message,"Retrying:",J),d.close(),!J)return Promise.reject(H)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class Qa{constructor(e){this.U=e,this.q=!1,this.K=null}get isDone(){return this.q}get G(){return this.K}set cursor(e){this.U=e}done(){this.q=!0}j(e){this.K=e}delete(){return w(this.U.delete())}}class Ds extends ft{constructor(e,t){super(We.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Fo(i){return"IndexedDbTransactionError"===i.name}class v{constructor(e){this.store=e}put(e,t){let o;return void 0!==t?(It("SimpleDb","PUT",this.store.name,e,t),o=this.store.put(t,e)):(It("SimpleDb","PUT",this.store.name,"<auto-key>",e),o=this.store.put(e)),w(o)}add(e){return It("SimpleDb","ADD",this.store.name,e,e),w(this.store.add(e))}get(e){return w(this.store.get(e)).next(t=>(void 0===t&&(t=null),It("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return It("SimpleDb","DELETE",this.store.name,e),w(this.store.delete(e))}count(){return It("SimpleDb","COUNT",this.store.name),w(this.store.count())}W(e,t){const o=this.options(e,t);if(o.index||"function"!=typeof this.store.getAll){const u=this.cursor(o),d=[];return this.H(u,(g,C)=>{d.push(C)}).next(()=>d)}{const u=this.store.getAll(o.range);return new je((d,g)=>{u.onerror=C=>{g(C.target.error)},u.onsuccess=C=>{d(C.target.result)}})}}J(e,t){const o=this.store.getAll(e,null===t?void 0:t);return new je((u,d)=>{o.onerror=g=>{d(g.target.error)},o.onsuccess=g=>{u(g.target.result)}})}Y(e,t){It("SimpleDb","DELETE ALL",this.store.name);const o=this.options(e,t);o.X=!1;const u=this.cursor(o);return this.H(u,(d,g,C)=>C.delete())}Z(e,t){let o;t?o=e:(o={},t=e);const u=this.cursor(o);return this.H(u,t)}tt(e){const t=this.cursor({});return new je((o,u)=>{t.onerror=d=>{const g=S(d.target.error);u(g)},t.onsuccess=d=>{const g=d.target.result;g?e(g.primaryKey,g.value).next(C=>{C?g.continue():o()}):o()}})}H(e,t){const o=[];return new je((u,d)=>{e.onerror=g=>{d(g.target.error)},e.onsuccess=g=>{const C=g.target.result;if(!C)return void u();const V=new Qa(C),H=t(C.primaryKey,C.value,V);if(H instanceof je){const J=H.catch(me=>(V.done(),je.reject(me)));o.push(J)}V.isDone?u():null===V.G?C.continue():C.continue(V.G)}}).next(()=>je.waitFor(o))}options(e,t){let o;return void 0!==e&&("string"==typeof e?o=e:t=e),{index:o,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const o=this.store.index(e.index);return e.X?o.openKeyCursor(e.range,t):o.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function w(i){return new je((e,t)=>{i.onsuccess=o=>{e(o.target.result)},i.onerror=o=>{const u=S(o.target.error);t(u)}})}let _=!1;function S(i){const e=Is.D((0,Je.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(i.message.indexOf(t)>=0){const o=new ft("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return _||(_=!0,setTimeout(()=>{throw o},0)),o}}return i}class k{constructor(e,t){this.asyncQueue=e,this.et=t,this.task=null}start(){this.nt(15)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}nt(e){var t=this;It("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,he.Z)(function*(){t.task=null;try{It("IndexBackiller",`Documents written: ${yield t.et.st()}`)}catch(o){Fo(o)?It("IndexBackiller","Ignoring IndexedDB error during index backfill: ",o):yield ko(o)}yield t.nt(1)}))}}class z{constructor(e,t){this.localStore=e,this.persistence=t}st(e=50){var t=this;return(0,he.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",o=>t.it(o,e))})()}it(e,t){const o=new Set;let u=t,d=!0;return je.doWhile(()=>!0===d&&u>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(g=>{if(null!==g&&!o.has(g))return It("IndexBackiller",`Processing collection: ${g}`),this.rt(e,g,u).next(C=>{u-=C,o.add(g)});d=!1})).next(()=>t-u)}rt(e,t,o){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(u=>this.localStore.localDocuments.getNextDocuments(e,t,u,o).next(d=>{const g=d.changes;return this.localStore.indexManager.updateIndexEntries(e,g).next(()=>this.ot(u,d)).next(C=>(It("IndexBackiller",`Updating offset: ${C}`),this.localStore.indexManager.updateCollectionGroup(e,t,C))).next(()=>g.size)}))}ot(e,t){let o=e;return t.changes.forEach((u,d)=>{const g=Ji(d);au(g,o)>0&&(o=g)}),new $r(o.readTime,o.documentKey,Math.max(t.batchId,e.largestBatchId))}}class te{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=o=>this.ut(o),this.ct=o=>t.writeSequenceNumber(o))}ut(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ct&&this.ct(e),e}}function pe(i){let e=0;for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e++;return e}function Ye(i,e){for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e(t,i[t])}function At(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}te.at=-1;class en{constructor(e,t){this.comparator=e,this.root=t||yn.EMPTY}insert(e,t){return new en(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,yn.BLACK,null,null))}remove(e){return new en(this.comparator,this.root.remove(e,this.comparator).copy(null,null,yn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const o=this.comparator(e,t.key);if(0===o)return t.value;o<0?t=t.left:o>0&&(t=t.right)}return null}indexOf(e){let t=0,o=this.root;for(;!o.isEmpty();){const u=this.comparator(e,o.key);if(0===u)return t+o.left.size;u<0?o=o.left:(t+=o.left.size+1,o=o.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,o)=>(e(t,o),!1))}toString(){const e=[];return this.inorderTraversal((t,o)=>(e.push(`${t}:${o}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new zt(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new zt(this.root,e,this.comparator,!1)}getReverseIterator(){return new zt(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new zt(this.root,e,this.comparator,!0)}}class zt{constructor(e,t,o,u){this.isReverse=u,this.nodeStack=[];let d=1;for(;!e.isEmpty();)if(d=t?o(e.key,t):1,t&&u&&(d*=-1),d<0)e=this.isReverse?e.left:e.right;else{if(0===d){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class yn{constructor(e,t,o,u,d){this.key=e,this.value=t,this.color=o??yn.RED,this.left=u??yn.EMPTY,this.right=d??yn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,o,u,d){return new yn(e??this.key,t??this.value,o??this.color,u??this.left,d??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,o){let u=this;const d=o(e,u.key);return u=d<0?u.copy(null,null,null,u.left.insert(e,t,o),null):0===d?u.copy(null,t,null,null,null):u.copy(null,null,null,null,u.right.insert(e,t,o)),u.fixUp()}removeMin(){if(this.left.isEmpty())return yn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let o,u=this;if(t(e,u.key)<0)u.left.isEmpty()||u.left.isRed()||u.left.left.isRed()||(u=u.moveRedLeft()),u=u.copy(null,null,null,u.left.remove(e,t),null);else{if(u.left.isRed()&&(u=u.rotateRight()),u.right.isEmpty()||u.right.isRed()||u.right.left.isRed()||(u=u.moveRedRight()),0===t(e,u.key)){if(u.right.isEmpty())return yn.EMPTY;o=u.right.min(),u=u.copy(o.key,o.value,null,null,u.right.removeMin())}u=u.copy(null,null,null,null,u.right.remove(e,t))}return u.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,yn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,yn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Gt();const e=this.left.check();if(e!==this.right.check())throw Gt();return e+(this.isRed()?0:1)}}yn.EMPTY=null,yn.RED=!0,yn.BLACK=!1,yn.EMPTY=new class{constructor(){this.size=0}get key(){throw Gt()}get value(){throw Gt()}get color(){throw Gt()}get left(){throw Gt()}get right(){throw Gt()}copy(i,e,t,o,u){return this}insert(i,e,t){return new yn(i,e)}remove(i,e){return this}isEmpty(){return!0}inorderTraversal(i){return!1}reverseTraversal(i){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Bn{constructor(e){this.comparator=e,this.data=new en(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,o)=>(e(t),!1))}forEachInRange(e,t){const o=this.data.getIteratorFrom(e[0]);for(;o.hasNext();){const u=o.getNext();if(this.comparator(u.key,e[1])>=0)return;t(u.key)}}forEachWhile(e,t){let o;for(o=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();o.hasNext();)if(!e(o.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new go(this.data.getIterator())}getIteratorFrom(e){return new go(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(o=>{t=t.add(o)}),t}isEqual(e){if(!(e instanceof Bn)||this.size!==e.size)return!1;const t=this.data.getIterator(),o=e.data.getIterator();for(;t.hasNext();){const u=t.getNext().key,d=o.getNext().key;if(0!==this.comparator(u,d))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Bn(this.comparator);return t.data=e,t}}class go{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Gi(i){return i.hasNext()?i.getNext():void 0}class li{constructor(e){this.fields=e,e.sort(nn.comparator)}static empty(){return new li([])}unionWith(e){let t=new Bn(nn.comparator);for(const o of this.fields)t=t.add(o);for(const o of e)t=t.add(o);return new li(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return bt(this.fields,e.fields,(t,o)=>t.isEqual(o))}}class mi{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new mi(t)}static fromUint8Array(e){const t=function(o){let u="";for(let d=0;d<o.length;++d)u+=String.fromCharCode(o[d]);return u}(e);return new mi(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let o=0;o<e.length;o++)t[o]=e.charCodeAt(o);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ke(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}mi.EMPTY_BYTE_STRING=new mi("");const ja=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function mo(i){if(ln(!!i),"string"==typeof i){let e=0;const t=ja.exec(i);if(ln(!!t),t[1]){let u=t[1];u=(u+"000000000").substr(0,9),e=Number(u)}const o=new Date(i);return{seconds:Math.floor(o.getTime()/1e3),nanos:e}}return{seconds:Li(i.seconds),nanos:Li(i.nanos)}}function Li(i){return"number"==typeof i?i:"string"==typeof i?Number(i):0}function yi(i){return"string"==typeof i?mi.fromBase64String(i):mi.fromUint8Array(i)}function wl(i){var e,t;return"server_timestamp"===(null===(t=((null===(e=i?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function O(i){const e=i.mapValue.fields.__previous_value__;return wl(e)?O(e):e}function F(i){const e=mo(i.mapValue.fields.__local_write_time__.timestampValue);return new Nt(e.seconds,e.nanos)}class W{constructor(e,t,o,u,d,g,C,V){this.databaseId=e,this.appId=t,this.persistenceKey=o,this.host=u,this.ssl=d,this.forceLongPolling=g,this.autoDetectLongPolling=C,this.useFetchStreams=V}}class se{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new se("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof se&&e.projectId===this.projectId&&e.database===this.database}}function Ne(i){return null==i}function qe(i){return 0===i&&1/i==-1/0}function vt(i){return"number"==typeof i&&Number.isInteger(i)&&!qe(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}const Mt={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},gn={nullValue:"NULL_VALUE"};function vn(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?wl(i)?4:zc(i)?9007199254740991:10:Gt()}function xn(i,e){if(i===e)return!0;const t=vn(i);if(t!==vn(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return F(i).isEqual(F(e));case 3:return function(o,u){if("string"==typeof o.timestampValue&&"string"==typeof u.timestampValue&&o.timestampValue.length===u.timestampValue.length)return o.timestampValue===u.timestampValue;const d=mo(o.timestampValue),g=mo(u.timestampValue);return d.seconds===g.seconds&&d.nanos===g.nanos}(i,e);case 5:return i.stringValue===e.stringValue;case 6:return u=e,yi(i.bytesValue).isEqual(yi(u.bytesValue));case 7:return i.referenceValue===e.referenceValue;case 8:return function(o,u){return Li(o.geoPointValue.latitude)===Li(u.geoPointValue.latitude)&&Li(o.geoPointValue.longitude)===Li(u.geoPointValue.longitude)}(i,e);case 2:return function(o,u){if("integerValue"in o&&"integerValue"in u)return Li(o.integerValue)===Li(u.integerValue);if("doubleValue"in o&&"doubleValue"in u){const d=Li(o.doubleValue),g=Li(u.doubleValue);return d===g?qe(d)===qe(g):isNaN(d)&&isNaN(g)}return!1}(i,e);case 9:return bt(i.arrayValue.values||[],e.arrayValue.values||[],xn);case 10:return function(o,u){const d=o.mapValue.fields||{},g=u.mapValue.fields||{};if(pe(d)!==pe(g))return!1;for(const C in d)if(d.hasOwnProperty(C)&&(void 0===g[C]||!xn(d[C],g[C])))return!1;return!0}(i,e);default:return Gt()}var u}function mn(i,e){return void 0!==(i.values||[]).find(t=>xn(t,e))}function Qr(i,e){if(i===e)return 0;const t=vn(i),o=vn(e);if(t!==o)return ke(t,o);switch(t){case 0:case 9007199254740991:return 0;case 1:return ke(i.booleanValue,e.booleanValue);case 2:return function(u,d){const g=Li(u.integerValue||u.doubleValue),C=Li(d.integerValue||d.doubleValue);return g<C?-1:g>C?1:g===C?0:isNaN(g)?isNaN(C)?0:-1:1}(i,e);case 3:return Hs(i.timestampValue,e.timestampValue);case 4:return Hs(F(i),F(e));case 5:return ke(i.stringValue,e.stringValue);case 6:return function(u,d){const g=yi(u),C=yi(d);return g.compareTo(C)}(i.bytesValue,e.bytesValue);case 7:return function(u,d){const g=u.split("/"),C=d.split("/");for(let V=0;V<g.length&&V<C.length;V++){const H=ke(g[V],C[V]);if(0!==H)return H}return ke(g.length,C.length)}(i.referenceValue,e.referenceValue);case 8:return function(u,d){const g=ke(Li(u.latitude),Li(d.latitude));return 0!==g?g:ke(Li(u.longitude),Li(d.longitude))}(i.geoPointValue,e.geoPointValue);case 9:return function(u,d){const g=u.values||[],C=d.values||[];for(let V=0;V<g.length&&V<C.length;++V){const H=Qr(g[V],C[V]);if(H)return H}return ke(g.length,C.length)}(i.arrayValue,e.arrayValue);case 10:return function(u,d){if(u===Mt.mapValue&&d===Mt.mapValue)return 0;if(u===Mt.mapValue)return 1;if(d===Mt.mapValue)return-1;const g=u.fields||{},C=Object.keys(g),V=d.fields||{},H=Object.keys(V);C.sort(),H.sort();for(let J=0;J<C.length&&J<H.length;++J){const me=ke(C[J],H[J]);if(0!==me)return me;const Ue=Qr(g[C[J]],V[H[J]]);if(0!==Ue)return Ue}return ke(C.length,H.length)}(i.mapValue,e.mapValue);default:throw Gt()}}function Hs(i,e){if("string"==typeof i&&"string"==typeof e&&i.length===e.length)return ke(i,e);const t=mo(i),o=mo(e),u=ke(t.seconds,o.seconds);return 0!==u?u:ke(t.nanos,o.nanos)}function oa(i){return $a(i)}function $a(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?function(o){const u=mo(o);return`time(${u.seconds},${u.nanos})`}(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?yi(i.bytesValue).toBase64():"referenceValue"in i?Dt.fromName(i.referenceValue).toString():"geoPointValue"in i?`geo(${(e=i.geoPointValue).latitude},${e.longitude})`:"arrayValue"in i?function(o){let u="[",d=!0;for(const g of o.values||[])d?d=!1:u+=",",u+=$a(g);return u+"]"}(i.arrayValue):"mapValue"in i?function(o){const u=Object.keys(o.fields||{}).sort();let d="{",g=!0;for(const C of u)g?g=!1:d+=",",d+=`${C}:${$a(o.fields[C])}`;return d+"}"}(i.mapValue):Gt();var e}function Lo(i,e){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${e.path.canonicalString()}`}}function Ha(i){return!!i&&"integerValue"in i}function Ko(i){return!!i&&"arrayValue"in i}function Ga(i){return!!i&&"nullValue"in i}function Ja(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function Ia(i){return!!i&&"mapValue"in i}function uu(i){if(i.geoPointValue)return{geoPointValue:Object.assign({},i.geoPointValue)};if(i.timestampValue&&"object"==typeof i.timestampValue)return{timestampValue:Object.assign({},i.timestampValue)};if(i.mapValue){const e={mapValue:{fields:{}}};return Ye(i.mapValue.fields,(t,o)=>e.mapValue.fields[t]=uu(o)),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(i.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=uu(i.arrayValue.values[t]);return e}return Object.assign({},i)}function zc(i){return"__max__"===(((i.mapValue||{}).fields||{}).__type__||{}).stringValue}function $f(i){return"nullValue"in i?gn:"booleanValue"in i?{booleanValue:!1}:"integerValue"in i||"doubleValue"in i?{doubleValue:NaN}:"timestampValue"in i?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in i?{stringValue:""}:"bytesValue"in i?{bytesValue:""}:"referenceValue"in i?Lo(se.empty(),Dt.empty()):"geoPointValue"in i?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in i?{arrayValue:{}}:"mapValue"in i?{mapValue:{}}:Gt()}function Hf(i){return"nullValue"in i?{booleanValue:!1}:"booleanValue"in i?{doubleValue:NaN}:"integerValue"in i||"doubleValue"in i?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in i?{stringValue:""}:"stringValue"in i?{bytesValue:""}:"bytesValue"in i?Lo(se.empty(),Dt.empty()):"referenceValue"in i?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in i?{arrayValue:{}}:"arrayValue"in i?{mapValue:{}}:"mapValue"in i?Mt:Gt()}function Wc(i,e){const t=Qr(i.value,e.value);return 0!==t?t:i.inclusive&&!e.inclusive?-1:!i.inclusive&&e.inclusive?1:0}function El(i,e){const t=Qr(i.value,e.value);return 0!==t?t:i.inclusive&&!e.inclusive?1:!i.inclusive&&e.inclusive?-1:0}class Cs{constructor(e){this.value=e}static empty(){return new Cs({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let o=0;o<e.length-1;++o)if(t=(t.mapValue.fields||{})[e.get(o)],!Ia(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=uu(t)}setAll(e){let t=nn.emptyPath(),o={},u=[];e.forEach((g,C)=>{if(!t.isImmediateParentOf(C)){const V=this.getFieldsMap(t);this.applyChanges(V,o,u),o={},u=[],t=C.popLast()}g?o[C.lastSegment()]=uu(g):u.push(C.lastSegment())});const d=this.getFieldsMap(t);this.applyChanges(d,o,u)}delete(e){const t=this.field(e.popLast());Ia(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return xn(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let o=0;o<e.length;++o){let u=t.mapValue.fields[e.get(o)];Ia(u)&&u.mapValue.fields||(u={mapValue:{fields:{}}},t.mapValue.fields[e.get(o)]=u),t=u}return t.mapValue.fields}applyChanges(e,t,o){Ye(t,(u,d)=>e[u]=d);for(const u of o)delete e[u]}clone(){return new Cs(uu(this.value))}}function Jd(i){const e=[];return Ye(i.fields,(t,o)=>{const u=new nn([t]);if(Ia(o)){const d=Jd(o.mapValue).fields;if(0===d.length)e.push(u);else for(const g of d)e.push(u.child(g))}else e.push(u)}),new li(e)}class bi{constructor(e,t,o,u,d,g){this.key=e,this.documentType=t,this.version=o,this.readTime=u,this.data=d,this.documentState=g}static newInvalidDocument(e){return new bi(e,0,Tt.min(),Tt.min(),Cs.empty(),0)}static newFoundDocument(e,t,o){return new bi(e,1,t,Tt.min(),o,0)}static newNoDocument(e,t){return new bi(e,2,t,Tt.min(),Cs.empty(),0)}static newUnknownDocument(e,t){return new bi(e,3,t,Tt.min(),Cs.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Cs.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Cs.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Tt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof bi&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new bi(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Tg{constructor(e,t=null,o=[],u=[],d=null,g=null,C=null){this.path=e,this.collectionGroup=t,this.orderBy=o,this.filters=u,this.limit=d,this.startAt=g,this.endAt=C,this.ht=null}}function qc(i,e=null,t=[],o=[],u=null,d=null,g=null){return new Tg(i,e,t,o,u,d,g)}function Yu(i){const e=Lt(i);if(null===e.ht){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(o=>{return(u=o).field.canonicalString()+u.op.toString()+oa(u.value);var u}).join(","),t+="|ob:",t+=e.orderBy.map(o=>{return(u=o).field.canonicalString()+u.dir;var u}).join(","),Ne(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(o=>oa(o)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(o=>oa(o)).join(",")),e.ht=t}return e.ht}function Il(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let u=0;u<i.orderBy.length;u++)if(!zf(i.orderBy[u],e.orderBy[u]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let u=0;u<i.filters.length;u++)if((t=i.filters[u]).op!==(o=e.filters[u]).op||!t.field.isEqual(o.field)||!xn(t.value,o.value))return!1;var t,o;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!nh(i.startAt,e.startAt)&&nh(i.endAt,e.endAt)}function Dl(i){return Dt.isDocumentKey(i.path)&&null===i.collectionGroup&&0===i.filters.length}function Xa(i,e){return i.filters.filter(t=>t instanceof yo&&t.field.isEqual(e))}function uc(i,e,t){let o=gn,u=!0;for(const d of Xa(i,e)){let g=gn,C=!0;switch(d.op){case"<":case"<=":g=$f(d.value);break;case"==":case"in":case">=":g=d.value;break;case">":g=d.value,C=!1;break;case"!=":case"not-in":g=gn}Wc({value:o,inclusive:u},{value:g,inclusive:C})<0&&(o=g,u=C)}if(null!==t)for(let d=0;d<i.orderBy.length;++d)if(i.orderBy[d].field.isEqual(e)){const g=t.position[d];Wc({value:o,inclusive:u},{value:g,inclusive:t.inclusive})<0&&(o=g,u=t.inclusive);break}return{value:o,inclusive:u}}function Ru(i,e,t){let o=Mt,u=!0;for(const d of Xa(i,e)){let g=Mt,C=!0;switch(d.op){case">=":case">":g=Hf(d.value),C=!1;break;case"==":case"in":case"<=":g=d.value;break;case"<":g=d.value,C=!1;break;case"!=":case"not-in":g=Mt}El({value:o,inclusive:u},{value:g,inclusive:C})>0&&(o=g,u=C)}if(null!==t)for(let d=0;d<i.orderBy.length;++d)if(i.orderBy[d].field.isEqual(e)){const g=t.position[d];El({value:o,inclusive:u},{value:g,inclusive:t.inclusive})>0&&(o=g,u=t.inclusive);break}return{value:o,inclusive:u}}class yo extends class{}{constructor(e,t,o){super(),this.field=e,this.op=t,this.value=o}static create(e,t,o){return e.isKeyField()?"in"===t||"not-in"===t?this.lt(e,t,o):new Gf(e,t,o):"array-contains"===t?new Xd(e,o):"in"===t?new eh(e,o):"not-in"===t?new th(e,o):"array-contains-any"===t?new cc(e,o):new yo(e,t,o)}static lt(e,t,o){return"in"===t?new Sg(e,o):new Cl(e,o)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.ft(Qr(t,this.value)):null!==t&&vn(this.value)===vn(t)&&this.ft(Qr(t,this.value))}ft(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Gt()}}dt(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class Gf extends yo{constructor(e,t,o){super(e,t,o),this.key=Dt.fromName(o.referenceValue)}matches(e){const t=Dt.comparator(e.key,this.key);return this.ft(t)}}class Sg extends yo{constructor(e,t){super(e,"in",t),this.keys=lc(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class Cl extends yo{constructor(e,t){super(e,"not-in",t),this.keys=lc(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function lc(i,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(o=>Dt.fromName(o.referenceValue))}class Xd extends yo{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Ko(t)&&mn(t.arrayValue,this.value)}}class eh extends yo{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&mn(this.value.arrayValue,t)}}class th extends yo{constructor(e,t){super(e,"not-in",t)}matches(e){if(mn(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!mn(this.value.arrayValue,t)}}class cc extends yo{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Ko(t)||!t.arrayValue.values)&&t.arrayValue.values.some(o=>mn(this.value.arrayValue,o))}}class lu{constructor(e,t){this.position=e,this.inclusive=t}}class cu{constructor(e,t="asc"){this.field=e,this.dir=t}}function zf(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}function Kc(i,e,t){let o=0;for(let u=0;u<i.position.length;u++){const d=e[u],g=i.position[u];if(o=d.field.isKeyField()?Dt.comparator(Dt.fromName(g.referenceValue),t.key):Qr(g,t.data.field(d.field)),"desc"===d.dir&&(o*=-1),0!==o)break}return o}function nh(i,e){if(null===i)return null===e;if(null===e||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let t=0;t<i.position.length;t++)if(!xn(i.position[t],e.position[t]))return!1;return!0}class eo{constructor(e,t=null,o=[],u=[],d=null,g="F",C=null,V=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=o,this.filters=u,this.limit=d,this.limitType=g,this.startAt=C,this.endAt=V,this._t=null,this.wt=null}}function Qu(i,e,t,o,u,d,g,C){return new eo(i,e,t,o,u,d,g,C)}function Ou(i){return new eo(i)}function rh(i){return 0===i.filters.length&&null===i.limit&&null==i.startAt&&null==i.endAt&&(0===i.explicitOrderBy.length||1===i.explicitOrderBy.length&&i.explicitOrderBy[0].field.isKeyField())}function ih(i){return i.explicitOrderBy.length>0?i.explicitOrderBy[0].field:null}function sh(i){for(const e of i.filters)if(e.dt())return e.field;return null}function oh(i){return null!==i.collectionGroup}function dc(i){const e=Lt(i);if(null===e._t){e._t=[];const t=sh(e),o=ih(e);if(null!==t&&null===o)t.isKeyField()||e._t.push(new cu(t)),e._t.push(new cu(nn.keyField(),"asc"));else{let u=!1;for(const d of e.explicitOrderBy)e._t.push(d),d.field.isKeyField()&&(u=!0);if(!u){const d=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e._t.push(new cu(nn.keyField(),d))}}}return e._t}function bs(i){const e=Lt(i);if(!e.wt)if("F"===e.limitType)e.wt=qc(e.path,e.collectionGroup,dc(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const d of dc(e))t.push(new cu(d.field,"desc"===d.dir?"asc":"desc"));const o=e.endAt?new lu(e.endAt.position,e.endAt.inclusive):null,u=e.startAt?new lu(e.startAt.position,e.startAt.inclusive):null;e.wt=qc(e.path,e.collectionGroup,t,e.filters,e.limit,o,u)}return e.wt}function hc(i,e,t){return new eo(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,t,i.startAt,i.endAt)}function bl(i,e){return Il(bs(i),bs(e))&&i.limitType===e.limitType}function fc(i){return`${Yu(bs(i))}|lt:${i.limitType}`}function Yc(i){return`Query(target=${function Zc(i){let e=i.path.canonicalString();return null!==i.collectionGroup&&(e+=" collectionGroup="+i.collectionGroup),i.filters.length>0&&(e+=`, filters: [${i.filters.map(t=>{return`${(o=t).field.canonicalString()} ${o.op} ${oa(o.value)}`;var o}).join(", ")}]`),Ne(i.limit)||(e+=", limit: "+i.limit),i.orderBy.length>0&&(e+=`, orderBy: [${i.orderBy.map(t=>{return`${(o=t).field.canonicalString()} (${o.dir})`;var o}).join(", ")}]`),i.startAt&&(e+=", startAt: ",e+=i.startAt.inclusive?"b:":"a:",e+=i.startAt.position.map(t=>oa(t)).join(",")),i.endAt&&(e+=", endAt: ",e+=i.endAt.inclusive?"a:":"b:",e+=i.endAt.position.map(t=>oa(t)).join(",")),`Target(${e})`}(bs(i))}; limitType=${i.limitType})`}function du(i,e){return e.isFoundDocument()&&function(t,o){const u=o.key.path;return null!==t.collectionGroup?o.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(u):Dt.isDocumentKey(t.path)?t.path.isEqual(u):t.path.isImmediateParentOf(u)}(i,e)&&function(t,o){for(const u of t.explicitOrderBy)if(!u.field.isKeyField()&&null===o.data.field(u.field))return!1;return!0}(i,e)&&function(t,o){for(const u of t.filters)if(!u.matches(o))return!1;return!0}(i,e)&&(o=e,!((t=i).startAt&&!function(u,d,g){const C=Kc(u,d,g);return u.inclusive?C<=0:C<0}(t.startAt,dc(t),o)||t.endAt&&!function(u,d,g){const C=Kc(u,d,g);return u.inclusive?C>=0:C>0}(t.endAt,dc(t),o)));var t,o}function Qc(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function La(i){return(e,t)=>{let o=!1;for(const u of dc(i)){const d=Nu(u,e,t);if(0!==d)return d;o=o||u.field.isKeyField()}return 0}}function Nu(i,e,t){const o=i.field.isKeyField()?Dt.comparator(e.key,t.key):function(u,d,g){const C=d.data.field(u),V=g.data.field(u);return null!==C&&null!==V?Qr(C,V):Gt()}(i.field,e,t);switch(i.dir){case"asc":return o;case"desc":return-1*o;default:return Gt()}}function Jc(i,e){if(i.gt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:qe(e)?"-0":e}}function Xc(i){return{integerValue:""+i}}function Tl(i,e){return vt(e)?Xc(e):Jc(i,e)}class ed{constructor(){this._=void 0}}function Ag(i,e,t){return i instanceof hu?function(o,u){const d={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return u&&(d.fields.__previous_value__=u),{mapValue:d}}(t,e):i instanceof za?td(i,e):i instanceof Ju?nd(i,e):function(o,u){const d=pc(o,u),g=gc(d)+gc(o.yt);return Ha(d)&&Ha(o.yt)?Xc(g):Jc(o.It,g)}(i,e)}function xg(i,e,t){return i instanceof za?td(i,e):i instanceof Ju?nd(i,e):t}function pc(i,e){return i instanceof fu?Ha(t=e)||(o=t)&&"doubleValue"in o?e:{integerValue:0}:null;var o,t}class hu extends ed{}class za extends ed{constructor(e){super(),this.elements=e}}function td(i,e){const t=ah(e);for(const o of i.elements)t.some(u=>xn(u,o))||t.push(o);return{arrayValue:{values:t}}}class Ju extends ed{constructor(e){super(),this.elements=e}}function nd(i,e){let t=ah(e);for(const o of i.elements)t=t.filter(u=>!xn(u,o));return{arrayValue:{values:t}}}class fu extends ed{constructor(e,t){super(),this.It=e,this.yt=t}}function gc(i){return Li(i.integerValue||i.doubleValue)}function ah(i){return Ko(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}class Sl{constructor(e,t){this.field=e,this.transform=t}}class mc{constructor(e,t){this.version=e,this.transformResults=t}}class zi{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new zi}static exists(e){return new zi(void 0,e)}static updateTime(e){return new zi(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Xu(i,e){return void 0!==i.updateTime?e.isFoundDocument()&&e.version.isEqual(i.updateTime):void 0===i.exists||i.exists===e.isFoundDocument()}class xl{}function Ts(i,e){if(!i.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return i.isNoDocument()?new Rl(i.key,zi.none()):new el(i.key,i.data,zi.none());{const t=i.data,o=Cs.empty();let u=new Bn(nn.comparator);for(let d of e.fields)if(!u.has(d)){let g=t.field(d);null===g&&d.length>1&&(d=d.popLast(),g=t.field(d)),null===g?o.delete(d):o.set(d,g),u=u.add(d)}return new Wa(i.key,o,new li(u.toArray()),zi.none())}}function Wf(i,e,t){i instanceof el?function(o,u,d){const g=o.value.clone(),C=lh(o.fieldTransforms,u,d.transformResults);g.setAll(C),u.convertToFoundDocument(d.version,g).setHasCommittedMutations()}(i,e,t):i instanceof Wa?function(o,u,d){if(!Xu(o.precondition,u))return void u.convertToUnknownDocument(d.version);const g=lh(o.fieldTransforms,u,d.transformResults),C=u.data;C.setAll(uh(o)),C.setAll(g),u.convertToFoundDocument(d.version,C).setHasCommittedMutations()}(i,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function Ml(i,e,t,o){return i instanceof el?function(u,d,g,C){if(!Xu(u.precondition,d))return g;const V=u.value.clone(),H=ch(u.fieldTransforms,C,d);return V.setAll(H),d.convertToFoundDocument(d.version,V).setHasLocalMutations(),null}(i,e,t,o):i instanceof Wa?function(u,d,g,C){if(!Xu(u.precondition,d))return g;const V=ch(u.fieldTransforms,C,d),H=d.data;return H.setAll(uh(u)),H.setAll(V),d.convertToFoundDocument(d.version,H).setHasLocalMutations(),null===g?null:g.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map(J=>J.field))}(i,e,t,o):(g=t,Xu(i.precondition,d=e)?(d.convertToNoDocument(d.version).setHasLocalMutations(),null):g);var d,g}function rd(i,e){let t=null;for(const o of i.fieldTransforms){const u=e.data.field(o.field),d=pc(o.transform,u||null);null!=d&&(null===t&&(t=Cs.empty()),t.set(o.field,d))}return t||null}function Pu(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&(o=e.fieldTransforms,!!(void 0===(t=i.fieldTransforms)&&void 0===o||t&&o&&bt(t,o,(u,d)=>function Al(i,e){return i.field.isEqual(e.field)&&(o=e.transform,(t=i.transform)instanceof za&&o instanceof za||t instanceof Ju&&o instanceof Ju?bt(t.elements,o.elements,xn):t instanceof fu&&o instanceof fu?xn(t.yt,o.yt):t instanceof hu&&o instanceof hu);var t,o}(u,d))))&&(0===i.type?i.value.isEqual(e.value):1!==i.type||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask));var t,o}class el extends xl{constructor(e,t,o,u=[]){super(),this.key=e,this.value=t,this.precondition=o,this.fieldTransforms=u,this.type=0}getFieldMask(){return null}}class Wa extends xl{constructor(e,t,o,u,d=[]){super(),this.key=e,this.data=t,this.fieldMask=o,this.precondition=u,this.fieldTransforms=d,this.type=1}getFieldMask(){return this.fieldMask}}function uh(i){const e=new Map;return i.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const o=i.data.field(t);e.set(t,o)}}),e}function lh(i,e,t){const o=new Map;ln(i.length===t.length);for(let u=0;u<t.length;u++){const d=i[u],g=d.transform,C=e.data.field(d.field);o.set(d.field,xg(g,C,t[u]))}return o}function ch(i,e,t){const o=new Map;for(const u of i){const d=u.transform,g=t.data.field(u.field);o.set(u.field,Ag(d,g,e))}return o}class Rl extends xl{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class id extends xl{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class ku{constructor(e){this.count=e}}var Wi,br;function sd(i){switch(i){default:return Gt();case We.CANCELLED:case We.UNKNOWN:case We.DEADLINE_EXCEEDED:case We.RESOURCE_EXHAUSTED:case We.INTERNAL:case We.UNAVAILABLE:case We.UNAUTHENTICATED:return!1;case We.INVALID_ARGUMENT:case We.NOT_FOUND:case We.ALREADY_EXISTS:case We.PERMISSION_DENIED:case We.FAILED_PRECONDITION:case We.ABORTED:case We.OUT_OF_RANGE:case We.UNIMPLEMENTED:case We.DATA_LOSS:return!0}}function Ol(i){if(void 0===i)return Cr("GRPC error has no .code"),We.UNKNOWN;switch(i){case Wi.OK:return We.OK;case Wi.CANCELLED:return We.CANCELLED;case Wi.UNKNOWN:return We.UNKNOWN;case Wi.DEADLINE_EXCEEDED:return We.DEADLINE_EXCEEDED;case Wi.RESOURCE_EXHAUSTED:return We.RESOURCE_EXHAUSTED;case Wi.INTERNAL:return We.INTERNAL;case Wi.UNAVAILABLE:return We.UNAVAILABLE;case Wi.UNAUTHENTICATED:return We.UNAUTHENTICATED;case Wi.INVALID_ARGUMENT:return We.INVALID_ARGUMENT;case Wi.NOT_FOUND:return We.NOT_FOUND;case Wi.ALREADY_EXISTS:return We.ALREADY_EXISTS;case Wi.PERMISSION_DENIED:return We.PERMISSION_DENIED;case Wi.FAILED_PRECONDITION:return We.FAILED_PRECONDITION;case Wi.ABORTED:return We.ABORTED;case Wi.OUT_OF_RANGE:return We.OUT_OF_RANGE;case Wi.UNIMPLEMENTED:return We.UNIMPLEMENTED;case Wi.DATA_LOSS:return We.DATA_LOSS;default:return Gt()}}(br=Wi||(Wi={}))[br.OK=0]="OK",br[br.CANCELLED=1]="CANCELLED",br[br.UNKNOWN=2]="UNKNOWN",br[br.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",br[br.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",br[br.NOT_FOUND=5]="NOT_FOUND",br[br.ALREADY_EXISTS=6]="ALREADY_EXISTS",br[br.PERMISSION_DENIED=7]="PERMISSION_DENIED",br[br.UNAUTHENTICATED=16]="UNAUTHENTICATED",br[br.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",br[br.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",br[br.ABORTED=10]="ABORTED",br[br.OUT_OF_RANGE=11]="OUT_OF_RANGE",br[br.UNIMPLEMENTED=12]="UNIMPLEMENTED",br[br.INTERNAL=13]="INTERNAL",br[br.UNAVAILABLE=14]="UNAVAILABLE",br[br.DATA_LOSS=15]="DATA_LOSS";class pu{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),o=this.inner[t];if(void 0!==o)for(const[u,d]of o)if(this.equalsFn(u,e))return d}has(e){return void 0!==this.get(e)}set(e,t){const o=this.mapKeyFn(e),u=this.inner[o];if(void 0===u)return this.inner[o]=[[e,t]],void this.innerSize++;for(let d=0;d<u.length;d++)if(this.equalsFn(u[d][0],e))return void(u[d]=[e,t]);u.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),o=this.inner[t];if(void 0===o)return!1;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return 1===o.length?delete this.inner[t]:o.splice(u,1),this.innerSize--,!0;return!1}forEach(e){Ye(this.inner,(t,o)=>{for(const[u,d]of o)e(u,d)})}isEmpty(){return At(this.inner)}size(){return this.innerSize}}const Yo=new en(Dt.comparator);function Gs(){return Yo}const Nl=new en(Dt.comparator);function yc(...i){let e=Nl;for(const t of i)e=e.insert(t.key,t);return e}function _c(i){let e=Nl;return i.forEach((t,o)=>e=e.insert(t,o.overlayedDocument)),e}function Qo(){return Fu()}function od(){return Fu()}function Fu(){return new pu(i=>i.toString(),(i,e)=>i.isEqual(e))}const Lu=new en(Dt.comparator),gu=new Bn(Dt.comparator);function Zn(...i){let e=gu;for(const t of i)e=e.add(t);return e}const vc=new Bn(ke);function wc(){return vc}class Vu{constructor(e,t,o,u,d){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=o,this.documentUpdates=u,this.resolvedLimboDocuments=d}static createSynthesizedRemoteEventForCurrentChange(e,t){const o=new Map;return o.set(e,eu.createSynthesizedTargetChangeForCurrentChange(e,t)),new Vu(Tt.min(),o,wc(),Gs(),Zn())}}class eu{constructor(e,t,o,u,d){this.resumeToken=e,this.current=t,this.addedDocuments=o,this.modifiedDocuments=u,this.removedDocuments=d}static createSynthesizedTargetChangeForCurrentChange(e,t){return new eu(mi.EMPTY_BYTE_STRING,t,Zn(),Zn(),Zn())}}class Xi{constructor(e,t,o,u){this.Tt=e,this.removedTargetIds=t,this.key=o,this.Et=u}}class Pl{constructor(e,t){this.targetId=e,this.At=t}}class tl{constructor(e,t,o=mi.EMPTY_BYTE_STRING,u=null){this.state=e,this.targetIds=t,this.resumeToken=o,this.cause=u}}class dh{constructor(){this.Rt=0,this.bt=mu(),this.Pt=mi.EMPTY_BYTE_STRING,this.vt=!1,this.Vt=!0}get current(){return this.vt}get resumeToken(){return this.Pt}get St(){return 0!==this.Rt}get Dt(){return this.Vt}Ct(e){e.approximateByteSize()>0&&(this.Vt=!0,this.Pt=e)}xt(){let e=Zn(),t=Zn(),o=Zn();return this.bt.forEach((u,d)=>{switch(d){case 0:e=e.add(u);break;case 2:t=t.add(u);break;case 1:o=o.add(u);break;default:Gt()}}),new eu(this.Pt,this.vt,e,t,o)}Nt(){this.Vt=!1,this.bt=mu()}kt(e,t){this.Vt=!0,this.bt=this.bt.insert(e,t)}Mt(e){this.Vt=!0,this.bt=this.bt.remove(e)}Ot(){this.Rt+=1}Ft(){this.Rt-=1}$t(){this.Vt=!0,this.vt=!0}}class tu{constructor(e){this.Bt=e,this.Lt=new Map,this.Ut=Gs(),this.qt=Uu(),this.Kt=new Bn(ke)}Gt(e){for(const t of e.Tt)e.Et&&e.Et.isFoundDocument()?this.Qt(t,e.Et):this.jt(t,e.key,e.Et);for(const t of e.removedTargetIds)this.jt(t,e.key,e.Et)}Wt(e){this.forEachTarget(e,t=>{const o=this.zt(t);switch(e.state){case 0:this.Ht(t)&&o.Ct(e.resumeToken);break;case 1:o.Ft(),o.St||o.Nt(),o.Ct(e.resumeToken);break;case 2:o.Ft(),o.St||this.removeTarget(t);break;case 3:this.Ht(t)&&(o.$t(),o.Ct(e.resumeToken));break;case 4:this.Ht(t)&&(this.Jt(t),o.Ct(e.resumeToken));break;default:Gt()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Lt.forEach((o,u)=>{this.Ht(u)&&t(u)})}Yt(e){const t=e.targetId,o=e.At.count,u=this.Xt(t);if(u){const d=u.target;if(Dl(d))if(0===o){const g=new Dt(d.path);this.jt(t,g,bi.newNoDocument(g,Tt.min()))}else ln(1===o);else this.Zt(t)!==o&&(this.Jt(t),this.Kt=this.Kt.add(t))}}te(e){const t=new Map;this.Lt.forEach((d,g)=>{const C=this.Xt(g);if(C){if(d.current&&Dl(C.target)){const V=new Dt(C.target.path);null!==this.Ut.get(V)||this.ee(g,V)||this.jt(g,V,bi.newNoDocument(V,e))}d.Dt&&(t.set(g,d.xt()),d.Nt())}});let o=Zn();this.qt.forEach((d,g)=>{let C=!0;g.forEachWhile(V=>{const H=this.Xt(V);return!H||2===H.purpose||(C=!1,!1)}),C&&(o=o.add(d))}),this.Ut.forEach((d,g)=>g.setReadTime(e));const u=new Vu(e,t,this.Kt,this.Ut,o);return this.Ut=Gs(),this.qt=Uu(),this.Kt=new Bn(ke),u}Qt(e,t){if(!this.Ht(e))return;const o=this.ee(e,t.key)?2:0;this.zt(e).kt(t.key,o),this.Ut=this.Ut.insert(t.key,t),this.qt=this.qt.insert(t.key,this.ne(t.key).add(e))}jt(e,t,o){if(!this.Ht(e))return;const u=this.zt(e);this.ee(e,t)?u.kt(t,1):u.Mt(t),this.qt=this.qt.insert(t,this.ne(t).delete(e)),o&&(this.Ut=this.Ut.insert(t,o))}removeTarget(e){this.Lt.delete(e)}Zt(e){const t=this.zt(e).xt();return this.Bt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ot(e){this.zt(e).Ot()}zt(e){let t=this.Lt.get(e);return t||(t=new dh,this.Lt.set(e,t)),t}ne(e){let t=this.qt.get(e);return t||(t=new Bn(ke),this.qt=this.qt.insert(e,t)),t}Ht(e){const t=null!==this.Xt(e);return t||It("WatchChangeAggregator","Detected inactive target",e),t}Xt(e){const t=this.Lt.get(e);return t&&t.St?null:this.Bt.se(e)}Jt(e){this.Lt.set(e,new dh),this.Bt.getRemoteKeysForTarget(e).forEach(t=>{this.jt(e,t,null)})}ee(e,t){return this.Bt.getRemoteKeysForTarget(e).has(t)}}function Uu(){return new en(Dt.comparator)}function mu(){return new en(Dt.comparator)}const hh={asc:"ASCENDING",desc:"DESCENDING"},qf={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class ad{constructor(e,t){this.databaseId=e,this.gt=t}}function kl(i,e){return i.gt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Ec(i,e){return i.gt?e.toBase64():e.toUint8Array()}function Zf(i,e){return kl(i,e.toTimestamp())}function zs(i){return ln(!!i),Tt.fromTimestamp(function(e){const t=mo(e);return new Nt(t.seconds,t.nanos)}(i))}function m(i,e){return(t=i,new Yt(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function c(i){const e=Yt.fromString(i);return ln(qy(e)),e}function f(i,e){return m(i.databaseId,e.path)}function E(i,e){const t=c(e);if(t.get(1)!==i.databaseId.projectId)throw new ft(We.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+i.databaseId.projectId);if(t.get(3)!==i.databaseId.database)throw new ft(We.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+i.databaseId.database);return new Dt(Xe(t))}function B(i,e){return m(i.databaseId,e)}function Q(i){const e=c(i);return 4===e.length?Yt.emptyPath():Xe(e)}function be(i){return new Yt(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function Xe(i){return ln(i.length>4&&"documents"===i.get(4)),i.popFirst(5)}function Rt(i,e,t){return{name:f(i,e),fields:t.value.mapValue.fields}}function sn(i,e,t){const o=E(i,e.name),u=zs(e.updateTime),d=new Cs({mapValue:{fields:e.fields}}),g=bi.newFoundDocument(o,u,d);return t&&g.setHasCommittedMutations(),t?g.setHasCommittedMutations():g}function es(i,e){let t;if(e instanceof el)t={update:Rt(i,e.key,e.value)};else if(e instanceof Rl)t={delete:f(i,e.key)};else if(e instanceof Wa)t={update:Rt(i,e.key,e.data),updateMask:Rg(e.fieldMask)};else{if(!(e instanceof id))return Gt();t={verify:f(i,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(o=>function(u,d){const g=d.transform;if(g instanceof hu)return{fieldPath:d.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(g instanceof za)return{fieldPath:d.field.canonicalString(),appendMissingElements:{values:g.elements}};if(g instanceof Ju)return{fieldPath:d.field.canonicalString(),removeAllFromArray:{values:g.elements}};if(g instanceof fu)return{fieldPath:d.field.canonicalString(),increment:g.yt};throw Gt()}(0,o))),e.precondition.isNone||(t.currentDocument=void 0!==(u=e.precondition).updateTime?{updateTime:Zf(i,u.updateTime)}:void 0!==u.exists?{exists:u.exists}:Gt()),t;var u}function aa(i,e){const t=e.currentDocument?void 0!==(u=e.currentDocument).updateTime?zi.updateTime(zs(u.updateTime)):void 0!==u.exists?zi.exists(u.exists):zi.none():zi.none(),o=e.updateTransforms?e.updateTransforms.map(u=>function(d,g){let C=null;"setToServerValue"in g?(ln("REQUEST_TIME"===g.setToServerValue),C=new hu):"appendMissingElements"in g?C=new za(g.appendMissingElements.values||[]):"removeAllFromArray"in g?C=new Ju(g.removeAllFromArray.values||[]):"increment"in g?C=new fu(d,g.increment):Gt();const V=nn.fromServerFormat(g.fieldPath);return new Sl(V,C)}(i,u)):[];var u;if(e.update){const u=E(i,e.update.name),d=new Cs({mapValue:{fields:e.update.fields}});if(e.updateMask){const g=new li((e.updateMask.fieldPaths||[]).map(H=>nn.fromServerFormat(H)));return new Wa(u,d,g,t,o)}return new el(u,d,t,o)}if(e.delete){const u=E(i,e.delete);return new Rl(u,t)}if(e.verify){const u=E(i,e.verify);return new id(u,t)}return Gt()}function Ic(i,e){return{documents:[B(i,e.path)]}}function nl(i,e){const t={structuredQuery:{}},o=e.path;null!==e.collectionGroup?(t.parent=B(i,o),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=B(i,o.popLast()),t.structuredQuery.from=[{collectionId:o.lastSegment()}]);const u=function(V){if(0===V.length)return;const H=V.map(J=>function(me){if("=="===me.op){if(Ja(me.value))return{unaryFilter:{field:qa(me.field),op:"IS_NAN"}};if(Ga(me.value))return{unaryFilter:{field:qa(me.field),op:"IS_NULL"}}}else if("!="===me.op){if(Ja(me.value))return{unaryFilter:{field:qa(me.field),op:"IS_NOT_NAN"}};if(Ga(me.value))return{unaryFilter:{field:qa(me.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:qa(me.field),op:Yf(me.op),value:me.value}}}(J));return 1===H.length?H[0]:{compositeFilter:{op:"AND",filters:H}}}(e.filters);u&&(t.structuredQuery.where=u);const d=function(V){if(0!==V.length)return V.map(H=>{return{field:qa((J=H).field),direction:Kf(J.dir)};var J})}(e.orderBy);d&&(t.structuredQuery.orderBy=d);const g=(H=e.limit,i.gt||Ne(H)?H:{value:H});var H,C,V;return null!==g&&(t.structuredQuery.limit=g),e.startAt&&(t.structuredQuery.startAt={before:(C=e.startAt).inclusive,values:C.position}),e.endAt&&(t.structuredQuery.endAt={before:!(V=e.endAt).inclusive,values:V.position}),t}function ud(i){let e=Q(i.parent);const t=i.structuredQuery,o=t.from?t.from.length:0;let u=null;if(o>0){ln(1===o);const J=t.from[0];J.allDescendants?u=J.collectionId:e=e.child(J.collectionId)}let d=[];t.where&&(d=rl(t.where));let g=[];t.orderBy&&(g=t.orderBy.map(J=>{return new cu(il((me=J).field),function(Ue){switch(Ue){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(me.direction));var me}));let C=null;t.limit&&(C=function(J){let me;return me="object"==typeof J?J.value:J,Ne(me)?null:me}(t.limit));let V=null;var J;t.startAt&&(V=new lu((J=t.startAt).values||[],!!J.before));let H=null;return t.endAt&&(H=function(J){return new lu(J.values||[],!J.before)}(t.endAt)),Qu(e,u,g,d,C,"F",V,H)}function rl(i){return i?void 0!==i.unaryFilter?[ph(i)]:void 0!==i.fieldFilter?[Mg(i)]:void 0!==i.compositeFilter?i.compositeFilter.filters.map(e=>rl(e)).reduce((e,t)=>e.concat(t)):Gt():[]}function Kf(i){return hh[i]}function Yf(i){return qf[i]}function qa(i){return{fieldPath:i.canonicalString()}}function il(i){return nn.fromServerFormat(i.fieldPath)}function Mg(i){return yo.create(il(i.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Gt()}}(i.fieldFilter.op),i.fieldFilter.value)}function ph(i){switch(i.unaryFilter.op){case"IS_NAN":const e=il(i.unaryFilter.field);return yo.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=il(i.unaryFilter.field);return yo.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=il(i.unaryFilter.field);return yo.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=il(i.unaryFilter.field);return yo.create(u,"!=",{nullValue:"NULL_VALUE"});default:return Gt()}}function Rg(i){const e=[];return i.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function qy(i){return i.length>=4&&"projects"===i.get(0)&&"databases"===i.get(2)}function ua(i){let e="";for(let t=0;t<i.length;t++)e.length>0&&(e=gh(e)),e=Og(i.get(t),e);return gh(e)}function Og(i,e){let t=e;const o=i.length;for(let u=0;u<o;u++){const d=i.charAt(u);switch(d){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=d}}return t}function gh(i){return i+"\x01\x01"}function nu(i){const e=i.length;if(ln(e>=2),2===e)return ln("\x01"===i.charAt(0)&&"\x01"===i.charAt(1)),Yt.emptyPath();const t=e-2,o=[];let u="";for(let d=0;d<e;){const g=i.indexOf("\x01",d);switch((g<0||g>t)&&Gt(),i.charAt(g+1)){case"\x01":const C=i.substring(d,g);let V;0===u.length?V=C:(u+=C,V=u,u=""),o.push(V);break;case"\x10":u+=i.substring(d,g),u+="\0";break;case"\x11":u+=i.substring(d,g+1);break;default:Gt()}d=g+2}return new Yt(o)}const Qf=["userId","batchId"];function ld(i,e){return[i,ua(e)]}function mh(i,e,t){return[i,ua(e),t]}const Zy={},Jf=["prefixPath","collectionGroup","readTime","documentId"],cd=["prefixPath","collectionGroup","documentId"],Ky=["collectionGroup","readTime","prefixPath","documentId"],Yy=["canonicalId","targetId"],Qy=["targetId","path"],Ng=["path","targetId"],Jy=["collectionId","parent"],Xy=["indexId","uid"],e_=["uid","sequenceNumber"],t_=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Xf=["indexId","uid","orderedDocumentKey"],n_=["userId","collectionPath","documentId"],r_=["userId","collectionPath","largestBatchId"],i_=["userId","collectionGroup","largestBatchId"],ep=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],s_=[...ep,"documentOverlays"],Pg=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Jo=Pg,tp=[...Jo,"indexConfiguration","indexState","indexEntries"];class yh extends sa{constructor(e,t){super(),this.ie=e,this.currentSequenceNumber=t}}function to(i,e){const t=Lt(i);return Is.O(t.ie,e)}class bo{constructor(e,t,o,u){this.batchId=e,this.localWriteTime=t,this.baseMutations=o,this.mutations=u}applyToRemoteDocument(e,t){const o=t.mutationResults;for(let u=0;u<this.mutations.length;u++){const d=this.mutations[u];d.key.isEqual(e.key)&&Wf(d,e,o[u])}}applyToLocalView(e,t){for(const o of this.baseMutations)o.key.isEqual(e.key)&&(t=Ml(o,e,t,this.localWriteTime));for(const o of this.mutations)o.key.isEqual(e.key)&&(t=Ml(o,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const o=od();return this.mutations.forEach(u=>{const d=e.get(u.key),g=d.overlayedDocument;let C=this.applyToLocalView(g,d.mutatedFields);C=t.has(u.key)?null:C;const V=Ts(g,C);null!==V&&o.set(u.key,V),g.isValidDocument()||g.convertToNoDocument(Tt.min())}),o}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Zn())}isEqual(e){return this.batchId===e.batchId&&bt(this.mutations,e.mutations,(t,o)=>Pu(t,o))&&bt(this.baseMutations,e.baseMutations,(t,o)=>Pu(t,o))}}class Ll{constructor(e,t,o,u){this.batch=e,this.commitVersion=t,this.mutationResults=o,this.docVersions=u}static from(e,t,o){ln(e.mutations.length===o.length);let u=Lu;const d=e.mutations;for(let g=0;g<d.length;g++)u=u.insert(d[g].key,o[g].version);return new Ll(e,t,o,u)}}class dd{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class sl{constructor(e,t,o,u,d=Tt.min(),g=Tt.min(),C=mi.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=o,this.sequenceNumber=u,this.snapshotVersion=d,this.lastLimboFreeSnapshotVersion=g,this.resumeToken=C}withSequenceNumber(e){return new sl(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new sl(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new sl(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class kg{constructor(e){this.re=e}}function Lg(i,e){const t=e.key,o={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:hd(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())o.document={name:f(u=i.re,(d=e).key),fields:d.data.value.mapValue.fields,updateTime:kl(u,d.version.toTimestamp())};else if(e.isNoDocument())o.noDocument={path:t.path.toArray(),readTime:Vl(e.version)};else{if(!e.isUnknownDocument())return Gt();o.unknownDocument={path:t.path.toArray(),version:Vl(e.version)}}var u,d;return o}function hd(i){const e=i.toTimestamp();return[e.seconds,e.nanoseconds]}function Vl(i){const e=i.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function ol(i){const e=new Nt(i.seconds,i.nanoseconds);return Tt.fromTimestamp(e)}function Ul(i,e){const t=(e.baseMutations||[]).map(d=>aa(i.re,d));for(let d=0;d<e.mutations.length-1;++d){const g=e.mutations[d];d+1<e.mutations.length&&void 0!==e.mutations[d+1].transform&&(g.updateTransforms=e.mutations[d+1].transform.fieldTransforms,e.mutations.splice(d+1,1),++d)}const o=e.mutations.map(d=>aa(i.re,d)),u=Nt.fromMillis(e.localWriteTimeMs);return new bo(e.batchId,u,t,o)}function fd(i){const e=ol(i.readTime),t=void 0!==i.lastLimboFreeSnapshotVersion?ol(i.lastLimboFreeSnapshotVersion):Tt.min();let o;var u;return void 0!==i.query.documents?(ln(1===(u=i.query).documents.length),o=bs(Ou(Q(u.documents[0])))):o=bs(ud(i.query)),new sl(o,i.targetId,0,i.lastListenSequenceNumber,e,t,mi.fromBase64String(i.resumeToken))}function Vg(i,e){const t=Vl(e.snapshotVersion),o=Vl(e.lastLimboFreeSnapshotVersion);let u;u=Dl(e.target)?Ic(i.re,e.target):nl(i.re,e.target);const d=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Yu(e.target),readTime:t,resumeToken:d,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:o,query:u}}function np(i){const e=ud({parent:i.parent,structuredQuery:i.structuredQuery});return"LAST"===i.limitType?hc(e,e.limit,"L"):e}function rp(i,e){return new dd(e.largestBatchId,aa(i.re,e.overlayMutation))}function Bl(i,e){const t=e.path.lastSegment();return[i,ua(e.path.popLast()),t]}function yu(i,e,t,o){return{indexId:i,uid:e.uid||"",sequenceNumber:t,readTime:Vl(o.readTime),documentKey:ua(o.documentKey.path),largestBatchId:o.largestBatchId}}class o_{getBundleMetadata(e,t){return Ug(e).get(t).next(o=>{if(o)return{id:(u=o).bundleId,createTime:ol(u.createTime),version:u.version};var u})}saveBundleMetadata(e,t){return Ug(e).put({bundleId:(o=t).id,createTime:Vl(zs(o.createTime)),version:o.version});var o}getNamedQuery(e,t){return a_(e).get(t).next(o=>{if(o)return{name:(u=o).name,query:np(u.bundledQuery),readTime:ol(u.readTime)};var u})}saveNamedQuery(e,t){return a_(e).put({name:(o=t).name,readTime:Vl(zs(o.readTime)),bundledQuery:o.bundledQuery});var o}}function Ug(i){return to(i,"bundles")}function a_(i){return to(i,"namedQueries")}class ip{constructor(e,t){this.It=e,this.userId=t}static oe(e,t){return new ip(e,t.uid||"")}getOverlay(e,t){return Dc(e).get(Bl(this.userId,t)).next(o=>o?rp(this.It,o):null)}getOverlays(e,t){const o=Qo();return je.forEach(t,u=>this.getOverlay(e,u).next(d=>{null!==d&&o.set(u,d)})).next(()=>o)}saveOverlays(e,t,o){const u=[];return o.forEach((d,g)=>{const C=new dd(t,g);u.push(this.ue(e,C))}),je.waitFor(u)}removeOverlaysForBatchId(e,t,o){const u=new Set;t.forEach(g=>u.add(ua(g.getCollectionPath())));const d=[];return u.forEach(g=>{const C=IDBKeyRange.bound([this.userId,g,o],[this.userId,g,o+1],!1,!0);d.push(Dc(e).Y("collectionPathOverlayIndex",C))}),je.waitFor(d)}getOverlaysForCollection(e,t,o){const u=Qo(),d=ua(t),g=IDBKeyRange.bound([this.userId,d,o],[this.userId,d,Number.POSITIVE_INFINITY],!0);return Dc(e).W("collectionPathOverlayIndex",g).next(C=>{for(const V of C){const H=rp(this.It,V);u.set(H.getKey(),H)}return u})}getOverlaysForCollectionGroup(e,t,o,u){const d=Qo();let g;const C=IDBKeyRange.bound([this.userId,t,o],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Dc(e).Z({index:"collectionGroupOverlayIndex",range:C},(V,H,J)=>{const me=rp(this.It,H);d.size()<u||me.largestBatchId===g?(d.set(me.getKey(),me),g=me.largestBatchId):J.done()}).next(()=>d)}ue(e,t){return Dc(e).put(function(o,u,d){const[g,C,V]=Bl(u,d.mutation.key);return{userId:u,collectionPath:C,documentId:V,collectionGroup:d.mutation.key.getCollectionGroup(),largestBatchId:d.largestBatchId,overlayMutation:es(o.re,d.mutation)}}(this.It,this.userId,t))}}function Dc(i){return to(i,"documentOverlays")}class Cc{constructor(){}ce(e,t){this.ae(e,t),t.he()}ae(e,t){if("nullValue"in e)this.le(t,5);else if("booleanValue"in e)this.le(t,10),t.fe(e.booleanValue?1:0);else if("integerValue"in e)this.le(t,15),t.fe(Li(e.integerValue));else if("doubleValue"in e){const o=Li(e.doubleValue);isNaN(o)?this.le(t,13):(this.le(t,15),qe(o)?t.fe(0):t.fe(o))}else if("timestampValue"in e){const o=e.timestampValue;this.le(t,20),"string"==typeof o?t.de(o):(t.de(`${o.seconds||""}`),t.fe(o.nanos||0))}else if("stringValue"in e)this._e(e.stringValue,t),this.we(t);else if("bytesValue"in e)this.le(t,30),t.me(yi(e.bytesValue)),this.we(t);else if("referenceValue"in e)this.ge(e.referenceValue,t);else if("geoPointValue"in e){const o=e.geoPointValue;this.le(t,45),t.fe(o.latitude||0),t.fe(o.longitude||0)}else"mapValue"in e?zc(e)?this.le(t,Number.MAX_SAFE_INTEGER):(this.ye(e.mapValue,t),this.we(t)):"arrayValue"in e?(this.pe(e.arrayValue,t),this.we(t)):Gt()}_e(e,t){this.le(t,25),this.Ie(e,t)}Ie(e,t){t.de(e)}ye(e,t){const o=e.fields||{};this.le(t,55);for(const u of Object.keys(o))this._e(u,t),this.ae(o[u],t)}pe(e,t){const o=e.values||[];this.le(t,50);for(const u of o)this.ae(u,t)}ge(e,t){this.le(t,37),Dt.fromName(e).path.forEach(o=>{this.le(t,60),this.Ie(o,t)})}le(e,t){e.fe(t)}we(e){e.fe(2)}}function _u(i){if(0===i)return 8;let e=0;return i>>4==0&&(e+=4,i<<=4),i>>6==0&&(e+=2,i<<=2),i>>7==0&&(e+=1),e}function _h(i){const e=64-function(t){let o=0;for(let u=0;u<8;++u){const d=_u(255&t[u]);if(o+=d,8!==d)break}return o}(i);return Math.ceil(e/8)}Cc.Te=new Cc;class sp{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ee(e){const t=e[Symbol.iterator]();let o=t.next();for(;!o.done;)this.Ae(o.value),o=t.next();this.Re()}be(e){const t=e[Symbol.iterator]();let o=t.next();for(;!o.done;)this.Pe(o.value),o=t.next();this.ve()}Ve(e){for(const t of e){const o=t.charCodeAt(0);if(o<128)this.Ae(o);else if(o<2048)this.Ae(960|o>>>6),this.Ae(128|63&o);else if(t<"\ud800"||"\udbff"<t)this.Ae(480|o>>>12),this.Ae(128|63&o>>>6),this.Ae(128|63&o);else{const u=t.codePointAt(0);this.Ae(240|u>>>18),this.Ae(128|63&u>>>12),this.Ae(128|63&u>>>6),this.Ae(128|63&u)}}this.Re()}Se(e){for(const t of e){const o=t.charCodeAt(0);if(o<128)this.Pe(o);else if(o<2048)this.Pe(960|o>>>6),this.Pe(128|63&o);else if(t<"\ud800"||"\udbff"<t)this.Pe(480|o>>>12),this.Pe(128|63&o>>>6),this.Pe(128|63&o);else{const u=t.codePointAt(0);this.Pe(240|u>>>18),this.Pe(128|63&u>>>12),this.Pe(128|63&u>>>6),this.Pe(128|63&u)}}this.ve()}De(e){const t=this.Ce(e),o=_h(t);this.xe(1+o),this.buffer[this.position++]=255&o;for(let u=t.length-o;u<t.length;++u)this.buffer[this.position++]=255&t[u]}Ne(e){const t=this.Ce(e),o=_h(t);this.xe(1+o),this.buffer[this.position++]=~(255&o);for(let u=t.length-o;u<t.length;++u)this.buffer[this.position++]=~(255&t[u])}ke(){this.Me(255),this.Me(255)}Oe(){this.Fe(255),this.Fe(255)}reset(){this.position=0}seed(e){this.xe(e.length),this.buffer.set(e,this.position),this.position+=e.length}$e(){return this.buffer.slice(0,this.position)}Ce(e){const t=function(u){const d=new DataView(new ArrayBuffer(8));return d.setFloat64(0,u,!1),new Uint8Array(d.buffer)}(e),o=0!=(128&t[0]);t[0]^=o?255:128;for(let u=1;u<t.length;++u)t[u]^=o?255:0;return t}Ae(e){const t=255&e;0===t?(this.Me(0),this.Me(255)):255===t?(this.Me(255),this.Me(0)):this.Me(t)}Pe(e){const t=255&e;0===t?(this.Fe(0),this.Fe(255)):255===t?(this.Fe(255),this.Fe(0)):this.Fe(e)}Re(){this.Me(0),this.Me(1)}ve(){this.Fe(0),this.Fe(1)}Me(e){this.xe(1),this.buffer[this.position++]=e}Fe(e){this.xe(1),this.buffer[this.position++]=~e}xe(e){const t=e+this.position;if(t<=this.buffer.length)return;let o=2*this.buffer.length;o<t&&(o=t);const u=new Uint8Array(o);u.set(this.buffer),this.buffer=u}}class u_{constructor(e){this.Be=e}me(e){this.Be.Ee(e)}de(e){this.Be.Ve(e)}fe(e){this.Be.De(e)}he(){this.Be.ke()}}class Bg{constructor(e){this.Be=e}me(e){this.Be.be(e)}de(e){this.Be.Se(e)}fe(e){this.Be.Ne(e)}he(){this.Be.Oe()}}class pd{constructor(){this.Be=new sp,this.Le=new u_(this.Be),this.Ue=new Bg(this.Be)}seed(e){this.Be.seed(e)}qe(e){return 0===e?this.Le:this.Ue}$e(){return this.Be.$e()}reset(){this.Be.reset()}}class ru{constructor(e,t,o,u){this.indexId=e,this.documentKey=t,this.arrayValue=o,this.directionalValue=u}Ke(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,o=new Uint8Array(t);return o.set(this.directionalValue,0),t!==e?o.set([0],this.directionalValue.length):++o[o.length-1],new ru(this.indexId,this.documentKey,this.arrayValue,o)}}function jl(i,e){let t=i.indexId-e.indexId;return 0!==t?t:(t=jg(i.arrayValue,e.arrayValue),0!==t?t:(t=jg(i.directionalValue,e.directionalValue),0!==t?t:Dt.comparator(i.documentKey,e.documentKey)))}function jg(i,e){for(let t=0;t<i.length&&t<e.length;++t){const o=i[t]-e[t];if(0!==o)return o}return i.length-e.length}class op{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ge=e.orderBy,this.Qe=[];for(const t of e.filters){const o=t;o.dt()?this.je=o:this.Qe.push(o)}}We(e){const t=Kr(e);if(void 0!==t&&!this.ze(t))return!1;const o=Qi(e);let u=0,d=0;for(;u<o.length&&this.ze(o[u]);++u);if(u===o.length)return!0;if(void 0!==this.je){const g=o[u];if(!this.He(this.je,g)||!this.Je(this.Ge[d++],g))return!1;++u}for(;u<o.length;++u){const g=o[u];if(d>=this.Ge.length||!this.Je(this.Ge[d++],g))return!1}return!0}ze(e){for(const t of this.Qe)if(this.He(t,e))return!0;return!1}He(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Je(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class ap{constructor(){this.Ye=new vh}addToCollectionParentIndex(e,t){return this.Ye.add(t),je.resolve()}getCollectionParents(e,t){return je.resolve(this.Ye.getEntries(t))}addFieldIndex(e,t){return je.resolve()}deleteFieldIndex(e,t){return je.resolve()}getDocumentsMatchingTarget(e,t){return je.resolve(null)}getIndexType(e,t){return je.resolve(0)}getFieldIndexes(e,t){return je.resolve([])}getNextCollectionGroupToUpdate(e){return je.resolve(null)}getMinOffset(e,t){return je.resolve($r.min())}getMinOffsetFromCollectionGroup(e,t){return je.resolve($r.min())}updateCollectionGroup(e,t,o){return je.resolve()}updateIndexEntries(e,t){return je.resolve()}}class vh{constructor(){this.index={}}add(e){const t=e.lastSegment(),o=e.popLast(),u=this.index[t]||new Bn(Yt.comparator),d=!u.has(o);return this.index[t]=u.add(o),d}has(e){const t=e.lastSegment(),o=e.popLast(),u=this.index[t];return u&&u.has(o)}getEntries(e){return(this.index[e]||new Bn(Yt.comparator)).toArray()}}const up=new Uint8Array(0);class bc{constructor(e,t){this.user=e,this.databaseId=t,this.Xe=new vh,this.Ze=new pu(o=>Yu(o),(o,u)=>Il(o,u)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Xe.has(t)){const o=t.lastSegment(),u=t.popLast();e.addOnCommittedListener(()=>{this.Xe.add(t)});const d={collectionId:o,parent:ua(u)};return wh(e).put(d)}return je.resolve()}getCollectionParents(e,t){const o=[],u=IDBKeyRange.bound([t,""],[nt(t),""],!1,!0);return wh(e).W(u).next(d=>{for(const g of d){if(g.collectionId!==t)break;o.push(nu(g.parent))}return o})}addFieldIndex(e,t){const o=Eh(e),u={indexId:(g=t).indexId,collectionGroup:g.collectionGroup,fields:g.fields.map(C=>[C.fieldPath.canonicalString(),C.kind])};var g;delete u.indexId;const d=o.add(u);if(t.indexState){const g=$l(e);return d.next(C=>{g.put(yu(C,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return d.next()}deleteFieldIndex(e,t){const o=Eh(e),u=$l(e),d=Tc(e);return o.delete(t.indexId).next(()=>u.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>d.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const o=Tc(e);let u=!0;const d=new Map;return je.forEach(this.tn(t),g=>this.en(e,g).next(C=>{u&&(u=!!C),d.set(g,C)})).next(()=>{if(u){let g=Zn();const C=[];return je.forEach(d,(V,H)=>{var J;It("IndexedDbIndexManager",`Using index ${J=V,`id=${J.indexId}|cg=${J.collectionGroup}|f=${J.fields.map(Vr=>`${Vr.fieldPath}:${Vr.kind}`).join(",")}`} to execute ${Yu(t)}`);const me=function(Vr,As){const ni=Kr(As);if(void 0===ni)return null;for(const _i of Xa(Vr,ni.fieldPath))switch(_i.op){case"array-contains-any":return _i.value.arrayValue.values||[];case"array-contains":return[_i.value]}return null}(H,V),Ue=function(Vr,As){const ni=new Map;for(const _i of Qi(As))for(const no of Xa(Vr,_i.fieldPath))switch(no.op){case"==":case"in":ni.set(_i.fieldPath.canonicalString(),no.value);break;case"not-in":case"!=":return ni.set(_i.fieldPath.canonicalString(),no.value),Array.from(ni.values())}return null}(H,V),st=function(Vr,As){const ni=[];let _i=!0;for(const no of Qi(As)){const Hc=0===no.kind?uc(Vr,no.fieldPath,Vr.startAt):Ru(Vr,no.fieldPath,Vr.startAt);ni.push(Hc.value),_i&&(_i=Hc.inclusive)}return new lu(ni,_i)}(H,V),ht=function(Vr,As){const ni=[];let _i=!0;for(const no of Qi(As)){const Hc=0===no.kind?Ru(Vr,no.fieldPath,Vr.endAt):uc(Vr,no.fieldPath,Vr.endAt);ni.push(Hc.value),_i&&(_i=Hc.inclusive)}return new lu(ni,_i)}(H,V),Wt=this.nn(V,H,st),cn=this.nn(V,H,ht),Hr=this.sn(V,H,Ue),ti=this.rn(V.indexId,me,Wt,st.inclusive,cn,ht.inclusive,Hr);return je.forEach(ti,Vr=>o.J(Vr,t.limit).next(As=>{As.forEach(ni=>{const _i=Dt.fromSegments(ni.documentKey);g.has(_i)||(g=g.add(_i),C.push(_i))})}))}).next(()=>C)}return je.resolve(null)})}tn(e){let t=this.Ze.get(e);return t||(t=[e],this.Ze.set(e,t),t)}rn(e,t,o,u,d,g,C){const V=(null!=t?t.length:1)*Math.max(o.length,d.length),H=V/(null!=t?t.length:1),J=[];for(let me=0;me<V;++me){const Ue=t?this.on(t[me/H]):up,st=this.un(e,Ue,o[me%H],u),ht=this.cn(e,Ue,d[me%H],g),Wt=C.map(cn=>this.un(e,Ue,cn,!0));J.push(...this.createRange(st,ht,Wt))}return J}un(e,t,o,u){const d=new ru(e,Dt.empty(),t,o);return u?d:d.Ke()}cn(e,t,o,u){const d=new ru(e,Dt.empty(),t,o);return u?d.Ke():d}en(e,t){const o=new op(t),u=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,u).next(d=>{let g=null;for(const C of d)o.We(C)&&(!g||C.fields.length>g.fields.length)&&(g=C);return g})}getIndexType(e,t){let o=2;return je.forEach(this.tn(t),u=>this.en(e,u).next(d=>{d?0!==o&&d.fields.length<function(g){let C=new Bn(nn.comparator),V=!1;for(const H of g.filters){const J=H;J.field.isKeyField()||("array-contains"===J.op||"array-contains-any"===J.op?V=!0:C=C.add(J.field))}for(const H of g.orderBy)H.field.isKeyField()||(C=C.add(H.field));return C.size+(V?1:0)}(u)&&(o=1):o=0})).next(()=>o)}an(e,t){const o=new pd;for(const u of Qi(e)){const d=t.data.field(u.fieldPath);if(null==d)return null;const g=o.qe(u.kind);Cc.Te.ce(d,g)}return o.$e()}on(e){const t=new pd;return Cc.Te.ce(e,t.qe(0)),t.$e()}hn(e,t){const o=new pd;return Cc.Te.ce(Lo(this.databaseId,t),o.qe(function(u){const d=Qi(u);return 0===d.length?0:d[d.length-1].kind}(e))),o.$e()}sn(e,t,o){if(null===o)return[];let u=[];u.push(new pd);let d=0;for(const g of Qi(e)){const C=o[d++];for(const V of u)if(this.ln(t,g.fieldPath)&&Ko(C))u=this.fn(u,g,C);else{const H=V.qe(g.kind);Cc.Te.ce(C,H)}}return this.dn(u)}nn(e,t,o){return this.sn(e,t,o.position)}dn(e){const t=[];for(let o=0;o<e.length;++o)t[o]=e[o].$e();return t}fn(e,t,o){const u=[...e],d=[];for(const g of o.arrayValue.values||[])for(const C of u){const V=new pd;V.seed(C.$e()),Cc.Te.ce(g,V.qe(t.kind)),d.push(V)}return d}ln(e,t){return!!e.filters.find(o=>o instanceof yo&&o.field.isEqual(t)&&("in"===o.op||"not-in"===o.op))}getFieldIndexes(e,t){const o=Eh(e),u=$l(e);return(t?o.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):o.W()).next(d=>{const g=[];return je.forEach(d,C=>u.get([C.indexId,this.uid]).next(V=>{g.push(function(H,J){const me=J?new Po(J.sequenceNumber,new $r(ol(J.readTime),new Dt(nu(J.documentKey)),J.largestBatchId)):Po.empty(),Ue=H.fields.map(([st,ht])=>new Yr(nn.fromServerFormat(st),ht));return new wr(H.indexId,H.collectionGroup,Ue,me)}(C,V))})).next(()=>g)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((o,u)=>{const d=o.indexState.sequenceNumber-u.indexState.sequenceNumber;return 0!==d?d:ke(o.collectionGroup,u.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,o){const u=Eh(e),d=$l(e);return this._n(e).next(g=>u.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(C=>je.forEach(C,V=>d.put(yu(V.indexId,this.user,g,o)))))}updateIndexEntries(e,t){const o=new Map;return je.forEach(t,(u,d)=>{const g=o.get(u.collectionGroup);return(g?je.resolve(g):this.getFieldIndexes(e,u.collectionGroup)).next(C=>(o.set(u.collectionGroup,C),je.forEach(C,V=>this.wn(e,u,V).next(H=>{const J=this.mn(d,V);return H.isEqual(J)?je.resolve():this.gn(e,d,V,H,J)}))))})}yn(e,t,o,u){return Tc(e).put({indexId:u.indexId,uid:this.uid,arrayValue:u.arrayValue,directionalValue:u.directionalValue,orderedDocumentKey:this.hn(o,t.key),documentKey:t.key.path.toArray()})}pn(e,t,o,u){return Tc(e).delete([u.indexId,this.uid,u.arrayValue,u.directionalValue,this.hn(o,t.key),t.key.path.toArray()])}wn(e,t,o){const u=Tc(e);let d=new Bn(jl);return u.Z({index:"documentKeyIndex",range:IDBKeyRange.only([o.indexId,this.uid,this.hn(o,t)])},(g,C)=>{d=d.add(new ru(o.indexId,t,C.arrayValue,C.directionalValue))}).next(()=>d)}mn(e,t){let o=new Bn(jl);const u=this.an(t,e);if(null==u)return o;const d=Kr(t);if(null!=d){const g=e.data.field(d.fieldPath);if(Ko(g))for(const C of g.arrayValue.values||[])o=o.add(new ru(t.indexId,e.key,this.on(C),u))}else o=o.add(new ru(t.indexId,e.key,up,u));return o}gn(e,t,o,u,d){It("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const g=[];return function(C,V,H,J,me){const Ue=C.getIterator(),st=V.getIterator();let ht=Gi(Ue),Wt=Gi(st);for(;ht||Wt;){let cn=!1,Hr=!1;if(ht&&Wt){const ti=H(ht,Wt);ti<0?Hr=!0:ti>0&&(cn=!0)}else null!=ht?Hr=!0:cn=!0;cn?(J(Wt),Wt=Gi(st)):Hr?(me(ht),ht=Gi(Ue)):(ht=Gi(Ue),Wt=Gi(st))}}(u,d,jl,C=>{g.push(this.yn(e,t,o,C))},C=>{g.push(this.pn(e,t,o,C))}),je.waitFor(g)}_n(e){let t=1;return $l(e).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(o,u,d)=>{d.done(),t=u.sequenceNumber+1}).next(()=>t)}createRange(e,t,o){o=o.sort((g,C)=>jl(g,C)).filter((g,C,V)=>!C||0!==jl(g,V[C-1]));const u=[];u.push(e);for(const g of o){const C=jl(g,e),V=jl(g,t);if(0===C)u[0]=e.Ke();else if(C>0&&V<0)u.push(g),u.push(g.Ke());else if(V>0)break}u.push(t);const d=[];for(let g=0;g<u.length;g+=2)d.push(IDBKeyRange.bound([u[g].indexId,this.uid,u[g].arrayValue,u[g].directionalValue,up,[]],[u[g+1].indexId,this.uid,u[g+1].arrayValue,u[g+1].directionalValue,up,[]]));return d}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next($g)}getMinOffset(e,t){return je.mapArray(this.tn(t),o=>this.en(e,o).next(u=>u||Gt())).next($g)}}function wh(i){return to(i,"collectionParents")}function Tc(i){return to(i,"indexEntries")}function Eh(i){return to(i,"indexConfiguration")}function $l(i){return to(i,"indexState")}function $g(i){ln(0!==i.length);let e=i[0].indexState.offset,t=e.largestBatchId;for(let o=1;o<i.length;o++){const u=i[o].indexState.offset;au(u,e)<0&&(e=u),t<u.largestBatchId&&(t=u.largestBatchId)}return new $r(e.readTime,e.documentKey,t)}const Hg={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Da{constructor(e,t,o){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=o}static withCacheSize(e){return new Da(e,Da.DEFAULT_COLLECTION_PERCENTILE,Da.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function Gg(i,e,t){const o=i.store("mutations"),u=i.store("documentMutations"),d=[],g=IDBKeyRange.only(t.batchId);let C=0;const V=o.Z({range:g},(J,me,Ue)=>(C++,Ue.delete()));d.push(V.next(()=>{ln(1===C)}));const H=[];for(const J of t.mutations){const me=mh(e,J.key.path,t.batchId);d.push(u.delete(me)),H.push(J.key)}return je.waitFor(d).next(()=>H)}function Ih(i){if(!i)return 0;let e;if(i.document)e=i.document;else if(i.unknownDocument)e=i.unknownDocument;else{if(!i.noDocument)throw Gt();e=i.noDocument}return JSON.stringify(e).length}Da.DEFAULT_COLLECTION_PERCENTILE=10,Da.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Da.DEFAULT=new Da(41943040,Da.DEFAULT_COLLECTION_PERCENTILE,Da.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Da.DISABLED=new Da(-1,0,0);class Dh{constructor(e,t,o,u){this.userId=e,this.It=t,this.indexManager=o,this.referenceDelegate=u,this.In={}}static oe(e,t,o,u){ln(""!==e.uid);const d=e.isAuthenticated()?e.uid:"";return new Dh(d,t,o,u)}checkEmpty(e){let t=!0;const o=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return vu(e).Z({index:"userMutationsIndex",range:o},(u,d,g)=>{t=!1,g.done()}).next(()=>t)}addMutationBatch(e,t,o,u){const d=Hl(e),g=vu(e);return g.add({}).next(C=>{ln("number"==typeof C);const V=new bo(C,t,o,u),H=function(Ue,st,ht){const Wt=ht.baseMutations.map(Hr=>es(Ue.re,Hr)),cn=ht.mutations.map(Hr=>es(Ue.re,Hr));return{userId:st,batchId:ht.batchId,localWriteTimeMs:ht.localWriteTime.toMillis(),baseMutations:Wt,mutations:cn}}(this.It,this.userId,V),J=[];let me=new Bn((Ue,st)=>ke(Ue.canonicalString(),st.canonicalString()));for(const Ue of u){const st=mh(this.userId,Ue.key.path,C);me=me.add(Ue.key.path.popLast()),J.push(g.put(H)),J.push(d.put(st,Zy))}return me.forEach(Ue=>{J.push(this.indexManager.addToCollectionParentIndex(e,Ue))}),e.addOnCommittedListener(()=>{this.In[C]=V.keys()}),je.waitFor(J).next(()=>V)})}lookupMutationBatch(e,t){return vu(e).get(t).next(o=>o?(ln(o.userId===this.userId),Ul(this.It,o)):null)}Tn(e,t){return this.In[t]?je.resolve(this.In[t]):this.lookupMutationBatch(e,t).next(o=>{if(o){const u=o.keys();return this.In[t]=u,u}return null})}getNextMutationBatchAfterBatchId(e,t){const o=t+1,u=IDBKeyRange.lowerBound([this.userId,o]);let d=null;return vu(e).Z({index:"userMutationsIndex",range:u},(g,C,V)=>{C.userId===this.userId&&(ln(C.batchId>=o),d=Ul(this.It,C)),V.done()}).next(()=>d)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let o=-1;return vu(e).Z({index:"userMutationsIndex",range:t,reverse:!0},(u,d,g)=>{o=d.batchId,g.done()}).next(()=>o)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return vu(e).W("userMutationsIndex",t).next(o=>o.map(u=>Ul(this.It,u)))}getAllMutationBatchesAffectingDocumentKey(e,t){const o=ld(this.userId,t.path),u=IDBKeyRange.lowerBound(o),d=[];return Hl(e).Z({range:u},(g,C,V)=>{const[H,J,me]=g,Ue=nu(J);if(H===this.userId&&t.path.isEqual(Ue))return vu(e).get(me).next(st=>{if(!st)throw Gt();ln(st.userId===this.userId),d.push(Ul(this.It,st))});V.done()}).next(()=>d)}getAllMutationBatchesAffectingDocumentKeys(e,t){let o=new Bn(ke);const u=[];return t.forEach(d=>{const g=ld(this.userId,d.path),C=IDBKeyRange.lowerBound(g),V=Hl(e).Z({range:C},(H,J,me)=>{const[Ue,st,ht]=H,Wt=nu(st);Ue===this.userId&&d.path.isEqual(Wt)?o=o.add(ht):me.done()});u.push(V)}),je.waitFor(u).next(()=>this.En(e,o))}getAllMutationBatchesAffectingQuery(e,t){const o=t.path,u=o.length+1,d=ld(this.userId,o),g=IDBKeyRange.lowerBound(d);let C=new Bn(ke);return Hl(e).Z({range:g},(V,H,J)=>{const[me,Ue,st]=V,ht=nu(Ue);me===this.userId&&o.isPrefixOf(ht)?ht.length===u&&(C=C.add(st)):J.done()}).next(()=>this.En(e,C))}En(e,t){const o=[],u=[];return t.forEach(d=>{u.push(vu(e).get(d).next(g=>{if(null===g)throw Gt();ln(g.userId===this.userId),o.push(Ul(this.It,g))}))}),je.waitFor(u).next(()=>o)}removeMutationBatch(e,t){return Gg(e.ie,this.userId,t).next(o=>(e.addOnCommittedListener(()=>{this.An(t.batchId)}),je.forEach(o,u=>this.referenceDelegate.markPotentiallyOrphaned(e,u))))}An(e){delete this.In[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return je.resolve();const o=IDBKeyRange.lowerBound([this.userId]),u=[];return Hl(e).Z({range:o},(d,g,C)=>{if(d[0]===this.userId){const V=nu(d[1]);u.push(V)}else C.done()}).next(()=>{ln(0===u.length)})})}containsKey(e,t){return lp(e,this.userId,t)}Rn(e){return Ch(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function lp(i,e,t){const o=ld(e,t.path),u=o[1],d=IDBKeyRange.lowerBound(o);let g=!1;return Hl(i).Z({range:d,X:!0},(C,V,H)=>{const[J,me,Ue]=C;J===e&&me===u&&(g=!0),H.done()}).next(()=>g)}function vu(i){return to(i,"mutations")}function Hl(i){return to(i,"documentMutations")}function Ch(i){return to(i,"mutationQueues")}class Gl{constructor(e){this.bn=e}next(){return this.bn+=2,this.bn}static Pn(){return new Gl(0)}static vn(){return new Gl(-1)}}class l_{constructor(e,t){this.referenceDelegate=e,this.It=t}allocateTargetId(e){return this.Vn(e).next(t=>{const o=new Gl(t.highestTargetId);return t.highestTargetId=o.next(),this.Sn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Vn(e).next(t=>Tt.fromTimestamp(new Nt(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Vn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,o){return this.Vn(e).next(u=>(u.highestListenSequenceNumber=t,o&&(u.lastRemoteSnapshotVersion=o.toTimestamp()),t>u.highestListenSequenceNumber&&(u.highestListenSequenceNumber=t),this.Sn(e,u)))}addTargetData(e,t){return this.Dn(e,t).next(()=>this.Vn(e).next(o=>(o.targetCount+=1,this.Cn(t,o),this.Sn(e,o))))}updateTargetData(e,t){return this.Dn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>zl(e).delete(t.targetId)).next(()=>this.Vn(e)).next(o=>(ln(o.targetCount>0),o.targetCount-=1,this.Sn(e,o)))}removeTargets(e,t,o){let u=0;const d=[];return zl(e).Z((g,C)=>{const V=fd(C);V.sequenceNumber<=t&&null===o.get(V.targetId)&&(u++,d.push(this.removeTargetData(e,V)))}).next(()=>je.waitFor(d)).next(()=>u)}forEachTarget(e,t){return zl(e).Z((o,u)=>{const d=fd(u);t(d)})}Vn(e){return cp(e).get("targetGlobalKey").next(t=>(ln(null!==t),t))}Sn(e,t){return cp(e).put("targetGlobalKey",t)}Dn(e,t){return zl(e).put(Vg(this.It,t))}Cn(e,t){let o=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,o=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,o=!0),o}getTargetCount(e){return this.Vn(e).next(t=>t.targetCount)}getTargetData(e,t){const o=Yu(t),u=IDBKeyRange.bound([o,Number.NEGATIVE_INFINITY],[o,Number.POSITIVE_INFINITY]);let d=null;return zl(e).Z({range:u,index:"queryTargetsIndex"},(g,C,V)=>{const H=fd(C);Il(t,H.target)&&(d=H,V.done())}).next(()=>d)}addMatchingKeys(e,t,o){const u=[],d=Ca(e);return t.forEach(g=>{const C=ua(g.path);u.push(d.put({targetId:o,path:C})),u.push(this.referenceDelegate.addReference(e,o,g))}),je.waitFor(u)}removeMatchingKeys(e,t,o){const u=Ca(e);return je.forEach(t,d=>{const g=ua(d.path);return je.waitFor([u.delete([o,g]),this.referenceDelegate.removeReference(e,o,d)])})}removeMatchingKeysForTargetId(e,t){const o=Ca(e),u=IDBKeyRange.bound([t],[t+1],!1,!0);return o.delete(u)}getMatchingKeysForTargetId(e,t){const o=IDBKeyRange.bound([t],[t+1],!1,!0),u=Ca(e);let d=Zn();return u.Z({range:o,X:!0},(g,C,V)=>{const H=nu(g[1]),J=new Dt(H);d=d.add(J)}).next(()=>d)}containsKey(e,t){const o=ua(t.path),u=IDBKeyRange.bound([o],[nt(o)],!1,!0);let d=0;return Ca(e).Z({index:"documentTargetsIndex",X:!0,range:u},([g,C],V,H)=>{0!==g&&(d++,H.done())}).next(()=>d>0)}se(e,t){return zl(e).get(t).next(o=>o?fd(o):null)}}function zl(i){return to(i,"targets")}function cp(i){return to(i,"targetGlobal")}function Ca(i){return to(i,"targetDocuments")}function dp([i,e],[t,o]){const u=ke(i,t);return 0===u?ke(e,o):u}class zg{constructor(e){this.xn=e,this.buffer=new Bn(dp),this.Nn=0}kn(){return++this.Nn}Mn(e){const t=[e,this.kn()];if(this.buffer.size<this.xn)this.buffer=this.buffer.add(t);else{const o=this.buffer.last();dp(t,o)<0&&(this.buffer=this.buffer.delete(o).add(t))}}get maxValue(){return this.buffer.last()[0]}}class c_{constructor(e,t,o){this.garbageCollector=e,this.asyncQueue=t,this.localStore=o,this.On=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Fn(6e4)}stop(){this.On&&(this.On.cancel(),this.On=null)}get started(){return null!==this.On}Fn(e){var t=this;It("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.On=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,he.Z)(function*(){t.On=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(o){Fo(o)?It("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",o):yield ko(o)}yield t.Fn(3e5)}))}}class a0{constructor(e,t){this.$n=e,this.params=t}calculateTargetCount(e,t){return this.$n.Bn(e).next(o=>Math.floor(t/100*o))}nthSequenceNumber(e,t){if(0===t)return je.resolve(te.at);const o=new zg(t);return this.$n.forEachTarget(e,u=>o.Mn(u.sequenceNumber)).next(()=>this.$n.Ln(e,u=>o.Mn(u))).next(()=>o.maxValue)}removeTargets(e,t,o){return this.$n.removeTargets(e,t,o)}removeOrphanedDocuments(e,t){return this.$n.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(It("LruGarbageCollector","Garbage collection skipped; disabled"),je.resolve(Hg)):this.getCacheSize(e).next(o=>o<this.params.cacheSizeCollectionThreshold?(It("LruGarbageCollector",`Garbage collection skipped; Cache size ${o} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Hg):this.Un(e,t))}getCacheSize(e){return this.$n.getCacheSize(e)}Un(e,t){let o,u,d,g,C,V,H;const J=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(me=>(me>this.params.maximumSequenceNumbersToCollect?(It("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${me}`),u=this.params.maximumSequenceNumbersToCollect):u=me,g=Date.now(),this.nthSequenceNumber(e,u))).next(me=>(o=me,C=Date.now(),this.removeTargets(e,o,t))).next(me=>(d=me,V=Date.now(),this.removeOrphanedDocuments(e,o))).next(me=>(H=Date.now(),_a()<=yt.in.DEBUG&&It("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${g-J}ms\n\tDetermined least recently used ${u} in `+(C-g)+`ms\n\tRemoved ${d} targets in `+(V-C)+`ms\n\tRemoved ${me} documents in `+(H-V)+`ms\nTotal Duration: ${H-J}ms`),je.resolve({didRun:!0,sequenceNumbersCollected:u,targetsRemoved:d,documentsRemoved:me})))}}class bh{constructor(e,t){this.db=e,this.garbageCollector=new a0(this,t)}Bn(e){const t=this.qn(e);return this.db.getTargetCache().getTargetCount(e).next(o=>t.next(u=>o+u))}qn(e){let t=0;return this.Ln(e,o=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Ln(e,t){return this.Kn(e,(o,u)=>t(u))}addReference(e,t,o){return Th(e,o)}removeReference(e,t,o){return Th(e,o)}removeTargets(e,t,o){return this.db.getTargetCache().removeTargets(e,t,o)}markPotentiallyOrphaned(e,t){return Th(e,t)}Gn(e,t){return function(o,u){let d=!1;return Ch(o).tt(g=>lp(o,g,u).next(C=>(C&&(d=!0),je.resolve(!C)))).next(()=>d)}(e,t)}removeOrphanedDocuments(e,t){const o=this.db.getRemoteDocumentCache().newChangeBuffer(),u=[];let d=0;return this.Kn(e,(g,C)=>{if(C<=t){const V=this.Gn(e,g).next(H=>{if(!H)return d++,o.getEntry(e,g).next(()=>(o.removeEntry(g,Tt.min()),Ca(e).delete([0,ua(g.path)])))});u.push(V)}}).next(()=>je.waitFor(u)).next(()=>o.apply(e)).next(()=>d)}removeTarget(e,t){const o=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,o)}updateLimboDocument(e,t){return Th(e,t)}Kn(e,t){const o=Ca(e);let u,d=te.at;return o.Z({index:"documentTargetsIndex"},([g,C],{path:V,sequenceNumber:H})=>{0===g?(d!==te.at&&t(new Dt(nu(u)),d),d=H,u=V):d=te.at}).next(()=>{d!==te.at&&t(new Dt(nu(u)),d)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Th(i,e){return Ca(i).put((o=i.currentSequenceNumber,{targetId:0,path:ua(e.path),sequenceNumber:o}));var o}class hp{constructor(){this.changes=new pu(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,bi.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const o=this.changes.get(t);return void 0!==o?je.resolve(o):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Wg{constructor(e){this.It=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,o){return wu(e).put(o)}removeEntry(e,t,o){return wu(e).delete(function(u,d){const g=u.path.toArray();return[g.slice(0,g.length-2),g[g.length-2],hd(d),g[g.length-1]]}(t,o))}updateMetadata(e,t){return this.getMetadata(e).next(o=>(o.byteSize+=t,this.Qn(e,o)))}getEntry(e,t){let o=bi.newInvalidDocument(t);return wu(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(al(t))},(u,d)=>{o=this.jn(t,d)}).next(()=>o)}Wn(e,t){let o={size:0,document:bi.newInvalidDocument(t)};return wu(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(al(t))},(u,d)=>{o={document:this.jn(t,d),size:Ih(d)}}).next(()=>o)}getEntries(e,t){let o=Gs();return this.zn(e,t,(u,d)=>{const g=this.jn(u,d);o=o.insert(u,g)}).next(()=>o)}Hn(e,t){let o=Gs(),u=new en(Dt.comparator);return this.zn(e,t,(d,g)=>{const C=this.jn(d,g);o=o.insert(d,C),u=u.insert(d,Ih(g))}).next(()=>({documents:o,Jn:u}))}zn(e,t,o){if(t.isEmpty())return je.resolve();let u=new Bn(Sh);t.forEach(V=>u=u.add(V));const d=IDBKeyRange.bound(al(u.first()),al(u.last())),g=u.getIterator();let C=g.getNext();return wu(e).Z({index:"documentKeyIndex",range:d},(V,H,J)=>{const me=Dt.fromSegments([...H.prefixPath,H.collectionGroup,H.documentId]);for(;C&&Sh(C,me)<0;)o(C,null),C=g.getNext();C&&C.isEqual(me)&&(o(C,H),C=g.hasNext()?g.getNext():null),C?J.j(al(C)):J.done()}).next(()=>{for(;C;)o(C,null),C=g.hasNext()?g.getNext():null})}getAllFromCollection(e,t,o){const u=[t.popLast().toArray(),t.lastSegment(),hd(o.readTime),o.documentKey.path.isEmpty()?"":o.documentKey.path.lastSegment()],d=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return wu(e).W(IDBKeyRange.bound(u,d,!0)).next(g=>{let C=Gs();for(const V of g){const H=this.jn(Dt.fromSegments(V.prefixPath.concat(V.collectionGroup,V.documentId)),V);C=C.insert(H.key,H)}return C})}getAllFromCollectionGroup(e,t,o,u){let d=Gs();const g=mp(t,o),C=mp(t,$r.max());return wu(e).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(g,C,!0)},(V,H,J)=>{const me=this.jn(Dt.fromSegments(H.prefixPath.concat(H.collectionGroup,H.documentId)),H);d=d.insert(me.key,me),d.size===u&&J.done()}).next(()=>d)}newChangeBuffer(e){return new pp(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return gp(e).get("remoteDocumentGlobalKey").next(t=>(ln(!!t),t))}Qn(e,t){return gp(e).put("remoteDocumentGlobalKey",t)}jn(e,t){if(t){const o=function Fg(i,e){let t;if(e.document)t=sn(i.re,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const o=Dt.fromSegments(e.noDocument.path),u=ol(e.noDocument.readTime);t=bi.newNoDocument(o,u),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return Gt();{const o=Dt.fromSegments(e.unknownDocument.path),u=ol(e.unknownDocument.version);t=bi.newUnknownDocument(o,u)}}return e.readTime&&t.setReadTime(function(o){const u=new Nt(o[0],o[1]);return Tt.fromTimestamp(u)}(e.readTime)),t}(this.It,t);if(!o.isNoDocument()||!o.version.isEqual(Tt.min()))return o}return bi.newInvalidDocument(e)}}function fp(i){return new Wg(i)}class pp extends hp{constructor(e,t){super(),this.Yn=e,this.trackRemovals=t,this.Xn=new pu(o=>o.toString(),(o,u)=>o.isEqual(u))}applyChanges(e){const t=[];let o=0,u=new Bn((d,g)=>ke(d.canonicalString(),g.canonicalString()));return this.changes.forEach((d,g)=>{const C=this.Xn.get(d);if(t.push(this.Yn.removeEntry(e,d,C.readTime)),g.isValidDocument()){const V=Lg(this.Yn.It,g);u=u.add(d.path.popLast()),o+=Ih(V)-C.size,t.push(this.Yn.addEntry(e,d,V))}else if(o-=C.size,this.trackRemovals){const V=Lg(this.Yn.It,g.convertToNoDocument(Tt.min()));t.push(this.Yn.addEntry(e,d,V))}}),u.forEach(d=>{t.push(this.Yn.indexManager.addToCollectionParentIndex(e,d))}),t.push(this.Yn.updateMetadata(e,o)),je.waitFor(t)}getFromCache(e,t){return this.Yn.Wn(e,t).next(o=>(this.Xn.set(t,{size:o.size,readTime:o.document.readTime}),o.document))}getAllFromCache(e,t){return this.Yn.Hn(e,t).next(({documents:o,Jn:u})=>(u.forEach((d,g)=>{this.Xn.set(d,{size:g,readTime:o.get(d).readTime})}),o))}}function gp(i){return to(i,"remoteDocumentGlobal")}function wu(i){return to(i,"remoteDocumentsV14")}function al(i){const e=i.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function mp(i,e){const t=e.documentKey.path.toArray();return[i,hd(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function Sh(i,e){const t=i.path.toArray(),o=e.path.toArray();let u=0;for(let d=0;d<t.length-2&&d<o.length-2;++d)if(u=ke(t[d],o[d]),u)return u;return u=ke(t.length,o.length),u||(u=ke(t[t.length-2],o[o.length-2]),u||ke(t[t.length-1],o[o.length-1]))}class qg{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class Ah{constructor(e,t,o,u){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=o,this.indexManager=u}getDocument(e,t){let o=null;return this.documentOverlayCache.getOverlay(e,t).next(u=>(o=u,this.getBaseDocument(e,t,o))).next(u=>(null!==o&&Ml(o.mutation,u,li.empty(),Nt.now()),u))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(o=>this.getLocalViewOfDocuments(e,o,Zn()).next(()=>o))}getLocalViewOfDocuments(e,t,o=Zn()){const u=Qo();return this.populateOverlays(e,u,t).next(()=>this.computeViews(e,t,u,o).next(d=>{let g=yc();return d.forEach((C,V)=>{g=g.insert(C,V.overlayedDocument)}),g}))}getOverlayedDocuments(e,t){const o=Qo();return this.populateOverlays(e,o,t).next(()=>this.computeViews(e,t,o,Zn()))}populateOverlays(e,t,o){const u=[];return o.forEach(d=>{t.has(d)||u.push(d)}),this.documentOverlayCache.getOverlays(e,u).next(d=>{d.forEach((g,C)=>{t.set(g,C)})})}computeViews(e,t,o,u){let d=Gs();const g=Fu(),C=Fu();return t.forEach((V,H)=>{const J=o.get(H.key);u.has(H.key)&&(void 0===J||J.mutation instanceof Wa)?d=d.insert(H.key,H):void 0!==J&&(g.set(H.key,J.mutation.getFieldMask()),Ml(J.mutation,H,J.mutation.getFieldMask(),Nt.now()))}),this.recalculateAndSaveOverlays(e,d).next(V=>(V.forEach((H,J)=>g.set(H,J)),t.forEach((H,J)=>{var me;return C.set(H,new qg(J,null!==(me=g.get(H))&&void 0!==me?me:null))}),C))}recalculateAndSaveOverlays(e,t){const o=Fu();let u=new en((g,C)=>g-C),d=Zn();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(g=>{for(const C of g)C.keys().forEach(V=>{const H=t.get(V);if(null===H)return;let J=o.get(V)||li.empty();J=C.applyToLocalView(H,J),o.set(V,J);const me=(u.get(C.batchId)||Zn()).add(V);u=u.insert(C.batchId,me)})}).next(()=>{const g=[],C=u.getReverseIterator();for(;C.hasNext();){const V=C.getNext(),H=V.key,J=V.value,me=od();J.forEach(Ue=>{if(!d.has(Ue)){const st=Ts(t.get(Ue),o.get(Ue));null!==st&&me.set(Ue,st),d=d.add(Ue)}}),g.push(this.documentOverlayCache.saveOverlays(e,H,me))}return je.waitFor(g)}).next(()=>o)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(o=>this.recalculateAndSaveOverlays(e,o))}getDocumentsMatchingQuery(e,t,o){return Dt.isDocumentKey((u=t).path)&&null===u.collectionGroup&&0===u.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):oh(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,o):this.getDocumentsMatchingCollectionQuery(e,t,o);var u}getNextDocuments(e,t,o,u){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,o,u).next(d=>{const g=u-d.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,o.largestBatchId,u-d.size):je.resolve(Qo());let C=-1,V=d;return g.next(H=>je.forEach(H,(J,me)=>(C<me.largestBatchId&&(C=me.largestBatchId),d.get(J)?je.resolve():this.getBaseDocument(e,J,me).next(Ue=>{V=V.insert(J,Ue)}))).next(()=>this.populateOverlays(e,H,d)).next(()=>this.computeViews(e,V,H,Zn())).next(J=>({batchId:C,changes:_c(J)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Dt(t)).next(o=>{let u=yc();return o.isFoundDocument()&&(u=u.insert(o.key,o)),u})}getDocumentsMatchingCollectionGroupQuery(e,t,o){const u=t.collectionGroup;let d=yc();return this.indexManager.getCollectionParents(e,u).next(g=>je.forEach(g,C=>{const V=(H=t,J=C.child(u),new eo(J,null,H.explicitOrderBy.slice(),H.filters.slice(),H.limit,H.limitType,H.startAt,H.endAt));var H,J;return this.getDocumentsMatchingCollectionQuery(e,V,o).next(H=>{H.forEach((J,me)=>{d=d.insert(J,me)})})}).next(()=>d))}getDocumentsMatchingCollectionQuery(e,t,o){let u;return this.remoteDocumentCache.getAllFromCollection(e,t.path,o).next(d=>(u=d,this.documentOverlayCache.getOverlaysForCollection(e,t.path,o.largestBatchId))).next(d=>{d.forEach((C,V)=>{const H=V.getKey();null===u.get(H)&&(u=u.insert(H,bi.newInvalidDocument(H)))});let g=yc();return u.forEach((C,V)=>{const H=d.get(C);void 0!==H&&Ml(H.mutation,V,li.empty(),Nt.now()),du(t,V)&&(g=g.insert(C,V))}),g})}getBaseDocument(e,t,o){return null===o||1===o.mutation.type?this.remoteDocumentCache.getEntry(e,t):je.resolve(bi.newInvalidDocument(t))}}class gd{constructor(e){this.It=e,this.Zn=new Map,this.ts=new Map}getBundleMetadata(e,t){return je.resolve(this.Zn.get(t))}saveBundleMetadata(e,t){var o;return this.Zn.set(t.id,{id:(o=t).id,version:o.version,createTime:zs(o.createTime)}),je.resolve()}getNamedQuery(e,t){return je.resolve(this.ts.get(t))}saveNamedQuery(e,t){return this.ts.set(t.name,{name:(o=t).name,query:np(o.bundledQuery),readTime:zs(o.readTime)}),je.resolve();var o}}class d_{constructor(){this.overlays=new en(Dt.comparator),this.es=new Map}getOverlay(e,t){return je.resolve(this.overlays.get(t))}getOverlays(e,t){const o=Qo();return je.forEach(t,u=>this.getOverlay(e,u).next(d=>{null!==d&&o.set(u,d)})).next(()=>o)}saveOverlays(e,t,o){return o.forEach((u,d)=>{this.ue(e,t,d)}),je.resolve()}removeOverlaysForBatchId(e,t,o){const u=this.es.get(o);return void 0!==u&&(u.forEach(d=>this.overlays=this.overlays.remove(d)),this.es.delete(o)),je.resolve()}getOverlaysForCollection(e,t,o){const u=Qo(),d=t.length+1,g=new Dt(t.child("")),C=this.overlays.getIteratorFrom(g);for(;C.hasNext();){const V=C.getNext().value,H=V.getKey();if(!t.isPrefixOf(H.path))break;H.path.length===d&&V.largestBatchId>o&&u.set(V.getKey(),V)}return je.resolve(u)}getOverlaysForCollectionGroup(e,t,o,u){let d=new en((H,J)=>H-J);const g=this.overlays.getIterator();for(;g.hasNext();){const H=g.getNext().value;if(H.getKey().getCollectionGroup()===t&&H.largestBatchId>o){let J=d.get(H.largestBatchId);null===J&&(J=Qo(),d=d.insert(H.largestBatchId,J)),J.set(H.getKey(),H)}}const C=Qo(),V=d.getIterator();for(;V.hasNext()&&(V.getNext().value.forEach((H,J)=>C.set(H,J)),!(C.size()>=u)););return je.resolve(C)}ue(e,t,o){const u=this.overlays.get(o.key);if(null!==u){const g=this.es.get(u.largestBatchId).delete(o.key);this.es.set(u.largestBatchId,g)}this.overlays=this.overlays.insert(o.key,new dd(t,o));let d=this.es.get(t);void 0===d&&(d=Zn(),this.es.set(t,d)),this.es.set(t,d.add(o.key))}}class xh{constructor(){this.ns=new Bn(To.ss),this.rs=new Bn(To.os)}isEmpty(){return this.ns.isEmpty()}addReference(e,t){const o=new To(e,t);this.ns=this.ns.add(o),this.rs=this.rs.add(o)}us(e,t){e.forEach(o=>this.addReference(o,t))}removeReference(e,t){this.cs(new To(e,t))}hs(e,t){e.forEach(o=>this.removeReference(o,t))}ls(e){const t=new Dt(new Yt([])),o=new To(t,e),u=new To(t,e+1),d=[];return this.rs.forEachInRange([o,u],g=>{this.cs(g),d.push(g.key)}),d}fs(){this.ns.forEach(e=>this.cs(e))}cs(e){this.ns=this.ns.delete(e),this.rs=this.rs.delete(e)}ds(e){const t=new Dt(new Yt([])),o=new To(t,e),u=new To(t,e+1);let d=Zn();return this.rs.forEachInRange([o,u],g=>{d=d.add(g.key)}),d}containsKey(e){const t=new To(e,0),o=this.ns.firstAfterOrEqual(t);return null!==o&&e.isEqual(o.key)}}class To{constructor(e,t){this.key=e,this._s=t}static ss(e,t){return Dt.comparator(e.key,t.key)||ke(e._s,t._s)}static os(e,t){return ke(e._s,t._s)||Dt.comparator(e.key,t.key)}}class h_{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.ws=1,this.gs=new Bn(To.ss)}checkEmpty(e){return je.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,o,u){const d=this.ws;this.ws++;const g=new bo(d,t,o,u);this.mutationQueue.push(g);for(const C of u)this.gs=this.gs.add(new To(C.key,d)),this.indexManager.addToCollectionParentIndex(e,C.key.path.popLast());return je.resolve(g)}lookupMutationBatch(e,t){return je.resolve(this.ys(t))}getNextMutationBatchAfterBatchId(e,t){const u=this.ps(t+1),d=u<0?0:u;return je.resolve(this.mutationQueue.length>d?this.mutationQueue[d]:null)}getHighestUnacknowledgedBatchId(){return je.resolve(0===this.mutationQueue.length?-1:this.ws-1)}getAllMutationBatches(e){return je.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const o=new To(t,0),u=new To(t,Number.POSITIVE_INFINITY),d=[];return this.gs.forEachInRange([o,u],g=>{const C=this.ys(g._s);d.push(C)}),je.resolve(d)}getAllMutationBatchesAffectingDocumentKeys(e,t){let o=new Bn(ke);return t.forEach(u=>{const d=new To(u,0),g=new To(u,Number.POSITIVE_INFINITY);this.gs.forEachInRange([d,g],C=>{o=o.add(C._s)})}),je.resolve(this.Is(o))}getAllMutationBatchesAffectingQuery(e,t){const o=t.path,u=o.length+1;let d=o;Dt.isDocumentKey(d)||(d=d.child(""));const g=new To(new Dt(d),0);let C=new Bn(ke);return this.gs.forEachWhile(V=>{const H=V.key.path;return!!o.isPrefixOf(H)&&(H.length===u&&(C=C.add(V._s)),!0)},g),je.resolve(this.Is(C))}Is(e){const t=[];return e.forEach(o=>{const u=this.ys(o);null!==u&&t.push(u)}),t}removeMutationBatch(e,t){ln(0===this.Ts(t.batchId,"removed")),this.mutationQueue.shift();let o=this.gs;return je.forEach(t.mutations,u=>{const d=new To(u.key,t.batchId);return o=o.delete(d),this.referenceDelegate.markPotentiallyOrphaned(e,u.key)}).next(()=>{this.gs=o})}An(e){}containsKey(e,t){const o=new To(t,0),u=this.gs.firstAfterOrEqual(o);return je.resolve(t.isEqual(u&&u.key))}performConsistencyCheck(e){return je.resolve()}Ts(e,t){return this.ps(e)}ps(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}ys(e){const t=this.ps(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class Zg{constructor(e){this.Es=e,this.docs=new en(Dt.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const o=t.key,u=this.docs.get(o),d=u?u.size:0,g=this.Es(t);return this.docs=this.docs.insert(o,{document:t.mutableCopy(),size:g}),this.size+=g-d,this.indexManager.addToCollectionParentIndex(e,o.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const o=this.docs.get(t);return je.resolve(o?o.document.mutableCopy():bi.newInvalidDocument(t))}getEntries(e,t){let o=Gs();return t.forEach(u=>{const d=this.docs.get(u);o=o.insert(u,d?d.document.mutableCopy():bi.newInvalidDocument(u))}),je.resolve(o)}getAllFromCollection(e,t,o){let u=Gs();const d=new Dt(t.child("")),g=this.docs.getIteratorFrom(d);for(;g.hasNext();){const{key:C,value:{document:V}}=g.getNext();if(!t.isPrefixOf(C.path))break;C.path.length>t.length+1||au(Ji(V),o)<=0||(u=u.insert(V.key,V.mutableCopy()))}return je.resolve(u)}getAllFromCollectionGroup(e,t,o,u){Gt()}As(e,t){return je.forEach(this.docs,o=>t(o))}newChangeBuffer(e){return new yp(this)}getSize(e){return je.resolve(this.size)}}class yp extends hp{constructor(e){super(),this.Yn=e}applyChanges(e){const t=[];return this.changes.forEach((o,u)=>{u.isValidDocument()?t.push(this.Yn.addEntry(e,u)):this.Yn.removeEntry(o)}),je.waitFor(t)}getFromCache(e,t){return this.Yn.getEntry(e,t)}getAllFromCache(e,t){return this.Yn.getEntries(e,t)}}class Kg{constructor(e){this.persistence=e,this.Rs=new pu(t=>Yu(t),Il),this.lastRemoteSnapshotVersion=Tt.min(),this.highestTargetId=0,this.bs=0,this.Ps=new xh,this.targetCount=0,this.vs=Gl.Pn()}forEachTarget(e,t){return this.Rs.forEach((o,u)=>t(u)),je.resolve()}getLastRemoteSnapshotVersion(e){return je.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return je.resolve(this.bs)}allocateTargetId(e){return this.highestTargetId=this.vs.next(),je.resolve(this.highestTargetId)}setTargetsMetadata(e,t,o){return o&&(this.lastRemoteSnapshotVersion=o),t>this.bs&&(this.bs=t),je.resolve()}Dn(e){this.Rs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.vs=new Gl(t),this.highestTargetId=t),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}addTargetData(e,t){return this.Dn(t),this.targetCount+=1,je.resolve()}updateTargetData(e,t){return this.Dn(t),je.resolve()}removeTargetData(e,t){return this.Rs.delete(t.target),this.Ps.ls(t.targetId),this.targetCount-=1,je.resolve()}removeTargets(e,t,o){let u=0;const d=[];return this.Rs.forEach((g,C)=>{C.sequenceNumber<=t&&null===o.get(C.targetId)&&(this.Rs.delete(g),d.push(this.removeMatchingKeysForTargetId(e,C.targetId)),u++)}),je.waitFor(d).next(()=>u)}getTargetCount(e){return je.resolve(this.targetCount)}getTargetData(e,t){const o=this.Rs.get(t)||null;return je.resolve(o)}addMatchingKeys(e,t,o){return this.Ps.us(t,o),je.resolve()}removeMatchingKeys(e,t,o){this.Ps.hs(t,o);const u=this.persistence.referenceDelegate,d=[];return u&&t.forEach(g=>{d.push(u.markPotentiallyOrphaned(e,g))}),je.waitFor(d)}removeMatchingKeysForTargetId(e,t){return this.Ps.ls(t),je.resolve()}getMatchingKeysForTargetId(e,t){const o=this.Ps.ds(t);return je.resolve(o)}containsKey(e,t){return je.resolve(this.Ps.containsKey(t))}}class f_{constructor(e,t){this.Vs={},this.overlays={},this.Ss=new te(0),this.Ds=!1,this.Ds=!0,this.referenceDelegate=e(this),this.Cs=new Kg(this),this.indexManager=new ap,this.remoteDocumentCache=new Zg(o=>this.referenceDelegate.xs(o)),this.It=new kg(t),this.Ns=new gd(this.It)}start(){return Promise.resolve()}shutdown(){return this.Ds=!1,Promise.resolve()}get started(){return this.Ds}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new d_,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let o=this.Vs[e.toKey()];return o||(o=new h_(t,this.referenceDelegate),this.Vs[e.toKey()]=o),o}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ns}runTransaction(e,t,o){It("MemoryPersistence","Starting transaction:",e);const u=new Yg(this.Ss.next());return this.referenceDelegate.ks(),o(u).next(d=>this.referenceDelegate.Ms(u).next(()=>d)).toPromise().then(d=>(u.raiseOnCommittedEvent(),d))}Os(e,t){return je.or(Object.values(this.Vs).map(o=>()=>o.containsKey(e,t)))}}class Yg extends sa{constructor(e){super(),this.currentSequenceNumber=e}}class Mh{constructor(e){this.persistence=e,this.Fs=new xh,this.$s=null}static Bs(e){return new Mh(e)}get Ls(){if(this.$s)return this.$s;throw Gt()}addReference(e,t,o){return this.Fs.addReference(o,t),this.Ls.delete(o.toString()),je.resolve()}removeReference(e,t,o){return this.Fs.removeReference(o,t),this.Ls.add(o.toString()),je.resolve()}markPotentiallyOrphaned(e,t){return this.Ls.add(t.toString()),je.resolve()}removeTarget(e,t){this.Fs.ls(t.targetId).forEach(u=>this.Ls.add(u.toString()));const o=this.persistence.getTargetCache();return o.getMatchingKeysForTargetId(e,t.targetId).next(u=>{u.forEach(d=>this.Ls.add(d.toString()))}).next(()=>o.removeTargetData(e,t))}ks(){this.$s=new Set}Ms(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return je.forEach(this.Ls,o=>{const u=Dt.fromPath(o);return this.Us(e,u).next(d=>{d||t.removeEntry(u,Tt.min())})}).next(()=>(this.$s=null,t.apply(e)))}updateLimboDocument(e,t){return this.Us(e,t).next(o=>{o?this.Ls.delete(t.toString()):this.Ls.add(t.toString())})}xs(e){return 0}Us(e,t){return je.or([()=>je.resolve(this.Fs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Os(e,t)])}}class Qg{constructor(e){this.It=e}$(e,t,o,u){const d=new Fa("createOrUpgrade",t);var C;o<1&&u>=1&&(e.createObjectStore("owner"),(C=e).createObjectStore("mutationQueues",{keyPath:"userId"}),C.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Qf,{unique:!0}),C.createObjectStore("documentMutations"),Jg(e),function(C){C.createObjectStore("remoteDocuments")}(e));let g=je.resolve();return o<3&&u>=3&&(0!==o&&(function(C){C.deleteObjectStore("targetDocuments"),C.deleteObjectStore("targets"),C.deleteObjectStore("targetGlobal")}(e),Jg(e)),g=g.next(()=>function(C){const V=C.store("targetGlobal"),H={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Tt.min().toTimestamp(),targetCount:0};return V.put("targetGlobalKey",H)}(d))),o<4&&u>=4&&(0!==o&&(g=g.next(()=>function(C,V){return V.store("mutations").W().next(H=>{C.deleteObjectStore("mutations"),C.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Qf,{unique:!0});const J=V.store("mutations"),me=H.map(Ue=>J.put(Ue));return je.waitFor(me)})}(e,d))),g=g.next(()=>{!function(C){C.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),o<5&&u>=5&&(g=g.next(()=>this.qs(d))),o<6&&u>=6&&(g=g.next(()=>(function(C){C.createObjectStore("remoteDocumentGlobal")}(e),this.Ks(d)))),o<7&&u>=7&&(g=g.next(()=>this.Gs(d))),o<8&&u>=8&&(g=g.next(()=>this.Qs(e,d))),o<9&&u>=9&&(g=g.next(()=>{!function(C){C.objectStoreNames.contains("remoteDocumentChanges")&&C.deleteObjectStore("remoteDocumentChanges")}(e)})),o<10&&u>=10&&(g=g.next(()=>this.js(d))),o<11&&u>=11&&(g=g.next(()=>{(function(C){C.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(C){C.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),o<12&&u>=12&&(g=g.next(()=>{!function(C){const V=C.createObjectStore("documentOverlays",{keyPath:n_});V.createIndex("collectionPathOverlayIndex",r_,{unique:!1}),V.createIndex("collectionGroupOverlayIndex",i_,{unique:!1})}(e)})),o<13&&u>=13&&(g=g.next(()=>function(C){const V=C.createObjectStore("remoteDocumentsV14",{keyPath:Jf});V.createIndex("documentKeyIndex",cd),V.createIndex("collectionGroupIndex",Ky)}(e)).next(()=>this.Ws(e,d)).next(()=>e.deleteObjectStore("remoteDocuments"))),o<14&&u>=14&&(g=g.next(()=>this.zs(e,d))),o<15&&u>=15&&(g=g.next(()=>function(C){C.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),C.createObjectStore("indexState",{keyPath:Xy}).createIndex("sequenceNumberIndex",e_,{unique:!1}),C.createObjectStore("indexEntries",{keyPath:t_}).createIndex("documentKeyIndex",Xf,{unique:!1})}(e))),g}Ks(e){let t=0;return e.store("remoteDocuments").Z((o,u)=>{t+=Ih(u)}).next(()=>{const o={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",o)})}qs(e){const t=e.store("mutationQueues"),o=e.store("mutations");return t.W().next(u=>je.forEach(u,d=>{const g=IDBKeyRange.bound([d.userId,-1],[d.userId,d.lastAcknowledgedBatchId]);return o.W("userMutationsIndex",g).next(C=>je.forEach(C,V=>{ln(V.userId===d.userId);const H=Ul(this.It,V);return Gg(e,d.userId,H).next(()=>{})}))}))}Gs(e){const t=e.store("targetDocuments"),o=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(u=>{const d=[];return o.Z((g,C)=>{const V=new Yt(g),H=[0,ua(V)];d.push(t.get(H).next(J=>J?je.resolve():t.put({targetId:0,path:ua(V),sequenceNumber:u.highestListenSequenceNumber})))}).next(()=>je.waitFor(d))})}Qs(e,t){e.createObjectStore("collectionParents",{keyPath:Jy});const o=t.store("collectionParents"),u=new vh,d=g=>{if(u.add(g)){const C=g.lastSegment(),V=g.popLast();return o.put({collectionId:C,parent:ua(V)})}};return t.store("remoteDocuments").Z({X:!0},(g,C)=>{const V=new Yt(g);return d(V.popLast())}).next(()=>t.store("documentMutations").Z({X:!0},([g,C,V],H)=>{const J=nu(C);return d(J.popLast())}))}js(e){const t=e.store("targets");return t.Z((o,u)=>{const d=fd(u),g=Vg(this.It,d);return t.put(g)})}Ws(e,t){const o=t.store("remoteDocuments"),u=[];return o.Z((d,g)=>{const C=t.store("remoteDocumentsV14"),V=(H=g,H.document?new Dt(Yt.fromString(H.document.name).popFirst(5)):H.noDocument?Dt.fromSegments(H.noDocument.path):H.unknownDocument?Dt.fromSegments(H.unknownDocument.path):Gt()).path.toArray();var H;const J={prefixPath:V.slice(0,V.length-2),collectionGroup:V[V.length-2],documentId:V[V.length-1],readTime:g.readTime||[0,0],unknownDocument:g.unknownDocument,noDocument:g.noDocument,document:g.document,hasCommittedMutations:!!g.hasCommittedMutations};u.push(C.put(J))}).next(()=>je.waitFor(u))}zs(e,t){const o=t.store("mutations"),u=fp(this.It),d=new f_(Mh.Bs,this.It.re);return o.W().next(g=>{const C=new Map;return g.forEach(V=>{var H;let J=null!==(H=C.get(V.userId))&&void 0!==H?H:Zn();Ul(this.It,V).keys().forEach(me=>J=J.add(me)),C.set(V.userId,J)}),je.forEach(C,(V,H)=>{const J=new Ci(H),me=ip.oe(this.It,J),Ue=d.getIndexManager(J),st=Dh.oe(J,this.It,Ue,d.referenceDelegate);return new Ah(u,st,me,Ue).recalculateAndSaveOverlaysForDocumentKeys(new yh(t,te.at),V).next()})})}}function Jg(i){i.createObjectStore("targetDocuments",{keyPath:Qy}).createIndex("documentTargetsIndex",Ng,{unique:!0}),i.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Yy,{unique:!0}),i.createObjectStore("targetGlobal")}const _p="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Va{constructor(e,t,o,u,d,g,C,V,H,J,me=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=o,this.Hs=d,this.window=g,this.document=C,this.Js=H,this.Ys=J,this.Xs=me,this.Ss=null,this.Ds=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Zs=null,this.inForeground=!1,this.ti=null,this.ei=null,this.ni=Number.NEGATIVE_INFINITY,this.si=Ue=>Promise.resolve(),!Va.C())throw new ft(We.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new bh(this,u),this.ii=t+"main",this.It=new kg(V),this.ri=new Is(this.ii,this.Xs,new Qg(this.It)),this.Cs=new l_(this.referenceDelegate,this.It),this.remoteDocumentCache=fp(this.It),this.Ns=new o_,this.window&&this.window.localStorage?this.oi=this.window.localStorage:(this.oi=null,!1===J&&Cr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ui().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new ft(We.FAILED_PRECONDITION,_p);return this.ci(),this.ai(),this.hi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Cs.getHighestSequenceNumber(e))}).then(e=>{this.Ss=new te(e,this.Js)}).then(()=>{this.Ds=!0}).catch(e=>(this.ri&&this.ri.close(),Promise.reject(e)))}li(e){var t=this;return this.si=function(){var o=(0,he.Z)(function*(u){if(t.started)return e(u)});return function(u){return o.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ri.L(function(){var t=(0,he.Z)(function*(o){null===o.newVersion&&(yield e())});return function(o){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Hs.enqueueAndForget((0,he.Z)(function*(){t.started&&(yield t.ui())})))}ui(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>yd(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.fi(e).next(t=>{t||(this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)))})}).next(()=>this.di(e)).next(t=>this.isPrimary&&!t?this._i(e).next(()=>!1):!!t&&this.wi(e).next(()=>!0))).catch(e=>{if(Fo(e))return It("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return It("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Hs.enqueueRetryable(()=>this.si(e)),this.isPrimary=e})}fi(e){return md(e).get("owner").next(t=>je.resolve(this.mi(t)))}gi(e){return yd(e).delete(this.clientId)}yi(){var e=this;return(0,he.Z)(function*(){if(e.isPrimary&&!e.pi(e.ni,18e5)){e.ni=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",o=>{const u=to(o,"clientMetadata");return u.W().next(d=>{const g=e.Ii(d,18e5),C=d.filter(V=>-1===g.indexOf(V));return je.forEach(C,V=>u.delete(V.clientId)).next(()=>C)})}).catch(()=>[]);if(e.oi)for(const o of t)e.oi.removeItem(e.Ti(o.clientId))}})()}hi(){this.ei=this.Hs.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ui().then(()=>this.yi()).then(()=>this.hi()))}mi(e){return!!e&&e.ownerId===this.clientId}di(e){return this.Ys?je.resolve(!0):md(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)){if(this.mi(t)&&this.networkEnabled)return!0;if(!this.mi(t)){if(!t.allowTabSynchronization)throw new ft(We.FAILED_PRECONDITION,_p);return!1}}return!(!this.networkEnabled||!this.inForeground)||yd(e).W().next(o=>void 0===this.Ii(o,5e3).find(u=>{if(this.clientId!==u.clientId){const g=!this.inForeground&&u.inForeground,C=this.networkEnabled===u.networkEnabled;if(!this.networkEnabled&&u.networkEnabled||g&&C)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&It("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,he.Z)(function*(){e.Ds=!1,e.Ai(),e.ei&&(e.ei.cancel(),e.ei=null),e.Ri(),e.bi(),yield e.ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const o=new yh(t,te.at);return e._i(o).next(()=>e.gi(o))}),e.ri.close(),e.Pi()})()}Ii(e,t){return e.filter(o=>this.pi(o.updateTimeMs,t)&&!this.Ei(o.clientId))}vi(){return this.runTransaction("getActiveClients","readonly",e=>yd(e).W().next(t=>this.Ii(t,18e5).map(o=>o.clientId)))}get started(){return this.Ds}getMutationQueue(e,t){return Dh.oe(e,this.It,t,this.referenceDelegate)}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new bc(e,this.It.re.databaseId)}getDocumentOverlayCache(e){return ip.oe(this.It,e)}getBundleCache(){return this.Ns}runTransaction(e,t,o){It("IndexedDbPersistence","Starting transaction:",e);const u="readonly"===t?"readonly":"readwrite",d=15===(g=this.Xs)?tp:14===g?Jo:13===g?Pg:12===g?s_:11===g?ep:void Gt();var g;let C;return this.ri.runTransaction(e,u,d,V=>(C=new yh(V,this.Ss?this.Ss.next():te.at),"readwrite-primary"===t?this.fi(C).next(H=>!!H||this.di(C)).next(H=>{if(!H)throw Cr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)),new ft(We.FAILED_PRECONDITION,ka);return o(C)}).next(H=>this.wi(C).next(()=>H)):this.Vi(C).next(()=>o(C)))).then(V=>(C.raiseOnCommittedEvent(),V))}Vi(e){return md(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)&&!this.mi(t)&&!(this.Ys||this.allowTabSynchronization&&t.allowTabSynchronization))throw new ft(We.FAILED_PRECONDITION,_p)})}wi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return md(e).put("owner",t)}static C(){return Is.C()}_i(e){const t=md(e);return t.get("owner").next(o=>this.mi(o)?(It("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):je.resolve())}pi(e,t){const o=Date.now();return!(e<o-t||e>o&&(Cr(`Detected an update time that is in the future: ${e} > ${o}`),1))}ci(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ti=()=>{this.Hs.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ui()))},this.document.addEventListener("visibilitychange",this.ti),this.inForeground="visible"===this.document.visibilityState)}Ri(){this.ti&&(this.document.removeEventListener("visibilitychange",this.ti),this.ti=null)}ai(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Zs=()=>{this.Ai(),(0,Je.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Hs.enterRestrictedMode(!0),this.Hs.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Zs))}bi(){this.Zs&&(this.window.removeEventListener("pagehide",this.Zs),this.Zs=null)}Ei(e){var t;try{const o=null!==(null===(t=this.oi)||void 0===t?void 0:t.getItem(this.Ti(e)));return It("IndexedDbPersistence",`Client '${e}' ${o?"is":"is not"} zombied in LocalStorage`),o}catch(o){return Cr("IndexedDbPersistence","Failed to get zombied client id.",o),!1}}Ai(){if(this.oi)try{this.oi.setItem(this.Ti(this.clientId),String(Date.now()))}catch(e){Cr("Failed to set zombie client id.",e)}}Pi(){if(this.oi)try{this.oi.removeItem(this.Ti(this.clientId))}catch{}}Ti(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function md(i){return to(i,"owner")}function yd(i){return to(i,"clientMetadata")}function vp(i,e){let t=i.projectId;return i.isDefaultDatabase||(t+="."+i.database),"firestore/"+e+"/"+t+"/"}class wp{constructor(e,t,o,u){this.targetId=e,this.fromCache=t,this.Si=o,this.Di=u}static Ci(e,t){let o=Zn(),u=Zn();for(const d of t.docChanges)switch(d.type){case 0:o=o.add(d.doc.key);break;case 1:u=u.add(d.doc.key)}return new wp(e,t.fromCache,o,u)}}class Xg{constructor(){this.xi=!1}initialize(e,t){this.Ni=e,this.indexManager=t,this.xi=!0}getDocumentsMatchingQuery(e,t,o,u){return this.ki(e,t).next(d=>d||this.Mi(e,t,u,o)).next(d=>d||this.Oi(e,t))}ki(e,t){if(rh(t))return je.resolve(null);let o=bs(t);return this.indexManager.getIndexType(e,o).next(u=>0===u?null:(null!==t.limit&&1===u&&(t=hc(t,null,"F"),o=bs(t)),this.indexManager.getDocumentsMatchingTarget(e,o).next(d=>{const g=Zn(...d);return this.Ni.getDocuments(e,g).next(C=>this.indexManager.getMinOffset(e,o).next(V=>{const H=this.Fi(t,C);return this.$i(t,H,g,V.readTime)?this.ki(e,hc(t,null,"F")):this.Bi(e,H,t,V)}))})))}Mi(e,t,o,u){return rh(t)||u.isEqual(Tt.min())?this.Oi(e,t):this.Ni.getDocuments(e,o).next(d=>{const g=this.Fi(t,d);return this.$i(t,g,o,u)?this.Oi(e,t):(_a()<=yt.in.DEBUG&&It("QueryEngine","Re-using previous result from %s to execute query: %s",u.toString(),Yc(t)),this.Bi(e,g,t,Co(u,-1)))})}Fi(e,t){let o=new Bn(La(e));return t.forEach((u,d)=>{du(e,d)&&(o=o.add(d))}),o}$i(e,t,o,u){if(null===e.limit)return!1;if(o.size!==t.size)return!0;const d="F"===e.limitType?t.last():t.first();return!!d&&(d.hasPendingWrites||d.version.compareTo(u)>0)}Oi(e,t){return _a()<=yt.in.DEBUG&&It("QueryEngine","Using full collection scan to execute query:",Yc(t)),this.Ni.getDocumentsMatchingQuery(e,t,$r.min())}Bi(e,t,o,u){return this.Ni.getDocumentsMatchingQuery(e,o,u).next(d=>(t.forEach(g=>{d=d.insert(g.key,g)}),d))}}class p_{constructor(e,t,o,u){this.persistence=e,this.Li=t,this.It=u,this.Ui=new en(ke),this.qi=new pu(d=>Yu(d),Il),this.Ki=new Map,this.Gi=e.getRemoteDocumentCache(),this.Cs=e.getTargetCache(),this.Ns=e.getBundleCache(),this.Qi(o)}Qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Ah(this.Gi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Gi.setIndexManager(this.indexManager),this.Li.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ui))}}function Ep(i,e,t,o){return new p_(i,e,t,o)}function em(i,e){return Ip.apply(this,arguments)}function Ip(){return Ip=(0,he.Z)(function*(i,e){const t=Lt(i);return yield t.persistence.runTransaction("Handle user change","readonly",o=>{let u;return t.mutationQueue.getAllMutationBatches(o).next(d=>(u=d,t.Qi(e),t.mutationQueue.getAllMutationBatches(o))).next(d=>{const g=[],C=[];let V=Zn();for(const H of u){g.push(H.batchId);for(const J of H.mutations)V=V.add(J.key)}for(const H of d){C.push(H.batchId);for(const J of H.mutations)V=V.add(J.key)}return t.localDocuments.getDocuments(o,V).next(H=>({ji:H,removedBatchIds:g,addedBatchIds:C}))})})}),Ip.apply(this,arguments)}function g_(i,e){const t=Lt(i);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",o=>{const u=e.batch.keys(),d=t.Gi.newChangeBuffer({trackRemovals:!0});return function(g,C,V,H){const J=V.batch,me=J.keys();let Ue=je.resolve();return me.forEach(st=>{Ue=Ue.next(()=>H.getEntry(C,st)).next(ht=>{const Wt=V.docVersions.get(st);ln(null!==Wt),ht.version.compareTo(Wt)<0&&(J.applyToRemoteDocument(ht,V),ht.isValidDocument()&&(ht.setReadTime(V.commitVersion),H.addEntry(ht)))})}),Ue.next(()=>g.mutationQueue.removeMutationBatch(C,J))}(t,o,e,d).next(()=>d.apply(o)).next(()=>t.mutationQueue.performConsistencyCheck(o)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(o,u,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(o,function(g){let C=Zn();for(let V=0;V<g.mutationResults.length;++V)g.mutationResults[V].transformResults.length>0&&(C=C.add(g.batch.mutations[V].key));return C}(e))).next(()=>t.localDocuments.getDocuments(o,u))})}function tr(i){const e=Lt(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Cs.getLastRemoteSnapshotVersion(t))}function tm(i,e){const t=Lt(i),o=e.snapshotVersion;let u=t.Ui;return t.persistence.runTransaction("Apply remote event","readwrite-primary",d=>{const g=t.Gi.newChangeBuffer({trackRemovals:!0});u=t.Ui;const C=[];e.targetChanges.forEach((J,me)=>{const Ue=u.get(me);if(!Ue)return;C.push(t.Cs.removeMatchingKeys(d,J.removedDocuments,me).next(()=>t.Cs.addMatchingKeys(d,J.addedDocuments,me)));let st=Ue.withSequenceNumber(d.currentSequenceNumber);var ht,Wt,cn;e.targetMismatches.has(me)?st=st.withResumeToken(mi.EMPTY_BYTE_STRING,Tt.min()).withLastLimboFreeSnapshotVersion(Tt.min()):J.resumeToken.approximateByteSize()>0&&(st=st.withResumeToken(J.resumeToken,o)),u=u.insert(me,st),Wt=st,cn=J,(0===(ht=Ue).resumeToken.approximateByteSize()||Wt.snapshotVersion.toMicroseconds()-ht.snapshotVersion.toMicroseconds()>=3e8||cn.addedDocuments.size+cn.modifiedDocuments.size+cn.removedDocuments.size>0)&&C.push(t.Cs.updateTargetData(d,st))});let V=Gs(),H=Zn();if(e.documentUpdates.forEach(J=>{e.resolvedLimboDocuments.has(J)&&C.push(t.persistence.referenceDelegate.updateLimboDocument(d,J))}),C.push(Dp(d,g,e.documentUpdates).next(J=>{V=J.Wi,H=J.zi})),!o.isEqual(Tt.min())){const J=t.Cs.getLastRemoteSnapshotVersion(d).next(me=>t.Cs.setTargetsMetadata(d,d.currentSequenceNumber,o));C.push(J)}return je.waitFor(C).next(()=>g.apply(d)).next(()=>t.localDocuments.getLocalViewOfDocuments(d,V,H)).next(()=>V)}).then(d=>(t.Ui=u,d))}function Dp(i,e,t){let o=Zn(),u=Zn();return t.forEach(d=>o=o.add(d)),e.getEntries(i,o).next(d=>{let g=Gs();return t.forEach((C,V)=>{const H=d.get(C);V.isFoundDocument()!==H.isFoundDocument()&&(u=u.add(C)),V.isNoDocument()&&V.version.isEqual(Tt.min())?(e.removeEntry(C,V.readTime),g=g.insert(C,V)):!H.isValidDocument()||V.version.compareTo(H.version)>0||0===V.version.compareTo(H.version)&&H.hasPendingWrites?(e.addEntry(V),g=g.insert(C,V)):It("LocalStore","Ignoring outdated watch update for ",C,". Current version:",H.version," Watch version:",V.version)}),{Wi:g,zi:u}})}function nm(i,e){const t=Lt(i);return t.persistence.runTransaction("Get next mutation batch","readonly",o=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(o,e)))}function Sc(i,e){const t=Lt(i);return t.persistence.runTransaction("Allocate target","readwrite",o=>{let u;return t.Cs.getTargetData(o,e).next(d=>d?(u=d,je.resolve(u)):t.Cs.allocateTargetId(o).next(g=>(u=new sl(e,g,0,o.currentSequenceNumber),t.Cs.addTargetData(o,u).next(()=>u))))}).then(o=>{const u=t.Ui.get(o.targetId);return(null===u||o.snapshotVersion.compareTo(u.snapshotVersion)>0)&&(t.Ui=t.Ui.insert(o.targetId,o),t.qi.set(e,o.targetId)),o})}function Ac(i,e,t){return Rh.apply(this,arguments)}function Rh(){return Rh=(0,he.Z)(function*(i,e,t){const o=Lt(i),u=o.Ui.get(e),d=t?"readwrite":"readwrite-primary";try{t||(yield o.persistence.runTransaction("Release target",d,g=>o.persistence.referenceDelegate.removeTarget(g,u)))}catch(g){if(!Fo(g))throw g;It("LocalStore",`Failed to update sequence numbers for target ${e}: ${g}`)}o.Ui=o.Ui.remove(e),o.qi.delete(u.target)}),Rh.apply(this,arguments)}function Oh(i,e,t){const o=Lt(i);let u=Tt.min(),d=Zn();return o.persistence.runTransaction("Execute query","readonly",g=>function(C,V,H){const J=Lt(C),me=J.qi.get(H);return void 0!==me?je.resolve(J.Ui.get(me)):J.Cs.getTargetData(V,H)}(o,g,bs(e)).next(C=>{if(C)return u=C.lastLimboFreeSnapshotVersion,o.Cs.getMatchingKeysForTargetId(g,C.targetId).next(V=>{d=V})}).next(()=>o.Li.getDocumentsMatchingQuery(g,e,t?u:Tt.min(),t?d:Zn())).next(C=>(im(o,Qc(e),C),{documents:C,Hi:d})))}function Cp(i,e){const t=Lt(i),o=Lt(t.Cs),u=t.Ui.get(e);return u?Promise.resolve(u.target):t.persistence.runTransaction("Get target data","readonly",d=>o.se(d,e).next(g=>g?g.target:null))}function rm(i,e){const t=Lt(i),o=t.Ki.get(e)||Tt.min();return t.persistence.runTransaction("Get new document changes","readonly",u=>t.Gi.getAllFromCollectionGroup(u,e,Co(o,-1),Number.MAX_SAFE_INTEGER)).then(u=>(im(t,e,u),u))}function im(i,e,t){let o=Tt.min();t.forEach((u,d)=>{d.readTime.compareTo(o)>0&&(o=d.readTime)}),i.Ki.set(e,o)}function Nh(){return Nh=(0,he.Z)(function*(i,e,t,o){const u=Lt(i);let d=Zn(),g=Gs();for(const H of t){const J=e.Ji(H.metadata.name);H.document&&(d=d.add(J));const me=e.Yi(H);me.setReadTime(e.Xi(H.metadata.readTime)),g=g.insert(J,me)}const C=u.Gi.newChangeBuffer({trackRemovals:!0}),V=yield Sc(u,(H=o,bs(Ou(Yt.fromString(`__bundle__/docs/${H}`)))));var H;return u.persistence.runTransaction("Apply bundle documents","readwrite",H=>Dp(H,C,g).next(J=>(C.apply(H),J)).next(J=>u.Cs.removeMatchingKeysForTargetId(H,V.targetId).next(()=>u.Cs.addMatchingKeys(H,d,V.targetId)).next(()=>u.localDocuments.getLocalViewOfDocuments(H,J.Wi,J.zi)).next(()=>J.Wi)))}),Nh.apply(this,arguments)}function sm(i,e){return Bu.apply(this,arguments)}function Bu(){return Bu=(0,he.Z)(function*(i,e,t=Zn()){const o=yield Sc(i,bs(np(e.bundledQuery))),u=Lt(i);return u.persistence.runTransaction("Save named query","readwrite",d=>{const g=zs(e.readTime);if(o.snapshotVersion.compareTo(g)>=0)return u.Ns.saveNamedQuery(d,e);const C=o.withResumeToken(mi.EMPTY_BYTE_STRING,g);return u.Ui=u.Ui.insert(C.targetId,C),u.Cs.updateTargetData(d,C).next(()=>u.Cs.removeMatchingKeysForTargetId(d,o.targetId)).next(()=>u.Cs.addMatchingKeys(d,t,o.targetId)).next(()=>u.Ns.saveNamedQuery(d,e))})}),Bu.apply(this,arguments)}function om(i,e){return`firestore_clients_${i}_${e}`}function Ph(i,e,t){let o=`firestore_mutations_${i}_${t}`;return e.isAuthenticated()&&(o+=`_${e.uid}`),o}function _d(i,e){return`firestore_targets_${i}_${e}`}class kh{constructor(e,t,o,u){this.user=e,this.batchId=t,this.state=o,this.error=u}static Zi(e,t,o){const u=JSON.parse(o);let d,g="object"==typeof u&&-1!==["pending","acknowledged","rejected"].indexOf(u.state)&&(void 0===u.error||"object"==typeof u.error);return g&&u.error&&(g="string"==typeof u.error.message&&"string"==typeof u.error.code,g&&(d=new ft(u.error.code,u.error.message))),g?new kh(e,t,u.state,d):(Cr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${o}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Fh{constructor(e,t,o){this.targetId=e,this.state=t,this.error=o}static Zi(e,t){const o=JSON.parse(t);let u,d="object"==typeof o&&-1!==["not-current","current","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return d&&o.error&&(d="string"==typeof o.error.message&&"string"==typeof o.error.code,d&&(u=new ft(o.error.code,o.error.message))),d?new Fh(e,o.state,u):(Cr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class bp{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Zi(e,t){const o=JSON.parse(t);let u="object"==typeof o&&o.activeTargetIds instanceof Array,d=wc();for(let g=0;u&&g<o.activeTargetIds.length;++g)u=vt(o.activeTargetIds[g]),d=d.add(o.activeTargetIds[g]);return u?new bp(e,d):(Cr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class am{constructor(e,t){this.clientId=e,this.onlineState=t}static Zi(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new am(t.clientId,t.onlineState):(Cr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class Tp{constructor(){this.activeTargetIds=wc()}er(e){this.activeTargetIds=this.activeTargetIds.add(e)}nr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}tr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Lh{constructor(e,t,o,u,d){this.window=e,this.Hs=t,this.persistenceKey=o,this.sr=u,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ir=this.rr.bind(this),this.ur=new en(ke),this.started=!1,this.cr=[];const g=o.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=d,this.ar=om(this.persistenceKey,this.sr),this.hr=`firestore_sequence_number_${this.persistenceKey}`,this.ur=this.ur.insert(this.sr,new Tp),this.lr=new RegExp(`^firestore_clients_${g}_([^_]*)$`),this.dr=new RegExp(`^firestore_mutations_${g}_(\\d+)(?:_(.*))?$`),this._r=new RegExp(`^firestore_targets_${g}_(\\d+)$`),this.wr=`firestore_online_state_${this.persistenceKey}`,this.mr=function(C){return`firestore_bundle_loaded_v2_${C}`}(this.persistenceKey),this.window.addEventListener("storage",this.ir)}static C(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,he.Z)(function*(){const t=yield e.syncEngine.vi();for(const u of t){if(u===e.sr)continue;const d=e.getItem(om(e.persistenceKey,u));if(d){const g=bp.Zi(u,d);g&&(e.ur=e.ur.insert(g.clientId,g))}}e.gr();const o=e.storage.getItem(e.wr);if(o){const u=e.yr(o);u&&e.pr(u)}for(const u of e.cr)e.rr(u);e.cr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.hr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ir(this.ur)}isActiveQueryTarget(e){let t=!1;return this.ur.forEach((o,u)=>{u.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Tr(e,"pending")}updateMutationState(e,t,o){this.Tr(e,t,o),this.Er(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const o=this.storage.getItem(_d(this.persistenceKey,e));if(o){const u=Fh.Zi(e,o);u&&(t=u.state)}}return this.Ar.er(e),this.gr(),t}removeLocalQueryTarget(e){this.Ar.nr(e),this.gr()}isLocalQueryTarget(e){return this.Ar.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(_d(this.persistenceKey,e))}updateQueryState(e,t,o){this.Rr(e,t,o)}handleUserChange(e,t,o){t.forEach(u=>{this.Er(u)}),this.currentUser=e,o.forEach(u=>{this.addPendingMutation(u)})}setOnlineState(e){this.br(e)}notifyBundleLoaded(e){this.Pr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ir),this.removeItem(this.ar),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return It("SharedClientState","READ",e,t),t}setItem(e,t){It("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){It("SharedClientState","REMOVE",e),this.storage.removeItem(e)}rr(e){var t=this;const o=e;if(o.storageArea===this.storage){if(It("SharedClientState","EVENT",o.key,o.newValue),o.key===this.ar)return void Cr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Hs.enqueueRetryable((0,he.Z)(function*(){if(t.started){if(null!==o.key)if(t.lr.test(o.key)){if(null==o.newValue){const u=t.vr(o.key);return t.Vr(u,null)}{const u=t.Sr(o.key,o.newValue);if(u)return t.Vr(u.clientId,u)}}else if(t.dr.test(o.key)){if(null!==o.newValue){const u=t.Dr(o.key,o.newValue);if(u)return t.Cr(u)}}else if(t._r.test(o.key)){if(null!==o.newValue){const u=t.Nr(o.key,o.newValue);if(u)return t.kr(u)}}else if(o.key===t.wr){if(null!==o.newValue){const u=t.yr(o.newValue);if(u)return t.pr(u)}}else if(o.key===t.hr){const u=function(d){let g=te.at;if(null!=d)try{const C=JSON.parse(d);ln("number"==typeof C),g=C}catch(C){Cr("SharedClientState","Failed to read sequence number from WebStorage",C)}return g}(o.newValue);u!==te.at&&t.sequenceNumberHandler(u)}else if(o.key===t.mr){const u=t.Mr(o.newValue);yield Promise.all(u.map(d=>t.syncEngine.Or(d)))}}else t.cr.push(o)}))}}get Ar(){return this.ur.get(this.sr)}gr(){this.setItem(this.ar,this.Ar.tr())}Tr(e,t,o){const u=new kh(this.currentUser,e,t,o),d=Ph(this.persistenceKey,this.currentUser,e);this.setItem(d,u.tr())}Er(e){const t=Ph(this.persistenceKey,this.currentUser,e);this.removeItem(t)}br(e){this.storage.setItem(this.wr,JSON.stringify({clientId:this.sr,onlineState:e}))}Rr(e,t,o){const u=_d(this.persistenceKey,e),d=new Fh(e,t,o);this.setItem(u,d.tr())}Pr(e){const t=JSON.stringify(Array.from(e));this.setItem(this.mr,t)}vr(e){const t=this.lr.exec(e);return t?t[1]:null}Sr(e,t){const o=this.vr(e);return bp.Zi(o,t)}Dr(e,t){const o=this.dr.exec(e),u=Number(o[1]);return kh.Zi(new Ci(void 0!==o[2]?o[2]:null),u,t)}Nr(e,t){const o=this._r.exec(e),u=Number(o[1]);return Fh.Zi(u,t)}yr(e){return am.Zi(e)}Mr(e){return JSON.parse(e)}Cr(e){var t=this;return(0,he.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Fr(e.batchId,e.state,e.error);It("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}kr(e){return this.syncEngine.$r(e.targetId,e.state,e.error)}Vr(e,t){const o=t?this.ur.insert(e,t):this.ur.remove(e),u=this.Ir(this.ur),d=this.Ir(o),g=[],C=[];return d.forEach(V=>{u.has(V)||g.push(V)}),u.forEach(V=>{d.has(V)||C.push(V)}),this.syncEngine.Br(g,C).then(()=>{this.ur=o})}pr(e){this.ur.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ir(e){let t=wc();return e.forEach((o,u)=>{t=t.unionWith(u.activeTargetIds)}),t}}class m_{constructor(){this.Lr=new Tp,this.Ur={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,o){}addLocalQueryTarget(e){return this.Lr.er(e),this.Ur[e]||"not-current"}updateQueryState(e,t,o){this.Ur[e]=t}removeLocalQueryTarget(e){this.Lr.nr(e)}isLocalQueryTarget(e){return this.Lr.activeTargetIds.has(e)}clearQueryState(e){delete this.Ur[e]}getAllActiveQueryTargets(){return this.Lr.activeTargetIds}isActiveQueryTarget(e){return this.Lr.activeTargetIds.has(e)}start(){return this.Lr=new Tp,Promise.resolve()}handleUserChange(e,t,o){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class y_{qr(e){}shutdown(){}}class Wl{constructor(){this.Kr=()=>this.Gr(),this.Qr=()=>this.jr(),this.Wr=[],this.zr()}qr(e){this.Wr.push(e)}shutdown(){window.removeEventListener("online",this.Kr),window.removeEventListener("offline",this.Qr)}zr(){window.addEventListener("online",this.Kr),window.addEventListener("offline",this.Qr)}Gr(){It("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Wr)e(0)}jr(){It("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Wr)e(1)}static C(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const __={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class um{constructor(e){this.Hr=e.Hr,this.Jr=e.Jr}Yr(e){this.Xr=e}Zr(e){this.eo=e}onMessage(e){this.no=e}close(){this.Jr()}send(e){this.Hr(e)}so(){this.Xr()}io(e){this.eo(e)}ro(e){this.no(e)}}class Vh extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.oo=(e.ssl?"https":"http")+"://"+e.host,this.uo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}co(e,t,o,u,d){const g=this.ao(e,t);It("RestConnection","Sending: ",g,o);const C={};return this.ho(C,u,d),this.lo(e,g,C,o).then(V=>(It("RestConnection","Received: ",V),V),V=>{throw fo("RestConnection",`${e} failed with error: `,V,"url: ",g,"request:",o),V})}fo(e,t,o,u,d,g){return this.co(e,t,o,u,d)}ho(e,t,o){e["X-Goog-Api-Client"]="gl-js/ fire/"+Do,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((u,d)=>e[d]=u),o&&o.headers.forEach((u,d)=>e[d]=u)}ao(e,t){return`${this.oo}/v1/${t}:${__[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}lo(e,t,o,u){return new Promise((d,g)=>{const C=new ra;C.listenOnce(Oa.COMPLETE,()=>{try{switch(C.getLastErrorCode()){case Mu.NO_ERROR:const H=C.getResponseJson();It("Connection","XHR received:",JSON.stringify(H)),d(H);break;case Mu.TIMEOUT:It("Connection",'RPC "'+e+'" timed out'),g(new ft(We.DEADLINE_EXCEEDED,"Request time out"));break;case Mu.HTTP_ERROR:const J=C.getStatus();if(It("Connection",'RPC "'+e+'" failed with status:',J,"response text:",C.getResponseText()),J>0){const me=C.getResponseJson().error;if(me&&me.status&&me.message){const Ue=function(st){const ht=st.toLowerCase().replace(/_/g,"-");return Object.values(We).indexOf(ht)>=0?ht:We.UNKNOWN}(me.status);g(new ft(Ue,me.message))}else g(new ft(We.UNKNOWN,"Server responded with status "+C.getStatus()))}else g(new ft(We.UNAVAILABLE,"Connection failed."));break;default:Gt()}}finally{It("Connection",'RPC "'+e+'" completed.')}});const V=JSON.stringify(u);C.send(t,"POST",V,o,15)})}_o(e,t,o){const u=[this.oo,"/","google.firestore.v1.Firestore","/",e,"/channel"],d=Oo(),g=Ra(),C={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(C.xmlHttpFactory=new hs({})),this.ho(C.initMessageHeaders,t,o),(0,Je.uI)()||(0,Je.b$)()||(0,Je.d)()||(0,Je.w1)()||(0,Je.Mn)()||(0,Je.ru)()||(C.httpHeadersOverwriteParam="$httpHeaders");const V=u.join("");It("Connection","Creating WebChannel: "+V,C);const H=d.createWebChannel(V,C);let J=!1,me=!1;const Ue=new um({Hr:ht=>{me?It("Connection","Not sending because WebChannel is closed:",ht):(J||(It("Connection","Opening WebChannel transport."),H.open(),J=!0),It("Connection","WebChannel sending:",ht),H.send(ht))},Jr:()=>H.close()}),st=(ht,Wt,cn)=>{ht.listen(Wt,Hr=>{try{cn(Hr)}catch(ti){setTimeout(()=>{throw ti},0)}})};return st(H,No.EventType.OPEN,()=>{me||It("Connection","WebChannel transport opened.")}),st(H,No.EventType.CLOSE,()=>{me||(me=!0,It("Connection","WebChannel transport closed"),Ue.io())}),st(H,No.EventType.ERROR,ht=>{me||(me=!0,fo("Connection","WebChannel transport errored:",ht),Ue.io(new ft(We.UNAVAILABLE,"The operation could not be completed")))}),st(H,No.EventType.MESSAGE,ht=>{var Wt;if(!me){const cn=ht.data[0];ln(!!cn);const Hr=cn,ti=Hr.error||(null===(Wt=Hr[0])||void 0===Wt?void 0:Wt.error);if(ti){It("Connection","WebChannel received error:",ti);const Vr=ti.status;let As=function(_i){const no=Wi[_i];if(void 0!==no)return Ol(no)}(Vr),ni=ti.message;void 0===As&&(As=We.INTERNAL,ni="Unknown error status: "+Vr+" with message "+ti.message),me=!0,Ue.io(new ft(As,ni)),H.close()}else It("Connection","WebChannel received:",cn),Ue.ro(cn)}}),st(g,Na.STAT_EVENT,ht=>{ht.stat===gi.PROXY?It("Connection","Detected buffering proxy"):ht.stat===gi.NOPROXY&&It("Connection","Detected no buffering proxy")}),setTimeout(()=>{Ue.so()},0),Ue}}function lm(){return typeof window<"u"?window:null}function vd(){return typeof document<"u"?document:null}function wd(i){return new ad(i,!0)}class Sp{constructor(e,t,o=1e3,u=1.5,d=6e4){this.Hs=e,this.timerId=t,this.wo=o,this.mo=u,this.yo=d,this.po=0,this.Io=null,this.To=Date.now(),this.reset()}reset(){this.po=0}Eo(){this.po=this.yo}Ao(e){this.cancel();const t=Math.floor(this.po+this.Ro()),o=Math.max(0,Date.now()-this.To),u=Math.max(0,t-o);u>0&&It("ExponentialBackoff",`Backing off for ${u} ms (base delay: ${this.po} ms, delay with jitter: ${t} ms, last attempt: ${o} ms ago)`),this.Io=this.Hs.enqueueAfterDelay(this.timerId,u,()=>(this.To=Date.now(),e())),this.po*=this.mo,this.po<this.wo&&(this.po=this.wo),this.po>this.yo&&(this.po=this.yo)}bo(){null!==this.Io&&(this.Io.skipDelay(),this.Io=null)}cancel(){null!==this.Io&&(this.Io.cancel(),this.Io=null)}Ro(){return(Math.random()-.5)*this.po}}class cm{constructor(e,t,o,u,d,g,C,V){this.Hs=e,this.Po=o,this.vo=u,this.Vo=d,this.authCredentialsProvider=g,this.appCheckCredentialsProvider=C,this.listener=V,this.state=0,this.So=0,this.Do=null,this.Co=null,this.stream=null,this.xo=new Sp(e,t)}No(){return 1===this.state||5===this.state||this.ko()}ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Mo()}stop(){var e=this;return(0,he.Z)(function*(){e.No()&&(yield e.close(0))})()}Oo(){this.state=0,this.xo.reset()}Fo(){this.ko()&&null===this.Do&&(this.Do=this.Hs.enqueueAfterDelay(this.Po,6e4,()=>this.$o()))}Bo(e){this.Lo(),this.stream.send(e)}$o(){var e=this;return(0,he.Z)(function*(){if(e.ko())return e.close(0)})()}Lo(){this.Do&&(this.Do.cancel(),this.Do=null)}Uo(){this.Co&&(this.Co.cancel(),this.Co=null)}close(e,t){var o=this;return(0,he.Z)(function*(){o.Lo(),o.Uo(),o.xo.cancel(),o.So++,4!==e?o.xo.reset():t&&t.code===We.RESOURCE_EXHAUSTED?(Cr(t.toString()),Cr("Using maximum backoff delay to prevent overloading the backend."),o.xo.Eo()):t&&t.code===We.UNAUTHENTICATED&&3!==o.state&&(o.authCredentialsProvider.invalidateToken(),o.appCheckCredentialsProvider.invalidateToken()),null!==o.stream&&(o.qo(),o.stream.close(),o.stream=null),o.state=e,yield o.listener.Zr(t)})()}qo(){}auth(){this.state=1;const e=this.Ko(this.So),t=this.So;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([o,u])=>{this.So===t&&this.Go(o,u)},o=>{e(()=>{const u=new ft(We.UNKNOWN,"Fetching auth token failed: "+o.message);return this.Qo(u)})})}Go(e,t){const o=this.Ko(this.So);this.stream=this.jo(e,t),this.stream.Yr(()=>{o(()=>(this.state=2,this.Co=this.Hs.enqueueAfterDelay(this.vo,1e4,()=>(this.ko()&&(this.state=3),Promise.resolve())),this.listener.Yr()))}),this.stream.Zr(u=>{o(()=>this.Qo(u))}),this.stream.onMessage(u=>{o(()=>this.onMessage(u))})}Mo(){var e=this;this.state=5,this.xo.Ao((0,he.Z)(function*(){e.state=0,e.start()}))}Qo(e){return It("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Ko(e){return t=>{this.Hs.enqueueAndForget(()=>this.So===e?t():(It("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class v_ extends cm{constructor(e,t,o,u,d,g){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,o,u,g),this.It=d}jo(e,t){return this.Vo._o("Listen",e,t)}onMessage(e){this.xo.reset();const t=function bn(i,e){let t;if("targetChange"in e){const o="NO_CHANGE"===(V=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===V?1:"REMOVE"===V?2:"CURRENT"===V?3:"RESET"===V?4:Gt(),u=e.targetChange.targetIds||[],d=function(V,H){return V.gt?(ln(void 0===H||"string"==typeof H),mi.fromBase64String(H||"")):(ln(void 0===H||H instanceof Uint8Array),mi.fromUint8Array(H||new Uint8Array))}(i,e.targetChange.resumeToken),g=e.targetChange.cause,C=g&&function(V){const H=void 0===V.code?We.UNKNOWN:Ol(V.code);return new ft(H,V.message||"")}(g);t=new tl(o,u,d,C||null)}else if("documentChange"in e){const o=e.documentChange,u=E(i,o.document.name),d=zs(o.document.updateTime),g=new Cs({mapValue:{fields:o.document.fields}}),C=bi.newFoundDocument(u,d,g);t=new Xi(o.targetIds||[],o.removedTargetIds||[],C.key,C)}else if("documentDelete"in e){const o=e.documentDelete,u=E(i,o.document),d=o.readTime?zs(o.readTime):Tt.min(),g=bi.newNoDocument(u,d);t=new Xi([],o.removedTargetIds||[],g.key,g)}else if("documentRemove"in e){const o=e.documentRemove,u=E(i,o.document);t=new Xi([],o.removedTargetIds||[],u,null)}else{if(!("filter"in e))return Gt();{const o=e.filter,d=new ku(o.count||0);t=new Pl(o.targetId,d)}}var V;return t}(this.It,e),o=function(u){if(!("targetChange"in u))return Tt.min();const d=u.targetChange;return d.targetIds&&d.targetIds.length?Tt.min():d.readTime?zs(d.readTime):Tt.min()}(e);return this.listener.Wo(t,o)}zo(e){const t={};t.database=be(this.It),t.addTarget=function(u,d){let g;const C=d.target;return g=Dl(C)?{documents:Ic(u,C)}:{query:nl(u,C)},g.targetId=d.targetId,d.resumeToken.approximateByteSize()>0?g.resumeToken=Ec(u,d.resumeToken):d.snapshotVersion.compareTo(Tt.min())>0&&(g.readTime=kl(u,d.snapshotVersion.toTimestamp())),g}(this.It,e);const o=function fh(i,e){const t=function(o,u){switch(u){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Gt()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);o&&(t.labels=o),this.Bo(t)}Ho(e){const t={};t.database=be(this.It),t.removeTarget=e,this.Bo(t)}}class w_ extends cm{constructor(e,t,o,u,d,g){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,o,u,g),this.It=d,this.Jo=!1}get Yo(){return this.Jo}start(){this.Jo=!1,this.lastStreamToken=void 0,super.start()}qo(){this.Jo&&this.Xo([])}jo(e,t){return this.Vo._o("Write",e,t)}onMessage(e){if(ln(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Jo){this.xo.reset();const t=function Fl(i,e){return i&&i.length>0?(ln(void 0!==e),i.map(t=>function(o,u){let d=zs(o.updateTime?o.updateTime:u);return d.isEqual(Tt.min())&&(d=zs(u)),new mc(d,o.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),o=zs(e.commitTime);return this.listener.Zo(o,t)}return ln(!e.writeResults||0===e.writeResults.length),this.Jo=!0,this.listener.tu()}eu(){const e={};e.database=be(this.It),this.Bo(e)}Xo(e){const t={streamToken:this.lastStreamToken,writes:e.map(o=>es(this.It,o))};this.Bo(t)}}class dm extends class{}{constructor(e,t,o,u){super(),this.authCredentials=e,this.appCheckCredentials=t,this.Vo=o,this.It=u,this.nu=!1}su(){if(this.nu)throw new ft(We.FAILED_PRECONDITION,"The client has already been terminated.")}co(e,t,o){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,d])=>this.Vo.co(e,t,o,u,d)).catch(u=>{throw"FirebaseError"===u.name?(u.code===We.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new ft(We.UNKNOWN,u.toString())})}fo(e,t,o,u){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([d,g])=>this.Vo.fo(e,t,o,d,g,u)).catch(d=>{throw"FirebaseError"===d.name?(d.code===We.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new ft(We.UNKNOWN,d.toString())})}terminate(){this.nu=!0}}class E_{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.iu=0,this.ru=null,this.ou=!0}uu(){0===this.iu&&(this.cu("Unknown"),this.ru=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ru=null,this.au("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve())))}hu(e){"Online"===this.state?this.cu("Unknown"):(this.iu++,this.iu>=1&&(this.lu(),this.au(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.cu("Offline")))}set(e){this.lu(),this.iu=0,"Online"===e&&(this.ou=!1),this.cu(e)}cu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}au(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ou?(Cr(t),this.ou=!1):It("OnlineStateTracker",t)}lu(){null!==this.ru&&(this.ru.cancel(),this.ru=null)}}class hm{constructor(e,t,o,u,d){var g=this;this.localStore=e,this.datastore=t,this.asyncQueue=o,this.remoteSyncer={},this.fu=[],this.du=new Map,this._u=new Set,this.wu=[],this.mu=d,this.mu.qr(C=>{o.enqueueAndForget((0,he.Z)(function*(){var V;So(g)&&(It("RemoteStore","Restarting streams for network reachability change."),yield(V=(0,he.Z)(function*(H){const J=Lt(H);J._u.add(4),yield Id(J),J.gu.set("Unknown"),J._u.delete(4),yield xc(J)}),function(H){return V.apply(this,arguments)})(g))}))}),this.gu=new E_(o,u)}}function xc(i){return Ed.apply(this,arguments)}function Ed(){return Ed=(0,he.Z)(function*(i){if(So(i))for(const e of i.wu)yield e(!0)}),Ed.apply(this,arguments)}function Id(i){return Dd.apply(this,arguments)}function Dd(){return Dd=(0,he.Z)(function*(i){for(const e of i.wu)yield e(!1)}),Dd.apply(this,arguments)}function Uh(i,e){const t=Lt(i);t.du.has(e.targetId)||(t.du.set(e.targetId,e),Mc(t)?jh(t):Ad(t).ko()&&ul(t,e))}function Bh(i,e){const t=Lt(i),o=Ad(t);t.du.delete(e),o.ko()&&Ap(t,e),0===t.du.size&&(o.ko()?o.Fo():So(t)&&t.gu.set("Unknown"))}function ul(i,e){i.yu.Ot(e.targetId),Ad(i).zo(e)}function Ap(i,e){i.yu.Ot(e),Ad(i).Ho(e)}function jh(i){i.yu=new tu({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),se:e=>i.du.get(e)||null}),Ad(i).start(),i.gu.uu()}function Mc(i){return So(i)&&!Ad(i).No()&&i.du.size>0}function So(i){return 0===Lt(i)._u.size}function xp(i){i.yu=void 0}function I_(i){return Cd.apply(this,arguments)}function Cd(){return Cd=(0,he.Z)(function*(i){i.du.forEach((e,t)=>{ul(i,e)})}),Cd.apply(this,arguments)}function ju(i,e){return bd.apply(this,arguments)}function bd(){return bd=(0,he.Z)(function*(i,e){xp(i),Mc(i)?(i.gu.hu(e),jh(i)):i.gu.set("Unknown")}),bd.apply(this,arguments)}function fm(i,e,t){return Td.apply(this,arguments)}function Td(){return Td=(0,he.Z)(function*(i,e,t){if(i.gu.set("Online"),e instanceof tl&&2===e.state&&e.cause)try{yield(o=(0,he.Z)(function*(u,d){const g=d.cause;for(const C of d.targetIds)u.du.has(C)&&(yield u.remoteSyncer.rejectListen(C,g),u.du.delete(C),u.yu.removeTarget(C))}),function(u,d){return o.apply(this,arguments)})(i,e)}catch(o){It("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),o),yield Mp(i,o)}else if(e instanceof Xi?i.yu.Gt(e):e instanceof Pl?i.yu.Yt(e):i.yu.Wt(e),!t.isEqual(Tt.min()))try{const o=yield tr(i.localStore);t.compareTo(o)>=0&&(yield function(u,d){const g=u.yu.te(d);return g.targetChanges.forEach((C,V)=>{if(C.resumeToken.approximateByteSize()>0){const H=u.du.get(V);H&&u.du.set(V,H.withResumeToken(C.resumeToken,d))}}),g.targetMismatches.forEach(C=>{const V=u.du.get(C);if(!V)return;u.du.set(C,V.withResumeToken(mi.EMPTY_BYTE_STRING,V.snapshotVersion)),Ap(u,C);const H=new sl(V.target,C,1,V.sequenceNumber);ul(u,H)}),u.remoteSyncer.applyRemoteEvent(g)}(i,t))}catch(o){It("RemoteStore","Failed to raise snapshot:",o),yield Mp(i,o)}var o}),Td.apply(this,arguments)}function Mp(i,e,t){return $h.apply(this,arguments)}function $h(){return $h=(0,he.Z)(function*(i,e,t){if(!Fo(e))throw e;i._u.add(1),yield Id(i),i.gu.set("Offline"),t||(t=()=>tr(i.localStore)),i.asyncQueue.enqueueRetryable((0,he.Z)(function*(){It("RemoteStore","Retrying IndexedDB access"),yield t(),i._u.delete(1),yield xc(i)}))}),$h.apply(this,arguments)}function D_(i,e){return e().catch(t=>Mp(i,t,e))}function $u(i){return Rc.apply(this,arguments)}function Rc(){return Rc=(0,he.Z)(function*(i){const e=Lt(i),t=ql(e);let o=e.fu.length>0?e.fu[e.fu.length-1].batchId:-1;for(;Rp(e);)try{const u=yield nm(e.localStore,o);if(null===u){0===e.fu.length&&t.Fo();break}o=u.batchId,Op(e,u)}catch(u){yield Mp(e,u)}Hh(e)&&C_(e)}),Rc.apply(this,arguments)}function Rp(i){return So(i)&&i.fu.length<10}function Op(i,e){i.fu.push(e);const t=ql(i);t.ko()&&t.Yo&&t.Xo(e.mutations)}function Hh(i){return So(i)&&!ql(i).No()&&i.fu.length>0}function C_(i){ql(i).start()}function b_(i){return Np.apply(this,arguments)}function Np(){return Np=(0,he.Z)(function*(i){ql(i).eu()}),Np.apply(this,arguments)}function T_(i){return Pp.apply(this,arguments)}function Pp(){return Pp=(0,he.Z)(function*(i){const e=ql(i);for(const t of i.fu)e.Xo(t.mutations)}),Pp.apply(this,arguments)}function pm(i,e,t){return gm.apply(this,arguments)}function gm(){return gm=(0,he.Z)(function*(i,e,t){const o=i.fu.shift(),u=Ll.from(o,e,t);yield D_(i,()=>i.remoteSyncer.applySuccessfulWrite(u)),yield $u(i)}),gm.apply(this,arguments)}function S_(i,e){return mm.apply(this,arguments)}function mm(){return mm=(0,he.Z)(function*(i,e){var t;e&&ql(i).Yo&&(yield(t=(0,he.Z)(function*(o,u){if(sd(d=u.code)&&d!==We.ABORTED){const g=o.fu.shift();ql(o).Oo(),yield D_(o,()=>o.remoteSyncer.rejectFailedWrite(g.batchId,u)),yield $u(o)}var d}),function(o,u){return t.apply(this,arguments)})(i,e)),Hh(i)&&C_(i)}),mm.apply(this,arguments)}function kp(i,e){return Gh.apply(this,arguments)}function Gh(){return Gh=(0,he.Z)(function*(i,e){const t=Lt(i);t.asyncQueue.verifyOperationInProgress(),It("RemoteStore","RemoteStore received new credentials");const o=So(t);t._u.add(3),yield Id(t),o&&t.gu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t._u.delete(3),yield xc(t)}),Gh.apply(this,arguments)}function Fp(i,e){return Sd.apply(this,arguments)}function Sd(){return Sd=(0,he.Z)(function*(i,e){const t=Lt(i);e?(t._u.delete(2),yield xc(t)):e||(t._u.add(2),yield Id(t),t.gu.set("Unknown"))}),Sd.apply(this,arguments)}function Ad(i){return i.pu||(i.pu=function(e,t,o){const u=Lt(e);return u.su(),new v_(t,u.Vo,u.authCredentials,u.appCheckCredentials,u.It,o)}(i.datastore,i.asyncQueue,{Yr:I_.bind(null,i),Zr:ju.bind(null,i),Wo:fm.bind(null,i)}),i.wu.push(function(){var e=(0,he.Z)(function*(t){t?(i.pu.Oo(),Mc(i)?jh(i):i.gu.set("Unknown")):(yield i.pu.stop(),xp(i))});return function(t){return e.apply(this,arguments)}}())),i.pu}function ql(i){return i.Iu||(i.Iu=function(e,t,o){const u=Lt(e);return u.su(),new w_(t,u.Vo,u.authCredentials,u.appCheckCredentials,u.It,o)}(i.datastore,i.asyncQueue,{Yr:b_.bind(null,i),Zr:S_.bind(null,i),tu:T_.bind(null,i),Zo:pm.bind(null,i)}),i.wu.push(function(){var e=(0,he.Z)(function*(t){t?(i.Iu.Oo(),yield $u(i)):(yield i.Iu.stop(),i.fu.length>0&&(It("RemoteStore",`Stopping write stream with ${i.fu.length} pending writes`),i.fu=[]))});return function(t){return e.apply(this,arguments)}}())),i.Iu}class ym{constructor(e,t,o,u,d){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=o,this.op=u,this.removalCallback=d,this.deferred=new Mi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(g=>{})}static createAndSchedule(e,t,o,u,d){const g=Date.now()+o,C=new ym(e,t,g,u,d);return C.start(o),C}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new ft(We.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function xd(i,e){if(Cr("AsyncQueue",`${e}: ${i}`),Fo(i))return new ft(We.UNAVAILABLE,`${e}: ${i}`);throw i}class Md{constructor(e){this.comparator=e?(t,o)=>e(t,o)||Dt.comparator(t.key,o.key):(t,o)=>Dt.comparator(t.key,o.key),this.keyedMap=yc(),this.sortedSet=new en(this.comparator)}static emptySet(e){return new Md(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,o)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Md)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),o=e.sortedSet.getIterator();for(;t.hasNext();){const u=t.getNext().key,d=o.getNext().key;if(!u.isEqual(d))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const o=new Md;return o.comparator=this.comparator,o.keyedMap=e,o.sortedSet=t,o}}class A_{constructor(){this.Tu=new en(Dt.comparator)}track(e){const t=e.doc.key,o=this.Tu.get(t);o?0!==e.type&&3===o.type?this.Tu=this.Tu.insert(t,e):3===e.type&&1!==o.type?this.Tu=this.Tu.insert(t,{type:o.type,doc:e.doc}):2===e.type&&2===o.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===o.type?this.Tu=this.Tu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===o.type?this.Tu=this.Tu.remove(t):1===e.type&&2===o.type?this.Tu=this.Tu.insert(t,{type:1,doc:o.doc}):0===e.type&&1===o.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):Gt():this.Tu=this.Tu.insert(t,e)}Eu(){const e=[];return this.Tu.inorderTraversal((t,o)=>{e.push(o)}),e}}class Rd{constructor(e,t,o,u,d,g,C,V){this.query=e,this.docs=t,this.oldDocs=o,this.docChanges=u,this.mutatedKeys=d,this.fromCache=g,this.syncStateChanged=C,this.excludesMetadataChanges=V}static fromInitialDocuments(e,t,o,u){const d=[];return t.forEach(g=>{d.push({type:0,doc:g})}),new Rd(e,t,Md.emptySet(t),d,o,u,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&bl(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,o=e.docChanges;if(t.length!==o.length)return!1;for(let u=0;u<t.length;u++)if(t[u].type!==o[u].type||!t[u].doc.isEqual(o[u].doc))return!1;return!0}}class l0{constructor(){this.Au=void 0,this.listeners=[]}}class c0{constructor(){this.queries=new pu(e=>fc(e),bl),this.onlineState="Unknown",this.Ru=new Set}}function _m(i,e){return Eu.apply(this,arguments)}function Eu(){return Eu=(0,he.Z)(function*(i,e){const t=Lt(i),o=e.query;let u=!1,d=t.queries.get(o);if(d||(u=!0,d=new l0),u)try{d.Au=yield t.onListen(o)}catch(g){const C=xd(g,`Initialization of query '${Yc(e.query)}' failed`);return void e.onError(C)}t.queries.set(o,d),d.listeners.push(e),e.bu(t.onlineState),d.Au&&e.Pu(d.Au)&&zh(t)}),Eu.apply(this,arguments)}function Od(i,e){return Lp.apply(this,arguments)}function Lp(){return Lp=(0,he.Z)(function*(i,e){const t=Lt(i),o=e.query;let u=!1;const d=t.queries.get(o);if(d){const g=d.listeners.indexOf(e);g>=0&&(d.listeners.splice(g,1),u=0===d.listeners.length)}if(u)return t.queries.delete(o),t.onUnlisten(o)}),Lp.apply(this,arguments)}function vm(i,e){const t=Lt(i);let o=!1;for(const u of e){const g=t.queries.get(u.query);if(g){for(const C of g.listeners)C.Pu(u)&&(o=!0);g.Au=u}}o&&zh(t)}function Vp(i,e,t){const o=Lt(i),u=o.queries.get(e);if(u)for(const d of u.listeners)d.onError(t);o.queries.delete(e)}function zh(i){i.Ru.forEach(e=>{e.next()})}class Nd{constructor(e,t,o){this.query=e,this.vu=t,this.Vu=!1,this.Su=null,this.onlineState="Unknown",this.options=o||{}}Pu(e){if(!this.options.includeMetadataChanges){const o=[];for(const u of e.docChanges)3!==u.type&&o.push(u);e=new Rd(e.query,e.docs,e.oldDocs,o,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.Vu?this.Du(e)&&(this.vu.next(e),t=!0):this.Cu(e,this.onlineState)&&(this.xu(e),t=!0),this.Su=e,t}onError(e){this.vu.error(e)}bu(e){this.onlineState=e;let t=!1;return this.Su&&!this.Vu&&this.Cu(this.Su,e)&&(this.xu(this.Su),t=!0),t}Cu(e,t){return!e.fromCache||!(this.options.Nu&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}Du(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Su&&this.Su.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}xu(e){e=Rd.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.Vu=!0,this.vu.next(e)}}class x_{constructor(e,t){this.payload=e,this.byteLength=t}ku(){return"metadata"in this.payload}}class Hu{constructor(e){this.It=e}Ji(e){return E(this.It,e)}Yi(e){return e.metadata.exists?sn(this.It,e.document,!1):bi.newNoDocument(this.Ji(e.metadata.name),this.Xi(e.metadata.readTime))}Xi(e){return zs(e)}}class wm{constructor(e,t,o){this.Mu=e,this.localStore=t,this.It=o,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=Em(e)}Ou(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;const o=Yt.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(o.get(o.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Fu(e){const t=new Map,o=new Hu(this.It);for(const u of e)if(u.metadata.queries){const d=o.Ji(u.metadata.name);for(const g of u.metadata.queries){const C=(t.get(g)||Zn()).add(d);t.set(g,C)}}return t}complete(){var e=this;return(0,he.Z)(function*(){const t=yield function u0(i,e,t,o){return Nh.apply(this,arguments)}(e.localStore,new Hu(e.It),e.documents,e.Mu.id),o=e.Fu(e.documents);for(const u of e.queries)yield sm(e.localStore,u,o.get(u.name));return e.progress.taskState="Success",{progress:e.progress,$u:e.collectionGroups,Bu:t}})()}}function Em(i){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:i.totalDocuments,totalBytes:i.totalBytes}}class Im{constructor(e){this.key=e}}class Up{constructor(e){this.key=e}}class Dm{constructor(e,t){this.query=e,this.Lu=t,this.Uu=null,this.current=!1,this.qu=Zn(),this.mutatedKeys=Zn(),this.Ku=La(e),this.Gu=new Md(this.Ku)}get Qu(){return this.Lu}ju(e,t){const o=t?t.Wu:new A_,u=t?t.Gu:this.Gu;let d=t?t.mutatedKeys:this.mutatedKeys,g=u,C=!1;const V="F"===this.query.limitType&&u.size===this.query.limit?u.last():null,H="L"===this.query.limitType&&u.size===this.query.limit?u.first():null;if(e.inorderTraversal((J,me)=>{const Ue=u.get(J),st=du(this.query,me)?me:null,ht=!!Ue&&this.mutatedKeys.has(Ue.key),Wt=!!st&&(st.hasLocalMutations||this.mutatedKeys.has(st.key)&&st.hasCommittedMutations);let cn=!1;Ue&&st?Ue.data.isEqual(st.data)?ht!==Wt&&(o.track({type:3,doc:st}),cn=!0):this.zu(Ue,st)||(o.track({type:2,doc:st}),cn=!0,(V&&this.Ku(st,V)>0||H&&this.Ku(st,H)<0)&&(C=!0)):!Ue&&st?(o.track({type:0,doc:st}),cn=!0):Ue&&!st&&(o.track({type:1,doc:Ue}),cn=!0,(V||H)&&(C=!0)),cn&&(st?(g=g.add(st),d=Wt?d.add(J):d.delete(J)):(g=g.delete(J),d=d.delete(J)))}),null!==this.query.limit)for(;g.size>this.query.limit;){const J="F"===this.query.limitType?g.last():g.first();g=g.delete(J.key),d=d.delete(J.key),o.track({type:1,doc:J})}return{Gu:g,Wu:o,$i:C,mutatedKeys:d}}zu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,o){const u=this.Gu;this.Gu=e.Gu,this.mutatedKeys=e.mutatedKeys;const d=e.Wu.Eu();d.sort((H,J)=>function(me,Ue){const st=ht=>{switch(ht){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Gt()}};return st(me)-st(Ue)}(H.type,J.type)||this.Ku(H.doc,J.doc)),this.Hu(o);const g=t?this.Ju():[],C=0===this.qu.size&&this.current?1:0,V=C!==this.Uu;return this.Uu=C,0!==d.length||V?{snapshot:new Rd(this.query,e.Gu,u,d,e.mutatedKeys,0===C,V,!1),Yu:g}:{Yu:g}}bu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Gu:this.Gu,Wu:new A_,mutatedKeys:this.mutatedKeys,$i:!1},!1)):{Yu:[]}}Xu(e){return!this.Lu.has(e)&&!!this.Gu.has(e)&&!this.Gu.get(e).hasLocalMutations}Hu(e){e&&(e.addedDocuments.forEach(t=>this.Lu=this.Lu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Lu=this.Lu.delete(t)),this.current=e.current)}Ju(){if(!this.current)return[];const e=this.qu;this.qu=Zn(),this.Gu.forEach(o=>{this.Xu(o.key)&&(this.qu=this.qu.add(o.key))});const t=[];return e.forEach(o=>{this.qu.has(o)||t.push(new Up(o))}),this.qu.forEach(o=>{e.has(o)||t.push(new Im(o))}),t}Zu(e){this.Lu=e.Hi,this.qu=Zn();const t=this.ju(e.documents);return this.applyChanges(t,!0)}tc(){return Rd.fromInitialDocuments(this.query,this.Gu,this.mutatedKeys,0===this.Uu)}}class M_{constructor(e,t,o){this.query=e,this.targetId=t,this.view=o}}class Wh{constructor(e){this.key=e,this.ec=!1}}class Oc{constructor(e,t,o,u,d,g){this.localStore=e,this.remoteStore=t,this.eventManager=o,this.sharedClientState=u,this.currentUser=d,this.maxConcurrentLimboResolutions=g,this.nc={},this.sc=new pu(C=>fc(C),bl),this.ic=new Map,this.rc=new Set,this.oc=new en(Dt.comparator),this.uc=new Map,this.cc=new xh,this.ac={},this.hc=new Map,this.lc=Gl.vn(),this.onlineState="Unknown",this.fc=void 0}get isPrimaryClient(){return!0===this.fc}}function Bp(i,e){return ll.apply(this,arguments)}function ll(){return ll=(0,he.Z)(function*(i,e){const t=Kp(i);let o,u;const d=t.sc.get(e);if(d)o=d.targetId,t.sharedClientState.addLocalQueryTarget(o),u=d.view.tc();else{const g=yield Sc(t.localStore,bs(e));t.isPrimaryClient&&Uh(t.remoteStore,g);const C=t.sharedClientState.addLocalQueryTarget(g.targetId);o=g.targetId,u=yield Nc(t,e,o,"current"===C)}return u}),ll.apply(this,arguments)}function Nc(i,e,t,o){return Zl.apply(this,arguments)}function Zl(){return Zl=(0,he.Z)(function*(i,e,t,o){i.dc=(J,me,Ue)=>{return(st=(0,he.Z)(function*(ht,Wt,cn,Hr){let ti=Wt.view.ju(cn);ti.$i&&(ti=yield Oh(ht.localStore,Wt.query,!1).then(({documents:ni})=>Wt.view.ju(ni,ti)));const Vr=Hr&&Hr.targetChanges.get(Wt.targetId),As=Wt.view.applyChanges(ti,ht.isPrimaryClient,Vr);return $p(ht,Wt.targetId,As.Yu),As.snapshot}),function(ht,Wt,cn,Hr){return st.apply(this,arguments)})(i,J,me,Ue);var st};const u=yield Oh(i.localStore,e,!0),d=new Dm(e,u.Hi),g=d.ju(u.documents),C=eu.createSynthesizedTargetChangeForCurrentChange(t,o&&"Offline"!==i.onlineState),V=d.applyChanges(g,i.isPrimaryClient,C);$p(i,t,V.Yu);const H=new M_(e,t,d);return i.sc.set(e,H),i.ic.has(t)?i.ic.get(t).push(e):i.ic.set(t,[e]),V.snapshot}),Zl.apply(this,arguments)}function R_(i,e){return qh.apply(this,arguments)}function qh(){return qh=(0,he.Z)(function*(i,e){const t=Lt(i),o=t.sc.get(e),u=t.ic.get(o.targetId);if(u.length>1)return t.ic.set(o.targetId,u.filter(d=>!bl(d,e))),void t.sc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(o.targetId),t.sharedClientState.isActiveQueryTarget(o.targetId)||(yield Ac(t.localStore,o.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(o.targetId),Bh(t.remoteStore,o.targetId),Pc(t,o.targetId)}).catch(ko))):(Pc(t,o.targetId),yield Ac(t.localStore,o.targetId,!0))}),qh.apply(this,arguments)}function Pd(){return Pd=(0,he.Z)(function*(i,e,t){const o=Yp(i);try{const u=yield function(d,g){const C=Lt(d),V=Nt.now(),H=g.reduce((Ue,st)=>Ue.add(st.key),Zn());let J,me;return C.persistence.runTransaction("Locally write mutations","readwrite",Ue=>{let st=Gs(),ht=Zn();return C.Gi.getEntries(Ue,H).next(Wt=>{st=Wt,st.forEach((cn,Hr)=>{Hr.isValidDocument()||(ht=ht.add(cn))})}).next(()=>C.localDocuments.getOverlayedDocuments(Ue,st)).next(Wt=>{J=Wt;const cn=[];for(const Hr of g){const ti=rd(Hr,J.get(Hr.key).overlayedDocument);null!=ti&&cn.push(new Wa(Hr.key,ti,Jd(ti.value.mapValue),zi.exists(!0)))}return C.mutationQueue.addMutationBatch(Ue,V,cn,g)}).next(Wt=>{me=Wt;const cn=Wt.applyToLocalDocumentSet(J,ht);return C.documentOverlayCache.saveOverlays(Ue,Wt.batchId,cn)})}).then(()=>({batchId:me.batchId,changes:_c(J)}))}(o.localStore,e);o.sharedClientState.addPendingMutation(u.batchId),function(d,g,C){let V=d.ac[d.currentUser.toKey()];V||(V=new en(ke)),V=V.insert(g,C),d.ac[d.currentUser.toKey()]=V}(o,u.batchId,t),yield Gu(o,u.changes),yield $u(o.remoteStore)}catch(u){const d=xd(u,"Failed to persist write");t.reject(d)}}),Pd.apply(this,arguments)}function Zh(i,e){return Kh.apply(this,arguments)}function Kh(){return Kh=(0,he.Z)(function*(i,e){const t=Lt(i);try{const o=yield tm(t.localStore,e);e.targetChanges.forEach((u,d)=>{const g=t.uc.get(d);g&&(ln(u.addedDocuments.size+u.modifiedDocuments.size+u.removedDocuments.size<=1),u.addedDocuments.size>0?g.ec=!0:u.modifiedDocuments.size>0?ln(g.ec):u.removedDocuments.size>0&&(ln(g.ec),g.ec=!1))}),yield Gu(t,o,e)}catch(o){yield ko(o)}}),Kh.apply(this,arguments)}function Yh(i,e,t){const o=Lt(i);if(o.isPrimaryClient&&0===t||!o.isPrimaryClient&&1===t){const u=[];o.sc.forEach((d,g)=>{const C=g.view.bu(e);C.snapshot&&u.push(C.snapshot)}),function(d,g){const C=Lt(d);C.onlineState=g;let V=!1;C.queries.forEach((H,J)=>{for(const me of J.listeners)me.bu(g)&&(V=!0)}),V&&zh(C)}(o.eventManager,e),u.length&&o.nc.Wo(u),o.onlineState=e,o.isPrimaryClient&&o.sharedClientState.setOnlineState(e)}}function O_(i,e,t){return bm.apply(this,arguments)}function bm(){return bm=(0,he.Z)(function*(i,e,t){const o=Lt(i);o.sharedClientState.updateQueryState(e,"rejected",t);const u=o.uc.get(e),d=u&&u.key;if(d){let g=new en(Dt.comparator);g=g.insert(d,bi.newNoDocument(d,Tt.min()));const C=Zn().add(d),V=new Vu(Tt.min(),new Map,new Bn(ke),g,C);yield Zh(o,V),o.oc=o.oc.remove(d),o.uc.delete(e),ef(o)}else yield Ac(o.localStore,e,!1).then(()=>Pc(o,e,t)).catch(ko)}),bm.apply(this,arguments)}function N_(i,e){return Qh.apply(this,arguments)}function Qh(){return Qh=(0,he.Z)(function*(i,e){const t=Lt(i),o=e.batch.batchId;try{const u=yield g_(t.localStore,e);Xh(t,o,null),la(t,o),t.sharedClientState.updateMutationState(o,"acknowledged"),yield Gu(t,u)}catch(u){yield ko(u)}}),Qh.apply(this,arguments)}function P_(i,e,t){return Jh.apply(this,arguments)}function Jh(){return Jh=(0,he.Z)(function*(i,e,t){const o=Lt(i);try{const u=yield function(d,g){const C=Lt(d);return C.persistence.runTransaction("Reject batch","readwrite-primary",V=>{let H;return C.mutationQueue.lookupMutationBatch(V,g).next(J=>(ln(null!==J),H=J.keys(),C.mutationQueue.removeMutationBatch(V,J))).next(()=>C.mutationQueue.performConsistencyCheck(V)).next(()=>C.documentOverlayCache.removeOverlaysForBatchId(V,H,g)).next(()=>C.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(V,H)).next(()=>C.localDocuments.getDocuments(V,H))})}(o.localStore,e);Xh(o,e,t),la(o,e),o.sharedClientState.updateMutationState(e,"rejected",t),yield Gu(o,u)}catch(u){yield ko(u)}}),Jh.apply(this,arguments)}function jp(){return jp=(0,he.Z)(function*(i,e){const t=Lt(i);So(t.remoteStore)||It("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const o=yield function(d){const g=Lt(d);return g.persistence.runTransaction("Get highest unacknowledged batch id","readonly",C=>g.mutationQueue.getHighestUnacknowledgedBatchId(C))}(t.localStore);if(-1===o)return void e.resolve();const u=t.hc.get(o)||[];u.push(e),t.hc.set(o,u)}catch(o){const u=xd(o,"Initialization of waitForPendingWrites() operation failed");e.reject(u)}}),jp.apply(this,arguments)}function la(i,e){(i.hc.get(e)||[]).forEach(t=>{t.resolve()}),i.hc.delete(e)}function Xh(i,e,t){const o=Lt(i);let u=o.ac[o.currentUser.toKey()];if(u){const d=u.get(e);d&&(t?d.reject(t):d.resolve(),u=u.remove(e)),o.ac[o.currentUser.toKey()]=u}}function Pc(i,e,t=null){i.sharedClientState.removeLocalQueryTarget(e);for(const o of i.ic.get(e))i.sc.delete(o),t&&i.nc._c(o,t);i.ic.delete(e),i.isPrimaryClient&&i.cc.ls(e).forEach(o=>{i.cc.containsKey(o)||k_(i,o)})}function k_(i,e){i.rc.delete(e.path.canonicalString());const t=i.oc.get(e);null!==t&&(Bh(i.remoteStore,t),i.oc=i.oc.remove(e),i.uc.delete(t),ef(i))}function $p(i,e,t){for(const o of t)o instanceof Im?(i.cc.addReference(o.key,e),Hp(i,o)):o instanceof Up?(It("SyncEngine","Document no longer in limbo: "+o.key),i.cc.removeReference(o.key,e),i.cc.containsKey(o.key)||k_(i,o.key)):Gt()}function Hp(i,e){const t=e.key,o=t.path.canonicalString();i.oc.get(t)||i.rc.has(o)||(It("SyncEngine","New document in limbo: "+t),i.rc.add(o),ef(i))}function ef(i){for(;i.rc.size>0&&i.oc.size<i.maxConcurrentLimboResolutions;){const e=i.rc.values().next().value;i.rc.delete(e);const t=new Dt(Yt.fromString(e)),o=i.lc.next();i.uc.set(o,new Wh(t)),i.oc=i.oc.insert(t,o),Uh(i.remoteStore,new sl(bs(Ou(t.path)),o,2,te.at))}}function Gu(i,e,t){return Gp.apply(this,arguments)}function Gp(){return Gp=(0,he.Z)(function*(i,e,t){const o=Lt(i),u=[],d=[],g=[];var C;o.sc.isEmpty()||(o.sc.forEach((C,V)=>{g.push(o.dc(V,e,t).then(H=>{if(H){o.isPrimaryClient&&o.sharedClientState.updateQueryState(V.targetId,H.fromCache?"not-current":"current"),u.push(H);const J=wp.Ci(V.targetId,H);d.push(J)}}))}),yield Promise.all(g),o.nc.Wo(u),yield(C=(0,he.Z)(function*(V,H){const J=Lt(V);try{yield J.persistence.runTransaction("notifyLocalViewChanges","readwrite",me=>je.forEach(H,Ue=>je.forEach(Ue.Si,st=>J.persistence.referenceDelegate.addReference(me,Ue.targetId,st)).next(()=>je.forEach(Ue.Di,st=>J.persistence.referenceDelegate.removeReference(me,Ue.targetId,st)))))}catch(me){if(!Fo(me))throw me;It("LocalStore","Failed to update sequence numbers: "+me)}for(const me of H){const Ue=me.targetId;if(!me.fromCache){const st=J.Ui.get(Ue),Wt=st.withLastLimboFreeSnapshotVersion(st.snapshotVersion);J.Ui=J.Ui.insert(Ue,Wt)}}}),function(V,H){return C.apply(this,arguments)})(o.localStore,d))}),Gp.apply(this,arguments)}function F_(i,e){return tf.apply(this,arguments)}function tf(){return tf=(0,he.Z)(function*(i,e){const t=Lt(i);if(!t.currentUser.isEqual(e)){It("SyncEngine","User change. New user:",e.toKey());const o=yield em(t.localStore,e);t.currentUser=e,(u=t).hc.forEach(g=>{g.forEach(C=>{C.reject(new ft(We.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),u.hc.clear(),t.sharedClientState.handleUserChange(e,o.removedBatchIds,o.addedBatchIds),yield Gu(t,o.ji)}var u}),tf.apply(this,arguments)}function L_(i,e){const t=Lt(i),o=t.uc.get(e);if(o&&o.ec)return Zn().add(o.key);{let u=Zn();const d=t.ic.get(e);if(!d)return u;for(const g of d){const C=t.sc.get(g);u=u.unionWith(C.view.Qu)}return u}}function Sm(i,e){return zp.apply(this,arguments)}function zp(){return zp=(0,he.Z)(function*(i,e){const t=Lt(i),o=yield Oh(t.localStore,e.query,!0),u=e.view.Zu(o);return t.isPrimaryClient&&$p(t,e.targetId,u.Yu),u}),zp.apply(this,arguments)}function V_(i,e){return nf.apply(this,arguments)}function nf(){return nf=(0,he.Z)(function*(i,e){const t=Lt(i);return rm(t.localStore,e).then(o=>Gu(t,o))}),nf.apply(this,arguments)}function Am(i,e,t,o){return Wp.apply(this,arguments)}function Wp(){return Wp=(0,he.Z)(function*(i,e,t,o){const u=Lt(i),d=yield function(g,C){const V=Lt(g),H=Lt(V.mutationQueue);return V.persistence.runTransaction("Lookup mutation documents","readonly",J=>H.Tn(J,C).next(me=>me?V.localDocuments.getDocuments(J,me):je.resolve(null)))}(u.localStore,e);var C;null!==d?("pending"===t?yield $u(u.remoteStore):"acknowledged"===t||"rejected"===t?(Xh(u,e,o||null),la(u,e),C=e,Lt(Lt(u.localStore).mutationQueue).An(C)):Gt(),yield Gu(u,d)):It("SyncEngine","Cannot apply mutation batch with id: "+e)}),Wp.apply(this,arguments)}function kd(){return kd=(0,he.Z)(function*(i,e){const t=Lt(i);if(Kp(t),Yp(t),!0===e&&!0!==t.fc){const o=t.sharedClientState.getAllActiveQueryTargets(),u=yield xm(t,o.toArray());t.fc=!0,yield Fp(t.remoteStore,!0);for(const d of u)Uh(t.remoteStore,d)}else if(!1===e&&!1!==t.fc){const o=[];let u=Promise.resolve();t.ic.forEach((d,g)=>{t.sharedClientState.isLocalQueryTarget(g)?o.push(g):u=u.then(()=>(Pc(t,g),Ac(t.localStore,g,!0))),Bh(t.remoteStore,g)}),yield u,yield xm(t,o),function(d){const g=Lt(d);g.uc.forEach((C,V)=>{Bh(g.remoteStore,V)}),g.cc.fs(),g.uc=new Map,g.oc=new en(Dt.comparator)}(t),t.fc=!1,yield Fp(t.remoteStore,!1)}}),kd.apply(this,arguments)}function xm(i,e,t){return qp.apply(this,arguments)}function qp(){return qp=(0,he.Z)(function*(i,e,t){const o=Lt(i),u=[],d=[];for(const g of e){let C;const V=o.ic.get(g);if(V&&0!==V.length){C=yield Sc(o.localStore,bs(V[0]));for(const H of V){const J=o.sc.get(H),me=yield Sm(o,J);me.snapshot&&d.push(me.snapshot)}}else{const H=yield Cp(o.localStore,g);C=yield Sc(o.localStore,H),yield Nc(o,U_(H),g,!1)}u.push(C)}return o.nc.Wo(d),u}),qp.apply(this,arguments)}function U_(i){return Qu(i.path,i.collectionGroup,i.orderBy,i.filters,i.limit,"F",i.startAt,i.endAt)}function Mm(i){const e=Lt(i);return Lt(Lt(e.localStore).persistence).vi()}function B_(i,e,t,o){return Zp.apply(this,arguments)}function Zp(){return Zp=(0,he.Z)(function*(i,e,t,o){const u=Lt(i);if(u.fc)return void It("SyncEngine","Ignoring unexpected query state notification.");const d=u.ic.get(e);if(d&&d.length>0)switch(t){case"current":case"not-current":{const g=yield rm(u.localStore,Qc(d[0])),C=Vu.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield Gu(u,g,C);break}case"rejected":yield Ac(u.localStore,e,!0),Pc(u,e,o);break;default:Gt()}}),Zp.apply(this,arguments)}function j_(i,e,t){return Fd.apply(this,arguments)}function Fd(){return Fd=(0,he.Z)(function*(i,e,t){const o=Kp(i);if(o.fc){for(const u of e){if(o.ic.has(u)){It("SyncEngine","Adding an already active target "+u);continue}const d=yield Cp(o.localStore,u),g=yield Sc(o.localStore,d);yield Nc(o,U_(d),g.targetId,!1),Uh(o.remoteStore,g)}for(const u of t)o.ic.has(u)&&(yield Ac(o.localStore,u,!1).then(()=>{Bh(o.remoteStore,u),Pc(o,u)}).catch(ko))}}),Fd.apply(this,arguments)}function Kp(i){const e=Lt(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=Zh.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=L_.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=O_.bind(null,e),e.nc.Wo=vm.bind(null,e.eventManager),e.nc._c=Vp.bind(null,e.eventManager),e}function Yp(i){const e=Lt(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=N_.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=P_.bind(null,e),e}class sf{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,he.Z)(function*(){t.It=wd(e.databaseInfo.databaseId),t.sharedClientState=t.mc(e),t.persistence=t.gc(e),yield t.persistence.start(),t.localStore=t.yc(e),t.gcScheduler=t.Ic(e,t.localStore),t.indexBackfillerScheduler=t.Tc(e,t.localStore)})()}Ic(e,t){return null}Tc(e,t){return null}yc(e){return Ep(this.persistence,new Xg,e.initialUser,this.It)}gc(e){return new f_(Mh.Bs,this.It)}mc(e){return new m_}terminate(){var e=this;return(0,he.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class Rm extends sf{constructor(e,t,o){super(),this.Ec=e,this.cacheSizeBytes=t,this.forceOwnership=o,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,o=this;return(0,he.Z)(function*(){yield t().call(o,e),yield o.Ec.initialize(o,e),yield Yp(o.Ec.syncEngine),yield $u(o.Ec.remoteStore),yield o.persistence.li(()=>(o.gcScheduler&&!o.gcScheduler.started&&o.gcScheduler.start(),o.indexBackfillerScheduler&&!o.indexBackfillerScheduler.started&&o.indexBackfillerScheduler.start(),Promise.resolve()))})()}yc(e){return Ep(this.persistence,new Xg,e.initialUser,this.It)}Ic(e,t){return new c_(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}Tc(e,t){const o=new z(t,this.persistence);return new k(e.asyncQueue,o)}gc(e){const t=vp(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),o=void 0!==this.cacheSizeBytes?Da.withCacheSize(this.cacheSizeBytes):Da.DEFAULT;return new Va(this.synchronizeTabs,t,e.clientId,o,e.asyncQueue,lm(),vd(),this.It,this.sharedClientState,!!this.forceOwnership)}mc(e){return new m_}}class Qp extends Rm{constructor(e,t){super(e,t,!1),this.Ec=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,o=this;return(0,he.Z)(function*(){yield t().call(o,e);const u=o.Ec.syncEngine;o.sharedClientState instanceof Lh&&(o.sharedClientState.syncEngine={Fr:Am.bind(null,u),$r:B_.bind(null,u),Br:j_.bind(null,u),vi:Mm.bind(null,u),Or:V_.bind(null,u)},yield o.sharedClientState.start()),yield o.persistence.li(function(){var d=(0,he.Z)(function*(g){yield function Iu(i,e){return kd.apply(this,arguments)}(o.Ec.syncEngine,g),o.gcScheduler&&(g&&!o.gcScheduler.started?o.gcScheduler.start():g||o.gcScheduler.stop()),o.indexBackfillerScheduler&&(g&&!o.indexBackfillerScheduler.started?o.indexBackfillerScheduler.start():g||o.indexBackfillerScheduler.stop())});return function(g){return d.apply(this,arguments)}}())})()}mc(e){const t=lm();if(!Lh.C(t))throw new ft(We.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const o=vp(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Lh(t,e.asyncQueue,o,e.clientId,e.initialUser)}}class af{initialize(e,t){var o=this;return(0,he.Z)(function*(){o.localStore||(o.localStore=e.localStore,o.sharedClientState=e.sharedClientState,o.datastore=o.createDatastore(t),o.remoteStore=o.createRemoteStore(t),o.eventManager=o.createEventManager(t),o.syncEngine=o.createSyncEngine(t,!e.synchronizeTabs),o.sharedClientState.onlineStateHandler=u=>Yh(o.syncEngine,u,1),o.remoteStore.remoteSyncer.handleCredentialChange=F_.bind(null,o.syncEngine),yield Fp(o.remoteStore,o.syncEngine.isPrimaryClient))})()}createEventManager(e){return new c0}createDatastore(e){const t=wd(e.databaseInfo.databaseId),o=new Vh(e.databaseInfo);return new dm(e.authCredentials,e.appCheckCredentials,o,t)}createRemoteStore(e){return t=this.localStore,o=this.datastore,u=e.asyncQueue,d=C=>Yh(this.syncEngine,C,0),g=Wl.C()?new Wl:new y_,new hm(t,o,u,d,g);var t,o,u,d,g}createSyncEngine(e,t){return function(o,u,d,g,C,V,H){const J=new Oc(o,u,d,g,C,V);return H&&(J.fc=!0),J}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,he.Z)(function*(t){const o=Lt(t);It("RemoteStore","RemoteStore shutting down."),o._u.add(5),yield Id(o),o.mu.shutdown(),o.gu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function $_(i,e=10240){let t=0;return{read:()=>(0,he.Z)(function*(){if(t<i.byteLength){const o={value:i.slice(t,t+e),done:!1};return t+=e,o}return{done:!0}})(),cancel:()=>(0,he.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class Jp{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ac(this.observer.next,e)}error(e){this.observer.error?this.Ac(this.observer.error,e):Cr("Uncaught Error in snapshot listener:",e)}Rc(){this.muted=!0}Ac(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class Xp{constructor(e,t){this.bc=e,this.It=t,this.metadata=new Mi,this.buffer=new Uint8Array,this.Pc=new TextDecoder("utf-8"),this.vc().then(o=>{o&&o.ku()?this.metadata.resolve(o.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(o?.payload)}`))},o=>this.metadata.reject(o))}close(){return this.bc.cancel()}getMetadata(){var e=this;return(0,he.Z)(function*(){return e.metadata.promise})()}wc(){var e=this;return(0,he.Z)(function*(){return yield e.getMetadata(),e.vc()})()}vc(){var e=this;return(0,he.Z)(function*(){const t=yield e.Vc();if(null===t)return null;const o=e.Pc.decode(t),u=Number(o);isNaN(u)&&e.Sc(`length string (${o}) is not valid number`);const d=yield e.Dc(u);return new x_(JSON.parse(d),t.length+u)})()}Cc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Vc(){var e=this;return(0,he.Z)(function*(){for(;e.Cc()<0&&!(yield e.xc()););if(0===e.buffer.length)return null;const t=e.Cc();t<0&&e.Sc("Reached the end of bundle when a length string is expected.");const o=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),o})()}Dc(e){var t=this;return(0,he.Z)(function*(){for(;t.buffer.length<e;)(yield t.xc())&&t.Sc("Reached the end of bundle when more is expected.");const o=t.Pc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),o})()}Sc(e){throw this.bc.cancel(),new Error(`Invalid bundle format: ${e}`)}xc(){var e=this;return(0,he.Z)(function*(){const t=yield e.bc.read();if(!t.done){const o=new Uint8Array(e.buffer.length+t.value.length);o.set(e.buffer),o.set(t.value,e.buffer.length),e.buffer=o}return t.done})()}}class d0{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,he.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new ft(We.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const o=yield(u=(0,he.Z)(function*(d,g){const C=Lt(d),V=be(C.It)+"/documents",H={documents:g.map(st=>f(C.It,st))},J=yield C.fo("BatchGetDocuments",V,H,g.length),me=new Map;J.forEach(st=>{const ht=function Mn(i,e){return"found"in e?function(t,o){ln(!!o.found);const u=E(t,o.found.name),d=zs(o.found.updateTime),g=new Cs({mapValue:{fields:o.found.fields}});return bi.newFoundDocument(u,d,g)}(i,e):"missing"in e?function(t,o){ln(!!o.missing),ln(!!o.readTime);const u=E(t,o.missing),d=zs(o.readTime);return bi.newNoDocument(u,d)}(i,e):Gt()}(C.It,st);me.set(ht.key.toString(),ht)});const Ue=[];return g.forEach(st=>{const ht=me.get(st.toString());ln(!!ht),Ue.push(ht)}),Ue}),function(d,g){return u.apply(this,arguments)})(t.datastore,e);var u;return o.forEach(u=>t.recordVersion(u)),o})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(o){this.lastWriteError=o}this.writtenDocs.add(e.toString())}delete(e){this.write(new Rl(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,he.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var o;e.mutations.forEach(o=>{t.delete(o.key.toString())}),t.forEach((o,u)=>{const d=Dt.fromPath(u);e.mutations.push(new id(d,e.precondition(d)))}),yield(o=(0,he.Z)(function*(u,d){const g=Lt(u),C=be(g.It)+"/documents",V={writes:d.map(H=>es(g.It,H))};yield g.co("Commit",C,V)}),function(u,d){return o.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Gt();t=Tt.min()}const o=this.readVersions.get(e.key.toString());if(o){if(!t.isEqual(o))throw new ft(We.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Tt.min())?zi.exists(!1):zi.updateTime(t):zi.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Tt.min()))throw new ft(We.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return zi.updateTime(t)}return zi.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class Om{constructor(e,t,o,u,d){this.asyncQueue=e,this.datastore=t,this.options=o,this.updateFunction=u,this.deferred=d,this.Nc=o.maxAttempts,this.xo=new Sp(this.asyncQueue,"transaction_retry")}run(){this.Nc-=1,this.kc()}kc(){var e=this;this.xo.Ao((0,he.Z)(function*(){const t=new d0(e.datastore),o=e.Mc(t);o&&o.then(u=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(u)}).catch(d=>{e.Oc(d)}))}).catch(u=>{e.Oc(u)})}))}Mc(e){try{const t=this.updateFunction(e);return!Ne(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Oc(e){this.Nc>0&&this.Fc(e)?(this.Nc-=1,this.asyncQueue.enqueueAndForget(()=>(this.kc(),Promise.resolve()))):this.deferred.reject(e)}Fc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!sd(t)}return!1}}class Nm{constructor(e,t,o,u){var d=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=o,this.databaseInfo=u,this.user=Ci.UNAUTHENTICATED,this.clientId=Ce.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(o,function(){var g=(0,he.Z)(function*(C){It("FirestoreClient","Received user=",C.uid),yield d.authCredentialListener(C),d.user=C});return function(C){return g.apply(this,arguments)}}()),this.appCheckCredentials.start(o,g=>(It("FirestoreClient","Received new app check token=",g),this.appCheckCredentialListener(g,this.user)))}getConfiguration(){var e=this;return(0,he.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new ft(We.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Mi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,he.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(o){const u=xd(o,"Failed to shutdown persistence");t.reject(u)}})),t.promise}}function eg(i,e){return uf.apply(this,arguments)}function uf(){return uf=(0,he.Z)(function*(i,e){i.asyncQueue.verifyOperationInProgress(),It("FirestoreClient","Initializing OfflineComponentProvider");const t=yield i.getConfiguration();yield e.initialize(t);let o=t.initialUser;i.setCredentialChangeListener(function(){var u=(0,he.Z)(function*(d){o.isEqual(d)||(yield em(e.localStore,d),o=d)});return function(d){return u.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>i.terminate()),i.offlineComponents=e}),uf.apply(this,arguments)}function lf(i,e){return iu.apply(this,arguments)}function iu(){return iu=(0,he.Z)(function*(i,e){i.asyncQueue.verifyOperationInProgress();const t=yield kc(i);It("FirestoreClient","Initializing OnlineComponentProvider");const o=yield i.getConfiguration();yield e.initialize(t,o),i.setCredentialChangeListener(u=>kp(e.remoteStore,u)),i.setAppCheckTokenChangeListener((u,d)=>kp(e.remoteStore,d)),i.onlineComponents=e}),iu.apply(this,arguments)}function kc(i){return Fc.apply(this,arguments)}function Fc(){return Fc=(0,he.Z)(function*(i){return i.offlineComponents||(It("FirestoreClient","Using default OfflineComponentProvider"),yield eg(i,new sf)),i.offlineComponents}),Fc.apply(this,arguments)}function cl(i){return tg.apply(this,arguments)}function tg(){return tg=(0,he.Z)(function*(i){return i.onlineComponents||(It("FirestoreClient","Using default OnlineComponentProvider"),yield lf(i,new af)),i.onlineComponents}),tg.apply(this,arguments)}function cf(i){return kc(i).then(e=>e.persistence)}function Ld(i){return kc(i).then(e=>e.localStore)}function Pm(i){return cl(i).then(e=>e.remoteStore)}function ng(i){return cl(i).then(e=>e.syncEngine)}function Du(i){return rg.apply(this,arguments)}function rg(){return rg=(0,he.Z)(function*(i){const e=yield cl(i),t=e.eventManager;return t.onListen=Bp.bind(null,e.syncEngine),t.onUnlisten=R_.bind(null,e.syncEngine),t}),rg.apply(this,arguments)}function km(i,e,t={}){const o=new Mi;return i.asyncQueue.enqueueAndForget((0,he.Z)(function*(){return function(u,d,g,C,V){const H=new Jp({next:me=>{d.enqueueAndForget(()=>Od(u,J));const Ue=me.docs.has(g);!Ue&&me.fromCache?V.reject(new ft(We.UNAVAILABLE,"Failed to get document because the client is offline.")):Ue&&me.fromCache&&C&&"server"===C.source?V.reject(new ft(We.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):V.resolve(me)},error:me=>V.reject(me)}),J=new Nd(Ou(g.path),H,{includeMetadataChanges:!0,Nu:!0});return _m(u,J)}(yield Du(i),i.asyncQueue,e,t,o)})),o.promise}function Fm(i,e,t={}){const o=new Mi;return i.asyncQueue.enqueueAndForget((0,he.Z)(function*(){return function(u,d,g,C,V){const H=new Jp({next:me=>{d.enqueueAndForget(()=>Od(u,J)),me.fromCache&&"server"===C.source?V.reject(new ft(We.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):V.resolve(me)},error:me=>V.reject(me)}),J=new Nd(g,H,{includeMetadataChanges:!0,Nu:!0});return _m(u,J)}(yield Du(i),i.asyncQueue,e,t,o)})),o.promise}const df=new Map;function sg(i,e,t){if(!t)throw new ft(We.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function Vm(i,e,t,o){if(!0===e&&!0===o)throw new ft(We.INVALID_ARGUMENT,`${i} and ${t} cannot be used together.`)}function Um(i){if(!Dt.isDocumentKey(i))throw new ft(We.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function Bm(i){if(Dt.isDocumentKey(i))throw new ft(We.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function hf(i){if(void 0===i)return"undefined";if(null===i)return"null";if("string"==typeof i)return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if("number"==typeof i||"boolean"==typeof i)return""+i;if("object"==typeof i){if(i instanceof Array)return"an array";{const e=(t=i).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof i?"a function":Gt()}function Lr(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new ft(We.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=hf(i);throw new ft(We.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return i}function Vd(i,e){if(e<=0)throw new ft(We.INVALID_ARGUMENT,`Function ${i}() requires a positive number, but it was: ${e}.`)}class dl{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new ft(We.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new ft(We.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,Vm("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class ff{constructor(e,t,o,u){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=o,this._app=u,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new dl({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new ft(We.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new ft(We.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new dl(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new Ya;switch(t.type){case"gapi":return new b(t.client,t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new ft(We.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=df.get(e);t&&(It("ComponentProvider","Removing Datastore"),df.delete(e),t.terminate())}(this),Promise.resolve()}}class ts{constructor(e,t,o){this.converter=t,this._key=o,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Za(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ts(this.firestore,e,this._key)}}class Xo{constructor(e,t,o){this.converter=t,this._query=o,this.type="query",this.firestore=e}withConverter(e){return new Xo(this.firestore,e,this._query)}}class Za extends Xo{constructor(e,t,o){super(e,t,Ou(o)),this._path=o,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ts(this.firestore,null,new Dt(e))}withConverter(e){return new Za(this.firestore,e,this._path)}}function jm(i,e,...t){if(i=(0,Je.m9)(i),sg("collection","path",e),i instanceof ff){const o=Yt.fromString(e,...t);return Bm(o),new Za(i,null,o)}{if(!(i instanceof ts||i instanceof Za))throw new ft(We.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const o=i._path.child(Yt.fromString(e,...t));return Bm(o),new Za(i.firestore,null,o)}}function hl(i,e,...t){if(i=(0,Je.m9)(i),1===arguments.length&&(e=Ce.R()),sg("doc","path",e),i instanceof ff){const o=Yt.fromString(e,...t);return Um(o),new ts(i,null,new Dt(o))}{if(!(i instanceof ts||i instanceof Za))throw new ft(We.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const o=i._path.child(Yt.fromString(e,...t));return Um(o),new ts(i.firestore,i instanceof Za?i.converter:null,new Dt(o))}}function Vo(i,e){return i=(0,Je.m9)(i),e=(0,Je.m9)(e),(i instanceof ts||i instanceof Za)&&(e instanceof ts||e instanceof Za)&&i.firestore===e.firestore&&i.path===e.path&&i.converter===e.converter}function fl(i,e){return i=(0,Je.m9)(i),e=(0,Je.m9)(e),i instanceof Xo&&e instanceof Xo&&i.firestore===e.firestore&&bl(i._query,e._query)&&i.converter===e.converter}class pf{constructor(){this.$c=Promise.resolve(),this.Bc=[],this.Lc=!1,this.Uc=[],this.qc=null,this.Kc=!1,this.Gc=!1,this.Qc=[],this.xo=new Sp(this,"async_queue_retry"),this.jc=()=>{const t=vd();t&&It("AsyncQueue","Visibility state changed to "+t.visibilityState),this.xo.bo()};const e=vd();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.jc)}get isShuttingDown(){return this.Lc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Wc(),this.zc(e)}enterRestrictedMode(e){if(!this.Lc){this.Lc=!0,this.Gc=e||!1;const t=vd();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.jc)}}enqueue(e){if(this.Wc(),this.Lc)return new Promise(()=>{});const t=new Mi;return this.zc(()=>this.Lc&&this.Gc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Bc.push(e),this.Hc()))}Hc(){var e=this;return(0,he.Z)(function*(){if(0!==e.Bc.length){try{yield e.Bc[0](),e.Bc.shift(),e.xo.reset()}catch(t){if(!Fo(t))throw t;It("AsyncQueue","Operation failed with retryable error: "+t)}e.Bc.length>0&&e.xo.Ao(()=>e.Hc())}})()}zc(e){const t=this.$c.then(()=>(this.Kc=!0,e().catch(o=>{throw this.qc=o,this.Kc=!1,Cr("INTERNAL UNHANDLED ERROR: ",function(d){let g=d.message||"";return d.stack&&(g=d.stack.includes(d.message)?d.stack:d.message+"\n"+d.stack),g}(o)),o}).then(o=>(this.Kc=!1,o))));return this.$c=t,t}enqueueAfterDelay(e,t,o){this.Wc(),this.Qc.indexOf(e)>-1&&(t=0);const u=ym.createAndSchedule(this,e,t,o,d=>this.Jc(d));return this.Uc.push(u),u}Wc(){this.qc&&Gt()}verifyOperationInProgress(){}Yc(){var e=this;return(0,he.Z)(function*(){let t;do{t=e.$c,yield t}while(t!==e.$c)})()}Xc(e){for(const t of this.Uc)if(t.timerId===e)return!0;return!1}Zc(e){return this.Yc().then(()=>{this.Uc.sort((t,o)=>t.targetTimeMs-o.targetTimeMs);for(const t of this.Uc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Yc()})}ta(e){this.Qc.push(e)}Jc(e){const t=this.Uc.indexOf(e);this.Uc.splice(t,1)}}function ba(i){return function(e,t){if("object"!=typeof e||null===e)return!1;const o=e;for(const u of["next","error","complete"])if(u in o&&"function"==typeof o[u])return!0;return!1}(i)}class og{constructor(){this._progressObserver={},this._taskCompletionResolver=new Mi,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,o){this._progressObserver={next:e,error:t,complete:o}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Ti extends ff{constructor(e,t,o,u){super(e,t,o,u),this.type="firestore",this._queue=new pf,this._persistenceKey=u?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||Kl(this),this._firestoreClient.terminate()}}function ns(i){return i._firestoreClient||Kl(i),i._firestoreClient.verifyNotTerminated(),i._firestoreClient}function Kl(i){var e;const t=i._freezeSettings(),o=(d=(null===(e=i._app)||void 0===e?void 0:e.options.appId)||"",new W(i._databaseId,d,i._persistenceKey,(C=t).host,C.ssl,C.experimentalForceLongPolling,C.experimentalAutoDetectLongPolling,C.useFetchStreams));var d,C;i._firestoreClient=new Nm(i._authCredentials,i._appCheckCredentials,i._queue,o)}function Yl(i,e,t){const o=new Mi;return i.asyncQueue.enqueue((0,he.Z)(function*(){try{yield eg(i,t),yield lf(i,e),o.resolve()}catch(u){const d=u;if(!("FirebaseError"===(g=d).name?g.code===We.FAILED_PRECONDITION||g.code===We.UNIMPLEMENTED:!(typeof DOMException<"u"&&g instanceof DOMException)||22===g.code||20===g.code||11===g.code))throw d;fo("Error enabling offline persistence. Falling back to persistence disabled: "+d),o.reject(d)}var g})).then(()=>o.promise)}function ag(i){if(i._initialized||i._terminated)throw new ft(We.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class bu{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new ft(We.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new nn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Tu{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Tu(mi.fromBase64String(e))}catch(t){throw new ft(We.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Tu(mi.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class pl{constructor(e){this._methodName=e}}class gf{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ft(We.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ft(We.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ke(this._lat,e._lat)||ke(this._long,e._long)}}const Zm=/^__.*__$/;class ug{constructor(e,t,o){this.data=e,this.fieldMask=t,this.fieldTransforms=o}toMutation(e,t){return null!==this.fieldMask?new Wa(e,this.data,this.fieldMask,t,this.fieldTransforms):new el(e,this.data,t,this.fieldTransforms)}}class mf{constructor(e,t,o){this.data=e,this.fieldMask=t,this.fieldTransforms=o}toMutation(e,t){return new Wa(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Km(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Gt()}}class Ql{constructor(e,t,o,u,d,g){this.settings=e,this.databaseId=t,this.It=o,this.ignoreUndefinedProperties=u,void 0===d&&this.ea(),this.fieldTransforms=d||[],this.fieldMask=g||[]}get path(){return this.settings.path}get na(){return this.settings.na}sa(e){return new Ql(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.It,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ia(e){var t;const o=null===(t=this.path)||void 0===t?void 0:t.child(e),u=this.sa({path:o,ra:!1});return u.oa(e),u}ua(e){var t;const o=null===(t=this.path)||void 0===t?void 0:t.child(e),u=this.sa({path:o,ra:!1});return u.ea(),u}ca(e){return this.sa({path:void 0,ra:!0})}aa(e){return bf(e,this.settings.methodName,this.settings.ha||!1,this.path,this.settings.la)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}ea(){if(this.path)for(let e=0;e<this.path.length;e++)this.oa(this.path.get(e))}oa(e){if(0===e.length)throw this.aa("Document fields must not be empty");if(Km(this.na)&&Zm.test(e))throw this.aa('Document fields cannot begin and end with "__"')}}class yf{constructor(e,t,o){this.databaseId=e,this.ignoreUndefinedProperties=t,this.It=o||wd(e)}fa(e,t,o,u=!1){return new Ql({na:e,methodName:t,la:o,path:nn.emptyPath(),ra:!1,ha:u},this.databaseId,this.It,this.ignoreUndefinedProperties)}}function zu(i){const e=i._freezeSettings(),t=wd(i._databaseId);return new yf(i._databaseId,!!e.ignoreUndefinedProperties,t)}function _f(i,e,t,o,u,d={}){const g=i.fa(d.merge||d.mergeFields?2:0,e,t,u);If("Data must be an object, but it was:",g,o);const C=dg(o,g);let V,H;if(d.merge)V=new li(g.fieldMask),H=g.fieldTransforms;else if(d.mergeFields){const J=[];for(const me of d.mergeFields){const Ue=Df(e,me,t);if(!g.contains(Ue))throw new ft(We.INVALID_ARGUMENT,`Field '${Ue}' is specified in your field mask but missing from your input data.`);Tf(J,Ue)||J.push(Ue)}V=new li(J),H=g.fieldTransforms.filter(me=>V.covers(me.field))}else V=null,H=g.fieldTransforms;return new ug(new Cs(C),V,H)}class Jl extends pl{_toFieldTransform(e){if(2!==e.na)throw e.aa(1===e.na?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Jl}}function vf(i,e,t){return new Ql({na:3,la:e.settings.la,methodName:i._methodName,ra:t},e.databaseId,e.It,e.ignoreUndefinedProperties)}class wf extends pl{_toFieldTransform(e){return new Sl(e.path,new hu)}isEqual(e){return e instanceof wf}}class Ym extends pl{constructor(e,t){super(e),this.da=t}_toFieldTransform(e){const t=vf(this,e,!0),o=this.da.map(d=>Xl(d,t)),u=new za(o);return new Sl(e.path,u)}isEqual(e){return this===e}}class lg extends pl{constructor(e,t){super(e),this.da=t}_toFieldTransform(e){const t=vf(this,e,!0),o=this.da.map(d=>Xl(d,t)),u=new Ju(o);return new Sl(e.path,u)}isEqual(e){return this===e}}class Qm extends pl{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=new fu(e.It,Tl(e.It,this._a));return new Sl(e.path,t)}isEqual(e){return this===e}}function Ef(i,e,t,o){const u=i.fa(1,e,t);If("Data must be an object, but it was:",u,o);const d=[],g=Cs.empty();Ye(o,(V,H)=>{const J=Cf(e,V,t);H=(0,Je.m9)(H);const me=u.ua(J);if(H instanceof Jl)d.push(J);else{const Ue=Xl(H,me);null!=Ue&&(d.push(J),g.set(J,Ue))}});const C=new li(d);return new mf(g,C,u.fieldTransforms)}function $d(i,e,t,o,u,d){const g=i.fa(1,e,t),C=[Df(e,o,t)],V=[u];if(d.length%2!=0)throw new ft(We.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let Ue=0;Ue<d.length;Ue+=2)C.push(Df(e,d[Ue])),V.push(d[Ue+1]);const H=[],J=Cs.empty();for(let Ue=C.length-1;Ue>=0;--Ue)if(!Tf(H,C[Ue])){const st=C[Ue];let ht=V[Ue];ht=(0,Je.m9)(ht);const Wt=g.ua(st);if(ht instanceof Jl)H.push(st);else{const cn=Xl(ht,Wt);null!=cn&&(H.push(st),J.set(st,cn))}}const me=new li(H);return new mf(J,me,g.fieldTransforms)}function cg(i,e,t,o=!1){return Xl(t,i.fa(o?4:3,e))}function Xl(i,e){if(hg(i=(0,Je.m9)(i)))return If("Unsupported field value:",e,i),dg(i,e);if(i instanceof pl)return function(t,o){if(!Km(o.na))throw o.aa(`${t._methodName}() can only be used with update() and set()`);if(!o.path)throw o.aa(`${t._methodName}() is not currently supported inside arrays`);const u=t._toFieldTransform(o);u&&o.fieldTransforms.push(u)}(i,e),null;if(void 0===i&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.ra&&4!==e.na)throw e.aa("Nested arrays are not supported");return function(t,o){const u=[];let d=0;for(const g of t){let C=Xl(g,o.ca(d));null==C&&(C={nullValue:"NULL_VALUE"}),u.push(C),d++}return{arrayValue:{values:u}}}(i,e)}return function(t,o){if(null===(t=(0,Je.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return Tl(o.It,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const u=Nt.fromDate(t);return{timestampValue:kl(o.It,u)}}if(t instanceof Nt){const u=new Nt(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:kl(o.It,u)}}if(t instanceof gf)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Tu)return{bytesValue:Ec(o.It,t._byteString)};if(t instanceof ts){const u=o.databaseId,d=t.firestore._databaseId;if(!d.isEqual(u))throw o.aa(`Document reference is for database ${d.projectId}/${d.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:m(t.firestore._databaseId||o.databaseId,t._key.path)}}throw o.aa(`Unsupported field value: ${hf(t)}`)}(i,e)}function dg(i,e){const t={};return At(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ye(i,(o,u)=>{const d=Xl(u,e.ia(o));null!=d&&(t[o]=d)}),{mapValue:{fields:t}}}function hg(i){return!("object"!=typeof i||null===i||i instanceof Array||i instanceof Date||i instanceof Nt||i instanceof gf||i instanceof Tu||i instanceof ts||i instanceof pl)}function If(i,e,t){if(!hg(t)||"object"!=typeof(o=t)||null===o||Object.getPrototypeOf(o)!==Object.prototype&&null!==Object.getPrototypeOf(o)){const o=hf(t);throw e.aa("an object"===o?i+" a custom object":i+" "+o)}var o}function Df(i,e,t){if((e=(0,Je.m9)(e))instanceof bu)return e._internalPath;if("string"==typeof e)return Cf(i,e);throw bf("Field path arguments must be of type string or ",i,!1,void 0,t)}const Z_=new RegExp("[~\\*/\\[\\]]");function Cf(i,e,t){if(e.search(Z_)>=0)throw bf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,t);try{return new bu(...e.split("."))._internalPath}catch{throw bf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,t)}}function bf(i,e,t,o,u){const d=o&&!o.isEmpty(),g=void 0!==u;let C=`Function ${e}() called with invalid data`;t&&(C+=" (via `toFirestore()`)"),C+=". ";let V="";return(d||g)&&(V+=" (found",d&&(V+=` in field ${o}`),g&&(V+=` in document ${u}`),V+=")"),new ft(We.INVALID_ARGUMENT,C+i+V)}function Tf(i,e){return i.some(t=>t.isEqual(e))}class ec{constructor(e,t,o,u,d){this._firestore=e,this._userDataWriter=t,this._key=o,this._document=u,this._converter=d}get id(){return this._key.path.lastSegment()}get ref(){return new ts(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Jm(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Hd("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class Jm extends ec{data(){return super.data()}}function Hd(i,e){return"string"==typeof e?Cf(i,e):e instanceof bu?e._internalPath:e._delegate._internalPath}class gl{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Su extends ec{constructor(e,t,o,u,d,g){super(e,t,o,u,g),this._firestore=e,this._firestoreImpl=e,this.metadata=d}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Bc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const o=this._document.data.field(Hd("DocumentSnapshot.get",e));if(null!==o)return this._userDataWriter.convertValue(o,t.serverTimestamps)}}}class Bc extends Su{data(e={}){return super.data(e)}}class Wu{constructor(e,t,o,u){this._firestore=e,this._userDataWriter=t,this._snapshot=u,this.metadata=new gl(u.hasPendingWrites,u.fromCache),this.query=o}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(o=>{e.call(t,new Bc(this._firestore,this._userDataWriter,o.key,o,new gl(this._snapshot.mutatedKeys.has(o.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ft(We.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(o,u){if(o._snapshot.oldDocs.isEmpty()){let d=0;return o._snapshot.docChanges.map(g=>({type:"added",doc:new Bc(o._firestore,o._userDataWriter,g.doc.key,g.doc,new gl(o._snapshot.mutatedKeys.has(g.doc.key),o._snapshot.fromCache),o.query.converter),oldIndex:-1,newIndex:d++}))}{let d=o._snapshot.oldDocs;return o._snapshot.docChanges.filter(g=>u||3!==g.type).map(g=>{const C=new Bc(o._firestore,o._userDataWriter,g.doc.key,g.doc,new gl(o._snapshot.mutatedKeys.has(g.doc.key),o._snapshot.fromCache),o.query.converter);let V=-1,H=-1;return 0!==g.type&&(V=d.indexOf(g.doc.key),d=d.delete(g.doc.key)),1!==g.type&&(d=d.add(g.doc),H=d.indexOf(g.doc.key)),{type:Xm(g.type),doc:C,oldIndex:V,newIndex:H}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function Xm(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Gt()}}function fg(i,e){return i instanceof Su&&e instanceof Su?i._firestore===e._firestore&&i._key.isEqual(e._key)&&(null===i._document?null===e._document:i._document.isEqual(e._document))&&i._converter===e._converter:i instanceof Wu&&e instanceof Wu&&i._firestore===e._firestore&&fl(i.query,e.query)&&i.metadata.isEqual(e.metadata)&&i._snapshot.isEqual(e._snapshot)}function K_(i){if("L"===i.limitType&&0===i.explicitOrderBy.length)throw new ft(We.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Gd{}function ml(i,...e){for(const t of e)i=t._apply(i);return i}class ey extends Gd{constructor(e,t,o){super(),this.wa=e,this.ma=t,this.ga=o,this.type="where"}_apply(e){const t=zu(e.firestore),o=function(u,d,g,C,V,H,J){let me;if(V.isKeyField()){if("array-contains"===H||"array-contains-any"===H)throw new ft(We.INVALID_ARGUMENT,`Invalid Query. You can't perform '${H}' queries on documentId().`);if("in"===H||"not-in"===H){gg(J,H);const st=[];for(const ht of J)st.push(ay(C,u,ht));me={arrayValue:{values:st}}}else me=ay(C,u,J)}else"in"!==H&&"not-in"!==H&&"array-contains-any"!==H||gg(J,H),me=cg(g,"where",J,"in"===H||"not-in"===H);const Ue=yo.create(V,H,me);return function(st,ht){if(ht.dt()){const cn=sh(st);if(null!==cn&&!cn.isEqual(ht.field))throw new ft(We.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${cn.toString()}' and '${ht.field.toString()}'`);const Hr=ih(st);null!==Hr&&ev(0,ht.field,Hr)}const Wt=function(cn,Hr){for(const ti of cn.filters)if(Hr.indexOf(ti.op)>=0)return ti.op;return null}(st,function(cn){switch(cn){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(ht.op));if(null!==Wt)throw new ft(We.INVALID_ARGUMENT,Wt===ht.op?`Invalid query. You cannot use more than one '${ht.op.toString()}' filter.`:`Invalid query. You cannot use '${ht.op.toString()}' filters with '${Wt.toString()}' filters.`)}(u,Ue),Ue}(e._query,0,t,e.firestore._databaseId,this.wa,this.ma,this.ga);return new Xo(e.firestore,e.converter,function(u,d){const g=u.filters.concat([d]);return new eo(u.path,u.collectionGroup,u.explicitOrderBy.slice(),g,u.limit,u.limitType,u.startAt,u.endAt)}(e._query,o))}}class _o extends Gd{constructor(e,t){super(),this.wa=e,this.ya=t,this.type="orderBy"}_apply(e){const t=function(o,u,d){if(null!==o.startAt)throw new ft(We.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==o.endAt)throw new ft(We.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const g=new cu(u,d);return function(C,V){if(null===ih(C)){const H=sh(C);null!==H&&ev(0,H,V.field)}}(o,g),g}(e._query,this.wa,this.ya);return new Xo(e.firestore,e.converter,function(o,u){const d=o.explicitOrderBy.concat([u]);return new eo(o.path,o.collectionGroup,d,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)}(e._query,t))}}class ny extends Gd{constructor(e,t,o){super(),this.type=e,this.pa=t,this.Ia=o}_apply(e){return new Xo(e.firestore,e.converter,hc(e._query,this.pa,this.Ia))}}class iy extends Gd{constructor(e,t,o){super(),this.type=e,this.Ta=t,this.Ea=o}_apply(e){const t=pg(e,this.type,this.Ta,this.Ea);return new Xo(e.firestore,e.converter,(u=t,new eo((o=e._query).path,o.collectionGroup,o.explicitOrderBy.slice(),o.filters.slice(),o.limit,o.limitType,u,o.endAt)));var o,u}}class tc extends Gd{constructor(e,t,o){super(),this.type=e,this.Ta=t,this.Ea=o}_apply(e){const t=pg(e,this.type,this.Ta,this.Ea);return new Xo(e.firestore,e.converter,(u=t,new eo((o=e._query).path,o.collectionGroup,o.explicitOrderBy.slice(),o.filters.slice(),o.limit,o.limitType,o.startAt,u)));var o,u}}function pg(i,e,t,o){if(t[0]=(0,Je.m9)(t[0]),t[0]instanceof ec)return function(u,d,g,C,V){if(!C)throw new ft(We.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${g}().`);const H=[];for(const J of dc(u))if(J.field.isKeyField())H.push(Lo(d,C.key));else{const me=C.data.field(J.field);if(wl(me))throw new ft(We.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+J.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===me){const Ue=J.field.canonicalString();throw new ft(We.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${Ue}' (used as the orderBy) does not exist.`)}H.push(me)}return new lu(H,V)}(i._query,i.firestore._databaseId,e,t[0]._document,o);{const u=zu(i.firestore);return function(d,g,C,V,H,J){const me=d.explicitOrderBy;if(H.length>me.length)throw new ft(We.INVALID_ARGUMENT,`Too many arguments provided to ${V}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const Ue=[];for(let st=0;st<H.length;st++){const ht=H[st];if(me[st].field.isKeyField()){if("string"!=typeof ht)throw new ft(We.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${V}(), but got a ${typeof ht}`);if(!oh(d)&&-1!==ht.indexOf("/"))throw new ft(We.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${V}() must be a plain document ID, but '${ht}' contains a slash.`);const Wt=d.path.child(Yt.fromString(ht));if(!Dt.isDocumentKey(Wt))throw new ft(We.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${V}() must result in a valid document path, but '${Wt}' is not because it contains an odd number of segments.`);const cn=new Dt(Wt);Ue.push(Lo(g,cn))}else{const Wt=cg(C,V,ht);Ue.push(Wt)}}return new lu(Ue,J)}(i._query,i.firestore._databaseId,u,e,t,o)}}function ay(i,e,t){if("string"==typeof(t=(0,Je.m9)(t))){if(""===t)throw new ft(We.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!oh(e)&&-1!==t.indexOf("/"))throw new ft(We.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const o=e.path.child(Yt.fromString(t));if(!Dt.isDocumentKey(o))throw new ft(We.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${o}' is not because it has an odd number of segments (${o.length}).`);return Lo(i,new Dt(o))}if(t instanceof ts)return Lo(i,t._key);throw new ft(We.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${hf(t)}.`)}function gg(i,e){if(!Array.isArray(i)||0===i.length)throw new ft(We.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(i.length>10)throw new ft(We.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function ev(i,e,t){if(!t.isEqual(e))throw new ft(We.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}const uy={maxAttempts:5};class zd{convertValue(e,t="none"){switch(vn(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Li(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(yi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Gt()}}convertObject(e,t){const o={};return Ye(e.fields,(u,d)=>{o[u]=this.convertValue(d,t)}),o}convertGeoPoint(e){return new gf(Li(e.latitude),Li(e.longitude))}convertArray(e,t){return(e.values||[]).map(o=>this.convertValue(o,t))}convertServerTimestamp(e,t){switch(t){case"previous":const o=O(e);return null==o?null:this.convertValue(o,t);case"estimate":return this.convertTimestamp(F(e));default:return null}}convertTimestamp(e){const t=mo(e);return new Nt(t.seconds,t.nanos)}convertDocumentKey(e,t){const o=Yt.fromString(e);ln(qy(o));const u=new se(o.get(1),o.get(3)),d=new Dt(o.popFirst(5));return u.isEqual(t)||Cr(`Document ${d} contains a document reference within a different database (${u.projectId}/${u.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),d}}function Ua(i,e,t){let o;return o=i?t&&(t.merge||t.mergeFields)?i.toFirestore(e,t):i.toFirestore(e):e,o}class tv extends zd{constructor(e){super(),this.firestore=e}convertBytes(e){return new Tu(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new ts(this.firestore,null,t)}}class ly{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=zu(e)}set(e,t,o){this._verifyNotCommitted();const u=Uo(e,this._firestore),d=Ua(u.converter,t,o),g=_f(this._dataReader,"WriteBatch.set",u._key,d,null!==u.converter,o);return this._mutations.push(g.toMutation(u._key,zi.none())),this}update(e,t,o,...u){this._verifyNotCommitted();const d=Uo(e,this._firestore);let g;return g="string"==typeof(t=(0,Je.m9)(t))||t instanceof bu?$d(this._dataReader,"WriteBatch.update",d._key,t,o,u):Ef(this._dataReader,"WriteBatch.update",d._key,t),this._mutations.push(g.toMutation(d._key,zi.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Uo(e,this._firestore);return this._mutations=this._mutations.concat(new Rl(t._key,zi.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new ft(We.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Uo(i,e){if((i=(0,Je.m9)(i)).firestore!==e)throw new ft(We.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return i}class Bo extends zd{constructor(e){super(),this.firestore=e}convertBytes(e){return new Tu(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new ts(this.firestore,null,t)}}function hy(i,e,t){i=Lr(i,ts);const o=Lr(i.firestore,Ti),u=Ua(i.converter,e,t);return nc(o,[_f(zu(o),"setDoc",i._key,u,null!==i.converter,t).toMutation(i._key,zi.none())])}function Sf(i,e,t,...o){i=Lr(i,ts);const u=Lr(i.firestore,Ti),d=zu(u);let g;return g="string"==typeof(e=(0,Je.m9)(e))||e instanceof bu?$d(d,"updateDoc",i._key,e,t,o):Ef(d,"updateDoc",i._key,e),nc(u,[g.toMutation(i._key,zi.exists(!0))])}function mg(i,...e){var t,o,u;i=(0,Je.m9)(i);let d={includeMetadataChanges:!1},g=0;"object"!=typeof e[g]||ba(e[g])||(d=e[g],g++);const C={includeMetadataChanges:d.includeMetadataChanges};if(ba(e[g])){const me=e[g];e[g]=null===(t=me.next)||void 0===t?void 0:t.bind(me),e[g+1]=null===(o=me.error)||void 0===o?void 0:o.bind(me),e[g+2]=null===(u=me.complete)||void 0===u?void 0:u.bind(me)}let V,H,J;if(i instanceof ts)H=Lr(i.firestore,Ti),J=Ou(i._key.path),V={next:me=>{e[g]&&e[g](Af(H,i,me))},error:e[g+1],complete:e[g+2]};else{const me=Lr(i,Xo);H=Lr(me.firestore,Ti),J=me._query;const Ue=new Bo(H);V={next:st=>{e[g]&&e[g](new Wu(H,Ue,me,st))},error:e[g+1],complete:e[g+2]},K_(i._query)}return function(me,Ue,st,ht){const Wt=new Jp(ht),cn=new Nd(Ue,Wt,st);return me.asyncQueue.enqueueAndForget((0,he.Z)(function*(){return _m(yield Du(me),cn)})),()=>{Wt.Rc(),me.asyncQueue.enqueueAndForget((0,he.Z)(function*(){return Od(yield Du(me),cn)}))}}(ns(H),J,C,V)}function nc(i,e){return function(t,o){const u=new Mi;return t.asyncQueue.enqueueAndForget((0,he.Z)(function*(){return function Cm(i,e,t){return Pd.apply(this,arguments)}(yield ng(t),o,u)})),u.promise}(ns(i),e)}function Af(i,e,t){const o=t.docs.get(e._key),u=new Bo(i);return new Su(i,u,e._key,o,new gl(t.hasPendingWrites,t.fromCache),e.converter)}class xf extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=zu(e)}get(e){const t=Uo(e,this._firestore),o=new tv(this._firestore);return this._transaction.lookup([t._key]).then(u=>{if(!u||1!==u.length)return Gt();const d=u[0];if(d.isFoundDocument())return new ec(this._firestore,o,d.key,d,t.converter);if(d.isNoDocument())return new ec(this._firestore,o,t._key,null,t.converter);throw Gt()})}set(e,t,o){const u=Uo(e,this._firestore),d=Ua(u.converter,t,o),g=_f(this._dataReader,"Transaction.set",u._key,d,null!==u.converter,o);return this._transaction.set(u._key,g),this}update(e,t,o,...u){const d=Uo(e,this._firestore);let g;return g="string"==typeof(t=(0,Je.m9)(t))||t instanceof bu?$d(this._dataReader,"Transaction.update",d._key,t,o,u):Ef(this._dataReader,"Transaction.update",d._key,t),this._transaction.update(d._key,g),this}delete(e){const t=Uo(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Uo(e,this._firestore),o=new Bo(this._firestore);return super.get(e).then(u=>new Su(this._firestore,o,t._key,u._document,new gl(!1,!1),t.converter))}}function Rf(i,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new ft("invalid-argument",`Invalid options passed to function ${i}(): You cannot specify both "merge" and "mergeFields".`);return e}function vg(){if(typeof Uint8Array>"u")throw new ft("unimplemented","Uint8Arrays are not available in this environment.")}function _y(){if(!function Zo(){return typeof atob<"u"}())throw new ft("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(i,e=!0){Do=tt.SDK_VERSION,(0,tt._registerComponent)(new et.wA("firestore",(t,{instanceIdentifier:o,options:u})=>{const d=t.getProvider("app").getImmediate(),g=new Ti(new wa(t.getProvider("auth-internal")),new M(t.getProvider("app-check-internal")),function(C,V){if(!Object.prototype.hasOwnProperty.apply(C.options,["projectId"]))throw new ft(We.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new se(C.options.projectId,V)}(d,o),d);return u=Object.assign({useFetchStreams:e},u),g._setSettings(u),g},"PUBLIC").setMultipleInstances(!0)),(0,tt.registerVersion)(Ps,"3.4.15",i),(0,tt.registerVersion)(Ps,"3.4.15","esm2017")}();class qd{constructor(e){this._delegate=e}static fromBase64String(e){return _y(),new qd(Tu.fromBase64String(e))}static fromUint8Array(e){return vg(),new qd(Tu.fromUint8Array(e))}toBase64(){return _y(),this._delegate.toBase64()}toUint8Array(){return vg(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function wg(i){return function cv(i,e){if("object"!=typeof i||null===i)return!1;const t=i;for(const o of e)if(o in t&&"function"==typeof t[o])return!0;return!1}(i,["next","error","complete"])}class dv{enableIndexedDbPersistence(e,t){return function Vc(i,e){ag(i=Lr(i,Ti));const t=ns(i),o=i._freezeSettings(),u=new af;return Yl(t,u,new Rm(u,o.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function Uc(i){ag(i=Lr(i,Ti));const e=ns(i),t=i._freezeSettings(),o=new af;return Yl(e,o,new Qp(o,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function $m(i){if(i._initialized&&!i._terminated)throw new ft(We.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Mi;return i._queue.enqueueAndForgetEvenWhileRestricted((0,he.Z)(function*(){try{yield(t=(0,he.Z)(function*(o){if(!Is.C())return Promise.resolve();const u=o+"main";yield Is.delete(u)}),function(o){return t.apply(this,arguments)})(vp(i._databaseId,i._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class vy{constructor(e,t,o){this._delegate=t,this._persistenceProvider=o,this.INTERNAL={delete:()=>this.terminate()},e instanceof se||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&fo("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,o={}){!function Ud(i,e,t,o={}){var u;const d=(i=Lr(i,ff))._getSettings();if("firestore.googleapis.com"!==d.host&&d.host!==e&&fo("Host has been set in both settings() and useEmulator(), emulator host will be used"),i._setSettings(Object.assign(Object.assign({},d),{host:`${e}:${t}`,ssl:!1})),o.mockUserToken){let g,C;if("string"==typeof o.mockUserToken)g=o.mockUserToken,C=Ci.MOCK_USER;else{g=(0,Je.Sg)(o.mockUserToken,null===(u=i._app)||void 0===u?void 0:u.options.projectId);const V=o.mockUserToken.sub||o.mockUserToken.user_id;if(!V)throw new ft(We.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");C=new Ci(V)}i._authCredentials=new ia(new Ri(g,C))}}(this._delegate,e,t,o)}enableNetwork(){return function Gm(i){return function h0(i){return i.asyncQueue.enqueue((0,he.Z)(function*(){const e=yield cf(i),t=yield Pm(i);return e.setNetworkEnabled(!0),function(o){const u=Lt(o);return u._u.delete(0),xc(u)}(t)}))}(ns(i=Lr(i,Ti)))}(this._delegate)}disableNetwork(){return function zm(i){return function H_(i){return i.asyncQueue.enqueue((0,he.Z)(function*(){const e=yield cf(i),t=yield Pm(i);return e.setNetworkEnabled(!1),(o=(0,he.Z)(function*(u){const d=Lt(u);d._u.add(0),yield Id(d),d.gu.set("Offline")}),function(u){return o.apply(this,arguments)})(t);var o}))}(ns(i=Lr(i,Ti)))}(this._delegate)}enablePersistence(e){let t=!1,o=!1;return e&&(t=!!e.synchronizeTabs,o=!!e.experimentalForceOwningTab,Vm("synchronizeTabs",t,"experimentalForceOwningTab",o)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,o)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function Hm(i){return function(e){const t=new Mi;return e.asyncQueue.enqueueAndForget((0,he.Z)(function*(){return function Tm(i,e){return jp.apply(this,arguments)}(yield ng(e),t)})),t.promise}(ns(i=Lr(i,Ti)))}(this._delegate)}onSnapshotsInSync(e){return function ov(i,e){return function z_(i,e){const t=new Jp(e);return i.asyncQueue.enqueueAndForget((0,he.Z)(function*(){return o=yield Du(i),u=t,Lt(o).Ru.add(u),void u.next();var o,u})),()=>{t.Rc(),i.asyncQueue.enqueueAndForget((0,he.Z)(function*(){return o=yield Du(i),u=t,void Lt(o).Ru.delete(u);var o,u}))}}(ns(i=Lr(i,Ti)),ba(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new ft("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new ic(this,jm(this._delegate,e))}catch(t){throw ca(t,"collection()","Firestore.collection()")}}doc(e){try{return new Ka(this,hl(this._delegate,e))}catch(t){throw ca(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new da(this,function Cu(i,e){if(i=Lr(i,ff),sg("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new ft(We.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Xo(i,null,(t=e,new eo(Yt.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw ca(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function av(i,e,t){i=Lr(i,Ti);const o=Object.assign(Object.assign({},uy),t);return function(u){if(u.maxAttempts<1)throw new ft(We.INVALID_ARGUMENT,"Max attempts must be at least 1")}(o),function Lm(i,e,t){const o=new Mi;return i.asyncQueue.enqueueAndForget((0,he.Z)(function*(){const u=yield(d=i,cl(d).then(g=>g.datastore));var d;new Om(i.asyncQueue,u,t,e,o).run()})),o.promise}(ns(i),u=>e(new xf(i,u)),o)}(this._delegate,t=>e(new wy(this,t)))}batch(){return ns(this._delegate),new Ey(new ly(this._delegate,e=>nc(this._delegate,e)))}loadBundle(e){return function Wm(i,e){const t=ns(i=Lr(i,Ti)),o=new og;return function ig(i,e,t,o){const u=function(d,g){let C;return C="string"==typeof d?(new TextEncoder).encode(d):d,V=function(V,H){if(V instanceof Uint8Array)return $_(V,H);if(V instanceof ArrayBuffer)return $_(new Uint8Array(V),H);if(V instanceof ReadableStream)return V.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(C),new Xp(V,g);var V}(t,wd(e));i.asyncQueue.enqueueAndForget((0,he.Z)(function*(){!function rf(i,e,t){const o=Lt(i);var u;(u=(0,he.Z)(function*(d,g,C){try{const V=yield g.getMetadata();if(yield function(Ue,st){const ht=Lt(Ue),Wt=zs(st.createTime);return ht.persistence.runTransaction("hasNewerBundle","readonly",cn=>ht.Ns.getBundleMetadata(cn,st.id)).then(cn=>!!cn&&cn.createTime.compareTo(Wt)>=0)}(d.localStore,V))return yield g.close(),C._completeWith({taskState:"Success",documentsLoaded:(Ue=V).totalDocuments,bytesLoaded:Ue.totalBytes,totalDocuments:Ue.totalDocuments,totalBytes:Ue.totalBytes}),Promise.resolve(new Set);C._updateProgress(Em(V));const H=new wm(V,d.localStore,g.It);let J=yield g.wc();for(;J;){const Ue=yield H.Ou(J);Ue&&C._updateProgress(Ue),J=yield g.wc()}const me=yield H.complete();return yield Gu(d,me.Bu,void 0),yield function(Ue,st){const ht=Lt(Ue);return ht.persistence.runTransaction("Save bundle","readwrite",Wt=>ht.Ns.saveBundleMetadata(Wt,st))}(d.localStore,V),C._completeWith(me.progress),Promise.resolve(me.$u)}catch(V){return fo("SyncEngine",`Loading bundle failed with ${V}`),C._failWith(V),Promise.resolve(new Set)}var Ue}),function(d,g,C){return u.apply(this,arguments)})(o,e,t).then(u=>{o.sharedClientState.notifyBundleLoaded(u)})}(yield ng(i),u,o)}))}(t,i._databaseId,e,o),o}(this._delegate,e)}namedQuery(e){return function qm(i,e){return function W_(i,e){return i.asyncQueue.enqueue((0,he.Z)(function*(){return function(t,o){const u=Lt(t);return u.persistence.runTransaction("Get named query","readonly",d=>u.Ns.getNamedQuery(d,o))}(yield Ld(i),e)}))}(ns(i=Lr(i,Ti)),e).then(t=>t?new Xo(i,null,t.query):null)}(this._delegate,e).then(t=>t?new da(this,t):null)}}class Of extends zd{constructor(e){super(),this.firestore=e}convertBytes(e){return new qd(new Tu(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Ka.forKey(t,this.firestore,null)}}class wy{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new Of(e)}get(e){const t=yl(e);return this._delegate.get(t).then(o=>new Zd(this._firestore,new Su(this._firestore._delegate,this._userDataWriter,o._key,o._document,o.metadata,t.converter)))}set(e,t,o){const u=yl(e);return o?(Rf("Transaction.set",o),this._delegate.set(u,t,o)):this._delegate.set(u,t),this}update(e,t,o,...u){const d=yl(e);return 2===arguments.length?this._delegate.update(d,t):this._delegate.update(d,t,o,...u),this}delete(e){const t=yl(e);return this._delegate.delete(t),this}}class Ey{constructor(e){this._delegate=e}set(e,t,o){const u=yl(e);return o?(Rf("WriteBatch.set",o),this._delegate.set(u,t,o)):this._delegate.set(u,t),this}update(e,t,o,...u){const d=yl(e);return 2===arguments.length?this._delegate.update(d,t):this._delegate.update(d,t,o,...u),this}delete(e){const t=yl(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class rc{constructor(e,t,o){this._firestore=e,this._userDataWriter=t,this._delegate=o}fromFirestore(e,t){const o=new Bc(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Kd(this._firestore,o),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const o=rc.INSTANCES;let u=o.get(e);u||(u=new WeakMap,o.set(e,u));let d=u.get(t);return d||(d=new rc(e,new Of(e),t),u.set(t,d)),d}}rc.INSTANCES=new WeakMap;class Ka{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Of(e)}static forPath(e,t,o){if(e.length%2!=0)throw new ft("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Ka(t,new ts(t._delegate,o,new Dt(e)))}static forKey(e,t,o){return new Ka(t,new ts(t._delegate,o,e))}get id(){return this._delegate.id}get parent(){return new ic(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new ic(this.firestore,jm(this._delegate,e))}catch(t){throw ca(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,Je.m9)(e))instanceof ts&&Vo(this._delegate,e)}set(e,t){t=Rf("DocumentReference.set",t);try{return t?hy(this._delegate,e,t):hy(this._delegate,e)}catch(o){throw ca(o,"setDoc()","DocumentReference.set()")}}update(e,t,...o){try{return 1===arguments.length?Sf(this._delegate,e):Sf(this._delegate,e,t,...o)}catch(u){throw ca(u,"updateDoc()","DocumentReference.update()")}}delete(){return function Wd(i){return nc(Lr(i.firestore,Ti),[new Rl(i._key,zi.none())])}(this._delegate)}onSnapshot(...e){const t=Iy(e),o=Dy(e,u=>new Zd(this.firestore,new Su(this.firestore._delegate,this._userDataWriter,u._key,u._document,u.metadata,this._delegate.converter)));return mg(this._delegate,t,o)}get(e){let t;return t="cache"===e?.source?function cy(i){i=Lr(i,ts);const e=Lr(i.firestore,Ti),t=ns(e),o=new Bo(e);return function f0(i,e){const t=new Mi;return i.asyncQueue.enqueueAndForget((0,he.Z)(function*(){return(o=(0,he.Z)(function*(u,d,g){try{const C=yield function(V,H){const J=Lt(V);return J.persistence.runTransaction("read document","readonly",me=>J.localDocuments.getDocument(me,H))}(u,d);C.isFoundDocument()?g.resolve(C):C.isNoDocument()?g.resolve(null):g.reject(new ft(We.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(C){const V=xd(C,`Failed to get document '${d} from cache`);g.reject(V)}}),function(u,d,g){return o.apply(this,arguments)})(yield Ld(i),e,t);var o})),t.promise}(t,i._key).then(u=>new Su(e,o,i._key,u,new gl(null!==u&&u.hasLocalMutations,!0),i.converter))}(this._delegate):"server"===e?.source?function dy(i){i=Lr(i,ts);const e=Lr(i.firestore,Ti);return km(ns(e),i._key,{source:"server"}).then(t=>Af(e,i,t))}(this._delegate):function su(i){i=Lr(i,ts);const e=Lr(i.firestore,Ti);return km(ns(e),i._key).then(t=>Af(e,i,t))}(this._delegate),t.then(o=>new Zd(this.firestore,new Su(this.firestore._delegate,this._userDataWriter,o._key,o._document,o.metadata,this._delegate.converter)))}withConverter(e){return new Ka(this.firestore,this._delegate.withConverter(e?rc.getInstance(this.firestore,e):null))}}function ca(i,e,t){return i.message=i.message.replace(e,t),i}function Iy(i){for(const e of i)if("object"==typeof e&&!wg(e))return e;return{}}function Dy(i,e){var t,o;let u;return u=wg(i[0])?i[0]:wg(i[1])?i[1]:"function"==typeof i[0]?{next:i[0],error:i[1],complete:i[2]}:{next:i[1],error:i[2],complete:i[3]},{next:d=>{u.next&&u.next(e(d))},error:null===(t=u.error)||void 0===t?void 0:t.bind(u),complete:null===(o=u.complete)||void 0===o?void 0:o.bind(u)}}class Zd{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Ka(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return fg(this._delegate,e._delegate)}}class Kd extends Zd{data(e){const t=this._delegate.data(e);return function va(i,e){i||Gt()}(void 0!==t),t}}class da{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Of(e)}where(e,t,o){try{return new da(this.firestore,ml(this._delegate,function Y_(i,e,t){const o=e,u=Hd("where",i);return new ey(u,o,t)}(e,t,o)))}catch(u){throw ca(u,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new da(this.firestore,ml(this._delegate,function ty(i,e="asc"){const t=e,o=Hd("orderBy",i);return new _o(o,t)}(e,t)))}catch(o){throw ca(o,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new da(this.firestore,ml(this._delegate,function Q_(i){return Vd("limit",i),new ny("limit",i,"F")}(e)))}catch(t){throw ca(t,"limit()","Query.limit()")}}limitToLast(e){try{return new da(this.firestore,ml(this._delegate,function ry(i){return Vd("limitToLast",i),new ny("limitToLast",i,"L")}(e)))}catch(t){throw ca(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new da(this.firestore,ml(this._delegate,function sy(...i){return new iy("startAt",i,!0)}(...e)))}catch(t){throw ca(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new da(this.firestore,ml(this._delegate,function oy(...i){return new iy("startAfter",i,!1)}(...e)))}catch(t){throw ca(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new da(this.firestore,ml(this._delegate,function J_(...i){return new tc("endBefore",i,!1)}(...e)))}catch(t){throw ca(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new da(this.firestore,ml(this._delegate,function X_(...i){return new tc("endAt",i,!0)}(...e)))}catch(t){throw ca(t,"endAt()","Query.endAt()")}}isEqual(e){return fl(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function rv(i){i=Lr(i,Xo);const e=Lr(i.firestore,Ti),t=ns(e),o=new Bo(e);return function G_(i,e){const t=new Mi;return i.asyncQueue.enqueueAndForget((0,he.Z)(function*(){return(o=(0,he.Z)(function*(u,d,g){try{const C=yield Oh(u,d,!0),V=new Dm(d,C.Hi),H=V.ju(C.documents),J=V.applyChanges(H,!1);g.resolve(J.snapshot)}catch(C){const V=xd(C,`Failed to execute query '${d} against cache`);g.reject(V)}}),function(u,d,g){return o.apply(this,arguments)})(yield Ld(i),e,t);var o})),t.promise}(t,i._query).then(u=>new Wu(e,o,i,u))}(this._delegate):"server"===e?.source?function iv(i){i=Lr(i,Xo);const e=Lr(i.firestore,Ti),t=ns(e),o=new Bo(e);return Fm(t,i._query,{source:"server"}).then(u=>new Wu(e,o,i,u))}(this._delegate):function nv(i){i=Lr(i,Xo);const e=Lr(i.firestore,Ti),t=ns(e),o=new Bo(e);return K_(i._query),Fm(t,i._query).then(u=>new Wu(e,o,i,u))}(this._delegate),t.then(o=>new Nf(this.firestore,new Wu(this.firestore._delegate,this._userDataWriter,this._delegate,o._snapshot)))}onSnapshot(...e){const t=Iy(e),o=Dy(e,u=>new Nf(this.firestore,new Wu(this.firestore._delegate,this._userDataWriter,this._delegate,u._snapshot)));return mg(this._delegate,t,o)}withConverter(e){return new da(this.firestore,this._delegate.withConverter(e?rc.getInstance(this.firestore,e):null))}}class Cy{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Kd(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class Nf{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new da(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Kd(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new Cy(this._firestore,t))}forEach(e,t){this._delegate.forEach(o=>{e.call(t,new Kd(this._firestore,o))})}isEqual(e){return fg(this._delegate,e._delegate)}}class ic extends da{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Ka(this.firestore,e):null}doc(e){try{return new Ka(this.firestore,void 0===e?hl(this._delegate):hl(this._delegate,e))}catch(t){throw ca(t,"doc()","CollectionReference.doc()")}}add(e){return function sv(i,e){const t=Lr(i.firestore,Ti),o=hl(i),u=Ua(i.converter,e);return nc(t,[_f(zu(i.firestore),"addDoc",o._key,u,null!==i.converter,{}).toMutation(o._key,zi.exists(!1))]).then(()=>o)}(this._delegate,e).then(t=>new Ka(this.firestore,t))}isEqual(e){return Vo(this._delegate,e._delegate)}withConverter(e){return new ic(this.firestore,this._delegate.withConverter(e?rc.getInstance(this.firestore,e):null))}}function yl(i){return Lr(i,ts)}class Pf{constructor(...e){this._delegate=new bu(...e)}static documentId(){return new Pf(nn.keyField().canonicalString())}isEqual(e){return(e=(0,Je.m9)(e))instanceof bu&&this._delegate._internalPath.isEqual(e._internalPath)}}class _l{constructor(e){this._delegate=e}static serverTimestamp(){const e=function py(){return new wf("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new _l(e)}static delete(){const e=function fy(){return new Jl("deleteField")}();return e._methodName="FieldValue.delete",new _l(e)}static arrayUnion(...e){const t=function yg(...i){return new Ym("arrayUnion",i)}(...e);return t._methodName="FieldValue.arrayUnion",new _l(t)}static arrayRemove(...e){const t=function Mf(...i){return new lg("arrayRemove",i)}(...e);return t._methodName="FieldValue.arrayRemove",new _l(t)}static increment(e){const t=function gy(i){return new Qm("increment",i)}(e);return t._methodName="FieldValue.increment",new _l(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const by={Firestore:vy,GeoPoint:gf,Timestamp:Nt,Blob:qd,Transaction:wy,WriteBatch:Ey,DocumentReference:Ka,DocumentSnapshot:Zd,Query:da,QueryDocumentSnapshot:Kd,QuerySnapshot:Nf,CollectionReference:ic,FieldPath:Pf,FieldValue:_l,setLogLevel:function hv(i){!function qo(i){ks.setLogLevel(i)}(i)},CACHE_SIZE_UNLIMITED:-1};!function Sy(i){(function Ty(i,e){i.INTERNAL.registerComponent(new et.wA("firestore-compat",t=>{const o=t.getProvider("app-compat").getImmediate(),u=t.getProvider("firestore").getImmediate();return e(o,u)},"PUBLIC").setServiceProps(Object.assign({},by)))})(i,(e,t)=>new vy(e,t,new dv)),i.registerVersion("@firebase/firestore-compat","0.1.24")}(xt.Z);var qu=j(1205),Ay=j(440),sc=j(127);function xy(i,e){return function fv(i,e=T.z){return new G.y(t=>{let o;return null!=e?e.schedule(()=>{o=i.onSnapshot({includeMetadataChanges:!0},t)}):o=i.onSnapshot({includeMetadataChanges:!0},t),()=>{o?.()}})}(i,e)}function My(i,e){return xy(i,e).pipe((0,ue.U)(t=>({payload:t,type:"query"})))}function $c(i,e){return My(i,e).pipe((0,Me.O)(void 0),fe(),(0,ue.U)(([t,o])=>{const u=o.payload.docChanges(),d=u.map(g=>({type:g.type,payload:g}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(o.payload.metadata)&&o.payload.docs.forEach((g,C)=>{const V=u.find(J=>J.doc.ref.isEqual(g.ref)),H=t?.payload.docs.find(J=>J.ref.isEqual(g.ref));V&&JSON.stringify(V.doc.metadata)===JSON.stringify(g.metadata)||!V&&H&&JSON.stringify(H.metadata)===JSON.stringify(g.metadata)||d.push({type:"modified",payload:{oldIndex:C,newIndex:C,type:"modified",doc:g}})}),d}))}function pv(i,e,t){return $c(i,t).pipe((0,Ee.R)((o,u)=>function Ry(i,e,t){return e.forEach(o=>{t.indexOf(o.type)>-1&&(i=function g0(i,e){switch(e.type){case"added":if(!i[e.newIndex]||!i[e.newIndex].doc.ref.isEqual(e.doc.ref))return kf(i,e.newIndex,0,e);break;case"modified":if(null==i[e.oldIndex]||i[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=i.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return kf(i,e.newIndex,1,e)}break;case"removed":if(i[e.oldIndex]&&i[e.oldIndex].doc.ref.isEqual(e.doc.ref))return kf(i,e.oldIndex,1)}return i}(i,o))}),i}(o,u.map(d=>d.payload),e),[]),function rt(i,e=mt.y){return i=i??Ge,(0,Re.e)((t,o)=>{let u,d=!0;t.subscribe((0,Fe.x)(o,g=>{const C=e(g);(d||!i(u,C))&&(d=!1,u=C,o.next(g))}))})}(),(0,ue.U)(o=>o.map(u=>({type:u.type,payload:u}))))}function kf(i,e,t,...o){const u=i.slice();return u.splice(e,t,...o),u}function Rn(i){return(!i||0===i.length)&&(i=["added","removed","modified"]),i}class Oy{constructor(e,t,o){this.ref=e,this.query=t,this.afs=o}stateChanges(e){let t=$c(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,ue.U)(o=>o.filter(u=>e.indexOf(u.type)>-1)))),t.pipe((0,Me.O)(void 0),fe(),(0,kt.h)(([o,u])=>u.length>0||!o),(0,ue.U)(([o,u])=>u),xe.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,Ee.R)((t,o)=>[...t,...o],[]))}snapshotChanges(e){const t=Rn(e);return pv(this.query,t,this.afs.schedulers.outsideAngular).pipe(xe.iC)}valueChanges(e={}){return My(this.query,this.afs.schedulers.outsideAngular).pipe((0,ue.U)(t=>t.payload.docs.map(o=>e.idField?Object.assign(Object.assign({},o.data()),{[e.idField]:o.id}):o.data())),xe.iC)}get(e){return(0,De.D)(this.query.get(e)).pipe(xe.iC)}add(e){return this.ref.add(e)}doc(e){return new Ny(this.ref.doc(e),this.afs)}}class Ny{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const o=this.ref.collection(e),{ref:u,query:d}=Ss(o,t);return new Oy(u,d,this.afs)}snapshotChanges(){return function jc(i,e){return xy(i,e).pipe((0,Me.O)(void 0),fe(),(0,ue.U)(([t,o])=>o.exists?t?.exists?{payload:o,type:"modified"}:{payload:o,type:"added"}:{payload:o,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(xe.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,ue.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,De.D)(this.ref.get(e)).pipe(xe.iC)}}class gv{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?$c(this.query,this.afs.schedulers.outsideAngular).pipe((0,ue.U)(t=>t.filter(o=>e.indexOf(o.type)>-1)),(0,kt.h)(t=>t.length>0),xe.iC):$c(this.query,this.afs.schedulers.outsideAngular).pipe(xe.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,Ee.R)((t,o)=>[...t,...o],[]))}snapshotChanges(e){const t=Rn(e);return pv(this.query,t,this.afs.schedulers.outsideAngular).pipe(xe.iC)}valueChanges(e={}){return My(this.query,this.afs.schedulers.outsideAngular).pipe((0,ue.U)(o=>o.payload.docs.map(u=>e.idField?Object.assign({[e.idField]:u.id},u.data()):u.data())),xe.iC)}get(e){return(0,De.D)(this.query.get(e)).pipe(xe.iC)}}const oc=new p.OlP("angularfire2.enableFirestorePersistence"),Py=new p.OlP("angularfire2.firestore.persistenceSettings"),Ff=new p.OlP("angularfire2.firestore.settings"),Lf=new p.OlP("angularfire2.firestore.use-emulator");function Ss(i,e=(t=>t)){return{query:e(i),ref:i}}let mv=(()=>{class i{constructor(t,o,u,d,g,C,V,H,J,me,Ue,st,ht,Wt,cn,Hr,ti){this.schedulers=V;const Vr=(0,Ze.on)(t,C,o),As=J;me&&(0,qu.nw)(Vr,C,Ue,ht,Wt,cn,st,Hr),[this.firestore,this.persistenceEnabled$]=(0,Ze.cc)(`${Vr.name}.firestore`,"AngularFirestore",Vr.name,()=>{const ni=C.runOutsideAngular(()=>Vr.firestore());if(d&&ni.settings(d),As&&ni.useEmulator(...As),u&&!(0,ze.PM)(g)){const _i=()=>{try{return(0,De.D)(ni.enablePersistence(H||void 0).then(()=>!0,()=>!1))}catch(no){return typeof console<"u"&&console.warn(no),(0,we.of)(!1)}};return[ni,C.runOutsideAngular(_i)]}return[ni,(0,we.of)(!1)]},[d,As,u])}collection(t,o){let u;u="string"==typeof t?this.firestore.collection(t):t;const{ref:d,query:g}=Ss(u,o),C=this.schedulers.ngZone.run(()=>d);return new Oy(C,g,this)}collectionGroup(t,o){const u=o||(g=>g),d=this.firestore.collectionGroup(t);return new gv(u(d),this)}doc(t){let o;o="string"==typeof t?this.firestore.doc(t):t;const u=this.schedulers.ngZone.run(()=>o);return new Ny(u,this)}createId(){return this.firestore.collection("_").doc().id}}return i.\u0275fac=function(t){return new(t||i)(p.LFG(Ze.Dh),p.LFG(Ze.xv,8),p.LFG(oc,8),p.LFG(Ff,8),p.LFG(p.Lbi),p.LFG(p.R0b),p.LFG(xe.HU),p.LFG(Py,8),p.LFG(Lf,8),p.LFG(qu.zQ,8),p.LFG(qu.Qv,8),p.LFG(qu.L6,8),p.LFG(qu._Q,8),p.LFG(qu.rT,8),p.LFG(qu.lh,8),p.LFG(qu.f7,8),p.LFG(Ay.nm,8))},i.\u0275prov=p.Yz7({token:i,factory:i.\u0275fac,providedIn:"any"}),i})(),ky=(()=>{class i{constructor(){sc.Z.registerVersion("angularfire",xe.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:i,providers:[{provide:oc,useValue:!0},{provide:Py,useValue:t}]}}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=p.oAB({type:i}),i.\u0275inj=p.cJS({providers:[mv]}),i})()},2011:(jt,$e,j)=>{j.d($e,{Dh:()=>Re,GT:()=>xe,cc:()=>rt,hO:()=>mt,on:()=>fe,pX:()=>we,xv:()=>Fe});var p=j(4650),T=j(127),G=j(5813);jt=j.hmd(jt);const De=["ngOnDestroy"],we=(ze,Pt,xt,he={})=>new Proxy(ze,{get:(tt,et)=>xt.runOutsideAngular(()=>{var yt;if(ze[et])return!(null===(yt=he?.spy)||void 0===yt)&&yt.get&&he.spy.get(et,ze[et]),ze[et];if(De.indexOf(et)>-1)return()=>{};const Je=Pt.toPromise().then(oe=>{const He=oe&&oe[et];return"function"==typeof He?He.bind(oe):He&&He.then?He.then(ne=>xt.run(()=>ne)):xt.run(()=>He)});return new Proxy(()=>{},{get:(oe,He)=>Je[He],apply:(oe,He,ne)=>Je.then(ye=>{var ce;const Oe=ye&&ye(...ne);return!(null===(ce=he?.spy)||void 0===ce)&&ce.apply&&he.spy.apply(et,ne,Oe),Oe})})})}),xe=(ze,Pt)=>{Pt.forEach(xt=>{Object.getOwnPropertyNames(xt.prototype||xt).forEach(he=>{Object.defineProperty(ze.prototype,he,Object.getOwnPropertyDescriptor(xt.prototype||xt,he))})})};class Me{constructor(Pt){return Pt}}const Re=new p.OlP("angularfire2.app.options"),Fe=new p.OlP("angularfire2.app.name");function fe(ze,Pt,xt){const tt="object"==typeof xt&&xt||{};tt.name=tt.name||"string"==typeof xt&&xt||"[DEFAULT]";const yt=T.Z.apps.filter(Je=>Je&&Je.name===tt.name)[0]||Pt.runOutsideAngular(()=>T.Z.initializeApp(ze,tt));try{JSON.stringify(ze)!==JSON.stringify(yt.options)&&ue("error",`${yt.name} Firebase App already initialized with different options${jt.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new Me(yt)}const ue=(ze,...Pt)=>{(0,p.X6Q)()&&typeof console<"u"&&console[ze](...Pt)},Ee={provide:Me,useFactory:fe,deps:[Re,p.R0b,[new p.FiY,Fe]]};let mt=(()=>{class ze{constructor(xt){T.Z.registerVersion("angularfire",G.q4.full,"core"),T.Z.registerVersion("angularfire",G.q4.full,"app-compat"),T.Z.registerVersion("angular",p.q4F.full,xt.toString())}static initializeApp(xt,he){return{ngModule:ze,providers:[{provide:Re,useValue:xt},{provide:Fe,useValue:he}]}}}return ze.\u0275fac=function(xt){return new(xt||ze)(p.LFG(p.Lbi))},ze.\u0275mod=p.oAB({type:ze}),ze.\u0275inj=p.cJS({providers:[Ee]}),ze})();function rt(ze,Pt,xt,he,tt){const[,et,yt]=globalThis.\u0275AngularfireInstanceCache.find(Je=>Je[0]===ze)||[];if(et)return function Ge(ze,Pt){try{return ze.toString()===Pt.toString()}catch{return ze===Pt}}(tt,yt)||(Ze("error",`${Pt} was already initialized on the ${xt} Firebase App with different settings.${kt?" You may need to reload as Firebase is not HMR aware.":""}`),Ze("warn",{is:tt,was:yt})),et;{const Je=he();return globalThis.\u0275AngularfireInstanceCache.push([ze,Je,tt]),Je}}const kt=!!jt.hot,Ze=(ze,...Pt)=>{(0,p.X6Q)()&&typeof console<"u"&&console[ze](...Pt)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5813:(jt,$e,j)=>{j.d($e,{q4:()=>Ds,iC:()=>mo,fc:()=>mi,HU:()=>go,vb:()=>en,JM:()=>At});var p=j(4650),T=j(5867),G=j(5861),De=j(9681),we=j(2090),xe=j(4859),Me=j(1877),Re=j(8766);const Fe="@firebase/installations",fe="0.5.12",Ee=`w:${fe}`,mt="FIS_v2",Pt=new we.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function xt(O){return O instanceof we.ZR&&O.code.includes("request-failed")}function he({projectId:O}){return`https://firebaseinstallations.googleapis.com/v1/projects/${O}/installations`}function tt(O){return{token:O.token,requestStatus:2,expiresIn:ye(O.expiresIn),creationTime:Date.now()}}function et(O,F){return yt.apply(this,arguments)}function yt(){return(yt=(0,G.Z)(function*(O,F){const se=(yield F.json()).error;return Pt.create("request-failed",{requestName:O,serverCode:se.code,serverMessage:se.message,serverStatus:se.status})})).apply(this,arguments)}function Je({apiKey:O}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":O})}function oe(O,{refreshToken:F}){const W=Je(O);return W.append("Authorization",function ce(O){return`${mt} ${O}`}(F)),W}function He(O){return ne.apply(this,arguments)}function ne(){return(ne=(0,G.Z)(function*(O){const F=yield O();return F.status>=500&&F.status<600?O():F})).apply(this,arguments)}function ye(O){return Number(O.replace("s","000"))}function Oe(O,F){return lt.apply(this,arguments)}function lt(){return(lt=(0,G.Z)(function*({appConfig:O,heartbeatServiceProvider:F},{fid:W}){const se=he(O),Ne=Je(O),qe=F.getImmediate({optional:!0});if(qe){const vn=yield qe.getHeartbeatsHeader();vn&&Ne.append("x-firebase-client",vn)}const Mt={method:"POST",headers:Ne,body:JSON.stringify({fid:W,authVersion:mt,appId:O.appId,sdkVersion:Ee})},gn=yield He(()=>fetch(se,Mt));if(gn.ok){const vn=yield gn.json();return{fid:vn.fid||W,registrationStatus:2,refreshToken:vn.refreshToken,authToken:tt(vn.authToken)}}throw yield et("Create Installation",gn)})).apply(this,arguments)}function _t(O){return new Promise(F=>{setTimeout(F,O)})}const Ot=/^[cdef][\w-]{21}$/;function ct(){try{const O=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(O),O[0]=112+O[0]%16;const W=function tn(O){return function Et(O){return btoa(String.fromCharCode(...O)).replace(/\+/g,"-").replace(/\//g,"_")}(O).substr(0,22)}(O);return Ot.test(W)?W:""}catch{return""}}function qt(O){return`${O.appName}!${O.appId}`}const rn=new Map;function Ft(O,F){const W=qt(O);Fn(W,F),function Oi(O,F){const W=function Ar(){return!Nr&&"BroadcastChannel"in self&&(Nr=new BroadcastChannel("[Firebase] FID Change"),Nr.onmessage=O=>{Fn(O.data.key,O.data.fid)}),Nr}();W&&W.postMessage({key:O,fid:F}),function Tr(){0===rn.size&&Nr&&(Nr.close(),Nr=null)}()}(W,F)}function Fn(O,F){const W=rn.get(O);if(W)for(const se of W)se(F)}let Nr=null;const nr="firebase-installations-store";let Ln=null;function mr(){return Ln||(Ln=(0,Re.X3)("firebase-installations-database",1,{upgrade:(O,F)=>{0===F&&O.createObjectStore(nr)}})),Ln}function dt(O,F){return zn.apply(this,arguments)}function zn(){return(zn=(0,G.Z)(function*(O,F){const W=qt(O),Ne=(yield mr()).transaction(nr,"readwrite"),qe=Ne.objectStore(nr),vt=yield qe.get(W);return yield qe.put(F,W),yield Ne.done,(!vt||vt.fid!==F.fid)&&Ft(O,F.fid),F})).apply(this,arguments)}function wn(O){return rr.apply(this,arguments)}function rr(){return(rr=(0,G.Z)(function*(O){const F=qt(O),se=(yield mr()).transaction(nr,"readwrite");yield se.objectStore(nr).delete(F),yield se.done})).apply(this,arguments)}function vi(O,F){return Si.apply(this,arguments)}function Si(){return(Si=(0,G.Z)(function*(O,F){const W=qt(O),Ne=(yield mr()).transaction(nr,"readwrite"),qe=Ne.objectStore(nr),vt=yield qe.get(W),Mt=F(vt);return void 0===Mt?yield qe.delete(W):yield qe.put(Mt,W),yield Ne.done,Mt&&(!vt||vt.fid!==Mt.fid)&&Ft(O,Mt.fid),Mt})).apply(this,arguments)}function Pr(O){return An.apply(this,arguments)}function An(){return(An=(0,G.Z)(function*(O){let F;const W=yield vi(O.appConfig,se=>{const Ne=Vn(se),qe=Ht(O,Ne);return F=qe.registrationPromise,qe.installationEntry});return""===W.fid?{installationEntry:yield F}:{installationEntry:W,registrationPromise:F}})).apply(this,arguments)}function Vn(O){return un(O||{fid:ct(),registrationStatus:0})}function Ht(O,F){if(0===F.registrationStatus){if(!navigator.onLine)return{installationEntry:F,registrationPromise:Promise.reject(Pt.create("app-offline"))};const W={fid:F.fid,registrationStatus:1,registrationTime:Date.now()},se=function $t(O,F){return ir.apply(this,arguments)}(O,W);return{installationEntry:W,registrationPromise:se}}return 1===F.registrationStatus?{installationEntry:F,registrationPromise:Jn(O)}:{installationEntry:F}}function ir(){return(ir=(0,G.Z)(function*(O,F){try{const W=yield Oe(O,F);return dt(O.appConfig,W)}catch(W){throw xt(W)&&409===W.customData.serverCode?yield wn(O.appConfig):yield dt(O.appConfig,{fid:F.fid,registrationStatus:0}),W}})).apply(this,arguments)}function Jn(O){return ar.apply(this,arguments)}function ar(){return(ar=(0,G.Z)(function*(O){let F=yield ri(O.appConfig);for(;1===F.registrationStatus;)yield _t(100),F=yield ri(O.appConfig);if(0===F.registrationStatus){const{installationEntry:W,registrationPromise:se}=yield Pr(O);return se||W}return F})).apply(this,arguments)}function ri(O){return vi(O,F=>{if(!F)throw Pt.create("installation-not-found");return un(F)})}function un(O){return function wi(O){return 1===O.registrationStatus&&O.registrationTime+1e4<Date.now()}(O)?{fid:O.fid,registrationStatus:0}:O}function Nn(O,F){return Ei.apply(this,arguments)}function Ei(){return(Ei=(0,G.Z)(function*({appConfig:O,heartbeatServiceProvider:F},W){const se=Pn(O,W),Ne=oe(O,W),qe=F.getImmediate({optional:!0});if(qe){const vn=yield qe.getHeartbeatsHeader();vn&&Ne.append("x-firebase-client",vn)}const Mt={method:"POST",headers:Ne,body:JSON.stringify({installation:{sdkVersion:Ee,appId:O.appId}})},gn=yield He(()=>fetch(se,Mt));if(gn.ok)return tt(yield gn.json());throw yield et("Generate Auth Token",gn)})).apply(this,arguments)}function Pn(O,{fid:F}){return`${he(O)}/${F}/authTokens:generate`}function Ie(O){return ie.apply(this,arguments)}function ie(){return(ie=(0,G.Z)(function*(O,F=!1){let W;const se=yield vi(O.appConfig,qe=>{if(!Vt(qe))throw Pt.create("not-registered");const vt=qe.authToken;if(!F&&sr(vt))return qe;if(1===vt.requestStatus)return W=le(O,F),qe;{if(!navigator.onLine)throw Pt.create("app-offline");const Mt=fr(qe);return W=at(O,Mt),Mt}});return W?yield W:se.authToken})).apply(this,arguments)}function le(O,F){return ve.apply(this,arguments)}function ve(){return(ve=(0,G.Z)(function*(O,F){let W=yield _e(O.appConfig);for(;1===W.authToken.requestStatus;)yield _t(100),W=yield _e(O.appConfig);const se=W.authToken;return 0===se.requestStatus?Ie(O,F):se})).apply(this,arguments)}function _e(O){return vi(O,F=>{if(!Vt(F))throw Pt.create("not-registered");return function Dn(O){return 1===O.requestStatus&&O.requestTime+1e4<Date.now()}(F.authToken)?Object.assign(Object.assign({},F),{authToken:{requestStatus:0}}):F})}function at(O,F){return gt.apply(this,arguments)}function gt(){return(gt=(0,G.Z)(function*(O,F){try{const W=yield Nn(O,F),se=Object.assign(Object.assign({},F),{authToken:W});return yield dt(O.appConfig,se),W}catch(W){if(!xt(W)||401!==W.customData.serverCode&&404!==W.customData.serverCode){const se=Object.assign(Object.assign({},F),{authToken:{requestStatus:0}});yield dt(O.appConfig,se)}else yield wn(O.appConfig);throw W}})).apply(this,arguments)}function Vt(O){return void 0!==O&&2===O.registrationStatus}function sr(O){return 2===O.requestStatus&&!function In(O){const F=Date.now();return F<O.creationTime||O.creationTime+O.expiresIn<F+36e5}(O)}function fr(O){const F={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},O),{authToken:F})}function Xn(){return(Xn=(0,G.Z)(function*(O){const F=O,{installationEntry:W,registrationPromise:se}=yield Pr(F);return se?se.catch(console.error):Ie(F).catch(console.error),W.fid})).apply(this,arguments)}function Jr(){return(Jr=(0,G.Z)(function*(O,F=!1){const W=O;return yield Ur(W),(yield Ie(W,F)).token})).apply(this,arguments)}function Ur(O){return Er.apply(this,arguments)}function Er(){return(Er=(0,G.Z)(function*(O){const{registrationPromise:F}=yield Pr(O);F&&(yield F)})).apply(this,arguments)}function ur(O){return Pt.create("missing-app-config-values",{valueName:O})}const ii="installations",Cn=O=>{const F=O.getProvider("app").getImmediate(),W=function En(O){if(!O||!O.options)throw ur("App Configuration");if(!O.name)throw ur("App Name");const F=["projectId","apiKey","appId"];for(const W of F)if(!O.options[W])throw ur(W);return{appName:O.name,projectId:O.options.projectId,apiKey:O.options.apiKey,appId:O.options.appId}}(F);return{app:F,appConfig:W,heartbeatServiceProvider:(0,De._getProvider)(F,"heartbeat"),_delete:()=>Promise.resolve()}},Wn=O=>{const F=O.getProvider("app").getImmediate(),W=(0,De._getProvider)(F,ii).getImmediate();return{getId:()=>function dn(O){return Xn.apply(this,arguments)}(W),getToken:Ne=>function vr(O){return Jr.apply(this,arguments)}(W,Ne)}};(function rs(){(0,De._registerComponent)(new xe.wA(ii,Cn,"PUBLIC")),(0,De._registerComponent)(new xe.wA("installations-internal",Wn,"PRIVATE"))})(),(0,De.registerVersion)(Fe,fe),(0,De.registerVersion)(Fe,fe,"esm2017");const si="@firebase/remote-config",xr=new we.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class jo{constructor(F,W,se,Ne){this.client=F,this.storage=W,this.storageCache=se,this.logger=Ne}isCachedDataFresh(F,W){if(!W)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const se=Date.now()-W,Ne=se<=F;return this.logger.debug(`Config fetch cache check. Cache age millis: ${se}. Cache max age millis (minimumFetchIntervalMillis setting): ${F}. Is cache hit: ${Ne}.`),Ne}fetch(F){var W=this;return(0,G.Z)(function*(){const[se,Ne]=yield Promise.all([W.storage.getLastSuccessfulFetchTimestampMillis(),W.storage.getLastSuccessfulFetchResponse()]);if(Ne&&W.isCachedDataFresh(F.cacheMaxAgeMillis,se))return Ne;F.eTag=Ne&&Ne.eTag;const qe=yield W.client.fetch(F),vt=[W.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===qe.status&&vt.push(W.storage.setLastSuccessfulFetchResponse(qe)),yield Promise.all(vt),qe})()}}function Ls(O=navigator){return O.languages&&O.languages[0]||O.language}class Rs{constructor(F,W,se,Ne,qe,vt){this.firebaseInstallations=F,this.sdkVersion=W,this.namespace=se,this.projectId=Ne,this.apiKey=qe,this.appId=vt}fetch(F){var W=this;return(0,G.Z)(function*(){var se,Ne,qe;const[vt,Mt]=yield Promise.all([W.firebaseInstallations.getId(),W.firebaseInstallations.getToken()]),vn=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${W.projectId}/namespaces/${W.namespace}:fetch?key=${W.apiKey}`,xn={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":F.eTag||"*"},mn={sdk_version:W.sdkVersion,app_instance_id:vt,app_instance_id_token:Mt,app_id:W.appId,language_code:Ls()},Qr={method:"POST",headers:xn,body:JSON.stringify(mn)},Hs=fetch(vn,Qr),oa=new Promise((Ja,Ia)=>{F.signal.addEventListener(()=>{const uu=new Error("The operation was aborted.");uu.name="AbortError",Ia(uu)})});let $a;try{yield Promise.race([Hs,oa]),$a=yield Hs}catch(Ja){let Ia="fetch-client-network";throw"AbortError"===(null===(se=Ja)||void 0===se?void 0:se.name)&&(Ia="fetch-timeout"),xr.create(Ia,{originalErrorMessage:null===(Ne=Ja)||void 0===Ne?void 0:Ne.message})}let Lo=$a.status;const Ha=$a.headers.get("ETag")||void 0;let Ko,Ga;if(200===$a.status){let Ja;try{Ja=yield $a.json()}catch(Ia){throw xr.create("fetch-client-parse",{originalErrorMessage:null===(qe=Ia)||void 0===qe?void 0:qe.message})}Ko=Ja.entries,Ga=Ja.state}if("INSTANCE_STATE_UNSPECIFIED"===Ga?Lo=500:"NO_CHANGE"===Ga?Lo=304:("NO_TEMPLATE"===Ga||"EMPTY_CONFIG"===Ga)&&(Ko={}),304!==Lo&&200!==Lo)throw xr.create("fetch-status",{httpStatus:Lo});return{status:Lo,eTag:Ha,config:Ko}})()}}class Te{constructor(F,W){this.client=F,this.storage=W}fetch(F){var W=this;return(0,G.Z)(function*(){const se=(yield W.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return W.attemptFetch(F,se)})()}attemptFetch(F,{throttleEndTimeMillis:W,backoffCount:se}){var Ne=this;return(0,G.Z)(function*(){yield function Wr(O,F){return new Promise((W,se)=>{const Ne=Math.max(F-Date.now(),0),qe=setTimeout(W,Ne);O.addEventListener(()=>{clearTimeout(qe),se(xr.create("fetch-throttle",{throttleEndTimeMillis:F}))})})}(F.signal,W);try{const qe=yield Ne.client.fetch(F);return yield Ne.storage.deleteThrottleMetadata(),qe}catch(qe){if(!function Ae(O){if(!(O instanceof we.ZR&&O.customData))return!1;const F=Number(O.customData.httpStatus);return 429===F||500===F||503===F||504===F}(qe))throw qe;const vt={throttleEndTimeMillis:Date.now()+(0,we.$s)(se),backoffCount:se+1};return yield Ne.storage.setThrottleMetadata(vt),Ne.attemptFetch(F,vt)}})()}}class wt{constructor(F,W,se,Ne,qe){this.app=F,this._client=W,this._storageCache=se,this._storage=Ne,this._logger=qe,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Kt(O,F){var W;const se=O.target.error||void 0;return xr.create(F,{originalErrorMessage:se&&(null===(W=se)||void 0===W?void 0:W.message)})}const _n="app_namespace_store";class so{constructor(F,W,se,Ne=function hi(){return new Promise((O,F)=>{var W;try{const se=indexedDB.open("firebase_remote_config",1);se.onerror=Ne=>{F(Kt(Ne,"storage-open"))},se.onsuccess=Ne=>{O(Ne.target.result)},se.onupgradeneeded=Ne=>{0===Ne.oldVersion&&Ne.target.result.createObjectStore(_n,{keyPath:"compositeKey"})}}catch(se){F(xr.create("storage-open",{originalErrorMessage:null===(W=se)||void 0===W?void 0:W.message}))}})}()){this.appId=F,this.appName=W,this.namespace=se,this.openDbPromise=Ne}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(F){return this.set("last_fetch_status",F)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(F){return this.set("last_successful_fetch_timestamp_millis",F)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(F){return this.set("last_successful_fetch_response",F)}getActiveConfig(){return this.get("active_config")}setActiveConfig(F){return this.set("active_config",F)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(F){return this.set("active_config_etag",F)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(F){return this.set("throttle_metadata",F)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(F){var W=this;return(0,G.Z)(function*(){const se=yield W.openDbPromise;return new Promise((Ne,qe)=>{var vt;const gn=se.transaction([_n],"readonly").objectStore(_n),vn=W.createCompositeKey(F);try{const xn=gn.get(vn);xn.onerror=mn=>{qe(Kt(mn,"storage-get"))},xn.onsuccess=mn=>{const Qr=mn.target.result;Ne(Qr?Qr.value:void 0)}}catch(xn){qe(xr.create("storage-get",{originalErrorMessage:null===(vt=xn)||void 0===vt?void 0:vt.message}))}})})()}set(F,W){var se=this;return(0,G.Z)(function*(){const Ne=yield se.openDbPromise;return new Promise((qe,vt)=>{var Mt;const vn=Ne.transaction([_n],"readwrite").objectStore(_n),xn=se.createCompositeKey(F);try{const mn=vn.put({compositeKey:xn,value:W});mn.onerror=Qr=>{vt(Kt(Qr,"storage-set"))},mn.onsuccess=()=>{qe()}}catch(mn){vt(xr.create("storage-set",{originalErrorMessage:null===(Mt=mn)||void 0===Mt?void 0:Mt.message}))}})})()}delete(F){var W=this;return(0,G.Z)(function*(){const se=yield W.openDbPromise;return new Promise((Ne,qe)=>{var vt;const gn=se.transaction([_n],"readwrite").objectStore(_n),vn=W.createCompositeKey(F);try{const xn=gn.delete(vn);xn.onerror=mn=>{qe(Kt(mn,"storage-delete"))},xn.onsuccess=()=>{Ne()}}catch(xn){qe(xr.create("storage-delete",{originalErrorMessage:null===(vt=xn)||void 0===vt?void 0:vt.message}))}})})()}createCompositeKey(F){return[this.appId,this.appName,this.namespace,F].join()}}class Vs{constructor(F){this.storage=F}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var F=this;return(0,G.Z)(function*(){const W=F.storage.getLastFetchStatus(),se=F.storage.getLastSuccessfulFetchTimestampMillis(),Ne=F.storage.getActiveConfig(),qe=yield W;qe&&(F.lastFetchStatus=qe);const vt=yield se;vt&&(F.lastSuccessfulFetchTimestampMillis=vt);const Mt=yield Ne;Mt&&(F.activeConfig=Mt)})()}setLastFetchStatus(F){return this.lastFetchStatus=F,this.storage.setLastFetchStatus(F)}setLastSuccessfulFetchTimestampMillis(F){return this.lastSuccessfulFetchTimestampMillis=F,this.storage.setLastSuccessfulFetchTimestampMillis(F)}setActiveConfig(F){return this.activeConfig=F,this.storage.setActiveConfig(F)}}function fi(){return vo.apply(this,arguments)}function vo(){return(vo=(0,G.Z)(function*(){if(!(0,we.hl)())return!1;try{return yield(0,we.eu)()}catch{return!1}})).apply(this,arguments)}!function ai(){(0,De._registerComponent)(new xe.wA("remote-config",function O(F,{instanceIdentifier:W}){const se=F.getProvider("app").getImmediate(),Ne=F.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw xr.create("registration-window");if(!(0,we.hl)())throw xr.create("indexed-db-unavailable");const{projectId:qe,apiKey:vt,appId:Mt}=se.options;if(!qe)throw xr.create("registration-project-id");if(!vt)throw xr.create("registration-api-key");if(!Mt)throw xr.create("registration-app-id");const gn=new so(Mt,se.name,W=W||"firebase"),vn=new Vs(gn),xn=new Me.Yd(si);xn.logLevel=Me.in.ERROR;const mn=new Rs(Ne,De.SDK_VERSION,W,qe,vt,Mt),Qr=new Te(mn,gn),Hs=new jo(Qr,gn,vn,xn),oa=new wt(se,Hs,vn,gn,xn);return function Mr(O){const F=(0,we.m9)(O);F._initializePromise||(F._initializePromise=F._storageCache.loadFromStorage().then(()=>{F._isInitializationComplete=!0}))}(oa),oa},"PUBLIC").setMultipleInstances(!0)),(0,De.registerVersion)(si,"0.3.11"),(0,De.registerVersion)(si,"0.3.11","esm2017")}();const pi="/firebase-messaging-sw.js",os="/firebase-cloud-messaging-push-scope",Pi="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Ws="google.c.a.c_id",gs="google.c.a.c_l",wo="google.c.a.ts",$o="google.c.a.e";var ms=(()=>{return(O=ms||(ms={})).PUSH_RECEIVED="push-received",O.NOTIFICATION_CLICKED="notification-clicked",ms;var O})();function lr(O){const F=new Uint8Array(O);return btoa(String.fromCharCode(...F)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function xi(O){const W=(O+"=".repeat((4-O.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),se=atob(W),Ne=new Uint8Array(se.length);for(let qe=0;qe<se.length;++qe)Ne[qe]=se.charCodeAt(qe);return Ne}const Ii="fcm_token_details_db",qr="fcm_token_object_Store";function ao(O){return ea.apply(this,arguments)}function ea(){return ea=(0,G.Z)(function*(O){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(qe=>qe.name).includes(Ii))return null;let F=null;return(yield(0,Re.X3)(Ii,5,{upgrade:(se=(0,G.Z)(function*(Ne,qe,vt,Mt){var gn;if(qe<2||!Ne.objectStoreNames.contains(qr))return;const vn=Mt.objectStore(qr),xn=yield vn.index("fcmSenderId").get(O);if(yield vn.clear(),xn)if(2===qe){const mn=xn;if(!mn.auth||!mn.p256dh||!mn.endpoint)return;F={token:mn.fcmToken,createTime:null!==(gn=mn.createTime)&&void 0!==gn?gn:Date.now(),subscriptionOptions:{auth:mn.auth,p256dh:mn.p256dh,endpoint:mn.endpoint,swScope:mn.swScope,vapidKey:"string"==typeof mn.vapidKey?mn.vapidKey:lr(mn.vapidKey)}}}else if(3===qe){const mn=xn;F={token:mn.fcmToken,createTime:mn.createTime,subscriptionOptions:{auth:lr(mn.auth),p256dh:lr(mn.p256dh),endpoint:mn.endpoint,swScope:mn.swScope,vapidKey:lr(mn.vapidKey)}}}else if(4===qe){const mn=xn;F={token:mn.fcmToken,createTime:mn.createTime,subscriptionOptions:{auth:lr(mn.auth),p256dh:lr(mn.p256dh),endpoint:mn.endpoint,swScope:mn.swScope,vapidKey:lr(mn.vapidKey)}}}}),function(qe,vt,Mt,gn){return se.apply(this,arguments)})})).close(),yield(0,Re.Lj)(Ii),yield(0,Re.Lj)("fcm_vapid_details_db"),yield(0,Re.Lj)("undefined"),Fr(F)?F:null;var se}),ea.apply(this,arguments)}function Fr(O){if(!O||!O.subscriptionOptions)return!1;const{subscriptionOptions:F}=O;return"number"==typeof O.createTime&&O.createTime>0&&"string"==typeof O.token&&O.token.length>0&&"string"==typeof F.auth&&F.auth.length>0&&"string"==typeof F.p256dh&&F.p256dh.length>0&&"string"==typeof F.endpoint&&F.endpoint.length>0&&"string"==typeof F.swScope&&F.swScope.length>0&&"string"==typeof F.vapidKey&&F.vapidKey.length>0}const yr="firebase-messaging-store";let jr=null;function Ki(){return jr||(jr=(0,Re.X3)("firebase-messaging-database",1,{upgrade:(O,F)=>{0===F&&O.createObjectStore(yr)}})),jr}function Bi(O){return ui.apply(this,arguments)}function ui(){return(ui=(0,G.Z)(function*(O){const F=kn(O),se=yield(yield Ki()).transaction(yr).objectStore(yr).get(F);if(se)return se;{const Ne=yield ao(O.appConfig.senderId);if(Ne)return yield Hn(O,Ne),Ne}})).apply(this,arguments)}function Hn(O,F){return Sr.apply(this,arguments)}function Sr(){return(Sr=(0,G.Z)(function*(O,F){const W=kn(O),Ne=(yield Ki()).transaction(yr,"readwrite");return yield Ne.objectStore(yr).put(F,W),yield Ne.done,F})).apply(this,arguments)}function ji(O){return Go.apply(this,arguments)}function Go(){return(Go=(0,G.Z)(function*(O){const F=kn(O),se=(yield Ki()).transaction(yr,"readwrite");yield se.objectStore(yr).delete(F),yield se.done})).apply(this,arguments)}function kn({appConfig:O}){return O.appId}const Zr=new we.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function pn(O,F){return Zs.apply(this,arguments)}function Zs(){return(Zs=(0,G.Z)(function*(O,F){var W;const se=yield ki(O),Ne=ut(F),qe={method:"POST",headers:se,body:JSON.stringify(Ne)};let vt;try{vt=yield(yield fetch(ys(O.appConfig),qe)).json()}catch(Mt){throw Zr.create("token-subscribe-failed",{errorInfo:null===(W=Mt)||void 0===W?void 0:W.toString()})}if(vt.error)throw Zr.create("token-subscribe-failed",{errorInfo:vt.error.message});if(!vt.token)throw Zr.create("token-subscribe-no-token");return vt.token})).apply(this,arguments)}function Ks(O,F){return xo.apply(this,arguments)}function xo(){return(xo=(0,G.Z)(function*(O,F){var W;const se=yield ki(O),Ne=ut(F.subscriptionOptions),qe={method:"PATCH",headers:se,body:JSON.stringify(Ne)};let vt;try{vt=yield(yield fetch(`${ys(O.appConfig)}/${F.token}`,qe)).json()}catch(Mt){throw Zr.create("token-update-failed",{errorInfo:null===(W=Mt)||void 0===W?void 0:W.toString()})}if(vt.error)throw Zr.create("token-update-failed",{errorInfo:vt.error.message});if(!vt.token)throw Zr.create("token-update-no-token");return vt.token})).apply(this,arguments)}function Us(O,F){return $i.apply(this,arguments)}function $i(){return($i=(0,G.Z)(function*(O,F){var W;const Ne={method:"DELETE",headers:yield ki(O)};try{const vt=yield(yield fetch(`${ys(O.appConfig)}/${F}`,Ne)).json();if(vt.error)throw Zr.create("token-unsubscribe-failed",{errorInfo:vt.error.message})}catch(qe){throw Zr.create("token-unsubscribe-failed",{errorInfo:null===(W=qe)||void 0===W?void 0:W.toString()})}})).apply(this,arguments)}function ys({projectId:O}){return`https://fcmregistrations.googleapis.com/v1/projects/${O}/registrations`}function ki(O){return Yi.apply(this,arguments)}function Yi(){return(Yi=(0,G.Z)(function*({appConfig:O,installations:F}){const W=yield F.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":O.apiKey,"x-goog-firebase-installations-auth":`FIS ${W}`})})).apply(this,arguments)}function ut({p256dh:O,auth:F,endpoint:W,vapidKey:se}){const Ne={web:{endpoint:W,auth:F,p256dh:O}};return se!==Pi&&(Ne.web.applicationPubKey=se),Ne}const Tn=6048e5;function Ys(O){return Bs.apply(this,arguments)}function Bs(){return(Bs=(0,G.Z)(function*(O){const F=yield lo(O.swRegistration,O.vapidKey),W={vapidKey:O.vapidKey,swScope:O.swRegistration.scope,endpoint:F.endpoint,auth:lr(F.getKey("auth")),p256dh:lr(F.getKey("p256dh"))},se=yield Bi(O.firebaseDependencies);if(se){if(L(se.subscriptionOptions,W))return Date.now()>=se.createTime+Tn?js(O,{token:se.token,createTime:Date.now(),subscriptionOptions:W}):se.token;try{yield Us(O.firebaseDependencies,se.token)}catch(Ne){console.warn(Ne)}return Mo(O.firebaseDependencies,W)}return Mo(O.firebaseDependencies,W)})).apply(this,arguments)}function Dr(O){return Hi.apply(this,arguments)}function Hi(){return(Hi=(0,G.Z)(function*(O){const F=yield Bi(O.firebaseDependencies);F&&(yield Us(O.firebaseDependencies,F.token),yield ji(O.firebaseDependencies));const W=yield O.swRegistration.pushManager.getSubscription();return!W||W.unsubscribe()})).apply(this,arguments)}function js(O,F){return ls.apply(this,arguments)}function ls(){return(ls=(0,G.Z)(function*(O,F){try{const W=yield Ks(O.firebaseDependencies,F),se=Object.assign(Object.assign({},F),{token:W,createTime:Date.now()});return yield Hn(O.firebaseDependencies,se),W}catch(W){throw yield Dr(O),W}})).apply(this,arguments)}function Mo(O,F){return Qs.apply(this,arguments)}function Qs(){return(Qs=(0,G.Z)(function*(O,F){const se={token:yield pn(O,F),createTime:Date.now(),subscriptionOptions:F};return yield Hn(O,se),se.token})).apply(this,arguments)}function lo(O,F){return ta.apply(this,arguments)}function ta(){return(ta=(0,G.Z)(function*(O,F){return(yield O.pushManager.getSubscription())||O.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:xi(F)})})).apply(this,arguments)}function L(O,F){return F.vapidKey===O.vapidKey&&F.endpoint===O.endpoint&&F.auth===O.auth&&F.p256dh===O.p256dh}function P(O){const F={from:O.from,collapseKey:O.collapse_key,messageId:O.fcmMessageId};return function R(O,F){if(!F.notification)return;O.notification={};const W=F.notification.title;W&&(O.notification.title=W);const se=F.notification.body;se&&(O.notification.body=se);const Ne=F.notification.image;Ne&&(O.notification.image=Ne)}(F,O),function Y(O,F){!F.data||(O.data=F.data)}(F,O),function Ke(O,F){var W,se,Ne,qe,vt;if(!(F.fcmOptions||null!==(W=F.notification)&&void 0!==W&&W.click_action))return;O.fcmOptions={};const Mt=null!==(Ne=null===(se=F.fcmOptions)||void 0===se?void 0:se.link)&&void 0!==Ne?Ne:null===(qe=F.notification)||void 0===qe?void 0:qe.click_action;Mt&&(O.fcmOptions.link=Mt);const gn=null===(vt=F.fcmOptions)||void 0===vt?void 0:vt.analytics_label;gn&&(O.fcmOptions.analyticsLabel=gn)}(F,O),F}function Xt(O){return"object"==typeof O&&!!O&&Ws in O}function cr(O,F){const W=[];for(let se=0;se<O.length;se++)W.push(O.charAt(se)),se<F.length&&W.push(F.charAt(se));return W.join("")}function Di(O){return Zr.create("missing-app-config-values",{valueName:O})}cr("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),cr("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class _r{constructor(F,W,se){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const Ne=function cs(O){if(!O||!O.options)throw Di("App Configuration Object");if(!O.name)throw Di("App Name");const F=["projectId","apiKey","appId","messagingSenderId"],{options:W}=O;for(const se of F)if(!W[se])throw Di(se);return{appName:O.name,projectId:W.projectId,apiKey:W.apiKey,appId:W.appId,senderId:W.messagingSenderId}}(F);this.firebaseDependencies={app:F,appConfig:Ne,installations:W,analyticsProvider:se}}_delete(){return Promise.resolve()}}function _s(O){return Js.apply(this,arguments)}function Js(){return(Js=(0,G.Z)(function*(O){var F;try{O.swRegistration=yield navigator.serviceWorker.register(pi,{scope:os}),O.swRegistration.update().catch(()=>{})}catch(W){throw Zr.create("failed-service-worker-registration",{browserErrorMessage:null===(F=W)||void 0===F?void 0:F.message})}})).apply(this,arguments)}function vs(O,F){return Eo.apply(this,arguments)}function Eo(){return(Eo=(0,G.Z)(function*(O,F){if(!F&&!O.swRegistration&&(yield _s(O)),F||!O.swRegistration){if(!(F instanceof ServiceWorkerRegistration))throw Zr.create("invalid-sw-registration");O.swRegistration=F}})).apply(this,arguments)}function co(O,F){return Ta.apply(this,arguments)}function Ta(){return(Ta=(0,G.Z)(function*(O,F){F?O.vapidKey=F:O.vapidKey||(O.vapidKey=Pi)})).apply(this,arguments)}function na(){return(na=(0,G.Z)(function*(O,F){if(!navigator)throw Zr.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Zr.create("permission-blocked");return yield co(O,F?.vapidKey),yield vs(O,F?.serviceWorkerRegistration),Ys(O)})).apply(this,arguments)}function Sa(O,F,W){return ha.apply(this,arguments)}function ha(){return(ha=(0,G.Z)(function*(O,F,W){const se=Aa(F);(yield O.firebaseDependencies.analyticsProvider.get()).logEvent(se,{message_id:W[Ws],message_name:W[gs],message_time:W[wo],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Aa(O){switch(O){case ms.NOTIFICATION_CLICKED:return"notification_open";case ms.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function $(){return($=(0,G.Z)(function*(O,F){const W=F.data;if(!W.isFirebaseMessaging)return;O.onMessageHandler&&W.messageType===ms.PUSH_RECEIVED&&("function"==typeof O.onMessageHandler?O.onMessageHandler(P(W)):O.onMessageHandler.next(P(W)));const se=W.data;Xt(se)&&"1"===se[$o]&&(yield Sa(O,W.messageType,se))})).apply(this,arguments)}const N="@firebase/messaging",Z="0.9.16",de=O=>{const F=new _r(O.getProvider("app").getImmediate(),O.getProvider("installations-internal").getImmediate(),O.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",W=>function x(O,F){return $.apply(this,arguments)}(F,W)),F},Be=O=>{const F=O.getProvider("messaging").getImmediate();return{getToken:se=>function dr(O,F){return na.apply(this,arguments)}(F,se)}};function Zt(){return Yn.apply(this,arguments)}function Yn(){return(Yn=(0,G.Z)(function*(){try{yield(0,we.eu)()}catch{return!1}return typeof window<"u"&&(0,we.hl)()&&(0,we.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Qe(){(0,De._registerComponent)(new xe.wA("messaging",de,"PUBLIC")),(0,De._registerComponent)(new xe.wA("messaging-internal",Be,"PRIVATE")),(0,De.registerVersion)(N,Z),(0,De.registerVersion)(N,Z,"esm2017")}();const Xs="analytics",ho="firebase_id",Ns="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",zo="https://www.googletagmanager.com/gtag/js",ei=new Me.Yd("@firebase/analytics");function fa(O){return Promise.all(O.map(F=>F.catch(W=>W)))}function xa(O,F){const W=document.createElement("script");W.src=`${zo}?l=${O}&id=${F}`,W.async=!0,document.head.appendChild(W)}function ou(O,F,W,se,Ne,qe){return Ro.apply(this,arguments)}function Ro(){return(Ro=(0,G.Z)(function*(O,F,W,se,Ne,qe){const vt=se[Ne];try{if(vt)yield F[vt];else{const gn=(yield fa(W)).find(vn=>vn.measurementId===Ne);gn&&(yield F[gn.appId])}}catch(Mt){ei.error(Mt)}O("config",Ne,qe)})).apply(this,arguments)}function pa(O,F,W,se,Ne){return Wo.apply(this,arguments)}function Wo(){return(Wo=(0,G.Z)(function*(O,F,W,se,Ne){try{let qe=[];if(Ne&&Ne.send_to){let vt=Ne.send_to;Array.isArray(vt)||(vt=[vt]);const Mt=yield fa(W);for(const gn of vt){const vn=Mt.find(mn=>mn.measurementId===gn),xn=vn&&F[vn.appId];if(!xn){qe=[];break}qe.push(xn)}}0===qe.length&&(qe=Object.values(F)),yield Promise.all(qe),O("event",se,Ne||{})}catch(qe){ei.error(qe)}})).apply(this,arguments)}function ma(){const O=window.document.getElementsByTagName("script");for(const F of Object.values(O))if(F.src&&F.src.includes(zo))return F;return null}const Fi=new we.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),Ra=new class Oo{constructor(F={},W=1e3){this.throttleMetadata=F,this.intervalMillis=W}getThrottleMetadata(F){return this.throttleMetadata[F]}setThrottleMetadata(F,W){this.throttleMetadata[F]=W}deleteThrottleMetadata(F){delete this.throttleMetadata[F]}};function Mu(O){return new Headers({Accept:"application/json","x-goog-api-key":O})}function Oa(O){return Na.apply(this,arguments)}function Na(){return(Na=(0,G.Z)(function*(O){var F;const{appId:W,apiKey:se}=O,Ne={method:"GET",headers:Mu(se)},qe=Ns.replace("{app-id}",W),vt=yield fetch(qe,Ne);if(200!==vt.status&&304!==vt.status){let Mt="";try{const gn=yield vt.json();null!==(F=gn.error)&&void 0!==F&&F.message&&(Mt=gn.error.message)}catch{}throw Fi.create("config-fetch-failed",{httpStatus:vt.status,responseMessage:Mt})}return vt.json()})).apply(this,arguments)}function gi(O){return hs.apply(this,arguments)}function hs(){return(hs=(0,G.Z)(function*(O,F=Ra,W){const{appId:se,apiKey:Ne,measurementId:qe}=O.options;if(!se)throw Fi.create("no-app-id");if(!Ne){if(qe)return{measurementId:qe,appId:se};throw Fi.create("no-api-key")}const vt=F.getThrottleMetadata(se)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Mt=new Do;return setTimeout((0,G.Z)(function*(){Mt.abort()}),void 0!==W?W:6e4),No({appId:se,apiKey:Ne,measurementId:qe},vt,Mt,F)})).apply(this,arguments)}function No(O,F,W){return ra.apply(this,arguments)}function ra(){return(ra=(0,G.Z)(function*(O,{throttleEndTimeMillis:F,backoffCount:W},se,Ne=Ra){var qe,vt;const{appId:Mt,measurementId:gn}=O;try{yield Ps(se,F)}catch(vn){if(gn)return ei.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${gn} provided in the "measurementId" field in the local Firebase config. [${null===(qe=vn)||void 0===qe?void 0:qe.message}]`),{appId:Mt,measurementId:gn};throw vn}try{const vn=yield Oa(O);return Ne.deleteThrottleMetadata(Mt),vn}catch(vn){const xn=vn;if(!Ci(xn)){if(Ne.deleteThrottleMetadata(Mt),gn)return ei.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${gn} provided in the "measurementId" field in the local Firebase config. [${xn?.message}]`),{appId:Mt,measurementId:gn};throw vn}const mn=503===Number(null===(vt=xn?.customData)||void 0===vt?void 0:vt.httpStatus)?(0,we.$s)(W,Ne.intervalMillis,30):(0,we.$s)(W,Ne.intervalMillis),Qr={throttleEndTimeMillis:Date.now()+mn,backoffCount:W+1};return Ne.setThrottleMetadata(Mt,Qr),ei.debug(`Calling attemptFetch again in ${mn} millis`),No(O,Qr,se,Ne)}})).apply(this,arguments)}function Ps(O,F){return new Promise((W,se)=>{const Ne=Math.max(F-Date.now(),0),qe=setTimeout(W,Ne);O.addEventListener(()=>{clearTimeout(qe),se(Fi.create("fetch-throttle",{throttleEndTimeMillis:F}))})})}function Ci(O){if(!(O instanceof we.ZR&&O.customData))return!1;const F=Number(O.customData.httpStatus);return 429===F||500===F||503===F||504===F}class Do{constructor(){this.listeners=[]}addEventListener(F){this.listeners.push(F)}abort(){this.listeners.forEach(F=>F())}}let ks,We;function qo(){return(qo=(0,G.Z)(function*(O,F,W,se,Ne){if(Ne&&Ne.global)O("event",W,se);else{const qe=yield F;O("event",W,Object.assign(Object.assign({},se),{send_to:qe}))}})).apply(this,arguments)}function ft(O){We=O}function Mi(O){ks=O}function Ri(){return Ya.apply(this,arguments)}function Ya(){return(Ya=(0,G.Z)(function*(){var O;if(!(0,we.hl)())return ei.warn(Fi.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,we.eu)()}catch(F){return ei.warn(Fi.create("indexeddb-unavailable",{errorInfo:null===(O=F)||void 0===O?void 0:O.toString()}).message),!1}return!0})).apply(this,arguments)}function wa(){return(wa=(0,G.Z)(function*(O,F,W,se,Ne,qe,vt){var Mt;const gn=gi(O);gn.then(Hs=>{W[Hs.measurementId]=Hs.appId,O.options.measurementId&&Hs.measurementId!==O.options.measurementId&&ei.warn(`The measurement ID in the local Firebase config (${O.options.measurementId}) does not match the measurement ID fetched from the server (${Hs.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(Hs=>ei.error(Hs)),F.push(gn);const vn=Ri().then(Hs=>{if(Hs)return se.getId()}),[xn,mn]=yield Promise.all([gn,vn]);ma()||xa(qe,xn.measurementId),We&&(Ne("consent","default",We),ft(void 0)),Ne("js",new Date);const Qr=null!==(Mt=vt?.config)&&void 0!==Mt?Mt:{};return Qr.origin="firebase",Qr.update=!0,null!=mn&&(Qr[ho]=mn),Ne("config",xn.measurementId,Qr),ks&&(Ne("set",ks),Mi(void 0)),xn.measurementId})).apply(this,arguments)}class Ea{constructor(F){this.app=F}_delete(){return delete b[this.app.options.appId],Promise.resolve()}}let b={},I=[];const M={};let Ce,ke,q="dataLayer",bt=!1;function Tt(O,F,W){!function Nt(){const O=[];if((0,we.ru)()&&O.push("This is a browser extension environment."),(0,we.zI)()||O.push("Cookies are not available."),O.length>0){const F=O.map((se,Ne)=>`(${Ne+1}) ${se}`).join(" "),W=Fi.create("invalid-analytics-context",{errorInfo:F});ei.warn(W.message)}}();const se=O.options.appId;if(!se)throw Fi.create("no-app-id");if(!O.options.apiKey){if(!O.options.measurementId)throw Fi.create("no-api-key");ei.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${O.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=b[se])throw Fi.create("already-exists",{id:se});if(!bt){!function xu(O){let F=[];Array.isArray(window[O])?F=window[O]:window[O]=F}(q);const{wrappedGtag:qe,gtagCore:vt}=function ga(O,F,W,se,Ne){let qe=function(...vt){window[se].push(arguments)};return window[Ne]&&"function"==typeof window[Ne]&&(qe=window[Ne]),window[Ne]=function Ma(O,F,W,se){function qe(){return(qe=(0,G.Z)(function*(vt,Mt,gn){try{"event"===vt?yield pa(O,F,W,Mt,gn):"config"===vt?yield ou(O,F,W,se,Mt,gn):"consent"===vt?O("consent","update",gn):O("set",Mt)}catch(vn){ei.error(vn)}})).apply(this,arguments)}return function Ne(vt,Mt,gn){return qe.apply(this,arguments)}}(qe,O,F,W),{gtagCore:qe,wrappedGtag:window[Ne]}}(b,I,M,q,"gtag");ke=qe,Ce=vt,bt=!0}return b[se]=function ia(O,F,W,se,Ne,qe,vt){return wa.apply(this,arguments)}(O,I,M,F,Ce,q,W),new Ea(O)}function Gn(){return nn.apply(this,arguments)}function nn(){return(nn=(0,G.Z)(function*(){if((0,we.ru)()||!(0,we.zI)()||!(0,we.hl)())return!1;try{return yield(0,we.eu)()}catch{return!1}})).apply(this,arguments)}const Po="@firebase/analytics";!function Ji(){(0,De._registerComponent)(new xe.wA(Xs,(F,{options:W})=>Tt(F.getProvider("app").getImmediate(),F.getProvider("installations-internal").getImmediate(),W),"PUBLIC")),(0,De._registerComponent)(new xe.wA("analytics-internal",function O(F){try{const W=F.getProvider(Xs).getImmediate();return{logEvent:(se,Ne,qe)=>function Yr(O,F,W,se){O=(0,we.m9)(O),function _a(O,F,W,se,Ne){return qo.apply(this,arguments)}(ke,b[O.app.options.appId],F,W,se).catch(Ne=>ei.error(Ne))}(W,se,Ne,qe)}}catch(W){throw Fi.create("interop-component-reg-failed",{reason:W})}},"PRIVATE")),(0,De.registerVersion)(Po,"0.8.0"),(0,De.registerVersion)(Po,"0.8.0","esm2017")}();var $r=j(4408),ka=j(7565);const ko=new class sa extends ka.v{}(class au extends $r.o{constructor(F,W){super(F,W),this.scheduler=F,this.work=W}schedule(F,W=0){return W>0?super.schedule(F,W):(this.delay=W,this.state=F,this.scheduler.flush(this),this)}execute(F,W){return W>0||this.closed?super.execute(F,W):this._execute(F,W)}requestAsyncId(F,W,se=0){return null!=se&&se>0||null==se&&this.delay>0?super.requestAsyncId(F,W,se):F.flush(this)}});var je=j(4986),Fa=j(8505),Is=j(5363),Qa=j(9468);const Ds=new p.GfV("7.4.1"),Fo="__angularfire_symbol__analyticsIsSupportedValue",v="__angularfire_symbol__analyticsIsSupported",w="__angularfire_symbol__remoteConfigIsSupportedValue",_="__angularfire_symbol__remoteConfigIsSupported",S="__angularfire_symbol__messagingIsSupportedValue",k="__angularfire_symbol__messagingIsSupported";function At(O,F,W){if(F){if(1===F.length)return F[0];const qe=F.filter(vt=>vt.app===W);if(1===qe.length)return qe[0]}return W.container.getProvider(O).getImmediate({optional:!0})}globalThis[v]||(globalThis[v]=Gn().then(O=>globalThis[Fo]=O).catch(()=>globalThis[Fo]=!1)),globalThis[k]||(globalThis[k]=Zt().then(O=>globalThis[S]=O).catch(()=>globalThis[S]=!1)),globalThis[_]||(globalThis[_]=fi().then(O=>globalThis[w]=O).catch(()=>globalThis[w]=!1));const en=(O,F)=>{const W=F?[F]:(0,T.C6)(),se=[];return W.forEach(Ne=>{Ne.container.getProvider(O).instances.forEach(vt=>{se.includes(vt)||se.push(vt)})}),se};function zt(){}class yn{constructor(F,W=ko){this.zone=F,this.delegate=W}now(){return this.delegate.now()}schedule(F,W,se){const Ne=this.zone;return this.delegate.schedule(function(vt){Ne.runGuarded(()=>{F.apply(this,[vt])})},W,se)}}class Bn{constructor(F){this.zone=F,this.task=null}call(F,W){const se=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",zt,{},zt,zt)),W.pipe((0,Fa.b)({next:se,complete:se,error:se})).subscribe(F).add(se)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let go=(()=>{class O{constructor(W){this.ngZone=W,this.outsideAngular=W.runOutsideAngular(()=>new yn(Zone.current)),this.insideAngular=W.run(()=>new yn(Zone.current,je.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return O.\u0275fac=function(W){return new(W||O)(p.LFG(p.R0b))},O.\u0275prov=p.Yz7({token:O,factory:O.\u0275fac,providedIn:"root"}),O})();function Gi(){const O=globalThis.\u0275AngularFireScheduler;if(!O)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return O}function mi(O){return O.pipe((0,Is.Q)(Gi().outsideAngular))}function mo(O){return Gi(),function Li(O){return function(W){return(W=W.lift(new Bn(O.ngZone))).pipe((0,Qa.R)(O.outsideAngular),(0,Is.Q)(O.insideAngular))}}(Gi())(O)}},2090:(jt,$e,j)=>{j.d($e,{$s:()=>wi,BH:()=>mt,G6:()=>Je,L:()=>Re,LL:()=>lt,Mn:()=>et,Sg:()=>rt,UG:()=>Ze,US:()=>xe,ZB:()=>ue,ZR:()=>Oe,b$:()=>xt,d:()=>he,eu:()=>He,hl:()=>oe,jU:()=>ze,m9:()=>Pn,ne:()=>mr,pd:()=>nr,r3:()=>Sn,ru:()=>Pt,tV:()=>Fe,uI:()=>kt,vZ:()=>Nr,w1:()=>tt,xO:()=>zr,xb:()=>Fn,z$:()=>Ge,zI:()=>ne,zd:()=>Jt});const De=function(Ie){const ie=[];let le=0;for(let ve=0;ve<Ie.length;ve++){let _e=Ie.charCodeAt(ve);_e<128?ie[le++]=_e:_e<2048?(ie[le++]=_e>>6|192,ie[le++]=63&_e|128):55296==(64512&_e)&&ve+1<Ie.length&&56320==(64512&Ie.charCodeAt(ve+1))?(_e=65536+((1023&_e)<<10)+(1023&Ie.charCodeAt(++ve)),ie[le++]=_e>>18|240,ie[le++]=_e>>12&63|128,ie[le++]=_e>>6&63|128,ie[le++]=63&_e|128):(ie[le++]=_e>>12|224,ie[le++]=_e>>6&63|128,ie[le++]=63&_e|128)}return ie},xe={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(Ie,ie){if(!Array.isArray(Ie))throw Error("encodeByteArray takes an array as a parameter");this.init_();const le=ie?this.byteToCharMapWebSafe_:this.byteToCharMap_,ve=[];for(let _e=0;_e<Ie.length;_e+=3){const at=Ie[_e],gt=_e+1<Ie.length,Vt=gt?Ie[_e+1]:0,sr=_e+2<Ie.length,In=sr?Ie[_e+2]:0;let dn=(15&Vt)<<2|In>>6,Xn=63&In;sr||(Xn=64,gt||(dn=64)),ve.push(le[at>>2],le[(3&at)<<4|Vt>>4],le[dn],le[Xn])}return ve.join("")},encodeString(Ie,ie){return this.HAS_NATIVE_SUPPORT&&!ie?btoa(Ie):this.encodeByteArray(De(Ie),ie)},decodeString(Ie,ie){return this.HAS_NATIVE_SUPPORT&&!ie?atob(Ie):function(Ie){const ie=[];let le=0,ve=0;for(;le<Ie.length;){const _e=Ie[le++];if(_e<128)ie[ve++]=String.fromCharCode(_e);else if(_e>191&&_e<224){const at=Ie[le++];ie[ve++]=String.fromCharCode((31&_e)<<6|63&at)}else if(_e>239&&_e<365){const sr=((7&_e)<<18|(63&Ie[le++])<<12|(63&Ie[le++])<<6|63&Ie[le++])-65536;ie[ve++]=String.fromCharCode(55296+(sr>>10)),ie[ve++]=String.fromCharCode(56320+(1023&sr))}else{const at=Ie[le++],gt=Ie[le++];ie[ve++]=String.fromCharCode((15&_e)<<12|(63&at)<<6|63&gt)}}return ie.join("")}(this.decodeStringToByteArray(Ie,ie))},decodeStringToByteArray(Ie,ie){this.init_();const le=ie?this.charToByteMapWebSafe_:this.charToByteMap_,ve=[];for(let _e=0;_e<Ie.length;){const at=le[Ie.charAt(_e++)],Vt=_e<Ie.length?le[Ie.charAt(_e)]:0;++_e;const In=_e<Ie.length?le[Ie.charAt(_e)]:64;++_e;const Dn=_e<Ie.length?le[Ie.charAt(_e)]:64;if(++_e,null==at||null==Vt||null==In||null==Dn)throw Error();ve.push(at<<2|Vt>>4),64!==In&&(ve.push(Vt<<4&240|In>>2),64!==Dn&&ve.push(In<<6&192|Dn))}return ve},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let Ie=0;Ie<this.ENCODED_VALS.length;Ie++)this.byteToCharMap_[Ie]=this.ENCODED_VALS.charAt(Ie),this.charToByteMap_[this.byteToCharMap_[Ie]]=Ie,this.byteToCharMapWebSafe_[Ie]=this.ENCODED_VALS_WEBSAFE.charAt(Ie),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[Ie]]=Ie,Ie>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(Ie)]=Ie,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(Ie)]=Ie)}}},Re=function(Ie){return function(Ie){const ie=De(Ie);return xe.encodeByteArray(ie,!0)}(Ie).replace(/\./g,"")},Fe=function(Ie){try{return xe.decodeString(Ie,!0)}catch(ie){console.error("base64Decode failed: ",ie)}return null};function ue(Ie,ie){if(!(ie instanceof Object))return ie;switch(ie.constructor){case Date:return new Date(ie.getTime());case Object:void 0===Ie&&(Ie={});break;case Array:Ie=[];break;default:return ie}for(const le in ie)!ie.hasOwnProperty(le)||!Ee(le)||(Ie[le]=ue(Ie[le],ie[le]));return Ie}function Ee(Ie){return"__proto__"!==Ie}class mt{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((ie,le)=>{this.resolve=ie,this.reject=le})}wrapCallback(ie){return(le,ve)=>{le?this.reject(le):this.resolve(ve),"function"==typeof ie&&(this.promise.catch(()=>{}),1===ie.length?ie(le):ie(le,ve))}}}function rt(Ie,ie){if(Ie.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const ve=ie||"demo-project",_e=Ie.iat||0,at=Ie.sub||Ie.user_id;if(!at)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const gt=Object.assign({iss:`https://securetoken.google.com/${ve}`,aud:ve,iat:_e,exp:_e+3600,auth_time:_e,sub:at,user_id:at,firebase:{sign_in_provider:"custom",identities:{}}},Ie);return[Re(JSON.stringify({alg:"none",type:"JWT"})),Re(JSON.stringify(gt)),""].join(".")}function Ge(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function kt(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ge())}function Ze(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function ze(){return"object"==typeof self&&self.self===self}function Pt(){const Ie="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof Ie&&void 0!==Ie.id}function xt(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function he(){return Ge().indexOf("Electron/")>=0}function tt(){const Ie=Ge();return Ie.indexOf("MSIE ")>=0||Ie.indexOf("Trident/")>=0}function et(){return Ge().indexOf("MSAppHost/")>=0}function Je(){return!Ze()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function oe(){return"object"==typeof indexedDB}function He(){return new Promise((Ie,ie)=>{try{let le=!0;const ve="validate-browser-context-for-indexeddb-analytics-module",_e=self.indexedDB.open(ve);_e.onsuccess=()=>{_e.result.close(),le||self.indexedDB.deleteDatabase(ve),Ie(!0)},_e.onupgradeneeded=()=>{le=!1},_e.onerror=()=>{var at;ie((null===(at=_e.error)||void 0===at?void 0:at.message)||"")}}catch(le){ie(le)}})}function ne(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class Oe extends Error{constructor(ie,le,ve){super(le),this.code=ie,this.customData=ve,this.name="FirebaseError",Object.setPrototypeOf(this,Oe.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,lt.prototype.create)}}class lt{constructor(ie,le,ve){this.service=ie,this.serviceName=le,this.errors=ve}create(ie,...le){const ve=le[0]||{},_e=`${this.service}/${ie}`,at=this.errors[ie],gt=at?function _t(Ie,ie){return Ie.replace(Et,(le,ve)=>{const _e=ie[ve];return null!=_e?String(_e):`<${ve}?>`})}(at,ve):"Error";return new Oe(_e,`${this.serviceName}: ${gt} (${_e}).`,ve)}}const Et=/\{\$([^}]+)}/g;function Sn(Ie,ie){return Object.prototype.hasOwnProperty.call(Ie,ie)}function Fn(Ie){for(const ie in Ie)if(Object.prototype.hasOwnProperty.call(Ie,ie))return!1;return!0}function Nr(Ie,ie){if(Ie===ie)return!0;const le=Object.keys(Ie),ve=Object.keys(ie);for(const _e of le){if(!ve.includes(_e))return!1;const at=Ie[_e],gt=ie[_e];if(Ar(at)&&Ar(gt)){if(!Nr(at,gt))return!1}else if(at!==gt)return!1}for(const _e of ve)if(!le.includes(_e))return!1;return!0}function Ar(Ie){return null!==Ie&&"object"==typeof Ie}function zr(Ie){const ie=[];for(const[le,ve]of Object.entries(Ie))Array.isArray(ve)?ve.forEach(_e=>{ie.push(encodeURIComponent(le)+"="+encodeURIComponent(_e))}):ie.push(encodeURIComponent(le)+"="+encodeURIComponent(ve));return ie.length?"&"+ie.join("&"):""}function Jt(Ie){const ie={};return Ie.replace(/^\?/,"").split("&").forEach(ve=>{if(ve){const[_e,at]=ve.split("=");ie[decodeURIComponent(_e)]=decodeURIComponent(at)}}),ie}function nr(Ie){const ie=Ie.indexOf("?");if(!ie)return"";const le=Ie.indexOf("#",ie);return Ie.substring(ie,le>0?le:void 0)}function mr(Ie,ie){const le=new dt(Ie,ie);return le.subscribe.bind(le)}class dt{constructor(ie,le){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=le,this.task.then(()=>{ie(this)}).catch(ve=>{this.error(ve)})}next(ie){this.forEachObserver(le=>{le.next(ie)})}error(ie){this.forEachObserver(le=>{le.error(ie)}),this.close(ie)}complete(){this.forEachObserver(ie=>{ie.complete()}),this.close()}subscribe(ie,le,ve){let _e;if(void 0===ie&&void 0===le&&void 0===ve)throw new Error("Missing Observer.");_e=function wn(Ie,ie){if("object"!=typeof Ie||null===Ie)return!1;for(const le of ie)if(le in Ie&&"function"==typeof Ie[le])return!0;return!1}(ie,["next","error","complete"])?ie:{next:ie,error:le,complete:ve},void 0===_e.next&&(_e.next=rr),void 0===_e.error&&(_e.error=rr),void 0===_e.complete&&(_e.complete=rr);const at=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?_e.error(this.finalError):_e.complete()}catch{}}),this.observers.push(_e),at}unsubscribeOne(ie){void 0===this.observers||void 0===this.observers[ie]||(delete this.observers[ie],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(ie){if(!this.finalized)for(let le=0;le<this.observers.length;le++)this.sendOne(le,ie)}sendOne(ie,le){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[ie])try{le(this.observers[ie])}catch(ve){typeof console<"u"&&console.error&&console.error(ve)}})}close(ie){this.finalized||(this.finalized=!0,void 0!==ie&&(this.finalError=ie),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function rr(){}function wi(Ie,ie=1e3,le=2){const ve=ie*Math.pow(le,Ie),_e=Math.round(.5*ve*(Math.random()-.5)*2);return Math.min(144e5,ve+_e)}function Pn(Ie){return Ie&&Ie._delegate?Ie._delegate:Ie}},2557:(jt,$e,j)=>{j.d($e,{e:()=>De});var p=j(7579),T=j(4650),G=j(1205);let De=(()=>{class we{constructor(Me){this.auth=Me,this.currentUser=null,this.notifier$=new p.x}Login(Me,Re){return this.auth.signInWithEmailAndPassword(Me,Re)}RegisterUser(Me,Re){return this.auth.createUserWithEmailAndPassword(Me,Re)}SetCurrentUser(Me){this.currentUser=Me,this.Notify()}GetCurrentUserEmail(){return this.currentUser?.email}GetCurrentUserPhotoUrl(){return this.currentUser?.photoURL}GetCurrentUserDisplayName(){return this.currentUser?.displayName}GetCurrentUserID(){return this.currentUser?.uid}IsUserLoggedIn(){return null!=this.currentUser}LogOut(){this.currentUser=null,this.Notify()}Notify(){this.notifier$.next(this.currentUser)}UserActivity(){return this.notifier$}}return we.\u0275fac=function(Me){return new(Me||we)(T.LFG(G.zQ))},we.\u0275prov=T.Yz7({token:we,factory:we.\u0275fac,providedIn:"root"}),we})()},297:(jt,$e,j)=>{var p=j(1481),T=j(4650),G=j(433),De=j(6895),we=j(9646),xe=j(9751),Me=j(4351),Re=j(9300),Fe=j(4004);class fe{}class ue{}class Ee{constructor(I){this.normalizedNames=new Map,this.lazyUpdate=null,I?this.lazyInit="string"==typeof I?()=>{this.headers=new Map,I.split("\n").forEach(M=>{const q=M.indexOf(":");if(q>0){const X=M.slice(0,q),Ce=X.toLowerCase(),ke=M.slice(q+1).trim();this.maybeSetNormalizedName(X,Ce),this.headers.has(Ce)?this.headers.get(Ce).push(ke):this.headers.set(Ce,[ke])}})}:()=>{this.headers=new Map,Object.keys(I).forEach(M=>{let q=I[M];const X=M.toLowerCase();"string"==typeof q&&(q=[q]),q.length>0&&(this.headers.set(X,q),this.maybeSetNormalizedName(M,X))})}:this.headers=new Map}has(I){return this.init(),this.headers.has(I.toLowerCase())}get(I){this.init();const M=this.headers.get(I.toLowerCase());return M&&M.length>0?M[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(I){return this.init(),this.headers.get(I.toLowerCase())||null}append(I,M){return this.clone({name:I,value:M,op:"a"})}set(I,M){return this.clone({name:I,value:M,op:"s"})}delete(I,M){return this.clone({name:I,value:M,op:"d"})}maybeSetNormalizedName(I,M){this.normalizedNames.has(M)||this.normalizedNames.set(M,I)}init(){this.lazyInit&&(this.lazyInit instanceof Ee?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(I=>this.applyUpdate(I)),this.lazyUpdate=null))}copyFrom(I){I.init(),Array.from(I.headers.keys()).forEach(M=>{this.headers.set(M,I.headers.get(M)),this.normalizedNames.set(M,I.normalizedNames.get(M))})}clone(I){const M=new Ee;return M.lazyInit=this.lazyInit&&this.lazyInit instanceof Ee?this.lazyInit:this,M.lazyUpdate=(this.lazyUpdate||[]).concat([I]),M}applyUpdate(I){const M=I.name.toLowerCase();switch(I.op){case"a":case"s":let q=I.value;if("string"==typeof q&&(q=[q]),0===q.length)return;this.maybeSetNormalizedName(I.name,M);const X=("a"===I.op?this.headers.get(M):void 0)||[];X.push(...q),this.headers.set(M,X);break;case"d":const Ce=I.value;if(Ce){let ke=this.headers.get(M);if(!ke)return;ke=ke.filter(bt=>-1===Ce.indexOf(bt)),0===ke.length?(this.headers.delete(M),this.normalizedNames.delete(M)):this.headers.set(M,ke)}else this.headers.delete(M),this.normalizedNames.delete(M)}}forEach(I){this.init(),Array.from(this.normalizedNames.keys()).forEach(M=>I(this.normalizedNames.get(M),this.headers.get(M)))}}class rt{encodeKey(I){return ze(I)}encodeValue(I){return ze(I)}decodeKey(I){return decodeURIComponent(I)}decodeValue(I){return decodeURIComponent(I)}}const kt=/%(\d[a-f0-9])/gi,Ze={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function ze(b){return encodeURIComponent(b).replace(kt,(I,M)=>Ze[M]??I)}function Pt(b){return`${b}`}class xt{constructor(I={}){if(this.updates=null,this.cloneFrom=null,this.encoder=I.encoder||new rt,I.fromString){if(I.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function Ge(b,I){const M=new Map;return b.length>0&&b.replace(/^\?/,"").split("&").forEach(X=>{const Ce=X.indexOf("="),[ke,bt]=-1==Ce?[I.decodeKey(X),""]:[I.decodeKey(X.slice(0,Ce)),I.decodeValue(X.slice(Ce+1))],nt=M.get(ke)||[];nt.push(bt),M.set(ke,nt)}),M}(I.fromString,this.encoder)}else I.fromObject?(this.map=new Map,Object.keys(I.fromObject).forEach(M=>{const q=I.fromObject[M],X=Array.isArray(q)?q.map(Pt):[Pt(q)];this.map.set(M,X)})):this.map=null}has(I){return this.init(),this.map.has(I)}get(I){this.init();const M=this.map.get(I);return M?M[0]:null}getAll(I){return this.init(),this.map.get(I)||null}keys(){return this.init(),Array.from(this.map.keys())}append(I,M){return this.clone({param:I,value:M,op:"a"})}appendAll(I){const M=[];return Object.keys(I).forEach(q=>{const X=I[q];Array.isArray(X)?X.forEach(Ce=>{M.push({param:q,value:Ce,op:"a"})}):M.push({param:q,value:X,op:"a"})}),this.clone(M)}set(I,M){return this.clone({param:I,value:M,op:"s"})}delete(I,M){return this.clone({param:I,value:M,op:"d"})}toString(){return this.init(),this.keys().map(I=>{const M=this.encoder.encodeKey(I);return this.map.get(I).map(q=>M+"="+this.encoder.encodeValue(q)).join("&")}).filter(I=>""!==I).join("&")}clone(I){const M=new xt({encoder:this.encoder});return M.cloneFrom=this.cloneFrom||this,M.updates=(this.updates||[]).concat(I),M}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(I=>this.map.set(I,this.cloneFrom.map.get(I))),this.updates.forEach(I=>{switch(I.op){case"a":case"s":const M=("a"===I.op?this.map.get(I.param):void 0)||[];M.push(Pt(I.value)),this.map.set(I.param,M);break;case"d":if(void 0===I.value){this.map.delete(I.param);break}{let q=this.map.get(I.param)||[];const X=q.indexOf(Pt(I.value));-1!==X&&q.splice(X,1),q.length>0?this.map.set(I.param,q):this.map.delete(I.param)}}}),this.cloneFrom=this.updates=null)}}class tt{constructor(){this.map=new Map}set(I,M){return this.map.set(I,M),this}get(I){return this.map.has(I)||this.map.set(I,I.defaultValue()),this.map.get(I)}delete(I){return this.map.delete(I),this}has(I){return this.map.has(I)}keys(){return this.map.keys()}}function yt(b){return typeof ArrayBuffer<"u"&&b instanceof ArrayBuffer}function Je(b){return typeof Blob<"u"&&b instanceof Blob}function oe(b){return typeof FormData<"u"&&b instanceof FormData}class ne{constructor(I,M,q,X){let Ce;if(this.url=M,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=I.toUpperCase(),function et(b){switch(b){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||X?(this.body=void 0!==q?q:null,Ce=X):Ce=q,Ce&&(this.reportProgress=!!Ce.reportProgress,this.withCredentials=!!Ce.withCredentials,Ce.responseType&&(this.responseType=Ce.responseType),Ce.headers&&(this.headers=Ce.headers),Ce.context&&(this.context=Ce.context),Ce.params&&(this.params=Ce.params)),this.headers||(this.headers=new Ee),this.context||(this.context=new tt),this.params){const ke=this.params.toString();if(0===ke.length)this.urlWithParams=M;else{const bt=M.indexOf("?");this.urlWithParams=M+(-1===bt?"?":bt<M.length-1?"&":"")+ke}}else this.params=new xt,this.urlWithParams=M}serializeBody(){return null===this.body?null:yt(this.body)||Je(this.body)||oe(this.body)||function He(b){return typeof URLSearchParams<"u"&&b instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof xt?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||oe(this.body)?null:Je(this.body)?this.body.type||null:yt(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof xt?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(I={}){const M=I.method||this.method,q=I.url||this.url,X=I.responseType||this.responseType,Ce=void 0!==I.body?I.body:this.body,ke=void 0!==I.withCredentials?I.withCredentials:this.withCredentials,bt=void 0!==I.reportProgress?I.reportProgress:this.reportProgress;let nt=I.headers||this.headers,Nt=I.params||this.params;const Tt=I.context??this.context;return void 0!==I.setHeaders&&(nt=Object.keys(I.setHeaders).reduce((Qn,Yt)=>Qn.set(Yt,I.setHeaders[Yt]),nt)),I.setParams&&(Nt=Object.keys(I.setParams).reduce((Qn,Yt)=>Qn.set(Yt,I.setParams[Yt]),Nt)),new ne(M,q,Ce,{params:Nt,headers:nt,context:Tt,reportProgress:bt,responseType:X,withCredentials:ke})}}var ye=(()=>((ye=ye||{})[ye.Sent=0]="Sent",ye[ye.UploadProgress=1]="UploadProgress",ye[ye.ResponseHeader=2]="ResponseHeader",ye[ye.DownloadProgress=3]="DownloadProgress",ye[ye.Response=4]="Response",ye[ye.User=5]="User",ye))();class ce{constructor(I,M=200,q="OK"){this.headers=I.headers||new Ee,this.status=void 0!==I.status?I.status:M,this.statusText=I.statusText||q,this.url=I.url||null,this.ok=this.status>=200&&this.status<300}}class Oe extends ce{constructor(I={}){super(I),this.type=ye.ResponseHeader}clone(I={}){return new Oe({headers:I.headers||this.headers,status:void 0!==I.status?I.status:this.status,statusText:I.statusText||this.statusText,url:I.url||this.url||void 0})}}class lt extends ce{constructor(I={}){super(I),this.type=ye.Response,this.body=void 0!==I.body?I.body:null}clone(I={}){return new lt({body:void 0!==I.body?I.body:this.body,headers:I.headers||this.headers,status:void 0!==I.status?I.status:this.status,statusText:I.statusText||this.statusText,url:I.url||this.url||void 0})}}class _t extends ce{constructor(I){super(I,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${I.url||"(unknown url)"}`:`Http failure response for ${I.url||"(unknown url)"}: ${I.status} ${I.statusText}`,this.error=I.error||null}}function Et(b,I){return{body:I,headers:b.headers,context:b.context,observe:b.observe,params:b.params,reportProgress:b.reportProgress,responseType:b.responseType,withCredentials:b.withCredentials}}let Ot=(()=>{class b{constructor(M){this.handler=M}request(M,q,X={}){let Ce;if(M instanceof ne)Ce=M;else{let nt,Nt;nt=X.headers instanceof Ee?X.headers:new Ee(X.headers),X.params&&(Nt=X.params instanceof xt?X.params:new xt({fromObject:X.params})),Ce=new ne(M,q,void 0!==X.body?X.body:null,{headers:nt,context:X.context,params:Nt,reportProgress:X.reportProgress,responseType:X.responseType||"json",withCredentials:X.withCredentials})}const ke=(0,we.of)(Ce).pipe((0,Me.b)(nt=>this.handler.handle(nt)));if(M instanceof ne||"events"===X.observe)return ke;const bt=ke.pipe((0,Re.h)(nt=>nt instanceof lt));switch(X.observe||"body"){case"body":switch(Ce.responseType){case"arraybuffer":return bt.pipe((0,Fe.U)(nt=>{if(null!==nt.body&&!(nt.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return nt.body}));case"blob":return bt.pipe((0,Fe.U)(nt=>{if(null!==nt.body&&!(nt.body instanceof Blob))throw new Error("Response is not a Blob.");return nt.body}));case"text":return bt.pipe((0,Fe.U)(nt=>{if(null!==nt.body&&"string"!=typeof nt.body)throw new Error("Response is not a string.");return nt.body}));default:return bt.pipe((0,Fe.U)(nt=>nt.body))}case"response":return bt;default:throw new Error(`Unreachable: unhandled observe type ${X.observe}}`)}}delete(M,q={}){return this.request("DELETE",M,q)}get(M,q={}){return this.request("GET",M,q)}head(M,q={}){return this.request("HEAD",M,q)}jsonp(M,q){return this.request("JSONP",M,{params:(new xt).append(q,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(M,q={}){return this.request("OPTIONS",M,q)}patch(M,q,X={}){return this.request("PATCH",M,Et(X,q))}post(M,q,X={}){return this.request("POST",M,Et(X,q))}put(M,q,X={}){return this.request("PUT",M,Et(X,q))}}return b.\u0275fac=function(M){return new(M||b)(T.LFG(fe))},b.\u0275prov=T.Yz7({token:b,factory:b.\u0275fac}),b})();class Bt{constructor(I,M){this.next=I,this.interceptor=M}handle(I){return this.interceptor.intercept(I,this.next)}}const ct=new T.OlP("HTTP_INTERCEPTORS");let tn=(()=>{class b{intercept(M,q){return q.handle(M)}}return b.\u0275fac=function(M){return new(M||b)},b.\u0275prov=T.Yz7({token:b,factory:b.\u0275fac}),b})();const Tr=/^\)\]\}',?\n/;let Jt=(()=>{class b{constructor(M){this.xhrFactory=M}handle(M){if("JSONP"===M.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new xe.y(q=>{const X=this.xhrFactory.build();if(X.open(M.method,M.urlWithParams),M.withCredentials&&(X.withCredentials=!0),M.headers.forEach((Gn,nn)=>X.setRequestHeader(Gn,nn.join(","))),M.headers.has("Accept")||X.setRequestHeader("Accept","application/json, text/plain, */*"),!M.headers.has("Content-Type")){const Gn=M.detectContentTypeHeader();null!==Gn&&X.setRequestHeader("Content-Type",Gn)}if(M.responseType){const Gn=M.responseType.toLowerCase();X.responseType="json"!==Gn?Gn:"text"}const Ce=M.serializeBody();let ke=null;const bt=()=>{if(null!==ke)return ke;const Gn=X.statusText||"OK",nn=new Ee(X.getAllResponseHeaders()),Dt=function zr(b){return"responseURL"in b&&b.responseURL?b.responseURL:/^X-Request-URL:/m.test(b.getAllResponseHeaders())?b.getResponseHeader("X-Request-URL"):null}(X)||M.url;return ke=new Oe({headers:nn,status:X.status,statusText:Gn,url:Dt}),ke},nt=()=>{let{headers:Gn,status:nn,statusText:Dt,url:wr}=bt(),Kr=null;204!==nn&&(Kr=typeof X.response>"u"?X.responseText:X.response),0===nn&&(nn=Kr?200:0);let Qi=nn>=200&&nn<300;if("json"===M.responseType&&"string"==typeof Kr){const hr=Kr;Kr=Kr.replace(Tr,"");try{Kr=""!==Kr?JSON.parse(Kr):null}catch(Yr){Kr=hr,Qi&&(Qi=!1,Kr={error:Yr,text:Kr})}}Qi?(q.next(new lt({body:Kr,headers:Gn,status:nn,statusText:Dt,url:wr||void 0})),q.complete()):q.error(new _t({error:Kr,headers:Gn,status:nn,statusText:Dt,url:wr||void 0}))},Nt=Gn=>{const{url:nn}=bt(),Dt=new _t({error:Gn,status:X.status||0,statusText:X.statusText||"Unknown Error",url:nn||void 0});q.error(Dt)};let Tt=!1;const Qn=Gn=>{Tt||(q.next(bt()),Tt=!0);let nn={type:ye.DownloadProgress,loaded:Gn.loaded};Gn.lengthComputable&&(nn.total=Gn.total),"text"===M.responseType&&!!X.responseText&&(nn.partialText=X.responseText),q.next(nn)},Yt=Gn=>{let nn={type:ye.UploadProgress,loaded:Gn.loaded};Gn.lengthComputable&&(nn.total=Gn.total),q.next(nn)};return X.addEventListener("load",nt),X.addEventListener("error",Nt),X.addEventListener("timeout",Nt),X.addEventListener("abort",Nt),M.reportProgress&&(X.addEventListener("progress",Qn),null!==Ce&&X.upload&&X.upload.addEventListener("progress",Yt)),X.send(Ce),q.next({type:ye.Sent}),()=>{X.removeEventListener("error",Nt),X.removeEventListener("abort",Nt),X.removeEventListener("load",nt),X.removeEventListener("timeout",Nt),M.reportProgress&&(X.removeEventListener("progress",Qn),null!==Ce&&X.upload&&X.upload.removeEventListener("progress",Yt)),X.readyState!==X.DONE&&X.abort()}})}}return b.\u0275fac=function(M){return new(M||b)(T.LFG(De.JF))},b.\u0275prov=T.Yz7({token:b,factory:b.\u0275fac}),b})();const nr=new T.OlP("XSRF_COOKIE_NAME"),Ln=new T.OlP("XSRF_HEADER_NAME");class mr{}let dt=(()=>{class b{constructor(M,q,X){this.doc=M,this.platform=q,this.cookieName=X,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const M=this.doc.cookie||"";return M!==this.lastCookieString&&(this.parseCount++,this.lastToken=(0,De.Mx)(M,this.cookieName),this.lastCookieString=M),this.lastToken}}return b.\u0275fac=function(M){return new(M||b)(T.LFG(De.K0),T.LFG(T.Lbi),T.LFG(nr))},b.\u0275prov=T.Yz7({token:b,factory:b.\u0275fac}),b})(),zn=(()=>{class b{constructor(M,q){this.tokenService=M,this.headerName=q}intercept(M,q){const X=M.url.toLowerCase();if("GET"===M.method||"HEAD"===M.method||X.startsWith("http://")||X.startsWith("https://"))return q.handle(M);const Ce=this.tokenService.getToken();return null!==Ce&&!M.headers.has(this.headerName)&&(M=M.clone({headers:M.headers.set(this.headerName,Ce)})),q.handle(M)}}return b.\u0275fac=function(M){return new(M||b)(T.LFG(mr),T.LFG(Ln))},b.\u0275prov=T.Yz7({token:b,factory:b.\u0275fac}),b})(),wn=(()=>{class b{constructor(M,q){this.backend=M,this.injector=q,this.chain=null}handle(M){if(null===this.chain){const q=this.injector.get(ct,[]);this.chain=q.reduceRight((X,Ce)=>new Bt(X,Ce),this.backend)}return this.chain.handle(M)}}return b.\u0275fac=function(M){return new(M||b)(T.LFG(ue),T.LFG(T.zs3))},b.\u0275prov=T.Yz7({token:b,factory:b.\u0275fac}),b})(),Si=(()=>{class b{static disable(){return{ngModule:b,providers:[{provide:zn,useClass:tn}]}}static withOptions(M={}){return{ngModule:b,providers:[M.cookieName?{provide:nr,useValue:M.cookieName}:[],M.headerName?{provide:Ln,useValue:M.headerName}:[]]}}}return b.\u0275fac=function(M){return new(M||b)},b.\u0275mod=T.oAB({type:b}),b.\u0275inj=T.cJS({providers:[zn,{provide:ct,useExisting:zn,multi:!0},{provide:mr,useClass:dt},{provide:nr,useValue:"XSRF-TOKEN"},{provide:Ln,useValue:"X-XSRF-TOKEN"}]}),b})(),Pr=(()=>{class b{}return b.\u0275fac=function(M){return new(M||b)},b.\u0275mod=T.oAB({type:b}),b.\u0275inj=T.cJS({providers:[Ot,{provide:fe,useClass:wn},Jt,{provide:ue,useExisting:Jt}],imports:[Si.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]}),b})();var Ht=j(7001);class $t{constructor(I,M){this.id="",this.user_email=I,this.timestamp=M}getLiteralObjectRepresentation(){return{user_email:this.user_email,timestamp:this.timestamp}}}class ir{constructor(){this.INVALID_EMAIL={ocurred:!1,message:"El formato del email ingresado no es v\xe1lido."},this.WRONG_PASSWORD={ocurred:!1,message:"Contrase\xf1a equivocada."},this.USER_NOT_FOUND={ocurred:!1,message:"Usuario inexistente."},this.EMAIL_REQUIRED={ocurred:!1,message:"Email requerido."},this.PASSWORD_REQUIRED={ocurred:!1,message:"Contrase\xf1a requerida."},this.OTHER={ocurred:!1,message:"Ha ocurrido un error."}}ClearErrors(){Object.entries(this).forEach(([I,M])=>{M.ocurred=!1})}HasError(){let I=!1;return Object.entries(this).forEach(([M,q])=>{1==q.ocurred&&(I=!0)}),I}}var Jn=j(2557),ar=j(7566);let ri=(()=>{class b{constructor(M){this.firestore=M,this.collectionPath="/login_logs",this.loginLogsCollection=M.collection(this.collectionPath)}getDocuments(){return this.loginLogsCollection.valueChanges({idField:"id"})}addDocument(M){return this.loginLogsCollection.add(M)}updateDocument(M,q){return this.loginLogsCollection.doc(M).update(q)}deleteDocument(M){return this.loginLogsCollection.doc(M).delete()}}return b.\u0275fac=function(M){return new(M||b)(T.LFG(ar.ST))},b.\u0275prov=T.Yz7({token:b,factory:b.\u0275fac,providedIn:"root"}),b})();function un(b,I){if(1&b&&(T.TgZ(0,"p",14),T._uU(1),T.qZA()),2&b){const M=T.oxw(2);T.xp6(1),T.hij(" ",M.errors.INVALID_EMAIL.message," ")}}function wi(b,I){if(1&b&&(T.TgZ(0,"p",14),T._uU(1),T.qZA()),2&b){const M=T.oxw(2);T.xp6(1),T.hij(" ",M.errors.WRONG_PASSWORD.message," ")}}function Nn(b,I){if(1&b&&(T.TgZ(0,"p",14),T._uU(1),T.qZA()),2&b){const M=T.oxw(2);T.xp6(1),T.hij(" ",M.errors.USER_NOT_FOUND.message," ")}}function Ei(b,I){if(1&b&&(T.TgZ(0,"p",14),T._uU(1),T.qZA()),2&b){const M=T.oxw(2);T.xp6(1),T.hij(" ",M.errors.EMAIL_REQUIRED.message," ")}}function Pn(b,I){if(1&b&&(T.TgZ(0,"p",14),T._uU(1),T.qZA()),2&b){const M=T.oxw(2);T.xp6(1),T.hij(" ",M.errors.PASSWORD_REQUIRED.message," ")}}function Ie(b,I){if(1&b&&(T.TgZ(0,"p",14),T._uU(1),T.qZA()),2&b){const M=T.oxw(2);T.xp6(1),T.hij(" ",M.errors.OTHER.message," ")}}function ie(b,I){if(1&b&&(T.TgZ(0,"div",12),T.YNc(1,un,2,1,"p",13),T.YNc(2,wi,2,1,"p",13),T.YNc(3,Nn,2,1,"p",13),T.YNc(4,Ei,2,1,"p",13),T.YNc(5,Pn,2,1,"p",13),T.YNc(6,Ie,2,1,"p",13),T.qZA()),2&b){const M=T.oxw();T.xp6(1),T.Q6J("ngIf",M.errors.INVALID_EMAIL.ocurred),T.xp6(1),T.Q6J("ngIf",M.errors.WRONG_PASSWORD.ocurred),T.xp6(1),T.Q6J("ngIf",M.errors.USER_NOT_FOUND.ocurred),T.xp6(1),T.Q6J("ngIf",M.errors.EMAIL_REQUIRED.ocurred),T.xp6(1),T.Q6J("ngIf",M.errors.PASSWORD_REQUIRED.ocurred),T.xp6(1),T.Q6J("ngIf",M.errors.OTHER.ocurred)}}let le=(()=>{class b{constructor(M,q,X){this.auth=M,this.loginLogs=q,this.router=X,this._email="",this._password="",this.errors=new ir}ngOnInit(){}login(){this.auth.Login(this._email,this._password).then(M=>{this.loginLogs.addDocument(new $t(this._email,Date.now().toString()).getLiteralObjectRepresentation()),null!=M.user&&this.auth.SetCurrentUser(M.user),this.router.navigate(["/home"])}).catch(M=>{this.errors.ClearErrors(),this.RequiredFieldsFilled()&&("auth/invalid-email"==M.code?this.errors.INVALID_EMAIL.ocurred=!0:"auth/wrong-password"==M.code?this.errors.WRONG_PASSWORD.ocurred=!0:"auth/user-not-found"==M.code?this.errors.USER_NOT_FOUND.ocurred=!0:(this.errors.OTHER.message=M.message,this.errors.OTHER.ocurred=!0))})}access(){this._email="test_user@rayoespacial.com",this._password="123456"}RequiredFieldsFilled(){return""==this._email?(this.errors.EMAIL_REQUIRED.ocurred=!0,!1):""!=this._password||(this.errors.PASSWORD_REQUIRED.ocurred=!0,!1)}}return b.\u0275fac=function(M){return new(M||b)(T.Y36(Jn.e),T.Y36(ri),T.Y36(Ht.F0))},b.\u0275cmp=T.Xpm({type:b,selectors:[["app-login-form"]],decls:19,vars:3,consts:[[1,"login-container","text-center"],[1,"form-signin","w-100","m-auto"],["src","../../../assets/rayo-espacial-logo-grande.png","alt","","width","200","height","200",1,"mb-4"],[1,"form-floating"],["type","email","name","email","id","floatingInput","placeholder","name@example.com",1,"form-control",3,"ngModel","ngModelChange"],["for","floatingInput"],["type","password","name","password","id","floatingPassword","placeholder","Password",1,"form-control",3,"ngModel","ngModelChange"],["for","floatingPassword"],[1,"w-100","btn","btn-lg","btn-primary","mt-4","submit-customization",3,"click"],[1,"w-100","btn","btn-lg","btn-primary","mt-1","access-btn-customization",3,"click"],["class","alert alert-danger mt-5","role","alert",4,"ngIf"],[1,"mt-5","mb-3","text-muted"],["role","alert",1,"alert","alert-danger","mt-5"],["class","m-0",4,"ngIf"],[1,"m-0"]],template:function(M,q){1&M&&(T.TgZ(0,"div",0)(1,"main",1)(2,"form"),T._UZ(3,"img",2),T.TgZ(4,"div",3)(5,"input",4),T.NdJ("ngModelChange",function(Ce){return q._email=Ce}),T.qZA(),T.TgZ(6,"label",5),T._uU(7,"Email"),T.qZA()(),T.TgZ(8,"div",3)(9,"input",6),T.NdJ("ngModelChange",function(Ce){return q._password=Ce}),T.qZA(),T.TgZ(10,"label",7),T._uU(11,"Password"),T.qZA()(),T.TgZ(12,"button",8),T.NdJ("click",function(){return q.login()}),T._uU(13,"Ingresar"),T.qZA(),T.TgZ(14,"button",9),T.NdJ("click",function(){return q.access()}),T._uU(15,"Acceso R\xe1pido"),T.qZA(),T.YNc(16,ie,7,6,"div",10),T.TgZ(17,"p",11),T._uU(18,"\xa9 Ignacio Perez Artaso - 2022"),T.qZA()()()()),2&M&&(T.xp6(5),T.Q6J("ngModel",q._email),T.xp6(4),T.Q6J("ngModel",q._password),T.xp6(7),T.Q6J("ngIf",q.errors.HasError()))},dependencies:[De.O5,G._Y,G.Fj,G.JJ,G.JL,G.On,G.F],styles:[".login-container[_ngcontent-%COMP%]{display:flex;align-items:center;padding-top:40px;padding-bottom:40px;background-color:#e6e0bb}.form-signin[_ngcontent-%COMP%]{max-width:330px;padding:15px}.form-signin[_ngcontent-%COMP%]   .form-floating[_ngcontent-%COMP%]:focus-within{z-index:2}.form-signin[_ngcontent-%COMP%]   input[type=email][_ngcontent-%COMP%]{margin-bottom:-1px;border-bottom-right-radius:0;border-bottom-left-radius:0}.form-signin[_ngcontent-%COMP%]   input[type=password][_ngcontent-%COMP%]{margin-bottom:10px;border-top-left-radius:0;border-top-right-radius:0}.submit-customization[_ngcontent-%COMP%]{background-color:#0d0f45!important;border:none!important}.access-btn-customization[_ngcontent-%COMP%]{background-color:#450d16;border:none}"]}),b})();class ve{constructor(){this.EMAIL_EXISTS={ocurred:!1,message:"El email ingresado ya se encuentra registrado."},this.WEAK_PASSWORD={ocurred:!1,message:"La contrase\xf1a debe tener al menos seis (6) d\xedgitos."},this.WRONG_PASSWORD_CONFIRMATION={ocurred:!1,message:"Las contrase\xf1as ingresadas no coinciden."},this.EMAIL_REQUIRED={ocurred:!1,message:"Email requerido."},this.PASSWORD_REQUIRED={ocurred:!1,message:"Contrase\xf1a requerida."},this.OTHER={ocurred:!1,message:"Ha ocurrido un error."}}ClearErrors(){Object.entries(this).forEach(([I,M])=>{M.ocurred=!1})}HasError(){let I=!1;return Object.entries(this).forEach(([M,q])=>{1==q.ocurred&&(I=!0)}),I}}function _e(b,I){if(1&b&&(T.TgZ(0,"p",15),T._uU(1),T.qZA()),2&b){const M=T.oxw(2);T.xp6(1),T.hij(" ",M.errors.EMAIL_EXISTS.message," ")}}function at(b,I){if(1&b&&(T.TgZ(0,"p",15),T._uU(1),T.qZA()),2&b){const M=T.oxw(2);T.xp6(1),T.hij(" ",M.errors.WEAK_PASSWORD.message," ")}}function gt(b,I){if(1&b&&(T.TgZ(0,"p",15),T._uU(1),T.qZA()),2&b){const M=T.oxw(2);T.xp6(1),T.hij(" ",M.errors.WRONG_PASSWORD_CONFIRMATION.message," ")}}function Vt(b,I){if(1&b&&(T.TgZ(0,"p",15),T._uU(1),T.qZA()),2&b){const M=T.oxw(2);T.xp6(1),T.hij(" ",M.errors.EMAIL_REQUIRED.message," ")}}function sr(b,I){if(1&b&&(T.TgZ(0,"p",15),T._uU(1),T.qZA()),2&b){const M=T.oxw(2);T.xp6(1),T.hij(" ",M.errors.PASSWORD_REQUIRED.message," ")}}function In(b,I){if(1&b&&(T.TgZ(0,"p",15),T._uU(1),T.qZA()),2&b){const M=T.oxw(2);T.xp6(1),T.hij(" ",M.errors.OTHER.message," ")}}function fr(b,I){if(1&b&&(T.TgZ(0,"div",13),T.YNc(1,_e,2,1,"p",14),T.YNc(2,at,2,1,"p",14),T.YNc(3,gt,2,1,"p",14),T.YNc(4,Vt,2,1,"p",14),T.YNc(5,sr,2,1,"p",14),T.YNc(6,In,2,1,"p",14),T.qZA()),2&b){const M=T.oxw();T.xp6(1),T.Q6J("ngIf",M.errors.EMAIL_EXISTS.ocurred),T.xp6(1),T.Q6J("ngIf",M.errors.WEAK_PASSWORD.ocurred),T.xp6(1),T.Q6J("ngIf",M.errors.WRONG_PASSWORD_CONFIRMATION.ocurred),T.xp6(1),T.Q6J("ngIf",M.errors.EMAIL_REQUIRED.ocurred),T.xp6(1),T.Q6J("ngIf",M.errors.PASSWORD_REQUIRED.ocurred),T.xp6(1),T.Q6J("ngIf",M.errors.OTHER.ocurred)}}let Dn=(()=>{class b{constructor(M,q){this.auth=M,this.router=q,this._email="",this._password="",this._passwordConfirmation="",this.errors=new ve}ngOnInit(){}Register(){this.errors.ClearErrors(),this._password==this._passwordConfirmation?this.auth.RegisterUser(this._email,this._password).then(M=>{null!=M.user&&this.auth.SetCurrentUser(M.user),this.router.navigate(["/home"])}).catch(M=>{this.RequiredFieldsFilled()&&("auth/email-already-in-use"==M.code?this.errors.EMAIL_EXISTS.ocurred=!0:"auth/weak-password"==M.code?this.errors.WEAK_PASSWORD.ocurred=!0:(this.errors.OTHER.message=M.message,this.errors.OTHER.ocurred=!0))}):this.errors.WRONG_PASSWORD_CONFIRMATION.ocurred=!0}RequiredFieldsFilled(){return""==this._email?(this.errors.EMAIL_REQUIRED.ocurred=!0,!1):""!=this._password||(this.errors.PASSWORD_REQUIRED.ocurred=!0,!1)}}return b.\u0275fac=function(M){return new(M||b)(T.Y36(Jn.e),T.Y36(Ht.F0))},b.\u0275cmp=T.Xpm({type:b,selectors:[["app-register"]],decls:21,vars:4,consts:[[1,"login-container","text-center"],[1,"form-signin","w-100","m-auto"],["src","../../../assets/sign-in-logo.png","alt","","width","200","height","200",1,"mb-4"],[1,"form-floating","mb-2"],["type","email","name","email","id","floatingInput","placeholder","name@example.com",1,"form-control",3,"ngModel","ngModelChange"],["for","floatingInput"],["type","password","name","password","id","floatingPassword","placeholder","Password",1,"form-control",3,"ngModel","ngModelChange"],["for","floatingPassword"],[1,"form-floating"],["type","password","name","passwordConfirmation","id","floatingPassword","placeholder","Password",1,"form-control",3,"ngModel","ngModelChange"],[1,"w-100","btn","btn-lg","btn-primary","mt-4","submit-customization",3,"click"],["class","alert alert-danger mt-5","role","alert",4,"ngIf"],[1,"mt-5","mb-3","text-muted"],["role","alert",1,"alert","alert-danger","mt-5"],["class","m-0",4,"ngIf"],[1,"m-0"]],template:function(M,q){1&M&&(T.TgZ(0,"div",0)(1,"main",1)(2,"form"),T._UZ(3,"img",2),T.TgZ(4,"div",3)(5,"input",4),T.NdJ("ngModelChange",function(Ce){return q._email=Ce}),T.qZA(),T.TgZ(6,"label",5),T._uU(7,"Email"),T.qZA()(),T.TgZ(8,"div",3)(9,"input",6),T.NdJ("ngModelChange",function(Ce){return q._password=Ce}),T.qZA(),T.TgZ(10,"label",7),T._uU(11,"Nueva Contrase\xf1a"),T.qZA()(),T.TgZ(12,"div",8)(13,"input",9),T.NdJ("ngModelChange",function(Ce){return q._passwordConfirmation=Ce}),T.qZA(),T.TgZ(14,"label",7),T._uU(15,"Confirme Su Contrase\xf1a"),T.qZA()(),T.TgZ(16,"button",10),T.NdJ("click",function(){return q.Register()}),T._uU(17,"Registrarse"),T.qZA(),T.YNc(18,fr,7,6,"div",11),T.TgZ(19,"p",12),T._uU(20,"\xa9 Ignacio Perez Artaso - 2022"),T.qZA()()()()),2&M&&(T.xp6(5),T.Q6J("ngModel",q._email),T.xp6(4),T.Q6J("ngModel",q._password),T.xp6(4),T.Q6J("ngModel",q._passwordConfirmation),T.xp6(5),T.Q6J("ngIf",q.errors.HasError()))},dependencies:[De.O5,G._Y,G.Fj,G.JJ,G.JL,G.On,G.F],styles:[".login-container[_ngcontent-%COMP%]{display:flex;align-items:center;padding-top:40px;padding-bottom:40px;background-color:#e6e0bb}.form-signin[_ngcontent-%COMP%]{max-width:330px;padding:15px}.form-signin[_ngcontent-%COMP%]   .form-floating[_ngcontent-%COMP%]:focus-within{z-index:2}.form-signin[_ngcontent-%COMP%]   input[type=email][_ngcontent-%COMP%]{margin-bottom:-1px;border-bottom-right-radius:0;border-bottom-left-radius:0}.form-signin[_ngcontent-%COMP%]   input[type=password][_ngcontent-%COMP%]{margin-bottom:-1px;border-top-left-radius:0;border-top-right-radius:0}.submit-customization[_ngcontent-%COMP%]{background-color:#0d0f45!important;border:none!important}"]}),b})(),dn=(()=>{class b{constructor(){this.reveal=[!1,!1]}ngOnInit(){}revealElements(M){}}return b.\u0275fac=function(M){return new(M||b)},b.\u0275cmp=T.Xpm({type:b,selectors:[["app-about-me"]],decls:34,vars:0,consts:[[1,"container","mt-4"],[1,"row"],[1,"co-12","col-lg-3","first-reveal"],[1,"card"],["src","../../../assets/micara.webp","alt","Card image cap",1,"card-img-top","img-thumbnail","img-fluid","rounded-pill"],[1,"card-body"],[1,"card-title"],[1,"col","align-self-center","my-sm-4","second-reveal"],[1,"card-text"]],template:function(M,q){1&M&&(T.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),T._UZ(4,"img",4),T.TgZ(5,"div",5)(6,"h5",6),T._uU(7,"Ignacio Perez Artaso"),T.qZA(),T.TgZ(8,"ul")(9,"li"),T._uU(10," DNI: 37124127 "),T.qZA(),T.TgZ(11,"li"),T._uU(12," Legajo Nro. 106134 "),T.qZA(),T.TgZ(13,"li"),T._uU(14," Divisi\xf3n: 4to B "),T.qZA(),T.TgZ(15,"li"),T._uU(16," https://github.com/perez-artaso "),T.qZA(),T.TgZ(17,"li"),T._uU(18,"perez.artaso@gmail.com "),T.qZA()()()()(),T.TgZ(19,"div",7)(20,"div",3)(21,"h1"),T._uU(22,"RayoEspacial"),T.qZA(),T.TgZ(23,"div",5)(24,"h5",6),T._uU(25,"El Camino"),T.qZA(),T.TgZ(26,"p",8),T._uU(27," Mi juego consiste en un tablero en forma de grilla cuadrangular en el que se ense\xf1ar\xe1 al jugador una ruta que conecta una entrada con una salida. Tras unos instantes, se ocultar\xe1 este recorrido y el intr\xe9pido jugador deber\xe1 recordarlo, contando con tres intentos para recorrer correctamente el camino. "),T._UZ(28,"br")(29,"br"),T._uU(30," Cualquier equivocaci\xf3n en la ruta contar\xe1 como un intento fallido. Los recorridos se generar\xe1n proceduralmente al inicio de cada partida, por lo que el desaf\xedo se renovar\xe1 constantemente. "),T._UZ(31,"br")(32,"br"),T._uU(33," El tama\xf1o del tablero ser\xe1 personalizable. Mientras m\xe1s grande, m\xe1s puntos dar\xe1 la victoria. "),T.qZA()()()()()())},styles:["[_ngcontent-%COMP%]:root{--main-color: #E6E0BB;--main-contrast: #0D0F45}.card[_ngcontent-%COMP%]{background-color:#e6e0bb}h1[_ngcontent-%COMP%]{text-align:center}"]}),b})();class Xn{constructor(I,M,q,X){this._game_description=q,this._game_url=I,this._photo_url=M,this._game_title=X}}function vr(b,I){if(1&b&&(T.TgZ(0,"div",3)(1,"div",4),T._UZ(2,"img",5),T.TgZ(3,"div",6)(4,"p",7),T._uU(5),T.qZA(),T.TgZ(6,"a",8),T._uU(7,"Jugar"),T.qZA()()()()),2&b){const M=I.$implicit;T.xp6(2),T.s9C("src",M._photo_url,T.LSH),T.xp6(3),T.Oqu(M._game_description),T.xp6(1),T.s9C("routerLink",M._game_url)}}const Ur=[{path:"",redirectTo:"chat",pathMatch:"full"},{path:"about-me",component:dn},{path:"home",component:(()=>{class b{constructor(){this.games=[]}ngOnInit(){this.games.push(new Xn("/ahorcado","/assets/ahorcado.png","Adivin\xe1 cada letra de una palabra intergal\xe1ctica. Pero ten\xe9 cuidado: \xa1cada error pone a tu nave un poco m\xe1s cerca del final de su traves\xeda!","Ahorcado espacial"),new Xn("/mayor-menor","/assets/mayor-menor.png","Una baraja creada en un planeta lejano. Sacalas de a una. La siguiente: \xbfser\xe1 mayor?, \xbfser\xe1 menor? S\xf3lo un viajero intr\xe9pido conoce la respuesta.","Mayor o menor"),new Xn("/trivia","/assets/trivia.png","Demostr\xe1 cu\xe1nto sab\xe9s del espacio conocido.","Trivia gal\xe1ctica"))}}return b.\u0275fac=function(M){return new(M||b)},b.\u0275cmp=T.Xpm({type:b,selectors:[["app-home"]],decls:3,vars:1,consts:[[1,"container","mt-2"],[1,"row"],["class","col-3",4,"ngFor","ngForOf"],[1,"col-3"],[1,"card"],["alt","Acceso a juego",1,"card-img-top","align-self-center",3,"src"],[1,"card-body"],[1,"card-text"],[1,"btn","btn-primary",3,"routerLink"]],template:function(M,q){1&M&&(T.TgZ(0,"div",0)(1,"div",1),T.YNc(2,vr,8,3,"div",2),T.qZA()()),2&M&&(T.xp6(2),T.Q6J("ngForOf",q.games))},dependencies:[De.sg,Ht.yS],styles:["img[_ngcontent-%COMP%]{max-width:200px;background-color:#e6e0bb}"]}),b})()},{path:"register",component:Dn},{path:"login",component:le},{path:"chat",loadChildren:()=>j.e(505).then(j.bind(j,505)).then(b=>b.ChatModule)}];let Er=(()=>{class b{}return b.\u0275fac=function(M){return new(M||b)},b.\u0275mod=T.oAB({type:b}),b.\u0275inj=T.cJS({imports:[Ht.Bz.forRoot(Ur,{anchorScrolling:"enabled"}),Ht.Bz]}),b})();function ge(b,I){if(1&b){const M=T.EpF();T.TgZ(0,"li",14)(1,"a",15),T._uU(2),T.qZA(),T.TgZ(3,"ul",16)(4,"li")(5,"a",17),T.NdJ("click",function(){T.CHM(M);const X=T.oxw();return T.KtG(X.LogOut())}),T._uU(6,"Salir"),T.qZA()()()()}if(2&b){const M=T.oxw();T.xp6(2),T.hij(" ",M.dropdownLabel," ")}}function ae(b,I){1&b&&(T.TgZ(0,"ul",16)(1,"li")(2,"a",19),T._uU(3,"Login"),T.qZA()(),T._UZ(4,"div",20),T.TgZ(5,"li")(6,"a",21),T._uU(7,"Registrate"),T.qZA()()())}function re(b,I){if(1&b&&(T.TgZ(0,"li",14)(1,"a",15),T._uU(2),T.qZA(),T.YNc(3,ae,8,0,"ul",18),T.qZA()),2&b){const M=T.oxw();T.xp6(2),T.hij(" ",M.dropdownLabel," "),T.xp6(1),T.Q6J("ngIf",null==M.user)}}let Le=(()=>{class b{constructor(M,q){this.auth=M,this.router=q,this.dropdownLabel="Qui\xe9n Sos",this.user=null}ngOnInit(){this.auth.UserActivity().subscribe(M=>{this.user=M,this.dropdownLabel=M&&null!=M.email?M.email:"Qui\xe9n Sos"})}LogOut(){this.auth.LogOut(),this.router.navigate(["/"])}}return b.\u0275fac=function(M){return new(M||b)(T.Y36(Jn.e),T.Y36(Ht.F0))},b.\u0275cmp=T.Xpm({type:b,selectors:[["app-navbar"]],decls:20,vars:2,consts:[[1,"navbar","navbar-expand-lg","navbar-dark","bg-primary","navbar-customization"],[1,"container-fluid"],["routerLink","/",1,"navbar-brand"],["src","../../../assets/rocket-only.png","width","50","height","50","alt","Bootstrap","loading","lazy",1,"d-inline-block","align-top"],["type","button","data-bs-toggle","collapse","data-bs-target","#navbarSupportedContent2","aria-controls","navbarSupportedContent2","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["id","navbarSupportedContent2",1,"collapse","navbar-collapse"],[1,"navbar-nav","me-auto","mb-2","mb-lg-0"],[1,"nav-item"],["aria-current","page","routerLink","/",1,"nav-link","active","nav-link-customization"],["routerLink","/about-me",1,"nav-link","nav-link-customization"],["routerLink","/chat/chat-room",1,"nav-link","nav-link-customization"],["class","nav-item dropdown",4,"ngIf","ngIfElse"],["noUser",""],[1,"nav-item","dropdown"],["role","button","data-bs-toggle","dropdown","aria-expanded","false",1,"nav-link","dropdown-toggle","nav-link-customization"],[1,"dropdown-menu"],[1,"dropdown-item","nav-link-customization",3,"click"],["class","dropdown-menu",4,"ngIf"],["routerLink","/login",1,"dropdown-item","nav-link-customization"],[1,"dropdown-divider"],["routerLink","/register",1,"dropdown-item","nav-link-customization"]],template:function(M,q){if(1&M&&(T.TgZ(0,"nav",0)(1,"div",1)(2,"a",2),T._UZ(3,"img",3),T.qZA(),T.TgZ(4,"button",4),T._UZ(5,"span",5),T.qZA(),T.TgZ(6,"div",6)(7,"ul",7)(8,"li",8)(9,"a",9),T._uU(10,"Inicio"),T.qZA()(),T.TgZ(11,"li",8)(12,"a",10),T._uU(13,"Qui\xe9n Soy"),T.qZA()(),T.TgZ(14,"li",8)(15,"a",11),T._uU(16,"Chat"),T.qZA()(),T.YNc(17,ge,7,1,"li",12),T.YNc(18,re,4,2,"ng-template",null,13,T.W1O),T.qZA()()()()),2&M){const X=T.MAs(19);T.xp6(17),T.Q6J("ngIf",null!=q.user)("ngIfElse",X)}},dependencies:[De.O5,Ht.yS],styles:[".navbar-customization[_ngcontent-%COMP%]{background-color:#e6e0bb!important;border-bottom:.1rem solid #0D0F45!important}.nav-link-customization[_ngcontent-%COMP%]{color:#0d0f45}.active[_ngcontent-%COMP%]{color:#0d0f45!important;font-family:orbitron-black}.navbar-toggler[_ngcontent-%COMP%]{background-color:#0d0f45}"]}),b})(),it=(()=>{class b{constructor(){this.title="sala-juegos-2022"}}return b.\u0275fac=function(M){return new(M||b)},b.\u0275cmp=T.Xpm({type:b,selectors:[["app-root"]],decls:2,vars:0,template:function(M,q){1&M&&T._UZ(0,"app-navbar")(1,"router-outlet")},dependencies:[Ht.lC,Le]}),b})();var Ut=j(2011);const hn_firebaseConfig={apiKey:"AIzaSyD0FF-k7oz1RvH525aoPPdGGfo8Y7q_9Rw",authDomain:"salajuegos2022.firebaseapp.com",databaseURL:"https://salajuegos2022-default-rtdb.firebaseio.com",projectId:"salajuegos2022",storageBucket:"salajuegos2022.appspot.com",messagingSenderId:"15910949459",appId:"1:15910949459:web:cdef48d9faa371ab90aca6"};var En=j(1205),ur=j(8996),ii=j(4986),fn=j(4482),Cn=j(5403),rs=j(3900),si=j(5813),kr=j(3942),is=j(5861),Ni=j(9681),pr=j(2090),xr=j(4859);const Ai="firebasestorage.googleapis.com",Kn="storageBucket";class $n extends pr.ZR{constructor(I,M){super(ps(I),`Firebase Storage: ${M} (${ps(I)})`),this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,$n.prototype)}_codeEquals(I){return ps(I)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(I){this.customData.serverResponse=I,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}function ps(b){return"storage/"+b}function ci(){return new $n("unknown","An unknown error occurred, please check the error payload for server response.")}function Fs(){return new $n("canceled","User canceled the upload/download.")}function io(){return new $n("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function Ls(b){return new $n("invalid-argument",b)}function Rs(){return new $n("app-deleted","The Firebase app was deleted.")}function Wr(b){return new $n("invalid-root-operation","The operation '"+b+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Ae(b,I){return new $n("invalid-format","String does not match format '"+b+"': "+I)}function Te(b){throw new $n("internal-error","Internal error: "+b)}class Pe{constructor(I,M){this.bucket=I,this.path_=M}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const I=encodeURIComponent;return"/b/"+I(this.bucket)+"/o/"+I(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(I,M){let q;try{q=Pe.makeFromUrl(I,M)}catch{return new Pe(I,"")}if(""===q.path)return q;throw function ro(b){return new $n("invalid-default-bucket","Invalid default bucket '"+b+"'.")}(I)}static makeFromUrl(I,M){let q=null;const X="([A-Za-z0-9.\\-_]+)",bt=new RegExp("^gs://"+X+"(/(.*))?$","i");function Nt(Yr){Yr.path_=decodeURIComponent(Yr.path)}const Qn=M.replace(/[.]/g,"\\."),hr=[{regex:bt,indices:{bucket:1,path:3},postModify:function Ce(Yr){"/"===Yr.path.charAt(Yr.path.length-1)&&(Yr.path_=Yr.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${Qn}/v[A-Za-z0-9_]+/b/${X}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:Nt},{regex:new RegExp(`^https?://${M===Ai?"(?:storage.googleapis.com|storage.cloud.google.com)":M}/${X}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:Nt}];for(let Yr=0;Yr<hr.length;Yr++){const po=hr[Yr],Po=po.regex.exec(I);if(Po){let Ji=Po[po.indices.path];Ji||(Ji=""),q=new Pe(Po[po.indices.bucket],Ji),po.postModify(q);break}}if(null==q)throw function Ms(b){return new $n("invalid-url","Invalid URL '"+b+"'.")}(I);return q}}class ot{constructor(I){this.promise_=Promise.reject(I)}getPromise(){return this.promise_}cancel(I=!1){}}function hi(b){return"string"==typeof b||b instanceof String}function so(b){return Vs()&&b instanceof Blob}function Vs(){return typeof Blob<"u"}function ai(b,I,M,q){if(q<I)throw Ls(`Invalid value for '${b}'. Expected ${I} or greater.`);if(q>M)throw Ls(`Invalid value for '${b}'. Expected ${M} or less.`)}function Br(b,I,M){let q=I;return null==M&&(q=`https://${I}`),`${M}://${q}/v0${b}`}function Ui(b){const I=encodeURIComponent;let M="?";for(const q in b)b.hasOwnProperty(q)&&(M=M+(I(q)+"=")+I(b[q])+"&");return M=M.slice(0,-1),M}var fi=(()=>{return(b=fi||(fi={}))[b.NO_ERROR=0]="NO_ERROR",b[b.NETWORK_ERROR=1]="NETWORK_ERROR",b[b.ABORT=2]="ABORT",fi;var b})();class vo{constructor(I,M,q,X,Ce,ke,bt,nt,Nt,Tt,Qn){this.url_=I,this.method_=M,this.headers_=q,this.body_=X,this.successCodes_=Ce,this.additionalRetryCodes_=ke,this.callback_=bt,this.errorCallback_=nt,this.timeout_=Nt,this.progressCallback_=Tt,this.connectionFactory_=Qn,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((Yt,Gn)=>{this.resolve_=Yt,this.reject_=Gn,this.start_()})}start_(){const M=(q,X)=>{const Ce=this.resolve_,ke=this.reject_,bt=X.connection;if(X.wasSuccessCode)try{const nt=this.callback_(bt,bt.getResponse());!function _n(b){return void 0!==b}(nt)?Ce():Ce(nt)}catch(nt){ke(nt)}else if(null!==bt){const nt=ci();nt.serverResponse=bt.getErrorText(),ke(this.errorCallback_?this.errorCallback_(bt,nt):nt)}else ke(X.canceled?this.appDelete_?Rs():Fs():function oi(){return new $n("retry-limit-exceeded","Max retry time for operation exceeded, please try again.")}())};this.canceled_?M(0,new pi(!1,null,!0)):this.backoffId_=function wt(b,I,M){let q=1,X=null,Ce=null,ke=!1,bt=0;function nt(){return 2===bt}let Nt=!1;function Tt(...wr){Nt||(Nt=!0,I.apply(null,wr))}function Qn(wr){X=setTimeout(()=>{X=null,b(Gn,nt())},wr)}function Yt(){Ce&&clearTimeout(Ce)}function Gn(wr,...Kr){if(Nt)return void Yt();if(wr)return Yt(),void Tt.call(null,wr,...Kr);if(nt()||ke)return Yt(),void Tt.call(null,wr,...Kr);let hr;q<64&&(q*=2),1===bt?(bt=2,hr=0):hr=1e3*(q+Math.random()),Qn(hr)}let nn=!1;function Dt(wr){nn||(nn=!0,Yt(),!Nt&&(null!==X?(wr||(bt=2),clearTimeout(X),Qn(0)):wr||(bt=1)))}return Qn(0),Ce=setTimeout(()=>{ke=!0,Dt(!0)},M),Dt}((q,X)=>{if(X)return void q(!1,new pi(!1,null,!0));const Ce=this.connectionFactory_();this.pendingConnection_=Ce;const ke=bt=>{null!==this.progressCallback_&&this.progressCallback_(bt.loaded,bt.lengthComputable?bt.total:-1)};null!==this.progressCallback_&&Ce.addUploadProgressListener(ke),Ce.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&Ce.removeUploadProgressListener(ke),this.pendingConnection_=null;const bt=Ce.getErrorCode()===fi.NO_ERROR,nt=Ce.getStatus();if(!bt||this.isRetryStatusCode_(nt)){const Tt=Ce.getErrorCode()===fi.ABORT;return void q(!1,new pi(!1,null,Tt))}const Nt=-1!==this.successCodes_.indexOf(nt);q(!0,new pi(Nt,Ce))})},M,this.timeout_)}getPromise(){return this.promise_}cancel(I){this.canceled_=!0,this.appDelete_=I||!1,null!==this.backoffId_&&function Kt(b){b(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}isRetryStatusCode_(I){const M=I>=500&&I<600,X=-1!==[408,429].indexOf(I),Ce=-1!==this.additionalRetryCodes_.indexOf(I);return M||X||Ce}}class pi{constructor(I,M,q){this.wasSuccessCode=I,this.connection=M,this.canceled=!!q}}function $o(...b){const I=function wo(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}();if(void 0!==I){const M=new I;for(let q=0;q<b.length;q++)M.append(b[q]);return M.getBlob()}if(Vs())return new Blob(b);throw new $n("unsupported-environment","This browser doesn't seem to support creating Blobs")}const lr={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class xi{constructor(I,M){this.data=I,this.contentType=M||null}}function Ii(b,I){switch(b){case lr.RAW:return new xi(oo(I));case lr.BASE64:case lr.BASE64URL:return new xi(ao(b,I));case lr.DATA_URL:return new xi(function Fr(b){const I=new ea(b);return I.base64?ao(lr.BASE64,I.rest):function qr(b){let I;try{I=decodeURIComponent(b)}catch{throw Ae(lr.DATA_URL,"Malformed data URL.")}return oo(I)}(I.rest)}(I),function us(b){return new ea(b).contentType}(I))}throw ci()}function oo(b){const I=[];for(let M=0;M<b.length;M++){let q=b.charCodeAt(M);q<=127?I.push(q):q<=2047?I.push(192|q>>6,128|63&q):55296==(64512&q)?M<b.length-1&&56320==(64512&b.charCodeAt(M+1))?(q=65536|(1023&q)<<10|1023&b.charCodeAt(++M),I.push(240|q>>18,128|q>>12&63,128|q>>6&63,128|63&q)):I.push(239,191,189):56320==(64512&q)?I.push(239,191,189):I.push(224|q>>12,128|q>>6&63,128|63&q)}return new Uint8Array(I)}function ao(b,I){switch(b){case lr.BASE64:{const X=-1!==I.indexOf("-"),Ce=-1!==I.indexOf("_");if(X||Ce)throw Ae(b,"Invalid character '"+(X?"-":"_")+"' found: is it base64url encoded?");break}case lr.BASE64URL:{const X=-1!==I.indexOf("+"),Ce=-1!==I.indexOf("/");if(X||Ce)throw Ae(b,"Invalid character '"+(X?"+":"/")+"' found: is it base64 encoded?");I=I.replace(/-/g,"+").replace(/_/g,"/");break}}let M;try{M=function ms(b){return atob(b)}(I)}catch{throw Ae(b,"Invalid character found")}const q=new Uint8Array(M.length);for(let X=0;X<M.length;X++)q[X]=M.charCodeAt(X);return q}class ea{constructor(I){this.base64=!1,this.contentType=null;const M=I.match(/^data:([^,]+)?,/);if(null===M)throw Ae(lr.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const q=M[1]||null;null!=q&&(this.base64=function Ho(b,I){return b.length>=I.length&&b.substring(b.length-I.length)===I}(q,";base64"),this.contentType=this.base64?q.substring(0,q.length-7):q),this.rest=I.substring(I.indexOf(",")+1)}}class yr{constructor(I,M){let q=0,X="";so(I)?(this.data_=I,q=I.size,X=I.type):I instanceof ArrayBuffer?(M?this.data_=new Uint8Array(I):(this.data_=new Uint8Array(I.byteLength),this.data_.set(new Uint8Array(I))),q=this.data_.length):I instanceof Uint8Array&&(M?this.data_=I:(this.data_=new Uint8Array(I.length),this.data_.set(I)),q=I.length),this.size_=q,this.type_=X}size(){return this.size_}type(){return this.type_}slice(I,M){if(so(this.data_)){const X=function qs(b,I,M){return b.webkitSlice?b.webkitSlice(I,M):b.mozSlice?b.mozSlice(I,M):b.slice?b.slice(I,M):null}(this.data_,I,M);return null===X?null:new yr(X)}{const q=new Uint8Array(this.data_.buffer,I,M-I);return new yr(q,!0)}}static getBlob(...I){if(Vs()){const M=I.map(q=>q instanceof yr?q.data_:q);return new yr($o.apply(null,M))}{const M=I.map(ke=>hi(ke)?Ii(lr.RAW,ke).data:ke.data_);let q=0;M.forEach(ke=>{q+=ke.byteLength});const X=new Uint8Array(q);let Ce=0;return M.forEach(ke=>{for(let bt=0;bt<ke.length;bt++)X[Ce++]=ke[bt]}),new yr(X,!0)}}uploadData(){return this.data_}}function jr(b){let I;try{I=JSON.parse(b)}catch{return null}return function or(b){return"object"==typeof b&&!Array.isArray(b)}(I)?I:null}function ui(b){const I=b.lastIndexOf("/",b.length-2);return-1===I?b:b.slice(I+1)}function Hn(b,I){return I}class Sr{constructor(I,M,q,X){this.server=I,this.local=M||I,this.writable=!!q,this.xform=X||Hn}}let ji=null;function kn(){if(ji)return ji;const b=[];b.push(new Sr("bucket")),b.push(new Sr("generation")),b.push(new Sr("metageneration")),b.push(new Sr("name","fullPath",!0));const M=new Sr("name");M.xform=function I(Ce,ke){return function Go(b){return!hi(b)||b.length<2?b:ui(b)}(ke)},b.push(M);const X=new Sr("size");return X.xform=function q(Ce,ke){return void 0!==ke?Number(ke):ke},b.push(X),b.push(new Sr("timeCreated")),b.push(new Sr("updated")),b.push(new Sr("md5Hash",null,!0)),b.push(new Sr("cacheControl",null,!0)),b.push(new Sr("contentDisposition",null,!0)),b.push(new Sr("contentEncoding",null,!0)),b.push(new Sr("contentLanguage",null,!0)),b.push(new Sr("contentType",null,!0)),b.push(new Sr("metadata","customMetadata",!0)),ji=b,ji}function pn(b,I,M){const q=jr(I);return null===q?null:function Zr(b,I,M){const q={type:"file"},X=M.length;for(let Ce=0;Ce<X;Ce++){const ke=M[Ce];q[ke.local]=ke.xform(q,I[ke.server])}return function uo(b,I){Object.defineProperty(b,"ref",{get:function M(){const Ce=new Pe(b.bucket,b.fullPath);return I._makeStorageReference(Ce)}})}(q,b),q}(b,q,M)}function Ks(b,I){const M={},q=I.length;for(let X=0;X<q;X++){const Ce=I[X];Ce.writable&&(M[Ce.server]=b[Ce.local])}return JSON.stringify(M)}const xo="prefixes";class ki{constructor(I,M,q,X){this.url=I,this.method=M,this.handler=q,this.timeout=X,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Yi(b){if(!b)throw ci()}function ut(b,I){return function M(q,X){const Ce=pn(b,X,I);return Yi(null!==Ce),Ce}}function Bs(b){return function I(M,q){let X;return X=401===M.getStatus()?M.getErrorText().includes("Firebase App Check token is invalid")?function ss(){return new $n("unauthorized-app","This app does not have permission to access Firebase Storage on this project.")}():function Mr(){return new $n("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===M.getStatus()?function qi(b){return new $n("quota-exceeded","Quota for bucket '"+b+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(b.bucket):403===M.getStatus()?function Ir(b){return new $n("unauthorized","User does not have permission to access '"+b+"'.")}(b.path):q,X.serverResponse=q.serverResponse,X}}function Dr(b){const I=Bs(b);return function M(q,X){let Ce=I(q,X);return 404===q.getStatus()&&(Ce=function Vi(b){return new $n("object-not-found","Object '"+b+"' does not exist.")}(b.path)),Ce.serverResponse=X.serverResponse,Ce}}function Hi(b,I,M){const X=Br(I.fullServerUrl(),b.host,b._protocol),ke=b.maxOperationRetryTime,bt=new ki(X,"GET",ut(b,M),ke);return bt.errorHandler=Dr(I),bt}function js(b,I,M,q,X){const Ce={};Ce.prefix=I.isRoot?"":I.path+"/",M&&M.length>0&&(Ce.delimiter=M),q&&(Ce.pageToken=q),X&&(Ce.maxResults=X);const bt=Br(I.bucketOnlyServerUrl(),b.host,b._protocol),Nt=b.maxOperationRetryTime,Tt=new ki(bt,"GET",function Tn(b,I){return function M(q,X){const Ce=function ys(b,I,M){const q=jr(M);return null===q?null:function $i(b,I,M){const q={prefixes:[],items:[],nextPageToken:M.nextPageToken};if(M[xo])for(const X of M[xo]){const Ce=X.replace(/\/$/,""),ke=b._makeStorageReference(new Pe(I,Ce));q.prefixes.push(ke)}if(M.items)for(const X of M.items){const Ce=b._makeStorageReference(new Pe(I,X.name));q.items.push(Ce)}return q}(b,I,q)}(b,I,X);return Yi(null!==Ce),Ce}}(b,I.bucket),Nt);return Tt.urlParams=Ce,Tt.errorHandler=Bs(I),Tt}function L(b,I,M){const q=Object.assign({},M);return q.fullPath=b.path,q.size=I.size(),q.contentType||(q.contentType=function ta(b,I){return b&&b.contentType||I&&I.type()||"application/octet-stream"}(null,I)),q}class R{constructor(I,M,q,X){this.current=I,this.total=M,this.finalized=!!q,this.metadata=X||null}}function Y(b,I){let M=null;try{M=b.getResponseHeader("X-Goog-Upload-Status")}catch{Yi(!1)}return Yi(!!M&&-1!==(I||["active"]).indexOf(M)),M}const Di={STATE_CHANGED:"state_changed"},_r={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function _s(b){switch(b){case"running":case"pausing":case"canceling":return _r.RUNNING;case"paused":return _r.PAUSED;case"success":return _r.SUCCESS;case"canceled":return _r.CANCELED;default:return _r.ERROR}}class Js{constructor(I,M,q){if(function di(b){return"function"==typeof b}(I)||null!=M||null!=q)this.next=I,this.error=M??void 0,this.complete=q??void 0;else{const Ce=I;this.next=Ce.next,this.error=Ce.error,this.complete=Ce.complete}}}function vs(b){return(...I)=>{Promise.resolve().then(()=>b(...I))}}class Ta extends class co{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=fi.NO_ERROR,this.sendPromise_=new Promise(I=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=fi.ABORT,I()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=fi.NETWORK_ERROR,I()}),this.xhr_.addEventListener("load",()=>{I()})})}send(I,M,q,X){if(this.sent_)throw Te("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(M,I,!0),void 0!==X)for(const Ce in X)X.hasOwnProperty(Ce)&&this.xhr_.setRequestHeader(Ce,X[Ce].toString());return void 0!==q?this.xhr_.send(q):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Te("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Te("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Te("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Te("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(I){return this.xhr_.getResponseHeader(I)}addUploadProgressListener(I){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",I)}removeUploadProgressListener(I){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",I)}}{initXhr(){this.xhr_.responseType="text"}}function dr(){return new Ta}class x{constructor(I,M,q=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=I,this._blob=M,this._metadata=q,this._mappings=kn(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=X=>{this._request=void 0,this._chunkMultiplier=1,X._codeEquals("canceled")?(this._needToFetchStatus=!0,this.completeTransitions_()):(this._error=X,this._transition("error"))},this._metadataErrorHandler=X=>{this._request=void 0,X._codeEquals("canceled")?this.completeTransitions_():(this._error=X,this._transition("error"))},this._promise=new Promise((X,Ce)=>{this._resolve=X,this._reject=Ce,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const I=this._transferred;return M=>this._updateProgress(I+M)}_shouldDoResumable(I){return I.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())}_resolveToken(I){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([M,q])=>{switch(this._state){case"running":I(M,q);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((I,M)=>{const q=function Ke(b,I,M,q,X){const Ce=I.bucketOnlyServerUrl(),ke=L(I,q,X),bt={name:ke.fullPath},nt=Br(Ce,b.host,b._protocol),Tt={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${q.size()}`,"X-Goog-Upload-Header-Content-Type":ke.contentType,"Content-Type":"application/json; charset=utf-8"},Qn=Ks(ke,M),nn=new ki(nt,"POST",function Gn(Dt){let wr;Y(Dt);try{wr=Dt.getResponseHeader("X-Goog-Upload-URL")}catch{Yi(!1)}return Yi(hi(wr)),wr},b.maxUploadRetryTime);return nn.urlParams=bt,nn.headers=Tt,nn.body=Qn,nn.errorHandler=Bs(I),nn}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),X=this._ref.storage._makeRequest(q,dr,I,M);this._request=X,X.getPromise().then(Ce=>{this._request=void 0,this._uploadUrl=Ce,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const I=this._uploadUrl;this._resolveToken((M,q)=>{const X=function Xt(b,I,M,q){const nt=new ki(M,"POST",function Ce(Nt){const Tt=Y(Nt,["active","final"]);let Qn=null;try{Qn=Nt.getResponseHeader("X-Goog-Upload-Size-Received")}catch{Yi(!1)}Qn||Yi(!1);const Yt=Number(Qn);return Yi(!isNaN(Yt)),new R(Yt,q.size(),"final"===Tt)},b.maxUploadRetryTime);return nt.headers={"X-Goog-Upload-Command":"query"},nt.errorHandler=Bs(I),nt}(this._ref.storage,this._ref._location,I,this._blob),Ce=this._ref.storage._makeRequest(X,dr,M,q);this._request=Ce,Ce.getPromise().then(ke=>{this._request=void 0,this._updateProgress(ke.current),this._needToFetchStatus=!1,ke.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const I=262144*this._chunkMultiplier,M=new R(this._transferred,this._blob.size()),q=this._uploadUrl;this._resolveToken((X,Ce)=>{let ke;try{ke=function cs(b,I,M,q,X,Ce,ke,bt){const nt=new R(0,0);if(ke?(nt.current=ke.current,nt.total=ke.total):(nt.current=0,nt.total=q.size()),q.size()!==nt.total)throw function Zi(){return new $n("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.")}();const Nt=nt.total-nt.current;let Tt=Nt;X>0&&(Tt=Math.min(Tt,X));const Qn=nt.current,nn={"X-Goog-Upload-Command":Tt===Nt?"upload, finalize":"upload","X-Goog-Upload-Offset":`${nt.current}`},Dt=q.slice(Qn,Qn+Tt);if(null===Dt)throw io();const hr=new ki(M,"POST",function wr(Yr,po){const Po=Y(Yr,["active","final"]),Co=nt.current+Tt,Ji=q.size();let $r;return $r="final"===Po?ut(I,Ce)(Yr,po):null,new R(Co,Ji,"final"===Po,$r)},I.maxUploadRetryTime);return hr.headers=nn,hr.body=Dt.uploadData(),hr.progressCallback=bt||null,hr.errorHandler=Bs(b),hr}(this._ref._location,this._ref.storage,q,this._blob,I,this._mappings,M,this._makeProgressCallback())}catch(nt){return this._error=nt,void this._transition("error")}const bt=this._ref.storage._makeRequest(ke,dr,X,Ce);this._request=bt,bt.getPromise().then(nt=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(nt.current),nt.finalized?(this._metadata=nt.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((I,M)=>{const q=Hi(this._ref.storage,this._ref._location,this._mappings),X=this._ref.storage._makeRequest(q,dr,I,M);this._request=X,X.getPromise().then(Ce=>{this._request=void 0,this._metadata=Ce,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((I,M)=>{const q=function P(b,I,M,q,X){const Ce=I.bucketOnlyServerUrl(),ke={"X-Goog-Upload-Protocol":"multipart"},nt=function bt(){let hr="";for(let Yr=0;Yr<2;Yr++)hr+=Math.random().toString().slice(2);return hr}();ke["Content-Type"]="multipart/related; boundary="+nt;const Nt=L(I,q,X),Tt=Ks(Nt,M),Gn=yr.getBlob("--"+nt+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+Tt+"\r\n--"+nt+"\r\nContent-Type: "+Nt.contentType+"\r\n\r\n",q,"\r\n--"+nt+"--");if(null===Gn)throw io();const nn={name:Nt.fullPath},Dt=Br(Ce,b.host,b._protocol),Kr=b.maxUploadRetryTime,Qi=new ki(Dt,"POST",ut(b,M),Kr);return Qi.urlParams=nn,Qi.headers=ke,Qi.body=Gn.uploadData(),Qi.errorHandler=Bs(I),Qi}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),X=this._ref.storage._makeRequest(q,dr,I,M);this._request=X,X.getPromise().then(Ce=>{this._request=void 0,this._metadata=Ce,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(I){const M=this._transferred;this._transferred=I,this._transferred!==M&&this._notifyObservers()}_transition(I){if(this._state!==I)switch(I){case"canceling":case"pausing":this._state=I,void 0!==this._request&&this._request.cancel();break;case"running":const M="paused"===this._state;this._state=I,M&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=I,this._notifyObservers();break;case"canceled":this._error=Fs(),this._state=I,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const I=_s(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:I,metadata:this._metadata,task:this,ref:this._ref}}on(I,M,q,X){const Ce=new Js(M||void 0,q||void 0,X||void 0);return this._addObserver(Ce),()=>{this._removeObserver(Ce)}}then(I,M){return this._promise.then(I,M)}catch(I){return this.then(null,I)}_addObserver(I){this._observers.push(I),this._notifyObserver(I)}_removeObserver(I){const M=this._observers.indexOf(I);-1!==M&&this._observers.splice(M,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(M=>{this._notifyObserver(M)})}_finishPromise(){if(void 0!==this._resolve){let I=!0;switch(_s(this._state)){case _r.SUCCESS:vs(this._resolve.bind(null,this.snapshot))();break;case _r.CANCELED:case _r.ERROR:vs(this._reject.bind(null,this._error))();break;default:I=!1}I&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(I){switch(_s(this._state)){case _r.RUNNING:case _r.PAUSED:I.next&&vs(I.next.bind(I,this.snapshot))();break;case _r.SUCCESS:I.complete&&vs(I.complete.bind(I))();break;default:I.error&&vs(I.error.bind(I,this._error))()}}resume(){const I="paused"===this._state||"pausing"===this._state;return I&&this._transition("running"),I}pause(){const I="running"===this._state;return I&&this._transition("pausing"),I}cancel(){const I="running"===this._state||"pausing"===this._state;return I&&this._transition("canceling"),I}}class ${constructor(I,M){this._service=I,this._location=M instanceof Pe?M:Pe.makeFromUrl(M,I.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(I,M){return new $(I,M)}get root(){const I=new Pe(this._location.bucket,"");return this._newRef(this._service,I)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return ui(this._location.path)}get storage(){return this._service}get parent(){const I=function Ki(b){if(0===b.length)return null;const I=b.lastIndexOf("/");return-1===I?"":b.slice(0,I)}(this._location.path);if(null===I)return null;const M=new Pe(this._location.bucket,I);return new $(this._service,M)}_throwIfRoot(I){if(""===this._location.path)throw Wr(I)}}function Yn(b,I,M){return er.apply(this,arguments)}function er(){return(er=(0,is.Z)(function*(b,I,M){const X=yield qn(b,{pageToken:M});I.prefixes.push(...X.prefixes),I.items.push(...X.items),null!=X.nextPageToken&&(yield Yn(b,I,X.nextPageToken))})).apply(this,arguments)}function qn(b,I){null!=I&&"number"==typeof I.maxResults&&ai("options.maxResults",1,1e3,I.maxResults);const M=I||{},q=js(b.storage,b._location,"/",M.pageToken,M.maxResults);return b.storage.makeRequestWithTokens(q,dr)}function gr(b){b._throwIfRoot("getDownloadURL");const I=function Mo(b,I,M){const X=Br(I.fullServerUrl(),b.host,b._protocol),ke=b.maxOperationRetryTime,bt=new ki(X,"GET",function Ys(b,I){return function M(q,X){const Ce=pn(b,X,I);return Yi(null!==Ce),function Zs(b,I,M,q){const X=jr(I);if(null===X||!hi(X.downloadTokens))return null;const Ce=X.downloadTokens;if(0===Ce.length)return null;const ke=encodeURIComponent;return Ce.split(",").map(Nt=>{const Qn=b.fullPath;return Br("/b/"+ke(b.bucket)+"/o/"+ke(Qn),M,q)+Ui({alt:"media",token:Nt})})[0]}(Ce,X,b.host,b._protocol)}}(b,M),ke);return bt.errorHandler=Dr(I),bt}(b.storage,b._location,kn());return b.storage.makeRequestWithTokens(I,dr).then(M=>{if(null===M)throw function jo(){return new $n("no-download-url","The given file does not have any download URLs.")}();return M})}function Os(b,I){const M=function Bi(b,I){const M=I.split("/").filter(q=>q.length>0).join("/");return 0===b.length?M:b+"/"+M}(b._location.path,I),q=new Pe(b._location.bucket,M);return new $(b.storage,q)}function ho(b,I){if(b instanceof zo){const M=b;if(null==M._bucket)throw function Rr(){return new $n("no-default-bucket","No default bucket found. Did you set the '"+Kn+"' property when initializing the app?")}();const q=new $(M,M._bucket);return null!=I?ho(q,I):q}return void 0!==I?Os(b,I):b}function ds(b,I){if(I&&function ws(b){return/^[A-Za-z]+:\/\//.test(b)}(I)){if(b instanceof zo)return function Xs(b,I){return new $(b,I)}(b,I);throw Ls("To use ref(service, url), the first argument must be a Storage instance.")}return ho(b,I)}function $s(b,I){const M=I?.[Kn];return null==M?null:Pe.makeFromBucketSpec(M,b)}class zo{constructor(I,M,q,X,Ce){this.app=I,this._authProvider=M,this._appCheckProvider=q,this._url=X,this._firebaseVersion=Ce,this._bucket=null,this._host=Ai,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=X?Pe.makeFromBucketSpec(X,this._host):$s(this._host,this.app.options)}get host(){return this._host}set host(I){this._host=I,this._bucket=null!=this._url?Pe.makeFromBucketSpec(this._url,I):$s(I,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(I){ai("time",0,Number.POSITIVE_INFINITY,I),this._maxUploadRetryTime=I}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(I){ai("time",0,Number.POSITIVE_INFINITY,I),this._maxOperationRetryTime=I}_getAuthToken(){var I=this;return(0,is.Z)(function*(){if(I._overrideAuthToken)return I._overrideAuthToken;const M=I._authProvider.getImmediate({optional:!0});if(M){const q=yield M.getToken();if(null!==q)return q.accessToken}return null})()}_getAppCheckToken(){var I=this;return(0,is.Z)(function*(){const M=I._appCheckProvider.getImmediate({optional:!0});return M?(yield M.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(I=>I.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(I){return new $(this,I)}_makeRequest(I,M,q,X){if(this._deleted)return new ot(Rs());{const Ce=function gs(b,I,M,q,X,Ce){const ke=Ui(b.urlParams),bt=b.url+ke,nt=Object.assign({},b.headers);return function as(b,I){I&&(b["X-Firebase-GMPID"]=I)}(nt,I),function os(b,I){null!==I&&I.length>0&&(b.Authorization="Firebase "+I)}(nt,M),function Pi(b,I){b["X-Firebase-Storage-Version"]="webjs/"+(I??"AppManager")}(nt,Ce),function Ws(b,I){null!==I&&(b["X-Firebase-AppCheck"]=I)}(nt,q),new vo(bt,b.method,nt,b.body,b.successCodes,b.additionalRetryCodes,b.handler,b.errorHandler,b.timeout,b.progressCallback,X)}(I,this._appId,q,X,M,this._firebaseVersion);return this._requests.add(Ce),Ce.getPromise().then(()=>this._requests.delete(Ce),()=>this._requests.delete(Ce)),Ce}}makeRequestWithTokens(I,M){var q=this;return(0,is.Z)(function*(){const[X,Ce]=yield Promise.all([q._getAuthToken(),q._getAppCheckToken()]);return q._makeRequest(I,M,X,Ce).getPromise()})()}}const ei="@firebase/storage";function ya(b,I){return ds(b=(0,pr.m9)(b),I)}function Na(b,{instanceIdentifier:I}){const M=b.getProvider("app").getImmediate(),q=b.getProvider("auth-internal"),X=b.getProvider("app-check-internal");return new zo(M,q,X,I,Ni.SDK_VERSION)}!function gi(){(0,Ni._registerComponent)(new xr.wA("storage",Na,"PUBLIC").setMultipleInstances(!0)),(0,Ni.registerVersion)(ei,"0.9.9",""),(0,Ni.registerVersion)(ei,"0.9.9","esm2017")}();class hs{constructor(I,M,q){this._delegate=I,this.task=M,this.ref=q}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class No{constructor(I,M){this._delegate=I,this._ref=M,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new hs(this._delegate.snapshot,this,this._ref)}then(I,M){return this._delegate.then(q=>{if(I)return I(new hs(q,this,this._ref))},M)}on(I,M,q,X){let Ce;return M&&(Ce="function"==typeof M?ke=>M(new hs(ke,this,this._ref)):{next:M.next?ke=>M.next(new hs(ke,this,this._ref)):void 0,complete:M.complete||void 0,error:M.error||void 0}),this._delegate.on(I,Ce,q||void 0,X||void 0)}}class ra{constructor(I,M){this._delegate=I,this._service=M}get prefixes(){return this._delegate.prefixes.map(I=>new Ps(I,this._service))}get items(){return this._delegate.items.map(I=>new Ps(I,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class Ps{constructor(I,M){this._delegate=I,this.storage=M}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(I){const M=function Io(b,I){return Os(b,I)}(this._delegate,I);return new Ps(M,this.storage)}get root(){return new Ps(this._delegate.root,this.storage)}get parent(){const I=this._delegate.parent;return null==I?null:new Ps(I,this.storage)}put(I,M){return this._throwIfRoot("put"),new No(function pa(b,I,M){return function Be(b,I,M){return b._throwIfRoot("uploadBytesResumable"),new x(b,new yr(I),M)}(b=(0,pr.m9)(b),I,M)}(this._delegate,I,M),this)}putString(I,M=lr.RAW,q){this._throwIfRoot("putString");const X=Ii(M,I),Ce=Object.assign({},q);return null==Ce.contentType&&null!=X.contentType&&(Ce.contentType=X.contentType),new No(new x(this._delegate,new yr(X.data,!0),Ce),this)}listAll(){return function ma(b){return function Zt(b){const I={prefixes:[],items:[]};return Yn(b,I).then(()=>I)}(b=(0,pr.m9)(b))}(this._delegate).then(I=>new ra(I,this.storage))}list(I){return function ga(b,I){return qn(b=(0,pr.m9)(b),I)}(this._delegate,I||void 0).then(M=>new ra(M,this.storage))}getMetadata(){return function Wo(b){return function Un(b){b._throwIfRoot("getMetadata");const I=Hi(b.storage,b._location,kn());return b.storage.makeRequestWithTokens(I,dr)}(b=(0,pr.m9)(b))}(this._delegate)}updateMetadata(I){return function Ma(b,I){return function Xr(b,I){b._throwIfRoot("updateMetadata");const M=function Qs(b,I,M,q){const Ce=Br(I.fullServerUrl(),b.host,b._protocol),bt=Ks(M,q),Nt=b.maxOperationRetryTime,Tt=new ki(Ce,"PATCH",ut(b,q),Nt);return Tt.headers={"Content-Type":"application/json; charset=utf-8"},Tt.body=bt,Tt.errorHandler=Dr(I),Tt}(b.storage,b._location,I,kn());return b.storage.makeRequestWithTokens(M,dr)}(b=(0,pr.m9)(b),I)}(this._delegate,I)}getDownloadURL(){return function Es(b){return gr(b=(0,pr.m9)(b))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function Fi(b){return function Or(b){b._throwIfRoot("deleteObject");const I=function lo(b,I){const q=Br(I.fullServerUrl(),b.host,b._protocol),bt=new ki(q,"DELETE",function ke(nt,Nt){},b.maxOperationRetryTime);return bt.successCodes=[200,204],bt.errorHandler=Dr(I),bt}(b.storage,b._location);return b.storage.makeRequestWithTokens(I,dr)}(b=(0,pr.m9)(b))}(this._delegate)}_throwIfRoot(I){if(""===this._delegate._location.path)throw Wr(I)}}class Ci{constructor(I,M){this.app=I,this._delegate=M}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(I){if(Do(I))throw Ls("ref() expected a child path but got a URL, use refFromURL instead.");return new Ps(ya(this._delegate,I),this)}refFromURL(I){if(!Do(I))throw Ls("refFromURL() expected a full URL but got a child path, use ref() instead.");try{Pe.makeFromUrl(I,this._delegate.host)}catch{throw Ls("refFromUrl() expected a valid full URL but got an invalid one.")}return new Ps(ya(this._delegate,I),this)}setMaxUploadRetryTime(I){this._delegate.maxUploadRetryTime=I}setMaxOperationRetryTime(I){this._delegate.maxOperationRetryTime=I}useEmulator(I,M,q={}){!function Ra(b,I,M,q={}){!function Ns(b,I,M,q={}){b.host=`${I}:${M}`,b._protocol="http";const{mockUserToken:X}=q;X&&(b._overrideAuthToken="string"==typeof X?X:(0,pr.Sg)(X,b.app.options.projectId))}(b,I,M,q)}(this._delegate,I,M,q)}}function Do(b){return/^[A-Za-z]+:\/\//.test(b)}function It(b,{instanceIdentifier:I}){const M=b.getProvider("app-compat").getImmediate(),q=b.getProvider("storage").getImmediate({identifier:I});return new Ci(M,q)}!function Cr(b){const I={TaskState:_r,TaskEvent:Di,StringFormat:lr,Storage:Ci,Reference:Ps};b.INTERNAL.registerComponent(new xr.wA("storage-compat",It,"PUBLIC").setServiceProps(I).setMultipleInstances(!0)),b.registerVersion("@firebase/storage-compat","0.1.17")}(kr.Z);var fo=j(440),Pa=j(127);function ln(b){const I=function Gt(b){return new xe.y(I=>{const M=ke=>I.next(ke);M(b.snapshot);const Ce=b.on("state_changed",M);return b.then(ke=>{M(ke),I.complete()},ke=>{M(b.snapshot),(ke=>{I.error(ke)})(ke)}),function(){Ce()}}).pipe(function Wn(b,I=ii.z){return(0,fn.e)((M,q)=>{let X=null,Ce=null,ke=null;const bt=()=>{if(X){X.unsubscribe(),X=null;const Nt=Ce;Ce=null,q.next(Nt)}};function nt(){const Nt=ke+b,Tt=I.now();if(Tt<Nt)return X=this.schedule(void 0,Nt-Tt),void q.add(X);bt()}M.subscribe((0,Cn.x)(q,Nt=>{Ce=Nt,ke=I.now(),X||(X=I.schedule(nt,b),q.add(X))},()=>{bt(),q.complete()},void 0,()=>{Ce=X=null}))})}(0))}(b);return{task:b,then:b.then.bind(b),catch:b.catch.bind(b),pause:b.pause.bind(b),cancel:b.cancel.bind(b),resume:b.resume.bind(b),snapshotChanges:()=>I,percentageChanges:()=>I.pipe((0,Fe.U)(M=>M.bytesTransferred/M.totalBytes*100))}}function va(b){return{getDownloadURL:()=>(0,we.of)(void 0).pipe(si.fc,(0,rs.w)(()=>b.getDownloadURL()),si.iC),getMetadata:()=>(0,we.of)(void 0).pipe(si.fc,(0,rs.w)(()=>b.getMetadata()),si.iC),delete:()=>(0,ur.D)(b.delete()),child:I=>va(b.child(I)),updateMetadata:I=>(0,ur.D)(b.updateMetadata(I)),put:(I,M)=>ln(b.put(I,M)),putString:(I,M,q)=>ln(b.putString(I,M,q)),list:I=>(0,ur.D)(b.list(I)),listAll:()=>(0,ur.D)(b.listAll())}}const Lt=new T.OlP("angularfire2.storageBucket"),We=new T.OlP("angularfire2.storage.maxUploadRetryTime"),ft=new T.OlP("angularfire2.storage.maxOperationRetryTime"),Mi=new T.OlP("angularfire2.storage.use-emulator");let Ri=(()=>{class b{constructor(M,q,X,Ce,ke,bt,nt,Nt,Tt,Qn){const Yt=(0,Ut.on)(M,ke,q);this.storage=(0,Ut.cc)(`${Yt.name}.storage.${X}`,"AngularFireStorage",Yt.name,()=>{const Gn=ke.runOutsideAngular(()=>Yt.storage(X||void 0)),nn=Tt;return nn&&Gn.useEmulator(...nn),nt&&Gn.setMaxUploadRetryTime(nt),Nt&&Gn.setMaxOperationRetryTime(Nt),Gn},[nt,Nt])}ref(M){return va(this.storage.ref(M))}refFromURL(M){return va(this.storage.refFromURL(M))}upload(M,q,X){return va(this.storage.ref(M)).put(q,X)}}return b.\u0275fac=function(M){return new(M||b)(T.LFG(Ut.Dh),T.LFG(Ut.xv,8),T.LFG(Lt,8),T.LFG(T.Lbi),T.LFG(T.R0b),T.LFG(si.HU),T.LFG(We,8),T.LFG(ft,8),T.LFG(Mi,8),T.LFG(fo.nm,8))},b.\u0275prov=T.Yz7({token:b,factory:b.\u0275fac,providedIn:"any"}),b})(),ia=(()=>{class b{}return b.\u0275fac=function(M){return new(M||b)},b.\u0275mod=T.oAB({type:b}),b.\u0275inj=T.cJS({}),b})(),wa=(()=>{class b{constructor(){Pa.Z.registerVersion("angularfire",si.q4.full,"gcs-compat")}}return b.\u0275fac=function(M){return new(M||b)},b.\u0275mod=T.oAB({type:b}),b.\u0275inj=T.cJS({providers:[Ri],imports:[ia]}),b})(),Ea=(()=>{class b{}return b.\u0275fac=function(M){return new(M||b)},b.\u0275mod=T.oAB({type:b,bootstrap:[it]}),b.\u0275inj=T.cJS({imports:[p.b2,Er,G.u5,Pr,Ut.hO.initializeApp(hn_firebaseConfig),En.ww,ar.yb,wa]}),b})();(0,T.G48)(),p.q6().bootstrapModule(Ea).catch(b=>console.error(b))},5867:(jt,$e,j)=>{j.d($e,{C6:()=>p.getApps,Mq:()=>p.getApp});var p=j(9681);(0,p.registerVersion)("firebase","9.9.4","app")},127:(jt,$e,j)=>{j.d($e,{Z:()=>p.Z});var p=j(3942);p.Z.registerVersion("firebase","9.9.4","app-compat")},2274:(jt,$e,j)=>{j.r($e);var p=j(5861),T=j(3942),G=j(2090),De=j(9681),we=j(655),xe=j(1877),Me=j(4859);const Ge=function mt(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},kt=function rt(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},Ze=new G.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Pt=new xe.Yd("@firebase/auth");function xt(m,...c){Pt.logLevel<=xe.in.ERROR&&Pt.error(`Auth (${De.SDK_VERSION}): ${m}`,...c)}function he(m,...c){throw Je(m,...c)}function tt(m,...c){return Je(m,...c)}function et(m,c,f){const E=Object.assign(Object.assign({},kt()),{[c]:f});return new G.LL("auth","Firebase",E).create(c,{appName:m.name})}function yt(m,c,f){if(!(c instanceof f))throw f.name!==c.constructor.name&&he(m,"argument-error"),et(m,"argument-error",`Type of ${c.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Je(m,...c){if("string"!=typeof m){const f=c[0],E=[...c.slice(1)];return E[0]&&(E[0].appName=m.name),m._errorFactory.create(f,...E)}return Ze.create(m,...c)}function oe(m,c,...f){if(!m)throw Je(c,...f)}function He(m){const c="INTERNAL ASSERTION FAILED: "+m;throw xt(c),new Error(c)}function ne(m,c){m||He(c)}const ye=new Map;function ce(m){ne(m instanceof Function,"Expected a class definition");let c=ye.get(m);return c?(ne(c instanceof m,"Instance stored in cache mismatched with class"),c):(c=new m,ye.set(m,c),c)}function _t(){var m;return typeof self<"u"&&(null===(m=self.location)||void 0===m?void 0:m.href)||""}function Et(){return"http:"===Ot()||"https:"===Ot()}function Ot(){var m;return typeof self<"u"&&(null===(m=self.location)||void 0===m?void 0:m.protocol)||null}class tn{constructor(c,f){this.shortDelay=c,this.longDelay=f,ne(f>c,"Short delay should be less than long delay!"),this.isMobile=(0,G.uI)()||(0,G.b$)()}get(){return function Bt(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Et()||(0,G.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function qt(m,c){ne(m.emulator,"Emulator should always be set here");const{url:f}=m.emulator;return c?`${f}${c.startsWith("/")?c.slice(1):c}`:f}class rn{static initialize(c,f,E){this.fetchImpl=c,f&&(this.headersImpl=f),E&&(this.responseImpl=E)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void He("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void He("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void He("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Ft={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},Sn=new tn(3e4,6e4);function an(m,c){return m.tenantId&&!c.tenantId?Object.assign(Object.assign({},c),{tenantId:m.tenantId}):c}function Fn(m,c,f,E){return Oi.apply(this,arguments)}function Oi(){return(Oi=(0,p.Z)(function*(m,c,f,E,B={}){return Nr(m,B,(0,p.Z)(function*(){let Q={},be={};E&&("GET"===c?be=E:Q={body:JSON.stringify(E)});const Xe=(0,G.xO)(Object.assign({key:m.config.apiKey},be)).slice(1),Rt=yield m._getAdditionalHeaders();return Rt["Content-Type"]="application/json",m.languageCode&&(Rt["X-Firebase-Locale"]=m.languageCode),rn.fetch()(Jt(m,m.config.apiHost,f,Xe),Object.assign({method:c,headers:Rt,referrerPolicy:"no-referrer"},Q))}))})).apply(this,arguments)}function Nr(m,c,f){return Ar.apply(this,arguments)}function Ar(){return(Ar=(0,p.Z)(function*(m,c,f){m._canInitEmulator=!1;const E=Object.assign(Object.assign({},Ft),c);try{const B=new nr(m),Q=yield Promise.race([f(),B.promise]);B.clearNetworkTimeout();const be=yield Q.json();if("needConfirmation"in be)throw Ln(m,"account-exists-with-different-credential",be);if(Q.ok&&!("errorMessage"in be))return be;{const Xe=Q.ok?be.errorMessage:be.error.message,[Rt,sn]=Xe.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Rt)throw Ln(m,"credential-already-in-use",be);if("EMAIL_EXISTS"===Rt)throw Ln(m,"email-already-in-use",be);if("USER_DISABLED"===Rt)throw Ln(m,"user-disabled",be);const Mn=E[Rt]||Rt.toLowerCase().replace(/[_\s]+/g,"-");if(sn)throw et(m,Mn,sn);he(m,Mn)}}catch(B){if(B instanceof G.ZR)throw B;he(m,"network-request-failed")}})).apply(this,arguments)}function Tr(m,c,f,E){return zr.apply(this,arguments)}function zr(){return(zr=(0,p.Z)(function*(m,c,f,E,B={}){const Q=yield Fn(m,c,f,E,B);return"mfaPendingCredential"in Q&&he(m,"multi-factor-auth-required",{_serverResponse:Q}),Q})).apply(this,arguments)}function Jt(m,c,f,E){const B=`${c}${f}?${E}`;return m.config.emulator?qt(m.config,B):`${m.config.apiScheme}://${B}`}class nr{constructor(c){this.auth=c,this.timer=null,this.promise=new Promise((f,E)=>{this.timer=setTimeout(()=>E(tt(this.auth,"network-request-failed")),Sn.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Ln(m,c,f){const E={appName:m.name};f.email&&(E.email=f.email),f.phoneNumber&&(E.phoneNumber=f.phoneNumber);const B=tt(m,c,E);return B.customData._tokenResponse=f,B}function dt(){return(dt=(0,p.Z)(function*(m,c){return Fn(m,"POST","/v1/accounts:delete",c)})).apply(this,arguments)}function zn(m,c){return wn.apply(this,arguments)}function wn(){return(wn=(0,p.Z)(function*(m,c){return Fn(m,"POST","/v1/accounts:update",c)})).apply(this,arguments)}function rr(m,c){return vi.apply(this,arguments)}function vi(){return(vi=(0,p.Z)(function*(m,c){return Fn(m,"POST","/v1/accounts:lookup",c)})).apply(this,arguments)}function Si(m){if(m)try{const c=new Date(Number(m));if(!isNaN(c.getTime()))return c.toUTCString()}catch{}}function Vn(){return(Vn=(0,p.Z)(function*(m,c=!1){const f=(0,G.m9)(m),E=yield f.getIdToken(c),B=$t(E);oe(B&&B.exp&&B.auth_time&&B.iat,f.auth,"internal-error");const Q="object"==typeof B.firebase?B.firebase:void 0,be=Q?.sign_in_provider;return{claims:B,token:E,authTime:Si(Ht(B.auth_time)),issuedAtTime:Si(Ht(B.iat)),expirationTime:Si(Ht(B.exp)),signInProvider:be||null,signInSecondFactor:Q?.sign_in_second_factor||null}})).apply(this,arguments)}function Ht(m){return 1e3*Number(m)}function $t(m){var c;const[f,E,B]=m.split(".");if(void 0===f||void 0===E||void 0===B)return xt("JWT malformed, contained fewer than 3 sections"),null;try{const Q=(0,G.tV)(E);return Q?JSON.parse(Q):(xt("Failed to decode base64 JWT payload"),null)}catch(Q){return xt("Caught error parsing JWT payload as JSON",null===(c=Q)||void 0===c?void 0:c.toString()),null}}function Jn(m,c){return ar.apply(this,arguments)}function ar(){return(ar=(0,p.Z)(function*(m,c,f=!1){if(f)return c;try{return yield c}catch(E){throw E instanceof G.ZR&&ri(E)&&m.auth.currentUser===m&&(yield m.auth.signOut()),E}})).apply(this,arguments)}function ri({code:m}){return"auth/user-disabled"===m||"auth/user-token-expired"===m}class un{constructor(c){this.user=c,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(c){var f;if(c){const E=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),E}{this.errorBackoff=3e4;const B=(null!==(f=this.user.stsTokenManager.expirationTime)&&void 0!==f?f:0)-Date.now()-3e5;return Math.max(0,B)}}schedule(c=!1){var f=this;if(!this.isRunning)return;const E=this.getInterval(c);this.timerId=setTimeout((0,p.Z)(function*(){yield f.iteration()}),E)}iteration(){var c=this;return(0,p.Z)(function*(){var f;try{yield c.user.getIdToken(!0)}catch(E){return void("auth/network-request-failed"===(null===(f=E)||void 0===f?void 0:f.code)&&c.schedule(!0))}c.schedule()})()}}class wi{constructor(c,f){this.createdAt=c,this.lastLoginAt=f,this._initializeTime()}_initializeTime(){this.lastSignInTime=Si(this.lastLoginAt),this.creationTime=Si(this.createdAt)}_copy(c){this.createdAt=c.createdAt,this.lastLoginAt=c.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Nn(m){return Ei.apply(this,arguments)}function Ei(){return(Ei=(0,p.Z)(function*(m){var c;const f=m.auth,E=yield m.getIdToken(),B=yield Jn(m,rr(f,{idToken:E}));oe(B?.users.length,f,"internal-error");const Q=B.users[0];m._notifyReloadListener(Q);const be=null!==(c=Q.providerUserInfo)&&void 0!==c&&c.length?le(Q.providerUserInfo):[],Xe=ie(m.providerData,be),Mn=!!m.isAnonymous&&!(m.email&&Q.passwordHash||Xe?.length),bn={uid:Q.localId,displayName:Q.displayName||null,photoURL:Q.photoUrl||null,email:Q.email||null,emailVerified:Q.emailVerified||!1,phoneNumber:Q.phoneNumber||null,tenantId:Q.tenantId||null,providerData:Xe,metadata:new wi(Q.createdAt,Q.lastLoginAt),isAnonymous:Mn};Object.assign(m,bn)})).apply(this,arguments)}function Ie(){return(Ie=(0,p.Z)(function*(m){const c=(0,G.m9)(m);yield Nn(c),yield c.auth._persistUserIfCurrent(c),c.auth._notifyListenersIfCurrent(c)})).apply(this,arguments)}function ie(m,c){return[...m.filter(E=>!c.some(B=>B.providerId===E.providerId)),...c]}function le(m){return m.map(c=>{var{providerId:f}=c,E=(0,we._T)(c,["providerId"]);return{providerId:f,uid:E.rawId||"",displayName:E.displayName||null,email:E.email||null,phoneNumber:E.phoneNumber||null,photoURL:E.photoUrl||null}})}function _e(){return(_e=(0,p.Z)(function*(m,c){const f=yield Nr(m,{},(0,p.Z)(function*(){const E=(0,G.xO)({grant_type:"refresh_token",refresh_token:c}).slice(1),{tokenApiHost:B,apiKey:Q}=m.config,be=Jt(m,B,"/v1/token",`key=${Q}`),Xe=yield m._getAdditionalHeaders();return Xe["Content-Type"]="application/x-www-form-urlencoded",rn.fetch()(be,{method:"POST",headers:Xe,body:E})}));return{accessToken:f.access_token,expiresIn:f.expires_in,refreshToken:f.refresh_token}})).apply(this,arguments)}class at{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(c){oe(c.idToken,"internal-error"),oe(typeof c.idToken<"u","internal-error"),oe(typeof c.refreshToken<"u","internal-error");const f="expiresIn"in c&&typeof c.expiresIn<"u"?Number(c.expiresIn):function ir(m){const c=$t(m);return oe(c,"internal-error"),oe(typeof c.exp<"u","internal-error"),oe(typeof c.iat<"u","internal-error"),Number(c.exp)-Number(c.iat)}(c.idToken);this.updateTokensAndExpiration(c.idToken,c.refreshToken,f)}getToken(c,f=!1){var E=this;return(0,p.Z)(function*(){return oe(!E.accessToken||E.refreshToken,c,"user-token-expired"),f||!E.accessToken||E.isExpired?E.refreshToken?(yield E.refresh(c,E.refreshToken),E.accessToken):null:E.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(c,f){var E=this;return(0,p.Z)(function*(){const{accessToken:B,refreshToken:Q,expiresIn:be}=yield function ve(m,c){return _e.apply(this,arguments)}(c,f);E.updateTokensAndExpiration(B,Q,Number(be))})()}updateTokensAndExpiration(c,f,E){this.refreshToken=f||null,this.accessToken=c||null,this.expirationTime=Date.now()+1e3*E}static fromJSON(c,f){const{refreshToken:E,accessToken:B,expirationTime:Q}=f,be=new at;return E&&(oe("string"==typeof E,"internal-error",{appName:c}),be.refreshToken=E),B&&(oe("string"==typeof B,"internal-error",{appName:c}),be.accessToken=B),Q&&(oe("number"==typeof Q,"internal-error",{appName:c}),be.expirationTime=Q),be}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(c){this.accessToken=c.accessToken,this.refreshToken=c.refreshToken,this.expirationTime=c.expirationTime}_clone(){return Object.assign(new at,this.toJSON())}_performRefresh(){return He("not implemented")}}function gt(m,c){oe("string"==typeof m||typeof m>"u","internal-error",{appName:c})}class Vt{constructor(c){var{uid:f,auth:E,stsTokenManager:B}=c,Q=(0,we._T)(c,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new un(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=f,this.auth=E,this.stsTokenManager=B,this.accessToken=B.accessToken,this.displayName=Q.displayName||null,this.email=Q.email||null,this.emailVerified=Q.emailVerified||!1,this.phoneNumber=Q.phoneNumber||null,this.photoURL=Q.photoURL||null,this.isAnonymous=Q.isAnonymous||!1,this.tenantId=Q.tenantId||null,this.providerData=Q.providerData?[...Q.providerData]:[],this.metadata=new wi(Q.createdAt||void 0,Q.lastLoginAt||void 0)}getIdToken(c){var f=this;return(0,p.Z)(function*(){const E=yield Jn(f,f.stsTokenManager.getToken(f.auth,c));return oe(E,f.auth,"internal-error"),f.accessToken!==E&&(f.accessToken=E,yield f.auth._persistUserIfCurrent(f),f.auth._notifyListenersIfCurrent(f)),E})()}getIdTokenResult(c){return function An(m){return Vn.apply(this,arguments)}(this,c)}reload(){return function Pn(m){return Ie.apply(this,arguments)}(this)}_assign(c){this!==c&&(oe(this.uid===c.uid,this.auth,"internal-error"),this.displayName=c.displayName,this.photoURL=c.photoURL,this.email=c.email,this.emailVerified=c.emailVerified,this.phoneNumber=c.phoneNumber,this.isAnonymous=c.isAnonymous,this.tenantId=c.tenantId,this.providerData=c.providerData.map(f=>Object.assign({},f)),this.metadata._copy(c.metadata),this.stsTokenManager._assign(c.stsTokenManager))}_clone(c){return new Vt(Object.assign(Object.assign({},this),{auth:c,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(c){oe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=c,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(c){this.reloadListener?this.reloadListener(c):this.reloadUserInfo=c}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(c,f=!1){var E=this;return(0,p.Z)(function*(){let B=!1;c.idToken&&c.idToken!==E.stsTokenManager.accessToken&&(E.stsTokenManager.updateFromServerResponse(c),B=!0),f&&(yield Nn(E)),yield E.auth._persistUserIfCurrent(E),B&&E.auth._notifyListenersIfCurrent(E)})()}delete(){var c=this;return(0,p.Z)(function*(){const f=yield c.getIdToken();return yield Jn(c,function mr(m,c){return dt.apply(this,arguments)}(c.auth,{idToken:f})),c.stsTokenManager.clearRefreshToken(),c.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(c=>Object.assign({},c)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(c,f){var E,B,Q,be,Xe,Rt,sn,Mn;const bn=null!==(E=f.displayName)&&void 0!==E?E:void 0,es=null!==(B=f.email)&&void 0!==B?B:void 0,aa=null!==(Q=f.phoneNumber)&&void 0!==Q?Q:void 0,Fl=null!==(be=f.photoURL)&&void 0!==be?be:void 0,Ic=null!==(Xe=f.tenantId)&&void 0!==Xe?Xe:void 0,nl=null!==(Rt=f._redirectEventId)&&void 0!==Rt?Rt:void 0,ud=null!==(sn=f.createdAt)&&void 0!==sn?sn:void 0,fh=null!==(Mn=f.lastLoginAt)&&void 0!==Mn?Mn:void 0,{uid:rl,emailVerified:Kf,isAnonymous:Yf,providerData:qa,stsTokenManager:il}=f;oe(rl&&il,c,"internal-error");const Mg=at.fromJSON(this.name,il);oe("string"==typeof rl,c,"internal-error"),gt(bn,c.name),gt(es,c.name),oe("boolean"==typeof Kf,c,"internal-error"),oe("boolean"==typeof Yf,c,"internal-error"),gt(aa,c.name),gt(Fl,c.name),gt(Ic,c.name),gt(nl,c.name),gt(ud,c.name),gt(fh,c.name);const ph=new Vt({uid:rl,auth:c,email:es,emailVerified:Kf,displayName:bn,isAnonymous:Yf,photoURL:Fl,phoneNumber:aa,tenantId:Ic,stsTokenManager:Mg,createdAt:ud,lastLoginAt:fh});return qa&&Array.isArray(qa)&&(ph.providerData=qa.map(Rg=>Object.assign({},Rg))),nl&&(ph._redirectEventId=nl),ph}static _fromIdTokenResponse(c,f,E=!1){return(0,p.Z)(function*(){const B=new at;B.updateFromServerResponse(f);const Q=new Vt({uid:f.localId,auth:c,stsTokenManager:B,isAnonymous:E});return yield Nn(Q),Q})()}}const In=(()=>{class m{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,p.Z)(function*(){return!0})()}_set(f,E){var B=this;return(0,p.Z)(function*(){B.storage[f]=E})()}_get(f){var E=this;return(0,p.Z)(function*(){const B=E.storage[f];return void 0===B?null:B})()}_remove(f){var E=this;return(0,p.Z)(function*(){delete E.storage[f]})()}_addListener(f,E){}_removeListener(f,E){}}return m.type="NONE",m})();function fr(m,c,f){return`firebase:${m}:${c}:${f}`}class Dn{constructor(c,f,E){this.persistence=c,this.auth=f,this.userKey=E;const{config:B,name:Q}=this.auth;this.fullUserKey=fr(this.userKey,B.apiKey,Q),this.fullPersistenceKey=fr("persistence",B.apiKey,Q),this.boundEventHandler=f._onStorageEvent.bind(f),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(c){return this.persistence._set(this.fullUserKey,c.toJSON())}getCurrentUser(){var c=this;return(0,p.Z)(function*(){const f=yield c.persistence._get(c.fullUserKey);return f?Vt._fromJSON(c.auth,f):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(c){var f=this;return(0,p.Z)(function*(){if(f.persistence===c)return;const E=yield f.getCurrentUser();return yield f.removeCurrentUser(),f.persistence=c,E?f.setCurrentUser(E):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(c,f,E="authUser"){return(0,p.Z)(function*(){if(!f.length)return new Dn(ce(In),c,E);const B=(yield Promise.all(f.map(function(){var sn=(0,p.Z)(function*(Mn){if(yield Mn._isAvailable())return Mn});return function(Mn){return sn.apply(this,arguments)}}()))).filter(sn=>sn);let Q=B[0]||ce(In);const be=fr(E,c.config.apiKey,c.name);let Xe=null;for(const sn of f)try{const Mn=yield sn._get(be);if(Mn){const bn=Vt._fromJSON(c,Mn);sn!==Q&&(Xe=bn),Q=sn;break}}catch{}const Rt=B.filter(sn=>sn._shouldAllowMigration);return Q._shouldAllowMigration&&Rt.length?(Q=Rt[0],Xe&&(yield Q._set(be,Xe.toJSON())),yield Promise.all(f.map(function(){var sn=(0,p.Z)(function*(Mn){if(Mn!==Q)try{yield Mn._remove(be)}catch{}});return function(Mn){return sn.apply(this,arguments)}}())),new Dn(Q,c,E)):new Dn(Q,c,E)})()}}function dn(m){const c=m.toLowerCase();if(c.includes("opera/")||c.includes("opr/")||c.includes("opios/"))return"Opera";if(Ur(c))return"IEMobile";if(c.includes("msie")||c.includes("trident/"))return"IE";if(c.includes("edge/"))return"Edge";if(Xn(c))return"Firefox";if(c.includes("silk/"))return"Silk";if(ge(c))return"Blackberry";if(ae(c))return"Webos";if(vr(c))return"Safari";if((c.includes("chrome/")||Jr(c))&&!c.includes("edge/"))return"Chrome";if(Er(c))return"Android";{const E=m.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===E?.length)return E[1]}return"Other"}function Xn(m=(0,G.z$)()){return/firefox\//i.test(m)}function vr(m=(0,G.z$)()){const c=m.toLowerCase();return c.includes("safari/")&&!c.includes("chrome/")&&!c.includes("crios/")&&!c.includes("android")}function Jr(m=(0,G.z$)()){return/crios\//i.test(m)}function Ur(m=(0,G.z$)()){return/iemobile/i.test(m)}function Er(m=(0,G.z$)()){return/android/i.test(m)}function ge(m=(0,G.z$)()){return/blackberry/i.test(m)}function ae(m=(0,G.z$)()){return/webos/i.test(m)}function re(m=(0,G.z$)()){return/iphone|ipad|ipod/i.test(m)||/macintosh/i.test(m)&&/mobile/i.test(m)}function hn(m=(0,G.z$)()){return re(m)||Er(m)||ae(m)||ge(m)||/windows phone/i.test(m)||Ur(m)}function ur(m,c=[]){let f;switch(m){case"Browser":f=dn((0,G.z$)());break;case"Worker":f=`${dn((0,G.z$)())}-${m}`;break;default:f=m}const E=c.length?c.join(","):"FirebaseCore-web";return`${f}/JsCore/${De.SDK_VERSION}/${E}`}class ii{constructor(c){this.auth=c,this.queue=[]}pushCallback(c,f){const E=Q=>new Promise((be,Xe)=>{try{be(c(Q))}catch(Rt){Xe(Rt)}});E.onAbort=f,this.queue.push(E);const B=this.queue.length-1;return()=>{this.queue[B]=()=>Promise.resolve()}}runMiddleware(c){var f=this;return(0,p.Z)(function*(){var E;if(f.auth.currentUser===c)return;const B=[];try{for(const Q of f.queue)yield Q(c),Q.onAbort&&B.push(Q.onAbort)}catch(Q){B.reverse();for(const be of B)try{be()}catch{}throw f.auth._errorFactory.create("login-blocked",{originalMessage:null===(E=Q)||void 0===E?void 0:E.message})}})()}}class fn{constructor(c,f,E){this.app=c,this.heartbeatServiceProvider=f,this.config=E,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Wn(this),this.idTokenSubscription=new Wn(this),this.beforeStateQueue=new ii(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Ze,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=c.name,this.clientVersion=E.sdkClientVersion}_initializeWithPersistence(c,f){var E=this;return f&&(this._popupRedirectResolver=ce(f)),this._initializationPromise=this.queue((0,p.Z)(function*(){var B,Q;if(!E._deleted&&(E.persistenceManager=yield Dn.create(E,c),!E._deleted)){if(null!==(B=E._popupRedirectResolver)&&void 0!==B&&B._shouldInitProactively)try{yield E._popupRedirectResolver._initialize(E)}catch{}yield E.initializeCurrentUser(f),E.lastNotifiedUid=(null===(Q=E.currentUser)||void 0===Q?void 0:Q.uid)||null,!E._deleted&&(E._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var c=this;return(0,p.Z)(function*(){if(c._deleted)return;const f=yield c.assertedPersistence.getCurrentUser();if(c.currentUser||f){if(c.currentUser&&f&&c.currentUser.uid===f.uid)return c._currentUser._assign(f),void(yield c.currentUser.getIdToken());yield c._updateCurrentUser(f,!0)}})()}initializeCurrentUser(c){var f=this;return(0,p.Z)(function*(){var E;const B=yield f.assertedPersistence.getCurrentUser();let Q=B,be=!1;if(c&&f.config.authDomain){yield f.getOrInitRedirectPersistenceManager();const Xe=null===(E=f.redirectUser)||void 0===E?void 0:E._redirectEventId,Rt=Q?._redirectEventId,sn=yield f.tryRedirectSignIn(c);(!Xe||Xe===Rt)&&sn?.user&&(Q=sn.user,be=!0)}if(!Q)return f.directlySetCurrentUser(null);if(!Q._redirectEventId){if(be)try{yield f.beforeStateQueue.runMiddleware(Q)}catch(Xe){Q=B,f._popupRedirectResolver._overrideRedirectResult(f,()=>Promise.reject(Xe))}return Q?f.reloadAndSetCurrentUserOrClear(Q):f.directlySetCurrentUser(null)}return oe(f._popupRedirectResolver,f,"argument-error"),yield f.getOrInitRedirectPersistenceManager(),f.redirectUser&&f.redirectUser._redirectEventId===Q._redirectEventId?f.directlySetCurrentUser(Q):f.reloadAndSetCurrentUserOrClear(Q)})()}tryRedirectSignIn(c){var f=this;return(0,p.Z)(function*(){let E=null;try{E=yield f._popupRedirectResolver._completeRedirectFn(f,c,!0)}catch{yield f._setRedirectUser(null)}return E})()}reloadAndSetCurrentUserOrClear(c){var f=this;return(0,p.Z)(function*(){var E;try{yield Nn(c)}catch(B){if("auth/network-request-failed"!==(null===(E=B)||void 0===E?void 0:E.code))return f.directlySetCurrentUser(null)}return f.directlySetCurrentUser(c)})()}useDeviceLanguage(){this.languageCode=function ct(){if(typeof navigator>"u")return null;const m=navigator;return m.languages&&m.languages[0]||m.language||null}()}_delete(){var c=this;return(0,p.Z)(function*(){c._deleted=!0})()}updateCurrentUser(c){var f=this;return(0,p.Z)(function*(){const E=c?(0,G.m9)(c):null;return E&&oe(E.auth.config.apiKey===f.config.apiKey,f,"invalid-user-token"),f._updateCurrentUser(E&&E._clone(f))})()}_updateCurrentUser(c,f=!1){var E=this;return(0,p.Z)(function*(){if(!E._deleted)return c&&oe(E.tenantId===c.tenantId,E,"tenant-id-mismatch"),f||(yield E.beforeStateQueue.runMiddleware(c)),E.queue((0,p.Z)(function*(){yield E.directlySetCurrentUser(c),E.notifyAuthListeners()}))})()}signOut(){var c=this;return(0,p.Z)(function*(){return yield c.beforeStateQueue.runMiddleware(null),(c.redirectPersistenceManager||c._popupRedirectResolver)&&(yield c._setRedirectUser(null)),c._updateCurrentUser(null,!0)})()}setPersistence(c){var f=this;return this.queue((0,p.Z)(function*(){yield f.assertedPersistence.setPersistence(ce(c))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(c){this._errorFactory=new G.LL("auth","Firebase",c())}onAuthStateChanged(c,f,E){return this.registerStateListener(this.authStateSubscription,c,f,E)}beforeAuthStateChanged(c,f){return this.beforeStateQueue.pushCallback(c,f)}onIdTokenChanged(c,f,E){return this.registerStateListener(this.idTokenSubscription,c,f,E)}toJSON(){var c;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(c=this._currentUser)||void 0===c?void 0:c.toJSON()}}_setRedirectUser(c,f){var E=this;return(0,p.Z)(function*(){const B=yield E.getOrInitRedirectPersistenceManager(f);return null===c?B.removeCurrentUser():B.setCurrentUser(c)})()}getOrInitRedirectPersistenceManager(c){var f=this;return(0,p.Z)(function*(){if(!f.redirectPersistenceManager){const E=c&&ce(c)||f._popupRedirectResolver;oe(E,f,"argument-error"),f.redirectPersistenceManager=yield Dn.create(f,[ce(E._redirectPersistence)],"redirectUser"),f.redirectUser=yield f.redirectPersistenceManager.getCurrentUser()}return f.redirectPersistenceManager})()}_redirectUserForId(c){var f=this;return(0,p.Z)(function*(){var E,B;return f._isInitialized&&(yield f.queue((0,p.Z)(function*(){}))),(null===(E=f._currentUser)||void 0===E?void 0:E._redirectEventId)===c?f._currentUser:(null===(B=f.redirectUser)||void 0===B?void 0:B._redirectEventId)===c?f.redirectUser:null})()}_persistUserIfCurrent(c){var f=this;return(0,p.Z)(function*(){if(c===f.currentUser)return f.queue((0,p.Z)(function*(){return f.directlySetCurrentUser(c)}))})()}_notifyListenersIfCurrent(c){c===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var c,f;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const E=null!==(f=null===(c=this.currentUser)||void 0===c?void 0:c.uid)&&void 0!==f?f:null;this.lastNotifiedUid!==E&&(this.lastNotifiedUid=E,this.authStateSubscription.next(this.currentUser))}registerStateListener(c,f,E,B){if(this._deleted)return()=>{};const Q="function"==typeof f?f:f.next.bind(f),be=this._isInitialized?Promise.resolve():this._initializationPromise;return oe(be,this,"internal-error"),be.then(()=>Q(this.currentUser)),"function"==typeof f?c.addObserver(f,E,B):c.addObserver(f)}directlySetCurrentUser(c){var f=this;return(0,p.Z)(function*(){f.currentUser&&f.currentUser!==c&&f._currentUser._stopProactiveRefresh(),c&&f.isProactiveRefreshEnabled&&c._startProactiveRefresh(),f.currentUser=c,c?yield f.assertedPersistence.setCurrentUser(c):yield f.assertedPersistence.removeCurrentUser()})()}queue(c){return this.operations=this.operations.then(c,c),this.operations}get assertedPersistence(){return oe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(c){!c||this.frameworks.includes(c)||(this.frameworks.push(c),this.frameworks.sort(),this.clientVersion=ur(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var c=this;return(0,p.Z)(function*(){var f;const E={"X-Client-Version":c.clientVersion};c.app.options.appId&&(E["X-Firebase-gmpid"]=c.app.options.appId);const B=yield null===(f=c.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===f?void 0:f.getHeartbeatsHeader();return B&&(E["X-Firebase-Client"]=B),E})()}}function Cn(m){return(0,G.m9)(m)}class Wn{constructor(c){this.auth=c,this.observer=null,this.addObserver=(0,G.ne)(f=>this.observer=f)}get next(){return oe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function si(m){const c=m.indexOf(":");return c<0?"":m.substr(0,c+1)}function is(m){if(!m)return null;const c=Number(m);return isNaN(c)?null:c}class pr{constructor(c,f){this.providerId=c,this.signInMethod=f}toJSON(){return He("not implemented")}_getIdTokenResponse(c){return He("not implemented")}_linkToIdToken(c,f){return He("not implemented")}_getReauthenticationResolver(c){return He("not implemented")}}function xr(m,c){return Ai.apply(this,arguments)}function Ai(){return(Ai=(0,p.Z)(function*(m,c){return Fn(m,"POST","/v1/accounts:resetPassword",an(m,c))})).apply(this,arguments)}function Kn(m,c){return Ao.apply(this,arguments)}function Ao(){return(Ao=(0,p.Z)(function*(m,c){return Fn(m,"POST","/v1/accounts:update",c)})).apply(this,arguments)}function fs(m,c){return $n.apply(this,arguments)}function $n(){return($n=(0,p.Z)(function*(m,c){return Fn(m,"POST","/v1/accounts:update",an(m,c))})).apply(this,arguments)}function ci(){return(ci=(0,p.Z)(function*(m,c){return Tr(m,"POST","/v1/accounts:signInWithPassword",an(m,c))})).apply(this,arguments)}function Vi(m,c){return qi.apply(this,arguments)}function qi(){return(qi=(0,p.Z)(function*(m,c){return Fn(m,"POST","/v1/accounts:sendOobCode",an(m,c))})).apply(this,arguments)}function Mr(m,c){return ss.apply(this,arguments)}function ss(){return(ss=(0,p.Z)(function*(m,c){return Vi(m,c)})).apply(this,arguments)}function Ir(m,c){return oi.apply(this,arguments)}function oi(){return(oi=(0,p.Z)(function*(m,c){return Vi(m,c)})).apply(this,arguments)}function Fs(m,c){return Ms.apply(this,arguments)}function Ms(){return(Ms=(0,p.Z)(function*(m,c){return Vi(m,c)})).apply(this,arguments)}function ro(m,c){return Rr.apply(this,arguments)}function Rr(){return(Rr=(0,p.Z)(function*(m,c){return Vi(m,c)})).apply(this,arguments)}function Zi(){return(Zi=(0,p.Z)(function*(m,c){return Tr(m,"POST","/v1/accounts:signInWithEmailLink",an(m,c))})).apply(this,arguments)}function Ls(){return(Ls=(0,p.Z)(function*(m,c){return Tr(m,"POST","/v1/accounts:signInWithEmailLink",an(m,c))})).apply(this,arguments)}class Rs extends pr{constructor(c,f,E,B=null){super("password",E),this._email=c,this._password=f,this._tenantId=B}static _fromEmailAndPassword(c,f){return new Rs(c,f,"password")}static _fromEmailAndCode(c,f,E=null){return new Rs(c,f,"emailLink",E)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(c){const f="string"==typeof c?JSON.parse(c):c;if(f?.email&&f?.password){if("password"===f.signInMethod)return this._fromEmailAndPassword(f.email,f.password);if("emailLink"===f.signInMethod)return this._fromEmailAndCode(f.email,f.password,f.tenantId)}return null}_getIdTokenResponse(c){var f=this;return(0,p.Z)(function*(){switch(f.signInMethod){case"password":return function ps(m,c){return ci.apply(this,arguments)}(c,{returnSecureToken:!0,email:f._email,password:f._password});case"emailLink":return function io(m,c){return Zi.apply(this,arguments)}(c,{email:f._email,oobCode:f._password});default:he(c,"internal-error")}})()}_linkToIdToken(c,f){var E=this;return(0,p.Z)(function*(){switch(E.signInMethod){case"password":return Kn(c,{idToken:f,returnSecureToken:!0,email:E._email,password:E._password});case"emailLink":return function jo(m,c){return Ls.apply(this,arguments)}(c,{idToken:f,email:E._email,oobCode:E._password});default:he(c,"internal-error")}})()}_getReauthenticationResolver(c){return this._getIdTokenResponse(c)}}function Wr(m,c){return Ae.apply(this,arguments)}function Ae(){return(Ae=(0,p.Z)(function*(m,c){return Tr(m,"POST","/v1/accounts:signInWithIdp",an(m,c))})).apply(this,arguments)}class Pe extends pr{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(c){const f=new Pe(c.providerId,c.signInMethod);return c.idToken||c.accessToken?(c.idToken&&(f.idToken=c.idToken),c.accessToken&&(f.accessToken=c.accessToken),c.nonce&&!c.pendingToken&&(f.nonce=c.nonce),c.pendingToken&&(f.pendingToken=c.pendingToken)):c.oauthToken&&c.oauthTokenSecret?(f.accessToken=c.oauthToken,f.secret=c.oauthTokenSecret):he("argument-error"),f}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(c){const f="string"==typeof c?JSON.parse(c):c,{providerId:E,signInMethod:B}=f,Q=(0,we._T)(f,["providerId","signInMethod"]);if(!E||!B)return null;const be=new Pe(E,B);return be.idToken=Q.idToken||void 0,be.accessToken=Q.accessToken||void 0,be.secret=Q.secret,be.nonce=Q.nonce,be.pendingToken=Q.pendingToken||null,be}_getIdTokenResponse(c){return Wr(c,this.buildRequest())}_linkToIdToken(c,f){const E=this.buildRequest();return E.idToken=f,Wr(c,E)}_getReauthenticationResolver(c){const f=this.buildRequest();return f.autoCreate=!1,Wr(c,f)}buildRequest(){const c={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)c.pendingToken=this.pendingToken;else{const f={};this.idToken&&(f.id_token=this.idToken),this.accessToken&&(f.access_token=this.accessToken),this.secret&&(f.oauth_token_secret=this.secret),f.providerId=this.providerId,this.nonce&&!this.pendingToken&&(f.nonce=this.nonce),c.postBody=(0,G.xO)(f)}return c}}function ot(m,c){return wt.apply(this,arguments)}function wt(){return(wt=(0,p.Z)(function*(m,c){return Fn(m,"POST","/v1/accounts:sendVerificationCode",an(m,c))})).apply(this,arguments)}function _n(){return(_n=(0,p.Z)(function*(m,c){return Tr(m,"POST","/v1/accounts:signInWithPhoneNumber",an(m,c))})).apply(this,arguments)}function or(){return(or=(0,p.Z)(function*(m,c){const f=yield Tr(m,"POST","/v1/accounts:signInWithPhoneNumber",an(m,c));if(f.temporaryProof)throw Ln(m,"account-exists-with-different-credential",f);return f})).apply(this,arguments)}const hi={USER_NOT_FOUND:"user-not-found"};function Vs(){return(Vs=(0,p.Z)(function*(m,c){return Tr(m,"POST","/v1/accounts:signInWithPhoneNumber",an(m,Object.assign(Object.assign({},c),{operation:"REAUTH"})),hi)})).apply(this,arguments)}class ai extends pr{constructor(c){super("phone","phone"),this.params=c}static _fromVerification(c,f){return new ai({verificationId:c,verificationCode:f})}static _fromTokenResponse(c,f){return new ai({phoneNumber:c,temporaryProof:f})}_getIdTokenResponse(c){return function Kt(m,c){return _n.apply(this,arguments)}(c,this._makeVerificationRequest())}_linkToIdToken(c,f){return function di(m,c){return or.apply(this,arguments)}(c,Object.assign({idToken:f},this._makeVerificationRequest()))}_getReauthenticationResolver(c){return function so(m,c){return Vs.apply(this,arguments)}(c,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:c,phoneNumber:f,verificationId:E,verificationCode:B}=this.params;return c&&f?{temporaryProof:c,phoneNumber:f}:{sessionInfo:E,code:B}}toJSON(){const c={providerId:this.providerId};return this.params.phoneNumber&&(c.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(c.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(c.verificationCode=this.params.verificationCode),this.params.verificationId&&(c.verificationId=this.params.verificationId),c}static fromJSON(c){"string"==typeof c&&(c=JSON.parse(c));const{verificationId:f,verificationCode:E,phoneNumber:B,temporaryProof:Q}=c;return E||f||B||Q?new ai({verificationId:f,verificationCode:E,phoneNumber:B,temporaryProof:Q}):null}}class fi{constructor(c){var f,E,B,Q,be,Xe;const Rt=(0,G.zd)((0,G.pd)(c)),sn=null!==(f=Rt.apiKey)&&void 0!==f?f:null,Mn=null!==(E=Rt.oobCode)&&void 0!==E?E:null,bn=function Br(m){switch(m){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(B=Rt.mode)&&void 0!==B?B:null);oe(sn&&Mn&&bn,"argument-error"),this.apiKey=sn,this.operation=bn,this.code=Mn,this.continueUrl=null!==(Q=Rt.continueUrl)&&void 0!==Q?Q:null,this.languageCode=null!==(be=Rt.languageCode)&&void 0!==be?be:null,this.tenantId=null!==(Xe=Rt.tenantId)&&void 0!==Xe?Xe:null}static parseLink(c){const f=function Ui(m){const c=(0,G.zd)((0,G.pd)(m)).link,f=c?(0,G.zd)((0,G.pd)(c)).deep_link_id:null,E=(0,G.zd)((0,G.pd)(m)).deep_link_id;return(E?(0,G.zd)((0,G.pd)(E)).link:null)||E||f||c||m}(c);try{return new fi(f)}catch{return null}}}let pi=(()=>{class m{constructor(){this.providerId=m.PROVIDER_ID}static credential(f,E){return Rs._fromEmailAndPassword(f,E)}static credentialWithLink(f,E){const B=fi.parseLink(E);return oe(B,"argument-error"),Rs._fromEmailAndCode(f,B.code,B.tenantId)}}return m.PROVIDER_ID="password",m.EMAIL_PASSWORD_SIGN_IN_METHOD="password",m.EMAIL_LINK_SIGN_IN_METHOD="emailLink",m})();class os{constructor(c){this.providerId=c,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(c){this.defaultLanguageCode=c}setCustomParameters(c){return this.customParameters=c,this}getCustomParameters(){return this.customParameters}}class Pi extends os{constructor(){super(...arguments),this.scopes=[]}addScope(c){return this.scopes.includes(c)||this.scopes.push(c),this}getScopes(){return[...this.scopes]}}class as extends Pi{static credentialFromJSON(c){const f="string"==typeof c?JSON.parse(c):c;return oe("providerId"in f&&"signInMethod"in f,"argument-error"),Pe._fromParams(f)}credential(c){return this._credential(Object.assign(Object.assign({},c),{nonce:c.rawNonce}))}_credential(c){return oe(c.idToken||c.accessToken,"argument-error"),Pe._fromParams(Object.assign(Object.assign({},c),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(c){return as.oauthCredentialFromTaggedObject(c)}static credentialFromError(c){return as.oauthCredentialFromTaggedObject(c.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:c}){if(!c)return null;const{oauthIdToken:f,oauthAccessToken:E,oauthTokenSecret:B,pendingToken:Q,nonce:be,providerId:Xe}=c;if(!E&&!B&&!f&&!Q||!Xe)return null;try{return new as(Xe)._credential({idToken:f,accessToken:E,nonce:be,pendingToken:Q})}catch{return null}}}let Ws=(()=>{class m extends Pi{constructor(){super("facebook.com")}static credential(f){return Pe._fromParams({providerId:m.PROVIDER_ID,signInMethod:m.FACEBOOK_SIGN_IN_METHOD,accessToken:f})}static credentialFromResult(f){return m.credentialFromTaggedObject(f)}static credentialFromError(f){return m.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f||!("oauthAccessToken"in f)||!f.oauthAccessToken)return null;try{return m.credential(f.oauthAccessToken)}catch{return null}}}return m.FACEBOOK_SIGN_IN_METHOD="facebook.com",m.PROVIDER_ID="facebook.com",m})(),gs=(()=>{class m extends Pi{constructor(){super("google.com"),this.addScope("profile")}static credential(f,E){return Pe._fromParams({providerId:m.PROVIDER_ID,signInMethod:m.GOOGLE_SIGN_IN_METHOD,idToken:f,accessToken:E})}static credentialFromResult(f){return m.credentialFromTaggedObject(f)}static credentialFromError(f){return m.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{oauthIdToken:E,oauthAccessToken:B}=f;if(!E&&!B)return null;try{return m.credential(E,B)}catch{return null}}}return m.GOOGLE_SIGN_IN_METHOD="google.com",m.PROVIDER_ID="google.com",m})(),wo=(()=>{class m extends Pi{constructor(){super("github.com")}static credential(f){return Pe._fromParams({providerId:m.PROVIDER_ID,signInMethod:m.GITHUB_SIGN_IN_METHOD,accessToken:f})}static credentialFromResult(f){return m.credentialFromTaggedObject(f)}static credentialFromError(f){return m.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f||!("oauthAccessToken"in f)||!f.oauthAccessToken)return null;try{return m.credential(f.oauthAccessToken)}catch{return null}}}return m.GITHUB_SIGN_IN_METHOD="github.com",m.PROVIDER_ID="github.com",m})();class qs extends pr{constructor(c,f){super(c,c),this.pendingToken=f}_getIdTokenResponse(c){return Wr(c,this.buildRequest())}_linkToIdToken(c,f){const E=this.buildRequest();return E.idToken=f,Wr(c,E)}_getReauthenticationResolver(c){const f=this.buildRequest();return f.autoCreate=!1,Wr(c,f)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(c){const f="string"==typeof c?JSON.parse(c):c,{providerId:E,signInMethod:B,pendingToken:Q}=f;return E&&B&&Q&&E===B?new qs(E,Q):null}static _create(c,f){return new qs(c,f)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class lr extends os{constructor(c){oe(c.startsWith("saml."),"argument-error"),super(c)}static credentialFromResult(c){return lr.samlCredentialFromTaggedObject(c)}static credentialFromError(c){return lr.samlCredentialFromTaggedObject(c.customData||{})}static credentialFromJSON(c){const f=qs.fromJSON(c);return oe(f,"argument-error"),f}static samlCredentialFromTaggedObject({_tokenResponse:c}){if(!c)return null;const{pendingToken:f,providerId:E}=c;if(!f||!E)return null;try{return qs._create(E,f)}catch{return null}}}let xi=(()=>{class m extends Pi{constructor(){super("twitter.com")}static credential(f,E){return Pe._fromParams({providerId:m.PROVIDER_ID,signInMethod:m.TWITTER_SIGN_IN_METHOD,oauthToken:f,oauthTokenSecret:E})}static credentialFromResult(f){return m.credentialFromTaggedObject(f)}static credentialFromError(f){return m.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{oauthAccessToken:E,oauthTokenSecret:B}=f;if(!E||!B)return null;try{return m.credential(E,B)}catch{return null}}}return m.TWITTER_SIGN_IN_METHOD="twitter.com",m.PROVIDER_ID="twitter.com",m})();function Ii(m,c){return oo.apply(this,arguments)}function oo(){return(oo=(0,p.Z)(function*(m,c){return Tr(m,"POST","/v1/accounts:signUp",an(m,c))})).apply(this,arguments)}class qr{constructor(c){this.user=c.user,this.providerId=c.providerId,this._tokenResponse=c._tokenResponse,this.operationType=c.operationType}static _fromIdTokenResponse(c,f,E,B=!1){return(0,p.Z)(function*(){const Q=yield Vt._fromIdTokenResponse(c,E,B),be=ao(E);return new qr({user:Q,providerId:be,_tokenResponse:E,operationType:f})})()}static _forOperation(c,f,E){return(0,p.Z)(function*(){yield c._updateTokensIfNecessary(E,!0);const B=ao(E);return new qr({user:c,providerId:B,_tokenResponse:E,operationType:f})})()}}function ao(m){return m.providerId?m.providerId:"phoneNumber"in m?"phone":null}function Fr(){return(Fr=(0,p.Z)(function*(m){var c;const f=Cn(m);if(yield f._initializationPromise,null!==(c=f.currentUser)&&void 0!==c&&c.isAnonymous)return new qr({user:f.currentUser,providerId:null,operationType:"signIn"});const E=yield Ii(f,{returnSecureToken:!0}),B=yield qr._fromIdTokenResponse(f,"signIn",E,!0);return yield f._updateCurrentUser(B.user),B})).apply(this,arguments)}class us extends G.ZR{constructor(c,f,E,B){var Q;super(f.code,f.message),this.operationType=E,this.user=B,Object.setPrototypeOf(this,us.prototype),this.customData={appName:c.name,tenantId:null!==(Q=c.tenantId)&&void 0!==Q?Q:void 0,_serverResponse:f.customData._serverResponse,operationType:E}}static _fromErrorAndOperation(c,f,E,B){return new us(c,f,E,B)}}function Ho(m,c,f,E){return("reauthenticate"===c?f._getReauthenticationResolver(m):f._getIdTokenResponse(m)).catch(Q=>{throw"auth/multi-factor-auth-required"===Q.code?us._fromErrorAndOperation(m,Q,c,E):Q})}function yr(m){return new Set(m.map(({providerId:c})=>c).filter(c=>!!c))}function Ki(){return(Ki=(0,p.Z)(function*(m,c){const f=(0,G.m9)(m);yield Hn(!0,f,c);const{providerUserInfo:E}=yield zn(f.auth,{idToken:yield f.getIdToken(),deleteProvider:[c]}),B=yr(E||[]);return f.providerData=f.providerData.filter(Q=>B.has(Q.providerId)),B.has("phone")||(f.phoneNumber=null),yield f.auth._persistUserIfCurrent(f),f})).apply(this,arguments)}function Bi(m,c){return ui.apply(this,arguments)}function ui(){return(ui=(0,p.Z)(function*(m,c,f=!1){const E=yield Jn(m,c._linkToIdToken(m.auth,yield m.getIdToken()),f);return qr._forOperation(m,"link",E)})).apply(this,arguments)}function Hn(m,c,f){return Sr.apply(this,arguments)}function Sr(){return(Sr=(0,p.Z)(function*(m,c,f){yield Nn(c);const B=!1===m?"provider-already-linked":"no-such-provider";oe(yr(c.providerData).has(f)===m,c.auth,B)})).apply(this,arguments)}function ji(m,c){return Go.apply(this,arguments)}function Go(){return(Go=(0,p.Z)(function*(m,c,f=!1){var E;const{auth:B}=m,Q="reauthenticate";try{const be=yield Jn(m,Ho(B,Q,c,m),f);oe(be.idToken,B,"internal-error");const Xe=$t(be.idToken);oe(Xe,B,"internal-error");const{sub:Rt}=Xe;return oe(m.uid===Rt,B,"user-mismatch"),qr._forOperation(m,Q,be)}catch(be){throw"auth/user-not-found"===(null===(E=be)||void 0===E?void 0:E.code)&&he(B,"user-mismatch"),be}})).apply(this,arguments)}function kn(m,c){return uo.apply(this,arguments)}function uo(){return(uo=(0,p.Z)(function*(m,c,f=!1){const E="signIn",B=yield Ho(m,E,c),Q=yield qr._fromIdTokenResponse(m,E,B);return f||(yield m._updateCurrentUser(Q.user)),Q})).apply(this,arguments)}function Zr(m,c){return pn.apply(this,arguments)}function pn(){return(pn=(0,p.Z)(function*(m,c){return kn(Cn(m),c)})).apply(this,arguments)}function Zs(m,c){return Ks.apply(this,arguments)}function Ks(){return(Ks=(0,p.Z)(function*(m,c){const f=(0,G.m9)(m);return yield Hn(!1,f,c.providerId),Bi(f,c)})).apply(this,arguments)}function xo(m,c){return Us.apply(this,arguments)}function Us(){return(Us=(0,p.Z)(function*(m,c){return ji((0,G.m9)(m),c)})).apply(this,arguments)}function $i(m,c){return ys.apply(this,arguments)}function ys(){return(ys=(0,p.Z)(function*(m,c){return Tr(m,"POST","/v1/accounts:signInWithCustomToken",an(m,c))})).apply(this,arguments)}function Yi(){return(Yi=(0,p.Z)(function*(m,c){const f=Cn(m),E=yield $i(f,{token:c,returnSecureToken:!0}),B=yield qr._fromIdTokenResponse(f,"signIn",E);return yield f._updateCurrentUser(B.user),B})).apply(this,arguments)}class ut{constructor(c,f){this.factorId=c,this.uid=f.mfaEnrollmentId,this.enrollmentTime=new Date(f.enrolledAt).toUTCString(),this.displayName=f.displayName}static _fromServerResponse(c,f){return"phoneInfo"in f?Tn._fromServerResponse(c,f):he(c,"internal-error")}}class Tn extends ut{constructor(c){super("phone",c),this.phoneNumber=c.phoneInfo}static _fromServerResponse(c,f){return new Tn(f)}}function Ys(m,c,f){var E;oe((null===(E=f.url)||void 0===E?void 0:E.length)>0,m,"invalid-continue-uri"),oe(typeof f.dynamicLinkDomain>"u"||f.dynamicLinkDomain.length>0,m,"invalid-dynamic-link-domain"),c.continueUrl=f.url,c.dynamicLinkDomain=f.dynamicLinkDomain,c.canHandleCodeInApp=f.handleCodeInApp,f.iOS&&(oe(f.iOS.bundleId.length>0,m,"missing-ios-bundle-id"),c.iOSBundleId=f.iOS.bundleId),f.android&&(oe(f.android.packageName.length>0,m,"missing-android-pkg-name"),c.androidInstallApp=f.android.installApp,c.androidMinimumVersionCode=f.android.minimumVersion,c.androidPackageName=f.android.packageName)}function Dr(){return(Dr=(0,p.Z)(function*(m,c,f){const E=(0,G.m9)(m),B={requestType:"PASSWORD_RESET",email:c};f&&Ys(E,B,f),yield Ir(E,B)})).apply(this,arguments)}function js(){return(js=(0,p.Z)(function*(m,c,f){yield xr((0,G.m9)(m),{oobCode:c,newPassword:f})})).apply(this,arguments)}function Mo(){return(Mo=(0,p.Z)(function*(m,c){yield fs((0,G.m9)(m),{oobCode:c})})).apply(this,arguments)}function Qs(m,c){return lo.apply(this,arguments)}function lo(){return(lo=(0,p.Z)(function*(m,c){const f=(0,G.m9)(m),E=yield xr(f,{oobCode:c}),B=E.requestType;switch(oe(B,f,"internal-error"),B){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":oe(E.newEmail,f,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":oe(E.mfaInfo,f,"internal-error");default:oe(E.email,f,"internal-error")}let Q=null;return E.mfaInfo&&(Q=ut._fromServerResponse(Cn(f),E.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.newEmail:E.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.email:E.newEmail)||null,multiFactorInfo:Q},operation:B}})).apply(this,arguments)}function L(){return(L=(0,p.Z)(function*(m,c){const{data:f}=yield Qs((0,G.m9)(m),c);return f.email})).apply(this,arguments)}function R(){return(R=(0,p.Z)(function*(m,c,f){const E=Cn(m),B=yield Ii(E,{returnSecureToken:!0,email:c,password:f}),Q=yield qr._fromIdTokenResponse(E,"signIn",B);return yield E._updateCurrentUser(Q.user),Q})).apply(this,arguments)}function Xt(){return(Xt=(0,p.Z)(function*(m,c,f){const E=(0,G.m9)(m),B={requestType:"EMAIL_SIGNIN",email:c};oe(f.handleCodeInApp,E,"argument-error"),f&&Ys(E,B,f),yield Fs(E,B)})).apply(this,arguments)}function Di(){return(Di=(0,p.Z)(function*(m,c,f){const E=(0,G.m9)(m),B=pi.credentialWithLink(c,f||_t());return oe(B._tenantId===(E.tenantId||null),E,"tenant-id-mismatch"),Zr(E,B)})).apply(this,arguments)}function _r(m,c){return _s.apply(this,arguments)}function _s(){return(_s=(0,p.Z)(function*(m,c){return Fn(m,"POST","/v1/accounts:createAuthUri",an(m,c))})).apply(this,arguments)}function vs(){return(vs=(0,p.Z)(function*(m,c){const E={identifier:c,continueUri:Et()?_t():"http://localhost"},{signinMethods:B}=yield _r((0,G.m9)(m),E);return B||[]})).apply(this,arguments)}function co(){return(co=(0,p.Z)(function*(m,c){const f=(0,G.m9)(m),B={requestType:"VERIFY_EMAIL",idToken:yield m.getIdToken()};c&&Ys(f.auth,B,c);const{email:Q}=yield Mr(f.auth,B);Q!==m.email&&(yield m.reload())})).apply(this,arguments)}function dr(){return(dr=(0,p.Z)(function*(m,c,f){const E=(0,G.m9)(m),Q={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield m.getIdToken(),newEmail:c};f&&Ys(E.auth,Q,f);const{email:be}=yield ro(E.auth,Q);be!==m.email&&(yield m.reload())})).apply(this,arguments)}function na(m,c){return Sa.apply(this,arguments)}function Sa(){return(Sa=(0,p.Z)(function*(m,c){return Fn(m,"POST","/v1/accounts:update",c)})).apply(this,arguments)}function Aa(){return(Aa=(0,p.Z)(function*(m,{displayName:c,photoURL:f}){if(void 0===c&&void 0===f)return;const E=(0,G.m9)(m),Q={idToken:yield E.getIdToken(),displayName:c,photoUrl:f,returnSecureToken:!0},be=yield Jn(E,na(E.auth,Q));E.displayName=be.displayName||null,E.photoURL=be.photoUrl||null;const Xe=E.providerData.find(({providerId:Rt})=>"password"===Rt);Xe&&(Xe.displayName=E.displayName,Xe.photoURL=E.photoURL),yield E._updateTokensIfNecessary(be)})).apply(this,arguments)}function N(m,c,f){return Z.apply(this,arguments)}function Z(){return(Z=(0,p.Z)(function*(m,c,f){const{auth:E}=m,Q={idToken:yield m.getIdToken(),returnSecureToken:!0};c&&(Q.email=c),f&&(Q.password=f);const be=yield Jn(m,Kn(E,Q));yield m._updateTokensIfNecessary(be,!0)})).apply(this,arguments)}class Be{constructor(c,f,E={}){this.isNewUser=c,this.providerId=f,this.profile=E}}class Qe extends Be{constructor(c,f,E,B){super(c,f,E),this.username=B}}class Zt extends Be{constructor(c,f){super(c,"facebook.com",f)}}class Yn extends Qe{constructor(c,f){super(c,"github.com",f,"string"==typeof f?.login?f?.login:null)}}class er extends Be{constructor(c,f){super(c,"google.com",f)}}class qn extends Qe{constructor(c,f,E){super(c,"twitter.com",f,E)}}function Un(m){const{user:c,_tokenResponse:f}=m;return c.isAnonymous&&!f?{providerId:null,isNewUser:!1,profile:null}:function de(m){var c,f;if(!m)return null;const{providerId:E}=m,B=m.rawUserInfo?JSON.parse(m.rawUserInfo):{},Q=m.isNewUser||"identitytoolkit#SignupNewUserResponse"===m.kind;if(!E&&m?.idToken){const be=null===(f=null===(c=$t(m.idToken))||void 0===c?void 0:c.firebase)||void 0===f?void 0:f.sign_in_provider;if(be)return new Be(Q,"anonymous"!==be&&"custom"!==be?be:null)}if(!E)return null;switch(E){case"facebook.com":return new Zt(Q,B);case"github.com":return new Yn(Q,B);case"google.com":return new er(Q,B);case"twitter.com":return new qn(Q,B,m.screenName||null);case"custom":case"anonymous":return new Be(Q,null);default:return new Be(Q,E,B)}}(f)}class Ns{constructor(c,f){this.type=c,this.credential=f}static _fromIdtoken(c){return new Ns("enroll",c)}static _fromMfaPendingCredential(c){return new Ns("signin",c)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(c){var f,E;if(c?.multiFactorSession){if(null!==(f=c.multiFactorSession)&&void 0!==f&&f.pendingCredential)return Ns._fromMfaPendingCredential(c.multiFactorSession.pendingCredential);if(null!==(E=c.multiFactorSession)&&void 0!==E&&E.idToken)return Ns._fromIdtoken(c.multiFactorSession.idToken)}return null}}class zo{constructor(c,f,E){this.session=c,this.hints=f,this.signInResolver=E}static _fromError(c,f){const E=Cn(c),B=f.customData._serverResponse,Q=(B.mfaInfo||[]).map(Xe=>ut._fromServerResponse(E,Xe));oe(B.mfaPendingCredential,E,"internal-error");const be=Ns._fromMfaPendingCredential(B.mfaPendingCredential);return new zo(be,Q,function(){var Xe=(0,p.Z)(function*(Rt){const sn=yield Rt._process(E,be);delete B.mfaInfo,delete B.mfaPendingCredential;const Mn=Object.assign(Object.assign({},B),{idToken:sn.idToken,refreshToken:sn.refreshToken});switch(f.operationType){case"signIn":const bn=yield qr._fromIdTokenResponse(E,f.operationType,Mn);return yield E._updateCurrentUser(bn.user),bn;case"reauthenticate":return oe(f.user,E,"internal-error"),qr._forOperation(f.user,f.operationType,Mn);default:he(E,"internal-error")}});return function(Rt){return Xe.apply(this,arguments)}}())}resolveSignIn(c){var f=this;return(0,p.Z)(function*(){return f.signInResolver(c)})()}}function fa(m,c){return Fn(m,"POST","/v2/accounts/mfaEnrollment:start",an(m,c))}class ou{constructor(c){this.user=c,this.enrolledFactors=[],c._onReload(f=>{f.mfaInfo&&(this.enrolledFactors=f.mfaInfo.map(E=>ut._fromServerResponse(c.auth,E)))})}static _fromUser(c){return new ou(c)}getSession(){var c=this;return(0,p.Z)(function*(){return Ns._fromIdtoken(yield c.user.getIdToken())})()}enroll(c,f){var E=this;return(0,p.Z)(function*(){const B=c,Q=yield E.getSession(),be=yield Jn(E.user,B._process(E.user.auth,Q,f));return yield E.user._updateTokensIfNecessary(be),E.user.reload()})()}unenroll(c){var f=this;return(0,p.Z)(function*(){var E;const B="string"==typeof c?c:c.uid,Q=yield f.user.getIdToken(),be=yield Jn(f.user,function xu(m,c){return Fn(m,"POST","/v2/accounts/mfaEnrollment:withdraw",an(m,c))}(f.user.auth,{idToken:Q,mfaEnrollmentId:B}));f.enrolledFactors=f.enrolledFactors.filter(({uid:Xe})=>Xe!==B),yield f.user._updateTokensIfNecessary(be);try{yield f.user.reload()}catch(Xe){if("auth/user-token-expired"!==(null===(E=Xe)||void 0===E?void 0:E.code))throw Xe}})()}}const Ro=new WeakMap,Wo="__sak";class Ma{constructor(c,f){this.storageRetriever=c,this.type=f}_isAvailable(){try{return this.storage?(this.storage.setItem(Wo,"1"),this.storage.removeItem(Wo),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(c,f){return this.storage.setItem(c,JSON.stringify(f)),Promise.resolve()}_get(c){const f=this.storage.getItem(c);return Promise.resolve(f?JSON.parse(f):null)}_remove(c){return this.storage.removeItem(c),Promise.resolve()}get storage(){return this.storageRetriever()}}const ya=(()=>{class m extends Ma{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(f,E)=>this.onStorageEvent(f,E),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function ga(){const m=(0,G.z$)();return vr(m)||re(m)}()&&function En(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=hn(),this._shouldAllowMigration=!0}forAllChangedKeys(f){for(const E of Object.keys(this.listeners)){const B=this.storage.getItem(E),Q=this.localCache[E];B!==Q&&f(E,Q,B)}}onStorageEvent(f,E=!1){if(!f.key)return void this.forAllChangedKeys((Xe,Rt,sn)=>{this.notifyListeners(Xe,sn)});const B=f.key;if(E?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const Xe=this.storage.getItem(B);if(f.newValue!==Xe)null!==f.newValue?this.storage.setItem(B,f.newValue):this.storage.removeItem(B);else if(this.localCache[B]===f.newValue&&!E)return}const Q=()=>{const Xe=this.storage.getItem(B);!E&&this.localCache[B]===Xe||this.notifyListeners(B,Xe)},be=this.storage.getItem(B);!function Ut(){return(0,G.w1)()&&10===document.documentMode}()||be===f.newValue||f.newValue===f.oldValue?Q():setTimeout(Q,10)}notifyListeners(f,E){this.localCache[f]=E;const B=this.listeners[f];if(B)for(const Q of Array.from(B))Q(E&&JSON.parse(E))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((f,E,B)=>{this.onStorageEvent(new StorageEvent("storage",{key:f,oldValue:E,newValue:B}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(f,E){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[f]||(this.listeners[f]=new Set,this.localCache[f]=this.storage.getItem(f)),this.listeners[f].add(E)}_removeListener(f,E){this.listeners[f]&&(this.listeners[f].delete(E),0===this.listeners[f].size&&delete this.listeners[f]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(f,E){var B=()=>super._set,Q=this;return(0,p.Z)(function*(){yield B().call(Q,f,E),Q.localCache[f]=JSON.stringify(E)})()}_get(f){var E=()=>super._get,B=this;return(0,p.Z)(function*(){const Q=yield E().call(B,f);return B.localCache[f]=JSON.stringify(Q),Q})()}_remove(f){var E=()=>super._remove,B=this;return(0,p.Z)(function*(){yield E().call(B,f),delete B.localCache[f]})()}}return m.type="LOCAL",m})(),Oo=(()=>{class m extends Ma{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(f,E){}_removeListener(f,E){}}return m.type="SESSION",m})();let Mu=(()=>{class m{constructor(f){this.eventTarget=f,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(f){const E=this.receivers.find(Q=>Q.isListeningto(f));if(E)return E;const B=new m(f);return this.receivers.push(B),B}isListeningto(f){return this.eventTarget===f}handleEvent(f){var E=this;return(0,p.Z)(function*(){const B=f,{eventId:Q,eventType:be,data:Xe}=B.data,Rt=E.handlersMap[be];if(!Rt?.size)return;B.ports[0].postMessage({status:"ack",eventId:Q,eventType:be});const sn=Array.from(Rt).map(function(){var bn=(0,p.Z)(function*(es){return es(B.origin,Xe)});return function(es){return bn.apply(this,arguments)}}()),Mn=yield function Ra(m){return Promise.all(m.map(function(){var c=(0,p.Z)(function*(f){try{return{fulfilled:!0,value:yield f}}catch(E){return{fulfilled:!1,reason:E}}});return function(f){return c.apply(this,arguments)}}()))}(sn);B.ports[0].postMessage({status:"done",eventId:Q,eventType:be,response:Mn})})()}_subscribe(f,E){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[f]||(this.handlersMap[f]=new Set),this.handlersMap[f].add(E)}_unsubscribe(f,E){this.handlersMap[f]&&E&&this.handlersMap[f].delete(E),(!E||0===this.handlersMap[f].size)&&delete this.handlersMap[f],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return m.receivers=[],m})();function Oa(m="",c=10){let f="";for(let E=0;E<c;E++)f+=Math.floor(10*Math.random());return m+f}class Na{constructor(c){this.target=c,this.handlers=new Set}removeMessageHandler(c){c.messageChannel&&(c.messageChannel.port1.removeEventListener("message",c.onMessage),c.messageChannel.port1.close()),this.handlers.delete(c)}_send(c,f,E=50){var B=this;return(0,p.Z)(function*(){const Q=typeof MessageChannel<"u"?new MessageChannel:null;if(!Q)throw new Error("connection_unavailable");let be,Xe;return new Promise((Rt,sn)=>{const Mn=Oa("",20);Q.port1.start();const bn=setTimeout(()=>{sn(new Error("unsupported_event"))},E);Xe={messageChannel:Q,onMessage(es){const aa=es;if(aa.data.eventId===Mn)switch(aa.data.status){case"ack":clearTimeout(bn),be=setTimeout(()=>{sn(new Error("timeout"))},3e3);break;case"done":clearTimeout(be),Rt(aa.data.response);break;default:clearTimeout(bn),clearTimeout(be),sn(new Error("invalid_response"))}}},B.handlers.add(Xe),Q.port1.addEventListener("message",Xe.onMessage),B.target.postMessage({eventType:c,eventId:Mn,data:f},[Q.port2])}).finally(()=>{Xe&&B.removeMessageHandler(Xe)})})()}}function gi(){return window}function No(){return typeof gi().WorkerGlobalScope<"u"&&"function"==typeof gi().importScripts}function Ps(){return(Ps=(0,p.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const ks="firebaseLocalStorageDb",qo="firebaseLocalStorage",It="fbase_key";class Cr{constructor(c){this.request=c}toPromise(){return new Promise((c,f)=>{this.request.addEventListener("success",()=>{c(this.request.result)}),this.request.addEventListener("error",()=>{f(this.request.error)})})}}function fo(m,c){return m.transaction([qo],c?"readwrite":"readonly").objectStore(qo)}function Gt(){const m=indexedDB.open(ks,1);return new Promise((c,f)=>{m.addEventListener("error",()=>{f(m.error)}),m.addEventListener("upgradeneeded",()=>{const E=m.result;try{E.createObjectStore(qo,{keyPath:It})}catch(B){f(B)}}),m.addEventListener("success",(0,p.Z)(function*(){const E=m.result;E.objectStoreNames.contains(qo)?c(E):(E.close(),yield function Pa(){const m=indexedDB.deleteDatabase(ks);return new Cr(m).toPromise()}(),c(yield Gt()))}))})}function ln(m,c,f){return va.apply(this,arguments)}function va(){return(va=(0,p.Z)(function*(m,c,f){const E=fo(m,!0).put({[It]:c,value:f});return new Cr(E).toPromise()})).apply(this,arguments)}function We(){return(We=(0,p.Z)(function*(m,c){const f=fo(m,!1).get(c),E=yield new Cr(f).toPromise();return void 0===E?null:E.value})).apply(this,arguments)}function ft(m,c){const f=fo(m,!0).delete(c);return new Cr(f).toPromise()}const ia=(()=>{class m{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var f=this;return(0,p.Z)(function*(){return f.db||(f.db=yield Gt()),f.db})()}_withRetries(f){var E=this;return(0,p.Z)(function*(){let B=0;for(;;)try{const Q=yield E._openDb();return yield f(Q)}catch(Q){if(B++>3)throw Q;E.db&&(E.db.close(),E.db=void 0)}})()}initializeServiceWorkerMessaging(){var f=this;return(0,p.Z)(function*(){return No()?f.initializeReceiver():f.initializeSender()})()}initializeReceiver(){var f=this;return(0,p.Z)(function*(){f.receiver=Mu._getInstance(function Do(){return No()?self:null}()),f.receiver._subscribe("keyChanged",function(){var E=(0,p.Z)(function*(B,Q){return{keyProcessed:(yield f._poll()).includes(Q.key)}});return function(B,Q){return E.apply(this,arguments)}}()),f.receiver._subscribe("ping",function(){var E=(0,p.Z)(function*(B,Q){return["keyChanged"]});return function(B,Q){return E.apply(this,arguments)}}())})()}initializeSender(){var f=this;return(0,p.Z)(function*(){var E,B;if(f.activeServiceWorker=yield function ra(){return Ps.apply(this,arguments)}(),!f.activeServiceWorker)return;f.sender=new Na(f.activeServiceWorker);const Q=yield f.sender._send("ping",{},800);!Q||(null===(E=Q[0])||void 0===E?void 0:E.fulfilled)&&(null===(B=Q[0])||void 0===B?void 0:B.value.includes("keyChanged"))&&(f.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(f){var E=this;return(0,p.Z)(function*(){if(E.sender&&E.activeServiceWorker&&function Ci(){var m;return(null===(m=navigator?.serviceWorker)||void 0===m?void 0:m.controller)||null}()===E.activeServiceWorker)try{yield E.sender._send("keyChanged",{key:f},E.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,p.Z)(function*(){try{if(!indexedDB)return!1;const f=yield Gt();return yield ln(f,Wo,"1"),yield ft(f,Wo),!0}catch{}return!1})()}_withPendingWrite(f){var E=this;return(0,p.Z)(function*(){E.pendingWrites++;try{yield f()}finally{E.pendingWrites--}})()}_set(f,E){var B=this;return(0,p.Z)(function*(){return B._withPendingWrite((0,p.Z)(function*(){return yield B._withRetries(Q=>ln(Q,f,E)),B.localCache[f]=E,B.notifyServiceWorker(f)}))})()}_get(f){var E=this;return(0,p.Z)(function*(){const B=yield E._withRetries(Q=>function Lt(m,c){return We.apply(this,arguments)}(Q,f));return E.localCache[f]=B,B})()}_remove(f){var E=this;return(0,p.Z)(function*(){return E._withPendingWrite((0,p.Z)(function*(){return yield E._withRetries(B=>ft(B,f)),delete E.localCache[f],E.notifyServiceWorker(f)}))})()}_poll(){var f=this;return(0,p.Z)(function*(){const E=yield f._withRetries(be=>{const Xe=fo(be,!1).getAll();return new Cr(Xe).toPromise()});if(!E)return[];if(0!==f.pendingWrites)return[];const B=[],Q=new Set;for(const{fbase_key:be,value:Xe}of E)Q.add(be),JSON.stringify(f.localCache[be])!==JSON.stringify(Xe)&&(f.notifyListeners(be,Xe),B.push(be));for(const be of Object.keys(f.localCache))f.localCache[be]&&!Q.has(be)&&(f.notifyListeners(be,null),B.push(be));return B})()}notifyListeners(f,E){this.localCache[f]=E;const B=this.listeners[f];if(B)for(const Q of Array.from(B))Q(E)}startPolling(){var f=this;this.stopPolling(),this.pollTimer=setInterval((0,p.Z)(function*(){return f._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(f,E){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[f]||(this.listeners[f]=new Set,this._get(f)),this.listeners[f].add(E)}_removeListener(f,E){this.listeners[f]&&(this.listeners[f].delete(E),0===this.listeners[f].size&&delete this.listeners[f]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return m.type="LOCAL",m})();function wa(m,c){return Fn(m,"POST","/v2/accounts/mfaSignIn:start",an(m,c))}function I(){return(I=(0,p.Z)(function*(m){return(yield Fn(m,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function q(m){return new Promise((c,f)=>{const E=document.createElement("script");E.setAttribute("src",m),E.onload=c,E.onerror=B=>{const Q=tt("internal-error");Q.customData=B,f(Q)},E.type="text/javascript",E.charset="UTF-8",function M(){var m,c;return null!==(c=null===(m=document.getElementsByTagName("head"))||void 0===m?void 0:m[0])&&void 0!==c?c:document}().appendChild(E)})}function X(m){return`__${m}${Math.floor(1e6*Math.random())}`}const bt=1e12;class nt{constructor(c){this.auth=c,this.counter=bt,this._widgets=new Map}render(c,f){const E=this.counter;return this._widgets.set(E,new Nt(c,this.auth.name,f||{})),this.counter++,E}reset(c){var f;const E=c||bt;null===(f=this._widgets.get(E))||void 0===f||f.delete(),this._widgets.delete(E)}getResponse(c){var f;return(null===(f=this._widgets.get(c||bt))||void 0===f?void 0:f.getResponse())||""}execute(c){var f=this;return(0,p.Z)(function*(){var E;return null===(E=f._widgets.get(c||bt))||void 0===E||E.execute(),""})()}}class Nt{constructor(c,f,E){this.params=E,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const B="string"==typeof c?document.getElementById(c):c;oe(B,"argument-error",{appName:f}),this.container=B,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Tt(m){const c=[],f="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let E=0;E<m;E++)c.push(f.charAt(Math.floor(Math.random()*f.length)));return c.join("")}(50);const{callback:c,"expired-callback":f}=this.params;if(c)try{c(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,f)try{f()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Qn=X("rcb"),Yt=new tn(3e4,6e4);class nn{constructor(){var c;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(c=gi().grecaptcha)||void 0===c||!c.render)}load(c,f=""){return oe(function Dt(m){return m.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(m)}(f),c,"argument-error"),this.shouldResolveImmediately(f)?Promise.resolve(gi().grecaptcha):new Promise((E,B)=>{const Q=gi().setTimeout(()=>{B(tt(c,"network-request-failed"))},Yt.get());gi()[Qn]=()=>{gi().clearTimeout(Q),delete gi()[Qn];const Xe=gi().grecaptcha;if(!Xe)return void B(tt(c,"internal-error"));const Rt=Xe.render;Xe.render=(sn,Mn)=>{const bn=Rt(sn,Mn);return this.counter++,bn},this.hostLanguage=f,E(Xe)},q(`https://www.google.com/recaptcha/api.js??${(0,G.xO)({onload:Qn,render:"explicit",hl:f})}`).catch(()=>{clearTimeout(Q),B(tt(c,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(c){var f;return!(null===(f=gi().grecaptcha)||void 0===f||!f.render)&&(c===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class wr{load(c){return(0,p.Z)(function*(){return new nt(c)})()}clearedOneInstance(){}}const Kr="recaptcha",Qi={theme:"light",type:"image"};class hr{constructor(c,f=Object.assign({},Qi),E){this.parameters=f,this.type=Kr,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Cn(E),this.isInvisible="invisible"===this.parameters.size,oe(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const B="string"==typeof c?document.getElementById(c):c;oe(B,this.auth,"argument-error"),this.container=B,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new wr:new nn,this.validateStartingState()}verify(){var c=this;return(0,p.Z)(function*(){c.assertNotDestroyed();const f=yield c.render(),E=c.getAssertedRecaptcha();return E.getResponse(f)||new Promise(Q=>{const be=Xe=>{!Xe||(c.tokenChangeListeners.delete(be),Q(Xe))};c.tokenChangeListeners.add(be),c.isInvisible&&E.execute(f)})})()}render(){try{this.assertNotDestroyed()}catch(c){return Promise.reject(c)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(c=>{throw this.renderPromise=null,c})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(c=>{this.container.removeChild(c)})}validateStartingState(){oe(!this.parameters.sitekey,this.auth,"argument-error"),oe(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),oe(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(c){return f=>{if(this.tokenChangeListeners.forEach(E=>E(f)),"function"==typeof c)c(f);else if("string"==typeof c){const E=gi()[c];"function"==typeof E&&E(f)}}}assertNotDestroyed(){oe(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var c=this;return(0,p.Z)(function*(){if(yield c.init(),!c.widgetId){let f=c.container;if(!c.isInvisible){const E=document.createElement("div");f.appendChild(E),f=E}c.widgetId=c.getAssertedRecaptcha().render(f,c.parameters)}return c.widgetId})()}init(){var c=this;return(0,p.Z)(function*(){oe(Et()&&!No(),c.auth,"internal-error"),yield function Yr(){let m=null;return new Promise(c=>{"complete"!==document.readyState?(m=()=>c(),window.addEventListener("load",m)):c()}).catch(c=>{throw m&&window.removeEventListener("load",m),c})}(),c.recaptcha=yield c._recaptchaLoader.load(c.auth,c.auth.languageCode||void 0);const f=yield function b(m){return I.apply(this,arguments)}(c.auth);oe(f,c.auth,"internal-error"),c.parameters.sitekey=f})()}getAssertedRecaptcha(){return oe(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class po{constructor(c,f){this.verificationId=c,this.onConfirmation=f}confirm(c){const f=ai._fromVerification(this.verificationId,c);return this.onConfirmation(f)}}function Co(){return(Co=(0,p.Z)(function*(m,c,f){const E=Cn(m),B=yield sa(E,c,(0,G.m9)(f));return new po(B,Q=>Zr(E,Q))})).apply(this,arguments)}function $r(){return($r=(0,p.Z)(function*(m,c,f){const E=(0,G.m9)(m);yield Hn(!1,E,"phone");const B=yield sa(E.auth,c,(0,G.m9)(f));return new po(B,Q=>Zs(E,Q))})).apply(this,arguments)}function ka(){return(ka=(0,p.Z)(function*(m,c,f){const E=(0,G.m9)(m),B=yield sa(E.auth,c,(0,G.m9)(f));return new po(B,Q=>xo(E,Q))})).apply(this,arguments)}function sa(m,c,f){return ko.apply(this,arguments)}function ko(){return(ko=(0,p.Z)(function*(m,c,f){var E;const B=yield f.verify();try{let Q;if(oe("string"==typeof B,m,"argument-error"),oe(f.type===Kr,m,"argument-error"),Q="string"==typeof c?{phoneNumber:c}:c,"session"in Q){const be=Q.session;if("phoneNumber"in Q)return oe("enroll"===be.type,m,"internal-error"),(yield fa(m,{idToken:be.credential,phoneEnrollmentInfo:{phoneNumber:Q.phoneNumber,recaptchaToken:B}})).phoneSessionInfo.sessionInfo;{oe("signin"===be.type,m,"internal-error");const Xe=(null===(E=Q.multiFactorHint)||void 0===E?void 0:E.uid)||Q.multiFactorUid;return oe(Xe,m,"missing-multi-factor-info"),(yield wa(m,{mfaPendingCredential:be.credential,mfaEnrollmentId:Xe,phoneSignInInfo:{recaptchaToken:B}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:be}=yield ot(m,{phoneNumber:Q.phoneNumber,recaptchaToken:B});return be}}finally{f._reset()}})).apply(this,arguments)}function je(){return(je=(0,p.Z)(function*(m,c){yield Bi((0,G.m9)(m),c)})).apply(this,arguments)}let Fa=(()=>{class m{constructor(f){this.providerId=m.PROVIDER_ID,this.auth=Cn(f)}verifyPhoneNumber(f,E){return sa(this.auth,f,(0,G.m9)(E))}static credential(f,E){return ai._fromVerification(f,E)}static credentialFromResult(f){return m.credentialFromTaggedObject(f)}static credentialFromError(f){return m.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{phoneNumber:E,temporaryProof:B}=f;return E&&B?ai._fromTokenResponse(E,B):null}}return m.PROVIDER_ID="phone",m.PHONE_SIGN_IN_METHOD="phone",m})();function Is(m,c){return c?ce(c):(oe(m._popupRedirectResolver,m,"argument-error"),m._popupRedirectResolver)}class Qa extends pr{constructor(c){super("custom","custom"),this.params=c}_getIdTokenResponse(c){return Wr(c,this._buildIdpRequest())}_linkToIdToken(c,f){return Wr(c,this._buildIdpRequest(f))}_getReauthenticationResolver(c){return Wr(c,this._buildIdpRequest())}_buildIdpRequest(c){const f={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return c&&(f.idToken=c),f}}function Ds(m){return kn(m.auth,new Qa(m),m.bypassAuthState)}function Fo(m){const{auth:c,user:f}=m;return oe(f,c,"internal-error"),ji(f,new Qa(m),m.bypassAuthState)}function v(m){return w.apply(this,arguments)}function w(){return(w=(0,p.Z)(function*(m){const{auth:c,user:f}=m;return oe(f,c,"internal-error"),Bi(f,new Qa(m),m.bypassAuthState)})).apply(this,arguments)}class _{constructor(c,f,E,B,Q=!1){this.auth=c,this.resolver=E,this.user=B,this.bypassAuthState=Q,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(f)?f:[f]}execute(){var c=this;return new Promise(function(){var f=(0,p.Z)(function*(E,B){c.pendingPromise={resolve:E,reject:B};try{c.eventManager=yield c.resolver._initialize(c.auth),yield c.onExecution(),c.eventManager.registerConsumer(c)}catch(Q){c.reject(Q)}});return function(E,B){return f.apply(this,arguments)}}())}onAuthEvent(c){var f=this;return(0,p.Z)(function*(){const{urlResponse:E,sessionId:B,postBody:Q,tenantId:be,error:Xe,type:Rt}=c;if(Xe)return void f.reject(Xe);const sn={auth:f.auth,requestUri:E,sessionId:B,tenantId:be||void 0,postBody:Q||void 0,user:f.user,bypassAuthState:f.bypassAuthState};try{f.resolve(yield f.getIdpTask(Rt)(sn))}catch(Mn){f.reject(Mn)}})()}onError(c){this.reject(c)}getIdpTask(c){switch(c){case"signInViaPopup":case"signInViaRedirect":return Ds;case"linkViaPopup":case"linkViaRedirect":return v;case"reauthViaPopup":case"reauthViaRedirect":return Fo;default:he(this.auth,"internal-error")}}resolve(c){ne(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(c),this.unregisterAndCleanUp()}reject(c){ne(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(c),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const S=new tn(2e3,1e4);function z(){return(z=(0,p.Z)(function*(m,c,f){const E=Cn(m);yt(m,c,os);const B=Is(E,f);return new en(E,"signInViaPopup",c,B).executeNotNull()})).apply(this,arguments)}function pe(){return(pe=(0,p.Z)(function*(m,c,f){const E=(0,G.m9)(m);yt(E.auth,c,os);const B=Is(E.auth,f);return new en(E.auth,"reauthViaPopup",c,B,E).executeNotNull()})).apply(this,arguments)}function At(){return(At=(0,p.Z)(function*(m,c,f){const E=(0,G.m9)(m);yt(E.auth,c,os);const B=Is(E.auth,f);return new en(E.auth,"linkViaPopup",c,B,E).executeNotNull()})).apply(this,arguments)}let en=(()=>{class m extends _{constructor(f,E,B,Q,be){super(f,E,Q,be),this.provider=B,this.authWindow=null,this.pollId=null,m.currentPopupAction&&m.currentPopupAction.cancel(),m.currentPopupAction=this}executeNotNull(){var f=this;return(0,p.Z)(function*(){const E=yield f.execute();return oe(E,f.auth,"internal-error"),E})()}onExecution(){var f=this;return(0,p.Z)(function*(){ne(1===f.filter.length,"Popup operations only handle one event");const E=Oa();f.authWindow=yield f.resolver._openPopup(f.auth,f.provider,f.filter[0],E),f.authWindow.associatedEvent=E,f.resolver._originValidation(f.auth).catch(B=>{f.reject(B)}),f.resolver._isIframeWebStorageSupported(f.auth,B=>{B||f.reject(tt(f.auth,"web-storage-unsupported"))}),f.pollUserCancellation()})()}get eventId(){var f;return(null===(f=this.authWindow)||void 0===f?void 0:f.associatedEvent)||null}cancel(){this.reject(tt(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,m.currentPopupAction=null}pollUserCancellation(){const f=()=>{var E,B;this.pollId=null!==(B=null===(E=this.authWindow)||void 0===E?void 0:E.window)&&void 0!==B&&B.closed?window.setTimeout(()=>{this.pollId=null,this.reject(tt(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(f,S.get())};f()}}return m.currentPopupAction=null,m})();const yn=new Map;class Bn extends _{constructor(c,f,E=!1){super(c,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],f,void 0,E),this.eventId=null}execute(){var c=()=>super.execute,f=this;return(0,p.Z)(function*(){let E=yn.get(f.auth._key());if(!E){try{const Q=(yield function go(m,c){return Gi.apply(this,arguments)}(f.resolver,f.auth))?yield c().call(f):null;E=()=>Promise.resolve(Q)}catch(B){E=()=>Promise.reject(B)}yn.set(f.auth._key(),E)}return f.bypassAuthState||yn.set(f.auth._key(),()=>Promise.resolve(null)),E()})()}onAuthEvent(c){var f=()=>super.onAuthEvent,E=this;return(0,p.Z)(function*(){if("signInViaRedirect"===c.type)return f().call(E,c);if("unknown"!==c.type){if(c.eventId){const B=yield E.auth._redirectUserForId(c.eventId);if(B)return E.user=B,f().call(E,c);E.resolve(null)}}else E.resolve(null)})()}onExecution(){return(0,p.Z)(function*(){})()}cleanUp(){}}function Gi(){return(Gi=(0,p.Z)(function*(m,c){const f=Li(c),E=mo(m);if(!(yield E._isAvailable()))return!1;const B="true"===(yield E._get(f));return yield E._remove(f),B})).apply(this,arguments)}function li(m,c){return Zo.apply(this,arguments)}function Zo(){return(Zo=(0,p.Z)(function*(m,c){return mo(m)._set(Li(c),"true")})).apply(this,arguments)}function ja(m,c){yn.set(m._key(),c)}function mo(m){return ce(m._redirectPersistence)}function Li(m){return fr("pendingRedirect",m.config.apiKey,m.name)}function O(){return(O=(0,p.Z)(function*(m,c,f){const E=Cn(m);yt(m,c,os);const B=Is(E,f);return yield li(B,E),B._openRedirect(E,c,"signInViaRedirect")})).apply(this,arguments)}function se(){return(se=(0,p.Z)(function*(m,c,f){const E=(0,G.m9)(m);yt(E.auth,c,os);const B=Is(E.auth,f);yield li(B,E.auth);const Q=yield mn(E);return B._openRedirect(E.auth,c,"reauthViaRedirect",Q)})).apply(this,arguments)}function vt(){return(vt=(0,p.Z)(function*(m,c,f){const E=(0,G.m9)(m);yt(E.auth,c,os);const B=Is(E.auth,f);yield Hn(!1,E,c.providerId),yield li(B,E.auth);const Q=yield mn(E);return B._openRedirect(E.auth,c,"linkViaRedirect",Q)})).apply(this,arguments)}function gn(){return(gn=(0,p.Z)(function*(m,c){return yield Cn(m)._initializationPromise,vn(m,c,!1)})).apply(this,arguments)}function vn(m,c){return xn.apply(this,arguments)}function xn(){return(xn=(0,p.Z)(function*(m,c,f=!1){const E=Cn(m),B=Is(E,c),be=yield new Bn(E,B,f).execute();return be&&!f&&(delete be.user._redirectEventId,yield E._persistUserIfCurrent(be.user),yield E._setRedirectUser(null,c)),be})).apply(this,arguments)}function mn(m){return Qr.apply(this,arguments)}function Qr(){return(Qr=(0,p.Z)(function*(m){const c=Oa(`${m.uid}:::`);return m._redirectEventId=c,yield m.auth._setRedirectUser(m),yield m.auth._persistUserIfCurrent(m),c})).apply(this,arguments)}class oa{constructor(c){this.auth=c,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(c){this.consumers.add(c),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,c)&&(this.sendToConsumer(this.queuedRedirectEvent,c),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(c){this.consumers.delete(c)}onEvent(c){if(this.hasEventBeenHandled(c))return!1;let f=!1;return this.consumers.forEach(E=>{this.isEventForConsumer(c,E)&&(f=!0,this.sendToConsumer(c,E),this.saveEventToCache(c))}),this.hasHandledPotentialRedirect||!function Ha(m){switch(m.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Lo(m);default:return!1}}(c)||(this.hasHandledPotentialRedirect=!0,f||(this.queuedRedirectEvent=c,f=!0)),f}sendToConsumer(c,f){var E;if(c.error&&!Lo(c)){const B=(null===(E=c.error.code)||void 0===E?void 0:E.split("auth/")[1])||"internal-error";f.onError(tt(this.auth,B))}else f.onAuthEvent(c)}isEventForConsumer(c,f){const E=null===f.eventId||!!c.eventId&&c.eventId===f.eventId;return f.filter.includes(c.type)&&E}hasEventBeenHandled(c){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has($a(c))}saveEventToCache(c){this.cachedEventUids.add($a(c)),this.lastProcessedEventTime=Date.now()}}function $a(m){return[m.type,m.eventId,m.sessionId,m.tenantId].filter(c=>c).join("-")}function Lo({type:m,error:c}){return"unknown"===m&&"auth/no-auth-event"===c?.code}function Ko(m){return Ga.apply(this,arguments)}function Ga(){return(Ga=(0,p.Z)(function*(m,c={}){return Fn(m,"GET","/v1/projects",c)})).apply(this,arguments)}const Ja=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Ia=/^https?/;function zc(){return(zc=(0,p.Z)(function*(m){if(m.config.emulator)return;const{authorizedDomains:c}=yield Ko(m);for(const f of c)try{if($f(f))return}catch{}he(m,"unauthorized-domain")})).apply(this,arguments)}function $f(m){const c=_t(),{protocol:f,hostname:E}=new URL(c);if(m.startsWith("chrome-extension://")){const be=new URL(m);return""===be.hostname&&""===E?"chrome-extension:"===f&&m.replace("chrome-extension://","")===c.replace("chrome-extension://",""):"chrome-extension:"===f&&be.hostname===E}if(!Ia.test(f))return!1;if(Ja.test(m))return E===m;const B=m.replace(/\./g,"\\.");return new RegExp("^(.+\\."+B+"|"+B+")$","i").test(E)}const Hf=new tn(3e4,6e4);function Wc(){const m=gi().___jsl;if(m?.H)for(const c of Object.keys(m.H))if(m.H[c].r=m.H[c].r||[],m.H[c].L=m.H[c].L||[],m.H[c].r=[...m.H[c].L],m.CP)for(let f=0;f<m.CP.length;f++)m.CP[f]=null}let Cs=null;function Jd(m){return Cs=Cs||function El(m){return new Promise((c,f)=>{var E,B,Q;function be(){Wc(),gapi.load("gapi.iframes",{callback:()=>{c(gapi.iframes.getContext())},ontimeout:()=>{Wc(),f(tt(m,"network-request-failed"))},timeout:Hf.get()})}if(null!==(B=null===(E=gi().gapi)||void 0===E?void 0:E.iframes)&&void 0!==B&&B.Iframe)c(gapi.iframes.getContext());else{if(null===(Q=gi().gapi)||void 0===Q||!Q.load){const Xe=X("iframefcb");return gi()[Xe]=()=>{gapi.load?be():f(tt(m,"network-request-failed"))},q(`https://apis.google.com/js/api.js?onload=${Xe}`).catch(Rt=>f(Rt))}be()}}).catch(c=>{throw Cs=null,c})}(m),Cs}const bi=new tn(5e3,15e3),Yu={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Zc=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Il(m){const c=m.config;oe(c.authDomain,m,"auth-domain-config-required");const f=c.emulator?qt(c,"emulator/auth/iframe"):`https://${m.config.authDomain}/__/auth/iframe`,E={apiKey:c.apiKey,appName:m.name,v:De.SDK_VERSION},B=Zc.get(m.config.apiHost);B&&(E.eid=B);const Q=m._getFrameworks();return Q.length&&(E.fw=Q.join(",")),`${f}?${(0,G.xO)(E).slice(1)}`}function Xa(){return Xa=(0,p.Z)(function*(m){const c=yield Jd(m),f=gi().gapi;return oe(f,m,"internal-error"),c.open({where:document.body,url:Il(m),messageHandlersFilter:f.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Yu,dontclear:!0},E=>new Promise(function(){var B=(0,p.Z)(function*(Q,be){yield E.restyle({setHideOnLeave:!1});const Xe=tt(m,"network-request-failed"),Rt=gi().setTimeout(()=>{be(Xe)},bi.get());function sn(){gi().clearTimeout(Rt),Q(E)}E.ping(sn).then(sn,()=>{be(Xe)})});return function(Q,be){return B.apply(this,arguments)}}()))}),Xa.apply(this,arguments)}const uc={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Cl{constructor(c){this.window=c,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function cc(m,c,f,E,B,Q){oe(m.config.authDomain,m,"auth-domain-config-required"),oe(m.config.apiKey,m,"invalid-api-key");const be={apiKey:m.config.apiKey,appName:m.name,authType:f,redirectUrl:E,v:De.SDK_VERSION,eventId:B};if(c instanceof os){c.setDefaultLanguage(m.languageCode),be.providerId=c.providerId||"",(0,G.xb)(c.getCustomParameters())||(be.customParameters=JSON.stringify(c.getCustomParameters()));for(const[Rt,sn]of Object.entries(Q||{}))be[Rt]=sn}if(c instanceof Pi){const Rt=c.getScopes().filter(sn=>""!==sn);Rt.length>0&&(be.scopes=Rt.join(","))}m.tenantId&&(be.tid=m.tenantId);const Xe=be;for(const Rt of Object.keys(Xe))void 0===Xe[Rt]&&delete Xe[Rt];return`${function lu({config:m}){return m.emulator?qt(m,"emulator/auth/handler"):`https://${m.authDomain}/__/auth/handler`}(m)}?${(0,G.xO)(Xe).slice(1)}`}const cu="webStorageSupport";class eo extends class nh{constructor(c){this.factorId=c}_process(c,f,E){switch(f.type){case"enroll":return this._finalizeEnroll(c,f.credential,E);case"signin":return this._finalizeSignIn(c,f.credential);default:return He("unexpected MultiFactorSessionType")}}}{constructor(c){super("phone"),this.credential=c}static _fromCredential(c){return new eo(c)}_finalizeEnroll(c,f,E){return function xa(m,c){return Fn(m,"POST","/v2/accounts/mfaEnrollment:finalize",an(m,c))}(c,{idToken:f,displayName:E,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(c,f){return function Ea(m,c){return Fn(m,"POST","/v2/accounts/mfaSignIn:finalize",an(m,c))}(c,{mfaPendingCredential:f,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Qu=(()=>{class m{constructor(){}static assertion(f){return eo._fromCredential(f)}}return m.FACTOR_ID="phone",m})();var Ou="@firebase/auth";class ih{constructor(c){this.auth=c,this.internalListeners=new Map}getUid(){var c;return this.assertAuthConfigured(),(null===(c=this.auth.currentUser)||void 0===c?void 0:c.uid)||null}getToken(c){var f=this;return(0,p.Z)(function*(){return f.assertAuthConfigured(),yield f.auth._initializationPromise,f.auth.currentUser?{accessToken:yield f.auth.currentUser.getIdToken(c)}:null})()}addAuthTokenListener(c){if(this.assertAuthConfigured(),this.internalListeners.has(c))return;const f=this.auth.onIdTokenChanged(E=>{var B;c((null===(B=E)||void 0===B?void 0:B.stsTokenManager.accessToken)||null)});this.internalListeners.set(c,f),this.updateProactiveRefresh()}removeAuthTokenListener(c){this.assertAuthConfigured();const f=this.internalListeners.get(c);!f||(this.internalListeners.delete(c),f(),this.updateProactiveRefresh())}assertAuthConfigured(){oe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function bs(){return window}function fc(){return(fc=(0,p.Z)(function*(m,c,f){var E;const{BuildInfo:B}=bs();ne(c.sessionId,"AuthEvent did not contain a session ID");const Q=yield Xc(c.sessionId),be={};return re()?be.ibi=B.packageName:Er()?be.apn=B.packageName:he(m,"operation-not-supported-in-this-environment"),B.displayName&&(be.appDisplayName=B.displayName),be.sessionId=Q,cc(m,f,c.type,void 0,null!==(E=c.eventId)&&void 0!==E?E:void 0,be)})).apply(this,arguments)}function du(){return(du=(0,p.Z)(function*(m){const{BuildInfo:c}=bs(),f={};re()?f.iosBundleId=c.packageName:Er()?f.androidPackageName=c.packageName:he(m,"operation-not-supported-in-this-environment"),yield Ko(m,f)})).apply(this,arguments)}function Nu(){return(Nu=(0,p.Z)(function*(m,c,f){const{cordova:E}=bs();let B=()=>{};try{yield new Promise((Q,be)=>{let Xe=null;function Rt(){var bn;Q();const es=null===(bn=E.plugins.browsertab)||void 0===bn?void 0:bn.close;"function"==typeof es&&es(),"function"==typeof f?.close&&f.close()}function sn(){Xe||(Xe=window.setTimeout(()=>{be(tt(m,"redirect-cancelled-by-user"))},2e3))}function Mn(){"visible"===document?.visibilityState&&sn()}c.addPassiveListener(Rt),document.addEventListener("resume",sn,!1),Er()&&document.addEventListener("visibilitychange",Mn,!1),B=()=>{c.removePassiveListener(Rt),document.removeEventListener("resume",sn,!1),document.removeEventListener("visibilitychange",Mn,!1),Xe&&window.clearTimeout(Xe)}})}finally{B()}})).apply(this,arguments)}function Xc(m){return Tl.apply(this,arguments)}function Tl(){return(Tl=(0,p.Z)(function*(m){const c=ed(m),f=yield crypto.subtle.digest("SHA-256",c);return Array.from(new Uint8Array(f)).map(B=>B.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function ed(m){if(ne(/[0-9a-zA-Z]+/.test(m),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(m);const c=new ArrayBuffer(m.length),f=new Uint8Array(c);for(let E=0;E<m.length;E++)f[E]=m.charCodeAt(E);return f}!function oh(m){(0,De._registerComponent)(new Me.wA("auth",(c,{options:f})=>{const E=c.getProvider("app").getImmediate(),B=c.getProvider("heartbeat"),{apiKey:Q,authDomain:be}=E.options;return((Xe,Rt)=>{oe(Q&&!Q.includes(":"),"invalid-api-key",{appName:Xe.name}),oe(!be?.includes(":"),"argument-error",{appName:Xe.name});const sn={apiKey:Q,authDomain:be,clientPlatform:m,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ur(m)},Mn=new fn(Xe,Rt,sn);return function lt(m,c){const f=c?.persistence||[],E=(Array.isArray(f)?f:[f]).map(ce);c?.errorMap&&m._updateErrorMap(c.errorMap),m._initializeWithPersistence(E,c?.popupRedirectResolver)}(Mn,f),Mn})(E,B)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((c,f,E)=>{c.getProvider("auth-internal").initialize()})),(0,De._registerComponent)(new Me.wA("auth-internal",c=>{const f=Cn(c.getProvider("auth").getImmediate());return new ih(f)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,De.registerVersion)(Ou,"0.20.6",function sh(m){switch(m){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(m)),(0,De.registerVersion)(Ou,"0.20.6","esm2017")}("Browser");class xg extends oa{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(c=>{this.resolveInialized=c})}addPassiveListener(c){this.passiveListeners.add(c)}removePassiveListener(c){this.passiveListeners.delete(c)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(c){return this.resolveInialized(),this.passiveListeners.forEach(f=>f(c)),super.onEvent(c)}initialized(){var c=this;return(0,p.Z)(function*(){yield c.initPromise})()}}function za(m){return td.apply(this,arguments)}function td(){return(td=(0,p.Z)(function*(m){const c=yield fu()._get(gc(m));return c&&(yield fu()._remove(gc(m))),c})).apply(this,arguments)}function nd(){const m=[],c="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let f=0;f<20;f++){const E=Math.floor(Math.random()*c.length);m.push(c.charAt(E))}return m.join("")}function fu(){return ce(ya)}function gc(m){return fr("authEvent",m.config.apiKey,m.name)}function Al(m){if(!m?.includes("?"))return{};const[c,...f]=m.split("?");return(0,G.zd)(f.join("?"))}function xl(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:tt("no-auth-event")}}function Pu(){var m;return(null===(m=self?.location)||void 0===m?void 0:m.protocol)||null}function Wa(m=(0,G.z$)()){return!("file:"!==Pu()&&"ionic:"!==Pu()&&"capacitor:"!==Pu()||!m.toLowerCase().match(/iphone|ipad|ipod|android/))}function id(){try{const m=self.localStorage,c=Oa();if(m)return m.setItem(c,"1"),m.removeItem(c),!function Rl(m=(0,G.z$)()){return function lh(){return(0,G.w1)()&&11===document?.documentMode}()||function ch(m=(0,G.z$)()){return/Edge\/\d+/.test(m)}(m)}()||(0,G.hl)()}catch{return ku()&&(0,G.hl)()}return!1}function ku(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Wi(){return(function el(){return"http:"===Pu()||"https:"===Pu()}()||(0,G.ru)()||Wa())&&!function uh(){return(0,G.b$)()||(0,G.UG)()}()&&id()&&!ku()}function br(){return Wa()&&typeof document<"u"}function Ol(){return(Ol=(0,p.Z)(function*(){return!!br()&&new Promise(m=>{const c=setTimeout(()=>{m(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(c),m(!0)})})})).apply(this,arguments)}const Yo={LOCAL:"local",NONE:"none",SESSION:"session"},Gs=oe,Nl="persistence";function _c(m){return Qo.apply(this,arguments)}function Qo(){return(Qo=(0,p.Z)(function*(m){yield m._initializationPromise;const c=Fu(),f=fr(Nl,m.config.apiKey,m.name);c&&c.setItem(f,m._getPersistence())})).apply(this,arguments)}function Fu(){var m;try{return(null===(m=function pu(){return typeof window<"u"?window:null}())||void 0===m?void 0:m.sessionStorage)||null}catch{return null}}const Lu=oe;class gu{constructor(){this.browserResolver=ce(class zf{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Oo,this._completeRedirectFn=vn,this._overrideRedirectResult=ja}_openPopup(c,f,E,B){var Q=this;return(0,p.Z)(function*(){var be;ne(null===(be=Q.eventManagers[c._key()])||void 0===be?void 0:be.manager,"_initialize() not called before _openPopup()");const Xe=cc(c,f,E,_t(),B);return function lc(m,c,f,E=500,B=600){const Q=Math.max((window.screen.availHeight-B)/2,0).toString(),be=Math.max((window.screen.availWidth-E)/2,0).toString();let Xe="";const Rt=Object.assign(Object.assign({},uc),{width:E.toString(),height:B.toString(),top:Q,left:be}),sn=(0,G.z$)().toLowerCase();f&&(Xe=Jr(sn)?"_blank":f),Xn(sn)&&(c=c||"http://localhost",Rt.scrollbars="yes");const Mn=Object.entries(Rt).reduce((es,[aa,Fl])=>`${es}${aa}=${Fl},`,"");if(function it(m=(0,G.z$)()){var c;return re(m)&&!(null===(c=window.navigator)||void 0===c||!c.standalone)}(sn)&&"_self"!==Xe)return function Xd(m,c){const f=document.createElement("a");f.href=m,f.target=c;const E=document.createEvent("MouseEvent");E.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),f.dispatchEvent(E)}(c||"",Xe),new Cl(null);const bn=window.open(c||"",Xe,Mn);oe(bn,m,"popup-blocked");try{bn.focus()}catch{}return new Cl(bn)}(c,Xe,Oa())})()}_openRedirect(c,f,E,B){var Q=this;return(0,p.Z)(function*(){return yield Q._originValidation(c),function hs(m){gi().location.href=m}(cc(c,f,E,_t(),B)),new Promise(()=>{})})()}_initialize(c){const f=c._key();if(this.eventManagers[f]){const{manager:B,promise:Q}=this.eventManagers[f];return B?Promise.resolve(B):(ne(Q,"If manager is not set, promise should be"),Q)}const E=this.initAndGetManager(c);return this.eventManagers[f]={promise:E},E.catch(()=>{delete this.eventManagers[f]}),E}initAndGetManager(c){var f=this;return(0,p.Z)(function*(){const E=yield function Dl(m){return Xa.apply(this,arguments)}(c),B=new oa(c);return E.register("authEvent",Q=>(oe(Q?.authEvent,c,"invalid-auth-event"),{status:B.onEvent(Q.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),f.eventManagers[c._key()]={manager:B},f.iframes[c._key()]=E,B})()}_isIframeWebStorageSupported(c,f){this.iframes[c._key()].send(cu,{type:cu},B=>{var Q;const be=null===(Q=B?.[0])||void 0===Q?void 0:Q[cu];void 0!==be&&f(!!be),he(c,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(c){const f=c._key();return this.originValidationPromises[f]||(this.originValidationPromises[f]=function uu(m){return zc.apply(this,arguments)}(c)),this.originValidationPromises[f]}get _shouldInitProactively(){return hn()||vr()||re()}}),this.cordovaResolver=ce(class zi{constructor(){this._redirectPersistence=Oo,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=vn,this._overrideRedirectResult=ja}_initialize(c){var f=this;return(0,p.Z)(function*(){const E=c._key();let B=f.eventManagers.get(E);return B||(B=new xg(c),f.eventManagers.set(E,B),f.attachCallbackListeners(c,B)),B})()}_openPopup(c){he(c,"operation-not-supported-in-this-environment")}_openRedirect(c,f,E,B){var Q=this;return(0,p.Z)(function*(){!function Jc(m){var c,f,E,B,Q,be,Xe,Rt,sn,Mn;const bn=bs();oe("function"==typeof(null===(c=bn?.universalLinks)||void 0===c?void 0:c.subscribe),m,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),oe(typeof(null===(f=bn?.BuildInfo)||void 0===f?void 0:f.packageName)<"u",m,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),oe("function"==typeof(null===(Q=null===(B=null===(E=bn?.cordova)||void 0===E?void 0:E.plugins)||void 0===B?void 0:B.browsertab)||void 0===Q?void 0:Q.openUrl),m,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),oe("function"==typeof(null===(Rt=null===(Xe=null===(be=bn?.cordova)||void 0===be?void 0:be.plugins)||void 0===Xe?void 0:Xe.browsertab)||void 0===Rt?void 0:Rt.isAvailable),m,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),oe("function"==typeof(null===(Mn=null===(sn=bn?.cordova)||void 0===sn?void 0:sn.InAppBrowser)||void 0===Mn?void 0:Mn.open),m,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(c);const be=yield Q._initialize(c);yield be.initialized(),be.resetRedirect(),function mi(){yn.clear()}(),yield Q._originValidation(c);const Xe=function pc(m,c,f=null){return{type:c,eventId:f,urlResponse:null,sessionId:nd(),postBody:null,tenantId:m.tenantId,error:tt(m,"no-auth-event")}}(c,E,B);yield function hu(m,c){return fu()._set(gc(m),c)}(c,Xe);const Rt=yield function bl(m,c,f){return fc.apply(this,arguments)}(c,Xe,f),sn=yield function Qc(m){const{cordova:c}=bs();return new Promise(f=>{c.plugins.browsertab.isAvailable(E=>{let B=null;E?c.plugins.browsertab.openUrl(m):B=c.InAppBrowser.open(m,function Le(m=(0,G.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(m)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(m)}()?"_blank":"_system","location=yes"),f(B)})})}(Rt);return function La(m,c,f){return Nu.apply(this,arguments)}(c,be,sn)})()}_isIframeWebStorageSupported(c,f){throw new Error("Method not implemented.")}_originValidation(c){const f=c._key();return this.originValidationPromises[f]||(this.originValidationPromises[f]=function Yc(m){return du.apply(this,arguments)}(c)),this.originValidationPromises[f]}attachCallbackListeners(c,f){const{universalLinks:E,handleOpenURL:B,BuildInfo:Q}=bs(),be=setTimeout((0,p.Z)(function*(){yield za(c),f.onEvent(xl())}),500),Xe=function(){var Mn=(0,p.Z)(function*(bn){clearTimeout(be);const es=yield za(c);let aa=null;es&&bn?.url&&(aa=function Ju(m,c){var f,E;const B=function Sl(m){const c=Al(m),f=c.link?decodeURIComponent(c.link):void 0,E=Al(f).link,B=c.deep_link_id?decodeURIComponent(c.deep_link_id):void 0;return Al(B).link||B||E||f||m}(c);if(B.includes("/__/auth/callback")){const Q=Al(B),be=Q.firebaseError?function ah(m){try{return JSON.parse(m)}catch{return null}}(decodeURIComponent(Q.firebaseError)):null,Xe=null===(E=null===(f=be?.code)||void 0===f?void 0:f.split("auth/"))||void 0===E?void 0:E[1],Rt=Xe?tt(Xe):null;return Rt?{type:m.type,eventId:m.eventId,tenantId:m.tenantId,error:Rt,urlResponse:null,sessionId:null,postBody:null}:{type:m.type,eventId:m.eventId,tenantId:m.tenantId,sessionId:m.sessionId,urlResponse:B,postBody:null}}return null}(es,bn.url)),f.onEvent(aa||xl())});return function(es){return Mn.apply(this,arguments)}}();typeof E<"u"&&"function"==typeof E.subscribe&&E.subscribe(null,Xe);const Rt=B,sn=`${Q.packageName.toLowerCase()}://`;bs().handleOpenURL=function(){var Mn=(0,p.Z)(function*(bn){if(bn.toLowerCase().startsWith(sn)&&Xe({url:bn}),"function"==typeof Rt)try{Rt(bn)}catch(es){console.error(es)}});return function(bn){return Mn.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=Oo,this._completeRedirectFn=vn,this._overrideRedirectResult=ja}_initialize(c){var f=this;return(0,p.Z)(function*(){return yield f.selectUnderlyingResolver(),f.assertedUnderlyingResolver._initialize(c)})()}_openPopup(c,f,E,B){var Q=this;return(0,p.Z)(function*(){return yield Q.selectUnderlyingResolver(),Q.assertedUnderlyingResolver._openPopup(c,f,E,B)})()}_openRedirect(c,f,E,B){var Q=this;return(0,p.Z)(function*(){return yield Q.selectUnderlyingResolver(),Q.assertedUnderlyingResolver._openRedirect(c,f,E,B)})()}_isIframeWebStorageSupported(c,f){this.assertedUnderlyingResolver._isIframeWebStorageSupported(c,f)}_originValidation(c){return this.assertedUnderlyingResolver._originValidation(c)}get _shouldInitProactively(){return br()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Lu(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var c=this;return(0,p.Z)(function*(){if(c.underlyingResolver)return;const f=yield function sd(){return Ol.apply(this,arguments)}();c.underlyingResolver=f?c.cordovaResolver:c.browserResolver})()}}function Zn(m){return m.unwrap()}function wc(m){return eu(m)}function eu(m){const{_tokenResponse:c}=m instanceof G.ZR?m.customData:m;if(!c)return null;if(!(m instanceof G.ZR)&&"temporaryProof"in c&&"phoneNumber"in c)return Fa.credentialFromResult(m);const f=c.providerId;if(!f||"password"===f)return null;let E;switch(f){case"google.com":E=gs;break;case"facebook.com":E=Ws;break;case"github.com":E=wo;break;case"twitter.com":E=xi;break;default:const{oauthIdToken:B,oauthAccessToken:Q,oauthTokenSecret:be,pendingToken:Xe,nonce:Rt}=c;return Q||be||B||Xe?Xe?f.startsWith("saml.")?qs._create(f,Xe):Pe._fromParams({providerId:f,signInMethod:f,pendingToken:Xe,idToken:B,accessToken:Q}):new as(f).credential({idToken:B,accessToken:Q,rawNonce:Rt}):null}return m instanceof G.ZR?E.credentialFromError(m):E.credentialFromResult(m)}function Xi(m,c){return c.catch(f=>{throw f instanceof G.ZR&&function Vu(m,c){var f,E;const B=null===(f=c.customData)||void 0===f?void 0:f._tokenResponse;if("auth/multi-factor-auth-required"===(null===(E=c)||void 0===E?void 0:E.code))c.resolver=new dh(m,function ei(m,c){var f;const E=(0,G.m9)(m),B=c;return oe(c.customData.operationType,E,"argument-error"),oe(null===(f=B.customData._serverResponse)||void 0===f?void 0:f.mfaPendingCredential,E,"argument-error"),zo._fromError(E,B)}(m,c));else if(B){const Q=eu(c),be=c;Q&&(be.credential=Q,be.tenantId=B.tenantId||void 0,be.email=B.email||void 0,be.phoneNumber=B.phoneNumber||void 0)}}(m,f),f}).then(f=>{const B=f.user;return{operationType:f.operationType,credential:wc(f),additionalUserInfo:Un(f),user:tu.getOrCreate(B)}})}function Pl(m,c){return tl.apply(this,arguments)}function tl(){return(tl=(0,p.Z)(function*(m,c){const f=yield c;return{verificationId:f.verificationId,confirm:E=>Xi(m,f.confirm(E))}})).apply(this,arguments)}class dh{constructor(c,f){this.resolver=f,this.auth=function vc(m){return m.wrapped()}(c)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(c){return Xi(Zn(this.auth),this.resolver.resolveSignIn(c))}}class tu{constructor(c){this._delegate=c,this.multiFactor=function pa(m){const c=(0,G.m9)(m);return Ro.has(c)||Ro.set(c,ou._fromUser(c)),Ro.get(c)}(c)}static getOrCreate(c){return tu.USER_MAP.has(c)||tu.USER_MAP.set(c,new tu(c)),tu.USER_MAP.get(c)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(c){return this._delegate.getIdTokenResult(c)}getIdToken(c){return this._delegate.getIdToken(c)}linkAndRetrieveDataWithCredential(c){return this.linkWithCredential(c)}linkWithCredential(c){var f=this;return(0,p.Z)(function*(){return Xi(f.auth,Zs(f._delegate,c))})()}linkWithPhoneNumber(c,f){var E=this;return(0,p.Z)(function*(){return Pl(E.auth,function Ji(m,c,f){return $r.apply(this,arguments)}(E._delegate,c,f))})()}linkWithPopup(c){var f=this;return(0,p.Z)(function*(){return Xi(f.auth,function Ye(m,c,f){return At.apply(this,arguments)}(f._delegate,c,gu))})()}linkWithRedirect(c){var f=this;return(0,p.Z)(function*(){return yield _c(Cn(f.auth)),function Ne(m,c,f){return function qe(m,c,f){return vt.apply(this,arguments)}(m,c,f)}(f._delegate,c,gu)})()}reauthenticateAndRetrieveDataWithCredential(c){return this.reauthenticateWithCredential(c)}reauthenticateWithCredential(c){var f=this;return(0,p.Z)(function*(){return Xi(f.auth,xo(f._delegate,c))})()}reauthenticateWithPhoneNumber(c,f){return Pl(this.auth,function au(m,c,f){return ka.apply(this,arguments)}(this._delegate,c,f))}reauthenticateWithPopup(c){return Xi(this.auth,function te(m,c,f){return pe.apply(this,arguments)}(this._delegate,c,gu))}reauthenticateWithRedirect(c){var f=this;return(0,p.Z)(function*(){return yield _c(Cn(f.auth)),function F(m,c,f){return function W(m,c,f){return se.apply(this,arguments)}(m,c,f)}(f._delegate,c,gu)})()}sendEmailVerification(c){return function Eo(m,c){return co.apply(this,arguments)}(this._delegate,c)}unlink(c){var f=this;return(0,p.Z)(function*(){return yield function jr(m,c){return Ki.apply(this,arguments)}(f._delegate,c),f})()}updateEmail(c){return function x(m,c){return N((0,G.m9)(m),c,null)}(this._delegate,c)}updatePassword(c){return function $(m,c){return N((0,G.m9)(m),null,c)}(this._delegate,c)}updatePhoneNumber(c){return function Ku(m,c){return je.apply(this,arguments)}(this._delegate,c)}updateProfile(c){return function ha(m,c){return Aa.apply(this,arguments)}(this._delegate,c)}verifyBeforeUpdateEmail(c,f){return function Ta(m,c,f){return dr.apply(this,arguments)}(this._delegate,c,f)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}tu.USER_MAP=new WeakMap;const Uu=oe;let mu=(()=>{class m{constructor(f,E){if(this.app=f,E.isInitialized())return this._delegate=E.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:B}=f.options;Uu(B,"invalid-api-key",{appName:f.name}),Uu(B,"invalid-api-key",{appName:f.name});const Q=typeof window<"u"?gu:void 0;this._delegate=E.initialize({options:{persistence:qf(B,f.name),popupRedirectResolver:Q}}),this._delegate._updateErrorMap(Ge),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?tu.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(f){this._delegate.languageCode=f}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(f){this._delegate.tenantId=f}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(f,E){!function rs(m,c,f){const E=Cn(m);oe(E._canInitEmulator,E,"emulator-config-failed"),oe(/^https?:\/\//.test(c),E,"invalid-emulator-scheme");const B=!!f?.disableWarnings,Q=si(c),{host:be,port:Xe}=function kr(m){const c=si(m),f=/(\/\/)?([^?#/]+)/.exec(m.substr(c.length));if(!f)return{host:"",port:null};const E=f[2].split("@").pop()||"",B=/^(\[[^\]]+\])(:|$)/.exec(E);if(B){const Q=B[1];return{host:Q,port:is(E.substr(Q.length+1))}}{const[Q,be]=E.split(":");return{host:Q,port:is(be)}}}(c);E.config.emulator={url:`${Q}//${be}${null===Xe?"":`:${Xe}`}/`},E.settings.appVerificationDisabledForTesting=!0,E.emulatorConfig=Object.freeze({host:be,port:Xe,protocol:Q.replace(":",""),options:Object.freeze({disableWarnings:B})}),B||function Ni(){function m(){const c=document.createElement("p"),f=c.style;c.innerText="Running in emulator mode. Do not use with production credentials.",f.position="fixed",f.width="100%",f.backgroundColor="#ffffff",f.border=".1em solid #000000",f.color="#b50000",f.bottom="0px",f.left="0px",f.margin="0px",f.zIndex="10000",f.textAlign="center",c.classList.add("firebase-emulator-warning"),document.body.appendChild(c)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",m):m())}()}(this._delegate,f,E)}applyActionCode(f){return function ls(m,c){return Mo.apply(this,arguments)}(this._delegate,f)}checkActionCode(f){return Qs(this._delegate,f)}confirmPasswordReset(f,E){return function Hi(m,c,f){return js.apply(this,arguments)}(this._delegate,f,E)}createUserWithEmailAndPassword(f,E){var B=this;return(0,p.Z)(function*(){return Xi(B._delegate,function P(m,c,f){return R.apply(this,arguments)}(B._delegate,f,E))})()}fetchProvidersForEmail(f){return this.fetchSignInMethodsForEmail(f)}fetchSignInMethodsForEmail(f){return function Js(m,c){return vs.apply(this,arguments)}(this._delegate,f)}isSignInWithEmailLink(f){return function cr(m,c){return"EMAIL_SIGNIN"===fi.parseLink(c)?.operation}(0,f)}getRedirectResult(){var f=this;return(0,p.Z)(function*(){Uu(Wi(),f._delegate,"operation-not-supported-in-this-environment");const E=yield function Mt(m,c){return gn.apply(this,arguments)}(f._delegate,gu);return E?Xi(f._delegate,Promise.resolve(E)):{credential:null,user:null}})()}addFrameworkForLogging(f){!function Ts(m,c){Cn(m)._logFramework(c)}(this._delegate,f)}onAuthStateChanged(f,E,B){const{next:Q,error:be,complete:Xe}=hh(f,E,B);return this._delegate.onAuthStateChanged(Q,be,Xe)}onIdTokenChanged(f,E,B){const{next:Q,error:be,complete:Xe}=hh(f,E,B);return this._delegate.onIdTokenChanged(Q,be,Xe)}sendSignInLinkToEmail(f,E){return function Ke(m,c,f){return Xt.apply(this,arguments)}(this._delegate,f,E)}sendPasswordResetEmail(f,E){return function Bs(m,c,f){return Dr.apply(this,arguments)}(this._delegate,f,E||void 0)}setPersistence(f){var E=this;return(0,p.Z)(function*(){let B;switch(function yc(m,c){Gs(Object.values(Yo).includes(c),m,"invalid-persistence-type"),(0,G.b$)()?Gs(c!==Yo.SESSION,m,"unsupported-persistence-type"):(0,G.UG)()?Gs(c===Yo.NONE,m,"unsupported-persistence-type"):ku()?Gs(c===Yo.NONE||c===Yo.LOCAL&&(0,G.hl)(),m,"unsupported-persistence-type"):Gs(c===Yo.NONE||id(),m,"unsupported-persistence-type")}(E._delegate,f),f){case Yo.SESSION:B=Oo;break;case Yo.LOCAL:B=(yield ce(ia)._isAvailable())?ia:ya;break;case Yo.NONE:B=In;break;default:return he("argument-error",{appName:E._delegate.name})}return E._delegate.setPersistence(B)})()}signInAndRetrieveDataWithCredential(f){return this.signInWithCredential(f)}signInAnonymously(){return Xi(this._delegate,function ea(m){return Fr.apply(this,arguments)}(this._delegate))}signInWithCredential(f){return Xi(this._delegate,Zr(this._delegate,f))}signInWithCustomToken(f){return Xi(this._delegate,function ki(m,c){return Yi.apply(this,arguments)}(this._delegate,f))}signInWithEmailAndPassword(f,E){return Xi(this._delegate,function Y(m,c,f){return Zr((0,G.m9)(m),pi.credential(c,f))}(this._delegate,f,E))}signInWithEmailLink(f,E){return Xi(this._delegate,function cs(m,c,f){return Di.apply(this,arguments)}(this._delegate,f,E))}signInWithPhoneNumber(f,E){return Pl(this._delegate,function Po(m,c,f){return Co.apply(this,arguments)}(this._delegate,f,E))}signInWithPopup(f){var E=this;return(0,p.Z)(function*(){return Uu(Wi(),E._delegate,"operation-not-supported-in-this-environment"),Xi(E._delegate,function k(m,c,f){return z.apply(this,arguments)}(E._delegate,f,gu))})()}signInWithRedirect(f){var E=this;return(0,p.Z)(function*(){return Uu(Wi(),E._delegate,"operation-not-supported-in-this-environment"),yield _c(E._delegate),function yi(m,c,f){return function wl(m,c,f){return O.apply(this,arguments)}(m,c,f)}(E._delegate,f,gu)})()}updateCurrentUser(f){return this._delegate.updateCurrentUser(f)}verifyPasswordResetCode(f){return function ta(m,c){return L.apply(this,arguments)}(this._delegate,f)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return m.Persistence=Yo,m})();function hh(m,c,f){let E=m;"function"!=typeof m&&({next:E,error:c,complete:f}=m);const B=E;return{next:be=>B(be&&tu.getOrCreate(be)),error:c,complete:f}}function qf(m,c){const f=function od(m,c){const f=Fu();if(!f)return[];const E=fr(Nl,m,c);switch(f.getItem(E)){case Yo.NONE:return[In];case Yo.LOCAL:return[ia,Oo];case Yo.SESSION:return[Oo];default:return[]}}(m,c);if(typeof self<"u"&&!f.includes(ia)&&f.push(ia),typeof window<"u")for(const E of[ya,Oo])f.includes(E)||f.push(E);return f.includes(In)||f.push(In),f}class ad{constructor(){this.providerId="phone",this._delegate=new Fa(Zn(T.Z.auth()))}static credential(c,f){return Fa.credential(c,f)}verifyPhoneNumber(c,f){return this._delegate.verifyPhoneNumber(c,f)}unwrap(){return this._delegate}}ad.PHONE_SIGN_IN_METHOD=Fa.PHONE_SIGN_IN_METHOD,ad.PROVIDER_ID=Fa.PROVIDER_ID;const kl=oe;class Ec{constructor(c,f,E=T.Z.app()){var B;kl(null===(B=E.options)||void 0===B?void 0:B.apiKey,"invalid-api-key",{appName:E.name}),this._delegate=new hr(c,f,E.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function zs(m){m.INTERNAL.registerComponent(new Me.wA("auth-compat",c=>{const f=c.getProvider("app-compat").getImmediate(),E=c.getProvider("auth");return new mu(f,E)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:pi,FacebookAuthProvider:Ws,GithubAuthProvider:wo,GoogleAuthProvider:gs,OAuthProvider:as,SAMLAuthProvider:lr,PhoneAuthProvider:ad,PhoneMultiFactorGenerator:Qu,RecaptchaVerifier:Ec,TwitterAuthProvider:xi,Auth:mu,AuthCredential:pr,Error:G.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),m.registerVersion("@firebase/auth-compat","0.2.19")}(T.Z)},9751:(jt,$e,j)=>{j.d($e,{y:()=>Re});var p=j(2961),T=j(727),G=j(8822),De=j(9635),we=j(2416),xe=j(576),Me=j(2806);let Re=(()=>{class Ee{constructor(rt){rt&&(this._subscribe=rt)}lift(rt){const Ge=new Ee;return Ge.source=this,Ge.operator=rt,Ge}subscribe(rt,Ge,kt){const Ze=function ue(Ee){return Ee&&Ee instanceof p.Lv||function fe(Ee){return Ee&&(0,xe.m)(Ee.next)&&(0,xe.m)(Ee.error)&&(0,xe.m)(Ee.complete)}(Ee)&&(0,T.Nn)(Ee)}(rt)?rt:new p.Hp(rt,Ge,kt);return(0,Me.x)(()=>{const{operator:ze,source:Pt}=this;Ze.add(ze?ze.call(Ze,Pt):Pt?this._subscribe(Ze):this._trySubscribe(Ze))}),Ze}_trySubscribe(rt){try{return this._subscribe(rt)}catch(Ge){rt.error(Ge)}}forEach(rt,Ge){return new(Ge=Fe(Ge))((kt,Ze)=>{const ze=new p.Hp({next:Pt=>{try{rt(Pt)}catch(xt){Ze(xt),ze.unsubscribe()}},error:Ze,complete:kt});this.subscribe(ze)})}_subscribe(rt){var Ge;return null===(Ge=this.source)||void 0===Ge?void 0:Ge.subscribe(rt)}[G.L](){return this}pipe(...rt){return(0,De.U)(rt)(this)}toPromise(rt){return new(rt=Fe(rt))((Ge,kt)=>{let Ze;this.subscribe(ze=>Ze=ze,ze=>kt(ze),()=>Ge(Ze))})}}return Ee.create=mt=>new Ee(mt),Ee})();function Fe(Ee){var mt;return null!==(mt=Ee??we.v.Promise)&&void 0!==mt?mt:Promise}},7579:(jt,$e,j)=>{j.d($e,{x:()=>Me});var p=j(9751),T=j(727);const De=(0,j(3888).d)(Fe=>function(){Fe(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var we=j(8737),xe=j(2806);let Me=(()=>{class Fe extends p.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(ue){const Ee=new Re(this,this);return Ee.operator=ue,Ee}_throwIfClosed(){if(this.closed)throw new De}next(ue){(0,xe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const Ee of this.currentObservers)Ee.next(ue)}})}error(ue){(0,xe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=ue;const{observers:Ee}=this;for(;Ee.length;)Ee.shift().error(ue)}})}complete(){(0,xe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:ue}=this;for(;ue.length;)ue.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var ue;return(null===(ue=this.observers)||void 0===ue?void 0:ue.length)>0}_trySubscribe(ue){return this._throwIfClosed(),super._trySubscribe(ue)}_subscribe(ue){return this._throwIfClosed(),this._checkFinalizedStatuses(ue),this._innerSubscribe(ue)}_innerSubscribe(ue){const{hasError:Ee,isStopped:mt,observers:rt}=this;return Ee||mt?T.Lc:(this.currentObservers=null,rt.push(ue),new T.w0(()=>{this.currentObservers=null,(0,we.P)(rt,ue)}))}_checkFinalizedStatuses(ue){const{hasError:Ee,thrownError:mt,isStopped:rt}=this;Ee?ue.error(mt):rt&&ue.complete()}asObservable(){const ue=new p.y;return ue.source=this,ue}}return Fe.create=(fe,ue)=>new Re(fe,ue),Fe})();class Re extends Me{constructor(fe,ue){super(),this.destination=fe,this.source=ue}next(fe){var ue,Ee;null===(Ee=null===(ue=this.destination)||void 0===ue?void 0:ue.next)||void 0===Ee||Ee.call(ue,fe)}error(fe){var ue,Ee;null===(Ee=null===(ue=this.destination)||void 0===ue?void 0:ue.error)||void 0===Ee||Ee.call(ue,fe)}complete(){var fe,ue;null===(ue=null===(fe=this.destination)||void 0===fe?void 0:fe.complete)||void 0===ue||ue.call(fe)}_subscribe(fe){var ue,Ee;return null!==(Ee=null===(ue=this.source)||void 0===ue?void 0:ue.subscribe(fe))&&void 0!==Ee?Ee:T.Lc}}},2961:(jt,$e,j)=>{j.d($e,{Hp:()=>kt,Lv:()=>Ee});var p=j(576),T=j(727),G=j(2416),De=j(7849);function we(){}const xe=Fe("C",void 0,void 0);function Fe(he,tt,et){return{kind:he,value:tt,error:et}}var fe=j(3410),ue=j(2806);class Ee extends T.w0{constructor(tt){super(),this.isStopped=!1,tt?(this.destination=tt,(0,T.Nn)(tt)&&tt.add(this)):this.destination=xt}static create(tt,et,yt){return new kt(tt,et,yt)}next(tt){this.isStopped?Pt(function Re(he){return Fe("N",he,void 0)}(tt),this):this._next(tt)}error(tt){this.isStopped?Pt(function Me(he){return Fe("E",void 0,he)}(tt),this):(this.isStopped=!0,this._error(tt))}complete(){this.isStopped?Pt(xe,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(tt){this.destination.next(tt)}_error(tt){try{this.destination.error(tt)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const mt=Function.prototype.bind;function rt(he,tt){return mt.call(he,tt)}class Ge{constructor(tt){this.partialObserver=tt}next(tt){const{partialObserver:et}=this;if(et.next)try{et.next(tt)}catch(yt){Ze(yt)}}error(tt){const{partialObserver:et}=this;if(et.error)try{et.error(tt)}catch(yt){Ze(yt)}else Ze(tt)}complete(){const{partialObserver:tt}=this;if(tt.complete)try{tt.complete()}catch(et){Ze(et)}}}class kt extends Ee{constructor(tt,et,yt){let Je;if(super(),(0,p.m)(tt)||!tt)Je={next:tt??void 0,error:et??void 0,complete:yt??void 0};else{let oe;this&&G.v.useDeprecatedNextContext?(oe=Object.create(tt),oe.unsubscribe=()=>this.unsubscribe(),Je={next:tt.next&&rt(tt.next,oe),error:tt.error&&rt(tt.error,oe),complete:tt.complete&&rt(tt.complete,oe)}):Je=tt}this.destination=new Ge(Je)}}function Ze(he){G.v.useDeprecatedSynchronousErrorHandling?(0,ue.O)(he):(0,De.h)(he)}function Pt(he,tt){const{onStoppedNotification:et}=G.v;et&&fe.z.setTimeout(()=>et(he,tt))}const xt={closed:!0,next:we,error:function ze(he){throw he},complete:we}},727:(jt,$e,j)=>{j.d($e,{Lc:()=>xe,w0:()=>we,Nn:()=>Me});var p=j(576);const G=(0,j(3888).d)(Fe=>function(ue){Fe(this),this.message=ue?`${ue.length} errors occurred during unsubscription:\n${ue.map((Ee,mt)=>`${mt+1}) ${Ee.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=ue});var De=j(8737);class we{constructor(fe){this.initialTeardown=fe,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let fe;if(!this.closed){this.closed=!0;const{_parentage:ue}=this;if(ue)if(this._parentage=null,Array.isArray(ue))for(const rt of ue)rt.remove(this);else ue.remove(this);const{initialTeardown:Ee}=this;if((0,p.m)(Ee))try{Ee()}catch(rt){fe=rt instanceof G?rt.errors:[rt]}const{_finalizers:mt}=this;if(mt){this._finalizers=null;for(const rt of mt)try{Re(rt)}catch(Ge){fe=fe??[],Ge instanceof G?fe=[...fe,...Ge.errors]:fe.push(Ge)}}if(fe)throw new G(fe)}}add(fe){var ue;if(fe&&fe!==this)if(this.closed)Re(fe);else{if(fe instanceof we){if(fe.closed||fe._hasParent(this))return;fe._addParent(this)}(this._finalizers=null!==(ue=this._finalizers)&&void 0!==ue?ue:[]).push(fe)}}_hasParent(fe){const{_parentage:ue}=this;return ue===fe||Array.isArray(ue)&&ue.includes(fe)}_addParent(fe){const{_parentage:ue}=this;this._parentage=Array.isArray(ue)?(ue.push(fe),ue):ue?[ue,fe]:fe}_removeParent(fe){const{_parentage:ue}=this;ue===fe?this._parentage=null:Array.isArray(ue)&&(0,De.P)(ue,fe)}remove(fe){const{_finalizers:ue}=this;ue&&(0,De.P)(ue,fe),fe instanceof we&&fe._removeParent(this)}}we.EMPTY=(()=>{const Fe=new we;return Fe.closed=!0,Fe})();const xe=we.EMPTY;function Me(Fe){return Fe instanceof we||Fe&&"closed"in Fe&&(0,p.m)(Fe.remove)&&(0,p.m)(Fe.add)&&(0,p.m)(Fe.unsubscribe)}function Re(Fe){(0,p.m)(Fe)?Fe():Fe.unsubscribe()}},2416:(jt,$e,j)=>{j.d($e,{v:()=>p});const p={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},7272:(jt,$e,j)=>{j.d($e,{z:()=>we});var p=j(8189),G=j(7669),De=j(8996);function we(...xe){return function T(){return(0,p.J)(1)}()((0,De.D)(xe,(0,G.yG)(xe)))}},515:(jt,$e,j)=>{j.d($e,{E:()=>T});const T=new(j(9751).y)(we=>we.complete())},8996:(jt,$e,j)=>{j.d($e,{D:()=>tt});var p=j(8421),T=j(5363),G=j(9468),xe=j(9751),Re=j(2202),Fe=j(576),fe=j(9672);function Ee(et,yt){if(!et)throw new Error("Iterable cannot be null");return new xe.y(Je=>{(0,fe.f)(Je,yt,()=>{const oe=et[Symbol.asyncIterator]();(0,fe.f)(Je,yt,()=>{oe.next().then(He=>{He.done?Je.complete():Je.next(He.value)})},0,!0)})})}var mt=j(3670),rt=j(8239),Ge=j(1144),kt=j(6495),Ze=j(2206),ze=j(4532),Pt=j(3260);function tt(et,yt){return yt?function he(et,yt){if(null!=et){if((0,mt.c)(et))return function De(et,yt){return(0,p.Xf)(et).pipe((0,G.R)(yt),(0,T.Q)(yt))}(et,yt);if((0,Ge.z)(et))return function Me(et,yt){return new xe.y(Je=>{let oe=0;return yt.schedule(function(){oe===et.length?Je.complete():(Je.next(et[oe++]),Je.closed||this.schedule())})})}(et,yt);if((0,rt.t)(et))return function we(et,yt){return(0,p.Xf)(et).pipe((0,G.R)(yt),(0,T.Q)(yt))}(et,yt);if((0,Ze.D)(et))return Ee(et,yt);if((0,kt.T)(et))return function ue(et,yt){return new xe.y(Je=>{let oe;return(0,fe.f)(Je,yt,()=>{oe=et[Re.h](),(0,fe.f)(Je,yt,()=>{let He,ne;try{({value:He,done:ne}=oe.next())}catch(ye){return void Je.error(ye)}ne?Je.complete():Je.next(He)},0,!0)}),()=>(0,Fe.m)(oe?.return)&&oe.return()})}(et,yt);if((0,Pt.L)(et))return function xt(et,yt){return Ee((0,Pt.Q)(et),yt)}(et,yt)}throw(0,ze.z)(et)}(et,yt):(0,p.Xf)(et)}},8421:(jt,$e,j)=>{j.d($e,{Xf:()=>mt});var p=j(655),T=j(1144),G=j(8239),De=j(9751),we=j(3670),xe=j(2206),Me=j(4532),Re=j(6495),Fe=j(3260),fe=j(576),ue=j(7849),Ee=j(8822);function mt(he){if(he instanceof De.y)return he;if(null!=he){if((0,we.c)(he))return function rt(he){return new De.y(tt=>{const et=he[Ee.L]();if((0,fe.m)(et.subscribe))return et.subscribe(tt);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(he);if((0,T.z)(he))return function Ge(he){return new De.y(tt=>{for(let et=0;et<he.length&&!tt.closed;et++)tt.next(he[et]);tt.complete()})}(he);if((0,G.t)(he))return function kt(he){return new De.y(tt=>{he.then(et=>{tt.closed||(tt.next(et),tt.complete())},et=>tt.error(et)).then(null,ue.h)})}(he);if((0,xe.D)(he))return ze(he);if((0,Re.T)(he))return function Ze(he){return new De.y(tt=>{for(const et of he)if(tt.next(et),tt.closed)return;tt.complete()})}(he);if((0,Fe.L)(he))return function Pt(he){return ze((0,Fe.Q)(he))}(he)}throw(0,Me.z)(he)}function ze(he){return new De.y(tt=>{(function xt(he,tt){var et,yt,Je,oe;return(0,p.mG)(this,void 0,void 0,function*(){try{for(et=(0,p.KL)(he);!(yt=yield et.next()).done;)if(tt.next(yt.value),tt.closed)return}catch(He){Je={error:He}}finally{try{yt&&!yt.done&&(oe=et.return)&&(yield oe.call(et))}finally{if(Je)throw Je.error}}tt.complete()})})(he,tt).catch(et=>tt.error(et))})}},6451:(jt,$e,j)=>{j.d($e,{T:()=>xe});var p=j(8189),T=j(8421),G=j(515),De=j(7669),we=j(8996);function xe(...Me){const Re=(0,De.yG)(Me),Fe=(0,De._6)(Me,1/0),fe=Me;return fe.length?1===fe.length?(0,T.Xf)(fe[0]):(0,p.J)(Fe)((0,we.D)(fe,Re)):G.E}},9646:(jt,$e,j)=>{j.d($e,{of:()=>G});var p=j(7669),T=j(8996);function G(...De){const we=(0,p.yG)(De);return(0,T.D)(De,we)}},5403:(jt,$e,j)=>{j.d($e,{x:()=>T});var p=j(2961);function T(De,we,xe,Me,Re){return new G(De,we,xe,Me,Re)}class G extends p.Lv{constructor(we,xe,Me,Re,Fe,fe){super(we),this.onFinalize=Fe,this.shouldUnsubscribe=fe,this._next=xe?function(ue){try{xe(ue)}catch(Ee){we.error(Ee)}}:super._next,this._error=Re?function(ue){try{Re(ue)}catch(Ee){we.error(Ee)}finally{this.unsubscribe()}}:super._error,this._complete=Me?function(){try{Me()}catch(ue){we.error(ue)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var we;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:xe}=this;super.unsubscribe(),!xe&&(null===(we=this.onFinalize)||void 0===we||we.call(this))}}}},4351:(jt,$e,j)=>{j.d($e,{b:()=>G});var p=j(5577),T=j(576);function G(De,we){return(0,T.m)(we)?(0,p.z)(De,we,1):(0,p.z)(De,1)}},6590:(jt,$e,j)=>{j.d($e,{d:()=>G});var p=j(4482),T=j(5403);function G(De){return(0,p.e)((we,xe)=>{let Me=!1;we.subscribe((0,T.x)(xe,Re=>{Me=!0,xe.next(Re)},()=>{Me||xe.next(De),xe.complete()}))})}},9300:(jt,$e,j)=>{j.d($e,{h:()=>G});var p=j(4482),T=j(5403);function G(De,we){return(0,p.e)((xe,Me)=>{let Re=0;xe.subscribe((0,T.x)(Me,Fe=>De.call(we,Fe,Re++)&&Me.next(Fe)))})}},590:(jt,$e,j)=>{j.d($e,{P:()=>Me});var p=j(6805),T=j(9300),G=j(5698),De=j(6590),we=j(8068),xe=j(4671);function Me(Re,Fe){const fe=arguments.length>=2;return ue=>ue.pipe(Re?(0,T.h)((Ee,mt)=>Re(Ee,mt,ue)):xe.y,(0,G.q)(1),fe?(0,De.d)(Fe):(0,we.T)(()=>new p.K))}},4004:(jt,$e,j)=>{j.d($e,{U:()=>G});var p=j(4482),T=j(5403);function G(De,we){return(0,p.e)((xe,Me)=>{let Re=0;xe.subscribe((0,T.x)(Me,Fe=>{Me.next(De.call(we,Fe,Re++))}))})}},8189:(jt,$e,j)=>{j.d($e,{J:()=>G});var p=j(5577),T=j(4671);function G(De=1/0){return(0,p.z)(T.y,De)}},5577:(jt,$e,j)=>{j.d($e,{z:()=>Re});var p=j(4004),T=j(8421),G=j(4482),De=j(9672),we=j(5403),Me=j(576);function Re(Fe,fe,ue=1/0){return(0,Me.m)(fe)?Re((Ee,mt)=>(0,p.U)((rt,Ge)=>fe(Ee,rt,mt,Ge))((0,T.Xf)(Fe(Ee,mt))),ue):("number"==typeof fe&&(ue=fe),(0,G.e)((Ee,mt)=>function xe(Fe,fe,ue,Ee,mt,rt,Ge,kt){const Ze=[];let ze=0,Pt=0,xt=!1;const he=()=>{xt&&!Ze.length&&!ze&&fe.complete()},tt=yt=>ze<Ee?et(yt):Ze.push(yt),et=yt=>{rt&&fe.next(yt),ze++;let Je=!1;(0,T.Xf)(ue(yt,Pt++)).subscribe((0,we.x)(fe,oe=>{mt?.(oe),rt?tt(oe):fe.next(oe)},()=>{Je=!0},void 0,()=>{if(Je)try{for(ze--;Ze.length&&ze<Ee;){const oe=Ze.shift();Ge?(0,De.f)(fe,Ge,()=>et(oe)):et(oe)}he()}catch(oe){fe.error(oe)}}))};return Fe.subscribe((0,we.x)(fe,tt,()=>{xt=!0,he()})),()=>{kt?.()}}(Ee,mt,Fe,ue)))}},5363:(jt,$e,j)=>{j.d($e,{Q:()=>De});var p=j(9672),T=j(4482),G=j(5403);function De(we,xe=0){return(0,T.e)((Me,Re)=>{Me.subscribe((0,G.x)(Re,Fe=>(0,p.f)(Re,we,()=>Re.next(Fe),xe),()=>(0,p.f)(Re,we,()=>Re.complete(),xe),Fe=>(0,p.f)(Re,we,()=>Re.error(Fe),xe)))})}},5026:(jt,$e,j)=>{j.d($e,{R:()=>De});var p=j(4482),T=j(5403);function G(we,xe,Me,Re,Fe){return(fe,ue)=>{let Ee=Me,mt=xe,rt=0;fe.subscribe((0,T.x)(ue,Ge=>{const kt=rt++;mt=Ee?we(mt,Ge,kt):(Ee=!0,Ge),Re&&ue.next(mt)},Fe&&(()=>{Ee&&ue.next(mt),ue.complete()})))}}function De(we,xe){return(0,p.e)(G(we,xe,arguments.length>=2,!0))}},3099:(jt,$e,j)=>{j.d($e,{B:()=>we});var p=j(8421),T=j(7579),G=j(2961),De=j(4482);function we(Me={}){const{connector:Re=(()=>new T.x),resetOnError:Fe=!0,resetOnComplete:fe=!0,resetOnRefCountZero:ue=!0}=Me;return Ee=>{let mt,rt,Ge,kt=0,Ze=!1,ze=!1;const Pt=()=>{rt?.unsubscribe(),rt=void 0},xt=()=>{Pt(),mt=Ge=void 0,Ze=ze=!1},he=()=>{const tt=mt;xt(),tt?.unsubscribe()};return(0,De.e)((tt,et)=>{kt++,!ze&&!Ze&&Pt();const yt=Ge=Ge??Re();et.add(()=>{kt--,0===kt&&!ze&&!Ze&&(rt=xe(he,ue))}),yt.subscribe(et),!mt&&kt>0&&(mt=new G.Hp({next:Je=>yt.next(Je),error:Je=>{ze=!0,Pt(),rt=xe(xt,Fe,Je),yt.error(Je)},complete:()=>{Ze=!0,Pt(),rt=xe(xt,fe),yt.complete()}}),(0,p.Xf)(tt).subscribe(mt))})(Ee)}}function xe(Me,Re,...Fe){if(!0===Re)return void Me();if(!1===Re)return;const fe=new G.Hp({next:()=>{fe.unsubscribe(),Me()}});return Re(...Fe).subscribe(fe)}},8675:(jt,$e,j)=>{j.d($e,{O:()=>De});var p=j(7272),T=j(7669),G=j(4482);function De(...we){const xe=(0,T.yG)(we);return(0,G.e)((Me,Re)=>{(xe?(0,p.z)(we,Me,xe):(0,p.z)(we,Me)).subscribe(Re)})}},9468:(jt,$e,j)=>{j.d($e,{R:()=>T});var p=j(4482);function T(G,De=0){return(0,p.e)((we,xe)=>{xe.add(G.schedule(()=>we.subscribe(xe),De))})}},3900:(jt,$e,j)=>{j.d($e,{w:()=>De});var p=j(8421),T=j(4482),G=j(5403);function De(we,xe){return(0,T.e)((Me,Re)=>{let Fe=null,fe=0,ue=!1;const Ee=()=>ue&&!Fe&&Re.complete();Me.subscribe((0,G.x)(Re,mt=>{Fe?.unsubscribe();let rt=0;const Ge=fe++;(0,p.Xf)(we(mt,Ge)).subscribe(Fe=(0,G.x)(Re,kt=>Re.next(xe?xe(mt,kt,Ge,rt++):kt),()=>{Fe=null,Ee()}))},()=>{ue=!0,Ee()}))})}},5698:(jt,$e,j)=>{j.d($e,{q:()=>De});var p=j(515),T=j(4482),G=j(5403);function De(we){return we<=0?()=>p.E:(0,T.e)((xe,Me)=>{let Re=0;xe.subscribe((0,G.x)(Me,Fe=>{++Re<=we&&(Me.next(Fe),we<=Re&&Me.complete())}))})}},8505:(jt,$e,j)=>{j.d($e,{b:()=>we});var p=j(576),T=j(4482),G=j(5403),De=j(4671);function we(xe,Me,Re){const Fe=(0,p.m)(xe)||Me||Re?{next:xe,error:Me,complete:Re}:xe;return Fe?(0,T.e)((fe,ue)=>{var Ee;null===(Ee=Fe.subscribe)||void 0===Ee||Ee.call(Fe);let mt=!0;fe.subscribe((0,G.x)(ue,rt=>{var Ge;null===(Ge=Fe.next)||void 0===Ge||Ge.call(Fe,rt),ue.next(rt)},()=>{var rt;mt=!1,null===(rt=Fe.complete)||void 0===rt||rt.call(Fe),ue.complete()},rt=>{var Ge;mt=!1,null===(Ge=Fe.error)||void 0===Ge||Ge.call(Fe,rt),ue.error(rt)},()=>{var rt,Ge;mt&&(null===(rt=Fe.unsubscribe)||void 0===rt||rt.call(Fe)),null===(Ge=Fe.finalize)||void 0===Ge||Ge.call(Fe)}))}):De.y}},8068:(jt,$e,j)=>{j.d($e,{T:()=>De});var p=j(6805),T=j(4482),G=j(5403);function De(xe=we){return(0,T.e)((Me,Re)=>{let Fe=!1;Me.subscribe((0,G.x)(Re,fe=>{Fe=!0,Re.next(fe)},()=>Fe?Re.complete():Re.error(xe())))})}function we(){return new p.K}},4408:(jt,$e,j)=>{j.d($e,{o:()=>we});var p=j(727);class T extends p.w0{constructor(Me,Re){super()}schedule(Me,Re=0){return this}}const G={setInterval(xe,Me,...Re){const{delegate:Fe}=G;return Fe?.setInterval?Fe.setInterval(xe,Me,...Re):setInterval(xe,Me,...Re)},clearInterval(xe){const{delegate:Me}=G;return(Me?.clearInterval||clearInterval)(xe)},delegate:void 0};var De=j(8737);class we extends T{constructor(Me,Re){super(Me,Re),this.scheduler=Me,this.work=Re,this.pending=!1}schedule(Me,Re=0){if(this.closed)return this;this.state=Me;const Fe=this.id,fe=this.scheduler;return null!=Fe&&(this.id=this.recycleAsyncId(fe,Fe,Re)),this.pending=!0,this.delay=Re,this.id=this.id||this.requestAsyncId(fe,this.id,Re),this}requestAsyncId(Me,Re,Fe=0){return G.setInterval(Me.flush.bind(Me,this),Fe)}recycleAsyncId(Me,Re,Fe=0){if(null!=Fe&&this.delay===Fe&&!1===this.pending)return Re;G.clearInterval(Re)}execute(Me,Re){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const Fe=this._execute(Me,Re);if(Fe)return Fe;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(Me,Re){let fe,Fe=!1;try{this.work(Me)}catch(ue){Fe=!0,fe=ue||new Error("Scheduled action threw falsy error")}if(Fe)return this.unsubscribe(),fe}unsubscribe(){if(!this.closed){const{id:Me,scheduler:Re}=this,{actions:Fe}=Re;this.work=this.state=this.scheduler=null,this.pending=!1,(0,De.P)(Fe,this),null!=Me&&(this.id=this.recycleAsyncId(Re,Me,null)),this.delay=null,super.unsubscribe()}}}},7565:(jt,$e,j)=>{j.d($e,{v:()=>G});var p=j(6063);class T{constructor(we,xe=T.now){this.schedulerActionCtor=we,this.now=xe}schedule(we,xe=0,Me){return new this.schedulerActionCtor(this,we).schedule(Me,xe)}}T.now=p.l.now;class G extends T{constructor(we,xe=T.now){super(we,xe),this.actions=[],this._active=!1,this._scheduled=void 0}flush(we){const{actions:xe}=this;if(this._active)return void xe.push(we);let Me;this._active=!0;do{if(Me=we.execute(we.state,we.delay))break}while(we=xe.shift());if(this._active=!1,Me){for(;we=xe.shift();)we.unsubscribe();throw Me}}}},4986:(jt,$e,j)=>{j.d($e,{z:()=>G});var p=j(4408);const G=new(j(7565).v)(p.o)},6063:(jt,$e,j)=>{j.d($e,{l:()=>p});const p={now:()=>(p.delegate||Date).now(),delegate:void 0}},3410:(jt,$e,j)=>{j.d($e,{z:()=>p});const p={setTimeout(T,G,...De){const{delegate:we}=p;return we?.setTimeout?we.setTimeout(T,G,...De):setTimeout(T,G,...De)},clearTimeout(T){const{delegate:G}=p;return(G?.clearTimeout||clearTimeout)(T)},delegate:void 0}},2202:(jt,$e,j)=>{j.d($e,{h:()=>T});const T=function p(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(jt,$e,j)=>{j.d($e,{L:()=>p});const p="function"==typeof Symbol&&Symbol.observable||"@@observable"},6805:(jt,$e,j)=>{j.d($e,{K:()=>T});const T=(0,j(3888).d)(G=>function(){G(this),this.name="EmptyError",this.message="no elements in sequence"})},7669:(jt,$e,j)=>{j.d($e,{_6:()=>xe,jO:()=>De,yG:()=>we});var p=j(576);function G(Me){return Me[Me.length-1]}function De(Me){return(0,p.m)(G(Me))?Me.pop():void 0}function we(Me){return function T(Me){return Me&&(0,p.m)(Me.schedule)}(G(Me))?Me.pop():void 0}function xe(Me,Re){return"number"==typeof G(Me)?Me.pop():Re}},4742:(jt,$e,j)=>{j.d($e,{D:()=>we});const{isArray:p}=Array,{getPrototypeOf:T,prototype:G,keys:De}=Object;function we(Me){if(1===Me.length){const Re=Me[0];if(p(Re))return{args:Re,keys:null};if(function xe(Me){return Me&&"object"==typeof Me&&T(Me)===G}(Re)){const Fe=De(Re);return{args:Fe.map(fe=>Re[fe]),keys:Fe}}}return{args:Me,keys:null}}},8737:(jt,$e,j)=>{function p(T,G){if(T){const De=T.indexOf(G);0<=De&&T.splice(De,1)}}j.d($e,{P:()=>p})},3888:(jt,$e,j)=>{function p(T){const De=T(we=>{Error.call(we),we.stack=(new Error).stack});return De.prototype=Object.create(Error.prototype),De.prototype.constructor=De,De}j.d($e,{d:()=>p})},1810:(jt,$e,j)=>{function p(T,G){return T.reduce((De,we,xe)=>(De[we]=G[xe],De),{})}j.d($e,{n:()=>p})},2806:(jt,$e,j)=>{j.d($e,{O:()=>De,x:()=>G});var p=j(2416);let T=null;function G(we){if(p.v.useDeprecatedSynchronousErrorHandling){const xe=!T;if(xe&&(T={errorThrown:!1,error:null}),we(),xe){const{errorThrown:Me,error:Re}=T;if(T=null,Me)throw Re}}else we()}function De(we){p.v.useDeprecatedSynchronousErrorHandling&&T&&(T.errorThrown=!0,T.error=we)}},9672:(jt,$e,j)=>{function p(T,G,De,we=0,xe=!1){const Me=G.schedule(function(){De(),xe?T.add(this.schedule(null,we)):this.unsubscribe()},we);if(T.add(Me),!xe)return Me}j.d($e,{f:()=>p})},4671:(jt,$e,j)=>{function p(T){return T}j.d($e,{y:()=>p})},1144:(jt,$e,j)=>{j.d($e,{z:()=>p});const p=T=>T&&"number"==typeof T.length&&"function"!=typeof T},2206:(jt,$e,j)=>{j.d($e,{D:()=>T});var p=j(576);function T(G){return Symbol.asyncIterator&&(0,p.m)(G?.[Symbol.asyncIterator])}},576:(jt,$e,j)=>{function p(T){return"function"==typeof T}j.d($e,{m:()=>p})},3670:(jt,$e,j)=>{j.d($e,{c:()=>G});var p=j(8822),T=j(576);function G(De){return(0,T.m)(De[p.L])}},6495:(jt,$e,j)=>{j.d($e,{T:()=>G});var p=j(2202),T=j(576);function G(De){return(0,T.m)(De?.[p.h])}},8239:(jt,$e,j)=>{j.d($e,{t:()=>T});var p=j(576);function T(G){return(0,p.m)(G?.then)}},3260:(jt,$e,j)=>{j.d($e,{L:()=>De,Q:()=>G});var p=j(655),T=j(576);function G(we){return(0,p.FC)(this,arguments,function*(){const Me=we.getReader();try{for(;;){const{value:Re,done:Fe}=yield(0,p.qq)(Me.read());if(Fe)return yield(0,p.qq)(void 0);yield yield(0,p.qq)(Re)}}finally{Me.releaseLock()}})}function De(we){return(0,T.m)(we?.getReader)}},4482:(jt,$e,j)=>{j.d($e,{A:()=>T,e:()=>G});var p=j(576);function T(De){return(0,p.m)(De?.lift)}function G(De){return we=>{if(T(we))return we.lift(function(xe){try{return De(xe,this)}catch(Me){this.error(Me)}});throw new TypeError("Unable to lift unknown Observable type")}}},3268:(jt,$e,j)=>{j.d($e,{Z:()=>De});var p=j(4004);const{isArray:T}=Array;function De(we){return(0,p.U)(xe=>function G(we,xe){return T(xe)?we(...xe):we(xe)}(we,xe))}},9635:(jt,$e,j)=>{j.d($e,{U:()=>G,z:()=>T});var p=j(4671);function T(...De){return G(De)}function G(De){return 0===De.length?p.y:1===De.length?De[0]:function(xe){return De.reduce((Me,Re)=>Re(Me),xe)}}},7849:(jt,$e,j)=>{j.d($e,{h:()=>G});var p=j(2416),T=j(3410);function G(De){T.z.setTimeout(()=>{const{onUnhandledError:we}=p.v;if(!we)throw De;we(De)})}},4532:(jt,$e,j)=>{function p(T){return new TypeError(`You provided ${null!==T&&"object"==typeof T?"an invalid object":`'${T}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}j.d($e,{z:()=>p})},655:(jt,$e,j)=>{function De(ne,ye){var ce={};for(var Oe in ne)Object.prototype.hasOwnProperty.call(ne,Oe)&&ye.indexOf(Oe)<0&&(ce[Oe]=ne[Oe]);if(null!=ne&&"function"==typeof Object.getOwnPropertySymbols){var lt=0;for(Oe=Object.getOwnPropertySymbols(ne);lt<Oe.length;lt++)ye.indexOf(Oe[lt])<0&&Object.prototype.propertyIsEnumerable.call(ne,Oe[lt])&&(ce[Oe[lt]]=ne[Oe[lt]])}return ce}function Re(ne,ye,ce,Oe){return new(ce||(ce=Promise))(function(_t,Et){function Ot(tn){try{ct(Oe.next(tn))}catch(qt){Et(qt)}}function Bt(tn){try{ct(Oe.throw(tn))}catch(qt){Et(qt)}}function ct(tn){tn.done?_t(tn.value):function lt(_t){return _t instanceof ce?_t:new ce(function(Et){Et(_t)})}(tn.value).then(Ot,Bt)}ct((Oe=Oe.apply(ne,ye||[])).next())})}function Ze(ne){return this instanceof Ze?(this.v=ne,this):new Ze(ne)}function ze(ne,ye,ce){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var lt,Oe=ce.apply(ne,ye||[]),_t=[];return lt={},Et("next"),Et("throw"),Et("return"),lt[Symbol.asyncIterator]=function(){return this},lt;function Et(rn){Oe[rn]&&(lt[rn]=function(Ft){return new Promise(function(Sn,an){_t.push([rn,Ft,Sn,an])>1||Ot(rn,Ft)})})}function Ot(rn,Ft){try{!function Bt(rn){rn.value instanceof Ze?Promise.resolve(rn.value.v).then(ct,tn):qt(_t[0][2],rn)}(Oe[rn](Ft))}catch(Sn){qt(_t[0][3],Sn)}}function ct(rn){Ot("next",rn)}function tn(rn){Ot("throw",rn)}function qt(rn,Ft){rn(Ft),_t.shift(),_t.length&&Ot(_t[0][0],_t[0][1])}}function xt(ne){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ce,ye=ne[Symbol.asyncIterator];return ye?ye.call(ne):(ne=function Ee(ne){var ye="function"==typeof Symbol&&Symbol.iterator,ce=ye&&ne[ye],Oe=0;if(ce)return ce.call(ne);if(ne&&"number"==typeof ne.length)return{next:function(){return ne&&Oe>=ne.length&&(ne=void 0),{value:ne&&ne[Oe++],done:!ne}}};throw new TypeError(ye?"Object is not iterable.":"Symbol.iterator is not defined.")}(ne),ce={},Oe("next"),Oe("throw"),Oe("return"),ce[Symbol.asyncIterator]=function(){return this},ce);function Oe(_t){ce[_t]=ne[_t]&&function(Et){return new Promise(function(Ot,Bt){!function lt(_t,Et,Ot,Bt){Promise.resolve(Bt).then(function(ct){_t({value:ct,done:Ot})},Et)}(Ot,Bt,(Et=ne[_t](Et)).done,Et.value)})}}}j.d($e,{FC:()=>ze,KL:()=>xt,_T:()=>De,mG:()=>Re,qq:()=>Ze})},6895:(jt,$e,j)=>{j.d($e,{Do:()=>xt,EM:()=>us,HT:()=>we,JF:()=>Bi,K0:()=>Me,Mx:()=>Ai,O5:()=>Mr,PM:()=>qr,S$:()=>Ze,V_:()=>fe,Ye:()=>he,b0:()=>Pt,bD:()=>ms,ez:()=>qs,mk:()=>Kn,q:()=>G,sg:()=>ci,w_:()=>xe});var p=j(4650);let T=null;function G(){return T}function we(x){T||(T=x)}class xe{}const Me=new p.OlP("DocumentToken");let Re=(()=>{class x{historyGo(N){throw new Error("Not implemented")}}return x.\u0275fac=function(N){return new(N||x)},x.\u0275prov=p.Yz7({token:x,factory:function(){return function Fe(){return(0,p.LFG)(ue)}()},providedIn:"platform"}),x})();const fe=new p.OlP("Location Initialized");let ue=(()=>{class x extends Re{constructor(N){super(),this._doc=N,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return G().getBaseHref(this._doc)}onPopState(N){const Z=G().getGlobalEventTarget(this._doc,"window");return Z.addEventListener("popstate",N,!1),()=>Z.removeEventListener("popstate",N)}onHashChange(N){const Z=G().getGlobalEventTarget(this._doc,"window");return Z.addEventListener("hashchange",N,!1),()=>Z.removeEventListener("hashchange",N)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(N){this.location.pathname=N}pushState(N,Z,de){Ee()?this._history.pushState(N,Z,de):this.location.hash=de}replaceState(N,Z,de){Ee()?this._history.replaceState(N,Z,de):this.location.hash=de}forward(){this._history.forward()}back(){this._history.back()}historyGo(N=0){this._history.go(N)}getState(){return this._history.state}}return x.\u0275fac=function(N){return new(N||x)(p.LFG(Me))},x.\u0275prov=p.Yz7({token:x,factory:function(){return function mt(){return new ue((0,p.LFG)(Me))}()},providedIn:"platform"}),x})();function Ee(){return!!window.history.pushState}function rt(x,$){if(0==x.length)return $;if(0==$.length)return x;let N=0;return x.endsWith("/")&&N++,$.startsWith("/")&&N++,2==N?x+$.substring(1):1==N?x+$:x+"/"+$}function Ge(x){const $=x.match(/#|\?|$/),N=$&&$.index||x.length;return x.slice(0,N-("/"===x[N-1]?1:0))+x.slice(N)}function kt(x){return x&&"?"!==x[0]?"?"+x:x}let Ze=(()=>{class x{historyGo(N){throw new Error("Not implemented")}}return x.\u0275fac=function(N){return new(N||x)},x.\u0275prov=p.Yz7({token:x,factory:function(){return(0,p.f3M)(Pt)},providedIn:"root"}),x})();const ze=new p.OlP("appBaseHref");let Pt=(()=>{class x extends Ze{constructor(N,Z){super(),this._platformLocation=N,this._removeListenerFns=[],this._baseHref=Z??this._platformLocation.getBaseHrefFromDOM()??(0,p.f3M)(Me).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(N){this._removeListenerFns.push(this._platformLocation.onPopState(N),this._platformLocation.onHashChange(N))}getBaseHref(){return this._baseHref}prepareExternalUrl(N){return rt(this._baseHref,N)}path(N=!1){const Z=this._platformLocation.pathname+kt(this._platformLocation.search),de=this._platformLocation.hash;return de&&N?`${Z}${de}`:Z}pushState(N,Z,de,Be){const Qe=this.prepareExternalUrl(de+kt(Be));this._platformLocation.pushState(N,Z,Qe)}replaceState(N,Z,de,Be){const Qe=this.prepareExternalUrl(de+kt(Be));this._platformLocation.replaceState(N,Z,Qe)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(N=0){this._platformLocation.historyGo?.(N)}}return x.\u0275fac=function(N){return new(N||x)(p.LFG(Re),p.LFG(ze,8))},x.\u0275prov=p.Yz7({token:x,factory:x.\u0275fac,providedIn:"root"}),x})(),xt=(()=>{class x extends Ze{constructor(N,Z){super(),this._platformLocation=N,this._baseHref="",this._removeListenerFns=[],null!=Z&&(this._baseHref=Z)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(N){this._removeListenerFns.push(this._platformLocation.onPopState(N),this._platformLocation.onHashChange(N))}getBaseHref(){return this._baseHref}path(N=!1){let Z=this._platformLocation.hash;return null==Z&&(Z="#"),Z.length>0?Z.substring(1):Z}prepareExternalUrl(N){const Z=rt(this._baseHref,N);return Z.length>0?"#"+Z:Z}pushState(N,Z,de,Be){let Qe=this.prepareExternalUrl(de+kt(Be));0==Qe.length&&(Qe=this._platformLocation.pathname),this._platformLocation.pushState(N,Z,Qe)}replaceState(N,Z,de,Be){let Qe=this.prepareExternalUrl(de+kt(Be));0==Qe.length&&(Qe=this._platformLocation.pathname),this._platformLocation.replaceState(N,Z,Qe)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(N=0){this._platformLocation.historyGo?.(N)}}return x.\u0275fac=function(N){return new(N||x)(p.LFG(Re),p.LFG(ze,8))},x.\u0275prov=p.Yz7({token:x,factory:x.\u0275fac}),x})(),he=(()=>{class x{constructor(N){this._subject=new p.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=N;const Z=this._locationStrategy.getBaseHref();this._baseHref=Ge(yt(Z)),this._locationStrategy.onPopState(de=>{this._subject.emit({url:this.path(!0),pop:!0,state:de.state,type:de.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(N=!1){return this.normalize(this._locationStrategy.path(N))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(N,Z=""){return this.path()==this.normalize(N+kt(Z))}normalize(N){return x.stripTrailingSlash(function et(x,$){return x&&$.startsWith(x)?$.substring(x.length):$}(this._baseHref,yt(N)))}prepareExternalUrl(N){return N&&"/"!==N[0]&&(N="/"+N),this._locationStrategy.prepareExternalUrl(N)}go(N,Z="",de=null){this._locationStrategy.pushState(de,"",N,Z),this._notifyUrlChangeListeners(this.prepareExternalUrl(N+kt(Z)),de)}replaceState(N,Z="",de=null){this._locationStrategy.replaceState(de,"",N,Z),this._notifyUrlChangeListeners(this.prepareExternalUrl(N+kt(Z)),de)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(N=0){this._locationStrategy.historyGo?.(N)}onUrlChange(N){return this._urlChangeListeners.push(N),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(Z=>{this._notifyUrlChangeListeners(Z.url,Z.state)})),()=>{const Z=this._urlChangeListeners.indexOf(N);this._urlChangeListeners.splice(Z,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(N="",Z){this._urlChangeListeners.forEach(de=>de(N,Z))}subscribe(N,Z,de){return this._subject.subscribe({next:N,error:Z,complete:de})}}return x.normalizeQueryParams=kt,x.joinWithSlash=rt,x.stripTrailingSlash=Ge,x.\u0275fac=function(N){return new(N||x)(p.LFG(Ze))},x.\u0275prov=p.Yz7({token:x,factory:function(){return function tt(){return new he((0,p.LFG)(Ze))}()},providedIn:"root"}),x})();function yt(x){return x.replace(/\/index.html$/,"")}function Ai(x,$){$=encodeURIComponent($);for(const N of x.split(";")){const Z=N.indexOf("="),[de,Be]=-1==Z?[N,""]:[N.slice(0,Z),N.slice(Z+1)];if(de.trim()===$)return decodeURIComponent(Be)}return null}let Kn=(()=>{class x{constructor(N,Z,de,Be){this._iterableDiffers=N,this._keyValueDiffers=Z,this._ngEl=de,this._renderer=Be,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(N){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof N?N.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(N){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof N?N.split(/\s+/):N,this._rawClass&&((0,p.sIi)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const N=this._iterableDiffer.diff(this._rawClass);N&&this._applyIterableChanges(N)}else if(this._keyValueDiffer){const N=this._keyValueDiffer.diff(this._rawClass);N&&this._applyKeyValueChanges(N)}}_applyKeyValueChanges(N){N.forEachAddedItem(Z=>this._toggleClass(Z.key,Z.currentValue)),N.forEachChangedItem(Z=>this._toggleClass(Z.key,Z.currentValue)),N.forEachRemovedItem(Z=>{Z.previousValue&&this._toggleClass(Z.key,!1)})}_applyIterableChanges(N){N.forEachAddedItem(Z=>{if("string"!=typeof Z.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${(0,p.AaK)(Z.item)}`);this._toggleClass(Z.item,!0)}),N.forEachRemovedItem(Z=>this._toggleClass(Z.item,!1))}_applyClasses(N){N&&(Array.isArray(N)||N instanceof Set?N.forEach(Z=>this._toggleClass(Z,!0)):Object.keys(N).forEach(Z=>this._toggleClass(Z,!!N[Z])))}_removeClasses(N){N&&(Array.isArray(N)||N instanceof Set?N.forEach(Z=>this._toggleClass(Z,!1)):Object.keys(N).forEach(Z=>this._toggleClass(Z,!1)))}_toggleClass(N,Z){(N=N.trim())&&N.split(/\s+/g).forEach(de=>{Z?this._renderer.addClass(this._ngEl.nativeElement,de):this._renderer.removeClass(this._ngEl.nativeElement,de)})}}return x.\u0275fac=function(N){return new(N||x)(p.Y36(p.ZZ4),p.Y36(p.aQg),p.Y36(p.SBq),p.Y36(p.Qsj))},x.\u0275dir=p.lG2({type:x,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0}),x})();class ps{constructor($,N,Z,de){this.$implicit=$,this.ngForOf=N,this.index=Z,this.count=de}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let ci=(()=>{class x{constructor(N,Z,de){this._viewContainer=N,this._template=Z,this._differs=de,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(N){this._ngForOf=N,this._ngForOfDirty=!0}set ngForTrackBy(N){this._trackByFn=N}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(N){N&&(this._template=N)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const N=this._ngForOf;!this._differ&&N&&(this._differ=this._differs.find(N).create(this.ngForTrackBy))}if(this._differ){const N=this._differ.diff(this._ngForOf);N&&this._applyChanges(N)}}_applyChanges(N){const Z=this._viewContainer;N.forEachOperation((de,Be,Qe)=>{if(null==de.previousIndex)Z.createEmbeddedView(this._template,new ps(de.item,this._ngForOf,-1,-1),null===Qe?void 0:Qe);else if(null==Qe)Z.remove(null===Be?void 0:Be);else if(null!==Be){const Zt=Z.get(Be);Z.move(Zt,Qe),Vi(Zt,de)}});for(let de=0,Be=Z.length;de<Be;de++){const Zt=Z.get(de).context;Zt.index=de,Zt.count=Be,Zt.ngForOf=this._ngForOf}N.forEachIdentityChange(de=>{Vi(Z.get(de.currentIndex),de)})}static ngTemplateContextGuard(N,Z){return!0}}return x.\u0275fac=function(N){return new(N||x)(p.Y36(p.s_b),p.Y36(p.Rgc),p.Y36(p.ZZ4))},x.\u0275dir=p.lG2({type:x,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),x})();function Vi(x,$){x.context.$implicit=$.item}let Mr=(()=>{class x{constructor(N,Z){this._viewContainer=N,this._context=new ss,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=Z}set ngIf(N){this._context.$implicit=this._context.ngIf=N,this._updateView()}set ngIfThen(N){Ir("ngIfThen",N),this._thenTemplateRef=N,this._thenViewRef=null,this._updateView()}set ngIfElse(N){Ir("ngIfElse",N),this._elseTemplateRef=N,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(N,Z){return!0}}return x.\u0275fac=function(N){return new(N||x)(p.Y36(p.s_b),p.Y36(p.Rgc))},x.\u0275dir=p.lG2({type:x,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),x})();class ss{constructor(){this.$implicit=null,this.ngIf=null}}function Ir(x,$){if($&&!$.createEmbeddedView)throw new Error(`${x} must be a TemplateRef, but received '${(0,p.AaK)($)}'.`)}let qs=(()=>{class x{}return x.\u0275fac=function(N){return new(N||x)},x.\u0275mod=p.oAB({type:x}),x.\u0275inj=p.cJS({}),x})();const ms="browser";function qr(x){return"server"===x}let us=(()=>{class x{}return x.\u0275prov=(0,p.Yz7)({token:x,providedIn:"root",factory:()=>new Ho((0,p.LFG)(Me),window)}),x})();class Ho{constructor($,N){this.document=$,this.window=N,this.offset=()=>[0,0]}setOffset($){this.offset=Array.isArray($)?()=>$:$}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition($){this.supportsScrolling()&&this.window.scrollTo($[0],$[1])}scrollToAnchor($){if(!this.supportsScrolling())return;const N=function jr(x,$){const N=x.getElementById($)||x.getElementsByName($)[0];if(N)return N;if("function"==typeof x.createTreeWalker&&x.body&&(x.body.createShadowRoot||x.body.attachShadow)){const Z=x.createTreeWalker(x.body,NodeFilter.SHOW_ELEMENT);let de=Z.currentNode;for(;de;){const Be=de.shadowRoot;if(Be){const Qe=Be.getElementById($)||Be.querySelector(`[name="${$}"]`);if(Qe)return Qe}de=Z.nextNode()}}return null}(this.document,$);N&&(this.scrollToElement(N),N.focus())}setHistoryScrollRestoration($){if(this.supportScrollRestoration()){const N=this.window.history;N&&N.scrollRestoration&&(N.scrollRestoration=$)}}scrollToElement($){const N=$.getBoundingClientRect(),Z=N.left+this.window.pageXOffset,de=N.top+this.window.pageYOffset,Be=this.offset();this.window.scrollTo(Z-Be[0],de-Be[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const $=yr(this.window.history)||yr(Object.getPrototypeOf(this.window.history));return!(!$||!$.writable&&!$.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function yr(x){return Object.getOwnPropertyDescriptor(x,"scrollRestoration")}class Bi{}},4650:(jt,$e,j)=>{j.d($e,{$8M:()=>Ea,$Z:()=>Ap,AFp:()=>Aw,ALo:()=>Z0,AaK:()=>Re,CHM:()=>Ys,CRH:()=>iw,CZH:()=>jy,CqO:()=>Ef,D6c:()=>kD,EJc:()=>YI,EpF:()=>Ym,F4k:()=>Qm,FYo:()=>Mn,FiY:()=>Mt,G48:()=>yD,Gf:()=>nw,GfV:()=>Fl,Gpc:()=>ue,JOm:()=>_u,KtG:()=>Bs,LFG:()=>yi,LSH:()=>rd,Lbi:()=>qI,Lck:()=>HE,MAs:()=>Zm,MMx:()=>Cv,NdJ:()=>$d,OlP:()=>nt,Oqu:()=>yg,PXZ:()=>dD,Q6J:()=>ug,QGY:()=>lg,QP$:()=>Jr,Qsj:()=>bn,R0b:()=>Au,RDi:()=>Il,Rgc:()=>Cg,SBq:()=>Xe,Sil:()=>JI,Suo:()=>rw,TTD:()=>Pi,TgZ:()=>Ql,VKq:()=>j0,W1O:()=>uw,WLB:()=>$0,X6Q:()=>mD,XFs:()=>dt,Xpm:()=>ve,Xts:()=>Wi,Y36:()=>ul,YKP:()=>O0,YNc:()=>pl,Yjl:()=>Dn,Yz7:()=>Ft,Z0I:()=>Oi,ZZ4:()=>Kv,_Bn:()=>R0,_UZ:()=>zu,_Vd:()=>B,_c5:()=>ND,_uU:()=>py,aQg:()=>Yv,c2e:()=>ZI,cJS:()=>an,cg1:()=>$c,dDg:()=>aD,dqk:()=>ir,eFA:()=>jw,ekj:()=>zd,eoX:()=>Vw,f3M:()=>O,g9A:()=>Mw,h0i:()=>Uf,hGG:()=>PD,hij:()=>Mf,iGM:()=>tw,ifc:()=>$t,ip1:()=>Sw,jDz:()=>P0,kL8:()=>Ry,lG2:()=>fr,lcZ:()=>K0,lqb:()=>Xi,lri:()=>Fw,n5z:()=>Ri,oAB:()=>Vt,oxw:()=>Df,q4F:()=>Ic,qLn:()=>cd,qOj:()=>ig,qZA:()=>yf,rWj:()=>Lw,s9C:()=>Tf,sBO:()=>_D,sIi:()=>Ud,s_b:()=>Vy,soG:()=>$y,tb:()=>Rw,tp0:()=>vn,uIk:()=>og,vHH:()=>Ge,vpe:()=>vl,wAp:()=>Rn,xp6:()=>tm,z2F:()=>Hy,zSh:()=>Zn,zs3:()=>Bu});var p=j(7579),T=j(727),G=j(9751),De=j(6451),we=j(3099);function xe(n){for(let r in n)if(n[r]===xe)return r;throw Error("Could not find renamed property on target object.")}function Me(n,r){for(const s in r)r.hasOwnProperty(s)&&!n.hasOwnProperty(s)&&(n[s]=r[s])}function Re(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(Re).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const r=n.toString();if(null==r)return""+r;const s=r.indexOf("\n");return-1===s?r:r.substring(0,s)}function Fe(n,r){return null==n||""===n?null===r?"":r:null==r||""===r?n:n+" "+r}const fe=xe({__forward_ref__:xe});function ue(n){return n.__forward_ref__=ue,n.toString=function(){return Re(this())},n}function Ee(n){return mt(n)?n():n}function mt(n){return"function"==typeof n&&n.hasOwnProperty(fe)&&n.__forward_ref__===ue}class Ge extends Error{constructor(r,s){super(function kt(n,r){return`NG0${Math.abs(n)}${r?": "+r.trim():""}`}(r,s)),this.code=r}}function Ze(n){return"string"==typeof n?n:null==n?"":String(n)}function tt(n,r){throw new Ge(-201,!1)}function Bt(n,r){null==n&&function ct(n,r,s,a){throw new Error(`ASSERTION ERROR: ${n}`+(null==a?"":` [Expected=> ${s} ${a} ${r} <=Actual]`))}(r,n,null,"!=")}function Ft(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function an(n){return{providers:n.providers||[],imports:n.imports||[]}}function Fn(n){return Nr(n,Jt)||Nr(n,Ln)}function Oi(n){return null!==Fn(n)}function Nr(n,r){return n.hasOwnProperty(r)?n[r]:null}function zr(n){return n&&(n.hasOwnProperty(nr)||n.hasOwnProperty(mr))?n[nr]:null}const Jt=xe({\u0275prov:xe}),nr=xe({\u0275inj:xe}),Ln=xe({ngInjectableDef:xe}),mr=xe({ngInjectorDef:xe});var dt=(()=>((dt=dt||{})[dt.Default=0]="Default",dt[dt.Host=1]="Host",dt[dt.Self=2]="Self",dt[dt.SkipSelf=4]="SkipSelf",dt[dt.Optional=8]="Optional",dt))();let zn;function rr(n){const r=zn;return zn=n,r}function vi(n,r,s){const a=Fn(n);return a&&"root"==a.providedIn?void 0===a.value?a.value=a.factory():a.value:s&dt.Optional?null:void 0!==r?r:void tt(Re(n))}function Pr(n){return{toString:n}.toString()}var An=(()=>((An=An||{})[An.OnPush=0]="OnPush",An[An.Default=1]="Default",An))(),$t=(()=>{return(n=$t||($t={}))[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",$t;var n})();const ir=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),ri={},un=[],wi=xe({\u0275cmp:xe}),Nn=xe({\u0275dir:xe}),Ei=xe({\u0275pipe:xe}),Pn=xe({\u0275mod:xe}),Ie=xe({\u0275fac:xe}),ie=xe({__NG_ELEMENT_ID__:xe});let le=0;function ve(n){return Pr(()=>{const s=!0===n.standalone,a={},l={type:n.type,providersResolver:null,decls:n.decls,vars:n.vars,factory:null,template:n.template||null,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:a,inputs:null,outputs:null,exportAs:n.exportAs||null,onPush:n.changeDetection===An.OnPush,directiveDefs:null,pipeDefs:null,standalone:s,dependencies:s&&n.dependencies||null,getStandaloneInjector:null,selectors:n.selectors||un,viewQuery:n.viewQuery||null,features:n.features||null,data:n.data||{},encapsulation:n.encapsulation||$t.Emulated,id:"c"+le++,styles:n.styles||un,_:null,setInput:null,schemas:n.schemas||null,tView:null},h=n.dependencies,y=n.features;return l.inputs=In(n.inputs,a),l.outputs=In(n.outputs),y&&y.forEach(D=>D(l)),l.directiveDefs=h?()=>("function"==typeof h?h():h).map(at).filter(gt):null,l.pipeDefs=h?()=>("function"==typeof h?h():h).map(vr).filter(gt):null,l})}function at(n){return dn(n)||Xn(n)}function gt(n){return null!==n}function Vt(n){return Pr(()=>({type:n.type,bootstrap:n.bootstrap||un,declarations:n.declarations||un,imports:n.imports||un,exports:n.exports||un,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function In(n,r){if(null==n)return ri;const s={};for(const a in n)if(n.hasOwnProperty(a)){let l=n[a],h=l;Array.isArray(l)&&(h=l[1],l=l[0]),s[l]=a,r&&(r[l]=h)}return s}const fr=ve;function Dn(n){return{type:n.type,name:n.name,factory:null,pure:!1!==n.pure,standalone:!0===n.standalone,onDestroy:n.type.prototype.ngOnDestroy||null}}function dn(n){return n[wi]||null}function Xn(n){return n[Nn]||null}function vr(n){return n[Ei]||null}function Jr(n){const r=dn(n)||Xn(n)||vr(n);return null!==r&&r.standalone}function Ur(n,r){const s=n[Pn]||null;if(!s&&!0===r)throw new Error(`Type ${Re(n)} does not have '\u0275mod' property.`);return s}function Ir(n){return Array.isArray(n)&&"object"==typeof n[1]}function oi(n){return Array.isArray(n)&&!0===n[1]}function Fs(n){return 0!=(8&n.flags)}function Ms(n){return 2==(2&n.flags)}function ro(n){return 1==(1&n.flags)}function Rr(n){return null!==n.template}function io(n){return 0!=(256&n[2])}function pi(n,r){return n.hasOwnProperty(Ie)?n[Ie]:null}class os{constructor(r,s,a){this.previousValue=r,this.currentValue=s,this.firstChange=a}isFirstChange(){return this.firstChange}}function Pi(){return as}function as(n){return n.type.prototype.ngOnChanges&&(n.setInput=gs),Ws}function Ws(){const n=$o(this),r=n?.current;if(r){const s=n.previous;if(s===ri)n.previous=r;else for(let a in r)s[a]=r[a];n.current=null,this.ngOnChanges(r)}}function gs(n,r,s,a){const l=$o(n)||function qs(n,r){return n[wo]=r}(n,{previous:ri,current:null}),h=l.current||(l.current={}),y=l.previous,D=this.declaredInputs[s],A=y[D];h[D]=new os(A&&A.currentValue,r,y===ri),n[a]=r}Pi.ngInherit=!0;const wo="__ngSimpleChanges__";function $o(n){return n[wo]||null}function Fr(n){for(;Array.isArray(n);)n=n[0];return n}function yr(n,r){return Fr(r[n])}function jr(n,r){return Fr(r[n.index])}function Bi(n,r){return n.data[r]}function ui(n,r){return n[r]}function Hn(n,r){const s=r[n];return Ir(s)?s:s[0]}function Sr(n){return 4==(4&n[2])}function ji(n){return 64==(64&n[2])}function kn(n,r){return null==r?null:n[r]}function uo(n){n[18]=0}function Zr(n,r){n[5]+=r;let s=n,a=n[3];for(;null!==a&&(1===r&&1===s[5]||-1===r&&0===s[5]);)a[5]+=r,s=a,a=a[3]}const pn={lFrame:ha(null),bindingsEnabled:!0};function ys(){return pn.bindingsEnabled}function ut(){return pn.lFrame.lView}function Tn(){return pn.lFrame.tView}function Ys(n){return pn.lFrame.contextLView=n,n[8]}function Bs(n){return pn.lFrame.contextLView=null,n}function Dr(){let n=Hi();for(;null!==n&&64===n.type;)n=n.parent;return n}function Hi(){return pn.lFrame.currentTNode}function ls(n,r){const s=pn.lFrame;s.currentTNode=n,s.isParent=r}function Mo(){return pn.lFrame.isParent}function R(){const n=pn.lFrame;let r=n.bindingRootIndex;return-1===r&&(r=n.bindingRootIndex=n.tView.bindingStartIndex),r}function Xt(){return pn.lFrame.bindingIndex++}function _r(n,r){const s=pn.lFrame;s.bindingIndex=s.bindingRootIndex=n,Js(r)}function Js(n){pn.lFrame.currentDirectiveIndex=n}function Eo(){return pn.lFrame.currentQueryIndex}function co(n){pn.lFrame.currentQueryIndex=n}function Ta(n){const r=n[1];return 2===r.type?r.declTNode:1===r.type?n[6]:null}function dr(n,r,s){if(s&dt.SkipSelf){let l=r,h=n;for(;!(l=l.parent,null!==l||s&dt.Host||(l=Ta(h),null===l||(h=h[15],10&l.type))););if(null===l)return!1;r=l,n=h}const a=pn.lFrame=Sa();return a.currentTNode=r,a.lView=n,!0}function na(n){const r=Sa(),s=n[1];pn.lFrame=r,r.currentTNode=s.firstChild,r.lView=n,r.tView=s,r.contextLView=n,r.bindingIndex=s.bindingStartIndex,r.inI18n=!1}function Sa(){const n=pn.lFrame,r=null===n?null:n.child;return null===r?ha(n):r}function ha(n){const r={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=r),r}function Aa(){const n=pn.lFrame;return pn.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const x=Aa;function $(){const n=Aa();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function de(){return pn.lFrame.selectedIndex}function Be(n){pn.lFrame.selectedIndex=n}function Qe(){const n=pn.lFrame;return Bi(n.tView,n.selectedIndex)}function gr(n,r){for(let s=r.directiveStart,a=r.directiveEnd;s<a;s++){const h=n.data[s].type.prototype,{ngAfterContentInit:y,ngAfterContentChecked:D,ngAfterViewInit:A,ngAfterViewChecked:U,ngOnDestroy:K}=h;y&&(n.contentHooks||(n.contentHooks=[])).push(-s,y),D&&((n.contentHooks||(n.contentHooks=[])).push(s,D),(n.contentCheckHooks||(n.contentCheckHooks=[])).push(s,D)),A&&(n.viewHooks||(n.viewHooks=[])).push(-s,A),U&&((n.viewHooks||(n.viewHooks=[])).push(s,U),(n.viewCheckHooks||(n.viewCheckHooks=[])).push(s,U)),null!=K&&(n.destroyHooks||(n.destroyHooks=[])).push(s,K)}}function Or(n,r,s){Xs(n,r,3,s)}function Os(n,r,s,a){(3&n[2])===s&&Xs(n,r,s,a)}function ws(n,r){let s=n[2];(3&s)===r&&(s&=2047,s+=1,n[2]=s)}function Xs(n,r,s,a){const h=a??-1,y=r.length-1;let D=0;for(let A=void 0!==a?65535&n[18]:0;A<y;A++)if("number"==typeof r[A+1]){if(D=r[A],null!=a&&D>=a)break}else r[A]<0&&(n[18]+=65536),(D<h||-1==h)&&(ho(n,s,r,A),n[18]=(4294901760&n[18])+A+2),A++}function ho(n,r,s,a){const l=s[a]<0,h=s[a+1],D=n[l?-s[a]:s[a]];if(l){if(n[2]>>11<n[18]>>16&&(3&n[2])===r){n[2]+=2048;try{h.call(D)}finally{}}}else try{h.call(D)}finally{}}class $s{constructor(r,s,a){this.factory=r,this.resolving=!1,this.canSeeViewProviders=s,this.injectImpl=a}}function pa(n,r,s){let a=0;for(;a<s.length;){const l=s[a];if("number"==typeof l){if(0!==l)break;a++;const h=s[a++],y=s[a++],D=s[a++];n.setAttribute(r,y,D,h)}else{const h=l,y=s[++a];Ma(h)?n.setProperty(r,h,y):n.setAttribute(r,h,y),a++}}return a}function Wo(n){return 3===n||4===n||6===n}function Ma(n){return 64===n.charCodeAt(0)}function ga(n,r){if(null!==r&&0!==r.length)if(null===n||0===n.length)n=r.slice();else{let s=-1;for(let a=0;a<r.length;a++){const l=r[a];"number"==typeof l?s=l:0===s||ma(n,s,l,null,-1===s||2===s?r[++a]:null)}}return n}function ma(n,r,s,a,l){let h=0,y=n.length;if(-1===r)y=-1;else for(;h<n.length;){const D=n[h++];if("number"==typeof D){if(D===r){y=-1;break}if(D>r){y=h-1;break}}}for(;h<n.length;){const D=n[h];if("number"==typeof D)break;if(D===s){if(null===a)return void(null!==l&&(n[h+1]=l));if(a===n[h+1])return void(n[h+2]=l)}h++,null!==a&&h++,null!==l&&h++}-1!==y&&(n.splice(y,0,r),h=y+1),n.splice(h++,0,s),null!==a&&n.splice(h++,0,a),null!==l&&n.splice(h++,0,l)}function Es(n){return-1!==n}function Fi(n){return 32767&n}function Io(n,r){let s=function ya(n){return n>>16}(n),a=r;for(;s>0;)a=a[15],s--;return a}let Oo=!0;function Ra(n){const r=Oo;return Oo=n,r}let gi=0;const hs={};function ra(n,r){const s=Ci(n,r);if(-1!==s)return s;const a=r[1];a.firstCreatePass&&(n.injectorIndex=r.length,Ps(a.data,n),Ps(r,null),Ps(a.blueprint,null));const l=Do(n,r),h=n.injectorIndex;if(Es(l)){const y=Fi(l),D=Io(l,r),A=D[1].data;for(let U=0;U<8;U++)r[h+U]=D[y+U]|A[y+U]}return r[h+8]=l,h}function Ps(n,r){n.push(0,0,0,0,0,0,0,0,r)}function Ci(n,r){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===r[n.injectorIndex+8]?-1:n.injectorIndex}function Do(n,r){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let s=0,a=null,l=r;for(;null!==l;){if(a=wa(l),null===a)return-1;if(s++,l=l[15],-1!==a.injectorIndex)return a.injectorIndex|s<<16}return-1}function ks(n,r,s){!function No(n,r,s){let a;"string"==typeof s?a=s.charCodeAt(0)||0:s.hasOwnProperty(ie)&&(a=s[ie]),null==a&&(a=s[ie]=gi++);const l=255&a;r.data[n+(l>>5)]|=1<<l}(n,r,s)}function qo(n,r,s){if(s&dt.Optional)return n;tt()}function It(n,r,s,a){if(s&dt.Optional&&void 0===a&&(a=null),0==(s&(dt.Self|dt.Host))){const l=n[9],h=rr(void 0);try{return l?l.get(r,a,s&dt.Optional):vi(r,a,s&dt.Optional)}finally{rr(h)}}return qo(a,0,s)}function Cr(n,r,s,a=dt.Default,l){if(null!==n){if(1024&r[2]){const y=function ia(n,r,s,a,l){let h=n,y=r;for(;null!==h&&null!==y&&1024&y[2]&&!(256&y[2]);){const D=fo(h,y,s,a|dt.Self,hs);if(D!==hs)return D;let A=h.parent;if(!A){const U=y[21];if(U){const K=U.get(s,hs,a);if(K!==hs)return K}A=wa(y),y=y[15]}h=A}return l}(n,r,s,a,hs);if(y!==hs)return y}const h=fo(n,r,s,a,hs);if(h!==hs)return h}return It(r,s,a,l)}function fo(n,r,s,a,l){const h=function va(n){if("string"==typeof n)return n.charCodeAt(0)||0;const r=n.hasOwnProperty(ie)?n[ie]:void 0;return"number"==typeof r?r>=0?255&r:Mi:r}(s);if("function"==typeof h){if(!dr(r,n,a))return a&dt.Host?qo(l,0,a):It(r,s,a,l);try{const y=h(a);if(null!=y||a&dt.Optional)return y;tt()}finally{x()}}else if("number"==typeof h){let y=null,D=Ci(n,r),A=-1,U=a&dt.Host?r[16][6]:null;for((-1===D||a&dt.SkipSelf)&&(A=-1===D?Do(n,r):r[D+8],-1!==A&&We(a,!1)?(y=r[1],D=Fi(A),r=Io(A,r)):D=-1);-1!==D;){const K=r[1];if(Lt(h,D,K.data)){const ee=Pa(D,r,s,y,a,U);if(ee!==hs)return ee}A=r[D+8],-1!==A&&We(a,r[1].data[D+8]===U)&&Lt(h,D,r)?(y=K,D=Fi(A),r=Io(A,r)):D=-1}}return l}function Pa(n,r,s,a,l,h){const y=r[1],D=y.data[n+8],K=Gt(D,y,s,null==a?Ms(D)&&Oo:a!=y&&0!=(3&D.type),l&dt.Host&&h===D);return null!==K?ln(r,y,K,D):hs}function Gt(n,r,s,a,l){const h=n.providerIndexes,y=r.data,D=1048575&h,A=n.directiveStart,K=h>>20,Se=l?D+K:n.directiveEnd;for(let Ve=a?D:D+K;Ve<Se;Ve++){const pt=y[Ve];if(Ve<A&&s===pt||Ve>=A&&pt.type===s)return Ve}if(l){const Ve=y[A];if(Ve&&Rr(Ve)&&Ve.type===s)return A}return null}function ln(n,r,s,a){let l=n[s];const h=r.data;if(function Ns(n){return n instanceof $s}(l)){const y=l;y.resolving&&function Pt(n,r){const s=r?`. Dependency path: ${r.join(" > ")} > ${n}`:"";throw new Ge(-200,`Circular dependency in DI detected for ${n}${s}`)}(function ze(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():Ze(n)}(h[s]));const D=Ra(y.canSeeViewProviders);y.resolving=!0;const A=y.injectImpl?rr(y.injectImpl):null;dr(n,a,dt.Default);try{l=n[s]=y.factory(void 0,h,n,a),r.firstCreatePass&&s>=a.directiveStart&&function Xr(n,r,s){const{ngOnChanges:a,ngOnInit:l,ngDoCheck:h}=r.type.prototype;if(a){const y=as(r);(s.preOrderHooks||(s.preOrderHooks=[])).push(n,y),(s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(n,y)}l&&(s.preOrderHooks||(s.preOrderHooks=[])).push(0-n,l),h&&((s.preOrderHooks||(s.preOrderHooks=[])).push(n,h),(s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(n,h))}(s,h[s],r)}finally{null!==A&&rr(A),Ra(D),y.resolving=!1,x()}}return l}function Lt(n,r,s){return!!(s[r+(n>>5)]&1<<n)}function We(n,r){return!(n&dt.Self||n&dt.Host&&r)}class ft{constructor(r,s){this._tNode=r,this._lView=s}get(r,s,a){return Cr(this._tNode,this._lView,r,a,s)}}function Mi(){return new ft(Dr(),ut())}function Ri(n){return Pr(()=>{const r=n.prototype.constructor,s=r[Ie]||Ya(r),a=Object.prototype;let l=Object.getPrototypeOf(n.prototype).constructor;for(;l&&l!==a;){const h=l[Ie]||Ya(l);if(h&&h!==s)return h;l=Object.getPrototypeOf(l)}return h=>new h})}function Ya(n){return mt(n)?()=>{const r=Ya(Ee(n));return r&&r()}:pi(n)}function wa(n){const r=n[1],s=r.type;return 2===s?r.declTNode:1===s?n[6]:null}function Ea(n){return function _a(n,r){if("class"===r)return n.classes;if("style"===r)return n.styles;const s=n.attrs;if(s){const a=s.length;let l=0;for(;l<a;){const h=s[l];if(Wo(h))break;if(0===h)l+=2;else if("number"==typeof h)for(l++;l<a&&"string"==typeof s[l];)l++;else{if(h===r)return s[l+1];l+=2}}}return null}(Dr(),n)}const I="__parameters__";function Ce(n,r,s){return Pr(()=>{const a=function X(n){return function(...s){if(n){const a=n(...s);for(const l in a)this[l]=a[l]}}}(r);function l(...h){if(this instanceof l)return a.apply(this,h),this;const y=new l(...h);return D.annotation=y,D;function D(A,U,K){const ee=A.hasOwnProperty(I)?A[I]:Object.defineProperty(A,I,{value:[]})[I];for(;ee.length<=K;)ee.push(null);return(ee[K]=ee[K]||[]).push(y),A}}return s&&(l.prototype=Object.create(s.prototype)),l.prototype.ngMetadataName=n,l.annotationCls=l,l})}class nt{constructor(r,s){this._desc=r,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof s?this.__NG_ELEMENT_ID__=s:void 0!==s&&(this.\u0275prov=Ft({token:this,providedIn:s.providedIn||"root",factory:s.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function Ji(n,r){void 0===r&&(r=n);for(let s=0;s<n.length;s++){let a=n[s];Array.isArray(a)?(r===n&&(r=n.slice(0,s)),Ji(a,r)):r!==n&&r.push(a)}return r}function $r(n,r){n.forEach(s=>Array.isArray(s)?$r(s,r):r(s))}function au(n,r,s){r>=n.length?n.push(s):n.splice(r,0,s)}function ka(n,r){return r>=n.length-1?n.pop():n.splice(r,1)[0]}function Ds(n,r,s){let a=v(n,r);return a>=0?n[1|a]=s:(a=~a,function je(n,r,s,a){let l=n.length;if(l==r)n.push(s,a);else if(1===l)n.push(a,n[0]),n[0]=s;else{for(l--,n.push(n[l-1],n[l]);l>r;)n[l]=n[l-2],l--;n[r]=s,n[r+1]=a}}(n,a,r,s)),a}function Fo(n,r){const s=v(n,r);if(s>=0)return n[1|s]}function v(n,r){return function _(n,r,s){let a=0,l=n.length>>s;for(;l!==a;){const h=a+(l-a>>1),y=n[h<<s];if(r===y)return h<<s;y>r?l=h:a=h+1}return~(l<<s)}(n,r,1)}const yn={},Bn="__NG_DI_FLAG__",go="ngTempTokenPath",li=/\n/gm,mi="__source";let ja;function mo(n){const r=ja;return ja=n,r}function Li(n,r=dt.Default){if(void 0===ja)throw new Ge(-203,!1);return null===ja?vi(n,void 0,r):ja.get(n,r&dt.Optional?null:void 0,r)}function yi(n,r=dt.Default){return(function wn(){return zn}()||Li)(Ee(n),r)}function O(n,r=dt.Default){return"number"!=typeof r&&(r=0|(r.optional&&8)|(r.host&&1)|(r.self&&2)|(r.skipSelf&&4)),yi(n,r)}function F(n){const r=[];for(let s=0;s<n.length;s++){const a=Ee(n[s]);if(Array.isArray(a)){if(0===a.length)throw new Ge(900,!1);let l,h=dt.Default;for(let y=0;y<a.length;y++){const D=a[y],A=se(D);"number"==typeof A?-1===A?l=D.token:h|=A:l=D}r.push(yi(l,h))}else r.push(yi(a))}return r}function W(n,r){return n[Bn]=r,n.prototype[Bn]=r,n}function se(n){return n[Bn]}const Mt=W(Ce("Optional"),8),vn=W(Ce("SkipSelf"),4);let Zc;function Il(n){Zc=n}class cc{constructor(r){this.changingThisBreaksApplicationSecurity=r}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function eo(n){return n instanceof cc?n.changingThisBreaksApplicationSecurity:n}const Yc=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;var Ts=(()=>((Ts=Ts||{})[Ts.NONE=0]="NONE",Ts[Ts.HTML=1]="HTML",Ts[Ts.STYLE=2]="STYLE",Ts[Ts.SCRIPT=3]="SCRIPT",Ts[Ts.URL=4]="URL",Ts[Ts.RESOURCE_URL=5]="RESOURCE_URL",Ts))();function rd(n){const r=function ku(){const n=ut();return n&&n[12]}();return r?r.sanitize(Ts.URL,n)||"":function Qu(n,r){const s=function Ou(n){return n instanceof cc&&n.getTypeName()||null}(n);if(null!=s&&s!==r){if("ResourceURL"===s&&"URL"===r)return!0;throw new Error(`Required a safe ${r}, got a ${s} (see https://g.co/ng/security#xss)`)}return s===r}(n,"URL")?eo(n):function du(n){return(n=String(n)).match(Yc)?n:"unsafe:"+n}(Ze(n))}const Wi=new nt("ENVIRONMENT_INITIALIZER"),br=new nt("INJECTOR",-1),sd=new nt("INJECTOR_DEF_TYPES");class Ol{get(r,s=yn){if(s===yn){const a=new Error(`NullInjectorError: No provider for ${Re(r)}!`);throw a.name="NullInjectorError",a}return s}}function pu(...n){return{\u0275providers:Yo(0,n)}}function Yo(n,...r){const s=[],a=new Set;let l;return $r(r,h=>{const y=h;Nl(y,s,[],a)&&(l||(l=[]),l.push(y))}),void 0!==l&&Gs(l,s),s}function Gs(n,r){for(let s=0;s<n.length;s++){const{providers:l}=n[s];$r(l,h=>{r.push(h)})}}function Nl(n,r,s,a){if(!(n=Ee(n)))return!1;let l=null,h=zr(n);const y=!h&&dn(n);if(h||y){if(y&&!y.standalone)return!1;l=n}else{const A=n.ngModule;if(h=zr(A),!h)return!1;l=A}const D=a.has(l);if(y){if(D)return!1;if(a.add(l),y.dependencies){const A="function"==typeof y.dependencies?y.dependencies():y.dependencies;for(const U of A)Nl(U,r,s,a)}}else{if(!h)return!1;{if(null!=h.imports&&!D){let U;a.add(l);try{$r(h.imports,K=>{Nl(K,r,s,a)&&(U||(U=[]),U.push(K))})}finally{}void 0!==U&&Gs(U,r)}if(!D){const U=pi(l)||(()=>new l);r.push({provide:l,useFactory:U,deps:un},{provide:sd,useValue:l,multi:!0},{provide:Wi,useValue:()=>yi(l),multi:!0})}const A=h.providers;null==A||D||$r(A,K=>{r.push(K)})}}return l!==n&&void 0!==n.providers}const _c=xe({provide:String,useValue:xe});function Qo(n){return null!==n&&"object"==typeof n&&_c in n}function Lu(n){return"function"==typeof n}const Zn=new nt("Set Injector scope."),vc={},wc={};let Vu;function eu(){return void 0===Vu&&(Vu=new Ol),Vu}class Xi{}class Pl extends Xi{constructor(r,s,a,l){super(),this.parent=s,this.source=a,this.scopes=l,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Ec(r,y=>this.processProvider(y)),this.records.set(br,mu(void 0,this)),l.has("environment")&&this.records.set(Xi,mu(void 0,this));const h=this.records.get(Zn);null!=h&&"string"==typeof h.value&&this.scopes.add(h.value),this.injectorDefTypes=new Set(this.get(sd.multi,un,dt.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const r of this._ngOnDestroyHooks)r.ngOnDestroy();for(const r of this._onDestroyHooks)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(r){this._onDestroyHooks.push(r)}runInContext(r){this.assertNotDestroyed();const s=mo(this),a=rr(void 0);try{return r()}finally{mo(s),rr(a)}}get(r,s=yn,a=dt.Default){this.assertNotDestroyed();const l=mo(this),h=rr(void 0);try{if(!(a&dt.SkipSelf)){let D=this.records.get(r);if(void 0===D){const A=function ad(n){return"function"==typeof n||"object"==typeof n&&n instanceof nt}(r)&&Fn(r);D=A&&this.injectableDefInScope(A)?mu(tl(r),vc):null,this.records.set(r,D)}if(null!=D)return this.hydrate(r,D)}return(a&dt.Self?eu():this.parent).get(r,s=a&dt.Optional&&s===yn?null:s)}catch(y){if("NullInjectorError"===y.name){if((y[go]=y[go]||[]).unshift(Re(r)),l)throw y;return function Ne(n,r,s,a){const l=n[go];throw r[mi]&&l.unshift(r[mi]),n.message=function qe(n,r,s,a=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.slice(2):n;let l=Re(r);if(Array.isArray(r))l=r.map(Re).join(" -> ");else if("object"==typeof r){let h=[];for(let y in r)if(r.hasOwnProperty(y)){let D=r[y];h.push(y+":"+("string"==typeof D?JSON.stringify(D):Re(D)))}l=`{${h.join(", ")}}`}return`${s}${a?"("+a+")":""}[${l}]: ${n.replace(li,"\n  ")}`}("\n"+n.message,l,s,a),n.ngTokenPath=l,n[go]=null,n}(y,r,"R3InjectorError",this.source)}throw y}finally{rr(h),mo(l)}}resolveInjectorInitializers(){const r=mo(this),s=rr(void 0);try{const a=this.get(Wi.multi,un,dt.Self);for(const l of a)l()}finally{mo(r),rr(s)}}toString(){const r=[],s=this.records;for(const a of s.keys())r.push(Re(a));return`R3Injector[${r.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Ge(205,!1)}processProvider(r){let s=Lu(r=Ee(r))?r:Ee(r&&r.provide);const a=function tu(n){return Qo(n)?mu(void 0,n.useValue):mu(Uu(n),vc)}(r);if(Lu(r)||!0!==r.multi)this.records.get(s);else{let l=this.records.get(s);l||(l=mu(void 0,vc,!0),l.factory=()=>F(l.multi),this.records.set(s,l)),s=r,l.multi.push(r)}this.records.set(s,a)}hydrate(r,s){return s.value===vc&&(s.value=wc,s.value=s.factory()),"object"==typeof s.value&&s.value&&function qf(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(s.value)&&this._ngOnDestroyHooks.add(s.value),s.value}injectableDefInScope(r){if(!r.providedIn)return!1;const s=Ee(r.providedIn);return"string"==typeof s?"any"===s||this.scopes.has(s):this.injectorDefTypes.has(s)}}function tl(n){const r=Fn(n),s=null!==r?r.factory:pi(n);if(null!==s)return s;if(n instanceof nt)throw new Ge(204,!1);if(n instanceof Function)return function dh(n){const r=n.length;if(r>0)throw function sa(n,r){const s=[];for(let a=0;a<n;a++)s.push(r);return s}(r,"?"),new Ge(204,!1);const s=function Ar(n){const r=n&&(n[Jt]||n[Ln]);if(r){const s=function Tr(n){if(n.hasOwnProperty("name"))return n.name;const r=(""+n).match(/^function\s*([^\s(]+)/);return null===r?"":r[1]}(n);return console.warn(`DEPRECATED: DI is instantiating a token "${s}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${s}" class.`),r}return null}(n);return null!==s?()=>s.factory(n):()=>new n}(n);throw new Ge(204,!1)}function Uu(n,r,s){let a;if(Lu(n)){const l=Ee(n);return pi(l)||tl(l)}if(Qo(n))a=()=>Ee(n.useValue);else if(function Fu(n){return!(!n||!n.useFactory)}(n))a=()=>n.useFactory(...F(n.deps||[]));else if(function od(n){return!(!n||!n.useExisting)}(n))a=()=>yi(Ee(n.useExisting));else{const l=Ee(n&&(n.useClass||n.provide));if(!function hh(n){return!!n.deps}(n))return pi(l)||tl(l);a=()=>new l(...F(n.deps))}return a}function mu(n,r,s=!1){return{factory:n,value:r,multi:s?[]:void 0}}function kl(n){return!!n.\u0275providers}function Ec(n,r){for(const s of n)Array.isArray(s)?Ec(s,r):kl(s)?Ec(s.\u0275providers,r):r(s)}class zs{}class E{resolveComponentFactory(r){throw function m(n){const r=Error(`No component factory found for ${Re(n)}. Did you add it to @NgModule.entryComponents?`);return r.ngComponent=n,r}(r)}}let B=(()=>{class n{}return n.NULL=new E,n})();function Q(){return be(Dr(),ut())}function be(n,r){return new Xe(jr(n,r))}let Xe=(()=>{class n{constructor(s){this.nativeElement=s}}return n.__NG_ELEMENT_ID__=Q,n})();function Rt(n){return n instanceof Xe?n.nativeElement:n}class Mn{}let bn=(()=>{class n{}return n.__NG_ELEMENT_ID__=()=>function es(){const n=ut(),s=Hn(Dr().index,n);return(Ir(s)?s:n)[11]}(),n})(),aa=(()=>{class n{}return n.\u0275prov=Ft({token:n,providedIn:"root",factory:()=>null}),n})();class Fl{constructor(r){this.full=r,this.major=r.split(".")[0],this.minor=r.split(".")[1],this.patch=r.split(".").slice(2).join(".")}}const Ic=new Fl("14.2.0"),nl={};function Jf(n){return n.ngOriginalError}class cd{constructor(){this._console=console}handleError(r){const s=this._findOriginalError(r);this._console.error("ERROR",r),s&&this._console.error("ORIGINAL ERROR",s)}_findOriginalError(r){let s=r&&Jf(r);for(;s&&Jf(s);)s=Jf(s);return s||null}}const Xf=new Map;let n_=0;const to="__ngContext__";function bo(n,r){Ir(r)?(n[to]=r[20],function i_(n){Xf.set(n[20],n)}(r)):n[to]=r}function Ll(n){const r=n[to];return"number"==typeof r?function ep(n){return Xf.get(n)||null}(r):r||null}function dd(n){const r=Ll(n);return r?Ir(r)?r:r.lView:null}function yu(n){return n instanceof Function?n():n}var _u=(()=>((_u=_u||{})[_u.Important=1]="Important",_u[_u.DashCase=2]="DashCase",_u))();function sp(n,r){return undefined(n,r)}function ru(n){const r=n[3];return oi(r)?r[3]:r}function op(n){return vh(n[13])}function ap(n){return vh(n[4])}function vh(n){for(;null!==n&&!oi(n);)n=n[4];return n}function bc(n,r,s,a,l){if(null!=a){let h,y=!1;oi(a)?h=a:Ir(a)&&(y=!0,a=a[0]);const D=Fr(a);0===n&&null!==s?null==l?dp(r,s,D):Ca(r,s,D,l||null,!0):1===n&&null!==s?Ca(r,s,D,l||null,!0):2===n?function qg(n,r,s){const a=bh(n,r);a&&function c_(n,r,s,a){n.removeChild(r,s,a)}(n,a,r,s)}(r,D,y):3===n&&r.destroyNode(D),null!=h&&function To(n,r,s,a,l){const h=s[7];h!==Fr(s)&&bc(r,n,a,h,l);for(let D=10;D<s.length;D++){const A=s[D];gd(A[1],A,n,r,a,h)}}(r,n,h,s,l)}}function $l(n,r,s){return n.createElement(r,s)}function lp(n,r){const s=n[9],a=s.indexOf(r),l=r[3];512&r[2]&&(r[2]&=-513,Zr(l,-1)),s.splice(a,1)}function vu(n,r){if(n.length<=10)return;const s=10+r,a=n[s];if(a){const l=a[17];null!==l&&l!==n&&lp(l,a),r>0&&(n[s-1][4]=a[4]);const h=ka(n,10+r);!function $g(n,r){gd(n,r,r[11],2,null,null),r[0]=null,r[6]=null}(a[1],a);const y=h[19];null!==y&&y.detachView(h[1]),a[3]=null,a[4]=null,a[2]&=-65}return a}function Hl(n,r){if(!(128&r[2])){const s=r[11];s.destroyNode&&gd(n,r,s,3,null,null),function Gg(n){let r=n[13];if(!r)return Ch(n[1],n);for(;r;){let s=null;if(Ir(r))s=r[13];else{const a=r[10];a&&(s=a)}if(!s){for(;r&&!r[4]&&r!==n;)Ir(r)&&Ch(r[1],r),r=r[3];null===r&&(r=n),Ir(r)&&Ch(r[1],r),s=r&&r[4]}r=s}}(r)}}function Ch(n,r){if(!(128&r[2])){r[2]&=-65,r[2]|=128,function l_(n,r){let s;if(null!=n&&null!=(s=n.destroyHooks))for(let a=0;a<s.length;a+=2){const l=r[s[a]];if(!(l instanceof $s)){const h=s[a+1];if(Array.isArray(h))for(let y=0;y<h.length;y+=2){const D=l[h[y]],A=h[y+1];try{A.call(D)}finally{}}else try{h.call(l)}finally{}}}}(n,r),function Gl(n,r){const s=n.cleanup,a=r[7];let l=-1;if(null!==s)for(let h=0;h<s.length-1;h+=2)if("string"==typeof s[h]){const y=s[h+1],D="function"==typeof y?y(r):Fr(r[y]),A=a[l=s[h+2]],U=s[h+3];"boolean"==typeof U?D.removeEventListener(s[h],A,U):U>=0?a[l=U]():a[l=-U].unsubscribe(),h+=2}else{const y=a[l=s[h+1]];s[h].call(y)}if(null!==a){for(let h=l+1;h<a.length;h++)(0,a[h])();r[7]=null}}(n,r),1===r[1].type&&r[11].destroy();const s=r[17];if(null!==s&&oi(r[3])){s!==r[3]&&lp(s,r);const a=r[19];null!==a&&a.detachView(n)}!function s_(n){Xf.delete(n[20])}(r)}}function zl(n,r,s){return function cp(n,r,s){let a=r;for(;null!==a&&40&a.type;)a=(r=a).parent;if(null===a)return s[0];if(2&a.flags){const l=n.data[a.directiveStart].encapsulation;if(l===$t.None||l===$t.Emulated)return null}return jr(a,s)}(n,r.parent,s)}function Ca(n,r,s,a,l){n.insertBefore(r,s,a,l)}function dp(n,r,s){n.appendChild(r,s)}function zg(n,r,s,a,l){null!==a?Ca(n,r,s,a,l):dp(n,r,s)}function bh(n,r){return n.parentNode(r)}let fp=function Wg(n,r,s){return 40&n.type?jr(n,s):null};function wu(n,r,s,a){const l=zl(n,a,r),h=r[11],D=function hp(n,r,s){return fp(n,r,s)}(a.parent||r[6],a,r);if(null!=l)if(Array.isArray(s))for(let A=0;A<s.length;A++)zg(h,l,s[A],D,!1);else zg(h,l,s,D,!1)}function al(n,r){if(null!==r){const s=r.type;if(3&s)return jr(r,n);if(4&s)return Sh(-1,n[r.index]);if(8&s){const a=r.child;if(null!==a)return al(n,a);{const l=n[r.index];return oi(l)?Sh(-1,l):Fr(l)}}if(32&s)return sp(r,n)()||Fr(n[r.index]);{const a=mp(n,r);return null!==a?Array.isArray(a)?a[0]:al(ru(n[16]),a):al(n,r.next)}}return null}function mp(n,r){return null!==r?n[16][6].projection[r.projection]:null}function Sh(n,r){const s=10+n+1;if(s<r.length){const a=r[s],l=a[1].firstChild;if(null!==l)return al(a,l)}return r[7]}function Ah(n,r,s,a,l,h,y){for(;null!=s;){const D=a[s.index],A=s.type;if(y&&0===r&&(D&&bo(Fr(D),a),s.flags|=4),64!=(64&s.flags))if(8&A)Ah(n,r,s.child,a,l,h,!1),bc(r,n,l,D,h);else if(32&A){const U=sp(s,a);let K;for(;K=U();)bc(r,n,l,K,h);bc(r,n,l,D,h)}else 16&A?xh(n,r,a,s,l,h):bc(r,n,l,D,h);s=y?s.projectionNext:s.next}}function gd(n,r,s,a,l,h){Ah(s,a,n.firstChild,r,l,h,!1)}function xh(n,r,s,a,l,h){const y=s[16],A=y[6].projection[a.projection];if(Array.isArray(A))for(let U=0;U<A.length;U++)bc(r,n,l,A[U],h);else Ah(n,r,A,y[3],l,h,!0)}function Zg(n,r,s){n.setAttribute(r,"style",s)}function yp(n,r,s){""===s?n.removeAttribute(r,"class"):n.setAttribute(r,"class",s)}function Kg(n,r,s){let a=n.length;for(;;){const l=n.indexOf(r,s);if(-1===l)return l;if(0===l||n.charCodeAt(l-1)<=32){const h=r.length;if(l+h===a||n.charCodeAt(l+h)<=32)return l}s=l+1}}const Yg="ng-template";function Mh(n,r,s){let a=0;for(;a<n.length;){let l=n[a++];if(s&&"class"===l){if(l=n[a],-1!==Kg(l.toLowerCase(),r,0))return!0}else if(1===l){for(;a<n.length&&"string"==typeof(l=n[a++]);)if(l.toLowerCase()===r)return!0;return!1}}return!1}function Qg(n){return 4===n.type&&n.value!==Yg}function Jg(n,r,s){return r===(4!==n.type||s?n.value:Yg)}function _p(n,r,s){let a=4;const l=n.attrs||[],h=function wp(n){for(let r=0;r<n.length;r++)if(Wo(n[r]))return r;return n.length}(l);let y=!1;for(let D=0;D<r.length;D++){const A=r[D];if("number"!=typeof A){if(!y)if(4&a){if(a=2|1&a,""!==A&&!Jg(n,A,s)||""===A&&1===r.length){if(Va(a))return!1;y=!0}}else{const U=8&a?A:r[++D];if(8&a&&null!==n.attrs){if(!Mh(n.attrs,U,s)){if(Va(a))return!1;y=!0}continue}const ee=md(8&a?"class":A,l,Qg(n),s);if(-1===ee){if(Va(a))return!1;y=!0;continue}if(""!==U){let Se;Se=ee>h?"":l[ee+1].toLowerCase();const Ve=8&a?Se:null;if(Ve&&-1!==Kg(Ve,U,0)||2&a&&U!==Se){if(Va(a))return!1;y=!0}}}}else{if(!y&&!Va(a)&&!Va(A))return!1;if(y&&Va(A))continue;y=!1,a=A|1&a}}return Va(a)||y}function Va(n){return 0==(1&n)}function md(n,r,s,a){if(null===r)return-1;let l=0;if(a||!s){let h=!1;for(;l<r.length;){const y=r[l];if(y===n)return l;if(3===y||6===y)h=!0;else{if(1===y||2===y){let D=r[++l];for(;"string"==typeof D;)D=r[++l];continue}if(4===y)break;if(0===y){l+=4;continue}}l+=h?1:2}return-1}return function Xg(n,r){let s=n.indexOf(4);if(s>-1)for(s++;s<n.length;){const a=n[s];if("number"==typeof a)return-1;if(a===r)return s;s++}return-1}(r,n)}function yd(n,r,s=!1){for(let a=0;a<r.length;a++)if(_p(n,r[a],s))return!0;return!1}function Ep(n,r){return n?":not("+r.trim()+")":r}function em(n){let r=n[0],s=1,a=2,l="",h=!1;for(;s<n.length;){let y=n[s];if("string"==typeof y)if(2&a){const D=n[++s];l+="["+y+(D.length>0?'="'+D+'"':"")+"]"}else 8&a?l+="."+y:4&a&&(l+=" "+y);else""!==l&&!Va(y)&&(r+=Ep(h,l),l=""),a=y,h=h||!Va(a);s++}return""!==l&&(r+=Ep(h,l)),r}const tr={};function tm(n){Dp(Tn(),ut(),de()+n,!1)}function Dp(n,r,s,a){if(!a)if(3==(3&r[2])){const h=n.preOrderCheckHooks;null!==h&&Or(r,h,s)}else{const h=n.preOrderHooks;null!==h&&Os(r,h,0,s)}Be(s)}function Nh(n,r=null,s=null,a){const l=sm(n,r,s,a);return l.resolveInjectorInitializers(),l}function sm(n,r=null,s=null,a,l=new Set){const h=[s||un,pu(n)];return a=a||("object"==typeof n?void 0:Re(n)),new Pl(h,r||eu(),a||null,l)}let Bu=(()=>{class n{static create(s,a){if(Array.isArray(s))return Nh({name:""},a,s,"");{const l=s.name??"";return Nh({name:l},s.parent,s.providers,l)}}}return n.THROW_IF_NOT_FOUND=yn,n.NULL=new Ol,n.\u0275prov=Ft({token:n,providedIn:"any",factory:()=>yi(br)}),n.__NG_ELEMENT_ID__=-1,n})();function ul(n,r=dt.Default){const s=ut();return null===s?yi(n,r):Cr(Dr(),s,Ee(n),r)}function Ap(){throw new Error("invalid")}function Mc(n,r){return n<<17|r<<2}function So(n){return n>>17&32767}function Cd(n){return 2|n}function ju(n){return(131068&n)>>2}function bd(n,r){return-131069&n|r<<2}function Td(n){return 1|n}function Up(n,r){const s=n.contentQueries;if(null!==s)for(let a=0;a<s.length;a+=2){const l=s[a],h=s[a+1];if(-1!==h){const y=n.data[h];co(l),y.contentQueries(2,r[h],h)}}}function Wh(n,r,s,a,l,h,y,D,A,U,K){const ee=r.blueprint.slice();return ee[0]=l,ee[2]=76|a,(null!==K||n&&1024&n[2])&&(ee[2]|=1024),uo(ee),ee[3]=ee[15]=n,ee[8]=s,ee[10]=y||n&&n[10],ee[11]=D||n&&n[11],ee[12]=A||n&&n[12]||null,ee[9]=U||n&&n[9]||null,ee[6]=h,ee[20]=function r_(){return n_++}(),ee[21]=K,ee[16]=2==r.type?n[16]:ee,ee}function Oc(n,r,s,a,l){let h=n.data[r];if(null===h)h=function Bp(n,r,s,a,l){const h=Hi(),y=Mo(),A=n.data[r]=function P_(n,r,s,a,l,h){return{type:s,index:a,insertBeforeIndex:null,injectorIndex:r?r.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:l,attrs:h,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:r,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,y?h:h&&h.parent,s,r,a,l);return null===n.firstChild&&(n.firstChild=A),null!==h&&(y?null==h.child&&null!==A.parent&&(h.child=A):null===h.next&&(h.next=A)),A}(n,r,s,a,l),function cs(){return pn.lFrame.inI18n}()&&(h.flags|=64);else if(64&h.type){h.type=s,h.value=a,h.attrs=l;const y=function js(){const n=pn.lFrame,r=n.currentTNode;return n.isParent?r:r.parent}();h.injectorIndex=null===y?-1:y.injectorIndex}return ls(h,!0),h}function ll(n,r,s,a){if(0===s)return-1;const l=r.length;for(let h=0;h<s;h++)r.push(a),n.blueprint.push(a),n.data.push(null);return l}function Nc(n,r,s){na(r);try{const a=n.viewQuery;null!==a&&Xp(1,a,s);const l=n.template;null!==l&&qh(n,r,l,1,s),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&Up(n,r),n.staticViewQueries&&Xp(2,n.viewQuery,s);const h=n.components;null!==h&&function M_(n,r){for(let s=0;s<r.length;s++)Kp(n,r[s])}(r,h)}catch(a){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),a}finally{r[2]&=-5,$()}}function Zl(n,r,s,a){const l=r[2];if(128!=(128&l)){na(r);try{uo(r),function Ke(n){return pn.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==s&&qh(n,r,s,2,a);const y=3==(3&l);if(y){const U=n.preOrderCheckHooks;null!==U&&Or(r,U,null)}else{const U=n.preOrderHooks;null!==U&&Os(r,U,0,null),ws(r,0)}if(function Zp(n){for(let r=op(n);null!==r;r=ap(r)){if(!r[2])continue;const s=r[9];for(let a=0;a<s.length;a++){const l=s[a],h=l[3];0==(512&l[2])&&Zr(h,1),l[2]|=512}}}(r),function B_(n){for(let r=op(n);null!==r;r=ap(r))for(let s=10;s<r.length;s++){const a=r[s],l=a[1];ji(a)&&Zl(l,a,l.template,a[8])}}(r),null!==n.contentQueries&&Up(n,r),y){const U=n.contentCheckHooks;null!==U&&Or(r,U)}else{const U=n.contentHooks;null!==U&&Os(r,U,1),ws(r,1)}!function Im(n,r){const s=n.hostBindingOpCodes;if(null!==s)try{for(let a=0;a<s.length;a++){const l=s[a];if(l<0)Be(~l);else{const h=l,y=s[++a],D=s[++a];_r(y,h),D(2,r[h])}}}finally{Be(-1)}}(n,r);const D=n.components;null!==D&&function Dm(n,r){for(let s=0;s<r.length;s++)j_(n,r[s])}(r,D);const A=n.viewQuery;if(null!==A&&Xp(2,A,a),y){const U=n.viewCheckHooks;null!==U&&Or(r,U)}else{const U=n.viewHooks;null!==U&&Os(r,U,2),ws(r,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),r[2]&=-41,512&r[2]&&(r[2]&=-513,Zr(r[3],-1))}finally{$()}}}function R_(n,r,s,a){const l=r[10],y=Sr(r);try{!y&&l.begin&&l.begin(),y&&Nc(n,r,a),Zl(n,r,s,a)}finally{!y&&l.end&&l.end()}}function qh(n,r,s,a,l){const h=de(),y=2&a;try{Be(-1),y&&r.length>22&&Dp(n,r,22,!1),s(a,l)}finally{Be(h)}}function Pd(n,r,s){!ys()||(function Gp(n,r,s,a){const l=s.directiveStart,h=s.directiveEnd;n.firstCreatePass||ra(s,r),bo(a,r);const y=s.initialInputs;for(let D=l;D<h;D++){const A=n.data[D],U=Rr(A);U&&Wp(r,s,A);const K=ln(r,n,D,s);bo(K,r),null!==y&&xm(0,D-l,K,A,0,y),U&&(Hn(s.index,r)[8]=K)}}(n,r,s,jr(s,r)),128==(128&s.flags)&&function F_(n,r,s){const a=s.directiveStart,l=s.directiveEnd,h=s.index,y=function _s(){return pn.lFrame.currentDirectiveIndex}();try{Be(h);for(let D=a;D<l;D++){const A=n.data[D],U=r[D];Js(D),(null!==A.hostBindings||0!==A.hostVars||null!==A.hostAttrs)&&tf(A,U)}}finally{Be(-1),Js(y)}}(n,r,s))}function Zh(n,r,s=jr){const a=r.localNames;if(null!==a){let l=r.index+1;for(let h=0;h<a.length;h+=2){const y=a[h+1],D=-1===y?s(r,n):n[y];n[l++]=D}}}function Kh(n){const r=n.tView;return null===r||r.incompleteFirstPass?n.tView=Yh(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts):r}function Yh(n,r,s,a,l,h,y,D,A,U){const K=22+a,ee=K+l,Se=function O_(n,r){const s=[];for(let a=0;a<r;a++)s.push(a<n?null:tr);return s}(K,ee),Ve="function"==typeof U?U():U;return Se[1]={type:n,blueprint:Se,template:s,queries:null,viewQuery:D,declTNode:r,data:Se.slice().fill(null,K),bindingStartIndex:K,expandoStartIndex:ee,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof h?h():h,pipeRegistry:"function"==typeof y?y():y,firstChild:null,schemas:A,consts:Ve,incompleteFirstPass:!1}}function Qh(n,r,s,a){const l=Om(r);null===s?l.push(a):(l.push(s),n.firstCreatePass&&Nm(n).push(a,l.length-1))}function Jh(n,r,s){for(let a in n)if(n.hasOwnProperty(a)){const l=n[a];(s=null===s?{}:s).hasOwnProperty(a)?s[a].push(r,l):s[a]=[r,l]}return s}function Tm(n,r){const a=r.directiveEnd,l=n.data,h=r.attrs,y=[];let D=null,A=null;for(let U=r.directiveStart;U<a;U++){const K=l[U],ee=K.inputs,Se=null===h||Qg(r)?null:qp(ee,h);y.push(Se),D=Jh(ee,U,D),A=Jh(K.outputs,U,A)}null!==D&&(D.hasOwnProperty("class")&&(r.flags|=16),D.hasOwnProperty("style")&&(r.flags|=32)),r.initialInputs=y,r.inputs=D,r.outputs=A}function la(n,r,s,a,l,h,y,D){const A=jr(r,s);let K,U=r.inputs;!D&&null!=U&&(K=U[a])?(lf(n,s,K,a,l),Ms(r)&&Xh(s,r.index)):3&r.type&&(a=function jp(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(a),l=null!=y?y(l,r.value||"",a):l,h.setProperty(A,a,l))}function Xh(n,r){const s=Hn(r,n);16&s[2]||(s[2]|=32)}function Hp(n,r,s,a){let l=!1;if(ys()){const h=function L_(n,r,s){const a=n.directiveRegistry;let l=null;if(a)for(let h=0;h<a.length;h++){const y=a[h];yd(s,y.selectors,!1)&&(l||(l=[]),ks(ra(s,r),n,y.type),Rr(y)?(Sm(n,s),l.unshift(y)):l.push(y))}return l}(n,r,s),y=null===a?null:{"":-1};if(null!==h){l=!0,nf(s,n.data.length,h.length);for(let K=0;K<h.length;K++){const ee=h[K];ee.providersResolver&&ee.providersResolver(ee)}let D=!1,A=!1,U=ll(n,r,h.length,null);for(let K=0;K<h.length;K++){const ee=h[K];s.mergedAttrs=ga(s.mergedAttrs,ee.hostAttrs),Am(n,s,r,U,ee),V_(U,ee,y),null!==ee.contentQueries&&(s.flags|=8),(null!==ee.hostBindings||null!==ee.hostAttrs||0!==ee.hostVars)&&(s.flags|=128);const Se=ee.type.prototype;!D&&(Se.ngOnChanges||Se.ngOnInit||Se.ngDoCheck)&&((n.preOrderHooks||(n.preOrderHooks=[])).push(s.index),D=!0),!A&&(Se.ngOnChanges||Se.ngDoCheck)&&((n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(s.index),A=!0),U++}Tm(n,s)}y&&function zp(n,r,s){if(r){const a=n.localNames=[];for(let l=0;l<r.length;l+=2){const h=s[r[l+1]];if(null==h)throw new Ge(-301,!1);a.push(r[l],h)}}}(s,a,y)}return s.mergedAttrs=ga(s.mergedAttrs,s.attrs),l}function ef(n,r,s,a,l,h){const y=h.hostBindings;if(y){let D=n.hostBindingOpCodes;null===D&&(D=n.hostBindingOpCodes=[]);const A=~r.index;(function Gu(n){let r=n.length;for(;r>0;){const s=n[--r];if("number"==typeof s&&s<0)return s}return 0})(D)!=A&&D.push(A),D.push(a,l,y)}}function tf(n,r){null!==n.hostBindings&&n.hostBindings(1,r)}function Sm(n,r){r.flags|=2,(n.components||(n.components=[])).push(r.index)}function V_(n,r,s){if(s){if(r.exportAs)for(let a=0;a<r.exportAs.length;a++)s[r.exportAs[a]]=n;Rr(r)&&(s[""]=n)}}function nf(n,r,s){n.flags|=1,n.directiveStart=r,n.directiveEnd=r+s,n.providerIndexes=r}function Am(n,r,s,a,l){n.data[a]=l;const h=l.factory||(l.factory=pi(l.type)),y=new $s(h,Rr(l),ul);n.blueprint[a]=y,s[a]=y,ef(n,r,0,a,ll(n,s,l.hostVars,tr),l)}function Wp(n,r,s){const a=jr(r,n),l=Kh(s),h=n[10],y=rf(n,Wh(n,l,null,s.onPush?32:16,a,r,h,h.createRenderer(a,s),null,null,null));n[r.index]=y}function Iu(n,r,s,a,l,h){const y=jr(n,r);!function kd(n,r,s,a,l,h,y){if(null==h)n.removeAttribute(r,l,s);else{const D=null==y?Ze(h):y(h,a||"",l);n.setAttribute(r,l,D,s)}}(r[11],y,h,n.value,s,a,l)}function xm(n,r,s,a,l,h){const y=h[r];if(null!==y){const D=a.setInput;for(let A=0;A<y.length;){const U=y[A++],K=y[A++],ee=y[A++];null!==D?a.setInput(s,ee,U,K):s[K]=ee}}}function qp(n,r){let s=null,a=0;for(;a<r.length;){const l=r[a];if(0!==l)if(5!==l){if("number"==typeof l)break;n.hasOwnProperty(l)&&(null===s&&(s=[]),s.push(l,n[l],r[a+1])),a+=2}else a+=2;else a+=4}return s}function Mm(n,r,s,a){return new Array(n,!0,!1,r,null,0,a,s,null,null)}function j_(n,r){const s=Hn(r,n);if(ji(s)){const a=s[1];48&s[2]?Zl(a,s,a.template,s[8]):s[5]>0&&Fd(s)}}function Fd(n){for(let a=op(n);null!==a;a=ap(a))for(let l=10;l<a.length;l++){const h=a[l];if(ji(h))if(512&h[2]){const y=h[1];Zl(y,h,y.template,h[8])}else h[5]>0&&Fd(h)}const s=n[1].components;if(null!==s)for(let a=0;a<s.length;a++){const l=Hn(s[a],n);ji(l)&&l[5]>0&&Fd(l)}}function Kp(n,r){const s=Hn(r,n),a=s[1];(function Yp(n,r){for(let s=r.length;s<n.blueprint.length;s++)r.push(n.blueprint[s])})(a,s),Nc(a,s,s[8])}function rf(n,r){return n[13]?n[14][4]=r:n[13]=r,n[14]=r,r}function sf(n){for(;n;){n[2]|=32;const r=ru(n);if(io(n)&&!r)return n;n=r}return null}function Xp(n,r,s){co(0),r(n,s)}function Om(n){return n[7]||(n[7]=[])}function Nm(n){return n.cleanup||(n.cleanup=[])}function uf(n,r){const s=n[9],a=s?s.get(cd,null):null;a&&a.handleError(r)}function lf(n,r,s,a,l){for(let h=0;h<s.length;){const y=s[h++],D=s[h++],A=r[y],U=n.data[y];null!==U.setInput?U.setInput(A,l,a,D):A[D]=l}}function kc(n,r,s){let a=s?n.styles:null,l=s?n.classes:null,h=0;if(null!==r)for(let y=0;y<r.length;y++){const D=r[y];"number"==typeof D?h=D:1==h?l=Fe(l,D):2==h&&(a=Fe(a,D+": "+r[++y]+";"))}s?n.styles=a:n.stylesWithoutHost=a,s?n.classes=l:n.classesWithoutHost=l}function Fc(n,r,s,a,l=!1){for(;null!==s;){const h=r[s.index];if(null!==h&&a.push(Fr(h)),oi(h))for(let D=10;D<h.length;D++){const A=h[D],U=A[1].firstChild;null!==U&&Fc(A[1],A,U,a)}const y=s.type;if(8&y)Fc(n,r,s.child,a);else if(32&y){const D=sp(s,r);let A;for(;A=D();)a.push(A)}else if(16&y){const D=mp(r,s);if(Array.isArray(D))a.push(...D);else{const A=ru(r[16]);Fc(A[1],A,D,a,!0)}}s=l?s.projectionNext:s.next}return a}class cl{constructor(r,s){this._lView=r,this._cdRefInjectingView=s,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const r=this._lView,s=r[1];return Fc(s,r,s.firstChild,[])}get context(){return this._lView[8]}set context(r){this._lView[8]=r}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const r=this._lView[3];if(oi(r)){const s=r[8],a=s?s.indexOf(this):-1;a>-1&&(vu(r,a),ka(s,a))}this._attachedToViewContainer=!1}Hl(this._lView[1],this._lView)}onDestroy(r){Qh(this._lView[1],this._lView,null,r)}markForCheck(){sf(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){!function Qp(n,r,s){const a=r[10];a.begin&&a.begin();try{Zl(n,r,n.template,s)}catch(l){throw uf(r,l),l}finally{a.end&&a.end()}}(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Ge(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Da(n,r){gd(n,r,r[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(r){if(this._attachedToViewContainer)throw new Ge(902,!1);this._appRef=r}}class tg extends cl{constructor(r){super(r),this._view=r}detectChanges(){!function af(n){!function Rm(n){for(let r=0;r<n.components.length;r++){const s=n.components[r],a=dd(s);if(null!==a){const l=a[1];R_(l,a,l.template,s)}}}(n[8])}(this._view)}checkNoChanges(){}get context(){return null}}class cf extends B{constructor(r){super(),this.ngModule=r}resolveComponentFactory(r){const s=dn(r);return new Du(s,this.ngModule)}}function Ld(n){const r=[];for(let s in n)n.hasOwnProperty(s)&&r.push({propName:n[s],templateName:s});return r}class ng{constructor(r,s){this.injector=r,this.parentInjector=s}get(r,s,a){const l=this.injector.get(r,nl,a);return l!==nl||s===nl?l:this.parentInjector.get(r,s,a)}}class Du extends zs{constructor(r,s){super(),this.componentDef=r,this.ngModule=s,this.componentType=r.type,this.selector=function Ip(n){return n.map(em).join(",")}(r.selectors),this.ngContentSelectors=r.ngContentSelectors?r.ngContentSelectors:[],this.isBoundToModule=!!s}get inputs(){return Ld(this.componentDef.inputs)}get outputs(){return Ld(this.componentDef.outputs)}create(r,s,a,l){let h=(l=l||this.ngModule)instanceof Xi?l:l?.injector;h&&null!==this.componentDef.getStandaloneInjector&&(h=this.componentDef.getStandaloneInjector(h)||h);const y=h?new ng(r,h):r,D=y.get(Mn,null);if(null===D)throw new Ge(407,!1);const A=y.get(aa,null),U=D.createRenderer(null,this.componentDef),K=this.componentDef.selectors[0][0]||"div",ee=a?function N_(n,r,s){return n.selectRootElement(r,s===$t.ShadowDom)}(U,a,this.componentDef.encapsulation):$l(D.createRenderer(null,this.componentDef),K,function Pm(n){const r=n.toLowerCase();return"svg"===r?"svg":"math"===r?"math":null}(K)),Se=this.componentDef.onPush?288:272,Ve={components:[]},pt=Yh(0,null,null,1,0,null,null,null,null,null),St=Wh(null,pt,Ve,Se,null,null,D,U,A,y,null);let Qt,on;na(St);try{const jn=function km(n,r,s,a,l,h){const y=s[1];s[22]=n;const A=Oc(y,22,2,"#host",null),U=A.mergedAttrs=r.hostAttrs;null!==U&&(kc(A,U,!0),null!==n&&(pa(l,n,U),null!==A.classes&&yp(l,n,A.classes),null!==A.styles&&Zg(l,n,A.styles)));const K=a.createRenderer(n,r),ee=Wh(s,Kh(r),null,r.onPush?32:16,s[22],A,a,K,h||null,null,null);return y.firstCreatePass&&(ks(ra(A,s),y,r.type),Sm(y,A),nf(A,s.length,1)),rf(s,ee),s[22]=ee}(ee,this.componentDef,St,D,U);if(ee)if(a)pa(U,ee,["ng-version",Ic.full]);else{const{attrs:Ct,classes:On}=function g_(n){const r=[],s=[];let a=1,l=2;for(;a<n.length;){let h=n[a];if("string"==typeof h)2===l?""!==h&&r.push(h,n[++a]):8===l&&s.push(h);else{if(!Va(l))break;l=h}a++}return{attrs:r,classes:s}}(this.componentDef.selectors[0]);Ct&&pa(U,ee,Ct),On&&On.length>0&&yp(U,ee,On.join(" "))}if(on=Bi(pt,22),void 0!==s){const Ct=on.projection=[];for(let On=0;On<this.ngContentSelectors.length;On++){const Gr=s[On];Ct.push(null!=Gr?Array.from(Gr):null)}}Qt=function G_(n,r,s,a,l){const h=s[1],y=function $p(n,r,s){const a=Dr();n.firstCreatePass&&(s.providersResolver&&s.providersResolver(s),Am(n,a,r,ll(n,r,1,null),s),Tm(n,a));const l=ln(r,n,a.directiveStart,a);bo(l,r);const h=jr(a,r);return h&&bo(h,r),l}(h,s,r);if(a.components.push(y),n[8]=y,null!==l)for(const A of l)A(y,r);if(r.contentQueries){const A=Dr();r.contentQueries(1,y,A.directiveStart)}const D=Dr();return!h.firstCreatePass||null===r.hostBindings&&null===r.hostAttrs||(Be(D.index),ef(s[1],D,0,D.directiveStart,D.directiveEnd,r),tf(r,y)),y}(jn,this.componentDef,St,Ve,[z_]),Nc(pt,St,null)}finally{$()}return new H_(this.componentType,Qt,be(on,St),St,on)}}class H_ extends class Zf{}{constructor(r,s,a,l,h){super(),this.location=a,this._rootLView=l,this._tNode=h,this.instance=s,this.hostView=this.changeDetectorRef=new tg(l),this.componentType=r}setInput(r,s){const a=this._tNode.inputs;let l;if(null!==a&&(l=a[r])){const h=this._rootLView;lf(h[1],h,l,r,s),Xh(h,this._tNode.index)}}get injector(){return new ft(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(r){this.hostView.onDestroy(r)}}function z_(){const n=Dr();gr(ut()[1],n)}function ig(n){let r=function Lm(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),s=!0;const a=[n];for(;r;){let l;if(Rr(n))l=r.\u0275cmp||r.\u0275dir;else{if(r.\u0275cmp)throw new Ge(903,!1);l=r.\u0275dir}if(l){if(s){a.push(l);const y=n;y.inputs=df(n.inputs),y.declaredInputs=df(n.declaredInputs),y.outputs=df(n.outputs);const D=l.hostBindings;D&&Um(n,D);const A=l.viewQuery,U=l.contentQueries;if(A&&sg(n,A),U&&Vm(n,U),Me(n.inputs,l.inputs),Me(n.declaredInputs,l.declaredInputs),Me(n.outputs,l.outputs),Rr(l)&&l.data.animation){const K=n.data;K.animation=(K.animation||[]).concat(l.data.animation)}}const h=l.features;if(h)for(let y=0;y<h.length;y++){const D=h[y];D&&D.ngInherit&&D(n),D===ig&&(s=!1)}}r=Object.getPrototypeOf(r)}!function W_(n){let r=0,s=null;for(let a=n.length-1;a>=0;a--){const l=n[a];l.hostVars=r+=l.hostVars,l.hostAttrs=ga(l.hostAttrs,s=ga(s,l.hostAttrs))}}(a)}function df(n){return n===ri?{}:n===un?[]:n}function sg(n,r){const s=n.viewQuery;n.viewQuery=s?(a,l)=>{r(a,l),s(a,l)}:r}function Vm(n,r){const s=n.contentQueries;n.contentQueries=s?(a,l,h)=>{r(a,l,h),s(a,l,h)}:r}function Um(n,r){const s=n.hostBindings;n.hostBindings=s?(a,l)=>{r(a,l),s(a,l)}:r}let Vd=null;function dl(){if(!Vd){const n=ir.Symbol;if(n&&n.iterator)Vd=n.iterator;else{const r=Object.getOwnPropertyNames(Map.prototype);for(let s=0;s<r.length;++s){const a=r[s];"entries"!==a&&"size"!==a&&Map.prototype[a]===Map.prototype.entries&&(Vd=a)}}}return Vd}function Ud(n){return!!Za(n)&&(Array.isArray(n)||!(n instanceof Map)&&dl()in n)}function Za(n){return null!==n&&("function"==typeof n||"object"==typeof n)}function Cu(n,r,s){return n[r]=s}function Vo(n,r,s){return!Object.is(n[r],s)&&(n[r]=s,!0)}function og(n,r,s,a){const l=ut();return Vo(l,Xt(),r)&&(Tn(),Iu(Qe(),l,n,r,s,a)),og}function Ti(n,r,s,a){return Vo(n,Xt(),s)?r+Ze(s)+a:tr}function pl(n,r,s,a,l,h,y,D){const A=ut(),U=Tn(),K=n+22,ee=U.firstCreatePass?function Tu(n,r,s,a,l,h,y,D,A){const U=r.consts,K=Oc(r,n,4,y||null,kn(U,D));Hp(r,s,K,kn(U,A)),gr(r,K);const ee=K.tViews=Yh(2,K,a,l,h,r.directiveRegistry,r.pipeRegistry,null,r.schemas,U);return null!==r.queries&&(r.queries.template(r,K),ee.queries=r.queries.embeddedTView(K)),K}(K,U,A,r,s,a,l,h,y):U.data[K];ls(ee,!1);const Se=A[11].createComment("");wu(U,A,Se,ee),bo(Se,A),rf(A,A[K]=Mm(Se,A,Se,ee)),ro(ee)&&Pd(U,A,ee),null!=y&&Zh(A,ee,D)}function Zm(n){return ui(function ta(){return pn.lFrame.contextLView}(),22+n)}function ug(n,r,s){const a=ut();return Vo(a,Xt(),r)&&la(Tn(),Qe(),a,n,r,a[11],s,!1),ug}function mf(n,r,s,a,l){const y=l?"class":"style";lf(n,s,r.inputs[y],y,a)}function Ql(n,r,s,a){const l=ut(),h=Tn(),y=22+n,D=l[11],A=l[y]=$l(D,r,function Un(){return pn.lFrame.currentNamespace}()),U=h.firstCreatePass?function Km(n,r,s,a,l,h,y){const D=r.consts,U=Oc(r,n,2,l,kn(D,h));return Hp(r,s,U,kn(D,y)),null!==U.attrs&&kc(U,U.attrs,!1),null!==U.mergedAttrs&&kc(U,U.mergedAttrs,!0),null!==r.queries&&r.queries.elementStart(r,U),U}(y,h,l,0,r,s,a):h.data[y];ls(U,!0);const K=U.mergedAttrs;null!==K&&pa(D,A,K);const ee=U.classes;null!==ee&&yp(D,A,ee);const Se=U.styles;return null!==Se&&Zg(D,A,Se),64!=(64&U.flags)&&wu(h,l,A,U),0===function xo(){return pn.lFrame.elementDepthCount}()&&bo(A,l),function Us(){pn.lFrame.elementDepthCount++}(),ro(U)&&(Pd(h,l,U),function Cm(n,r,s){if(Fs(r)){const l=r.directiveEnd;for(let h=r.directiveStart;h<l;h++){const y=n.data[h];y.contentQueries&&y.contentQueries(1,s[h],h)}}}(h,U,l)),null!==a&&Zh(l,U),Ql}function yf(){let n=Dr();Mo()?function Qs(){pn.lFrame.isParent=!1}():(n=n.parent,ls(n,!1));const r=n;!function $i(){pn.lFrame.elementDepthCount--}();const s=Tn();return s.firstCreatePass&&(gr(s,n),Fs(n)&&s.queries.elementEnd(n)),null!=r.classesWithoutHost&&function xa(n){return 0!=(16&n.flags)}(r)&&mf(s,r,ut(),r.classesWithoutHost,!0),null!=r.stylesWithoutHost&&function xu(n){return 0!=(32&n.flags)}(r)&&mf(s,r,ut(),r.stylesWithoutHost,!1),yf}function zu(n,r,s,a){return Ql(n,r,s,a),yf(),zu}function Ym(){return ut()}function lg(n){return!!n&&"function"==typeof n.then}function Qm(n){return!!n&&"function"==typeof n.subscribe}const Ef=Qm;function $d(n,r,s,a){const l=ut(),h=Tn(),y=Dr();return function dg(n,r,s,a,l,h,y,D){const A=ro(a),K=n.firstCreatePass&&Nm(n),ee=r[8],Se=Om(r);let Ve=!0;if(3&a.type||D){const Qt=jr(a,r),on=D?D(Qt):Qt,jn=Se.length,Ct=D?Gr=>D(Fr(Gr[a.index])):a.index;let On=null;if(!D&&A&&(On=function Xl(n,r,s,a){const l=n.cleanup;if(null!=l)for(let h=0;h<l.length-1;h+=2){const y=l[h];if(y===s&&l[h+1]===a){const D=r[7],A=l[h+2];return D.length>A?D[A]:null}"string"==typeof y&&(h+=2)}return null}(n,r,l,a.index)),null!==On)(On.__ngLastListenerFn__||On).__ngNextListenerFn__=h,On.__ngLastListenerFn__=h,Ve=!1;else{h=If(a,r,ee,h,!1);const Gr=s.listen(on,l,h);Se.push(h,Gr),K&&K.push(l,Ct,jn,jn+1)}}else h=If(a,r,ee,h,!1);const pt=a.outputs;let St;if(Ve&&null!==pt&&(St=pt[l])){const Qt=St.length;if(Qt)for(let on=0;on<Qt;on+=2){const xs=r[St[on]][St[on+1]].subscribe(h),Qd=Se.length;Se.push(h,xs),K&&K.push(l,a.index,Qd,-(Qd+1))}}}(h,l,l[11],y,n,r,0,a),$d}function hg(n,r,s,a){try{return!1!==s(a)}catch(l){return uf(n,l),!1}}function If(n,r,s,a,l){return function h(y){if(y===Function)return a;sf(2&n.flags?Hn(n.index,r):r);let A=hg(r,0,a,y),U=h.__ngNextListenerFn__;for(;U;)A=hg(r,0,U,y)&&A,U=U.__ngNextListenerFn__;return l&&!1===A&&(y.preventDefault(),y.returnValue=!1),A}}function Df(n=1){return function N(n){return(pn.lFrame.contextLView=function Z(n,r){for(;n>0;)r=r[15],n--;return r}(n,pn.lFrame.contextLView))[8]}(n)}function Tf(n,r,s){return ec(n,"",r,"",s),Tf}function ec(n,r,s,a,l){const h=ut(),y=Ti(h,r,s,a);return y!==tr&&la(Tn(),Qe(),h,n,y,h[11],l,!1),ec}function ey(n,r,s,a,l){const h=n[s+1],y=null===r;let D=a?So(h):ju(h),A=!1;for(;0!==D&&(!1===A||y);){const K=n[D+1];Y_(n[D],r)&&(A=!0,n[D+1]=a?Td(K):Cd(K)),D=a?So(K):ju(K)}A&&(n[s+1]=a?Cd(h):Td(h))}function Y_(n,r){return null===n||null==r||(Array.isArray(n)?n[1]:n)===r||!(!Array.isArray(n)||"string"!=typeof r)&&v(n,r)>=0}function zd(n,r){return function su(n,r,s,a){const l=ut(),h=Tn(),y=function cr(n){const r=pn.lFrame,s=r.bindingIndex;return r.bindingIndex=r.bindingIndex+n,s}(2);h.firstUpdatePass&&function dy(n,r,s,a){const l=n.data;if(null===l[s+1]){const h=l[de()],y=function cy(n,r){return r>=n.expandoStartIndex}(n,s);(function fy(n,r){return 0!=(n.flags&(r?16:32))})(h,a)&&null===r&&!y&&(r=!1),r=function nv(n,r,s,a){const l=function vs(n){const r=pn.lFrame.currentDirectiveIndex;return-1===r?null:n[r]}(n);let h=a?r.residualClasses:r.residualStyles;if(null===l)0===(a?r.classBindings:r.styleBindings)&&(s=Wd(s=Sf(null,n,r,s,a),r.attrs,a),h=null);else{const y=r.directiveStylingLast;if(-1===y||n[y]!==l)if(s=Sf(l,n,r,s,a),null===h){let A=function rv(n,r,s){const a=s?r.classBindings:r.styleBindings;if(0!==ju(a))return n[So(a)]}(n,r,a);void 0!==A&&Array.isArray(A)&&(A=Sf(null,n,r,A[1],a),A=Wd(A,r.attrs,a),function iv(n,r,s,a){n[So(s?r.classBindings:r.styleBindings)]=a}(n,r,a,A))}else h=function hy(n,r,s){let a;const l=r.directiveEnd;for(let h=1+r.directiveStylingLast;h<l;h++)a=Wd(a,n[h].hostAttrs,s);return Wd(a,r.attrs,s)}(n,r,a)}return void 0!==h&&(a?r.residualClasses=h:r.residualStyles=h),s}(l,h,r,a),function Gd(n,r,s,a,l,h){let y=h?r.classBindings:r.styleBindings,D=So(y),A=ju(y);n[a]=s;let K,U=!1;if(Array.isArray(s)){const ee=s;K=ee[1],(null===K||v(ee,K)>0)&&(U=!0)}else K=s;if(l)if(0!==A){const Se=So(n[D+1]);n[a+1]=Mc(Se,D),0!==Se&&(n[Se+1]=bd(n[Se+1],a)),n[D+1]=function I_(n,r){return 131071&n|r<<17}(n[D+1],a)}else n[a+1]=Mc(D,0),0!==D&&(n[D+1]=bd(n[D+1],a)),D=a;else n[a+1]=Mc(A,0),0===D?D=a:n[A+1]=bd(n[A+1],a),A=a;U&&(n[a+1]=Cd(n[a+1])),ey(n,K,a,!0),ey(n,K,a,!1),function ml(n,r,s,a,l){const h=l?n.residualClasses:n.residualStyles;null!=h&&"string"==typeof r&&v(h,r)>=0&&(s[a+1]=Td(s[a+1]))}(r,K,n,a,h),y=Mc(D,A),h?r.classBindings=y:r.styleBindings=y}(l,h,r,s,y,a)}}(h,n,y,a),r!==tr&&Vo(l,y,r)&&function nc(n,r,s,a,l,h,y,D){if(!(3&r.type))return;const A=n.data,U=A[D+1];xf(function fm(n){return 1==(1&n)}(U)?Af(A,r,s,l,ju(U),y):void 0)||(xf(h)||function xp(n){return 2==(2&n)}(U)&&(h=Af(A,null,s,l,D,y)),function h_(n,r,s,a,l){if(r)l?n.addClass(s,a):n.removeClass(s,a);else{let h=-1===a.indexOf("-")?void 0:_u.DashCase;null==l?n.removeStyle(s,a,h):("string"==typeof l&&l.endsWith("!important")&&(l=l.slice(0,-10),h|=_u.Important),n.setStyle(s,a,l,h))}}(a,y,yr(de(),s),l,h))}(h,h.data[de()],l,l[11],n,l[y+1]=function av(n,r){return null==n||("string"==typeof r?n+=r:"object"==typeof n&&(n=Re(eo(n)))),n}(r,s),a,y)}(n,r,null,!0),zd}function Sf(n,r,s,a,l){let h=null;const y=s.directiveEnd;let D=s.directiveStylingLast;for(-1===D?D=s.directiveStart:D++;D<y&&(h=r[D],a=Wd(a,h.hostAttrs,l),h!==n);)D++;return null!==n&&(s.directiveStylingLast=D),a}function Wd(n,r,s){const a=s?1:2;let l=-1;if(null!==r)for(let h=0;h<r.length;h++){const y=r[h];"number"==typeof y?l=y:l===a&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),Ds(n,y,!!s||r[++h]))}return void 0===n?null:n}function Af(n,r,s,a,l,h){const y=null===r;let D;for(;l>0;){const A=n[l],U=Array.isArray(A),K=U?A[1]:A,ee=null===K;let Se=s[l+1];Se===tr&&(Se=ee?un:void 0);let Ve=ee?Fo(Se,a):K===a?Se:void 0;if(U&&!xf(Ve)&&(Ve=Fo(A,a)),xf(Ve)&&(D=Ve,y))return D;const pt=n[l+1];l=y?So(pt):ju(pt)}if(null!==r){let A=h?r.residualClasses:r.residualStyles;null!=A&&(D=Fo(A,a))}return D}function xf(n){return void 0!==n}function py(n,r=""){const s=ut(),a=Tn(),l=n+22,h=a.firstCreatePass?Oc(a,l,1,r,null):a.data[l],y=s[l]=function wh(n,r){return n.createText(r)}(s[11],r);wu(a,s,y,h),ls(h,!1)}function yg(n){return Mf("",n,""),yg}function Mf(n,r,s){const a=ut(),l=Ti(a,n,r,s);return l!==tr&&function iu(n,r,s){const a=yr(r,n);!function Tc(n,r,s){n.setValue(r,s)}(n[11],a,s)}(a,de(),l),Mf}const sc=void 0;var xy=["en",[["a","p"],["AM","PM"],sc],[["AM","PM"],sc,sc],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],sc,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],sc,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",sc,"{1} 'at' {0}",sc],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function fv(n){const s=Math.floor(Math.abs(n)),a=n.toString().replace(/^[^.]*\.?/,"").length;return 1===s&&0===a?1:5}];let jc={};function $c(n){const r=function Oy(n){return n.toLowerCase().replace(/_/g,"-")}(n);let s=kf(r);if(s)return s;const a=r.split("-")[0];if(s=kf(a),s)return s;if("en"===a)return xy;throw new Ge(701,!1)}function Ry(n){return $c(n)[Rn.PluralCase]}function kf(n){return n in jc||(jc[n]=ir.ng&&ir.ng.common&&ir.ng.common.locales&&ir.ng.common.locales[n]),jc[n]}var Rn=(()=>((Rn=Rn||{})[Rn.LocaleId=0]="LocaleId",Rn[Rn.DayPeriodsFormat=1]="DayPeriodsFormat",Rn[Rn.DayPeriodsStandalone=2]="DayPeriodsStandalone",Rn[Rn.DaysFormat=3]="DaysFormat",Rn[Rn.DaysStandalone=4]="DaysStandalone",Rn[Rn.MonthsFormat=5]="MonthsFormat",Rn[Rn.MonthsStandalone=6]="MonthsStandalone",Rn[Rn.Eras=7]="Eras",Rn[Rn.FirstDayOfWeek=8]="FirstDayOfWeek",Rn[Rn.WeekendRange=9]="WeekendRange",Rn[Rn.DateFormat=10]="DateFormat",Rn[Rn.TimeFormat=11]="TimeFormat",Rn[Rn.DateTimeFormat=12]="DateTimeFormat",Rn[Rn.NumberSymbols=13]="NumberSymbols",Rn[Rn.NumberFormats=14]="NumberFormats",Rn[Rn.CurrencyCode=15]="CurrencyCode",Rn[Rn.CurrencySymbol=16]="CurrencySymbol",Rn[Rn.CurrencyName=17]="CurrencyName",Rn[Rn.Currencies=18]="Currencies",Rn[Rn.Directionality=19]="Directionality",Rn[Rn.PluralCase=20]="PluralCase",Rn[Rn.ExtraData=21]="ExtraData",Rn))();const oc="en-US";let ky=oc;function vv(n,r,s,a,l){if(n=Ee(n),Array.isArray(n))for(let h=0;h<n.length;h++)vv(n[h],r,s,a,l);else{const h=Tn(),y=ut();let D=Lu(n)?n:Ee(n.provide),A=Uu(n);const U=Dr(),K=1048575&U.providerIndexes,ee=U.directiveStart,Se=U.providerIndexes>>20;if(Lu(n)||!n.multi){const Ve=new $s(A,l,ul),pt=Ev(D,r,l?K:K+Se,ee);-1===pt?(ks(ra(U,y),h,D),wv(h,n,r.length),r.push(D),U.directiveStart++,U.directiveEnd++,l&&(U.providerIndexes+=1048576),s.push(Ve),y.push(Ve)):(s[pt]=Ve,y[pt]=Ve)}else{const Ve=Ev(D,r,K+Se,ee),pt=Ev(D,r,K,K+Se),St=Ve>=0&&s[Ve],Qt=pt>=0&&s[pt];if(l&&!Qt||!l&&!St){ks(ra(U,y),h,D);const on=function $E(n,r,s,a,l){const h=new $s(n,s,ul);return h.multi=[],h.index=r,h.componentProviders=0,M0(h,l,a&&!s),h}(l?jE:BE,s.length,l,a,A);!l&&Qt&&(s[pt].providerFactory=on),wv(h,n,r.length,0),r.push(D),U.directiveStart++,U.directiveEnd++,l&&(U.providerIndexes+=1048576),s.push(on),y.push(on)}else wv(h,n,Ve>-1?Ve:pt,M0(s[l?pt:Ve],A,!l&&a));!l&&a&&Qt&&s[pt].componentProviders++}}}function wv(n,r,s,a){const l=Lu(r),h=function gu(n){return!!n.useClass}(r);if(l||h){const A=(h?Ee(r.useClass):r).prototype.ngOnDestroy;if(A){const U=n.destroyHooks||(n.destroyHooks=[]);if(!l&&r.multi){const K=U.indexOf(s);-1===K?U.push(s,[a,A]):U[K+1].push(a,A)}else U.push(s,A)}}}function M0(n,r,s){return s&&n.componentProviders++,n.multi.push(r)-1}function Ev(n,r,s,a){for(let l=s;l<a;l++)if(r[l]===n)return l;return-1}function BE(n,r,s,a){return Iv(this.multi,[])}function jE(n,r,s,a){const l=this.multi;let h;if(this.providerFactory){const y=this.providerFactory.componentProviders,D=ln(s,s[1],this.providerFactory.index,a);h=D.slice(0,y),Iv(l,h);for(let A=y;A<D.length;A++)h.push(D[A])}else h=[],Iv(l,h);return h}function Iv(n,r){for(let s=0;s<n.length;s++)r.push((0,n[s])());return r}function R0(n,r=[]){return s=>{s.providersResolver=(a,l)=>function UE(n,r,s){const a=Tn();if(a.firstCreatePass){const l=Rr(n);vv(s,a.data,a.blueprint,l,!0),vv(r,a.data,a.blueprint,l,!1)}}(a,l?l(n):n,r)}}class Uf{}class O0{}function HE(n,r){return new N0(n,r??null)}class N0 extends Uf{constructor(r,s){super(),this._parent=s,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new cf(this);const a=Ur(r);this._bootstrapComponents=yu(a.bootstrap),this._r3Injector=sm(r,s,[{provide:Uf,useValue:this},{provide:B,useValue:this.componentFactoryResolver}],Re(r),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(r)}get injector(){return this._r3Injector}destroy(){const r=this._r3Injector;!r.destroyed&&r.destroy(),this.destroyCbs.forEach(s=>s()),this.destroyCbs=null}onDestroy(r){this.destroyCbs.push(r)}}class Dv extends O0{constructor(r){super(),this.moduleType=r}create(r){return new N0(this.moduleType,r)}}class GE extends Uf{constructor(r,s,a){super(),this.componentFactoryResolver=new cf(this),this.instance=null;const l=new Pl([...r,{provide:Uf,useValue:this},{provide:B,useValue:this.componentFactoryResolver}],s||eu(),a,new Set(["environment"]));this.injector=l,l.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(r){this.injector.onDestroy(r)}}function Cv(n,r,s=null){return new GE(n,r,s).injector}let zE=(()=>{class n{constructor(s){this._injector=s,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(s){if(!s.standalone)return null;if(!this.cachedInjectors.has(s.id)){const a=Yo(0,s.type),l=a.length>0?Cv([a],this._injector,`Standalone[${s.type.name}]`):null;this.cachedInjectors.set(s.id,l)}return this.cachedInjectors.get(s.id)}ngOnDestroy(){try{for(const s of this.cachedInjectors.values())null!==s&&s.destroy()}finally{this.cachedInjectors.clear()}}}return n.\u0275prov=Ft({token:n,providedIn:"environment",factory:()=>new n(yi(Xi))}),n})();function P0(n){n.getStandaloneInjector=r=>r.get(zE).getOrCreateStandaloneInjector(n)}function j0(n,r,s,a){return H0(ut(),R(),n,r,s,a)}function $0(n,r,s,a,l){return function G0(n,r,s,a,l,h,y){const D=r+s;return function fl(n,r,s,a){const l=Vo(n,r,s);return Vo(n,r+1,a)||l}(n,D,l,h)?Cu(n,D+2,y?a.call(y,l,h):a(l,h)):Ig(n,D+2)}(ut(),R(),n,r,s,a,l)}function Ig(n,r){const s=n[r];return s===tr?void 0:s}function H0(n,r,s,a,l,h){const y=r+s;return Vo(n,y,l)?Cu(n,y+1,h?a.call(h,l):a(l)):Ig(n,y+1)}function Z0(n,r){const s=Tn();let a;const l=n+22;s.firstCreatePass?(a=function uI(n,r){if(r)for(let s=r.length-1;s>=0;s--){const a=r[s];if(n===a.name)return a}}(r,s.pipeRegistry),s.data[l]=a,a.onDestroy&&(s.destroyHooks||(s.destroyHooks=[])).push(l,a.onDestroy)):a=s.data[l];const h=a.factory||(a.factory=pi(a.type)),y=rr(ul);try{const D=Ra(!1),A=h();return Ra(D),function gf(n,r,s,a){s>=n.data.length&&(n.data[s]=null,n.blueprint[s]=null),r[s]=a}(s,ut(),l,A),A}finally{rr(y)}}function K0(n,r,s){const a=n+22,l=ut(),h=ui(l,a);return function Dg(n,r){return n[1].data[r].pure}(l,a)?H0(l,R(),r,h.transform,s,h):h.transform(s)}function Tv(n){return r=>{setTimeout(n,void 0,r)}}const vl=class fI extends p.x{constructor(r=!1){super(),this.__isAsync=r}emit(r){super.next(r)}subscribe(r,s,a){let l=r,h=s||(()=>null),y=a;if(r&&"object"==typeof r){const A=r;l=A.next?.bind(A),h=A.error?.bind(A),y=A.complete?.bind(A)}this.__isAsync&&(h=Tv(h),l&&(l=Tv(l)),y&&(y=Tv(y)));const D=super.subscribe({next:l,error:h,complete:y});return r instanceof T.w0&&r.add(D),D}};function pI(){return this._results[dl()]()}class Sv{constructor(r=!1){this._emitDistinctChangesOnly=r,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const s=dl(),a=Sv.prototype;a[s]||(a[s]=pI)}get changes(){return this._changes||(this._changes=new vl)}get(r){return this._results[r]}map(r){return this._results.map(r)}filter(r){return this._results.filter(r)}find(r){return this._results.find(r)}reduce(r,s){return this._results.reduce(r,s)}forEach(r){this._results.forEach(r)}some(r){return this._results.some(r)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(r,s){const a=this;a.dirty=!1;const l=Ji(r);(this._changesDetected=!function Co(n,r,s){if(n.length!==r.length)return!1;for(let a=0;a<n.length;a++){let l=n[a],h=r[a];if(s&&(l=s(l),h=s(h)),h!==l)return!1}return!0}(a._results,l,s))&&(a._results=l,a.length=l.length,a.last=l[this.length-1],a.first=l[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let Cg=(()=>{class n{}return n.__NG_ELEMENT_ID__=yI,n})();const gI=Cg,mI=class extends gI{constructor(r,s,a){super(),this._declarationLView=r,this._declarationTContainer=s,this.elementRef=a}createEmbeddedView(r,s){const a=this._declarationTContainer.tViews,l=Wh(this._declarationLView,a,r,16,null,a.declTNode,null,null,null,null,s||null);l[17]=this._declarationLView[this._declarationTContainer.index];const y=this._declarationLView[19];return null!==y&&(l[19]=y.createEmbeddedView(a)),Nc(a,l,r),new cl(l)}};function yI(){return Ly(Dr(),ut())}function Ly(n,r){return 4&n.type?new mI(r,n,be(n,r)):null}let Vy=(()=>{class n{}return n.__NG_ELEMENT_ID__=_I,n})();function _I(){return J0(Dr(),ut())}const vI=Vy,Y0=class extends vI{constructor(r,s,a){super(),this._lContainer=r,this._hostTNode=s,this._hostLView=a}get element(){return be(this._hostTNode,this._hostLView)}get injector(){return new ft(this._hostTNode,this._hostLView)}get parentInjector(){const r=Do(this._hostTNode,this._hostLView);if(Es(r)){const s=Io(r,this._hostLView),a=Fi(r);return new ft(s[1].data[a+8],s)}return new ft(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(r){const s=Q0(this._lContainer);return null!==s&&s[r]||null}get length(){return this._lContainer.length-10}createEmbeddedView(r,s,a){let l,h;"number"==typeof a?l=a:null!=a&&(l=a.index,h=a.injector);const y=r.createEmbeddedView(s||{},h);return this.insert(y,l),y}createComponent(r,s,a,l,h){const y=r&&!function po(n){return"function"==typeof n}(r);let D;if(y)D=s;else{const ee=s||{};D=ee.index,a=ee.injector,l=ee.projectableNodes,h=ee.environmentInjector||ee.ngModuleRef}const A=y?r:new Du(dn(r)),U=a||this.parentInjector;if(!h&&null==A.ngModule){const Se=(y?U:this.parentInjector).get(Xi,null);Se&&(h=Se)}const K=A.create(U,l,void 0,h);return this.insert(K.hostView,D),K}insert(r,s){const a=r._lView,l=a[1];if(function Go(n){return oi(n[3])}(a)){const K=this.indexOf(r);if(-1!==K)this.detach(K);else{const ee=a[3],Se=new Y0(ee,ee[6],ee[3]);Se.detach(Se.indexOf(r))}}const h=this._adjustIndex(s),y=this._lContainer;!function Ih(n,r,s,a){const l=10+a,h=s.length;a>0&&(s[l-1][4]=r),a<h-10?(r[4]=s[l],au(s,10+a,r)):(s.push(r),r[4]=null),r[3]=s;const y=r[17];null!==y&&s!==y&&function Dh(n,r){const s=n[9];r[16]!==r[3][3][16]&&(n[2]=!0),null===s?n[9]=[r]:s.push(r)}(y,r);const D=r[19];null!==D&&D.insertView(n),r[2]|=64}(l,a,y,h);const D=Sh(h,y),A=a[11],U=bh(A,y[7]);return null!==U&&function Hg(n,r,s,a,l,h){a[0]=l,a[6]=r,gd(n,a,s,1,l,h)}(l,y[6],A,a,U,D),r.attachToViewContainerRef(),au(Av(y),h,r),r}move(r,s){return this.insert(r,s)}indexOf(r){const s=Q0(this._lContainer);return null!==s?s.indexOf(r):-1}remove(r){const s=this._adjustIndex(r,-1),a=vu(this._lContainer,s);a&&(ka(Av(this._lContainer),s),Hl(a[1],a))}detach(r){const s=this._adjustIndex(r,-1),a=vu(this._lContainer,s);return a&&null!=ka(Av(this._lContainer),s)?new cl(a):null}_adjustIndex(r,s=0){return r??this.length+s}};function Q0(n){return n[8]}function Av(n){return n[8]||(n[8]=[])}function J0(n,r){let s;const a=r[n.index];if(oi(a))s=a;else{let l;if(8&n.type)l=Fr(a);else{const h=r[11];l=h.createComment("");const y=jr(n,r);Ca(h,bh(h,y),l,function Th(n,r){return n.nextSibling(r)}(h,y),!1)}r[n.index]=s=Mm(a,r,l,n),rf(r,s)}return new Y0(s,n,r)}class xv{constructor(r){this.queryList=r,this.matches=null}clone(){return new xv(this.queryList)}setDirty(){this.queryList.setDirty()}}class Mv{constructor(r=[]){this.queries=r}createEmbeddedView(r){const s=r.queries;if(null!==s){const a=null!==r.contentQueries?r.contentQueries[0]:s.length,l=[];for(let h=0;h<a;h++){const y=s.getByIndex(h);l.push(this.queries[y.indexInDeclarationView].clone())}return new Mv(l)}return null}insertView(r){this.dirtyQueriesWithMatches(r)}detachView(r){this.dirtyQueriesWithMatches(r)}dirtyQueriesWithMatches(r){for(let s=0;s<this.queries.length;s++)null!==aw(r,s).matches&&this.queries[s].setDirty()}}class X0{constructor(r,s,a=null){this.predicate=r,this.flags=s,this.read=a}}class Rv{constructor(r=[]){this.queries=r}elementStart(r,s){for(let a=0;a<this.queries.length;a++)this.queries[a].elementStart(r,s)}elementEnd(r){for(let s=0;s<this.queries.length;s++)this.queries[s].elementEnd(r)}embeddedTView(r){let s=null;for(let a=0;a<this.length;a++){const l=null!==s?s.length:0,h=this.getByIndex(a).embeddedTView(r,l);h&&(h.indexInDeclarationView=a,null!==s?s.push(h):s=[h])}return null!==s?new Rv(s):null}template(r,s){for(let a=0;a<this.queries.length;a++)this.queries[a].template(r,s)}getByIndex(r){return this.queries[r]}get length(){return this.queries.length}track(r){this.queries.push(r)}}class Ov{constructor(r,s=-1){this.metadata=r,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=s}elementStart(r,s){this.isApplyingToNode(s)&&this.matchTNode(r,s)}elementEnd(r){this._declarationNodeIndex===r.index&&(this._appliesToNextNode=!1)}template(r,s){this.elementStart(r,s)}embeddedTView(r,s){return this.isApplyingToNode(r)?(this.crossesNgTemplate=!0,this.addMatch(-r.index,s),new Ov(this.metadata)):null}isApplyingToNode(r){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const s=this._declarationNodeIndex;let a=r.parent;for(;null!==a&&8&a.type&&a.index!==s;)a=a.parent;return s===(null!==a?a.index:-1)}return this._appliesToNextNode}matchTNode(r,s){const a=this.metadata.predicate;if(Array.isArray(a))for(let l=0;l<a.length;l++){const h=a[l];this.matchTNodeWithReadOption(r,s,II(s,h)),this.matchTNodeWithReadOption(r,s,Gt(s,r,h,!1,!1))}else a===Cg?4&s.type&&this.matchTNodeWithReadOption(r,s,-1):this.matchTNodeWithReadOption(r,s,Gt(s,r,a,!1,!1))}matchTNodeWithReadOption(r,s,a){if(null!==a){const l=this.metadata.read;if(null!==l)if(l===Xe||l===Vy||l===Cg&&4&s.type)this.addMatch(s.index,-2);else{const h=Gt(s,r,l,!1,!1);null!==h&&this.addMatch(s.index,h)}else this.addMatch(s.index,a)}}addMatch(r,s){null===this.matches?this.matches=[r,s]:this.matches.push(r,s)}}function II(n,r){const s=n.localNames;if(null!==s)for(let a=0;a<s.length;a+=2)if(s[a]===r)return s[a+1];return null}function CI(n,r,s,a){return-1===s?function DI(n,r){return 11&n.type?be(n,r):4&n.type?Ly(n,r):null}(r,n):-2===s?function bI(n,r,s){return s===Xe?be(r,n):s===Cg?Ly(r,n):s===Vy?J0(r,n):void 0}(n,r,a):ln(n,n[1],s,r)}function ew(n,r,s,a){const l=r[19].queries[a];if(null===l.matches){const h=n.data,y=s.matches,D=[];for(let A=0;A<y.length;A+=2){const U=y[A];D.push(U<0?null:CI(r,h[U],y[A+1],s.metadata.read))}l.matches=D}return l.matches}function Nv(n,r,s,a){const l=n.queries.getByIndex(s),h=l.matches;if(null!==h){const y=ew(n,r,l,s);for(let D=0;D<h.length;D+=2){const A=h[D];if(A>0)a.push(y[D/2]);else{const U=h[D+1],K=r[-A];for(let ee=10;ee<K.length;ee++){const Se=K[ee];Se[17]===Se[3]&&Nv(Se[1],Se,U,a)}if(null!==K[9]){const ee=K[9];for(let Se=0;Se<ee.length;Se++){const Ve=ee[Se];Nv(Ve[1],Ve,U,a)}}}}}return a}function tw(n){const r=ut(),s=Tn(),a=Eo();co(a+1);const l=aw(s,a);if(n.dirty&&Sr(r)===(2==(2&l.metadata.flags))){if(null===l.matches)n.reset([]);else{const h=l.crossesNgTemplate?Nv(s,r,a,[]):ew(s,r,l,a);n.reset(h,Rt),n.notifyOnChanges()}return!0}return!1}function nw(n,r,s){const a=Tn();a.firstCreatePass&&(ow(a,new X0(n,r,s),-1),2==(2&r)&&(a.staticViewQueries=!0)),sw(a,ut(),r)}function rw(n,r,s,a){const l=Tn();if(l.firstCreatePass){const h=Dr();ow(l,new X0(r,s,a),h.index),function SI(n,r){const s=n.contentQueries||(n.contentQueries=[]);r!==(s.length?s[s.length-1]:-1)&&s.push(n.queries.length-1,r)}(l,n),2==(2&s)&&(l.staticContentQueries=!0)}sw(l,ut(),s)}function iw(){return function TI(n,r){return n[19].queries[r].queryList}(ut(),Eo())}function sw(n,r,s){const a=new Sv(4==(4&s));Qh(n,r,a,a.destroy),null===r[19]&&(r[19]=new Mv),r[19].queries.push(new xv(a))}function ow(n,r,s){null===n.queries&&(n.queries=new Rv),n.queries.track(new Ov(r,s))}function aw(n,r){return n.queries.getByIndex(r)}function uw(n,r){return Ly(n,r)}function By(...n){}const Sw=new nt("Application Initializer");let jy=(()=>{class n{constructor(s){this.appInits=s,this.resolve=By,this.reject=By,this.initialized=!1,this.done=!1,this.donePromise=new Promise((a,l)=>{this.resolve=a,this.reject=l})}runInitializers(){if(this.initialized)return;const s=[],a=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let l=0;l<this.appInits.length;l++){const h=this.appInits[l]();if(lg(h))s.push(h);else if(Ef(h)){const y=new Promise((D,A)=>{h.subscribe({complete:D,error:A})});s.push(y)}}Promise.all(s).then(()=>{a()}).catch(l=>{this.reject(l)}),0===s.length&&a(),this.initialized=!0}}return n.\u0275fac=function(s){return new(s||n)(yi(Sw,8))},n.\u0275prov=Ft({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Aw=new nt("AppId",{providedIn:"root",factory:function xw(){return`${Vv()}${Vv()}${Vv()}`}});function Vv(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Mw=new nt("Platform Initializer"),qI=new nt("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),Rw=new nt("appBootstrapListener");let ZI=(()=>{class n{log(s){console.log(s)}warn(s){console.warn(s)}}return n.\u0275fac=function(s){return new(s||n)},n.\u0275prov=Ft({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();const $y=new nt("LocaleId",{providedIn:"root",factory:()=>O($y,dt.Optional|dt.SkipSelf)||function KI(){return typeof $localize<"u"&&$localize.locale||oc}()}),YI=new nt("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class QI{constructor(r,s){this.ngModuleFactory=r,this.componentFactories=s}}let JI=(()=>{class n{compileModuleSync(s){return new Dv(s)}compileModuleAsync(s){return Promise.resolve(this.compileModuleSync(s))}compileModuleAndAllComponentsSync(s){const a=this.compileModuleSync(s),h=yu(Ur(s).declarations).reduce((y,D)=>{const A=dn(D);return A&&y.push(new Du(A)),y},[]);return new QI(a,h)}compileModuleAndAllComponentsAsync(s){return Promise.resolve(this.compileModuleAndAllComponentsSync(s))}clearCache(){}clearCacheFor(s){}getModuleId(s){}}return n.\u0275fac=function(s){return new(s||n)},n.\u0275prov=Ft({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const tD=(()=>Promise.resolve(0))();function Uv(n){typeof Zone>"u"?tD.then(()=>{n&&n.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",n)}class Au{constructor({enableLongStackTrace:r=!1,shouldCoalesceEventChangeDetection:s=!1,shouldCoalesceRunChangeDetection:a=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new vl(!1),this.onMicrotaskEmpty=new vl(!1),this.onStable=new vl(!1),this.onError=new vl(!1),typeof Zone>"u")throw new Ge(908,!1);Zone.assertZonePatched();const l=this;if(l._nesting=0,l._outer=l._inner=Zone.current,Zone.AsyncStackTaggingZoneSpec){const h=Zone.AsyncStackTaggingZoneSpec;l._inner=l._inner.fork(new h("Angular"))}Zone.TaskTrackingZoneSpec&&(l._inner=l._inner.fork(new Zone.TaskTrackingZoneSpec)),r&&Zone.longStackTraceZoneSpec&&(l._inner=l._inner.fork(Zone.longStackTraceZoneSpec)),l.shouldCoalesceEventChangeDetection=!a&&s,l.shouldCoalesceRunChangeDetection=a,l.lastRequestAnimationFrameId=-1,l.nativeRequestAnimationFrame=function nD(){let n=ir.requestAnimationFrame,r=ir.cancelAnimationFrame;if(typeof Zone<"u"&&n&&r){const s=n[Zone.__symbol__("OriginalDelegate")];s&&(n=s);const a=r[Zone.__symbol__("OriginalDelegate")];a&&(r=a)}return{nativeRequestAnimationFrame:n,nativeCancelAnimationFrame:r}}().nativeRequestAnimationFrame,function sD(n){const r=()=>{!function iD(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(ir,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,jv(n),n.isCheckStableRunning=!0,Bv(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),jv(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(s,a,l,h,y,D)=>{try{return Pw(n),s.invokeTask(l,h,y,D)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===h.type||n.shouldCoalesceRunChangeDetection)&&r(),kw(n)}},onInvoke:(s,a,l,h,y,D,A)=>{try{return Pw(n),s.invoke(l,h,y,D,A)}finally{n.shouldCoalesceRunChangeDetection&&r(),kw(n)}},onHasTask:(s,a,l,h)=>{s.hasTask(l,h),a===l&&("microTask"==h.change?(n._hasPendingMicrotasks=h.microTask,jv(n),Bv(n)):"macroTask"==h.change&&(n.hasPendingMacrotasks=h.macroTask))},onHandleError:(s,a,l,h)=>(s.handleError(l,h),n.runOutsideAngular(()=>n.onError.emit(h)),!1)})}(l)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Au.isInAngularZone())throw new Ge(909,!1)}static assertNotInAngularZone(){if(Au.isInAngularZone())throw new Ge(909,!1)}run(r,s,a){return this._inner.run(r,s,a)}runTask(r,s,a,l){const h=this._inner,y=h.scheduleEventTask("NgZoneEvent: "+l,r,rD,By,By);try{return h.runTask(y,s,a)}finally{h.cancelTask(y)}}runGuarded(r,s,a){return this._inner.runGuarded(r,s,a)}runOutsideAngular(r){return this._outer.run(r)}}const rD={};function Bv(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function jv(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function Pw(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function kw(n){n._nesting--,Bv(n)}class oD{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new vl,this.onMicrotaskEmpty=new vl,this.onStable=new vl,this.onError=new vl}run(r,s,a){return r.apply(s,a)}runGuarded(r,s,a){return r.apply(s,a)}runOutsideAngular(r){return r()}runTask(r,s,a,l){return r.apply(s,a)}}const Fw=new nt(""),Lw=new nt("");let $v,aD=(()=>{class n{constructor(s,a,l){this._ngZone=s,this.registry=a,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,$v||(function uD(n){$v=n}(l),l.addToWindow(a)),this._watchAngularEvents(),s.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Au.assertNotInAngularZone(),Uv(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Uv(()=>{for(;0!==this._callbacks.length;){let s=this._callbacks.pop();clearTimeout(s.timeoutId),s.doneCb(this._didWork)}this._didWork=!1});else{let s=this.getPendingTasks();this._callbacks=this._callbacks.filter(a=>!a.updateCb||!a.updateCb(s)||(clearTimeout(a.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(s=>({source:s.source,creationLocation:s.creationLocation,data:s.data})):[]}addCallback(s,a,l){let h=-1;a&&a>0&&(h=setTimeout(()=>{this._callbacks=this._callbacks.filter(y=>y.timeoutId!==h),s(this._didWork,this.getPendingTasks())},a)),this._callbacks.push({doneCb:s,timeoutId:h,updateCb:l})}whenStable(s,a,l){if(l&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(s,a,l),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(s){this.registry.registerApplication(s,this)}unregisterApplication(s){this.registry.unregisterApplication(s)}findProviders(s,a,l){return[]}}return n.\u0275fac=function(s){return new(s||n)(yi(Au),yi(Vw),yi(Lw))},n.\u0275prov=Ft({token:n,factory:n.\u0275fac}),n})(),Vw=(()=>{class n{constructor(){this._applications=new Map}registerApplication(s,a){this._applications.set(s,a)}unregisterApplication(s){this._applications.delete(s)}unregisterAllApplications(){this._applications.clear()}getTestability(s){return this._applications.get(s)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(s,a=!0){return $v?.findTestabilityInTree(this,s,a)??null}}return n.\u0275fac=function(s){return new(s||n)},n.\u0275prov=Ft({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})(),Gc=null;const Uw=new nt("AllowMultipleToken"),Hv=new nt("PlatformDestroyListeners");class dD{constructor(r,s){this.name=r,this.token=s}}function jw(n,r,s=[]){const a=`Platform: ${r}`,l=new nt(a);return(h=[])=>{let y=Gv();if(!y||y.injector.get(Uw,!1)){const D=[...s,...h,{provide:l,useValue:!0}];n?n(D):function hD(n){if(Gc&&!Gc.get(Uw,!1))throw new Ge(400,!1);Gc=n;const r=n.get(Hw);(function Bw(n){const r=n.get(Mw,null);r&&r.forEach(s=>s())})(n)}(function $w(n=[],r){return Bu.create({name:r,providers:[{provide:Zn,useValue:"platform"},{provide:Hv,useValue:new Set([()=>Gc=null])},...n]})}(D,a))}return function pD(n){const r=Gv();if(!r)throw new Ge(401,!1);return r}()}}function Gv(){return Gc?.get(Hw)??null}let Hw=(()=>{class n{constructor(s){this._injector=s,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(s,a){const l=function zw(n,r){let s;return s="noop"===n?new oD:("zone.js"===n?void 0:n)||new Au(r),s}(a?.ngZone,function Gw(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!n||!n.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!n||!n.ngZoneRunCoalescing)||!1}}(a)),h=[{provide:Au,useValue:l}];return l.run(()=>{const y=Bu.create({providers:h,parent:this.injector,name:s.moduleType.name}),D=s.create(y),A=D.injector.get(cd,null);if(!A)throw new Ge(402,!1);return l.runOutsideAngular(()=>{const U=l.onError.subscribe({next:K=>{A.handleError(K)}});D.onDestroy(()=>{Gy(this._modules,D),U.unsubscribe()})}),function Ww(n,r,s){try{const a=s();return lg(a)?a.catch(l=>{throw r.runOutsideAngular(()=>n.handleError(l)),l}):a}catch(a){throw r.runOutsideAngular(()=>n.handleError(a)),a}}(A,l,()=>{const U=D.injector.get(jy);return U.runInitializers(),U.donePromise.then(()=>(function i(n){Bt(n,"Expected localeId to be defined"),"string"==typeof n&&(ky=n.toLowerCase().replace(/_/g,"-"))}(D.injector.get($y,oc)||oc),this._moduleDoBootstrap(D),D))})})}bootstrapModule(s,a=[]){const l=qw({},a);return function lD(n,r,s){const a=new Dv(s);return Promise.resolve(a)}(0,0,s).then(h=>this.bootstrapModuleFactory(h,l))}_moduleDoBootstrap(s){const a=s.injector.get(Hy);if(s._bootstrapComponents.length>0)s._bootstrapComponents.forEach(l=>a.bootstrap(l));else{if(!s.instance.ngDoBootstrap)throw new Ge(403,!1);s.instance.ngDoBootstrap(a)}this._modules.push(s)}onDestroy(s){this._destroyListeners.push(s)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Ge(404,!1);this._modules.slice().forEach(a=>a.destroy()),this._destroyListeners.forEach(a=>a());const s=this._injector.get(Hv,null);s&&(s.forEach(a=>a()),s.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return n.\u0275fac=function(s){return new(s||n)(yi(Bu))},n.\u0275prov=Ft({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();function qw(n,r){return Array.isArray(r)?r.reduce(qw,n):{...n,...r}}let Hy=(()=>{class n{constructor(s,a,l){this._zone=s,this._injector=a,this._exceptionHandler=l,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const h=new G.y(D=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{D.next(this._stable),D.complete()})}),y=new G.y(D=>{let A;this._zone.runOutsideAngular(()=>{A=this._zone.onStable.subscribe(()=>{Au.assertNotInAngularZone(),Uv(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,D.next(!0))})})});const U=this._zone.onUnstable.subscribe(()=>{Au.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{D.next(!1)}))});return()=>{A.unsubscribe(),U.unsubscribe()}});this.isStable=(0,De.T)(h,y.pipe((0,we.B)()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(s,a){const l=s instanceof zs;if(!this._injector.get(jy).done)throw!l&&Jr(s),new Ge(405,false);let y;y=l?s:this._injector.get(B).resolveComponentFactory(s),this.componentTypes.push(y.componentType);const D=function cD(n){return n.isBoundToModule}(y)?void 0:this._injector.get(Uf),U=y.create(Bu.NULL,[],a||y.selector,D),K=U.location.nativeElement,ee=U.injector.get(Fw,null);return ee?.registerApplication(K),U.onDestroy(()=>{this.detachView(U.hostView),Gy(this.components,U),ee?.unregisterApplication(K)}),this._loadComponent(U),U}tick(){if(this._runningTick)throw new Ge(101,!1);try{this._runningTick=!0;for(let s of this._views)s.detectChanges()}catch(s){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(s))}finally{this._runningTick=!1}}attachView(s){const a=s;this._views.push(a),a.attachToAppRef(this)}detachView(s){const a=s;Gy(this._views,a),a.detachFromAppRef()}_loadComponent(s){this.attachView(s.hostView),this.tick(),this.components.push(s),this._injector.get(Rw,[]).concat(this._bootstrapListeners).forEach(l=>l(s))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(s=>s()),this._views.slice().forEach(s=>s.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(s){return this._destroyListeners.push(s),()=>Gy(this._destroyListeners,s)}destroy(){if(this._destroyed)throw new Ge(406,!1);const s=this._injector;s.destroy&&!s.destroyed&&s.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return n.\u0275fac=function(s){return new(s||n)(yi(Au),yi(Xi),yi(cd))},n.\u0275prov=Ft({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Gy(n,r){const s=n.indexOf(r);s>-1&&n.splice(s,1)}let Kw=!0,Yw=!1;function mD(){return Yw=!0,Kw}function yD(){if(Yw)throw new Error("Cannot enable prod mode after platform setup.");Kw=!1}let _D=(()=>{class n{}return n.__NG_ELEMENT_ID__=vD,n})();function vD(n){return function wD(n,r,s){if(Ms(n)&&!s){const a=Hn(n.index,r);return new cl(a,a)}return 47&n.type?new cl(r[16],r):null}(Dr(),ut(),16==(16&n))}class eE{constructor(){}supports(r){return Ud(r)}create(r){return new TD(r)}}const bD=(n,r)=>r;class TD{constructor(r){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=r||bD}forEachItem(r){let s;for(s=this._itHead;null!==s;s=s._next)r(s)}forEachOperation(r){let s=this._itHead,a=this._removalsHead,l=0,h=null;for(;s||a;){const y=!a||s&&s.currentIndex<nE(a,l,h)?s:a,D=nE(y,l,h),A=y.currentIndex;if(y===a)l--,a=a._nextRemoved;else if(s=s._next,null==y.previousIndex)l++;else{h||(h=[]);const U=D-l,K=A-l;if(U!=K){for(let Se=0;Se<U;Se++){const Ve=Se<h.length?h[Se]:h[Se]=0,pt=Ve+Se;K<=pt&&pt<U&&(h[Se]=Ve+1)}h[y.previousIndex]=K-U}}D!==A&&r(y,D,A)}}forEachPreviousItem(r){let s;for(s=this._previousItHead;null!==s;s=s._nextPrevious)r(s)}forEachAddedItem(r){let s;for(s=this._additionsHead;null!==s;s=s._nextAdded)r(s)}forEachMovedItem(r){let s;for(s=this._movesHead;null!==s;s=s._nextMoved)r(s)}forEachRemovedItem(r){let s;for(s=this._removalsHead;null!==s;s=s._nextRemoved)r(s)}forEachIdentityChange(r){let s;for(s=this._identityChangesHead;null!==s;s=s._nextIdentityChange)r(s)}diff(r){if(null==r&&(r=[]),!Ud(r))throw new Ge(900,!1);return this.check(r)?this:null}onDestroy(){}check(r){this._reset();let l,h,y,s=this._itHead,a=!1;if(Array.isArray(r)){this.length=r.length;for(let D=0;D<this.length;D++)h=r[D],y=this._trackByFn(D,h),null!==s&&Object.is(s.trackById,y)?(a&&(s=this._verifyReinsertion(s,h,y,D)),Object.is(s.item,h)||this._addIdentityChange(s,h)):(s=this._mismatch(s,h,y,D),a=!0),s=s._next}else l=0,function Xo(n,r){if(Array.isArray(n))for(let s=0;s<n.length;s++)r(n[s]);else{const s=n[dl()]();let a;for(;!(a=s.next()).done;)r(a.value)}}(r,D=>{y=this._trackByFn(l,D),null!==s&&Object.is(s.trackById,y)?(a&&(s=this._verifyReinsertion(s,D,y,l)),Object.is(s.item,D)||this._addIdentityChange(s,D)):(s=this._mismatch(s,D,y,l),a=!0),s=s._next,l++}),this.length=l;return this._truncate(s),this.collection=r,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let r;for(r=this._previousItHead=this._itHead;null!==r;r=r._next)r._nextPrevious=r._next;for(r=this._additionsHead;null!==r;r=r._nextAdded)r.previousIndex=r.currentIndex;for(this._additionsHead=this._additionsTail=null,r=this._movesHead;null!==r;r=r._nextMoved)r.previousIndex=r.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(r,s,a,l){let h;return null===r?h=this._itTail:(h=r._prev,this._remove(r)),null!==(r=null===this._unlinkedRecords?null:this._unlinkedRecords.get(a,null))?(Object.is(r.item,s)||this._addIdentityChange(r,s),this._reinsertAfter(r,h,l)):null!==(r=null===this._linkedRecords?null:this._linkedRecords.get(a,l))?(Object.is(r.item,s)||this._addIdentityChange(r,s),this._moveAfter(r,h,l)):r=this._addAfter(new SD(s,a),h,l),r}_verifyReinsertion(r,s,a,l){let h=null===this._unlinkedRecords?null:this._unlinkedRecords.get(a,null);return null!==h?r=this._reinsertAfter(h,r._prev,l):r.currentIndex!=l&&(r.currentIndex=l,this._addToMoves(r,l)),r}_truncate(r){for(;null!==r;){const s=r._next;this._addToRemovals(this._unlink(r)),r=s}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(r,s,a){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(r);const l=r._prevRemoved,h=r._nextRemoved;return null===l?this._removalsHead=h:l._nextRemoved=h,null===h?this._removalsTail=l:h._prevRemoved=l,this._insertAfter(r,s,a),this._addToMoves(r,a),r}_moveAfter(r,s,a){return this._unlink(r),this._insertAfter(r,s,a),this._addToMoves(r,a),r}_addAfter(r,s,a){return this._insertAfter(r,s,a),this._additionsTail=null===this._additionsTail?this._additionsHead=r:this._additionsTail._nextAdded=r,r}_insertAfter(r,s,a){const l=null===s?this._itHead:s._next;return r._next=l,r._prev=s,null===l?this._itTail=r:l._prev=r,null===s?this._itHead=r:s._next=r,null===this._linkedRecords&&(this._linkedRecords=new tE),this._linkedRecords.put(r),r.currentIndex=a,r}_remove(r){return this._addToRemovals(this._unlink(r))}_unlink(r){null!==this._linkedRecords&&this._linkedRecords.remove(r);const s=r._prev,a=r._next;return null===s?this._itHead=a:s._next=a,null===a?this._itTail=s:a._prev=s,r}_addToMoves(r,s){return r.previousIndex===s||(this._movesTail=null===this._movesTail?this._movesHead=r:this._movesTail._nextMoved=r),r}_addToRemovals(r){return null===this._unlinkedRecords&&(this._unlinkedRecords=new tE),this._unlinkedRecords.put(r),r.currentIndex=null,r._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=r,r._prevRemoved=null):(r._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=r),r}_addIdentityChange(r,s){return r.item=s,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=r:this._identityChangesTail._nextIdentityChange=r,r}}class SD{constructor(r,s){this.item=r,this.trackById=s,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class AD{constructor(){this._head=null,this._tail=null}add(r){null===this._head?(this._head=this._tail=r,r._nextDup=null,r._prevDup=null):(this._tail._nextDup=r,r._prevDup=this._tail,r._nextDup=null,this._tail=r)}get(r,s){let a;for(a=this._head;null!==a;a=a._nextDup)if((null===s||s<=a.currentIndex)&&Object.is(a.trackById,r))return a;return null}remove(r){const s=r._prevDup,a=r._nextDup;return null===s?this._head=a:s._nextDup=a,null===a?this._tail=s:a._prevDup=s,null===this._head}}class tE{constructor(){this.map=new Map}put(r){const s=r.trackById;let a=this.map.get(s);a||(a=new AD,this.map.set(s,a)),a.add(r)}get(r,s){const l=this.map.get(r);return l?l.get(r,s):null}remove(r){const s=r.trackById;return this.map.get(s).remove(r)&&this.map.delete(s),r}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function nE(n,r,s){const a=n.previousIndex;if(null===a)return a;let l=0;return s&&a<s.length&&(l=s[a]),a+r+l}class rE{constructor(){}supports(r){return r instanceof Map||Za(r)}create(){return new xD}}class xD{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(r){let s;for(s=this._mapHead;null!==s;s=s._next)r(s)}forEachPreviousItem(r){let s;for(s=this._previousMapHead;null!==s;s=s._nextPrevious)r(s)}forEachChangedItem(r){let s;for(s=this._changesHead;null!==s;s=s._nextChanged)r(s)}forEachAddedItem(r){let s;for(s=this._additionsHead;null!==s;s=s._nextAdded)r(s)}forEachRemovedItem(r){let s;for(s=this._removalsHead;null!==s;s=s._nextRemoved)r(s)}diff(r){if(r){if(!(r instanceof Map||Za(r)))throw new Ge(900,!1)}else r=new Map;return this.check(r)?this:null}onDestroy(){}check(r){this._reset();let s=this._mapHead;if(this._appendAfter=null,this._forEach(r,(a,l)=>{if(s&&s.key===l)this._maybeAddToChanges(s,a),this._appendAfter=s,s=s._next;else{const h=this._getOrCreateRecordForKey(l,a);s=this._insertBeforeOrAppend(s,h)}}),s){s._prev&&(s._prev._next=null),this._removalsHead=s;for(let a=s;null!==a;a=a._nextRemoved)a===this._mapHead&&(this._mapHead=null),this._records.delete(a.key),a._nextRemoved=a._next,a.previousValue=a.currentValue,a.currentValue=null,a._prev=null,a._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(r,s){if(r){const a=r._prev;return s._next=r,s._prev=a,r._prev=s,a&&(a._next=s),r===this._mapHead&&(this._mapHead=s),this._appendAfter=r,r}return this._appendAfter?(this._appendAfter._next=s,s._prev=this._appendAfter):this._mapHead=s,this._appendAfter=s,null}_getOrCreateRecordForKey(r,s){if(this._records.has(r)){const l=this._records.get(r);this._maybeAddToChanges(l,s);const h=l._prev,y=l._next;return h&&(h._next=y),y&&(y._prev=h),l._next=null,l._prev=null,l}const a=new MD(r);return this._records.set(r,a),a.currentValue=s,this._addToAdditions(a),a}_reset(){if(this.isDirty){let r;for(this._previousMapHead=this._mapHead,r=this._previousMapHead;null!==r;r=r._next)r._nextPrevious=r._next;for(r=this._changesHead;null!==r;r=r._nextChanged)r.previousValue=r.currentValue;for(r=this._additionsHead;null!=r;r=r._nextAdded)r.previousValue=r.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(r,s){Object.is(s,r.currentValue)||(r.previousValue=r.currentValue,r.currentValue=s,this._addToChanges(r))}_addToAdditions(r){null===this._additionsHead?this._additionsHead=this._additionsTail=r:(this._additionsTail._nextAdded=r,this._additionsTail=r)}_addToChanges(r){null===this._changesHead?this._changesHead=this._changesTail=r:(this._changesTail._nextChanged=r,this._changesTail=r)}_forEach(r,s){r instanceof Map?r.forEach(s):Object.keys(r).forEach(a=>s(r[a],a))}}class MD{constructor(r){this.key=r,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function iE(){return new Kv([new eE])}let Kv=(()=>{class n{constructor(s){this.factories=s}static create(s,a){if(null!=a){const l=a.factories.slice();s=s.concat(l)}return new n(s)}static extend(s){return{provide:n,useFactory:a=>n.create(s,a||iE()),deps:[[n,new vn,new Mt]]}}find(s){const a=this.factories.find(l=>l.supports(s));if(null!=a)return a;throw new Ge(901,!1)}}return n.\u0275prov=Ft({token:n,providedIn:"root",factory:iE}),n})();function sE(){return new Yv([new rE])}let Yv=(()=>{class n{constructor(s){this.factories=s}static create(s,a){if(a){const l=a.factories.slice();s=s.concat(l)}return new n(s)}static extend(s){return{provide:n,useFactory:a=>n.create(s,a||sE()),deps:[[n,new vn,new Mt]]}}find(s){const a=this.factories.find(l=>l.supports(s));if(a)return a;throw new Ge(901,!1)}}return n.\u0275prov=Ft({token:n,providedIn:"root",factory:sE}),n})();const ND=jw(null,"core",[]);let PD=(()=>{class n{constructor(s){}}return n.\u0275fac=function(s){return new(s||n)(yi(Hy))},n.\u0275mod=Vt({type:n}),n.\u0275inj=an({}),n})();function kD(n){return"boolean"==typeof n?n:null!=n&&"false"!==n}},433:(jt,$e,j)=>{j.d($e,{Fj:()=>he,u5:()=>Ys,JJ:()=>An,JL:()=>Vn,F:()=>Ir,On:()=>ot,_Y:()=>wt});var p=j(4650),T=j(6895),G=j(8996),De=j(9751),we=j(4742),xe=j(8421),Me=j(7669),Re=j(5403),Fe=j(3268),fe=j(1810),Ee=j(4004);let mt=(()=>{class L{constructor(R,Y){this._renderer=R,this._elementRef=Y,this.onChange=Ke=>{},this.onTouched=()=>{}}setProperty(R,Y){this._renderer.setProperty(this._elementRef.nativeElement,R,Y)}registerOnTouched(R){this.onTouched=R}registerOnChange(R){this.onChange=R}setDisabledState(R){this.setProperty("disabled",R)}}return L.\u0275fac=function(R){return new(R||L)(p.Y36(p.Qsj),p.Y36(p.SBq))},L.\u0275dir=p.lG2({type:L}),L})(),rt=(()=>{class L extends mt{}return L.\u0275fac=function(){let P;return function(Y){return(P||(P=p.n5z(L)))(Y||L)}}(),L.\u0275dir=p.lG2({type:L,features:[p.qOj]}),L})();const Ge=new p.OlP("NgValueAccessor"),ze={provide:Ge,useExisting:(0,p.Gpc)(()=>he),multi:!0},xt=new p.OlP("CompositionEventMode");let he=(()=>{class L extends mt{constructor(R,Y,Ke){super(R,Y),this._compositionMode=Ke,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function Pt(){const L=(0,T.q)()?(0,T.q)().getUserAgent():"";return/android (\d+)/.test(L.toLowerCase())}())}writeValue(R){this.setProperty("value",R??"")}_handleInput(R){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(R)}_compositionStart(){this._composing=!0}_compositionEnd(R){this._composing=!1,this._compositionMode&&this.onChange(R)}}return L.\u0275fac=function(R){return new(R||L)(p.Y36(p.Qsj),p.Y36(p.SBq),p.Y36(xt,8))},L.\u0275dir=p.lG2({type:L,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(R,Y){1&R&&p.NdJ("input",function(Xt){return Y._handleInput(Xt.target.value)})("blur",function(){return Y.onTouched()})("compositionstart",function(){return Y._compositionStart()})("compositionend",function(Xt){return Y._compositionEnd(Xt.target.value)})},features:[p._Bn([ze]),p.qOj]}),L})();const Je=new p.OlP("NgValidators"),oe=new p.OlP("NgAsyncValidators");function tn(L){return null!=L}function qt(L){return(0,p.QGY)(L)?(0,G.D)(L):L}function rn(L){let P={};return L.forEach(R=>{P=null!=R?{...P,...R}:P}),0===Object.keys(P).length?null:P}function Ft(L,P){return P.map(R=>R(L))}function an(L){return L.map(P=>function Sn(L){return!L.validate}(P)?P:R=>P.validate(R))}function Oi(L){return null!=L?function Fn(L){if(!L)return null;const P=L.filter(tn);return 0==P.length?null:function(R){return rn(Ft(R,P))}}(an(L)):null}function Ar(L){return null!=L?function Nr(L){if(!L)return null;const P=L.filter(tn);return 0==P.length?null:function(R){return function ue(...L){const P=(0,Me.jO)(L),{args:R,keys:Y}=(0,we.D)(L),Ke=new De.y(Xt=>{const{length:cr}=R;if(!cr)return void Xt.complete();const cs=new Array(cr);let Di=cr,_r=cr;for(let _s=0;_s<cr;_s++){let Js=!1;(0,xe.Xf)(R[_s]).subscribe((0,Re.x)(Xt,vs=>{Js||(Js=!0,_r--),cs[_s]=vs},()=>Di--,void 0,()=>{(!Di||!Js)&&(_r||Xt.next(Y?(0,fe.n)(Y,cs):cs),Xt.complete())}))}});return P?Ke.pipe((0,Fe.Z)(P)):Ke}(Ft(R,P).map(qt)).pipe((0,Ee.U)(rn))}}(an(L)):null}function Tr(L,P){return null===L?[P]:Array.isArray(L)?[...L,P]:[L,P]}function nr(L){return L?Array.isArray(L)?L:[L]:[]}function Ln(L,P){return Array.isArray(L)?L.includes(P):L===P}function mr(L,P){const R=nr(P);return nr(L).forEach(Ke=>{Ln(R,Ke)||R.push(Ke)}),R}function dt(L,P){return nr(P).filter(R=>!Ln(L,R))}class zn{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(P){this._rawValidators=P||[],this._composedValidatorFn=Oi(this._rawValidators)}_setAsyncValidators(P){this._rawAsyncValidators=P||[],this._composedAsyncValidatorFn=Ar(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(P){this._onDestroyCallbacks.push(P)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(P=>P()),this._onDestroyCallbacks=[]}reset(P){this.control&&this.control.reset(P)}hasError(P,R){return!!this.control&&this.control.hasError(P,R)}getError(P,R){return this.control?this.control.getError(P,R):null}}class wn extends zn{get formDirective(){return null}get path(){return null}}class rr extends zn{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class vi{constructor(P){this._cd=P}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let An=(()=>{class L extends vi{constructor(R){super(R)}}return L.\u0275fac=function(R){return new(R||L)(p.Y36(rr,2))},L.\u0275dir=p.lG2({type:L,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(R,Y){2&R&&p.ekj("ng-untouched",Y.isUntouched)("ng-touched",Y.isTouched)("ng-pristine",Y.isPristine)("ng-dirty",Y.isDirty)("ng-valid",Y.isValid)("ng-invalid",Y.isInvalid)("ng-pending",Y.isPending)},features:[p.qOj]}),L})(),Vn=(()=>{class L extends vi{constructor(R){super(R)}}return L.\u0275fac=function(R){return new(R||L)(p.Y36(wn,10))},L.\u0275dir=p.lG2({type:L,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(R,Y){2&R&&p.ekj("ng-untouched",Y.isUntouched)("ng-touched",Y.isTouched)("ng-pristine",Y.isPristine)("ng-dirty",Y.isDirty)("ng-valid",Y.isValid)("ng-invalid",Y.isInvalid)("ng-pending",Y.isPending)("ng-submitted",Y.isSubmitted)},features:[p.qOj]}),L})();const Vt="VALID",sr="INVALID",In="PENDING",fr="DISABLED";function Dn(L){return(Jr(L)?L.validators:L)||null}function dn(L){return Array.isArray(L)?Oi(L):L||null}function Xn(L,P){return(Jr(P)?P.asyncValidators:L)||null}function vr(L){return Array.isArray(L)?Ar(L):L||null}function Jr(L){return null!=L&&!Array.isArray(L)&&"object"==typeof L}class ge{constructor(P,R){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=P,this._rawAsyncValidators=R,this._composedValidatorFn=dn(this._rawValidators),this._composedAsyncValidatorFn=vr(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(P){this._rawValidators=this._composedValidatorFn=P}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(P){this._rawAsyncValidators=this._composedAsyncValidatorFn=P}get parent(){return this._parent}get valid(){return this.status===Vt}get invalid(){return this.status===sr}get pending(){return this.status==In}get disabled(){return this.status===fr}get enabled(){return this.status!==fr}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(P){this._rawValidators=P,this._composedValidatorFn=dn(P)}setAsyncValidators(P){this._rawAsyncValidators=P,this._composedAsyncValidatorFn=vr(P)}addValidators(P){this.setValidators(mr(P,this._rawValidators))}addAsyncValidators(P){this.setAsyncValidators(mr(P,this._rawAsyncValidators))}removeValidators(P){this.setValidators(dt(P,this._rawValidators))}removeAsyncValidators(P){this.setAsyncValidators(dt(P,this._rawAsyncValidators))}hasValidator(P){return Ln(this._rawValidators,P)}hasAsyncValidator(P){return Ln(this._rawAsyncValidators,P)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(P={}){this.touched=!0,this._parent&&!P.onlySelf&&this._parent.markAsTouched(P)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(P=>P.markAllAsTouched())}markAsUntouched(P={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(R=>{R.markAsUntouched({onlySelf:!0})}),this._parent&&!P.onlySelf&&this._parent._updateTouched(P)}markAsDirty(P={}){this.pristine=!1,this._parent&&!P.onlySelf&&this._parent.markAsDirty(P)}markAsPristine(P={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(R=>{R.markAsPristine({onlySelf:!0})}),this._parent&&!P.onlySelf&&this._parent._updatePristine(P)}markAsPending(P={}){this.status=In,!1!==P.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!P.onlySelf&&this._parent.markAsPending(P)}disable(P={}){const R=this._parentMarkedDirty(P.onlySelf);this.status=fr,this.errors=null,this._forEachChild(Y=>{Y.disable({...P,onlySelf:!0})}),this._updateValue(),!1!==P.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...P,skipPristineCheck:R}),this._onDisabledChange.forEach(Y=>Y(!0))}enable(P={}){const R=this._parentMarkedDirty(P.onlySelf);this.status=Vt,this._forEachChild(Y=>{Y.enable({...P,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:P.emitEvent}),this._updateAncestors({...P,skipPristineCheck:R}),this._onDisabledChange.forEach(Y=>Y(!1))}_updateAncestors(P){this._parent&&!P.onlySelf&&(this._parent.updateValueAndValidity(P),P.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(P){this._parent=P}getRawValue(){return this.value}updateValueAndValidity(P={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Vt||this.status===In)&&this._runAsyncValidator(P.emitEvent)),!1!==P.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!P.onlySelf&&this._parent.updateValueAndValidity(P)}_updateTreeValidity(P={emitEvent:!0}){this._forEachChild(R=>R._updateTreeValidity(P)),this.updateValueAndValidity({onlySelf:!0,emitEvent:P.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?fr:Vt}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(P){if(this.asyncValidator){this.status=In,this._hasOwnPendingAsyncValidator=!0;const R=qt(this.asyncValidator(this));this._asyncValidationSubscription=R.subscribe(Y=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(Y,{emitEvent:P})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(P,R={}){this.errors=P,this._updateControlsErrors(!1!==R.emitEvent)}get(P){let R=P;return null==R||(Array.isArray(R)||(R=R.split(".")),0===R.length)?null:R.reduce((Y,Ke)=>Y&&Y._find(Ke),this)}getError(P,R){const Y=R?this.get(R):this;return Y&&Y.errors?Y.errors[P]:null}hasError(P,R){return!!this.getError(P,R)}get root(){let P=this;for(;P._parent;)P=P._parent;return P}_updateControlsErrors(P){this.status=this._calculateStatus(),P&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(P)}_initObservables(){this.valueChanges=new p.vpe,this.statusChanges=new p.vpe}_calculateStatus(){return this._allControlsDisabled()?fr:this.errors?sr:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(In)?In:this._anyControlsHaveStatus(sr)?sr:Vt}_anyControlsHaveStatus(P){return this._anyControls(R=>R.status===P)}_anyControlsDirty(){return this._anyControls(P=>P.dirty)}_anyControlsTouched(){return this._anyControls(P=>P.touched)}_updatePristine(P={}){this.pristine=!this._anyControlsDirty(),this._parent&&!P.onlySelf&&this._parent._updatePristine(P)}_updateTouched(P={}){this.touched=this._anyControlsTouched(),this._parent&&!P.onlySelf&&this._parent._updateTouched(P)}_registerOnCollectionChange(P){this._onCollectionChange=P}_setUpdateStrategy(P){Jr(P)&&null!=P.updateOn&&(this._updateOn=P.updateOn)}_parentMarkedDirty(P){return!P&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(P){return null}}class ae extends ge{constructor(P,R,Y){super(Dn(R),Xn(Y,R)),this.controls=P,this._initObservables(),this._setUpdateStrategy(R),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(P,R){return this.controls[P]?this.controls[P]:(this.controls[P]=R,R.setParent(this),R._registerOnCollectionChange(this._onCollectionChange),R)}addControl(P,R,Y={}){this.registerControl(P,R),this.updateValueAndValidity({emitEvent:Y.emitEvent}),this._onCollectionChange()}removeControl(P,R={}){this.controls[P]&&this.controls[P]._registerOnCollectionChange(()=>{}),delete this.controls[P],this.updateValueAndValidity({emitEvent:R.emitEvent}),this._onCollectionChange()}setControl(P,R,Y={}){this.controls[P]&&this.controls[P]._registerOnCollectionChange(()=>{}),delete this.controls[P],R&&this.registerControl(P,R),this.updateValueAndValidity({emitEvent:Y.emitEvent}),this._onCollectionChange()}contains(P){return this.controls.hasOwnProperty(P)&&this.controls[P].enabled}setValue(P,R={}){(function Er(L,P,R){L._forEachChild((Y,Ke)=>{if(void 0===R[Ke])throw new p.vHH(1002,"")})})(this,0,P),Object.keys(P).forEach(Y=>{(function Ur(L,P,R){const Y=L.controls;if(!(P?Object.keys(Y):Y).length)throw new p.vHH(1e3,"");if(!Y[R])throw new p.vHH(1001,"")})(this,!0,Y),this.controls[Y].setValue(P[Y],{onlySelf:!0,emitEvent:R.emitEvent})}),this.updateValueAndValidity(R)}patchValue(P,R={}){null!=P&&(Object.keys(P).forEach(Y=>{const Ke=this.controls[Y];Ke&&Ke.patchValue(P[Y],{onlySelf:!0,emitEvent:R.emitEvent})}),this.updateValueAndValidity(R))}reset(P={},R={}){this._forEachChild((Y,Ke)=>{Y.reset(P[Ke],{onlySelf:!0,emitEvent:R.emitEvent})}),this._updatePristine(R),this._updateTouched(R),this.updateValueAndValidity(R)}getRawValue(){return this._reduceChildren({},(P,R,Y)=>(P[Y]=R.getRawValue(),P))}_syncPendingControls(){let P=this._reduceChildren(!1,(R,Y)=>!!Y._syncPendingControls()||R);return P&&this.updateValueAndValidity({onlySelf:!0}),P}_forEachChild(P){Object.keys(this.controls).forEach(R=>{const Y=this.controls[R];Y&&P(Y,R)})}_setUpControls(){this._forEachChild(P=>{P.setParent(this),P._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(P){for(const[R,Y]of Object.entries(this.controls))if(this.contains(R)&&P(Y))return!0;return!1}_reduceValue(){return this._reduceChildren({},(R,Y,Ke)=>((Y.enabled||this.disabled)&&(R[Ke]=Y.value),R))}_reduceChildren(P,R){let Y=P;return this._forEachChild((Ke,Xt)=>{Y=R(Y,Ke,Xt)}),Y}_allControlsDisabled(){for(const P of Object.keys(this.controls))if(this.controls[P].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(P){return this.controls.hasOwnProperty(P)?this.controls[P]:null}}function En(L,P){Cn(L,P),P.valueAccessor.writeValue(L.value),L.disabled&&P.valueAccessor.setDisabledState?.(!0),function rs(L,P){P.valueAccessor.registerOnChange(R=>{L._pendingValue=R,L._pendingChange=!0,L._pendingDirty=!0,"change"===L.updateOn&&kr(L,P)})}(L,P),function is(L,P){const R=(Y,Ke)=>{P.valueAccessor.writeValue(Y),Ke&&P.viewToModelUpdate(Y)};L.registerOnChange(R),P._registerOnDestroy(()=>{L._unregisterOnChange(R)})}(L,P),function si(L,P){P.valueAccessor.registerOnTouched(()=>{L._pendingTouched=!0,"blur"===L.updateOn&&L._pendingChange&&kr(L,P),"submit"!==L.updateOn&&L.markAsTouched()})}(L,P),function fn(L,P){if(P.valueAccessor.setDisabledState){const R=Y=>{P.valueAccessor.setDisabledState(Y)};L.registerOnDisabledChange(R),P._registerOnDestroy(()=>{L._unregisterOnDisabledChange(R)})}}(L,P)}function ii(L,P){L.forEach(R=>{R.registerOnValidatorChange&&R.registerOnValidatorChange(P)})}function Cn(L,P){const R=function zr(L){return L._rawValidators}(L);null!==P.validator?L.setValidators(Tr(R,P.validator)):"function"==typeof R&&L.setValidators([R]);const Y=function Jt(L){return L._rawAsyncValidators}(L);null!==P.asyncValidator?L.setAsyncValidators(Tr(Y,P.asyncValidator)):"function"==typeof Y&&L.setAsyncValidators([Y]);const Ke=()=>L.updateValueAndValidity();ii(P._rawValidators,Ke),ii(P._rawAsyncValidators,Ke)}function kr(L,P){L._pendingDirty&&L.markAsDirty(),L.setValue(L._pendingValue,{emitModelToViewChange:!1}),P.viewToModelUpdate(L._pendingValue),L._pendingChange=!1}const Mr={provide:wn,useExisting:(0,p.Gpc)(()=>Ir)},ss=(()=>Promise.resolve(null))();let Ir=(()=>{class L extends wn{constructor(R,Y){super(),this.submitted=!1,this._directives=new Set,this.ngSubmit=new p.vpe,this.form=new ae({},Oi(R),Ar(Y))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(R){ss.then(()=>{const Y=this._findContainer(R.path);R.control=Y.registerControl(R.name,R.control),En(R.control,R),R.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(R)})}getControl(R){return this.form.get(R.path)}removeControl(R){ss.then(()=>{const Y=this._findContainer(R.path);Y&&Y.removeControl(R.name),this._directives.delete(R)})}addFormGroup(R){ss.then(()=>{const Y=this._findContainer(R.path),Ke=new ae({});(function Ni(L,P){Cn(L,P)})(Ke,R),Y.registerControl(R.name,Ke),Ke.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(R){ss.then(()=>{const Y=this._findContainer(R.path);Y&&Y.removeControl(R.name)})}getFormGroup(R){return this.form.get(R.path)}updateModel(R,Y){ss.then(()=>{this.form.get(R.path).setValue(Y)})}setValue(R){this.control.setValue(R)}onSubmit(R){return this.submitted=!0,function ps(L,P){L._syncPendingControls(),P.forEach(R=>{const Y=R.control;"submit"===Y.updateOn&&Y._pendingChange&&(R.viewToModelUpdate(Y._pendingValue),Y._pendingChange=!1)})}(this.form,this._directives),this.ngSubmit.emit(R),!1}onReset(){this.resetForm()}resetForm(R){this.form.reset(R),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(R){return R.pop(),R.length?this.form.get(R):this.form}}return L.\u0275fac=function(R){return new(R||L)(p.Y36(Je,10),p.Y36(oe,10))},L.\u0275dir=p.lG2({type:L,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(R,Y){1&R&&p.NdJ("submit",function(Xt){return Y.onSubmit(Xt)})("reset",function(){return Y.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[p._Bn([Mr]),p.qOj]}),L})();function oi(L,P){const R=L.indexOf(P);R>-1&&L.splice(R,1)}function Fs(L){return"object"==typeof L&&null!==L&&2===Object.keys(L).length&&"value"in L&&"disabled"in L}const Ms=class extends ge{constructor(P=null,R,Y){super(Dn(R),Xn(Y,R)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(P),this._setUpdateStrategy(R),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Jr(R)&&(R.nonNullable||R.initialValueIsDefault)&&(this.defaultValue=Fs(P)?P.value:P)}setValue(P,R={}){this.value=this._pendingValue=P,this._onChange.length&&!1!==R.emitModelToViewChange&&this._onChange.forEach(Y=>Y(this.value,!1!==R.emitViewToModelChange)),this.updateValueAndValidity(R)}patchValue(P,R={}){this.setValue(P,R)}reset(P=this.defaultValue,R={}){this._applyFormState(P),this.markAsPristine(R),this.markAsUntouched(R),this.setValue(this.value,R),this._pendingChange=!1}_updateValue(){}_anyControls(P){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(P){this._onChange.push(P)}_unregisterOnChange(P){oi(this._onChange,P)}registerOnDisabledChange(P){this._onDisabledChange.push(P)}_unregisterOnDisabledChange(P){oi(this._onDisabledChange,P)}_forEachChild(P){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(P){Fs(P)?(this.value=this._pendingValue=P.value,P.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=P}},Te={provide:rr,useExisting:(0,p.Gpc)(()=>ot)},Pe=(()=>Promise.resolve(null))();let ot=(()=>{class L extends rr{constructor(R,Y,Ke,Xt,cr){super(),this._changeDetectorRef=cr,this.control=new Ms,this._registered=!1,this.update=new p.vpe,this._parent=R,this._setValidators(Y),this._setAsyncValidators(Ke),this.valueAccessor=function ci(L,P){if(!P)return null;let R,Y,Ke;return Array.isArray(P),P.forEach(Xt=>{Xt.constructor===he?R=Xt:function $n(L){return Object.getPrototypeOf(L.constructor)===rt}(Xt)?Y=Xt:Ke=Xt}),Ke||Y||R||null}(0,Xt)}ngOnChanges(R){if(this._checkForErrors(),!this._registered||"name"in R){if(this._registered&&(this._checkName(),this.formDirective)){const Y=R.name.previousValue;this.formDirective.removeControl({name:Y,path:this._getPath(Y)})}this._setUpControl()}"isDisabled"in R&&this._updateDisabled(R),function fs(L,P){if(!L.hasOwnProperty("model"))return!1;const R=L.model;return!!R.isFirstChange()||!Object.is(P,R.currentValue)}(R,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(R){this.viewModel=R,this.update.emit(R)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){En(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(R){Pe.then(()=>{this.control.setValue(R,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(R){const Y=R.isDisabled.currentValue,Ke=0!==Y&&(0,p.D6c)(Y);Pe.then(()=>{Ke&&!this.control.disabled?this.control.disable():!Ke&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(R){return this._parent?function hn(L,P){return[...P.path,L]}(R,this._parent):[R]}}return L.\u0275fac=function(R){return new(R||L)(p.Y36(wn,9),p.Y36(Je,10),p.Y36(oe,10),p.Y36(Ge,10),p.Y36(p.sBO,8))},L.\u0275dir=p.lG2({type:L,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[p._Bn([Te]),p.qOj,p.TTD]}),L})(),wt=(()=>{class L{}return L.\u0275fac=function(R){return new(R||L)},L.\u0275dir=p.lG2({type:L,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),L})(),hi=(()=>{class L{}return L.\u0275fac=function(R){return new(R||L)},L.\u0275mod=p.oAB({type:L}),L.\u0275inj=p.cJS({}),L})(),Tn=(()=>{class L{}return L.\u0275fac=function(R){return new(R||L)},L.\u0275mod=p.oAB({type:L}),L.\u0275inj=p.cJS({imports:[hi]}),L})(),Ys=(()=>{class L{}return L.\u0275fac=function(R){return new(R||L)},L.\u0275mod=p.oAB({type:L}),L.\u0275inj=p.cJS({imports:[Tn]}),L})()},1481:(jt,$e,j)=>{j.d($e,{Dx:()=>An,b2:()=>wn,q6:()=>Ln});var p=j(6895),T=j(4650);class G extends p.w_{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class De extends G{static makeCurrent(){(0,p.HT)(new De)}onAndCancel(ae,re,Le){return ae.addEventListener(re,Le,!1),()=>{ae.removeEventListener(re,Le,!1)}}dispatchEvent(ae,re){ae.dispatchEvent(re)}remove(ae){ae.parentNode&&ae.parentNode.removeChild(ae)}createElement(ae,re){return(re=re||this.getDefaultDocument()).createElement(ae)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(ae){return ae.nodeType===Node.ELEMENT_NODE}isShadowRoot(ae){return ae instanceof DocumentFragment}getGlobalEventTarget(ae,re){return"window"===re?window:"document"===re?ae:"body"===re?ae.body:null}getBaseHref(ae){const re=function xe(){return we=we||document.querySelector("base"),we?we.getAttribute("href"):null}();return null==re?null:function Re(ge){Me=Me||document.createElement("a"),Me.setAttribute("href",ge);const ae=Me.pathname;return"/"===ae.charAt(0)?ae:`/${ae}`}(re)}resetBaseElement(){we=null}getUserAgent(){return window.navigator.userAgent}getCookie(ae){return(0,p.Mx)(document.cookie,ae)}}let Me,we=null;const Fe=new T.OlP("TRANSITION_ID"),ue=[{provide:T.ip1,useFactory:function fe(ge,ae,re){return()=>{re.get(T.CZH).donePromise.then(()=>{const Le=(0,p.q)(),it=ae.querySelectorAll(`style[ng-transition="${ge}"]`);for(let Ut=0;Ut<it.length;Ut++)Le.remove(it[Ut])})}},deps:[Fe,p.K0,T.zs3],multi:!0}];let mt=(()=>{class ge{build(){return new XMLHttpRequest}}return ge.\u0275fac=function(re){return new(re||ge)},ge.\u0275prov=T.Yz7({token:ge,factory:ge.\u0275fac}),ge})();const rt=new T.OlP("EventManagerPlugins");let Ge=(()=>{class ge{constructor(re,Le){this._zone=Le,this._eventNameToPlugin=new Map,re.forEach(it=>it.manager=this),this._plugins=re.slice().reverse()}addEventListener(re,Le,it){return this._findPluginFor(Le).addEventListener(re,Le,it)}addGlobalEventListener(re,Le,it){return this._findPluginFor(Le).addGlobalEventListener(re,Le,it)}getZone(){return this._zone}_findPluginFor(re){const Le=this._eventNameToPlugin.get(re);if(Le)return Le;const it=this._plugins;for(let Ut=0;Ut<it.length;Ut++){const hn=it[Ut];if(hn.supports(re))return this._eventNameToPlugin.set(re,hn),hn}throw new Error(`No event manager plugin found for event ${re}`)}}return ge.\u0275fac=function(re){return new(re||ge)(T.LFG(rt),T.LFG(T.R0b))},ge.\u0275prov=T.Yz7({token:ge,factory:ge.\u0275fac}),ge})();class kt{constructor(ae){this._doc=ae}addGlobalEventListener(ae,re,Le){const it=(0,p.q)().getGlobalEventTarget(this._doc,ae);if(!it)throw new Error(`Unsupported event target ${it} for event ${re}`);return this.addEventListener(it,re,Le)}}let Ze=(()=>{class ge{constructor(){this._stylesSet=new Set}addStyles(re){const Le=new Set;re.forEach(it=>{this._stylesSet.has(it)||(this._stylesSet.add(it),Le.add(it))}),this.onStylesAdded(Le)}onStylesAdded(re){}getAllStyles(){return Array.from(this._stylesSet)}}return ge.\u0275fac=function(re){return new(re||ge)},ge.\u0275prov=T.Yz7({token:ge,factory:ge.\u0275fac}),ge})(),ze=(()=>{class ge extends Ze{constructor(re){super(),this._doc=re,this._hostNodes=new Map,this._hostNodes.set(re.head,[])}_addStylesToHost(re,Le,it){re.forEach(Ut=>{const hn=this._doc.createElement("style");hn.textContent=Ut,it.push(Le.appendChild(hn))})}addHost(re){const Le=[];this._addStylesToHost(this._stylesSet,re,Le),this._hostNodes.set(re,Le)}removeHost(re){const Le=this._hostNodes.get(re);Le&&Le.forEach(Pt),this._hostNodes.delete(re)}onStylesAdded(re){this._hostNodes.forEach((Le,it)=>{this._addStylesToHost(re,it,Le)})}ngOnDestroy(){this._hostNodes.forEach(re=>re.forEach(Pt))}}return ge.\u0275fac=function(re){return new(re||ge)(T.LFG(p.K0))},ge.\u0275prov=T.Yz7({token:ge,factory:ge.\u0275fac}),ge})();function Pt(ge){(0,p.q)().remove(ge)}const xt={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},he=/%COMP%/g;function ne(ge,ae,re){for(let Le=0;Le<ae.length;Le++){let it=ae[Le];Array.isArray(it)?ne(ge,it,re):(it=it.replace(he,ge),re.push(it))}return re}function ye(ge){return ae=>{if("__ngUnwrap__"===ae)return ge;!1===ge(ae)&&(ae.preventDefault(),ae.returnValue=!1)}}let Oe=(()=>{class ge{constructor(re,Le,it){this.eventManager=re,this.sharedStylesHost=Le,this.appId=it,this.rendererByCompId=new Map,this.defaultRenderer=new lt(re)}createRenderer(re,Le){if(!re||!Le)return this.defaultRenderer;switch(Le.encapsulation){case T.ifc.Emulated:{let it=this.rendererByCompId.get(Le.id);return it||(it=new Bt(this.eventManager,this.sharedStylesHost,Le,this.appId),this.rendererByCompId.set(Le.id,it)),it.applyToHost(re),it}case 1:case T.ifc.ShadowDom:return new ct(this.eventManager,this.sharedStylesHost,re,Le);default:if(!this.rendererByCompId.has(Le.id)){const it=ne(Le.id,Le.styles,[]);this.sharedStylesHost.addStyles(it),this.rendererByCompId.set(Le.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return ge.\u0275fac=function(re){return new(re||ge)(T.LFG(Ge),T.LFG(ze),T.LFG(T.AFp))},ge.\u0275prov=T.Yz7({token:ge,factory:ge.\u0275fac}),ge})();class lt{constructor(ae){this.eventManager=ae,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(ae,re){return re?document.createElementNS(xt[re]||re,ae):document.createElement(ae)}createComment(ae){return document.createComment(ae)}createText(ae){return document.createTextNode(ae)}appendChild(ae,re){(Ot(ae)?ae.content:ae).appendChild(re)}insertBefore(ae,re,Le){ae&&(Ot(ae)?ae.content:ae).insertBefore(re,Le)}removeChild(ae,re){ae&&ae.removeChild(re)}selectRootElement(ae,re){let Le="string"==typeof ae?document.querySelector(ae):ae;if(!Le)throw new Error(`The selector "${ae}" did not match any elements`);return re||(Le.textContent=""),Le}parentNode(ae){return ae.parentNode}nextSibling(ae){return ae.nextSibling}setAttribute(ae,re,Le,it){if(it){re=it+":"+re;const Ut=xt[it];Ut?ae.setAttributeNS(Ut,re,Le):ae.setAttribute(re,Le)}else ae.setAttribute(re,Le)}removeAttribute(ae,re,Le){if(Le){const it=xt[Le];it?ae.removeAttributeNS(it,re):ae.removeAttribute(`${Le}:${re}`)}else ae.removeAttribute(re)}addClass(ae,re){ae.classList.add(re)}removeClass(ae,re){ae.classList.remove(re)}setStyle(ae,re,Le,it){it&(T.JOm.DashCase|T.JOm.Important)?ae.style.setProperty(re,Le,it&T.JOm.Important?"important":""):ae.style[re]=Le}removeStyle(ae,re,Le){Le&T.JOm.DashCase?ae.style.removeProperty(re):ae.style[re]=""}setProperty(ae,re,Le){ae[re]=Le}setValue(ae,re){ae.nodeValue=re}listen(ae,re,Le){return"string"==typeof ae?this.eventManager.addGlobalEventListener(ae,re,ye(Le)):this.eventManager.addEventListener(ae,re,ye(Le))}}function Ot(ge){return"TEMPLATE"===ge.tagName&&void 0!==ge.content}class Bt extends lt{constructor(ae,re,Le,it){super(ae),this.component=Le;const Ut=ne(it+"-"+Le.id,Le.styles,[]);re.addStyles(Ut),this.contentAttr=function oe(ge){return"_ngcontent-%COMP%".replace(he,ge)}(it+"-"+Le.id),this.hostAttr=function He(ge){return"_nghost-%COMP%".replace(he,ge)}(it+"-"+Le.id)}applyToHost(ae){super.setAttribute(ae,this.hostAttr,"")}createElement(ae,re){const Le=super.createElement(ae,re);return super.setAttribute(Le,this.contentAttr,""),Le}}class ct extends lt{constructor(ae,re,Le,it){super(ae),this.sharedStylesHost=re,this.hostEl=Le,this.shadowRoot=Le.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const Ut=ne(it.id,it.styles,[]);for(let hn=0;hn<Ut.length;hn++){const En=document.createElement("style");En.textContent=Ut[hn],this.shadowRoot.appendChild(En)}}nodeOrShadowRoot(ae){return ae===this.hostEl?this.shadowRoot:ae}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(ae,re){return super.appendChild(this.nodeOrShadowRoot(ae),re)}insertBefore(ae,re,Le){return super.insertBefore(this.nodeOrShadowRoot(ae),re,Le)}removeChild(ae,re){return super.removeChild(this.nodeOrShadowRoot(ae),re)}parentNode(ae){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(ae)))}}let tn=(()=>{class ge extends kt{constructor(re){super(re)}supports(re){return!0}addEventListener(re,Le,it){return re.addEventListener(Le,it,!1),()=>this.removeEventListener(re,Le,it)}removeEventListener(re,Le,it){return re.removeEventListener(Le,it)}}return ge.\u0275fac=function(re){return new(re||ge)(T.LFG(p.K0))},ge.\u0275prov=T.Yz7({token:ge,factory:ge.\u0275fac}),ge})();const qt=["alt","control","meta","shift"],rn={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Ft={alt:ge=>ge.altKey,control:ge=>ge.ctrlKey,meta:ge=>ge.metaKey,shift:ge=>ge.shiftKey};let Sn=(()=>{class ge extends kt{constructor(re){super(re)}supports(re){return null!=ge.parseEventName(re)}addEventListener(re,Le,it){const Ut=ge.parseEventName(Le),hn=ge.eventCallback(Ut.fullKey,it,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,p.q)().onAndCancel(re,Ut.domEventName,hn))}static parseEventName(re){const Le=re.toLowerCase().split("."),it=Le.shift();if(0===Le.length||"keydown"!==it&&"keyup"!==it)return null;const Ut=ge._normalizeKey(Le.pop());let hn="",En=Le.indexOf("code");if(En>-1&&(Le.splice(En,1),hn="code."),qt.forEach(ii=>{const fn=Le.indexOf(ii);fn>-1&&(Le.splice(fn,1),hn+=ii+".")}),hn+=Ut,0!=Le.length||0===Ut.length)return null;const ur={};return ur.domEventName=it,ur.fullKey=hn,ur}static matchEventFullKeyCode(re,Le){let it=rn[re.key]||re.key,Ut="";return Le.indexOf("code.")>-1&&(it=re.code,Ut="code."),!(null==it||!it)&&(it=it.toLowerCase()," "===it?it="space":"."===it&&(it="dot"),qt.forEach(hn=>{hn!==it&&(0,Ft[hn])(re)&&(Ut+=hn+".")}),Ut+=it,Ut===Le)}static eventCallback(re,Le,it){return Ut=>{ge.matchEventFullKeyCode(Ut,re)&&it.runGuarded(()=>Le(Ut))}}static _normalizeKey(re){return"esc"===re?"escape":re}}return ge.\u0275fac=function(re){return new(re||ge)(T.LFG(p.K0))},ge.\u0275prov=T.Yz7({token:ge,factory:ge.\u0275fac}),ge})();const Ln=(0,T.eFA)(T._c5,"browser",[{provide:T.Lbi,useValue:p.bD},{provide:T.g9A,useValue:function Tr(){De.makeCurrent()},multi:!0},{provide:p.K0,useFactory:function Jt(){return(0,T.RDi)(document),document},deps:[]}]),mr=new T.OlP(""),dt=[{provide:T.rWj,useClass:class Ee{addToWindow(ae){T.dqk.getAngularTestability=(Le,it=!0)=>{const Ut=ae.findTestabilityInTree(Le,it);if(null==Ut)throw new Error("Could not find testability for element.");return Ut},T.dqk.getAllAngularTestabilities=()=>ae.getAllTestabilities(),T.dqk.getAllAngularRootElements=()=>ae.getAllRootElements(),T.dqk.frameworkStabilizers||(T.dqk.frameworkStabilizers=[]),T.dqk.frameworkStabilizers.push(Le=>{const it=T.dqk.getAllAngularTestabilities();let Ut=it.length,hn=!1;const En=function(ur){hn=hn||ur,Ut--,0==Ut&&Le(hn)};it.forEach(function(ur){ur.whenStable(En)})})}findTestabilityInTree(ae,re,Le){return null==re?null:ae.getTestability(re)??(Le?(0,p.q)().isShadowRoot(re)?this.findTestabilityInTree(ae,re.host,!0):this.findTestabilityInTree(ae,re.parentElement,!0):null)}},deps:[]},{provide:T.lri,useClass:T.dDg,deps:[T.R0b,T.eoX,T.rWj]},{provide:T.dDg,useClass:T.dDg,deps:[T.R0b,T.eoX,T.rWj]}],zn=[{provide:T.zSh,useValue:"root"},{provide:T.qLn,useFactory:function zr(){return new T.qLn},deps:[]},{provide:rt,useClass:tn,multi:!0,deps:[p.K0,T.R0b,T.Lbi]},{provide:rt,useClass:Sn,multi:!0,deps:[p.K0]},{provide:Oe,useClass:Oe,deps:[Ge,ze,T.AFp]},{provide:T.FYo,useExisting:Oe},{provide:Ze,useExisting:ze},{provide:ze,useClass:ze,deps:[p.K0]},{provide:Ge,useClass:Ge,deps:[rt,T.R0b]},{provide:p.JF,useClass:mt,deps:[]},[]];let wn=(()=>{class ge{constructor(re){}static withServerTransition(re){return{ngModule:ge,providers:[{provide:T.AFp,useValue:re.appId},{provide:Fe,useExisting:T.AFp},ue]}}}return ge.\u0275fac=function(re){return new(re||ge)(T.LFG(mr,12))},ge.\u0275mod=T.oAB({type:ge}),ge.\u0275inj=T.cJS({providers:[...zn,...dt],imports:[p.ez,T.hGG]}),ge})(),An=(()=>{class ge{constructor(re){this._doc=re}getTitle(){return this._doc.title}setTitle(re){this._doc.title=re||""}}return ge.\u0275fac=function(re){return new(re||ge)(T.LFG(p.K0))},ge.\u0275prov=T.Yz7({token:ge,factory:function(re){let Le=null;return Le=re?new re:function Pr(){return new An((0,T.LFG)(p.K0))}(),Le},providedIn:"root"}),ge})();typeof window<"u"&&window},7001:(jt,$e,j)=>{j.d($e,{F0:()=>Ri,yS:()=>Ea,Bz:()=>sa,lC:()=>Bi});var p=j(4650),T=j(8996),G=j(9646),De=j(7579);class we extends De.x{constructor(w){super(),this._value=w}get value(){return this.getValue()}_subscribe(w){const _=super._subscribe(w);return!_.closed&&w.next(this._value),_}getValue(){const{hasError:w,thrownError:_,_value:S}=this;if(w)throw _;return this._throwIfClosed(),S}next(w){super.next(this._value=w)}}var xe=j(6805),Me=j(9751),Re=j(4742),Fe=j(4671),fe=j(3268),ue=j(7669),Ee=j(1810),mt=j(5403),rt=j(9672);function Ge(...v){const w=(0,ue.yG)(v),_=(0,ue.jO)(v),{args:S,keys:k}=(0,Re.D)(v);if(0===S.length)return(0,T.D)([],w);const z=new Me.y(function kt(v,w,_=Fe.y){return S=>{Ze(w,()=>{const{length:k}=v,z=new Array(k);let te=k,pe=k;for(let Ye=0;Ye<k;Ye++)Ze(w,()=>{const At=(0,T.D)(v[Ye],w);let en=!1;At.subscribe((0,mt.x)(S,zt=>{z[Ye]=zt,en||(en=!0,pe--),pe||S.next(_(z.slice()))},()=>{--te||S.complete()}))},S)},S)}}(S,w,k?te=>(0,Ee.n)(k,te):Fe.y));return _?z.pipe((0,fe.Z)(_)):z}function Ze(v,w,_){v?(0,rt.f)(_,v,w):w()}var ze=j(7272),Pt=j(8421);function xt(v){return new Me.y(w=>{(0,Pt.Xf)(v()).subscribe(w)})}var he=j(9635),tt=j(576);function et(v,w){const _=(0,tt.m)(v)?v:()=>v,S=k=>k.error(_());return new Me.y(w?k=>w.schedule(S,0,k):S)}var yt=j(515),Je=j(727),oe=j(4482);function He(){return(0,oe.e)((v,w)=>{let _=null;v._refCount++;const S=(0,mt.x)(w,void 0,void 0,void 0,()=>{if(!v||v._refCount<=0||0<--v._refCount)return void(_=null);const k=v._connection,z=_;_=null,k&&(!z||k===z)&&k.unsubscribe(),w.unsubscribe()});v.subscribe(S),S.closed||(_=v.connect())})}class ne extends Me.y{constructor(w,_){super(),this.source=w,this.subjectFactory=_,this._subject=null,this._refCount=0,this._connection=null,(0,oe.A)(w)&&(this.lift=w.lift)}_subscribe(w){return this.getSubject().subscribe(w)}getSubject(){const w=this._subject;return(!w||w.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:w}=this;this._subject=this._connection=null,w?.unsubscribe()}connect(){let w=this._connection;if(!w){w=this._connection=new Je.w0;const _=this.getSubject();w.add(this.source.subscribe((0,mt.x)(_,void 0,()=>{this._teardown(),_.complete()},S=>{this._teardown(),_.error(S)},()=>this._teardown()))),w.closed&&(this._connection=null,w=Je.w0.EMPTY)}return w}refCount(){return He()(this)}}var ye=j(6895),ce=j(4004),Oe=j(3900),lt=j(5698),_t=j(8675),Et=j(9300),Ot=j(5577),Bt=j(590),ct=j(4351),tn=j(8505);function qt(v){return(0,oe.e)((w,_)=>{let z,S=null,k=!1;S=w.subscribe((0,mt.x)(_,void 0,void 0,te=>{z=(0,Pt.Xf)(v(te,qt(v)(w))),S?(S.unsubscribe(),S=null,z.subscribe(_)):k=!0})),k&&(S.unsubscribe(),S=null,z.subscribe(_))})}var rn=j(5026);function Ft(v){return v<=0?()=>yt.E:(0,oe.e)((w,_)=>{let S=[];w.subscribe((0,mt.x)(_,k=>{S.push(k),v<S.length&&S.shift()},()=>{for(const k of S)_.next(k);_.complete()},void 0,()=>{S=null}))})}var Sn=j(8068),an=j(6590);function Fn(v,w){const _=arguments.length>=2;return S=>S.pipe(v?(0,Et.h)((k,z)=>v(k,z,S)):Fe.y,Ft(1),_?(0,an.d)(w):(0,Sn.T)(()=>new xe.K))}function Ar(v){return(0,oe.e)((w,_)=>{try{w.subscribe(_)}finally{_.add(v)}})}var Tr=j(8189),zr=j(1481);const Jt="primary",nr=Symbol("RouteTitle");class Ln{constructor(w){this.params=w||{}}has(w){return Object.prototype.hasOwnProperty.call(this.params,w)}get(w){if(this.has(w)){const _=this.params[w];return Array.isArray(_)?_[0]:_}return null}getAll(w){if(this.has(w)){const _=this.params[w];return Array.isArray(_)?_:[_]}return[]}get keys(){return Object.keys(this.params)}}function mr(v){return new Ln(v)}function dt(v,w,_){const S=_.path.split("/");if(S.length>v.length||"full"===_.pathMatch&&(w.hasChildren()||S.length<v.length))return null;const k={};for(let z=0;z<S.length;z++){const te=S[z],pe=v[z];if(te.startsWith(":"))k[te.substring(1)]=pe;else if(te!==pe.path)return null}return{consumed:v.slice(0,S.length),posParams:k}}function wn(v,w){const _=v?Object.keys(v):void 0,S=w?Object.keys(w):void 0;if(!_||!S||_.length!=S.length)return!1;let k;for(let z=0;z<_.length;z++)if(k=_[z],!rr(v[k],w[k]))return!1;return!0}function rr(v,w){if(Array.isArray(v)&&Array.isArray(w)){if(v.length!==w.length)return!1;const _=[...v].sort(),S=[...w].sort();return _.every((k,z)=>S[z]===k)}return v===w}function vi(v){return Array.prototype.concat.apply([],v)}function Si(v){return v.length>0?v[v.length-1]:null}function An(v,w){for(const _ in v)v.hasOwnProperty(_)&&w(v[_],_)}function Vn(v){return(0,p.CqO)(v)?v:(0,p.QGY)(v)?(0,T.D)(Promise.resolve(v)):(0,G.of)(v)}const ir={exact:function un(v,w,_){if(!_e(v.segments,w.segments)||!Pn(v.segments,w.segments,_)||v.numberOfChildren!==w.numberOfChildren)return!1;for(const S in w.children)if(!v.children[S]||!un(v.children[S],w.children[S],_))return!1;return!0},subset:Nn},Jn={exact:function ri(v,w){return wn(v,w)},subset:function wi(v,w){return Object.keys(w).length<=Object.keys(v).length&&Object.keys(w).every(_=>rr(v[_],w[_]))},ignored:()=>!0};function ar(v,w,_){return ir[_.paths](v.root,w.root,_.matrixParams)&&Jn[_.queryParams](v.queryParams,w.queryParams)&&!("exact"===_.fragment&&v.fragment!==w.fragment)}function Nn(v,w,_){return Ei(v,w,w.segments,_)}function Ei(v,w,_,S){if(v.segments.length>_.length){const k=v.segments.slice(0,_.length);return!(!_e(k,_)||w.hasChildren()||!Pn(k,_,S))}if(v.segments.length===_.length){if(!_e(v.segments,_)||!Pn(v.segments,_,S))return!1;for(const k in w.children)if(!v.children[k]||!Nn(v.children[k],w.children[k],S))return!1;return!0}{const k=_.slice(0,v.segments.length),z=_.slice(v.segments.length);return!!(_e(v.segments,k)&&Pn(v.segments,k,S)&&v.children[Jt])&&Ei(v.children[Jt],w,z,S)}}function Pn(v,w,_){return w.every((S,k)=>Jn[_](v[k].parameters,S.parameters))}class Ie{constructor(w,_,S){this.root=w,this.queryParams=_,this.fragment=S}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=mr(this.queryParams)),this._queryParamMap}toString(){return sr.serialize(this)}}class ie{constructor(w,_){this.segments=w,this.children=_,this.parent=null,An(_,(S,k)=>S.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return In(this)}}class le{constructor(w,_){this.path=w,this.parameters=_}get parameterMap(){return this._parameterMap||(this._parameterMap=mr(this.parameters)),this._parameterMap}toString(){return Er(this)}}function _e(v,w){return v.length===w.length&&v.every((_,S)=>_.path===w[S].path)}let gt=(()=>{class v{}return v.\u0275fac=function(_){return new(_||v)},v.\u0275prov=p.Yz7({token:v,factory:function(){return new Vt},providedIn:"root"}),v})();class Vt{parse(w){const _=new ur(w);return new Ie(_.parseRootSegment(),_.parseQueryParams(),_.parseFragment())}serialize(w){const _=`/${fr(w.root,!0)}`,S=function ae(v){const w=Object.keys(v).map(_=>{const S=v[_];return Array.isArray(S)?S.map(k=>`${dn(_)}=${dn(k)}`).join("&"):`${dn(_)}=${dn(S)}`}).filter(_=>!!_);return w.length?`?${w.join("&")}`:""}(w.queryParams);return`${_}${S}${"string"==typeof w.fragment?`#${function Xn(v){return encodeURI(v)}(w.fragment)}`:""}`}}const sr=new Vt;function In(v){return v.segments.map(w=>Er(w)).join("/")}function fr(v,w){if(!v.hasChildren())return In(v);if(w){const _=v.children[Jt]?fr(v.children[Jt],!1):"",S=[];return An(v.children,(k,z)=>{z!==Jt&&S.push(`${z}:${fr(k,!1)}`)}),S.length>0?`${_}(${S.join("//")})`:_}{const _=function at(v,w){let _=[];return An(v.children,(S,k)=>{k===Jt&&(_=_.concat(w(S,k)))}),An(v.children,(S,k)=>{k!==Jt&&(_=_.concat(w(S,k)))}),_}(v,(S,k)=>k===Jt?[fr(v.children[Jt],!1)]:[`${k}:${fr(S,!1)}`]);return 1===Object.keys(v.children).length&&null!=v.children[Jt]?`${In(v)}/${_[0]}`:`${In(v)}/(${_.join("//")})`}}function Dn(v){return encodeURIComponent(v).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function dn(v){return Dn(v).replace(/%3B/gi,";")}function vr(v){return Dn(v).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Jr(v){return decodeURIComponent(v)}function Ur(v){return Jr(v.replace(/\+/g,"%20"))}function Er(v){return`${vr(v.path)}${function ge(v){return Object.keys(v).map(w=>`;${vr(w)}=${vr(v[w])}`).join("")}(v.parameters)}`}const re=/^[^\/()?;=#]+/;function Le(v){const w=v.match(re);return w?w[0]:""}const it=/^[^=?&#]+/,hn=/^[^&#]+/;class ur{constructor(w){this.url=w,this.remaining=w}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new ie([],{}):new ie([],this.parseChildren())}parseQueryParams(){const w={};if(this.consumeOptional("?"))do{this.parseQueryParam(w)}while(this.consumeOptional("&"));return w}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const w=[];for(this.peekStartsWith("(")||w.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),w.push(this.parseSegment());let _={};this.peekStartsWith("/(")&&(this.capture("/"),_=this.parseParens(!0));let S={};return this.peekStartsWith("(")&&(S=this.parseParens(!1)),(w.length>0||Object.keys(_).length>0)&&(S[Jt]=new ie(w,_)),S}parseSegment(){const w=Le(this.remaining);if(""===w&&this.peekStartsWith(";"))throw new p.vHH(4009,!1);return this.capture(w),new le(Jr(w),this.parseMatrixParams())}parseMatrixParams(){const w={};for(;this.consumeOptional(";");)this.parseParam(w);return w}parseParam(w){const _=Le(this.remaining);if(!_)return;this.capture(_);let S="";if(this.consumeOptional("=")){const k=Le(this.remaining);k&&(S=k,this.capture(S))}w[Jr(_)]=Jr(S)}parseQueryParam(w){const _=function Ut(v){const w=v.match(it);return w?w[0]:""}(this.remaining);if(!_)return;this.capture(_);let S="";if(this.consumeOptional("=")){const te=function En(v){const w=v.match(hn);return w?w[0]:""}(this.remaining);te&&(S=te,this.capture(S))}const k=Ur(_),z=Ur(S);if(w.hasOwnProperty(k)){let te=w[k];Array.isArray(te)||(te=[te],w[k]=te),te.push(z)}else w[k]=z}parseParens(w){const _={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const S=Le(this.remaining),k=this.remaining[S.length];if("/"!==k&&")"!==k&&";"!==k)throw new p.vHH(4010,!1);let z;S.indexOf(":")>-1?(z=S.slice(0,S.indexOf(":")),this.capture(z),this.capture(":")):w&&(z=Jt);const te=this.parseChildren();_[z]=1===Object.keys(te).length?te[Jt]:new ie([],te),this.consumeOptional("//")}return _}peekStartsWith(w){return this.remaining.startsWith(w)}consumeOptional(w){return!!this.peekStartsWith(w)&&(this.remaining=this.remaining.substring(w.length),!0)}capture(w){if(!this.consumeOptional(w))throw new p.vHH(4011,!1)}}function ii(v){return v.segments.length>0?new ie([],{[Jt]:v}):v}function fn(v){const w={};for(const S of Object.keys(v.children)){const z=fn(v.children[S]);(z.segments.length>0||z.hasChildren())&&(w[S]=z)}return function Cn(v){if(1===v.numberOfChildren&&v.children[Jt]){const w=v.children[Jt];return new ie(v.segments.concat(w.segments),w.children)}return v}(new ie(v.segments,w))}function Wn(v){return v instanceof Ie}function Ni(v,w,_,S,k){if(0===_.length)return Ai(w.root,w.root,w.root,S,k);const z=function fs(v){if("string"==typeof v[0]&&1===v.length&&"/"===v[0])return new Ao(!0,0,v);let w=0,_=!1;const S=v.reduce((k,z,te)=>{if("object"==typeof z&&null!=z){if(z.outlets){const pe={};return An(z.outlets,(Ye,At)=>{pe[At]="string"==typeof Ye?Ye.split("/"):Ye}),[...k,{outlets:pe}]}if(z.segmentPath)return[...k,z.segmentPath]}return"string"!=typeof z?[...k,z]:0===te?(z.split("/").forEach((pe,Ye)=>{0==Ye&&"."===pe||(0==Ye&&""===pe?_=!0:".."===pe?w++:""!=pe&&k.push(pe))}),k):[...k,z]},[]);return new Ao(_,w,S)}(_);return z.toRoot()?Ai(w.root,w.root,new ie([],{}),S,k):function te(Ye){const At=function ci(v,w,_,S){if(v.isAbsolute)return new $n(w.root,!0,0);if(-1===S)return new $n(_,_===w.root,0);return function Vi(v,w,_){let S=v,k=w,z=_;for(;z>k;){if(z-=k,S=S.parent,!S)throw new p.vHH(4005,!1);k=S.segments.length}return new $n(S,!1,k-z)}(_,S+(pr(v.commands[0])?0:1),v.numberOfDoubleDots)}(z,w,v.snapshot?._urlSegment,Ye),en=At.processChildren?ss(At.segmentGroup,At.index,z.commands):Mr(At.segmentGroup,At.index,z.commands);return Ai(w.root,At.segmentGroup,en,S,k)}(v.snapshot?._lastPathIndex)}function pr(v){return"object"==typeof v&&null!=v&&!v.outlets&&!v.segmentPath}function xr(v){return"object"==typeof v&&null!=v&&v.outlets}function Ai(v,w,_,S,k){let te,z={};S&&An(S,(Ye,At)=>{z[At]=Array.isArray(Ye)?Ye.map(en=>`${en}`):`${Ye}`}),te=v===w?_:Kn(v,w,_);const pe=ii(fn(te));return new Ie(pe,z,k)}function Kn(v,w,_){const S={};return An(v.children,(k,z)=>{S[z]=k===w?_:Kn(k,w,_)}),new ie(v.segments,S)}class Ao{constructor(w,_,S){if(this.isAbsolute=w,this.numberOfDoubleDots=_,this.commands=S,w&&S.length>0&&pr(S[0]))throw new p.vHH(4003,!1);const k=S.find(xr);if(k&&k!==Si(S))throw new p.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class $n{constructor(w,_,S){this.segmentGroup=w,this.processChildren=_,this.index=S}}function Mr(v,w,_){if(v||(v=new ie([],{})),0===v.segments.length&&v.hasChildren())return ss(v,w,_);const S=function Ir(v,w,_){let S=0,k=w;const z={match:!1,pathIndex:0,commandIndex:0};for(;k<v.segments.length;){if(S>=_.length)return z;const te=v.segments[k],pe=_[S];if(xr(pe))break;const Ye=`${pe}`,At=S<_.length-1?_[S+1]:null;if(k>0&&void 0===Ye)break;if(Ye&&At&&"object"==typeof At&&void 0===At.outlets){if(!ro(Ye,At,te))return z;S+=2}else{if(!ro(Ye,{},te))return z;S++}k++}return{match:!0,pathIndex:k,commandIndex:S}}(v,w,_),k=_.slice(S.commandIndex);if(S.match&&S.pathIndex<v.segments.length){const z=new ie(v.segments.slice(0,S.pathIndex),{});return z.children[Jt]=new ie(v.segments.slice(S.pathIndex),v.children),ss(z,0,k)}return S.match&&0===k.length?new ie(v.segments,{}):S.match&&!v.hasChildren()?oi(v,w,_):S.match?ss(v,0,k):oi(v,w,_)}function ss(v,w,_){if(0===_.length)return new ie(v.segments,{});{const S=function qi(v){return xr(v[0])?v[0].outlets:{[Jt]:v}}(_),k={};return An(S,(z,te)=>{"string"==typeof z&&(z=[z]),null!==z&&(k[te]=Mr(v.children[te],w,z))}),An(v.children,(z,te)=>{void 0===S[te]&&(k[te]=z)}),new ie(v.segments,k)}}function oi(v,w,_){const S=v.segments.slice(0,w);let k=0;for(;k<_.length;){const z=_[k];if(xr(z)){const Ye=Fs(z.outlets);return new ie(S,Ye)}if(0===k&&pr(_[0])){S.push(new le(v.segments[w].path,Ms(_[0]))),k++;continue}const te=xr(z)?z.outlets[Jt]:`${z}`,pe=k<_.length-1?_[k+1]:null;te&&pe&&pr(pe)?(S.push(new le(te,Ms(pe))),k+=2):(S.push(new le(te,{})),k++)}return new ie(S,{})}function Fs(v){const w={};return An(v,(_,S)=>{"string"==typeof _&&(_=[_]),null!==_&&(w[S]=oi(new ie([],{}),0,_))}),w}function Ms(v){const w={};return An(v,(_,S)=>w[S]=`${_}`),w}function ro(v,w,_){return v==_.path&&wn(w,_.parameters)}class Rr{constructor(w,_){this.id=w,this.url=_}}class io extends Rr{constructor(w,_,S="imperative",k=null){super(w,_),this.type=0,this.navigationTrigger=S,this.restoredState=k}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Zi extends Rr{constructor(w,_,S){super(w,_),this.urlAfterRedirects=S,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class jo extends Rr{constructor(w,_,S,k){super(w,_),this.reason=S,this.code=k,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Ls extends Rr{constructor(w,_,S,k){super(w,_),this.error=S,this.target=k,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Rs extends Rr{constructor(w,_,S,k){super(w,_),this.urlAfterRedirects=S,this.state=k,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Wr extends Rr{constructor(w,_,S,k){super(w,_),this.urlAfterRedirects=S,this.state=k,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ae extends Rr{constructor(w,_,S,k,z){super(w,_),this.urlAfterRedirects=S,this.state=k,this.shouldActivate=z,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Te extends Rr{constructor(w,_,S,k){super(w,_),this.urlAfterRedirects=S,this.state=k,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Pe extends Rr{constructor(w,_,S,k){super(w,_),this.urlAfterRedirects=S,this.state=k,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ot{constructor(w){this.route=w,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class wt{constructor(w){this.route=w,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Kt{constructor(w){this.snapshot=w,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class _n{constructor(w){this.snapshot=w,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class di{constructor(w){this.snapshot=w,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class or{constructor(w){this.snapshot=w,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class hi{constructor(w,_,S){this.routerEvent=w,this.position=_,this.anchor=S,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class Vs{constructor(w){this._root=w}get root(){return this._root.value}parent(w){const _=this.pathFromRoot(w);return _.length>1?_[_.length-2]:null}children(w){const _=ai(w,this._root);return _?_.children.map(S=>S.value):[]}firstChild(w){const _=ai(w,this._root);return _&&_.children.length>0?_.children[0].value:null}siblings(w){const _=Br(w,this._root);return _.length<2?[]:_[_.length-2].children.map(k=>k.value).filter(k=>k!==w)}pathFromRoot(w){return Br(w,this._root).map(_=>_.value)}}function ai(v,w){if(v===w.value)return w;for(const _ of w.children){const S=ai(v,_);if(S)return S}return null}function Br(v,w){if(v===w.value)return[w];for(const _ of w.children){const S=Br(v,_);if(S.length)return S.unshift(w),S}return[]}class Ui{constructor(w,_){this.value=w,this.children=_}toString(){return`TreeNode(${this.value})`}}function fi(v){const w={};return v&&v.children.forEach(_=>w[_.value.outlet]=_),w}class vo extends Vs{constructor(w,_){super(w),this.snapshot=_,$o(this,w)}toString(){return this.snapshot.toString()}}function pi(v,w){const _=function os(v,w){const te=new gs([],{},{},"",{},Jt,w,null,v.root,-1,{});return new wo("",new Ui(te,[]))}(v,w),S=new we([new le("",{})]),k=new we({}),z=new we({}),te=new we({}),pe=new we(""),Ye=new Pi(S,k,te,pe,z,Jt,w,_.root);return Ye.snapshot=_.root,new vo(new Ui(Ye,[]),_)}class Pi{constructor(w,_,S,k,z,te,pe,Ye){this.url=w,this.params=_,this.queryParams=S,this.fragment=k,this.data=z,this.outlet=te,this.component=pe,this.title=this.data?.pipe((0,ce.U)(At=>At[nr]))??(0,G.of)(void 0),this._futureSnapshot=Ye}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,ce.U)(w=>mr(w)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,ce.U)(w=>mr(w)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function as(v,w="emptyOnly"){const _=v.pathFromRoot;let S=0;if("always"!==w)for(S=_.length-1;S>=1;){const k=_[S],z=_[S-1];if(k.routeConfig&&""===k.routeConfig.path)S--;else{if(z.component)break;S--}}return function Ws(v){return v.reduce((w,_)=>({params:{...w.params,..._.params},data:{...w.data,..._.data},resolve:{..._.data,...w.resolve,..._.routeConfig?.data,..._._resolvedData}}),{params:{},data:{},resolve:{}})}(_.slice(S))}class gs{constructor(w,_,S,k,z,te,pe,Ye,At,en,zt,yn){this.url=w,this.params=_,this.queryParams=S,this.fragment=k,this.data=z,this.outlet=te,this.component=pe,this.title=this.data?.[nr],this.routeConfig=Ye,this._urlSegment=At,this._lastPathIndex=en,this._correctedLastPathIndex=yn??en,this._resolve=zt}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=mr(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=mr(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(S=>S.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class wo extends Vs{constructor(w,_){super(_),this.url=w,$o(this,_)}toString(){return qs(this._root)}}function $o(v,w){w.value._routerState=v,w.children.forEach(_=>$o(v,_))}function qs(v){const w=v.children.length>0?` { ${v.children.map(qs).join(", ")} } `:"";return`${v.value}${w}`}function ms(v){if(v.snapshot){const w=v.snapshot,_=v._futureSnapshot;v.snapshot=_,wn(w.queryParams,_.queryParams)||v.queryParams.next(_.queryParams),w.fragment!==_.fragment&&v.fragment.next(_.fragment),wn(w.params,_.params)||v.params.next(_.params),function zn(v,w){if(v.length!==w.length)return!1;for(let _=0;_<v.length;++_)if(!wn(v[_],w[_]))return!1;return!0}(w.url,_.url)||v.url.next(_.url),wn(w.data,_.data)||v.data.next(_.data)}else v.snapshot=v._futureSnapshot,v.data.next(v._futureSnapshot.data)}function lr(v,w){const _=wn(v.params,w.params)&&function ve(v,w){return _e(v,w)&&v.every((_,S)=>wn(_.parameters,w[S].parameters))}(v.url,w.url);return _&&!(!v.parent!=!w.parent)&&(!v.parent||lr(v.parent,w.parent))}function Ii(v,w,_){if(_&&v.shouldReuseRoute(w.value,_.value.snapshot)){const S=_.value;S._futureSnapshot=w.value;const k=function oo(v,w,_){return w.children.map(S=>{for(const k of _.children)if(v.shouldReuseRoute(S.value,k.value.snapshot))return Ii(v,S,k);return Ii(v,S)})}(v,w,_);return new Ui(S,k)}{if(v.shouldAttach(w.value)){const z=v.retrieve(w.value);if(null!==z){const te=z.route;return te.value._futureSnapshot=w.value,te.children=w.children.map(pe=>Ii(v,pe)),te}}const S=function qr(v){return new Pi(new we(v.url),new we(v.params),new we(v.queryParams),new we(v.fragment),new we(v.data),v.outlet,v.component,v)}(w.value),k=w.children.map(z=>Ii(v,z));return new Ui(S,k)}}const ao="ngNavigationCancelingError";function ea(v,w){const{redirectTo:_,navigationBehaviorOptions:S}=Wn(w)?{redirectTo:w,navigationBehaviorOptions:void 0}:w,k=Fr(!1,0,w);return k.url=_,k.navigationBehaviorOptions=S,k}function Fr(v,w,_){const S=new Error("NavigationCancelingError: "+(v||""));return S[ao]=!0,S.cancellationCode=w,_&&(S.url=_),S}function us(v){return Ho(v)&&Wn(v.url)}function Ho(v){return v&&v[ao]}class yr{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new jr,this.attachRef=null}}let jr=(()=>{class v{constructor(){this.contexts=new Map}onChildOutletCreated(_,S){const k=this.getOrCreateContext(_);k.outlet=S,this.contexts.set(_,k)}onChildOutletDestroyed(_){const S=this.getContext(_);S&&(S.outlet=null,S.attachRef=null)}onOutletDeactivated(){const _=this.contexts;return this.contexts=new Map,_}onOutletReAttached(_){this.contexts=_}getOrCreateContext(_){let S=this.getContext(_);return S||(S=new yr,this.contexts.set(_,S)),S}getContext(_){return this.contexts.get(_)||null}}return v.\u0275fac=function(_){return new(_||v)},v.\u0275prov=p.Yz7({token:v,factory:v.\u0275fac,providedIn:"root"}),v})();const Ki=!1;let Bi=(()=>{class v{constructor(_,S,k,z,te){this.parentContexts=_,this.location=S,this.changeDetector=z,this.environmentInjector=te,this.activated=null,this._activatedRoute=null,this.activateEvents=new p.vpe,this.deactivateEvents=new p.vpe,this.attachEvents=new p.vpe,this.detachEvents=new p.vpe,this.name=k||Jt,_.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.getContext(this.name)?.outlet===this&&this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const _=this.parentContexts.getContext(this.name);_&&_.route&&(_.attachRef?this.attach(_.attachRef,_.route):this.activateWith(_.route,_.injector))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new p.vHH(4012,Ki);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new p.vHH(4012,Ki);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new p.vHH(4012,Ki);this.location.detach();const _=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(_.instance),_}attach(_,S){this.activated=_,this._activatedRoute=S,this.location.insert(_.hostView),this.attachEvents.emit(_.instance)}deactivate(){if(this.activated){const _=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(_)}}activateWith(_,S){if(this.isActivated)throw new p.vHH(4013,Ki);this._activatedRoute=_;const k=this.location,te=_._futureSnapshot.component,pe=this.parentContexts.getOrCreateContext(this.name).children,Ye=new ui(_,pe,k.injector);if(S&&function Hn(v){return!!v.resolveComponentFactory}(S)){const At=S.resolveComponentFactory(te);this.activated=k.createComponent(At,k.length,Ye)}else this.activated=k.createComponent(te,{index:k.length,injector:Ye,environmentInjector:S??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return v.\u0275fac=function(_){return new(_||v)(p.Y36(jr),p.Y36(p.s_b),p.$8M("name"),p.Y36(p.sBO),p.Y36(p.lqb))},v.\u0275dir=p.lG2({type:v,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0}),v})();class ui{constructor(w,_,S){this.route=w,this.childContexts=_,this.parent=S}get(w,_){return w===Pi?this.route:w===jr?this.childContexts:this.parent.get(w,_)}}let Sr=(()=>{class v{}return v.\u0275fac=function(_){return new(_||v)},v.\u0275cmp=p.Xpm({type:v,selectors:[["ng-component"]],standalone:!0,features:[p.jDz],decls:1,vars:0,template:function(_,S){1&_&&p._UZ(0,"router-outlet")},dependencies:[Bi],encapsulation:2}),v})();function ji(v,w){return v.providers&&!v._injector&&(v._injector=(0,p.MMx)(v.providers,w,`Route: ${v.path}`)),v._injector??w}function Us(v){const w=v.children&&v.children.map(Us),_=w?{...v,children:w}:{...v};return!_.component&&!_.loadComponent&&(w||_.loadChildren)&&_.outlet&&_.outlet!==Jt&&(_.component=Sr),_}function $i(v){return v.outlet||Jt}function ys(v,w){const _=v.filter(S=>$i(S)===w);return _.push(...v.filter(S=>$i(S)!==w)),_}function ki(v){if(!v)return null;if(v.routeConfig?._injector)return v.routeConfig._injector;for(let w=v.parent;w;w=w.parent){const _=w.routeConfig;if(_?._loadedInjector)return _._loadedInjector;if(_?._injector)return _._injector}return null}class ut{constructor(w,_,S,k){this.routeReuseStrategy=w,this.futureState=_,this.currState=S,this.forwardEvent=k}activate(w){const _=this.futureState._root,S=this.currState?this.currState._root:null;this.deactivateChildRoutes(_,S,w),ms(this.futureState.root),this.activateChildRoutes(_,S,w)}deactivateChildRoutes(w,_,S){const k=fi(_);w.children.forEach(z=>{const te=z.value.outlet;this.deactivateRoutes(z,k[te],S),delete k[te]}),An(k,(z,te)=>{this.deactivateRouteAndItsChildren(z,S)})}deactivateRoutes(w,_,S){const k=w.value,z=_?_.value:null;if(k===z)if(k.component){const te=S.getContext(k.outlet);te&&this.deactivateChildRoutes(w,_,te.children)}else this.deactivateChildRoutes(w,_,S);else z&&this.deactivateRouteAndItsChildren(_,S)}deactivateRouteAndItsChildren(w,_){w.value.component&&this.routeReuseStrategy.shouldDetach(w.value.snapshot)?this.detachAndStoreRouteSubtree(w,_):this.deactivateRouteAndOutlet(w,_)}detachAndStoreRouteSubtree(w,_){const S=_.getContext(w.value.outlet),k=S&&w.value.component?S.children:_,z=fi(w);for(const te of Object.keys(z))this.deactivateRouteAndItsChildren(z[te],k);if(S&&S.outlet){const te=S.outlet.detach(),pe=S.children.onOutletDeactivated();this.routeReuseStrategy.store(w.value.snapshot,{componentRef:te,route:w,contexts:pe})}}deactivateRouteAndOutlet(w,_){const S=_.getContext(w.value.outlet),k=S&&w.value.component?S.children:_,z=fi(w);for(const te of Object.keys(z))this.deactivateRouteAndItsChildren(z[te],k);S&&S.outlet&&(S.outlet.deactivate(),S.children.onOutletDeactivated(),S.attachRef=null,S.resolver=null,S.route=null)}activateChildRoutes(w,_,S){const k=fi(_);w.children.forEach(z=>{this.activateRoutes(z,k[z.value.outlet],S),this.forwardEvent(new or(z.value.snapshot))}),w.children.length&&this.forwardEvent(new _n(w.value.snapshot))}activateRoutes(w,_,S){const k=w.value,z=_?_.value:null;if(ms(k),k===z)if(k.component){const te=S.getOrCreateContext(k.outlet);this.activateChildRoutes(w,_,te.children)}else this.activateChildRoutes(w,_,S);else if(k.component){const te=S.getOrCreateContext(k.outlet);if(this.routeReuseStrategy.shouldAttach(k.snapshot)){const pe=this.routeReuseStrategy.retrieve(k.snapshot);this.routeReuseStrategy.store(k.snapshot,null),te.children.onOutletReAttached(pe.contexts),te.attachRef=pe.componentRef,te.route=pe.route.value,te.outlet&&te.outlet.attach(pe.componentRef,pe.route.value),ms(pe.route.value),this.activateChildRoutes(w,null,te.children)}else{const pe=ki(k.snapshot),Ye=pe?.get(p._Vd)??null;te.attachRef=null,te.route=k,te.resolver=Ye,te.injector=pe,te.outlet&&te.outlet.activateWith(k,te.injector),this.activateChildRoutes(w,null,te.children)}}else this.activateChildRoutes(w,null,S)}}class Tn{constructor(w){this.path=w,this.route=this.path[this.path.length-1]}}class Ys{constructor(w,_){this.component=w,this.route=_}}function Bs(v,w,_){const S=v._root;return js(S,w?w._root:null,_,[S.value])}function Hi(v,w){const _=Symbol(),S=w.get(v,_);return S===_?"function"!=typeof v||(0,p.Z0I)(v)?w.get(v):v:S}function js(v,w,_,S,k={canDeactivateChecks:[],canActivateChecks:[]}){const z=fi(w);return v.children.forEach(te=>{(function ls(v,w,_,S,k={canDeactivateChecks:[],canActivateChecks:[]}){const z=v.value,te=w?w.value:null,pe=_?_.getContext(v.value.outlet):null;if(te&&z.routeConfig===te.routeConfig){const Ye=function Mo(v,w,_){if("function"==typeof _)return _(v,w);switch(_){case"pathParamsChange":return!_e(v.url,w.url);case"pathParamsOrQueryParamsChange":return!_e(v.url,w.url)||!wn(v.queryParams,w.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!lr(v,w)||!wn(v.queryParams,w.queryParams);default:return!lr(v,w)}}(te,z,z.routeConfig.runGuardsAndResolvers);Ye?k.canActivateChecks.push(new Tn(S)):(z.data=te.data,z._resolvedData=te._resolvedData),js(v,w,z.component?pe?pe.children:null:_,S,k),Ye&&pe&&pe.outlet&&pe.outlet.isActivated&&k.canDeactivateChecks.push(new Ys(pe.outlet.component,te))}else te&&Qs(w,pe,k),k.canActivateChecks.push(new Tn(S)),js(v,null,z.component?pe?pe.children:null:_,S,k)})(te,z[te.value.outlet],_,S.concat([te.value]),k),delete z[te.value.outlet]}),An(z,(te,pe)=>Qs(te,_.getContext(pe),k)),k}function Qs(v,w,_){const S=fi(v),k=v.value;An(S,(z,te)=>{Qs(z,k.component?w?w.children.getContext(te):null:w,_)}),_.canDeactivateChecks.push(new Ys(k.component&&w&&w.outlet&&w.outlet.isActivated?w.outlet.component:null,k))}function lo(v){return"function"==typeof v}function cs(v){return v instanceof xe.K||"EmptyError"===v?.name}const Di=Symbol("INITIAL_VALUE");function _r(){return(0,Oe.w)(v=>Ge(v.map(w=>w.pipe((0,lt.q)(1),(0,_t.O)(Di)))).pipe((0,ce.U)(w=>{for(const _ of w)if(!0!==_){if(_===Di)return Di;if(!1===_||_ instanceof Ie)return _}return!0}),(0,Et.h)(w=>w!==Di),(0,lt.q)(1)))}function ha(v){return(0,he.z)((0,tn.b)(w=>{if(Wn(w))throw ea(0,w)}),(0,ce.U)(w=>!0===w))}const x={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function $(v,w,_,S,k){const z=N(v,w,_);return z.matched?function Aa(v,w,_,S){const k=w.canMatch;if(!k||0===k.length)return(0,G.of)(!0);const z=k.map(te=>{const pe=Hi(te,v);return Vn(function Ke(v){return v&&lo(v.canMatch)}(pe)?pe.canMatch(w,_):v.runInContext(()=>pe(w,_)))});return(0,G.of)(z).pipe(_r(),ha())}(S=ji(w,S),w,_).pipe((0,ce.U)(te=>!0===te?z:{...x})):(0,G.of)(z)}function N(v,w,_){if(""===w.path)return"full"===w.pathMatch&&(v.hasChildren()||_.length>0)?{...x}:{matched:!0,consumedSegments:[],remainingSegments:_,parameters:{},positionalParamSegments:{}};const k=(w.matcher||dt)(_,v,w);if(!k)return{...x};const z={};An(k.posParams,(pe,Ye)=>{z[Ye]=pe.path});const te=k.consumed.length>0?{...z,...k.consumed[k.consumed.length-1].parameters}:z;return{matched:!0,consumedSegments:k.consumed,remainingSegments:_.slice(k.consumed.length),parameters:te,positionalParamSegments:k.posParams??{}}}function Z(v,w,_,S,k="corrected"){if(_.length>0&&function Qe(v,w,_){return _.some(S=>Yn(v,w,S)&&$i(S)!==Jt)}(v,_,S)){const te=new ie(w,function Be(v,w,_,S){const k={};k[Jt]=S,S._sourceSegment=v,S._segmentIndexShift=w.length;for(const z of _)if(""===z.path&&$i(z)!==Jt){const te=new ie([],{});te._sourceSegment=v,te._segmentIndexShift=w.length,k[$i(z)]=te}return k}(v,w,S,new ie(_,v.children)));return te._sourceSegment=v,te._segmentIndexShift=w.length,{segmentGroup:te,slicedSegments:[]}}if(0===_.length&&function Zt(v,w,_){return _.some(S=>Yn(v,w,S))}(v,_,S)){const te=new ie(v.segments,function de(v,w,_,S,k,z){const te={};for(const pe of S)if(Yn(v,_,pe)&&!k[$i(pe)]){const Ye=new ie([],{});Ye._sourceSegment=v,Ye._segmentIndexShift="legacy"===z?v.segments.length:w.length,te[$i(pe)]=Ye}return{...k,...te}}(v,w,_,S,v.children,k));return te._sourceSegment=v,te._segmentIndexShift=w.length,{segmentGroup:te,slicedSegments:_}}const z=new ie(v.segments,v.children);return z._sourceSegment=v,z._segmentIndexShift=w.length,{segmentGroup:z,slicedSegments:_}}function Yn(v,w,_){return(!(v.hasChildren()||w.length>0)||"full"!==_.pathMatch)&&""===_.path}function er(v,w,_,S){return!!($i(v)===S||S!==Jt&&Yn(w,_,v))&&("**"===v.path||N(w,v,_).matched)}function qn(v,w,_){return 0===w.length&&!v.children[_]}const Un=!1;class Xr{constructor(w){this.segmentGroup=w||null}}class gr{constructor(w){this.urlTree=w}}function Or(v){return et(new Xr(v))}function Os(v){return et(new gr(v))}class ds{constructor(w,_,S,k,z){this.injector=w,this.configLoader=_,this.urlSerializer=S,this.urlTree=k,this.config=z,this.allowRedirects=!0}apply(){const w=Z(this.urlTree.root,[],[],this.config).segmentGroup,_=new ie(w.segments,w.children);return this.expandSegmentGroup(this.injector,this.config,_,Jt).pipe((0,ce.U)(z=>this.createUrlTree(fn(z),this.urlTree.queryParams,this.urlTree.fragment))).pipe(qt(z=>{if(z instanceof gr)return this.allowRedirects=!1,this.match(z.urlTree);throw z instanceof Xr?this.noMatchError(z):z}))}match(w){return this.expandSegmentGroup(this.injector,this.config,w.root,Jt).pipe((0,ce.U)(k=>this.createUrlTree(fn(k),w.queryParams,w.fragment))).pipe(qt(k=>{throw k instanceof Xr?this.noMatchError(k):k}))}noMatchError(w){return new p.vHH(4002,Un)}createUrlTree(w,_,S){const k=ii(w);return new Ie(k,_,S)}expandSegmentGroup(w,_,S,k){return 0===S.segments.length&&S.hasChildren()?this.expandChildren(w,_,S).pipe((0,ce.U)(z=>new ie([],z))):this.expandSegment(w,S,_,S.segments,k,!0)}expandChildren(w,_,S){const k=[];for(const z of Object.keys(S.children))"primary"===z?k.unshift(z):k.push(z);return(0,T.D)(k).pipe((0,ct.b)(z=>{const te=S.children[z],pe=ys(_,z);return this.expandSegmentGroup(w,pe,te,z).pipe((0,ce.U)(Ye=>({segment:Ye,outlet:z})))}),(0,rn.R)((z,te)=>(z[te.outlet]=te.segment,z),{}),Fn())}expandSegment(w,_,S,k,z,te){return(0,T.D)(S).pipe((0,ct.b)(pe=>this.expandSegmentAgainstRoute(w,_,S,pe,k,z,te).pipe(qt(At=>{if(At instanceof Xr)return(0,G.of)(null);throw At}))),(0,Bt.P)(pe=>!!pe),qt((pe,Ye)=>{if(cs(pe))return qn(_,k,z)?(0,G.of)(new ie([],{})):Or(_);throw pe}))}expandSegmentAgainstRoute(w,_,S,k,z,te,pe){return er(k,_,z,te)?void 0===k.redirectTo?this.matchSegmentAgainstRoute(w,_,k,z,te):pe&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(w,_,S,k,z,te):Or(_):Or(_)}expandSegmentAgainstRouteUsingRedirect(w,_,S,k,z,te){return"**"===k.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(w,S,k,te):this.expandRegularSegmentAgainstRouteUsingRedirect(w,_,S,k,z,te)}expandWildCardWithParamsAgainstRouteUsingRedirect(w,_,S,k){const z=this.applyRedirectCommands([],S.redirectTo,{});return S.redirectTo.startsWith("/")?Os(z):this.lineralizeSegments(S,z).pipe((0,Ot.z)(te=>{const pe=new ie(te,{});return this.expandSegment(w,pe,_,te,k,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(w,_,S,k,z,te){const{matched:pe,consumedSegments:Ye,remainingSegments:At,positionalParamSegments:en}=N(_,k,z);if(!pe)return Or(_);const zt=this.applyRedirectCommands(Ye,k.redirectTo,en);return k.redirectTo.startsWith("/")?Os(zt):this.lineralizeSegments(k,zt).pipe((0,Ot.z)(yn=>this.expandSegment(w,_,S,yn.concat(At),te,!1)))}matchSegmentAgainstRoute(w,_,S,k,z){return"**"===S.path?(w=ji(S,w),S.loadChildren?(S._loadedRoutes?(0,G.of)({routes:S._loadedRoutes,injector:S._loadedInjector}):this.configLoader.loadChildren(w,S)).pipe((0,ce.U)(pe=>(S._loadedRoutes=pe.routes,S._loadedInjector=pe.injector,new ie(k,{})))):(0,G.of)(new ie(k,{}))):$(_,S,k,w).pipe((0,Oe.w)(({matched:te,consumedSegments:pe,remainingSegments:Ye})=>te?this.getChildConfig(w=S._injector??w,S,k).pipe((0,Ot.z)(en=>{const zt=en.injector??w,yn=en.routes,{segmentGroup:Bn,slicedSegments:go}=Z(_,pe,Ye,yn),Gi=new ie(Bn.segments,Bn.children);if(0===go.length&&Gi.hasChildren())return this.expandChildren(zt,yn,Gi).pipe((0,ce.U)(ja=>new ie(pe,ja)));if(0===yn.length&&0===go.length)return(0,G.of)(new ie(pe,{}));const li=$i(S)===z;return this.expandSegment(zt,Gi,yn,go,li?Jt:z,!0).pipe((0,ce.U)(mi=>new ie(pe.concat(mi.segments),mi.children)))})):Or(_)))}getChildConfig(w,_,S){return _.children?(0,G.of)({routes:_.children,injector:w}):_.loadChildren?void 0!==_._loadedRoutes?(0,G.of)({routes:_._loadedRoutes,injector:_._loadedInjector}):function Sa(v,w,_,S){const k=w.canLoad;if(void 0===k||0===k.length)return(0,G.of)(!0);const z=k.map(te=>{const pe=Hi(te,v);return Vn(function L(v){return v&&lo(v.canLoad)}(pe)?pe.canLoad(w,_):v.runInContext(()=>pe(w,_)))});return(0,G.of)(z).pipe(_r(),ha())}(w,_,S).pipe((0,Ot.z)(k=>k?this.configLoader.loadChildren(w,_).pipe((0,tn.b)(z=>{_._loadedRoutes=z.routes,_._loadedInjector=z.injector})):function Xs(v){return et(Fr(Un,3))}())):(0,G.of)({routes:[],injector:w})}lineralizeSegments(w,_){let S=[],k=_.root;for(;;){if(S=S.concat(k.segments),0===k.numberOfChildren)return(0,G.of)(S);if(k.numberOfChildren>1||!k.children[Jt])return et(new p.vHH(4e3,Un));k=k.children[Jt]}}applyRedirectCommands(w,_,S){return this.applyRedirectCreateUrlTree(_,this.urlSerializer.parse(_),w,S)}applyRedirectCreateUrlTree(w,_,S,k){const z=this.createSegmentGroup(w,_.root,S,k);return new Ie(z,this.createQueryParams(_.queryParams,this.urlTree.queryParams),_.fragment)}createQueryParams(w,_){const S={};return An(w,(k,z)=>{if("string"==typeof k&&k.startsWith(":")){const pe=k.substring(1);S[z]=_[pe]}else S[z]=k}),S}createSegmentGroup(w,_,S,k){const z=this.createSegments(w,_.segments,S,k);let te={};return An(_.children,(pe,Ye)=>{te[Ye]=this.createSegmentGroup(w,pe,S,k)}),new ie(z,te)}createSegments(w,_,S,k){return _.map(z=>z.path.startsWith(":")?this.findPosParam(w,z,k):this.findOrReturn(z,S))}findPosParam(w,_,S){const k=S[_.path.substring(1)];if(!k)throw new p.vHH(4001,Un);return k}findOrReturn(w,_){let S=0;for(const k of _){if(k.path===w.path)return _.splice(S),k;S++}return w}}class zo{}class xa{constructor(w,_,S,k,z,te,pe,Ye){this.injector=w,this.rootComponentType=_,this.config=S,this.urlTree=k,this.url=z,this.paramsInheritanceStrategy=te,this.relativeLinkResolution=pe,this.urlSerializer=Ye}recognize(){const w=Z(this.urlTree.root,[],[],this.config.filter(_=>void 0===_.redirectTo),this.relativeLinkResolution).segmentGroup;return this.processSegmentGroup(this.injector,this.config,w,Jt).pipe((0,ce.U)(_=>{if(null===_)return null;const S=new gs([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Jt,this.rootComponentType,null,this.urlTree.root,-1,{}),k=new Ui(S,_),z=new wo(this.url,k);return this.inheritParamsAndData(z._root),z}))}inheritParamsAndData(w){const _=w.value,S=as(_,this.paramsInheritanceStrategy);_.params=Object.freeze(S.params),_.data=Object.freeze(S.data),w.children.forEach(k=>this.inheritParamsAndData(k))}processSegmentGroup(w,_,S,k){return 0===S.segments.length&&S.hasChildren()?this.processChildren(w,_,S):this.processSegment(w,_,S,S.segments,k)}processChildren(w,_,S){return(0,T.D)(Object.keys(S.children)).pipe((0,ct.b)(k=>{const z=S.children[k],te=ys(_,k);return this.processSegmentGroup(w,te,z,k)}),(0,rn.R)((k,z)=>k&&z?(k.push(...z),k):null),function Oi(v,w=!1){return(0,oe.e)((_,S)=>{let k=0;_.subscribe((0,mt.x)(S,z=>{const te=v(z,k++);(te||w)&&S.next(z),!te&&S.complete()}))})}(k=>null!==k),(0,an.d)(null),Fn(),(0,ce.U)(k=>{if(null===k)return null;const z=pa(k);return function xu(v){v.sort((w,_)=>w.value.outlet===Jt?-1:_.value.outlet===Jt?1:w.value.outlet.localeCompare(_.value.outlet))}(z),z}))}processSegment(w,_,S,k,z){return(0,T.D)(_).pipe((0,ct.b)(te=>this.processSegmentAgainstRoute(te._injector??w,te,S,k,z)),(0,Bt.P)(te=>!!te),qt(te=>{if(cs(te))return qn(S,k,z)?(0,G.of)([]):(0,G.of)(null);throw te}))}processSegmentAgainstRoute(w,_,S,k,z){if(_.redirectTo||!er(_,S,k,z))return(0,G.of)(null);let te;if("**"===_.path){const pe=k.length>0?Si(k).parameters:{},Ye=ga(S)+k.length,At=new gs(k,pe,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Es(_),$i(_),_.component??_._loadedComponent??null,_,Ma(S),Ye,Fi(_),Ye);te=(0,G.of)({snapshot:At,consumedSegments:[],remainingSegments:[]})}else te=$(S,_,k,w).pipe((0,ce.U)(({matched:pe,consumedSegments:Ye,remainingSegments:At,parameters:en})=>{if(!pe)return null;const zt=ga(S)+Ye.length;return{snapshot:new gs(Ye,en,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Es(_),$i(_),_.component??_._loadedComponent??null,_,Ma(S),zt,Fi(_),zt),consumedSegments:Ye,remainingSegments:At}}));return te.pipe((0,Oe.w)(pe=>{if(null===pe)return(0,G.of)(null);const{snapshot:Ye,consumedSegments:At,remainingSegments:en}=pe;w=_._injector??w;const zt=_._loadedInjector??w,yn=function ou(v){return v.children?v.children:v.loadChildren?v._loadedRoutes:[]}(_),{segmentGroup:Bn,slicedSegments:go}=Z(S,At,en,yn.filter(li=>void 0===li.redirectTo),this.relativeLinkResolution);if(0===go.length&&Bn.hasChildren())return this.processChildren(zt,yn,Bn).pipe((0,ce.U)(li=>null===li?null:[new Ui(Ye,li)]));if(0===yn.length&&0===go.length)return(0,G.of)([new Ui(Ye,[])]);const Gi=$i(_)===z;return this.processSegment(zt,yn,Bn,go,Gi?Jt:z).pipe((0,ce.U)(li=>null===li?null:[new Ui(Ye,li)]))}))}}function Ro(v){const w=v.value.routeConfig;return w&&""===w.path&&void 0===w.redirectTo}function pa(v){const w=[],_=new Set;for(const S of v){if(!Ro(S)){w.push(S);continue}const k=w.find(z=>S.value.routeConfig===z.value.routeConfig);void 0!==k?(k.children.push(...S.children),_.add(k)):w.push(S)}for(const S of _){const k=pa(S.children);w.push(new Ui(S.value,k))}return w.filter(S=>!_.has(S))}function Ma(v){let w=v;for(;w._sourceSegment;)w=w._sourceSegment;return w}function ga(v){let w=v,_=w._segmentIndexShift??0;for(;w._sourceSegment;)w=w._sourceSegment,_+=w._segmentIndexShift??0;return _-1}function Es(v){return v.data||{}}function Fi(v){return v.resolve||{}}function Na(v){return"string"==typeof v.title||null===v.title}function gi(v){return(0,Oe.w)(w=>{const _=v(w);return _?(0,T.D)(_).pipe((0,ce.U)(()=>w)):(0,G.of)(w)})}let hs=(()=>{class v{buildTitle(_){let S,k=_.root;for(;void 0!==k;)S=this.getResolvedTitleForRoute(k)??S,k=k.children.find(z=>z.outlet===Jt);return S}getResolvedTitleForRoute(_){return _.data[nr]}}return v.\u0275fac=function(_){return new(_||v)},v.\u0275prov=p.Yz7({token:v,factory:function(){return(0,p.f3M)(No)},providedIn:"root"}),v})(),No=(()=>{class v extends hs{constructor(_){super(),this.title=_}updateTitle(_){const S=this.buildTitle(_);void 0!==S&&this.title.setTitle(S)}}return v.\u0275fac=function(_){return new(_||v)(p.LFG(zr.Dx))},v.\u0275prov=p.Yz7({token:v,factory:v.\u0275fac,providedIn:"root"}),v})();class Ps{}class Do extends class Ci{shouldDetach(w){return!1}store(w,_){}shouldAttach(w){return!1}retrieve(w){return null}shouldReuseRoute(w,_){return w.routeConfig===_.routeConfig}}{}const _a=new p.OlP("",{providedIn:"root",factory:()=>({})}),It=new p.OlP("ROUTES");let Cr=(()=>{class v{constructor(_,S){this.injector=_,this.compiler=S,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(_){if(this.componentLoaders.get(_))return this.componentLoaders.get(_);if(_._loadedComponent)return(0,G.of)(_._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(_);const S=Vn(_.loadComponent()).pipe((0,tn.b)(z=>{this.onLoadEndListener&&this.onLoadEndListener(_),_._loadedComponent=z}),Ar(()=>{this.componentLoaders.delete(_)})),k=new ne(S,()=>new De.x).pipe(He());return this.componentLoaders.set(_,k),k}loadChildren(_,S){if(this.childrenLoaders.get(S))return this.childrenLoaders.get(S);if(S._loadedRoutes)return(0,G.of)({routes:S._loadedRoutes,injector:S._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(S);const z=this.loadModuleFactoryOrRoutes(S.loadChildren).pipe((0,ce.U)(pe=>{this.onLoadEndListener&&this.onLoadEndListener(S);let Ye,At,en=!1;Array.isArray(pe)?At=pe:(Ye=pe.create(_).injector,At=vi(Ye.get(It,[],p.XFs.Self|p.XFs.Optional)));return{routes:At.map(Us),injector:Ye}}),Ar(()=>{this.childrenLoaders.delete(S)})),te=new ne(z,()=>new De.x).pipe(He());return this.childrenLoaders.set(S,te),te}loadModuleFactoryOrRoutes(_){return Vn(_()).pipe((0,Ot.z)(S=>S instanceof p.YKP||Array.isArray(S)?(0,G.of)(S):(0,T.D)(this.compiler.compileModuleAsync(S))))}}return v.\u0275fac=function(_){return new(_||v)(p.LFG(p.zs3),p.LFG(p.Sil))},v.\u0275prov=p.Yz7({token:v,factory:v.\u0275fac,providedIn:"root"}),v})();class fo{}class Pa{shouldProcessUrl(w){return!0}extract(w){return w}merge(w,_){return w}}function ln(v){throw v}function va(v,w,_){return w.parse("/")}const Lt={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},We={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};function Mi(){const v=(0,p.f3M)(gt),w=(0,p.f3M)(jr),_=(0,p.f3M)(ye.Ye),S=(0,p.f3M)(p.zs3),k=(0,p.f3M)(p.Sil),z=(0,p.f3M)(It,{optional:!0})??[],te=(0,p.f3M)(_a,{optional:!0})??{},pe=(0,p.f3M)(No),Ye=(0,p.f3M)(hs,{optional:!0}),At=(0,p.f3M)(fo,{optional:!0}),en=(0,p.f3M)(Ps,{optional:!0}),zt=new Ri(null,v,w,_,S,k,vi(z));return At&&(zt.urlHandlingStrategy=At),en&&(zt.routeReuseStrategy=en),zt.titleStrategy=Ye??pe,function ft(v,w){v.errorHandler&&(w.errorHandler=v.errorHandler),v.malformedUriErrorHandler&&(w.malformedUriErrorHandler=v.malformedUriErrorHandler),v.onSameUrlNavigation&&(w.onSameUrlNavigation=v.onSameUrlNavigation),v.paramsInheritanceStrategy&&(w.paramsInheritanceStrategy=v.paramsInheritanceStrategy),v.relativeLinkResolution&&(w.relativeLinkResolution=v.relativeLinkResolution),v.urlUpdateStrategy&&(w.urlUpdateStrategy=v.urlUpdateStrategy),v.canceledNavigationResolution&&(w.canceledNavigationResolution=v.canceledNavigationResolution)}(te,zt),zt}let Ri=(()=>{class v{constructor(_,S,k,z,te,pe,Ye){this.rootComponentType=_,this.urlSerializer=S,this.rootContexts=k,this.location=z,this.config=Ye,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new De.x,this.errorHandler=ln,this.malformedUriErrorHandler=va,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=()=>(0,G.of)(void 0),this.urlHandlingStrategy=new Pa,this.routeReuseStrategy=new Do,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.configLoader=te.get(Cr),this.configLoader.onLoadEndListener=yn=>this.triggerEvent(new wt(yn)),this.configLoader.onLoadStartListener=yn=>this.triggerEvent(new ot(yn)),this.ngModule=te.get(p.h0i),this.console=te.get(p.c2e);const zt=te.get(p.R0b);this.isNgZoneEnabled=zt instanceof p.R0b&&p.R0b.isInAngularZone(),this.resetConfig(Ye),this.currentUrlTree=function $t(){return new Ie(new ie([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=pi(this.currentUrlTree,this.rootComponentType),this.transitions=new we({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){return this.location.getState()?.\u0275routerPageId}setupNavigations(_){const S=this.events;return _.pipe((0,Et.h)(k=>0!==k.id),(0,ce.U)(k=>({...k,extractedUrl:this.urlHandlingStrategy.extract(k.rawUrl)})),(0,Oe.w)(k=>{let z=!1,te=!1;return(0,G.of)(k).pipe((0,tn.b)(pe=>{this.currentNavigation={id:pe.id,initialUrl:pe.rawUrl,extractedUrl:pe.extractedUrl,trigger:pe.source,extras:pe.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),(0,Oe.w)(pe=>{const Ye=this.browserUrlTree.toString(),At=!this.navigated||pe.extractedUrl.toString()!==Ye||Ye!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||At)&&this.urlHandlingStrategy.shouldProcessUrl(pe.rawUrl))return ia(pe.source)&&(this.browserUrlTree=pe.extractedUrl),(0,G.of)(pe).pipe((0,Oe.w)(zt=>{const yn=this.transitions.getValue();return S.next(new io(zt.id,this.serializeUrl(zt.extractedUrl),zt.source,zt.restoredState)),yn!==this.transitions.getValue()?yt.E:Promise.resolve(zt)}),function $s(v,w,_,S){return(0,Oe.w)(k=>function ho(v,w,_,S,k){return new ds(v,w,_,S,k).apply()}(v,w,_,k.extractedUrl,S).pipe((0,ce.U)(z=>({...k,urlAfterRedirects:z}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,tn.b)(zt=>{this.currentNavigation={...this.currentNavigation,finalUrl:zt.urlAfterRedirects},k.urlAfterRedirects=zt.urlAfterRedirects}),function ya(v,w,_,S,k,z){return(0,Ot.z)(te=>function fa(v,w,_,S,k,z,te="emptyOnly",pe="legacy"){return new xa(v,w,_,S,k,te,pe,z).recognize().pipe((0,Oe.w)(Ye=>null===Ye?function ei(v){return new Me.y(w=>w.error(v))}(new zo):(0,G.of)(Ye)))}(v,w,_,te.urlAfterRedirects,S.serialize(te.urlAfterRedirects),S,k,z).pipe((0,ce.U)(pe=>({...te,targetSnapshot:pe}))))}(this.ngModule.injector,this.rootComponentType,this.config,this.urlSerializer,this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,tn.b)(zt=>{if(k.targetSnapshot=zt.targetSnapshot,"eager"===this.urlUpdateStrategy){if(!zt.extras.skipLocationChange){const Bn=this.urlHandlingStrategy.merge(zt.urlAfterRedirects,zt.rawUrl);this.setBrowserUrl(Bn,zt)}this.browserUrlTree=zt.urlAfterRedirects}const yn=new Rs(zt.id,this.serializeUrl(zt.extractedUrl),this.serializeUrl(zt.urlAfterRedirects),zt.targetSnapshot);S.next(yn)}));if(At&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:yn,extractedUrl:Bn,source:go,restoredState:Gi,extras:li}=pe,Zo=new io(yn,this.serializeUrl(Bn),go,Gi);S.next(Zo);const mi=pi(Bn,this.rootComponentType).snapshot;return k={...pe,targetSnapshot:mi,urlAfterRedirects:Bn,extras:{...li,skipLocationChange:!1,replaceUrl:!1}},(0,G.of)(k)}return this.rawUrlTree=pe.rawUrl,pe.resolve(null),yt.E}),(0,tn.b)(pe=>{const Ye=new Wr(pe.id,this.serializeUrl(pe.extractedUrl),this.serializeUrl(pe.urlAfterRedirects),pe.targetSnapshot);this.triggerEvent(Ye)}),(0,ce.U)(pe=>k={...pe,guards:Bs(pe.targetSnapshot,pe.currentSnapshot,this.rootContexts)}),function _s(v,w){return(0,Ot.z)(_=>{const{targetSnapshot:S,currentSnapshot:k,guards:{canActivateChecks:z,canDeactivateChecks:te}}=_;return 0===te.length&&0===z.length?(0,G.of)({..._,guardsResult:!0}):function Js(v,w,_,S){return(0,T.D)(v).pipe((0,Ot.z)(k=>function na(v,w,_,S,k){const z=w&&w.routeConfig?w.routeConfig.canDeactivate:null;if(!z||0===z.length)return(0,G.of)(!0);const te=z.map(pe=>{const Ye=ki(w)??k,At=Hi(pe,Ye);return Vn(function Y(v){return v&&lo(v.canDeactivate)}(At)?At.canDeactivate(v,w,_,S):Ye.runInContext(()=>At(v,w,_,S))).pipe((0,Bt.P)())});return(0,G.of)(te).pipe(_r())}(k.component,k.route,_,w,S)),(0,Bt.P)(k=>!0!==k,!0))}(te,S,k,v).pipe((0,Ot.z)(pe=>pe&&function ta(v){return"boolean"==typeof v}(pe)?function vs(v,w,_,S){return(0,T.D)(w).pipe((0,ct.b)(k=>(0,ze.z)(function co(v,w){return null!==v&&w&&w(new Kt(v)),(0,G.of)(!0)}(k.route.parent,S),function Eo(v,w){return null!==v&&w&&w(new di(v)),(0,G.of)(!0)}(k.route,S),function dr(v,w,_){const S=w[w.length-1],z=w.slice(0,w.length-1).reverse().map(te=>function Dr(v){const w=v.routeConfig?v.routeConfig.canActivateChild:null;return w&&0!==w.length?{node:v,guards:w}:null}(te)).filter(te=>null!==te).map(te=>xt(()=>{const pe=te.guards.map(Ye=>{const At=ki(te.node)??_,en=Hi(Ye,At);return Vn(function R(v){return v&&lo(v.canActivateChild)}(en)?en.canActivateChild(S,v):At.runInContext(()=>en(S,v))).pipe((0,Bt.P)())});return(0,G.of)(pe).pipe(_r())}));return(0,G.of)(z).pipe(_r())}(v,k.path,_),function Ta(v,w,_){const S=w.routeConfig?w.routeConfig.canActivate:null;if(!S||0===S.length)return(0,G.of)(!0);const k=S.map(z=>xt(()=>{const te=ki(w)??_,pe=Hi(z,te);return Vn(function P(v){return v&&lo(v.canActivate)}(pe)?pe.canActivate(w,v):te.runInContext(()=>pe(w,v))).pipe((0,Bt.P)())}));return(0,G.of)(k).pipe(_r())}(v,k.route,_))),(0,Bt.P)(k=>!0!==k,!0))}(S,z,v,w):(0,G.of)(pe)),(0,ce.U)(pe=>({..._,guardsResult:pe})))})}(this.ngModule.injector,pe=>this.triggerEvent(pe)),(0,tn.b)(pe=>{if(k.guardsResult=pe.guardsResult,Wn(pe.guardsResult))throw ea(0,pe.guardsResult);const Ye=new Ae(pe.id,this.serializeUrl(pe.extractedUrl),this.serializeUrl(pe.urlAfterRedirects),pe.targetSnapshot,!!pe.guardsResult);this.triggerEvent(Ye)}),(0,Et.h)(pe=>!!pe.guardsResult||(this.restoreHistory(pe),this.cancelNavigationTransition(pe,"",3),!1)),gi(pe=>{if(pe.guards.canActivateChecks.length)return(0,G.of)(pe).pipe((0,tn.b)(Ye=>{const At=new Te(Ye.id,this.serializeUrl(Ye.extractedUrl),this.serializeUrl(Ye.urlAfterRedirects),Ye.targetSnapshot);this.triggerEvent(At)}),(0,Oe.w)(Ye=>{let At=!1;return(0,G.of)(Ye).pipe(function Io(v,w){return(0,Ot.z)(_=>{const{targetSnapshot:S,guards:{canActivateChecks:k}}=_;if(!k.length)return(0,G.of)(_);let z=0;return(0,T.D)(k).pipe((0,ct.b)(te=>function Oo(v,w,_,S){const k=v.routeConfig,z=v._resolve;return void 0!==k?.title&&!Na(k)&&(z[nr]=k.title),function Ra(v,w,_,S){const k=function Mu(v){return[...Object.keys(v),...Object.getOwnPropertySymbols(v)]}(v);if(0===k.length)return(0,G.of)({});const z={};return(0,T.D)(k).pipe((0,Ot.z)(te=>function Oa(v,w,_,S){const k=ki(w)??S,z=Hi(v,k);return Vn(z.resolve?z.resolve(w,_):k.runInContext(()=>z(w,_)))}(v[te],w,_,S).pipe((0,Bt.P)(),(0,tn.b)(pe=>{z[te]=pe}))),Ft(1),function Nr(v){return(0,ce.U)(()=>v)}(z),qt(te=>cs(te)?yt.E:et(te)))}(z,v,w,S).pipe((0,ce.U)(te=>(v._resolvedData=te,v.data=as(v,_).resolve,k&&Na(k)&&(v.data[nr]=k.title),null)))}(te.route,S,v,w)),(0,tn.b)(()=>z++),Ft(1),(0,Ot.z)(te=>z===k.length?(0,G.of)(_):yt.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,tn.b)({next:()=>At=!0,complete:()=>{At||(this.restoreHistory(Ye),this.cancelNavigationTransition(Ye,"",2))}}))}),(0,tn.b)(Ye=>{const At=new Pe(Ye.id,this.serializeUrl(Ye.extractedUrl),this.serializeUrl(Ye.urlAfterRedirects),Ye.targetSnapshot);this.triggerEvent(At)}))}),gi(pe=>{const Ye=At=>{const en=[];At.routeConfig?.loadComponent&&!At.routeConfig._loadedComponent&&en.push(this.configLoader.loadComponent(At.routeConfig).pipe((0,tn.b)(zt=>{At.component=zt}),(0,ce.U)(()=>{})));for(const zt of At.children)en.push(...Ye(zt));return en};return Ge(Ye(pe.targetSnapshot.root)).pipe((0,an.d)(),(0,lt.q)(1))}),gi(()=>this.afterPreactivation()),(0,ce.U)(pe=>{const Ye=function xi(v,w,_){const S=Ii(v,w._root,_?_._root:void 0);return new vo(S,w)}(this.routeReuseStrategy,pe.targetSnapshot,pe.currentRouterState);return k={...pe,targetRouterState:Ye}}),(0,tn.b)(pe=>{this.currentUrlTree=pe.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(pe.urlAfterRedirects,pe.rawUrl),this.routerState=pe.targetRouterState,"deferred"===this.urlUpdateStrategy&&(pe.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,pe),this.browserUrlTree=pe.urlAfterRedirects)}),((v,w,_)=>(0,ce.U)(S=>(new ut(w,S.targetRouterState,S.currentRouterState,_).activate(v),S)))(this.rootContexts,this.routeReuseStrategy,pe=>this.triggerEvent(pe)),(0,tn.b)({next(){z=!0},complete(){z=!0}}),Ar(()=>{z||te||this.cancelNavigationTransition(k,"",1),this.currentNavigation?.id===k.id&&(this.currentNavigation=null)}),qt(pe=>{if(te=!0,Ho(pe)){us(pe)||(this.navigated=!0,this.restoreHistory(k,!0));const Ye=new jo(k.id,this.serializeUrl(k.extractedUrl),pe.message,pe.cancellationCode);if(S.next(Ye),us(pe)){const At=this.urlHandlingStrategy.merge(pe.url,this.rawUrlTree),en={skipLocationChange:k.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||ia(k.source)};this.scheduleNavigation(At,"imperative",null,en,{resolve:k.resolve,reject:k.reject,promise:k.promise})}else k.resolve(!1)}else{this.restoreHistory(k,!0);const Ye=new Ls(k.id,this.serializeUrl(k.extractedUrl),pe,k.targetSnapshot??void 0);S.next(Ye);try{k.resolve(this.errorHandler(pe))}catch(At){k.reject(At)}}return yt.E}))}))}resetRootComponentType(_){this.rootComponentType=_,this.routerState.root.component=this.rootComponentType}setTransition(_){this.transitions.next({...this.transitions.value,..._})}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(_=>{const S="popstate"===_.type?"popstate":"hashchange";"popstate"===S&&setTimeout(()=>{const k={replaceUrl:!0},z=_.state?.navigationId?_.state:null;if(z){const pe={...z};delete pe.navigationId,delete pe.\u0275routerPageId,0!==Object.keys(pe).length&&(k.state=pe)}const te=this.parseUrl(_.url);this.scheduleNavigation(te,S,z,k)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(_){this.events.next(_)}resetConfig(_){this.config=_.map(Us),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(_,S={}){const{relativeTo:k,queryParams:z,fragment:te,queryParamsHandling:pe,preserveFragment:Ye}=S,At=k||this.routerState.root,en=Ye?this.currentUrlTree.fragment:te;let zt=null;switch(pe){case"merge":zt={...this.currentUrlTree.queryParams,...z};break;case"preserve":zt=this.currentUrlTree.queryParams;break;default:zt=z||null}return null!==zt&&(zt=this.removeEmptyProps(zt)),Ni(At,this.currentUrlTree,_,zt,en??null)}navigateByUrl(_,S={skipLocationChange:!1}){const k=Wn(_)?_:this.parseUrl(_),z=this.urlHandlingStrategy.merge(k,this.rawUrlTree);return this.scheduleNavigation(z,"imperative",null,S)}navigate(_,S={skipLocationChange:!1}){return function Ya(v){for(let w=0;w<v.length;w++){if(null==v[w])throw new p.vHH(4008,false)}}(_),this.navigateByUrl(this.createUrlTree(_,S),S)}serializeUrl(_){return this.urlSerializer.serialize(_)}parseUrl(_){let S;try{S=this.urlSerializer.parse(_)}catch(k){S=this.malformedUriErrorHandler(k,this.urlSerializer,_)}return S}isActive(_,S){let k;if(k=!0===S?{...Lt}:!1===S?{...We}:S,Wn(_))return ar(this.currentUrlTree,_,k);const z=this.parseUrl(_);return ar(this.currentUrlTree,z,k)}removeEmptyProps(_){return Object.keys(_).reduce((S,k)=>{const z=_[k];return null!=z&&(S[k]=z),S},{})}processNavigations(){this.navigations.subscribe(_=>{this.navigated=!0,this.lastSuccessfulId=_.id,this.currentPageId=_.targetPageId,this.events.next(new Zi(_.id,this.serializeUrl(_.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.titleStrategy?.updateTitle(this.routerState.snapshot),_.resolve(!0)},_=>{this.console.warn(`Unhandled Navigation Error: ${_}`)})}scheduleNavigation(_,S,k,z,te){if(this.disposed)return Promise.resolve(!1);let pe,Ye,At;te?(pe=te.resolve,Ye=te.reject,At=te.promise):At=new Promise((yn,Bn)=>{pe=yn,Ye=Bn});const en=++this.navigationId;let zt;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(k=this.location.getState()),zt=k&&k.\u0275routerPageId?k.\u0275routerPageId:z.replaceUrl||z.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1):zt=0,this.setTransition({id:en,targetPageId:zt,source:S,restoredState:k,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:_,extras:z,resolve:pe,reject:Ye,promise:At,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),At.catch(yn=>Promise.reject(yn))}setBrowserUrl(_,S){const k=this.urlSerializer.serialize(_),z={...S.extras.state,...this.generateNgRouterState(S.id,S.targetPageId)};this.location.isCurrentPathEqualTo(k)||S.extras.replaceUrl?this.location.replaceState(k,"",z):this.location.go(k,"",z)}restoreHistory(_,S=!1){if("computed"===this.canceledNavigationResolution){const k=this.currentPageId-_.targetPageId;"popstate"!==_.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.currentNavigation?.finalUrl||0===k?this.currentUrlTree===this.currentNavigation?.finalUrl&&0===k&&(this.resetState(_),this.browserUrlTree=_.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(k)}else"replace"===this.canceledNavigationResolution&&(S&&this.resetState(_),this.resetUrlToCurrentUrlTree())}resetState(_){this.routerState=_.currentRouterState,this.currentUrlTree=_.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,_.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(_,S,k){const z=new jo(_.id,this.serializeUrl(_.extractedUrl),S,k);this.triggerEvent(z),_.resolve(!1)}generateNgRouterState(_,S){return"computed"===this.canceledNavigationResolution?{navigationId:_,\u0275routerPageId:S}:{navigationId:_}}}return v.\u0275fac=function(_){p.$Z()},v.\u0275prov=p.Yz7({token:v,factory:function(){return Mi()},providedIn:"root"}),v})();function ia(v){return"imperative"!==v}let Ea=(()=>{class v{constructor(_,S,k){this.router=_,this.route=S,this.locationStrategy=k,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.commands=null,this.href=null,this.onChanges=new De.x,this.subscription=_.events.subscribe(z=>{z instanceof Zi&&this.updateTargetUrlAndHref()})}set preserveFragment(_){this._preserveFragment=(0,p.D6c)(_)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(_){this._skipLocationChange=(0,p.D6c)(_)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(_){this._replaceUrl=(0,p.D6c)(_)}get replaceUrl(){return this._replaceUrl}set routerLink(_){this.commands=null!=_?Array.isArray(_)?_:[_]:null}ngOnChanges(_){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(_,S,k,z,te){return!!(0!==_||S||k||z||te||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!1)}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return v.\u0275fac=function(_){return new(_||v)(p.Y36(Ri),p.Y36(Pi),p.Y36(ye.S$))},v.\u0275dir=p.lG2({type:v,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(_,S){1&_&&p.NdJ("click",function(z){return S.onClick(z.button,z.ctrlKey,z.shiftKey,z.altKey,z.metaKey)}),2&_&&p.uIk("target",S.target)("href",S.href,p.LSH)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[p.TTD]}),v})();class M{}let Ce=(()=>{class v{constructor(_,S,k,z,te){this.router=_,this.injector=k,this.preloadingStrategy=z,this.loader=te}setUpPreloading(){this.subscription=this.router.events.pipe((0,Et.h)(_=>_ instanceof Zi),(0,ct.b)(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(_,S){const k=[];for(const z of S){z.providers&&!z._injector&&(z._injector=(0,p.MMx)(z.providers,_,`Route: ${z.path}`));const te=z._injector??_,pe=z._loadedInjector??te;z.loadChildren&&!z._loadedRoutes&&void 0===z.canLoad||z.loadComponent&&!z._loadedComponent?k.push(this.preloadConfig(te,z)):(z.children||z._loadedRoutes)&&k.push(this.processRoutes(pe,z.children??z._loadedRoutes))}return(0,T.D)(k).pipe((0,Tr.J)())}preloadConfig(_,S){return this.preloadingStrategy.preload(S,()=>{let k;k=S.loadChildren&&void 0===S.canLoad?this.loader.loadChildren(_,S):(0,G.of)(null);const z=k.pipe((0,Ot.z)(te=>null===te?(0,G.of)(void 0):(S._loadedRoutes=te.routes,S._loadedInjector=te.injector,this.processRoutes(te.injector??_,te.routes))));if(S.loadComponent&&!S._loadedComponent){const te=this.loader.loadComponent(S);return(0,T.D)([z,te]).pipe((0,Tr.J)())}return z})}}return v.\u0275fac=function(_){return new(_||v)(p.LFG(Ri),p.LFG(p.Sil),p.LFG(p.lqb),p.LFG(M),p.LFG(Cr))},v.\u0275prov=p.Yz7({token:v,factory:v.\u0275fac,providedIn:"root"}),v})();const ke=new p.OlP("");let bt=(()=>{class v{constructor(_,S,k={}){this.router=_,this.viewportScroller=S,this.options=k,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},k.scrollPositionRestoration=k.scrollPositionRestoration||"disabled",k.anchorScrolling=k.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(_=>{_ instanceof io?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=_.navigationTrigger,this.restoredId=_.restoredState?_.restoredState.navigationId:0):_ instanceof Zi&&(this.lastId=_.id,this.scheduleScrollEvent(_,this.router.parseUrl(_.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(_=>{_ instanceof hi&&(_.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(_.position):_.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(_.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(_,S){this.router.triggerEvent(new hi(_,"popstate"===this.lastSource?this.store[this.restoredId]:null,S))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return v.\u0275fac=function(_){p.$Z()},v.\u0275prov=p.Yz7({token:v,factory:v.\u0275fac}),v})();function Qn(v,w){return{\u0275kind:v,\u0275providers:w}}function Yt(v){return[{provide:It,multi:!0,useValue:v}]}function nn(){const v=(0,p.f3M)(p.zs3);return w=>{const _=v.get(p.z2F);if(w!==_.components[0])return;const S=v.get(Ri),k=v.get(Dt);1===v.get(wr)&&S.initialNavigation(),v.get(Yr,null,p.XFs.Optional)?.setUpPreloading(),v.get(ke,null,p.XFs.Optional)?.init(),S.resetRootComponentType(_.componentTypes[0]),k.next(),k.complete()}}const Dt=new p.OlP("",{factory:()=>new De.x}),wr=new p.OlP("",{providedIn:"root",factory:()=>1});const Yr=new p.OlP("");function po(v){return Qn(0,[{provide:Yr,useExisting:Ce},{provide:M,useExisting:v}])}const $r=new p.OlP("ROUTER_FORROOT_GUARD"),au=[ye.Ye,{provide:gt,useClass:Vt},{provide:Ri,useFactory:Mi},jr,{provide:Pi,useFactory:function Tt(v){return v.routerState.root},deps:[Ri]},Cr];function ka(){return new p.PXZ("Router",Ri)}let sa=(()=>{class v{constructor(_){}static forRoot(_,S){return{ngModule:v,providers:[au,[],Yt(_),{provide:$r,useFactory:Fa,deps:[[Ri,new p.FiY,new p.tp0]]},{provide:_a,useValue:S||{}},S?.useHash?{provide:ye.S$,useClass:ye.Do}:{provide:ye.S$,useClass:ye.b0},{provide:ke,useFactory:()=>{const v=(0,p.f3M)(Ri),w=(0,p.f3M)(ye.EM),_=(0,p.f3M)(_a);return _.scrollOffset&&w.setOffset(_.scrollOffset),new bt(v,w,_)}},S?.preloadingStrategy?po(S.preloadingStrategy).\u0275providers:[],{provide:p.PXZ,multi:!0,useFactory:ka},S?.initialNavigation?Is(S):[],[{provide:Qa,useFactory:nn},{provide:p.tb,multi:!0,useExisting:Qa}]]}}static forChild(_){return{ngModule:v,providers:[Yt(_)]}}}return v.\u0275fac=function(_){return new(_||v)(p.LFG($r,8))},v.\u0275mod=p.oAB({type:v}),v.\u0275inj=p.cJS({imports:[Sr]}),v})();function Fa(v){return"guarded"}function Is(v){return["disabled"===v.initialNavigation?Qn(3,[{provide:p.ip1,multi:!0,useFactory:()=>{const w=(0,p.f3M)(Ri);return()=>{w.setUpLocationChangeListener()}}},{provide:wr,useValue:2}]).\u0275providers:[],"enabledBlocking"===v.initialNavigation?Qn(2,[{provide:wr,useValue:0},{provide:p.ip1,multi:!0,deps:[p.zs3],useFactory:w=>{const _=w.get(ye.V_,Promise.resolve(null));let S=!1;return()=>_.then(()=>new Promise(z=>{const te=w.get(Ri),pe=w.get(Dt);(function k(z){w.get(Ri).events.pipe((0,Et.h)(pe=>pe instanceof Zi||pe instanceof jo||pe instanceof Ls),(0,ce.U)(pe=>pe instanceof Zi||pe instanceof jo&&(0===pe.code||1===pe.code)&&null),(0,Et.h)(pe=>null!==pe),(0,lt.q)(1)).subscribe(()=>{z()})})(()=>{z(!0),S=!0}),te.afterPreactivation=()=>(z(!0),S||pe.closed?(0,G.of)(void 0):pe),te.initialNavigation()}))}}]).\u0275providers:[]]}const Qa=new p.OlP("")},3942:(jt,$e,j)=>{j.d($e,{Z:()=>Ge});var p=j(2090),T=j(4859),G=j(9681),De=j(1877);class we{constructor(Ze,ze){this._delegate=Ze,this.firebase=ze,(0,G._addComponent)(Ze,new T.wA("app-compat",()=>this,"PUBLIC")),this.container=Ze.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Ze){this._delegate.automaticDataCollectionEnabled=Ze}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(Ze=>{this._delegate.checkDestroyed(),Ze()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,G.deleteApp)(this._delegate)))}_getService(Ze,ze=G._DEFAULT_ENTRY_NAME){var Pt;this._delegate.checkDestroyed();const xt=this._delegate.container.getProvider(Ze);return!xt.isInitialized()&&"EXPLICIT"===(null===(Pt=xt.getComponent())||void 0===Pt?void 0:Pt.instantiationMode)&&xt.initialize(),xt.getImmediate({identifier:ze})}_removeServiceInstance(Ze,ze=G._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(Ze).clearInstance(ze)}_addComponent(Ze){(0,G._addComponent)(this._delegate,Ze)}_addOrOverwriteComponent(Ze){(0,G._addOrOverwriteComponent)(this._delegate,Ze)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const Me=new p.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),fe=function Fe(){const kt=function Re(kt){const Ze={},ze={__esModule:!0,initializeApp:function he(Je,oe={}){const He=G.initializeApp(Je,oe);if((0,p.r3)(Ze,He.name))return Ze[He.name];const ne=new kt(He,ze);return Ze[He.name]=ne,ne},app:xt,registerVersion:G.registerVersion,setLogLevel:G.setLogLevel,onLog:G.onLog,apps:null,SDK_VERSION:G.SDK_VERSION,INTERNAL:{registerComponent:function et(Je){const oe=Je.name,He=oe.replace("-compat","");if(G._registerComponent(Je)&&"PUBLIC"===Je.type){const ne=(ye=xt())=>{if("function"!=typeof ye[He])throw Me.create("invalid-app-argument",{appName:oe});return ye[He]()};void 0!==Je.serviceProps&&(0,p.ZB)(ne,Je.serviceProps),ze[He]=ne,kt.prototype[He]=function(...ye){return this._getService.bind(this,oe).apply(this,Je.multipleInstances?ye:[])}}return"PUBLIC"===Je.type?ze[He]:null},removeApp:function Pt(Je){delete Ze[Je]},useAsService:function yt(Je,oe){return"serverAuth"===oe?null:oe},modularAPIs:G}};function xt(Je){if(!(0,p.r3)(Ze,Je=Je||G._DEFAULT_ENTRY_NAME))throw Me.create("no-app",{appName:Je});return Ze[Je]}return ze.default=ze,Object.defineProperty(ze,"apps",{get:function tt(){return Object.keys(Ze).map(Je=>Ze[Je])}}),xt.App=kt,ze}(we);return kt.INTERNAL=Object.assign(Object.assign({},kt.INTERNAL),{createFirebaseNamespace:Fe,extendNamespace:function Ze(ze){(0,p.ZB)(kt,ze)},createSubscribe:p.ne,ErrorFactory:p.LL,deepExtend:p.ZB}),kt}(),ue=new De.Yd("@firebase/app-compat");if((0,p.jU)()&&void 0!==self.firebase){ue.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const kt=self.firebase.SDK_VERSION;kt&&kt.indexOf("LITE")>=0&&ue.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Ge=fe;!function rt(kt){(0,G.registerVersion)("@firebase/app-compat","0.1.33",kt)}()},9681:(jt,$e,j)=>{j.r($e),j.d($e,{FirebaseError:()=>De.ZR,SDK_VERSION:()=>zr,_DEFAULT_ENTRY_NAME:()=>Bt,_addComponent:()=>rn,_addOrOverwriteComponent:()=>Ft,_apps:()=>tn,_clearComponents:()=>Oi,_components:()=>qt,_getProvider:()=>an,_registerComponent:()=>Sn,_removeServiceInstance:()=>Fn,deleteApp:()=>mr,getApp:()=>nr,getApps:()=>Ln,initializeApp:()=>Jt,onLog:()=>wn,registerVersion:()=>zn,setLogLevel:()=>rr});var p=j(5861),T=j(4859),G=j(1877),De=j(2090),we=j(8766);class xe{constructor(ve){this.container=ve}getPlatformInfoString(){return this.container.getProviders().map(_e=>{if(function Me(le){return"VERSION"===le.getComponent()?.type}(_e)){const at=_e.getImmediate();return`${at.library}/${at.version}`}return null}).filter(_e=>_e).join(" ")}}const Re="@firebase/app",fe=new G.Yd("@firebase/app"),Bt="[DEFAULT]",ct={[Re]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},tn=new Map,qt=new Map;function rn(le,ve){try{le.container.addComponent(ve)}catch(_e){fe.debug(`Component ${ve.name} failed to register with FirebaseApp ${le.name}`,_e)}}function Ft(le,ve){le.container.addOrOverwriteComponent(ve)}function Sn(le){const ve=le.name;if(qt.has(ve))return fe.debug(`There were multiple attempts to register component ${ve}.`),!1;qt.set(ve,le);for(const _e of tn.values())rn(_e,le);return!0}function an(le,ve){const _e=le.container.getProvider("heartbeat").getImmediate({optional:!0});return _e&&_e.triggerHeartbeat(),le.container.getProvider(ve)}function Fn(le,ve,_e=Bt){an(le,ve).clearInstance(_e)}function Oi(){qt.clear()}const Ar=new De.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Tr{constructor(ve,_e,at){this._isDeleted=!1,this._options=Object.assign({},ve),this._config=Object.assign({},_e),this._name=_e.name,this._automaticDataCollectionEnabled=_e.automaticDataCollectionEnabled,this._container=at,this.container.addComponent(new T.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(ve){this.checkDestroyed(),this._automaticDataCollectionEnabled=ve}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(ve){this._isDeleted=ve}checkDestroyed(){if(this.isDeleted)throw Ar.create("app-deleted",{appName:this._name})}}const zr="9.9.4";function Jt(le,ve={}){"object"!=typeof ve&&(ve={name:ve});const _e=Object.assign({name:Bt,automaticDataCollectionEnabled:!1},ve),at=_e.name;if("string"!=typeof at||!at)throw Ar.create("bad-app-name",{appName:String(at)});const gt=tn.get(at);if(gt){if((0,De.vZ)(le,gt.options)&&(0,De.vZ)(_e,gt.config))return gt;throw Ar.create("duplicate-app",{appName:at})}const Vt=new T.H0(at);for(const In of qt.values())Vt.addComponent(In);const sr=new Tr(le,_e,Vt);return tn.set(at,sr),sr}function nr(le=Bt){const ve=tn.get(le);if(!ve)throw Ar.create("no-app",{appName:le});return ve}function Ln(){return Array.from(tn.values())}function mr(le){return dt.apply(this,arguments)}function dt(){return(dt=(0,p.Z)(function*(le){const ve=le.name;tn.has(ve)&&(tn.delete(ve),yield Promise.all(le.container.getProviders().map(_e=>_e.delete())),le.isDeleted=!0)})).apply(this,arguments)}function zn(le,ve,_e){var at;let gt=null!==(at=ct[le])&&void 0!==at?at:le;_e&&(gt+=`-${_e}`);const Vt=gt.match(/\s|\//),sr=ve.match(/\s|\//);if(Vt||sr){const In=[`Unable to register library "${gt}" with version "${ve}":`];return Vt&&In.push(`library name "${gt}" contains illegal characters (whitespace or "/")`),Vt&&sr&&In.push("and"),sr&&In.push(`version name "${ve}" contains illegal characters (whitespace or "/")`),void fe.warn(In.join(" "))}Sn(new T.wA(`${gt}-version`,()=>({library:gt,version:ve}),"VERSION"))}function wn(le,ve){if(null!==le&&"function"!=typeof le)throw Ar.create("invalid-log-argument");(0,G.Am)(le,ve)}function rr(le){(0,G.Ub)(le)}const Pr="firebase-heartbeat-store";let An=null;function Vn(){return An||(An=(0,we.X3)("firebase-heartbeat-database",1,{upgrade:(le,ve)=>{0===ve&&le.createObjectStore(Pr)}}).catch(le=>{throw Ar.create("idb-open",{originalErrorMessage:le.message})})),An}function $t(){return($t=(0,p.Z)(function*(le){var ve;try{return(yield Vn()).transaction(Pr).objectStore(Pr).get(ar(le))}catch(_e){if(_e instanceof De.ZR)fe.warn(_e.message);else{const at=Ar.create("idb-get",{originalErrorMessage:null===(ve=_e)||void 0===ve?void 0:ve.message});fe.warn(at.message)}}})).apply(this,arguments)}function ir(le,ve){return Jn.apply(this,arguments)}function Jn(){return(Jn=(0,p.Z)(function*(le,ve){var _e;try{const gt=(yield Vn()).transaction(Pr,"readwrite");return yield gt.objectStore(Pr).put(ve,ar(le)),gt.done}catch(at){if(at instanceof De.ZR)fe.warn(at.message);else{const gt=Ar.create("idb-set",{originalErrorMessage:null===(_e=at)||void 0===_e?void 0:_e.message});fe.warn(gt.message)}}})).apply(this,arguments)}function ar(le){return`${le.name}!${le.options.appId}`}class wi{constructor(ve){this.container=ve,this._heartbeatsCache=null;const _e=this.container.getProvider("app").getImmediate();this._storage=new Pn(_e),this._heartbeatsCachePromise=this._storage.read().then(at=>(this._heartbeatsCache=at,at))}triggerHeartbeat(){var ve=this;return(0,p.Z)(function*(){const at=ve.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),gt=Nn();if(null===ve._heartbeatsCache&&(ve._heartbeatsCache=yield ve._heartbeatsCachePromise),ve._heartbeatsCache.lastSentHeartbeatDate!==gt&&!ve._heartbeatsCache.heartbeats.some(Vt=>Vt.date===gt))return ve._heartbeatsCache.heartbeats.push({date:gt,agent:at}),ve._heartbeatsCache.heartbeats=ve._heartbeatsCache.heartbeats.filter(Vt=>{const sr=new Date(Vt.date).valueOf();return Date.now()-sr<=2592e6}),ve._storage.overwrite(ve._heartbeatsCache)})()}getHeartbeatsHeader(){var ve=this;return(0,p.Z)(function*(){if(null===ve._heartbeatsCache&&(yield ve._heartbeatsCachePromise),null===ve._heartbeatsCache||0===ve._heartbeatsCache.heartbeats.length)return"";const _e=Nn(),{heartbeatsToSend:at,unsentEntries:gt}=function Ei(le,ve=1024){const _e=[];let at=le.slice();for(const gt of le){const Vt=_e.find(sr=>sr.agent===gt.agent);if(Vt){if(Vt.dates.push(gt.date),Ie(_e)>ve){Vt.dates.pop();break}}else if(_e.push({agent:gt.agent,dates:[gt.date]}),Ie(_e)>ve){_e.pop();break}at=at.slice(1)}return{heartbeatsToSend:_e,unsentEntries:at}}(ve._heartbeatsCache.heartbeats),Vt=(0,De.L)(JSON.stringify({version:2,heartbeats:at}));return ve._heartbeatsCache.lastSentHeartbeatDate=_e,gt.length>0?(ve._heartbeatsCache.heartbeats=gt,yield ve._storage.overwrite(ve._heartbeatsCache)):(ve._heartbeatsCache.heartbeats=[],ve._storage.overwrite(ve._heartbeatsCache)),Vt})()}}function Nn(){return(new Date).toISOString().substring(0,10)}class Pn{constructor(ve){this.app=ve,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,p.Z)(function*(){return!!(0,De.hl)()&&(0,De.eu)().then(()=>!0).catch(()=>!1)})()}read(){var ve=this;return(0,p.Z)(function*(){return(yield ve._canUseIndexedDBPromise)&&(yield function Ht(le){return $t.apply(this,arguments)}(ve.app))||{heartbeats:[]}})()}overwrite(ve){var _e=this;return(0,p.Z)(function*(){var at;if(yield _e._canUseIndexedDBPromise){const Vt=yield _e.read();return ir(_e.app,{lastSentHeartbeatDate:null!==(at=ve.lastSentHeartbeatDate)&&void 0!==at?at:Vt.lastSentHeartbeatDate,heartbeats:ve.heartbeats})}})()}add(ve){var _e=this;return(0,p.Z)(function*(){var at;if(yield _e._canUseIndexedDBPromise){const Vt=yield _e.read();return ir(_e.app,{lastSentHeartbeatDate:null!==(at=ve.lastSentHeartbeatDate)&&void 0!==at?at:Vt.lastSentHeartbeatDate,heartbeats:[...Vt.heartbeats,...ve.heartbeats]})}})()}}function Ie(le){return(0,De.L)(JSON.stringify({version:2,heartbeats:le})).length}!function ie(le){Sn(new T.wA("platform-logger",ve=>new xe(ve),"PRIVATE")),Sn(new T.wA("heartbeat",ve=>new wi(ve),"PRIVATE")),zn(Re,"0.7.32",le),zn(Re,"0.7.32","esm2017"),zn("fire-js","")}("")},4859:(jt,$e,j)=>{j.d($e,{H0:()=>Re,wA:()=>G});var p=j(5861),T=j(2090);class G{constructor(fe,ue,Ee){this.name=fe,this.instanceFactory=ue,this.type=Ee,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(fe){return this.instantiationMode=fe,this}setMultipleInstances(fe){return this.multipleInstances=fe,this}setServiceProps(fe){return this.serviceProps=fe,this}setInstanceCreatedCallback(fe){return this.onInstanceCreated=fe,this}}const De="[DEFAULT]";class we{constructor(fe,ue){this.name=fe,this.container=ue,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(fe){const ue=this.normalizeInstanceIdentifier(fe);if(!this.instancesDeferred.has(ue)){const Ee=new T.BH;if(this.instancesDeferred.set(ue,Ee),this.isInitialized(ue)||this.shouldAutoInitialize())try{const mt=this.getOrInitializeService({instanceIdentifier:ue});mt&&Ee.resolve(mt)}catch{}}return this.instancesDeferred.get(ue).promise}getImmediate(fe){var ue;const Ee=this.normalizeInstanceIdentifier(fe?.identifier),mt=null!==(ue=fe?.optional)&&void 0!==ue&&ue;if(!this.isInitialized(Ee)&&!this.shouldAutoInitialize()){if(mt)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:Ee})}catch(rt){if(mt)return null;throw rt}}getComponent(){return this.component}setComponent(fe){if(fe.name!==this.name)throw Error(`Mismatching Component ${fe.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=fe,this.shouldAutoInitialize()){if(function Me(Fe){return"EAGER"===Fe.instantiationMode}(fe))try{this.getOrInitializeService({instanceIdentifier:De})}catch{}for(const[ue,Ee]of this.instancesDeferred.entries()){const mt=this.normalizeInstanceIdentifier(ue);try{const rt=this.getOrInitializeService({instanceIdentifier:mt});Ee.resolve(rt)}catch{}}}}clearInstance(fe=De){this.instancesDeferred.delete(fe),this.instancesOptions.delete(fe),this.instances.delete(fe)}delete(){var fe=this;return(0,p.Z)(function*(){const ue=Array.from(fe.instances.values());yield Promise.all([...ue.filter(Ee=>"INTERNAL"in Ee).map(Ee=>Ee.INTERNAL.delete()),...ue.filter(Ee=>"_delete"in Ee).map(Ee=>Ee._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(fe=De){return this.instances.has(fe)}getOptions(fe=De){return this.instancesOptions.get(fe)||{}}initialize(fe={}){const{options:ue={}}=fe,Ee=this.normalizeInstanceIdentifier(fe.instanceIdentifier);if(this.isInitialized(Ee))throw Error(`${this.name}(${Ee}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const mt=this.getOrInitializeService({instanceIdentifier:Ee,options:ue});for(const[rt,Ge]of this.instancesDeferred.entries())Ee===this.normalizeInstanceIdentifier(rt)&&Ge.resolve(mt);return mt}onInit(fe,ue){var Ee;const mt=this.normalizeInstanceIdentifier(ue),rt=null!==(Ee=this.onInitCallbacks.get(mt))&&void 0!==Ee?Ee:new Set;rt.add(fe),this.onInitCallbacks.set(mt,rt);const Ge=this.instances.get(mt);return Ge&&fe(Ge,mt),()=>{rt.delete(fe)}}invokeOnInitCallbacks(fe,ue){const Ee=this.onInitCallbacks.get(ue);if(Ee)for(const mt of Ee)try{mt(fe,ue)}catch{}}getOrInitializeService({instanceIdentifier:fe,options:ue={}}){let Ee=this.instances.get(fe);if(!Ee&&this.component&&(Ee=this.component.instanceFactory(this.container,{instanceIdentifier:(Fe=fe,Fe===De?void 0:Fe),options:ue}),this.instances.set(fe,Ee),this.instancesOptions.set(fe,ue),this.invokeOnInitCallbacks(Ee,fe),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,fe,Ee)}catch{}var Fe;return Ee||null}normalizeInstanceIdentifier(fe=De){return this.component?this.component.multipleInstances?fe:De:fe}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Re{constructor(fe){this.name=fe,this.providers=new Map}addComponent(fe){const ue=this.getProvider(fe.name);if(ue.isComponentSet())throw new Error(`Component ${fe.name} has already been registered with ${this.name}`);ue.setComponent(fe)}addOrOverwriteComponent(fe){this.getProvider(fe.name).isComponentSet()&&this.providers.delete(fe.name),this.addComponent(fe)}getProvider(fe){if(this.providers.has(fe))return this.providers.get(fe);const ue=new we(fe,this);return this.providers.set(fe,ue),ue}getProviders(){return Array.from(this.providers.values())}}},1877:(jt,$e,j)=>{j.d($e,{Am:()=>Fe,Ub:()=>Re,Yd:()=>Me,in:()=>T});const p=[];var T=(()=>{return(fe=T||(T={}))[fe.DEBUG=0]="DEBUG",fe[fe.VERBOSE=1]="VERBOSE",fe[fe.INFO=2]="INFO",fe[fe.WARN=3]="WARN",fe[fe.ERROR=4]="ERROR",fe[fe.SILENT=5]="SILENT",T;var fe})();const G={debug:T.DEBUG,verbose:T.VERBOSE,info:T.INFO,warn:T.WARN,error:T.ERROR,silent:T.SILENT},De=T.INFO,we={[T.DEBUG]:"log",[T.VERBOSE]:"log",[T.INFO]:"info",[T.WARN]:"warn",[T.ERROR]:"error"},xe=(fe,ue,...Ee)=>{if(ue<fe.logLevel)return;const mt=(new Date).toISOString(),rt=we[ue];if(!rt)throw new Error(`Attempted to log a message with an invalid logType (value: ${ue})`);console[rt](`[${mt}]  ${fe.name}:`,...Ee)};class Me{constructor(ue){this.name=ue,this._logLevel=De,this._logHandler=xe,this._userLogHandler=null,p.push(this)}get logLevel(){return this._logLevel}set logLevel(ue){if(!(ue in T))throw new TypeError(`Invalid value "${ue}" assigned to \`logLevel\``);this._logLevel=ue}setLogLevel(ue){this._logLevel="string"==typeof ue?G[ue]:ue}get logHandler(){return this._logHandler}set logHandler(ue){if("function"!=typeof ue)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=ue}get userLogHandler(){return this._userLogHandler}set userLogHandler(ue){this._userLogHandler=ue}debug(...ue){this._userLogHandler&&this._userLogHandler(this,T.DEBUG,...ue),this._logHandler(this,T.DEBUG,...ue)}log(...ue){this._userLogHandler&&this._userLogHandler(this,T.VERBOSE,...ue),this._logHandler(this,T.VERBOSE,...ue)}info(...ue){this._userLogHandler&&this._userLogHandler(this,T.INFO,...ue),this._logHandler(this,T.INFO,...ue)}warn(...ue){this._userLogHandler&&this._userLogHandler(this,T.WARN,...ue),this._logHandler(this,T.WARN,...ue)}error(...ue){this._userLogHandler&&this._userLogHandler(this,T.ERROR,...ue),this._logHandler(this,T.ERROR,...ue)}}function Re(fe){p.forEach(ue=>{ue.setLogLevel(fe)})}function Fe(fe,ue){for(const Ee of p){let mt=null;ue&&ue.level&&(mt=G[ue.level]),Ee.userLogHandler=null===fe?null:(rt,Ge,...kt)=>{const Ze=kt.map(ze=>{if(null==ze)return null;if("string"==typeof ze)return ze;if("number"==typeof ze||"boolean"==typeof ze)return ze.toString();if(ze instanceof Error)return ze.message;try{return JSON.stringify(ze)}catch{return null}}).filter(ze=>ze).join(" ");Ge>=(mt??rt.logLevel)&&fe({level:T[Ge].toLowerCase(),message:Ze,args:kt,type:rt.name})}}}},8766:(jt,$e,j)=>{j.d($e,{Lj:()=>he,X3:()=>xt});var p=j(5861);let G,De;const Me=new WeakMap,Re=new WeakMap,Fe=new WeakMap,fe=new WeakMap,ue=new WeakMap;let rt={get(oe,He,ne){if(oe instanceof IDBTransaction){if("done"===He)return Re.get(oe);if("objectStoreNames"===He)return oe.objectStoreNames||Fe.get(oe);if("store"===He)return ne.objectStoreNames[1]?void 0:ne.objectStore(ne.objectStoreNames[0])}return ze(oe[He])},set:(oe,He,ne)=>(oe[He]=ne,!0),has:(oe,He)=>oe instanceof IDBTransaction&&("done"===He||"store"===He)||He in oe};function Ze(oe){return"function"==typeof oe?function kt(oe){return oe!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function xe(){return De||(De=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(oe)?function(...He){return oe.apply(Pt(this),He),ze(Me.get(this))}:function(...He){return ze(oe.apply(Pt(this),He))}:function(He,...ne){const ye=oe.call(Pt(this),He,...ne);return Fe.set(ye,He.sort?He.sort():[He]),ze(ye)}}(oe):(oe instanceof IDBTransaction&&function mt(oe){if(Re.has(oe))return;const He=new Promise((ne,ye)=>{const ce=()=>{oe.removeEventListener("complete",Oe),oe.removeEventListener("error",lt),oe.removeEventListener("abort",lt)},Oe=()=>{ne(),ce()},lt=()=>{ye(oe.error||new DOMException("AbortError","AbortError")),ce()};oe.addEventListener("complete",Oe),oe.addEventListener("error",lt),oe.addEventListener("abort",lt)});Re.set(oe,He)}(oe),((oe,He)=>He.some(ne=>oe instanceof ne))(oe,function we(){return G||(G=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(oe,rt):oe)}function ze(oe){if(oe instanceof IDBRequest)return function Ee(oe){const He=new Promise((ne,ye)=>{const ce=()=>{oe.removeEventListener("success",Oe),oe.removeEventListener("error",lt)},Oe=()=>{ne(ze(oe.result)),ce()},lt=()=>{ye(oe.error),ce()};oe.addEventListener("success",Oe),oe.addEventListener("error",lt)});return He.then(ne=>{ne instanceof IDBCursor&&Me.set(ne,oe)}).catch(()=>{}),ue.set(He,oe),He}(oe);if(fe.has(oe))return fe.get(oe);const He=Ze(oe);return He!==oe&&(fe.set(oe,He),ue.set(He,oe)),He}const Pt=oe=>ue.get(oe);function xt(oe,He,{blocked:ne,upgrade:ye,blocking:ce,terminated:Oe}={}){const lt=indexedDB.open(oe,He),_t=ze(lt);return ye&&lt.addEventListener("upgradeneeded",Et=>{ye(ze(lt.result),Et.oldVersion,Et.newVersion,ze(lt.transaction))}),ne&&lt.addEventListener("blocked",()=>ne()),_t.then(Et=>{Oe&&Et.addEventListener("close",()=>Oe()),ce&&Et.addEventListener("versionchange",()=>ce())}).catch(()=>{}),_t}function he(oe,{blocked:He}={}){const ne=indexedDB.deleteDatabase(oe);return He&&ne.addEventListener("blocked",()=>He()),ze(ne).then(()=>{})}const tt=["get","getKey","getAll","getAllKeys","count"],et=["put","add","delete","clear"],yt=new Map;function Je(oe,He){if(!(oe instanceof IDBDatabase)||He in oe||"string"!=typeof He)return;if(yt.get(He))return yt.get(He);const ne=He.replace(/FromIndex$/,""),ye=He!==ne,ce=et.includes(ne);if(!(ne in(ye?IDBIndex:IDBObjectStore).prototype)||!ce&&!tt.includes(ne))return;const Oe=function(){var lt=(0,p.Z)(function*(_t,...Et){const Ot=this.transaction(_t,ce?"readwrite":"readonly");let Bt=Ot.store;return ye&&(Bt=Bt.index(Et.shift())),(yield Promise.all([Bt[ne](...Et),ce&&Ot.done]))[0]});return function(Et){return lt.apply(this,arguments)}}();return yt.set(He,Oe),Oe}!function Ge(oe){rt=oe(rt)}(oe=>({...oe,get:(He,ne,ye)=>Je(He,ne)||oe.get(He,ne,ye),has:(He,ne)=>!!Je(He,ne)||oe.has(He,ne)}))},5861:(jt,$e,j)=>{function p(G,De,we,xe,Me,Re,Fe){try{var fe=G[Re](Fe),ue=fe.value}catch(Ee){return void we(Ee)}fe.done?De(ue):Promise.resolve(ue).then(xe,Me)}function T(G){return function(){var De=this,we=arguments;return new Promise(function(xe,Me){var Re=G.apply(De,we);function Fe(ue){p(Re,xe,Me,Fe,fe,"next",ue)}function fe(ue){p(Re,xe,Me,Fe,fe,"throw",ue)}Fe(void 0)})}}j.d($e,{Z:()=>T})}},jt=>{jt(jt.s=297)}]);