"use strict";(self.webpackChunksala_juegos_2022=self.webpackChunksala_juegos_2022||[]).push([[179],{2011:(at,Ae,P)=>{P.d(Ae,{Dh:()=>he,GT:()=>de,cc:()=>Me,hO:()=>Ve,on:()=>B,pX:()=>re,xv:()=>pe});var m=P(4650),ee=P(127),O=P(5813);at=P.hmd(at);const oe=["ngOnDestroy"],re=(fe,Ye,nt,xe={})=>new Proxy(fe,{get:(_e,Ee)=>nt.runOutsideAngular(()=>{var Be;if(fe[Ee])return!(null===(Be=xe?.spy)||void 0===Be)&&Be.get&&xe.spy.get(Ee,fe[Ee]),fe[Ee];if(oe.indexOf(Ee)>-1)return()=>{};const $e=Ye.toPromise().then(U=>{const ge=U&&U[Ee];return"function"==typeof ge?ge.bind(U):ge&&ge.then?ge.then(Z=>nt.run(()=>Z)):nt.run(()=>ge)});return new Proxy(()=>{},{get:(U,ge)=>$e[ge],apply:(U,ge,Z)=>$e.then(X=>{var ie;const ne=X&&X(...Z);return!(null===(ie=xe?.spy)||void 0===ie)&&ie.apply&&xe.spy.apply(Ee,Z,ne),ne})})})}),de=(fe,Ye)=>{Ye.forEach(nt=>{Object.getOwnPropertyNames(nt.prototype||nt).forEach(xe=>{Object.defineProperty(fe.prototype,xe,Object.getOwnPropertyDescriptor(nt.prototype||nt,xe))})})};class le{constructor(Ye){return Ye}}const he=new m.OlP("angularfire2.app.options"),pe=new m.OlP("angularfire2.app.name");function B(fe,Ye,nt){const _e="object"==typeof nt&&nt||{};_e.name=_e.name||"string"==typeof nt&&nt||"[DEFAULT]";const Be=ee.Z.apps.filter($e=>$e&&$e.name===_e.name)[0]||Ye.runOutsideAngular(()=>ee.Z.initializeApp(fe,_e));try{JSON.stringify(fe)!==JSON.stringify(Be.options)&&$("error",`${Be.name} Firebase App already initialized with different options${at.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new le(Be)}const $=(fe,...Ye)=>{(0,m.X6Q)()&&typeof console<"u"&&console[fe](...Ye)},Y={provide:le,useFactory:B,deps:[he,m.R0b,[new m.FiY,pe]]};let Ve=(()=>{class fe{constructor(nt){ee.Z.registerVersion("angularfire",O.q4.full,"core"),ee.Z.registerVersion("angularfire",O.q4.full,"app-compat"),ee.Z.registerVersion("angular",m.q4F.full,nt.toString())}static initializeApp(nt,xe){return{ngModule:fe,providers:[{provide:he,useValue:nt},{provide:pe,useValue:xe}]}}}return fe.\u0275fac=function(nt){return new(nt||fe)(m.LFG(m.Lbi))},fe.\u0275mod=m.oAB({type:fe}),fe.\u0275inj=m.cJS({providers:[Y]}),fe})();function Me(fe,Ye,nt,xe,_e){const[,Ee,Be]=globalThis.\u0275AngularfireInstanceCache.find($e=>$e[0]===fe)||[];if(Ee)return function ve(fe,Ye){try{return fe.toString()===Ye.toString()}catch{return fe===Ye}}(_e,Be)||(me("error",`${Ye} was already initialized on the ${nt} Firebase App with different settings.${Je?" You may need to reload as Firebase is not HMR aware.":""}`),me("warn",{is:_e,was:Be})),Ee;{const $e=xe();return globalThis.\u0275AngularfireInstanceCache.push([fe,$e,_e]),$e}}const Je=!!at.hot,me=(fe,...Ye)=>{(0,m.X6Q)()&&typeof console<"u"&&console[fe](...Ye)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5813:(at,Ae,P)=>{P.d(Ae,{q4:()=>Mr,iC:()=>es,fc:()=>jl,HU:()=>Tu,vb:()=>qr,JM:()=>Ea});var m=P(4650),ee=P(5867),O=P(5861),oe=P(9681),re=P(2090),de=P(4859),le=P(1877),he=P(8766);const pe="@firebase/installations",B="0.5.12",Y=`w:${B}`,Ve="FIS_v2",Ye=new re.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function nt(D){return D instanceof re.ZR&&D.code.includes("request-failed")}function xe({projectId:D}){return`https://firebaseinstallations.googleapis.com/v1/projects/${D}/installations`}function _e(D){return{token:D.token,requestStatus:2,expiresIn:X(D.expiresIn),creationTime:Date.now()}}function Ee(D,C){return Be.apply(this,arguments)}function Be(){return(Be=(0,O.Z)(function*(D,C){const F=(yield C.json()).error;return Ye.create("request-failed",{requestName:D,serverCode:F.code,serverMessage:F.message,serverStatus:F.status})})).apply(this,arguments)}function $e({apiKey:D}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":D})}function U(D,{refreshToken:C}){const x=$e(D);return x.append("Authorization",function ie(D){return`${Ve} ${D}`}(C)),x}function ge(D){return Z.apply(this,arguments)}function Z(){return(Z=(0,O.Z)(function*(D){const C=yield D();return C.status>=500&&C.status<600?D():C})).apply(this,arguments)}function X(D){return Number(D.replace("s","000"))}function ne(D,C){return Pe.apply(this,arguments)}function Pe(){return(Pe=(0,O.Z)(function*({appConfig:D,heartbeatServiceProvider:C},{fid:x}){const F=xe(D),J=$e(D),ae=C.getImmediate({optional:!0});if(ae){const yt=yield ae.getHeartbeatsHeader();yt&&J.append("x-firebase-client",yt)}const je={method:"POST",headers:J,body:JSON.stringify({fid:x,authVersion:Ve,appId:D.appId,sdkVersion:Y})},ut=yield ge(()=>fetch(F,je));if(ut.ok){const yt=yield ut.json();return{fid:yt.fid||x,registrationStatus:2,refreshToken:yt.refreshToken,authToken:_e(yt.authToken)}}throw yield Ee("Create Installation",ut)})).apply(this,arguments)}function ke(D){return new Promise(C=>{setTimeout(C,D)})}const $t=/^[cdef][\w-]{21}$/;function qe(){try{const D=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(D),D[0]=112+D[0]%16;const x=function tn(D){return function dt(D){return btoa(String.fromCharCode(...D)).replace(/\+/g,"-").replace(/\//g,"_")}(D).substr(0,22)}(D);return $t.test(x)?x:""}catch{return""}}function Tn(D){return`${D.appName}!${D.appId}`}const qt=new Map;function Wt(D,C){const x=Tn(D);Xt(x,C),function Yo(D,C){const x=function pr(){return!Vr&&"BroadcastChannel"in self&&(Vr=new BroadcastChannel("[Firebase] FID Change"),Vr.onmessage=D=>{Xt(D.data.key,D.data.fid)}),Vr}();x&&x.postMessage({key:D,fid:C}),function Ur(){0===qt.size&&Vr&&(Vr.close(),Vr=null)}()}(x,C)}function Xt(D,C){const x=qt.get(D);if(x)for(const F of x)F(C)}let Vr=null;const Br="firebase-installations-store";let hi=null;function _o(){return hi||(hi=(0,he.X3)("firebase-installations-database",1,{upgrade:(D,C)=>{0===C&&D.createObjectStore(Br)}})),hi}function Ke(D,C){return jr.apply(this,arguments)}function jr(){return(jr=(0,O.Z)(function*(D,C){const x=Tn(D),J=(yield _o()).transaction(Br,"readwrite"),ae=J.objectStore(Br),De=yield ae.get(x);return yield ae.put(C,x),yield J.done,(!De||De.fid!==C.fid)&&Wt(D,C.fid),C})).apply(this,arguments)}function ji(D){return Sn.apply(this,arguments)}function Sn(){return(Sn=(0,O.Z)(function*(D){const C=Tn(D),F=(yield _o()).transaction(Br,"readwrite");yield F.objectStore(Br).delete(C),yield F.done})).apply(this,arguments)}function fi(D,C){return ri.apply(this,arguments)}function ri(){return(ri=(0,O.Z)(function*(D,C){const x=Tn(D),J=(yield _o()).transaction(Br,"readwrite"),ae=J.objectStore(Br),De=yield ae.get(x),je=C(De);return void 0===je?yield ae.delete(x):yield ae.put(je,x),yield J.done,je&&(!De||De.fid!==je.fid)&&Wt(D,je.fid),je})).apply(this,arguments)}function An(D){return jn.apply(this,arguments)}function jn(){return(jn=(0,O.Z)(function*(D){let C;const x=yield fi(D.appConfig,F=>{const J=dn(F),ae=ft(D,J);return C=ae.registrationPromise,ae.installationEntry});return""===x.fid?{installationEntry:yield C}:{installationEntry:x,registrationPromise:C}})).apply(this,arguments)}function dn(D){return Et(D||{fid:qe(),registrationStatus:0})}function ft(D,C){if(0===C.registrationStatus){if(!navigator.onLine)return{installationEntry:C,registrationPromise:Promise.reject(Ye.create("app-offline"))};const x={fid:C.fid,registrationStatus:1,registrationTime:Date.now()},F=function st(D,C){return nn.apply(this,arguments)}(D,x);return{installationEntry:x,registrationPromise:F}}return 1===C.registrationStatus?{installationEntry:C,registrationPromise:Qn(D)}:{installationEntry:C}}function nn(){return(nn=(0,O.Z)(function*(D,C){try{const x=yield ne(D,C);return Ke(D.appConfig,x)}catch(x){throw nt(x)&&409===x.customData.serverCode?yield ji(D.appConfig):yield Ke(D.appConfig,{fid:C.fid,registrationStatus:0}),x}})).apply(this,arguments)}function Qn(D){return Jn.apply(this,arguments)}function Jn(){return(Jn=(0,O.Z)(function*(D){let C=yield Tr(D.appConfig);for(;1===C.registrationStatus;)yield ke(100),C=yield Tr(D.appConfig);if(0===C.registrationStatus){const{installationEntry:x,registrationPromise:F}=yield An(D);return F||x}return C})).apply(this,arguments)}function Tr(D){return fi(D,C=>{if(!C)throw Ye.create("installation-not-found");return Et(C)})}function Et(D){return function $i(D){return 1===D.registrationStatus&&D.registrationTime+1e4<Date.now()}(D)?{fid:D.fid,registrationStatus:0}:D}function Kt(D,C){return pi.apply(this,arguments)}function pi(){return(pi=(0,O.Z)(function*({appConfig:D,heartbeatServiceProvider:C},x){const F=Gt(D,x),J=U(D,x),ae=C.getImmediate({optional:!0});if(ae){const yt=yield ae.getHeartbeatsHeader();yt&&J.append("x-firebase-client",yt)}const je={method:"POST",headers:J,body:JSON.stringify({installation:{sdkVersion:Y,appId:D.appId}})},ut=yield ge(()=>fetch(F,je));if(ut.ok)return _e(yield ut.json());throw yield Ee("Generate Auth Token",ut)})).apply(this,arguments)}function Gt(D,{fid:C}){return`${xe(D)}/${C}/authTokens:generate`}function K(D){return j.apply(this,arguments)}function j(){return(j=(0,O.Z)(function*(D,C=!1){let x;const F=yield fi(D.appConfig,ae=>{if(!rt(ae))throw Ye.create("not-registered");const De=ae.authToken;if(!C&&sn(De))return ae;if(1===De.requestStatus)return x=V(D,C),ae;{if(!navigator.onLine)throw Ye.create("app-offline");const je=$n(ae);return x=be(D,je),je}});return x?yield x:F.authToken})).apply(this,arguments)}function V(D,C){return H.apply(this,arguments)}function H(){return(H=(0,O.Z)(function*(D,C){let x=yield q(D.appConfig);for(;1===x.authToken.requestStatus;)yield ke(100),x=yield q(D.appConfig);const F=x.authToken;return 0===F.requestStatus?K(D,C):F})).apply(this,arguments)}function q(D){return fi(D,C=>{if(!rt(C))throw Ye.create("not-registered");return function Pt(D){return 1===D.requestStatus&&D.requestTime+1e4<Date.now()}(C.authToken)?Object.assign(Object.assign({},C),{authToken:{requestStatus:0}}):C})}function be(D,C){return Ue.apply(this,arguments)}function Ue(){return(Ue=(0,O.Z)(function*(D,C){try{const x=yield Kt(D,C),F=Object.assign(Object.assign({},C),{authToken:x});return yield Ke(D.appConfig,F),x}catch(x){if(!nt(x)||401!==x.customData.serverCode&&404!==x.customData.serverCode){const F=Object.assign(Object.assign({},C),{authToken:{requestStatus:0}});yield Ke(D.appConfig,F)}else yield ji(D.appConfig);throw x}})).apply(this,arguments)}function rt(D){return void 0!==D&&2===D.registrationStatus}function sn(D){return 2===D.requestStatus&&!function Zt(D){const C=Date.now();return C<D.creationTime||D.creationTime+D.expiresIn<C+36e5}(D)}function $n(D){const C={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},D),{authToken:C})}function fn(){return(fn=(0,O.Z)(function*(D){const C=D,{installationEntry:x,registrationPromise:F}=yield An(C);return F?F.catch(console.error):K(C).catch(console.error),x.fid})).apply(this,arguments)}function Ti(){return(Ti=(0,O.Z)(function*(D,C=!1){const x=D;return yield Sr(x),(yield K(x,C)).token})).apply(this,arguments)}function Sr(D){return Nn.apply(this,arguments)}function Nn(){return(Nn=(0,O.Z)(function*(D){const{registrationPromise:C}=yield An(D);C&&(yield C)})).apply(this,arguments)}function ws(D){return Ye.create("missing-app-config-values",{valueName:D})}const qs="installations",gn=D=>{const C=D.getProvider("app").getImmediate(),x=function pn(D){if(!D||!D.options)throw ws("App Configuration");if(!D.name)throw ws("App Name");const C=["projectId","apiKey","appId"];for(const x of C)if(!D.options[x])throw ws(x);return{appName:D.name,projectId:D.options.projectId,apiKey:D.options.apiKey,appId:D.options.appId}}(C);return{app:C,appConfig:x,heartbeatServiceProvider:(0,oe._getProvider)(C,"heartbeat"),_delete:()=>Promise.resolve()}},Ws=D=>{const C=D.getProvider("app").getImmediate(),x=(0,oe._getProvider)(C,qs).getImmediate();return{getId:()=>function Mt(D){return fn.apply(this,arguments)}(x),getToken:J=>function Rn(D){return Ti.apply(this,arguments)}(x,J)}};(function ll(){(0,oe._registerComponent)(new de.wA(qs,gn,"PUBLIC")),(0,oe._registerComponent)(new de.wA("installations-internal",Ws,"PRIVATE"))})(),(0,oe.registerVersion)(pe,B),(0,oe.registerVersion)(pe,B,"esm2017");const Si="@firebase/remote-config",kn=new re.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Th{constructor(C,x,F,J){this.client=C,this.storage=x,this.storageCache=F,this.logger=J}isCachedDataFresh(C,x){if(!x)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const F=Date.now()-x,J=F<=C;return this.logger.debug(`Config fetch cache check. Cache age millis: ${F}. Cache max age millis (minimumFetchIntervalMillis setting): ${C}. Is cache hit: ${J}.`),J}fetch(C){var x=this;return(0,O.Z)(function*(){const[F,J]=yield Promise.all([x.storage.getLastSuccessfulFetchTimestampMillis(),x.storage.getLastSuccessfulFetchResponse()]);if(J&&x.isCachedDataFresh(C.cacheMaxAgeMillis,F))return J;C.eTag=J&&J.eTag;const ae=yield x.client.fetch(C),De=[x.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===ae.status&&De.push(x.storage.setLastSuccessfulFetchResponse(ae)),yield Promise.all(De),ae})()}}function pl(D=navigator){return D.languages&&D.languages[0]||D.language}class gl{constructor(C,x,F,J,ae,De){this.firebaseInstallations=C,this.sdkVersion=x,this.namespace=F,this.projectId=J,this.apiKey=ae,this.appId=De}fetch(C){var x=this;return(0,O.Z)(function*(){var F,J,ae;const[De,je]=yield Promise.all([x.firebaseInstallations.getId(),x.firebaseInstallations.getToken()]),yt=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${x.projectId}/namespaces/${x.namespace}:fetch?key=${x.apiKey}`,St={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":C.eTag||"*"},ht={sdk_version:x.sdkVersion,app_instance_id:De,app_instance_id_token:je,app_id:x.appId,language_code:pl()},mn={method:"POST",headers:St,body:JSON.stringify(ht)},nr=fetch(yt,mn),Ns=new Promise((Wr,ks)=>{C.signal.addEventListener(()=>{const Lh=new Error("The operation was aborted.");Lh.name="AbortError",ks(Lh)})});let ts;try{yield Promise.race([nr,Ns]),ts=yield nr}catch(Wr){let ks="fetch-client-network";throw"AbortError"===(null===(F=Wr)||void 0===F?void 0:F.name)&&(ks="fetch-timeout"),kn.create(ks,{originalErrorMessage:null===(J=Wr)||void 0===J?void 0:J.message})}let Os=ts.status;const co=ts.headers.get("ETag")||void 0;let ns,bn;if(200===ts.status){let Wr;try{Wr=yield ts.json()}catch(ks){throw kn.create("fetch-client-parse",{originalErrorMessage:null===(ae=ks)||void 0===ae?void 0:ae.message})}ns=Wr.entries,bn=Wr.state}if("INSTANCE_STATE_UNSPECIFIED"===bn?Os=500:"NO_CHANGE"===bn?Os=304:("NO_TEMPLATE"===bn||"EMPTY_CONFIG"===bn)&&(ns={}),304!==Os&&200!==Os)throw kn.create("fetch-status",{httpStatus:Os});return{status:Os,eTag:co,config:ns}})()}}class Vp{constructor(C,x){this.client=C,this.storage=x}fetch(C){var x=this;return(0,O.Z)(function*(){const F=(yield x.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return x.attemptFetch(C,F)})()}attemptFetch(C,{throttleEndTimeMillis:x,backoffCount:F}){var J=this;return(0,O.Z)(function*(){yield function Gn(D,C){return new Promise((x,F)=>{const J=Math.max(C-Date.now(),0),ae=setTimeout(x,J);D.addEventListener(()=>{clearTimeout(ae),F(kn.create("fetch-throttle",{throttleEndTimeMillis:C}))})})}(C.signal,x);try{const ae=yield J.client.fetch(C);return yield J.storage.deleteThrottleMetadata(),ae}catch(ae){if(!function Hc(D){if(!(D instanceof re.ZR&&D.customData))return!1;const C=Number(D.customData.httpStatus);return 429===C||500===C||503===C||504===C}(ae))throw ae;const De={throttleEndTimeMillis:Date.now()+(0,re.$s)(F),backoffCount:F+1};return yield J.storage.setThrottleMetadata(De),J.attemptFetch(C,De)}})()}}class Gc{constructor(C,x,F,J,ae){this.app=C,this._client=x,this._storageCache=F,this._storage=J,this._logger=ae,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function ml(D,C){var x;const F=D.target.error||void 0;return kn.create(C,{originalErrorMessage:F&&(null===(x=F)||void 0===x?void 0:x.message)})}const Ds="app_namespace_store";class $p{constructor(C,x,F,J=function jp(){return new Promise((D,C)=>{var x;try{const F=indexedDB.open("firebase_remote_config",1);F.onerror=J=>{C(ml(J,"storage-open"))},F.onsuccess=J=>{D(J.target.result)},F.onupgradeneeded=J=>{0===J.oldVersion&&J.target.result.createObjectStore(Ds,{keyPath:"compositeKey"})}}catch(F){C(kn.create("storage-open",{originalErrorMessage:null===(x=F)||void 0===x?void 0:x.message}))}})}()){this.appId=C,this.appName=x,this.namespace=F,this.openDbPromise=J}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(C){return this.set("last_fetch_status",C)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(C){return this.set("last_successful_fetch_timestamp_millis",C)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(C){return this.set("last_successful_fetch_response",C)}getActiveConfig(){return this.get("active_config")}setActiveConfig(C){return this.set("active_config",C)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(C){return this.set("active_config_etag",C)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(C){return this.set("throttle_metadata",C)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(C){var x=this;return(0,O.Z)(function*(){const F=yield x.openDbPromise;return new Promise((J,ae)=>{var De;const ut=F.transaction([Ds],"readonly").objectStore(Ds),yt=x.createCompositeKey(C);try{const St=ut.get(yt);St.onerror=ht=>{ae(ml(ht,"storage-get"))},St.onsuccess=ht=>{const mn=ht.target.result;J(mn?mn.value:void 0)}}catch(St){ae(kn.create("storage-get",{originalErrorMessage:null===(De=St)||void 0===De?void 0:De.message}))}})})()}set(C,x){var F=this;return(0,O.Z)(function*(){const J=yield F.openDbPromise;return new Promise((ae,De)=>{var je;const yt=J.transaction([Ds],"readwrite").objectStore(Ds),St=F.createCompositeKey(C);try{const ht=yt.put({compositeKey:St,value:x});ht.onerror=mn=>{De(ml(mn,"storage-set"))},ht.onsuccess=()=>{ae()}}catch(ht){De(kn.create("storage-set",{originalErrorMessage:null===(je=ht)||void 0===je?void 0:je.message}))}})})()}delete(C){var x=this;return(0,O.Z)(function*(){const F=yield x.openDbPromise;return new Promise((J,ae)=>{var De;const ut=F.transaction([Ds],"readwrite").objectStore(Ds),yt=x.createCompositeKey(C);try{const St=ut.delete(yt);St.onerror=ht=>{ae(ml(ht,"storage-delete"))},St.onsuccess=()=>{J()}}catch(St){ae(kn.create("storage-delete",{originalErrorMessage:null===(De=St)||void 0===De?void 0:De.message}))}})})()}createCompositeKey(C){return[this.appId,this.appName,this.namespace,C].join()}}class qc{constructor(C){this.storage=C}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var C=this;return(0,O.Z)(function*(){const x=C.storage.getLastFetchStatus(),F=C.storage.getLastSuccessfulFetchTimestampMillis(),J=C.storage.getActiveConfig(),ae=yield x;ae&&(C.lastFetchStatus=ae);const De=yield F;De&&(C.lastSuccessfulFetchTimestampMillis=De);const je=yield J;je&&(C.activeConfig=je)})()}setLastFetchStatus(C){return this.lastFetchStatus=C,this.storage.setLastFetchStatus(C)}setLastSuccessfulFetchTimestampMillis(C){return this.lastSuccessfulFetchTimestampMillis=C,this.storage.setLastSuccessfulFetchTimestampMillis(C)}setActiveConfig(C){return this.activeConfig=C,this.storage.setActiveConfig(C)}}function Qa(){return Sh.apply(this,arguments)}function Sh(){return(Sh=(0,O.Z)(function*(){if(!(0,re.hl)())return!1;try{return yield(0,re.eu)()}catch{return!1}})).apply(this,arguments)}!function Cs(){(0,oe._registerComponent)(new de.wA("remote-config",function D(C,{instanceIdentifier:x}){const F=C.getProvider("app").getImmediate(),J=C.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw kn.create("registration-window");if(!(0,re.hl)())throw kn.create("indexed-db-unavailable");const{projectId:ae,apiKey:De,appId:je}=F.options;if(!ae)throw kn.create("registration-project-id");if(!De)throw kn.create("registration-api-key");if(!je)throw kn.create("registration-app-id");const ut=new $p(je,F.name,x=x||"firebase"),yt=new qc(ut),St=new le.Yd(Si);St.logLevel=le.in.ERROR;const ht=new gl(J,oe.SDK_VERSION,x,ae,De,je),mn=new Vp(ht,ut),nr=new Th(mn,ut,yt,St),Ns=new Gc(F,nr,yt,ut,St);return function ur(D){const C=(0,re.m9)(D);C._initializePromise||(C._initializePromise=C._storageCache.loadFromStorage().then(()=>{C._isInitializationComplete=!0}))}(Ns),Ns},"PUBLIC").setMultipleInstances(!0)),(0,oe.registerVersion)(Si,"0.3.11"),(0,oe.registerVersion)(Si,"0.3.11","esm2017")}();const Ai="/firebase-messaging-sw.js",Gi="/firebase-cloud-messaging-push-scope",zi="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",ea="google.c.a.c_id",Ja="google.c.a.c_l",yl="google.c.a.ts",Ah="google.c.a.e";var qi=(()=>{return(D=qi||(qi={})).PUSH_RECEIVED="push-received",D.NOTIFICATION_CLICKED="notification-clicked",qi;var D})();function si(D){const C=new Uint8Array(D);return btoa(String.fromCharCode(...C)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function $r(D){const x=(D+"=".repeat((4-D.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),F=atob(x),J=new Uint8Array(F.length);for(let ae=0;ae<F.length;++ae)J[ae]=F.charCodeAt(ae);return J}const wo="fcm_token_details_db",lr="fcm_token_object_Store";function xh(D){return Mh.apply(this,arguments)}function Mh(){return Mh=(0,O.Z)(function*(D){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(ae=>ae.name).includes(wo))return null;let C=null;return(yield(0,he.X3)(wo,5,{upgrade:(F=(0,O.Z)(function*(J,ae,De,je){var ut;if(ae<2||!J.objectStoreNames.contains(lr))return;const yt=je.objectStore(lr),St=yield yt.index("fcmSenderId").get(D);if(yield yt.clear(),St)if(2===ae){const ht=St;if(!ht.auth||!ht.p256dh||!ht.endpoint)return;C={token:ht.fcmToken,createTime:null!==(ut=ht.createTime)&&void 0!==ut?ut:Date.now(),subscriptionOptions:{auth:ht.auth,p256dh:ht.p256dh,endpoint:ht.endpoint,swScope:ht.swScope,vapidKey:"string"==typeof ht.vapidKey?ht.vapidKey:si(ht.vapidKey)}}}else if(3===ae){const ht=St;C={token:ht.fcmToken,createTime:ht.createTime,subscriptionOptions:{auth:si(ht.auth),p256dh:si(ht.p256dh),endpoint:ht.endpoint,swScope:ht.swScope,vapidKey:si(ht.vapidKey)}}}else if(4===ae){const ht=St;C={token:ht.fcmToken,createTime:ht.createTime,subscriptionOptions:{auth:si(ht.auth),p256dh:si(ht.p256dh),endpoint:ht.endpoint,swScope:ht.swScope,vapidKey:si(ht.vapidKey)}}}}),function(ae,De,je,ut){return F.apply(this,arguments)})})).close(),yield(0,he.Lj)(wo),yield(0,he.Lj)("fcm_vapid_details_db"),yield(0,he.Lj)("undefined"),_n(C)?C:null;var F}),Mh.apply(this,arguments)}function _n(D){if(!D||!D.subscriptionOptions)return!1;const{subscriptionOptions:C}=D;return"number"==typeof D.createTime&&D.createTime>0&&"string"==typeof D.token&&D.token.length>0&&"string"==typeof C.auth&&C.auth.length>0&&"string"==typeof C.p256dh&&C.p256dh.length>0&&"string"==typeof C.endpoint&&C.endpoint.length>0&&"string"==typeof C.swScope&&C.swScope.length>0&&"string"==typeof C.vapidKey&&C.vapidKey.length>0}const oi="firebase-messaging-store";let xr=null;function eu(){return xr||(xr=(0,he.X3)("firebase-messaging-database",1,{upgrade:(D,C)=>{0===C&&D.createObjectStore(oi)}})),xr}function Ys(D){return Wi.apply(this,arguments)}function Wi(){return(Wi=(0,O.Z)(function*(D){const C=yi(D),F=yield(yield eu()).transaction(oi).objectStore(oi).get(C);if(F)return F;{const J=yield xh(D.appConfig.senderId);if(J)return yield jt(D,J),J}})).apply(this,arguments)}function jt(D,C){return na.apply(this,arguments)}function na(){return(na=(0,O.Z)(function*(D,C){const x=yi(D),J=(yield eu()).transaction(oi,"readwrite");return yield J.objectStore(oi).put(C,x),yield J.done,C})).apply(this,arguments)}function Qs(D){return tu.apply(this,arguments)}function tu(){return(tu=(0,O.Z)(function*(D){const C=yi(D),F=(yield eu()).transaction(oi,"readwrite");yield F.objectStore(oi).delete(C),yield F.done})).apply(this,arguments)}function yi({appConfig:D}){return D.appId}const yn=new re.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function It(D,C){return ru.apply(this,arguments)}function ru(){return(ru=(0,O.Z)(function*(D,C){var x;const F=yield vl(D),J=Te(C),ae={method:"POST",headers:F,body:JSON.stringify(J)};let De;try{De=yield(yield fetch(Ki(D.appConfig),ae)).json()}catch(je){throw yn.create("token-subscribe-failed",{errorInfo:null===(x=je)||void 0===x?void 0:x.toString()})}if(De.error)throw yn.create("token-subscribe-failed",{errorInfo:De.error.message});if(!De.token)throw yn.create("token-subscribe-no-token");return De.token})).apply(this,arguments)}function Nh(D,C){return iu.apply(this,arguments)}function iu(){return(iu=(0,O.Z)(function*(D,C){var x;const F=yield vl(D),J=Te(C.subscriptionOptions),ae={method:"PATCH",headers:F,body:JSON.stringify(J)};let De;try{De=yield(yield fetch(`${Ki(D.appConfig)}/${C.token}`,ae)).json()}catch(je){throw yn.create("token-update-failed",{errorInfo:null===(x=je)||void 0===x?void 0:x.toString()})}if(De.error)throw yn.create("token-update-failed",{errorInfo:De.error.message});if(!De.token)throw yn.create("token-update-no-token");return De.token})).apply(this,arguments)}function su(D,C){return _l.apply(this,arguments)}function _l(){return(_l=(0,O.Z)(function*(D,C){var x;const J={method:"DELETE",headers:yield vl(D)};try{const De=yield(yield fetch(`${Ki(D.appConfig)}/${C}`,J)).json();if(De.error)throw yn.create("token-unsubscribe-failed",{errorInfo:De.error.message})}catch(ae){throw yn.create("token-unsubscribe-failed",{errorInfo:null===(x=ae)||void 0===x?void 0:x.toString()})}})).apply(this,arguments)}function Ki({projectId:D}){return`https://fcmregistrations.googleapis.com/v1/projects/${D}/registrations`}function vl(D){return ra.apply(this,arguments)}function ra(){return(ra=(0,O.Z)(function*({appConfig:D,installations:C}){const x=yield C.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":D.apiKey,"x-goog-firebase-installations-auth":`FIS ${x}`})})).apply(this,arguments)}function Te({p256dh:D,auth:C,endpoint:x,vapidKey:F}){const J={web:{endpoint:x,auth:C,p256dh:D}};return F!==zi&&(J.web.applicationPubKey=F),J}const Ft=6048e5;function wl(D){return El.apply(this,arguments)}function El(){return(El=(0,O.Z)(function*(D){const C=yield Il(D.swRegistration,D.vapidKey),x={vapidKey:D.vapidKey,swScope:D.swRegistration.scope,endpoint:C.endpoint,auth:si(C.getKey("auth")),p256dh:si(C.getKey("p256dh"))},F=yield Ys(D.firebaseDependencies);if(F){if(Yc(F.subscriptionOptions,x))return Date.now()>=F.createTime+Ft?Eo(D,{token:F.token,createTime:Date.now(),subscriptionOptions:x}):F.token;try{yield su(D.firebaseDependencies,F.token)}catch(J){console.warn(J)}return ia(D.firebaseDependencies,x)}return ia(D.firebaseDependencies,x)})).apply(this,arguments)}function vn(D){return ou.apply(this,arguments)}function ou(){return(ou=(0,O.Z)(function*(D){const C=yield Ys(D.firebaseDependencies);C&&(yield su(D.firebaseDependencies,C.token),yield Qs(D.firebaseDependencies));const x=yield D.swRegistration.pushManager.getSubscription();return!x||x.unsubscribe()})).apply(this,arguments)}function Eo(D,C){return ai.apply(this,arguments)}function ai(){return(ai=(0,O.Z)(function*(D,C){try{const x=yield Nh(D.firebaseDependencies,C),F=Object.assign(Object.assign({},C),{token:x,createTime:Date.now()});return yield jt(D.firebaseDependencies,F),x}catch(x){throw yield vn(D),x}})).apply(this,arguments)}function ia(D,C){return sa.apply(this,arguments)}function sa(){return(sa=(0,O.Z)(function*(D,C){const F={token:yield It(D,C),createTime:Date.now(),subscriptionOptions:C};return yield jt(D,F),F.token})).apply(this,arguments)}function Il(D,C){return bl.apply(this,arguments)}function bl(){return(bl=(0,O.Z)(function*(D,C){return(yield D.pushManager.getSubscription())||D.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:$r(C)})})).apply(this,arguments)}function Yc(D,C){return C.vapidKey===D.vapidKey&&C.endpoint===D.endpoint&&C.auth===D.auth&&C.p256dh===D.p256dh}function Js(D){const C={from:D.from,collapseKey:D.collapse_key,messageId:D.fcmMessageId};return function wn(D,C){if(!C.notification)return;D.notification={};const x=C.notification.title;x&&(D.notification.title=x);const F=C.notification.body;F&&(D.notification.body=F);const J=C.notification.image;J&&(D.notification.image=J)}(C,D),function xi(D,C){!C.data||(D.data=C.data)}(C,D),function Dl(D,C){var x,F,J,ae,De;if(!(C.fcmOptions||null!==(x=C.notification)&&void 0!==x&&x.click_action))return;D.fcmOptions={};const je=null!==(J=null===(F=C.fcmOptions)||void 0===F?void 0:F.link)&&void 0!==J?J:null===(ae=C.notification)||void 0===ae?void 0:ae.click_action;je&&(D.fcmOptions.link=je);const ut=null===(De=C.fcmOptions)||void 0===De?void 0:De.analytics_label;ut&&(D.fcmOptions.analyticsLabel=ut)}(C,D),C}function Xs(D){return"object"==typeof D&&!!D&&ea in D}function Zi(D,C){const x=[];for(let F=0;F<D.length;F++)x.push(D.charAt(F)),F<C.length&&x.push(C.charAt(F));return x.join("")}function oa(D){return yn.create("missing-app-config-values",{valueName:D})}Zi("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Zi("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Gp{constructor(C,x,F){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const J=function Hp(D){if(!D||!D.options)throw oa("App Configuration Object");if(!D.name)throw oa("App Name");const C=["projectId","apiKey","appId","messagingSenderId"],{options:x}=D;for(const F of C)if(!x[F])throw oa(F);return{appName:D.name,projectId:x.projectId,apiKey:x.apiKey,appId:x.appId,senderId:x.messagingSenderId}}(C);this.firebaseDependencies={app:C,appConfig:J,installations:x,analyticsProvider:F}}_delete(){return Promise.resolve()}}function Cl(D){return au.apply(this,arguments)}function au(){return(au=(0,O.Z)(function*(D){var C;try{D.swRegistration=yield navigator.serviceWorker.register(Ai,{scope:Gi}),D.swRegistration.update().catch(()=>{})}catch(x){throw yn.create("failed-service-worker-registration",{browserErrorMessage:null===(C=x)||void 0===C?void 0:C.message})}})).apply(this,arguments)}function aa(D,C){return Tl.apply(this,arguments)}function Tl(){return(Tl=(0,O.Z)(function*(D,C){if(!C&&!D.swRegistration&&(yield Cl(D)),C||!D.swRegistration){if(!(C instanceof ServiceWorkerRegistration))throw yn.create("invalid-sw-registration");D.swRegistration=C}})).apply(this,arguments)}function ua(D,C){return Sl.apply(this,arguments)}function Sl(){return(Sl=(0,O.Z)(function*(D,C){C?D.vapidKey=C:D.vapidKey||(D.vapidKey=zi)})).apply(this,arguments)}function lu(){return(lu=(0,O.Z)(function*(D,C){if(!navigator)throw yn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw yn.create("permission-blocked");return yield ua(D,C?.vapidKey),yield aa(D,C?.serviceWorkerRegistration),wl(D)})).apply(this,arguments)}function Al(D,C,x){return xl.apply(this,arguments)}function xl(){return(xl=(0,O.Z)(function*(D,C,x){const F=Ml(C);(yield D.firebaseDependencies.analyticsProvider.get()).logEvent(F,{message_id:x[ea],message_name:x[Ja],message_time:x[yl],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Ml(D){switch(D){case qi.NOTIFICATION_CLICKED:return"notification_open";case qi.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function eo(){return(eo=(0,O.Z)(function*(D,C){const x=C.data;if(!x.isFirebaseMessaging)return;D.onMessageHandler&&x.messageType===qi.PUSH_RECEIVED&&("function"==typeof D.onMessageHandler?D.onMessageHandler(Js(x)):D.onMessageHandler.next(Js(x)));const F=x.data;Xs(F)&&"1"===F[Ah]&&(yield Al(D,x.messageType,F))})).apply(this,arguments)}const to="@firebase/messaging",zn=D=>{const C=new Gp(D.getProvider("app").getImmediate(),D.getProvider("installations-internal").getImmediate(),D.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",x=>function Qc(D,C){return eo.apply(this,arguments)}(C,x)),C},Hr=D=>{const C=D.getProvider("messaging").getImmediate();return{getToken:F=>function uu(D,C){return lu.apply(this,arguments)}(C,F)}};function Jc(){return Rl.apply(this,arguments)}function Rl(){return(Rl=(0,O.Z)(function*(){try{yield(0,re.eu)()}catch{return!1}return typeof window<"u"&&(0,re.hl)()&&(0,re.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function hn(){(0,oe._registerComponent)(new de.wA("messaging",zn,"PUBLIC")),(0,oe._registerComponent)(new de.wA("messaging-internal",Hr,"PRIVATE")),(0,oe.registerVersion)(to,"0.9.16"),(0,oe.registerVersion)(to,"0.9.16","esm2017")}();const Do="analytics",td="firebase_id",no="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",hu="https://www.googletagmanager.com/gtag/js",En=new le.Yd("@firebase/analytics");function fu(D){return Promise.all(D.map(C=>C.catch(x=>x)))}function pu(D,C){const x=document.createElement("script");x.src=`${hu}?l=${D}&id=${C}`,x.async=!0,document.head.appendChild(x)}function kh(D,C,x,F,J,ae){return Co.apply(this,arguments)}function Co(){return(Co=(0,O.Z)(function*(D,C,x,F,J,ae){const De=F[J];try{if(De)yield C[De];else{const ut=(yield fu(x)).find(yt=>yt.measurementId===J);ut&&(yield C[ut.appId])}}catch(je){En.error(je)}D("config",J,ae)})).apply(this,arguments)}function To(D,C,x,F,J){return ro.apply(this,arguments)}function ro(){return(ro=(0,O.Z)(function*(D,C,x,F,J){try{let ae=[];if(J&&J.send_to){let De=J.send_to;Array.isArray(De)||(De=[De]);const je=yield fu(x);for(const ut of De){const yt=je.find(ht=>ht.measurementId===ut),St=yt&&C[yt.appId];if(!St){ae=[];break}ae.push(St)}}0===ae.length&&(ae=Object.values(C)),yield Promise.all(ae),D("event",F,J||{})}catch(ae){En.error(ae)}})).apply(this,arguments)}function rd(){const D=window.document.getElementsByTagName("script");for(const C of Object.values(D))if(C.src&&C.src.includes(hu))return C;return null}const er=new re.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),ha=new class Mi{constructor(C={},x=1e3){this.throttleMetadata=C,this.intervalMillis=x}getThrottleMetadata(C){return this.throttleMetadata[C]}setThrottleMetadata(C,x){this.throttleMetadata[C]=x}deleteThrottleMetadata(C){delete this.throttleMetadata[C]}};function sd(D){return new Headers({Accept:"application/json","x-goog-api-key":D})}function fa(D){return kl.apply(this,arguments)}function kl(){return(kl=(0,O.Z)(function*(D){var C;const{appId:x,apiKey:F}=D,J={method:"GET",headers:sd(F)},ae=no.replace("{app-id}",x),De=yield fetch(ae,J);if(200!==De.status&&304!==De.status){let je="";try{const ut=yield De.json();null!==(C=ut.error)&&void 0!==C&&C.message&&(je=ut.error.message)}catch{}throw er.create("config-fetch-failed",{httpStatus:De.status,responseMessage:je})}return De.json()})).apply(this,arguments)}function xn(D){return _i.apply(this,arguments)}function _i(){return(_i=(0,O.Z)(function*(D,C=ha,x){const{appId:F,apiKey:J,measurementId:ae}=D.options;if(!F)throw er.create("no-app-id");if(!J){if(ae)return{measurementId:ae,appId:F};throw er.create("no-api-key")}const De=C.getThrottleMetadata(F)||{backoffCount:0,throttleEndTimeMillis:Date.now()},je=new _u;return setTimeout((0,O.Z)(function*(){je.abort()}),void 0!==x?x:6e4),mu({appId:F,apiKey:J,measurementId:ae},De,je,C)})).apply(this,arguments)}function mu(D,C,x){return io.apply(this,arguments)}function io(){return(io=(0,O.Z)(function*(D,{throttleEndTimeMillis:C,backoffCount:x},F,J=ha){var ae,De;const{appId:je,measurementId:ut}=D;try{yield pa(F,C)}catch(yt){if(ut)return En.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${ut} provided in the "measurementId" field in the local Firebase config. [${null===(ae=yt)||void 0===ae?void 0:ae.message}]`),{appId:je,measurementId:ut};throw yt}try{const yt=yield fa(D);return J.deleteThrottleMetadata(je),yt}catch(yt){const St=yt;if(!yu(St)){if(J.deleteThrottleMetadata(je),ut)return En.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${ut} provided in the "measurementId" field in the local Firebase config. [${St?.message}]`),{appId:je,measurementId:ut};throw yt}const ht=503===Number(null===(De=St?.customData)||void 0===De?void 0:De.httpStatus)?(0,re.$s)(x,J.intervalMillis,30):(0,re.$s)(x,J.intervalMillis),mn={throttleEndTimeMillis:Date.now()+ht,backoffCount:x+1};return J.setThrottleMetadata(je,mn),En.debug(`Calling attemptFetch again in ${ht} millis`),mu(D,mn,F,J)}})).apply(this,arguments)}function pa(D,C){return new Promise((x,F)=>{const J=Math.max(C-Date.now(),0),ae=setTimeout(x,J);D.addEventListener(()=>{clearTimeout(ae),F(er.create("fetch-throttle",{throttleEndTimeMillis:C}))})})}function yu(D){if(!(D instanceof re.ZR&&D.customData))return!1;const C=Number(D.customData.httpStatus);return 429===C||500===C||503===C||504===C}class _u{constructor(){this.listeners=[]}addEventListener(C){this.listeners.push(C)}abort(){this.listeners.forEach(C=>C())}}let As,ma;function xs(){return(xs=(0,O.Z)(function*(D,C,x,F,J){if(J&&J.global)D("event",x,F);else{const ae=yield C;D("event",x,Object.assign(Object.assign({},F),{send_to:ae}))}})).apply(this,arguments)}function oo(D){ma=D}function Ll(D){As=D}function Qi(){return wu.apply(this,arguments)}function wu(){return(wu=(0,O.Z)(function*(){var D;if(!(0,re.hl)())return En.warn(er.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,re.eu)()}catch(C){return En.warn(er.create("indexeddb-unavailable",{errorInfo:null===(D=C)||void 0===D?void 0:D.toString()}).message),!1}return!0})).apply(this,arguments)}function xo(){return(xo=(0,O.Z)(function*(D,C,x,F,J,ae,De){var je;const ut=xn(D);ut.then(nr=>{x[nr.measurementId]=nr.appId,D.options.measurementId&&nr.measurementId!==D.options.measurementId&&En.warn(`The measurement ID in the local Firebase config (${D.options.measurementId}) does not match the measurement ID fetched from the server (${nr.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(nr=>En.error(nr)),C.push(ut);const yt=Qi().then(nr=>{if(nr)return F.getId()}),[St,ht]=yield Promise.all([ut,yt]);rd()||pu(ae,St.measurementId),ma&&(J("consent","default",ma),oo(void 0)),J("js",new Date);const mn=null!==(je=De?.config)&&void 0!==je?je:{};return mn.origin="firebase",mn.update=!0,null!=ht&&(mn[td]=ht),J("config",St.measurementId,mn),As&&(J("set",As),Ll(void 0)),St.measurementId})).apply(this,arguments)}class Eu{constructor(C){this.app=C}_delete(){return delete Gr[this.app.options.appId],Promise.resolve()}}let Gr={},Ms=[];const Mo={};let No,ao,Ro="dataLayer",ya=!1;function Ay(D,C,x){!function zp(){const D=[];if((0,re.ru)()&&D.push("This is a browser extension environment."),(0,re.zI)()||D.push("Cookies are not available."),D.length>0){const C=D.map((F,J)=>`(${J+1}) ${F}`).join(" "),x=er.create("invalid-analytics-context",{errorInfo:C});En.warn(x.message)}}();const F=D.options.appId;if(!F)throw er.create("no-app-id");if(!D.options.apiKey){if(!D.options.measurementId)throw er.create("no-api-key");En.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${D.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Gr[F])throw er.create("already-exists",{id:F});if(!ya){!function nd(D){let C=[];Array.isArray(window[D])?C=window[D]:window[D]=C}(Ro);const{wrappedGtag:ae,gtagCore:De}=function la(D,C,x,F,J){let ae=function(...De){window[F].push(arguments)};return window[J]&&"function"==typeof window[J]&&(ae=window[J]),window[J]=function gu(D,C,x,F){function ae(){return(ae=(0,O.Z)(function*(De,je,ut){try{"event"===De?yield To(D,C,x,je,ut):"config"===De?yield kh(D,C,x,F,je,ut):"consent"===De?D("consent","update",ut):D("set",je)}catch(yt){En.error(yt)}})).apply(this,arguments)}return function J(De,je,ut){return ae.apply(this,arguments)}}(ae,D,C,x),{gtagCore:ae,wrappedGtag:window[J]}}(Gr,Ms,Mo,Ro,"gtag");ao=ae,No=De,ya=!0}return Gr[F]=function Ao(D,C,x,F,J,ae,De){return xo.apply(this,arguments)}(D,Ms,Mo,C,No,Ro,x),new Eu(D)}function My(){return Ph.apply(this,arguments)}function Ph(){return(Ph=(0,O.Z)(function*(){if((0,re.ru)()||!(0,re.zI)()||!(0,re.hl)())return!1;try{return yield(0,re.eu)()}catch{return!1}})).apply(this,arguments)}const Fh="@firebase/analytics";!function zr(){(0,oe._registerComponent)(new de.wA(Do,(C,{options:x})=>Ay(C.getProvider("app").getImmediate(),C.getProvider("installations-internal").getImmediate(),x),"PUBLIC")),(0,oe._registerComponent)(new de.wA("analytics-internal",function D(C){try{const x=C.getProvider(Do).getImmediate();return{logEvent:(F,J,ae)=>function zt(D,C,x,F){D=(0,re.m9)(D),function od(D,C,x,F,J){return xs.apply(this,arguments)}(ao,Gr[D.app.options.appId],C,x,F).catch(J=>En.error(J))}(x,F,J,ae)}}catch(x){throw er.create("interop-component-reg-failed",{reason:x})}},"PRIVATE")),(0,oe.registerVersion)(Fh,"0.8.0"),(0,oe.registerVersion)(Fh,"0.8.0","esm2017")}();var vi=P(4408),Oo=P(7565);const Ji=new class wi extends Oo.v{}(class Ul extends vi.o{constructor(C,x){super(C,x),this.scheduler=C,this.work=x}schedule(C,x=0){return x>0?super.schedule(C,x):(this.delay=x,this.state=C,this.scheduler.flush(this),this)}execute(C,x){return x>0||this.closed?super.execute(C,x):this._execute(C,x)}requestAsyncId(C,x,F=0){return null!=F&&F>0||null==F&&this.delay>0?super.requestAsyncId(C,x,F):C.flush(this)}});var pt=P(4986),Du=P(8505),uo=P(5363),_a=P(9468);const Mr=new m.GfV("7.4.1"),va="__angularfire_symbol__analyticsIsSupportedValue",Xi="__angularfire_symbol__analyticsIsSupported",Ri="__angularfire_symbol__remoteConfigIsSupportedValue",Rr="__angularfire_symbol__remoteConfigIsSupported",Bl="__angularfire_symbol__messagingIsSupportedValue",Cu="__angularfire_symbol__messagingIsSupported";function Ea(D,C,x){if(C){if(1===C.length)return C[0];const ae=C.filter(De=>De.app===x);if(1===ae.length)return ae[0]}return x.container.getProvider(D).getImmediate({optional:!0})}globalThis[Xi]||(globalThis[Xi]=My().then(D=>globalThis[va]=D).catch(()=>globalThis[va]=!1)),globalThis[Cu]||(globalThis[Cu]=Jc().then(D=>globalThis[Bl]=D).catch(()=>globalThis[Bl]=!1)),globalThis[Rr]||(globalThis[Rr]=Qa().then(D=>globalThis[Ri]=D).catch(()=>globalThis[Ri]=!1));const qr=(D,C)=>{const x=C?[C]:(0,ee.C6)(),F=[];return x.forEach(J=>{J.container.getProvider(D).instances.forEach(De=>{F.includes(De)||F.push(De)})}),F};function ko(){}class an{constructor(C,x=Ji){this.zone=C,this.delegate=x}now(){return this.delegate.now()}schedule(C,x,F){const J=this.zone;return this.delegate.schedule(function(De){J.runGuarded(()=>{C.apply(this,[De])})},x,F)}}class Ni{constructor(C){this.zone=C,this.task=null}call(C,x){const F=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",ko,{},ko,ko)),x.pipe((0,Du.b)({next:F,complete:F,error:F})).subscribe(C).add(F)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Tu=(()=>{class D{constructor(x){this.ngZone=x,this.outsideAngular=x.runOutsideAngular(()=>new an(Zone.current)),this.insideAngular=x.run(()=>new an(Zone.current,pt.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return D.\u0275fac=function(x){return new(x||D)(m.LFG(m.R0b))},D.\u0275prov=m.Yz7({token:D,factory:D.\u0275fac,providedIn:"root"}),D})();function Rs(){const D=globalThis.\u0275AngularFireScheduler;if(!D)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return D}function jl(D){return D.pipe((0,uo.Q)(Rs().outsideAngular))}function es(D){return Rs(),function $l(D){return function(x){return(x=x.lift(new Ni(D.ngZone))).pipe((0,_a.R)(D.outsideAngular),(0,uo.Q)(D.insideAngular))}}(Rs())(D)}},2090:(at,Ae,P)=>{P.d(Ae,{$s:()=>$i,BH:()=>Ve,G6:()=>$e,L:()=>he,LL:()=>Pe,Mn:()=>Ee,Sg:()=>Me,UG:()=>me,US:()=>de,ZB:()=>$,ZR:()=>ne,b$:()=>nt,d:()=>xe,eu:()=>ge,hl:()=>U,jU:()=>fe,m9:()=>Gt,ne:()=>_o,pd:()=>Br,r3:()=>Cr,ru:()=>Ye,tV:()=>pe,uI:()=>Je,vZ:()=>Vr,w1:()=>_e,xO:()=>vs,xb:()=>Xt,z$:()=>ve,zI:()=>Z,zd:()=>Ci});const oe=function(K){const j=[];let V=0;for(let H=0;H<K.length;H++){let q=K.charCodeAt(H);q<128?j[V++]=q:q<2048?(j[V++]=q>>6|192,j[V++]=63&q|128):55296==(64512&q)&&H+1<K.length&&56320==(64512&K.charCodeAt(H+1))?(q=65536+((1023&q)<<10)+(1023&K.charCodeAt(++H)),j[V++]=q>>18|240,j[V++]=q>>12&63|128,j[V++]=q>>6&63|128,j[V++]=63&q|128):(j[V++]=q>>12|224,j[V++]=q>>6&63|128,j[V++]=63&q|128)}return j},de={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(K,j){if(!Array.isArray(K))throw Error("encodeByteArray takes an array as a parameter");this.init_();const V=j?this.byteToCharMapWebSafe_:this.byteToCharMap_,H=[];for(let q=0;q<K.length;q+=3){const be=K[q],Ue=q+1<K.length,rt=Ue?K[q+1]:0,sn=q+2<K.length,Zt=sn?K[q+2]:0;let Mt=(15&rt)<<2|Zt>>6,fn=63&Zt;sn||(fn=64,Ue||(Mt=64)),H.push(V[be>>2],V[(3&be)<<4|rt>>4],V[Mt],V[fn])}return H.join("")},encodeString(K,j){return this.HAS_NATIVE_SUPPORT&&!j?btoa(K):this.encodeByteArray(oe(K),j)},decodeString(K,j){return this.HAS_NATIVE_SUPPORT&&!j?atob(K):function(K){const j=[];let V=0,H=0;for(;V<K.length;){const q=K[V++];if(q<128)j[H++]=String.fromCharCode(q);else if(q>191&&q<224){const be=K[V++];j[H++]=String.fromCharCode((31&q)<<6|63&be)}else if(q>239&&q<365){const sn=((7&q)<<18|(63&K[V++])<<12|(63&K[V++])<<6|63&K[V++])-65536;j[H++]=String.fromCharCode(55296+(sn>>10)),j[H++]=String.fromCharCode(56320+(1023&sn))}else{const be=K[V++],Ue=K[V++];j[H++]=String.fromCharCode((15&q)<<12|(63&be)<<6|63&Ue)}}return j.join("")}(this.decodeStringToByteArray(K,j))},decodeStringToByteArray(K,j){this.init_();const V=j?this.charToByteMapWebSafe_:this.charToByteMap_,H=[];for(let q=0;q<K.length;){const be=V[K.charAt(q++)],rt=q<K.length?V[K.charAt(q)]:0;++q;const Zt=q<K.length?V[K.charAt(q)]:64;++q;const Pt=q<K.length?V[K.charAt(q)]:64;if(++q,null==be||null==rt||null==Zt||null==Pt)throw Error();H.push(be<<2|rt>>4),64!==Zt&&(H.push(rt<<4&240|Zt>>2),64!==Pt&&H.push(Zt<<6&192|Pt))}return H},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let K=0;K<this.ENCODED_VALS.length;K++)this.byteToCharMap_[K]=this.ENCODED_VALS.charAt(K),this.charToByteMap_[this.byteToCharMap_[K]]=K,this.byteToCharMapWebSafe_[K]=this.ENCODED_VALS_WEBSAFE.charAt(K),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[K]]=K,K>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(K)]=K,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(K)]=K)}}},he=function(K){return function(K){const j=oe(K);return de.encodeByteArray(j,!0)}(K).replace(/\./g,"")},pe=function(K){try{return de.decodeString(K,!0)}catch(j){console.error("base64Decode failed: ",j)}return null};function $(K,j){if(!(j instanceof Object))return j;switch(j.constructor){case Date:return new Date(j.getTime());case Object:void 0===K&&(K={});break;case Array:K=[];break;default:return j}for(const V in j)!j.hasOwnProperty(V)||!Y(V)||(K[V]=$(K[V],j[V]));return K}function Y(K){return"__proto__"!==K}class Ve{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((j,V)=>{this.resolve=j,this.reject=V})}wrapCallback(j){return(V,H)=>{V?this.reject(V):this.resolve(H),"function"==typeof j&&(this.promise.catch(()=>{}),1===j.length?j(V):j(V,H))}}}function Me(K,j){if(K.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const H=j||"demo-project",q=K.iat||0,be=K.sub||K.user_id;if(!be)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Ue=Object.assign({iss:`https://securetoken.google.com/${H}`,aud:H,iat:q,exp:q+3600,auth_time:q,sub:be,user_id:be,firebase:{sign_in_provider:"custom",identities:{}}},K);return[he(JSON.stringify({alg:"none",type:"JWT"})),he(JSON.stringify(Ue)),""].join(".")}function ve(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Je(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ve())}function me(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function fe(){return"object"==typeof self&&self.self===self}function Ye(){const K="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof K&&void 0!==K.id}function nt(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function xe(){return ve().indexOf("Electron/")>=0}function _e(){const K=ve();return K.indexOf("MSIE ")>=0||K.indexOf("Trident/")>=0}function Ee(){return ve().indexOf("MSAppHost/")>=0}function $e(){return!me()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function U(){return"object"==typeof indexedDB}function ge(){return new Promise((K,j)=>{try{let V=!0;const H="validate-browser-context-for-indexeddb-analytics-module",q=self.indexedDB.open(H);q.onsuccess=()=>{q.result.close(),V||self.indexedDB.deleteDatabase(H),K(!0)},q.onupgradeneeded=()=>{V=!1},q.onerror=()=>{var be;j((null===(be=q.error)||void 0===be?void 0:be.message)||"")}}catch(V){j(V)}})}function Z(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class ne extends Error{constructor(j,V,H){super(V),this.code=j,this.customData=H,this.name="FirebaseError",Object.setPrototypeOf(this,ne.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Pe.prototype.create)}}class Pe{constructor(j,V,H){this.service=j,this.serviceName=V,this.errors=H}create(j,...V){const H=V[0]||{},q=`${this.service}/${j}`,be=this.errors[j],Ue=be?function ke(K,j){return K.replace(dt,(V,H)=>{const q=j[H];return null!=q?String(q):`<${H}?>`})}(be,H):"Error";return new ne(q,`${this.serviceName}: ${Ue} (${q}).`,H)}}const dt=/\{\$([^}]+)}/g;function Cr(K,j){return Object.prototype.hasOwnProperty.call(K,j)}function Xt(K){for(const j in K)if(Object.prototype.hasOwnProperty.call(K,j))return!1;return!0}function Vr(K,j){if(K===j)return!0;const V=Object.keys(K),H=Object.keys(j);for(const q of V){if(!H.includes(q))return!1;const be=K[q],Ue=j[q];if(pr(be)&&pr(Ue)){if(!Vr(be,Ue))return!1}else if(be!==Ue)return!1}for(const q of H)if(!V.includes(q))return!1;return!0}function pr(K){return null!==K&&"object"==typeof K}function vs(K){const j=[];for(const[V,H]of Object.entries(K))Array.isArray(H)?H.forEach(q=>{j.push(encodeURIComponent(V)+"="+encodeURIComponent(q))}):j.push(encodeURIComponent(V)+"="+encodeURIComponent(H));return j.length?"&"+j.join("&"):""}function Ci(K){const j={};return K.replace(/^\?/,"").split("&").forEach(H=>{if(H){const[q,be]=H.split("=");j[decodeURIComponent(q)]=decodeURIComponent(be)}}),j}function Br(K){const j=K.indexOf("?");if(!j)return"";const V=K.indexOf("#",j);return K.substring(j,V>0?V:void 0)}function _o(K,j){const V=new Ke(K,j);return V.subscribe.bind(V)}class Ke{constructor(j,V){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=V,this.task.then(()=>{j(this)}).catch(H=>{this.error(H)})}next(j){this.forEachObserver(V=>{V.next(j)})}error(j){this.forEachObserver(V=>{V.error(j)}),this.close(j)}complete(){this.forEachObserver(j=>{j.complete()}),this.close()}subscribe(j,V,H){let q;if(void 0===j&&void 0===V&&void 0===H)throw new Error("Missing Observer.");q=function ji(K,j){if("object"!=typeof K||null===K)return!1;for(const V of j)if(V in K&&"function"==typeof K[V])return!0;return!1}(j,["next","error","complete"])?j:{next:j,error:V,complete:H},void 0===q.next&&(q.next=Sn),void 0===q.error&&(q.error=Sn),void 0===q.complete&&(q.complete=Sn);const be=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?q.error(this.finalError):q.complete()}catch{}}),this.observers.push(q),be}unsubscribeOne(j){void 0===this.observers||void 0===this.observers[j]||(delete this.observers[j],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(j){if(!this.finalized)for(let V=0;V<this.observers.length;V++)this.sendOne(V,j)}sendOne(j,V){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[j])try{V(this.observers[j])}catch(H){typeof console<"u"&&console.error&&console.error(H)}})}close(j){this.finalized||(this.finalized=!0,void 0!==j&&(this.finalError=j),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Sn(){}function $i(K,j=1e3,V=2){const H=j*Math.pow(V,K),q=Math.round(.5*H*(Math.random()-.5)*2);return Math.min(144e5,H+q)}function Gt(K){return K&&K._delegate?K._delegate:K}},5706:(at,Ae,P)=>{var m=P(4650);let ee=null;function O(){return ee}const le=new m.OlP("DocumentToken");let he=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=m.Yz7({token:n,factory:function(){return function pe(){return(0,m.LFG)($)}()},providedIn:"platform"}),n})();const B=new m.OlP("Location Initialized");let $=(()=>{class n extends he{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return O().getBaseHref(this._doc)}onPopState(t){const r=O().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=O().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,s){Y()?this._history.pushState(t,r,s):this.location.hash=s}replaceState(t,r,s){Y()?this._history.replaceState(t,r,s):this.location.hash=s}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(le))},n.\u0275prov=m.Yz7({token:n,factory:function(){return function Ve(){return new $((0,m.LFG)(le))}()},providedIn:"platform"}),n})();function Y(){return!!window.history.pushState}function Me(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function ve(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function Je(n){return n&&"?"!==n[0]?"?"+n:n}let me=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=m.Yz7({token:n,factory:function(){return(0,m.f3M)(Ye)},providedIn:"root"}),n})();const fe=new m.OlP("appBaseHref");let Ye=(()=>{class n extends me{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??(0,m.f3M)(le).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Me(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+Je(this._platformLocation.search),s=this._platformLocation.hash;return s&&t?`${r}${s}`:r}pushState(t,r,s,u){const c=this.prepareExternalUrl(s+Je(u));this._platformLocation.pushState(t,r,c)}replaceState(t,r,s,u){const c=this.prepareExternalUrl(s+Je(u));this._platformLocation.replaceState(t,r,c)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(he),m.LFG(fe,8))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),nt=(()=>{class n extends me{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=Me(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,s,u){let c=this.prepareExternalUrl(s+Je(u));0==c.length&&(c=this._platformLocation.pathname),this._platformLocation.pushState(t,r,c)}replaceState(t,r,s,u){let c=this.prepareExternalUrl(s+Je(u));0==c.length&&(c=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,c)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(he),m.LFG(fe,8))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})(),xe=(()=>{class n{constructor(t){this._subject=new m.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._baseHref=ve(Be(r)),this._locationStrategy.onPopState(s=>{this._subject.emit({url:this.path(!0),pop:!0,state:s.state,type:s.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Je(r))}normalize(t){return n.stripTrailingSlash(function Ee(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,Be(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",s=null){this._locationStrategy.pushState(s,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Je(r)),s)}replaceState(t,r="",s=null){this._locationStrategy.replaceState(s,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Je(r)),s)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(s=>s(t,r))}subscribe(t,r,s){return this._subject.subscribe({next:t,error:r,complete:s})}}return n.normalizeQueryParams=Je,n.joinWithSlash=Me,n.stripTrailingSlash=ve,n.\u0275fac=function(t){return new(t||n)(m.LFG(me))},n.\u0275prov=m.Yz7({token:n,factory:function(){return function _e(){return new xe((0,m.LFG)(me))}()},providedIn:"root"}),n})();function Be(n){return n.replace(/\/index.html$/,"")}function Qo(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[s,u]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(s.trim()===e)return decodeURIComponent(u)}return null}let ta=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({}),n})();function lr(n){return"server"===n}let Xa=(()=>{class n{}return n.\u0275prov=(0,m.Yz7)({token:n,providedIn:"root",factory:()=>new Rh((0,m.LFG)(le),window)}),n})();class Rh{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function xr(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let s=r.currentNode;for(;s;){const u=s.shadowRoot;if(u){const c=u.getElementById(e)||u.querySelector(`[name="${e}"]`);if(c)return c}s=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,s=t.top+this.window.pageYOffset,u=this.offset();this.window.scrollTo(r-u[0],s-u[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=oi(this.window.history)||oi(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function oi(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class Ys{}class eo extends class Qc extends class de{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function re(n){ee||(ee=n)}(new eo)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function cu(){return to=to||document.querySelector("base"),to?to.getAttribute("href"):null}();return null==t?null:function Hr(n){zn=zn||document.createElement("a"),zn.setAttribute("href",n);const e=zn.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){to=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Qo(document.cookie,e)}}let zn,to=null;const hn=new m.OlP("TRANSITION_ID"),Rl=[{provide:m.ip1,useFactory:function Jc(n,e,t){return()=>{t.get(m.CZH).donePromise.then(()=>{const r=O(),s=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let u=0;u<s.length;u++)r.remove(s[u])})}},deps:[hn,le,m.zs3],multi:!0}];let Nl=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();const du=new m.OlP("EventManagerPlugins");let Xc=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(s=>s.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,s){return this._findPluginFor(r).addEventListener(t,r,s)}addGlobalEventListener(t,r,s){return this._findPluginFor(r).addGlobalEventListener(t,r,s)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const s=this._plugins;for(let u=0;u<s.length;u++){const c=s[u];if(c.supports(t))return this._eventNameToPlugin.set(t,c),c}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(du),m.LFG(m.R0b))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();class Ol{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const s=O().getGlobalEventTarget(this._doc,e);if(!s)throw new Error(`Unsupported event target ${s} for event ${t}`);return this.addEventListener(s,t,r)}}let Io=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(s=>{this._stylesSet.has(s)||(this._stylesSet.add(s),r.add(s))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})(),bo=(()=>{class n extends Io{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,s){t.forEach(u=>{const c=this._doc.createElement("style");c.textContent=u,s.push(r.appendChild(c))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(ed),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,s)=>{this._addStylesToHost(t,s,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(ed))}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(le))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();function ed(n){O().remove(n)}const Do={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},td=/%COMP%/g;function pu(n,e,t){for(let r=0;r<e.length;r++){let s=e[r];Array.isArray(s)?pu(n,s,t):(s=s.replace(td,n),t.push(s))}return t}function nd(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let Co=(()=>{class n{constructor(t,r,s){this.eventManager=t,this.sharedStylesHost=r,this.appId=s,this.rendererByCompId=new Map,this.defaultRenderer=new To(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case m.ifc.Emulated:{let s=this.rendererByCompId.get(r.id);return s||(s=new rd(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,s)),s.applyToHost(t),s}case 1:case m.ifc.ShadowDom:return new id(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const s=pu(r.id,r.styles,[]);this.sharedStylesHost.addStyles(s),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(Xc),m.LFG(bo),m.LFG(m.AFp))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();class To{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(Do[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){(la(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(la(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,s){if(s){t=s+":"+t;const u=Do[s];u?e.setAttributeNS(u,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const s=Do[r];s?e.removeAttributeNS(s,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,s){s&(m.JOm.DashCase|m.JOm.Important)?e.style.setProperty(t,r,s&m.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&m.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,nd(r)):this.eventManager.addEventListener(e,t,nd(r))}}function la(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class rd extends To{constructor(e,t,r,s){super(e),this.component=r;const u=pu(s+"-"+r.id,r.styles,[]);t.addStyles(u),this.contentAttr=function En(n){return"_ngcontent-%COMP%".replace(td,n)}(s+"-"+r.id),this.hostAttr=function fu(n){return"_nghost-%COMP%".replace(td,n)}(s+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class id extends To{constructor(e,t,r,s){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const u=pu(s.id,s.styles,[]);for(let c=0;c<u.length;c++){const g=document.createElement("style");g.textContent=u[c],this.shadowRoot.appendChild(g)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let er=(()=>{class n extends Ol{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,s){return t.addEventListener(r,s,!1),()=>this.removeEventListener(t,r,s)}removeEventListener(t,r,s){return t.removeEventListener(r,s)}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(le))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();const ca=["alt","control","meta","shift"],da={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Mi={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let ha=(()=>{class n extends Ol{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,s){const u=n.parseEventName(r),c=n.eventCallback(u.fullKey,s,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>O().onAndCancel(t,u.domEventName,c))}static parseEventName(t){const r=t.toLowerCase().split("."),s=r.shift();if(0===r.length||"keydown"!==s&&"keyup"!==s)return null;const u=n._normalizeKey(r.pop());let c="",g=r.indexOf("code");if(g>-1&&(r.splice(g,1),c="code."),ca.forEach(b=>{const A=r.indexOf(b);A>-1&&(r.splice(A,1),c+=b+".")}),c+=u,0!=r.length||0===u.length)return null;const v={};return v.domEventName=s,v.fullKey=c,v}static matchEventFullKeyCode(t,r){let s=da[t.key]||t.key,u="";return r.indexOf("code.")>-1&&(s=t.code,u="code."),!(null==s||!s)&&(s=s.toLowerCase()," "===s?s="space":"."===s&&(s="dot"),ca.forEach(c=>{c!==s&&(0,Mi[c])(t)&&(u+=c+".")}),u+=s,u===r)}static eventCallback(t,r,s){return u=>{n.matchEventFullKeyCode(u,t)&&s.runGuarded(()=>r(u))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(le))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();const _u=(0,m.eFA)(m._c5,"browser",[{provide:m.Lbi,useValue:"browser"},{provide:m.g9A,useValue:function mu(){eo.makeCurrent()},multi:!0},{provide:le,useFactory:function pa(){return(0,m.RDi)(document),document},deps:[]}]),As=new m.OlP(""),od=[{provide:m.rWj,useClass:class Oh{addToWindow(e){m.dqk.getAngularTestability=(r,s=!0)=>{const u=e.findTestabilityInTree(r,s);if(null==u)throw new Error("Could not find testability for element.");return u},m.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),m.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),m.dqk.frameworkStabilizers||(m.dqk.frameworkStabilizers=[]),m.dqk.frameworkStabilizers.push(r=>{const s=m.dqk.getAllAngularTestabilities();let u=s.length,c=!1;const g=function(v){c=c||v,u--,0==u&&r(c)};s.forEach(function(v){v.whenStable(g)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?O().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:m.lri,useClass:m.dDg,deps:[m.R0b,m.eoX,m.rWj]},{provide:m.dDg,useClass:m.dDg,deps:[m.R0b,m.eoX,m.rWj]}],xs=[{provide:m.zSh,useValue:"root"},{provide:m.qLn,useFactory:function io(){return new m.qLn},deps:[]},{provide:du,useClass:er,multi:!0,deps:[le,m.R0b,m.Lbi]},{provide:du,useClass:ha,multi:!0,deps:[le]},{provide:Co,useClass:Co,deps:[Xc,bo,m.AFp]},{provide:m.FYo,useExisting:Co},{provide:Io,useExisting:bo},{provide:bo,useClass:bo,deps:[le]},{provide:Xc,useClass:Xc,deps:[du,m.R0b]},{provide:Ys,useClass:Nl,deps:[]},[]];let Pl=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:m.AFp,useValue:t.appId},{provide:hn,useExisting:m.AFp},Rl]}}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(As,12))},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({providers:[...xs,...od],imports:[ta,m.hGG]}),n})(),Yi=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(le))},n.\u0275prov=m.Yz7({token:n,factory:function(t){let r=null;return r=t?new t:function So(){return new Yi((0,m.LFG)(le))}(),r},providedIn:"root"}),n})();typeof window<"u"&&window;var zt=P(8996),cr=P(9751);const{isArray:Fh}=Array,{getPrototypeOf:bu,prototype:zr,keys:vi}=Object;function Ul(n){if(1===n.length){const e=n[0];if(Fh(e))return{args:e,keys:null};if(function Oo(n){return n&&"object"==typeof n&&bu(n)===zr}(e)){const t=vi(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}var wi=P(8421),Ji=P(7669),dr=P(5403),pt=P(4004);const{isArray:Du}=Array;function _a(n){return(0,pt.U)(e=>function uo(n,e){return Du(e)?n(...e):n(e)}(n,e))}function Mr(n,e){return n.reduce((t,r,s)=>(t[r]=e[s],t),{})}const an=new m.OlP("NgValidators"),Ni=new m.OlP("NgAsyncValidators");function C(n){return null!=n}function x(n){return(0,m.QGY)(n)?(0,zt.D)(n):n}function F(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function J(n,e){return e.map(t=>t(n))}function De(n){return n.map(e=>function ae(n){return!n.validate}(e)?e:t=>e.validate(t))}function ut(n){return null!=n?function je(n){if(!n)return null;const e=n.filter(C);return 0==e.length?null:function(t){return F(J(t,e))}}(De(n)):null}function St(n){return null!=n?function yt(n){if(!n)return null;const e=n.filter(C);return 0==e.length?null:function(t){return function va(...n){const e=(0,Ji.jO)(n),{args:t,keys:r}=Ul(n),s=new cr.y(u=>{const{length:c}=t;if(!c)return void u.complete();const g=new Array(c);let v=c,b=c;for(let A=0;A<c;A++){let M=!1;(0,wi.Xf)(t[A]).subscribe((0,dr.x)(u,L=>{M||(M=!0,b--),g[A]=L},()=>v--,void 0,()=>{(!v||!M)&&(b||u.next(r?Mr(r,g):g),u.complete())}))}});return e?s.pipe(_a(e)):s}(J(t,e).map(x)).pipe((0,pt.U)(F))}}(De(n)):null}function ht(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function Ns(n){return n?Array.isArray(n)?n:[n]:[]}function ts(n,e){return Array.isArray(n)?n.includes(e):n===e}function Os(n,e){const t=Ns(e);return Ns(n).forEach(s=>{ts(t,s)||t.push(s)}),t}function co(n,e){return Ns(e).filter(t=>!ts(n,t))}class bn extends class ns{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=ut(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=St(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}{get formDirective(){return null}get path(){return null}}let Kp=(()=>{class n extends class ks{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(bn,10))},n.\u0275dir=m.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&m.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},features:[m.qOj]}),n})();const Ca="VALID",zl="INVALID",Ta="PENDING",Au="DISABLED";function Qp(n){return Array.isArray(n)?ut(n):n||null}function Jp(n){return Array.isArray(n)?St(n):n||null}function Wl(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class hd extends class Mu{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=Qp(this._rawValidators),this._composedAsyncValidatorFn=Jp(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===Ca}get invalid(){return this.status===zl}get pending(){return this.status==Ta}get disabled(){return this.status===Au}get enabled(){return this.status!==Au}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=Qp(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=Jp(e)}addValidators(e){this.setValidators(Os(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(Os(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(co(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(co(e,this._rawAsyncValidators))}hasValidator(e){return ts(this._rawValidators,e)}hasAsyncValidator(e){return ts(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Ta,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Au,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Ca,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Ca||this.status===Ta)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Au:Ca}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Ta,this._hasOwnPendingAsyncValidator=!0;const t=x(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((r,s)=>r&&r._find(s),this)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new m.vpe,this.statusChanges=new m.vpe}_calculateStatus(){return this._allControlsDisabled()?Au:this.errors?zl:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Ta)?Ta:this._anyControlsHaveStatus(zl)?zl:Ca}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Wl(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}}{constructor(e,t,r){super(function xu(n){return(Wl(n)?n.validators:n)||null}(t),function ql(n,e){return(Wl(e)?e.asyncValidators:n)||null}(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){(function rs(n,e,t){n._forEachChild((r,s)=>{if(void 0===t[s])throw new m.vHH(1002,"")})})(this,0,e),Object.keys(e).forEach(r=>{(function Xp(n,e,t){const r=n.controls;if(!(e?Object.keys(r):r).length)throw new m.vHH(1e3,"");if(!r[t])throw new m.vHH(1001,"")})(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{const s=this.controls[r];s&&s.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,s)=>{r.reset(e[s],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,r,s)=>((r.enabled||this.disabled)&&(t[s]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((s,u)=>{r=t(r,s,u)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}function pd(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function jh(n,e){const t=function mn(n){return n._rawValidators}(n);null!==e.validator?n.setValidators(ht(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=function nr(n){return n._rawAsyncValidators}(n);null!==e.asyncValidator?n.setAsyncValidators(ht(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const s=()=>n.updateValueAndValidity();pd(e._rawValidators,s),pd(e._rawAsyncValidators,s)}function Po(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}const Gh={provide:bn,useExisting:(0,m.Gpc)(()=>yd)},Zl=(()=>Promise.resolve(null))();let yd=(()=>{class n extends bn{constructor(t,r){super(),this.submitted=!1,this._directives=new Set,this.ngSubmit=new m.vpe,this.form=new hd({},ut(t),St(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){Zl.then(()=>{const r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),function ki(n,e){jh(n,e),e.valueAccessor.writeValue(n.value),n.disabled&&e.valueAccessor.setDisabledState?.(!0),function tg(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&Po(n,e)})}(n,e),function ng(n,e){const t=(r,s)=>{e.valueAccessor.writeValue(r),s&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function Ps(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&Po(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function Bh(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}(t.control,t),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){Zl.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){Zl.then(()=>{const r=this._findContainer(t.path),s=new hd({});(function $h(n,e){jh(n,e)})(s,t),r.registerControl(t.name,s),s.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){Zl.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){Zl.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,function Hh(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this._directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(an,10),m.Y36(Ni,10))},n.\u0275dir=m.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(t,r){1&t&&m.NdJ("submit",function(u){return r.onSubmit(u)})("reset",function(){return r.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[m._Bn([Gh]),m.qOj]}),n})(),$y=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=m.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})(),qh=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({}),n})(),_g=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({imports:[qh]}),n})(),rc=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({imports:[_g]}),n})();function it(...n){const e=(0,Ji.yG)(n);return(0,zt.D)(n,e)}var Kr=P(5577),vg=P(576);function Na(n,e){return(0,vg.m)(e)?(0,Kr.z)(n,e,1):(0,Kr.z)(n,1)}var Zr=P(4482);function Pi(n,e){return(0,Zr.e)((t,r)=>{let s=0;t.subscribe((0,dr.x)(r,u=>n.call(e,u,s++)&&r.next(u)))})}class b0{}class wg{}class ss{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?this.lazyInit="string"==typeof e?()=>{this.headers=new Map,e.split("\n").forEach(t=>{const r=t.indexOf(":");if(r>0){const s=t.slice(0,r),u=s.toLowerCase(),c=t.slice(r+1).trim();this.maybeSetNormalizedName(s,u),this.headers.has(u)?this.headers.get(u).push(c):this.headers.set(u,[c])}})}:()=>{this.headers=new Map,Object.keys(e).forEach(t=>{let r=e[t];const s=t.toLowerCase();"string"==typeof r&&(r=[r]),r.length>0&&(this.headers.set(s,r),this.maybeSetNormalizedName(t,s))})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof ss?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new ss;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof ss?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(e.name,t);const s=("a"===e.op?this.headers.get(t):void 0)||[];s.push(...r),this.headers.set(t,s);break;case"d":const u=e.value;if(u){let c=this.headers.get(t);if(!c)return;c=c.filter(g=>-1===u.indexOf(g)),0===c.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,c)}else this.headers.delete(t),this.normalizedNames.delete(t)}}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class VD{encodeKey(e){return C0(e)}encodeValue(e){return C0(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const D0=/%(\d[a-f0-9])/gi,BD={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function C0(n){return encodeURIComponent(n).replace(D0,(e,t)=>BD[t]??e)}function Eg(n){return`${n}`}class ku{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new VD,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function UD(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(s=>{const u=s.indexOf("="),[c,g]=-1==u?[e.decodeKey(s),""]:[e.decodeKey(s.slice(0,u)),e.decodeValue(s.slice(u+1))],v=t.get(c)||[];v.push(g),t.set(c,v)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const r=e.fromObject[t],s=Array.isArray(r)?r.map(Eg):[Eg(r)];this.map.set(t,s)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(r=>{const s=e[r];Array.isArray(s)?s.forEach(u=>{t.push({param:r,value:u,op:"a"})}):t.push({param:r,value:s,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new ku({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(Eg(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let r=this.map.get(e.param)||[];const s=r.indexOf(Eg(e.value));-1!==s&&r.splice(s,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class jD{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function S0(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function Yy(n){return typeof Blob<"u"&&n instanceof Blob}function A0(n){return typeof FormData<"u"&&n instanceof FormData}class mr{constructor(e,t,r,s){let u;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function $D(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||s?(this.body=void 0!==r?r:null,u=s):u=r,u&&(this.reportProgress=!!u.reportProgress,this.withCredentials=!!u.withCredentials,u.responseType&&(this.responseType=u.responseType),u.headers&&(this.headers=u.headers),u.context&&(this.context=u.context),u.params&&(this.params=u.params)),this.headers||(this.headers=new ss),this.context||(this.context=new jD),this.params){const c=this.params.toString();if(0===c.length)this.urlWithParams=t;else{const g=t.indexOf("?");this.urlWithParams=t+(-1===g?"?":g<t.length-1?"&":"")+c}}else this.params=new ku,this.urlWithParams=t}serializeBody(){return null===this.body?null:S0(this.body)||Yy(this.body)||A0(this.body)||function HD(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof ku?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||A0(this.body)?null:Yy(this.body)?this.body.type||null:S0(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof ku?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){const t=e.method||this.method,r=e.url||this.url,s=e.responseType||this.responseType,u=void 0!==e.body?e.body:this.body,c=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,g=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let v=e.headers||this.headers,b=e.params||this.params;const A=e.context??this.context;return void 0!==e.setHeaders&&(v=Object.keys(e.setHeaders).reduce((M,L)=>M.set(L,e.setHeaders[L]),v)),e.setParams&&(b=Object.keys(e.setParams).reduce((M,L)=>M.set(L,e.setParams[L]),b)),new mr(t,r,u,{params:b,headers:v,context:A,reportProgress:g,responseType:s,withCredentials:c})}}var Wn=(()=>((Wn=Wn||{})[Wn.Sent=0]="Sent",Wn[Wn.UploadProgress=1]="UploadProgress",Wn[Wn.ResponseHeader=2]="ResponseHeader",Wn[Wn.DownloadProgress=3]="DownloadProgress",Wn[Wn.Response=4]="Response",Wn[Wn.User=5]="User",Wn))();class Ig{constructor(e,t=200,r="OK"){this.headers=e.headers||new ss,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class Yh extends Ig{constructor(e={}){super(e),this.type=Wn.ResponseHeader}clone(e={}){return new Yh({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class yr extends Ig{constructor(e={}){super(e),this.type=Wn.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new yr({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class Td extends Ig{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function Qh(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let GD=(()=>{class n{constructor(t){this.handler=t}request(t,r,s={}){let u;if(t instanceof mr)u=t;else{let v,b;v=s.headers instanceof ss?s.headers:new ss(s.headers),s.params&&(b=s.params instanceof ku?s.params:new ku({fromObject:s.params})),u=new mr(t,r,void 0!==s.body?s.body:null,{headers:v,context:s.context,params:b,reportProgress:s.reportProgress,responseType:s.responseType||"json",withCredentials:s.withCredentials})}const c=it(u).pipe(Na(v=>this.handler.handle(v)));if(t instanceof mr||"events"===s.observe)return c;const g=c.pipe(Pi(v=>v instanceof yr));switch(s.observe||"body"){case"body":switch(u.responseType){case"arraybuffer":return g.pipe((0,pt.U)(v=>{if(null!==v.body&&!(v.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return v.body}));case"blob":return g.pipe((0,pt.U)(v=>{if(null!==v.body&&!(v.body instanceof Blob))throw new Error("Response is not a Blob.");return v.body}));case"text":return g.pipe((0,pt.U)(v=>{if(null!==v.body&&"string"!=typeof v.body)throw new Error("Response is not a string.");return v.body}));default:return g.pipe((0,pt.U)(v=>v.body))}case"response":return g;default:throw new Error(`Unreachable: unhandled observe type ${s.observe}}`)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:(new ku).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,s={}){return this.request("PATCH",t,Qh(s,r))}post(t,r,s={}){return this.request("POST",t,Qh(s,r))}put(t,r,s={}){return this.request("PUT",t,Qh(s,r))}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(b0))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();class x0{constructor(e,t){this.next=e,this.interceptor=t}handle(e){return this.interceptor.intercept(e,this.next)}}const Qy=new m.OlP("HTTP_INTERCEPTORS");let zD=(()=>{class n{intercept(t,r){return r.handle(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();const Oa=/^\)\]\}',?\n/;let M0=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new cr.y(r=>{const s=this.xhrFactory.build();if(s.open(t.method,t.urlWithParams),t.withCredentials&&(s.withCredentials=!0),t.headers.forEach((G,Q)=>s.setRequestHeader(G,Q.join(","))),t.headers.has("Accept")||s.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const G=t.detectContentTypeHeader();null!==G&&s.setRequestHeader("Content-Type",G)}if(t.responseType){const G=t.responseType.toLowerCase();s.responseType="json"!==G?G:"text"}const u=t.serializeBody();let c=null;const g=()=>{if(null!==c)return c;const G=s.statusText||"OK",Q=new ss(s.getAllResponseHeaders()),Ie=function KD(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(s)||t.url;return c=new Yh({headers:Q,status:s.status,statusText:G,url:Ie}),c},v=()=>{let{headers:G,status:Q,statusText:Ie,url:Ce}=g(),Ze=null;204!==Q&&(Ze=typeof s.response>"u"?s.responseText:s.response),0===Q&&(Q=Ze?200:0);let lt=Q>=200&&Q<300;if("json"===t.responseType&&"string"==typeof Ze){const ct=Ze;Ze=Ze.replace(Oa,"");try{Ze=""!==Ze?JSON.parse(Ze):null}catch(tt){Ze=ct,lt&&(lt=!1,Ze={error:tt,text:Ze})}}lt?(r.next(new yr({body:Ze,headers:G,status:Q,statusText:Ie,url:Ce||void 0})),r.complete()):r.error(new Td({error:Ze,headers:G,status:Q,statusText:Ie,url:Ce||void 0}))},b=G=>{const{url:Q}=g(),Ie=new Td({error:G,status:s.status||0,statusText:s.statusText||"Unknown Error",url:Q||void 0});r.error(Ie)};let A=!1;const M=G=>{A||(r.next(g()),A=!0);let Q={type:Wn.DownloadProgress,loaded:G.loaded};G.lengthComputable&&(Q.total=G.total),"text"===t.responseType&&!!s.responseText&&(Q.partialText=s.responseText),r.next(Q)},L=G=>{let Q={type:Wn.UploadProgress,loaded:G.loaded};G.lengthComputable&&(Q.total=G.total),r.next(Q)};return s.addEventListener("load",v),s.addEventListener("error",b),s.addEventListener("timeout",b),s.addEventListener("abort",b),t.reportProgress&&(s.addEventListener("progress",M),null!==u&&s.upload&&s.upload.addEventListener("progress",L)),s.send(u),r.next({type:Wn.Sent}),()=>{s.removeEventListener("error",b),s.removeEventListener("abort",b),s.removeEventListener("load",v),s.removeEventListener("timeout",b),t.reportProgress&&(s.removeEventListener("progress",M),null!==u&&s.upload&&s.upload.removeEventListener("progress",L)),s.readyState!==s.DONE&&s.abort()}})}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(Ys))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();const R0=new m.OlP("XSRF_COOKIE_NAME"),N0=new m.OlP("XSRF_HEADER_NAME");class Jy{}let Rx=(()=>{class n{constructor(t,r,s){this.doc=t,this.platform=r,this.cookieName=s,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=Qo(t,this.cookieName),this.lastCookieString=t),this.lastToken}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(le),m.LFG(m.Lbi),m.LFG(R0))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})(),Fs=(()=>{class n{constructor(t,r){this.tokenService=t,this.headerName=r}intercept(t,r){const s=t.url.toLowerCase();if("GET"===t.method||"HEAD"===t.method||s.startsWith("http://")||s.startsWith("https://"))return r.handle(t);const u=this.tokenService.getToken();return null!==u&&!t.headers.has(this.headerName)&&(t=t.clone({headers:t.headers.set(this.headerName,u)})),r.handle(t)}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(Jy),m.LFG(N0))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})(),Xy=(()=>{class n{constructor(t,r){this.backend=t,this.injector=r,this.chain=null}handle(t){if(null===this.chain){const r=this.injector.get(Qy,[]);this.chain=r.reduceRight((s,u)=>new x0(s,u),this.backend)}return this.chain.handle(t)}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(wg),m.LFG(m.zs3))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})(),k0=(()=>{class n{static disable(){return{ngModule:n,providers:[{provide:Fs,useClass:zD}]}}static withOptions(t={}){return{ngModule:n,providers:[t.cookieName?{provide:R0,useValue:t.cookieName}:[],t.headerName?{provide:N0,useValue:t.headerName}:[]]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({providers:[Fs,{provide:Qy,useExisting:Fs,multi:!0},{provide:Jy,useClass:Rx},{provide:R0,useValue:"XSRF-TOKEN"},{provide:N0,useValue:"X-XSRF-TOKEN"}]}),n})(),ZD=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({providers:[GD,{provide:b0,useClass:Xy},M0,{provide:wg,useExisting:M0}],imports:[k0.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]}),n})();var ka=P(7579);class os extends ka.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}const Xh=(0,P(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var Dg=P(4671),Sd=P(9672);function Cg(...n){const e=(0,Ji.yG)(n),t=(0,Ji.jO)(n),{args:r,keys:s}=Ul(n);if(0===r.length)return(0,zt.D)([],e);const u=new cr.y(function P0(n,e,t=Dg.y){return r=>{F0(e,()=>{const{length:s}=n,u=new Array(s);let c=s,g=s;for(let v=0;v<s;v++)F0(e,()=>{const b=(0,zt.D)(n[v],e);let A=!1;b.subscribe((0,dr.x)(r,M=>{u[v]=M,A||(A=!0,g--),g||r.next(t(u.slice()))},()=>{--c||r.complete()}))},r)},r)}}(r,e,s?c=>Mr(s,c):Dg.y));return t?u.pipe(_a(t)):u}function F0(n,e,t){n?(0,Sd.f)(t,n,e):e()}var ic=P(8189);function t_(...n){return function YD(){return(0,ic.J)(1)}()((0,zt.D)(n,(0,Ji.yG)(n)))}function L0(n){return new cr.y(e=>{(0,wi.Xf)(n()).subscribe(e)})}var QD=P(9635);function ef(n,e){const t=(0,vg.m)(n)?n:()=>n,r=s=>s.error(t());return new cr.y(e?s=>e.schedule(r,0,s):r)}var sc=P(515),n_=P(727);function tf(){return(0,Zr.e)((n,e)=>{let t=null;n._refCount++;const r=(0,dr.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const s=n._connection,u=t;t=null,s&&(!u||s===u)&&s.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class r_ extends cr.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,Zr.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new n_.w0;const t=this.getSubject();e.add(this.source.subscribe((0,dr.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=n_.w0.EMPTY)}return e}refCount(){return tf()(this)}}function Kn(n,e){return(0,Zr.e)((t,r)=>{let s=null,u=0,c=!1;const g=()=>c&&!s&&r.complete();t.subscribe((0,dr.x)(r,v=>{s?.unsubscribe();let b=0;const A=u++;(0,wi.Xf)(n(v,A)).subscribe(s=(0,dr.x)(r,M=>r.next(e?e(v,M,A,b++):M),()=>{s=null,g()}))},()=>{c=!0,g()}))})}function nf(n){return n<=0?()=>sc.E:(0,Zr.e)((e,t)=>{let r=0;e.subscribe((0,dr.x)(t,s=>{++r<=n&&(t.next(s),n<=r&&t.complete())}))})}function Tg(...n){const e=(0,Ji.yG)(n);return(0,Zr.e)((t,r)=>{(e?t_(n,t,e):t_(n,t)).subscribe(r)})}function rf(n){return(0,Zr.e)((e,t)=>{let r=!1;e.subscribe((0,dr.x)(t,s=>{r=!0,t.next(s)},()=>{r||t.next(n),t.complete()}))})}function i_(n=oc){return(0,Zr.e)((e,t)=>{let r=!1;e.subscribe((0,dr.x)(t,s=>{r=!0,t.next(s)},()=>r?t.complete():t.error(n())))})}function oc(){return new Xh}function Vo(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Pi((s,u)=>n(s,u,r)):Dg.y,nf(1),t?rf(e):i_(()=>new Xh))}var Yr=P(8505);function Pu(n){return(0,Zr.e)((e,t)=>{let u,r=null,s=!1;r=e.subscribe((0,dr.x)(t,void 0,void 0,c=>{u=(0,wi.Xf)(n(c,Pu(n)(e))),r?(r.unsubscribe(),r=null,u.subscribe(t)):s=!0})),s&&(r.unsubscribe(),r=null,u.subscribe(t))})}function kx(n,e,t,r,s){return(u,c)=>{let g=t,v=e,b=0;u.subscribe((0,dr.x)(c,A=>{const M=b++;v=g?n(v,A,M):(g=!0,A),r&&c.next(v)},s&&(()=>{g&&c.next(v),c.complete()})))}}function Fu(n,e){return(0,Zr.e)(kx(n,e,arguments.length>=2,!0))}function s_(n){return n<=0?()=>sc.E:(0,Zr.e)((e,t)=>{let r=[];e.subscribe((0,dr.x)(t,s=>{r.push(s),n<r.length&&r.shift()},()=>{for(const s of r)t.next(s);t.complete()},void 0,()=>{r=null}))})}function o_(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Pi((s,u)=>n(s,u,r)):Dg.y,s_(1),t?rf(e):i_(()=>new Xh))}function sf(n){return(0,Zr.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}const Lt="primary",Lu=Symbol("RouteTitle");class Sg{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function ac(n){return new Sg(n)}function a_(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const s={};for(let u=0;u<r.length;u++){const c=r[u],g=n[u];if(c.startsWith(":"))s[c.substring(1)]=g;else if(c!==g.path)return null}return{consumed:n.slice(0,r.length),posParams:s}}function Ls(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let s;for(let u=0;u<t.length;u++)if(s=t[u],!Ad(n[s],e[s]))return!1;return!0}function Ad(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((s,u)=>r[u]===s)}return n===e}function j0(n){return Array.prototype.concat.apply([],n)}function u_(n){return n.length>0?n[n.length-1]:null}function Qr(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function Pa(n){return(0,m.CqO)(n)?n:(0,m.QGY)(n)?(0,zt.D)(Promise.resolve(n)):it(n)}const Fx={exact:function z0(n,e,t){if(!Vu(n.segments,e.segments)||!uf(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!z0(n.children[r],e.children[r],t))return!1;return!0},subset:Vs},l_={exact:function G0(n,e){return Ls(n,e)},subset:function JD(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>Ad(n[t],e[t]))},ignored:()=>!0};function H0(n,e,t){return Fx[t.paths](n.root,e.root,t.matrixParams)&&l_[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function Vs(n,e,t){return q0(n,e,e.segments,t)}function q0(n,e,t,r){if(n.segments.length>t.length){const s=n.segments.slice(0,t.length);return!(!Vu(s,t)||e.hasChildren()||!uf(s,t,r))}if(n.segments.length===t.length){if(!Vu(n.segments,t)||!uf(n.segments,t,r))return!1;for(const s in e.children)if(!n.children[s]||!Vs(n.children[s],e.children[s],r))return!1;return!0}{const s=t.slice(0,n.segments.length),u=t.slice(n.segments.length);return!!(Vu(n.segments,s)&&uf(n.segments,s,r)&&n.children[Lt])&&q0(n.children[Lt],e,u,r)}}function uf(n,e,t){return e.every((r,s)=>l_[t](n[s].parameters,r.parameters))}class uc{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=ac(this.queryParams)),this._queryParamMap}toString(){return Nt.serialize(this)}}class Bt{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Qr(t,(r,s)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Ag(this)}}class lf{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=ac(this.parameters)),this._parameterMap}toString(){return K0(this)}}function Vu(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let W0=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=m.Yz7({token:n,factory:function(){return new c_},providedIn:"root"}),n})();class c_{parse(e){const t=new iC(e);return new uc(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${xd(e.root,!0)}`,r=function Lx(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(s=>`${xg(t)}=${xg(s)}`).join("&"):`${xg(t)}=${xg(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function tC(n){return encodeURI(n)}(e.fragment)}`:""}`}}const Nt=new c_;function Ag(n){return n.segments.map(e=>K0(e)).join("/")}function xd(n,e){if(!n.hasChildren())return Ag(n);if(e){const t=n.children[Lt]?xd(n.children[Lt],!1):"",r=[];return Qr(n.children,(s,u)=>{u!==Lt&&r.push(`${u}:${xd(s,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function eC(n,e){let t=[];return Qr(n.children,(r,s)=>{s===Lt&&(t=t.concat(e(r,s)))}),Qr(n.children,(r,s)=>{s!==Lt&&(t=t.concat(e(r,s)))}),t}(n,(r,s)=>s===Lt?[xd(n.children[Lt],!1)]:[`${s}:${xd(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Lt]?`${Ag(n)}/${t[0]}`:`${Ag(n)}/(${t.join("//")})`}}function d_(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function xg(n){return d_(n).replace(/%3B/gi,";")}function Mg(n){return d_(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Rg(n){return decodeURIComponent(n)}function h_(n){return Rg(n.replace(/\+/g,"%20"))}function K0(n){return`${Mg(n.path)}${function nC(n){return Object.keys(n).map(e=>`;${Mg(e)}=${Mg(n[e])}`).join("")}(n.parameters)}`}const Z0=/^[^\/()?;=#]+/;function cf(n){const e=n.match(Z0);return e?e[0]:""}const lc=/^[^=?&#]+/,f_=/^[^&#]+/;class iC{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Bt([],{}):new Bt([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Lt]=new Bt(e,t)),r}parseSegment(){const e=cf(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new m.vHH(4009,!1);return this.capture(e),new lf(Rg(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=cf(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const s=cf(this.remaining);s&&(r=s,this.capture(r))}e[Rg(t)]=Rg(r)}parseQueryParam(e){const t=function rC(n){const e=n.match(lc);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const c=function p_(n){const e=n.match(f_);return e?e[0]:""}(this.remaining);c&&(r=c,this.capture(r))}const s=h_(t),u=h_(r);if(e.hasOwnProperty(s)){let c=e[s];Array.isArray(c)||(c=[c],e[s]=c),c.push(u)}else e[s]=u}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=cf(this.remaining),s=this.remaining[r.length];if("/"!==s&&")"!==s&&";"!==s)throw new m.vHH(4010,!1);let u;r.indexOf(":")>-1?(u=r.slice(0,r.indexOf(":")),this.capture(u),this.capture(":")):e&&(u=Lt);const c=this.parseChildren();t[u]=1===Object.keys(c).length?c[Lt]:new Bt([],c),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new m.vHH(4011,!1)}}function Y0(n){return n.segments.length>0?new Bt([],{[Lt]:n}):n}function g_(n){const e={};for(const r of Object.keys(n.children)){const u=g_(n.children[r]);(u.segments.length>0||u.hasChildren())&&(e[r]=u)}return function Vx(n){if(1===n.numberOfChildren&&n.children[Lt]){const e=n.children[Lt];return new Bt(n.segments.concat(e.segments),e.children)}return n}(new Bt(n.segments,e))}function cc(n){return n instanceof uc}function oC(n,e,t,r,s){if(0===t.length)return Nd(e.root,e.root,e.root,r,s);const u=function J0(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new Q0(!0,0,n);let e=0,t=!1;const r=n.reduce((s,u,c)=>{if("object"==typeof u&&null!=u){if(u.outlets){const g={};return Qr(u.outlets,(v,b)=>{g[b]="string"==typeof v?v.split("/"):v}),[...s,{outlets:g}]}if(u.segmentPath)return[...s,u.segmentPath]}return"string"!=typeof u?[...s,u]:0===c?(u.split("/").forEach((g,v)=>{0==v&&"."===g||(0==v&&""===g?t=!0:".."===g?e++:""!=g&&s.push(g))}),s):[...s,u]},[]);return new Q0(t,e,r)}(t);return u.toRoot()?Nd(e.root,e.root,new Bt([],{}),r,s):function c(v){const b=function uC(n,e,t,r){if(n.isAbsolute)return new Od(e.root,!0,0);if(-1===r)return new Od(t,t===e.root,0);return function y_(n,e,t){let r=n,s=e,u=t;for(;u>s;){if(u-=s,r=r.parent,!r)throw new m.vHH(4005,!1);s=r.segments.length}return new Od(r,!1,s-u)}(t,r+(Rd(n.commands[0])?0:1),n.numberOfDoubleDots)}(u,e,n.snapshot?._urlSegment,v),A=b.processChildren?kd(b.segmentGroup,b.index,u.commands):Og(b.segmentGroup,b.index,u.commands);return Nd(e.root,b.segmentGroup,A,r,s)}(n.snapshot?._lastPathIndex)}function Rd(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function Uu(n){return"object"==typeof n&&null!=n&&n.outlets}function Nd(n,e,t,r,s){let c,u={};r&&Qr(r,(v,b)=>{u[b]=Array.isArray(v)?v.map(A=>`${A}`):`${v}`}),c=n===e?t:m_(n,e,t);const g=Y0(g_(c));return new uc(g,u,s)}function m_(n,e,t){const r={};return Qr(n.children,(s,u)=>{r[u]=s===e?t:m_(s,e,t)}),new Bt(n.segments,r)}class Q0{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Rd(r[0]))throw new m.vHH(4003,!1);const s=r.find(Uu);if(s&&s!==u_(r))throw new m.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Od{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function Og(n,e,t){if(n||(n=new Bt([],{})),0===n.segments.length&&n.hasChildren())return kd(n,e,t);const r=function __(n,e,t){let r=0,s=e;const u={match:!1,pathIndex:0,commandIndex:0};for(;s<n.segments.length;){if(r>=t.length)return u;const c=n.segments[s],g=t[r];if(Uu(g))break;const v=`${g}`,b=r<t.length-1?t[r+1]:null;if(s>0&&void 0===v)break;if(v&&b&&"object"==typeof b&&void 0===b.outlets){if(!cC(v,b,c))return u;r+=2}else{if(!cC(v,{},c))return u;r++}s++}return{match:!0,pathIndex:s,commandIndex:r}}(n,e,t),s=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const u=new Bt(n.segments.slice(0,r.pathIndex),{});return u.children[Lt]=new Bt(n.segments.slice(r.pathIndex),n.children),kd(u,0,s)}return r.match&&0===s.length?new Bt(n.segments,{}):r.match&&!n.hasChildren()?X0(n,e,t):r.match?kd(n,0,s):X0(n,e,t)}function kd(n,e,t){if(0===t.length)return new Bt(n.segments,{});{const r=function lC(n){return Uu(n[0])?n[0].outlets:{[Lt]:n}}(t),s={};return Qr(r,(u,c)=>{"string"==typeof u&&(u=[u]),null!==u&&(s[c]=Og(n.children[c],e,u))}),Qr(n.children,(u,c)=>{void 0===r[c]&&(s[c]=u)}),new Bt(n.segments,s)}}function X0(n,e,t){const r=n.segments.slice(0,e);let s=0;for(;s<t.length;){const u=t[s];if(Uu(u)){const v=v_(u.outlets);return new Bt(r,v)}if(0===s&&Rd(t[0])){r.push(new lf(n.segments[e].path,eE(t[0]))),s++;continue}const c=Uu(u)?u.outlets[Lt]:`${u}`,g=s<t.length-1?t[s+1]:null;c&&g&&Rd(g)?(r.push(new lf(c,eE(g))),s+=2):(r.push(new lf(c,{})),s++)}return new Bt(r,{})}function v_(n){const e={};return Qr(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=X0(new Bt([],{}),0,t))}),e}function eE(n){const e={};return Qr(n,(t,r)=>e[r]=`${t}`),e}function cC(n,e,t){return n==t.path&&Ls(e,t.parameters)}class Fi{constructor(e,t){this.id=e,this.url=t}}class kg extends Fi{constructor(e,t,r="imperative",s=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=s}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Bu extends Fi{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class dc extends Fi{constructor(e,t,r,s){super(e,t),this.reason=r,this.code=s,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Us extends Fi{constructor(e,t,r,s){super(e,t),this.error=r,this.target=s,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class tE extends Fi{constructor(e,t,r,s){super(e,t),this.urlAfterRedirects=r,this.state=s,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class dC extends Fi{constructor(e,t,r,s){super(e,t),this.urlAfterRedirects=r,this.state=s,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class w_ extends Fi{constructor(e,t,r,s,u){super(e,t),this.urlAfterRedirects=r,this.state=s,this.shouldActivate=u,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Fa extends Fi{constructor(e,t,r,s){super(e,t),this.urlAfterRedirects=r,this.state=s,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class E_ extends Fi{constructor(e,t,r,s){super(e,t),this.urlAfterRedirects=r,this.state=s,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class nE{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class I_{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Ux{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class rE{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Bx{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Pg{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class df{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class Fg{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=hf(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=hf(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=iE(e,this._root);return t.length<2?[]:t[t.length-2].children.map(s=>s.value).filter(s=>s!==e)}pathFromRoot(e){return iE(e,this._root).map(t=>t.value)}}function hf(n,e){if(n===e.value)return e;for(const t of e.children){const r=hf(n,t);if(r)return r}return null}function iE(n,e){if(n===e.value)return[e];for(const t of e.children){const r=iE(n,t);if(r.length)return r.unshift(e),r}return[]}class La{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Pd(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class sE extends Fg{constructor(e,t){super(e),this.snapshot=t,C_(this,e)}toString(){return this.snapshot.toString()}}function oE(n,e){const t=function aE(n,e){const c=new ff([],{},{},"",{},Lt,e,null,n.root,-1,{});return new D_("",new La(c,[]))}(n,e),r=new os([new lf("",{})]),s=new os({}),u=new os({}),c=new os({}),g=new os(""),v=new Fd(r,s,c,g,u,Lt,e,t.root);return v.snapshot=t.root,new sE(new La(v,[]),t)}class Fd{constructor(e,t,r,s,u,c,g,v){this.url=e,this.params=t,this.queryParams=r,this.fragment=s,this.data=u,this.outlet=c,this.component=g,this.title=this.data?.pipe((0,pt.U)(b=>b[Lu]))??it(void 0),this._futureSnapshot=v}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,pt.U)(e=>ac(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,pt.U)(e=>ac(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function uE(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const s=t[r],u=t[r-1];if(s.routeConfig&&""===s.routeConfig.path)r--;else{if(u.component)break;r--}}return function jx(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class ff{constructor(e,t,r,s,u,c,g,v,b,A,M,L){this.url=e,this.params=t,this.queryParams=r,this.fragment=s,this.data=u,this.outlet=c,this.component=g,this.title=this.data?.[Lu],this.routeConfig=v,this._urlSegment=b,this._lastPathIndex=A,this._correctedLastPathIndex=L??A,this._resolve=M}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=ac(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=ac(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class D_ extends Fg{constructor(e,t){super(t),this.url=e,C_(this,t)}toString(){return Lg(this._root)}}function C_(n,e){e.value._routerState=n,e.children.forEach(t=>C_(n,t))}function Lg(n){const e=n.children.length>0?` { ${n.children.map(Lg).join(", ")} } `:"";return`${n.value}${e}`}function lE(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Ls(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),Ls(e.params,t.params)||n.params.next(t.params),function B0(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Ls(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),Ls(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function cE(n,e){const t=Ls(n.params,e.params)&&function XD(n,e){return Vu(n,e)&&n.every((t,r)=>Ls(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||cE(n.parent,e.parent))}function Vg(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const s=function Hx(n,e,t){return e.children.map(r=>{for(const s of t.children)if(n.shouldReuseRoute(r.value,s.value.snapshot))return Vg(n,r,s);return Vg(n,r)})}(n,e,t);return new La(r,s)}{if(n.shouldAttach(e.value)){const u=n.retrieve(e.value);if(null!==u){const c=u.route;return c.value._futureSnapshot=e.value,c.children=e.children.map(g=>Vg(n,g)),c}}const r=function Gx(n){return new Fd(new os(n.url),new os(n.params),new os(n.queryParams),new os(n.fragment),new os(n.data),n.outlet,n.component,n)}(e.value),s=e.children.map(u=>Vg(n,u));return new La(r,s)}}const dE="ngNavigationCancelingError";function hC(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=cc(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,s=fC(!1,0,e);return s.url=t,s.navigationBehaviorOptions=r,s}function fC(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[dE]=!0,r.cancellationCode=e,t&&(r.url=t),r}function pC(n){return Va(n)&&cc(n.url)}function Va(n){return n&&n[dE]}class T_{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new pf,this.attachRef=null}}let pf=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const s=this.getOrCreateContext(t);s.outlet=r,this.contexts.set(t,s)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new T_,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const gf=!1;let mf=(()=>{class n{constructor(t,r,s,u,c){this.parentContexts=t,this.location=r,this.changeDetector=u,this.environmentInjector=c,this.activated=null,this._activatedRoute=null,this.activateEvents=new m.vpe,this.deactivateEvents=new m.vpe,this.attachEvents=new m.vpe,this.detachEvents=new m.vpe,this.name=s||Lt,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.getContext(this.name)?.outlet===this&&this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new m.vHH(4012,gf);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new m.vHH(4012,gf);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new m.vHH(4012,gf);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new m.vHH(4013,gf);this._activatedRoute=t;const s=this.location,c=t._futureSnapshot.component,g=this.parentContexts.getOrCreateContext(this.name).children,v=new hE(t,g,s.injector);if(r&&function S_(n){return!!n.resolveComponentFactory}(r)){const b=r.resolveComponentFactory(c);this.activated=s.createComponent(b,s.length,v)}else this.activated=s.createComponent(c,{index:s.length,injector:v,environmentInjector:r??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(pf),m.Y36(m.s_b),m.$8M("name"),m.Y36(m.sBO),m.Y36(m.lqb))},n.\u0275dir=m.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0}),n})();class hE{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Fd?this.route:e===pf?this.childContexts:this.parent.get(e,t)}}let A_=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=m.Xpm({type:n,selectors:[["ng-component"]],standalone:!0,features:[m.jDz],decls:1,vars:0,template:function(t,r){1&t&&m._UZ(0,"router-outlet")},dependencies:[mf],encapsulation:2}),n})();function Ua(n,e){return n.providers&&!n._injector&&(n._injector=(0,m.MMx)(n.providers,e,`Route: ${n.path}`)),n._injector??e}function yf(n){const e=n.children&&n.children.map(yf),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Lt&&(t.component=A_),t}function Jr(n){return n.outlet||Lt}function _f(n,e){const t=n.filter(r=>Jr(r)===e);return t.push(...n.filter(r=>Jr(r)!==e)),t}function Ba(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class fE{constructor(e,t,r,s){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=s}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),lE(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const s=Pd(t);e.children.forEach(u=>{const c=u.value.outlet;this.deactivateRoutes(u,s[c],r),delete s[c]}),Qr(s,(u,c)=>{this.deactivateRouteAndItsChildren(u,r)})}deactivateRoutes(e,t,r){const s=e.value,u=t?t.value:null;if(s===u)if(s.component){const c=r.getContext(s.outlet);c&&this.deactivateChildRoutes(e,t,c.children)}else this.deactivateChildRoutes(e,t,r);else u&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),s=r&&e.value.component?r.children:t,u=Pd(e);for(const c of Object.keys(u))this.deactivateRouteAndItsChildren(u[c],s);if(r&&r.outlet){const c=r.outlet.detach(),g=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:c,route:e,contexts:g})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),s=r&&e.value.component?r.children:t,u=Pd(e);for(const c of Object.keys(u))this.deactivateRouteAndItsChildren(u[c],s);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const s=Pd(t);e.children.forEach(u=>{this.activateRoutes(u,s[u.value.outlet],r),this.forwardEvent(new Pg(u.value.snapshot))}),e.children.length&&this.forwardEvent(new rE(e.value.snapshot))}activateRoutes(e,t,r){const s=e.value,u=t?t.value:null;if(lE(s),s===u)if(s.component){const c=r.getOrCreateContext(s.outlet);this.activateChildRoutes(e,t,c.children)}else this.activateChildRoutes(e,t,r);else if(s.component){const c=r.getOrCreateContext(s.outlet);if(this.routeReuseStrategy.shouldAttach(s.snapshot)){const g=this.routeReuseStrategy.retrieve(s.snapshot);this.routeReuseStrategy.store(s.snapshot,null),c.children.onOutletReAttached(g.contexts),c.attachRef=g.componentRef,c.route=g.route.value,c.outlet&&c.outlet.attach(g.componentRef,g.route.value),lE(g.route.value),this.activateChildRoutes(e,null,c.children)}else{const g=Ba(s.snapshot),v=g?.get(m._Vd)??null;c.attachRef=null,c.route=s,c.resolver=v,c.injector=g,c.outlet&&c.outlet.activateWith(s,c.injector),this.activateChildRoutes(e,null,c.children)}}else this.activateChildRoutes(e,null,r)}}class M_{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class Vd{constructor(e,t){this.component=e,this.route=t}}function R_(n,e,t){const r=n._root;return vf(r,e?e._root:null,t,[r.value])}function ju(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||(0,m.Z0I)(n)?e.get(n):n:r}function vf(n,e,t,r,s={canDeactivateChecks:[],canActivateChecks:[]}){const u=Pd(e);return n.children.forEach(c=>{(function Wx(n,e,t,r,s={canDeactivateChecks:[],canActivateChecks:[]}){const u=n.value,c=e?e.value:null,g=t?t.getContext(n.value.outlet):null;if(c&&u.routeConfig===c.routeConfig){const v=function vC(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!Vu(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Vu(n.url,e.url)||!Ls(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!cE(n,e)||!Ls(n.queryParams,e.queryParams);default:return!cE(n,e)}}(c,u,u.routeConfig.runGuardsAndResolvers);v?s.canActivateChecks.push(new M_(r)):(u.data=c.data,u._resolvedData=c._resolvedData),vf(n,e,u.component?g?g.children:null:t,r,s),v&&g&&g.outlet&&g.outlet.isActivated&&s.canDeactivateChecks.push(new Vd(g.outlet.component,c))}else c&&Ud(e,g,s),s.canActivateChecks.push(new M_(r)),vf(n,null,u.component?g?g.children:null:t,r,s)})(c,u[c.value.outlet],t,r.concat([c.value]),s),delete u[c.value.outlet]}),Qr(u,(c,g)=>Ud(c,t.getContext(g),s)),s}function Ud(n,e,t){const r=Pd(n),s=n.value;Qr(r,(u,c)=>{Ud(u,s.component?e?e.children.getContext(c):null:e,t)}),t.canDeactivateChecks.push(new Vd(s.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,s))}function wf(n){return"function"==typeof n}function Ef(n){return n instanceof Xh||"EmptyError"===n?.name}const If=Symbol("INITIAL_VALUE");function Bd(){return Kn(n=>Cg(n.map(e=>e.pipe(nf(1),Tg(If)))).pipe((0,pt.U)(e=>{for(const t of e)if(!0!==t){if(t===If)return If;if(!1===t||t instanceof uc)return t}return!0}),Pi(e=>e!==If),nf(1)))}function IE(n){return(0,QD.z)((0,Yr.b)(e=>{if(cc(e))throw hC(0,e)}),(0,pt.U)(e=>!0===e))}const bf={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function bE(n,e,t,r,s){const u=N_(n,e,t);return u.matched?function Uo(n,e,t,r){const s=e.canMatch;return s&&0!==s.length?it(s.map(c=>{const g=ju(c,n);return Pa(function EC(n){return n&&wf(n.canMatch)}(g)?g.canMatch(e,t):n.runInContext(()=>g(e,t)))})).pipe(Bd(),IE()):it(!0)}(r=Ua(e,r),e,t).pipe((0,pt.U)(c=>!0===c?u:{...bf})):it(u)}function N_(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...bf}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const s=(e.matcher||a_)(t,n,e);if(!s)return{...bf};const u={};Qr(s.posParams,(g,v)=>{u[v]=g.path});const c=s.consumed.length>0?{...u,...s.consumed[s.consumed.length-1].parameters}:u;return{matched:!0,consumedSegments:s.consumed,remainingSegments:t.slice(s.consumed.length),parameters:c,positionalParamSegments:s.posParams??{}}}function O_(n,e,t,r,s="corrected"){if(t.length>0&&function xC(n,e,t){return t.some(r=>jd(n,e,r)&&Jr(r)!==Lt)}(n,t,r)){const c=new Bt(e,function AC(n,e,t,r){const s={};s[Lt]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const u of t)if(""===u.path&&Jr(u)!==Lt){const c=new Bt([],{});c._sourceSegment=n,c._segmentIndexShift=e.length,s[Jr(u)]=c}return s}(n,e,r,new Bt(t,n.children)));return c._sourceSegment=n,c._segmentIndexShift=e.length,{segmentGroup:c,slicedSegments:[]}}if(0===t.length&&function MC(n,e,t){return t.some(r=>jd(n,e,r))}(n,t,r)){const c=new Bt(n.segments,function DE(n,e,t,r,s,u){const c={};for(const g of r)if(jd(n,t,g)&&!s[Jr(g)]){const v=new Bt([],{});v._sourceSegment=n,v._segmentIndexShift="legacy"===u?n.segments.length:e.length,c[Jr(g)]=v}return{...s,...c}}(n,e,t,r,n.children,s));return c._sourceSegment=n,c._segmentIndexShift=e.length,{segmentGroup:c,slicedSegments:t}}const u=new Bt(n.segments,n.children);return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:t}}function jd(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function CE(n,e,t,r){return!!(Jr(n)===r||r!==Lt&&jd(e,t,n))&&("**"===n.path||N_(e,n,t).matched)}function TE(n,e,t){return 0===e.length&&!n.children[t]}const hc=!1;class $d{constructor(e){this.segmentGroup=e||null}}class SE{constructor(e){this.urlTree=e}}function fc(n){return ef(new $d(n))}function k_(n){return ef(new SE(n))}class Yx{constructor(e,t,r,s,u){this.injector=e,this.configLoader=t,this.urlSerializer=r,this.urlTree=s,this.config=u,this.allowRedirects=!0}apply(){const e=O_(this.urlTree.root,[],[],this.config).segmentGroup,t=new Bt(e.segments,e.children);return this.expandSegmentGroup(this.injector,this.config,t,Lt).pipe((0,pt.U)(u=>this.createUrlTree(g_(u),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Pu(u=>{if(u instanceof SE)return this.allowRedirects=!1,this.match(u.urlTree);throw u instanceof $d?this.noMatchError(u):u}))}match(e){return this.expandSegmentGroup(this.injector,this.config,e.root,Lt).pipe((0,pt.U)(s=>this.createUrlTree(g_(s),e.queryParams,e.fragment))).pipe(Pu(s=>{throw s instanceof $d?this.noMatchError(s):s}))}noMatchError(e){return new m.vHH(4002,hc)}createUrlTree(e,t,r){const s=Y0(e);return new uc(s,t,r)}expandSegmentGroup(e,t,r,s){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,pt.U)(u=>new Bt([],u))):this.expandSegment(e,r,t,r.segments,s,!0)}expandChildren(e,t,r){const s=[];for(const u of Object.keys(r.children))"primary"===u?s.unshift(u):s.push(u);return(0,zt.D)(s).pipe(Na(u=>{const c=r.children[u],g=_f(t,u);return this.expandSegmentGroup(e,g,c,u).pipe((0,pt.U)(v=>({segment:v,outlet:u})))}),Fu((u,c)=>(u[c.outlet]=c.segment,u),{}),o_())}expandSegment(e,t,r,s,u,c){return(0,zt.D)(r).pipe(Na(g=>this.expandSegmentAgainstRoute(e,t,r,g,s,u,c).pipe(Pu(b=>{if(b instanceof $d)return it(null);throw b}))),Vo(g=>!!g),Pu((g,v)=>{if(Ef(g))return TE(t,s,u)?it(new Bt([],{})):fc(t);throw g}))}expandSegmentAgainstRoute(e,t,r,s,u,c,g){return CE(s,t,u,c)?void 0===s.redirectTo?this.matchSegmentAgainstRoute(e,t,s,u,c):g&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,s,u,c):fc(t):fc(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,s,u,c){return"**"===s.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,s,c):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,s,u,c)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,s){const u=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?k_(u):this.lineralizeSegments(r,u).pipe((0,Kr.z)(c=>{const g=new Bt(c,{});return this.expandSegment(e,g,t,c,s,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,s,u,c){const{matched:g,consumedSegments:v,remainingSegments:b,positionalParamSegments:A}=N_(t,s,u);if(!g)return fc(t);const M=this.applyRedirectCommands(v,s.redirectTo,A);return s.redirectTo.startsWith("/")?k_(M):this.lineralizeSegments(s,M).pipe((0,Kr.z)(L=>this.expandSegment(e,t,r,L.concat(b),c,!1)))}matchSegmentAgainstRoute(e,t,r,s,u){return"**"===r.path?(e=Ua(r,e),r.loadChildren?(r._loadedRoutes?it({routes:r._loadedRoutes,injector:r._loadedInjector}):this.configLoader.loadChildren(e,r)).pipe((0,pt.U)(g=>(r._loadedRoutes=g.routes,r._loadedInjector=g.injector,new Bt(s,{})))):it(new Bt(s,{}))):bE(t,r,s,e).pipe(Kn(({matched:c,consumedSegments:g,remainingSegments:v})=>c?this.getChildConfig(e=r._injector??e,r,s).pipe((0,Kr.z)(A=>{const M=A.injector??e,L=A.routes,{segmentGroup:G,slicedSegments:Q}=O_(t,g,v,L),Ie=new Bt(G.segments,G.children);if(0===Q.length&&Ie.hasChildren())return this.expandChildren(M,L,Ie).pipe((0,pt.U)(ct=>new Bt(g,ct)));if(0===L.length&&0===Q.length)return it(new Bt(g,{}));const Ce=Jr(r)===u;return this.expandSegment(M,Ie,L,Q,Ce?Lt:u,!0).pipe((0,pt.U)(lt=>new Bt(g.concat(lt.segments),lt.children)))})):fc(t)))}getChildConfig(e,t,r){return t.children?it({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?it({routes:t._loadedRoutes,injector:t._loadedInjector}):function EE(n,e,t,r){const s=e.canLoad;return void 0===s||0===s.length?it(!0):it(s.map(c=>{const g=ju(c,n);return Pa(function mE(n){return n&&wf(n.canLoad)}(g)?g.canLoad(e,t):n.runInContext(()=>g(e,t)))})).pipe(Bd(),IE())}(e,t,r).pipe((0,Kr.z)(s=>s?this.configLoader.loadChildren(e,t).pipe((0,Yr.b)(u=>{t._loadedRoutes=u.routes,t._loadedInjector=u.injector})):function Zx(n){return ef(fC(hc,3))}())):it({routes:[],injector:e})}lineralizeSegments(e,t){let r=[],s=t.root;for(;;){if(r=r.concat(s.segments),0===s.numberOfChildren)return it(r);if(s.numberOfChildren>1||!s.children[Lt])return ef(new m.vHH(4e3,hc));s=s.children[Lt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,s){const u=this.createSegmentGroup(e,t.root,r,s);return new uc(u,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Qr(e,(s,u)=>{if("string"==typeof s&&s.startsWith(":")){const g=s.substring(1);r[u]=t[g]}else r[u]=s}),r}createSegmentGroup(e,t,r,s){const u=this.createSegments(e,t.segments,r,s);let c={};return Qr(t.children,(g,v)=>{c[v]=this.createSegmentGroup(e,g,r,s)}),new Bt(u,c)}createSegments(e,t,r,s){return t.map(u=>u.path.startsWith(":")?this.findPosParam(e,u,s):this.findOrReturn(u,r))}findPosParam(e,t,r){const s=r[t.path.substring(1)];if(!s)throw new m.vHH(4001,hc);return s}findOrReturn(e,t){let r=0;for(const s of t){if(s.path===e.path)return t.splice(r),s;r++}return e}}class xE{}class ja{constructor(e,t,r,s,u,c,g,v){this.injector=e,this.rootComponentType=t,this.config=r,this.urlTree=s,this.url=u,this.paramsInheritanceStrategy=c,this.relativeLinkResolution=g,this.urlSerializer=v}recognize(){const e=O_(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,Lt).pipe((0,pt.U)(t=>{if(null===t)return null;const r=new ff([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Lt,this.rootComponentType,null,this.urlTree.root,-1,{}),s=new La(r,t),u=new D_(this.url,s);return this.inheritParamsAndData(u._root),u}))}inheritParamsAndData(e){const t=e.value,r=uE(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(s=>this.inheritParamsAndData(s))}processSegmentGroup(e,t,r,s){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,s)}processChildren(e,t,r){return(0,zt.D)(Object.keys(r.children)).pipe(Na(s=>{const u=r.children[s],c=_f(t,s);return this.processSegmentGroup(e,c,u,s)}),Fu((s,u)=>s&&u?(s.push(...u),s):null),function V0(n,e=!1){return(0,Zr.e)((t,r)=>{let s=0;t.subscribe((0,dr.x)(r,u=>{const c=n(u,s++);(c||e)&&r.next(u),!c&&r.complete()}))})}(s=>null!==s),rf(null),o_(),(0,pt.U)(s=>{if(null===s)return null;const u=RE(s);return function Bg(n){n.sort((e,t)=>e.value.outlet===Lt?-1:t.value.outlet===Lt?1:e.value.outlet.localeCompare(t.value.outlet))}(u),u}))}processSegment(e,t,r,s,u){return(0,zt.D)(t).pipe(Na(c=>this.processSegmentAgainstRoute(c._injector??e,c,r,s,u)),Vo(c=>!!c),Pu(c=>{if(Ef(c))return TE(r,s,u)?it([]):it(null);throw c}))}processSegmentAgainstRoute(e,t,r,s,u){if(t.redirectTo||!CE(t,r,s,u))return it(null);let c;if("**"===t.path){const g=s.length>0?u_(s).parameters:{},v=NE(r)+s.length;c=it({snapshot:new ff(s,g,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Hd(t),Jr(t),t.component??t._loadedComponent??null,t,V_(r),v,kE(t),v),consumedSegments:[],remainingSegments:[]})}else c=bE(r,t,s,e).pipe((0,pt.U)(({matched:g,consumedSegments:v,remainingSegments:b,parameters:A})=>{if(!g)return null;const M=NE(r)+v.length;return{snapshot:new ff(v,A,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Hd(t),Jr(t),t.component??t._loadedComponent??null,t,V_(r),M,kE(t),M),consumedSegments:v,remainingSegments:b}}));return c.pipe(Kn(g=>{if(null===g)return it(null);const{snapshot:v,consumedSegments:b,remainingSegments:A}=g;e=t._injector??e;const M=t._loadedInjector??e,L=function jg(n){return n.children?n.children:n.loadChildren?n._loadedRoutes:[]}(t),{segmentGroup:G,slicedSegments:Q}=O_(r,b,A,L.filter(Ce=>void 0===Ce.redirectTo),this.relativeLinkResolution);if(0===Q.length&&G.hasChildren())return this.processChildren(M,L,G).pipe((0,pt.U)(Ce=>null===Ce?null:[new La(v,Ce)]));if(0===L.length&&0===Q.length)return it([new La(v,[])]);const Ie=Jr(t)===u;return this.processSegment(M,L,G,Q,Ie?Lt:u).pipe((0,pt.U)(Ce=>null===Ce?null:[new La(v,Ce)]))}))}}function Cf(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function RE(n){const e=[],t=new Set;for(const r of n){if(!Cf(r)){e.push(r);continue}const s=e.find(u=>r.value.routeConfig===u.value.routeConfig);void 0!==s?(s.children.push(...r.children),t.add(s)):e.push(r)}for(const r of t){const s=RE(r.children);e.push(new La(r.value,s))}return e.filter(r=>!t.has(r))}function V_(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function NE(n){let e=n,t=e._segmentIndexShift??0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift??0;return t-1}function Hd(n){return n.data||{}}function kE(n){return n.resolve||{}}function PE(n){return"string"==typeof n.title||null===n.title}function $g(n){return Kn(e=>{const t=n(e);return t?(0,zt.D)(t).pipe((0,pt.U)(()=>e)):it(e)})}let Hg=(()=>{class n{buildTitle(t){let r,s=t.root;for(;void 0!==s;)r=this.getResolvedTitleForRoute(s)??r,s=s.children.find(u=>u.outlet===Lt);return r}getResolvedTitleForRoute(t){return t.data[Lu]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=m.Yz7({token:n,factory:function(){return(0,m.f3M)(FE)},providedIn:"root"}),n})(),FE=(()=>{class n extends Hg{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(Yi))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class PC{}class LC extends class FC{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const Gg=new m.OlP("",{providedIn:"root",factory:()=>({})}),Gd=new m.OlP("ROUTES");let $a=(()=>{class n{constructor(t,r){this.injector=t,this.compiler=r,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return it(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=Pa(t.loadComponent()).pipe((0,Yr.b)(u=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=u}),sf(()=>{this.componentLoaders.delete(t)})),s=new r_(r,()=>new ka.x).pipe(tf());return this.componentLoaders.set(t,s),s}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return it({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const u=this.loadModuleFactoryOrRoutes(r.loadChildren).pipe((0,pt.U)(g=>{this.onLoadEndListener&&this.onLoadEndListener(r);let v,b,A=!1;Array.isArray(g)?b=g:(v=g.create(t).injector,b=j0(v.get(Gd,[],m.XFs.Self|m.XFs.Optional)));return{routes:b.map(yf),injector:v}}),sf(()=>{this.childrenLoaders.delete(r)})),c=new r_(u,()=>new ka.x).pipe(tf());return this.childrenLoaders.set(r,c),c}loadModuleFactoryOrRoutes(t){return Pa(t()).pipe((0,Kr.z)(r=>r instanceof m.YKP||Array.isArray(r)?it(r):(0,zt.D)(this.compiler.compileModuleAsync(r))))}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(m.zs3),m.LFG(m.Sil))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class Xx{}class Tf{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function UC(n){throw n}function U_(n,e,t){return e.parse("/")}const BC={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Bo={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};function Xr(){const n=(0,m.f3M)(W0),e=(0,m.f3M)(pf),t=(0,m.f3M)(xe),r=(0,m.f3M)(m.zs3),s=(0,m.f3M)(m.Sil),u=(0,m.f3M)(Gd,{optional:!0})??[],c=(0,m.f3M)(Gg,{optional:!0})??{},g=(0,m.f3M)(FE),v=(0,m.f3M)(Hg,{optional:!0}),b=(0,m.f3M)(Xx,{optional:!0}),A=(0,m.f3M)(PC,{optional:!0}),M=new Ln(null,n,e,t,r,s,j0(u));return b&&(M.urlHandlingStrategy=b),A&&(M.routeReuseStrategy=A),M.titleStrategy=v??g,function Sf(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(c,M),M}let Ln=(()=>{class n{constructor(t,r,s,u,c,g,v){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=s,this.location=u,this.config=v,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new ka.x,this.errorHandler=UC,this.malformedUriErrorHandler=U_,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=()=>it(void 0),this.urlHandlingStrategy=new Tf,this.routeReuseStrategy=new LC,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.configLoader=c.get($a),this.configLoader.onLoadEndListener=L=>this.triggerEvent(new I_(L)),this.configLoader.onLoadStartListener=L=>this.triggerEvent(new nE(L)),this.ngModule=c.get(m.h0i),this.console=c.get(m.c2e);const M=c.get(m.R0b);this.isNgZoneEnabled=M instanceof m.R0b&&m.R0b.isInAngularZone(),this.resetConfig(v),this.currentUrlTree=function $0(){return new uc(new Bt([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=oE(this.currentUrlTree,this.rootComponentType),this.transitions=new os({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){return this.location.getState()?.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(Pi(s=>0!==s.id),(0,pt.U)(s=>({...s,extractedUrl:this.urlHandlingStrategy.extract(s.rawUrl)})),Kn(s=>{let u=!1,c=!1;return it(s).pipe((0,Yr.b)(g=>{this.currentNavigation={id:g.id,initialUrl:g.rawUrl,extractedUrl:g.extractedUrl,trigger:g.source,extras:g.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),Kn(g=>{const v=this.browserUrlTree.toString(),b=!this.navigated||g.extractedUrl.toString()!==v||v!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||b)&&this.urlHandlingStrategy.shouldProcessUrl(g.rawUrl))return us(g.source)&&(this.browserUrlTree=g.extractedUrl),it(g).pipe(Kn(M=>{const L=this.transitions.getValue();return r.next(new kg(M.id,this.serializeUrl(M.extractedUrl),M.source,M.restoredState)),L!==this.transitions.getValue()?sc.E:Promise.resolve(M)}),function AE(n,e,t,r){return Kn(s=>function P_(n,e,t,r,s){return new Yx(n,e,t,r,s).apply()}(n,e,t,s.extractedUrl,r).pipe((0,pt.U)(u=>({...s,urlAfterRedirects:u}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,Yr.b)(M=>{this.currentNavigation={...this.currentNavigation,finalUrl:M.urlAfterRedirects},s.urlAfterRedirects=M.urlAfterRedirects}),function Qx(n,e,t,r,s,u){return(0,Kr.z)(c=>function F_(n,e,t,r,s,u,c="emptyOnly",g="legacy"){return new ja(n,e,t,r,s,c,g,u).recognize().pipe(Kn(v=>null===v?function ME(n){return new cr.y(e=>e.error(n))}(new xE):it(v)))}(n,e,t,c.urlAfterRedirects,r.serialize(c.urlAfterRedirects),r,s,u).pipe((0,pt.U)(g=>({...c,targetSnapshot:g}))))}(this.ngModule.injector,this.rootComponentType,this.config,this.urlSerializer,this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,Yr.b)(M=>{if(s.targetSnapshot=M.targetSnapshot,"eager"===this.urlUpdateStrategy){if(!M.extras.skipLocationChange){const G=this.urlHandlingStrategy.merge(M.urlAfterRedirects,M.rawUrl);this.setBrowserUrl(G,M)}this.browserUrlTree=M.urlAfterRedirects}const L=new tE(M.id,this.serializeUrl(M.extractedUrl),this.serializeUrl(M.urlAfterRedirects),M.targetSnapshot);r.next(L)}));if(b&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:L,extractedUrl:G,source:Q,restoredState:Ie,extras:Ce}=g,Ze=new kg(L,this.serializeUrl(G),Q,Ie);r.next(Ze);const lt=oE(G,this.rootComponentType).snapshot;return it(s={...g,targetSnapshot:lt,urlAfterRedirects:G,extras:{...Ce,skipLocationChange:!1,replaceUrl:!1}})}return this.rawUrlTree=g.rawUrl,g.resolve(null),sc.E}),(0,Yr.b)(g=>{const v=new dC(g.id,this.serializeUrl(g.extractedUrl),this.serializeUrl(g.urlAfterRedirects),g.targetSnapshot);this.triggerEvent(v)}),(0,pt.U)(g=>s={...g,guards:R_(g.targetSnapshot,g.currentSnapshot,this.rootContexts)}),function bC(n,e){return(0,Kr.z)(t=>{const{targetSnapshot:r,currentSnapshot:s,guards:{canActivateChecks:u,canDeactivateChecks:c}}=t;return 0===c.length&&0===u.length?it({...t,guardsResult:!0}):function DC(n,e,t,r){return(0,zt.D)(n).pipe((0,Kr.z)(s=>function wE(n,e,t,r,s){const u=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return u&&0!==u.length?it(u.map(g=>{const v=Ba(e)??s,b=ju(g,v);return Pa(function yE(n){return n&&wf(n.canDeactivate)}(b)?b.canDeactivate(n,e,t,r):v.runInContext(()=>b(n,e,t,r))).pipe(Vo())})).pipe(Bd()):it(!0)}(s.component,s.route,t,e,r)),Vo(s=>!0!==s,!0))}(c,r,s,n).pipe((0,Kr.z)(g=>g&&function gE(n){return"boolean"==typeof n}(g)?function _E(n,e,t,r){return(0,zt.D)(e).pipe(Na(s=>t_(function vE(n,e){return null!==n&&e&&e(new Ux(n)),it(!0)}(s.route.parent,r),function CC(n,e){return null!==n&&e&&e(new Bx(n)),it(!0)}(s.route,r),function SC(n,e,t){const r=e[e.length-1],u=e.slice(0,e.length-1).reverse().map(c=>function pE(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(c)).filter(c=>null!==c).map(c=>L0(()=>it(c.guards.map(v=>{const b=Ba(c.node)??t,A=ju(v,b);return Pa(function as(n){return n&&wf(n.canActivateChild)}(A)?A.canActivateChild(r,n):b.runInContext(()=>A(r,n))).pipe(Vo())})).pipe(Bd())));return it(u).pipe(Bd())}(n,s.path,t),function TC(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return it(!0);const s=r.map(u=>L0(()=>{const c=Ba(e)??t,g=ju(u,c);return Pa(function wC(n){return n&&wf(n.canActivate)}(g)?g.canActivate(e,n):c.runInContext(()=>g(e,n))).pipe(Vo())}));return it(s).pipe(Bd())}(n,s.route,t))),Vo(s=>!0!==s,!0))}(r,u,n,e):it(g)),(0,pt.U)(g=>({...t,guardsResult:g})))})}(this.ngModule.injector,g=>this.triggerEvent(g)),(0,Yr.b)(g=>{if(s.guardsResult=g.guardsResult,cc(g.guardsResult))throw hC(0,g.guardsResult);const v=new w_(g.id,this.serializeUrl(g.extractedUrl),this.serializeUrl(g.urlAfterRedirects),g.targetSnapshot,!!g.guardsResult);this.triggerEvent(v)}),Pi(g=>!!g.guardsResult||(this.restoreHistory(g),this.cancelNavigationTransition(g,"",3),!1)),$g(g=>{if(g.guards.canActivateChecks.length)return it(g).pipe((0,Yr.b)(v=>{const b=new Fa(v.id,this.serializeUrl(v.extractedUrl),this.serializeUrl(v.urlAfterRedirects),v.targetSnapshot);this.triggerEvent(b)}),Kn(v=>{let b=!1;return it(v).pipe(function RC(n,e){return(0,Kr.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:s}}=t;if(!s.length)return it(t);let u=0;return(0,zt.D)(s).pipe(Na(c=>function Jx(n,e,t,r){const s=n.routeConfig,u=n._resolve;return void 0!==s?.title&&!PE(s)&&(u[Lu]=s.title),function NC(n,e,t,r){const s=function OC(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===s.length)return it({});const u={};return(0,zt.D)(s).pipe((0,Kr.z)(c=>function kC(n,e,t,r){const s=Ba(e)??r,u=ju(n,s);return Pa(u.resolve?u.resolve(e,t):s.runInContext(()=>u(e,t)))}(n[c],e,t,r).pipe(Vo(),(0,Yr.b)(g=>{u[c]=g}))),s_(1),function U0(n){return(0,pt.U)(()=>n)}(u),Pu(c=>Ef(c)?sc.E:ef(c)))}(u,n,e,r).pipe((0,pt.U)(c=>(n._resolvedData=c,n.data=uE(n,t).resolve,s&&PE(s)&&(n.data[Lu]=s.title),null)))}(c.route,r,n,e)),(0,Yr.b)(()=>u++),s_(1),(0,Kr.z)(c=>u===s.length?it(t):sc.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,Yr.b)({next:()=>b=!0,complete:()=>{b||(this.restoreHistory(v),this.cancelNavigationTransition(v,"",2))}}))}),(0,Yr.b)(v=>{const b=new E_(v.id,this.serializeUrl(v.extractedUrl),this.serializeUrl(v.urlAfterRedirects),v.targetSnapshot);this.triggerEvent(b)}))}),$g(g=>{const v=b=>{const A=[];b.routeConfig?.loadComponent&&!b.routeConfig._loadedComponent&&A.push(this.configLoader.loadComponent(b.routeConfig).pipe((0,Yr.b)(M=>{b.component=M}),(0,pt.U)(()=>{})));for(const M of b.children)A.push(...v(M));return A};return Cg(v(g.targetSnapshot.root)).pipe(rf(),nf(1))}),$g(()=>this.afterPreactivation()),(0,pt.U)(g=>{const v=function $x(n,e,t){const r=Vg(n,e._root,t?t._root:void 0);return new sE(r,e)}(this.routeReuseStrategy,g.targetSnapshot,g.currentRouterState);return s={...g,targetRouterState:v}}),(0,Yr.b)(g=>{this.currentUrlTree=g.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(g.urlAfterRedirects,g.rawUrl),this.routerState=g.targetRouterState,"deferred"===this.urlUpdateStrategy&&(g.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,g),this.browserUrlTree=g.urlAfterRedirects)}),((n,e,t)=>(0,pt.U)(r=>(new fE(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,g=>this.triggerEvent(g)),(0,Yr.b)({next(){u=!0},complete(){u=!0}}),sf(()=>{u||c||this.cancelNavigationTransition(s,"",1),this.currentNavigation?.id===s.id&&(this.currentNavigation=null)}),Pu(g=>{if(c=!0,Va(g)){pC(g)||(this.navigated=!0,this.restoreHistory(s,!0));const v=new dc(s.id,this.serializeUrl(s.extractedUrl),g.message,g.cancellationCode);if(r.next(v),pC(g)){const b=this.urlHandlingStrategy.merge(g.url,this.rawUrlTree),A={skipLocationChange:s.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||us(s.source)};this.scheduleNavigation(b,"imperative",null,A,{resolve:s.resolve,reject:s.reject,promise:s.promise})}else s.resolve(!1)}else{this.restoreHistory(s,!0);const v=new Us(s.id,this.serializeUrl(s.extractedUrl),g,s.targetSnapshot??void 0);r.next(v);try{s.resolve(this.errorHandler(g))}catch(b){s.reject(b)}}return sc.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next({...this.transitions.value,...t})}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{const s={replaceUrl:!0},u=t.state?.navigationId?t.state:null;if(u){const g={...u};delete g.navigationId,delete g.\u0275routerPageId,0!==Object.keys(g).length&&(s.state=g)}const c=this.parseUrl(t.url);this.scheduleNavigation(c,r,u,s)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){this.config=t.map(yf),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:s,queryParams:u,fragment:c,queryParamsHandling:g,preserveFragment:v}=r,b=s||this.routerState.root,A=v?this.currentUrlTree.fragment:c;let M=null;switch(g){case"merge":M={...this.currentUrlTree.queryParams,...u};break;case"preserve":M=this.currentUrlTree.queryParams;break;default:M=u||null}return null!==M&&(M=this.removeEmptyProps(M)),oC(b,this.currentUrlTree,t,M,A??null)}navigateByUrl(t,r={skipLocationChange:!1}){const s=cc(t)?t:this.parseUrl(t),u=this.urlHandlingStrategy.merge(s,this.rawUrlTree);return this.scheduleNavigation(u,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function qg(n){for(let e=0;e<n.length;e++){if(null==n[e])throw new m.vHH(4008,false)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(s){r=this.malformedUriErrorHandler(s,this.urlSerializer,t)}return r}isActive(t,r){let s;if(s=!0===r?{...BC}:!1===r?{...Bo}:r,cc(t))return H0(this.currentUrlTree,t,s);const u=this.parseUrl(t);return H0(this.currentUrlTree,u,s)}removeEmptyProps(t){return Object.keys(t).reduce((r,s)=>{const u=t[s];return null!=u&&(r[s]=u),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new Bu(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.titleStrategy?.updateTitle(this.routerState.snapshot),t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,s,u,c){if(this.disposed)return Promise.resolve(!1);let g,v,b;c?(g=c.resolve,v=c.reject,b=c.promise):b=new Promise((L,G)=>{g=L,v=G});const A=++this.navigationId;let M;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(s=this.location.getState()),M=s&&s.\u0275routerPageId?s.\u0275routerPageId:u.replaceUrl||u.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1):M=0,this.setTransition({id:A,targetPageId:M,source:r,restoredState:s,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:u,resolve:g,reject:v,promise:b,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),b.catch(L=>Promise.reject(L))}setBrowserUrl(t,r){const s=this.urlSerializer.serialize(t),u={...r.extras.state,...this.generateNgRouterState(r.id,r.targetPageId)};this.location.isCurrentPathEqualTo(s)||r.extras.replaceUrl?this.location.replaceState(s,"",u):this.location.go(s,"",u)}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const s=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.currentNavigation?.finalUrl||0===s?this.currentUrlTree===this.currentNavigation?.finalUrl&&0===s&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(s)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r,s){const u=new dc(t.id,this.serializeUrl(t.extractedUrl),r,s);this.triggerEvent(u),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){m.$Z()},n.\u0275prov=m.Yz7({token:n,factory:function(){return Xr()},providedIn:"root"}),n})();function us(n){return"imperative"!==n}class pc{}let Wd=(()=>{class n{constructor(t,r,s,u,c){this.router=t,this.injector=s,this.preloadingStrategy=u,this.loader=c}setUpPreloading(){this.subscription=this.router.events.pipe(Pi(t=>t instanceof Bu),Na(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const s=[];for(const u of r){u.providers&&!u._injector&&(u._injector=(0,m.MMx)(u.providers,t,`Route: ${u.path}`));const c=u._injector??t,g=u._loadedInjector??c;u.loadChildren&&!u._loadedRoutes&&void 0===u.canLoad||u.loadComponent&&!u._loadedComponent?s.push(this.preloadConfig(c,u)):(u.children||u._loadedRoutes)&&s.push(this.processRoutes(g,u.children??u._loadedRoutes))}return(0,zt.D)(s).pipe((0,ic.J)())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let s;s=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):it(null);const u=s.pipe((0,Kr.z)(c=>null===c?it(void 0):(r._loadedRoutes=c.routes,r._loadedInjector=c.injector,this.processRoutes(c.injector??t,c.routes))));if(r.loadComponent&&!r._loadedComponent){const c=this.loader.loadComponent(r);return(0,zt.D)([u,c]).pipe((0,ic.J)())}return u})}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(Ln),m.LFG(m.Sil),m.LFG(m.lqb),m.LFG(pc),m.LFG($a))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Hu=new m.OlP("");let gc=(()=>{class n{constructor(t,r,s={}){this.router=t,this.viewportScroller=r,this.options=s,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},s.scrollPositionRestoration=s.scrollPositionRestoration||"disabled",s.anchorScrolling=s.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof kg?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Bu&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof df&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new df(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){m.$Z()},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();function mc(n,e){return{\u0275kind:n,\u0275providers:e}}function Wg(n){return[{provide:Gd,multi:!0,useValue:n}]}function j_(){const n=(0,m.f3M)(m.zs3);return e=>{const t=n.get(m.z2F);if(e!==t.components[0])return;const r=n.get(Ln),s=n.get($_);1===n.get(Kg)&&r.initialNavigation(),n.get(UE,null,m.XFs.Optional)?.setUpPreloading(),n.get(Hu,null,m.XFs.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),s.next(),s.complete()}}const $_=new m.OlP("",{factory:()=>new ka.x}),Kg=new m.OlP("",{providedIn:"root",factory:()=>1});const UE=new m.OlP("");function qC(n){return mc(0,[{provide:UE,useExisting:Wd},{provide:pc,useExisting:n}])}const Nf=new m.OlP("ROUTER_FORROOT_GUARD"),Zg=[xe,{provide:W0,useClass:c_},{provide:Ln,useFactory:Xr},pf,{provide:Fd,useFactory:function B_(n){return n.routerState.root},deps:[Ln]},$a];function H_(){return new m.PXZ("Router",Ln)}let BE=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[Zg,[],Wg(t),{provide:Nf,useFactory:KC,deps:[[Ln,new m.FiY,new m.tp0]]},{provide:Gg,useValue:r||{}},r?.useHash?{provide:me,useClass:nt}:{provide:me,useClass:Ye},{provide:Hu,useFactory:()=>{const n=(0,m.f3M)(Ln),e=(0,m.f3M)(Xa),t=(0,m.f3M)(Gg);return t.scrollOffset&&e.setOffset(t.scrollOffset),new gc(n,e,t)}},r?.preloadingStrategy?qC(r.preloadingStrategy).\u0275providers:[],{provide:m.PXZ,multi:!0,useFactory:H_},r?.initialNavigation?q_(r):[],[{provide:W_,useFactory:j_},{provide:m.tb,multi:!0,useExisting:W_}]]}}static forChild(t){return{ngModule:n,providers:[Wg(t)]}}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(Nf,8))},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({imports:[A_]}),n})();function KC(n){return"guarded"}function q_(n){return["disabled"===n.initialNavigation?mc(3,[{provide:m.ip1,multi:!0,useFactory:()=>{const e=(0,m.f3M)(Ln);return()=>{e.setUpLocationChangeListener()}}},{provide:Kg,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?mc(2,[{provide:Kg,useValue:0},{provide:m.ip1,multi:!0,deps:[m.zs3],useFactory:e=>{const t=e.get(B,Promise.resolve(null));let r=!1;return()=>t.then(()=>new Promise(u=>{const c=e.get(Ln),g=e.get($_);(function s(u){e.get(Ln).events.pipe(Pi(g=>g instanceof Bu||g instanceof dc||g instanceof Us),(0,pt.U)(g=>g instanceof Bu||g instanceof dc&&(0===g.code||1===g.code)&&null),Pi(g=>null!==g),nf(1)).subscribe(()=>{u()})})(()=>{u(!0),r=!0}),c.afterPreactivation=()=>(u(!0),r||g.closed?it(void 0):g),c.initialNavigation()}))}}]).\u0275providers:[]]}const W_=new m.OlP(""),GE=[];let ZC=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({imports:[BE.forRoot(GE),BE]}),n})(),zE=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=m.Xpm({type:n,selectors:[["app-navbar"]],decls:21,vars:0,consts:[[1,"navbar","navbar-expand-lg","navbar-dark","bg-primary","navbar-customization"],[1,"container-fluid"],["href","#",1,"navbar-brand"],["src","../../../assets/rocket-only.png","width","50","height","50","alt","Bootstrap","loading","lazy",1,"d-inline-block","align-top"],["type","button","data-bs-toggle","collapse","data-bs-target","#navbarSupportedContent2","aria-controls","navbarSupportedContent2","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["id","navbarSupportedContent2",1,"collapse","navbar-collapse"],[1,"navbar-nav","me-auto","mb-2","mb-lg-0"],[1,"nav-item"],["aria-current","page","href","#",1,"nav-link","active","nav-link-customization"],["href","#",1,"nav-link","nav-link-customization"],[1,"nav-item","dropdown"],["href","#","role","button","data-bs-toggle","dropdown","aria-expanded","false",1,"nav-link","dropdown-toggle","nav-link-customization"],[1,"dropdown-menu"],["href","#",1,"dropdown-item","nav-link-customization"]],template:function(t,r){1&t&&(m.TgZ(0,"nav",0)(1,"div",1)(2,"a",2),m._UZ(3,"img",3),m.qZA(),m.TgZ(4,"button",4),m._UZ(5,"span",5),m.qZA(),m.TgZ(6,"div",6)(7,"ul",7)(8,"li",8)(9,"a",9),m._uU(10,"Inicio"),m.qZA()(),m.TgZ(11,"li",8)(12,"a",10),m._uU(13,"Qui\xe9n Soy"),m.qZA()(),m.TgZ(14,"li",11)(15,"a",12),m._uU(16," Qui\xe9n Sos "),m.qZA(),m.TgZ(17,"ul",13)(18,"li")(19,"a",14),m._uU(20,"Registrarse"),m.qZA()()()()()()()())},styles:[".navbar-customization[_ngcontent-%COMP%]{background-color:#e6e0bb!important;border-bottom:.1rem solid #0D0F45!important}.nav-link-customization[_ngcontent-%COMP%]{color:#0d0f45}.active[_ngcontent-%COMP%]{color:#0d0f45!important;font-family:orbitron-black}.navbar-toggler[_ngcontent-%COMP%]{background-color:#0d0f45}"]}),n})(),qE=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=m.Xpm({type:n,selectors:[["app-login-form"]],decls:16,vars:0,consts:[[1,"login-container","text-center"],[1,"form-signin","w-100","m-auto"],["src","../../../assets/rayo-espacial-logo-grande.png","alt","","width","200","height","200",1,"mb-4"],[1,"form-floating"],["type","email","id","floatingInput","placeholder","name@example.com",1,"form-control"],["for","floatingInput"],["type","password","id","floatingPassword","placeholder","Password",1,"form-control"],["for","floatingPassword"],["type","submit",1,"w-100","btn","btn-lg","btn-primary","mt-4","submit-customization"],[1,"mt-5","mb-3","text-muted"]],template:function(t,r){1&t&&(m.TgZ(0,"div",0)(1,"main",1)(2,"form"),m._UZ(3,"img",2),m.TgZ(4,"div",3),m._UZ(5,"input",4),m.TgZ(6,"label",5),m._uU(7,"Email"),m.qZA()(),m.TgZ(8,"div",3),m._UZ(9,"input",6),m.TgZ(10,"label",7),m._uU(11,"Password"),m.qZA()(),m.TgZ(12,"button",8),m._uU(13,"Ingresar"),m.qZA(),m.TgZ(14,"p",9),m._uU(15,"\xa9 Ignacio Perez Artaso - 2022"),m.qZA()()()())},dependencies:[$y,Kp,yd],styles:[".login-container[_ngcontent-%COMP%]{display:flex;align-items:center;padding-top:40px;padding-bottom:40px;background-color:#e6e0bb}.form-signin[_ngcontent-%COMP%]{max-width:330px;padding:15px}.form-signin[_ngcontent-%COMP%]   .form-floating[_ngcontent-%COMP%]:focus-within{z-index:2}.form-signin[_ngcontent-%COMP%]   input[type=email][_ngcontent-%COMP%]{margin-bottom:-1px;border-bottom-right-radius:0;border-bottom-left-radius:0}.form-signin[_ngcontent-%COMP%]   input[type=password][_ngcontent-%COMP%]{margin-bottom:10px;border-top-left-radius:0;border-top-right-radius:0}.submit-customization[_ngcontent-%COMP%]{background-color:#0d0f45!important;border:none!important}"]}),n})(),WE=(()=>{class n{constructor(){this.title="sala-juegos-2022"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=m.Xpm({type:n,selectors:[["app-root"]],decls:3,vars:0,template:function(t,r){1&t&&m._UZ(0,"app-navbar")(1,"app-login-form")(2,"router-outlet")},dependencies:[mf,zE,qE]}),n})();var Ei=P(2011);const KE_firebaseConfig={apiKey:"AIzaSyD0FF-k7oz1RvH525aoPPdGGfo8Y7q_9Rw",authDomain:"salajuegos2022.firebaseapp.com",databaseURL:"https://salajuegos2022-default-rtdb.firebaseio.com",projectId:"salajuegos2022",storageBucket:"salajuegos2022.appspot.com",messagingSenderId:"15910949459",appId:"1:15910949459:web:cdef48d9faa371ab90aca6"};var YC=P(6451),Yg=P(5363),ZE=P(6063);class K_ extends ka.x{constructor(e=1/0,t=1/0,r=ZE.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:s,_timestampProvider:u,_windowTime:c}=this;t||(r.push(e),!s&&r.push(u.now()+c)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:s}=this,u=s.slice();for(let c=0;c<u.length&&!e.closed;c+=r?1:2)e.next(u[c]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:s}=this,u=(s?1:2)*e;if(e<1/0&&u<r.length&&r.splice(0,r.length-u),!s){const c=t.now();let g=0;for(let v=1;v<r.length&&r[v]<=c;v+=2)g=v;g&&r.splice(0,g+1)}}}var YE=P(3099);function Z_(n,e,t){let r,s=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:s=!1,scheduler:t}=n):r=n??1/0,(0,YE.B)({connector:()=>new K_(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:s})}function Y_(n,e){return(0,vg.m)(e)?Kn(()=>n,e):Kn(()=>n)}var Qg=P(9468),Dn=P(5813);P(5867);var ye=P(5861),Bs=P(9681),Zd=P(4859),Ct=P(2090),yc=P(1877);const X_=new Map,ev={activated:!1,tokenObservers:[]},jo={initialized:!1,enabled:!1};function Nr(n){return X_.get(n)||ev}function go(n,e){X_.set(n,e)}function ls(){return jo}class rT{constructor(e,t,r,s,u){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=s,this.upperBound=u,this.pending=null,this.nextErrorWaitInterval=s,s>u)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,ye.Z)(function*(){t.stop();try{t.pending=new Ct.BH,yield function iT(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new Ct.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const vr=new Ct.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function nv(n){if(!Nr(n).activated)throw vr.create("use-before-activation",{appName:n.name})}function Xg(n,e){return Yd.apply(this,arguments)}function Yd(){return(Yd=(0,ye.Z)(function*({url:n,body:e},t){var r,s;const u={"Content-Type":"application/json"},c=t.getImmediate({optional:!0});if(c){const G=yield c.getHeartbeatsHeader();G&&(u["X-Firebase-Client"]=G)}const g={method:"POST",body:JSON.stringify(e),headers:u};let v,b;try{v=yield fetch(n,g)}catch(G){throw vr.create("fetch-network-error",{originalErrorMessage:null===(r=G)||void 0===r?void 0:r.message})}if(200!==v.status)throw vr.create("fetch-status-error",{httpStatus:v.status});try{b=yield v.json()}catch(G){throw vr.create("fetch-parse-error",{originalErrorMessage:null===(s=G)||void 0===s?void 0:s.message})}const A=b.ttl.match(/^([\d.]+)(s)$/);if(!A||!A[2]||isNaN(Number(A[1])))throw vr.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${b.ttl}`});const M=1e3*Number(A[1]),L=Date.now();return{token:b.token,expireTimeMillis:L+M,issuedAtTimeMillis:L}})).apply(this,arguments)}function rI(n,e){const{projectId:t,appId:r,apiKey:s}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${r}:exchangeDebugToken?key=${s}`,body:{debug_token:e}}}const Qd="firebase-app-check-store";let Ff=null;function ov(){return Ff||(Ff=new Promise((n,e)=>{var t;try{const r=indexedDB.open("firebase-app-check-database",1);r.onsuccess=s=>{n(s.target.result)},r.onerror=s=>{var u;e(vr.create("storage-open",{originalErrorMessage:null===(u=s.target.error)||void 0===u?void 0:u.message}))},r.onupgradeneeded=s=>{0===s.oldVersion&&s.target.result.createObjectStore(Qd,{keyPath:"compositeKey"})}}catch(r){e(vr.create("storage-open",{originalErrorMessage:null===(t=r)||void 0===t?void 0:t.message}))}}),Ff)}function av(){return(av=(0,ye.Z)(function*(n,e){const r=(yield ov()).transaction(Qd,"readwrite"),u=r.objectStore(Qd).put({compositeKey:n,value:e});return new Promise((c,g)=>{u.onsuccess=v=>{c()},r.onerror=v=>{var b;g(vr.create("storage-set",{originalErrorMessage:null===(b=v.target.error)||void 0===b?void 0:b.message}))}})})).apply(this,arguments)}const Lf=new yc.Yd("@firebase/app-check");function hI(n,e){return(0,Ct.hl)()?function oI(n,e){return function lI(n,e){return av.apply(this,arguments)}(function dI(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{Lf.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function fI(){return ls().enabled}function pI(){return dv.apply(this,arguments)}function dv(){return(dv=(0,ye.Z)(function*(){const n=ls();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const lT={error:"UNKNOWN_ERROR"};function cT(n){return Ct.US.encodeString(JSON.stringify(n),!1)}function em(n){return tm.apply(this,arguments)}function tm(){return(tm=(0,ye.Z)(function*(n,e=!1){const t=n.app;nv(t);const r=Nr(t);let u,s=r.token;if(!s){const v=yield r.cachedTokenPromise;v&&Vf(v)&&(s=v)}if(!e&&s&&Vf(s))return{token:s.token};let g,c=!1;if(fI()){r.exchangeTokenPromise||(r.exchangeTokenPromise=Xg(rI(t,yield pI()),n.heartbeatServiceProvider).then(b=>(r.exchangeTokenPromise=void 0,b)),c=!0);const v=yield r.exchangeTokenPromise;return yield hI(t,v),go(t,Object.assign(Object.assign({},r),{token:v})),{token:v.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().then(v=>(r.exchangeTokenPromise=void 0,v)),c=!0),s=yield r.exchangeTokenPromise}catch(v){"appCheck/throttled"===v.code?Lf.warn(v.message):Lf.error(v),u=v}return s?(g={token:s.token},go(t,Object.assign(Object.assign({},r),{token:s})),yield hI(t,s)):g=mI(u),c&&fv(t,g),g})).apply(this,arguments)}function rm(n,e){const t=Nr(n),r=t.tokenObservers.filter(s=>s.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),go(n,Object.assign(Object.assign({},t),{tokenObservers:r}))}function hv(n){const{app:e}=n,t=Nr(e);let r=t.tokenRefresher;r||(r=function gI(n){const{app:e}=n;return new rT((0,ye.Z)(function*(){let r;if(r=Nr(e).token?yield em(n,!0):yield em(n),r.error)throw r.error}),()=>!0,()=>{const t=Nr(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),go(e,Object.assign(Object.assign({},t),{tokenRefresher:r}))),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function fv(n,e){const t=Nr(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch{}}function Vf(n){return n.expireTimeMillis-Date.now()>0}function mI(n){return{token:cT(lT),error:n}}class yI{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=Nr(this.app);for(const t of e)rm(this.app,t.next);return Promise.resolve()}}const vv="app-check-internal";!function DI(){(0,Bs._registerComponent)(new Zd.wA("app-check",n=>function _I(n,e){return new yI(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(vv).initialize()})),(0,Bs._registerComponent)(new Zd.wA(vv,n=>function vI(n){return{getToken:e=>em(n,e),addTokenListener:e=>function nm(n,e,t,r){const{app:s}=n,u=Nr(s),c={next:t,error:r,type:e};if(go(s,Object.assign(Object.assign({},u),{tokenObservers:[...u.tokenObservers,c]})),u.token&&Vf(u.token)){const g=u.token;Promise.resolve().then(()=>{t({token:g.token}),hv(n)}).catch(()=>{})}u.cachedTokenPromise.then(()=>hv(n))}(n,"INTERNAL",e),removeTokenListener:e=>rm(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Bs.registerVersion)("@firebase/app-check","0.5.12")}();class im{constructor(){return(0,Dn.vb)("app-check")}}typeof window<"u"&&window;var am=P(127);const xI=new m.OlP("angularfire2.auth.use-emulator"),bv=new m.OlP("angularfire2.auth.settings"),MI=new m.OlP("angularfire2.auth.tenant-id"),RI=new m.OlP("angularfire2.auth.langugage-code"),ET=new m.OlP("angularfire2.auth.use-device-language"),IT=new m.OlP("angularfire.auth.persistence"),bT=(n,e,t,r,s,u,c,g)=>(0,Ei.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const v=e.runOutsideAngular(()=>n.auth());if(t&&v.useEmulator(...t),r&&(v.tenantId=r),v.languageCode=s,u&&v.useDeviceLanguage(),c)for(const[b,A]of Object.entries(c))v.settings[b]=A;return g&&v.setPersistence(g),v},[t,r,s,u,c,g]);let NI=(()=>{class n{constructor(t,r,s,u,c,g,v,b,A,M,L,G){const Q=new ka.x,Ie=it(void 0).pipe((0,Yg.Q)(c.outsideAngular),Kn(()=>u.runOutsideAngular(()=>Promise.resolve().then(P.bind(P,2274)))),(0,pt.U)(()=>(0,Ei.on)(t,u,r)),(0,pt.U)(Ce=>bT(Ce,u,g,b,A,M,v,L)),Z_({bufferSize:1,refCount:!1}));if(lr(s))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=it(null);else{Ie.pipe(Vo()).subscribe();const Ze=Ie.pipe(Kn(tt=>tt.getRedirectResult().then(Dt=>Dt,()=>null)),Dn.iC,Z_({bufferSize:1,refCount:!1})),lt=Ie.pipe(Kn(tt=>new cr.y(Dt=>({unsubscribe:u.runOutsideAngular(()=>tt.onAuthStateChanged(kt=>Dt.next(kt),kt=>Dt.error(kt),()=>Dt.complete()))})))),ct=Ie.pipe(Kn(tt=>new cr.y(Dt=>({unsubscribe:u.runOutsideAngular(()=>tt.onIdTokenChanged(kt=>Dt.next(kt),kt=>Dt.error(kt),()=>Dt.complete()))}))));this.authState=Ze.pipe(Y_(lt),(0,Qg.R)(c.outsideAngular),(0,Yg.Q)(c.insideAngular)),this.user=Ze.pipe(Y_(ct),(0,Qg.R)(c.outsideAngular),(0,Yg.Q)(c.insideAngular)),this.idToken=this.user.pipe(Kn(tt=>tt?(0,zt.D)(tt.getIdToken()):it(null))),this.idTokenResult=this.user.pipe(Kn(tt=>tt?(0,zt.D)(tt.getIdTokenResult()):it(null))),this.credential=(0,YC.T)(Ze,Q,this.authState.pipe(Pi(tt=>!tt))).pipe((0,pt.U)(tt=>tt?.user?tt:null),(0,Qg.R)(c.outsideAngular),(0,Yg.Q)(c.insideAngular))}return(0,Ei.pX)(this,Ie,u,{spy:{apply:(Ce,Ze,lt)=>{(Ce.startsWith("signIn")||Ce.startsWith("createUser"))&&lt.then(ct=>Q.next(ct))}}})}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(Ei.Dh),m.LFG(Ei.xv,8),m.LFG(m.Lbi),m.LFG(m.R0b),m.LFG(Dn.HU),m.LFG(xI,8),m.LFG(bv,8),m.LFG(MI,8),m.LFG(RI,8),m.LFG(ET,8),m.LFG(IT,8),m.LFG(im,8))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),OI=(()=>{class n{constructor(){am.Z.registerVersion("angularfire",Dn.q4.full,"auth-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({providers:[NI]}),n})();var $f=P(4986);function Dv(){return(0,Zr.e)((n,e)=>{let t,r=!1;n.subscribe((0,dr.x)(e,s=>{const u=t;t=s,r&&e.next([u,s]),r=!0}))})}function kI(n,e){return n===e}P(2274);var Xe,PI=P(3942),CT=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Ha={},Cv=Cv||{},At=CT||self;function lm(){}function Tv(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function $o(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var cm="closure_uid_"+(1e9*Math.random()>>>0),ST=0;function FI(n,e,t){return n.call.apply(n.bind,arguments)}function AT(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var s=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(s,r),n.apply(e,s)}}return function(){return n.apply(e,arguments)}}function Or(n,e,t){return(Or=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?FI:AT).apply(null,arguments)}function dm(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function wr(n,e){function t(){}t.prototype=e.prototype,n.Z=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Vb=function(r,s,u){for(var c=Array(arguments.length-2),g=2;g<arguments.length;g++)c[g-2]=arguments[g];return e.prototype[s].apply(r,c)}}function Gu(){this.s=this.s,this.o=this.o}var VI={};Gu.prototype.s=!1,Gu.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function TT(n){return Object.prototype.hasOwnProperty.call(n,cm)&&n[cm]||(n[cm]=++ST)}(this);delete VI[n]}},Gu.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const UI=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1},BI=Array.prototype.forEach?function(n,e,t){Array.prototype.forEach.call(n,e,t)}:function(n,e,t){const r=n.length,s="string"==typeof n?n.split(""):n;for(let u=0;u<r;u++)u in s&&e.call(t,s[u],u,n)};function hm(n){return Array.prototype.concat.apply([],arguments)}function Sv(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function Hf(n){return/^[\s\xa0]*$/.test(n)}var bi,jI=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function Ii(n,e){return-1!=n.indexOf(e)}function Av(n,e){return n<e?-1:n>e?1:0}e:{var $I=At.navigator;if($I){var HI=$I.userAgent;if(HI){bi=HI;break e}}bi=""}function xv(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function GI(n){const e={};for(const t in n)e[t]=n[t];return e}var Mv="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Rv(n,e){let t,r;for(let s=1;s<arguments.length;s++){for(t in r=arguments[s],r)n[t]=r[t];for(let u=0;u<Mv.length;u++)t=Mv[u],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function Nv(n){return Nv[" "](n),n}Nv[" "]=lm;var eh,n,zI=Ii(bi,"Opera"),Xd=Ii(bi,"Trident")||Ii(bi,"MSIE"),qI=Ii(bi,"Edge"),Ov=qI||Xd,fm=Ii(bi,"Gecko")&&!(Ii(bi.toLowerCase(),"webkit")&&!Ii(bi,"Edge"))&&!(Ii(bi,"Trident")||Ii(bi,"MSIE"))&&!Ii(bi,"Edge"),kv=Ii(bi.toLowerCase(),"webkit")&&!Ii(bi,"Edge");function Pv(){var n=At.document;return n?n.documentMode:void 0}e:{var Fv="",Lv=(n=bi,fm?/rv:([^\);]+)(\)|;)/.exec(n):qI?/Edge\/([\d\.]+)/.exec(n):Xd?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):kv?/WebKit\/(\S+)/.exec(n):zI?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(Lv&&(Fv=Lv?Lv[1]:""),Xd){var Gf=Pv();if(null!=Gf&&Gf>parseFloat(Fv)){eh=String(Gf);break e}}eh=Fv}var RT={};var NT=At.document&&Xd&&(Pv()||parseInt(eh,10))||void 0,fM=function(){if(!At.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{At.addEventListener("test",lm,e),At.removeEventListener("test",lm,e)}catch{}return n}();function ei(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}function wc(n,e){if(ei.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(fm){e:{try{Nv(e.nodeName);var s=!0;break e}catch{}s=!1}s||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:OT[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&wc.Z.h.call(this)}}ei.prototype.h=function(){this.defaultPrevented=!0},wr(wc,ei);var OT={2:"touch",3:"pen",4:"mouse"};wc.prototype.h=function(){wc.Z.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Ec="closure_listenable_"+(1e6*Math.random()|0),kT=0;function KI(n,e,t,r,s){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ia=s,this.key=++kT,this.ca=this.fa=!1}function th(n){n.ca=!0,n.listener=null,n.proxy=null,n.src=null,n.ia=null}function zf(n){this.src=n,this.g={},this.h=0}function pm(n,e){var t=e.type;if(t in n.g){var u,r=n.g[t],s=UI(r,e);(u=0<=s)&&Array.prototype.splice.call(r,s,1),u&&(th(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function gm(n,e,t,r){for(var s=0;s<n.length;++s){var u=n[s];if(!u.ca&&u.listener==e&&u.capture==!!t&&u.ia==r)return s}return-1}zf.prototype.add=function(n,e,t,r,s){var u=n.toString();(n=this.g[u])||(n=this.g[u]=[],this.h++);var c=gm(n,e,r,s);return-1<c?(e=n[c],t||(e.fa=!1)):((e=new KI(e,this.src,u,!!r,s)).fa=t,n.push(e)),e};var mm="closure_lm_"+(1e6*Math.random()|0),Uv={};function ZI(n,e,t,r,s){if(r&&r.once)return Bv(n,e,t,r,s);if(Array.isArray(e)){for(var u=0;u<e.length;u++)ZI(n,e[u],t,r,s);return null}return t=jv(t),n&&n[Ec]?n.N(e,t,$o(r)?!!r.capture:!!r,s):YI(n,e,t,!1,r,s)}function YI(n,e,t,r,s,u){if(!e)throw Error("Invalid event type");var c=$o(s)?!!s.capture:!!s,g=JI(n);if(g||(n[mm]=g=new zf(n)),(t=g.add(e,t,r,c,u)).proxy)return t;if(r=function PT(){var e=LT;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)fM||(s=c),void 0===s&&(s=!1),n.addEventListener(e.toString(),r,s);else if(n.attachEvent)n.attachEvent(QI(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function Bv(n,e,t,r,s){if(Array.isArray(e)){for(var u=0;u<e.length;u++)Bv(n,e[u],t,r,s);return null}return t=jv(t),n&&n[Ec]?n.O(e,t,$o(r)?!!r.capture:!!r,s):YI(n,e,t,!0,r,s)}function FT(n,e,t,r,s){if(Array.isArray(e))for(var u=0;u<e.length;u++)FT(n,e[u],t,r,s);else r=$o(r)?!!r.capture:!!r,t=jv(t),n&&n[Ec]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=gm(u=n.g[e],t,r,s))&&(th(u[t]),Array.prototype.splice.call(u,t,1),0==u.length&&(delete n.g[e],n.h--))):n&&(n=JI(n))&&(e=n.g[e.toString()],n=-1,e&&(n=gm(e,t,r,s)),(t=-1<n?e[n]:null)&&ym(t))}function ym(n){if("number"!=typeof n&&n&&!n.ca){var e=n.src;if(e&&e[Ec])pm(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(QI(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=JI(e))?(pm(t,n),0==t.h&&(t.src=null,e[mm]=null)):th(n)}}}function QI(n){return n in Uv?Uv[n]:Uv[n]="on"+n}function LT(n,e){if(n.ca)n=!0;else{e=new wc(e,this);var t=n.listener,r=n.ia||n.src;n.fa&&ym(n),n=t.call(r,e)}return n}function JI(n){return(n=n[mm])instanceof zf?n:null}var XI="__closure_events_fn_"+(1e9*Math.random()>>>0);function jv(n){return"function"==typeof n?n:(n[XI]||(n[XI]=function(e){return n.handleEvent(e)}),n[XI])}function kr(){Gu.call(this),this.i=new zf(this),this.P=this,this.I=null}function ti(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new ei(e,n);else if(e instanceof ei)e.target=e.target||n;else{var s=e;Rv(e=new ei(r,n),s)}if(s=!0,t)for(var u=t.length-1;0<=u;u--){var c=e.g=t[u];s=_m(c,r,!0,e)&&s}if(s=_m(c=e.g=n,r,!0,e)&&s,s=_m(c,r,!1,e)&&s,t)for(u=0;u<t.length;u++)s=_m(c=e.g=t[u],r,!1,e)&&s}function _m(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var s=!0,u=0;u<e.length;++u){var c=e[u];if(c&&!c.ca&&c.capture==t){var g=c.listener,v=c.ia||c.src;c.fa&&pm(n.i,c),s=!1!==g.call(v,r)&&s}}return s&&!r.defaultPrevented}wr(kr,Gu),kr.prototype[Ec]=!0,kr.prototype.removeEventListener=function(n,e,t,r){FT(this,n,e,t,r)},kr.prototype.M=function(){if(kr.Z.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)th(t[r]);delete n.g[e],n.h--}}this.I=null},kr.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},kr.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var $v=At.JSON.stringify;function VT(){var n=zv;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var Gv,eb=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new BT,n=>n.reset());class BT{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function jT(n){At.setTimeout(()=>{throw n},0)}function Hv(n,e){Gv||function qf(){var n=At.Promise.resolve(void 0);Gv=function(){n.then(tb)}}(),vm||(Gv(),vm=!0),zv.add(n,e)}var vm=!1,zv=new class UT{constructor(){this.h=this.g=null}add(e,t){const r=eb.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function tb(){for(var n;n=VT();){try{n.h.call(n.g)}catch(t){jT(t)}var e=eb;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}vm=!1}function Wf(n,e){kr.call(this),this.h=n||1,this.g=e||At,this.j=Or(this.kb,this),this.l=Date.now()}function wm(n){n.da=!1,n.S&&(n.g.clearTimeout(n.S),n.S=null)}function qv(n,e,t){if("function"==typeof n)t&&(n=Or(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=Or(n.handleEvent,n)}return 2147483647<Number(e)?-1:At.setTimeout(n,e||0)}function nb(n){n.g=qv(()=>{n.g=null,n.i&&(n.i=!1,nb(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}wr(Wf,kr),(Xe=Wf.prototype).da=!1,Xe.S=null,Xe.kb=function(){if(this.da){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-n):(this.S&&(this.g.clearTimeout(this.S),this.S=null),ti(this,"tick"),this.da&&(wm(this),this.start()))}},Xe.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Xe.M=function(){Wf.Z.M.call(this),wm(this),delete this.g};class pM extends Gu{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:nb(this)}M(){super.M(),this.g&&(At.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Kf(n){Gu.call(this),this.h=n,this.g={}}wr(Kf,Gu);var rb=[];function ib(n,e,t,r){Array.isArray(t)||(t&&(rb[0]=t.toString()),t=rb);for(var s=0;s<t.length;s++){var u=ZI(e,t[s],r||n.handleEvent,!1,n.h||n);if(!u)break;n.g[u.key]=u}}function sb(n){xv(n.g,function(e,t){this.g.hasOwnProperty(t)&&ym(e)},n),n.g={}}function Em(){this.g=!0}function qu(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function HT(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var s=r[1];if(Array.isArray(s)&&!(1>s.length)){var u=s[0];if("noop"!=u&&"stop"!=u&&"close"!=u)for(var c=1;c<s.length;c++)s[c]=""}}}return $v(t)}catch{return e}}(n,t)+(r?" "+r:"")})}Kf.prototype.M=function(){Kf.Z.M.call(this),sb(this)},Kf.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Em.prototype.Aa=function(){this.g=!1},Em.prototype.info=function(){};var Ga={},nh=null;function Im(){return nh=nh||new kr}function ob(n){ei.call(this,Ga.Ma,n)}function Yf(n){const e=Im();ti(e,new ob(e,n))}function Qf(n,e){ei.call(this,Ga.STAT_EVENT,n),this.stat=e}function Pr(n){const e=Im();ti(e,new Qf(e,n))}function ab(n,e){ei.call(this,Ga.Na,n),this.size=e}function Jf(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return At.setTimeout(function(){n()},e)}Ga.Ma="serverreachability",wr(ob,ei),Ga.STAT_EVENT="statevent",wr(Qf,ei),Ga.Na="timingevent",wr(ab,ei);var Xf={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},Wv={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function ep(){}function ub(){}ep.prototype.h=null;var rp,tp={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function lb(){ei.call(this,"d")}function np(){ei.call(this,"c")}function ip(){}function Ic(n,e,t,r){this.l=n,this.j=e,this.m=t,this.X=r||1,this.V=new Kf(this),this.P=GT,this.W=new Wf(n=Ov?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new bm}function bm(){this.i=null,this.g="",this.h=!1}wr(lb,ei),wr(np,ei),wr(ip,ep),ip.prototype.g=function(){return new XMLHttpRequest},ip.prototype.i=function(){return{}},rp=new ip;var GT=45e3,Zv={},Dm={};function Yv(n,e,t){n.K=1,n.v=op(Go(e)),n.s=t,n.U=!0,Qv(n,null)}function Qv(n,e){n.F=Date.now(),rh(n),n.A=Go(n.v);var t=n.A,r=n.X;Array.isArray(r)||(r=[String(r)]),iw(t.h,"t",r),n.C=0,t=n.l.H,n.h=new bm,n.g=aS(n.l,t?e:null,!n.s),0<n.O&&(n.L=new pM(Or(n.Ia,n,n.g),n.O)),ib(n.V,n.g,"readystatechange",n.gb),e=n.H?GI(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ea(n.A,n.u,n.s,e)):(n.u="GET",n.g.ea(n.A,n.u,null,e)),Yf(1),function Zf(n,e,t,r,s,u){n.info(function(){if(n.g)if(u)for(var c="",g=u.split("&"),v=0;v<g.length;v++){var b=g[v].split("=");if(1<b.length){var A=b[0];b=b[1];var M=A.split("_");c=2<=M.length&&"type"==M[1]?c+(A+"=")+b+"&":c+(A+"=redacted&")}}else c=null;else c=u;return"XMLHTTP REQ ("+r+") [attempt "+s+"]: "+e+"\n"+t+"\n"+c})}(n.j,n.u,n.A,n.m,n.X,n.s)}function Cm(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Ba}function Jv(n,e,t){let s,r=!0;for(;!n.I&&n.C<t.length;){if(s=zT(n,t),s==Dm){4==e&&(n.o=4,Pr(14),r=!1),qu(n.j,n.m,null,"[Incomplete Response]");break}if(s==Zv){n.o=4,Pr(15),qu(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}qu(n.j,n.m,s,null),ew(n,s)}Cm(n)&&s!=Dm&&s!=Zv&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,Pr(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.aa&&(n.aa=!0,(e=n.l).g==n&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+t.length),Db(e),e.L=!0,Pr(11))):(qu(n.j,n.m,t,"[Invalid Chunked Response]"),Wu(n),ih(n))}function zT(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?Dm:(t=Number(e.substring(t,r)),isNaN(t)?Zv:(r+=1)+t>e.length?Dm:(e=e.substr(r,t),n.C=r+t,e))}function rh(n){n.Y=Date.now()+n.P,Xv(n,n.P)}function Xv(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=Jf(Or(n.eb,n),e)}function Tm(n){n.B&&(At.clearTimeout(n.B),n.B=null)}function ih(n){0==n.l.G||n.I||Tb(n.l,n)}function Wu(n){Tm(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,wm(n.W),sb(n.V),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function ew(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||Mm(t.i,n)))if(t.I=n.N,!n.J&&Mm(t.i,n)&&3==t.G){try{var r=t.Ca.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var s=r;if(0==s[0]){e:if(!t.u){if(t.g){if(!(t.g.F+3e3<n.F))break e;Bm(t),Um(t)}bb(t),Pr(18)}}else t.ta=s[1],0<t.ta-t.U&&37500>s[2]&&t.N&&0==t.A&&!t.v&&(t.v=Jf(Or(t.ab,t),6e3));if(1>=mb(t.i)&&t.ka){try{t.ka()}catch{}t.ka=void 0}}else Sc(t,11)}else if((n.J||t.g==n)&&Bm(t),!Hf(e))for(s=t.Ca.g.parse(e),e=0;e<s.length;e++){let b=s[e];if(t.U=b[0],b=b[1],2==t.G)if("c"==b[0]){t.J=b[1],t.la=b[2];const A=b[3];null!=A&&(t.ma=A,t.h.info("VER="+t.ma));const M=b[4];null!=M&&(t.za=M,t.h.info("SVER="+t.za));const L=b[5];null!=L&&"number"==typeof L&&0<L&&(t.K=r=1.5*L,t.h.info("backChannelRequestTimeoutMs_="+r)),r=t;const G=n.g;if(G){const Q=G.g?G.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Q){var u=r.i;!u.g&&(Ii(Q,"spdy")||Ii(Q,"quic")||Ii(Q,"h2"))&&(u.j=u.l,u.g=new Set,u.h&&(Rm(u,u.h),u.h=null))}if(r.D){const Ie=G.g?G.g.getResponseHeader("X-HTTP-Session-Id"):null;Ie&&(r.sa=Ie,Mn(r.F,r.D,Ie))}}t.G=3,t.j&&t.j.xa(),t.$&&(t.O=Date.now()-n.F,t.h.info("Handshake RTT: "+t.O+"ms"));var c=n;if((r=t).oa=cw(r,r.H?r.la:null,r.W),c.J){yb(r.i,c);var g=c,v=r.K;v&&g.setTimeout(v),g.B&&(Tm(g),rh(g)),r.g=c}else sS(r);0<t.l.length&&uw(t)}else"stop"!=b[0]&&"close"!=b[0]||Sc(t,7);else 3==t.G&&("stop"==b[0]||"close"==b[0]?"stop"==b[0]?Sc(t,7):Vm(t):"noop"!=b[0]&&t.j&&t.j.wa(b),t.A=0)}Yf(4)}catch{}}function tw(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(Tv(n)||"string"==typeof n)BI(n,e,void 0);else{if(n.T&&"function"==typeof n.T)var t=n.T();else if(n.R&&"function"==typeof n.R)t=void 0;else if(Tv(n)||"string"==typeof n){t=[];for(var r=n.length,s=0;s<r;s++)t.push(s)}else for(s in t=[],r=0,n)t[r++]=s;r=function cb(n){if(n.R&&"function"==typeof n.R)return n.R();if("string"==typeof n)return n.split("");if(Tv(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),s=r.length;for(var u=0;u<s;u++)e.call(void 0,r[u],t&&t[u],n)}}function hr(n,e){this.h={},this.g=[],this.i=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var r=0;r<t;r+=2)this.set(arguments[r],arguments[r+1])}else if(n)if(n instanceof hr)for(t=n.T(),r=0;r<t.length;r++)this.set(t[r],n.get(t[r]));else for(r in n)this.set(r,n[r])}function Ku(n){if(n.i!=n.g.length){for(var e=0,t=0;e<n.g.length;){var r=n.g[e];bc(n.h,r)&&(n.g[t++]=r),e++}n.g.length=t}if(n.i!=n.g.length){var s={};for(t=e=0;e<n.g.length;)bc(s,r=n.g[e])||(n.g[t++]=r,s[r]=1),e++;n.g.length=t}}function bc(n,e){return Object.prototype.hasOwnProperty.call(n,e)}(Xe=Ic.prototype).setTimeout=function(n){this.P=n},Xe.gb=function(n){n=n.target;const e=this.L;e&&3==zo(n)?e.l():this.Ia(n)},Xe.Ia=function(n){try{if(n==this.g)e:{const A=zo(this.g);var e=this.g.Da();const M=this.g.ba();if(!(3>A)&&(3!=A||Ov||this.g&&(this.h.h||this.g.ga()||hp(this.g)))){this.I||4!=A||7==e||Yf(8==e||0>=M?3:2),Tm(this);var t=this.g.ba();this.N=t;t:if(Cm(this)){var r=hp(this.g);n="";var s=r.length,u=4==zo(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Wu(this),ih(this);var c="";break t}this.h.i=new At.TextDecoder}for(e=0;e<s;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:u&&e==s-1});r.splice(0,s),this.h.g+=n,this.C=0,c=this.h.g}else c=this.g.ga();if(this.i=200==t,function $T(n,e,t,r,s,u,c){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+s+"]: "+e+"\n"+t+"\n"+u+" "+c})}(this.j,this.u,this.A,this.m,this.X,A,t),this.i){if(this.$&&!this.J){t:{if(this.g){var g,v=this.g;if((g=v.g?v.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Hf(g)){var b=g;break t}}b=null}if(!(t=b)){this.i=!1,this.o=3,Pr(12),Wu(this),ih(this);break e}qu(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,ew(this,t)}this.U?(Jv(this,A,c),Ov&&this.i&&3==A&&(ib(this.V,this.W,"tick",this.fb),this.W.start())):(qu(this.j,this.m,c,null),ew(this,c)),4==A&&Wu(this),this.i&&!this.I&&(4==A?Tb(this.l,this):(this.i=!1,rh(this)))}else 400==t&&0<c.indexOf("Unknown SID")?(this.o=3,Pr(12)):(this.o=0,Pr(13)),Wu(this),ih(this)}}}catch{}},Xe.fb=function(){if(this.g){var n=zo(this.g),e=this.g.ga();this.C<e.length&&(Tm(this),Jv(this,n,e),this.i&&4!=n&&rh(this))}},Xe.cancel=function(){this.I=!0,Wu(this)},Xe.eb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function Ho(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(Yf(3),Pr(17)),Wu(this),this.o=2,ih(this)):Xv(this,this.Y-n)},(Xe=hr.prototype).R=function(){Ku(this);for(var n=[],e=0;e<this.g.length;e++)n.push(this.h[this.g[e]]);return n},Xe.T=function(){return Ku(this),this.g.concat()},Xe.get=function(n,e){return bc(this.h,n)?this.h[n]:e},Xe.set=function(n,e){bc(this.h,n)||(this.i++,this.g.push(n)),this.h[n]=e},Xe.forEach=function(n,e){for(var t=this.T(),r=0;r<t.length;r++){var s=t[r],u=this.get(s);n.call(e,u,s,this)}};var db=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function sh(n,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,n instanceof sh){this.g=void 0!==e?e:n.g,sp(this,n.j),this.s=n.s,Zu(this,n.i),Sm(this,n.m),this.l=n.l,e=n.h;var t=new up;t.i=e.i,e.g&&(t.g=new hr(e.g),t.h=e.h),Am(this,t),this.o=n.o}else n&&(t=String(n).match(db))?(this.g=!!e,sp(this,t[1]||"",!0),this.s=ap(t[2]||""),Zu(this,t[3]||"",!0),Sm(this,t[4]),this.l=ap(t[5]||"",!0),Am(this,t[6]||"",!0),this.o=ap(t[7]||"")):(this.g=!!e,this.h=new up(null,this.g))}function Go(n){return new sh(n)}function sp(n,e,t){n.j=t?ap(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function Zu(n,e,t){n.i=t?ap(e,!0):e}function Sm(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function Am(n,e,t){e instanceof up?(n.h=e,function yM(n,e){e&&!n.j&&(za(n),n.i=null,n.g.forEach(function(t,r){var s=r.toLowerCase();r!=s&&(Cc(this,r),iw(this,s,t))},n)),n.j=e}(n.h,n.g)):(t||(e=Dc(e,mM)),n.h=new up(e,n.g))}function Mn(n,e,t){n.h.set(e,t)}function op(n){return Mn(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function ap(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function Dc(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,hb),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function hb(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}sh.prototype.toString=function(){var n=[],e=this.j;e&&n.push(Dc(e,nw,!0),":");var t=this.i;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(Dc(e,nw,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.i&&"/"!=t.charAt(0)&&n.push("/"),n.push(Dc(t,"/"==t.charAt(0)?rw:xm,!0))),(t=this.h.toString())&&n.push("?",t),(t=this.o)&&n.push("#",Dc(t,fb)),n.join("")};var nw=/[#\/\?@]/g,xm=/[#\?:]/g,rw=/[#\?]/g,mM=/[#\?@]/g,fb=/#/g;function up(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function za(n){n.g||(n.g=new hr,n.h=0,n.i&&function gM(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),s=null;if(0<=r){var u=n[t].substring(0,r);s=n[t].substring(r+1)}else u=n[t];e(u,s?decodeURIComponent(s.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function Cc(n,e){za(n),e=Yu(n,e),bc(n.g.h,e)&&(n.i=null,n.h-=n.g.get(e).length,bc((n=n.g).h,e)&&(delete n.h[e],n.i--,n.g.length>2*n.i&&Ku(n)))}function pb(n,e){return za(n),e=Yu(n,e),bc(n.g.h,e)}function iw(n,e,t){Cc(n,e),0<t.length&&(n.i=null,n.g.set(Yu(n,e),Sv(t)),n.h+=t.length)}function Yu(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function ZT(n){this.l=n||YT,n=At.PerformanceNavigationTiming?0<(n=At.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(At.g&&At.g.Ea&&At.g.Ea()&&At.g.Ea().Zb),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(Xe=up.prototype).add=function(n,e){za(this),this.i=null,n=Yu(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},Xe.forEach=function(n,e){za(this),this.g.forEach(function(t,r){BI(t,function(s){n.call(e,s,r,this)},this)},this)},Xe.T=function(){za(this);for(var n=this.g.R(),e=this.g.T(),t=[],r=0;r<e.length;r++)for(var s=n[r],u=0;u<s.length;u++)t.push(e[r]);return t},Xe.R=function(n){za(this);var e=[];if("string"==typeof n)pb(this,n)&&(e=hm(e,this.g.get(Yu(this,n))));else{n=this.g.R();for(var t=0;t<n.length;t++)e=hm(e,n[t])}return e},Xe.set=function(n,e){return za(this),this.i=null,pb(this,n=Yu(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},Xe.get=function(n,e){return n&&0<(n=this.R(n)).length?String(n[0]):e},Xe.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var n=[],e=this.g.T(),t=0;t<e.length;t++){var r=e[t],s=encodeURIComponent(String(r));r=this.R(r);for(var u=0;u<r.length;u++){var c=s;""!==r[u]&&(c+="="+encodeURIComponent(String(r[u]))),n.push(c)}}return this.i=n.join("&")};var YT=10;function gb(n){return!!n.h||!!n.g&&n.g.size>=n.j}function mb(n){return n.h?1:n.g?n.g.size:0}function Mm(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function Rm(n,e){n.g?n.g.add(e):n.h=e}function yb(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function sw(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return Sv(n.i)}function Nm(){}function QT(){this.g=new Nm}function JT(n,e,t){const r=t||"";try{tw(n,function(s,u){let c=s;$o(s)&&(c=$v(s)),e.push(r+u+"="+encodeURIComponent(c))})}catch(s){throw e.push(r+"type="+encodeURIComponent("_badmap")),s}}function Om(n,e,t,r,s){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,s(r)}catch{}}function oh(n){this.l=n.$b||null,this.j=n.ib||!1}function lp(n,e){kr.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=km,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}ZT.prototype.cancel=function(){if(this.i=sw(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},Nm.prototype.stringify=function(n){return At.JSON.stringify(n,void 0)},Nm.prototype.parse=function(n){return At.JSON.parse(n,void 0)},wr(oh,ep),oh.prototype.g=function(){return new lp(this.l,this.j)},oh.prototype.i=function(n){return function(){return n}}({}),wr(lp,kr);var km=0;function ow(n){n.j.read().then(n.Sa.bind(n)).catch(n.ha.bind(n))}function cp(n){n.readyState=4,n.l=null,n.j=null,n.A=null,dp(n)}function dp(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(Xe=lp.prototype).open=function(n,e){if(this.readyState!=km)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,dp(this)},Xe.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||At).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},Xe.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,cp(this)),this.readyState=km},Xe.Va=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,dp(this)),this.g&&(this.readyState=3,dp(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(typeof At.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;ow(this)}else n.text().then(this.Ua.bind(this),this.ha.bind(this))},Xe.Sa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?cp(this):dp(this),3==this.readyState&&ow(this)}},Xe.Ua=function(n){this.g&&(this.response=this.responseText=n,cp(this))},Xe.Ta=function(n){this.g&&(this.response=n,cp(this))},Xe.ha=function(){this.g&&cp(this)},Xe.setRequestHeader=function(n,e){this.v.append(n,e)},Xe.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},Xe.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(lp.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var _M=At.JSON.parse;function ir(n){kr.call(this),this.headers=new hr,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=XT,this.K=this.L=!1}wr(ir,kr);var XT="",vM=/^https?$/i,wM=["POST","PUT"];function IM(n){return"content-type"==n.toLowerCase()}function eS(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,tS(n),Tc(n)}function tS(n){n.D||(n.D=!0,ti(n,"complete"),ti(n,"error"))}function nS(n){if(n.h&&typeof Cv<"u"&&(!n.C[1]||4!=zo(n)||2!=n.ba()))if(n.v&&4==zo(n))qv(n.Fa,0,n);else if(ti(n,"readystatechange"),4==zo(n)){n.h=!1;try{const g=n.ba();e:switch(g){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===g){var s=String(n.H).match(db)[1]||null;if(!s&&At.self&&At.self.location){var u=At.self.location.protocol;s=u.substr(0,u.length-1)}r=!vM.test(s?s.toLowerCase():"")}t=r}if(t)ti(n,"complete"),ti(n,"success");else{n.m=6;try{var c=2<zo(n)?n.g.statusText:""}catch{c=""}n.j=c+" ["+n.ba()+"]",tS(n)}}finally{Tc(n)}}}function Tc(n,e){if(n.g){rS(n);const t=n.g,r=n.C[0]?lm:null;n.g=null,n.C=null,e||ti(n,"ready");try{t.onreadystatechange=r}catch{}}}function rS(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(At.clearTimeout(n.A),n.A=null)}function zo(n){return n.g?n.g.readyState:0}function hp(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case XT:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function Pm(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=function vb(n){let e="";return xv(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):Mn(n,e,t))}function Fm(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function Lm(n){this.za=0,this.l=[],this.h=new Em,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Fm("failFast",!1,n),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Fm("baseRetryDelayMs",5e3,n),this.$a=Fm("retryDelaySeedMs",1e4,n),this.Ya=Fm("forwardChannelMaxRetries",2,n),this.ra=Fm("forwardChannelRequestTimeoutMs",2e4,n),this.qa=n&&n.xmlHttpFactory||void 0,this.Ba=n&&n.Yb||!1,this.K=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.J="",this.i=new ZT(n&&n.concurrentRequestLimit),this.Ca=new QT,this.ja=n&&n.fastHandshake||!1,this.Ra=n&&n.Wb||!1,n&&n.Aa&&this.h.Aa(),n&&n.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&n&&n.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!n||!1!==n.Xb}function Vm(n){if(aw(n),3==n.G){var e=n.V++,t=Go(n.F);Mn(t,"SID",n.J),Mn(t,"RID",e),Mn(t,"TYPE","terminate"),Qu(n,t),(e=new Ic(n,n.h,e,void 0)).K=2,e.v=op(Go(t)),t=!1,At.navigator&&At.navigator.sendBeacon&&(t=At.navigator.sendBeacon(e.v.toString(),"")),!t&&At.Image&&((new Image).src=e.v,t=!0),t||(e.g=aS(e.l,null),e.g.ea(e.v)),e.F=Date.now(),rh(e)}lw(n)}function Um(n){n.g&&(Db(n),n.g.cancel(),n.g=null)}function aw(n){Um(n),n.u&&(At.clearTimeout(n.u),n.u=null),Bm(n),n.i.cancel(),n.m&&("number"==typeof n.m&&At.clearTimeout(n.m),n.m=null)}function wb(n,e){n.l.push(new class{constructor(n,e){this.h=n,this.g=e}}(n.Za++,e)),3==n.G&&uw(n)}function uw(n){gb(n.i)||n.m||(n.m=!0,Hv(n.Ha,n),n.C=0)}function Eb(n,e){var t;t=e?e.m:n.V++;const r=Go(n.F);Mn(r,"SID",n.J),Mn(r,"RID",t),Mn(r,"AID",n.U),Qu(n,r),n.o&&n.s&&Pm(r,n.o,n.s),t=new Ic(n,n.h,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.l=e.D.concat(n.l)),e=Ib(n,t,1e3),t.setTimeout(Math.round(.5*n.ra)+Math.round(.5*n.ra*Math.random())),Rm(n.i,t),Yv(t,r,e)}function Qu(n,e){n.j&&tw({},function(t,r){Mn(e,r,t)})}function Ib(n,e,t){t=Math.min(n.l.length,t);var r=n.j?Or(n.j.Oa,n.j,n):null;e:{var s=n.l;let u=-1;for(;;){const c=["count="+t];-1==u?0<t?(u=s[0].h,c.push("ofs="+u)):u=0:c.push("ofs="+u);let g=!0;for(let v=0;v<t;v++){let b=s[v].h;const A=s[v].g;if(b-=u,0>b)u=Math.max(0,s[v].h-100),g=!1;else try{JT(A,c,"req"+b+"_")}catch{r&&r(A)}}if(g){r=c.join("&");break e}}}return n=n.l.splice(0,t),e.D=n,r}function sS(n){n.g||n.u||(n.Y=1,Hv(n.Ga,n),n.A=0)}function bb(n){return!(n.g||n.u||3<=n.A||(n.Y++,n.u=Jf(Or(n.Ga,n),oS(n,n.A)),n.A++,0))}function Db(n){null!=n.B&&(At.clearTimeout(n.B),n.B=null)}function Cb(n){n.g=new Ic(n,n.h,"rpc",n.Y),null===n.o&&(n.g.H=n.s),n.g.O=0;var e=Go(n.oa);Mn(e,"RID","rpc"),Mn(e,"SID",n.J),Mn(e,"CI",n.N?"0":"1"),Mn(e,"AID",n.U),Qu(n,e),Mn(e,"TYPE","xmlhttp"),n.o&&n.s&&Pm(e,n.o,n.s),n.K&&n.g.setTimeout(n.K);var t=n.g;n=n.la,t.K=1,t.v=op(Go(e)),t.s=null,t.U=!0,Qv(t,n)}function Bm(n){null!=n.v&&(At.clearTimeout(n.v),n.v=null)}function Tb(n,e){var t=null;if(n.g==e){Bm(n),Db(n),n.g=null;var r=2}else{if(!Mm(n.i,e))return;t=e.D,yb(n.i,e),r=1}if(n.I=e.N,0!=n.G)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var s=n.C;ti(r=Im(),new ab(r,t,e,s)),uw(n)}else sS(n);else if(3==(s=e.o)||0==s&&0<n.I||!(1==r&&function iS(n,e){return!(mb(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.l=e.D.concat(n.l),0):1==n.G||2==n.G||n.C>=(n.Xa?0:n.Ya)||(n.m=Jf(Or(n.Ha,n,e),oS(n,n.C)),n.C++,0)))}(n,e)||2==r&&bb(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),s){case 1:Sc(n,5);break;case 4:Sc(n,10);break;case 3:Sc(n,6);break;default:Sc(n,2)}}function oS(n,e){let t=n.Pa+Math.floor(Math.random()*n.$a);return n.j||(t*=2),t*e}function Sc(n,e){if(n.h.info("Error code "+e),2==e){var t=null;n.j&&(t=null);var r=Or(n.jb,n);t||(t=new sh("//www.google.com/images/cleardot.gif"),At.location&&"http"==At.location.protocol||sp(t,"https"),op(t)),function _b(n,e){const t=new Em;if(At.Image){const r=new Image;r.onload=dm(Om,t,r,"TestLoadImage: loaded",!0,e),r.onerror=dm(Om,t,r,"TestLoadImage: error",!1,e),r.onabort=dm(Om,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=dm(Om,t,r,"TestLoadImage: timeout",!1,e),At.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else Pr(2);n.G=0,n.j&&n.j.va(e),lw(n),aw(n)}function lw(n){n.G=0,n.I=-1,n.j&&((0!=sw(n.i).length||0!=n.l.length)&&(n.i.i.length=0,Sv(n.l),n.l.length=0),n.j.ua())}function cw(n,e,t){let r=function qT(n){return n instanceof sh?Go(n):new sh(n,void 0)}(t);if(""!=r.i)e&&Zu(r,e+"."+r.i),Sm(r,r.m);else{const s=At.location;r=function WT(n,e,t,r){var s=new sh(null,void 0);return n&&sp(s,n),e&&Zu(s,e),t&&Sm(s,t),r&&(s.l=r),s}(s.protocol,e?e+"."+s.hostname:s.hostname,+s.port,t)}return n.aa&&xv(n.aa,function(s,u){Mn(r,u,s)}),t=n.sa,(e=n.D)&&t&&Mn(r,e,t),Mn(r,"VER",n.ma),Qu(n,r),r}function aS(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new ir(t&&n.Ba&&!n.qa?new oh({ib:!0}):n.qa)).L=n.H,e}function js(){}function jm(){if(Xd&&!(10<=Number(NT)))throw Error("Environmental error: no available transport.")}function Di(n,e){kr.call(this),this.g=new Lm(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.P=n,(n=e&&e.httpHeadersOverwriteParam)&&!Hf(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Hf(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new ah(this)}function Sb(n){lb.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function ds(){np.call(this),this.status=1}function ah(n){this.g=n}(Xe=ir.prototype).ea=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():rp.g(),this.C=function Kv(n){return n.h||(n.h=n.i())}(this.u?this.u:rp),this.g.onreadystatechange=Or(this.Fa,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(u){return void eS(this,u)}n=t||"";const s=new hr(this.headers);r&&tw(r,function(u,c){s.set(c,u)}),r=function xT(n){e:{var e=IM;const t=n.length,r="string"==typeof n?n.split(""):n;for(let s=0;s<t;s++)if(s in r&&e.call(void 0,r[s],s,n)){e=s;break e}e=-1}return 0>e?null:"string"==typeof n?n.charAt(e):n[e]}(s.T()),t=At.FormData&&n instanceof At.FormData,!(0<=UI(wM,e))||r||t||s.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),s.forEach(function(u,c){this.g.setRequestHeader(c,u)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{rS(this),0<this.B&&((this.K=function EM(n){return Xd&&function WI(){return function MT(n){var e=RT;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=jI(String(eh)).split("."),t=jI("9").split("."),r=Math.max(e.length,t.length);for(let c=0;0==n&&c<r;c++){var s=e[c]||"",u=t[c]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],u=/(\d*)(\D*)(.*)/.exec(u)||["","","",""],0==s[0].length&&0==u[0].length)break;n=Av(0==s[1].length?0:parseInt(s[1],10),0==u[1].length?0:parseInt(u[1],10))||Av(0==s[2].length,0==u[2].length)||Av(s[2],u[2]),s=s[3],u=u[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Or(this.pa,this)):this.A=qv(this.pa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(u){eS(this,u)}},Xe.pa=function(){typeof Cv<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,ti(this,"timeout"),this.abort(8))},Xe.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,ti(this,"complete"),ti(this,"abort"),Tc(this))},Xe.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Tc(this,!0)),ir.Z.M.call(this)},Xe.Fa=function(){this.s||(this.F||this.v||this.l?nS(this):this.cb())},Xe.cb=function(){nS(this)},Xe.ba=function(){try{return 2<zo(this)?this.g.status:-1}catch{return-1}},Xe.ga=function(){try{return this.g?this.g.responseText:""}catch{return""}},Xe.Qa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),_M(e)}},Xe.Da=function(){return this.m},Xe.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(Xe=Lm.prototype).ma=8,Xe.G=1,Xe.hb=function(n){try{this.h.info("Origin Trials invoked: "+n)}catch{}},Xe.Ha=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.V=Math.floor(1e5*Math.random()),n=this.V++;const s=new Ic(this,this.h,n,void 0);let u=this.s;if(this.P&&(u?(u=GI(u),Rv(u,this.P)):u=this.P),null===this.o&&(s.H=u),this.ja)e:{for(var e=0,t=0;t<this.l.length;t++){var r=this.l[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.l.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=Ib(this,s,e),Mn(t=Go(this.F),"RID",n),Mn(t,"CVER",22),this.D&&Mn(t,"X-HTTP-Session-Id",this.D),Qu(this,t),this.o&&u&&Pm(t,this.o,u),Rm(this.i,s),this.Ra&&Mn(t,"TYPE","init"),this.ja?(Mn(t,"$req",e),Mn(t,"SID","null"),s.$=!0,Yv(s,t,null)):Yv(s,t,e),this.G=2}}else 3==this.G&&(n?Eb(this,n):0==this.l.length||gb(this.i)||Eb(this))},Xe.Ga=function(){if(this.u=null,Cb(this),this.$&&!(this.L||null==this.g||0>=this.O)){var n=2*this.O;this.h.info("BP detection timer enabled: "+n),this.B=Jf(Or(this.bb,this),n)}},Xe.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,Pr(10),Um(this),Cb(this))},Xe.ab=function(){null!=this.v&&(this.v=null,Um(this),bb(this),Pr(19))},Xe.jb=function(n){n?(this.h.info("Successfully pinged google.com"),Pr(2)):(this.h.info("Failed to ping google.com"),Pr(1))},(Xe=js.prototype).xa=function(){},Xe.wa=function(){},Xe.va=function(){},Xe.ua=function(){},Xe.Oa=function(){},jm.prototype.g=function(n,e){return new Di(n,e)},wr(Di,kr),Di.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;n.Wa&&(n.h.info("Origin Trials enabled."),Hv(Or(n.hb,n,e))),Pr(0),n.W=e,n.aa=t||{},n.N=n.X,n.F=cw(n,null,n.W),uw(n)},Di.prototype.close=function(){Vm(this.g)},Di.prototype.u=function(n){if("string"==typeof n){var e={};e.__data__=n,wb(this.g,e)}else this.v?((e={}).__data__=$v(n),wb(this.g,e)):wb(this.g,n)},Di.prototype.M=function(){this.g.j=null,delete this.j,Vm(this.g),delete this.g,Di.Z.M.call(this)},wr(Sb,lb),wr(ds,np),wr(ah,js),ah.prototype.xa=function(){ti(this.g,"a")},ah.prototype.wa=function(n){ti(this.g,new Sb(n))},ah.prototype.va=function(n){ti(this.g,new ds(n))},ah.prototype.ua=function(){ti(this.g,"b")},jm.prototype.createWebChannel=jm.prototype.g,Di.prototype.send=Di.prototype.u,Di.prototype.open=Di.prototype.m,Di.prototype.close=Di.prototype.close,Xf.NO_ERROR=0,Xf.TIMEOUT=8,Xf.HTTP_ERROR=6,Wv.COMPLETE="complete",ub.EventType=tp,tp.OPEN="a",tp.CLOSE="b",tp.ERROR="c",tp.MESSAGE="d",kr.prototype.listen=kr.prototype.N,ir.prototype.listenOnce=ir.prototype.O,ir.prototype.getLastError=ir.prototype.La,ir.prototype.getLastErrorCode=ir.prototype.Da,ir.prototype.getStatus=ir.prototype.ba,ir.prototype.getResponseJson=ir.prototype.Qa,ir.prototype.getResponseText=ir.prototype.ga,ir.prototype.send=ir.prototype.ea;var dw=Ha.createWebChannelTransport=function(){return new jm},uS=Ha.getStatEventTarget=function(){return Im()},hw=Ha.ErrorCode=Xf,fw=Ha.EventType=Wv,Ab=Ha.Event=Ga,pw=Ha.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},lS=Ha.FetchXmlHttpFactory=oh,fp=Ha.WebChannel=ub,xb=Ha.XhrIo=ir;const Mb="@firebase/firestore";class Er{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Er.UNAUTHENTICATED=new Er(null),Er.GOOGLE_CREDENTIALS=new Er("google-credentials-uid"),Er.FIRST_PARTY=new Er("first-party-uid"),Er.MOCK_USER=new Er("mock-user");let uh="9.9.4";const qo=new yc.Yd("@firebase/firestore");function Wo(){return qo.logLevel}function Oe(n,...e){if(qo.logLevel<=yc.in.DEBUG){const t=e.map(Nb);qo.debug(`Firestore (${uh}): ${n}`,...t)}}function un(n,...e){if(qo.logLevel<=yc.in.ERROR){const t=e.map(Nb);qo.error(`Firestore (${uh}): ${n}`,...t)}}function Ac(n,...e){if(qo.logLevel<=yc.in.WARN){const t=e.map(Nb);qo.warn(`Firestore (${uh}): ${n}`,...t)}}function Nb(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function et(n="Unexpected state"){const e=`FIRESTORE (${uh}) INTERNAL ASSERTION FAILED: `+n;throw un(e),new Error(e)}function Tt(n,e){n||et()}function We(n,e){return n}const ce={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ne extends Ct.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Ir{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class Ob{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class kb{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Er.UNAUTHENTICATED))}shutdown(){}}class bM{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class gw{constructor(e){this.t=e,this.currentUser=Er.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let s=this.i;const u=b=>this.i!==s?(s=this.i,t(b)):Promise.resolve();let c=new Ir;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new Ir,e.enqueueRetryable(()=>u(this.currentUser))};const g=()=>{const b=c;e.enqueueRetryable((0,ye.Z)(function*(){yield b.promise,yield u(r.currentUser)}))},v=b=>{Oe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=b,this.auth.addAuthTokenListener(this.o),g()};this.t.onInit(b=>v(b)),setTimeout(()=>{if(!this.auth){const b=this.t.getImmediate({optional:!0});b?v(b):(Oe("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new Ir)}},0),g()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Oe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Tt("string"==typeof r.accessToken),new Ob(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Tt(null===e||"string"==typeof e),new Er(e)}}class Pb{constructor(e,t,r,s){this.h=e,this.l=t,this.m=r,this.g=s,this.type="FirstParty",this.user=Er.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(Tt(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class Fb{constructor(e,t,r,s){this.h=e,this.l=t,this.m=r,this.g=s}getToken(){return Promise.resolve(new Pb(this.h,this.l,this.m,this.g))}start(e,t){e.enqueueRetryable(()=>t(Er.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class mw{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Lb{constructor(e){this.T=e,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(e,t){const r=u=>{null!=u.error&&Oe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const c=u.token!==this.A;return this.A=u.token,Oe("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable(()=>r(u))};const s=u=>{Oe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.appCheck.addTokenListener(this.o)};this.T.onInit(u=>s(u)),setTimeout(()=>{if(!this.appCheck){const u=this.T.getImmediate({optional:!0});u?s(u):Oe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Tt("string"==typeof t.token),this.A=t.token,new mw(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function $m(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class pp{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=$m(40);for(let u=0;u<s.length;++u)r.length<20&&s[u]<t&&(r+=e.charAt(s[u]%e.length))}return r}}function xt(n,e){return n<e?-1:n>e?1:0}function lh(n,e,t){return n.length===e.length&&n.every((r,s)=>t(r,e[s]))}function yw(n){return n+"\0"}class Cn{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Ne(ce.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Ne(ce.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Ne(ce.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ne(ce.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Cn.fromMillis(Date.now())}static fromDate(e){return Cn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Cn(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?xt(this.nanoseconds,e.nanoseconds):xt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class bt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new bt(e)}static min(){return new bt(new Cn(0,0))}static max(){return new bt(new Cn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class gp{constructor(e,t,r){void 0===t?t=0:t>e.length&&et(),void 0===r?r=e.length-t:r>e.length-t&&et(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===gp.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof gp?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let s=0;s<r;s++){const u=e.get(s),c=t.get(s);if(u<c)return-1;if(u>c)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Qt extends gp{construct(e,t,r){return new Qt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Ne(ce.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(s=>s.length>0))}return new Qt(t)}static emptyPath(){return new Qt([])}}const DM=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Vn extends gp{construct(e,t,r){return new Vn(e,t,r)}static isValidIdentifier(e){return DM.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Vn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Vn(["__name__"])}static fromServerFormat(e){const t=[];let r="",s=0;const u=()=>{if(0===r.length)throw new Ne(ce.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let c=!1;for(;s<e.length;){const g=e[s];if("\\"===g){if(s+1===e.length)throw new Ne(ce.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const v=e[s+1];if("\\"!==v&&"."!==v&&"`"!==v)throw new Ne(ce.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=v,s+=2}else"`"===g?(c=!c,s++):"."!==g||c?(r+=g,s++):(u(),s++)}if(u(),c)throw new Ne(ce.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Vn(t)}static emptyPath(){return new Vn([])}}class Ge{constructor(e){this.path=e}static fromPath(e){return new Ge(Qt.fromString(e))}static fromName(e){return new Ge(Qt.fromString(e).popFirst(5))}static empty(){return new Ge(Qt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Qt.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Qt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ge(new Qt(e.slice()))}}class Hm{constructor(e,t,r,s){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=s}}function _w(n){return n.fields.find(e=>2===e.kind)}function ch(n){return n.fields.filter(e=>2!==e.kind)}Hm.UNKNOWN_ID=-1;class vw{constructor(e,t){this.fieldPath=e,this.kind=t}}class Gm{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Gm(0,hs.min())}}function Vb(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,s=bt.fromTimestamp(1e9===r?new Cn(t+1,0):new Cn(t,r));return new hs(s,Ge.empty(),e)}function mp(n){return new hs(n.readTime,n.key,-1)}class hs{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new hs(bt.min(),Ge.empty(),-1)}static max(){return new hs(bt.max(),Ge.empty(),-1)}}function ww(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=Ge.comparator(n.documentKey,e.documentKey),0!==t?t:xt(n.largestBatchId,e.largestBatchId))}const Ew="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Ju{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function qa(n){return yp.apply(this,arguments)}function yp(){return yp=(0,ye.Z)(function*(n){if(n.code!==ce.FAILED_PRECONDITION||n.message!==Ew)throw n;Oe("LocalStore","Unexpectedly lost primary lease")}),yp.apply(this,arguments)}class se{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&et(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new se((r,s)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(r,s)},this.catchCallback=u=>{this.wrapFailure(t,u).next(r,s)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof se?t:se.resolve(t)}catch(t){return se.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):se.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):se.reject(t)}static resolve(e){return new se((t,r)=>{t(e)})}static reject(e){return new se((t,r)=>{r(e)})}static waitFor(e){return new se((t,r)=>{let s=0,u=0,c=!1;e.forEach(g=>{++s,g.next(()=>{++u,c&&u===s&&t()},v=>r(v))}),c=!0,u===s&&t()})}static or(e){let t=se.resolve(!1);for(const r of e)t=t.next(s=>s?se.resolve(s):r());return t}static forEach(e,t){const r=[];return e.forEach((s,u)=>{r.push(t.call(this,s,u))}),this.waitFor(r)}static mapArray(e,t){return new se((r,s)=>{const u=e.length,c=new Array(u);let g=0;for(let v=0;v<u;v++){const b=v;t(e[b]).next(A=>{c[b]=A,++g,g===u&&r(c)},A=>s(A))}})}static doWhile(e,t){return new se((r,s)=>{const u=()=>{!0===e()?t().next(()=>{u()},s):r()};u()})}}class zm{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.P=new Ir,this.transaction.oncomplete=()=>{this.P.resolve()},this.transaction.onabort=()=>{t.error?this.P.reject(new Xu(e,t.error)):this.P.resolve()},this.transaction.onerror=r=>{const s=qm(r.target.error);this.P.reject(new Xu(e,s))}}static open(e,t,r,s){try{return new zm(t,e.transaction(s,r))}catch(u){throw new Xu(t,u)}}get v(){return this.P.promise}abort(e){e&&this.P.reject(e),this.aborted||(Oe("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}V(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new SM(t)}}class fs{constructor(e,t,r){this.name=e,this.version=t,this.S=r,12.2===fs.D((0,Ct.z$)())&&un("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Oe("SimpleDb","Removing database:",e),dh(window.indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!(0,Ct.hl)())return!1;if(fs.N())return!0;const e=(0,Ct.z$)(),t=fs.D(e),r=0<t&&t<10,s=fs.k(e),u=0<s&&s<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||u)}static N(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.M)}static O(e,t){return e.store(t)}static D(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static k(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}F(e){var t=this;return(0,ye.Z)(function*(){return t.db||(Oe("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,s)=>{const u=indexedDB.open(t.name,t.version);u.onsuccess=c=>{r(c.target.result)},u.onblocked=()=>{s(new Xu(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},u.onerror=c=>{const g=c.target.error;s("VersionError"===g.name?new Ne(ce.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===g.name?new Ne(ce.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+g):new Xu(e,g))},u.onupgradeneeded=c=>{Oe("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',c.oldVersion),t.S.$(c.target.result,u.transaction,c.oldVersion,t.version).next(()=>{Oe("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.B&&(t.db.onversionchange=r=>t.B(r)),t.db})()}L(e){this.B=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,s){var u=this;return(0,ye.Z)(function*(){const c="readonly"===t;let g=0;for(;;){++g;try{u.db=yield u.F(e);const v=zm.open(u.db,e,c?"readonly":"readwrite",r),b=s(v).next(A=>(v.V(),A)).catch(A=>(v.abort(A),se.reject(A))).toPromise();return b.catch(()=>{}),yield v.v,b}catch(v){const b=v,A="FirebaseError"!==b.name&&g<3;if(Oe("SimpleDb","Transaction failed with error:",b.message,"Retrying:",A),u.close(),!A)return Promise.reject(b)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class Iw{constructor(e){this.U=e,this.q=!1,this.K=null}get isDone(){return this.q}get G(){return this.K}set cursor(e){this.U=e}done(){this.q=!0}j(e){this.K=e}delete(){return dh(this.U.delete())}}class Xu extends Ne{constructor(e,t){super(ce.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function xc(n){return"IndexedDbTransactionError"===n.name}class SM{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Oe("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Oe("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),dh(r)}add(e){return Oe("SimpleDb","ADD",this.store.name,e,e),dh(this.store.add(e))}get(e){return dh(this.store.get(e)).next(t=>(void 0===t&&(t=null),Oe("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Oe("SimpleDb","DELETE",this.store.name,e),dh(this.store.delete(e))}count(){return Oe("SimpleDb","COUNT",this.store.name),dh(this.store.count())}W(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const s=this.cursor(r),u=[];return this.H(s,(c,g)=>{u.push(g)}).next(()=>u)}{const s=this.store.getAll(r.range);return new se((u,c)=>{s.onerror=g=>{c(g.target.error)},s.onsuccess=g=>{u(g.target.result)}})}}J(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new se((s,u)=>{r.onerror=c=>{u(c.target.error)},r.onsuccess=c=>{s(c.target.result)}})}Y(e,t){Oe("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.X=!1;const s=this.cursor(r);return this.H(s,(u,c,g)=>g.delete())}Z(e,t){let r;t?r=e:(r={},t=e);const s=this.cursor(r);return this.H(s,t)}tt(e){const t=this.cursor({});return new se((r,s)=>{t.onerror=u=>{const c=qm(u.target.error);s(c)},t.onsuccess=u=>{const c=u.target.result;c?e(c.primaryKey,c.value).next(g=>{g?c.continue():r()}):r()}})}H(e,t){const r=[];return new se((s,u)=>{e.onerror=c=>{u(c.target.error)},e.onsuccess=c=>{const g=c.target.result;if(!g)return void s();const v=new Iw(g),b=t(g.primaryKey,g.value,v);if(b instanceof se){const A=b.catch(M=>(v.done(),se.reject(M)));r.push(A)}v.isDone?s():null===v.G?g.continue():g.continue(v.G)}}).next(()=>se.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.X?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function dh(n){return new se((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const s=qm(r.target.error);t(s)}})}let hS=!1;function qm(n){const e=fs.D((0,Ct.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Ne("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return hS||(hS=!0,setTimeout(()=>{throw r},0)),r}}return n}class fS{constructor(e,t){this.asyncQueue=e,this.et=t,this.task=null}start(){this.nt(15)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}nt(e){var t=this;Oe("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,ye.Z)(function*(){t.task=null;try{Oe("IndexBackiller",`Documents written: ${yield t.et.st()}`)}catch(r){xc(r)?Oe("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield qa(r)}yield t.nt(1)}))}}class pS{constructor(e,t){this.localStore=e,this.persistence=t}st(e=50){var t=this;return(0,ye.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.it(r,e))})()}it(e,t){const r=new Set;let s=t,u=!0;return se.doWhile(()=>!0===u&&s>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(c=>{if(null!==c&&!r.has(c))return Oe("IndexBackiller",`Processing collection: ${c}`),this.rt(e,c,s).next(g=>{s-=g,r.add(c)});u=!1})).next(()=>t-s)}rt(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(s=>this.localStore.localDocuments.getNextDocuments(e,t,s,r).next(u=>{const c=u.changes;return this.localStore.indexManager.updateIndexEntries(e,c).next(()=>this.ot(s,u)).next(g=>(Oe("IndexBackiller",`Updating offset: ${g}`),this.localStore.indexManager.updateCollectionGroup(e,t,g))).next(()=>c.size)}))}ot(e,t){let r=e;return t.changes.forEach((s,u)=>{const c=mp(u);ww(c,r)>0&&(r=c)}),new hs(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}class Li{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ut(r),this.ct=r=>t.writeSequenceNumber(r))}ut(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ct&&this.ct(e),e}}function Ub(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function el(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function bw(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}Li.at=-1;class Un{constructor(e,t){this.comparator=e,this.root=t||ni.EMPTY}insert(e,t){return new Un(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,ni.BLACK,null,null))}remove(e){return new Un(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ni.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(0===s)return t+r.left.size;s<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Wm(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Wm(this.root,e,this.comparator,!1)}getReverseIterator(){return new Wm(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Wm(this.root,e,this.comparator,!0)}}class Wm{constructor(e,t,r,s){this.isReverse=s,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=t?r(e.key,t):1,t&&s&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(0===u){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ni{constructor(e,t,r,s,u){this.key=e,this.value=t,this.color=r??ni.RED,this.left=s??ni.EMPTY,this.right=u??ni.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,s,u){return new ni(e??this.key,t??this.value,r??this.color,s??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let s=this;const u=r(e,s.key);return s=u<0?s.copy(null,null,null,s.left.insert(e,t,r),null):0===u?s.copy(null,t,null,null,null):s.copy(null,null,null,null,s.right.insert(e,t,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return ni.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,s=this;if(t(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,t),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),0===t(e,s.key)){if(s.right.isEmpty())return ni.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,t))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ni.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ni.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw et();const e=this.left.check();if(e!==this.right.check())throw et();return e+(this.isRed()?0:1)}}ni.EMPTY=null,ni.RED=!0,ni.BLACK=!1,ni.EMPTY=new class{constructor(){this.size=0}get key(){throw et()}get value(){throw et()}get color(){throw et()}get left(){throw et()}get right(){throw et()}copy(n,e,t,r,s){return this}insert(n,e,t){return new ni(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class ln{constructor(e){this.comparator=e,this.data=new Un(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;t(s.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Km(this.data.getIterator())}getIteratorFrom(e){return new Km(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof ln)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const s=t.getNext().key,u=r.getNext().key;if(0!==this.comparator(s,u))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new ln(this.comparator);return t.data=e,t}}class Km{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function _p(n){return n.hasNext()?n.getNext():void 0}class Vi{constructor(e){this.fields=e,e.sort(Vn.comparator)}static empty(){return new Vi([])}unionWith(e){let t=new ln(Vn.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Vi(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return lh(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class br{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new br(t)}static fromUint8Array(e){const t=function(r){let s="";for(let u=0;u<r.length;++u)s+=String.fromCharCode(r[u]);return s}(e);return new br(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return xt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}br.EMPTY_BYTE_STRING=new br("");const gS=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Mc(n){if(Tt(!!n),"string"==typeof n){let e=0;const t=gS.exec(n);if(Tt(!!t),t[1]){let s=t[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:sr(n.seconds),nanos:sr(n.nanos)}}function sr(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Rc(n){return"string"==typeof n?br.fromBase64String(n):br.fromUint8Array(n)}function Cw(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function Bb(n){const e=n.mapValue.fields.__previous_value__;return Cw(e)?Bb(e):e}function Zm(n){const e=Mc(n.mapValue.fields.__local_write_time__.timestampValue);return new Cn(e.seconds,e.nanos)}class AM{constructor(e,t,r,s,u,c,g,v){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=s,this.ssl=u,this.forceLongPolling=c,this.autoDetectLongPolling=g,this.useFetchStreams=v}}class Nc{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Nc("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Nc&&e.projectId===this.projectId&&e.database===this.database}}function Ym(n){return null==n}function Qm(n){return 0===n&&1/n==-1/0}function jb(n){return"number"==typeof n&&Number.isInteger(n)&&!Qm(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}const Oc={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Tw={nullValue:"NULL_VALUE"};function hh(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Cw(n)?4:R(n)?9007199254740991:10:et()}function Wa(n,e){if(n===e)return!0;const t=hh(n);if(t!==hh(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Zm(n).isEqual(Zm(e));case 3:return function(r,s){if("string"==typeof r.timestampValue&&"string"==typeof s.timestampValue&&r.timestampValue.length===s.timestampValue.length)return r.timestampValue===s.timestampValue;const u=Mc(r.timestampValue),c=Mc(s.timestampValue);return u.seconds===c.seconds&&u.nanos===c.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return s=e,Rc(n.bytesValue).isEqual(Rc(s.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,s){return sr(r.geoPointValue.latitude)===sr(s.geoPointValue.latitude)&&sr(r.geoPointValue.longitude)===sr(s.geoPointValue.longitude)}(n,e);case 2:return function(r,s){if("integerValue"in r&&"integerValue"in s)return sr(r.integerValue)===sr(s.integerValue);if("doubleValue"in r&&"doubleValue"in s){const u=sr(r.doubleValue),c=sr(s.doubleValue);return u===c?Qm(u)===Qm(c):isNaN(u)&&isNaN(c)}return!1}(n,e);case 9:return lh(n.arrayValue.values||[],e.arrayValue.values||[],Wa);case 10:return function(r,s){const u=r.mapValue.fields||{},c=s.mapValue.fields||{};if(Ub(u)!==Ub(c))return!1;for(const g in u)if(u.hasOwnProperty(g)&&(void 0===c[g]||!Wa(u[g],c[g])))return!1;return!0}(n,e);default:return et()}var s}function Jm(n,e){return void 0!==(n.values||[]).find(t=>Wa(t,e))}function kc(n,e){if(n===e)return 0;const t=hh(n),r=hh(e);if(t!==r)return xt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return xt(n.booleanValue,e.booleanValue);case 2:return function(s,u){const c=sr(s.integerValue||s.doubleValue),g=sr(u.integerValue||u.doubleValue);return c<g?-1:c>g?1:c===g?0:isNaN(c)?isNaN(g)?0:-1:1}(n,e);case 3:return i(n.timestampValue,e.timestampValue);case 4:return i(Zm(n),Zm(e));case 5:return xt(n.stringValue,e.stringValue);case 6:return function(s,u){const c=Rc(s),g=Rc(u);return c.compareTo(g)}(n.bytesValue,e.bytesValue);case 7:return function(s,u){const c=s.split("/"),g=u.split("/");for(let v=0;v<c.length&&v<g.length;v++){const b=xt(c[v],g[v]);if(0!==b)return b}return xt(c.length,g.length)}(n.referenceValue,e.referenceValue);case 8:return function(s,u){const c=xt(sr(s.latitude),sr(u.latitude));return 0!==c?c:xt(sr(s.longitude),sr(u.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(s,u){const c=s.values||[],g=u.values||[];for(let v=0;v<c.length&&v<g.length;++v){const b=kc(c[v],g[v]);if(b)return b}return xt(c.length,g.length)}(n.arrayValue,e.arrayValue);case 10:return function(s,u){if(s===Oc.mapValue&&u===Oc.mapValue)return 0;if(s===Oc.mapValue)return 1;if(u===Oc.mapValue)return-1;const c=s.fields||{},g=Object.keys(c),v=u.fields||{},b=Object.keys(v);g.sort(),b.sort();for(let A=0;A<g.length&&A<b.length;++A){const M=xt(g[A],b[A]);if(0!==M)return M;const L=kc(c[g[A]],v[b[A]]);if(0!==L)return L}return xt(g.length,b.length)}(n.mapValue,e.mapValue);default:throw et()}}function i(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return xt(n,e);const t=Mc(n),r=Mc(e),s=xt(t.seconds,r.seconds);return 0!==s?s:xt(t.nanos,r.nanos)}function o(n){return a(n)}function a(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const s=Mc(r);return`time(${s.seconds},${s.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Rc(n.bytesValue).toBase64():"referenceValue"in n?Ge.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let s="[",u=!0;for(const c of r.values||[])u?u=!1:s+=",",s+=a(c);return s+"]"}(n.arrayValue):"mapValue"in n?function(r){const s=Object.keys(r.fields||{}).sort();let u="{",c=!0;for(const g of s)c?c=!1:u+=",",u+=`${g}:${a(r.fields[g])}`;return u+"}"}(n.mapValue):et();var e}function l(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function d(n){return!!n&&"integerValue"in n}function f(n){return!!n&&"arrayValue"in n}function _(n){return!!n&&"nullValue"in n}function E(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function I(n){return!!n&&"mapValue"in n}function T(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return el(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=T(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=T(n.arrayValue.values[t]);return e}return Object.assign({},n)}function R(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function k(n){return"nullValue"in n?Tw:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?l(Nc.empty(),Ge.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:et()}function z(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?l(Nc.empty(),Ge.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?Oc:et()}function te(n,e){const t=kc(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function we(n,e){const t=kc(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class Se{constructor(e){this.value=e}static empty(){return new Se({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!I(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=T(t)}setAll(e){let t=Vn.emptyPath(),r={},s=[];e.forEach((c,g)=>{if(!t.isImmediateParentOf(g)){const v=this.getFieldsMap(t);this.applyChanges(v,r,s),r={},s=[],t=g.popLast()}c?r[g.lastSegment()]=T(c):s.push(g.lastSegment())});const u=this.getFieldsMap(t);this.applyChanges(u,r,s)}delete(e){const t=this.field(e.popLast());I(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Wa(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=t.mapValue.fields[e.get(r)];I(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=s),t=s}return t.mapValue.fields}applyChanges(e,t,r){el(t,(s,u)=>e[s]=u);for(const s of r)delete e[s]}clone(){return new Se(T(this.value))}}function ze(n){const e=[];return el(n.fields,(t,r)=>{const s=new Vn([t]);if(I(r)){const u=ze(r.mapValue).fields;if(0===u.length)e.push(s);else for(const c of u)e.push(s.child(c))}else e.push(s)}),new Vi(e)}class Fe{constructor(e,t,r,s,u,c){this.key=e,this.documentType=t,this.version=r,this.readTime=s,this.data=u,this.documentState=c}static newInvalidDocument(e){return new Fe(e,0,bt.min(),bt.min(),Se.empty(),0)}static newFoundDocument(e,t,r){return new Fe(e,1,t,bt.min(),r,0)}static newNoDocument(e,t){return new Fe(e,2,t,bt.min(),Se.empty(),0)}static newUnknownDocument(e,t){return new Fe(e,3,t,bt.min(),Se.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Se.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Se.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=bt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Fe&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Fe(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class wt{constructor(e,t=null,r=[],s=[],u=null,c=null,g=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=s,this.limit=u,this.startAt=c,this.endAt=g,this.ht=null}}function Re(n,e=null,t=[],r=[],s=null,u=null,c=null){return new wt(n,e,t,r,s,u,c)}function ot(n){const e=We(n);if(null===e.ht){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>{return(s=r).field.canonicalString()+s.op.toString()+o(s.value);var s}).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(s=r).field.canonicalString()+s.dir;var s}).join(","),Ym(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>o(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>o(r)).join(",")),e.ht=t}return e.ht}function cn(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let s=0;s<n.orderBy.length;s++)if(!yk(n.orderBy[s],e.orderBy[s]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let s=0;s<n.filters.length;s++)if((t=n.filters[s]).op!==(r=e.filters[s]).op||!t.field.isEqual(r.field)||!Wa(t.value,r.value))return!1;var t,r;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!MM(n.startAt,e.startAt)&&MM(n.endAt,e.endAt)}function Ko(n){return Ge.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function fh(n,e){return n.filters.filter(t=>t instanceof Dr&&t.field.isEqual(e))}function Xm(n,e,t){let r=Tw,s=!0;for(const u of fh(n,e)){let c=Tw,g=!0;switch(u.op){case"<":case"<=":c=k(u.value);break;case"==":case"in":case">=":c=u.value;break;case">":c=u.value,g=!1;break;case"!=":case"not-in":c=Tw}te({value:r,inclusive:s},{value:c,inclusive:g})<0&&(r=c,s=g)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const c=t.position[u];te({value:r,inclusive:s},{value:c,inclusive:t.inclusive})<0&&(r=c,s=t.inclusive);break}return{value:r,inclusive:s}}function ey(n,e,t){let r=Oc,s=!0;for(const u of fh(n,e)){let c=Oc,g=!0;switch(u.op){case">=":case">":c=z(u.value),g=!1;break;case"==":case"in":case"<=":c=u.value;break;case"<":c=u.value,g=!1;break;case"!=":case"not-in":c=Oc}we({value:r,inclusive:s},{value:c,inclusive:g})>0&&(r=c,s=g)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const c=t.position[u];we({value:r,inclusive:s},{value:c,inclusive:t.inclusive})>0&&(r=c,s=t.inclusive);break}return{value:r,inclusive:s}}class Dr extends class{}{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.lt(e,t,r):new Sw(e,t,r):"array-contains"===t?new Mw(e,r):"in"===t?new pk(e,r):"not-in"===t?new gk(e,r):"array-contains-any"===t?new mk(e,r):new Dr(e,t,r)}static lt(e,t,r){return"in"===t?new Aw(e,r):new xw(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.ft(kc(t,this.value)):null!==t&&hh(this.value)===hh(t)&&this.ft(kc(t,this.value))}ft(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return et()}}dt(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class Sw extends Dr{constructor(e,t,r){super(e,t,r),this.key=Ge.fromName(r.referenceValue)}matches(e){const t=Ge.comparator(e.key,this.key);return this.ft(t)}}class Aw extends Dr{constructor(e,t){super(e,"in",t),this.keys=ty(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class xw extends Dr{constructor(e,t){super(e,"not-in",t),this.keys=ty(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function ty(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>Ge.fromName(r.referenceValue))}class Mw extends Dr{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return f(t)&&Jm(t.arrayValue,this.value)}}class pk extends Dr{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Jm(this.value.arrayValue,t)}}class gk extends Dr{constructor(e,t){super(e,"not-in",t)}matches(e){if(Jm(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Jm(this.value.arrayValue,t)}}class mk extends Dr{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!f(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Jm(this.value.arrayValue,r))}}class ph{constructor(e,t){this.position=e,this.inclusive=t}}class ny{constructor(e,t="asc"){this.field=e,this.dir=t}}function yk(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function xM(n,e,t){let r=0;for(let s=0;s<n.position.length;s++){const u=e[s],c=n.position[s];if(r=u.field.isKeyField()?Ge.comparator(Ge.fromName(c.referenceValue),t.key):kc(c,t.data.field(u.field)),"desc"===u.dir&&(r*=-1),0!==r)break}return r}function MM(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Wa(n.position[t],e.position[t]))return!1;return!0}class Pc{constructor(e,t=null,r=[],s=[],u=null,c="F",g=null,v=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=s,this.limit=u,this.limitType=c,this.startAt=g,this.endAt=v,this._t=null,this.wt=null}}function RM(n,e,t,r,s,u,c,g){return new Pc(n,e,t,r,s,u,c,g)}function ry(n){return new Pc(n)}function NM(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function mS(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function yS(n){for(const e of n.filters)if(e.dt())return e.field;return null}function _S(n){return null!==n.collectionGroup}function iy(n){const e=We(n);if(null===e._t){e._t=[];const t=yS(e),r=mS(e);if(null!==t&&null===r)t.isKeyField()||e._t.push(new ny(t)),e._t.push(new ny(Vn.keyField(),"asc"));else{let s=!1;for(const u of e.explicitOrderBy)e._t.push(u),u.field.isKeyField()&&(s=!0);if(!s){const u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e._t.push(new ny(Vn.keyField(),u))}}}return e._t}function $s(n){const e=We(n);if(!e.wt)if("F"===e.limitType)e.wt=Re(e.path,e.collectionGroup,iy(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const u of iy(e))t.push(new ny(u.field,"desc"===u.dir?"asc":"desc"));const r=e.endAt?new ph(e.endAt.position,e.endAt.inclusive):null,s=e.startAt?new ph(e.startAt.position,e.startAt.inclusive):null;e.wt=Re(e.path,e.collectionGroup,t,e.filters,e.limit,r,s)}return e.wt}function $b(n,e,t){return new Pc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Rw(n,e){return cn($s(n),$s(e))&&n.limitType===e.limitType}function OM(n){return`${ot($s(n))}|lt:${n.limitType}`}function vS(n){return`Query(target=${function Ht(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(r=t).field.canonicalString()} ${r.op} ${o(r.value)}`;var r}).join(", ")}]`),Ym(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(r=t).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>o(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>o(t)).join(",")),`Target(${e})`}($s(n))}; limitType=${n.limitType})`}function wS(n,e){return e.isFoundDocument()&&function(t,r){const s=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(s):Ge.isDocumentKey(t.path)?t.path.isEqual(s):t.path.isImmediateParentOf(s)}(n,e)&&function(t,r){for(const s of t.explicitOrderBy)if(!s.field.isKeyField()&&null===r.data.field(s.field))return!1;return!0}(n,e)&&function(t,r){for(const s of t.filters)if(!s.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(s,u,c){const g=xM(s,u,c);return s.inclusive?g<=0:g<0}(t.startAt,iy(t),r)||t.endAt&&!function(s,u,c){const g=xM(s,u,c);return s.inclusive?g>=0:g>0}(t.endAt,iy(t),r)));var t,r}function kM(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function PM(n){return(e,t)=>{let r=!1;for(const s of iy(n)){const u=_k(s,e,t);if(0!==u)return u;r=r||s.field.isKeyField()}return 0}}function _k(n,e,t){const r=n.field.isKeyField()?Ge.comparator(e.key,t.key):function(s,u,c){const g=u.data.field(s),v=c.data.field(s);return null!==g&&null!==v?kc(g,v):et()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return et()}}function FM(n,e){if(n.gt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Qm(e)?"-0":e}}function LM(n){return{integerValue:""+n}}function VM(n,e){return jb(e)?LM(e):FM(n,e)}class Hb{constructor(){this._=void 0}}function vk(n,e,t){return n instanceof sy?function(r,s){const u={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return s&&(u.fields.__previous_value__=s),{mapValue:u}}(t,e):n instanceof vp?BM(n,e):n instanceof wp?jM(n,e):function(r,s){const u=UM(r,s),c=$M(u)+$M(r.yt);return d(u)&&d(r.yt)?LM(c):FM(r.It,c)}(n,e)}function wk(n,e,t){return n instanceof vp?BM(n,e):n instanceof wp?jM(n,e):t}function UM(n,e){return n instanceof oy?d(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class sy extends Hb{}class vp extends Hb{constructor(e){super(),this.elements=e}}function BM(n,e){const t=HM(e);for(const r of n.elements)t.some(s=>Wa(s,r))||t.push(r);return{arrayValue:{values:t}}}class wp extends Hb{constructor(e){super(),this.elements=e}}function jM(n,e){let t=HM(e);for(const r of n.elements)t=t.filter(s=>!Wa(s,r));return{arrayValue:{values:t}}}class oy extends Hb{constructor(e,t){super(),this.It=e,this.yt=t}}function $M(n){return sr(n.integerValue||n.doubleValue)}function HM(n){return f(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class Nw{constructor(e,t){this.field=e,this.transform=t}}class Ik{constructor(e,t){this.version=e,this.transformResults=t}}class Zn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Zn}static exists(e){return new Zn(void 0,e)}static updateTime(e){return new Zn(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Gb(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class zb{}function GM(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new uy(n.key,Zn.none()):new ay(n.key,n.data,Zn.none());{const t=n.data,r=Se.empty();let s=new ln(Vn.comparator);for(let u of e.fields)if(!s.has(u)){let c=t.field(u);null===c&&u.length>1&&(u=u.popLast(),c=t.field(u)),null===c?r.delete(u):r.set(u,c),s=s.add(u)}return new Fc(n.key,r,new Vi(s.toArray()),Zn.none())}}function bk(n,e,t){n instanceof ay?function(r,s,u){const c=r.value.clone(),g=WM(r.fieldTransforms,s,u.transformResults);c.setAll(g),s.convertToFoundDocument(u.version,c).setHasCommittedMutations()}(n,e,t):n instanceof Fc?function(r,s,u){if(!Gb(r.precondition,s))return void s.convertToUnknownDocument(u.version);const c=WM(r.fieldTransforms,s,u.transformResults),g=s.data;g.setAll(qM(r)),g.setAll(c),s.convertToFoundDocument(u.version,g).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function Ow(n,e,t,r){return n instanceof ay?function(s,u,c,g){if(!Gb(s.precondition,u))return c;const v=s.value.clone(),b=KM(s.fieldTransforms,g,u);return v.setAll(b),u.convertToFoundDocument(u.version,v).setHasLocalMutations(),null}(n,e,t,r):n instanceof Fc?function(s,u,c,g){if(!Gb(s.precondition,u))return c;const v=KM(s.fieldTransforms,g,u),b=u.data;return b.setAll(qM(s)),b.setAll(v),u.convertToFoundDocument(u.version,b).setHasLocalMutations(),null===c?null:c.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(A=>A.field))}(n,e,t,r):(c=t,Gb(n.precondition,u=e)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):c);var u,c}function Dk(n,e){let t=null;for(const r of n.fieldTransforms){const s=e.data.field(r.field),u=UM(r.transform,s||null);null!=u&&(null===t&&(t=Se.empty()),t.set(r.field,u))}return t||null}function zM(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&lh(t,r,(s,u)=>function Ek(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof vp&&r instanceof vp||t instanceof wp&&r instanceof wp?lh(t.elements,r.elements,Wa):t instanceof oy&&r instanceof oy?Wa(t.yt,r.yt):t instanceof sy&&r instanceof sy);var t,r}(s,u))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class ay extends zb{constructor(e,t,r,s=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Fc extends zb{constructor(e,t,r,s,u=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=s,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function qM(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function WM(n,e,t){const r=new Map;Tt(n.length===t.length);for(let s=0;s<t.length;s++){const u=n[s],c=u.transform,g=e.data.field(u.field);r.set(u.field,wk(c,g,t[s]))}return r}function KM(n,e,t){const r=new Map;for(const s of n){const u=s.transform,c=t.data.field(s.field);r.set(s.field,vk(u,c,e))}return r}class uy extends zb{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class ES extends zb{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Ck{constructor(e){this.count=e}}var Fr,en;function ZM(n){switch(n){default:return et();case ce.CANCELLED:case ce.UNKNOWN:case ce.DEADLINE_EXCEEDED:case ce.RESOURCE_EXHAUSTED:case ce.INTERNAL:case ce.UNAVAILABLE:case ce.UNAUTHENTICATED:return!1;case ce.INVALID_ARGUMENT:case ce.NOT_FOUND:case ce.ALREADY_EXISTS:case ce.PERMISSION_DENIED:case ce.FAILED_PRECONDITION:case ce.ABORTED:case ce.OUT_OF_RANGE:case ce.UNIMPLEMENTED:case ce.DATA_LOSS:return!0}}function YM(n){if(void 0===n)return un("GRPC error has no .code"),ce.UNKNOWN;switch(n){case Fr.OK:return ce.OK;case Fr.CANCELLED:return ce.CANCELLED;case Fr.UNKNOWN:return ce.UNKNOWN;case Fr.DEADLINE_EXCEEDED:return ce.DEADLINE_EXCEEDED;case Fr.RESOURCE_EXHAUSTED:return ce.RESOURCE_EXHAUSTED;case Fr.INTERNAL:return ce.INTERNAL;case Fr.UNAVAILABLE:return ce.UNAVAILABLE;case Fr.UNAUTHENTICATED:return ce.UNAUTHENTICATED;case Fr.INVALID_ARGUMENT:return ce.INVALID_ARGUMENT;case Fr.NOT_FOUND:return ce.NOT_FOUND;case Fr.ALREADY_EXISTS:return ce.ALREADY_EXISTS;case Fr.PERMISSION_DENIED:return ce.PERMISSION_DENIED;case Fr.FAILED_PRECONDITION:return ce.FAILED_PRECONDITION;case Fr.ABORTED:return ce.ABORTED;case Fr.OUT_OF_RANGE:return ce.OUT_OF_RANGE;case Fr.UNIMPLEMENTED:return ce.UNIMPLEMENTED;case Fr.DATA_LOSS:return ce.DATA_LOSS;default:return et()}}(en=Fr||(Fr={}))[en.OK=0]="OK",en[en.CANCELLED=1]="CANCELLED",en[en.UNKNOWN=2]="UNKNOWN",en[en.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",en[en.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",en[en.NOT_FOUND=5]="NOT_FOUND",en[en.ALREADY_EXISTS=6]="ALREADY_EXISTS",en[en.PERMISSION_DENIED=7]="PERMISSION_DENIED",en[en.UNAUTHENTICATED=16]="UNAUTHENTICATED",en[en.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",en[en.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",en[en.ABORTED=10]="ABORTED",en[en.OUT_OF_RANGE=11]="OUT_OF_RANGE",en[en.UNIMPLEMENTED=12]="UNIMPLEMENTED",en[en.INTERNAL=13]="INTERNAL",en[en.UNAVAILABLE=14]="UNAVAILABLE",en[en.DATA_LOSS=15]="DATA_LOSS";class gh{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[s,u]of r)if(this.equalsFn(s,e))return u}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),s=this.inner[r];if(void 0===s)return this.inner[r]=[[e,t]],void this.innerSize++;for(let u=0;u<s.length;u++)if(this.equalsFn(s[u][0],e))return void(s[u]=[e,t]);s.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return 1===r.length?delete this.inner[t]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){el(this.inner,(t,r)=>{for(const[s,u]of r)e(s,u)})}isEmpty(){return bw(this.inner)}size(){return this.innerSize}}const Tk=new Un(Ge.comparator);function Hs(){return Tk}const QM=new Un(Ge.comparator);function kw(...n){let e=QM;for(const t of n)e=e.insert(t.key,t);return e}function JM(n){let e=QM;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function tl(){return Pw()}function XM(){return Pw()}function Pw(){return new gh(n=>n.toString(),(n,e)=>n.isEqual(e))}const Sk=new Un(Ge.comparator),Ak=new ln(Ge.comparator);function Vt(...n){let e=Ak;for(const t of n)e=e.add(t);return e}const xk=new ln(xt);function qb(){return xk}class Fw{constructor(e,t,r,s,u){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,t){const r=new Map;return r.set(e,Lw.createSynthesizedTargetChangeForCurrentChange(e,t)),new Fw(bt.min(),r,qb(),Hs(),Vt())}}class Lw{constructor(e,t,r,s,u){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,t){return new Lw(br.EMPTY_BYTE_STRING,t,Vt(),Vt(),Vt())}}class Wb{constructor(e,t,r,s){this.Tt=e,this.removedTargetIds=t,this.key=r,this.Et=s}}class eR{constructor(e,t){this.targetId=e,this.At=t}}class tR{constructor(e,t,r=br.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=s}}class nR{constructor(){this.Rt=0,this.bt=iR(),this.Pt=br.EMPTY_BYTE_STRING,this.vt=!1,this.Vt=!0}get current(){return this.vt}get resumeToken(){return this.Pt}get St(){return 0!==this.Rt}get Dt(){return this.Vt}Ct(e){e.approximateByteSize()>0&&(this.Vt=!0,this.Pt=e)}xt(){let e=Vt(),t=Vt(),r=Vt();return this.bt.forEach((s,u)=>{switch(u){case 0:e=e.add(s);break;case 2:t=t.add(s);break;case 1:r=r.add(s);break;default:et()}}),new Lw(this.Pt,this.vt,e,t,r)}Nt(){this.Vt=!1,this.bt=iR()}kt(e,t){this.Vt=!0,this.bt=this.bt.insert(e,t)}Mt(e){this.Vt=!0,this.bt=this.bt.remove(e)}Ot(){this.Rt+=1}Ft(){this.Rt-=1}$t(){this.Vt=!0,this.vt=!0}}class Mk{constructor(e){this.Bt=e,this.Lt=new Map,this.Ut=Hs(),this.qt=rR(),this.Kt=new ln(xt)}Gt(e){for(const t of e.Tt)e.Et&&e.Et.isFoundDocument()?this.Qt(t,e.Et):this.jt(t,e.key,e.Et);for(const t of e.removedTargetIds)this.jt(t,e.key,e.Et)}Wt(e){this.forEachTarget(e,t=>{const r=this.zt(t);switch(e.state){case 0:this.Ht(t)&&r.Ct(e.resumeToken);break;case 1:r.Ft(),r.St||r.Nt(),r.Ct(e.resumeToken);break;case 2:r.Ft(),r.St||this.removeTarget(t);break;case 3:this.Ht(t)&&(r.$t(),r.Ct(e.resumeToken));break;case 4:this.Ht(t)&&(this.Jt(t),r.Ct(e.resumeToken));break;default:et()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Lt.forEach((r,s)=>{this.Ht(s)&&t(s)})}Yt(e){const t=e.targetId,r=e.At.count,s=this.Xt(t);if(s){const u=s.target;if(Ko(u))if(0===r){const c=new Ge(u.path);this.jt(t,c,Fe.newNoDocument(c,bt.min()))}else Tt(1===r);else this.Zt(t)!==r&&(this.Jt(t),this.Kt=this.Kt.add(t))}}te(e){const t=new Map;this.Lt.forEach((u,c)=>{const g=this.Xt(c);if(g){if(u.current&&Ko(g.target)){const v=new Ge(g.target.path);null!==this.Ut.get(v)||this.ee(c,v)||this.jt(c,v,Fe.newNoDocument(v,e))}u.Dt&&(t.set(c,u.xt()),u.Nt())}});let r=Vt();this.qt.forEach((u,c)=>{let g=!0;c.forEachWhile(v=>{const b=this.Xt(v);return!b||2===b.purpose||(g=!1,!1)}),g&&(r=r.add(u))}),this.Ut.forEach((u,c)=>c.setReadTime(e));const s=new Fw(e,t,this.Kt,this.Ut,r);return this.Ut=Hs(),this.qt=rR(),this.Kt=new ln(xt),s}Qt(e,t){if(!this.Ht(e))return;const r=this.ee(e,t.key)?2:0;this.zt(e).kt(t.key,r),this.Ut=this.Ut.insert(t.key,t),this.qt=this.qt.insert(t.key,this.ne(t.key).add(e))}jt(e,t,r){if(!this.Ht(e))return;const s=this.zt(e);this.ee(e,t)?s.kt(t,1):s.Mt(t),this.qt=this.qt.insert(t,this.ne(t).delete(e)),r&&(this.Ut=this.Ut.insert(t,r))}removeTarget(e){this.Lt.delete(e)}Zt(e){const t=this.zt(e).xt();return this.Bt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ot(e){this.zt(e).Ot()}zt(e){let t=this.Lt.get(e);return t||(t=new nR,this.Lt.set(e,t)),t}ne(e){let t=this.qt.get(e);return t||(t=new ln(xt),this.qt=this.qt.insert(e,t)),t}Ht(e){const t=null!==this.Xt(e);return t||Oe("WatchChangeAggregator","Detected inactive target",e),t}Xt(e){const t=this.Lt.get(e);return t&&t.St?null:this.Bt.se(e)}Jt(e){this.Lt.set(e,new nR),this.Bt.getRemoteKeysForTarget(e).forEach(t=>{this.jt(e,t,null)})}ee(e,t){return this.Bt.getRemoteKeysForTarget(e).has(t)}}function rR(){return new Un(Ge.comparator)}function iR(){return new Un(Ge.comparator)}const Rk={asc:"ASCENDING",desc:"DESCENDING"},Nk={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class Ok{constructor(e,t){this.databaseId=e,this.gt=t}}function Vw(n,e){return n.gt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function sR(n,e){return n.gt?e.toBase64():e.toUint8Array()}function kk(n,e){return Vw(n,e.toTimestamp())}function li(n){return Tt(!!n),bt.fromTimestamp(function(e){const t=Mc(e);return new Cn(t.seconds,t.nanos)}(n))}function IS(n,e){return(t=n,new Qt(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function oR(n){const e=Qt.fromString(n);return Tt(gR(e)),e}function Uw(n,e){return IS(n.databaseId,e.path)}function nl(n,e){const t=oR(e);if(t.get(1)!==n.databaseId.projectId)throw new Ne(ce.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Ne(ce.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Ge(uR(t))}function bS(n,e){return IS(n.databaseId,e)}function aR(n){const e=oR(n);return 4===e.length?Qt.emptyPath():uR(e)}function Bw(n){return new Qt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function uR(n){return Tt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function lR(n,e,t){return{name:Uw(n,e),fields:t.value.mapValue.fields}}function cR(n,e,t){const r=nl(n,e.name),s=li(e.updateTime),u=new Se({mapValue:{fields:e.fields}}),c=Fe.newFoundDocument(r,s,u);return t&&c.setHasCommittedMutations(),t?c.setHasCommittedMutations():c}function jw(n,e){let t;if(e instanceof ay)t={update:lR(n,e.key,e.value)};else if(e instanceof uy)t={delete:Uw(n,e.key)};else if(e instanceof Fc)t={update:lR(n,e.key,e.data),updateMask:Hk(e.fieldMask)};else{if(!(e instanceof ES))return et();t={verify:Uw(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(s,u){const c=u.transform;if(c instanceof sy)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof vp)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof wp)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof oy)return{fieldPath:u.field.canonicalString(),increment:c.yt};throw et()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(s=e.precondition).updateTime?{updateTime:kk(n,s.updateTime)}:void 0!==s.exists?{exists:s.exists}:et()),t;var s}function DS(n,e){const t=e.currentDocument?void 0!==(s=e.currentDocument).updateTime?Zn.updateTime(li(s.updateTime)):void 0!==s.exists?Zn.exists(s.exists):Zn.none():Zn.none(),r=e.updateTransforms?e.updateTransforms.map(s=>function(u,c){let g=null;"setToServerValue"in c?(Tt("REQUEST_TIME"===c.setToServerValue),g=new sy):"appendMissingElements"in c?g=new vp(c.appendMissingElements.values||[]):"removeAllFromArray"in c?g=new wp(c.removeAllFromArray.values||[]):"increment"in c?g=new oy(u,c.increment):et();const v=Vn.fromServerFormat(c.fieldPath);return new Nw(v,g)}(n,s)):[];var s;if(e.update){const s=nl(n,e.update.name),u=new Se({mapValue:{fields:e.update.fields}});if(e.updateMask){const c=new Vi((e.updateMask.fieldPaths||[]).map(b=>Vn.fromServerFormat(b)));return new Fc(s,u,c,t,r)}return new ay(s,u,t,r)}if(e.delete){const s=nl(n,e.delete);return new uy(s,t)}if(e.verify){const s=nl(n,e.verify);return new ES(s,t)}return et()}function dR(n,e){return{documents:[bS(n,e.path)]}}function hR(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=bS(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=bS(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const s=function(v){if(0===v.length)return;const b=v.map(A=>function(M){if("=="===M.op){if(E(M.value))return{unaryFilter:{field:ly(M.field),op:"IS_NAN"}};if(_(M.value))return{unaryFilter:{field:ly(M.field),op:"IS_NULL"}}}else if("!="===M.op){if(E(M.value))return{unaryFilter:{field:ly(M.field),op:"IS_NOT_NAN"}};if(_(M.value))return{unaryFilter:{field:ly(M.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ly(M.field),op:Bk(M.op),value:M.value}}}(A));return 1===b.length?b[0]:{compositeFilter:{op:"AND",filters:b}}}(e.filters);s&&(t.structuredQuery.where=s);const u=function(v){if(0!==v.length)return v.map(b=>{return{field:ly((A=b).field),direction:Uk(A.dir)};var A})}(e.orderBy);u&&(t.structuredQuery.orderBy=u);const c=(b=e.limit,n.gt||Ym(b)?b:{value:b});var b,g,v;return null!==c&&(t.structuredQuery.limit=c),e.startAt&&(t.structuredQuery.startAt={before:(g=e.startAt).inclusive,values:g.position}),e.endAt&&(t.structuredQuery.endAt={before:!(v=e.endAt).inclusive,values:v.position}),t}function fR(n){let e=aR(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let s=null;if(r>0){Tt(1===r);const A=t.from[0];A.allDescendants?s=A.collectionId:e=e.child(A.collectionId)}let u=[];t.where&&(u=pR(t.where));let c=[];t.orderBy&&(c=t.orderBy.map(A=>{return new ny(cy((M=A).field),function(L){switch(L){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(M.direction));var M}));let g=null;t.limit&&(g=function(A){let M;return M="object"==typeof A?A.value:A,Ym(M)?null:M}(t.limit));let v=null;var A;t.startAt&&(v=new ph((A=t.startAt).values||[],!!A.before));let b=null;return t.endAt&&(b=function(A){return new ph(A.values||[],!A.before)}(t.endAt)),RM(e,s,c,u,g,"F",v,b)}function pR(n){return n?void 0!==n.unaryFilter?[$k(n)]:void 0!==n.fieldFilter?[jk(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>pR(e)).reduce((e,t)=>e.concat(t)):et():[]}function Uk(n){return Rk[n]}function Bk(n){return Nk[n]}function ly(n){return{fieldPath:n.canonicalString()}}function cy(n){return Vn.fromServerFormat(n.fieldPath)}function jk(n){return Dr.create(cy(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return et()}}(n.fieldFilter.op),n.fieldFilter.value)}function $k(n){switch(n.unaryFilter.op){case"IS_NAN":const e=cy(n.unaryFilter.field);return Dr.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=cy(n.unaryFilter.field);return Dr.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=cy(n.unaryFilter.field);return Dr.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=cy(n.unaryFilter.field);return Dr.create(s,"!=",{nullValue:"NULL_VALUE"});default:return et()}}function Hk(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function gR(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function ps(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=mR(e)),e=Gk(n.get(t),e);return mR(e)}function Gk(n,e){let t=e;const r=n.length;for(let s=0;s<r;s++){const u=n.charAt(s);switch(u){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=u}}return t}function mR(n){return n+"\x01\x01"}function rl(n){const e=n.length;if(Tt(e>=2),2===e)return Tt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),Qt.emptyPath();const t=e-2,r=[];let s="";for(let u=0;u<e;){const c=n.indexOf("\x01",u);switch((c<0||c>t)&&et(),n.charAt(c+1)){case"\x01":const g=n.substring(u,c);let v;0===s.length?v=g:(s+=g,v=s,s=""),r.push(v);break;case"\x10":s+=n.substring(u,c),s+="\0";break;case"\x11":s+=n.substring(u,c+1);break;default:et()}u=c+2}return new Qt(r)}const yR=["userId","batchId"];function Kb(n,e){return[n,ps(e)]}function _R(n,e,t){return[n,ps(e),t]}const zk={},qk=["prefixPath","collectionGroup","readTime","documentId"],Wk=["prefixPath","collectionGroup","documentId"],Kk=["collectionGroup","readTime","prefixPath","documentId"],Zk=["canonicalId","targetId"],Yk=["targetId","path"],Qk=["path","targetId"],Jk=["collectionId","parent"],Xk=["indexId","uid"],eP=["uid","sequenceNumber"],tP=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],nP=["indexId","uid","orderedDocumentKey"],rP=["userId","collectionPath","documentId"],iP=["userId","collectionPath","largestBatchId"],sP=["userId","collectionGroup","largestBatchId"],vR=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],oP=[...vR,"documentOverlays"],wR=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],ER=wR,aP=[...ER,"indexConfiguration","indexState","indexEntries"];class CS extends Ju{constructor(e,t){super(),this.ie=e,this.currentSequenceNumber=t}}function ci(n,e){const t=We(n);return fs.O(t.ie,e)}class TS{constructor(e,t,r,s){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let s=0;s<this.mutations.length;s++){const u=this.mutations[s];u.key.isEqual(e.key)&&bk(u,e,r[s])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Ow(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Ow(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=XM();return this.mutations.forEach(s=>{const u=e.get(s.key),c=u.overlayedDocument;let g=this.applyToLocalView(c,u.mutatedFields);g=t.has(s.key)?null:g;const v=GM(c,g);null!==v&&r.set(s.key,v),c.isValidDocument()||c.convertToNoDocument(bt.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Vt())}isEqual(e){return this.batchId===e.batchId&&lh(this.mutations,e.mutations,(t,r)=>zM(t,r))&&lh(this.baseMutations,e.baseMutations,(t,r)=>zM(t,r))}}class SS{constructor(e,t,r,s){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=s}static from(e,t,r){Tt(e.mutations.length===r.length);let s=Sk;const u=e.mutations;for(let c=0;c<u.length;c++)s=s.insert(u[c].key,r[c].version);return new SS(e,t,r,s)}}class AS{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class mh{constructor(e,t,r,s,u=bt.min(),c=bt.min(),g=br.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=g}withSequenceNumber(e){return new mh(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new mh(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new mh(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class IR{constructor(e){this.re=e}}function bR(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Zb(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:Uw(s=n.re,(u=e).key),fields:u.data.value.mapValue.fields,updateTime:Vw(s,u.version.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Ep(e.version)};else{if(!e.isUnknownDocument())return et();r.unknownDocument={path:t.path.toArray(),version:Ep(e.version)}}var s,u;return r}function Zb(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Ep(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Ip(n){const e=new Cn(n.seconds,n.nanoseconds);return bt.fromTimestamp(e)}function bp(n,e){const t=(e.baseMutations||[]).map(u=>DS(n.re,u));for(let u=0;u<e.mutations.length-1;++u){const c=e.mutations[u];u+1<e.mutations.length&&void 0!==e.mutations[u+1].transform&&(c.updateTransforms=e.mutations[u+1].transform.fieldTransforms,e.mutations.splice(u+1,1),++u)}const r=e.mutations.map(u=>DS(n.re,u)),s=Cn.fromMillis(e.localWriteTimeMs);return new TS(e.batchId,s,t,r)}function $w(n){const e=Ip(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?Ip(n.lastLimboFreeSnapshotVersion):bt.min();let r;var s;return void 0!==n.query.documents?(Tt(1===(s=n.query).documents.length),r=$s(ry(aR(s.documents[0])))):r=$s(fR(n.query)),new mh(r,n.targetId,0,n.lastListenSequenceNumber,e,t,br.fromBase64String(n.resumeToken))}function DR(n,e){const t=Ep(e.snapshotVersion),r=Ep(e.lastLimboFreeSnapshotVersion);let s;s=Ko(e.target)?dR(n.re,e.target):hR(n.re,e.target);const u=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:ot(e.target),readTime:t,resumeToken:u,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:s}}function xS(n){const e=fR({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?$b(e,e.limit,"L"):e}function MS(n,e){return new AS(e.largestBatchId,DS(n.re,e.overlayMutation))}function CR(n,e){const t=e.path.lastSegment();return[n,ps(e.path.popLast()),t]}function TR(n,e,t,r){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:Ep(r.readTime),documentKey:ps(r.documentKey.path),largestBatchId:r.largestBatchId}}class lP{getBundleMetadata(e,t){return SR(e).get(t).next(r=>{if(r)return{id:(s=r).bundleId,createTime:Ip(s.createTime),version:s.version};var s})}saveBundleMetadata(e,t){return SR(e).put({bundleId:(r=t).id,createTime:Ep(li(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return AR(e).get(t).next(r=>{if(r)return{name:(s=r).name,query:xS(s.bundledQuery),readTime:Ip(s.readTime)};var s})}saveNamedQuery(e,t){return AR(e).put({name:(r=t).name,readTime:Ep(li(r.readTime)),bundledQuery:r.bundledQuery});var r}}function SR(n){return ci(n,"bundles")}function AR(n){return ci(n,"namedQueries")}class Yb{constructor(e,t){this.It=e,this.userId=t}static oe(e,t){return new Yb(e,t.uid||"")}getOverlay(e,t){return Hw(e).get(CR(this.userId,t)).next(r=>r?MS(this.It,r):null)}getOverlays(e,t){const r=tl();return se.forEach(t,s=>this.getOverlay(e,s).next(u=>{null!==u&&r.set(s,u)})).next(()=>r)}saveOverlays(e,t,r){const s=[];return r.forEach((u,c)=>{const g=new AS(t,c);s.push(this.ue(e,g))}),se.waitFor(s)}removeOverlaysForBatchId(e,t,r){const s=new Set;t.forEach(c=>s.add(ps(c.getCollectionPath())));const u=[];return s.forEach(c=>{const g=IDBKeyRange.bound([this.userId,c,r],[this.userId,c,r+1],!1,!0);u.push(Hw(e).Y("collectionPathOverlayIndex",g))}),se.waitFor(u)}getOverlaysForCollection(e,t,r){const s=tl(),u=ps(t),c=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,Number.POSITIVE_INFINITY],!0);return Hw(e).W("collectionPathOverlayIndex",c).next(g=>{for(const v of g){const b=MS(this.It,v);s.set(b.getKey(),b)}return s})}getOverlaysForCollectionGroup(e,t,r,s){const u=tl();let c;const g=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Hw(e).Z({index:"collectionGroupOverlayIndex",range:g},(v,b,A)=>{const M=MS(this.It,b);u.size()<s||M.largestBatchId===c?(u.set(M.getKey(),M),c=M.largestBatchId):A.done()}).next(()=>u)}ue(e,t){return Hw(e).put(function(r,s,u){const[c,g,v]=CR(s,u.mutation.key);return{userId:s,collectionPath:g,documentId:v,collectionGroup:u.mutation.key.getCollectionGroup(),largestBatchId:u.largestBatchId,overlayMutation:jw(r.re,u.mutation)}}(this.It,this.userId,t))}}function Hw(n){return ci(n,"documentOverlays")}class Dp{constructor(){}ce(e,t){this.ae(e,t),t.he()}ae(e,t){if("nullValue"in e)this.le(t,5);else if("booleanValue"in e)this.le(t,10),t.fe(e.booleanValue?1:0);else if("integerValue"in e)this.le(t,15),t.fe(sr(e.integerValue));else if("doubleValue"in e){const r=sr(e.doubleValue);isNaN(r)?this.le(t,13):(this.le(t,15),Qm(r)?t.fe(0):t.fe(r))}else if("timestampValue"in e){const r=e.timestampValue;this.le(t,20),"string"==typeof r?t.de(r):(t.de(`${r.seconds||""}`),t.fe(r.nanos||0))}else if("stringValue"in e)this._e(e.stringValue,t),this.we(t);else if("bytesValue"in e)this.le(t,30),t.me(Rc(e.bytesValue)),this.we(t);else if("referenceValue"in e)this.ge(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.le(t,45),t.fe(r.latitude||0),t.fe(r.longitude||0)}else"mapValue"in e?R(e)?this.le(t,Number.MAX_SAFE_INTEGER):(this.ye(e.mapValue,t),this.we(t)):"arrayValue"in e?(this.pe(e.arrayValue,t),this.we(t)):et()}_e(e,t){this.le(t,25),this.Ie(e,t)}Ie(e,t){t.de(e)}ye(e,t){const r=e.fields||{};this.le(t,55);for(const s of Object.keys(r))this._e(s,t),this.ae(r[s],t)}pe(e,t){const r=e.values||[];this.le(t,50);for(const s of r)this.ae(s,t)}ge(e,t){this.le(t,37),Ge.fromName(e).path.forEach(r=>{this.le(t,60),this.Ie(r,t)})}le(e,t){e.fe(t)}we(e){e.fe(2)}}function cP(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function xR(n){const e=64-function(t){let r=0;for(let s=0;s<8;++s){const u=cP(255&t[s]);if(r+=u,8!==u)break}return r}(n);return Math.ceil(e/8)}Dp.Te=new Dp;class dP{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ee(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ae(r.value),r=t.next();this.Re()}be(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Pe(r.value),r=t.next();this.ve()}Ve(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ae(r);else if(r<2048)this.Ae(960|r>>>6),this.Ae(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ae(480|r>>>12),this.Ae(128|63&r>>>6),this.Ae(128|63&r);else{const s=t.codePointAt(0);this.Ae(240|s>>>18),this.Ae(128|63&s>>>12),this.Ae(128|63&s>>>6),this.Ae(128|63&s)}}this.Re()}Se(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Pe(r);else if(r<2048)this.Pe(960|r>>>6),this.Pe(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Pe(480|r>>>12),this.Pe(128|63&r>>>6),this.Pe(128|63&r);else{const s=t.codePointAt(0);this.Pe(240|s>>>18),this.Pe(128|63&s>>>12),this.Pe(128|63&s>>>6),this.Pe(128|63&s)}}this.ve()}De(e){const t=this.Ce(e),r=xR(t);this.xe(1+r),this.buffer[this.position++]=255&r;for(let s=t.length-r;s<t.length;++s)this.buffer[this.position++]=255&t[s]}Ne(e){const t=this.Ce(e),r=xR(t);this.xe(1+r),this.buffer[this.position++]=~(255&r);for(let s=t.length-r;s<t.length;++s)this.buffer[this.position++]=~(255&t[s])}ke(){this.Me(255),this.Me(255)}Oe(){this.Fe(255),this.Fe(255)}reset(){this.position=0}seed(e){this.xe(e.length),this.buffer.set(e,this.position),this.position+=e.length}$e(){return this.buffer.slice(0,this.position)}Ce(e){const t=function(s){const u=new DataView(new ArrayBuffer(8));return u.setFloat64(0,s,!1),new Uint8Array(u.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let s=1;s<t.length;++s)t[s]^=r?255:0;return t}Ae(e){const t=255&e;0===t?(this.Me(0),this.Me(255)):255===t?(this.Me(255),this.Me(0)):this.Me(t)}Pe(e){const t=255&e;0===t?(this.Fe(0),this.Fe(255)):255===t?(this.Fe(255),this.Fe(0)):this.Fe(e)}Re(){this.Me(0),this.Me(1)}ve(){this.Fe(0),this.Fe(1)}Me(e){this.xe(1),this.buffer[this.position++]=e}Fe(e){this.xe(1),this.buffer[this.position++]=~e}xe(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const s=new Uint8Array(r);s.set(this.buffer),this.buffer=s}}class hP{constructor(e){this.Be=e}me(e){this.Be.Ee(e)}de(e){this.Be.Ve(e)}fe(e){this.Be.De(e)}he(){this.Be.ke()}}class fP{constructor(e){this.Be=e}me(e){this.Be.be(e)}de(e){this.Be.Se(e)}fe(e){this.Be.Ne(e)}he(){this.Be.Oe()}}class Gw{constructor(){this.Be=new dP,this.Le=new hP(this.Be),this.Ue=new fP(this.Be)}seed(e){this.Be.seed(e)}qe(e){return 0===e?this.Le:this.Ue}$e(){return this.Be.$e()}reset(){this.Be.reset()}}class Cp{constructor(e,t,r,s){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=s}Ke(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Cp(this.indexId,this.documentKey,this.arrayValue,r)}}function Tp(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=MR(n.arrayValue,e.arrayValue),0!==t?t:(t=MR(n.directionalValue,e.directionalValue),0!==t?t:Ge.comparator(n.documentKey,e.documentKey)))}function MR(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class pP{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ge=e.orderBy,this.Qe=[];for(const t of e.filters){const r=t;r.dt()?this.je=r:this.Qe.push(r)}}We(e){const t=_w(e);if(void 0!==t&&!this.ze(t))return!1;const r=ch(e);let s=0,u=0;for(;s<r.length&&this.ze(r[s]);++s);if(s===r.length)return!0;if(void 0!==this.je){const c=r[s];if(!this.He(this.je,c)||!this.Je(this.Ge[u++],c))return!1;++s}for(;s<r.length;++s){const c=r[s];if(u>=this.Ge.length||!this.Je(this.Ge[u++],c))return!1}return!0}ze(e){for(const t of this.Qe)if(this.He(t,e))return!0;return!1}He(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Je(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class gP{constructor(){this.Ye=new RS}addToCollectionParentIndex(e,t){return this.Ye.add(t),se.resolve()}getCollectionParents(e,t){return se.resolve(this.Ye.getEntries(t))}addFieldIndex(e,t){return se.resolve()}deleteFieldIndex(e,t){return se.resolve()}getDocumentsMatchingTarget(e,t){return se.resolve(null)}getIndexType(e,t){return se.resolve(0)}getFieldIndexes(e,t){return se.resolve([])}getNextCollectionGroupToUpdate(e){return se.resolve(null)}getMinOffset(e,t){return se.resolve(hs.min())}getMinOffsetFromCollectionGroup(e,t){return se.resolve(hs.min())}updateCollectionGroup(e,t,r){return se.resolve()}updateIndexEntries(e,t){return se.resolve()}}class RS{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t]||new ln(Qt.comparator),u=!s.has(r);return this.index[t]=s.add(r),u}has(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t];return s&&s.has(r)}getEntries(e){return(this.index[e]||new ln(Qt.comparator)).toArray()}}const Qb=new Uint8Array(0);class mP{constructor(e,t){this.user=e,this.databaseId=t,this.Xe=new RS,this.Ze=new gh(r=>ot(r),(r,s)=>cn(r,s)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Xe.has(t)){const r=t.lastSegment(),s=t.popLast();e.addOnCommittedListener(()=>{this.Xe.add(t)});const u={collectionId:r,parent:ps(s)};return RR(e).put(u)}return se.resolve()}getCollectionParents(e,t){const r=[],s=IDBKeyRange.bound([t,""],[yw(t),""],!1,!0);return RR(e).W(s).next(u=>{for(const c of u){if(c.collectionId!==t)break;r.push(rl(c.parent))}return r})}addFieldIndex(e,t){const r=Jb(e),s={indexId:(c=t).indexId,collectionGroup:c.collectionGroup,fields:c.fields.map(g=>[g.fieldPath.canonicalString(),g.kind])};var c;delete s.indexId;const u=r.add(s);if(t.indexState){const c=qw(e);return u.next(g=>{c.put(TR(g,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return u.next()}deleteFieldIndex(e,t){const r=Jb(e),s=qw(e),u=zw(e);return r.delete(t.indexId).next(()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>u.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=zw(e);let s=!0;const u=new Map;return se.forEach(this.tn(t),c=>this.en(e,c).next(g=>{s&&(s=!!g),u.set(c,g)})).next(()=>{if(s){let c=Vt();const g=[];return se.forEach(u,(v,b)=>{var A;Oe("IndexedDbIndexManager",`Using index ${A=v,`id=${A.indexId}|cg=${A.collectionGroup}|f=${A.fields.map(ct=>`${ct.fieldPath}:${ct.kind}`).join(",")}`} to execute ${ot(t)}`);const M=function(ct,tt){const Dt=_w(tt);if(void 0===Dt)return null;for(const kt of fh(ct,Dt.fieldPath))switch(kt.op){case"array-contains-any":return kt.value.arrayValue.values||[];case"array-contains":return[kt.value]}return null}(b,v),L=function(ct,tt){const Dt=new Map;for(const kt of ch(tt))for(const or of fh(ct,kt.fieldPath))switch(or.op){case"==":case"in":Dt.set(kt.fieldPath.canonicalString(),or.value);break;case"not-in":case"!=":return Dt.set(kt.fieldPath.canonicalString(),or.value),Array.from(Dt.values())}return null}(b,v),G=function(ct,tt){const Dt=[];let kt=!0;for(const or of ch(tt)){const Za=0===or.kind?Xm(ct,or.fieldPath,ct.startAt):ey(ct,or.fieldPath,ct.startAt);Dt.push(Za.value),kt&&(kt=Za.inclusive)}return new ph(Dt,kt)}(b,v),Q=function(ct,tt){const Dt=[];let kt=!0;for(const or of ch(tt)){const Za=0===or.kind?ey(ct,or.fieldPath,ct.endAt):Xm(ct,or.fieldPath,ct.endAt);Dt.push(Za.value),kt&&(kt=Za.inclusive)}return new ph(Dt,kt)}(b,v),Ie=this.nn(v,b,G),Ce=this.nn(v,b,Q),Ze=this.sn(v,b,L),lt=this.rn(v.indexId,M,Ie,G.inclusive,Ce,Q.inclusive,Ze);return se.forEach(lt,ct=>r.J(ct,t.limit).next(tt=>{tt.forEach(Dt=>{const kt=Ge.fromSegments(Dt.documentKey);c.has(kt)||(c=c.add(kt),g.push(kt))})}))}).next(()=>g)}return se.resolve(null)})}tn(e){let t=this.Ze.get(e);return t||(t=[e],this.Ze.set(e,t),t)}rn(e,t,r,s,u,c,g){const v=(null!=t?t.length:1)*Math.max(r.length,u.length),b=v/(null!=t?t.length:1),A=[];for(let M=0;M<v;++M){const L=t?this.on(t[M/b]):Qb,G=this.un(e,L,r[M%b],s),Q=this.cn(e,L,u[M%b],c),Ie=g.map(Ce=>this.un(e,L,Ce,!0));A.push(...this.createRange(G,Q,Ie))}return A}un(e,t,r,s){const u=new Cp(e,Ge.empty(),t,r);return s?u:u.Ke()}cn(e,t,r,s){const u=new Cp(e,Ge.empty(),t,r);return s?u.Ke():u}en(e,t){const r=new pP(t),s=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,s).next(u=>{let c=null;for(const g of u)r.We(g)&&(!c||g.fields.length>c.fields.length)&&(c=g);return c})}getIndexType(e,t){let r=2;return se.forEach(this.tn(t),s=>this.en(e,s).next(u=>{u?0!==r&&u.fields.length<function(c){let g=new ln(Vn.comparator),v=!1;for(const b of c.filters){const A=b;A.field.isKeyField()||("array-contains"===A.op||"array-contains-any"===A.op?v=!0:g=g.add(A.field))}for(const b of c.orderBy)b.field.isKeyField()||(g=g.add(b.field));return g.size+(v?1:0)}(s)&&(r=1):r=0})).next(()=>r)}an(e,t){const r=new Gw;for(const s of ch(e)){const u=t.data.field(s.fieldPath);if(null==u)return null;const c=r.qe(s.kind);Dp.Te.ce(u,c)}return r.$e()}on(e){const t=new Gw;return Dp.Te.ce(e,t.qe(0)),t.$e()}hn(e,t){const r=new Gw;return Dp.Te.ce(l(this.databaseId,t),r.qe(function(s){const u=ch(s);return 0===u.length?0:u[u.length-1].kind}(e))),r.$e()}sn(e,t,r){if(null===r)return[];let s=[];s.push(new Gw);let u=0;for(const c of ch(e)){const g=r[u++];for(const v of s)if(this.ln(t,c.fieldPath)&&f(g))s=this.fn(s,c,g);else{const b=v.qe(c.kind);Dp.Te.ce(g,b)}}return this.dn(s)}nn(e,t,r){return this.sn(e,t,r.position)}dn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].$e();return t}fn(e,t,r){const s=[...e],u=[];for(const c of r.arrayValue.values||[])for(const g of s){const v=new Gw;v.seed(g.$e()),Dp.Te.ce(c,v.qe(t.kind)),u.push(v)}return u}ln(e,t){return!!e.filters.find(r=>r instanceof Dr&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=Jb(e),s=qw(e);return(t?r.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.W()).next(u=>{const c=[];return se.forEach(u,g=>s.get([g.indexId,this.uid]).next(v=>{c.push(function(b,A){const M=A?new Gm(A.sequenceNumber,new hs(Ip(A.readTime),new Ge(rl(A.documentKey)),A.largestBatchId)):Gm.empty(),L=b.fields.map(([G,Q])=>new vw(Vn.fromServerFormat(G),Q));return new Hm(b.indexId,b.collectionGroup,L,M)}(g,v))})).next(()=>c)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,s)=>{const u=r.indexState.sequenceNumber-s.indexState.sequenceNumber;return 0!==u?u:xt(r.collectionGroup,s.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const s=Jb(e),u=qw(e);return this._n(e).next(c=>s.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(g=>se.forEach(g,v=>u.put(TR(v.indexId,this.user,c,r)))))}updateIndexEntries(e,t){const r=new Map;return se.forEach(t,(s,u)=>{const c=r.get(s.collectionGroup);return(c?se.resolve(c):this.getFieldIndexes(e,s.collectionGroup)).next(g=>(r.set(s.collectionGroup,g),se.forEach(g,v=>this.wn(e,s,v).next(b=>{const A=this.mn(u,v);return b.isEqual(A)?se.resolve():this.gn(e,u,v,b,A)}))))})}yn(e,t,r,s){return zw(e).put({indexId:s.indexId,uid:this.uid,arrayValue:s.arrayValue,directionalValue:s.directionalValue,orderedDocumentKey:this.hn(r,t.key),documentKey:t.key.path.toArray()})}pn(e,t,r,s){return zw(e).delete([s.indexId,this.uid,s.arrayValue,s.directionalValue,this.hn(r,t.key),t.key.path.toArray()])}wn(e,t,r){const s=zw(e);let u=new ln(Tp);return s.Z({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.hn(r,t)])},(c,g)=>{u=u.add(new Cp(r.indexId,t,g.arrayValue,g.directionalValue))}).next(()=>u)}mn(e,t){let r=new ln(Tp);const s=this.an(t,e);if(null==s)return r;const u=_w(t);if(null!=u){const c=e.data.field(u.fieldPath);if(f(c))for(const g of c.arrayValue.values||[])r=r.add(new Cp(t.indexId,e.key,this.on(g),s))}else r=r.add(new Cp(t.indexId,e.key,Qb,s));return r}gn(e,t,r,s,u){Oe("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const c=[];return function(g,v,b,A,M){const L=g.getIterator(),G=v.getIterator();let Q=_p(L),Ie=_p(G);for(;Q||Ie;){let Ce=!1,Ze=!1;if(Q&&Ie){const lt=b(Q,Ie);lt<0?Ze=!0:lt>0&&(Ce=!0)}else null!=Q?Ze=!0:Ce=!0;Ce?(A(Ie),Ie=_p(G)):Ze?(M(Q),Q=_p(L)):(Q=_p(L),Ie=_p(G))}}(s,u,Tp,g=>{c.push(this.yn(e,t,r,g))},g=>{c.push(this.pn(e,t,r,g))}),se.waitFor(c)}_n(e){let t=1;return qw(e).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,s,u)=>{u.done(),t=s.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((c,g)=>Tp(c,g)).filter((c,g,v)=>!g||0!==Tp(c,v[g-1]));const s=[];s.push(e);for(const c of r){const g=Tp(c,e),v=Tp(c,t);if(0===g)s[0]=e.Ke();else if(g>0&&v<0)s.push(c),s.push(c.Ke());else if(v>0)break}s.push(t);const u=[];for(let c=0;c<s.length;c+=2)u.push(IDBKeyRange.bound([s[c].indexId,this.uid,s[c].arrayValue,s[c].directionalValue,Qb,[]],[s[c+1].indexId,this.uid,s[c+1].arrayValue,s[c+1].directionalValue,Qb,[]]));return u}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(NR)}getMinOffset(e,t){return se.mapArray(this.tn(t),r=>this.en(e,r).next(s=>s||et())).next(NR)}}function RR(n){return ci(n,"collectionParents")}function zw(n){return ci(n,"indexEntries")}function Jb(n){return ci(n,"indexConfiguration")}function qw(n){return ci(n,"indexState")}function NR(n){Tt(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const s=n[r].indexState.offset;ww(s,e)<0&&(e=s),t<s.largestBatchId&&(t=s.largestBatchId)}return new hs(e.readTime,e.documentKey,t)}const OR={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Gs{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Gs(e,Gs.DEFAULT_COLLECTION_PERCENTILE,Gs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function kR(n,e,t){const r=n.store("mutations"),s=n.store("documentMutations"),u=[],c=IDBKeyRange.only(t.batchId);let g=0;const v=r.Z({range:c},(A,M,L)=>(g++,L.delete()));u.push(v.next(()=>{Tt(1===g)}));const b=[];for(const A of t.mutations){const M=_R(e,A.key.path,t.batchId);u.push(s.delete(M)),b.push(A.key)}return se.waitFor(u).next(()=>b)}function Xb(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw et();e=n.noDocument}return JSON.stringify(e).length}Gs.DEFAULT_COLLECTION_PERCENTILE=10,Gs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Gs.DEFAULT=new Gs(41943040,Gs.DEFAULT_COLLECTION_PERCENTILE,Gs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Gs.DISABLED=new Gs(-1,0,0);class eD{constructor(e,t,r,s){this.userId=e,this.It=t,this.indexManager=r,this.referenceDelegate=s,this.In={}}static oe(e,t,r,s){Tt(""!==e.uid);const u=e.isAuthenticated()?e.uid:"";return new eD(u,t,r,s)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return yh(e).Z({index:"userMutationsIndex",range:r},(s,u,c)=>{t=!1,c.done()}).next(()=>t)}addMutationBatch(e,t,r,s){const u=dy(e),c=yh(e);return c.add({}).next(g=>{Tt("number"==typeof g);const v=new TS(g,t,r,s),b=function(L,G,Q){const Ie=Q.baseMutations.map(Ze=>jw(L.re,Ze)),Ce=Q.mutations.map(Ze=>jw(L.re,Ze));return{userId:G,batchId:Q.batchId,localWriteTimeMs:Q.localWriteTime.toMillis(),baseMutations:Ie,mutations:Ce}}(this.It,this.userId,v),A=[];let M=new ln((L,G)=>xt(L.canonicalString(),G.canonicalString()));for(const L of s){const G=_R(this.userId,L.key.path,g);M=M.add(L.key.path.popLast()),A.push(c.put(b)),A.push(u.put(G,zk))}return M.forEach(L=>{A.push(this.indexManager.addToCollectionParentIndex(e,L))}),e.addOnCommittedListener(()=>{this.In[g]=v.keys()}),se.waitFor(A).next(()=>v)})}lookupMutationBatch(e,t){return yh(e).get(t).next(r=>r?(Tt(r.userId===this.userId),bp(this.It,r)):null)}Tn(e,t){return this.In[t]?se.resolve(this.In[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const s=r.keys();return this.In[t]=s,s}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,s=IDBKeyRange.lowerBound([this.userId,r]);let u=null;return yh(e).Z({index:"userMutationsIndex",range:s},(c,g,v)=>{g.userId===this.userId&&(Tt(g.batchId>=r),u=bp(this.It,g)),v.done()}).next(()=>u)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return yh(e).Z({index:"userMutationsIndex",range:t,reverse:!0},(s,u,c)=>{r=u.batchId,c.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return yh(e).W("userMutationsIndex",t).next(r=>r.map(s=>bp(this.It,s)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=Kb(this.userId,t.path),s=IDBKeyRange.lowerBound(r),u=[];return dy(e).Z({range:s},(c,g,v)=>{const[b,A,M]=c,L=rl(A);if(b===this.userId&&t.path.isEqual(L))return yh(e).get(M).next(G=>{if(!G)throw et();Tt(G.userId===this.userId),u.push(bp(this.It,G))});v.done()}).next(()=>u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new ln(xt);const s=[];return t.forEach(u=>{const c=Kb(this.userId,u.path),g=IDBKeyRange.lowerBound(c),v=dy(e).Z({range:g},(b,A,M)=>{const[L,G,Q]=b,Ie=rl(G);L===this.userId&&u.path.isEqual(Ie)?r=r.add(Q):M.done()});s.push(v)}),se.waitFor(s).next(()=>this.En(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,s=r.length+1,u=Kb(this.userId,r),c=IDBKeyRange.lowerBound(u);let g=new ln(xt);return dy(e).Z({range:c},(v,b,A)=>{const[M,L,G]=v,Q=rl(L);M===this.userId&&r.isPrefixOf(Q)?Q.length===s&&(g=g.add(G)):A.done()}).next(()=>this.En(e,g))}En(e,t){const r=[],s=[];return t.forEach(u=>{s.push(yh(e).get(u).next(c=>{if(null===c)throw et();Tt(c.userId===this.userId),r.push(bp(this.It,c))}))}),se.waitFor(s).next(()=>r)}removeMutationBatch(e,t){return kR(e.ie,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.An(t.batchId)}),se.forEach(r,s=>this.referenceDelegate.markPotentiallyOrphaned(e,s))))}An(e){delete this.In[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return se.resolve();const r=IDBKeyRange.lowerBound([this.userId]),s=[];return dy(e).Z({range:r},(u,c,g)=>{if(u[0]===this.userId){const v=rl(u[1]);s.push(v)}else g.done()}).next(()=>{Tt(0===s.length)})})}containsKey(e,t){return PR(e,this.userId,t)}Rn(e){return FR(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function PR(n,e,t){const r=Kb(e,t.path),s=r[1],u=IDBKeyRange.lowerBound(r);let c=!1;return dy(n).Z({range:u,X:!0},(g,v,b)=>{const[A,M,L]=g;A===e&&M===s&&(c=!0),b.done()}).next(()=>c)}function yh(n){return ci(n,"mutations")}function dy(n){return ci(n,"documentMutations")}function FR(n){return ci(n,"mutationQueues")}class Sp{constructor(e){this.bn=e}next(){return this.bn+=2,this.bn}static Pn(){return new Sp(0)}static vn(){return new Sp(-1)}}class yP{constructor(e,t){this.referenceDelegate=e,this.It=t}allocateTargetId(e){return this.Vn(e).next(t=>{const r=new Sp(t.highestTargetId);return t.highestTargetId=r.next(),this.Sn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Vn(e).next(t=>bt.fromTimestamp(new Cn(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Vn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.Vn(e).next(s=>(s.highestListenSequenceNumber=t,r&&(s.lastRemoteSnapshotVersion=r.toTimestamp()),t>s.highestListenSequenceNumber&&(s.highestListenSequenceNumber=t),this.Sn(e,s)))}addTargetData(e,t){return this.Dn(e,t).next(()=>this.Vn(e).next(r=>(r.targetCount+=1,this.Cn(t,r),this.Sn(e,r))))}updateTargetData(e,t){return this.Dn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>hy(e).delete(t.targetId)).next(()=>this.Vn(e)).next(r=>(Tt(r.targetCount>0),r.targetCount-=1,this.Sn(e,r)))}removeTargets(e,t,r){let s=0;const u=[];return hy(e).Z((c,g)=>{const v=$w(g);v.sequenceNumber<=t&&null===r.get(v.targetId)&&(s++,u.push(this.removeTargetData(e,v)))}).next(()=>se.waitFor(u)).next(()=>s)}forEachTarget(e,t){return hy(e).Z((r,s)=>{const u=$w(s);t(u)})}Vn(e){return LR(e).get("targetGlobalKey").next(t=>(Tt(null!==t),t))}Sn(e,t){return LR(e).put("targetGlobalKey",t)}Dn(e,t){return hy(e).put(DR(this.It,t))}Cn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Vn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=ot(t),s=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let u=null;return hy(e).Z({range:s,index:"queryTargetsIndex"},(c,g,v)=>{const b=$w(g);cn(t,b.target)&&(u=b,v.done())}).next(()=>u)}addMatchingKeys(e,t,r){const s=[],u=_h(e);return t.forEach(c=>{const g=ps(c.path);s.push(u.put({targetId:r,path:g})),s.push(this.referenceDelegate.addReference(e,r,c))}),se.waitFor(s)}removeMatchingKeys(e,t,r){const s=_h(e);return se.forEach(t,u=>{const c=ps(u.path);return se.waitFor([s.delete([r,c]),this.referenceDelegate.removeReference(e,r,u)])})}removeMatchingKeysForTargetId(e,t){const r=_h(e),s=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(s)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),s=_h(e);let u=Vt();return s.Z({range:r,X:!0},(c,g,v)=>{const b=rl(c[1]),A=new Ge(b);u=u.add(A)}).next(()=>u)}containsKey(e,t){const r=ps(t.path),s=IDBKeyRange.bound([r],[yw(r)],!1,!0);let u=0;return _h(e).Z({index:"documentTargetsIndex",X:!0,range:s},([c,g],v,b)=>{0!==c&&(u++,b.done())}).next(()=>u>0)}se(e,t){return hy(e).get(t).next(r=>r?$w(r):null)}}function hy(n){return ci(n,"targets")}function LR(n){return ci(n,"targetGlobal")}function _h(n){return ci(n,"targetDocuments")}function VR([n,e],[t,r]){const s=xt(n,t);return 0===s?xt(e,r):s}class _P{constructor(e){this.xn=e,this.buffer=new ln(VR),this.Nn=0}kn(){return++this.Nn}Mn(e){const t=[e,this.kn()];if(this.buffer.size<this.xn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();VR(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class vP{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.On=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Fn(6e4)}stop(){this.On&&(this.On.cancel(),this.On=null)}get started(){return null!==this.On}Fn(e){var t=this;Oe("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.On=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,ye.Z)(function*(){t.On=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){xc(r)?Oe("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield qa(r)}yield t.Fn(3e5)}))}}class wP{constructor(e,t){this.$n=e,this.params=t}calculateTargetCount(e,t){return this.$n.Bn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return se.resolve(Li.at);const r=new _P(t);return this.$n.forEachTarget(e,s=>r.Mn(s.sequenceNumber)).next(()=>this.$n.Ln(e,s=>r.Mn(s))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.$n.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.$n.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Oe("LruGarbageCollector","Garbage collection skipped; disabled"),se.resolve(OR)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Oe("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),OR):this.Un(e,t))}getCacheSize(e){return this.$n.getCacheSize(e)}Un(e,t){let r,s,u,c,g,v,b;const A=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(M=>(M>this.params.maximumSequenceNumbersToCollect?(Oe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${M}`),s=this.params.maximumSequenceNumbersToCollect):s=M,c=Date.now(),this.nthSequenceNumber(e,s))).next(M=>(r=M,g=Date.now(),this.removeTargets(e,r,t))).next(M=>(u=M,v=Date.now(),this.removeOrphanedDocuments(e,r))).next(M=>(b=Date.now(),Wo()<=yc.in.DEBUG&&Oe("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${c-A}ms\n\tDetermined least recently used ${s} in `+(g-c)+`ms\n\tRemoved ${u} targets in `+(v-g)+`ms\n\tRemoved ${M} documents in `+(b-v)+`ms\nTotal Duration: ${b-A}ms`),se.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:u,documentsRemoved:M})))}}class EP{constructor(e,t){this.db=e,this.garbageCollector=new wP(this,t)}Bn(e){const t=this.qn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(s=>r+s))}qn(e){let t=0;return this.Ln(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Ln(e,t){return this.Kn(e,(r,s)=>t(s))}addReference(e,t,r){return tD(e,r)}removeReference(e,t,r){return tD(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return tD(e,t)}Gn(e,t){return function(r,s){let u=!1;return FR(r).tt(c=>PR(r,c,s).next(g=>(g&&(u=!0),se.resolve(!g)))).next(()=>u)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),s=[];let u=0;return this.Kn(e,(c,g)=>{if(g<=t){const v=this.Gn(e,c).next(b=>{if(!b)return u++,r.getEntry(e,c).next(()=>(r.removeEntry(c,bt.min()),_h(e).delete([0,ps(c.path)])))});s.push(v)}}).next(()=>se.waitFor(s)).next(()=>r.apply(e)).next(()=>u)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return tD(e,t)}Kn(e,t){const r=_h(e);let s,u=Li.at;return r.Z({index:"documentTargetsIndex"},([c,g],{path:v,sequenceNumber:b})=>{0===c?(u!==Li.at&&t(new Ge(rl(s)),u),u=b,s=v):u=Li.at}).next(()=>{u!==Li.at&&t(new Ge(rl(s)),u)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function tD(n,e){return _h(n).put((r=n.currentSequenceNumber,{targetId:0,path:ps(e.path),sequenceNumber:r}));var r}class UR{constructor(){this.changes=new gh(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Fe.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?se.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class IP{constructor(e){this.It=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Ap(e).put(r)}removeEntry(e,t,r){return Ap(e).delete(function(s,u){const c=s.path.toArray();return[c.slice(0,c.length-2),c[c.length-2],Zb(u),c[c.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Qn(e,r)))}getEntry(e,t){let r=Fe.newInvalidDocument(t);return Ap(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(Ww(t))},(s,u)=>{r=this.jn(t,u)}).next(()=>r)}Wn(e,t){let r={size:0,document:Fe.newInvalidDocument(t)};return Ap(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(Ww(t))},(s,u)=>{r={document:this.jn(t,u),size:Xb(u)}}).next(()=>r)}getEntries(e,t){let r=Hs();return this.zn(e,t,(s,u)=>{const c=this.jn(s,u);r=r.insert(s,c)}).next(()=>r)}Hn(e,t){let r=Hs(),s=new Un(Ge.comparator);return this.zn(e,t,(u,c)=>{const g=this.jn(u,c);r=r.insert(u,g),s=s.insert(u,Xb(c))}).next(()=>({documents:r,Jn:s}))}zn(e,t,r){if(t.isEmpty())return se.resolve();let s=new ln(HR);t.forEach(v=>s=s.add(v));const u=IDBKeyRange.bound(Ww(s.first()),Ww(s.last())),c=s.getIterator();let g=c.getNext();return Ap(e).Z({index:"documentKeyIndex",range:u},(v,b,A)=>{const M=Ge.fromSegments([...b.prefixPath,b.collectionGroup,b.documentId]);for(;g&&HR(g,M)<0;)r(g,null),g=c.getNext();g&&g.isEqual(M)&&(r(g,b),g=c.hasNext()?c.getNext():null),g?A.j(Ww(g)):A.done()}).next(()=>{for(;g;)r(g,null),g=c.hasNext()?c.getNext():null})}getAllFromCollection(e,t,r){const s=[t.popLast().toArray(),t.lastSegment(),Zb(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],u=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Ap(e).W(IDBKeyRange.bound(s,u,!0)).next(c=>{let g=Hs();for(const v of c){const b=this.jn(Ge.fromSegments(v.prefixPath.concat(v.collectionGroup,v.documentId)),v);g=g.insert(b.key,b)}return g})}getAllFromCollectionGroup(e,t,r,s){let u=Hs();const c=$R(t,r),g=$R(t,hs.max());return Ap(e).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(c,g,!0)},(v,b,A)=>{const M=this.jn(Ge.fromSegments(b.prefixPath.concat(b.collectionGroup,b.documentId)),b);u=u.insert(M.key,M),u.size===s&&A.done()}).next(()=>u)}newChangeBuffer(e){return new bP(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return jR(e).get("remoteDocumentGlobalKey").next(t=>(Tt(!!t),t))}Qn(e,t){return jR(e).put("remoteDocumentGlobalKey",t)}jn(e,t){if(t){const r=function uP(n,e){let t;if(e.document)t=cR(n.re,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Ge.fromSegments(e.noDocument.path),s=Ip(e.noDocument.readTime);t=Fe.newNoDocument(r,s),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return et();{const r=Ge.fromSegments(e.unknownDocument.path),s=Ip(e.unknownDocument.version);t=Fe.newUnknownDocument(r,s)}}return e.readTime&&t.setReadTime(function(r){const s=new Cn(r[0],r[1]);return bt.fromTimestamp(s)}(e.readTime)),t}(this.It,t);if(!r.isNoDocument()||!r.version.isEqual(bt.min()))return r}return Fe.newInvalidDocument(e)}}function BR(n){return new IP(n)}class bP extends UR{constructor(e,t){super(),this.Yn=e,this.trackRemovals=t,this.Xn=new gh(r=>r.toString(),(r,s)=>r.isEqual(s))}applyChanges(e){const t=[];let r=0,s=new ln((u,c)=>xt(u.canonicalString(),c.canonicalString()));return this.changes.forEach((u,c)=>{const g=this.Xn.get(u);if(t.push(this.Yn.removeEntry(e,u,g.readTime)),c.isValidDocument()){const v=bR(this.Yn.It,c);s=s.add(u.path.popLast()),r+=Xb(v)-g.size,t.push(this.Yn.addEntry(e,u,v))}else if(r-=g.size,this.trackRemovals){const v=bR(this.Yn.It,c.convertToNoDocument(bt.min()));t.push(this.Yn.addEntry(e,u,v))}}),s.forEach(u=>{t.push(this.Yn.indexManager.addToCollectionParentIndex(e,u))}),t.push(this.Yn.updateMetadata(e,r)),se.waitFor(t)}getFromCache(e,t){return this.Yn.Wn(e,t).next(r=>(this.Xn.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Yn.Hn(e,t).next(({documents:r,Jn:s})=>(s.forEach((u,c)=>{this.Xn.set(u,{size:c,readTime:r.get(u).readTime})}),r))}}function jR(n){return ci(n,"remoteDocumentGlobal")}function Ap(n){return ci(n,"remoteDocumentsV14")}function Ww(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function $R(n,e){const t=e.documentKey.path.toArray();return[n,Zb(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function HR(n,e){const t=n.path.toArray(),r=e.path.toArray();let s=0;for(let u=0;u<t.length-2&&u<r.length-2;++u)if(s=xt(t[u],r[u]),s)return s;return s=xt(t.length,r.length),s||(s=xt(t[t.length-2],r[r.length-2]),s||xt(t[t.length-1],r[r.length-1]))}class DP{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class GR{constructor(e,t,r,s){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(s=>(r=s,this.getBaseDocument(e,t,r))).next(s=>(null!==r&&Ow(r.mutation,s,Vi.empty(),Cn.now()),s))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Vt()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Vt()){const s=tl();return this.populateOverlays(e,s,t).next(()=>this.computeViews(e,t,s,r).next(u=>{let c=kw();return u.forEach((g,v)=>{c=c.insert(g,v.overlayedDocument)}),c}))}getOverlayedDocuments(e,t){const r=tl();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Vt()))}populateOverlays(e,t,r){const s=[];return r.forEach(u=>{t.has(u)||s.push(u)}),this.documentOverlayCache.getOverlays(e,s).next(u=>{u.forEach((c,g)=>{t.set(c,g)})})}computeViews(e,t,r,s){let u=Hs();const c=Pw(),g=Pw();return t.forEach((v,b)=>{const A=r.get(b.key);s.has(b.key)&&(void 0===A||A.mutation instanceof Fc)?u=u.insert(b.key,b):void 0!==A&&(c.set(b.key,A.mutation.getFieldMask()),Ow(A.mutation,b,A.mutation.getFieldMask(),Cn.now()))}),this.recalculateAndSaveOverlays(e,u).next(v=>(v.forEach((b,A)=>c.set(b,A)),t.forEach((b,A)=>{var M;return g.set(b,new DP(A,null!==(M=c.get(b))&&void 0!==M?M:null))}),g))}recalculateAndSaveOverlays(e,t){const r=Pw();let s=new Un((c,g)=>c-g),u=Vt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(c=>{for(const g of c)g.keys().forEach(v=>{const b=t.get(v);if(null===b)return;let A=r.get(v)||Vi.empty();A=g.applyToLocalView(b,A),r.set(v,A);const M=(s.get(g.batchId)||Vt()).add(v);s=s.insert(g.batchId,M)})}).next(()=>{const c=[],g=s.getReverseIterator();for(;g.hasNext();){const v=g.getNext(),b=v.key,A=v.value,M=XM();A.forEach(L=>{if(!u.has(L)){const G=GM(t.get(L),r.get(L));null!==G&&M.set(L,G),u=u.add(L)}}),c.push(this.documentOverlayCache.saveOverlays(e,b,M))}return se.waitFor(c)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return Ge.isDocumentKey((s=t).path)&&null===s.collectionGroup&&0===s.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):_S(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var s}getNextDocuments(e,t,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,s).next(u=>{const c=s-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,s-u.size):se.resolve(tl());let g=-1,v=u;return c.next(b=>se.forEach(b,(A,M)=>(g<M.largestBatchId&&(g=M.largestBatchId),u.get(A)?se.resolve():this.getBaseDocument(e,A,M).next(L=>{v=v.insert(A,L)}))).next(()=>this.populateOverlays(e,b,u)).next(()=>this.computeViews(e,v,b,Vt())).next(A=>({batchId:g,changes:JM(A)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ge(t)).next(r=>{let s=kw();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const s=t.collectionGroup;let u=kw();return this.indexManager.getCollectionParents(e,s).next(c=>se.forEach(c,g=>{const v=(b=t,A=g.child(s),new Pc(A,null,b.explicitOrderBy.slice(),b.filters.slice(),b.limit,b.limitType,b.startAt,b.endAt));var b,A;return this.getDocumentsMatchingCollectionQuery(e,v,r).next(b=>{b.forEach((A,M)=>{u=u.insert(A,M)})})}).next(()=>u))}getDocumentsMatchingCollectionQuery(e,t,r){let s;return this.remoteDocumentCache.getAllFromCollection(e,t.path,r).next(u=>(s=u,this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId))).next(u=>{u.forEach((g,v)=>{const b=v.getKey();null===s.get(b)&&(s=s.insert(b,Fe.newInvalidDocument(b)))});let c=kw();return s.forEach((g,v)=>{const b=u.get(g);void 0!==b&&Ow(b.mutation,v,Vi.empty(),Cn.now()),wS(t,v)&&(c=c.insert(g,v))}),c})}getBaseDocument(e,t,r){return null===r||1===r.mutation.type?this.remoteDocumentCache.getEntry(e,t):se.resolve(Fe.newInvalidDocument(t))}}class CP{constructor(e){this.It=e,this.Zn=new Map,this.ts=new Map}getBundleMetadata(e,t){return se.resolve(this.Zn.get(t))}saveBundleMetadata(e,t){var r;return this.Zn.set(t.id,{id:(r=t).id,version:r.version,createTime:li(r.createTime)}),se.resolve()}getNamedQuery(e,t){return se.resolve(this.ts.get(t))}saveNamedQuery(e,t){return this.ts.set(t.name,{name:(r=t).name,query:xS(r.bundledQuery),readTime:li(r.readTime)}),se.resolve();var r}}class TP{constructor(){this.overlays=new Un(Ge.comparator),this.es=new Map}getOverlay(e,t){return se.resolve(this.overlays.get(t))}getOverlays(e,t){const r=tl();return se.forEach(t,s=>this.getOverlay(e,s).next(u=>{null!==u&&r.set(s,u)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((s,u)=>{this.ue(e,t,u)}),se.resolve()}removeOverlaysForBatchId(e,t,r){const s=this.es.get(r);return void 0!==s&&(s.forEach(u=>this.overlays=this.overlays.remove(u)),this.es.delete(r)),se.resolve()}getOverlaysForCollection(e,t,r){const s=tl(),u=t.length+1,c=new Ge(t.child("")),g=this.overlays.getIteratorFrom(c);for(;g.hasNext();){const v=g.getNext().value,b=v.getKey();if(!t.isPrefixOf(b.path))break;b.path.length===u&&v.largestBatchId>r&&s.set(v.getKey(),v)}return se.resolve(s)}getOverlaysForCollectionGroup(e,t,r,s){let u=new Un((b,A)=>b-A);const c=this.overlays.getIterator();for(;c.hasNext();){const b=c.getNext().value;if(b.getKey().getCollectionGroup()===t&&b.largestBatchId>r){let A=u.get(b.largestBatchId);null===A&&(A=tl(),u=u.insert(b.largestBatchId,A)),A.set(b.getKey(),b)}}const g=tl(),v=u.getIterator();for(;v.hasNext()&&(v.getNext().value.forEach((b,A)=>g.set(b,A)),!(g.size()>=s)););return se.resolve(g)}ue(e,t,r){const s=this.overlays.get(r.key);if(null!==s){const c=this.es.get(s.largestBatchId).delete(r.key);this.es.set(s.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new AS(t,r));let u=this.es.get(t);void 0===u&&(u=Vt(),this.es.set(t,u)),this.es.set(t,u.add(r.key))}}class NS{constructor(){this.ns=new ln(di.ss),this.rs=new ln(di.os)}isEmpty(){return this.ns.isEmpty()}addReference(e,t){const r=new di(e,t);this.ns=this.ns.add(r),this.rs=this.rs.add(r)}us(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.cs(new di(e,t))}hs(e,t){e.forEach(r=>this.removeReference(r,t))}ls(e){const t=new Ge(new Qt([])),r=new di(t,e),s=new di(t,e+1),u=[];return this.rs.forEachInRange([r,s],c=>{this.cs(c),u.push(c.key)}),u}fs(){this.ns.forEach(e=>this.cs(e))}cs(e){this.ns=this.ns.delete(e),this.rs=this.rs.delete(e)}ds(e){const t=new Ge(new Qt([])),r=new di(t,e),s=new di(t,e+1);let u=Vt();return this.rs.forEachInRange([r,s],c=>{u=u.add(c.key)}),u}containsKey(e){const t=new di(e,0),r=this.ns.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class di{constructor(e,t){this.key=e,this._s=t}static ss(e,t){return Ge.comparator(e.key,t.key)||xt(e._s,t._s)}static os(e,t){return xt(e._s,t._s)||Ge.comparator(e.key,t.key)}}class SP{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.ws=1,this.gs=new ln(di.ss)}checkEmpty(e){return se.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,s){const u=this.ws;this.ws++;const c=new TS(u,t,r,s);this.mutationQueue.push(c);for(const g of s)this.gs=this.gs.add(new di(g.key,u)),this.indexManager.addToCollectionParentIndex(e,g.key.path.popLast());return se.resolve(c)}lookupMutationBatch(e,t){return se.resolve(this.ys(t))}getNextMutationBatchAfterBatchId(e,t){const s=this.ps(t+1),u=s<0?0:s;return se.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return se.resolve(0===this.mutationQueue.length?-1:this.ws-1)}getAllMutationBatches(e){return se.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new di(t,0),s=new di(t,Number.POSITIVE_INFINITY),u=[];return this.gs.forEachInRange([r,s],c=>{const g=this.ys(c._s);u.push(g)}),se.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new ln(xt);return t.forEach(s=>{const u=new di(s,0),c=new di(s,Number.POSITIVE_INFINITY);this.gs.forEachInRange([u,c],g=>{r=r.add(g._s)})}),se.resolve(this.Is(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,s=r.length+1;let u=r;Ge.isDocumentKey(u)||(u=u.child(""));const c=new di(new Ge(u),0);let g=new ln(xt);return this.gs.forEachWhile(v=>{const b=v.key.path;return!!r.isPrefixOf(b)&&(b.length===s&&(g=g.add(v._s)),!0)},c),se.resolve(this.Is(g))}Is(e){const t=[];return e.forEach(r=>{const s=this.ys(r);null!==s&&t.push(s)}),t}removeMutationBatch(e,t){Tt(0===this.Ts(t.batchId,"removed")),this.mutationQueue.shift();let r=this.gs;return se.forEach(t.mutations,s=>{const u=new di(s.key,t.batchId);return r=r.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.gs=r})}An(e){}containsKey(e,t){const r=new di(t,0),s=this.gs.firstAfterOrEqual(r);return se.resolve(t.isEqual(s&&s.key))}performConsistencyCheck(e){return se.resolve()}Ts(e,t){return this.ps(e)}ps(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}ys(e){const t=this.ps(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class AP{constructor(e){this.Es=e,this.docs=new Un(Ge.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,s=this.docs.get(r),u=s?s.size:0,c=this.Es(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:c}),this.size+=c-u,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return se.resolve(r?r.document.mutableCopy():Fe.newInvalidDocument(t))}getEntries(e,t){let r=Hs();return t.forEach(s=>{const u=this.docs.get(s);r=r.insert(s,u?u.document.mutableCopy():Fe.newInvalidDocument(s))}),se.resolve(r)}getAllFromCollection(e,t,r){let s=Hs();const u=new Ge(t.child("")),c=this.docs.getIteratorFrom(u);for(;c.hasNext();){const{key:g,value:{document:v}}=c.getNext();if(!t.isPrefixOf(g.path))break;g.path.length>t.length+1||ww(mp(v),r)<=0||(s=s.insert(v.key,v.mutableCopy()))}return se.resolve(s)}getAllFromCollectionGroup(e,t,r,s){et()}As(e,t){return se.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new xP(this)}getSize(e){return se.resolve(this.size)}}class xP extends UR{constructor(e){super(),this.Yn=e}applyChanges(e){const t=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?t.push(this.Yn.addEntry(e,s)):this.Yn.removeEntry(r)}),se.waitFor(t)}getFromCache(e,t){return this.Yn.getEntry(e,t)}getAllFromCache(e,t){return this.Yn.getEntries(e,t)}}class MP{constructor(e){this.persistence=e,this.Rs=new gh(t=>ot(t),cn),this.lastRemoteSnapshotVersion=bt.min(),this.highestTargetId=0,this.bs=0,this.Ps=new NS,this.targetCount=0,this.vs=Sp.Pn()}forEachTarget(e,t){return this.Rs.forEach((r,s)=>t(s)),se.resolve()}getLastRemoteSnapshotVersion(e){return se.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return se.resolve(this.bs)}allocateTargetId(e){return this.highestTargetId=this.vs.next(),se.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.bs&&(this.bs=t),se.resolve()}Dn(e){this.Rs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.vs=new Sp(t),this.highestTargetId=t),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}addTargetData(e,t){return this.Dn(t),this.targetCount+=1,se.resolve()}updateTargetData(e,t){return this.Dn(t),se.resolve()}removeTargetData(e,t){return this.Rs.delete(t.target),this.Ps.ls(t.targetId),this.targetCount-=1,se.resolve()}removeTargets(e,t,r){let s=0;const u=[];return this.Rs.forEach((c,g)=>{g.sequenceNumber<=t&&null===r.get(g.targetId)&&(this.Rs.delete(c),u.push(this.removeMatchingKeysForTargetId(e,g.targetId)),s++)}),se.waitFor(u).next(()=>s)}getTargetCount(e){return se.resolve(this.targetCount)}getTargetData(e,t){const r=this.Rs.get(t)||null;return se.resolve(r)}addMatchingKeys(e,t,r){return this.Ps.us(t,r),se.resolve()}removeMatchingKeys(e,t,r){this.Ps.hs(t,r);const s=this.persistence.referenceDelegate,u=[];return s&&t.forEach(c=>{u.push(s.markPotentiallyOrphaned(e,c))}),se.waitFor(u)}removeMatchingKeysForTargetId(e,t){return this.Ps.ls(t),se.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Ps.ds(t);return se.resolve(r)}containsKey(e,t){return se.resolve(this.Ps.containsKey(t))}}class zR{constructor(e,t){this.Vs={},this.overlays={},this.Ss=new Li(0),this.Ds=!1,this.Ds=!0,this.referenceDelegate=e(this),this.Cs=new MP(this),this.indexManager=new gP,this.remoteDocumentCache=new AP(r=>this.referenceDelegate.xs(r)),this.It=new IR(t),this.Ns=new CP(this.It)}start(){return Promise.resolve()}shutdown(){return this.Ds=!1,Promise.resolve()}get started(){return this.Ds}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new TP,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Vs[e.toKey()];return r||(r=new SP(t,this.referenceDelegate),this.Vs[e.toKey()]=r),r}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ns}runTransaction(e,t,r){Oe("MemoryPersistence","Starting transaction:",e);const s=new RP(this.Ss.next());return this.referenceDelegate.ks(),r(s).next(u=>this.referenceDelegate.Ms(s).next(()=>u)).toPromise().then(u=>(s.raiseOnCommittedEvent(),u))}Os(e,t){return se.or(Object.values(this.Vs).map(r=>()=>r.containsKey(e,t)))}}class RP extends Ju{constructor(e){super(),this.currentSequenceNumber=e}}class nD{constructor(e){this.persistence=e,this.Fs=new NS,this.$s=null}static Bs(e){return new nD(e)}get Ls(){if(this.$s)return this.$s;throw et()}addReference(e,t,r){return this.Fs.addReference(r,t),this.Ls.delete(r.toString()),se.resolve()}removeReference(e,t,r){return this.Fs.removeReference(r,t),this.Ls.add(r.toString()),se.resolve()}markPotentiallyOrphaned(e,t){return this.Ls.add(t.toString()),se.resolve()}removeTarget(e,t){this.Fs.ls(t.targetId).forEach(s=>this.Ls.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(s=>{s.forEach(u=>this.Ls.add(u.toString()))}).next(()=>r.removeTargetData(e,t))}ks(){this.$s=new Set}Ms(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return se.forEach(this.Ls,r=>{const s=Ge.fromPath(r);return this.Us(e,s).next(u=>{u||t.removeEntry(s,bt.min())})}).next(()=>(this.$s=null,t.apply(e)))}updateLimboDocument(e,t){return this.Us(e,t).next(r=>{r?this.Ls.delete(t.toString()):this.Ls.add(t.toString())})}xs(e){return 0}Us(e,t){return se.or([()=>se.resolve(this.Fs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Os(e,t)])}}class NP{constructor(e){this.It=e}$(e,t,r,s){const u=new zm("createOrUpgrade",t);var g;r<1&&s>=1&&(e.createObjectStore("owner"),(g=e).createObjectStore("mutationQueues",{keyPath:"userId"}),g.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",yR,{unique:!0}),g.createObjectStore("documentMutations"),qR(e),function(g){g.createObjectStore("remoteDocuments")}(e));let c=se.resolve();return r<3&&s>=3&&(0!==r&&(function(g){g.deleteObjectStore("targetDocuments"),g.deleteObjectStore("targets"),g.deleteObjectStore("targetGlobal")}(e),qR(e)),c=c.next(()=>function(g){const v=g.store("targetGlobal"),b={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:bt.min().toTimestamp(),targetCount:0};return v.put("targetGlobalKey",b)}(u))),r<4&&s>=4&&(0!==r&&(c=c.next(()=>function(g,v){return v.store("mutations").W().next(b=>{g.deleteObjectStore("mutations"),g.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",yR,{unique:!0});const A=v.store("mutations"),M=b.map(L=>A.put(L));return se.waitFor(M)})}(e,u))),c=c.next(()=>{!function(g){g.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&s>=5&&(c=c.next(()=>this.qs(u))),r<6&&s>=6&&(c=c.next(()=>(function(g){g.createObjectStore("remoteDocumentGlobal")}(e),this.Ks(u)))),r<7&&s>=7&&(c=c.next(()=>this.Gs(u))),r<8&&s>=8&&(c=c.next(()=>this.Qs(e,u))),r<9&&s>=9&&(c=c.next(()=>{!function(g){g.objectStoreNames.contains("remoteDocumentChanges")&&g.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&s>=10&&(c=c.next(()=>this.js(u))),r<11&&s>=11&&(c=c.next(()=>{(function(g){g.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(g){g.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&s>=12&&(c=c.next(()=>{!function(g){const v=g.createObjectStore("documentOverlays",{keyPath:rP});v.createIndex("collectionPathOverlayIndex",iP,{unique:!1}),v.createIndex("collectionGroupOverlayIndex",sP,{unique:!1})}(e)})),r<13&&s>=13&&(c=c.next(()=>function(g){const v=g.createObjectStore("remoteDocumentsV14",{keyPath:qk});v.createIndex("documentKeyIndex",Wk),v.createIndex("collectionGroupIndex",Kk)}(e)).next(()=>this.Ws(e,u)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&s>=14&&(c=c.next(()=>this.zs(e,u))),r<15&&s>=15&&(c=c.next(()=>function(g){g.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),g.createObjectStore("indexState",{keyPath:Xk}).createIndex("sequenceNumberIndex",eP,{unique:!1}),g.createObjectStore("indexEntries",{keyPath:tP}).createIndex("documentKeyIndex",nP,{unique:!1})}(e))),c}Ks(e){let t=0;return e.store("remoteDocuments").Z((r,s)=>{t+=Xb(s)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}qs(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.W().next(s=>se.forEach(s,u=>{const c=IDBKeyRange.bound([u.userId,-1],[u.userId,u.lastAcknowledgedBatchId]);return r.W("userMutationsIndex",c).next(g=>se.forEach(g,v=>{Tt(v.userId===u.userId);const b=bp(this.It,v);return kR(e,u.userId,b).next(()=>{})}))}))}Gs(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(s=>{const u=[];return r.Z((c,g)=>{const v=new Qt(c),b=[0,ps(v)];u.push(t.get(b).next(A=>A?se.resolve():t.put({targetId:0,path:ps(v),sequenceNumber:s.highestListenSequenceNumber})))}).next(()=>se.waitFor(u))})}Qs(e,t){e.createObjectStore("collectionParents",{keyPath:Jk});const r=t.store("collectionParents"),s=new RS,u=c=>{if(s.add(c)){const g=c.lastSegment(),v=c.popLast();return r.put({collectionId:g,parent:ps(v)})}};return t.store("remoteDocuments").Z({X:!0},(c,g)=>{const v=new Qt(c);return u(v.popLast())}).next(()=>t.store("documentMutations").Z({X:!0},([c,g,v],b)=>{const A=rl(g);return u(A.popLast())}))}js(e){const t=e.store("targets");return t.Z((r,s)=>{const u=$w(s),c=DR(this.It,u);return t.put(c)})}Ws(e,t){const r=t.store("remoteDocuments"),s=[];return r.Z((u,c)=>{const g=t.store("remoteDocumentsV14"),v=(b=c,b.document?new Ge(Qt.fromString(b.document.name).popFirst(5)):b.noDocument?Ge.fromSegments(b.noDocument.path):b.unknownDocument?Ge.fromSegments(b.unknownDocument.path):et()).path.toArray();var b;const A={prefixPath:v.slice(0,v.length-2),collectionGroup:v[v.length-2],documentId:v[v.length-1],readTime:c.readTime||[0,0],unknownDocument:c.unknownDocument,noDocument:c.noDocument,document:c.document,hasCommittedMutations:!!c.hasCommittedMutations};s.push(g.put(A))}).next(()=>se.waitFor(s))}zs(e,t){const r=t.store("mutations"),s=BR(this.It),u=new zR(nD.Bs,this.It.re);return r.W().next(c=>{const g=new Map;return c.forEach(v=>{var b;let A=null!==(b=g.get(v.userId))&&void 0!==b?b:Vt();bp(this.It,v).keys().forEach(M=>A=A.add(M)),g.set(v.userId,A)}),se.forEach(g,(v,b)=>{const A=new Er(b),M=Yb.oe(this.It,A),L=u.getIndexManager(A),G=eD.oe(A,this.It,L,u.referenceDelegate);return new GR(s,G,M,L).recalculateAndSaveOverlaysForDocumentKeys(new CS(t,Li.at),v).next()})})}}function qR(n){n.createObjectStore("targetDocuments",{keyPath:Yk}).createIndex("documentTargetsIndex",Qk,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Zk,{unique:!0}),n.createObjectStore("targetGlobal")}const OS="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class kS{constructor(e,t,r,s,u,c,g,v,b,A,M=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Hs=u,this.window=c,this.document=g,this.Js=b,this.Ys=A,this.Xs=M,this.Ss=null,this.Ds=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Zs=null,this.inForeground=!1,this.ti=null,this.ei=null,this.ni=Number.NEGATIVE_INFINITY,this.si=L=>Promise.resolve(),!kS.C())throw new Ne(ce.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new EP(this,s),this.ii=t+"main",this.It=new IR(v),this.ri=new fs(this.ii,this.Xs,new NP(this.It)),this.Cs=new yP(this.referenceDelegate,this.It),this.remoteDocumentCache=BR(this.It),this.Ns=new lP,this.window&&this.window.localStorage?this.oi=this.window.localStorage:(this.oi=null,!1===A&&un("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ui().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Ne(ce.FAILED_PRECONDITION,OS);return this.ci(),this.ai(),this.hi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Cs.getHighestSequenceNumber(e))}).then(e=>{this.Ss=new Li(e,this.Js)}).then(()=>{this.Ds=!0}).catch(e=>(this.ri&&this.ri.close(),Promise.reject(e)))}li(e){var t=this;return this.si=function(){var r=(0,ye.Z)(function*(s){if(t.started)return e(s)});return function(s){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ri.L(function(){var t=(0,ye.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Hs.enqueueAndForget((0,ye.Z)(function*(){t.started&&(yield t.ui())})))}ui(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>rD(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.fi(e).next(t=>{t||(this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)))})}).next(()=>this.di(e)).next(t=>this.isPrimary&&!t?this._i(e).next(()=>!1):!!t&&this.wi(e).next(()=>!0))).catch(e=>{if(xc(e))return Oe("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Oe("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Hs.enqueueRetryable(()=>this.si(e)),this.isPrimary=e})}fi(e){return Kw(e).get("owner").next(t=>se.resolve(this.mi(t)))}gi(e){return rD(e).delete(this.clientId)}yi(){var e=this;return(0,ye.Z)(function*(){if(e.isPrimary&&!e.pi(e.ni,18e5)){e.ni=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const s=ci(r,"clientMetadata");return s.W().next(u=>{const c=e.Ii(u,18e5),g=u.filter(v=>-1===c.indexOf(v));return se.forEach(g,v=>s.delete(v.clientId)).next(()=>g)})}).catch(()=>[]);if(e.oi)for(const r of t)e.oi.removeItem(e.Ti(r.clientId))}})()}hi(){this.ei=this.Hs.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ui().then(()=>this.yi()).then(()=>this.hi()))}mi(e){return!!e&&e.ownerId===this.clientId}di(e){return this.Ys?se.resolve(!0):Kw(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)){if(this.mi(t)&&this.networkEnabled)return!0;if(!this.mi(t)){if(!t.allowTabSynchronization)throw new Ne(ce.FAILED_PRECONDITION,OS);return!1}}return!(!this.networkEnabled||!this.inForeground)||rD(e).W().next(r=>void 0===this.Ii(r,5e3).find(s=>{if(this.clientId!==s.clientId){const c=!this.inForeground&&s.inForeground,g=this.networkEnabled===s.networkEnabled;if(!this.networkEnabled&&s.networkEnabled||c&&g)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&Oe("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,ye.Z)(function*(){e.Ds=!1,e.Ai(),e.ei&&(e.ei.cancel(),e.ei=null),e.Ri(),e.bi(),yield e.ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new CS(t,Li.at);return e._i(r).next(()=>e.gi(r))}),e.ri.close(),e.Pi()})()}Ii(e,t){return e.filter(r=>this.pi(r.updateTimeMs,t)&&!this.Ei(r.clientId))}vi(){return this.runTransaction("getActiveClients","readonly",e=>rD(e).W().next(t=>this.Ii(t,18e5).map(r=>r.clientId)))}get started(){return this.Ds}getMutationQueue(e,t){return eD.oe(e,this.It,t,this.referenceDelegate)}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new mP(e,this.It.re.databaseId)}getDocumentOverlayCache(e){return Yb.oe(this.It,e)}getBundleCache(){return this.Ns}runTransaction(e,t,r){Oe("IndexedDbPersistence","Starting transaction:",e);const s="readonly"===t?"readonly":"readwrite",u=15===(c=this.Xs)?aP:14===c?ER:13===c?wR:12===c?oP:11===c?vR:void et();var c;let g;return this.ri.runTransaction(e,s,u,v=>(g=new CS(v,this.Ss?this.Ss.next():Li.at),"readwrite-primary"===t?this.fi(g).next(b=>!!b||this.di(g)).next(b=>{if(!b)throw un(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)),new Ne(ce.FAILED_PRECONDITION,Ew);return r(g)}).next(b=>this.wi(g).next(()=>b)):this.Vi(g).next(()=>r(g)))).then(v=>(g.raiseOnCommittedEvent(),v))}Vi(e){return Kw(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)&&!this.mi(t)&&!(this.Ys||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Ne(ce.FAILED_PRECONDITION,OS)})}wi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Kw(e).put("owner",t)}static C(){return fs.C()}_i(e){const t=Kw(e);return t.get("owner").next(r=>this.mi(r)?(Oe("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):se.resolve())}pi(e,t){const r=Date.now();return!(e<r-t||e>r&&(un(`Detected an update time that is in the future: ${e} > ${r}`),1))}ci(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ti=()=>{this.Hs.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ui()))},this.document.addEventListener("visibilitychange",this.ti),this.inForeground="visible"===this.document.visibilityState)}Ri(){this.ti&&(this.document.removeEventListener("visibilitychange",this.ti),this.ti=null)}ai(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Zs=()=>{this.Ai(),(0,Ct.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Hs.enterRestrictedMode(!0),this.Hs.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Zs))}bi(){this.Zs&&(this.window.removeEventListener("pagehide",this.Zs),this.Zs=null)}Ei(e){var t;try{const r=null!==(null===(t=this.oi)||void 0===t?void 0:t.getItem(this.Ti(e)));return Oe("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return un("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ai(){if(this.oi)try{this.oi.setItem(this.Ti(this.clientId),String(Date.now()))}catch(e){un("Failed to set zombie client id.",e)}}Pi(){if(this.oi)try{this.oi.removeItem(this.Ti(this.clientId))}catch{}}Ti(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Kw(n){return ci(n,"owner")}function rD(n){return ci(n,"clientMetadata")}function PS(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class FS{constructor(e,t,r,s){this.targetId=e,this.fromCache=t,this.Si=r,this.Di=s}static Ci(e,t){let r=Vt(),s=Vt();for(const u of t.docChanges)switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:s=s.add(u.doc.key)}return new FS(e,t.fromCache,r,s)}}class WR{constructor(){this.xi=!1}initialize(e,t){this.Ni=e,this.indexManager=t,this.xi=!0}getDocumentsMatchingQuery(e,t,r,s){return this.ki(e,t).next(u=>u||this.Mi(e,t,s,r)).next(u=>u||this.Oi(e,t))}ki(e,t){if(NM(t))return se.resolve(null);let r=$s(t);return this.indexManager.getIndexType(e,r).next(s=>0===s?null:(null!==t.limit&&1===s&&(t=$b(t,null,"F"),r=$s(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(u=>{const c=Vt(...u);return this.Ni.getDocuments(e,c).next(g=>this.indexManager.getMinOffset(e,r).next(v=>{const b=this.Fi(t,g);return this.$i(t,b,c,v.readTime)?this.ki(e,$b(t,null,"F")):this.Bi(e,b,t,v)}))})))}Mi(e,t,r,s){return NM(t)||s.isEqual(bt.min())?this.Oi(e,t):this.Ni.getDocuments(e,r).next(u=>{const c=this.Fi(t,u);return this.$i(t,c,r,s)?this.Oi(e,t):(Wo()<=yc.in.DEBUG&&Oe("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),vS(t)),this.Bi(e,c,t,Vb(s,-1)))})}Fi(e,t){let r=new ln(PM(e));return t.forEach((s,u)=>{wS(e,u)&&(r=r.add(u))}),r}$i(e,t,r,s){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const u="F"===e.limitType?t.last():t.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(s)>0)}Oi(e,t){return Wo()<=yc.in.DEBUG&&Oe("QueryEngine","Using full collection scan to execute query:",vS(t)),this.Ni.getDocumentsMatchingQuery(e,t,hs.min())}Bi(e,t,r,s){return this.Ni.getDocumentsMatchingQuery(e,r,s).next(u=>(t.forEach(c=>{u=u.insert(c.key,c)}),u))}}class OP{constructor(e,t,r,s){this.persistence=e,this.Li=t,this.It=s,this.Ui=new Un(xt),this.qi=new gh(u=>ot(u),cn),this.Ki=new Map,this.Gi=e.getRemoteDocumentCache(),this.Cs=e.getTargetCache(),this.Ns=e.getBundleCache(),this.Qi(r)}Qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new GR(this.Gi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Gi.setIndexManager(this.indexManager),this.Li.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ui))}}function KR(n,e,t,r){return new OP(n,e,t,r)}function ZR(n,e){return LS.apply(this,arguments)}function LS(){return LS=(0,ye.Z)(function*(n,e){const t=We(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let s;return t.mutationQueue.getAllMutationBatches(r).next(u=>(s=u,t.Qi(e),t.mutationQueue.getAllMutationBatches(r))).next(u=>{const c=[],g=[];let v=Vt();for(const b of s){c.push(b.batchId);for(const A of b.mutations)v=v.add(A.key)}for(const b of u){g.push(b.batchId);for(const A of b.mutations)v=v.add(A.key)}return t.localDocuments.getDocuments(r,v).next(b=>({ji:b,removedBatchIds:c,addedBatchIds:g}))})})}),LS.apply(this,arguments)}function kP(n,e){const t=We(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),u=t.Gi.newChangeBuffer({trackRemovals:!0});return function(c,g,v,b){const A=v.batch,M=A.keys();let L=se.resolve();return M.forEach(G=>{L=L.next(()=>b.getEntry(g,G)).next(Q=>{const Ie=v.docVersions.get(G);Tt(null!==Ie),Q.version.compareTo(Ie)<0&&(A.applyToRemoteDocument(Q,v),Q.isValidDocument()&&(Q.setReadTime(v.commitVersion),b.addEntry(Q)))})}),L.next(()=>c.mutationQueue.removeMutationBatch(g,A))}(t,r,e,u).next(()=>u.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(c){let g=Vt();for(let v=0;v<c.mutationResults.length;++v)c.mutationResults[v].transformResults.length>0&&(g=g.add(c.batch.mutations[v].key));return g}(e))).next(()=>t.localDocuments.getDocuments(r,s))})}function YR(n){const e=We(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Cs.getLastRemoteSnapshotVersion(t))}function PP(n,e){const t=We(n),r=e.snapshotVersion;let s=t.Ui;return t.persistence.runTransaction("Apply remote event","readwrite-primary",u=>{const c=t.Gi.newChangeBuffer({trackRemovals:!0});s=t.Ui;const g=[];e.targetChanges.forEach((A,M)=>{const L=s.get(M);if(!L)return;g.push(t.Cs.removeMatchingKeys(u,A.removedDocuments,M).next(()=>t.Cs.addMatchingKeys(u,A.addedDocuments,M)));let G=L.withSequenceNumber(u.currentSequenceNumber);var Q,Ie,Ce;e.targetMismatches.has(M)?G=G.withResumeToken(br.EMPTY_BYTE_STRING,bt.min()).withLastLimboFreeSnapshotVersion(bt.min()):A.resumeToken.approximateByteSize()>0&&(G=G.withResumeToken(A.resumeToken,r)),s=s.insert(M,G),Ie=G,Ce=A,(0===(Q=L).resumeToken.approximateByteSize()||Ie.snapshotVersion.toMicroseconds()-Q.snapshotVersion.toMicroseconds()>=3e8||Ce.addedDocuments.size+Ce.modifiedDocuments.size+Ce.removedDocuments.size>0)&&g.push(t.Cs.updateTargetData(u,G))});let v=Hs(),b=Vt();if(e.documentUpdates.forEach(A=>{e.resolvedLimboDocuments.has(A)&&g.push(t.persistence.referenceDelegate.updateLimboDocument(u,A))}),g.push(QR(u,c,e.documentUpdates).next(A=>{v=A.Wi,b=A.zi})),!r.isEqual(bt.min())){const A=t.Cs.getLastRemoteSnapshotVersion(u).next(M=>t.Cs.setTargetsMetadata(u,u.currentSequenceNumber,r));g.push(A)}return se.waitFor(g).next(()=>c.apply(u)).next(()=>t.localDocuments.getLocalViewOfDocuments(u,v,b)).next(()=>v)}).then(u=>(t.Ui=s,u))}function QR(n,e,t){let r=Vt(),s=Vt();return t.forEach(u=>r=r.add(u)),e.getEntries(n,r).next(u=>{let c=Hs();return t.forEach((g,v)=>{const b=u.get(g);v.isFoundDocument()!==b.isFoundDocument()&&(s=s.add(g)),v.isNoDocument()&&v.version.isEqual(bt.min())?(e.removeEntry(g,v.readTime),c=c.insert(g,v)):!b.isValidDocument()||v.version.compareTo(b.version)>0||0===v.version.compareTo(b.version)&&b.hasPendingWrites?(e.addEntry(v),c=c.insert(g,v)):Oe("LocalStore","Ignoring outdated watch update for ",g,". Current version:",b.version," Watch version:",v.version)}),{Wi:c,zi:s}})}function FP(n,e){const t=We(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function fy(n,e){const t=We(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return t.Cs.getTargetData(r,e).next(u=>u?(s=u,se.resolve(s)):t.Cs.allocateTargetId(r).next(c=>(s=new mh(e,c,0,r.currentSequenceNumber),t.Cs.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=t.Ui.get(r.targetId);return(null===s||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(t.Ui=t.Ui.insert(r.targetId,r),t.qi.set(e,r.targetId)),r})}function py(n,e,t){return VS.apply(this,arguments)}function VS(){return VS=(0,ye.Z)(function*(n,e,t){const r=We(n),s=r.Ui.get(e),u=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",u,c=>r.persistence.referenceDelegate.removeTarget(c,s)))}catch(c){if(!xc(c))throw c;Oe("LocalStore",`Failed to update sequence numbers for target ${e}: ${c}`)}r.Ui=r.Ui.remove(e),r.qi.delete(s.target)}),VS.apply(this,arguments)}function iD(n,e,t){const r=We(n);let s=bt.min(),u=Vt();return r.persistence.runTransaction("Execute query","readonly",c=>function(g,v,b){const A=We(g),M=A.qi.get(b);return void 0!==M?se.resolve(A.Ui.get(M)):A.Cs.getTargetData(v,b)}(r,c,$s(e)).next(g=>{if(g)return s=g.lastLimboFreeSnapshotVersion,r.Cs.getMatchingKeysForTargetId(c,g.targetId).next(v=>{u=v})}).next(()=>r.Li.getDocumentsMatchingQuery(c,e,t?s:bt.min(),t?u:Vt())).next(g=>(eN(r,kM(e),g),{documents:g,Hi:u})))}function JR(n,e){const t=We(n),r=We(t.Cs),s=t.Ui.get(e);return s?Promise.resolve(s.target):t.persistence.runTransaction("Get target data","readonly",u=>r.se(u,e).next(c=>c?c.target:null))}function XR(n,e){const t=We(n),r=t.Ki.get(e)||bt.min();return t.persistence.runTransaction("Get new document changes","readonly",s=>t.Gi.getAllFromCollectionGroup(s,e,Vb(r,-1),Number.MAX_SAFE_INTEGER)).then(s=>(eN(t,e,s),s))}function eN(n,e,t){let r=bt.min();t.forEach((s,u)=>{u.readTime.compareTo(r)>0&&(r=u.readTime)}),n.Ki.set(e,r)}function US(){return US=(0,ye.Z)(function*(n,e,t,r){const s=We(n);let u=Vt(),c=Hs();for(const b of t){const A=e.Ji(b.metadata.name);b.document&&(u=u.add(A));const M=e.Yi(b);M.setReadTime(e.Xi(b.metadata.readTime)),c=c.insert(A,M)}const g=s.Gi.newChangeBuffer({trackRemovals:!0}),v=yield fy(s,(b=r,$s(ry(Qt.fromString(`__bundle__/docs/${b}`)))));var b;return s.persistence.runTransaction("Apply bundle documents","readwrite",b=>QR(b,g,c).next(A=>(g.apply(b),A)).next(A=>s.Cs.removeMatchingKeysForTargetId(b,v.targetId).next(()=>s.Cs.addMatchingKeys(b,u,v.targetId)).next(()=>s.localDocuments.getLocalViewOfDocuments(b,A.Wi,A.zi)).next(()=>A.Wi)))}),US.apply(this,arguments)}function VP(n,e){return BS.apply(this,arguments)}function BS(){return BS=(0,ye.Z)(function*(n,e,t=Vt()){const r=yield fy(n,$s(xS(e.bundledQuery))),s=We(n);return s.persistence.runTransaction("Save named query","readwrite",u=>{const c=li(e.readTime);if(r.snapshotVersion.compareTo(c)>=0)return s.Ns.saveNamedQuery(u,e);const g=r.withResumeToken(br.EMPTY_BYTE_STRING,c);return s.Ui=s.Ui.insert(g.targetId,g),s.Cs.updateTargetData(u,g).next(()=>s.Cs.removeMatchingKeysForTargetId(u,r.targetId)).next(()=>s.Cs.addMatchingKeys(u,t,r.targetId)).next(()=>s.Ns.saveNamedQuery(u,e))})}),BS.apply(this,arguments)}function tN(n,e){return`firestore_clients_${n}_${e}`}function nN(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function jS(n,e){return`firestore_targets_${n}_${e}`}class sD{constructor(e,t,r,s){this.user=e,this.batchId=t,this.state=r,this.error=s}static Zi(e,t,r){const s=JSON.parse(r);let u,c="object"==typeof s&&-1!==["pending","acknowledged","rejected"].indexOf(s.state)&&(void 0===s.error||"object"==typeof s.error);return c&&s.error&&(c="string"==typeof s.error.message&&"string"==typeof s.error.code,c&&(u=new Ne(s.error.code,s.error.message))),c?new sD(e,t,s.state,u):(un("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Zw{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Zi(e,t){const r=JSON.parse(t);let s,u="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return u&&r.error&&(u="string"==typeof r.error.message&&"string"==typeof r.error.code,u&&(s=new Ne(r.error.code,r.error.message))),u?new Zw(e,r.state,s):(un("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class oD{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Zi(e,t){const r=JSON.parse(t);let s="object"==typeof r&&r.activeTargetIds instanceof Array,u=qb();for(let c=0;s&&c<r.activeTargetIds.length;++c)s=jb(r.activeTargetIds[c]),u=u.add(r.activeTargetIds[c]);return s?new oD(e,u):(un("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class $S{constructor(e,t){this.clientId=e,this.onlineState=t}static Zi(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new $S(t.clientId,t.onlineState):(un("SharedClientState",`Failed to parse online state: ${e}`),null)}}class HS{constructor(){this.activeTargetIds=qb()}er(e){this.activeTargetIds=this.activeTargetIds.add(e)}nr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}tr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class GS{constructor(e,t,r,s,u){this.window=e,this.Hs=t,this.persistenceKey=r,this.sr=s,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ir=this.rr.bind(this),this.ur=new Un(xt),this.started=!1,this.cr=[];const c=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=u,this.ar=tN(this.persistenceKey,this.sr),this.hr=`firestore_sequence_number_${this.persistenceKey}`,this.ur=this.ur.insert(this.sr,new HS),this.lr=new RegExp(`^firestore_clients_${c}_([^_]*)$`),this.dr=new RegExp(`^firestore_mutations_${c}_(\\d+)(?:_(.*))?$`),this._r=new RegExp(`^firestore_targets_${c}_(\\d+)$`),this.wr=`firestore_online_state_${this.persistenceKey}`,this.mr=function(g){return`firestore_bundle_loaded_v2_${g}`}(this.persistenceKey),this.window.addEventListener("storage",this.ir)}static C(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,ye.Z)(function*(){const t=yield e.syncEngine.vi();for(const s of t){if(s===e.sr)continue;const u=e.getItem(tN(e.persistenceKey,s));if(u){const c=oD.Zi(s,u);c&&(e.ur=e.ur.insert(c.clientId,c))}}e.gr();const r=e.storage.getItem(e.wr);if(r){const s=e.yr(r);s&&e.pr(s)}for(const s of e.cr)e.rr(s);e.cr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.hr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ir(this.ur)}isActiveQueryTarget(e){let t=!1;return this.ur.forEach((r,s)=>{s.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Tr(e,"pending")}updateMutationState(e,t,r){this.Tr(e,t,r),this.Er(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(jS(this.persistenceKey,e));if(r){const s=Zw.Zi(e,r);s&&(t=s.state)}}return this.Ar.er(e),this.gr(),t}removeLocalQueryTarget(e){this.Ar.nr(e),this.gr()}isLocalQueryTarget(e){return this.Ar.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(jS(this.persistenceKey,e))}updateQueryState(e,t,r){this.Rr(e,t,r)}handleUserChange(e,t,r){t.forEach(s=>{this.Er(s)}),this.currentUser=e,r.forEach(s=>{this.addPendingMutation(s)})}setOnlineState(e){this.br(e)}notifyBundleLoaded(e){this.Pr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ir),this.removeItem(this.ar),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Oe("SharedClientState","READ",e,t),t}setItem(e,t){Oe("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Oe("SharedClientState","REMOVE",e),this.storage.removeItem(e)}rr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Oe("SharedClientState","EVENT",r.key,r.newValue),r.key===this.ar)return void un("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Hs.enqueueRetryable((0,ye.Z)(function*(){if(t.started){if(null!==r.key)if(t.lr.test(r.key)){if(null==r.newValue){const s=t.vr(r.key);return t.Vr(s,null)}{const s=t.Sr(r.key,r.newValue);if(s)return t.Vr(s.clientId,s)}}else if(t.dr.test(r.key)){if(null!==r.newValue){const s=t.Dr(r.key,r.newValue);if(s)return t.Cr(s)}}else if(t._r.test(r.key)){if(null!==r.newValue){const s=t.Nr(r.key,r.newValue);if(s)return t.kr(s)}}else if(r.key===t.wr){if(null!==r.newValue){const s=t.yr(r.newValue);if(s)return t.pr(s)}}else if(r.key===t.hr){const s=function(u){let c=Li.at;if(null!=u)try{const g=JSON.parse(u);Tt("number"==typeof g),c=g}catch(g){un("SharedClientState","Failed to read sequence number from WebStorage",g)}return c}(r.newValue);s!==Li.at&&t.sequenceNumberHandler(s)}else if(r.key===t.mr){const s=t.Mr(r.newValue);yield Promise.all(s.map(u=>t.syncEngine.Or(u)))}}else t.cr.push(r)}))}}get Ar(){return this.ur.get(this.sr)}gr(){this.setItem(this.ar,this.Ar.tr())}Tr(e,t,r){const s=new sD(this.currentUser,e,t,r),u=nN(this.persistenceKey,this.currentUser,e);this.setItem(u,s.tr())}Er(e){const t=nN(this.persistenceKey,this.currentUser,e);this.removeItem(t)}br(e){this.storage.setItem(this.wr,JSON.stringify({clientId:this.sr,onlineState:e}))}Rr(e,t,r){const s=jS(this.persistenceKey,e),u=new Zw(e,t,r);this.setItem(s,u.tr())}Pr(e){const t=JSON.stringify(Array.from(e));this.setItem(this.mr,t)}vr(e){const t=this.lr.exec(e);return t?t[1]:null}Sr(e,t){const r=this.vr(e);return oD.Zi(r,t)}Dr(e,t){const r=this.dr.exec(e),s=Number(r[1]);return sD.Zi(new Er(void 0!==r[2]?r[2]:null),s,t)}Nr(e,t){const r=this._r.exec(e),s=Number(r[1]);return Zw.Zi(s,t)}yr(e){return $S.Zi(e)}Mr(e){return JSON.parse(e)}Cr(e){var t=this;return(0,ye.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Fr(e.batchId,e.state,e.error);Oe("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}kr(e){return this.syncEngine.$r(e.targetId,e.state,e.error)}Vr(e,t){const r=t?this.ur.insert(e,t):this.ur.remove(e),s=this.Ir(this.ur),u=this.Ir(r),c=[],g=[];return u.forEach(v=>{s.has(v)||c.push(v)}),s.forEach(v=>{u.has(v)||g.push(v)}),this.syncEngine.Br(c,g).then(()=>{this.ur=r})}pr(e){this.ur.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ir(e){let t=qb();return e.forEach((r,s)=>{t=t.unionWith(s.activeTargetIds)}),t}}class rN{constructor(){this.Lr=new HS,this.Ur={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Lr.er(e),this.Ur[e]||"not-current"}updateQueryState(e,t,r){this.Ur[e]=t}removeLocalQueryTarget(e){this.Lr.nr(e)}isLocalQueryTarget(e){return this.Lr.activeTargetIds.has(e)}clearQueryState(e){delete this.Ur[e]}getAllActiveQueryTargets(){return this.Lr.activeTargetIds}isActiveQueryTarget(e){return this.Lr.activeTargetIds.has(e)}start(){return this.Lr=new HS,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class UP{qr(e){}shutdown(){}}class iN{constructor(){this.Kr=()=>this.Gr(),this.Qr=()=>this.jr(),this.Wr=[],this.zr()}qr(e){this.Wr.push(e)}shutdown(){window.removeEventListener("online",this.Kr),window.removeEventListener("offline",this.Qr)}zr(){window.addEventListener("online",this.Kr),window.addEventListener("offline",this.Qr)}Gr(){Oe("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Wr)e(0)}jr(){Oe("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Wr)e(1)}static C(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const BP={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class jP{constructor(e){this.Hr=e.Hr,this.Jr=e.Jr}Yr(e){this.Xr=e}Zr(e){this.eo=e}onMessage(e){this.no=e}close(){this.Jr()}send(e){this.Hr(e)}so(){this.Xr()}io(e){this.eo(e)}ro(e){this.no(e)}}class $P extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.oo=(e.ssl?"https":"http")+"://"+e.host,this.uo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}co(e,t,r,s,u){const c=this.ao(e,t);Oe("RestConnection","Sending: ",c,r);const g={};return this.ho(g,s,u),this.lo(e,c,g,r).then(v=>(Oe("RestConnection","Received: ",v),v),v=>{throw Ac("RestConnection",`${e} failed with error: `,v,"url: ",c,"request:",r),v})}fo(e,t,r,s,u,c){return this.co(e,t,r,s,u)}ho(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+uh,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((s,u)=>e[u]=s),r&&r.headers.forEach((s,u)=>e[u]=s)}ao(e,t){return`${this.oo}/v1/${t}:${BP[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}lo(e,t,r,s){return new Promise((u,c)=>{const g=new xb;g.listenOnce(fw.COMPLETE,()=>{try{switch(g.getLastErrorCode()){case hw.NO_ERROR:const b=g.getResponseJson();Oe("Connection","XHR received:",JSON.stringify(b)),u(b);break;case hw.TIMEOUT:Oe("Connection",'RPC "'+e+'" timed out'),c(new Ne(ce.DEADLINE_EXCEEDED,"Request time out"));break;case hw.HTTP_ERROR:const A=g.getStatus();if(Oe("Connection",'RPC "'+e+'" failed with status:',A,"response text:",g.getResponseText()),A>0){const M=g.getResponseJson().error;if(M&&M.status&&M.message){const L=function(G){const Q=G.toLowerCase().replace(/_/g,"-");return Object.values(ce).indexOf(Q)>=0?Q:ce.UNKNOWN}(M.status);c(new Ne(L,M.message))}else c(new Ne(ce.UNKNOWN,"Server responded with status "+g.getStatus()))}else c(new Ne(ce.UNAVAILABLE,"Connection failed."));break;default:et()}}finally{Oe("Connection",'RPC "'+e+'" completed.')}});const v=JSON.stringify(s);g.send(t,"POST",v,r,15)})}_o(e,t,r){const s=[this.oo,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=dw(),c=uS(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(g.xmlHttpFactory=new lS({})),this.ho(g.initMessageHeaders,t,r),(0,Ct.uI)()||(0,Ct.b$)()||(0,Ct.d)()||(0,Ct.w1)()||(0,Ct.Mn)()||(0,Ct.ru)()||(g.httpHeadersOverwriteParam="$httpHeaders");const v=s.join("");Oe("Connection","Creating WebChannel: "+v,g);const b=u.createWebChannel(v,g);let A=!1,M=!1;const L=new jP({Hr:Q=>{M?Oe("Connection","Not sending because WebChannel is closed:",Q):(A||(Oe("Connection","Opening WebChannel transport."),b.open(),A=!0),Oe("Connection","WebChannel sending:",Q),b.send(Q))},Jr:()=>b.close()}),G=(Q,Ie,Ce)=>{Q.listen(Ie,Ze=>{try{Ce(Ze)}catch(lt){setTimeout(()=>{throw lt},0)}})};return G(b,fp.EventType.OPEN,()=>{M||Oe("Connection","WebChannel transport opened.")}),G(b,fp.EventType.CLOSE,()=>{M||(M=!0,Oe("Connection","WebChannel transport closed"),L.io())}),G(b,fp.EventType.ERROR,Q=>{M||(M=!0,Ac("Connection","WebChannel transport errored:",Q),L.io(new Ne(ce.UNAVAILABLE,"The operation could not be completed")))}),G(b,fp.EventType.MESSAGE,Q=>{var Ie;if(!M){const Ce=Q.data[0];Tt(!!Ce);const Ze=Ce,lt=Ze.error||(null===(Ie=Ze[0])||void 0===Ie?void 0:Ie.error);if(lt){Oe("Connection","WebChannel received error:",lt);const ct=lt.status;let tt=function(kt){const or=Fr[kt];if(void 0!==or)return YM(or)}(ct),Dt=lt.message;void 0===tt&&(tt=ce.INTERNAL,Dt="Unknown error status: "+ct+" with message "+lt.message),M=!0,L.io(new Ne(tt,Dt)),b.close()}else Oe("Connection","WebChannel received:",Ce),L.ro(Ce)}}),G(c,Ab.STAT_EVENT,Q=>{Q.stat===pw.PROXY?Oe("Connection","Detected buffering proxy"):Q.stat===pw.NOPROXY&&Oe("Connection","Detected no buffering proxy")}),setTimeout(()=>{L.so()},0),L}}function sN(){return typeof window<"u"?window:null}function aD(){return typeof document<"u"?document:null}function Yw(n){return new Ok(n,!0)}class zS{constructor(e,t,r=1e3,s=1.5,u=6e4){this.Hs=e,this.timerId=t,this.wo=r,this.mo=s,this.yo=u,this.po=0,this.Io=null,this.To=Date.now(),this.reset()}reset(){this.po=0}Eo(){this.po=this.yo}Ao(e){this.cancel();const t=Math.floor(this.po+this.Ro()),r=Math.max(0,Date.now()-this.To),s=Math.max(0,t-r);s>0&&Oe("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.po} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Io=this.Hs.enqueueAfterDelay(this.timerId,s,()=>(this.To=Date.now(),e())),this.po*=this.mo,this.po<this.wo&&(this.po=this.wo),this.po>this.yo&&(this.po=this.yo)}bo(){null!==this.Io&&(this.Io.skipDelay(),this.Io=null)}cancel(){null!==this.Io&&(this.Io.cancel(),this.Io=null)}Ro(){return(Math.random()-.5)*this.po}}class oN{constructor(e,t,r,s,u,c,g,v){this.Hs=e,this.Po=r,this.vo=s,this.Vo=u,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=g,this.listener=v,this.state=0,this.So=0,this.Do=null,this.Co=null,this.stream=null,this.xo=new zS(e,t)}No(){return 1===this.state||5===this.state||this.ko()}ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Mo()}stop(){var e=this;return(0,ye.Z)(function*(){e.No()&&(yield e.close(0))})()}Oo(){this.state=0,this.xo.reset()}Fo(){this.ko()&&null===this.Do&&(this.Do=this.Hs.enqueueAfterDelay(this.Po,6e4,()=>this.$o()))}Bo(e){this.Lo(),this.stream.send(e)}$o(){var e=this;return(0,ye.Z)(function*(){if(e.ko())return e.close(0)})()}Lo(){this.Do&&(this.Do.cancel(),this.Do=null)}Uo(){this.Co&&(this.Co.cancel(),this.Co=null)}close(e,t){var r=this;return(0,ye.Z)(function*(){r.Lo(),r.Uo(),r.xo.cancel(),r.So++,4!==e?r.xo.reset():t&&t.code===ce.RESOURCE_EXHAUSTED?(un(t.toString()),un("Using maximum backoff delay to prevent overloading the backend."),r.xo.Eo()):t&&t.code===ce.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.qo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Zr(t)})()}qo(){}auth(){this.state=1;const e=this.Ko(this.So),t=this.So;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.So===t&&this.Go(r,s)},r=>{e(()=>{const s=new Ne(ce.UNKNOWN,"Fetching auth token failed: "+r.message);return this.Qo(s)})})}Go(e,t){const r=this.Ko(this.So);this.stream=this.jo(e,t),this.stream.Yr(()=>{r(()=>(this.state=2,this.Co=this.Hs.enqueueAfterDelay(this.vo,1e4,()=>(this.ko()&&(this.state=3),Promise.resolve())),this.listener.Yr()))}),this.stream.Zr(s=>{r(()=>this.Qo(s))}),this.stream.onMessage(s=>{r(()=>this.onMessage(s))})}Mo(){var e=this;this.state=5,this.xo.Ao((0,ye.Z)(function*(){e.state=0,e.start()}))}Qo(e){return Oe("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Ko(e){return t=>{this.Hs.enqueueAndForget(()=>this.So===e?t():(Oe("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class HP extends oN{constructor(e,t,r,s,u,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,s,c),this.It=u}jo(e,t){return this.Vo._o("Listen",e,t)}onMessage(e){this.xo.reset();const t=function Fk(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(v=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===v?1:"REMOVE"===v?2:"CURRENT"===v?3:"RESET"===v?4:et(),s=e.targetChange.targetIds||[],u=function(v,b){return v.gt?(Tt(void 0===b||"string"==typeof b),br.fromBase64String(b||"")):(Tt(void 0===b||b instanceof Uint8Array),br.fromUint8Array(b||new Uint8Array))}(n,e.targetChange.resumeToken),c=e.targetChange.cause,g=c&&function(v){const b=void 0===v.code?ce.UNKNOWN:YM(v.code);return new Ne(b,v.message||"")}(c);t=new tR(r,s,u,g||null)}else if("documentChange"in e){const r=e.documentChange,s=nl(n,r.document.name),u=li(r.document.updateTime),c=new Se({mapValue:{fields:r.document.fields}}),g=Fe.newFoundDocument(s,u,c);t=new Wb(r.targetIds||[],r.removedTargetIds||[],g.key,g)}else if("documentDelete"in e){const r=e.documentDelete,s=nl(n,r.document),u=r.readTime?li(r.readTime):bt.min(),c=Fe.newNoDocument(s,u);t=new Wb([],r.removedTargetIds||[],c.key,c)}else if("documentRemove"in e){const r=e.documentRemove,s=nl(n,r.document);t=new Wb([],r.removedTargetIds||[],s,null)}else{if(!("filter"in e))return et();{const r=e.filter,u=new Ck(r.count||0);t=new eR(r.targetId,u)}}var v;return t}(this.It,e),r=function(s){if(!("targetChange"in s))return bt.min();const u=s.targetChange;return u.targetIds&&u.targetIds.length?bt.min():u.readTime?li(u.readTime):bt.min()}(e);return this.listener.Wo(t,r)}zo(e){const t={};t.database=Bw(this.It),t.addTarget=function(s,u){let c;const g=u.target;return c=Ko(g)?{documents:dR(s,g)}:{query:hR(s,g)},c.targetId=u.targetId,u.resumeToken.approximateByteSize()>0?c.resumeToken=sR(s,u.resumeToken):u.snapshotVersion.compareTo(bt.min())>0&&(c.readTime=Vw(s,u.snapshotVersion.toTimestamp())),c}(this.It,e);const r=function Vk(n,e){const t=function(r,s){switch(s){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return et()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Bo(t)}Ho(e){const t={};t.database=Bw(this.It),t.removeTarget=e,this.Bo(t)}}class GP extends oN{constructor(e,t,r,s,u,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,s,c),this.It=u,this.Jo=!1}get Yo(){return this.Jo}start(){this.Jo=!1,this.lastStreamToken=void 0,super.start()}qo(){this.Jo&&this.Xo([])}jo(e,t){return this.Vo._o("Write",e,t)}onMessage(e){if(Tt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Jo){this.xo.reset();const t=function Lk(n,e){return n&&n.length>0?(Tt(void 0!==e),n.map(t=>function(r,s){let u=li(r.updateTime?r.updateTime:s);return u.isEqual(bt.min())&&(u=li(s)),new Ik(u,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=li(e.commitTime);return this.listener.Zo(r,t)}return Tt(!e.writeResults||0===e.writeResults.length),this.Jo=!0,this.listener.tu()}eu(){const e={};e.database=Bw(this.It),this.Bo(e)}Xo(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>jw(this.It,r))};this.Bo(t)}}class zP extends class{}{constructor(e,t,r,s){super(),this.authCredentials=e,this.appCheckCredentials=t,this.Vo=r,this.It=s,this.nu=!1}su(){if(this.nu)throw new Ne(ce.FAILED_PRECONDITION,"The client has already been terminated.")}co(e,t,r){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,u])=>this.Vo.co(e,t,r,s,u)).catch(s=>{throw"FirebaseError"===s.name?(s.code===ce.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Ne(ce.UNKNOWN,s.toString())})}fo(e,t,r,s){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,c])=>this.Vo.fo(e,t,r,u,c,s)).catch(u=>{throw"FirebaseError"===u.name?(u.code===ce.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new Ne(ce.UNKNOWN,u.toString())})}terminate(){this.nu=!0}}class qP{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.iu=0,this.ru=null,this.ou=!0}uu(){0===this.iu&&(this.cu("Unknown"),this.ru=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ru=null,this.au("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve())))}hu(e){"Online"===this.state?this.cu("Unknown"):(this.iu++,this.iu>=1&&(this.lu(),this.au(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.cu("Offline")))}set(e){this.lu(),this.iu=0,"Online"===e&&(this.ou=!1),this.cu(e)}cu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}au(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ou?(un(t),this.ou=!1):Oe("OnlineStateTracker",t)}lu(){null!==this.ru&&(this.ru.cancel(),this.ru=null)}}class WP{constructor(e,t,r,s,u){var c=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.fu=[],this.du=new Map,this._u=new Set,this.wu=[],this.mu=u,this.mu.qr(g=>{r.enqueueAndForget((0,ye.Z)(function*(){var v;vh(c)&&(Oe("RemoteStore","Restarting streams for network reachability change."),yield(v=(0,ye.Z)(function*(b){const A=We(b);A._u.add(4),yield gy(A),A.gu.set("Unknown"),A._u.delete(4),yield Qw(A)}),function(b){return v.apply(this,arguments)})(c))}))}),this.gu=new qP(r,s)}}function Qw(n){return qS.apply(this,arguments)}function qS(){return qS=(0,ye.Z)(function*(n){if(vh(n))for(const e of n.wu)yield e(!0)}),qS.apply(this,arguments)}function gy(n){return WS.apply(this,arguments)}function WS(){return WS=(0,ye.Z)(function*(n){for(const e of n.wu)yield e(!1)}),WS.apply(this,arguments)}function uD(n,e){const t=We(n);t.du.has(e.targetId)||(t.du.set(e.targetId,e),YS(t)?ZS(t):yy(t).ko()&&KS(t,e))}function Jw(n,e){const t=We(n),r=yy(t);t.du.delete(e),r.ko()&&aN(t,e),0===t.du.size&&(r.ko()?r.Fo():vh(t)&&t.gu.set("Unknown"))}function KS(n,e){n.yu.Ot(e.targetId),yy(n).zo(e)}function aN(n,e){n.yu.Ot(e),yy(n).Ho(e)}function ZS(n){n.yu=new Mk({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),se:e=>n.du.get(e)||null}),yy(n).start(),n.gu.uu()}function YS(n){return vh(n)&&!yy(n).No()&&n.du.size>0}function vh(n){return 0===We(n)._u.size}function uN(n){n.yu=void 0}function KP(n){return QS.apply(this,arguments)}function QS(){return QS=(0,ye.Z)(function*(n){n.du.forEach((e,t)=>{KS(n,e)})}),QS.apply(this,arguments)}function ZP(n,e){return JS.apply(this,arguments)}function JS(){return JS=(0,ye.Z)(function*(n,e){uN(n),YS(n)?(n.gu.hu(e),ZS(n)):n.gu.set("Unknown")}),JS.apply(this,arguments)}function YP(n,e,t){return XS.apply(this,arguments)}function XS(){return XS=(0,ye.Z)(function*(n,e,t){if(n.gu.set("Online"),e instanceof tR&&2===e.state&&e.cause)try{yield(r=(0,ye.Z)(function*(s,u){const c=u.cause;for(const g of u.targetIds)s.du.has(g)&&(yield s.remoteSyncer.rejectListen(g,c),s.du.delete(g),s.yu.removeTarget(g))}),function(s,u){return r.apply(this,arguments)})(n,e)}catch(r){Oe("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield lD(n,r)}else if(e instanceof Wb?n.yu.Gt(e):e instanceof eR?n.yu.Yt(e):n.yu.Wt(e),!t.isEqual(bt.min()))try{const r=yield YR(n.localStore);t.compareTo(r)>=0&&(yield function(s,u){const c=s.yu.te(u);return c.targetChanges.forEach((g,v)=>{if(g.resumeToken.approximateByteSize()>0){const b=s.du.get(v);b&&s.du.set(v,b.withResumeToken(g.resumeToken,u))}}),c.targetMismatches.forEach(g=>{const v=s.du.get(g);if(!v)return;s.du.set(g,v.withResumeToken(br.EMPTY_BYTE_STRING,v.snapshotVersion)),aN(s,g);const b=new mh(v.target,g,1,v.sequenceNumber);KS(s,b)}),s.remoteSyncer.applyRemoteEvent(c)}(n,t))}catch(r){Oe("RemoteStore","Failed to raise snapshot:",r),yield lD(n,r)}var r}),XS.apply(this,arguments)}function lD(n,e,t){return eA.apply(this,arguments)}function eA(){return eA=(0,ye.Z)(function*(n,e,t){if(!xc(e))throw e;n._u.add(1),yield gy(n),n.gu.set("Offline"),t||(t=()=>YR(n.localStore)),n.asyncQueue.enqueueRetryable((0,ye.Z)(function*(){Oe("RemoteStore","Retrying IndexedDB access"),yield t(),n._u.delete(1),yield Qw(n)}))}),eA.apply(this,arguments)}function lN(n,e){return e().catch(t=>lD(n,t,e))}function my(n){return tA.apply(this,arguments)}function tA(){return tA=(0,ye.Z)(function*(n){const e=We(n),t=wh(e);let r=e.fu.length>0?e.fu[e.fu.length-1].batchId:-1;for(;QP(e);)try{const s=yield FP(e.localStore,r);if(null===s){0===e.fu.length&&t.Fo();break}r=s.batchId,JP(e,s)}catch(s){yield lD(e,s)}cN(e)&&dN(e)}),tA.apply(this,arguments)}function QP(n){return vh(n)&&n.fu.length<10}function JP(n,e){n.fu.push(e);const t=wh(n);t.ko()&&t.Yo&&t.Xo(e.mutations)}function cN(n){return vh(n)&&!wh(n).No()&&n.fu.length>0}function dN(n){wh(n).start()}function XP(n){return nA.apply(this,arguments)}function nA(){return nA=(0,ye.Z)(function*(n){wh(n).eu()}),nA.apply(this,arguments)}function e1(n){return rA.apply(this,arguments)}function rA(){return rA=(0,ye.Z)(function*(n){const e=wh(n);for(const t of n.fu)e.Xo(t.mutations)}),rA.apply(this,arguments)}function t1(n,e,t){return iA.apply(this,arguments)}function iA(){return iA=(0,ye.Z)(function*(n,e,t){const r=n.fu.shift(),s=SS.from(r,e,t);yield lN(n,()=>n.remoteSyncer.applySuccessfulWrite(s)),yield my(n)}),iA.apply(this,arguments)}function n1(n,e){return sA.apply(this,arguments)}function sA(){return sA=(0,ye.Z)(function*(n,e){var t;e&&wh(n).Yo&&(yield(t=(0,ye.Z)(function*(r,s){if(ZM(u=s.code)&&u!==ce.ABORTED){const c=r.fu.shift();wh(r).Oo(),yield lN(r,()=>r.remoteSyncer.rejectFailedWrite(c.batchId,s)),yield my(r)}var u}),function(r,s){return t.apply(this,arguments)})(n,e)),cN(n)&&dN(n)}),sA.apply(this,arguments)}function hN(n,e){return oA.apply(this,arguments)}function oA(){return oA=(0,ye.Z)(function*(n,e){const t=We(n);t.asyncQueue.verifyOperationInProgress(),Oe("RemoteStore","RemoteStore received new credentials");const r=vh(t);t._u.add(3),yield gy(t),r&&t.gu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t._u.delete(3),yield Qw(t)}),oA.apply(this,arguments)}function aA(n,e){return uA.apply(this,arguments)}function uA(){return uA=(0,ye.Z)(function*(n,e){const t=We(n);e?(t._u.delete(2),yield Qw(t)):e||(t._u.add(2),yield gy(t),t.gu.set("Unknown"))}),uA.apply(this,arguments)}function yy(n){return n.pu||(n.pu=function(e,t,r){const s=We(e);return s.su(),new HP(t,s.Vo,s.authCredentials,s.appCheckCredentials,s.It,r)}(n.datastore,n.asyncQueue,{Yr:KP.bind(null,n),Zr:ZP.bind(null,n),Wo:YP.bind(null,n)}),n.wu.push(function(){var e=(0,ye.Z)(function*(t){t?(n.pu.Oo(),YS(n)?ZS(n):n.gu.set("Unknown")):(yield n.pu.stop(),uN(n))});return function(t){return e.apply(this,arguments)}}())),n.pu}function wh(n){return n.Iu||(n.Iu=function(e,t,r){const s=We(e);return s.su(),new GP(t,s.Vo,s.authCredentials,s.appCheckCredentials,s.It,r)}(n.datastore,n.asyncQueue,{Yr:XP.bind(null,n),Zr:n1.bind(null,n),tu:e1.bind(null,n),Zo:t1.bind(null,n)}),n.wu.push(function(){var e=(0,ye.Z)(function*(t){t?(n.Iu.Oo(),yield my(n)):(yield n.Iu.stop(),n.fu.length>0&&(Oe("RemoteStore",`Stopping write stream with ${n.fu.length} pending writes`),n.fu=[]))});return function(t){return e.apply(this,arguments)}}())),n.Iu}class lA{constructor(e,t,r,s,u){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=s,this.removalCallback=u,this.deferred=new Ir,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}static createAndSchedule(e,t,r,s,u){const c=Date.now()+r,g=new lA(e,t,c,s,u);return g.start(r),g}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Ne(ce.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function _y(n,e){if(un("AsyncQueue",`${e}: ${n}`),xc(n))return new Ne(ce.UNAVAILABLE,`${e}: ${n}`);throw n}class vy{constructor(e){this.comparator=e?(t,r)=>e(t,r)||Ge.comparator(t.key,r.key):(t,r)=>Ge.comparator(t.key,r.key),this.keyedMap=kw(),this.sortedSet=new Un(this.comparator)}static emptySet(e){return new vy(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof vy)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const s=t.getNext().key,u=r.getNext().key;if(!s.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new vy;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class fN{constructor(){this.Tu=new Un(Ge.comparator)}track(e){const t=e.doc.key,r=this.Tu.get(t);r?0!==e.type&&3===r.type?this.Tu=this.Tu.insert(t,e):3===e.type&&1!==r.type?this.Tu=this.Tu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Tu=this.Tu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Tu=this.Tu.remove(t):1===e.type&&2===r.type?this.Tu=this.Tu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):et():this.Tu=this.Tu.insert(t,e)}Eu(){const e=[];return this.Tu.inorderTraversal((t,r)=>{e.push(r)}),e}}class wy{constructor(e,t,r,s,u,c,g,v){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=u,this.fromCache=c,this.syncStateChanged=g,this.excludesMetadataChanges=v}static fromInitialDocuments(e,t,r,s){const u=[];return t.forEach(c=>{u.push({type:0,doc:c})}),new wy(e,t,vy.emptySet(t),u,r,s,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Rw(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let s=0;s<t.length;s++)if(t[s].type!==r[s].type||!t[s].doc.isEqual(r[s].doc))return!1;return!0}}class r1{constructor(){this.Au=void 0,this.listeners=[]}}class i1{constructor(){this.queries=new gh(e=>OM(e),Rw),this.onlineState="Unknown",this.Ru=new Set}}function cA(n,e){return dA.apply(this,arguments)}function dA(){return dA=(0,ye.Z)(function*(n,e){const t=We(n),r=e.query;let s=!1,u=t.queries.get(r);if(u||(s=!0,u=new r1),s)try{u.Au=yield t.onListen(r)}catch(c){const g=_y(c,`Initialization of query '${vS(e.query)}' failed`);return void e.onError(g)}t.queries.set(r,u),u.listeners.push(e),e.bu(t.onlineState),u.Au&&e.Pu(u.Au)&&pA(t)}),dA.apply(this,arguments)}function hA(n,e){return fA.apply(this,arguments)}function fA(){return fA=(0,ye.Z)(function*(n,e){const t=We(n),r=e.query;let s=!1;const u=t.queries.get(r);if(u){const c=u.listeners.indexOf(e);c>=0&&(u.listeners.splice(c,1),s=0===u.listeners.length)}if(s)return t.queries.delete(r),t.onUnlisten(r)}),fA.apply(this,arguments)}function s1(n,e){const t=We(n);let r=!1;for(const s of e){const c=t.queries.get(s.query);if(c){for(const g of c.listeners)g.Pu(s)&&(r=!0);c.Au=s}}r&&pA(t)}function o1(n,e,t){const r=We(n),s=r.queries.get(e);if(s)for(const u of s.listeners)u.onError(t);r.queries.delete(e)}function pA(n){n.Ru.forEach(e=>{e.next()})}class gA{constructor(e,t,r){this.query=e,this.vu=t,this.Vu=!1,this.Su=null,this.onlineState="Unknown",this.options=r||{}}Pu(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)3!==s.type&&r.push(s);e=new wy(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.Vu?this.Du(e)&&(this.vu.next(e),t=!0):this.Cu(e,this.onlineState)&&(this.xu(e),t=!0),this.Su=e,t}onError(e){this.vu.error(e)}bu(e){this.onlineState=e;let t=!1;return this.Su&&!this.Vu&&this.Cu(this.Su,e)&&(this.xu(this.Su),t=!0),t}Cu(e,t){return!e.fromCache||!(this.options.Nu&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}Du(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Su&&this.Su.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}xu(e){e=wy.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.Vu=!0,this.vu.next(e)}}class a1{constructor(e,t){this.payload=e,this.byteLength=t}ku(){return"metadata"in this.payload}}class pN{constructor(e){this.It=e}Ji(e){return nl(this.It,e)}Yi(e){return e.metadata.exists?cR(this.It,e.document,!1):Fe.newNoDocument(this.Ji(e.metadata.name),this.Xi(e.metadata.readTime))}Xi(e){return li(e)}}class u1{constructor(e,t,r){this.Mu=e,this.localStore=t,this.It=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=gN(e)}Ou(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;const r=Qt.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Fu(e){const t=new Map,r=new pN(this.It);for(const s of e)if(s.metadata.queries){const u=r.Ji(s.metadata.name);for(const c of s.metadata.queries){const g=(t.get(c)||Vt()).add(u);t.set(c,g)}}return t}complete(){var e=this;return(0,ye.Z)(function*(){const t=yield function LP(n,e,t,r){return US.apply(this,arguments)}(e.localStore,new pN(e.It),e.documents,e.Mu.id),r=e.Fu(e.documents);for(const s of e.queries)yield VP(e.localStore,s,r.get(s.name));return e.progress.taskState="Success",{progress:e.progress,$u:e.collectionGroups,Bu:t}})()}}function gN(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class mN{constructor(e){this.key=e}}class yN{constructor(e){this.key=e}}class _N{constructor(e,t){this.query=e,this.Lu=t,this.Uu=null,this.current=!1,this.qu=Vt(),this.mutatedKeys=Vt(),this.Ku=PM(e),this.Gu=new vy(this.Ku)}get Qu(){return this.Lu}ju(e,t){const r=t?t.Wu:new fN,s=t?t.Gu:this.Gu;let u=t?t.mutatedKeys:this.mutatedKeys,c=s,g=!1;const v="F"===this.query.limitType&&s.size===this.query.limit?s.last():null,b="L"===this.query.limitType&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((A,M)=>{const L=s.get(A),G=wS(this.query,M)?M:null,Q=!!L&&this.mutatedKeys.has(L.key),Ie=!!G&&(G.hasLocalMutations||this.mutatedKeys.has(G.key)&&G.hasCommittedMutations);let Ce=!1;L&&G?L.data.isEqual(G.data)?Q!==Ie&&(r.track({type:3,doc:G}),Ce=!0):this.zu(L,G)||(r.track({type:2,doc:G}),Ce=!0,(v&&this.Ku(G,v)>0||b&&this.Ku(G,b)<0)&&(g=!0)):!L&&G?(r.track({type:0,doc:G}),Ce=!0):L&&!G&&(r.track({type:1,doc:L}),Ce=!0,(v||b)&&(g=!0)),Ce&&(G?(c=c.add(G),u=Ie?u.add(A):u.delete(A)):(c=c.delete(A),u=u.delete(A)))}),null!==this.query.limit)for(;c.size>this.query.limit;){const A="F"===this.query.limitType?c.last():c.first();c=c.delete(A.key),u=u.delete(A.key),r.track({type:1,doc:A})}return{Gu:c,Wu:r,$i:g,mutatedKeys:u}}zu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const s=this.Gu;this.Gu=e.Gu,this.mutatedKeys=e.mutatedKeys;const u=e.Wu.Eu();u.sort((b,A)=>function(M,L){const G=Q=>{switch(Q){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return et()}};return G(M)-G(L)}(b.type,A.type)||this.Ku(b.doc,A.doc)),this.Hu(r);const c=t?this.Ju():[],g=0===this.qu.size&&this.current?1:0,v=g!==this.Uu;return this.Uu=g,0!==u.length||v?{snapshot:new wy(this.query,e.Gu,s,u,e.mutatedKeys,0===g,v,!1),Yu:c}:{Yu:c}}bu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Gu:this.Gu,Wu:new fN,mutatedKeys:this.mutatedKeys,$i:!1},!1)):{Yu:[]}}Xu(e){return!this.Lu.has(e)&&!!this.Gu.has(e)&&!this.Gu.get(e).hasLocalMutations}Hu(e){e&&(e.addedDocuments.forEach(t=>this.Lu=this.Lu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Lu=this.Lu.delete(t)),this.current=e.current)}Ju(){if(!this.current)return[];const e=this.qu;this.qu=Vt(),this.Gu.forEach(r=>{this.Xu(r.key)&&(this.qu=this.qu.add(r.key))});const t=[];return e.forEach(r=>{this.qu.has(r)||t.push(new yN(r))}),this.qu.forEach(r=>{e.has(r)||t.push(new mN(r))}),t}Zu(e){this.Lu=e.Hi,this.qu=Vt();const t=this.ju(e.documents);return this.applyChanges(t,!0)}tc(){return wy.fromInitialDocuments(this.query,this.Gu,this.mutatedKeys,0===this.Uu)}}class l1{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class c1{constructor(e){this.key=e,this.ec=!1}}class d1{constructor(e,t,r,s,u,c){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=s,this.currentUser=u,this.maxConcurrentLimboResolutions=c,this.nc={},this.sc=new gh(g=>OM(g),Rw),this.ic=new Map,this.rc=new Set,this.oc=new Un(Ge.comparator),this.uc=new Map,this.cc=new NS,this.ac={},this.hc=new Map,this.lc=Sp.vn(),this.onlineState="Unknown",this.fc=void 0}get isPrimaryClient(){return!0===this.fc}}function h1(n,e){return mA.apply(this,arguments)}function mA(){return mA=(0,ye.Z)(function*(n,e){const t=UA(n);let r,s;const u=t.sc.get(e);if(u)r=u.targetId,t.sharedClientState.addLocalQueryTarget(r),s=u.view.tc();else{const c=yield fy(t.localStore,$s(e));t.isPrimaryClient&&uD(t.remoteStore,c);const g=t.sharedClientState.addLocalQueryTarget(c.targetId);r=c.targetId,s=yield yA(t,e,r,"current"===g)}return s}),mA.apply(this,arguments)}function yA(n,e,t,r){return _A.apply(this,arguments)}function _A(){return _A=(0,ye.Z)(function*(n,e,t,r){n.dc=(A,M,L)=>{return(G=(0,ye.Z)(function*(Q,Ie,Ce,Ze){let lt=Ie.view.ju(Ce);lt.$i&&(lt=yield iD(Q.localStore,Ie.query,!1).then(({documents:Dt})=>Ie.view.ju(Dt,lt)));const ct=Ze&&Ze.targetChanges.get(Ie.targetId),tt=Ie.view.applyChanges(lt,Q.isPrimaryClient,ct);return AA(Q,Ie.targetId,tt.Yu),tt.snapshot}),function(Q,Ie,Ce,Ze){return G.apply(this,arguments)})(n,A,M,L);var G};const s=yield iD(n.localStore,e,!0),u=new _N(e,s.Hi),c=u.ju(s.documents),g=Lw.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState),v=u.applyChanges(c,n.isPrimaryClient,g);AA(n,t,v.Yu);const b=new l1(e,t,u);return n.sc.set(e,b),n.ic.has(t)?n.ic.get(t).push(e):n.ic.set(t,[e]),v.snapshot}),_A.apply(this,arguments)}function f1(n,e){return vA.apply(this,arguments)}function vA(){return vA=(0,ye.Z)(function*(n,e){const t=We(n),r=t.sc.get(e),s=t.ic.get(r.targetId);if(s.length>1)return t.ic.set(r.targetId,s.filter(u=>!Rw(u,e))),void t.sc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield py(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),Jw(t.remoteStore,r.targetId),Ey(t,r.targetId)}).catch(qa))):(Ey(t,r.targetId),yield py(t.localStore,r.targetId,!0))}),vA.apply(this,arguments)}function wA(){return wA=(0,ye.Z)(function*(n,e,t){const r=BA(n);try{const s=yield function(u,c){const g=We(u),v=Cn.now(),b=c.reduce((L,G)=>L.add(G.key),Vt());let A,M;return g.persistence.runTransaction("Locally write mutations","readwrite",L=>{let G=Hs(),Q=Vt();return g.Gi.getEntries(L,b).next(Ie=>{G=Ie,G.forEach((Ce,Ze)=>{Ze.isValidDocument()||(Q=Q.add(Ce))})}).next(()=>g.localDocuments.getOverlayedDocuments(L,G)).next(Ie=>{A=Ie;const Ce=[];for(const Ze of c){const lt=Dk(Ze,A.get(Ze.key).overlayedDocument);null!=lt&&Ce.push(new Fc(Ze.key,lt,ze(lt.value.mapValue),Zn.exists(!0)))}return g.mutationQueue.addMutationBatch(L,v,Ce,c)}).next(Ie=>{M=Ie;const Ce=Ie.applyToLocalDocumentSet(A,Q);return g.documentOverlayCache.saveOverlays(L,Ie.batchId,Ce)})}).then(()=>({batchId:M.batchId,changes:JM(A)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(u,c,g){let v=u.ac[u.currentUser.toKey()];v||(v=new Un(xt)),v=v.insert(c,g),u.ac[u.currentUser.toKey()]=v}(r,s.batchId,t),yield Lc(r,s.changes),yield my(r.remoteStore)}catch(s){const u=_y(s,"Failed to persist write");t.reject(u)}}),wA.apply(this,arguments)}function vN(n,e){return EA.apply(this,arguments)}function EA(){return EA=(0,ye.Z)(function*(n,e){const t=We(n);try{const r=yield PP(t.localStore,e);e.targetChanges.forEach((s,u)=>{const c=t.uc.get(u);c&&(Tt(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?c.ec=!0:s.modifiedDocuments.size>0?Tt(c.ec):s.removedDocuments.size>0&&(Tt(c.ec),c.ec=!1))}),yield Lc(t,r,e)}catch(r){yield qa(r)}}),EA.apply(this,arguments)}function wN(n,e,t){const r=We(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const s=[];r.sc.forEach((u,c)=>{const g=c.view.bu(e);g.snapshot&&s.push(g.snapshot)}),function(u,c){const g=We(u);g.onlineState=c;let v=!1;g.queries.forEach((b,A)=>{for(const M of A.listeners)M.bu(c)&&(v=!0)}),v&&pA(g)}(r.eventManager,e),s.length&&r.nc.Wo(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function g1(n,e,t){return IA.apply(this,arguments)}function IA(){return IA=(0,ye.Z)(function*(n,e,t){const r=We(n);r.sharedClientState.updateQueryState(e,"rejected",t);const s=r.uc.get(e),u=s&&s.key;if(u){let c=new Un(Ge.comparator);c=c.insert(u,Fe.newNoDocument(u,bt.min()));const g=Vt().add(u),v=new Fw(bt.min(),new Map,new ln(xt),c,g);yield vN(r,v),r.oc=r.oc.remove(u),r.uc.delete(e),xA(r)}else yield py(r.localStore,e,!1).then(()=>Ey(r,e,t)).catch(qa)}),IA.apply(this,arguments)}function m1(n,e){return bA.apply(this,arguments)}function bA(){return bA=(0,ye.Z)(function*(n,e){const t=We(n),r=e.batch.batchId;try{const s=yield kP(t.localStore,e);SA(t,r,null),TA(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Lc(t,s)}catch(s){yield qa(s)}}),bA.apply(this,arguments)}function y1(n,e,t){return DA.apply(this,arguments)}function DA(){return DA=(0,ye.Z)(function*(n,e,t){const r=We(n);try{const s=yield function(u,c){const g=We(u);return g.persistence.runTransaction("Reject batch","readwrite-primary",v=>{let b;return g.mutationQueue.lookupMutationBatch(v,c).next(A=>(Tt(null!==A),b=A.keys(),g.mutationQueue.removeMutationBatch(v,A))).next(()=>g.mutationQueue.performConsistencyCheck(v)).next(()=>g.documentOverlayCache.removeOverlaysForBatchId(v,b,c)).next(()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(v,b)).next(()=>g.localDocuments.getDocuments(v,b))})}(r.localStore,e);SA(r,e,t),TA(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Lc(r,s)}catch(s){yield qa(s)}}),DA.apply(this,arguments)}function CA(){return CA=(0,ye.Z)(function*(n,e){const t=We(n);vh(t.remoteStore)||Oe("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(u){const c=We(u);return c.persistence.runTransaction("Get highest unacknowledged batch id","readonly",g=>c.mutationQueue.getHighestUnacknowledgedBatchId(g))}(t.localStore);if(-1===r)return void e.resolve();const s=t.hc.get(r)||[];s.push(e),t.hc.set(r,s)}catch(r){const s=_y(r,"Initialization of waitForPendingWrites() operation failed");e.reject(s)}}),CA.apply(this,arguments)}function TA(n,e){(n.hc.get(e)||[]).forEach(t=>{t.resolve()}),n.hc.delete(e)}function SA(n,e,t){const r=We(n);let s=r.ac[r.currentUser.toKey()];if(s){const u=s.get(e);u&&(t?u.reject(t):u.resolve(),s=s.remove(e)),r.ac[r.currentUser.toKey()]=s}}function Ey(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.ic.get(e))n.sc.delete(r),t&&n.nc._c(r,t);n.ic.delete(e),n.isPrimaryClient&&n.cc.ls(e).forEach(r=>{n.cc.containsKey(r)||EN(n,r)})}function EN(n,e){n.rc.delete(e.path.canonicalString());const t=n.oc.get(e);null!==t&&(Jw(n.remoteStore,t),n.oc=n.oc.remove(e),n.uc.delete(t),xA(n))}function AA(n,e,t){for(const r of t)r instanceof mN?(n.cc.addReference(r.key,e),v1(n,r)):r instanceof yN?(Oe("SyncEngine","Document no longer in limbo: "+r.key),n.cc.removeReference(r.key,e),n.cc.containsKey(r.key)||EN(n,r.key)):et()}function v1(n,e){const t=e.key,r=t.path.canonicalString();n.oc.get(t)||n.rc.has(r)||(Oe("SyncEngine","New document in limbo: "+t),n.rc.add(r),xA(n))}function xA(n){for(;n.rc.size>0&&n.oc.size<n.maxConcurrentLimboResolutions;){const e=n.rc.values().next().value;n.rc.delete(e);const t=new Ge(Qt.fromString(e)),r=n.lc.next();n.uc.set(r,new c1(t)),n.oc=n.oc.insert(t,r),uD(n.remoteStore,new mh($s(ry(t.path)),r,2,Li.at))}}function Lc(n,e,t){return MA.apply(this,arguments)}function MA(){return MA=(0,ye.Z)(function*(n,e,t){const r=We(n),s=[],u=[],c=[];var g;r.sc.isEmpty()||(r.sc.forEach((g,v)=>{c.push(r.dc(v,e,t).then(b=>{if(b){r.isPrimaryClient&&r.sharedClientState.updateQueryState(v.targetId,b.fromCache?"not-current":"current"),s.push(b);const A=FS.Ci(v.targetId,b);u.push(A)}}))}),yield Promise.all(c),r.nc.Wo(s),yield(g=(0,ye.Z)(function*(v,b){const A=We(v);try{yield A.persistence.runTransaction("notifyLocalViewChanges","readwrite",M=>se.forEach(b,L=>se.forEach(L.Si,G=>A.persistence.referenceDelegate.addReference(M,L.targetId,G)).next(()=>se.forEach(L.Di,G=>A.persistence.referenceDelegate.removeReference(M,L.targetId,G)))))}catch(M){if(!xc(M))throw M;Oe("LocalStore","Failed to update sequence numbers: "+M)}for(const M of b){const L=M.targetId;if(!M.fromCache){const G=A.Ui.get(L),Ie=G.withLastLimboFreeSnapshotVersion(G.snapshotVersion);A.Ui=A.Ui.insert(L,Ie)}}}),function(v,b){return g.apply(this,arguments)})(r.localStore,u))}),MA.apply(this,arguments)}function w1(n,e){return RA.apply(this,arguments)}function RA(){return RA=(0,ye.Z)(function*(n,e){const t=We(n);if(!t.currentUser.isEqual(e)){Oe("SyncEngine","User change. New user:",e.toKey());const r=yield ZR(t.localStore,e);t.currentUser=e,(s=t).hc.forEach(c=>{c.forEach(g=>{g.reject(new Ne(ce.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),s.hc.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Lc(t,r.ji)}var s}),RA.apply(this,arguments)}function E1(n,e){const t=We(n),r=t.uc.get(e);if(r&&r.ec)return Vt().add(r.key);{let s=Vt();const u=t.ic.get(e);if(!u)return s;for(const c of u){const g=t.sc.get(c);s=s.unionWith(g.view.Qu)}return s}}function I1(n,e){return NA.apply(this,arguments)}function NA(){return NA=(0,ye.Z)(function*(n,e){const t=We(n),r=yield iD(t.localStore,e.query,!0),s=e.view.Zu(r);return t.isPrimaryClient&&AA(t,e.targetId,s.Yu),s}),NA.apply(this,arguments)}function b1(n,e){return OA.apply(this,arguments)}function OA(){return OA=(0,ye.Z)(function*(n,e){const t=We(n);return XR(t.localStore,e).then(r=>Lc(t,r))}),OA.apply(this,arguments)}function D1(n,e,t,r){return kA.apply(this,arguments)}function kA(){return kA=(0,ye.Z)(function*(n,e,t,r){const s=We(n),u=yield function(c,g){const v=We(c),b=We(v.mutationQueue);return v.persistence.runTransaction("Lookup mutation documents","readonly",A=>b.Tn(A,g).next(M=>M?v.localDocuments.getDocuments(A,M):se.resolve(null)))}(s.localStore,e);var g;null!==u?("pending"===t?yield my(s.remoteStore):"acknowledged"===t||"rejected"===t?(SA(s,e,r||null),TA(s,e),g=e,We(We(s.localStore).mutationQueue).An(g)):et(),yield Lc(s,u)):Oe("SyncEngine","Cannot apply mutation batch with id: "+e)}),kA.apply(this,arguments)}function PA(){return PA=(0,ye.Z)(function*(n,e){const t=We(n);if(UA(t),BA(t),!0===e&&!0!==t.fc){const r=t.sharedClientState.getAllActiveQueryTargets(),s=yield IN(t,r.toArray());t.fc=!0,yield aA(t.remoteStore,!0);for(const u of s)uD(t.remoteStore,u)}else if(!1===e&&!1!==t.fc){const r=[];let s=Promise.resolve();t.ic.forEach((u,c)=>{t.sharedClientState.isLocalQueryTarget(c)?r.push(c):s=s.then(()=>(Ey(t,c),py(t.localStore,c,!0))),Jw(t.remoteStore,c)}),yield s,yield IN(t,r),function(u){const c=We(u);c.uc.forEach((g,v)=>{Jw(c.remoteStore,v)}),c.cc.fs(),c.uc=new Map,c.oc=new Un(Ge.comparator)}(t),t.fc=!1,yield aA(t.remoteStore,!1)}}),PA.apply(this,arguments)}function IN(n,e,t){return FA.apply(this,arguments)}function FA(){return FA=(0,ye.Z)(function*(n,e,t){const r=We(n),s=[],u=[];for(const c of e){let g;const v=r.ic.get(c);if(v&&0!==v.length){g=yield fy(r.localStore,$s(v[0]));for(const b of v){const A=r.sc.get(b),M=yield I1(r,A);M.snapshot&&u.push(M.snapshot)}}else{const b=yield JR(r.localStore,c);g=yield fy(r.localStore,b),yield yA(r,bN(b),c,!1)}s.push(g)}return r.nc.Wo(u),s}),FA.apply(this,arguments)}function bN(n){return RM(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function T1(n){const e=We(n);return We(We(e.localStore).persistence).vi()}function S1(n,e,t,r){return LA.apply(this,arguments)}function LA(){return LA=(0,ye.Z)(function*(n,e,t,r){const s=We(n);if(s.fc)return void Oe("SyncEngine","Ignoring unexpected query state notification.");const u=s.ic.get(e);if(u&&u.length>0)switch(t){case"current":case"not-current":{const c=yield XR(s.localStore,kM(u[0])),g=Fw.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield Lc(s,c,g);break}case"rejected":yield py(s.localStore,e,!0),Ey(s,e,r);break;default:et()}}),LA.apply(this,arguments)}function A1(n,e,t){return VA.apply(this,arguments)}function VA(){return VA=(0,ye.Z)(function*(n,e,t){const r=UA(n);if(r.fc){for(const s of e){if(r.ic.has(s)){Oe("SyncEngine","Adding an already active target "+s);continue}const u=yield JR(r.localStore,s),c=yield fy(r.localStore,u);yield yA(r,bN(u),c.targetId,!1),uD(r.remoteStore,c)}for(const s of t)r.ic.has(s)&&(yield py(r.localStore,s,!1).then(()=>{Jw(r.remoteStore,s),Ey(r,s)}).catch(qa))}}),VA.apply(this,arguments)}function UA(n){const e=We(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=vN.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=E1.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=g1.bind(null,e),e.nc.Wo=s1.bind(null,e.eventManager),e.nc._c=o1.bind(null,e.eventManager),e}function BA(n){const e=We(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=m1.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=y1.bind(null,e),e}class DN{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,ye.Z)(function*(){t.It=Yw(e.databaseInfo.databaseId),t.sharedClientState=t.mc(e),t.persistence=t.gc(e),yield t.persistence.start(),t.localStore=t.yc(e),t.gcScheduler=t.Ic(e,t.localStore),t.indexBackfillerScheduler=t.Tc(e,t.localStore)})()}Ic(e,t){return null}Tc(e,t){return null}yc(e){return KR(this.persistence,new WR,e.initialUser,this.It)}gc(e){return new zR(nD.Bs,this.It)}mc(e){return new rN}terminate(){var e=this;return(0,ye.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class CN extends DN{constructor(e,t,r){super(),this.Ec=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,ye.Z)(function*(){yield t().call(r,e),yield r.Ec.initialize(r,e),yield BA(r.Ec.syncEngine),yield my(r.Ec.remoteStore),yield r.persistence.li(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}yc(e){return KR(this.persistence,new WR,e.initialUser,this.It)}Ic(e,t){return new vP(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}Tc(e,t){const r=new pS(t,this.persistence);return new fS(e.asyncQueue,r)}gc(e){const t=PS(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?Gs.withCacheSize(this.cacheSizeBytes):Gs.DEFAULT;return new kS(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,sN(),aD(),this.It,this.sharedClientState,!!this.forceOwnership)}mc(e){return new rN}}class M1 extends CN{constructor(e,t){super(e,t,!1),this.Ec=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,ye.Z)(function*(){yield t().call(r,e);const s=r.Ec.syncEngine;r.sharedClientState instanceof GS&&(r.sharedClientState.syncEngine={Fr:D1.bind(null,s),$r:S1.bind(null,s),Br:A1.bind(null,s),vi:T1.bind(null,s),Or:b1.bind(null,s)},yield r.sharedClientState.start()),yield r.persistence.li(function(){var u=(0,ye.Z)(function*(c){yield function C1(n,e){return PA.apply(this,arguments)}(r.Ec.syncEngine,c),r.gcScheduler&&(c&&!r.gcScheduler.started?r.gcScheduler.start():c||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(c&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():c||r.indexBackfillerScheduler.stop())});return function(c){return u.apply(this,arguments)}}())})()}mc(e){const t=sN();if(!GS.C(t))throw new Ne(ce.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=PS(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new GS(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class jA{initialize(e,t){var r=this;return(0,ye.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=s=>wN(r.syncEngine,s,1),r.remoteStore.remoteSyncer.handleCredentialChange=w1.bind(null,r.syncEngine),yield aA(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new i1}createDatastore(e){const t=Yw(e.databaseInfo.databaseId),r=new $P(e.databaseInfo);return new zP(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,s=e.asyncQueue,u=g=>wN(this.syncEngine,g,0),c=iN.C()?new iN:new UP,new WP(t,r,s,u,c);var t,r,s,u,c}createSyncEngine(e,t){return function(r,s,u,c,g,v,b){const A=new d1(r,s,u,c,g,v);return b&&(A.fc=!0),A}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,ye.Z)(function*(t){const r=We(t);Oe("RemoteStore","RemoteStore shutting down."),r._u.add(5),yield gy(r),r.mu.shutdown(),r.gu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function TN(n,e=10240){let t=0;return{read:()=>(0,ye.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,ye.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class cD{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ac(this.observer.next,e)}error(e){this.observer.error?this.Ac(this.observer.error,e):un("Uncaught Error in snapshot listener:",e)}Rc(){this.muted=!0}Ac(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class R1{constructor(e,t){this.bc=e,this.It=t,this.metadata=new Ir,this.buffer=new Uint8Array,this.Pc=new TextDecoder("utf-8"),this.vc().then(r=>{r&&r.ku()?this.metadata.resolve(r.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.payload)}`))},r=>this.metadata.reject(r))}close(){return this.bc.cancel()}getMetadata(){var e=this;return(0,ye.Z)(function*(){return e.metadata.promise})()}wc(){var e=this;return(0,ye.Z)(function*(){return yield e.getMetadata(),e.vc()})()}vc(){var e=this;return(0,ye.Z)(function*(){const t=yield e.Vc();if(null===t)return null;const r=e.Pc.decode(t),s=Number(r);isNaN(s)&&e.Sc(`length string (${r}) is not valid number`);const u=yield e.Dc(s);return new a1(JSON.parse(u),t.length+s)})()}Cc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Vc(){var e=this;return(0,ye.Z)(function*(){for(;e.Cc()<0&&!(yield e.xc()););if(0===e.buffer.length)return null;const t=e.Cc();t<0&&e.Sc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}Dc(e){var t=this;return(0,ye.Z)(function*(){for(;t.buffer.length<e;)(yield t.xc())&&t.Sc("Reached the end of bundle when more is expected.");const r=t.Pc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Sc(e){throw this.bc.cancel(),new Error(`Invalid bundle format: ${e}`)}xc(){var e=this;return(0,ye.Z)(function*(){const t=yield e.bc.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class N1{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,ye.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Ne(ce.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(s=(0,ye.Z)(function*(u,c){const g=We(u),v=Bw(g.It)+"/documents",b={documents:c.map(G=>Uw(g.It,G))},A=yield g.fo("BatchGetDocuments",v,b,c.length),M=new Map;A.forEach(G=>{const Q=function Pk(n,e){return"found"in e?function(t,r){Tt(!!r.found);const s=nl(t,r.found.name),u=li(r.found.updateTime),c=new Se({mapValue:{fields:r.found.fields}});return Fe.newFoundDocument(s,u,c)}(n,e):"missing"in e?function(t,r){Tt(!!r.missing),Tt(!!r.readTime);const s=nl(t,r.missing),u=li(r.readTime);return Fe.newNoDocument(s,u)}(n,e):et()}(g.It,G);M.set(Q.key.toString(),Q)});const L=[];return c.forEach(G=>{const Q=M.get(G.toString());Tt(!!Q),L.push(Q)}),L}),function(u,c){return s.apply(this,arguments)})(t.datastore,e);var s;return r.forEach(s=>t.recordVersion(s)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new uy(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,ye.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,s)=>{const u=Ge.fromPath(s);e.mutations.push(new ES(u,e.precondition(u)))}),yield(r=(0,ye.Z)(function*(s,u){const c=We(s),g=Bw(c.It)+"/documents",v={writes:u.map(b=>jw(c.It,b))};yield c.co("Commit",g,v)}),function(s,u){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw et();t=bt.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Ne(ce.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(bt.min())?Zn.exists(!1):Zn.updateTime(t):Zn.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(bt.min()))throw new Ne(ce.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Zn.updateTime(t)}return Zn.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class O1{constructor(e,t,r,s,u){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=s,this.deferred=u,this.Nc=r.maxAttempts,this.xo=new zS(this.asyncQueue,"transaction_retry")}run(){this.Nc-=1,this.kc()}kc(){var e=this;this.xo.Ao((0,ye.Z)(function*(){const t=new N1(e.datastore),r=e.Mc(t);r&&r.then(s=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(s)}).catch(u=>{e.Oc(u)}))}).catch(s=>{e.Oc(s)})}))}Mc(e){try{const t=this.updateFunction(e);return!Ym(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Oc(e){this.Nc>0&&this.Fc(e)?(this.Nc-=1,this.asyncQueue.enqueueAndForget(()=>(this.kc(),Promise.resolve()))):this.deferred.reject(e)}Fc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!ZM(t)}return!1}}class k1{constructor(e,t,r,s){var u=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=s,this.user=Er.UNAUTHENTICATED,this.clientId=pp.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var c=(0,ye.Z)(function*(g){Oe("FirestoreClient","Received user=",g.uid),yield u.authCredentialListener(g),u.user=g});return function(g){return c.apply(this,arguments)}}()),this.appCheckCredentials.start(r,c=>(Oe("FirestoreClient","Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}getConfiguration(){var e=this;return(0,ye.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Ne(ce.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Ir;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,ye.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const s=_y(r,"Failed to shutdown persistence");t.reject(s)}})),t.promise}}function SN(n,e){return $A.apply(this,arguments)}function $A(){return $A=(0,ye.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Oe("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var s=(0,ye.Z)(function*(u){r.isEqual(u)||(yield ZR(e.localStore,u),r=u)});return function(u){return s.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),$A.apply(this,arguments)}function AN(n,e){return HA.apply(this,arguments)}function HA(){return HA=(0,ye.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield GA(n);Oe("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(s=>hN(e.remoteStore,s)),n.setAppCheckTokenChangeListener((s,u)=>hN(e.remoteStore,u)),n.onlineComponents=e}),HA.apply(this,arguments)}function GA(n){return zA.apply(this,arguments)}function zA(){return zA=(0,ye.Z)(function*(n){return n.offlineComponents||(Oe("FirestoreClient","Using default OfflineComponentProvider"),yield SN(n,new DN)),n.offlineComponents}),zA.apply(this,arguments)}function dD(n){return qA.apply(this,arguments)}function qA(){return qA=(0,ye.Z)(function*(n){return n.onlineComponents||(Oe("FirestoreClient","Using default OnlineComponentProvider"),yield AN(n,new jA)),n.onlineComponents}),qA.apply(this,arguments)}function xN(n){return GA(n).then(e=>e.persistence)}function hD(n){return GA(n).then(e=>e.localStore)}function MN(n){return dD(n).then(e=>e.remoteStore)}function WA(n){return dD(n).then(e=>e.syncEngine)}function Iy(n){return KA.apply(this,arguments)}function KA(){return KA=(0,ye.Z)(function*(n){const e=yield dD(n),t=e.eventManager;return t.onListen=h1.bind(null,e.syncEngine),t.onUnlisten=f1.bind(null,e.syncEngine),t}),KA.apply(this,arguments)}function RN(n,e,t={}){const r=new Ir;return n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return function(s,u,c,g,v){const b=new cD({next:M=>{u.enqueueAndForget(()=>hA(s,A));const L=M.docs.has(c);!L&&M.fromCache?v.reject(new Ne(ce.UNAVAILABLE,"Failed to get document because the client is offline.")):L&&M.fromCache&&g&&"server"===g.source?v.reject(new Ne(ce.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):v.resolve(M)},error:M=>v.reject(M)}),A=new gA(ry(c.path),b,{includeMetadataChanges:!0,Nu:!0});return cA(s,A)}(yield Iy(n),n.asyncQueue,e,t,r)})),r.promise}function NN(n,e,t={}){const r=new Ir;return n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return function(s,u,c,g,v){const b=new cD({next:M=>{u.enqueueAndForget(()=>hA(s,A)),M.fromCache&&"server"===g.source?v.reject(new Ne(ce.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):v.resolve(M)},error:M=>v.reject(M)}),A=new gA(c,b,{includeMetadataChanges:!0,Nu:!0});return cA(s,A)}(yield Iy(n),n.asyncQueue,e,t,r)})),r.promise}const ON=new Map;function ZA(n,e,t){if(!t)throw new Ne(ce.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function kN(n,e,t,r){if(!0===e&&!0===r)throw new Ne(ce.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function PN(n){if(!Ge.isDocumentKey(n))throw new Ne(ce.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function FN(n){if(Ge.isDocumentKey(n))throw new Ne(ce.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function fD(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":et()}function Jt(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Ne(ce.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=fD(n);throw new Ne(ce.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function LN(n,e){if(e<=0)throw new Ne(ce.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class VN{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Ne(ce.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Ne(ce.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,kN("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Xw{constructor(e,t,r,s){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new VN({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Ne(ce.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Ne(ce.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new VN(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new kb;switch(t.type){case"gapi":return new Fb(t.client,t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new Ne(ce.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=ON.get(e);t&&(Oe("ComponentProvider","Removing Datastore"),ON.delete(e),t.terminate())}(this),Promise.resolve()}}class Bn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new il(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Bn(this.firestore,e,this._key)}}class Ui{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Ui(this.firestore,e,this._query)}}class il extends Ui{constructor(e,t,r){super(e,t,ry(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Bn(this.firestore,null,new Ge(e))}withConverter(e){return new il(this.firestore,e,this._path)}}function UN(n,e,...t){if(n=(0,Ct.m9)(n),ZA("collection","path",e),n instanceof Xw){const r=Qt.fromString(e,...t);return FN(r),new il(n,null,r)}{if(!(n instanceof Bn||n instanceof il))throw new Ne(ce.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Qt.fromString(e,...t));return FN(r),new il(n.firestore,null,r)}}function pD(n,e,...t){if(n=(0,Ct.m9)(n),1===arguments.length&&(e=pp.R()),ZA("doc","path",e),n instanceof Xw){const r=Qt.fromString(e,...t);return PN(r),new Bn(n,null,new Ge(r))}{if(!(n instanceof Bn||n instanceof il))throw new Ne(ce.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Qt.fromString(e,...t));return PN(r),new Bn(n.firestore,n instanceof il?n.converter:null,new Ge(r))}}function BN(n,e){return n=(0,Ct.m9)(n),e=(0,Ct.m9)(e),(n instanceof Bn||n instanceof il)&&(e instanceof Bn||e instanceof il)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function jN(n,e){return n=(0,Ct.m9)(n),e=(0,Ct.m9)(e),n instanceof Ui&&e instanceof Ui&&n.firestore===e.firestore&&Rw(n._query,e._query)&&n.converter===e.converter}class z1{constructor(){this.$c=Promise.resolve(),this.Bc=[],this.Lc=!1,this.Uc=[],this.qc=null,this.Kc=!1,this.Gc=!1,this.Qc=[],this.xo=new zS(this,"async_queue_retry"),this.jc=()=>{const t=aD();t&&Oe("AsyncQueue","Visibility state changed to "+t.visibilityState),this.xo.bo()};const e=aD();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.jc)}get isShuttingDown(){return this.Lc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Wc(),this.zc(e)}enterRestrictedMode(e){if(!this.Lc){this.Lc=!0,this.Gc=e||!1;const t=aD();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.jc)}}enqueue(e){if(this.Wc(),this.Lc)return new Promise(()=>{});const t=new Ir;return this.zc(()=>this.Lc&&this.Gc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Bc.push(e),this.Hc()))}Hc(){var e=this;return(0,ye.Z)(function*(){if(0!==e.Bc.length){try{yield e.Bc[0](),e.Bc.shift(),e.xo.reset()}catch(t){if(!xc(t))throw t;Oe("AsyncQueue","Operation failed with retryable error: "+t)}e.Bc.length>0&&e.xo.Ao(()=>e.Hc())}})()}zc(e){const t=this.$c.then(()=>(this.Kc=!0,e().catch(r=>{throw this.qc=r,this.Kc=!1,un("INTERNAL UNHANDLED ERROR: ",function(u){let c=u.message||"";return u.stack&&(c=u.stack.includes(u.message)?u.stack:u.message+"\n"+u.stack),c}(r)),r}).then(r=>(this.Kc=!1,r))));return this.$c=t,t}enqueueAfterDelay(e,t,r){this.Wc(),this.Qc.indexOf(e)>-1&&(t=0);const s=lA.createAndSchedule(this,e,t,r,u=>this.Jc(u));return this.Uc.push(s),s}Wc(){this.qc&&et()}verifyOperationInProgress(){}Yc(){var e=this;return(0,ye.Z)(function*(){let t;do{t=e.$c,yield t}while(t!==e.$c)})()}Xc(e){for(const t of this.Uc)if(t.timerId===e)return!0;return!1}Zc(e){return this.Yc().then(()=>{this.Uc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.Uc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Yc()})}ta(e){this.Qc.push(e)}Jc(e){const t=this.Uc.indexOf(e);this.Uc.splice(t,1)}}function YA(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const s of["next","error","complete"])if(s in r&&"function"==typeof r[s])return!0;return!1}(n)}class q1{constructor(){this._progressObserver={},this._taskCompletionResolver=new Ir,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Yn extends Xw{constructor(e,t,r,s){super(e,t,r,s),this.type="firestore",this._queue=new z1,this._persistenceKey=s?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||$N(this),this._firestoreClient.terminate()}}function Lr(n){return n._firestoreClient||$N(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function $N(n){var e;const t=n._freezeSettings(),r=(u=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new AM(n._databaseId,u,n._persistenceKey,(g=t).host,g.ssl,g.experimentalForceLongPolling,g.experimentalAutoDetectLongPolling,g.useFetchStreams));var u,g;n._firestoreClient=new k1(n._authCredentials,n._appCheckCredentials,n._queue,r)}function HN(n,e,t){const r=new Ir;return n.asyncQueue.enqueue((0,ye.Z)(function*(){try{yield SN(n,t),yield AN(n,e),r.resolve()}catch(s){const u=s;if(!("FirebaseError"===(c=u).name?c.code===ce.FAILED_PRECONDITION||c.code===ce.UNIMPLEMENTED:!(typeof DOMException<"u"&&c instanceof DOMException)||22===c.code||20===c.code||11===c.code))throw u;Ac("Error enabling offline persistence. Falling back to persistence disabled: "+u),r.reject(u)}var c})).then(()=>r.promise)}function GN(n){if(n._initialized||n._terminated)throw new Ne(ce.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Vc{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Ne(ce.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Vn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class sl{constructor(e){this._byteString=e}static fromBase64String(e){try{return new sl(br.fromBase64String(e))}catch(t){throw new Ne(ce.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new sl(br.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class xp{constructor(e){this._methodName=e}}class gD{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Ne(ce.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Ne(ce.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return xt(this._lat,e._lat)||xt(this._long,e._long)}}const nF=/^__.*__$/;class rF{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new Fc(e,this.data,this.fieldMask,t,this.fieldTransforms):new ay(e,this.data,t,this.fieldTransforms)}}class zN{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Fc(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function qN(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw et()}}class mD{constructor(e,t,r,s,u,c){this.settings=e,this.databaseId=t,this.It=r,this.ignoreUndefinedProperties=s,void 0===u&&this.ea(),this.fieldTransforms=u||[],this.fieldMask=c||[]}get path(){return this.settings.path}get na(){return this.settings.na}sa(e){return new mD(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.It,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ia(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),s=this.sa({path:r,ra:!1});return s.oa(e),s}ua(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),s=this.sa({path:r,ra:!1});return s.ea(),s}ca(e){return this.sa({path:void 0,ra:!0})}aa(e){return vD(e,this.settings.methodName,this.settings.ha||!1,this.path,this.settings.la)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}ea(){if(this.path)for(let e=0;e<this.path.length;e++)this.oa(this.path.get(e))}oa(e){if(0===e.length)throw this.aa("Document fields must not be empty");if(qN(this.na)&&nF.test(e))throw this.aa('Document fields cannot begin and end with "__"')}}class iF{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.It=r||Yw(e)}fa(e,t,r,s=!1){return new mD({na:e,methodName:t,la:r,path:Vn.emptyPath(),ra:!1,ha:s},this.databaseId,this.It,this.ignoreUndefinedProperties)}}function Mp(n){const e=n._freezeSettings(),t=Yw(n._databaseId);return new iF(n._databaseId,!!e.ignoreUndefinedProperties,t)}function yD(n,e,t,r,s,u={}){const c=n.fa(u.merge||u.mergeFields?2:0,e,t,s);ex("Data must be an object, but it was:",c,r);const g=ZN(r,c);let v,b;if(u.merge)v=new Vi(c.fieldMask),b=c.fieldTransforms;else if(u.mergeFields){const A=[];for(const M of u.mergeFields){const L=tx(e,M,t);if(!c.contains(L))throw new Ne(ce.INVALID_ARGUMENT,`Field '${L}' is specified in your field mask but missing from your input data.`);QN(A,L)||A.push(L)}v=new Vi(A),b=c.fieldTransforms.filter(M=>v.covers(M.field))}else v=null,b=c.fieldTransforms;return new rF(new Se(g),v,b)}class e0 extends xp{_toFieldTransform(e){if(2!==e.na)throw e.aa(1===e.na?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof e0}}function WN(n,e,t){return new mD({na:3,la:e.settings.la,methodName:n._methodName,ra:t},e.databaseId,e.It,e.ignoreUndefinedProperties)}class QA extends xp{_toFieldTransform(e){return new Nw(e.path,new sy)}isEqual(e){return e instanceof QA}}class sF extends xp{constructor(e,t){super(e),this.da=t}_toFieldTransform(e){const t=WN(this,e,!0),r=this.da.map(u=>Rp(u,t)),s=new vp(r);return new Nw(e.path,s)}isEqual(e){return this===e}}class oF extends xp{constructor(e,t){super(e),this.da=t}_toFieldTransform(e){const t=WN(this,e,!0),r=this.da.map(u=>Rp(u,t)),s=new wp(r);return new Nw(e.path,s)}isEqual(e){return this===e}}class aF extends xp{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=new oy(e.It,VM(e.It,this._a));return new Nw(e.path,t)}isEqual(e){return this===e}}function JA(n,e,t,r){const s=n.fa(1,e,t);ex("Data must be an object, but it was:",s,r);const u=[],c=Se.empty();el(r,(v,b)=>{const A=_D(e,v,t);b=(0,Ct.m9)(b);const M=s.ua(A);if(b instanceof e0)u.push(A);else{const L=Rp(b,M);null!=L&&(u.push(A),c.set(A,L))}});const g=new Vi(u);return new zN(c,g,s.fieldTransforms)}function XA(n,e,t,r,s,u){const c=n.fa(1,e,t),g=[tx(e,r,t)],v=[s];if(u.length%2!=0)throw new Ne(ce.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let L=0;L<u.length;L+=2)g.push(tx(e,u[L])),v.push(u[L+1]);const b=[],A=Se.empty();for(let L=g.length-1;L>=0;--L)if(!QN(b,g[L])){const G=g[L];let Q=v[L];Q=(0,Ct.m9)(Q);const Ie=c.ua(G);if(Q instanceof e0)b.push(G);else{const Ce=Rp(Q,Ie);null!=Ce&&(b.push(G),A.set(G,Ce))}}const M=new Vi(b);return new zN(A,M,c.fieldTransforms)}function KN(n,e,t,r=!1){return Rp(t,n.fa(r?4:3,e))}function Rp(n,e){if(YN(n=(0,Ct.m9)(n)))return ex("Unsupported field value:",e,n),ZN(n,e);if(n instanceof xp)return function(t,r){if(!qN(r.na))throw r.aa(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.aa(`${t._methodName}() is not currently supported inside arrays`);const s=t._toFieldTransform(r);s&&r.fieldTransforms.push(s)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.ra&&4!==e.na)throw e.aa("Nested arrays are not supported");return function(t,r){const s=[];let u=0;for(const c of t){let g=Rp(c,r.ca(u));null==g&&(g={nullValue:"NULL_VALUE"}),s.push(g),u++}return{arrayValue:{values:s}}}(n,e)}return function(t,r){if(null===(t=(0,Ct.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return VM(r.It,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const s=Cn.fromDate(t);return{timestampValue:Vw(r.It,s)}}if(t instanceof Cn){const s=new Cn(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Vw(r.It,s)}}if(t instanceof gD)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof sl)return{bytesValue:sR(r.It,t._byteString)};if(t instanceof Bn){const s=r.databaseId,u=t.firestore._databaseId;if(!u.isEqual(s))throw r.aa(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:IS(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.aa(`Unsupported field value: ${fD(t)}`)}(n,e)}function ZN(n,e){const t={};return bw(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):el(n,(r,s)=>{const u=Rp(s,e.ia(r));null!=u&&(t[r]=u)}),{mapValue:{fields:t}}}function YN(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Cn||n instanceof gD||n instanceof sl||n instanceof Bn||n instanceof xp)}function ex(n,e,t){if(!YN(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=fD(t);throw e.aa("an object"===r?n+" a custom object":n+" "+r)}var r}function tx(n,e,t){if((e=(0,Ct.m9)(e))instanceof Vc)return e._internalPath;if("string"==typeof e)return _D(n,e);throw vD("Field path arguments must be of type string or ",n,!1,void 0,t)}const uF=new RegExp("[~\\*/\\[\\]]");function _D(n,e,t){if(e.search(uF)>=0)throw vD(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Vc(...e.split("."))._internalPath}catch{throw vD(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function vD(n,e,t,r,s){const u=r&&!r.isEmpty(),c=void 0!==s;let g=`Function ${e}() called with invalid data`;t&&(g+=" (via `toFirestore()`)"),g+=". ";let v="";return(u||c)&&(v+=" (found",u&&(v+=` in field ${r}`),c&&(v+=` in document ${s}`),v+=")"),new Ne(ce.INVALID_ARGUMENT,g+n+v)}function QN(n,e){return n.some(t=>t.isEqual(e))}class t0{constructor(e,t,r,s,u){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=s,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new Bn(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new lF(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(wD("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class lF extends t0{data(){return super.data()}}function wD(n,e){return"string"==typeof e?_D(n,e):e instanceof Vc?e._internalPath:e._delegate._internalPath}class Np{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Uc extends t0{constructor(e,t,r,s,u,c){super(e,t,r,s,c),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new n0(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(wD("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class n0 extends Uc{data(e={}){return super.data(e)}}class Eh{constructor(e,t,r,s){this._firestore=e,this._userDataWriter=t,this._snapshot=s,this.metadata=new Np(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new n0(this._firestore,this._userDataWriter,r.key,r,new Np(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Ne(ce.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,s){if(r._snapshot.oldDocs.isEmpty()){let u=0;return r._snapshot.docChanges.map(c=>({type:"added",doc:new n0(r._firestore,r._userDataWriter,c.doc.key,c.doc,new Np(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:u++}))}{let u=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(c=>s||3!==c.type).map(c=>{const g=new n0(r._firestore,r._userDataWriter,c.doc.key,c.doc,new Np(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter);let v=-1,b=-1;return 0!==c.type&&(v=u.indexOf(c.doc.key),u=u.delete(c.doc.key)),1!==c.type&&(u=u.add(c.doc),b=u.indexOf(c.doc.key)),{type:cF(c.type),doc:g,oldIndex:v,newIndex:b}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function cF(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return et()}}function JN(n,e){return n instanceof Uc&&e instanceof Uc?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Eh&&e instanceof Eh&&n._firestore===e._firestore&&jN(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function XN(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Ne(ce.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class r0{}function Ih(n,...e){for(const t of e)n=t._apply(n);return n}class dF extends r0{constructor(e,t,r){super(),this.wa=e,this.ma=t,this.ga=r,this.type="where"}_apply(e){const t=Mp(e.firestore),r=function(s,u,c,g,v,b,A){let M;if(v.isKeyField()){if("array-contains"===b||"array-contains-any"===b)throw new Ne(ce.INVALID_ARGUMENT,`Invalid Query. You can't perform '${b}' queries on documentId().`);if("in"===b||"not-in"===b){sO(A,b);const G=[];for(const Q of A)G.push(iO(g,s,Q));M={arrayValue:{values:G}}}else M=iO(g,s,A)}else"in"!==b&&"not-in"!==b&&"array-contains-any"!==b||sO(A,b),M=KN(c,"where",A,"in"===b||"not-in"===b);const L=Dr.create(v,b,M);return function(G,Q){if(Q.dt()){const Ce=yS(G);if(null!==Ce&&!Ce.isEqual(Q.field))throw new Ne(ce.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${Ce.toString()}' and '${Q.field.toString()}'`);const Ze=mS(G);null!==Ze&&oO(0,Q.field,Ze)}const Ie=function(Ce,Ze){for(const lt of Ce.filters)if(Ze.indexOf(lt.op)>=0)return lt.op;return null}(G,function(Ce){switch(Ce){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(Q.op));if(null!==Ie)throw new Ne(ce.INVALID_ARGUMENT,Ie===Q.op?`Invalid query. You cannot use more than one '${Q.op.toString()}' filter.`:`Invalid query. You cannot use '${Q.op.toString()}' filters with '${Ie.toString()}' filters.`)}(s,L),L}(e._query,0,t,e.firestore._databaseId,this.wa,this.ma,this.ga);return new Ui(e.firestore,e.converter,function(s,u){const c=s.filters.concat([u]);return new Pc(s.path,s.collectionGroup,s.explicitOrderBy.slice(),c,s.limit,s.limitType,s.startAt,s.endAt)}(e._query,r))}}class fF extends r0{constructor(e,t){super(),this.wa=e,this.ya=t,this.type="orderBy"}_apply(e){const t=function(r,s,u){if(null!==r.startAt)throw new Ne(ce.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Ne(ce.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const c=new ny(s,u);return function(g,v){if(null===mS(g)){const b=yS(g);null!==b&&oO(0,b,v.field)}}(r,c),c}(e._query,this.wa,this.ya);return new Ui(e.firestore,e.converter,function(r,s){const u=r.explicitOrderBy.concat([s]);return new Pc(r.path,r.collectionGroup,u,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class eO extends r0{constructor(e,t,r){super(),this.type=e,this.pa=t,this.Ia=r}_apply(e){return new Ui(e.firestore,e.converter,$b(e._query,this.pa,this.Ia))}}class tO extends r0{constructor(e,t,r){super(),this.type=e,this.Ta=t,this.Ea=r}_apply(e){const t=rO(e,this.type,this.Ta,this.Ea);return new Ui(e.firestore,e.converter,(s=t,new Pc((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,s,r.endAt)));var r,s}}class nO extends r0{constructor(e,t,r){super(),this.type=e,this.Ta=t,this.Ea=r}_apply(e){const t=rO(e,this.type,this.Ta,this.Ea);return new Ui(e.firestore,e.converter,(s=t,new Pc((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,s)));var r,s}}function rO(n,e,t,r){if(t[0]=(0,Ct.m9)(t[0]),t[0]instanceof t0)return function(s,u,c,g,v){if(!g)throw new Ne(ce.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${c}().`);const b=[];for(const A of iy(s))if(A.field.isKeyField())b.push(l(u,g.key));else{const M=g.data.field(A.field);if(Cw(M))throw new Ne(ce.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+A.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===M){const L=A.field.canonicalString();throw new Ne(ce.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${L}' (used as the orderBy) does not exist.`)}b.push(M)}return new ph(b,v)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const s=Mp(n.firestore);return function(u,c,g,v,b,A){const M=u.explicitOrderBy;if(b.length>M.length)throw new Ne(ce.INVALID_ARGUMENT,`Too many arguments provided to ${v}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const L=[];for(let G=0;G<b.length;G++){const Q=b[G];if(M[G].field.isKeyField()){if("string"!=typeof Q)throw new Ne(ce.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${v}(), but got a ${typeof Q}`);if(!_S(u)&&-1!==Q.indexOf("/"))throw new Ne(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${v}() must be a plain document ID, but '${Q}' contains a slash.`);const Ie=u.path.child(Qt.fromString(Q));if(!Ge.isDocumentKey(Ie))throw new Ne(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${v}() must result in a valid document path, but '${Ie}' is not because it contains an odd number of segments.`);const Ce=new Ge(Ie);L.push(l(c,Ce))}else{const Ie=KN(g,v,Q);L.push(Ie)}}return new ph(L,A)}(n._query,n.firestore._databaseId,s,e,t,r)}}function iO(n,e,t){if("string"==typeof(t=(0,Ct.m9)(t))){if(""===t)throw new Ne(ce.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!_S(e)&&-1!==t.indexOf("/"))throw new Ne(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Qt.fromString(t));if(!Ge.isDocumentKey(r))throw new Ne(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return l(n,new Ge(r))}if(t instanceof Bn)return l(n,t._key);throw new Ne(ce.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${fD(t)}.`)}function sO(n,e){if(!Array.isArray(n)||0===n.length)throw new Ne(ce.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new Ne(ce.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function oO(n,e,t){if(!t.isEqual(e))throw new Ne(ce.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}const EF={maxAttempts:5};class nx{convertValue(e,t="none"){switch(hh(e)){case 0:return null;case 1:return e.booleanValue;case 2:return sr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Rc(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw et()}}convertObject(e,t){const r={};return el(e.fields,(s,u)=>{r[s]=this.convertValue(u,t)}),r}convertGeoPoint(e){return new gD(sr(e.latitude),sr(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Bb(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Zm(e));default:return null}}convertTimestamp(e){const t=Mc(e);return new Cn(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Qt.fromString(e);Tt(gR(r));const s=new Nc(r.get(1),r.get(3)),u=new Ge(r.popFirst(5));return s.isEqual(t)||un(`Document ${u} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),u}}function ED(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class IF extends nx{constructor(e){super(),this.firestore=e}convertBytes(e){return new sl(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Bn(this.firestore,null,t)}}class aO{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Mp(e)}set(e,t,r){this._verifyNotCommitted();const s=bh(e,this._firestore),u=ED(s.converter,t,r),c=yD(this._dataReader,"WriteBatch.set",s._key,u,null!==s.converter,r);return this._mutations.push(c.toMutation(s._key,Zn.none())),this}update(e,t,r,...s){this._verifyNotCommitted();const u=bh(e,this._firestore);let c;return c="string"==typeof(t=(0,Ct.m9)(t))||t instanceof Vc?XA(this._dataReader,"WriteBatch.update",u._key,t,r,s):JA(this._dataReader,"WriteBatch.update",u._key,t),this._mutations.push(c.toMutation(u._key,Zn.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=bh(e,this._firestore);return this._mutations=this._mutations.concat(new uy(t._key,Zn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Ne(ce.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function bh(n,e){if((n=(0,Ct.m9)(n)).firestore!==e)throw new Ne(ce.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class Op extends nx{constructor(e){super(),this.firestore=e}convertBytes(e){return new sl(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Bn(this.firestore,null,t)}}function uO(n,e,t){n=Jt(n,Bn);const r=Jt(n.firestore,Yn),s=ED(n.converter,e,t);return by(r,[yD(Mp(r),"setDoc",n._key,s,null!==n.converter,t).toMutation(n._key,Zn.none())])}function lO(n,e,t,...r){n=Jt(n,Bn);const s=Jt(n.firestore,Yn),u=Mp(s);let c;return c="string"==typeof(e=(0,Ct.m9)(e))||e instanceof Vc?XA(u,"updateDoc",n._key,e,t,r):JA(u,"updateDoc",n._key,e),by(s,[c.toMutation(n._key,Zn.exists(!0))])}function cO(n,...e){var t,r,s;n=(0,Ct.m9)(n);let u={includeMetadataChanges:!1},c=0;"object"!=typeof e[c]||YA(e[c])||(u=e[c],c++);const g={includeMetadataChanges:u.includeMetadataChanges};if(YA(e[c])){const M=e[c];e[c]=null===(t=M.next)||void 0===t?void 0:t.bind(M),e[c+1]=null===(r=M.error)||void 0===r?void 0:r.bind(M),e[c+2]=null===(s=M.complete)||void 0===s?void 0:s.bind(M)}let v,b,A;if(n instanceof Bn)b=Jt(n.firestore,Yn),A=ry(n._key.path),v={next:M=>{e[c]&&e[c](rx(b,n,M))},error:e[c+1],complete:e[c+2]};else{const M=Jt(n,Ui);b=Jt(M.firestore,Yn),A=M._query;const L=new Op(b);v={next:G=>{e[c]&&e[c](new Eh(b,L,M,G))},error:e[c+1],complete:e[c+2]},XN(n._query)}return function(M,L,G,Q){const Ie=new cD(Q),Ce=new gA(L,Ie,G);return M.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return cA(yield Iy(M),Ce)})),()=>{Ie.Rc(),M.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return hA(yield Iy(M),Ce)}))}}(Lr(b),A,g,v)}function by(n,e){return function(t,r){const s=new Ir;return t.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return function p1(n,e,t){return wA.apply(this,arguments)}(yield WA(t),r,s)})),s.promise}(Lr(n),e)}function rx(n,e,t){const r=t.docs.get(e._key),s=new Op(n);return new Uc(n,s,e._key,r,new Np(t.hasPendingWrites,t.fromCache),e.converter)}class NF extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Mp(e)}get(e){const t=bh(e,this._firestore),r=new IF(this._firestore);return this._transaction.lookup([t._key]).then(s=>{if(!s||1!==s.length)return et();const u=s[0];if(u.isFoundDocument())return new t0(this._firestore,r,u.key,u,t.converter);if(u.isNoDocument())return new t0(this._firestore,r,t._key,null,t.converter);throw et()})}set(e,t,r){const s=bh(e,this._firestore),u=ED(s.converter,t,r),c=yD(this._dataReader,"Transaction.set",s._key,u,null!==s.converter,r);return this._transaction.set(s._key,c),this}update(e,t,r,...s){const u=bh(e,this._firestore);let c;return c="string"==typeof(t=(0,Ct.m9)(t))||t instanceof Vc?XA(this._dataReader,"Transaction.update",u._key,t,r,s):JA(this._dataReader,"Transaction.update",u._key,t),this._transaction.update(u._key,c),this}delete(e){const t=bh(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=bh(e,this._firestore),r=new Op(this._firestore);return super.get(e).then(s=>new Uc(this._firestore,r,t._key,s._document,new Np(!1,!1),t.converter))}}function ix(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Ne("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function hO(){if(typeof Uint8Array>"u")throw new Ne("unimplemented","Uint8Arrays are not available in this environment.")}function fO(){if(!function Dw(){return typeof atob<"u"}())throw new Ne("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){uh=Bs.SDK_VERSION,(0,Bs._registerComponent)(new Zd.wA("firestore",(t,{instanceIdentifier:r,options:s})=>{const u=t.getProvider("app").getImmediate(),c=new Yn(new gw(t.getProvider("auth-internal")),new Lb(t.getProvider("app-check-internal")),function(g,v){if(!Object.prototype.hasOwnProperty.apply(g.options,["projectId"]))throw new Ne(ce.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Nc(g.options.projectId,v)}(u,r),u);return s=Object.assign({useFetchStreams:e},s),c._setSettings(s),c},"PUBLIC").setMultipleInstances(!0)),(0,Bs.registerVersion)(Mb,"3.4.15",n),(0,Bs.registerVersion)(Mb,"3.4.15","esm2017")}();class s0{constructor(e){this._delegate=e}static fromBase64String(e){return fO(),new s0(sl.fromBase64String(e))}static fromUint8Array(e){return hO(),new s0(sl.fromUint8Array(e))}toBase64(){return fO(),this._delegate.toBase64()}toUint8Array(){return hO(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function sx(n){return function jF(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class $F{enableIndexedDbPersistence(e,t){return function K1(n,e){GN(n=Jt(n,Yn));const t=Lr(n),r=n._freezeSettings(),s=new jA;return HN(t,s,new CN(s,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function Z1(n){GN(n=Jt(n,Yn));const e=Lr(n),t=n._freezeSettings(),r=new jA;return HN(e,r,new M1(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function Y1(n){if(n._initialized&&!n._terminated)throw new Ne(ce.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Ir;return n._queue.enqueueAndForgetEvenWhileRestricted((0,ye.Z)(function*(){try{yield(t=(0,ye.Z)(function*(r){if(!fs.C())return Promise.resolve();const s=r+"main";yield fs.delete(s)}),function(r){return t.apply(this,arguments)})(PS(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class pO{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Nc||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Ac("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function H1(n,e,t,r={}){var s;const u=(n=Jt(n,Xw))._getSettings();if("firestore.googleapis.com"!==u.host&&u.host!==e&&Ac("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},u),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let c,g;if("string"==typeof r.mockUserToken)c=r.mockUserToken,g=Er.MOCK_USER;else{c=(0,Ct.Sg)(r.mockUserToken,null===(s=n._app)||void 0===s?void 0:s.options.projectId);const v=r.mockUserToken.sub||r.mockUserToken.user_id;if(!v)throw new Ne(ce.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");g=new Er(v)}n._authCredentials=new bM(new Ob(c,g))}}(this._delegate,e,t,r)}enableNetwork(){return function J1(n){return function P1(n){return n.asyncQueue.enqueue((0,ye.Z)(function*(){const e=yield xN(n),t=yield MN(n);return e.setNetworkEnabled(!0),function(r){const s=We(r);return s._u.delete(0),Qw(s)}(t)}))}(Lr(n=Jt(n,Yn)))}(this._delegate)}disableNetwork(){return function X1(n){return function F1(n){return n.asyncQueue.enqueue((0,ye.Z)(function*(){const e=yield xN(n),t=yield MN(n);return e.setNetworkEnabled(!1),(r=(0,ye.Z)(function*(s){const u=We(s);u._u.add(0),yield gy(u),u.gu.set("Offline")}),function(s){return r.apply(this,arguments)})(t);var r}))}(Lr(n=Jt(n,Yn)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,kN("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function Q1(n){return function(e){const t=new Ir;return e.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return function _1(n,e){return CA.apply(this,arguments)}(yield WA(e),t)})),t.promise}(Lr(n=Jt(n,Yn)))}(this._delegate)}onSnapshotsInSync(e){return function RF(n,e){return function U1(n,e){const t=new cD(e);return n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return r=yield Iy(n),s=t,We(r).Ru.add(s),void s.next();var r,s})),()=>{t.Rc(),n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return r=yield Iy(n),s=t,void We(r).Ru.delete(s);var r,s}))}}(Lr(n=Jt(n,Yn)),YA(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Ne("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Dy(this,UN(this._delegate,e))}catch(t){throw gs(t,"collection()","Firestore.collection()")}}doc(e){try{return new Zo(this,pD(this._delegate,e))}catch(t){throw gs(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new ms(this,function G1(n,e){if(n=Jt(n,Xw),ZA("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Ne(ce.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Ui(n,null,(t=e,new Pc(Qt.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw gs(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function OF(n,e,t){n=Jt(n,Yn);const r=Object.assign(Object.assign({},EF),t);return function(s){if(s.maxAttempts<1)throw new Ne(ce.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function B1(n,e,t){const r=new Ir;return n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){const s=yield(u=n,dD(u).then(c=>c.datastore));var u;new O1(n.asyncQueue,s,t,e,r).run()})),r.promise}(Lr(n),s=>e(new NF(n,s)),r)}(this._delegate,t=>e(new gO(this,t)))}batch(){return Lr(this._delegate),new mO(new aO(this._delegate,e=>by(this._delegate,e)))}loadBundle(e){return function eF(n,e){const t=Lr(n=Jt(n,Yn)),r=new q1;return function j1(n,e,t,r){const s=function(u,c){let g;return g="string"==typeof u?(new TextEncoder).encode(u):u,v=function(v,b){if(v instanceof Uint8Array)return TN(v,b);if(v instanceof ArrayBuffer)return TN(new Uint8Array(v),b);if(v instanceof ReadableStream)return v.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(g),new R1(v,c);var v}(t,Yw(e));n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){!function x1(n,e,t){const r=We(n);var s;(s=(0,ye.Z)(function*(u,c,g){try{const v=yield c.getMetadata();if(yield function(L,G){const Q=We(L),Ie=li(G.createTime);return Q.persistence.runTransaction("hasNewerBundle","readonly",Ce=>Q.Ns.getBundleMetadata(Ce,G.id)).then(Ce=>!!Ce&&Ce.createTime.compareTo(Ie)>=0)}(u.localStore,v))return yield c.close(),g._completeWith({taskState:"Success",documentsLoaded:(L=v).totalDocuments,bytesLoaded:L.totalBytes,totalDocuments:L.totalDocuments,totalBytes:L.totalBytes}),Promise.resolve(new Set);g._updateProgress(gN(v));const b=new u1(v,u.localStore,c.It);let A=yield c.wc();for(;A;){const L=yield b.Ou(A);L&&g._updateProgress(L),A=yield c.wc()}const M=yield b.complete();return yield Lc(u,M.Bu,void 0),yield function(L,G){const Q=We(L);return Q.persistence.runTransaction("Save bundle","readwrite",Ie=>Q.Ns.saveBundleMetadata(Ie,G))}(u.localStore,v),g._completeWith(M.progress),Promise.resolve(M.$u)}catch(v){return Ac("SyncEngine",`Loading bundle failed with ${v}`),g._failWith(v),Promise.resolve(new Set)}var L}),function(u,c,g){return s.apply(this,arguments)})(r,e,t).then(s=>{r.sharedClientState.notifyBundleLoaded(s)})}(yield WA(n),s,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function tF(n,e){return function $1(n,e){return n.asyncQueue.enqueue((0,ye.Z)(function*(){return function(t,r){const s=We(t);return s.persistence.runTransaction("Get named query","readonly",u=>s.Ns.getNamedQuery(u,r))}(yield hD(n),e)}))}(Lr(n=Jt(n,Yn)),e).then(t=>t?new Ui(n,null,t.query):null)}(this._delegate,e).then(t=>t?new ms(this,t):null)}}class ID extends nx{constructor(e){super(),this.firestore=e}convertBytes(e){return new s0(new sl(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Zo.forKey(t,this.firestore,null)}}class gO{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new ID(e)}get(e){const t=Pp(e);return this._delegate.get(t).then(r=>new o0(this._firestore,new Uc(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const s=Pp(e);return r?(ix("Transaction.set",r),this._delegate.set(s,t,r)):this._delegate.set(s,t),this}update(e,t,r,...s){const u=Pp(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...s),this}delete(e){const t=Pp(e);return this._delegate.delete(t),this}}class mO{constructor(e){this._delegate=e}set(e,t,r){const s=Pp(e);return r?(ix("WriteBatch.set",r),this._delegate.set(s,t,r)):this._delegate.set(s,t),this}update(e,t,r,...s){const u=Pp(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...s),this}delete(e){const t=Pp(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class kp{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new n0(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new a0(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=kp.INSTANCES;let s=r.get(e);s||(s=new WeakMap,r.set(e,s));let u=s.get(t);return u||(u=new kp(e,new ID(e),t),s.set(t,u)),u}}kp.INSTANCES=new WeakMap;class Zo{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new ID(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Ne("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Zo(t,new Bn(t._delegate,r,new Ge(e)))}static forKey(e,t,r){return new Zo(t,new Bn(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Dy(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Dy(this.firestore,UN(this._delegate,e))}catch(t){throw gs(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,Ct.m9)(e))instanceof Bn&&BN(this._delegate,e)}set(e,t){t=ix("DocumentReference.set",t);try{return t?uO(this._delegate,e,t):uO(this._delegate,e)}catch(r){throw gs(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?lO(this._delegate,e):lO(this._delegate,e,t,...r)}catch(s){throw gs(s,"updateDoc()","DocumentReference.update()")}}delete(){return function xF(n){return by(Jt(n.firestore,Yn),[new uy(n._key,Zn.none())])}(this._delegate)}onSnapshot(...e){const t=yO(e),r=_O(e,s=>new o0(this.firestore,new Uc(this.firestore._delegate,this._userDataWriter,s._key,s._document,s.metadata,this._delegate.converter)));return cO(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function DF(n){n=Jt(n,Bn);const e=Jt(n.firestore,Yn),t=Lr(e),r=new Op(e);return function L1(n,e){const t=new Ir;return n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return(r=(0,ye.Z)(function*(s,u,c){try{const g=yield function(v,b){const A=We(v);return A.persistence.runTransaction("read document","readonly",M=>A.localDocuments.getDocument(M,b))}(s,u);g.isFoundDocument()?c.resolve(g):g.isNoDocument()?c.resolve(null):c.reject(new Ne(ce.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(g){const v=_y(g,`Failed to get document '${u} from cache`);c.reject(v)}}),function(s,u,c){return r.apply(this,arguments)})(yield hD(n),e,t);var r})),t.promise}(t,n._key).then(s=>new Uc(e,r,n._key,s,new Np(null!==s&&s.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function CF(n){n=Jt(n,Bn);const e=Jt(n.firestore,Yn);return RN(Lr(e),n._key,{source:"server"}).then(t=>rx(e,n,t))}(this._delegate):function bF(n){n=Jt(n,Bn);const e=Jt(n.firestore,Yn);return RN(Lr(e),n._key).then(t=>rx(e,n,t))}(this._delegate),t.then(r=>new o0(this.firestore,new Uc(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new Zo(this.firestore,this._delegate.withConverter(e?kp.getInstance(this.firestore,e):null))}}function gs(n,e,t){return n.message=n.message.replace(e,t),n}function yO(n){for(const e of n)if("object"==typeof e&&!sx(e))return e;return{}}function _O(n,e){var t,r;let s;return s=sx(n[0])?n[0]:sx(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:u=>{s.next&&s.next(e(u))},error:null===(t=s.error)||void 0===t?void 0:t.bind(s),complete:null===(r=s.complete)||void 0===r?void 0:r.bind(s)}}class o0{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Zo(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return JN(this._delegate,e._delegate)}}class a0 extends o0{data(e){const t=this._delegate.data(e);return function cS(n,e){n||et()}(void 0!==t),t}}class ms{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new ID(e)}where(e,t,r){try{return new ms(this.firestore,Ih(this._delegate,function hF(n,e,t){const r=e,s=wD("where",n);return new dF(s,r,t)}(e,t,r)))}catch(s){throw gs(s,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new ms(this.firestore,Ih(this._delegate,function pF(n,e="asc"){const t=e,r=wD("orderBy",n);return new fF(r,t)}(e,t)))}catch(r){throw gs(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new ms(this.firestore,Ih(this._delegate,function gF(n){return LN("limit",n),new eO("limit",n,"F")}(e)))}catch(t){throw gs(t,"limit()","Query.limit()")}}limitToLast(e){try{return new ms(this.firestore,Ih(this._delegate,function mF(n){return LN("limitToLast",n),new eO("limitToLast",n,"L")}(e)))}catch(t){throw gs(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new ms(this.firestore,Ih(this._delegate,function yF(...n){return new tO("startAt",n,!0)}(...e)))}catch(t){throw gs(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new ms(this.firestore,Ih(this._delegate,function _F(...n){return new tO("startAfter",n,!1)}(...e)))}catch(t){throw gs(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new ms(this.firestore,Ih(this._delegate,function vF(...n){return new nO("endBefore",n,!1)}(...e)))}catch(t){throw gs(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new ms(this.firestore,Ih(this._delegate,function wF(...n){return new nO("endAt",n,!0)}(...e)))}catch(t){throw gs(t,"endAt()","Query.endAt()")}}isEqual(e){return jN(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function SF(n){n=Jt(n,Ui);const e=Jt(n.firestore,Yn),t=Lr(e),r=new Op(e);return function V1(n,e){const t=new Ir;return n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return(r=(0,ye.Z)(function*(s,u,c){try{const g=yield iD(s,u,!0),v=new _N(u,g.Hi),b=v.ju(g.documents),A=v.applyChanges(b,!1);c.resolve(A.snapshot)}catch(g){const v=_y(g,`Failed to execute query '${u} against cache`);c.reject(v)}}),function(s,u,c){return r.apply(this,arguments)})(yield hD(n),e,t);var r})),t.promise}(t,n._query).then(s=>new Eh(e,r,n,s))}(this._delegate):"server"===e?.source?function AF(n){n=Jt(n,Ui);const e=Jt(n.firestore,Yn),t=Lr(e),r=new Op(e);return NN(t,n._query,{source:"server"}).then(s=>new Eh(e,r,n,s))}(this._delegate):function TF(n){n=Jt(n,Ui);const e=Jt(n.firestore,Yn),t=Lr(e),r=new Op(e);return XN(n._query),NN(t,n._query).then(s=>new Eh(e,r,n,s))}(this._delegate),t.then(r=>new ox(this.firestore,new Eh(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=yO(e),r=_O(e,s=>new ox(this.firestore,new Eh(this.firestore._delegate,this._userDataWriter,this._delegate,s._snapshot)));return cO(this._delegate,t,r)}withConverter(e){return new ms(this.firestore,this._delegate.withConverter(e?kp.getInstance(this.firestore,e):null))}}class GF{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new a0(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class ox{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new ms(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new a0(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new GF(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new a0(this._firestore,r))})}isEqual(e){return JN(this._delegate,e._delegate)}}class Dy extends ms{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Zo(this.firestore,e):null}doc(e){try{return new Zo(this.firestore,void 0===e?pD(this._delegate):pD(this._delegate,e))}catch(t){throw gs(t,"doc()","CollectionReference.doc()")}}add(e){return function MF(n,e){const t=Jt(n.firestore,Yn),r=pD(n),s=ED(n.converter,e);return by(t,[yD(Mp(n.firestore),"addDoc",r._key,s,null!==n.converter,{}).toMutation(r._key,Zn.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new Zo(this.firestore,t))}isEqual(e){return BN(this._delegate,e._delegate)}withConverter(e){return new Dy(this.firestore,this._delegate.withConverter(e?kp.getInstance(this.firestore,e):null))}}function Pp(n){return Jt(n,Bn)}class ax{constructor(...e){this._delegate=new Vc(...e)}static documentId(){return new ax(Vn.keyField().canonicalString())}isEqual(e){return(e=(0,Ct.m9)(e))instanceof Vc&&this._delegate._internalPath.isEqual(e._internalPath)}}class Fp{constructor(e){this._delegate=e}static serverTimestamp(){const e=function PF(){return new QA("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Fp(e)}static delete(){const e=function kF(){return new e0("deleteField")}();return e._methodName="FieldValue.delete",new Fp(e)}static arrayUnion(...e){const t=function FF(...n){return new sF("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new Fp(t)}static arrayRemove(...e){const t=function LF(...n){return new oF("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new Fp(t)}static increment(e){const t=function VF(n){return new aF("increment",n)}(e);return t._methodName="FieldValue.increment",new Fp(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const zF={Firestore:pO,GeoPoint:gD,Timestamp:Cn,Blob:s0,Transaction:gO,WriteBatch:mO,DocumentReference:Zo,DocumentSnapshot:o0,Query:ms,QueryDocumentSnapshot:a0,QuerySnapshot:ox,CollectionReference:Dy,FieldPath:ax,FieldValue:Fp,setLogLevel:function HF(n){!function Rb(n){qo.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function vO(n,e){return function KF(n,e=$f.z){return new cr.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function ux(n,e){return vO(n,e).pipe((0,pt.U)(t=>({payload:t,type:"query"})))}function bD(n,e){return ux(n,e).pipe(Tg(void 0),Dv(),(0,pt.U)(([t,r])=>{const s=r.payload.docChanges(),u=s.map(c=>({type:c.type,payload:c}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((c,g)=>{const v=s.find(A=>A.doc.ref.isEqual(c.ref)),b=t?.payload.docs.find(A=>A.ref.isEqual(c.ref));v&&JSON.stringify(v.doc.metadata)===JSON.stringify(c.metadata)||!v&&b&&JSON.stringify(b.metadata)===JSON.stringify(c.metadata)||u.push({type:"modified",payload:{oldIndex:g,newIndex:g,type:"modified",doc:c}})}),u}))}function wO(n,e,t){return bD(n,t).pipe(Fu((r,s)=>function YF(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function QF(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return lx(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return lx(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return lx(n,e.oldIndex,1)}return n}(n,r))}),n}(r,s.map(u=>u.payload),e),[]),function DT(n,e=Dg.y){return n=n??kI,(0,Zr.e)((t,r)=>{let s,u=!0;t.subscribe((0,dr.x)(r,c=>{const g=e(c);(u||!n(s,g))&&(u=!1,s=g,r.next(c))}))})}(),(0,pt.U)(r=>r.map(s=>({type:s.type,payload:s}))))}function lx(n,e,t,...r){const s=n.slice();return s.splice(e,t,...r),s}function EO(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}!function WF(n){(function qF(n,e){n.INTERNAL.registerComponent(new Zd.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),s=t.getProvider("firestore").getImmediate();return e(r,s)},"PUBLIC").setServiceProps(Object.assign({},zF)))})(n,(e,t)=>new pO(e,t,new $F)),n.registerVersion("@firebase/firestore-compat","0.1.24")}(PI.Z);class IO{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=bD(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,pt.U)(r=>r.filter(s=>e.indexOf(s.type)>-1)))),t.pipe(Tg(void 0),Dv(),Pi(([r,s])=>s.length>0||!r),(0,pt.U)(([r,s])=>s),Dn.iC)}auditTrail(e){return this.stateChanges(e).pipe(Fu((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=EO(e);return wO(this.query,t,this.afs.schedulers.outsideAngular).pipe(Dn.iC)}valueChanges(e={}){return ux(this.query,this.afs.schedulers.outsideAngular).pipe((0,pt.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),Dn.iC)}get(e){return(0,zt.D)(this.query.get(e)).pipe(Dn.iC)}add(e){return this.ref.add(e)}doc(e){return new bO(this.ref.doc(e),this.afs)}}class bO{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:s,query:u}=TO(r,t);return new IO(s,u,this.afs)}snapshotChanges(){return function ZF(n,e){return vO(n,e).pipe(Tg(void 0),Dv(),(0,pt.U)(([t,r])=>r.exists?t?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Dn.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,pt.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,zt.D)(this.ref.get(e)).pipe(Dn.iC)}}class JF{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?bD(this.query,this.afs.schedulers.outsideAngular).pipe((0,pt.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),Pi(t=>t.length>0),Dn.iC):bD(this.query,this.afs.schedulers.outsideAngular).pipe(Dn.iC)}auditTrail(e){return this.stateChanges(e).pipe(Fu((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=EO(e);return wO(this.query,t,this.afs.schedulers.outsideAngular).pipe(Dn.iC)}valueChanges(e={}){return ux(this.query,this.afs.schedulers.outsideAngular).pipe((0,pt.U)(r=>r.payload.docs.map(s=>e.idField?Object.assign({[e.idField]:s.id},s.data()):s.data())),Dn.iC)}get(e){return(0,zt.D)(this.query.get(e)).pipe(Dn.iC)}}const DO=new m.OlP("angularfire2.enableFirestorePersistence"),CO=new m.OlP("angularfire2.firestore.persistenceSettings"),XF=new m.OlP("angularfire2.firestore.settings"),eL=new m.OlP("angularfire2.firestore.use-emulator");function TO(n,e=(t=>t)){return{query:e(n),ref:n}}let tL=(()=>{class n{constructor(t,r,s,u,c,g,v,b,A,M,L,G,Q,Ie,Ce,Ze,lt){this.schedulers=v;const ct=(0,Ei.on)(t,g,r),tt=A;M&&bT(ct,g,L,Q,Ie,Ce,G,Ze),[this.firestore,this.persistenceEnabled$]=(0,Ei.cc)(`${ct.name}.firestore`,"AngularFirestore",ct.name,()=>{const Dt=g.runOutsideAngular(()=>ct.firestore());if(u&&Dt.settings(u),tt&&Dt.useEmulator(...tt),s&&!lr(c)){const kt=()=>{try{return(0,zt.D)(Dt.enablePersistence(b||void 0).then(()=>!0,()=>!1))}catch(or){return typeof console<"u"&&console.warn(or),it(!1)}};return[Dt,g.runOutsideAngular(kt)]}return[Dt,it(!1)]},[u,tt,s])}collection(t,r){let s;s="string"==typeof t?this.firestore.collection(t):t;const{ref:u,query:c}=TO(s,r),g=this.schedulers.ngZone.run(()=>u);return new IO(g,c,this)}collectionGroup(t,r){const s=r||(c=>c),u=this.firestore.collectionGroup(t);return new JF(s(u),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const s=this.schedulers.ngZone.run(()=>r);return new bO(s,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(Ei.Dh),m.LFG(Ei.xv,8),m.LFG(DO,8),m.LFG(XF,8),m.LFG(m.Lbi),m.LFG(m.R0b),m.LFG(Dn.HU),m.LFG(CO,8),m.LFG(eL,8),m.LFG(NI,8),m.LFG(xI,8),m.LFG(bv,8),m.LFG(MI,8),m.LFG(RI,8),m.LFG(ET,8),m.LFG(IT,8),m.LFG(im,8))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),nL=(()=>{class n{constructor(){am.Z.registerVersion("angularfire",Dn.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:DO,useValue:!0},{provide:CO,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({providers:[tL]}),n})();const SO="firebasestorage.googleapis.com",AO="storageBucket";class fr extends Ct.ZR{constructor(e,t){super(cx(e),`Firebase Storage: ${t} (${cx(e)})`),this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,fr.prototype)}_codeEquals(e){return cx(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}function cx(n){return"storage/"+n}function dx(){return new fr("unknown","An unknown error occurred, please check the error payload for server response.")}function xO(){return new fr("canceled","User canceled the upload/download.")}function MO(){return new fr("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function Cy(n){return new fr("invalid-argument",n)}function RO(){return new fr("app-deleted","The Firebase app was deleted.")}function NO(n){return new fr("invalid-root-operation","The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function u0(n,e){return new fr("invalid-format","String does not match format '"+n+"': "+e)}function l0(n){throw new fr("internal-error","Internal error: "+n)}class Bi{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=Bi.makeFromUrl(e,t)}catch{return new Bi(e,"")}if(""===r.path)return r;throw function fL(n){return new fr("invalid-default-bucket","Invalid default bucket '"+n+"'.")}(e)}static makeFromUrl(e,t){let r=null;const s="([A-Za-z0-9.\\-_]+)",g=new RegExp("^gs://"+s+"(/(.*))?$","i");function b(tt){tt.path_=decodeURIComponent(tt.path)}const M=t.replace(/[.]/g,"\\."),ct=[{regex:g,indices:{bucket:1,path:3},postModify:function u(tt){"/"===tt.path.charAt(tt.path.length-1)&&(tt.path_=tt.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${M}/v[A-Za-z0-9_]+/b/${s}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:b},{regex:new RegExp(`^https?://${t===SO?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${s}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:b}];for(let tt=0;tt<ct.length;tt++){const Dt=ct[tt],kt=Dt.regex.exec(e);if(kt){let Za=kt[Dt.indices.path];Za||(Za=""),r=new Bi(kt[Dt.indices.bucket],Za),Dt.postModify(r);break}}if(null==r)throw function hL(n){return new fr("invalid-url","Invalid URL '"+n+"'.")}(e);return r}}class yL{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function DD(n){return"string"==typeof n||n instanceof String}function OO(n){return hx()&&n instanceof Blob}function hx(){return typeof Blob<"u"}function fx(n,e,t,r){if(r<e)throw Cy(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw Cy(`Invalid value for '${n}'. Expected ${t} or less.`)}function Bc(n,e,t){let r=e;return null==t&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function kO(n){const e=encodeURIComponent;let t="?";for(const r in n)n.hasOwnProperty(r)&&(t=t+(e(r)+"=")+e(n[r])+"&");return t=t.slice(0,-1),t}var Dh=(()=>(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"}(Dh||(Dh={})),Dh))();class bL{constructor(e,t,r,s,u,c,g,v,b,A,M){this.url_=e,this.method_=t,this.headers_=r,this.body_=s,this.successCodes_=u,this.additionalRetryCodes_=c,this.callback_=g,this.errorCallback_=v,this.timeout_=b,this.progressCallback_=A,this.connectionFactory_=M,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((L,G)=>{this.resolve_=L,this.reject_=G,this.start_()})}start_(){const t=(r,s)=>{const u=this.resolve_,c=this.reject_,g=s.connection;if(s.wasSuccessCode)try{const v=this.callback_(g,g.getResponse());!function wL(n){return void 0!==n}(v)?u():u(v)}catch(v){c(v)}else if(null!==g){const v=dx();v.serverResponse=g.getErrorText(),c(this.errorCallback_?this.errorCallback_(g,v):v)}else c(s.canceled?this.appDelete_?RO():xO():function dL(){return new fr("retry-limit-exceeded","Max retry time for operation exceeded, please try again.")}())};this.canceled_?t(0,new CD(!1,null,!0)):this.backoffId_=function _L(n,e,t){let r=1,s=null,u=null,c=!1,g=0;function v(){return 2===g}let b=!1;function A(...Ce){b||(b=!0,e.apply(null,Ce))}function M(Ce){s=setTimeout(()=>{s=null,n(G,v())},Ce)}function L(){u&&clearTimeout(u)}function G(Ce,...Ze){if(b)return void L();if(Ce)return L(),void A.call(null,Ce,...Ze);if(v()||c)return L(),void A.call(null,Ce,...Ze);let ct;r<64&&(r*=2),1===g?(g=2,ct=0):ct=1e3*(r+Math.random()),M(ct)}let Q=!1;function Ie(Ce){Q||(Q=!0,L(),!b&&(null!==s?(Ce||(g=2),clearTimeout(s),M(0)):Ce||(g=1)))}return M(0),u=setTimeout(()=>{c=!0,Ie(!0)},t),Ie}((r,s)=>{if(s)return void r(!1,new CD(!1,null,!0));const u=this.connectionFactory_();this.pendingConnection_=u;const c=g=>{null!==this.progressCallback_&&this.progressCallback_(g.loaded,g.lengthComputable?g.total:-1)};null!==this.progressCallback_&&u.addUploadProgressListener(c),u.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&u.removeUploadProgressListener(c),this.pendingConnection_=null;const g=u.getErrorCode()===Dh.NO_ERROR,v=u.getStatus();if(!g||this.isRetryStatusCode_(v)){const A=u.getErrorCode()===Dh.ABORT;return void r(!1,new CD(!1,null,A))}const b=-1!==this.successCodes_.indexOf(v);r(!0,new CD(b,u))})},t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function vL(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}isRetryStatusCode_(e){const t=e>=500&&e<600,s=-1!==[408,429].indexOf(e),u=-1!==this.additionalRetryCodes_.indexOf(e);return t||s||u}}class CD{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function ML(...n){const e=function xL(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}();if(void 0!==e){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}if(hx())return new Blob(n);throw new fr("unsupported-environment","This browser doesn't seem to support creating Blobs")}const yo={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class px{constructor(e,t){this.data=e,this.contentType=t||null}}function gx(n,e){switch(n){case yo.RAW:return new px(PO(e));case yo.BASE64:case yo.BASE64URL:return new px(FO(n,e));case yo.DATA_URL:return new px(function kL(n){const e=new LO(n);return e.base64?FO(yo.BASE64,e.rest):function OL(n){let e;try{e=decodeURIComponent(n)}catch{throw u0(yo.DATA_URL,"Malformed data URL.")}return PO(e)}(e.rest)}(e),function PL(n){return new LO(n).contentType}(e))}throw dx()}function PO(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);r<=127?e.push(r):r<=2047?e.push(192|r>>6,128|63&r):55296==(64512&r)?t<n.length-1&&56320==(64512&n.charCodeAt(t+1))?(r=65536|(1023&r)<<10|1023&n.charCodeAt(++t),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):e.push(239,191,189):56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function FO(n,e){switch(n){case yo.BASE64:{const s=-1!==e.indexOf("-"),u=-1!==e.indexOf("_");if(s||u)throw u0(n,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case yo.BASE64URL:{const s=-1!==e.indexOf("+"),u=-1!==e.indexOf("/");if(s||u)throw u0(n,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=function NL(n){return atob(n)}(e)}catch{throw u0(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let s=0;s<t.length;s++)r[s]=t.charCodeAt(s);return r}class LO{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw u0(yo.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;null!=r&&(this.base64=function FL(n,e){return n.length>=e.length&&n.substring(n.length-e.length)===e}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}class ol{constructor(e,t){let r=0,s="";OO(e)?(this.data_=e,r=e.size,s=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=s}size(){return this.size_}type(){return this.type_}slice(e,t){if(OO(this.data_)){const s=function RL(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}(this.data_,e,t);return null===s?null:new ol(s)}{const r=new Uint8Array(this.data_.buffer,e,t-e);return new ol(r,!0)}}static getBlob(...e){if(hx()){const t=e.map(r=>r instanceof ol?r.data_:r);return new ol(ML.apply(null,t))}{const t=e.map(c=>DD(c)?gx(yo.RAW,c).data:c.data_);let r=0;t.forEach(c=>{r+=c.byteLength});const s=new Uint8Array(r);let u=0;return t.forEach(c=>{for(let g=0;g<c.length;g++)s[u++]=c[g]}),new ol(s,!0)}}uploadData(){return this.data_}}function mx(n){let e;try{e=JSON.parse(n)}catch{return null}return function IL(n){return"object"==typeof n&&!Array.isArray(n)}(e)?e:null}function VO(n){const e=n.lastIndexOf("/",n.length-2);return-1===e?n:n.slice(e+1)}function UL(n,e){return e}class ys{constructor(e,t,r,s){this.server=e,this.local=t||e,this.writable=!!r,this.xform=s||UL}}let TD=null;function c0(){if(TD)return TD;const n=[];n.push(new ys("bucket")),n.push(new ys("generation")),n.push(new ys("metageneration")),n.push(new ys("name","fullPath",!0));const t=new ys("name");t.xform=function e(u,c){return function BL(n){return!DD(n)||n.length<2?n:VO(n)}(c)},n.push(t);const s=new ys("size");return s.xform=function r(u,c){return void 0!==c?Number(c):c},n.push(s),n.push(new ys("timeCreated")),n.push(new ys("updated")),n.push(new ys("md5Hash",null,!0)),n.push(new ys("cacheControl",null,!0)),n.push(new ys("contentDisposition",null,!0)),n.push(new ys("contentEncoding",null,!0)),n.push(new ys("contentLanguage",null,!0)),n.push(new ys("contentType",null,!0)),n.push(new ys("metadata","customMetadata",!0)),TD=n,TD}function UO(n,e,t){const r=mx(e);return null===r?null:function $L(n,e,t){const r={type:"file"},s=t.length;for(let u=0;u<s;u++){const c=t[u];r[c.local]=c.xform(r,e[c.server])}return function jL(n,e){Object.defineProperty(n,"ref",{get:function t(){const u=new Bi(n.bucket,n.fullPath);return e._makeStorageReference(u)}})}(r,n),r}(n,r,t)}function yx(n,e){const t={},r=e.length;for(let s=0;s<r;s++){const u=e[s];u.writable&&(t[u.server]=n[u.local])}return JSON.stringify(t)}const BO="prefixes";class al{constructor(e,t,r,s){this.url=e,this.method=t,this.handler=r,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function ul(n){if(!n)throw dx()}function SD(n,e){return function t(r,s){const u=UO(n,s,e);return ul(null!==u),u}}function Ty(n){return function e(t,r){let s;return s=401===t.getStatus()?t.getErrorText().includes("Firebase App Check token is invalid")?function lL(){return new fr("unauthorized-app","This app does not have permission to access Firebase Storage on this project.")}():function uL(){return new fr("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===t.getStatus()?function aL(n){return new fr("quota-exceeded","Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(n.bucket):403===t.getStatus()?function cL(n){return new fr("unauthorized","User does not have permission to access '"+n+"'.")}(n.path):r,s.serverResponse=r.serverResponse,s}}function d0(n){const e=Ty(n);return function t(r,s){let u=e(r,s);return 404===r.getStatus()&&(u=function oL(n){return new fr("object-not-found","Object '"+n+"' does not exist.")}(n.path)),u.serverResponse=s.serverResponse,u}}function $O(n,e,t){const s=Bc(e.fullServerUrl(),n.host,n._protocol),c=n.maxOperationRetryTime,g=new al(s,"GET",SD(n,t),c);return g.errorHandler=d0(e),g}function KL(n,e,t,r,s){const u={};u.prefix=e.isRoot?"":e.path+"/",t&&t.length>0&&(u.delimiter=t),r&&(u.pageToken=r),s&&(u.maxResults=s);const g=Bc(e.bucketOnlyServerUrl(),n.host,n._protocol),b=n.maxOperationRetryTime,A=new al(g,"GET",function qL(n,e){return function t(r,s){const u=function zL(n,e,t){const r=mx(t);return null===r?null:function GL(n,e,t){const r={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[BO])for(const s of t[BO]){const u=s.replace(/\/$/,""),c=n._makeStorageReference(new Bi(e,u));r.prefixes.push(c)}if(t.items)for(const s of t.items){const u=n._makeStorageReference(new Bi(e,s.name));r.items.push(u)}return r}(n,e,r)}(n,e,s);return ul(null!==u),u}}(n,e.bucket),b);return A.urlParams=u,A.errorHandler=Ty(e),A}function GO(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=function JL(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}(null,e)),r}class AD{constructor(e,t,r,s){this.current=e,this.total=t,this.finalized=!!r,this.metadata=s||null}}function _x(n,e){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch{ul(!1)}return ul(!!t&&-1!==(e||["active"]).indexOf(t)),t}const nV={STATE_CHANGED:"state_changed"},_s={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function vx(n){switch(n){case"running":case"pausing":case"canceling":return _s.RUNNING;case"paused":return _s.PAUSED;case"success":return _s.SUCCESS;case"canceled":return _s.CANCELED;default:return _s.ERROR}}class rV{constructor(e,t,r){if(function EL(n){return"function"==typeof n}(e)||null!=t||null!=r)this.next=e,this.error=t??void 0,this.complete=r??void 0;else{const u=e;this.next=u.next,this.error=u.error,this.complete=u.complete}}}function Sy(n){return(...e)=>{Promise.resolve().then(()=>n(...e))}}class sV extends class iV{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Dh.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Dh.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Dh.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,s){if(this.sent_)throw l0("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==s)for(const u in s)s.hasOwnProperty(u)&&this.xhr_.setRequestHeader(u,s[u].toString());return void 0!==r?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw l0("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw l0("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw l0("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw l0("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}{initXhr(){this.xhr_.responseType="text"}}function Ka(){return new sV}class KO{constructor(e,t,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=r,this._mappings=c0(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=s=>{this._request=void 0,this._chunkMultiplier=1,s._codeEquals("canceled")?(this._needToFetchStatus=!0,this.completeTransitions_()):(this._error=s,this._transition("error"))},this._metadataErrorHandler=s=>{this._request=void 0,s._codeEquals("canceled")?this.completeTransitions_():(this._error=s,this._transition("error"))},this._promise=new Promise((s,u)=>{this._resolve=s,this._reject=u,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,r])=>{switch(this._state){case"running":e(t,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((e,t)=>{const r=function XL(n,e,t,r,s){const u=e.bucketOnlyServerUrl(),c=GO(e,r,s),g={name:c.fullPath},v=Bc(u,n.host,n._protocol),A={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":c.contentType,"Content-Type":"application/json; charset=utf-8"},M=yx(c,t),Q=new al(v,"POST",function G(Ie){let Ce;_x(Ie);try{Ce=Ie.getResponseHeader("X-Goog-Upload-URL")}catch{ul(!1)}return ul(DD(Ce)),Ce},n.maxUploadRetryTime);return Q.urlParams=g,Q.headers=A,Q.body=M,Q.errorHandler=Ty(e),Q}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),s=this._ref.storage._makeRequest(r,Ka,e,t);this._request=s,s.getPromise().then(u=>{this._request=void 0,this._uploadUrl=u,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,r)=>{const s=function eV(n,e,t,r){const v=new al(t,"POST",function u(b){const A=_x(b,["active","final"]);let M=null;try{M=b.getResponseHeader("X-Goog-Upload-Size-Received")}catch{ul(!1)}M||ul(!1);const L=Number(M);return ul(!isNaN(L)),new AD(L,r.size(),"final"===A)},n.maxUploadRetryTime);return v.headers={"X-Goog-Upload-Command":"query"},v.errorHandler=Ty(e),v}(this._ref.storage,this._ref._location,e,this._blob),u=this._ref.storage._makeRequest(s,Ka,t,r);this._request=u,u.getPromise().then(c=>{this._request=void 0,this._updateProgress(c.current),this._needToFetchStatus=!1,c.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=262144*this._chunkMultiplier,t=new AD(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((s,u)=>{let c;try{c=function tV(n,e,t,r,s,u,c,g){const v=new AD(0,0);if(c?(v.current=c.current,v.total=c.total):(v.current=0,v.total=r.size()),r.size()!==v.total)throw function gL(){return new fr("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.")}();const b=v.total-v.current;let A=b;s>0&&(A=Math.min(A,s));const M=v.current,Q={"X-Goog-Upload-Command":A===b?"upload, finalize":"upload","X-Goog-Upload-Offset":`${v.current}`},Ie=r.slice(M,M+A);if(null===Ie)throw MO();const ct=new al(t,"POST",function Ce(tt,Dt){const kt=_x(tt,["active","final"]),or=v.current+A,Za=r.size();let Ix;return Ix="final"===kt?SD(e,u)(tt,Dt):null,new AD(or,Za,"final"===kt,Ix)},e.maxUploadRetryTime);return ct.headers=Q,ct.body=Ie.uploadData(),ct.progressCallback=g||null,ct.errorHandler=Ty(n),ct}(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(v){return this._error=v,void this._transition("error")}const g=this._ref.storage._makeRequest(c,Ka,s,u);this._request=g,g.getPromise().then(v=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(v.current),v.finalized?(this._metadata=v.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const r=$O(this._ref.storage,this._ref._location,this._mappings),s=this._ref.storage._makeRequest(r,Ka,e,t);this._request=s,s.getPromise().then(u=>{this._request=void 0,this._metadata=u,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const r=function zO(n,e,t,r,s){const u=e.bucketOnlyServerUrl(),c={"X-Goog-Upload-Protocol":"multipart"},v=function g(){let ct="";for(let tt=0;tt<2;tt++)ct+=Math.random().toString().slice(2);return ct}();c["Content-Type"]="multipart/related; boundary="+v;const b=GO(e,r,s),A=yx(b,t),G=ol.getBlob("--"+v+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+A+"\r\n--"+v+"\r\nContent-Type: "+b.contentType+"\r\n\r\n",r,"\r\n--"+v+"--");if(null===G)throw MO();const Q={name:b.fullPath},Ie=Bc(u,n.host,n._protocol),Ze=n.maxUploadRetryTime,lt=new al(Ie,"POST",SD(n,t),Ze);return lt.urlParams=Q,lt.headers=c,lt.body=G.uploadData(),lt.errorHandler=Ty(e),lt}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),s=this._ref.storage._makeRequest(r,Ka,e,t);this._request=s,s.getPromise().then(u=>{this._request=void 0,this._metadata=u,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request&&this._request.cancel();break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=xO(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=vx(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,r,s){const u=new rV(t||void 0,r||void 0,s||void 0);return this._addObserver(u),()=>{this._removeObserver(u)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(vx(this._state)){case _s.SUCCESS:Sy(this._resolve.bind(null,this.snapshot))();break;case _s.CANCELED:case _s.ERROR:Sy(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(vx(this._state)){case _s.RUNNING:case _s.PAUSED:e.next&&Sy(e.next.bind(e,this.snapshot))();break;case _s.SUCCESS:e.complete&&Sy(e.complete.bind(e))();break;default:e.error&&Sy(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class Lp{constructor(e,t){this._service=e,this._location=t instanceof Bi?t:Bi.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Lp(e,t)}get root(){const e=new Bi(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return VO(this._location.path)}get storage(){return this._service}get parent(){const e=function LL(n){if(0===n.length)return null;const e=n.lastIndexOf("/");return-1===e?"":n.slice(0,e)}(this._location.path);if(null===e)return null;const t=new Bi(this._location.bucket,e);return new Lp(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw NO(e)}}function YO(n,e,t){return wx.apply(this,arguments)}function wx(){return wx=(0,ye.Z)(function*(n,e,t){const s=yield QO(n,{pageToken:t});e.prefixes.push(...s.prefixes),e.items.push(...s.items),null!=s.nextPageToken&&(yield YO(n,e,s.nextPageToken))}),wx.apply(this,arguments)}function QO(n,e){null!=e&&"number"==typeof e.maxResults&&fx("options.maxResults",1,1e3,e.maxResults);const t=e||{},r=KL(n.storage,n._location,"/",t.pageToken,t.maxResults);return n.storage.makeRequestWithTokens(r,Ka)}function yV(n){n._throwIfRoot("getDownloadURL");const e=function ZL(n,e,t){const s=Bc(e.fullServerUrl(),n.host,n._protocol),c=n.maxOperationRetryTime,g=new al(s,"GET",function WL(n,e){return function t(r,s){const u=UO(n,s,e);return ul(null!==u),function HL(n,e,t,r){const s=mx(e);if(null===s||!DD(s.downloadTokens))return null;const u=s.downloadTokens;if(0===u.length)return null;const c=encodeURIComponent;return u.split(",").map(b=>{const M=n.fullPath;return Bc("/b/"+c(n.bucket)+"/o/"+c(M),t,r)+kO({alt:"media",token:b})})[0]}(u,s,n.host,n._protocol)}}(n,t),c);return g.errorHandler=d0(e),g}(n.storage,n._location,c0());return n.storage.makeRequestWithTokens(e,Ka).then(t=>{if(null===t)throw function mL(){return new fr("no-download-url","The given file does not have any download URLs.")}();return t})}function JO(n,e){const t=function VL(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return 0===n.length?t:n+"/"+t}(n._location.path,e),r=new Bi(n._location.bucket,t);return new Lp(n.storage,r)}function XO(n,e){if(n instanceof Ex){const t=n;if(null==t._bucket)throw function pL(){return new fr("no-default-bucket","No default bucket found. Did you set the '"+AO+"' property when initializing the app?")}();const r=new Lp(t,t._bucket);return null!=e?XO(r,e):r}return void 0!==e?JO(n,e):n}function EV(n,e){if(e&&function vV(n){return/^[A-Za-z]+:\/\//.test(n)}(e)){if(n instanceof Ex)return function wV(n,e){return new Lp(n,e)}(n,e);throw Cy("To use ref(service, url), the first argument must be a Storage instance.")}return XO(n,e)}function ek(n,e){const t=e?.[AO];return null==t?null:Bi.makeFromBucketSpec(t,n)}class Ex{constructor(e,t,r,s,u){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=s,this._firebaseVersion=u,this._bucket=null,this._host=SO,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=s?Bi.makeFromBucketSpec(s,this._host):ek(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?Bi.makeFromBucketSpec(this._url,e):ek(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){fx("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){fx("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,ye.Z)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const t=e._authProvider.getImmediate({optional:!0});if(t){const r=yield t.getToken();if(null!==r)return r.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,ye.Z)(function*(){const t=e._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Lp(this,e)}_makeRequest(e,t,r,s){if(this._deleted)return new yL(RO());{const u=function AL(n,e,t,r,s,u){const c=kO(n.urlParams),g=n.url+c,v=Object.assign({},n.headers);return function TL(n,e){e&&(n["X-Firebase-GMPID"]=e)}(v,e),function DL(n,e){null!==e&&e.length>0&&(n.Authorization="Firebase "+e)}(v,t),function CL(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}(v,u),function SL(n,e){null!==e&&(n["X-Firebase-AppCheck"]=e)}(v,r),new bL(g,n.method,v,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,s)}(e,this._appId,r,s,t,this._firebaseVersion);return this._requests.add(u),u.getPromise().then(()=>this._requests.delete(u),()=>this._requests.delete(u)),u}}makeRequestWithTokens(e,t){var r=this;return(0,ye.Z)(function*(){const[s,u]=yield Promise.all([r._getAuthToken(),r._getAppCheckToken()]);return r._makeRequest(e,t,s,u).getPromise()})()}}const tk="@firebase/storage";function ik(n,e){return EV(n=(0,Ct.m9)(n),e)}function NV(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),s=n.getProvider("app-check-internal");return new Ex(t,r,s,e,Bs.SDK_VERSION)}!function OV(){(0,Bs._registerComponent)(new Zd.wA("storage",NV,"PUBLIC").setMultipleInstances(!0)),(0,Bs.registerVersion)(tk,"0.9.9",""),(0,Bs.registerVersion)(tk,"0.9.9","esm2017")}();class xD{constructor(e,t,r){this._delegate=e,this.task=t,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class sk{constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new xD(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then(r=>{if(e)return e(new xD(r,this,this._ref))},t)}on(e,t,r,s){let u;return t&&(u="function"==typeof t?c=>t(new xD(c,this,this._ref)):{next:t.next?c=>t.next(new xD(c,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,u,r||void 0,s||void 0)}}class ok{constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map(e=>new jc(e,this._service))}get items(){return this._delegate.items.map(e=>new jc(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class jc{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const t=function MV(n,e){return JO(n,e)}(this._delegate,e);return new jc(t,this.storage)}get root(){return new jc(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return null==e?null:new jc(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new sk(function bV(n,e,t){return function hV(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new KO(n,new ol(e),t)}(n=(0,Ct.m9)(n),e,t)}(this._delegate,e,t),this)}putString(e,t=yo.RAW,r){this._throwIfRoot("putString");const s=gx(t,e),u=Object.assign({},r);return null==u.contentType&&null!=s.contentType&&(u.contentType=s.contentType),new sk(new KO(this._delegate,new ol(s.data,!0),u),this)}listAll(){return function SV(n){return function pV(n){const e={prefixes:[],items:[]};return YO(n,e).then(()=>e)}(n=(0,Ct.m9)(n))}(this._delegate).then(e=>new ok(e,this.storage))}list(e){return function TV(n,e){return QO(n=(0,Ct.m9)(n),e)}(this._delegate,e||void 0).then(t=>new ok(t,this.storage))}getMetadata(){return function DV(n){return function gV(n){n._throwIfRoot("getMetadata");const e=$O(n.storage,n._location,c0());return n.storage.makeRequestWithTokens(e,Ka)}(n=(0,Ct.m9)(n))}(this._delegate)}updateMetadata(e){return function CV(n,e){return function mV(n,e){n._throwIfRoot("updateMetadata");const t=function YL(n,e,t,r){const u=Bc(e.fullServerUrl(),n.host,n._protocol),g=yx(t,r),b=n.maxOperationRetryTime,A=new al(u,"PATCH",SD(n,r),b);return A.headers={"Content-Type":"application/json; charset=utf-8"},A.body=g,A.errorHandler=d0(e),A}(n.storage,n._location,e,c0());return n.storage.makeRequestWithTokens(t,Ka)}(n=(0,Ct.m9)(n),e)}(this._delegate,e)}getDownloadURL(){return function AV(n){return yV(n=(0,Ct.m9)(n))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function xV(n){return function _V(n){n._throwIfRoot("deleteObject");const e=function QL(n,e){const r=Bc(e.fullServerUrl(),n.host,n._protocol),g=new al(r,"DELETE",function c(v,b){},n.maxOperationRetryTime);return g.successCodes=[200,204],g.errorHandler=d0(e),g}(n.storage,n._location);return n.storage.makeRequestWithTokens(e,Ka)}(n=(0,Ct.m9)(n))}(this._delegate)}_throwIfRoot(e){if(""===this._delegate._location.path)throw NO(e)}}class ak{constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(uk(e))throw Cy("ref() expected a child path but got a URL, use refFromURL instead.");return new jc(ik(this._delegate,e),this)}refFromURL(e){if(!uk(e))throw Cy("refFromURL() expected a full URL but got a child path, use ref() instead.");try{Bi.makeFromUrl(e,this._delegate.host)}catch{throw Cy("refFromUrl() expected a valid full URL but got an invalid one.")}return new jc(ik(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t,r={}){!function RV(n,e,t,r={}){!function IV(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:s}=r;s&&(n._overrideAuthToken="string"==typeof s?s:(0,Ct.Sg)(s,n.app.options.projectId))}(n,e,t,r)}(this._delegate,e,t,r)}}function uk(n){return/^[A-Za-z]+:\/\//.test(n)}function LV(n,{instanceIdentifier:e}){const t=n.getProvider("app-compat").getImmediate(),r=n.getProvider("storage").getImmediate({identifier:e});return new ak(t,r)}function lk(n){const e=function UV(n){return new cr.y(e=>{const t=c=>e.next(c);t(n.snapshot);const u=n.on("state_changed",t);return n.then(c=>{t(c),e.complete()},c=>{t(n.snapshot),(c=>{e.error(c)})(c)}),function(){u()}}).pipe(function rL(n,e=$f.z){return(0,Zr.e)((t,r)=>{let s=null,u=null,c=null;const g=()=>{if(s){s.unsubscribe(),s=null;const b=u;u=null,r.next(b)}};function v(){const b=c+n,A=e.now();if(A<b)return s=this.schedule(void 0,b-A),void r.add(s);g()}t.subscribe((0,dr.x)(r,b=>{u=b,c=e.now(),s||(s=e.schedule(v,n),r.add(s))},()=>{g(),r.complete()},void 0,()=>{u=s=null}))})}(0))}(n);return{task:n,then:n.then.bind(n),catch:n.catch.bind(n),pause:n.pause.bind(n),cancel:n.cancel.bind(n),resume:n.resume.bind(n),snapshotChanges:()=>e,percentageChanges:()=>e.pipe((0,pt.U)(t=>t.bytesTransferred/t.totalBytes*100))}}function MD(n){return{getDownloadURL:()=>it(void 0).pipe(Dn.fc,Kn(()=>n.getDownloadURL()),Dn.iC),getMetadata:()=>it(void 0).pipe(Dn.fc,Kn(()=>n.getMetadata()),Dn.iC),delete:()=>(0,zt.D)(n.delete()),child:e=>MD(n.child(e)),updateMetadata:e=>(0,zt.D)(n.updateMetadata(e)),put:(e,t)=>lk(n.put(e,t)),putString:(e,t,r)=>lk(n.putString(e,t,r)),list:e=>(0,zt.D)(n.list(e)),listAll:()=>(0,zt.D)(n.listAll())}}!function VV(n){const e={TaskState:_s,TaskEvent:nV,StringFormat:yo,Storage:ak,Reference:jc};n.INTERNAL.registerComponent(new Zd.wA("storage-compat",LV,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),n.registerVersion("@firebase/storage-compat","0.1.17")}(PI.Z);const BV=new m.OlP("angularfire2.storageBucket"),jV=new m.OlP("angularfire2.storage.maxUploadRetryTime"),$V=new m.OlP("angularfire2.storage.maxOperationRetryTime"),HV=new m.OlP("angularfire2.storage.use-emulator");let GV=(()=>{class n{constructor(t,r,s,u,c,g,v,b,A,M){const L=(0,Ei.on)(t,c,r);this.storage=(0,Ei.cc)(`${L.name}.storage.${s}`,"AngularFireStorage",L.name,()=>{const G=c.runOutsideAngular(()=>L.storage(s||void 0)),Q=A;return Q&&G.useEmulator(...Q),v&&G.setMaxUploadRetryTime(v),b&&G.setMaxOperationRetryTime(b),G},[v,b])}ref(t){return MD(this.storage.ref(t))}refFromURL(t){return MD(this.storage.refFromURL(t))}upload(t,r,s){return MD(this.storage.ref(t)).put(r,s)}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(Ei.Dh),m.LFG(Ei.xv,8),m.LFG(BV,8),m.LFG(m.Lbi),m.LFG(m.R0b),m.LFG(Dn.HU),m.LFG(jV,8),m.LFG($V,8),m.LFG(HV,8),m.LFG(im,8))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),zV=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({}),n})(),qV=(()=>{class n{constructor(){am.Z.registerVersion("angularfire",Dn.q4.full,"gcs-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({providers:[GV],imports:[zV]}),n})(),WV=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n,bootstrap:[WE]}),n.\u0275inj=m.cJS({imports:[Pl,ZC,rc,ZD,Ei.hO.initializeApp(KE_firebaseConfig),OI,nL,qV]}),n})();(0,m.G48)(),_u().bootstrapModule(WV).catch(n=>console.error(n))},5867:(at,Ae,P)=>{P.d(Ae,{C6:()=>m.getApps,Mq:()=>m.getApp});var m=P(9681);(0,m.registerVersion)("firebase","9.9.4","app")},127:(at,Ae,P)=>{P.d(Ae,{Z:()=>m.Z});var m=P(3942);m.Z.registerVersion("firebase","9.9.4","app-compat")},2274:(at,Ae,P)=>{P.r(Ae);var m=P(5861),ee=P(3942),O=P(2090),oe=P(9681),re=P(655),de=P(1877),le=P(4859);const ve=function Ve(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},Je=function Me(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},me=new O.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Ye=new de.Yd("@firebase/auth");function nt(y,...h){Ye.logLevel<=de.in.ERROR&&Ye.error(`Auth (${oe.SDK_VERSION}): ${y}`,...h)}function xe(y,...h){throw $e(y,...h)}function _e(y,...h){return $e(y,...h)}function Ee(y,h,p){const w=Object.assign(Object.assign({},Je()),{[h]:p});return new O.LL("auth","Firebase",w).create(h,{appName:y.name})}function Be(y,h,p){if(!(h instanceof p))throw p.name!==h.constructor.name&&xe(y,"argument-error"),Ee(y,"argument-error",`Type of ${h.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function $e(y,...h){if("string"!=typeof y){const p=h[0],w=[...h.slice(1)];return w[0]&&(w[0].appName=y.name),y._errorFactory.create(p,...w)}return me.create(y,...h)}function U(y,h,...p){if(!y)throw $e(h,...p)}function ge(y){const h="INTERNAL ASSERTION FAILED: "+y;throw nt(h),new Error(h)}function Z(y,h){y||ge(h)}const X=new Map;function ie(y){Z(y instanceof Function,"Expected a class definition");let h=X.get(y);return h?(Z(h instanceof y,"Instance stored in cache mismatched with class"),h):(h=new y,X.set(y,h),h)}function ke(){var y;return typeof self<"u"&&(null===(y=self.location)||void 0===y?void 0:y.href)||""}function dt(){return"http:"===$t()||"https:"===$t()}function $t(){var y;return typeof self<"u"&&(null===(y=self.location)||void 0===y?void 0:y.protocol)||null}class tn{constructor(h,p){this.shortDelay=h,this.longDelay=p,Z(p>h,"Short delay should be less than long delay!"),this.isMobile=(0,O.uI)()||(0,O.b$)()}get(){return function Ut(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(dt()||(0,O.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Tn(y,h){Z(y.emulator,"Emulator should always be set here");const{url:p}=y.emulator;return h?`${p}${h.startsWith("/")?h.slice(1):h}`:p}class qt{static initialize(h,p,w){this.fetchImpl=h,p&&(this.headersImpl=p),w&&(this.responseImpl=w)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void ge("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void ge("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void ge("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Wt={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},Cr=new tn(3e4,6e4);function Ot(y,h){return y.tenantId&&!h.tenantId?Object.assign(Object.assign({},h),{tenantId:y.tenantId}):h}function Xt(y,h,p,w){return Yo.apply(this,arguments)}function Yo(){return(Yo=(0,m.Z)(function*(y,h,p,w,S={}){return Vr(y,S,(0,m.Z)(function*(){let N={},W={};w&&("GET"===h?W=w:N={body:JSON.stringify(w)});const ue=(0,O.xO)(Object.assign({key:y.config.apiKey},W)).slice(1),Le=yield y._getAdditionalHeaders();return Le["Content-Type"]="application/json",y.languageCode&&(Le["X-Firebase-Locale"]=y.languageCode),qt.fetch()(Ci(y,y.config.apiHost,p,ue),Object.assign({method:h,headers:Le,referrerPolicy:"no-referrer"},N))}))})).apply(this,arguments)}function Vr(y,h,p){return pr.apply(this,arguments)}function pr(){return(pr=(0,m.Z)(function*(y,h,p){y._canInitEmulator=!1;const w=Object.assign(Object.assign({},Wt),h);try{const S=new Br(y),N=yield Promise.race([p(),S.promise]);S.clearNetworkTimeout();const W=yield N.json();if("needConfirmation"in W)throw hi(y,"account-exists-with-different-credential",W);if(N.ok&&!("errorMessage"in W))return W;{const ue=N.ok?W.errorMessage:W.error.message,[Le,Qe]=ue.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Le)throw hi(y,"credential-already-in-use",W);if("EMAIL_EXISTS"===Le)throw hi(y,"email-already-in-use",W);if("USER_DISABLED"===Le)throw hi(y,"user-disabled",W);const mt=w[Le]||Le.toLowerCase().replace(/[_\s]+/g,"-");if(Qe)throw Ee(y,mt,Qe);xe(y,mt)}}catch(S){if(S instanceof O.ZR)throw S;xe(y,"network-request-failed")}})).apply(this,arguments)}function Ur(y,h,p,w){return vs.apply(this,arguments)}function vs(){return(vs=(0,m.Z)(function*(y,h,p,w,S={}){const N=yield Xt(y,h,p,w,S);return"mfaPendingCredential"in N&&xe(y,"multi-factor-auth-required",{_serverResponse:N}),N})).apply(this,arguments)}function Ci(y,h,p,w){const S=`${h}${p}?${w}`;return y.config.emulator?Tn(y.config,S):`${y.config.apiScheme}://${S}`}class Br{constructor(h){this.auth=h,this.timer=null,this.promise=new Promise((p,w)=>{this.timer=setTimeout(()=>w(_e(this.auth,"network-request-failed")),Cr.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function hi(y,h,p){const w={appName:y.name};p.email&&(w.email=p.email),p.phoneNumber&&(w.phoneNumber=p.phoneNumber);const S=_e(y,h,w);return S.customData._tokenResponse=p,S}function Ke(){return(Ke=(0,m.Z)(function*(y,h){return Xt(y,"POST","/v1/accounts:delete",h)})).apply(this,arguments)}function jr(y,h){return ji.apply(this,arguments)}function ji(){return(ji=(0,m.Z)(function*(y,h){return Xt(y,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function Sn(y,h){return fi.apply(this,arguments)}function fi(){return(fi=(0,m.Z)(function*(y,h){return Xt(y,"POST","/v1/accounts:lookup",h)})).apply(this,arguments)}function ri(y){if(y)try{const h=new Date(Number(y));if(!isNaN(h.getTime()))return h.toUTCString()}catch{}}function dn(){return(dn=(0,m.Z)(function*(y,h=!1){const p=(0,O.m9)(y),w=yield p.getIdToken(h),S=st(w);U(S&&S.exp&&S.auth_time&&S.iat,p.auth,"internal-error");const N="object"==typeof S.firebase?S.firebase:void 0,W=N?.sign_in_provider;return{claims:S,token:w,authTime:ri(ft(S.auth_time)),issuedAtTime:ri(ft(S.iat)),expirationTime:ri(ft(S.exp)),signInProvider:W||null,signInSecondFactor:N?.sign_in_second_factor||null}})).apply(this,arguments)}function ft(y){return 1e3*Number(y)}function st(y){var h;const[p,w,S]=y.split(".");if(void 0===p||void 0===w||void 0===S)return nt("JWT malformed, contained fewer than 3 sections"),null;try{const N=(0,O.tV)(w);return N?JSON.parse(N):(nt("Failed to decode base64 JWT payload"),null)}catch(N){return nt("Caught error parsing JWT payload as JSON",null===(h=N)||void 0===h?void 0:h.toString()),null}}function Qn(y,h){return Jn.apply(this,arguments)}function Jn(){return(Jn=(0,m.Z)(function*(y,h,p=!1){if(p)return h;try{return yield h}catch(w){throw w instanceof O.ZR&&Tr(w)&&y.auth.currentUser===y&&(yield y.auth.signOut()),w}})).apply(this,arguments)}function Tr({code:y}){return"auth/user-disabled"===y||"auth/user-token-expired"===y}class Et{constructor(h){this.user=h,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(h){var p;if(h){const w=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),w}{this.errorBackoff=3e4;const S=(null!==(p=this.user.stsTokenManager.expirationTime)&&void 0!==p?p:0)-Date.now()-3e5;return Math.max(0,S)}}schedule(h=!1){var p=this;if(!this.isRunning)return;const w=this.getInterval(h);this.timerId=setTimeout((0,m.Z)(function*(){yield p.iteration()}),w)}iteration(){var h=this;return(0,m.Z)(function*(){var p;try{yield h.user.getIdToken(!0)}catch(w){return void("auth/network-request-failed"===(null===(p=w)||void 0===p?void 0:p.code)&&h.schedule(!0))}h.schedule()})()}}class $i{constructor(h,p){this.createdAt=h,this.lastLoginAt=p,this._initializeTime()}_initializeTime(){this.lastSignInTime=ri(this.lastLoginAt),this.creationTime=ri(this.createdAt)}_copy(h){this.createdAt=h.createdAt,this.lastLoginAt=h.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Kt(y){return pi.apply(this,arguments)}function pi(){return(pi=(0,m.Z)(function*(y){var h;const p=y.auth,w=yield y.getIdToken(),S=yield Qn(y,Sn(p,{idToken:w}));U(S?.users.length,p,"internal-error");const N=S.users[0];y._notifyReloadListener(N);const W=null!==(h=N.providerUserInfo)&&void 0!==h&&h.length?V(N.providerUserInfo):[],ue=j(y.providerData,W),mt=!!y.isAnonymous&&!(y.email&&N.passwordHash||ue?.length),gt={uid:N.localId,displayName:N.displayName||null,photoURL:N.photoUrl||null,email:N.email||null,emailVerified:N.emailVerified||!1,phoneNumber:N.phoneNumber||null,tenantId:N.tenantId||null,providerData:ue,metadata:new $i(N.createdAt,N.lastLoginAt),isAnonymous:mt};Object.assign(y,gt)})).apply(this,arguments)}function K(){return(K=(0,m.Z)(function*(y){const h=(0,O.m9)(y);yield Kt(h),yield h.auth._persistUserIfCurrent(h),h.auth._notifyListenersIfCurrent(h)})).apply(this,arguments)}function j(y,h){return[...y.filter(w=>!h.some(S=>S.providerId===w.providerId)),...h]}function V(y){return y.map(h=>{var{providerId:p}=h,w=(0,re._T)(h,["providerId"]);return{providerId:p,uid:w.rawId||"",displayName:w.displayName||null,email:w.email||null,phoneNumber:w.phoneNumber||null,photoURL:w.photoUrl||null}})}function q(){return(q=(0,m.Z)(function*(y,h){const p=yield Vr(y,{},(0,m.Z)(function*(){const w=(0,O.xO)({grant_type:"refresh_token",refresh_token:h}).slice(1),{tokenApiHost:S,apiKey:N}=y.config,W=Ci(y,S,"/v1/token",`key=${N}`),ue=yield y._getAdditionalHeaders();return ue["Content-Type"]="application/x-www-form-urlencoded",qt.fetch()(W,{method:"POST",headers:ue,body:w})}));return{accessToken:p.access_token,expiresIn:p.expires_in,refreshToken:p.refresh_token}})).apply(this,arguments)}class be{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(h){U(h.idToken,"internal-error"),U(typeof h.idToken<"u","internal-error"),U(typeof h.refreshToken<"u","internal-error");const p="expiresIn"in h&&typeof h.expiresIn<"u"?Number(h.expiresIn):function nn(y){const h=st(y);return U(h,"internal-error"),U(typeof h.exp<"u","internal-error"),U(typeof h.iat<"u","internal-error"),Number(h.exp)-Number(h.iat)}(h.idToken);this.updateTokensAndExpiration(h.idToken,h.refreshToken,p)}getToken(h,p=!1){var w=this;return(0,m.Z)(function*(){return U(!w.accessToken||w.refreshToken,h,"user-token-expired"),p||!w.accessToken||w.isExpired?w.refreshToken?(yield w.refresh(h,w.refreshToken),w.accessToken):null:w.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(h,p){var w=this;return(0,m.Z)(function*(){const{accessToken:S,refreshToken:N,expiresIn:W}=yield function H(y,h){return q.apply(this,arguments)}(h,p);w.updateTokensAndExpiration(S,N,Number(W))})()}updateTokensAndExpiration(h,p,w){this.refreshToken=p||null,this.accessToken=h||null,this.expirationTime=Date.now()+1e3*w}static fromJSON(h,p){const{refreshToken:w,accessToken:S,expirationTime:N}=p,W=new be;return w&&(U("string"==typeof w,"internal-error",{appName:h}),W.refreshToken=w),S&&(U("string"==typeof S,"internal-error",{appName:h}),W.accessToken=S),N&&(U("number"==typeof N,"internal-error",{appName:h}),W.expirationTime=N),W}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(h){this.accessToken=h.accessToken,this.refreshToken=h.refreshToken,this.expirationTime=h.expirationTime}_clone(){return Object.assign(new be,this.toJSON())}_performRefresh(){return ge("not implemented")}}function Ue(y,h){U("string"==typeof y||typeof y>"u","internal-error",{appName:h})}class rt{constructor(h){var{uid:p,auth:w,stsTokenManager:S}=h,N=(0,re._T)(h,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Et(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=p,this.auth=w,this.stsTokenManager=S,this.accessToken=S.accessToken,this.displayName=N.displayName||null,this.email=N.email||null,this.emailVerified=N.emailVerified||!1,this.phoneNumber=N.phoneNumber||null,this.photoURL=N.photoURL||null,this.isAnonymous=N.isAnonymous||!1,this.tenantId=N.tenantId||null,this.providerData=N.providerData?[...N.providerData]:[],this.metadata=new $i(N.createdAt||void 0,N.lastLoginAt||void 0)}getIdToken(h){var p=this;return(0,m.Z)(function*(){const w=yield Qn(p,p.stsTokenManager.getToken(p.auth,h));return U(w,p.auth,"internal-error"),p.accessToken!==w&&(p.accessToken=w,yield p.auth._persistUserIfCurrent(p),p.auth._notifyListenersIfCurrent(p)),w})()}getIdTokenResult(h){return function jn(y){return dn.apply(this,arguments)}(this,h)}reload(){return function Gt(y){return K.apply(this,arguments)}(this)}_assign(h){this!==h&&(U(this.uid===h.uid,this.auth,"internal-error"),this.displayName=h.displayName,this.photoURL=h.photoURL,this.email=h.email,this.emailVerified=h.emailVerified,this.phoneNumber=h.phoneNumber,this.isAnonymous=h.isAnonymous,this.tenantId=h.tenantId,this.providerData=h.providerData.map(p=>Object.assign({},p)),this.metadata._copy(h.metadata),this.stsTokenManager._assign(h.stsTokenManager))}_clone(h){return new rt(Object.assign(Object.assign({},this),{auth:h,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(h){U(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=h,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(h){this.reloadListener?this.reloadListener(h):this.reloadUserInfo=h}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(h,p=!1){var w=this;return(0,m.Z)(function*(){let S=!1;h.idToken&&h.idToken!==w.stsTokenManager.accessToken&&(w.stsTokenManager.updateFromServerResponse(h),S=!0),p&&(yield Kt(w)),yield w.auth._persistUserIfCurrent(w),S&&w.auth._notifyListenersIfCurrent(w)})()}delete(){var h=this;return(0,m.Z)(function*(){const p=yield h.getIdToken();return yield Qn(h,function _o(y,h){return Ke.apply(this,arguments)}(h.auth,{idToken:p})),h.stsTokenManager.clearRefreshToken(),h.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(h=>Object.assign({},h)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(h,p){var w,S,N,W,ue,Le,Qe,mt;const gt=null!==(w=p.displayName)&&void 0!==w?w:void 0,qn=null!==(S=p.email)&&void 0!==S?S:void 0,is=null!==(N=p.phoneNumber)&&void 0!==N?N:void 0,Ou=null!==(W=p.photoURL)&&void 0!==W?W:void 0,yg=null!==(ue=p.tenantId)&&void 0!==ue?ue:void 0,Dd=null!==(Le=p._redirectEventId)&&void 0!==Le?Le:void 0,Wy=null!==(Qe=p.createdAt)&&void 0!==Qe?Qe:void 0,_g=null!==(mt=p.lastLoginAt)&&void 0!==mt?mt:void 0,{uid:rc,emailVerified:E0,isAnonymous:Ky,providerData:Cd,stsTokenManager:I0}=p;U(rc&&I0,h,"internal-error");const FD=be.fromJSON(this.name,I0);U("string"==typeof rc,h,"internal-error"),Ue(gt,h.name),Ue(qn,h.name),U("boolean"==typeof E0,h,"internal-error"),U("boolean"==typeof Ky,h,"internal-error"),Ue(is,h.name),Ue(Ou,h.name),Ue(yg,h.name),Ue(Dd,h.name),Ue(Wy,h.name),Ue(_g,h.name);const Zy=new rt({uid:rc,auth:h,email:qn,emailVerified:E0,displayName:gt,isAnonymous:Ky,photoURL:Ou,phoneNumber:is,tenantId:yg,stsTokenManager:FD,createdAt:Wy,lastLoginAt:_g});return Cd&&Array.isArray(Cd)&&(Zy.providerData=Cd.map(LD=>Object.assign({},LD))),Dd&&(Zy._redirectEventId=Dd),Zy}static _fromIdTokenResponse(h,p,w=!1){return(0,m.Z)(function*(){const S=new be;S.updateFromServerResponse(p);const N=new rt({uid:p.localId,auth:h,stsTokenManager:S,isAnonymous:w});return yield Kt(N),N})()}}const Zt=(()=>{class y{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,m.Z)(function*(){return!0})()}_set(p,w){var S=this;return(0,m.Z)(function*(){S.storage[p]=w})()}_get(p){var w=this;return(0,m.Z)(function*(){const S=w.storage[p];return void 0===S?null:S})()}_remove(p){var w=this;return(0,m.Z)(function*(){delete w.storage[p]})()}_addListener(p,w){}_removeListener(p,w){}}return y.type="NONE",y})();function $n(y,h,p){return`firebase:${y}:${h}:${p}`}class Pt{constructor(h,p,w){this.persistence=h,this.auth=p,this.userKey=w;const{config:S,name:N}=this.auth;this.fullUserKey=$n(this.userKey,S.apiKey,N),this.fullPersistenceKey=$n("persistence",S.apiKey,N),this.boundEventHandler=p._onStorageEvent.bind(p),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(h){return this.persistence._set(this.fullUserKey,h.toJSON())}getCurrentUser(){var h=this;return(0,m.Z)(function*(){const p=yield h.persistence._get(h.fullUserKey);return p?rt._fromJSON(h.auth,p):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(h){var p=this;return(0,m.Z)(function*(){if(p.persistence===h)return;const w=yield p.getCurrentUser();return yield p.removeCurrentUser(),p.persistence=h,w?p.setCurrentUser(w):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(h,p,w="authUser"){return(0,m.Z)(function*(){if(!p.length)return new Pt(ie(Zt),h,w);const S=(yield Promise.all(p.map(function(){var Qe=(0,m.Z)(function*(mt){if(yield mt._isAvailable())return mt});return function(mt){return Qe.apply(this,arguments)}}()))).filter(Qe=>Qe);let N=S[0]||ie(Zt);const W=$n(w,h.config.apiKey,h.name);let ue=null;for(const Qe of p)try{const mt=yield Qe._get(W);if(mt){const gt=rt._fromJSON(h,mt);Qe!==N&&(ue=gt),N=Qe;break}}catch{}const Le=S.filter(Qe=>Qe._shouldAllowMigration);return N._shouldAllowMigration&&Le.length?(N=Le[0],ue&&(yield N._set(W,ue.toJSON())),yield Promise.all(p.map(function(){var Qe=(0,m.Z)(function*(mt){if(mt!==N)try{yield mt._remove(W)}catch{}});return function(mt){return Qe.apply(this,arguments)}}())),new Pt(N,h,w)):new Pt(N,h,w)})()}}function Mt(y){const h=y.toLowerCase();if(h.includes("opera/")||h.includes("opr/")||h.includes("opios/"))return"Opera";if(Sr(h))return"IEMobile";if(h.includes("msie")||h.includes("trident/"))return"IE";if(h.includes("edge/"))return"Edge";if(fn(h))return"Firefox";if(h.includes("silk/"))return"Silk";if(He(h))return"Blackberry";if(_t(h))return"Webos";if(Rn(h))return"Safari";if((h.includes("chrome/")||Ti(h))&&!h.includes("edge/"))return"Chrome";if(Nn(h))return"Android";{const w=y.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===w?.length)return w[1]}return"Other"}function fn(y=(0,O.z$)()){return/firefox\//i.test(y)}function Rn(y=(0,O.z$)()){const h=y.toLowerCase();return h.includes("safari/")&&!h.includes("chrome/")&&!h.includes("crios/")&&!h.includes("android")}function Ti(y=(0,O.z$)()){return/crios\//i.test(y)}function Sr(y=(0,O.z$)()){return/iemobile/i.test(y)}function Nn(y=(0,O.z$)()){return/android/i.test(y)}function He(y=(0,O.z$)()){return/blackberry/i.test(y)}function _t(y=(0,O.z$)()){return/webos/i.test(y)}function Yt(y=(0,O.z$)()){return/iphone|ipad|ipod/i.test(y)||/macintosh/i.test(y)&&/mobile/i.test(y)}function zs(y=(0,O.z$)()){return Yt(y)||Nn(y)||_t(y)||He(y)||/windows phone/i.test(y)||Sr(y)}function ws(y,h=[]){let p;switch(y){case"Browser":p=Mt((0,O.z$)());break;case"Worker":p=`${Mt((0,O.z$)())}-${y}`;break;default:p=y}const w=h.length?h.join(","):"FirebaseCore-web";return`${p}/JsCore/${oe.SDK_VERSION}/${w}`}class qs{constructor(h){this.auth=h,this.queue=[]}pushCallback(h,p){const w=N=>new Promise((W,ue)=>{try{W(h(N))}catch(Le){ue(Le)}});w.onAbort=p,this.queue.push(w);const S=this.queue.length-1;return()=>{this.queue[S]=()=>Promise.resolve()}}runMiddleware(h){var p=this;return(0,m.Z)(function*(){var w;if(p.auth.currentUser===h)return;const S=[];try{for(const N of p.queue)yield N(h),N.onAbort&&S.push(N.onAbort)}catch(N){S.reverse();for(const W of S)try{W()}catch{}throw p.auth._errorFactory.create("login-blocked",{originalMessage:null===(w=N)||void 0===w?void 0:w.message})}})()}}class Rt{constructor(h,p,w){this.app=h,this.heartbeatServiceProvider=p,this.config=w,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Ws(this),this.idTokenSubscription=new Ws(this),this.beforeStateQueue=new qs(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=me,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=h.name,this.clientVersion=w.sdkClientVersion}_initializeWithPersistence(h,p){var w=this;return p&&(this._popupRedirectResolver=ie(p)),this._initializationPromise=this.queue((0,m.Z)(function*(){var S,N;if(!w._deleted&&(w.persistenceManager=yield Pt.create(w,h),!w._deleted)){if(null!==(S=w._popupRedirectResolver)&&void 0!==S&&S._shouldInitProactively)try{yield w._popupRedirectResolver._initialize(w)}catch{}yield w.initializeCurrentUser(p),w.lastNotifiedUid=(null===(N=w.currentUser)||void 0===N?void 0:N.uid)||null,!w._deleted&&(w._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var h=this;return(0,m.Z)(function*(){if(h._deleted)return;const p=yield h.assertedPersistence.getCurrentUser();if(h.currentUser||p){if(h.currentUser&&p&&h.currentUser.uid===p.uid)return h._currentUser._assign(p),void(yield h.currentUser.getIdToken());yield h._updateCurrentUser(p,!0)}})()}initializeCurrentUser(h){var p=this;return(0,m.Z)(function*(){var w;const S=yield p.assertedPersistence.getCurrentUser();let N=S,W=!1;if(h&&p.config.authDomain){yield p.getOrInitRedirectPersistenceManager();const ue=null===(w=p.redirectUser)||void 0===w?void 0:w._redirectEventId,Le=N?._redirectEventId,Qe=yield p.tryRedirectSignIn(h);(!ue||ue===Le)&&Qe?.user&&(N=Qe.user,W=!0)}if(!N)return p.directlySetCurrentUser(null);if(!N._redirectEventId){if(W)try{yield p.beforeStateQueue.runMiddleware(N)}catch(ue){N=S,p._popupRedirectResolver._overrideRedirectResult(p,()=>Promise.reject(ue))}return N?p.reloadAndSetCurrentUserOrClear(N):p.directlySetCurrentUser(null)}return U(p._popupRedirectResolver,p,"argument-error"),yield p.getOrInitRedirectPersistenceManager(),p.redirectUser&&p.redirectUser._redirectEventId===N._redirectEventId?p.directlySetCurrentUser(N):p.reloadAndSetCurrentUserOrClear(N)})()}tryRedirectSignIn(h){var p=this;return(0,m.Z)(function*(){let w=null;try{w=yield p._popupRedirectResolver._completeRedirectFn(p,h,!0)}catch{yield p._setRedirectUser(null)}return w})()}reloadAndSetCurrentUserOrClear(h){var p=this;return(0,m.Z)(function*(){var w;try{yield Kt(h)}catch(S){if("auth/network-request-failed"!==(null===(w=S)||void 0===w?void 0:w.code))return p.directlySetCurrentUser(null)}return p.directlySetCurrentUser(h)})()}useDeviceLanguage(){this.languageCode=function qe(){if(typeof navigator>"u")return null;const y=navigator;return y.languages&&y.languages[0]||y.language||null}()}_delete(){var h=this;return(0,m.Z)(function*(){h._deleted=!0})()}updateCurrentUser(h){var p=this;return(0,m.Z)(function*(){const w=h?(0,O.m9)(h):null;return w&&U(w.auth.config.apiKey===p.config.apiKey,p,"invalid-user-token"),p._updateCurrentUser(w&&w._clone(p))})()}_updateCurrentUser(h,p=!1){var w=this;return(0,m.Z)(function*(){if(!w._deleted)return h&&U(w.tenantId===h.tenantId,w,"tenant-id-mismatch"),p||(yield w.beforeStateQueue.runMiddleware(h)),w.queue((0,m.Z)(function*(){yield w.directlySetCurrentUser(h),w.notifyAuthListeners()}))})()}signOut(){var h=this;return(0,m.Z)(function*(){return yield h.beforeStateQueue.runMiddleware(null),(h.redirectPersistenceManager||h._popupRedirectResolver)&&(yield h._setRedirectUser(null)),h._updateCurrentUser(null,!0)})()}setPersistence(h){var p=this;return this.queue((0,m.Z)(function*(){yield p.assertedPersistence.setPersistence(ie(h))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(h){this._errorFactory=new O.LL("auth","Firebase",h())}onAuthStateChanged(h,p,w){return this.registerStateListener(this.authStateSubscription,h,p,w)}beforeAuthStateChanged(h,p){return this.beforeStateQueue.pushCallback(h,p)}onIdTokenChanged(h,p,w){return this.registerStateListener(this.idTokenSubscription,h,p,w)}toJSON(){var h;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(h=this._currentUser)||void 0===h?void 0:h.toJSON()}}_setRedirectUser(h,p){var w=this;return(0,m.Z)(function*(){const S=yield w.getOrInitRedirectPersistenceManager(p);return null===h?S.removeCurrentUser():S.setCurrentUser(h)})()}getOrInitRedirectPersistenceManager(h){var p=this;return(0,m.Z)(function*(){if(!p.redirectPersistenceManager){const w=h&&ie(h)||p._popupRedirectResolver;U(w,p,"argument-error"),p.redirectPersistenceManager=yield Pt.create(p,[ie(w._redirectPersistence)],"redirectUser"),p.redirectUser=yield p.redirectPersistenceManager.getCurrentUser()}return p.redirectPersistenceManager})()}_redirectUserForId(h){var p=this;return(0,m.Z)(function*(){var w,S;return p._isInitialized&&(yield p.queue((0,m.Z)(function*(){}))),(null===(w=p._currentUser)||void 0===w?void 0:w._redirectEventId)===h?p._currentUser:(null===(S=p.redirectUser)||void 0===S?void 0:S._redirectEventId)===h?p.redirectUser:null})()}_persistUserIfCurrent(h){var p=this;return(0,m.Z)(function*(){if(h===p.currentUser)return p.queue((0,m.Z)(function*(){return p.directlySetCurrentUser(h)}))})()}_notifyListenersIfCurrent(h){h===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var h,p;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const w=null!==(p=null===(h=this.currentUser)||void 0===h?void 0:h.uid)&&void 0!==p?p:null;this.lastNotifiedUid!==w&&(this.lastNotifiedUid=w,this.authStateSubscription.next(this.currentUser))}registerStateListener(h,p,w,S){if(this._deleted)return()=>{};const N="function"==typeof p?p:p.next.bind(p),W=this._isInitialized?Promise.resolve():this._initializationPromise;return U(W,this,"internal-error"),W.then(()=>N(this.currentUser)),"function"==typeof p?h.addObserver(p,w,S):h.addObserver(p)}directlySetCurrentUser(h){var p=this;return(0,m.Z)(function*(){p.currentUser&&p.currentUser!==h&&p._currentUser._stopProactiveRefresh(),h&&p.isProactiveRefreshEnabled&&h._startProactiveRefresh(),p.currentUser=h,h?yield p.assertedPersistence.setCurrentUser(h):yield p.assertedPersistence.removeCurrentUser()})()}queue(h){return this.operations=this.operations.then(h,h),this.operations}get assertedPersistence(){return U(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(h){!h||this.frameworks.includes(h)||(this.frameworks.push(h),this.frameworks.sort(),this.clientVersion=ws(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var h=this;return(0,m.Z)(function*(){var p;const w={"X-Client-Version":h.clientVersion};h.app.options.appId&&(w["X-Firebase-gmpid"]=h.app.options.appId);const S=yield null===(p=h.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===p?void 0:p.getHeartbeatsHeader();return S&&(w["X-Firebase-Client"]=S),w})()}}function gn(y){return(0,O.m9)(y)}class Ws{constructor(h){this.auth=h,this.observer=null,this.addObserver=(0,O.ne)(p=>this.observer=p)}get next(){return U(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Si(y){const h=y.indexOf(":");return h<0?"":y.substr(0,h+1)}function Es(y){if(!y)return null;const h=Number(y);return isNaN(h)?null:h}class ar{constructor(h,p){this.providerId=h,this.signInMethod=p}toJSON(){return ge("not implemented")}_getIdTokenResponse(h){return ge("not implemented")}_linkToIdToken(h,p){return ge("not implemented")}_getReauthenticationResolver(h){return ge("not implemented")}}function kn(y,h){return Qo.apply(this,arguments)}function Qo(){return(Qo=(0,m.Z)(function*(y,h){return Xt(y,"POST","/v1/accounts:resetPassword",Ot(y,h))})).apply(this,arguments)}function rn(y,h){return cl.apply(this,arguments)}function cl(){return(cl=(0,m.Z)(function*(y,h){return Xt(y,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function dl(y,h){return Ks.apply(this,arguments)}function Ks(){return(Ks=(0,m.Z)(function*(y,h){return Xt(y,"POST","/v1/accounts:update",Ot(y,h))})).apply(this,arguments)}function vo(){return(vo=(0,m.Z)(function*(y,h){return Ur(y,"POST","/v1/accounts:signInWithPassword",Ot(y,h))})).apply(this,arguments)}function bs(y,h){return mi.apply(this,arguments)}function mi(){return(mi=(0,m.Z)(function*(y,h){return Xt(y,"POST","/v1/accounts:sendOobCode",Ot(y,h))})).apply(this,arguments)}function ur(y,h){return hl.apply(this,arguments)}function hl(){return(hl=(0,m.Z)(function*(y,h){return bs(y,h)})).apply(this,arguments)}function Xn(y,h){return Ar.apply(this,arguments)}function Ar(){return(Ar=(0,m.Z)(function*(y,h){return bs(y,h)})).apply(this,arguments)}function Ya(y,h){return Xo.apply(this,arguments)}function Xo(){return(Xo=(0,m.Z)(function*(y,h){return bs(y,h)})).apply(this,arguments)}function fl(y,h){return gr.apply(this,arguments)}function gr(){return(gr=(0,m.Z)(function*(y,h){return bs(y,h)})).apply(this,arguments)}function $c(){return($c=(0,m.Z)(function*(y,h){return Ur(y,"POST","/v1/accounts:signInWithEmailLink",Ot(y,h))})).apply(this,arguments)}function pl(){return(pl=(0,m.Z)(function*(y,h){return Ur(y,"POST","/v1/accounts:signInWithEmailLink",Ot(y,h))})).apply(this,arguments)}class gl extends ar{constructor(h,p,w,S=null){super("password",w),this._email=h,this._password=p,this._tenantId=S}static _fromEmailAndPassword(h,p){return new gl(h,p,"password")}static _fromEmailAndCode(h,p,w=null){return new gl(h,p,"emailLink",w)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(h){const p="string"==typeof h?JSON.parse(h):h;if(p?.email&&p?.password){if("password"===p.signInMethod)return this._fromEmailAndPassword(p.email,p.password);if("emailLink"===p.signInMethod)return this._fromEmailAndCode(p.email,p.password,p.tenantId)}return null}_getIdTokenResponse(h){var p=this;return(0,m.Z)(function*(){switch(p.signInMethod){case"password":return function Jo(y,h){return vo.apply(this,arguments)}(h,{returnSecureToken:!0,email:p._email,password:p._password});case"emailLink":return function Ch(y,h){return $c.apply(this,arguments)}(h,{email:p._email,oobCode:p._password});default:xe(h,"internal-error")}})()}_linkToIdToken(h,p){var w=this;return(0,m.Z)(function*(){switch(w.signInMethod){case"password":return rn(h,{idToken:p,returnSecureToken:!0,email:w._email,password:w._password});case"emailLink":return function Th(y,h){return pl.apply(this,arguments)}(h,{idToken:p,email:w._email,oobCode:w._password});default:xe(h,"internal-error")}})()}_getReauthenticationResolver(h){return this._getIdTokenResponse(h)}}function Gn(y,h){return Hc.apply(this,arguments)}function Hc(){return(Hc=(0,m.Z)(function*(y,h){return Ur(y,"POST","/v1/accounts:signInWithIdp",Ot(y,h))})).apply(this,arguments)}class Hi extends ar{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(h){const p=new Hi(h.providerId,h.signInMethod);return h.idToken||h.accessToken?(h.idToken&&(p.idToken=h.idToken),h.accessToken&&(p.accessToken=h.accessToken),h.nonce&&!h.pendingToken&&(p.nonce=h.nonce),h.pendingToken&&(p.pendingToken=h.pendingToken)):h.oauthToken&&h.oauthTokenSecret?(p.accessToken=h.oauthToken,p.secret=h.oauthTokenSecret):xe("argument-error"),p}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(h){const p="string"==typeof h?JSON.parse(h):h,{providerId:w,signInMethod:S}=p,N=(0,re._T)(p,["providerId","signInMethod"]);if(!w||!S)return null;const W=new Hi(w,S);return W.idToken=N.idToken||void 0,W.accessToken=N.accessToken||void 0,W.secret=N.secret,W.nonce=N.nonce,W.pendingToken=N.pendingToken||null,W}_getIdTokenResponse(h){return Gn(h,this.buildRequest())}_linkToIdToken(h,p){const w=this.buildRequest();return w.idToken=p,Gn(h,w)}_getReauthenticationResolver(h){const p=this.buildRequest();return p.autoCreate=!1,Gn(h,p)}buildRequest(){const h={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)h.pendingToken=this.pendingToken;else{const p={};this.idToken&&(p.id_token=this.idToken),this.accessToken&&(p.access_token=this.accessToken),this.secret&&(p.oauth_token_secret=this.secret),p.providerId=this.providerId,this.nonce&&!this.pendingToken&&(p.nonce=this.nonce),h.postBody=(0,O.xO)(p)}return h}}function Up(y,h){return Gc.apply(this,arguments)}function Gc(){return(Gc=(0,m.Z)(function*(y,h){return Xt(y,"POST","/v1/accounts:sendVerificationCode",Ot(y,h))})).apply(this,arguments)}function Ds(){return(Ds=(0,m.Z)(function*(y,h){return Ur(y,"POST","/v1/accounts:signInWithPhoneNumber",Ot(y,h))})).apply(this,arguments)}function zc(){return(zc=(0,m.Z)(function*(y,h){const p=yield Ur(y,"POST","/v1/accounts:signInWithPhoneNumber",Ot(y,h));if(p.temporaryProof)throw hi(y,"account-exists-with-different-credential",p);return p})).apply(this,arguments)}const jp={USER_NOT_FOUND:"user-not-found"};function qc(){return(qc=(0,m.Z)(function*(y,h){return Ur(y,"POST","/v1/accounts:signInWithPhoneNumber",Ot(y,Object.assign(Object.assign({},h),{operation:"REAUTH"})),jp)})).apply(this,arguments)}class Cs extends ar{constructor(h){super("phone","phone"),this.params=h}static _fromVerification(h,p){return new Cs({verificationId:h,verificationCode:p})}static _fromTokenResponse(h,p){return new Cs({phoneNumber:h,temporaryProof:p})}_getIdTokenResponse(h){return function ml(y,h){return Ds.apply(this,arguments)}(h,this._makeVerificationRequest())}_linkToIdToken(h,p){return function Bp(y,h){return zc.apply(this,arguments)}(h,Object.assign({idToken:p},this._makeVerificationRequest()))}_getReauthenticationResolver(h){return function $p(y,h){return qc.apply(this,arguments)}(h,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:h,phoneNumber:p,verificationId:w,verificationCode:S}=this.params;return h&&p?{temporaryProof:h,phoneNumber:p}:{sessionInfo:w,code:S}}toJSON(){const h={providerId:this.providerId};return this.params.phoneNumber&&(h.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(h.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(h.verificationCode=this.params.verificationCode),this.params.verificationId&&(h.verificationId=this.params.verificationId),h}static fromJSON(h){"string"==typeof h&&(h=JSON.parse(h));const{verificationId:p,verificationCode:w,phoneNumber:S,temporaryProof:N}=h;return w||p||S||N?new Cs({verificationId:p,verificationCode:w,phoneNumber:S,temporaryProof:N}):null}}class Qa{constructor(h){var p,w,S,N,W,ue;const Le=(0,O.zd)((0,O.pd)(h)),Qe=null!==(p=Le.apiKey)&&void 0!==p?p:null,mt=null!==(w=Le.oobCode)&&void 0!==w?w:null,gt=function Wc(y){switch(y){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(S=Le.mode)&&void 0!==S?S:null);U(Qe&&mt&&gt,"argument-error"),this.apiKey=Qe,this.operation=gt,this.code=mt,this.continueUrl=null!==(N=Le.continueUrl)&&void 0!==N?N:null,this.languageCode=null!==(W=Le.languageCode)&&void 0!==W?W:null,this.tenantId=null!==(ue=Le.tenantId)&&void 0!==ue?ue:null}static parseLink(h){const p=function Kc(y){const h=(0,O.zd)((0,O.pd)(y)).link,p=h?(0,O.zd)((0,O.pd)(h)).deep_link_id:null,w=(0,O.zd)((0,O.pd)(y)).deep_link_id;return(w?(0,O.zd)((0,O.pd)(w)).link:null)||w||p||h||y}(h);try{return new Qa(p)}catch{return null}}}let Ai=(()=>{class y{constructor(){this.providerId=y.PROVIDER_ID}static credential(p,w){return gl._fromEmailAndPassword(p,w)}static credentialWithLink(p,w){const S=Qa.parseLink(w);return U(S,"argument-error"),gl._fromEmailAndCode(p,S.code,S.tenantId)}}return y.PROVIDER_ID="password",y.EMAIL_PASSWORD_SIGN_IN_METHOD="password",y.EMAIL_LINK_SIGN_IN_METHOD="emailLink",y})();class Gi{constructor(h){this.providerId=h,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(h){this.defaultLanguageCode=h}setCustomParameters(h){return this.customParameters=h,this}getCustomParameters(){return this.customParameters}}class zi extends Gi{constructor(){super(...arguments),this.scopes=[]}addScope(h){return this.scopes.includes(h)||this.scopes.push(h),this}getScopes(){return[...this.scopes]}}class Zs extends zi{static credentialFromJSON(h){const p="string"==typeof h?JSON.parse(h):h;return U("providerId"in p&&"signInMethod"in p,"argument-error"),Hi._fromParams(p)}credential(h){return this._credential(Object.assign(Object.assign({},h),{nonce:h.rawNonce}))}_credential(h){return U(h.idToken||h.accessToken,"argument-error"),Hi._fromParams(Object.assign(Object.assign({},h),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(h){return Zs.oauthCredentialFromTaggedObject(h)}static credentialFromError(h){return Zs.oauthCredentialFromTaggedObject(h.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{oauthIdToken:p,oauthAccessToken:w,oauthTokenSecret:S,pendingToken:N,nonce:W,providerId:ue}=h;if(!w&&!S&&!p&&!N||!ue)return null;try{return new Zs(ue)._credential({idToken:p,accessToken:w,nonce:W,pendingToken:N})}catch{return null}}}let ea=(()=>{class y extends zi{constructor(){super("facebook.com")}static credential(p){return Hi._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.FACEBOOK_SIGN_IN_METHOD,accessToken:p})}static credentialFromResult(p){return y.credentialFromTaggedObject(p)}static credentialFromError(p){return y.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p||!("oauthAccessToken"in p)||!p.oauthAccessToken)return null;try{return y.credential(p.oauthAccessToken)}catch{return null}}}return y.FACEBOOK_SIGN_IN_METHOD="facebook.com",y.PROVIDER_ID="facebook.com",y})(),Ja=(()=>{class y extends zi{constructor(){super("google.com"),this.addScope("profile")}static credential(p,w){return Hi._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GOOGLE_SIGN_IN_METHOD,idToken:p,accessToken:w})}static credentialFromResult(p){return y.credentialFromTaggedObject(p)}static credentialFromError(p){return y.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthIdToken:w,oauthAccessToken:S}=p;if(!w&&!S)return null;try{return y.credential(w,S)}catch{return null}}}return y.GOOGLE_SIGN_IN_METHOD="google.com",y.PROVIDER_ID="google.com",y})(),yl=(()=>{class y extends zi{constructor(){super("github.com")}static credential(p){return Hi._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GITHUB_SIGN_IN_METHOD,accessToken:p})}static credentialFromResult(p){return y.credentialFromTaggedObject(p)}static credentialFromError(p){return y.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p||!("oauthAccessToken"in p)||!p.oauthAccessToken)return null;try{return y.credential(p.oauthAccessToken)}catch{return null}}}return y.GITHUB_SIGN_IN_METHOD="github.com",y.PROVIDER_ID="github.com",y})();class ta extends ar{constructor(h,p){super(h,h),this.pendingToken=p}_getIdTokenResponse(h){return Gn(h,this.buildRequest())}_linkToIdToken(h,p){const w=this.buildRequest();return w.idToken=p,Gn(h,w)}_getReauthenticationResolver(h){const p=this.buildRequest();return p.autoCreate=!1,Gn(h,p)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(h){const p="string"==typeof h?JSON.parse(h):h,{providerId:w,signInMethod:S,pendingToken:N}=p;return w&&S&&N&&w===S?new ta(w,N):null}static _create(h,p){return new ta(h,p)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class si extends Gi{constructor(h){U(h.startsWith("saml."),"argument-error"),super(h)}static credentialFromResult(h){return si.samlCredentialFromTaggedObject(h)}static credentialFromError(h){return si.samlCredentialFromTaggedObject(h.customData||{})}static credentialFromJSON(h){const p=ta.fromJSON(h);return U(p,"argument-error"),p}static samlCredentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{pendingToken:p,providerId:w}=h;if(!p||!w)return null;try{return ta._create(w,p)}catch{return null}}}let $r=(()=>{class y extends zi{constructor(){super("twitter.com")}static credential(p,w){return Hi._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.TWITTER_SIGN_IN_METHOD,oauthToken:p,oauthTokenSecret:w})}static credentialFromResult(p){return y.credentialFromTaggedObject(p)}static credentialFromError(p){return y.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthAccessToken:w,oauthTokenSecret:S}=p;if(!w||!S)return null;try{return y.credential(w,S)}catch{return null}}}return y.TWITTER_SIGN_IN_METHOD="twitter.com",y.PROVIDER_ID="twitter.com",y})();function wo(y,h){return Zc.apply(this,arguments)}function Zc(){return(Zc=(0,m.Z)(function*(y,h){return Ur(y,"POST","/v1/accounts:signUp",Ot(y,h))})).apply(this,arguments)}class lr{constructor(h){this.user=h.user,this.providerId=h.providerId,this._tokenResponse=h._tokenResponse,this.operationType=h.operationType}static _fromIdTokenResponse(h,p,w,S=!1){return(0,m.Z)(function*(){const N=yield rt._fromIdTokenResponse(h,w,S),W=xh(w);return new lr({user:N,providerId:W,_tokenResponse:w,operationType:p})})()}static _forOperation(h,p,w){return(0,m.Z)(function*(){yield h._updateTokensIfNecessary(w,!0);const S=xh(w);return new lr({user:h,providerId:S,_tokenResponse:w,operationType:p})})()}}function xh(y){return y.providerId?y.providerId:"phoneNumber"in y?"phone":null}function _n(){return(_n=(0,m.Z)(function*(y){var h;const p=gn(y);if(yield p._initializationPromise,null!==(h=p.currentUser)&&void 0!==h&&h.isAnonymous)return new lr({user:p.currentUser,providerId:null,operationType:"signIn"});const w=yield wo(p,{returnSecureToken:!0}),S=yield lr._fromIdTokenResponse(p,"signIn",w,!0);return yield p._updateCurrentUser(S.user),S})).apply(this,arguments)}class Xa extends O.ZR{constructor(h,p,w,S){var N;super(p.code,p.message),this.operationType=w,this.user=S,Object.setPrototypeOf(this,Xa.prototype),this.customData={appName:h.name,tenantId:null!==(N=h.tenantId)&&void 0!==N?N:void 0,_serverResponse:p.customData._serverResponse,operationType:w}}static _fromErrorAndOperation(h,p,w,S){return new Xa(h,p,w,S)}}function Rh(y,h,p,w){return("reauthenticate"===h?p._getReauthenticationResolver(y):p._getIdTokenResponse(y)).catch(N=>{throw"auth/multi-factor-auth-required"===N.code?Xa._fromErrorAndOperation(y,N,h,w):N})}function oi(y){return new Set(y.map(({providerId:h})=>h).filter(h=>!!h))}function eu(){return(eu=(0,m.Z)(function*(y,h){const p=(0,O.m9)(y);yield jt(!0,p,h);const{providerUserInfo:w}=yield jr(p.auth,{idToken:yield p.getIdToken(),deleteProvider:[h]}),S=oi(w||[]);return p.providerData=p.providerData.filter(N=>S.has(N.providerId)),S.has("phone")||(p.phoneNumber=null),yield p.auth._persistUserIfCurrent(p),p})).apply(this,arguments)}function Ys(y,h){return Wi.apply(this,arguments)}function Wi(){return(Wi=(0,m.Z)(function*(y,h,p=!1){const w=yield Qn(y,h._linkToIdToken(y.auth,yield y.getIdToken()),p);return lr._forOperation(y,"link",w)})).apply(this,arguments)}function jt(y,h,p){return na.apply(this,arguments)}function na(){return(na=(0,m.Z)(function*(y,h,p){yield Kt(h);const S=!1===y?"provider-already-linked":"no-such-provider";U(oi(h.providerData).has(p)===y,h.auth,S)})).apply(this,arguments)}function Qs(y,h){return tu.apply(this,arguments)}function tu(){return(tu=(0,m.Z)(function*(y,h,p=!1){var w;const{auth:S}=y,N="reauthenticate";try{const W=yield Qn(y,Rh(S,N,h,y),p);U(W.idToken,S,"internal-error");const ue=st(W.idToken);U(ue,S,"internal-error");const{sub:Le}=ue;return U(y.uid===Le,S,"user-mismatch"),lr._forOperation(y,N,W)}catch(W){throw"auth/user-not-found"===(null===(w=W)||void 0===w?void 0:w.code)&&xe(S,"user-mismatch"),W}})).apply(this,arguments)}function yi(y,h){return nu.apply(this,arguments)}function nu(){return(nu=(0,m.Z)(function*(y,h,p=!1){const w="signIn",S=yield Rh(y,w,h),N=yield lr._fromIdTokenResponse(y,w,S);return p||(yield y._updateCurrentUser(N.user)),N})).apply(this,arguments)}function yn(y,h){return It.apply(this,arguments)}function It(){return(It=(0,m.Z)(function*(y,h){return yi(gn(y),h)})).apply(this,arguments)}function ru(y,h){return Nh.apply(this,arguments)}function Nh(){return(Nh=(0,m.Z)(function*(y,h){const p=(0,O.m9)(y);return yield jt(!1,p,h.providerId),Ys(p,h)})).apply(this,arguments)}function iu(y,h){return su.apply(this,arguments)}function su(){return(su=(0,m.Z)(function*(y,h){return Qs((0,O.m9)(y),h)})).apply(this,arguments)}function _l(y,h){return Ki.apply(this,arguments)}function Ki(){return(Ki=(0,m.Z)(function*(y,h){return Ur(y,"POST","/v1/accounts:signInWithCustomToken",Ot(y,h))})).apply(this,arguments)}function ra(){return(ra=(0,m.Z)(function*(y,h){const p=gn(y),w=yield _l(p,{token:h,returnSecureToken:!0}),S=yield lr._fromIdTokenResponse(p,"signIn",w);return yield p._updateCurrentUser(S.user),S})).apply(this,arguments)}class Te{constructor(h,p){this.factorId=h,this.uid=p.mfaEnrollmentId,this.enrollmentTime=new Date(p.enrolledAt).toUTCString(),this.displayName=p.displayName}static _fromServerResponse(h,p){return"phoneInfo"in p?Ft._fromServerResponse(h,p):xe(h,"internal-error")}}class Ft extends Te{constructor(h){super("phone",h),this.phoneNumber=h.phoneInfo}static _fromServerResponse(h,p){return new Ft(p)}}function wl(y,h,p){var w;U((null===(w=p.url)||void 0===w?void 0:w.length)>0,y,"invalid-continue-uri"),U(typeof p.dynamicLinkDomain>"u"||p.dynamicLinkDomain.length>0,y,"invalid-dynamic-link-domain"),h.continueUrl=p.url,h.dynamicLinkDomain=p.dynamicLinkDomain,h.canHandleCodeInApp=p.handleCodeInApp,p.iOS&&(U(p.iOS.bundleId.length>0,y,"missing-ios-bundle-id"),h.iOSBundleId=p.iOS.bundleId),p.android&&(U(p.android.packageName.length>0,y,"missing-android-pkg-name"),h.androidInstallApp=p.android.installApp,h.androidMinimumVersionCode=p.android.minimumVersion,h.androidPackageName=p.android.packageName)}function vn(){return(vn=(0,m.Z)(function*(y,h,p){const w=(0,O.m9)(y),S={requestType:"PASSWORD_RESET",email:h};p&&wl(w,S,p),yield Xn(w,S)})).apply(this,arguments)}function Eo(){return(Eo=(0,m.Z)(function*(y,h,p){yield kn((0,O.m9)(y),{oobCode:h,newPassword:p})})).apply(this,arguments)}function ia(){return(ia=(0,m.Z)(function*(y,h){yield dl((0,O.m9)(y),{oobCode:h})})).apply(this,arguments)}function sa(y,h){return Il.apply(this,arguments)}function Il(){return(Il=(0,m.Z)(function*(y,h){const p=(0,O.m9)(y),w=yield kn(p,{oobCode:h}),S=w.requestType;switch(U(S,p,"internal-error"),S){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":U(w.newEmail,p,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":U(w.mfaInfo,p,"internal-error");default:U(w.email,p,"internal-error")}let N=null;return w.mfaInfo&&(N=Te._fromServerResponse(gn(p),w.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===w.requestType?w.newEmail:w.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===w.requestType?w.email:w.newEmail)||null,multiFactorInfo:N},operation:S}})).apply(this,arguments)}function Yc(){return(Yc=(0,m.Z)(function*(y,h){const{data:p}=yield sa((0,O.m9)(y),h);return p.email})).apply(this,arguments)}function wn(){return(wn=(0,m.Z)(function*(y,h,p){const w=gn(y),S=yield wo(w,{returnSecureToken:!0,email:h,password:p}),N=yield lr._fromIdTokenResponse(w,"signIn",S);return yield w._updateCurrentUser(N.user),N})).apply(this,arguments)}function Xs(){return(Xs=(0,m.Z)(function*(y,h,p){const w=(0,O.m9)(y),S={requestType:"EMAIL_SIGNIN",email:h};U(p.handleCodeInApp,w,"argument-error"),p&&wl(w,S,p),yield Ya(w,S)})).apply(this,arguments)}function oa(){return(oa=(0,m.Z)(function*(y,h,p){const w=(0,O.m9)(y),S=Ai.credentialWithLink(h,p||ke());return U(S._tenantId===(w.tenantId||null),w,"tenant-id-mismatch"),yn(w,S)})).apply(this,arguments)}function Gp(y,h){return Cl.apply(this,arguments)}function Cl(){return(Cl=(0,m.Z)(function*(y,h){return Xt(y,"POST","/v1/accounts:createAuthUri",Ot(y,h))})).apply(this,arguments)}function aa(){return(aa=(0,m.Z)(function*(y,h){const w={identifier:h,continueUri:dt()?ke():"http://localhost"},{signinMethods:S}=yield Gp((0,O.m9)(y),w);return S||[]})).apply(this,arguments)}function ua(){return(ua=(0,m.Z)(function*(y,h){const p=(0,O.m9)(y),S={requestType:"VERIFY_EMAIL",idToken:yield y.getIdToken()};h&&wl(p.auth,S,h);const{email:N}=yield ur(p.auth,S);N!==y.email&&(yield y.reload())})).apply(this,arguments)}function uu(){return(uu=(0,m.Z)(function*(y,h,p){const w=(0,O.m9)(y),N={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield y.getIdToken(),newEmail:h};p&&wl(w.auth,N,p);const{email:W}=yield fl(w.auth,N);W!==y.email&&(yield y.reload())})).apply(this,arguments)}function lu(y,h){return Al.apply(this,arguments)}function Al(){return(Al=(0,m.Z)(function*(y,h){return Xt(y,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function Ml(){return(Ml=(0,m.Z)(function*(y,{displayName:h,photoURL:p}){if(void 0===h&&void 0===p)return;const w=(0,O.m9)(y),N={idToken:yield w.getIdToken(),displayName:h,photoUrl:p,returnSecureToken:!0},W=yield Qn(w,lu(w.auth,N));w.displayName=W.displayName||null,w.photoURL=W.photoUrl||null;const ue=w.providerData.find(({providerId:Le})=>"password"===Le);ue&&(ue.displayName=w.displayName,ue.photoURL=w.photoURL),yield w._updateTokensIfNecessary(W)})).apply(this,arguments)}function to(y,h,p){return cu.apply(this,arguments)}function cu(){return(cu=(0,m.Z)(function*(y,h,p){const{auth:w}=y,N={idToken:yield y.getIdToken(),returnSecureToken:!0};h&&(N.email=h),p&&(N.password=p);const W=yield Qn(y,rn(w,N));yield y._updateTokensIfNecessary(W,!0)})).apply(this,arguments)}class Hr{constructor(h,p,w={}){this.isNewUser=h,this.providerId=p,this.profile=w}}class hn extends Hr{constructor(h,p,w,S){super(h,p,w),this.username=S}}class Jc extends Hr{constructor(h,p){super(h,"facebook.com",p)}}class Rl extends hn{constructor(h,p){super(h,"github.com",p,"string"==typeof p?.login?p?.login:null)}}class Oh extends Hr{constructor(h,p){super(h,"google.com",p)}}class Nl extends hn{constructor(h,p,w){super(h,"twitter.com",p,w)}}function du(y){const{user:h,_tokenResponse:p}=y;return h.isAnonymous&&!p?{providerId:null,isNewUser:!1,profile:null}:function zn(y){var h,p;if(!y)return null;const{providerId:w}=y,S=y.rawUserInfo?JSON.parse(y.rawUserInfo):{},N=y.isNewUser||"identitytoolkit#SignupNewUserResponse"===y.kind;if(!w&&y?.idToken){const W=null===(p=null===(h=st(y.idToken))||void 0===h?void 0:h.firebase)||void 0===p?void 0:p.sign_in_provider;if(W)return new Hr(N,"anonymous"!==W&&"custom"!==W?W:null)}if(!w)return null;switch(w){case"facebook.com":return new Jc(N,S);case"github.com":return new Rl(N,S);case"google.com":return new Oh(N,S);case"twitter.com":return new Nl(N,S,y.screenName||null);case"custom":case"anonymous":return new Hr(N,null);default:return new Hr(N,w,S)}}(p)}class no{constructor(h,p){this.type=h,this.credential=p}static _fromIdtoken(h){return new no("enroll",h)}static _fromMfaPendingCredential(h){return new no("signin",h)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(h){var p,w;if(h?.multiFactorSession){if(null!==(p=h.multiFactorSession)&&void 0!==p&&p.pendingCredential)return no._fromMfaPendingCredential(h.multiFactorSession.pendingCredential);if(null!==(w=h.multiFactorSession)&&void 0!==w&&w.idToken)return no._fromIdtoken(h.multiFactorSession.idToken)}return null}}class hu{constructor(h,p,w){this.session=h,this.hints=p,this.signInResolver=w}static _fromError(h,p){const w=gn(h),S=p.customData._serverResponse,N=(S.mfaInfo||[]).map(ue=>Te._fromServerResponse(w,ue));U(S.mfaPendingCredential,w,"internal-error");const W=no._fromMfaPendingCredential(S.mfaPendingCredential);return new hu(W,N,function(){var ue=(0,m.Z)(function*(Le){const Qe=yield Le._process(w,W);delete S.mfaInfo,delete S.mfaPendingCredential;const mt=Object.assign(Object.assign({},S),{idToken:Qe.idToken,refreshToken:Qe.refreshToken});switch(p.operationType){case"signIn":const gt=yield lr._fromIdTokenResponse(w,p.operationType,mt);return yield w._updateCurrentUser(gt.user),gt;case"reauthenticate":return U(p.user,w,"internal-error"),lr._forOperation(p.user,p.operationType,mt);default:xe(w,"internal-error")}});return function(Le){return ue.apply(this,arguments)}}())}resolveSignIn(h){var p=this;return(0,m.Z)(function*(){return p.signInResolver(h)})()}}function fu(y,h){return Xt(y,"POST","/v2/accounts/mfaEnrollment:start",Ot(y,h))}class kh{constructor(h){this.user=h,this.enrolledFactors=[],h._onReload(p=>{p.mfaInfo&&(this.enrolledFactors=p.mfaInfo.map(w=>Te._fromServerResponse(h.auth,w)))})}static _fromUser(h){return new kh(h)}getSession(){var h=this;return(0,m.Z)(function*(){return no._fromIdtoken(yield h.user.getIdToken())})()}enroll(h,p){var w=this;return(0,m.Z)(function*(){const S=h,N=yield w.getSession(),W=yield Qn(w.user,S._process(w.user.auth,N,p));return yield w.user._updateTokensIfNecessary(W),w.user.reload()})()}unenroll(h){var p=this;return(0,m.Z)(function*(){var w;const S="string"==typeof h?h:h.uid,N=yield p.user.getIdToken(),W=yield Qn(p.user,function nd(y,h){return Xt(y,"POST","/v2/accounts/mfaEnrollment:withdraw",Ot(y,h))}(p.user.auth,{idToken:N,mfaEnrollmentId:S}));p.enrolledFactors=p.enrolledFactors.filter(({uid:ue})=>ue!==S),yield p.user._updateTokensIfNecessary(W);try{yield p.user.reload()}catch(ue){if("auth/user-token-expired"!==(null===(w=ue)||void 0===w?void 0:w.code))throw ue}})()}}const Co=new WeakMap,ro="__sak";class gu{constructor(h,p){this.storageRetriever=h,this.type=p}_isAvailable(){try{return this.storage?(this.storage.setItem(ro,"1"),this.storage.removeItem(ro),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(h,p){return this.storage.setItem(h,JSON.stringify(p)),Promise.resolve()}_get(h){const p=this.storage.getItem(h);return Promise.resolve(p?JSON.parse(p):null)}_remove(h){return this.storage.removeItem(h),Promise.resolve()}get storage(){return this.storageRetriever()}}const ca=(()=>{class y extends gu{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(p,w)=>this.onStorageEvent(p,w),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function la(){const y=(0,O.z$)();return Rn(y)||Yt(y)}()&&function pn(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=zs(),this._shouldAllowMigration=!0}forAllChangedKeys(p){for(const w of Object.keys(this.listeners)){const S=this.storage.getItem(w),N=this.localCache[w];S!==N&&p(w,N,S)}}onStorageEvent(p,w=!1){if(!p.key)return void this.forAllChangedKeys((ue,Le,Qe)=>{this.notifyListeners(ue,Qe)});const S=p.key;if(w?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const ue=this.storage.getItem(S);if(p.newValue!==ue)null!==p.newValue?this.storage.setItem(S,p.newValue):this.storage.removeItem(S);else if(this.localCache[S]===p.newValue&&!w)return}const N=()=>{const ue=this.storage.getItem(S);!w&&this.localCache[S]===ue||this.notifyListeners(S,ue)},W=this.storage.getItem(S);!function Hn(){return(0,O.w1)()&&10===document.documentMode}()||W===p.newValue||p.newValue===p.oldValue?N():setTimeout(N,10)}notifyListeners(p,w){this.localCache[p]=w;const S=this.listeners[p];if(S)for(const N of Array.from(S))N(w&&JSON.parse(w))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((p,w,S)=>{this.onStorageEvent(new StorageEvent("storage",{key:p,oldValue:w,newValue:S}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(p,w){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[p]||(this.listeners[p]=new Set,this.localCache[p]=this.storage.getItem(p)),this.listeners[p].add(w)}_removeListener(p,w){this.listeners[p]&&(this.listeners[p].delete(w),0===this.listeners[p].size&&delete this.listeners[p]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(p,w){var S=()=>super._set,N=this;return(0,m.Z)(function*(){yield S().call(N,p,w),N.localCache[p]=JSON.stringify(w)})()}_get(p){var w=()=>super._get,S=this;return(0,m.Z)(function*(){const N=yield w().call(S,p);return S.localCache[p]=JSON.stringify(N),N})()}_remove(p){var w=()=>super._remove,S=this;return(0,m.Z)(function*(){yield w().call(S,p),delete S.localCache[p]})()}}return y.type="LOCAL",y})(),Mi=(()=>{class y extends gu{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(p,w){}_removeListener(p,w){}}return y.type="SESSION",y})();let sd=(()=>{class y{constructor(p){this.eventTarget=p,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(p){const w=this.receivers.find(N=>N.isListeningto(p));if(w)return w;const S=new y(p);return this.receivers.push(S),S}isListeningto(p){return this.eventTarget===p}handleEvent(p){var w=this;return(0,m.Z)(function*(){const S=p,{eventId:N,eventType:W,data:ue}=S.data,Le=w.handlersMap[W];if(!Le?.size)return;S.ports[0].postMessage({status:"ack",eventId:N,eventType:W});const Qe=Array.from(Le).map(function(){var gt=(0,m.Z)(function*(qn){return qn(S.origin,ue)});return function(qn){return gt.apply(this,arguments)}}()),mt=yield function ha(y){return Promise.all(y.map(function(){var h=(0,m.Z)(function*(p){try{return{fulfilled:!0,value:yield p}}catch(w){return{fulfilled:!1,reason:w}}});return function(p){return h.apply(this,arguments)}}()))}(Qe);S.ports[0].postMessage({status:"done",eventId:N,eventType:W,response:mt})})()}_subscribe(p,w){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[p]||(this.handlersMap[p]=new Set),this.handlersMap[p].add(w)}_unsubscribe(p,w){this.handlersMap[p]&&w&&this.handlersMap[p].delete(w),(!w||0===this.handlersMap[p].size)&&delete this.handlersMap[p],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return y.receivers=[],y})();function fa(y="",h=10){let p="";for(let w=0;w<h;w++)p+=Math.floor(10*Math.random());return y+p}class kl{constructor(h){this.target=h,this.handlers=new Set}removeMessageHandler(h){h.messageChannel&&(h.messageChannel.port1.removeEventListener("message",h.onMessage),h.messageChannel.port1.close()),this.handlers.delete(h)}_send(h,p,w=50){var S=this;return(0,m.Z)(function*(){const N=typeof MessageChannel<"u"?new MessageChannel:null;if(!N)throw new Error("connection_unavailable");let W,ue;return new Promise((Le,Qe)=>{const mt=fa("",20);N.port1.start();const gt=setTimeout(()=>{Qe(new Error("unsupported_event"))},w);ue={messageChannel:N,onMessage(qn){const is=qn;if(is.data.eventId===mt)switch(is.data.status){case"ack":clearTimeout(gt),W=setTimeout(()=>{Qe(new Error("timeout"))},3e3);break;case"done":clearTimeout(W),Le(is.data.response);break;default:clearTimeout(gt),clearTimeout(W),Qe(new Error("invalid_response"))}}},S.handlers.add(ue),N.port1.addEventListener("message",ue.onMessage),S.target.postMessage({eventType:h,eventId:mt,data:p},[N.port2])}).finally(()=>{ue&&S.removeMessageHandler(ue)})})()}}function xn(){return window}function mu(){return typeof xn().WorkerGlobalScope<"u"&&"function"==typeof xn().importScripts}function pa(){return(pa=(0,m.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const As="firebaseLocalStorageDb",xs="firebaseLocalStorage",Pl="fbase_key";class so{constructor(h){this.request=h}toPromise(){return new Promise((h,p)=>{this.request.addEventListener("success",()=>{h(this.request.result)}),this.request.addEventListener("error",()=>{p(this.request.error)})})}}function ga(y,h){return y.transaction([xs],h?"readwrite":"readonly").objectStore(xs)}function So(){const y=indexedDB.open(As,1);return new Promise((h,p)=>{y.addEventListener("error",()=>{p(y.error)}),y.addEventListener("upgradeneeded",()=>{const w=y.result;try{w.createObjectStore(xs,{keyPath:Pl})}catch(S){p(S)}}),y.addEventListener("success",(0,m.Z)(function*(){const w=y.result;w.objectStoreNames.contains(xs)?h(w):(w.close(),yield function ad(){const y=indexedDB.deleteDatabase(As);return new so(y).toPromise()}(),h(yield So()))}))})}function Yi(y,h,p){return Fl.apply(this,arguments)}function Fl(){return(Fl=(0,m.Z)(function*(y,h,p){const w=ga(y,!0).put({[Pl]:h,value:p});return new so(w).toPromise()})).apply(this,arguments)}function ma(){return(ma=(0,m.Z)(function*(y,h){const p=ga(y,!1).get(h),w=yield new so(p).toPromise();return void 0===w?null:w.value})).apply(this,arguments)}function oo(y,h){const p=ga(y,!0).delete(h);return new so(p).toPromise()}const Ao=(()=>{class y{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var p=this;return(0,m.Z)(function*(){return p.db||(p.db=yield So()),p.db})()}_withRetries(p){var w=this;return(0,m.Z)(function*(){let S=0;for(;;)try{const N=yield w._openDb();return yield p(N)}catch(N){if(S++>3)throw N;w.db&&(w.db.close(),w.db=void 0)}})()}initializeServiceWorkerMessaging(){var p=this;return(0,m.Z)(function*(){return mu()?p.initializeReceiver():p.initializeSender()})()}initializeReceiver(){var p=this;return(0,m.Z)(function*(){p.receiver=sd._getInstance(function _u(){return mu()?self:null}()),p.receiver._subscribe("keyChanged",function(){var w=(0,m.Z)(function*(S,N){return{keyProcessed:(yield p._poll()).includes(N.key)}});return function(S,N){return w.apply(this,arguments)}}()),p.receiver._subscribe("ping",function(){var w=(0,m.Z)(function*(S,N){return["keyChanged"]});return function(S,N){return w.apply(this,arguments)}}())})()}initializeSender(){var p=this;return(0,m.Z)(function*(){var w,S;if(p.activeServiceWorker=yield function io(){return pa.apply(this,arguments)}(),!p.activeServiceWorker)return;p.sender=new kl(p.activeServiceWorker);const N=yield p.sender._send("ping",{},800);!N||(null===(w=N[0])||void 0===w?void 0:w.fulfilled)&&(null===(S=N[0])||void 0===S?void 0:S.value.includes("keyChanged"))&&(p.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(p){var w=this;return(0,m.Z)(function*(){if(w.sender&&w.activeServiceWorker&&function yu(){var y;return(null===(y=navigator?.serviceWorker)||void 0===y?void 0:y.controller)||null}()===w.activeServiceWorker)try{yield w.sender._send("keyChanged",{key:p},w.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,m.Z)(function*(){try{if(!indexedDB)return!1;const p=yield So();return yield Yi(p,ro,"1"),yield oo(p,ro),!0}catch{}return!1})()}_withPendingWrite(p){var w=this;return(0,m.Z)(function*(){w.pendingWrites++;try{yield p()}finally{w.pendingWrites--}})()}_set(p,w){var S=this;return(0,m.Z)(function*(){return S._withPendingWrite((0,m.Z)(function*(){return yield S._withRetries(N=>Yi(N,p,w)),S.localCache[p]=w,S.notifyServiceWorker(p)}))})()}_get(p){var w=this;return(0,m.Z)(function*(){const S=yield w._withRetries(N=>function vu(y,h){return ma.apply(this,arguments)}(N,p));return w.localCache[p]=S,S})()}_remove(p){var w=this;return(0,m.Z)(function*(){return w._withPendingWrite((0,m.Z)(function*(){return yield w._withRetries(S=>oo(S,p)),delete w.localCache[p],w.notifyServiceWorker(p)}))})()}_poll(){var p=this;return(0,m.Z)(function*(){const w=yield p._withRetries(W=>{const ue=ga(W,!1).getAll();return new so(ue).toPromise()});if(!w)return[];if(0!==p.pendingWrites)return[];const S=[],N=new Set;for(const{fbase_key:W,value:ue}of w)N.add(W),JSON.stringify(p.localCache[W])!==JSON.stringify(ue)&&(p.notifyListeners(W,ue),S.push(W));for(const W of Object.keys(p.localCache))p.localCache[W]&&!N.has(W)&&(p.notifyListeners(W,null),S.push(W));return S})()}notifyListeners(p,w){this.localCache[p]=w;const S=this.listeners[p];if(S)for(const N of Array.from(S))N(w)}startPolling(){var p=this;this.stopPolling(),this.pollTimer=setInterval((0,m.Z)(function*(){return p._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(p,w){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[p]||(this.listeners[p]=new Set,this._get(p)),this.listeners[p].add(w)}_removeListener(p,w){this.listeners[p]&&(this.listeners[p].delete(w),0===this.listeners[p].size&&delete this.listeners[p]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return y.type="LOCAL",y})();function xo(y,h){return Xt(y,"POST","/v2/accounts/mfaSignIn:start",Ot(y,h))}function Ms(){return(Ms=(0,m.Z)(function*(y){return(yield Xt(y,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Ro(y){return new Promise((h,p)=>{const w=document.createElement("script");w.setAttribute("src",y),w.onload=h,w.onerror=S=>{const N=_e("internal-error");N.customData=S,p(N)},w.type="text/javascript",w.charset="UTF-8",function Mo(){var y,h;return null!==(h=null===(y=document.getElementsByTagName("head"))||void 0===y?void 0:y[0])&&void 0!==h?h:document}().appendChild(w)})}function Iu(y){return`__${y}${Math.floor(1e6*Math.random())}`}const ya=1e12;class on{constructor(h){this.auth=h,this.counter=ya,this._widgets=new Map}render(h,p){const w=this.counter;return this._widgets.set(w,new zp(h,this.auth.name,p||{})),this.counter++,w}reset(h){var p;const w=h||ya;null===(p=this._widgets.get(w))||void 0===p||p.delete(),this._widgets.delete(w)}getResponse(h){var p;return(null===(p=this._widgets.get(h||ya))||void 0===p?void 0:p.getResponse())||""}execute(h){var p=this;return(0,m.Z)(function*(){var w;return null===(w=p._widgets.get(h||ya))||void 0===w||w.execute(),""})()}}class zp{constructor(h,p,w){this.params=w,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const S="string"==typeof h?document.getElementById(h):h;U(S,"argument-error",{appName:p}),this.container=S,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Ay(y){const h=[],p="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let w=0;w<y;w++)h.push(p.charAt(Math.floor(Math.random()*p.length)));return h.join("")}(50);const{callback:h,"expired-callback":p}=this.params;if(h)try{h(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,p)try{p()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const qp=Iu("rcb"),xy=new tn(3e4,6e4);class Ph{constructor(){var h;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(h=xn().grecaptcha)||void 0===h||!h.render)}load(h,p=""){return U(function h0(y){return y.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(y)}(p),h,"argument-error"),this.shouldResolveImmediately(p)?Promise.resolve(xn().grecaptcha):new Promise((w,S)=>{const N=xn().setTimeout(()=>{S(_e(h,"network-request-failed"))},xy.get());xn()[qp]=()=>{xn().clearTimeout(N),delete xn()[qp];const ue=xn().grecaptcha;if(!ue)return void S(_e(h,"internal-error"));const Le=ue.render;ue.render=(Qe,mt)=>{const gt=Le(Qe,mt);return this.counter++,gt},this.hostLanguage=p,w(ue)},Ro(`https://www.google.com/recaptcha/api.js??${(0,O.xO)({onload:qp,render:"explicit",hl:p})}`).catch(()=>{clearTimeout(N),S(_e(h,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(h){var p;return!(null===(p=xn().grecaptcha)||void 0===p||!p.render)&&(h===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Vl{load(h){return(0,m.Z)(function*(){return new on(h)})()}clearedOneInstance(){}}const Ry="recaptcha",Ny={theme:"light",type:"image"};class tr{constructor(h,p=Object.assign({},Ny),w){this.parameters=p,this.type=Ry,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=gn(w),this.isInvisible="invisible"===this.parameters.size,U(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const S="string"==typeof h?document.getElementById(h):h;U(S,this.auth,"argument-error"),this.container=S,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Vl:new Ph,this.validateStartingState()}verify(){var h=this;return(0,m.Z)(function*(){h.assertNotDestroyed();const p=yield h.render(),w=h.getAssertedRecaptcha();return w.getResponse(p)||new Promise(N=>{const W=ue=>{!ue||(h.tokenChangeListeners.delete(W),N(ue))};h.tokenChangeListeners.add(W),h.isInvisible&&w.execute(p)})})()}render(){try{this.assertNotDestroyed()}catch(h){return Promise.reject(h)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(h=>{throw this.renderPromise=null,h})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(h=>{this.container.removeChild(h)})}validateStartingState(){U(!this.parameters.sitekey,this.auth,"argument-error"),U(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),U(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(h){return p=>{if(this.tokenChangeListeners.forEach(w=>w(p)),"function"==typeof h)h(p);else if("string"==typeof h){const w=xn()[h];"function"==typeof w&&w(p)}}}assertNotDestroyed(){U(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var h=this;return(0,m.Z)(function*(){if(yield h.init(),!h.widgetId){let p=h.container;if(!h.isInvisible){const w=document.createElement("div");p.appendChild(w),p=w}h.widgetId=h.getAssertedRecaptcha().render(p,h.parameters)}return h.widgetId})()}init(){var h=this;return(0,m.Z)(function*(){U(dt()&&!mu(),h.auth,"internal-error"),yield function zt(){let y=null;return new Promise(h=>{"complete"!==document.readyState?(y=()=>h(),window.addEventListener("load",y)):h()}).catch(h=>{throw y&&window.removeEventListener("load",y),h})}(),h.recaptcha=yield h._recaptchaLoader.load(h.auth,h.auth.languageCode||void 0);const p=yield function Gr(y){return Ms.apply(this,arguments)}(h.auth);U(p,h.auth,"internal-error"),h.parameters.sitekey=p})()}getAssertedRecaptcha(){return U(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class cr{constructor(h,p){this.verificationId=h,this.onConfirmation=p}confirm(h){const p=Cs._fromVerification(this.verificationId,h);return this.onConfirmation(p)}}function bu(){return(bu=(0,m.Z)(function*(y,h,p){const w=gn(y),S=yield wi(w,h,(0,O.m9)(p));return new cr(S,N=>yn(w,N))})).apply(this,arguments)}function vi(){return(vi=(0,m.Z)(function*(y,h,p){const w=(0,O.m9)(y);yield jt(!1,w,"phone");const S=yield wi(w.auth,h,(0,O.m9)(p));return new cr(S,N=>ru(w,N))})).apply(this,arguments)}function Oo(){return(Oo=(0,m.Z)(function*(y,h,p){const w=(0,O.m9)(y),S=yield wi(w.auth,h,(0,O.m9)(p));return new cr(S,N=>iu(w,N))})).apply(this,arguments)}function wi(y,h,p){return Ji.apply(this,arguments)}function Ji(){return(Ji=(0,m.Z)(function*(y,h,p){var w;const S=yield p.verify();try{let N;if(U("string"==typeof S,y,"argument-error"),U(p.type===Ry,y,"argument-error"),N="string"==typeof h?{phoneNumber:h}:h,"session"in N){const W=N.session;if("phoneNumber"in N)return U("enroll"===W.type,y,"internal-error"),(yield fu(y,{idToken:W.credential,phoneEnrollmentInfo:{phoneNumber:N.phoneNumber,recaptchaToken:S}})).phoneSessionInfo.sessionInfo;{U("signin"===W.type,y,"internal-error");const ue=(null===(w=N.multiFactorHint)||void 0===w?void 0:w.uid)||N.multiFactorUid;return U(ue,y,"missing-multi-factor-info"),(yield xo(y,{mfaPendingCredential:W.credential,mfaEnrollmentId:ue,phoneSignInInfo:{recaptchaToken:S}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:W}=yield Up(y,{phoneNumber:N.phoneNumber,recaptchaToken:S});return W}}finally{p._reset()}})).apply(this,arguments)}function pt(){return(pt=(0,m.Z)(function*(y,h){yield Ys((0,O.m9)(y),h)})).apply(this,arguments)}let Du=(()=>{class y{constructor(p){this.providerId=y.PROVIDER_ID,this.auth=gn(p)}verifyPhoneNumber(p,w){return wi(this.auth,p,(0,O.m9)(w))}static credential(p,w){return Cs._fromVerification(p,w)}static credentialFromResult(p){return y.credentialFromTaggedObject(p)}static credentialFromError(p){return y.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{phoneNumber:w,temporaryProof:S}=p;return w&&S?Cs._fromTokenResponse(w,S):null}}return y.PROVIDER_ID="phone",y.PHONE_SIGN_IN_METHOD="phone",y})();function uo(y,h){return h?ie(h):(U(y._popupRedirectResolver,y,"argument-error"),y._popupRedirectResolver)}class _a extends ar{constructor(h){super("custom","custom"),this.params=h}_getIdTokenResponse(h){return Gn(h,this._buildIdpRequest())}_linkToIdToken(h,p){return Gn(h,this._buildIdpRequest(p))}_getReauthenticationResolver(h){return Gn(h,this._buildIdpRequest())}_buildIdpRequest(h){const p={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return h&&(p.idToken=h),p}}function Mr(y){return yi(y.auth,new _a(y),y.bypassAuthState)}function va(y){const{auth:h,user:p}=y;return U(p,h,"internal-error"),Qs(p,new _a(y),y.bypassAuthState)}function Xi(y){return Ri.apply(this,arguments)}function Ri(){return(Ri=(0,m.Z)(function*(y){const{auth:h,user:p}=y;return U(p,h,"internal-error"),Ys(p,new _a(y),y.bypassAuthState)})).apply(this,arguments)}class Rr{constructor(h,p,w,S,N=!1){this.auth=h,this.resolver=w,this.user=S,this.bypassAuthState=N,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(p)?p:[p]}execute(){var h=this;return new Promise(function(){var p=(0,m.Z)(function*(w,S){h.pendingPromise={resolve:w,reject:S};try{h.eventManager=yield h.resolver._initialize(h.auth),yield h.onExecution(),h.eventManager.registerConsumer(h)}catch(N){h.reject(N)}});return function(w,S){return p.apply(this,arguments)}}())}onAuthEvent(h){var p=this;return(0,m.Z)(function*(){const{urlResponse:w,sessionId:S,postBody:N,tenantId:W,error:ue,type:Le}=h;if(ue)return void p.reject(ue);const Qe={auth:p.auth,requestUri:w,sessionId:S,tenantId:W||void 0,postBody:N||void 0,user:p.user,bypassAuthState:p.bypassAuthState};try{p.resolve(yield p.getIdpTask(Le)(Qe))}catch(mt){p.reject(mt)}})()}onError(h){this.reject(h)}getIdpTask(h){switch(h){case"signInViaPopup":case"signInViaRedirect":return Mr;case"linkViaPopup":case"linkViaRedirect":return Xi;case"reauthViaPopup":case"reauthViaRedirect":return va;default:xe(this.auth,"internal-error")}}resolve(h){Z(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(h),this.unregisterAndCleanUp()}reject(h){Z(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(h),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Bl=new tn(2e3,1e4);function wa(){return(wa=(0,m.Z)(function*(y,h,p){const w=gn(y);Be(y,h,Gi);const S=uo(w,p);return new qr(w,"signInViaPopup",h,S).executeNotNull()})).apply(this,arguments)}function ud(){return(ud=(0,m.Z)(function*(y,h,p){const w=(0,O.m9)(y);Be(w.auth,h,Gi);const S=uo(w.auth,p);return new qr(w.auth,"reauthViaPopup",h,S,w).executeNotNull()})).apply(this,arguments)}function Ea(){return(Ea=(0,m.Z)(function*(y,h,p){const w=(0,O.m9)(y);Be(w.auth,h,Gi);const S=uo(w.auth,p);return new qr(w.auth,"linkViaPopup",h,S,w).executeNotNull()})).apply(this,arguments)}let qr=(()=>{class y extends Rr{constructor(p,w,S,N,W){super(p,w,N,W),this.provider=S,this.authWindow=null,this.pollId=null,y.currentPopupAction&&y.currentPopupAction.cancel(),y.currentPopupAction=this}executeNotNull(){var p=this;return(0,m.Z)(function*(){const w=yield p.execute();return U(w,p.auth,"internal-error"),w})()}onExecution(){var p=this;return(0,m.Z)(function*(){Z(1===p.filter.length,"Popup operations only handle one event");const w=fa();p.authWindow=yield p.resolver._openPopup(p.auth,p.provider,p.filter[0],w),p.authWindow.associatedEvent=w,p.resolver._originValidation(p.auth).catch(S=>{p.reject(S)}),p.resolver._isIframeWebStorageSupported(p.auth,S=>{S||p.reject(_e(p.auth,"web-storage-unsupported"))}),p.pollUserCancellation()})()}get eventId(){var p;return(null===(p=this.authWindow)||void 0===p?void 0:p.associatedEvent)||null}cancel(){this.reject(_e(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,y.currentPopupAction=null}pollUserCancellation(){const p=()=>{var w,S;this.pollId=null!==(S=null===(w=this.authWindow)||void 0===w?void 0:w.window)&&void 0!==S&&S.closed?window.setTimeout(()=>{this.pollId=null,this.reject(_e(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(p,Bl.get())};p()}}return y.currentPopupAction=null,y})();const an=new Map;class Ni extends Rr{constructor(h,p,w=!1){super(h,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],p,void 0,w),this.eventId=null}execute(){var h=()=>super.execute,p=this;return(0,m.Z)(function*(){let w=an.get(p.auth._key());if(!w){try{const N=(yield function Tu(y,h){return Rs.apply(this,arguments)}(p.resolver,p.auth))?yield h().call(p):null;w=()=>Promise.resolve(N)}catch(S){w=()=>Promise.reject(S)}an.set(p.auth._key(),w)}return p.bypassAuthState||an.set(p.auth._key(),()=>Promise.resolve(null)),w()})()}onAuthEvent(h){var p=()=>super.onAuthEvent,w=this;return(0,m.Z)(function*(){if("signInViaRedirect"===h.type)return p().call(w,h);if("unknown"!==h.type){if(h.eventId){const S=yield w.auth._redirectUserForId(h.eventId);if(S)return w.user=S,p().call(w,h);w.resolve(null)}}else w.resolve(null)})()}onExecution(){return(0,m.Z)(function*(){})()}cleanUp(){}}function Rs(){return(Rs=(0,m.Z)(function*(y,h){const p=$l(h),w=es(y);if(!(yield w._isAvailable()))return!1;const S="true"===(yield w._get(p));return yield w._remove(p),S})).apply(this,arguments)}function Su(y,h){return Oi.apply(this,arguments)}function Oi(){return(Oi=(0,m.Z)(function*(y,h){return es(y)._set($l(h),"true")})).apply(this,arguments)}function lo(y,h){an.set(y._key(),h)}function es(y){return ie(y._redirectPersistence)}function $l(y){return $n("pendingRedirect",y.config.apiKey,y.name)}function D(){return(D=(0,m.Z)(function*(y,h,p){const w=gn(y);Be(y,h,Gi);const S=uo(w,p);return yield Su(S,w),S._openRedirect(w,h,"signInViaRedirect")})).apply(this,arguments)}function F(){return(F=(0,m.Z)(function*(y,h,p){const w=(0,O.m9)(y);Be(w.auth,h,Gi);const S=uo(w.auth,p);yield Su(S,w.auth);const N=yield ht(w);return S._openRedirect(w.auth,h,"reauthViaRedirect",N)})).apply(this,arguments)}function De(){return(De=(0,m.Z)(function*(y,h,p){const w=(0,O.m9)(y);Be(w.auth,h,Gi);const S=uo(w.auth,p);yield jt(!1,w,h.providerId),yield Su(S,w.auth);const N=yield ht(w);return S._openRedirect(w.auth,h,"linkViaRedirect",N)})).apply(this,arguments)}function ut(){return(ut=(0,m.Z)(function*(y,h){return yield gn(y)._initializationPromise,yt(y,h,!1)})).apply(this,arguments)}function yt(y,h){return St.apply(this,arguments)}function St(){return(St=(0,m.Z)(function*(y,h,p=!1){const w=gn(y),S=uo(w,h),W=yield new Ni(w,S,p).execute();return W&&!p&&(delete W.user._redirectEventId,yield w._persistUserIfCurrent(W.user),yield w._setRedirectUser(null,h)),W})).apply(this,arguments)}function ht(y){return mn.apply(this,arguments)}function mn(){return(mn=(0,m.Z)(function*(y){const h=fa(`${y.uid}:::`);return y._redirectEventId=h,yield y.auth._setRedirectUser(y),yield y.auth._persistUserIfCurrent(y),h})).apply(this,arguments)}class Ns{constructor(h){this.auth=h,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(h){this.consumers.add(h),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,h)&&(this.sendToConsumer(this.queuedRedirectEvent,h),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(h){this.consumers.delete(h)}onEvent(h){if(this.hasEventBeenHandled(h))return!1;let p=!1;return this.consumers.forEach(w=>{this.isEventForConsumer(h,w)&&(p=!0,this.sendToConsumer(h,w),this.saveEventToCache(h))}),this.hasHandledPotentialRedirect||!function co(y){switch(y.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Os(y);default:return!1}}(h)||(this.hasHandledPotentialRedirect=!0,p||(this.queuedRedirectEvent=h,p=!0)),p}sendToConsumer(h,p){var w;if(h.error&&!Os(h)){const S=(null===(w=h.error.code)||void 0===w?void 0:w.split("auth/")[1])||"internal-error";p.onError(_e(this.auth,S))}else p.onAuthEvent(h)}isEventForConsumer(h,p){const w=null===p.eventId||!!h.eventId&&h.eventId===p.eventId;return p.filter.includes(h.type)&&w}hasEventBeenHandled(h){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(ts(h))}saveEventToCache(h){this.cachedEventUids.add(ts(h)),this.lastProcessedEventTime=Date.now()}}function ts(y){return[y.type,y.eventId,y.sessionId,y.tenantId].filter(h=>h).join("-")}function Os({type:y,error:h}){return"unknown"===y&&"auth/no-auth-event"===h?.code}function ns(y){return bn.apply(this,arguments)}function bn(){return(bn=(0,m.Z)(function*(y,h={}){return Xt(y,"GET","/v1/projects",h)})).apply(this,arguments)}const Wr=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ks=/^https?/;function Oy(){return(Oy=(0,m.Z)(function*(y){if(y.config.emulator)return;const{authorizedDomains:h}=yield ns(y);for(const p of h)try{if(ky(p))return}catch{}xe(y,"unauthorized-domain")})).apply(this,arguments)}function ky(y){const h=ke(),{protocol:p,hostname:w}=new URL(h);if(y.startsWith("chrome-extension://")){const W=new URL(y);return""===W.hostname&&""===w?"chrome-extension:"===p&&y.replace("chrome-extension://","")===h.replace("chrome-extension://",""):"chrome-extension:"===p&&W.hostname===w}if(!ks.test(p))return!1;if(Wr.test(y))return w===y;const S=y.replace(/\./g,"\\.");return new RegExp("^(.+\\."+S+"|"+S+")$","i").test(w)}const Kp=new tn(3e4,6e4);function dd(){const y=xn().___jsl;if(y?.H)for(const h of Object.keys(y.H))if(y.H[h].r=y.H[h].r||[],y.H[h].L=y.H[h].L||[],y.H[h].r=[...y.H[h].L],y.CP)for(let p=0;p<y.CP.length;p++)y.CP[p]=null}let Hl=null;function Vh(y){return Hl=Hl||function Ia(y){return new Promise((h,p)=>{var w,S,N;function W(){dd(),gapi.load("gapi.iframes",{callback:()=>{h(gapi.iframes.getContext())},ontimeout:()=>{dd(),p(_e(y,"network-request-failed"))},timeout:Kp.get()})}if(null!==(S=null===(w=xn().gapi)||void 0===w?void 0:w.iframes)&&void 0!==S&&S.Iframe)h(gapi.iframes.getContext());else{if(null===(N=xn().gapi)||void 0===N||!N.load){const ue=Iu("iframefcb");return xn()[ue]=()=>{gapi.load?W():p(_e(y,"network-request-failed"))},Ro(`https://apis.google.com/js/api.js?onload=${ue}`).catch(Le=>p(Le))}W()}}).catch(h=>{throw Hl=null,h})}(y),Hl}const Zp=new tn(5e3,15e3),ND={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Yp=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function f0(y){const h=y.config;U(h.authDomain,y,"auth-domain-config-required");const p=h.emulator?Tn(h,"emulator/auth/iframe"):`https://${y.config.authDomain}/__/auth/iframe`,w={apiKey:h.apiKey,appName:y.name,v:oe.SDK_VERSION},S=Yp.get(y.config.apiHost);S&&(w.eid=S);const N=y._getFrameworks();return N.length&&(w.fw=N.join(",")),`${p}?${(0,O.xO)(w).slice(1)}`}function Gl(){return Gl=(0,m.Z)(function*(y){const h=yield Vh(y),p=xn().gapi;return U(p,y,"internal-error"),h.open({where:document.body,url:f0(y),messageHandlersFilter:p.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:ND,dontclear:!0},w=>new Promise(function(){var S=(0,m.Z)(function*(N,W){yield w.restyle({setHideOnLeave:!1});const ue=_e(y,"network-request-failed"),Le=xn().setTimeout(()=>{W(ue)},Zp.get());function Qe(){xn().clearTimeout(Le),N(w)}w.ping(Qe).then(Qe,()=>{W(ue)})});return function(N,W){return S.apply(this,arguments)}}()))}),Gl.apply(this,arguments)}const Uh={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Da{constructor(h){this.window=h,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function xu(y,h,p,w,S,N){U(y.config.authDomain,y,"auth-domain-config-required"),U(y.config.apiKey,y,"invalid-api-key");const W={apiKey:y.config.apiKey,appName:y.name,authType:p,redirectUrl:w,v:oe.SDK_VERSION,eventId:S};if(h instanceof Gi){h.setDefaultLanguage(y.languageCode),W.providerId=h.providerId||"",(0,O.xb)(h.getCustomParameters())||(W.customParameters=JSON.stringify(h.getCustomParameters()));for(const[Le,Qe]of Object.entries(N||{}))W[Le]=Qe}if(h instanceof zi){const Le=h.getScopes().filter(Qe=>""!==Qe);Le.length>0&&(W.scopes=Le.join(","))}y.tenantId&&(W.tid=y.tenantId);const ue=W;for(const Le of Object.keys(ue))void 0===ue[Le]&&delete ue[Le];return`${function Qp({config:y}){return y.emulator?Tn(y,"emulator/auth/handler"):`https://${y.authDomain}/__/auth/handler`}(y)}?${(0,O.xO)(ue).slice(1)}`}const ql="webStorageSupport";class rs extends class Xp{constructor(h){this.factorId=h}_process(h,p,w){switch(p.type){case"enroll":return this._finalizeEnroll(h,p.credential,w);case"signin":return this._finalizeSignIn(h,p.credential);default:return ge("unexpected MultiFactorSessionType")}}}{constructor(h){super("phone"),this.credential=h}static _fromCredential(h){return new rs(h)}_finalizeEnroll(h,p,w){return function pu(y,h){return Xt(y,"POST","/v2/accounts/mfaEnrollment:finalize",Ot(y,h))}(h,{idToken:p,displayName:w,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(h,p){return function Eu(y,h){return Xt(y,"POST","/v2/accounts/mfaSignIn:finalize",Ot(y,h))}(h,{mfaPendingCredential:p,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Mu=(()=>{class y{constructor(){}static assertion(p){return rs._fromCredential(p)}}return y.FACTOR_ID="phone",y})();var hd="@firebase/auth";class OD{constructor(h){this.auth=h,this.internalListeners=new Map}getUid(){var h;return this.assertAuthConfigured(),(null===(h=this.auth.currentUser)||void 0===h?void 0:h.uid)||null}getToken(h){var p=this;return(0,m.Z)(function*(){return p.assertAuthConfigured(),yield p.auth._initializationPromise,p.auth.currentUser?{accessToken:yield p.auth.currentUser.getIdToken(h)}:null})()}addAuthTokenListener(h){if(this.assertAuthConfigured(),this.internalListeners.has(h))return;const p=this.auth.onIdTokenChanged(w=>{var S;h((null===(S=w)||void 0===S?void 0:S.stsTokenManager.accessToken)||null)});this.internalListeners.set(h,p),this.updateProactiveRefresh()}removeAuthTokenListener(h){this.assertAuthConfigured();const p=this.internalListeners.get(h);!p||(this.internalListeners.delete(h),p(),this.updateProactiveRefresh())}assertAuthConfigured(){U(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function ki(){return window}function Bh(){return(Bh=(0,m.Z)(function*(y,h,p){var w;const{BuildInfo:S}=ki();Z(h.sessionId,"AuthEvent did not contain a session ID");const N=yield $h(h.sessionId),W={};return Yt()?W.ibi=S.packageName:Nn()?W.apn=S.packageName:xe(y,"operation-not-supported-in-this-environment"),S.displayName&&(W.appDisplayName=S.displayName),W.sessionId=N,xu(y,p,h.type,void 0,null!==(w=h.eventId)&&void 0!==w?w:void 0,W)})).apply(this,arguments)}function ho(){return(ho=(0,m.Z)(function*(y){const{BuildInfo:h}=ki(),p={};Yt()?p.iosBundleId=h.packageName:Nn()?p.androidPackageName=h.packageName:xe(y,"operation-not-supported-in-this-environment"),yield ns(y,p)})).apply(this,arguments)}function Po(){return(Po=(0,m.Z)(function*(y,h,p){const{cordova:w}=ki();let S=()=>{};try{yield new Promise((N,W)=>{let ue=null;function Le(){var gt;N();const qn=null===(gt=w.plugins.browsertab)||void 0===gt?void 0:gt.close;"function"==typeof qn&&qn(),"function"==typeof p?.close&&p.close()}function Qe(){ue||(ue=window.setTimeout(()=>{W(_e(y,"redirect-cancelled-by-user"))},2e3))}function mt(){"visible"===document?.visibilityState&&Qe()}h.addPassiveListener(Le),document.addEventListener("resume",Qe,!1),Nn()&&document.addEventListener("visibilitychange",mt,!1),S=()=>{h.removePassiveListener(Le),document.removeEventListener("resume",Qe,!1),document.removeEventListener("visibilitychange",mt,!1),ue&&window.clearTimeout(ue)}})}finally{S()}})).apply(this,arguments)}function $h(y){return gd.apply(this,arguments)}function gd(){return(gd=(0,m.Z)(function*(y){const h=PD(y),p=yield crypto.subtle.digest("SHA-256",h);return Array.from(new Uint8Array(p)).map(S=>S.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function PD(y){if(Z(/[0-9a-zA-Z]+/.test(y),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(y);const h=new ArrayBuffer(y.length),p=new Uint8Array(h);for(let w=0;w<y.length;w++)p[w]=y.charCodeAt(w);return p}!function kD(y){(0,oe._registerComponent)(new le.wA("auth",(h,{options:p})=>{const w=h.getProvider("app").getImmediate(),S=h.getProvider("heartbeat"),{apiKey:N,authDomain:W}=w.options;return((ue,Le)=>{U(N&&!N.includes(":"),"invalid-api-key",{appName:ue.name}),U(!W?.includes(":"),"argument-error",{appName:ue.name});const Qe={apiKey:N,authDomain:W,clientPlatform:y,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ws(y)},mt=new Rt(ue,Le,Qe);return function Pe(y,h){const p=h?.persistence||[],w=(Array.isArray(p)?p:[p]).map(ie);h?.errorMap&&y._updateErrorMap(h.errorMap),y._initializeWithPersistence(w,h?.popupRedirectResolver)}(mt,p),mt})(w,S)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((h,p,w)=>{h.getProvider("auth-internal").initialize()})),(0,oe._registerComponent)(new le.wA("auth-internal",h=>{const p=gn(h.getProvider("auth").getImmediate());return new OD(p)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,oe.registerVersion)(hd,"0.20.6",function m0(y){switch(y){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(y)),(0,oe.registerVersion)(hd,"0.20.6","esm2017")}("Browser");class Uy extends Ns{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(h=>{this.resolveInialized=h})}addPassiveListener(h){this.passiveListeners.add(h)}removePassiveListener(h){this.passiveListeners.delete(h)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(h){return this.resolveInialized(),this.passiveListeners.forEach(p=>p(h)),super.onEvent(h)}initialized(){var h=this;return(0,m.Z)(function*(){yield h.initPromise})()}}function md(y){return Hh.apply(this,arguments)}function Hh(){return(Hh=(0,m.Z)(function*(y){const h=yield og()._get(Gh(y));return h&&(yield og()._remove(Gh(y))),h})).apply(this,arguments)}function sg(){const y=[],h="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let p=0;p<20;p++){const w=Math.floor(Math.random()*h.length);y.push(h.charAt(w))}return y.join("")}function og(){return ie(ca)}function Gh(y){return $n("authEvent",y.config.apiKey,y.name)}function Ru(y){if(!y?.includes("?"))return{};const[h,...p]=y.split("?");return(0,O.zd)(p.join("?"))}function lg(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:_e("no-auth-event")}}function Ql(){var y;return(null===(y=self?.location)||void 0===y?void 0:y.protocol)||null}function zh(y=(0,O.z$)()){return!("file:"!==Ql()&&"ionic:"!==Ql()&&"capacitor:"!==Ql()||!y.toLowerCase().match(/iphone|ipad|ipod|android/))}function Hy(){try{const y=self.localStorage,h=fa();if(y)return y.setItem(h,"1"),y.removeItem(h),!function $y(y=(0,O.z$)()){return function dg(){return(0,O.w1)()&&11===document?.documentMode}()||function hg(y=(0,O.z$)()){return/Edge\/\d+/.test(y)}(y)}()||(0,O.hl)()}catch{return Fo()&&(0,O.hl)()}return!1}function Fo(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Jl(){return(function By(){return"http:"===Ql()||"https:"===Ql()}()||(0,O.ru)()||zh())&&!function jy(){return(0,O.b$)()||(0,O.UG)()}()&&Hy()&&!Fo()}function fg(){return zh()&&typeof document<"u"}function _d(){return(_d=(0,m.Z)(function*(){return!!fg()&&new Promise(y=>{const h=setTimeout(()=>{y(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(h),y(!0)})})})).apply(this,arguments)}const ui={LOCAL:"local",NONE:"none",SESSION:"session"},Sa=U,Xl="persistence";function vd(y){return ec.apply(this,arguments)}function ec(){return(ec=(0,m.Z)(function*(y){yield y._initializationPromise;const h=Wh(),p=$n(Xl,y.config.apiKey,y.name);h&&h.setItem(p,y._getPersistence())})).apply(this,arguments)}function Wh(){var y;try{return(null===(y=function pg(){return typeof window<"u"?window:null}())||void 0===y?void 0:y.sessionStorage)||null}catch{return null}}const fo=U;class Lo{constructor(){this.browserResolver=ie(class Jp{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Mi,this._completeRedirectFn=yt,this._overrideRedirectResult=lo}_openPopup(h,p,w,S){var N=this;return(0,m.Z)(function*(){var W;Z(null===(W=N.eventManagers[h._key()])||void 0===W?void 0:W.manager,"_initialize() not called before _openPopup()");const ue=xu(h,p,w,ke(),S);return function Ca(y,h,p,w=500,S=600){const N=Math.max((window.screen.availHeight-S)/2,0).toString(),W=Math.max((window.screen.availWidth-w)/2,0).toString();let ue="";const Le=Object.assign(Object.assign({},Uh),{width:w.toString(),height:S.toString(),top:N,left:W}),Qe=(0,O.z$)().toLowerCase();p&&(ue=Ti(Qe)?"_blank":p),fn(Qe)&&(h=h||"http://localhost",Le.scrollbars="yes");const mt=Object.entries(Le).reduce((qn,[is,Ou])=>`${qn}${is}=${Ou},`,"");if(function gi(y=(0,O.z$)()){var h;return Yt(y)&&!(null===(h=window.navigator)||void 0===h||!h.standalone)}(Qe)&&"_self"!==ue)return function zl(y,h){const p=document.createElement("a");p.href=y,p.target=h;const w=document.createEvent("MouseEvent");w.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),p.dispatchEvent(w)}(h||"",ue),new Da(null);const gt=window.open(h||"",ue,mt);U(gt,y,"popup-blocked");try{gt.focus()}catch{}return new Da(gt)}(h,ue,fa())})()}_openRedirect(h,p,w,S){var N=this;return(0,m.Z)(function*(){return yield N._originValidation(h),function _i(y){xn().location.href=y}(xu(h,p,w,ke(),S)),new Promise(()=>{})})()}_initialize(h){const p=h._key();if(this.eventManagers[p]){const{manager:S,promise:N}=this.eventManagers[p];return S?Promise.resolve(S):(Z(N,"If manager is not set, promise should be"),N)}const w=this.initAndGetManager(h);return this.eventManagers[p]={promise:w},w.catch(()=>{delete this.eventManagers[p]}),w}initAndGetManager(h){var p=this;return(0,m.Z)(function*(){const w=yield function Fy(y){return Gl.apply(this,arguments)}(h),S=new Ns(h);return w.register("authEvent",N=>(U(N?.authEvent,h,"invalid-auth-event"),{status:S.onEvent(N.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),p.eventManagers[h._key()]={manager:S},p.iframes[h._key()]=w,S})()}_isIframeWebStorageSupported(h,p){this.iframes[h._key()].send(ql,{type:ql},S=>{var N;const W=null===(N=S?.[0])||void 0===N?void 0:N[ql];void 0!==W&&p(!!W),xe(h,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(h){const p=h._key();return this.originValidationPromises[p]||(this.originValidationPromises[p]=function Lh(y){return Oy.apply(this,arguments)}(h)),this.originValidationPromises[p]}get _shouldInitProactively(){return zs()||Rn()||Yt()}}),this.cordovaResolver=ie(class ag{constructor(){this._redirectPersistence=Mi,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=yt,this._overrideRedirectResult=lo}_initialize(h){var p=this;return(0,m.Z)(function*(){const w=h._key();let S=p.eventManagers.get(w);return S||(S=new Uy(h),p.eventManagers.set(w,S),p.attachCallbackListeners(h,S)),S})()}_openPopup(h){xe(h,"operation-not-supported-in-this-environment")}_openRedirect(h,p,w,S){var N=this;return(0,m.Z)(function*(){!function ng(y){var h,p,w,S,N,W,ue,Le,Qe,mt;const gt=ki();U("function"==typeof(null===(h=gt?.universalLinks)||void 0===h?void 0:h.subscribe),y,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),U(typeof(null===(p=gt?.BuildInfo)||void 0===p?void 0:p.packageName)<"u",y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),U("function"==typeof(null===(N=null===(S=null===(w=gt?.cordova)||void 0===w?void 0:w.plugins)||void 0===S?void 0:S.browsertab)||void 0===N?void 0:N.openUrl),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),U("function"==typeof(null===(Le=null===(ue=null===(W=gt?.cordova)||void 0===W?void 0:W.plugins)||void 0===ue?void 0:ue.browsertab)||void 0===Le?void 0:Le.isAvailable),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),U("function"==typeof(null===(mt=null===(Qe=gt?.cordova)||void 0===Qe?void 0:Qe.InAppBrowser)||void 0===mt?void 0:mt.open),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(h);const W=yield N._initialize(h);yield W.initialized(),W.resetRedirect(),function jl(){an.clear()}(),yield N._originValidation(h);const ue=function rg(y,h,p=null){return{type:h,eventId:p,urlResponse:null,sessionId:sg(),postBody:null,tenantId:y.tenantId,error:_e(y,"no-auth-event")}}(h,w,S);yield function Kl(y,h){return og()._set(Gh(y),h)}(h,ue);const Le=yield function pd(y,h,p){return Bh.apply(this,arguments)}(h,ue,p),Qe=yield function tg(y){const{cordova:h}=ki();return new Promise(p=>{h.plugins.browsertab.isAvailable(w=>{let S=null;w?h.plugins.browsertab.openUrl(y):S=h.InAppBrowser.open(y,function ii(y=(0,O.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(y)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(y)}()?"_blank":"_system","location=yes"),p(S)})})}(Le);return function Ps(y,h,p){return Po.apply(this,arguments)}(h,W,Qe)})()}_isIframeWebStorageSupported(h,p){throw new Error("Method not implemented.")}_originValidation(h){const p=h._key();return this.originValidationPromises[p]||(this.originValidationPromises[p]=function jh(y){return ho.apply(this,arguments)}(h)),this.originValidationPromises[p]}attachCallbackListeners(h,p){const{universalLinks:w,handleOpenURL:S,BuildInfo:N}=ki(),W=setTimeout((0,m.Z)(function*(){yield md(h),p.onEvent(lg())}),500),ue=function(){var mt=(0,m.Z)(function*(gt){clearTimeout(W);const qn=yield md(h);let is=null;qn&&gt?.url&&(is=function ig(y,h){var p,w;const S=function yd(y){const h=Ru(y),p=h.link?decodeURIComponent(h.link):void 0,w=Ru(p).link,S=h.deep_link_id?decodeURIComponent(h.deep_link_id):void 0;return Ru(S).link||S||w||p||y}(h);if(S.includes("/__/auth/callback")){const N=Ru(S),W=N.firebaseError?function Zl(y){try{return JSON.parse(y)}catch{return null}}(decodeURIComponent(N.firebaseError)):null,ue=null===(w=null===(p=W?.code)||void 0===p?void 0:p.split("auth/"))||void 0===w?void 0:w[1],Le=ue?_e(ue):null;return Le?{type:y.type,eventId:y.eventId,tenantId:y.tenantId,error:Le,urlResponse:null,sessionId:null,postBody:null}:{type:y.type,eventId:y.eventId,tenantId:y.tenantId,sessionId:y.sessionId,urlResponse:S,postBody:null}}return null}(qn,gt.url)),p.onEvent(is||lg())});return function(qn){return mt.apply(this,arguments)}}();typeof w<"u"&&"function"==typeof w.subscribe&&w.subscribe(null,ue);const Le=S,Qe=`${N.packageName.toLowerCase()}://`;ki().handleOpenURL=function(){var mt=(0,m.Z)(function*(gt){if(gt.toLowerCase().startsWith(Qe)&&ue({url:gt}),"function"==typeof Le)try{Le(gt)}catch(qn){console.error(qn)}});return function(gt){return mt.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=Mi,this._completeRedirectFn=yt,this._overrideRedirectResult=lo}_initialize(h){var p=this;return(0,m.Z)(function*(){return yield p.selectUnderlyingResolver(),p.assertedUnderlyingResolver._initialize(h)})()}_openPopup(h,p,w,S){var N=this;return(0,m.Z)(function*(){return yield N.selectUnderlyingResolver(),N.assertedUnderlyingResolver._openPopup(h,p,w,S)})()}_openRedirect(h,p,w,S){var N=this;return(0,m.Z)(function*(){return yield N.selectUnderlyingResolver(),N.assertedUnderlyingResolver._openRedirect(h,p,w,S)})()}_isIframeWebStorageSupported(h,p){this.assertedUnderlyingResolver._isIframeWebStorageSupported(h,p)}_originValidation(h){return this.assertedUnderlyingResolver._originValidation(h)}get _shouldInitProactively(){return fg()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return fo(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var h=this;return(0,m.Z)(function*(){if(h.underlyingResolver)return;const p=yield function qh(){return _d.apply(this,arguments)}();h.underlyingResolver=p?h.cordovaResolver:h.browserResolver})()}}function Nu(y){return y.unwrap()}function Gy(y){return nc(y)}function nc(y){const{_tokenResponse:h}=y instanceof O.ZR?y.customData:y;if(!h)return null;if(!(y instanceof O.ZR)&&"temporaryProof"in h&&"phoneNumber"in h)return Du.credentialFromResult(y);const p=h.providerId;if(!p||"password"===p)return null;let w;switch(p){case"google.com":w=Ja;break;case"facebook.com":w=ea;break;case"github.com":w=yl;break;case"twitter.com":w=$r;break;default:const{oauthIdToken:S,oauthAccessToken:N,oauthTokenSecret:W,pendingToken:ue,nonce:Le}=h;return N||W||S||ue?ue?p.startsWith("saml.")?ta._create(p,ue):Hi._fromParams({providerId:p,signInMethod:p,pendingToken:ue,idToken:S,accessToken:N}):new Zs(p).credential({idToken:S,accessToken:N,rawNonce:Le}):null}return y instanceof O.ZR?w.credentialFromError(y):w.credentialFromResult(y)}function Fn(y,h){return h.catch(p=>{throw p instanceof O.ZR&&function Ed(y,h){var p,w;const S=null===(p=h.customData)||void 0===p?void 0:p._tokenResponse;if("auth/multi-factor-auth-required"===(null===(w=h)||void 0===w?void 0:w.code))h.resolver=new zy(y,function En(y,h){var p;const w=(0,O.m9)(y),S=h;return U(h.customData.operationType,w,"argument-error"),U(null===(p=S.customData._serverResponse)||void 0===p?void 0:p.mfaPendingCredential,w,"argument-error"),hu._fromError(w,S)}(y,h));else if(S){const N=nc(h),W=h;N&&(W.credential=N,W.tenantId=S.tenantId||void 0,W.email=S.email||void 0,W.phoneNumber=S.phoneNumber||void 0)}}(y,p),p}).then(p=>{const S=p.user;return{operationType:p.operationType,credential:Gy(p),additionalUserInfo:du(p),user:po.getOrCreate(S)}})}function Id(y,h){return Aa.apply(this,arguments)}function Aa(){return(Aa=(0,m.Z)(function*(y,h){const p=yield h;return{verificationId:p.verificationId,confirm:w=>Fn(y,p.confirm(w))}})).apply(this,arguments)}class zy{constructor(h,p){this.resolver=p,this.auth=function tc(y){return y.wrapped()}(h)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(h){return Fn(Nu(this.auth),this.resolver.resolveSignIn(h))}}class po{constructor(h){this._delegate=h,this.multiFactor=function To(y){const h=(0,O.m9)(y);return Co.has(h)||Co.set(h,kh._fromUser(h)),Co.get(h)}(h)}static getOrCreate(h){return po.USER_MAP.has(h)||po.USER_MAP.set(h,new po(h)),po.USER_MAP.get(h)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(h){return this._delegate.getIdTokenResult(h)}getIdToken(h){return this._delegate.getIdToken(h)}linkAndRetrieveDataWithCredential(h){return this.linkWithCredential(h)}linkWithCredential(h){var p=this;return(0,m.Z)(function*(){return Fn(p.auth,ru(p._delegate,h))})()}linkWithPhoneNumber(h,p){var w=this;return(0,m.Z)(function*(){return Id(w.auth,function zr(y,h,p){return vi.apply(this,arguments)}(w._delegate,h,p))})()}linkWithPopup(h){var p=this;return(0,m.Z)(function*(){return Fn(p.auth,function ld(y,h,p){return Ea.apply(this,arguments)}(p._delegate,h,Lo))})()}linkWithRedirect(h){var p=this;return(0,m.Z)(function*(){return yield vd(gn(p.auth)),function J(y,h,p){return function ae(y,h,p){return De.apply(this,arguments)}(y,h,p)}(p._delegate,h,Lo)})()}reauthenticateAndRetrieveDataWithCredential(h){return this.reauthenticateWithCredential(h)}reauthenticateWithCredential(h){var p=this;return(0,m.Z)(function*(){return Fn(p.auth,iu(p._delegate,h))})()}reauthenticateWithPhoneNumber(h,p){return Id(this.auth,function Ul(y,h,p){return Oo.apply(this,arguments)}(this._delegate,h,p))}reauthenticateWithPopup(h){return Fn(this.auth,function Wp(y,h,p){return ud.apply(this,arguments)}(this._delegate,h,Lo))}reauthenticateWithRedirect(h){var p=this;return(0,m.Z)(function*(){return yield vd(gn(p.auth)),function C(y,h,p){return function x(y,h,p){return F.apply(this,arguments)}(y,h,p)}(p._delegate,h,Lo)})()}sendEmailVerification(h){return function Tl(y,h){return ua.apply(this,arguments)}(this._delegate,h)}unlink(h){var p=this;return(0,m.Z)(function*(){return yield function xr(y,h){return eu.apply(this,arguments)}(p._delegate,h),p})()}updateEmail(h){return function Qc(y,h){return to((0,O.m9)(y),h,null)}(this._delegate,h)}updatePassword(h){return function eo(y,h){return to((0,O.m9)(y),null,h)}(this._delegate,h)}updatePhoneNumber(h){return function dr(y,h){return pt.apply(this,arguments)}(this._delegate,h)}updateProfile(h){return function xl(y,h){return Ml.apply(this,arguments)}(this._delegate,h)}verifyBeforeUpdateEmail(h,p){return function Sl(y,h,p){return uu.apply(this,arguments)}(this._delegate,h,p)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}po.USER_MAP=new WeakMap;const xa=U;let Ma=(()=>{class y{constructor(p,w){if(this.app=p,w.isInitialized())return this._delegate=w.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:S}=p.options;xa(S,"invalid-api-key",{appName:p.name}),xa(S,"invalid-api-key",{appName:p.name});const N=typeof window<"u"?Lo:void 0;this._delegate=w.initialize({options:{persistence:Kh(S,p.name),popupRedirectResolver:N}}),this._delegate._updateErrorMap(ve),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?po.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(p){this._delegate.languageCode=p}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(p){this._delegate.tenantId=p}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(p,w){!function ll(y,h,p){const w=gn(y);U(w._canInitEmulator,w,"emulator-config-failed"),U(/^https?:\/\//.test(h),w,"invalid-emulator-scheme");const S=!!p?.disableWarnings,N=Si(h),{host:W,port:ue}=function On(y){const h=Si(y),p=/(\/\/)?([^?#/]+)/.exec(y.substr(h.length));if(!p)return{host:"",port:null};const w=p[2].split("@").pop()||"",S=/^(\[[^\]]+\])(:|$)/.exec(w);if(S){const N=S[1];return{host:N,port:Es(w.substr(N.length+1))}}{const[N,W]=w.split(":");return{host:N,port:Es(W)}}}(h);w.config.emulator={url:`${N}//${W}${null===ue?"":`:${ue}`}/`},w.settings.appVerificationDisabledForTesting=!0,w.emulatorConfig=Object.freeze({host:W,port:ue,protocol:N.replace(":",""),options:Object.freeze({disableWarnings:S})}),S||function Is(){function y(){const h=document.createElement("p"),p=h.style;h.innerText="Running in emulator mode. Do not use with production credentials.",p.position="fixed",p.width="100%",p.backgroundColor="#ffffff",p.border=".1em solid #000000",p.color="#b50000",p.bottom="0px",p.left="0px",p.margin="0px",p.zIndex="10000",p.textAlign="center",h.classList.add("firebase-emulator-warning"),document.body.appendChild(h)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",y):y())}()}(this._delegate,p,w)}applyActionCode(p){return function ai(y,h){return ia.apply(this,arguments)}(this._delegate,p)}checkActionCode(p){return sa(this._delegate,p)}confirmPasswordReset(p,w){return function ou(y,h,p){return Eo.apply(this,arguments)}(this._delegate,p,w)}createUserWithEmailAndPassword(p,w){var S=this;return(0,m.Z)(function*(){return Fn(S._delegate,function Js(y,h,p){return wn.apply(this,arguments)}(S._delegate,p,w))})()}fetchProvidersForEmail(p){return this.fetchSignInMethodsForEmail(p)}fetchSignInMethodsForEmail(p){return function au(y,h){return aa.apply(this,arguments)}(this._delegate,p)}isSignInWithEmailLink(p){return function Zi(y,h){return"EMAIL_SIGNIN"===Qa.parseLink(h)?.operation}(0,p)}getRedirectResult(){var p=this;return(0,m.Z)(function*(){xa(Jl(),p._delegate,"operation-not-supported-in-this-environment");const w=yield function je(y,h){return ut.apply(this,arguments)}(p._delegate,Lo);return w?Fn(p._delegate,Promise.resolve(w)):{credential:null,user:null}})()}addFrameworkForLogging(p){!function Pn(y,h){gn(y)._logFramework(h)}(this._delegate,p)}onAuthStateChanged(p,w,S){const{next:N,error:W,complete:ue}=qy(p,w,S);return this._delegate.onAuthStateChanged(N,W,ue)}onIdTokenChanged(p,w,S){const{next:N,error:W,complete:ue}=qy(p,w,S);return this._delegate.onIdTokenChanged(N,W,ue)}sendSignInLinkToEmail(p,w){return function Dl(y,h,p){return Xs.apply(this,arguments)}(this._delegate,p,w)}sendPasswordResetEmail(p,w){return function El(y,h,p){return vn.apply(this,arguments)}(this._delegate,p,w||void 0)}setPersistence(p){var w=this;return(0,m.Z)(function*(){let S;switch(function w0(y,h){Sa(Object.values(ui).includes(h),y,"invalid-persistence-type"),(0,O.b$)()?Sa(h!==ui.SESSION,y,"unsupported-persistence-type"):(0,O.UG)()?Sa(h===ui.NONE,y,"unsupported-persistence-type"):Fo()?Sa(h===ui.NONE||h===ui.LOCAL&&(0,O.hl)(),y,"unsupported-persistence-type"):Sa(h===ui.NONE||Hy(),y,"unsupported-persistence-type")}(w._delegate,p),p){case ui.SESSION:S=Mi;break;case ui.LOCAL:S=(yield ie(Ao)._isAvailable())?Ao:ca;break;case ui.NONE:S=Zt;break;default:return xe("argument-error",{appName:w._delegate.name})}return w._delegate.setPersistence(S)})()}signInAndRetrieveDataWithCredential(p){return this.signInWithCredential(p)}signInAnonymously(){return Fn(this._delegate,function Mh(y){return _n.apply(this,arguments)}(this._delegate))}signInWithCredential(p){return Fn(this._delegate,yn(this._delegate,p))}signInWithCustomToken(p){return Fn(this._delegate,function vl(y,h){return ra.apply(this,arguments)}(this._delegate,p))}signInWithEmailAndPassword(p,w){return Fn(this._delegate,function xi(y,h,p){return yn((0,O.m9)(y),Ai.credential(h,p))}(this._delegate,p,w))}signInWithEmailLink(p,w){return Fn(this._delegate,function Hp(y,h,p){return oa.apply(this,arguments)}(this._delegate,p,w))}signInWithPhoneNumber(p,w){return Id(this._delegate,function Fh(y,h,p){return bu.apply(this,arguments)}(this._delegate,p,w))}signInWithPopup(p){var w=this;return(0,m.Z)(function*(){return xa(Jl(),w._delegate,"operation-not-supported-in-this-environment"),Fn(w._delegate,function Cu(y,h,p){return wa.apply(this,arguments)}(w._delegate,p,Lo))})()}signInWithRedirect(p){var w=this;return(0,m.Z)(function*(){return xa(Jl(),w._delegate,"operation-not-supported-in-this-environment"),yield vd(w._delegate),function In(y,h,p){return function cd(y,h,p){return D.apply(this,arguments)}(y,h,p)}(w._delegate,p,Lo)})()}updateCurrentUser(p){return this._delegate.updateCurrentUser(p)}verifyPasswordResetCode(p){return function bl(y,h){return Yc.apply(this,arguments)}(this._delegate,p)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return y.Persistence=ui,y})();function qy(y,h,p){let w=y;"function"!=typeof y&&({next:w,error:h,complete:p}=y);const S=w;return{next:W=>S(W&&po.getOrCreate(W)),error:h,complete:p}}function Kh(y,h){const p=function wd(y,h){const p=Wh();if(!p)return[];const w=$n(Xl,y,h);switch(p.getItem(w)){case ui.NONE:return[Zt];case ui.LOCAL:return[Ao,Mi];case ui.SESSION:return[Mi];default:return[]}}(y,h);if(typeof self<"u"&&!p.includes(Ao)&&p.push(Ao),typeof window<"u")for(const w of[ca,Mi])p.includes(w)||p.push(w);return p.includes(Zt)||p.push(Zt),p}class Zh{constructor(){this.providerId="phone",this._delegate=new Du(Nu(ee.Z.auth()))}static credential(h,p){return Du.credential(h,p)}verifyPhoneNumber(h,p){return this._delegate.verifyPhoneNumber(h,p)}unwrap(){return this._delegate}}Zh.PHONE_SIGN_IN_METHOD=Du.PHONE_SIGN_IN_METHOD,Zh.PROVIDER_ID=Du.PROVIDER_ID;const gg=U;class bd{constructor(h,p,w=ee.Z.app()){var S;gg(null===(S=w.options)||void 0===S?void 0:S.apiKey,"invalid-api-key",{appName:w.name}),this._delegate=new tr(h,p,w.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function mg(y){y.INTERNAL.registerComponent(new le.wA("auth-compat",h=>{const p=h.getProvider("app-compat").getImmediate(),w=h.getProvider("auth");return new Ma(p,w)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:Ai,FacebookAuthProvider:ea,GithubAuthProvider:yl,GoogleAuthProvider:Ja,OAuthProvider:Zs,SAMLAuthProvider:si,PhoneAuthProvider:Zh,PhoneMultiFactorGenerator:Mu,RecaptchaVerifier:bd,TwitterAuthProvider:$r,Auth:Ma,AuthCredential:ar,Error:O.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),y.registerVersion("@firebase/auth-compat","0.2.19")}(ee.Z)},9751:(at,Ae,P)=>{P.d(Ae,{y:()=>he});var m=P(2961),ee=P(727),O=P(8822),oe=P(9635),re=P(2416),de=P(576),le=P(2806);let he=(()=>{class Y{constructor(Me){Me&&(this._subscribe=Me)}lift(Me){const ve=new Y;return ve.source=this,ve.operator=Me,ve}subscribe(Me,ve,Je){const me=function $(Y){return Y&&Y instanceof m.Lv||function B(Y){return Y&&(0,de.m)(Y.next)&&(0,de.m)(Y.error)&&(0,de.m)(Y.complete)}(Y)&&(0,ee.Nn)(Y)}(Me)?Me:new m.Hp(Me,ve,Je);return(0,le.x)(()=>{const{operator:fe,source:Ye}=this;me.add(fe?fe.call(me,Ye):Ye?this._subscribe(me):this._trySubscribe(me))}),me}_trySubscribe(Me){try{return this._subscribe(Me)}catch(ve){Me.error(ve)}}forEach(Me,ve){return new(ve=pe(ve))((Je,me)=>{const fe=new m.Hp({next:Ye=>{try{Me(Ye)}catch(nt){me(nt),fe.unsubscribe()}},error:me,complete:Je});this.subscribe(fe)})}_subscribe(Me){var ve;return null===(ve=this.source)||void 0===ve?void 0:ve.subscribe(Me)}[O.L](){return this}pipe(...Me){return(0,oe.U)(Me)(this)}toPromise(Me){return new(Me=pe(Me))((ve,Je)=>{let me;this.subscribe(fe=>me=fe,fe=>Je(fe),()=>ve(me))})}}return Y.create=Ve=>new Y(Ve),Y})();function pe(Y){var Ve;return null!==(Ve=Y??re.v.Promise)&&void 0!==Ve?Ve:Promise}},7579:(at,Ae,P)=>{P.d(Ae,{x:()=>le});var m=P(9751),ee=P(727);const oe=(0,P(3888).d)(pe=>function(){pe(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var re=P(8737),de=P(2806);let le=(()=>{class pe extends m.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift($){const Y=new he(this,this);return Y.operator=$,Y}_throwIfClosed(){if(this.closed)throw new oe}next($){(0,de.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const Y of this.currentObservers)Y.next($)}})}error($){(0,de.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=$;const{observers:Y}=this;for(;Y.length;)Y.shift().error($)}})}complete(){(0,de.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:$}=this;for(;$.length;)$.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var $;return(null===($=this.observers)||void 0===$?void 0:$.length)>0}_trySubscribe($){return this._throwIfClosed(),super._trySubscribe($)}_subscribe($){return this._throwIfClosed(),this._checkFinalizedStatuses($),this._innerSubscribe($)}_innerSubscribe($){const{hasError:Y,isStopped:Ve,observers:Me}=this;return Y||Ve?ee.Lc:(this.currentObservers=null,Me.push($),new ee.w0(()=>{this.currentObservers=null,(0,re.P)(Me,$)}))}_checkFinalizedStatuses($){const{hasError:Y,thrownError:Ve,isStopped:Me}=this;Y?$.error(Ve):Me&&$.complete()}asObservable(){const $=new m.y;return $.source=this,$}}return pe.create=(B,$)=>new he(B,$),pe})();class he extends le{constructor(B,$){super(),this.destination=B,this.source=$}next(B){var $,Y;null===(Y=null===($=this.destination)||void 0===$?void 0:$.next)||void 0===Y||Y.call($,B)}error(B){var $,Y;null===(Y=null===($=this.destination)||void 0===$?void 0:$.error)||void 0===Y||Y.call($,B)}complete(){var B,$;null===($=null===(B=this.destination)||void 0===B?void 0:B.complete)||void 0===$||$.call(B)}_subscribe(B){var $,Y;return null!==(Y=null===($=this.source)||void 0===$?void 0:$.subscribe(B))&&void 0!==Y?Y:ee.Lc}}},2961:(at,Ae,P)=>{P.d(Ae,{Hp:()=>Je,Lv:()=>Y});var m=P(576),ee=P(727),O=P(2416),oe=P(7849);function re(){}const de=pe("C",void 0,void 0);function pe(xe,_e,Ee){return{kind:xe,value:_e,error:Ee}}var B=P(3410),$=P(2806);class Y extends ee.w0{constructor(_e){super(),this.isStopped=!1,_e?(this.destination=_e,(0,ee.Nn)(_e)&&_e.add(this)):this.destination=nt}static create(_e,Ee,Be){return new Je(_e,Ee,Be)}next(_e){this.isStopped?Ye(function he(xe){return pe("N",xe,void 0)}(_e),this):this._next(_e)}error(_e){this.isStopped?Ye(function le(xe){return pe("E",void 0,xe)}(_e),this):(this.isStopped=!0,this._error(_e))}complete(){this.isStopped?Ye(de,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(_e){this.destination.next(_e)}_error(_e){try{this.destination.error(_e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Ve=Function.prototype.bind;function Me(xe,_e){return Ve.call(xe,_e)}class ve{constructor(_e){this.partialObserver=_e}next(_e){const{partialObserver:Ee}=this;if(Ee.next)try{Ee.next(_e)}catch(Be){me(Be)}}error(_e){const{partialObserver:Ee}=this;if(Ee.error)try{Ee.error(_e)}catch(Be){me(Be)}else me(_e)}complete(){const{partialObserver:_e}=this;if(_e.complete)try{_e.complete()}catch(Ee){me(Ee)}}}class Je extends Y{constructor(_e,Ee,Be){let $e;if(super(),(0,m.m)(_e)||!_e)$e={next:_e??void 0,error:Ee??void 0,complete:Be??void 0};else{let U;this&&O.v.useDeprecatedNextContext?(U=Object.create(_e),U.unsubscribe=()=>this.unsubscribe(),$e={next:_e.next&&Me(_e.next,U),error:_e.error&&Me(_e.error,U),complete:_e.complete&&Me(_e.complete,U)}):$e=_e}this.destination=new ve($e)}}function me(xe){O.v.useDeprecatedSynchronousErrorHandling?(0,$.O)(xe):(0,oe.h)(xe)}function Ye(xe,_e){const{onStoppedNotification:Ee}=O.v;Ee&&B.z.setTimeout(()=>Ee(xe,_e))}const nt={closed:!0,next:re,error:function fe(xe){throw xe},complete:re}},727:(at,Ae,P)=>{P.d(Ae,{Lc:()=>de,w0:()=>re,Nn:()=>le});var m=P(576);const O=(0,P(3888).d)(pe=>function($){pe(this),this.message=$?`${$.length} errors occurred during unsubscription:\n${$.map((Y,Ve)=>`${Ve+1}) ${Y.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=$});var oe=P(8737);class re{constructor(B){this.initialTeardown=B,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let B;if(!this.closed){this.closed=!0;const{_parentage:$}=this;if($)if(this._parentage=null,Array.isArray($))for(const Me of $)Me.remove(this);else $.remove(this);const{initialTeardown:Y}=this;if((0,m.m)(Y))try{Y()}catch(Me){B=Me instanceof O?Me.errors:[Me]}const{_finalizers:Ve}=this;if(Ve){this._finalizers=null;for(const Me of Ve)try{he(Me)}catch(ve){B=B??[],ve instanceof O?B=[...B,...ve.errors]:B.push(ve)}}if(B)throw new O(B)}}add(B){var $;if(B&&B!==this)if(this.closed)he(B);else{if(B instanceof re){if(B.closed||B._hasParent(this))return;B._addParent(this)}(this._finalizers=null!==($=this._finalizers)&&void 0!==$?$:[]).push(B)}}_hasParent(B){const{_parentage:$}=this;return $===B||Array.isArray($)&&$.includes(B)}_addParent(B){const{_parentage:$}=this;this._parentage=Array.isArray($)?($.push(B),$):$?[$,B]:B}_removeParent(B){const{_parentage:$}=this;$===B?this._parentage=null:Array.isArray($)&&(0,oe.P)($,B)}remove(B){const{_finalizers:$}=this;$&&(0,oe.P)($,B),B instanceof re&&B._removeParent(this)}}re.EMPTY=(()=>{const pe=new re;return pe.closed=!0,pe})();const de=re.EMPTY;function le(pe){return pe instanceof re||pe&&"closed"in pe&&(0,m.m)(pe.remove)&&(0,m.m)(pe.add)&&(0,m.m)(pe.unsubscribe)}function he(pe){(0,m.m)(pe)?pe():pe.unsubscribe()}},2416:(at,Ae,P)=>{P.d(Ae,{v:()=>m});const m={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(at,Ae,P)=>{P.d(Ae,{E:()=>ee});const ee=new(P(9751).y)(re=>re.complete())},8996:(at,Ae,P)=>{P.d(Ae,{D:()=>_e});var m=P(8421),ee=P(5363),O=P(9468),de=P(9751),he=P(2202),pe=P(576),B=P(9672);function Y(Ee,Be){if(!Ee)throw new Error("Iterable cannot be null");return new de.y($e=>{(0,B.f)($e,Be,()=>{const U=Ee[Symbol.asyncIterator]();(0,B.f)($e,Be,()=>{U.next().then(ge=>{ge.done?$e.complete():$e.next(ge.value)})},0,!0)})})}var Ve=P(3670),Me=P(8239),ve=P(1144),Je=P(6495),me=P(2206),fe=P(4532),Ye=P(3260);function _e(Ee,Be){return Be?function xe(Ee,Be){if(null!=Ee){if((0,Ve.c)(Ee))return function oe(Ee,Be){return(0,m.Xf)(Ee).pipe((0,O.R)(Be),(0,ee.Q)(Be))}(Ee,Be);if((0,ve.z)(Ee))return function le(Ee,Be){return new de.y($e=>{let U=0;return Be.schedule(function(){U===Ee.length?$e.complete():($e.next(Ee[U++]),$e.closed||this.schedule())})})}(Ee,Be);if((0,Me.t)(Ee))return function re(Ee,Be){return(0,m.Xf)(Ee).pipe((0,O.R)(Be),(0,ee.Q)(Be))}(Ee,Be);if((0,me.D)(Ee))return Y(Ee,Be);if((0,Je.T)(Ee))return function $(Ee,Be){return new de.y($e=>{let U;return(0,B.f)($e,Be,()=>{U=Ee[he.h](),(0,B.f)($e,Be,()=>{let ge,Z;try{({value:ge,done:Z}=U.next())}catch(X){return void $e.error(X)}Z?$e.complete():$e.next(ge)},0,!0)}),()=>(0,pe.m)(U?.return)&&U.return()})}(Ee,Be);if((0,Ye.L)(Ee))return function nt(Ee,Be){return Y((0,Ye.Q)(Ee),Be)}(Ee,Be)}throw(0,fe.z)(Ee)}(Ee,Be):(0,m.Xf)(Ee)}},8421:(at,Ae,P)=>{P.d(Ae,{Xf:()=>Ve});var m=P(655),ee=P(1144),O=P(8239),oe=P(9751),re=P(3670),de=P(2206),le=P(4532),he=P(6495),pe=P(3260),B=P(576),$=P(7849),Y=P(8822);function Ve(xe){if(xe instanceof oe.y)return xe;if(null!=xe){if((0,re.c)(xe))return function Me(xe){return new oe.y(_e=>{const Ee=xe[Y.L]();if((0,B.m)(Ee.subscribe))return Ee.subscribe(_e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(xe);if((0,ee.z)(xe))return function ve(xe){return new oe.y(_e=>{for(let Ee=0;Ee<xe.length&&!_e.closed;Ee++)_e.next(xe[Ee]);_e.complete()})}(xe);if((0,O.t)(xe))return function Je(xe){return new oe.y(_e=>{xe.then(Ee=>{_e.closed||(_e.next(Ee),_e.complete())},Ee=>_e.error(Ee)).then(null,$.h)})}(xe);if((0,de.D)(xe))return fe(xe);if((0,he.T)(xe))return function me(xe){return new oe.y(_e=>{for(const Ee of xe)if(_e.next(Ee),_e.closed)return;_e.complete()})}(xe);if((0,pe.L)(xe))return function Ye(xe){return fe((0,pe.Q)(xe))}(xe)}throw(0,le.z)(xe)}function fe(xe){return new oe.y(_e=>{(function nt(xe,_e){var Ee,Be,$e,U;return(0,m.mG)(this,void 0,void 0,function*(){try{for(Ee=(0,m.KL)(xe);!(Be=yield Ee.next()).done;)if(_e.next(Be.value),_e.closed)return}catch(ge){$e={error:ge}}finally{try{Be&&!Be.done&&(U=Ee.return)&&(yield U.call(Ee))}finally{if($e)throw $e.error}}_e.complete()})})(xe,_e).catch(Ee=>_e.error(Ee))})}},6451:(at,Ae,P)=>{P.d(Ae,{T:()=>de});var m=P(8189),ee=P(8421),O=P(515),oe=P(7669),re=P(8996);function de(...le){const he=(0,oe.yG)(le),pe=(0,oe._6)(le,1/0),B=le;return B.length?1===B.length?(0,ee.Xf)(B[0]):(0,m.J)(pe)((0,re.D)(B,he)):O.E}},5403:(at,Ae,P)=>{P.d(Ae,{x:()=>ee});var m=P(2961);function ee(oe,re,de,le,he){return new O(oe,re,de,le,he)}class O extends m.Lv{constructor(re,de,le,he,pe,B){super(re),this.onFinalize=pe,this.shouldUnsubscribe=B,this._next=de?function($){try{de($)}catch(Y){re.error(Y)}}:super._next,this._error=he?function($){try{he($)}catch(Y){re.error(Y)}finally{this.unsubscribe()}}:super._error,this._complete=le?function(){try{le()}catch($){re.error($)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var re;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:de}=this;super.unsubscribe(),!de&&(null===(re=this.onFinalize)||void 0===re||re.call(this))}}}},4004:(at,Ae,P)=>{P.d(Ae,{U:()=>O});var m=P(4482),ee=P(5403);function O(oe,re){return(0,m.e)((de,le)=>{let he=0;de.subscribe((0,ee.x)(le,pe=>{le.next(oe.call(re,pe,he++))}))})}},8189:(at,Ae,P)=>{P.d(Ae,{J:()=>O});var m=P(5577),ee=P(4671);function O(oe=1/0){return(0,m.z)(ee.y,oe)}},5577:(at,Ae,P)=>{P.d(Ae,{z:()=>he});var m=P(4004),ee=P(8421),O=P(4482),oe=P(9672),re=P(5403),le=P(576);function he(pe,B,$=1/0){return(0,le.m)(B)?he((Y,Ve)=>(0,m.U)((Me,ve)=>B(Y,Me,Ve,ve))((0,ee.Xf)(pe(Y,Ve))),$):("number"==typeof B&&($=B),(0,O.e)((Y,Ve)=>function de(pe,B,$,Y,Ve,Me,ve,Je){const me=[];let fe=0,Ye=0,nt=!1;const xe=()=>{nt&&!me.length&&!fe&&B.complete()},_e=Be=>fe<Y?Ee(Be):me.push(Be),Ee=Be=>{Me&&B.next(Be),fe++;let $e=!1;(0,ee.Xf)($(Be,Ye++)).subscribe((0,re.x)(B,U=>{Ve?.(U),Me?_e(U):B.next(U)},()=>{$e=!0},void 0,()=>{if($e)try{for(fe--;me.length&&fe<Y;){const U=me.shift();ve?(0,oe.f)(B,ve,()=>Ee(U)):Ee(U)}xe()}catch(U){B.error(U)}}))};return pe.subscribe((0,re.x)(B,_e,()=>{nt=!0,xe()})),()=>{Je?.()}}(Y,Ve,pe,$)))}},5363:(at,Ae,P)=>{P.d(Ae,{Q:()=>oe});var m=P(9672),ee=P(4482),O=P(5403);function oe(re,de=0){return(0,ee.e)((le,he)=>{le.subscribe((0,O.x)(he,pe=>(0,m.f)(he,re,()=>he.next(pe),de),()=>(0,m.f)(he,re,()=>he.complete(),de),pe=>(0,m.f)(he,re,()=>he.error(pe),de)))})}},3099:(at,Ae,P)=>{P.d(Ae,{B:()=>re});var m=P(8421),ee=P(7579),O=P(2961),oe=P(4482);function re(le={}){const{connector:he=(()=>new ee.x),resetOnError:pe=!0,resetOnComplete:B=!0,resetOnRefCountZero:$=!0}=le;return Y=>{let Ve,Me,ve,Je=0,me=!1,fe=!1;const Ye=()=>{Me?.unsubscribe(),Me=void 0},nt=()=>{Ye(),Ve=ve=void 0,me=fe=!1},xe=()=>{const _e=Ve;nt(),_e?.unsubscribe()};return(0,oe.e)((_e,Ee)=>{Je++,!fe&&!me&&Ye();const Be=ve=ve??he();Ee.add(()=>{Je--,0===Je&&!fe&&!me&&(Me=de(xe,$))}),Be.subscribe(Ee),!Ve&&Je>0&&(Ve=new O.Hp({next:$e=>Be.next($e),error:$e=>{fe=!0,Ye(),Me=de(nt,pe,$e),Be.error($e)},complete:()=>{me=!0,Ye(),Me=de(nt,B),Be.complete()}}),(0,m.Xf)(_e).subscribe(Ve))})(Y)}}function de(le,he,...pe){if(!0===he)return void le();if(!1===he)return;const B=new O.Hp({next:()=>{B.unsubscribe(),le()}});return he(...pe).subscribe(B)}},9468:(at,Ae,P)=>{P.d(Ae,{R:()=>ee});var m=P(4482);function ee(O,oe=0){return(0,m.e)((re,de)=>{de.add(O.schedule(()=>re.subscribe(de),oe))})}},8505:(at,Ae,P)=>{P.d(Ae,{b:()=>re});var m=P(576),ee=P(4482),O=P(5403),oe=P(4671);function re(de,le,he){const pe=(0,m.m)(de)||le||he?{next:de,error:le,complete:he}:de;return pe?(0,ee.e)((B,$)=>{var Y;null===(Y=pe.subscribe)||void 0===Y||Y.call(pe);let Ve=!0;B.subscribe((0,O.x)($,Me=>{var ve;null===(ve=pe.next)||void 0===ve||ve.call(pe,Me),$.next(Me)},()=>{var Me;Ve=!1,null===(Me=pe.complete)||void 0===Me||Me.call(pe),$.complete()},Me=>{var ve;Ve=!1,null===(ve=pe.error)||void 0===ve||ve.call(pe,Me),$.error(Me)},()=>{var Me,ve;Ve&&(null===(Me=pe.unsubscribe)||void 0===Me||Me.call(pe)),null===(ve=pe.finalize)||void 0===ve||ve.call(pe)}))}):oe.y}},4408:(at,Ae,P)=>{P.d(Ae,{o:()=>re});var m=P(727);class ee extends m.w0{constructor(le,he){super()}schedule(le,he=0){return this}}const O={setInterval(de,le,...he){const{delegate:pe}=O;return pe?.setInterval?pe.setInterval(de,le,...he):setInterval(de,le,...he)},clearInterval(de){const{delegate:le}=O;return(le?.clearInterval||clearInterval)(de)},delegate:void 0};var oe=P(8737);class re extends ee{constructor(le,he){super(le,he),this.scheduler=le,this.work=he,this.pending=!1}schedule(le,he=0){if(this.closed)return this;this.state=le;const pe=this.id,B=this.scheduler;return null!=pe&&(this.id=this.recycleAsyncId(B,pe,he)),this.pending=!0,this.delay=he,this.id=this.id||this.requestAsyncId(B,this.id,he),this}requestAsyncId(le,he,pe=0){return O.setInterval(le.flush.bind(le,this),pe)}recycleAsyncId(le,he,pe=0){if(null!=pe&&this.delay===pe&&!1===this.pending)return he;O.clearInterval(he)}execute(le,he){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const pe=this._execute(le,he);if(pe)return pe;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(le,he){let B,pe=!1;try{this.work(le)}catch($){pe=!0,B=$||new Error("Scheduled action threw falsy error")}if(pe)return this.unsubscribe(),B}unsubscribe(){if(!this.closed){const{id:le,scheduler:he}=this,{actions:pe}=he;this.work=this.state=this.scheduler=null,this.pending=!1,(0,oe.P)(pe,this),null!=le&&(this.id=this.recycleAsyncId(he,le,null)),this.delay=null,super.unsubscribe()}}}},7565:(at,Ae,P)=>{P.d(Ae,{v:()=>O});var m=P(6063);class ee{constructor(re,de=ee.now){this.schedulerActionCtor=re,this.now=de}schedule(re,de=0,le){return new this.schedulerActionCtor(this,re).schedule(le,de)}}ee.now=m.l.now;class O extends ee{constructor(re,de=ee.now){super(re,de),this.actions=[],this._active=!1,this._scheduled=void 0}flush(re){const{actions:de}=this;if(this._active)return void de.push(re);let le;this._active=!0;do{if(le=re.execute(re.state,re.delay))break}while(re=de.shift());if(this._active=!1,le){for(;re=de.shift();)re.unsubscribe();throw le}}}},4986:(at,Ae,P)=>{P.d(Ae,{z:()=>O});var m=P(4408);const O=new(P(7565).v)(m.o)},6063:(at,Ae,P)=>{P.d(Ae,{l:()=>m});const m={now:()=>(m.delegate||Date).now(),delegate:void 0}},3410:(at,Ae,P)=>{P.d(Ae,{z:()=>m});const m={setTimeout(ee,O,...oe){const{delegate:re}=m;return re?.setTimeout?re.setTimeout(ee,O,...oe):setTimeout(ee,O,...oe)},clearTimeout(ee){const{delegate:O}=m;return(O?.clearTimeout||clearTimeout)(ee)},delegate:void 0}},2202:(at,Ae,P)=>{P.d(Ae,{h:()=>ee});const ee=function m(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(at,Ae,P)=>{P.d(Ae,{L:()=>m});const m="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(at,Ae,P)=>{P.d(Ae,{_6:()=>de,jO:()=>oe,yG:()=>re});var m=P(576);function O(le){return le[le.length-1]}function oe(le){return(0,m.m)(O(le))?le.pop():void 0}function re(le){return function ee(le){return le&&(0,m.m)(le.schedule)}(O(le))?le.pop():void 0}function de(le,he){return"number"==typeof O(le)?le.pop():he}},8737:(at,Ae,P)=>{function m(ee,O){if(ee){const oe=ee.indexOf(O);0<=oe&&ee.splice(oe,1)}}P.d(Ae,{P:()=>m})},3888:(at,Ae,P)=>{function m(ee){const oe=ee(re=>{Error.call(re),re.stack=(new Error).stack});return oe.prototype=Object.create(Error.prototype),oe.prototype.constructor=oe,oe}P.d(Ae,{d:()=>m})},2806:(at,Ae,P)=>{P.d(Ae,{O:()=>oe,x:()=>O});var m=P(2416);let ee=null;function O(re){if(m.v.useDeprecatedSynchronousErrorHandling){const de=!ee;if(de&&(ee={errorThrown:!1,error:null}),re(),de){const{errorThrown:le,error:he}=ee;if(ee=null,le)throw he}}else re()}function oe(re){m.v.useDeprecatedSynchronousErrorHandling&&ee&&(ee.errorThrown=!0,ee.error=re)}},9672:(at,Ae,P)=>{function m(ee,O,oe,re=0,de=!1){const le=O.schedule(function(){oe(),de?ee.add(this.schedule(null,re)):this.unsubscribe()},re);if(ee.add(le),!de)return le}P.d(Ae,{f:()=>m})},4671:(at,Ae,P)=>{function m(ee){return ee}P.d(Ae,{y:()=>m})},1144:(at,Ae,P)=>{P.d(Ae,{z:()=>m});const m=ee=>ee&&"number"==typeof ee.length&&"function"!=typeof ee},2206:(at,Ae,P)=>{P.d(Ae,{D:()=>ee});var m=P(576);function ee(O){return Symbol.asyncIterator&&(0,m.m)(O?.[Symbol.asyncIterator])}},576:(at,Ae,P)=>{function m(ee){return"function"==typeof ee}P.d(Ae,{m:()=>m})},3670:(at,Ae,P)=>{P.d(Ae,{c:()=>O});var m=P(8822),ee=P(576);function O(oe){return(0,ee.m)(oe[m.L])}},6495:(at,Ae,P)=>{P.d(Ae,{T:()=>O});var m=P(2202),ee=P(576);function O(oe){return(0,ee.m)(oe?.[m.h])}},8239:(at,Ae,P)=>{P.d(Ae,{t:()=>ee});var m=P(576);function ee(O){return(0,m.m)(O?.then)}},3260:(at,Ae,P)=>{P.d(Ae,{L:()=>oe,Q:()=>O});var m=P(655),ee=P(576);function O(re){return(0,m.FC)(this,arguments,function*(){const le=re.getReader();try{for(;;){const{value:he,done:pe}=yield(0,m.qq)(le.read());if(pe)return yield(0,m.qq)(void 0);yield yield(0,m.qq)(he)}}finally{le.releaseLock()}})}function oe(re){return(0,ee.m)(re?.getReader)}},4482:(at,Ae,P)=>{P.d(Ae,{A:()=>ee,e:()=>O});var m=P(576);function ee(oe){return(0,m.m)(oe?.lift)}function O(oe){return re=>{if(ee(re))return re.lift(function(de){try{return oe(de,this)}catch(le){this.error(le)}});throw new TypeError("Unable to lift unknown Observable type")}}},9635:(at,Ae,P)=>{P.d(Ae,{U:()=>O,z:()=>ee});var m=P(4671);function ee(...oe){return O(oe)}function O(oe){return 0===oe.length?m.y:1===oe.length?oe[0]:function(de){return oe.reduce((le,he)=>he(le),de)}}},7849:(at,Ae,P)=>{P.d(Ae,{h:()=>O});var m=P(2416),ee=P(3410);function O(oe){ee.z.setTimeout(()=>{const{onUnhandledError:re}=m.v;if(!re)throw oe;re(oe)})}},4532:(at,Ae,P)=>{function m(ee){return new TypeError(`You provided ${null!==ee&&"object"==typeof ee?"an invalid object":`'${ee}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}P.d(Ae,{z:()=>m})},655:(at,Ae,P)=>{function oe(Z,X){var ie={};for(var ne in Z)Object.prototype.hasOwnProperty.call(Z,ne)&&X.indexOf(ne)<0&&(ie[ne]=Z[ne]);if(null!=Z&&"function"==typeof Object.getOwnPropertySymbols){var Pe=0;for(ne=Object.getOwnPropertySymbols(Z);Pe<ne.length;Pe++)X.indexOf(ne[Pe])<0&&Object.prototype.propertyIsEnumerable.call(Z,ne[Pe])&&(ie[ne[Pe]]=Z[ne[Pe]])}return ie}function he(Z,X,ie,ne){return new(ie||(ie=Promise))(function(ke,dt){function $t(tn){try{qe(ne.next(tn))}catch(Tn){dt(Tn)}}function Ut(tn){try{qe(ne.throw(tn))}catch(Tn){dt(Tn)}}function qe(tn){tn.done?ke(tn.value):function Pe(ke){return ke instanceof ie?ke:new ie(function(dt){dt(ke)})}(tn.value).then($t,Ut)}qe((ne=ne.apply(Z,X||[])).next())})}function me(Z){return this instanceof me?(this.v=Z,this):new me(Z)}function fe(Z,X,ie){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Pe,ne=ie.apply(Z,X||[]),ke=[];return Pe={},dt("next"),dt("throw"),dt("return"),Pe[Symbol.asyncIterator]=function(){return this},Pe;function dt(qt){ne[qt]&&(Pe[qt]=function(Wt){return new Promise(function(Cr,Ot){ke.push([qt,Wt,Cr,Ot])>1||$t(qt,Wt)})})}function $t(qt,Wt){try{!function Ut(qt){qt.value instanceof me?Promise.resolve(qt.value.v).then(qe,tn):Tn(ke[0][2],qt)}(ne[qt](Wt))}catch(Cr){Tn(ke[0][3],Cr)}}function qe(qt){$t("next",qt)}function tn(qt){$t("throw",qt)}function Tn(qt,Wt){qt(Wt),ke.shift(),ke.length&&$t(ke[0][0],ke[0][1])}}function nt(Z){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ie,X=Z[Symbol.asyncIterator];return X?X.call(Z):(Z=function Y(Z){var X="function"==typeof Symbol&&Symbol.iterator,ie=X&&Z[X],ne=0;if(ie)return ie.call(Z);if(Z&&"number"==typeof Z.length)return{next:function(){return Z&&ne>=Z.length&&(Z=void 0),{value:Z&&Z[ne++],done:!Z}}};throw new TypeError(X?"Object is not iterable.":"Symbol.iterator is not defined.")}(Z),ie={},ne("next"),ne("throw"),ne("return"),ie[Symbol.asyncIterator]=function(){return this},ie);function ne(ke){ie[ke]=Z[ke]&&function(dt){return new Promise(function($t,Ut){!function Pe(ke,dt,$t,Ut){Promise.resolve(Ut).then(function(qe){ke({value:qe,done:$t})},dt)}($t,Ut,(dt=Z[ke](dt)).done,dt.value)})}}}P.d(Ae,{FC:()=>fe,KL:()=>nt,_T:()=>oe,mG:()=>he,qq:()=>me})},4650:(at,Ae,P)=>{P.d(Ae,{$8M:()=>Eu,$Z:()=>kg,AFp:()=>vb,AaK:()=>he,CRH:()=>Xv,CZH:()=>hp,CqO:()=>$E,D6c:()=>Bb,EJc:()=>Ib,F4k:()=>W_,FYo:()=>mt,FiY:()=>je,G48:()=>gp,GfV:()=>Ou,Gpc:()=>$,JOm:()=>Fs,LFG:()=>In,LSH:()=>cg,Lbi:()=>Um,Lck:()=>NT,MMx:()=>Ec,NdJ:()=>HE,OlP:()=>on,PXZ:()=>Tt,QGY:()=>q_,QP$:()=>Ti,Qsj:()=>gt,R0b:()=>ds,RDi:()=>f0,Rgc:()=>nh,SBq:()=>ue,Sil:()=>Bm,Suo:()=>rh,TTD:()=>zi,TgZ:()=>Nf,X6Q:()=>bt,XFs:()=>Ke,Xpm:()=>H,Xts:()=>Jl,Y36:()=>Fi,YKP:()=>Vv,Yjl:()=>Pt,Yz7:()=>Wt,Z0I:()=>Yo,ZZ4:()=>Km,_Bn:()=>WI,_UZ:()=>H_,_Vd:()=>S,_c5:()=>Rc,_uU:()=>rI,aQg:()=>Dw,c2e:()=>iS,cJS:()=>Ot,cg1:()=>pv,dDg:()=>Mb,dqk:()=>nn,eFA:()=>Ir,ekj:()=>ev,eoX:()=>Er,f3M:()=>D,g9A:()=>Vm,h0i:()=>zu,hGG:()=>Cw,iGM:()=>Jv,ifc:()=>st,ip1:()=>zo,jDz:()=>KI,kL8:()=>mv,lG2:()=>$n,lqb:()=>Fn,lri:()=>fp,n5z:()=>Qi,oAB:()=>rt,q4F:()=>yg,qLn:()=>ss,qOj:()=>Hg,qZA:()=>Zg,rWj:()=>xb,sBO:()=>Ge,sIi:()=>Tf,s_b:()=>Pr,soG:()=>Qu,tb:()=>aw,tp0:()=>yt,uIk:()=>Af,vHH:()=>ve,vpe:()=>Ho,wAp:()=>vt,z2F:()=>$m,zSh:()=>Nu,zs3:()=>lc});var m=P(7579),ee=P(727),O=P(9751),oe=P(6451),re=P(3099);function de(i){for(let o in i)if(i[o]===de)return o;throw Error("Could not find renamed property on target object.")}function le(i,o){for(const a in o)o.hasOwnProperty(a)&&!i.hasOwnProperty(a)&&(i[a]=o[a])}function he(i){if("string"==typeof i)return i;if(Array.isArray(i))return"["+i.map(he).join(", ")+"]";if(null==i)return""+i;if(i.overriddenName)return`${i.overriddenName}`;if(i.name)return`${i.name}`;const o=i.toString();if(null==o)return""+o;const a=o.indexOf("\n");return-1===a?o:o.substring(0,a)}function pe(i,o){return null==i||""===i?null===o?"":o:null==o||""===o?i:i+" "+o}const B=de({__forward_ref__:de});function $(i){return i.__forward_ref__=$,i.toString=function(){return he(this())},i}function Y(i){return Ve(i)?i():i}function Ve(i){return"function"==typeof i&&i.hasOwnProperty(B)&&i.__forward_ref__===$}class ve extends Error{constructor(o,a){super(function Je(i,o){return`NG0${Math.abs(i)}${o?": "+o.trim():""}`}(o,a)),this.code=o}}function me(i){return"string"==typeof i?i:null==i?"":String(i)}function _e(i,o){throw new ve(-201,!1)}function Ut(i,o){null==i&&function qe(i,o,a,l){throw new Error(`ASSERTION ERROR: ${i}`+(null==l?"":` [Expected=> ${a} ${l} ${o} <=Actual]`))}(o,i,null,"!=")}function Wt(i){return{token:i.token,providedIn:i.providedIn||null,factory:i.factory,value:void 0}}function Ot(i){return{providers:i.providers||[],imports:i.imports||[]}}function Xt(i){return Vr(i,Ci)||Vr(i,hi)}function Yo(i){return null!==Xt(i)}function Vr(i,o){return i.hasOwnProperty(o)?i[o]:null}function vs(i){return i&&(i.hasOwnProperty(Br)||i.hasOwnProperty(_o))?i[Br]:null}const Ci=de({\u0275prov:de}),Br=de({\u0275inj:de}),hi=de({ngInjectableDef:de}),_o=de({ngInjectorDef:de});var Ke=(()=>((Ke=Ke||{})[Ke.Default=0]="Default",Ke[Ke.Host=1]="Host",Ke[Ke.Self=2]="Self",Ke[Ke.SkipSelf=4]="SkipSelf",Ke[Ke.Optional=8]="Optional",Ke))();let jr;function Sn(i){const o=jr;return jr=i,o}function fi(i,o,a){const l=Xt(i);return l&&"root"==l.providedIn?void 0===l.value?l.value=l.factory():l.value:a&Ke.Optional?null:void 0!==o?o:void _e(he(i))}function An(i){return{toString:i}.toString()}var jn=(()=>((jn=jn||{})[jn.OnPush=0]="OnPush",jn[jn.Default=1]="Default",jn))(),st=(()=>{return(i=st||(st={}))[i.Emulated=0]="Emulated",i[i.None=2]="None",i[i.ShadowDom=3]="ShadowDom",st;var i})();const nn=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),Tr={},Et=[],$i=de({\u0275cmp:de}),Kt=de({\u0275dir:de}),pi=de({\u0275pipe:de}),Gt=de({\u0275mod:de}),K=de({\u0275fac:de}),j=de({__NG_ELEMENT_ID__:de});let V=0;function H(i){return An(()=>{const a=!0===i.standalone,l={},d={type:i.type,providersResolver:null,decls:i.decls,vars:i.vars,factory:null,template:i.template||null,consts:i.consts||null,ngContentSelectors:i.ngContentSelectors,hostBindings:i.hostBindings||null,hostVars:i.hostVars||0,hostAttrs:i.hostAttrs||null,contentQueries:i.contentQueries||null,declaredInputs:l,inputs:null,outputs:null,exportAs:i.exportAs||null,onPush:i.changeDetection===jn.OnPush,directiveDefs:null,pipeDefs:null,standalone:a,dependencies:a&&i.dependencies||null,getStandaloneInjector:null,selectors:i.selectors||Et,viewQuery:i.viewQuery||null,features:i.features||null,data:i.data||{},encapsulation:i.encapsulation||st.Emulated,id:"c"+V++,styles:i.styles||Et,_:null,setInput:null,schemas:i.schemas||null,tView:null},f=i.dependencies,_=i.features;return d.inputs=Zt(i.inputs,l),d.outputs=Zt(i.outputs),_&&_.forEach(E=>E(d)),d.directiveDefs=f?()=>("function"==typeof f?f():f).map(be).filter(Ue):null,d.pipeDefs=f?()=>("function"==typeof f?f():f).map(Rn).filter(Ue):null,d})}function be(i){return Mt(i)||fn(i)}function Ue(i){return null!==i}function rt(i){return An(()=>({type:i.type,bootstrap:i.bootstrap||Et,declarations:i.declarations||Et,imports:i.imports||Et,exports:i.exports||Et,transitiveCompileScopes:null,schemas:i.schemas||null,id:i.id||null}))}function Zt(i,o){if(null==i)return Tr;const a={};for(const l in i)if(i.hasOwnProperty(l)){let d=i[l],f=d;Array.isArray(d)&&(f=d[1],d=d[0]),a[d]=l,o&&(o[d]=f)}return a}const $n=H;function Pt(i){return{type:i.type,name:i.name,factory:null,pure:!1!==i.pure,standalone:!0===i.standalone,onDestroy:i.type.prototype.ngOnDestroy||null}}function Mt(i){return i[$i]||null}function fn(i){return i[Kt]||null}function Rn(i){return i[pi]||null}function Ti(i){const o=Mt(i)||fn(i)||Rn(i);return null!==o&&o.standalone}function Sr(i,o){const a=i[Gt]||null;if(!a&&!0===o)throw new Error(`Type ${he(i)} does not have '\u0275mod' property.`);return a}function Xn(i){return Array.isArray(i)&&"object"==typeof i[1]}function Ar(i){return Array.isArray(i)&&!0===i[1]}function Ya(i){return 0!=(8&i.flags)}function Xo(i){return 2==(2&i.flags)}function fl(i){return 1==(1&i.flags)}function gr(i){return null!==i.template}function Ch(i){return 0!=(256&i[2])}function Ai(i,o){return i.hasOwnProperty(K)?i[K]:null}class Gi{constructor(o,a,l){this.previousValue=o,this.currentValue=a,this.firstChange=l}isFirstChange(){return this.firstChange}}function zi(){return Zs}function Zs(i){return i.type.prototype.ngOnChanges&&(i.setInput=Ja),ea}function ea(){const i=Ah(this),o=i?.current;if(o){const a=i.previous;if(a===Tr)i.previous=o;else for(let l in o)a[l]=o[l];i.current=null,this.ngOnChanges(o)}}function Ja(i,o,a,l){const d=Ah(i)||function ta(i,o){return i[yl]=o}(i,{previous:Tr,current:null}),f=d.current||(d.current={}),_=d.previous,E=this.declaredInputs[a],I=_[E];f[E]=new Gi(I&&I.currentValue,o,_===Tr),i[l]=o}zi.ngInherit=!0;const yl="__ngSimpleChanges__";function Ah(i){return i[yl]||null}function _n(i){for(;Array.isArray(i);)i=i[0];return i}function xr(i,o){return _n(o[i.index])}function Ys(i,o){return i.data[o]}function jt(i,o){const a=o[i];return Xn(a)?a:a[0]}function na(i){return 4==(4&i[2])}function Qs(i){return 64==(64&i[2])}function yi(i,o){return null==o?null:i[o]}function nu(i){i[18]=0}function yn(i,o){i[5]+=o;let a=i,l=i[3];for(;null!==l&&(1===o&&1===a[5]||-1===o&&0===a[5]);)l[5]+=o,a=l,l=l[3]}const It={lFrame:xl(null),bindingsEnabled:!0};function Ki(){return It.bindingsEnabled}function Te(){return It.lFrame.lView}function Ft(){return It.lFrame.tView}function vn(){let i=ou();for(;null!==i&&64===i.type;)i=i.parent;return i}function ou(){return It.lFrame.currentTNode}function ai(i,o){const a=It.lFrame;a.currentTNode=i,a.isParent=o}function ia(){return It.lFrame.isParent}function Gp(i,o){const a=It.lFrame;a.bindingIndex=a.bindingRootIndex=i,au(o)}function au(i){It.lFrame.currentDirectiveIndex=i}function Tl(){return It.lFrame.currentQueryIndex}function ua(i){It.lFrame.currentQueryIndex=i}function Sl(i){const o=i[1];return 2===o.type?o.declTNode:1===o.type?i[6]:null}function uu(i,o,a){if(a&Ke.SkipSelf){let d=o,f=i;for(;!(d=d.parent,null!==d||a&Ke.Host||(d=Sl(f),null===d||(f=f[15],10&d.type))););if(null===d)return!1;o=d,i=f}const l=It.lFrame=Al();return l.currentTNode=o,l.lView=i,!0}function lu(i){const o=Al(),a=i[1];It.lFrame=o,o.currentTNode=a.firstChild,o.lView=i,o.tView=a,o.contextLView=i,o.bindingIndex=a.bindingStartIndex,o.inI18n=!1}function Al(){const i=It.lFrame,o=null===i?null:i.child;return null===o?xl(i):o}function xl(i){const o={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:i,child:null,inI18n:!1};return null!==i&&(i.child=o),o}function Ml(){const i=It.lFrame;return It.lFrame=i.parent,i.currentTNode=null,i.lView=null,i}const Qc=Ml;function eo(){const i=Ml();i.isParent=!0,i.tView=null,i.selectedIndex=-1,i.contextLView=null,i.elementDepthCount=0,i.currentDirectiveIndex=-1,i.currentNamespace=null,i.bindingRootIndex=-1,i.bindingIndex=-1,i.currentQueryIndex=0}function zn(){return It.lFrame.selectedIndex}function Hr(i){It.lFrame.selectedIndex=i}function Ol(i,o){for(let a=o.directiveStart,l=o.directiveEnd;a<l;a++){const f=i.data[a].type.prototype,{ngAfterContentInit:_,ngAfterContentChecked:E,ngAfterViewInit:I,ngAfterViewChecked:T,ngOnDestroy:R}=f;_&&(i.contentHooks||(i.contentHooks=[])).push(-a,_),E&&((i.contentHooks||(i.contentHooks=[])).push(a,E),(i.contentCheckHooks||(i.contentCheckHooks=[])).push(a,E)),I&&(i.viewHooks||(i.viewHooks=[])).push(-a,I),T&&((i.viewHooks||(i.viewHooks=[])).push(a,T),(i.viewCheckHooks||(i.viewCheckHooks=[])).push(a,T)),null!=R&&(i.destroyHooks||(i.destroyHooks=[])).push(a,R)}}function Io(i,o,a){Do(i,o,3,a)}function bo(i,o,a,l){(3&i[2])===a&&Do(i,o,a,l)}function ed(i,o){let a=i[2];(3&a)===o&&(a&=2047,a+=1,i[2]=a)}function Do(i,o,a,l){const f=l??-1,_=o.length-1;let E=0;for(let I=void 0!==l?65535&i[18]:0;I<_;I++)if("number"==typeof o[I+1]){if(E=o[I],null!=l&&E>=l)break}else o[I]<0&&(i[18]+=65536),(E<f||-1==f)&&(td(i,a,o,I),i[18]=(4294901760&i[18])+I+2),I++}function td(i,o,a,l){const d=a[l]<0,f=a[l+1],E=i[d?-a[l]:a[l]];if(d){if(i[2]>>11<i[18]>>16&&(3&i[2])===o){i[2]+=2048;try{f.call(E)}finally{}}}else try{f.call(E)}finally{}}class Ss{constructor(o,a,l){this.factory=o,this.resolving=!1,this.canSeeViewProviders=a,this.injectImpl=l}}function To(i,o,a){let l=0;for(;l<a.length;){const d=a[l];if("number"==typeof d){if(0!==d)break;l++;const f=a[l++],_=a[l++],E=a[l++];i.setAttribute(o,_,E,f)}else{const f=d,_=a[++l];gu(f)?i.setProperty(o,f,_):i.setAttribute(o,f,_),l++}}return l}function ro(i){return 3===i||4===i||6===i}function gu(i){return 64===i.charCodeAt(0)}function la(i,o){if(null!==o&&0!==o.length)if(null===i||0===i.length)i=o.slice();else{let a=-1;for(let l=0;l<o.length;l++){const d=o[l];"number"==typeof d?a=d:0===a||rd(i,a,d,null,-1===a||2===a?o[++l]:null)}}return i}function rd(i,o,a,l,d){let f=0,_=i.length;if(-1===o)_=-1;else for(;f<i.length;){const E=i[f++];if("number"==typeof E){if(E===o){_=-1;break}if(E>o){_=f-1;break}}}for(;f<i.length;){const E=i[f];if("number"==typeof E)break;if(E===a){if(null===l)return void(null!==d&&(i[f+1]=d));if(l===i[f+1])return void(i[f+2]=d)}f++,null!==l&&f++,null!==d&&f++}-1!==_&&(i.splice(_,0,o),f=_+1),i.splice(f++,0,a),null!==l&&i.splice(f++,0,l),null!==d&&i.splice(f++,0,d)}function id(i){return-1!==i}function er(i){return 32767&i}function da(i,o){let a=function ca(i){return i>>16}(i),l=o;for(;a>0;)l=l[15],a--;return l}let Mi=!0;function ha(i){const o=Mi;return Mi=i,o}let xn=0;const _i={};function io(i,o){const a=yu(i,o);if(-1!==a)return a;const l=o[1];l.firstCreatePass&&(i.injectorIndex=o.length,pa(l.data,i),pa(o,null),pa(l.blueprint,null));const d=_u(i,o),f=i.injectorIndex;if(id(d)){const _=er(d),E=da(d,o),I=E[1].data;for(let T=0;T<8;T++)o[f+T]=E[_+T]|I[_+T]}return o[f+8]=d,f}function pa(i,o){i.push(0,0,0,0,0,0,0,0,o)}function yu(i,o){return-1===i.injectorIndex||i.parent&&i.parent.injectorIndex===i.injectorIndex||null===o[i.injectorIndex+8]?-1:i.injectorIndex}function _u(i,o){if(i.parent&&-1!==i.parent.injectorIndex)return i.parent.injectorIndex;let a=0,l=null,d=o;for(;null!==d;){if(l=xo(d),null===l)return-1;if(a++,d=d[15],-1!==l.injectorIndex)return l.injectorIndex|a<<16}return-1}function As(i,o,a){!function mu(i,o,a){let l;"string"==typeof a?l=a.charCodeAt(0)||0:a.hasOwnProperty(j)&&(l=a[j]),null==l&&(l=a[j]=xn++);const d=255&l;o.data[i+(d>>5)]|=1<<d}(i,o,a)}function xs(i,o,a){if(a&Ke.Optional)return i;_e()}function Pl(i,o,a,l){if(a&Ke.Optional&&void 0===l&&(l=null),0==(a&(Ke.Self|Ke.Host))){const d=i[9],f=Sn(void 0);try{return d?d.get(o,l,a&Ke.Optional):fi(o,l,a&Ke.Optional)}finally{Sn(f)}}return xs(l,0,a)}function so(i,o,a,l=Ke.Default,d){if(null!==i){if(1024&o[2]){const _=function Ao(i,o,a,l,d){let f=i,_=o;for(;null!==f&&null!==_&&1024&_[2]&&!(256&_[2]);){const E=ga(f,_,a,l|Ke.Self,_i);if(E!==_i)return E;let I=f.parent;if(!I){const T=_[21];if(T){const R=T.get(a,_i,l);if(R!==_i)return R}I=xo(_),_=_[15]}f=I}return d}(i,o,a,l,_i);if(_!==_i)return _}const f=ga(i,o,a,l,_i);if(f!==_i)return f}return Pl(o,a,l,d)}function ga(i,o,a,l,d){const f=function Fl(i){if("string"==typeof i)return i.charCodeAt(0)||0;const o=i.hasOwnProperty(j)?i[j]:void 0;return"number"==typeof o?o>=0?255&o:Ll:o}(a);if("function"==typeof f){if(!uu(o,i,l))return l&Ke.Host?xs(d,0,l):Pl(o,a,l,d);try{const _=f(l);if(null!=_||l&Ke.Optional)return _;_e()}finally{Qc()}}else if("number"==typeof f){let _=null,E=yu(i,o),I=-1,T=l&Ke.Host?o[16][6]:null;for((-1===E||l&Ke.SkipSelf)&&(I=-1===E?_u(i,o):o[E+8],-1!==I&&ma(l,!1)?(_=o[1],E=er(I),o=da(I,o)):E=-1);-1!==E;){const R=o[1];if(vu(f,E,R.data)){const k=ad(E,o,a,_,l,T);if(k!==_i)return k}I=o[E+8],-1!==I&&ma(l,o[1].data[E+8]===T)&&vu(f,E,o)?(_=R,E=er(I),o=da(I,o)):E=-1}}return d}function ad(i,o,a,l,d,f){const _=o[1],E=_.data[i+8],R=So(E,_,a,null==l?Xo(E)&&Mi:l!=_&&0!=(3&E.type),d&Ke.Host&&f===E);return null!==R?Yi(o,_,R,E):_i}function So(i,o,a,l,d){const f=i.providerIndexes,_=o.data,E=1048575&f,I=i.directiveStart,R=f>>20,z=d?E+R:i.directiveEnd;for(let te=l?E:E+R;te<z;te++){const we=_[te];if(te<I&&a===we||te>=I&&we.type===a)return te}if(d){const te=_[I];if(te&&gr(te)&&te.type===a)return I}return null}function Yi(i,o,a,l){let d=i[a];const f=o.data;if(function no(i){return i instanceof Ss}(d)){const _=d;_.resolving&&function Ye(i,o){const a=o?`. Dependency path: ${o.join(" > ")} > ${i}`:"";throw new ve(-200,`Circular dependency in DI detected for ${i}${a}`)}(function fe(i){return"function"==typeof i?i.name||i.toString():"object"==typeof i&&null!=i&&"function"==typeof i.type?i.type.name||i.type.toString():me(i)}(f[a]));const E=ha(_.canSeeViewProviders);_.resolving=!0;const I=_.injectImpl?Sn(_.injectImpl):null;uu(i,l,Ke.Default);try{d=i[a]=_.factory(void 0,f,i,l),o.firstCreatePass&&a>=l.directiveStart&&function Xc(i,o,a){const{ngOnChanges:l,ngOnInit:d,ngDoCheck:f}=o.type.prototype;if(l){const _=Zs(o);(a.preOrderHooks||(a.preOrderHooks=[])).push(i,_),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(i,_)}d&&(a.preOrderHooks||(a.preOrderHooks=[])).push(0-i,d),f&&((a.preOrderHooks||(a.preOrderHooks=[])).push(i,f),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(i,f))}(a,f[a],o)}finally{null!==I&&Sn(I),ha(E),_.resolving=!1,Qc()}}return d}function vu(i,o,a){return!!(a[o+(i>>5)]&1<<i)}function ma(i,o){return!(i&Ke.Self||i&Ke.Host&&o)}class oo{constructor(o,a){this._tNode=o,this._lView=a}get(o,a,l){return so(this._tNode,this._lView,o,l,a)}}function Ll(){return new oo(vn(),Te())}function Qi(i){return An(()=>{const o=i.prototype.constructor,a=o[K]||wu(o),l=Object.prototype;let d=Object.getPrototypeOf(i.prototype).constructor;for(;d&&d!==l;){const f=d[K]||wu(d);if(f&&f!==a)return f;d=Object.getPrototypeOf(d)}return f=>new f})}function wu(i){return Ve(i)?()=>{const o=wu(Y(i));return o&&o()}:Ai(i)}function xo(i){const o=i[1],a=o.type;return 2===a?o.declTNode:1===a?i[6]:null}function Eu(i){return function od(i,o){if("class"===o)return i.classes;if("style"===o)return i.styles;const a=i.attrs;if(a){const l=a.length;let d=0;for(;d<l;){const f=a[d];if(ro(f))break;if(0===f)d+=2;else if("number"==typeof f)for(d++;d<l&&"string"==typeof a[d];)d++;else{if(f===o)return a[d+1];d+=2}}}return null}(vn(),i)}const Ms="__parameters__";function No(i,o,a){return An(()=>{const l=function Iu(i){return function(...a){if(i){const l=i(...a);for(const d in l)this[d]=l[d]}}}(o);function d(...f){if(this instanceof d)return l.apply(this,f),this;const _=new d(...f);return E.annotation=_,E;function E(I,T,R){const k=I.hasOwnProperty(Ms)?I[Ms]:Object.defineProperty(I,Ms,{value:[]})[Ms];for(;k.length<=R;)k.push(null);return(k[R]=k[R]||[]).push(_),I}}return a&&(d.prototype=Object.create(a.prototype)),d.prototype.ngMetadataName=i,d.annotationCls=d,d})}class on{constructor(o,a){this._desc=o,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof a?this.__NG_ELEMENT_ID__=a:void 0!==a&&(this.\u0275prov=Wt({token:this,providedIn:a.providedIn||"root",factory:a.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function zr(i,o){void 0===o&&(o=i);for(let a=0;a<i.length;a++){let l=i[a];Array.isArray(l)?(o===i&&(o=i.slice(0,a)),zr(l,o)):o!==i&&o.push(l)}return o}function vi(i,o){i.forEach(a=>Array.isArray(a)?vi(a,o):o(a))}function Ul(i,o,a){o>=i.length?i.push(a):i.splice(o,0,a)}function Oo(i,o){return o>=i.length-1?i.pop():i.splice(o,1)[0]}function Mr(i,o,a){let l=Xi(i,o);return l>=0?i[1|l]=a:(l=~l,function pt(i,o,a,l){let d=i.length;if(d==o)i.push(a,l);else if(1===d)i.push(l,i[0]),i[0]=a;else{for(d--,i.push(i[d-1],i[d]);d>o;)i[d]=i[d-2],d--;i[o]=a,i[o+1]=l}}(i,l,o,a)),l}function va(i,o){const a=Xi(i,o);if(a>=0)return i[1|a]}function Xi(i,o){return function Rr(i,o,a){let l=0,d=i.length>>a;for(;d!==l;){const f=l+(d-l>>1),_=i[f<<a];if(o===_)return f<<a;_>o?d=f:l=f+1}return~(d<<a)}(i,o,1)}const an={},Ni="__NG_DI_FLAG__",Tu="ngTempTokenPath",Su=/\n/gm,jl="__source";let lo;function es(i){const o=lo;return lo=i,o}function $l(i,o=Ke.Default){if(void 0===lo)throw new ve(-203,!1);return null===lo?fi(i,void 0,o):lo.get(i,o&Ke.Optional?null:void 0,o)}function In(i,o=Ke.Default){return(function ji(){return jr}()||$l)(Y(i),o)}function D(i,o=Ke.Default){return"number"!=typeof o&&(o=0|(o.optional&&8)|(o.host&&1)|(o.self&&2)|(o.skipSelf&&4)),In(i,o)}function C(i){const o=[];for(let a=0;a<i.length;a++){const l=Y(i[a]);if(Array.isArray(l)){if(0===l.length)throw new ve(900,!1);let d,f=Ke.Default;for(let _=0;_<l.length;_++){const E=l[_],I=F(E);"number"==typeof I?-1===I?d=E.token:f|=I:d=E}o.push(In(d,f))}else o.push(In(l))}return o}function x(i,o){return i[Ni]=o,i.prototype[Ni]=o,i}function F(i){return i[Ni]}const je=x(No("Optional"),8),yt=x(No("SkipSelf"),4);let Yp;function f0(i){Yp=i}class xu{constructor(o){this.changingThisBreaksApplicationSecurity=o}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function rs(i){return i instanceof xu?i.changingThisBreaksApplicationSecurity:i}const jh=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;var Pn=(()=>((Pn=Pn||{})[Pn.NONE=0]="NONE",Pn[Pn.HTML=1]="HTML",Pn[Pn.STYLE=2]="STYLE",Pn[Pn.SCRIPT=3]="SCRIPT",Pn[Pn.URL=4]="URL",Pn[Pn.RESOURCE_URL=5]="RESOURCE_URL",Pn))();function cg(i){const o=function Fo(){const i=Te();return i&&i[12]}();return o?o.sanitize(Pn.URL,i)||"":function Mu(i,o){const a=function hd(i){return i instanceof xu&&i.getTypeName()||null}(i);if(null!=a&&a!==o){if("ResourceURL"===a&&"URL"===o)return!0;throw new Error(`Required a safe ${o}, got a ${a} (see https://g.co/ng/security#xss)`)}return a===o}(i,"URL")?rs(i):function ho(i){return(i=String(i)).match(jh)?i:"unsafe:"+i}(me(i))}const Jl=new on("ENVIRONMENT_INITIALIZER"),fg=new on("INJECTOR",-1),qh=new on("INJECTOR_DEF_TYPES");class _d{get(o,a=an){if(a===an){const l=new Error(`NullInjectorError: No provider for ${he(o)}!`);throw l.name="NullInjectorError",l}return a}}function pg(...i){return{\u0275providers:ui(0,i)}}function ui(i,...o){const a=[],l=new Set;let d;return vi(o,f=>{const _=f;Xl(_,a,[],l)&&(d||(d=[]),d.push(_))}),void 0!==d&&Sa(d,a),a}function Sa(i,o){for(let a=0;a<i.length;a++){const{providers:d}=i[a];vi(d,f=>{o.push(f)})}}function Xl(i,o,a,l){if(!(i=Y(i)))return!1;let d=null,f=vs(i);const _=!f&&Mt(i);if(f||_){if(_&&!_.standalone)return!1;d=i}else{const I=i.ngModule;if(f=vs(I),!f)return!1;d=I}const E=l.has(d);if(_){if(E)return!1;if(l.add(d),_.dependencies){const I="function"==typeof _.dependencies?_.dependencies():_.dependencies;for(const T of I)Xl(T,o,a,l)}}else{if(!f)return!1;{if(null!=f.imports&&!E){let T;l.add(d);try{vi(f.imports,R=>{Xl(R,o,a,l)&&(T||(T=[]),T.push(R))})}finally{}void 0!==T&&Sa(T,o)}if(!E){const T=Ai(d)||(()=>new d);o.push({provide:d,useFactory:T,deps:Et},{provide:qh,useValue:d,multi:!0},{provide:Jl,useValue:()=>In(d),multi:!0})}const I=f.providers;null==I||E||vi(I,R=>{o.push(R)})}}return d!==i&&void 0!==i.providers}const vd=de({provide:String,useValue:de});function ec(i){return null!==i&&"object"==typeof i&&vd in i}function fo(i){return"function"==typeof i}const Nu=new on("Set Injector scope."),tc={},Gy={};let Ed;function nc(){return void 0===Ed&&(Ed=new _d),Ed}class Fn{}class Id extends Fn{constructor(o,a,l,d){super(),this.parent=a,this.source=l,this.scopes=d,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,bd(o,_=>this.processProvider(_)),this.records.set(fg,Ma(void 0,this)),d.has("environment")&&this.records.set(Fn,Ma(void 0,this));const f=this.records.get(Nu);null!=f&&"string"==typeof f.value&&this.scopes.add(f.value),this.injectorDefTypes=new Set(this.get(qh.multi,Et,Ke.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const o of this._ngOnDestroyHooks)o.ngOnDestroy();for(const o of this._onDestroyHooks)o()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(o){this._onDestroyHooks.push(o)}runInContext(o){this.assertNotDestroyed();const a=es(this),l=Sn(void 0);try{return o()}finally{es(a),Sn(l)}}get(o,a=an,l=Ke.Default){this.assertNotDestroyed();const d=es(this),f=Sn(void 0);try{if(!(l&Ke.SkipSelf)){let E=this.records.get(o);if(void 0===E){const I=function Zh(i){return"function"==typeof i||"object"==typeof i&&i instanceof on}(o)&&Xt(o);E=I&&this.injectableDefInScope(I)?Ma(Aa(o),tc):null,this.records.set(o,E)}if(null!=E)return this.hydrate(o,E)}return(l&Ke.Self?nc():this.parent).get(o,a=l&Ke.Optional&&a===an?null:a)}catch(_){if("NullInjectorError"===_.name){if((_[Tu]=_[Tu]||[]).unshift(he(o)),d)throw _;return function J(i,o,a,l){const d=i[Tu];throw o[jl]&&d.unshift(o[jl]),i.message=function ae(i,o,a,l=null){i=i&&"\n"===i.charAt(0)&&"\u0275"==i.charAt(1)?i.slice(2):i;let d=he(o);if(Array.isArray(o))d=o.map(he).join(" -> ");else if("object"==typeof o){let f=[];for(let _ in o)if(o.hasOwnProperty(_)){let E=o[_];f.push(_+":"+("string"==typeof E?JSON.stringify(E):he(E)))}d=`{${f.join(", ")}}`}return`${a}${l?"("+l+")":""}[${d}]: ${i.replace(Su,"\n  ")}`}("\n"+i.message,d,a,l),i.ngTokenPath=d,i[Tu]=null,i}(_,o,"R3InjectorError",this.source)}throw _}finally{Sn(f),es(d)}}resolveInjectorInitializers(){const o=es(this),a=Sn(void 0);try{const l=this.get(Jl.multi,Et,Ke.Self);for(const d of l)d()}finally{es(o),Sn(a)}}toString(){const o=[],a=this.records;for(const l of a.keys())o.push(he(l));return`R3Injector[${o.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new ve(205,!1)}processProvider(o){let a=fo(o=Y(o))?o:Y(o&&o.provide);const l=function po(i){return ec(i)?Ma(void 0,i.useValue):Ma(xa(i),tc)}(o);if(fo(o)||!0!==o.multi)this.records.get(a);else{let d=this.records.get(a);d||(d=Ma(void 0,tc,!0),d.factory=()=>C(d.multi),this.records.set(a,d)),a=o,d.multi.push(o)}this.records.set(a,l)}hydrate(o,a){return a.value===tc&&(a.value=Gy,a.value=a.factory()),"object"==typeof a.value&&a.value&&function Kh(i){return null!==i&&"object"==typeof i&&"function"==typeof i.ngOnDestroy}(a.value)&&this._ngOnDestroyHooks.add(a.value),a.value}injectableDefInScope(o){if(!o.providedIn)return!1;const a=Y(o.providedIn);return"string"==typeof a?"any"===a||this.scopes.has(a):this.injectorDefTypes.has(a)}}function Aa(i){const o=Xt(i),a=null!==o?o.factory:Ai(i);if(null!==a)return a;if(i instanceof on)throw new ve(204,!1);if(i instanceof Function)return function zy(i){const o=i.length;if(o>0)throw function wi(i,o){const a=[];for(let l=0;l<i;l++)a.push(o);return a}(o,"?"),new ve(204,!1);const a=function pr(i){const o=i&&(i[Ci]||i[hi]);if(o){const a=function Ur(i){if(i.hasOwnProperty("name"))return i.name;const o=(""+i).match(/^function\s*([^\s(]+)/);return null===o?"":o[1]}(i);return console.warn(`DEPRECATED: DI is instantiating a token "${a}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${a}" class.`),o}return null}(i);return null!==a?()=>a.factory(i):()=>new i}(i);throw new ve(204,!1)}function xa(i,o,a){let l;if(fo(i)){const d=Y(i);return Ai(d)||Aa(d)}if(ec(i))l=()=>Y(i.useValue);else if(function Wh(i){return!(!i||!i.useFactory)}(i))l=()=>i.useFactory(...C(i.deps||[]));else if(function wd(i){return!(!i||!i.useExisting)}(i))l=()=>In(Y(i.useExisting));else{const d=Y(i&&(i.useClass||i.provide));if(!function qy(i){return!!i.deps}(i))return Ai(d)||Aa(d);l=()=>new d(...C(i.deps))}return l}function Ma(i,o,a=!1){return{factory:i,value:o,multi:a?[]:void 0}}function gg(i){return!!i.\u0275providers}function bd(i,o){for(const a of i)Array.isArray(a)?bd(a,o):gg(a)?bd(a.\u0275providers,o):o(a)}class mg{}class w{resolveComponentFactory(o){throw function y(i){const o=Error(`No component factory found for ${he(i)}. Did you add it to @NgModule.entryComponents?`);return o.ngComponent=i,o}(o)}}let S=(()=>{class i{}return i.NULL=new w,i})();function N(){return W(vn(),Te())}function W(i,o){return new ue(xr(i,o))}let ue=(()=>{class i{constructor(a){this.nativeElement=a}}return i.__NG_ELEMENT_ID__=N,i})();function Le(i){return i instanceof ue?i.nativeElement:i}class mt{}let gt=(()=>{class i{}return i.__NG_ELEMENT_ID__=()=>function qn(){const i=Te(),a=jt(vn().index,i);return(Xn(a)?a:i)[11]}(),i})(),is=(()=>{class i{}return i.\u0275prov=Wt({token:i,providedIn:"root",factory:()=>null}),i})();class Ou{constructor(o){this.full=o,this.major=o.split(".")[0],this.minor=o.split(".")[1],this.patch=o.split(".").slice(2).join(".")}}const yg=new Ou("14.2.0"),Dd={};function wg(i){return i.ngOriginalError}class ss{constructor(){this._console=console}handleError(o){const a=this._findOriginalError(o);this._console.error("ERROR",o),a&&this._console.error("ORIGINAL ERROR",a)}_findOriginalError(o){let a=o&&wg(o);for(;a&&wg(a);)a=wg(a);return a||null}}const T0=new Map;let jD=0;const Yh="__ngContext__";function yr(i,o){Xn(o)?(i[Yh]=o[20],function S0(i){T0.set(i[20],i)}(o)):i[Yh]=o}function Td(i){const o=i[Yh];return"number"==typeof o?function Yy(i){return T0.get(i)||null}(o):o||null}function Qh(i){const o=Td(i);return o?Xn(o)?o:o.lView:null}function Oa(i){return i instanceof Function?i():i}var Fs=(()=>((Fs=Fs||{})[Fs.Important=1]="Important",Fs[Fs.DashCase=2]="DashCase",Fs))();function O0(i,o){return undefined(i,o)}function bg(i){const o=i[3];return Ar(o)?o[3]:o}function os(i){return Xh(i[13])}function e_(i){return Xh(i[4])}function Xh(i){for(;null!==i&&!Ar(i);)i=i[4];return i}function Sd(i,o,a,l,d){if(null!=l){let f,_=!1;Ar(l)?f=l:Xn(l)&&(_=!0,l=l[0]);const E=_n(l);0===i&&null!==a?null==d?Vo(o,a,E):oc(o,a,E,d||null,!0):1===i&&null!==a?oc(o,a,E,d||null,!0):2===i?function B0(i,o,a){const l=Fu(i,o);l&&function Pu(i,o,a,l){i.removeChild(o,a,l)}(i,l,o,a)}(o,E,_):3===i&&o.destroyNode(E),null!=f&&function Px(i,o,a,l,d){const f=a[7];f!==_n(a)&&Sd(o,i,l,f,d);for(let E=10;E<a.length;E++){const I=a[E];Ad(I[1],I,i,o,l,f)}}(o,i,f,a,d)}}function ic(i,o,a){return i.createElement(o,a)}function n_(i,o){const a=i[9],l=a.indexOf(o),d=o[3];512&o[2]&&(o[2]&=-513,yn(d,-1)),a.splice(l,1)}function tf(i,o){if(i.length<=10)return;const a=10+o,l=i[a];if(l){const d=l[17];null!==d&&d!==i&&n_(d,l),o>0&&(i[a-1][4]=l[4]);const f=Oo(i,10+o);!function YD(i,o){Ad(i,o,o[11],2,null,null),o[0]=null,o[6]=null}(l[1],l);const _=f[19];null!==_&&_.detachView(f[1]),l[3]=null,l[4]=null,l[2]&=-65}return l}function r_(i,o){if(!(128&o[2])){const a=o[11];a.destroyNode&&Ad(i,o,a,3,null,null),function QD(i){let o=i[13];if(!o)return Kn(i[1],i);for(;o;){let a=null;if(Xn(o))a=o[13];else{const l=o[10];l&&(a=l)}if(!a){for(;o&&!o[4]&&o!==i;)Xn(o)&&Kn(o[1],o),o=o[3];null===o&&(o=i),Xn(o)&&Kn(o[1],o),a=o&&o[4]}o=a}}(o)}}function Kn(i,o){if(!(128&o[2])){o[2]&=-65,o[2]|=128,function Tg(i,o){let a;if(null!=i&&null!=(a=i.destroyHooks))for(let l=0;l<a.length;l+=2){const d=o[a[l]];if(!(d instanceof Ss)){const f=a[l+1];if(Array.isArray(f))for(let _=0;_<f.length;_+=2){const E=d[f[_]],I=f[_+1];try{I.call(E)}finally{}}else try{f.call(d)}finally{}}}}(i,o),function nf(i,o){const a=i.cleanup,l=o[7];let d=-1;if(null!==a)for(let f=0;f<a.length-1;f+=2)if("string"==typeof a[f]){const _=a[f+1],E="function"==typeof _?_(o):_n(o[_]),I=l[d=a[f+2]],T=a[f+3];"boolean"==typeof T?E.removeEventListener(a[f],I,T):T>=0?l[d=T]():l[d=-T].unsubscribe(),f+=2}else{const _=l[d=a[f+1]];a[f].call(_)}if(null!==l){for(let f=d+1;f<l.length;f++)(0,l[f])();o[7]=null}}(i,o),1===o[1].type&&o[11].destroy();const a=o[17];if(null!==a&&Ar(o[3])){a!==o[3]&&n_(a,o);const l=o[19];null!==l&&l.detachView(i)}!function A0(i){T0.delete(i[20])}(o)}}function rf(i,o,a){return function i_(i,o,a){let l=o;for(;null!==l&&40&l.type;)l=(o=l).parent;if(null===l)return a[0];if(2&l.flags){const d=i.data[l.directiveStart].encapsulation;if(d===st.None||d===st.Emulated)return null}return xr(l,a)}(i,o.parent,a)}function oc(i,o,a,l,d){i.insertBefore(o,a,l,d)}function Vo(i,o,a){i.appendChild(o,a)}function Yr(i,o,a,l,d){null!==l?oc(i,o,a,l,d):Vo(i,o,a)}function Fu(i,o){return i.parentNode(o)}let U0=function V0(i,o,a){return 40&i.type?xr(i,a):null};function Lu(i,o,a,l){const d=rf(i,l,o),f=o[11],E=function o_(i,o,a){return U0(i,o,a)}(l.parent||o[6],l,o);if(null!=d)if(Array.isArray(a))for(let I=0;I<a.length;I++)Yr(f,d,a[I],E,!1);else Yr(f,d,a,E,!1)}function Sg(i,o){if(null!==o){const a=o.type;if(3&a)return xr(o,i);if(4&a)return a_(-1,i[o.index]);if(8&a){const l=o.child;if(null!==l)return Sg(i,l);{const d=i[o.index];return Ar(d)?a_(-1,d):_n(d)}}if(32&a)return O0(o,i)()||_n(i[o.index]);{const l=ac(i,o);return null!==l?Array.isArray(l)?l[0]:Sg(bg(i[16]),l):Sg(i,o.next)}}return null}function ac(i,o){return null!==o?i[16][6].projection[o.projection]:null}function a_(i,o){const a=10+i+1;if(a<o.length){const l=o[a],d=l[1].firstChild;if(null!==d)return Sg(l,d)}return o[7]}function Ls(i,o,a,l,d,f,_){for(;null!=a;){const E=l[a.index],I=a.type;if(_&&0===o&&(E&&yr(_n(E),l),a.flags|=4),64!=(64&a.flags))if(8&I)Ls(i,o,a.child,l,d,f,!1),Sd(o,i,d,E,f);else if(32&I){const T=O0(a,l);let R;for(;R=T();)Sd(o,i,d,R,f);Sd(o,i,d,E,f)}else 16&I?u_(i,o,l,a,d,f):Sd(o,i,d,E,f);a=_?a.projectionNext:a.next}}function Ad(i,o,a,l,d,f){Ls(a,l,i.firstChild,o,d,f,!1)}function u_(i,o,a,l,d,f){const _=a[16],I=_[6].projection[l.projection];if(Array.isArray(I))for(let T=0;T<I.length;T++)Sd(o,i,d,I[T],f);else Ls(i,o,I,_[3],d,f,!0)}function Pa(i,o,a){i.setAttribute(o,"style",a)}function af(i,o,a){""===a?i.removeAttribute(o,"class"):i.setAttribute(o,"class",a)}function $0(i,o,a){let l=i.length;for(;;){const d=i.indexOf(o,a);if(-1===d)return d;if(0===d||i.charCodeAt(d-1)<=32){const f=o.length;if(d+f===l||i.charCodeAt(d+f)<=32)return d}a=d+1}}const l_="ng-template";function H0(i,o,a){let l=0;for(;l<i.length;){let d=i[l++];if(a&&"class"===d){if(d=i[l],-1!==$0(d.toLowerCase(),o,0))return!0}else if(1===d){for(;l<i.length&&"string"==typeof(d=i[l++]);)if(d.toLowerCase()===o)return!0;return!1}}return!1}function G0(i){return 4===i.type&&i.value!==l_}function z0(i,o,a){return o===(4!==i.type||a?i.value:l_)}function JD(i,o,a){let l=4;const d=i.attrs||[],f=function Bt(i){for(let o=0;o<i.length;o++)if(ro(i[o]))return o;return i.length}(d);let _=!1;for(let E=0;E<o.length;E++){const I=o[E];if("number"!=typeof I){if(!_)if(4&l){if(l=2|1&l,""!==I&&!z0(i,I,a)||""===I&&1===o.length){if(Vs(l))return!1;_=!0}}else{const T=8&l?I:o[++E];if(8&l&&null!==i.attrs){if(!H0(i.attrs,T,a)){if(Vs(l))return!1;_=!0}continue}const k=q0(8&l?"class":I,d,G0(i),a);if(-1===k){if(Vs(l))return!1;_=!0;continue}if(""!==T){let z;z=k>f?"":d[k+1].toLowerCase();const te=8&l?z:null;if(te&&-1!==$0(te,T,0)||2&l&&T!==z){if(Vs(l))return!1;_=!0}}}}else{if(!_&&!Vs(l)&&!Vs(I))return!1;if(_&&Vs(I))continue;_=!1,l=I|1&l}}return Vs(l)||_}function Vs(i){return 0==(1&i)}function q0(i,o,a,l){if(null===o)return-1;let d=0;if(l||!a){let f=!1;for(;d<o.length;){const _=o[d];if(_===i)return d;if(3===_||6===_)f=!0;else{if(1===_||2===_){let E=o[++d];for(;"string"==typeof E;)E=o[++d];continue}if(4===_)break;if(0===_){d+=4;continue}}d+=f?1:2}return-1}return function lf(i,o){let a=i.indexOf(4);if(a>-1)for(a++;a<i.length;){const l=i[a];if("number"==typeof l)return-1;if(l===o)return a;a++}return-1}(o,i)}function uf(i,o,a=!1){for(let l=0;l<o.length;l++)if(JD(i,o[l],a))return!0;return!1}function Vu(i,o){return i?":not("+o.trim()+")":o}function eC(i){let o=i[0],a=1,l=2,d="",f=!1;for(;a<i.length;){let _=i[a];if("string"==typeof _)if(2&l){const E=i[++a];d+="["+_+(E.length>0?'="'+E+'"':"")+"]"}else 8&l?d+="."+_:4&l&&(d+=" "+_);else""!==d&&!Vs(_)&&(o+=Vu(f,d),d=""),l=_,f=f||!Vs(l);a++}return""!==d&&(o+=Vu(f,d)),o}const Nt={};function Z0(i,o=null,a=null,l){const d=cf(i,o,a,l);return d.resolveInjectorInitializers(),d}function cf(i,o=null,a=null,l,d=new Set){const f=[a||Et,pg(i)];return l=l||("object"==typeof i?void 0:he(i)),new Id(f,o||nc(),l||null,d)}let lc=(()=>{class i{static create(a,l){if(Array.isArray(a))return Z0({name:""},l,a,"");{const d=a.name??"";return Z0({name:d},a.parent,a.providers,d)}}}return i.THROW_IF_NOT_FOUND=an,i.NULL=new _d,i.\u0275prov=Wt({token:i,providedIn:"any",factory:()=>In(fg)}),i.__NG_ELEMENT_ID__=-1,i})();function Fi(i,o=Ke.Default){const a=Te();return null===a?In(i,o):so(vn(),a,Y(i),o)}function kg(){throw new Error("invalid")}function dc(i,o){return i<<17|o<<2}function Us(i){return i>>17&32767}function w_(i){return 2|i}function Fa(i){return(131068&i)>>2}function E_(i,o){return-131069&i|o<<2}function I_(i){return 1|i}function mC(i,o){const a=i.contentQueries;if(null!==a)for(let l=0;l<a.length;l+=2){const d=a[l],f=a[l+1];if(-1!==f){const _=i.data[f];ua(d),_.contentQueries(2,o[f],f)}}}function Ug(i,o,a,l,d,f,_,E,I,T,R){const k=o.blueprint.slice();return k[0]=d,k[2]=76|l,(null!==R||i&&1024&i[2])&&(k[2]|=1024),nu(k),k[3]=k[15]=i,k[8]=a,k[10]=_||i&&i[10],k[11]=E||i&&i[11],k[12]=I||i&&i[12]||null,k[9]=T||i&&i[9]||null,k[6]=f,k[20]=function $D(){return jD++}(),k[21]=R,k[16]=2==o.type?i[16]:k,k}function Ld(i,o,a,l,d){let f=i.data[o];if(null===f)f=function yf(i,o,a,l,d){const f=ou(),_=ia(),I=i.data[o]=function wf(i,o,a,l,d,f){return{type:a,index:l,insertBeforeIndex:null,injectorIndex:o?o.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:d,attrs:f,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:o,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,_?f:f&&f.parent,a,o,l,d);return null===i.firstChild&&(i.firstChild=I),null!==f&&(_?null==f.child&&null!==I.parent&&(f.child=I):null===f.next&&(f.next=I)),I}(i,o,a,l,d),function Hp(){return It.lFrame.inI18n}()&&(f.flags|=64);else if(64&f.type){f.type=a,f.value=l,f.attrs=d;const _=function Eo(){const i=It.lFrame,o=i.currentTNode;return i.isParent?o:o.parent}();f.injectorIndex=null===_?-1:_.injectorIndex}return ai(f,!0),f}function Jr(i,o,a,l){if(0===a)return-1;const d=o.length;for(let f=0;f<a;f++)o.push(l),i.blueprint.push(l),i.data.push(null);return d}function _f(i,o,a){lu(o);try{const l=i.viewQuery;null!==l&&P_(1,l,a);const d=i.template;null!==d&&fE(i,o,d,1,a),i.firstCreatePass&&(i.firstCreatePass=!1),i.staticContentQueries&&mC(i,o),i.staticViewQueries&&P_(2,i.viewQuery,a);const f=i.components;null!==f&&function yC(i,o){for(let a=0;a<o.length;a++)CE(i,o[a])}(o,f)}catch(l){throw i.firstCreatePass&&(i.incompleteFirstPass=!0,i.firstCreatePass=!1),l}finally{o[2]&=-5,eo()}}function Ba(i,o,a,l){const d=o[2];if(128!=(128&d)){lu(o);try{nu(o),function Dl(i){return It.lFrame.bindingIndex=i}(i.bindingStartIndex),null!==a&&fE(i,o,a,2,l);const _=3==(3&d);if(_){const T=i.preOrderCheckHooks;null!==T&&Io(o,T,null)}else{const T=i.preOrderHooks;null!==T&&bo(o,T,0,null),ed(o,0)}if(function xC(i){for(let o=os(i);null!==o;o=e_(o)){if(!o[2])continue;const a=o[9];for(let l=0;l<a.length;l++){const d=a[l],f=d[3];0==(512&d[2])&&yn(f,1),d[2]|=512}}}(o),function AC(i){for(let o=os(i);null!==o;o=e_(o))for(let a=10;a<o.length;a++){const l=o[a],d=l[1];Qs(l)&&Ba(d,l,d.template,l[8])}}(o),null!==i.contentQueries&&mC(i,o),_){const T=i.contentCheckHooks;null!==T&&Io(o,T)}else{const T=i.contentHooks;null!==T&&bo(o,T,1),ed(o,1)}!function qx(i,o){const a=i.hostBindingOpCodes;if(null!==a)try{for(let l=0;l<a.length;l++){const d=a[l];if(d<0)Hr(~d);else{const f=d,_=a[++l],E=a[++l];Gp(_,f),E(2,o[f])}}}finally{Hr(-1)}}(i,o);const E=i.components;null!==E&&function x_(i,o){for(let a=0;a<o.length;a++)MC(i,o[a])}(o,E);const I=i.viewQuery;if(null!==I&&P_(2,I,l),_){const T=i.viewCheckHooks;null!==T&&Io(o,T)}else{const T=i.viewHooks;null!==T&&bo(o,T,2),ed(o,2)}!0===i.firstUpdatePass&&(i.firstUpdatePass=!1),o[2]&=-41,512&o[2]&&(o[2]&=-513,yn(o[3],-1))}finally{eo()}}}function _C(i,o,a,l){const d=o[10],_=na(o);try{!_&&d.begin&&d.begin(),_&&_f(i,o,l),Ba(i,o,a,l)}finally{!_&&d.end&&d.end()}}function fE(i,o,a,l,d){const f=zn(),_=2&l;try{Hr(-1),_&&o.length>22&&function xd(i,o,a,l){if(!l)if(3==(3&o[2])){const f=i.preOrderCheckHooks;null!==f&&Io(o,f,a)}else{const f=i.preOrderHooks;null!==f&&bo(o,f,0,a)}Hr(a)}(i,o,22,!1),a(l,d)}finally{Hr(f)}}function pE(i){const o=i.tView;return null===o||o.incompleteFirstPass?i.tView=ju(1,null,i.template,i.decls,i.vars,i.directiveDefs,i.pipeDefs,i.viewQuery,i.schemas,i.consts):o}function ju(i,o,a,l,d,f,_,E,I,T){const R=22+l,k=R+d,z=function vf(i,o){const a=[];for(let l=0;l<o;l++)a.push(l<i?null:Nt);return a}(R,k),te="function"==typeof T?T():T;return z[1]={type:i,blueprint:z,template:a,queries:null,viewQuery:E,declTNode:o,data:z.slice().fill(null,R),bindingStartIndex:R,expandoStartIndex:k,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof f?f():f,pipeRegistry:"function"==typeof _?_():_,firstChild:null,schemas:I,consts:te,incompleteFirstPass:!1}}function Ud(i,o,a,l){const d=AE(o);null===a?d.push(l):(d.push(a),i.firstCreatePass&&Df(i).push(l,d.length-1))}function gE(i,o,a){for(let l in i)if(i.hasOwnProperty(l)){const d=i[l];(a=null===a?{}:a).hasOwnProperty(l)?a[l].push(o,d):a[l]=[o,d]}return a}function mE(i,o){const l=o.directiveEnd,d=i.data,f=o.attrs,_=[];let E=null,I=null;for(let T=o.directiveStart;T<l;T++){const R=d[T],k=R.inputs,z=null===f||G0(o)?null:N_(k,f);_.push(z),E=gE(k,T,E),I=gE(R.outputs,T,I)}null!==E&&(E.hasOwnProperty("class")&&(o.flags|=16),E.hasOwnProperty("style")&&(o.flags|=32)),o.initialInputs=_,o.inputs=E,o.outputs=I}function If(i,o,a,l,d,f){const _=f.hostBindings;if(_){let E=i.hostBindingOpCodes;null===E&&(E=i.hostBindingOpCodes=[]);const I=~o.index;(function Bd(i){let o=i.length;for(;o>0;){const a=i[--o];if("number"==typeof a&&a<0)return a}return 0})(E)!=I&&E.push(I),E.push(l,d,_)}}function _E(i,o){null!==i.hostBindings&&i.hostBindings(1,o)}function vE(i,o){o.flags|=2,(i.components||(i.components=[])).push(o.index)}function SC(i,o,a){if(a){if(o.exportAs)for(let l=0;l<o.exportAs.length;l++)a[o.exportAs[l]]=i;gr(o)&&(a[""]=i)}}function wE(i,o,a){i.flags|=1,i.directiveStart=o,i.directiveEnd=o+a,i.providerIndexes=o}function EE(i,o,a,l,d){i.data[l]=d;const f=d.factory||(d.factory=Ai(d.type)),_=new Ss(f,gr(d),Fi);i.blueprint[l]=_,a[l]=_,If(i,o,0,l,Jr(i,a,d.hostVars,Nt),d)}function IE(i,o,a){const l=xr(o,i),d=pE(a),f=i[10],_=hc(i,Ug(i,d,null,a.onPush?32:16,l,o,f,f.createRenderer(l,a),null,null,null));i[o.index]=_}function Uo(i,o,a,l,d,f){const _=xr(i,o);!function bf(i,o,a,l,d,f,_){if(null==f)i.removeAttribute(o,d,a);else{const E=null==_?me(f):_(f,l||"",d);i.setAttribute(o,d,E,a)}}(o[11],_,f,i.value,a,l,d)}function bE(i,o,a,l,d,f){const _=f[o];if(null!==_){const E=l.setInput;for(let I=0;I<_.length;){const T=_[I++],R=_[I++],k=_[I++];null!==E?l.setInput(a,k,T,R):a[R]=k}}}function N_(i,o){let a=null,l=0;for(;l<o.length;){const d=o[l];if(0!==d)if(5!==d){if("number"==typeof d)break;i.hasOwnProperty(d)&&(null===a&&(a=[]),a.push(d,i[d],o[l+1])),l+=2}else l+=2;else l+=4}return a}function MC(i,o){const a=jt(o,i);if(Qs(a)){const l=a[1];48&a[2]?Ba(l,a,l.template,a[8]):a[5]>0&&jd(a)}}function jd(i){for(let l=os(i);null!==l;l=e_(l))for(let d=10;d<l.length;d++){const f=l[d];if(Qs(f))if(512&f[2]){const _=f[1];Ba(_,f,_.template,f[8])}else f[5]>0&&jd(f)}const a=i[1].components;if(null!==a)for(let l=0;l<a.length;l++){const d=jt(a[l],i);Qs(d)&&d[5]>0&&jd(d)}}function CE(i,o){const a=jt(o,i),l=a[1];(function TE(i,o){for(let a=o.length;a<i.blueprint.length;a++)o.push(i.blueprint[a])})(l,a),_f(l,a,a[8])}function hc(i,o){return i[13]?i[14][4]=o:i[13]=o,i[14]=o,o}function $d(i){for(;i;){i[2]|=32;const o=bg(i);if(Ch(i)&&!o)return i;i=o}return null}function P_(i,o,a){ua(0),o(i,a)}function AE(i){return i[7]||(i[7]=[])}function Df(i){return i.cleanup||(i.cleanup=[])}function ME(i,o){const a=i[9],l=a?a.get(ss,null):null;l&&l.handleError(o)}function F_(i,o,a,l,d){for(let f=0;f<a.length;){const _=a[f++],E=a[f++],I=o[_],T=i.data[_];null!==T.setInput?T.setInput(I,d,l,E):I[E]=d}}function Bg(i,o,a){let l=a?i.styles:null,d=a?i.classes:null,f=0;if(null!==o)for(let _=0;_<o.length;_++){const E=o[_];"number"==typeof E?f=E:1==f?d=pe(d,E):2==f&&(l=pe(l,E+": "+o[++_]+";"))}a?i.styles=l:i.stylesWithoutHost=l,a?i.classes=d:i.classesWithoutHost=d}function jg(i,o,a,l,d=!1){for(;null!==a;){const f=o[a.index];if(null!==f&&l.push(_n(f)),Ar(f))for(let E=10;E<f.length;E++){const I=f[E],T=I[1].firstChild;null!==T&&jg(I[1],I,T,l)}const _=a.type;if(8&_)jg(i,o,a.child,l);else if(32&_){const E=O0(a,o);let I;for(;I=E();)l.push(I)}else if(16&_){const E=ac(o,a);if(Array.isArray(E))l.push(...E);else{const I=bg(o[16]);jg(I[1],I,E,l,!0)}}a=d?a.projectionNext:a.next}return l}class Cf{constructor(o,a){this._lView=o,this._cdRefInjectingView=a,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const o=this._lView,a=o[1];return jg(a,o,a.firstChild,[])}get context(){return this._lView[8]}set context(o){this._lView[8]=o}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const o=this._lView[3];if(Ar(o)){const a=o[8],l=a?a.indexOf(this):-1;l>-1&&(tf(o,l),Oo(a,l))}this._attachedToViewContainer=!1}r_(this._lView[1],this._lView)}onDestroy(o){Ud(this._lView[1],this._lView,null,o)}markForCheck(){$d(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){!function fc(i,o,a){const l=o[10];l.begin&&l.begin();try{Ba(i,o,i.template,a)}catch(d){throw ME(o,d),d}finally{l.end&&l.end()}}(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new ve(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function L0(i,o){Ad(i,o,o[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(o){if(this._attachedToViewContainer)throw new ve(902,!1);this._appRef=o}}class RE extends Cf{constructor(o){super(o),this._view=o}detectChanges(){!function k_(i){!function SE(i){for(let o=0;o<i.components.length;o++){const a=i.components[o],l=Qh(a);if(null!==l){const d=l[1];_C(d,l,d.template,a)}}}(i[8])}(this._view)}checkNoChanges(){}get context(){return null}}class L_ extends S{constructor(o){super(),this.ngModule=o}resolveComponentFactory(o){const a=Mt(o);return new Hd(a,this.ngModule)}}function V_(i){const o=[];for(let a in i)i.hasOwnProperty(a)&&o.push({propName:i[a],templateName:a});return o}class OE{constructor(o,a){this.injector=o,this.parentInjector=a}get(o,a,l){const d=this.injector.get(o,Dd,l);return d!==Dd||a===Dd?d:this.parentInjector.get(o,a,l)}}class Hd extends mg{constructor(o,a){super(),this.componentDef=o,this.ngModule=a,this.componentType=o.type,this.selector=function W0(i){return i.map(eC).join(",")}(o.selectors),this.ngContentSelectors=o.ngContentSelectors?o.ngContentSelectors:[],this.isBoundToModule=!!a}get inputs(){return V_(this.componentDef.inputs)}get outputs(){return V_(this.componentDef.outputs)}create(o,a,l,d){let f=(d=d||this.ngModule)instanceof Fn?d:d?.injector;f&&null!==this.componentDef.getStandaloneInjector&&(f=this.componentDef.getStandaloneInjector(f)||f);const _=f?new OE(o,f):o,E=_.get(mt,null);if(null===E)throw new ve(407,!1);const I=_.get(is,null),T=E.createRenderer(null,this.componentDef),R=this.componentDef.selectors[0][0]||"div",k=l?function vC(i,o,a){return i.selectRootElement(o,a===st.ShadowDom)}(T,l,this.componentDef.encapsulation):ic(E.createRenderer(null,this.componentDef),R,function NE(i){const o=i.toLowerCase();return"svg"===o?"svg":"math"===o?"math":null}(R)),z=this.componentDef.onPush?288:272,te={components:[]},we=ju(0,null,null,1,0,null,null,null,null,null),Se=Ug(null,we,te,z,null,null,E,T,I,_,null);let ze,Fe;lu(Se);try{const wt=function NC(i,o,a,l,d,f){const _=a[1];a[22]=i;const I=Ld(_,22,2,"#host",null),T=I.mergedAttrs=o.hostAttrs;null!==T&&(Bg(I,T,!0),null!==i&&(To(d,i,T),null!==I.classes&&af(d,i,I.classes),null!==I.styles&&Pa(d,i,I.styles)));const R=l.createRenderer(i,o),k=Ug(a,pE(o),null,o.onPush?32:16,a[22],I,l,R,f||null,null,null);return _.firstCreatePass&&(As(io(I,a),_,o.type),vE(_,I),wE(I,a.length,1)),hc(a,k),a[22]=k}(k,this.componentDef,Se,E,T);if(k)if(l)To(T,k,["ng-version",yg.full]);else{const{attrs:Re,classes:ot}=function c_(i){const o=[],a=[];let l=1,d=2;for(;l<i.length;){let f=i[l];if("string"==typeof f)2===d?""!==f&&o.push(f,i[++l]):8===d&&a.push(f);else{if(!Vs(d))break;d=f}l++}return{attrs:o,classes:a}}(this.componentDef.selectors[0]);Re&&To(T,k,Re),ot&&ot.length>0&&af(T,k,ot.join(" "))}if(Fe=Ys(we,22),void 0!==a){const Re=Fe.projection=[];for(let ot=0;ot<this.ngContentSelectors.length;ot++){const Ht=a[ot];Re.push(null!=Ht?Array.from(Ht):null)}}ze=function OC(i,o,a,l,d){const f=a[1],_=function IC(i,o,a){const l=vn();i.firstCreatePass&&(a.providersResolver&&a.providersResolver(a),EE(i,l,o,Jr(i,o,1,null),a),mE(i,l));const d=Yi(o,i,l.directiveStart,l);yr(d,o);const f=xr(l,o);return f&&yr(f,o),d}(f,a,o);if(l.components.push(_),i[8]=_,null!==d)for(const I of d)I(_,o);if(o.contentQueries){const I=vn();o.contentQueries(1,_,I.directiveStart)}const E=vn();return!f.firstCreatePass||null===o.hostBindings&&null===o.hostAttrs||(Hr(E.index),If(a[1],E,0,E.directiveStart,E.directiveEnd,o),_E(o,_)),_}(wt,this.componentDef,Se,te,[PE]),_f(we,Se,null)}finally{eo()}return new RC(this.componentType,ze,W(Fe,Se),Se,Fe)}}class RC extends class Ra{}{constructor(o,a,l,d,f){super(),this.location=l,this._rootLView=d,this._tNode=f,this.instance=a,this.hostView=this.changeDetectorRef=new RE(d),this.componentType=o}setInput(o,a){const l=this._tNode.inputs;let d;if(null!==l&&(d=l[o])){const f=this._rootLView;F_(f[1],f,d,o,a),function yE(i,o){const a=jt(o,i);16&a[2]||(a[2]|=32)}(f,this._tNode.index)}}get injector(){return new oo(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(o){this.hostView.onDestroy(o)}}function PE(){const i=vn();Ol(Te()[1],i)}function Hg(i){let o=function $g(i){return Object.getPrototypeOf(i.prototype).constructor}(i.type),a=!0;const l=[i];for(;o;){let d;if(gr(i))d=o.\u0275cmp||o.\u0275dir;else{if(o.\u0275cmp)throw new ve(903,!1);d=o.\u0275dir}if(d){if(a){l.push(d);const _=i;_.inputs=LE(i.inputs),_.declaredInputs=LE(i.declaredInputs),_.outputs=LE(i.outputs);const E=d.hostBindings;E&&LC(i,E);const I=d.viewQuery,T=d.contentQueries;if(I&&PC(i,I),T&&FC(i,T),le(i.inputs,d.inputs),le(i.declaredInputs,d.declaredInputs),le(i.outputs,d.outputs),gr(d)&&d.data.animation){const R=i.data;R.animation=(R.animation||[]).concat(d.data.animation)}}const f=d.features;if(f)for(let _=0;_<f.length;_++){const E=f[_];E&&E.ngInherit&&E(i),E===Hg&&(a=!1)}}o=Object.getPrototypeOf(o)}!function FE(i){let o=0,a=null;for(let l=i.length-1;l>=0;l--){const d=i[l];d.hostVars=o+=d.hostVars,d.hostAttrs=la(d.hostAttrs,a=la(a,d.hostAttrs))}}(l)}function LE(i){return i===Tr?{}:i===Et?[]:i}function PC(i,o){const a=i.viewQuery;i.viewQuery=a?(l,d)=>{o(l,d),a(l,d)}:o}function FC(i,o){const a=i.contentQueries;i.contentQueries=a?(l,d,f)=>{o(l,d,f),a(l,d,f)}:o}function LC(i,o){const a=i.hostBindings;i.hostBindings=a?(l,d)=>{o(l,d),a(l,d)}:o}let Gd=null;function $a(){if(!Gd){const i=nn.Symbol;if(i&&i.iterator)Gd=i.iterator;else{const o=Object.getOwnPropertyNames(Map.prototype);for(let a=0;a<o.length;++a){const l=o[a];"entries"!==l&&"size"!==l&&Map.prototype[l]===Map.prototype.entries&&(Gd=l)}}}return Gd}function Tf(i){return!!U_(i)&&(Array.isArray(i)||!(i instanceof Map)&&$a()in i)}function U_(i){return null!==i&&("function"==typeof i||"object"==typeof i)}function Xr(i,o,a){return!Object.is(i[o],a)&&(i[o]=a,!0)}function Af(i,o,a,l){const d=Te();return Xr(d,function Xs(){return It.lFrame.bindingIndex++}(),o)&&(Ft(),Uo(function hn(){const i=It.lFrame;return Ys(i.tView,i.selectedIndex)}(),d,i,o,a,l)),Af}function Kd(i,o,a,l,d){const _=d?"class":"style";F_(i,a,o.inputs[_],_,l)}function Nf(i,o,a,l){const d=Te(),f=Ft(),_=22+i,E=d[11],I=d[_]=ic(E,o,function du(){return It.lFrame.currentNamespace}()),T=f.firstCreatePass?function eM(i,o,a,l,d,f,_){const E=o.consts,T=Ld(o,i,2,d,yi(E,f));return function Ef(i,o,a,l){let d=!1;if(Ki()){const f=function CC(i,o,a){const l=i.directiveRegistry;let d=null;if(l)for(let f=0;f<l.length;f++){const _=l[f];uf(a,_.selectors,!1)&&(d||(d=[]),As(io(a,o),i,_.type),gr(_)?(vE(i,a),d.unshift(_)):d.push(_))}return d}(i,o,a),_=null===l?null:{"":-1};if(null!==f){d=!0,wE(a,i.data.length,f.length);for(let R=0;R<f.length;R++){const k=f[R];k.providersResolver&&k.providersResolver(k)}let E=!1,I=!1,T=Jr(i,o,f.length,null);for(let R=0;R<f.length;R++){const k=f[R];a.mergedAttrs=la(a.mergedAttrs,k.hostAttrs),EE(i,a,o,T,k),SC(T,k,_),null!==k.contentQueries&&(a.flags|=8),(null!==k.hostBindings||null!==k.hostAttrs||0!==k.hostVars)&&(a.flags|=128);const z=k.type.prototype;!E&&(z.ngOnChanges||z.ngOnInit||z.ngDoCheck)&&((i.preOrderHooks||(i.preOrderHooks=[])).push(a.index),E=!0),!I&&(z.ngOnChanges||z.ngDoCheck)&&((i.preOrderCheckHooks||(i.preOrderCheckHooks=[])).push(a.index),I=!0),T++}mE(i,a)}_&&function TC(i,o,a){if(o){const l=i.localNames=[];for(let d=0;d<o.length;d+=2){const f=a[o[d+1]];if(null==f)throw new ve(-301,!1);l.push(o[d],f)}}}(a,l,_)}return a.mergedAttrs=la(a.mergedAttrs,a.attrs),d}(o,a,T,yi(E,_)),null!==T.attrs&&Bg(T,T.attrs,!1),null!==T.mergedAttrs&&Bg(T,T.mergedAttrs,!0),null!==o.queries&&o.queries.elementStart(o,T),T}(_,f,d,0,o,a,l):f.data[_];ai(T,!0);const R=T.mergedAttrs;null!==R&&To(E,I,R);const k=T.classes;null!==k&&af(E,I,k);const z=T.styles;return null!==z&&Pa(E,I,z),64!=(64&T.flags)&&Lu(f,d,I,T),0===function iu(){return It.lFrame.elementDepthCount}()&&yr(I,d),function su(){It.lFrame.elementDepthCount++}(),fl(T)&&(function Vd(i,o,a){!Ki()||(function bC(i,o,a,l){const d=a.directiveStart,f=a.directiveEnd;i.firstCreatePass||io(a,o),yr(l,o);const _=a.initialInputs;for(let E=d;E<f;E++){const I=i.data[E],T=gr(I);T&&IE(o,a,I);const R=Yi(o,i,E,a);yr(R,o),null!==_&&bE(0,E-d,R,I,0,_),T&&(jt(a.index,o)[8]=R)}}(i,o,a,xr(a,o)),128==(128&a.flags)&&function DC(i,o,a){const l=a.directiveStart,d=a.directiveEnd,f=a.index,_=function Cl(){return It.lFrame.currentDirectiveIndex}();try{Hr(f);for(let E=l;E<d;E++){const I=i.data[E],T=o[E];au(E),(null!==I.hostBindings||0!==I.hostVars||null!==I.hostAttrs)&&_E(I,T)}}finally{Hr(-1),au(_)}}(i,o,a))}(f,d,T),function M_(i,o,a){if(Ya(o)){const d=o.directiveEnd;for(let f=o.directiveStart;f<d;f++){const _=i.data[f];_.contentQueries&&_.contentQueries(1,a[f],f)}}}(f,T,d)),null!==l&&function R_(i,o,a=xr){const l=o.localNames;if(null!==l){let d=o.index+1;for(let f=0;f<l.length;f+=2){const _=l[f+1],E=-1===_?a(o,i):i[_];i[d++]=E}}}(d,T),Nf}function Zg(){let i=vn();ia()?function sa(){It.lFrame.isParent=!1}():(i=i.parent,ai(i,!1));const o=i;!function _l(){It.lFrame.elementDepthCount--}();const a=Ft();return a.firstCreatePass&&(Ol(a,i),Ya(i)&&a.queries.elementEnd(i)),null!=o.classesWithoutHost&&function pu(i){return 0!=(16&i.flags)}(o)&&Kd(a,o,Te(),o.classesWithoutHost,!0),null!=o.stylesWithoutHost&&function nd(i){return 0!=(32&i.flags)}(o)&&Kd(a,o,Te(),o.stylesWithoutHost,!1),Zg}function H_(i,o,a,l){return Nf(i,o,a,l),Zg(),H_}function q_(i){return!!i&&"function"==typeof i.then}function W_(i){return!!i&&"function"==typeof i.subscribe}const $E=W_;function HE(i,o,a,l){const d=Te(),f=Ft(),_=vn();return function zE(i,o,a,l,d,f,_,E){const I=fl(l),R=i.firstCreatePass&&Df(i),k=o[8],z=AE(o);let te=!0;if(3&l.type||E){const ze=xr(l,o),Fe=E?E(ze):ze,wt=z.length,Re=E?Ht=>E(_n(Ht[l.index])):l.index;let ot=null;if(!E&&I&&(ot=function ZC(i,o,a,l){const d=i.cleanup;if(null!=d)for(let f=0;f<d.length-1;f+=2){const _=d[f];if(_===a&&d[f+1]===l){const E=o[7],I=d[f+2];return E.length>I?E[I]:null}"string"==typeof _&&(f+=2)}return null}(i,o,d,l.index)),null!==ot)(ot.__ngLastListenerFn__||ot).__ngNextListenerFn__=f,ot.__ngLastListenerFn__=f,te=!1;else{f=WE(l,o,k,f,!1);const Ht=a.listen(Fe,d,f);z.push(f,Ht),R&&R.push(d,Re,wt,wt+1)}}else f=WE(l,o,k,f,!1);const we=l.outputs;let Se;if(te&&null!==we&&(Se=we[d])){const ze=Se.length;if(ze)for(let Fe=0;Fe<ze;Fe+=2){const cn=o[Se[Fe]][Se[Fe+1]].subscribe(f),Ko=z.length;z.push(f,cn),R&&R.push(d,l.index,Ko,-(Ko+1))}}}(f,d,d[11],_,i,o,0,l),HE}function qE(i,o,a,l){try{return!1!==a(l)}catch(d){return ME(i,d),!1}}function WE(i,o,a,l,d){return function f(_){if(_===Function)return l;$d(2&i.flags?jt(i.index,o):o);let I=qE(o,0,l,_),T=f.__ngNextListenerFn__;for(;T;)I=qE(o,0,T,_)&&I,T=T.__ngNextListenerFn__;return d&&!1===I&&(_.preventDefault(),_.returnValue=!1),I}}function JC(i,o,a,l,d){const f=i[a+1],_=null===o;let E=l?Us(f):Fa(f),I=!1;for(;0!==E&&(!1===I||_);){const R=i[E+1];tM(i[E],o)&&(I=!0,i[E+1]=l?I_(R):w_(R)),E=l?Us(R):Fa(R)}I&&(i[a+1]=l?w_(f):I_(f))}function tM(i,o){return null===i||null==o||(Array.isArray(i)?i[1]:i)===o||!(!Array.isArray(i)||"string"!=typeof o)&&Xi(i,o)>=0}function ev(i,o){return function cs(i,o,a,l){const d=Te(),f=Ft(),_=function Zi(i){const o=It.lFrame,a=o.bindingIndex;return o.bindingIndex=o.bindingIndex+i,a}(2);f.firstUpdatePass&&function eI(i,o,a,l){const d=i.data;if(null===d[a+1]){const f=d[zn()],_=function XE(i,o){return o>=i.expandoStartIndex}(i,a);(function nI(i,o){return 0!=(i.flags&(o?16:32))})(f,l)&&null===o&&!_&&(o=!1),o=function tI(i,o,a,l){const d=function aa(i){const o=It.lFrame.currentDirectiveIndex;return-1===o?null:i[o]}(i);let f=l?o.residualClasses:o.residualStyles;if(null===d)0===(l?o.classBindings:o.styleBindings)&&(a=vr(a=tv(null,i,o,a,l),o.attrs,l),f=null);else{const _=o.directiveStylingLast;if(-1===_||i[_]!==d)if(a=tv(d,i,o,a,l),null===f){let I=function nT(i,o,a){const l=a?o.classBindings:o.styleBindings;if(0!==Fa(l))return i[Us(l)]}(i,o,l);void 0!==I&&Array.isArray(I)&&(I=tv(null,i,o,I[1],l),I=vr(I,o.attrs,l),function rT(i,o,a,l){i[Us(a?o.classBindings:o.styleBindings)]=l}(i,o,l,I))}else f=function iT(i,o,a){let l;const d=o.directiveEnd;for(let f=1+o.directiveStylingLast;f<d;f++)l=vr(l,i[f].hostAttrs,a);return vr(l,o.attrs,a)}(i,o,l)}return void 0!==f&&(l?o.residualClasses=f:o.residualStyles=f),a}(d,f,o,l),function QC(i,o,a,l,d,f){let _=f?o.classBindings:o.styleBindings,E=Us(_),I=Fa(_);i[l]=a;let R,T=!1;if(Array.isArray(a)){const k=a;R=k[1],(null===R||Xi(k,R)>0)&&(T=!0)}else R=a;if(d)if(0!==I){const z=Us(i[E+1]);i[l+1]=dc(z,E),0!==z&&(i[z+1]=E_(i[z+1],l)),i[E+1]=function dC(i,o){return 131071&i|o<<17}(i[E+1],l)}else i[l+1]=dc(E,0),0!==E&&(i[E+1]=E_(i[E+1],l)),E=l;else i[l+1]=dc(I,0),0===E?E=l:i[I+1]=E_(i[I+1],l),I=l;T&&(i[l+1]=w_(i[l+1])),JC(i,R,l,!0),JC(i,R,l,!1),function J_(i,o,a,l,d){const f=d?i.residualClasses:i.residualStyles;null!=f&&"string"==typeof o&&Xi(f,o)>=0&&(a[l+1]=I_(a[l+1]))}(o,R,i,l,f),_=dc(E,I),f?o.classBindings=_:o.styleBindings=_}(d,f,o,a,_,l)}}(f,i,_,l),o!==Nt&&Xr(d,_,o)&&function Pf(i,o,a,l,d,f,_,E){if(!(3&o.type))return;const I=i.data,T=I[E+1];Yd(function nE(i){return 1==(1&i)}(T)?Xg(I,o,a,d,Fa(T),_):void 0)||(Yd(f)||function tE(i){return 2==(2&i)}(T)&&(f=Xg(I,null,a,d,E,_)),function Qr(i,o,a,l,d){if(o)d?i.addClass(a,l):i.removeClass(a,l);else{let f=-1===l.indexOf("-")?void 0:Fs.DashCase;null==d?i.removeStyle(a,l,f):("string"==typeof d&&d.endsWith("!important")&&(d=d.slice(0,-10),f|=Fs.Important),i.setStyle(a,l,d,f))}}(l,_,function oi(i,o){return _n(o[i])}(zn(),a),d,f))}(f,f.data[zn()],d,d[11],i,d[_+1]=function sT(i,o){return null==i||("string"==typeof o?i+=o:"object"==typeof i&&(i=he(rs(i)))),i}(o,a),l,_)}(i,o,null,!0),ev}function tv(i,o,a,l,d){let f=null;const _=a.directiveEnd;let E=a.directiveStylingLast;for(-1===E?E=a.directiveStart:E++;E<_&&(f=o[E],l=vr(l,f.hostAttrs,d),f!==i);)E++;return null!==i&&(a.directiveStylingLast=E),l}function vr(i,o,a){const l=a?1:2;let d=-1;if(null!==o)for(let f=0;f<o.length;f++){const _=o[f];"number"==typeof _?d=_:d===l&&(Array.isArray(i)||(i=void 0===i?[]:["",i]),Mr(i,_,!!a||o[++f]))}return void 0===i?null:i}function Xg(i,o,a,l,d,f){const _=null===o;let E;for(;d>0;){const I=i[d],T=Array.isArray(I),R=T?I[1]:I,k=null===R;let z=a[d+1];z===Nt&&(z=k?Et:void 0);let te=k?va(z,l):R===l?z:void 0;if(T&&!Yd(te)&&(te=va(I,l)),Yd(te)&&(E=te,_))return E;const we=i[d+1];d=_?Us(we):Fa(we)}if(null!==o){let I=f?o.residualClasses:o.residualStyles;null!=I&&(E=va(I,l))}return E}function Yd(i){return void 0!==i}function rI(i,o=""){const a=Te(),l=Ft(),d=i+22,f=l.firstCreatePass?Ld(l,d,1,o,null):l.data[d],_=a[d]=function Cg(i,o){return i.createText(o)}(a[11],o);Lu(l,a,_,f),ai(f,!1)}const _c=void 0;var hT=["en",[["a","p"],["AM","PM"],_c],[["AM","PM"],_c,_c],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],_c,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],_c,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",_c,"{1} 'at' {0}",_c],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function dT(i){const a=Math.floor(Math.abs(i)),l=i.toString().replace(/^[^.]*\.?/,"").length;return 1===a&&0===l?1:5}];let Jd={};function pv(i){const o=function fT(i){return i.toLowerCase().replace(/_/g,"-")}(i);let a=yv(o);if(a)return a;const l=o.split("-")[0];if(a=yv(l),a)return a;if("en"===l)return hT;throw new ve(701,!1)}function mv(i){return pv(i)[vt.PluralCase]}function yv(i){return i in Jd||(Jd[i]=nn.ng&&nn.ng.common&&nn.ng.common.locales&&nn.ng.common.locales[i]),Jd[i]}var vt=(()=>((vt=vt||{})[vt.LocaleId=0]="LocaleId",vt[vt.DayPeriodsFormat=1]="DayPeriodsFormat",vt[vt.DayPeriodsStandalone=2]="DayPeriodsStandalone",vt[vt.DaysFormat=3]="DaysFormat",vt[vt.DaysStandalone=4]="DaysStandalone",vt[vt.MonthsFormat=5]="MonthsFormat",vt[vt.MonthsStandalone=6]="MonthsStandalone",vt[vt.Eras=7]="Eras",vt[vt.FirstDayOfWeek=8]="FirstDayOfWeek",vt[vt.WeekendRange=9]="WeekendRange",vt[vt.DateFormat=10]="DateFormat",vt[vt.TimeFormat=11]="TimeFormat",vt[vt.DateTimeFormat=12]="DateTimeFormat",vt[vt.NumberSymbols=13]="NumberSymbols",vt[vt.NumberFormats=14]="NumberFormats",vt[vt.CurrencyCode=15]="CurrencyCode",vt[vt.CurrencySymbol=16]="CurrencySymbol",vt[vt.CurrencyName=17]="CurrencyName",vt[vt.Currencies=18]="Currencies",vt[vt.Directionality=19]="Directionality",vt[vt.PluralCase=20]="PluralCase",vt[vt.ExtraData=21]="ExtraData",vt))();const vc="en-US";let gT=vc;function fm(i,o,a,l,d){if(i=Y(i),Array.isArray(i))for(let f=0;f<i.length;f++)fm(i[f],o,a,l,d);else{const f=Ft(),_=Te();let E=fo(i)?i:Y(i.provide),I=xa(i);const T=vn(),R=1048575&T.providerIndexes,k=T.directiveStart,z=T.providerIndexes>>20;if(fo(i)||!i.multi){const te=new Ss(I,d,Fi),we=eh(E,o,d?R:R+z,k);-1===we?(As(io(T,_),f,E),kv(f,i,o.length),o.push(E),T.directiveStart++,T.directiveEnd++,d&&(T.providerIndexes+=1048576),a.push(te),_.push(te)):(a[we]=te,_[we]=te)}else{const te=eh(E,o,R+z,k),we=eh(E,o,R,R+z),Se=te>=0&&a[te],ze=we>=0&&a[we];if(d&&!ze||!d&&!Se){As(io(T,_),f,E);const Fe=function RT(i,o,a,l,d){const f=new Ss(i,a,Fi);return f.multi=[],f.index=o,f.componentProviders=0,Pv(f,d,l&&!a),f}(d?Lv:Fv,a.length,d,l,I);!d&&ze&&(a[we].providerFactory=Fe),kv(f,i,o.length,0),o.push(E),T.directiveStart++,T.directiveEnd++,d&&(T.providerIndexes+=1048576),a.push(Fe),_.push(Fe)}else kv(f,i,te>-1?te:we,Pv(a[d?we:te],I,!d&&l));!d&&l&&ze&&a[we].componentProviders++}}}function kv(i,o,a,l){const d=fo(o),f=function Lo(i){return!!i.useClass}(o);if(d||f){const I=(f?Y(o.useClass):o).prototype.ngOnDestroy;if(I){const T=i.destroyHooks||(i.destroyHooks=[]);if(!d&&o.multi){const R=T.indexOf(a);-1===R?T.push(a,[l,I]):T[R+1].push(l,I)}else T.push(a,I)}}}function Pv(i,o,a){return a&&i.componentProviders++,i.multi.push(o)-1}function eh(i,o,a,l){for(let d=a;d<l;d++)if(o[d]===i)return d;return-1}function Fv(i,o,a,l){return Gf(this.multi,[])}function Lv(i,o,a,l){const d=this.multi;let f;if(this.providerFactory){const _=this.providerFactory.componentProviders,E=Yi(a,a[1],this.providerFactory.index,l);f=E.slice(0,_),Gf(d,f);for(let I=_;I<E.length;I++)f.push(E[I])}else f=[],Gf(d,f);return f}function Gf(i,o){for(let a=0;a<i.length;a++)o.push((0,i[a])());return o}function WI(i,o=[]){return a=>{a.providersResolver=(l,d)=>function Ov(i,o,a){const l=Ft();if(l.firstCreatePass){const d=gr(i);fm(a,l.data,l.blueprint,d,!0),fm(o,l.data,l.blueprint,d,!1)}}(l,d?d(i):i,o)}}class zu{}class Vv{}function NT(i,o){return new ei(i,o??null)}class ei extends zu{constructor(o,a){super(),this._parent=a,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new L_(this);const l=Sr(o);this._bootstrapComponents=Oa(l.bootstrap),this._r3Injector=cf(o,a,[{provide:zu,useValue:this},{provide:S,useValue:this.componentFactoryResolver}],he(o),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(o)}get injector(){return this._r3Injector}destroy(){const o=this._r3Injector;!o.destroyed&&o.destroy(),this.destroyCbs.forEach(a=>a()),this.destroyCbs=null}onDestroy(o){this.destroyCbs.push(o)}}class wc extends Vv{constructor(o){super(),this.moduleType=o}create(o){return new ei(this.moduleType,o)}}class OT extends zu{constructor(o,a,l){super(),this.componentFactoryResolver=new L_(this),this.instance=null;const d=new Id([...o,{provide:zu,useValue:this},{provide:S,useValue:this.componentFactoryResolver}],a||nc(),l,new Set(["environment"]));this.injector=d,d.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(o){this.injector.onDestroy(o)}}function Ec(i,o,a=null){return new OT(i,o,a).injector}let kT=(()=>{class i{constructor(a){this._injector=a,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(a){if(!a.standalone)return null;if(!this.cachedInjectors.has(a.id)){const l=ui(0,a.type),d=l.length>0?Ec([l],this._injector,`Standalone[${a.type.name}]`):null;this.cachedInjectors.set(a.id,d)}return this.cachedInjectors.get(a.id)}ngOnDestroy(){try{for(const a of this.cachedInjectors.values())null!==a&&a.destroy()}finally{this.cachedInjectors.clear()}}}return i.\u0275prov=Wt({token:i,providedIn:"environment",factory:()=>new i(In(Fn))}),i})();function KI(i){i.getStandaloneInjector=o=>o.get(kT).getOrCreateStandaloneInjector(i)}function qu(i){return o=>{setTimeout(i,void 0,o)}}const Ho=class $T extends m.x{constructor(o=!1){super(),this.__isAsync=o}emit(o){super.next(o)}subscribe(o,a,l){let d=o,f=a||(()=>null),_=l;if(o&&"object"==typeof o){const I=o;d=I.next?.bind(I),f=I.error?.bind(I),_=I.complete?.bind(I)}this.__isAsync&&(f=qu(f),d&&(d=qu(d)),_&&(_=qu(_)));const E=super.subscribe({next:d,error:f,complete:_});return o instanceof ee.w0&&o.add(E),E}};function HT(){return this._results[$a()]()}class Ga{constructor(o=!1){this._emitDistinctChangesOnly=o,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const a=$a(),l=Ga.prototype;l[a]||(l[a]=HT)}get changes(){return this._changes||(this._changes=new Ho)}get(o){return this._results[o]}map(o){return this._results.map(o)}filter(o){return this._results.filter(o)}find(o){return this._results.find(o)}reduce(o,a){return this._results.reduce(o,a)}forEach(o){this._results.forEach(o)}some(o){return this._results.some(o)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(o,a){const l=this;l.dirty=!1;const d=zr(o);(this._changesDetected=!function bu(i,o,a){if(i.length!==o.length)return!1;for(let l=0;l<i.length;l++){let d=i[l],f=o[l];if(a&&(d=a(d),f=a(f)),f!==d)return!1}return!0}(l._results,d,a))&&(l._results=d,l.length=d.length,l.last=d[this.length-1],l.first=d[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let nh=(()=>{class i{}return i.__NG_ELEMENT_ID__=Yf,i})();const Im=nh,ob=class extends Im{constructor(o,a,l){super(),this._declarationLView=o,this._declarationTContainer=a,this.elementRef=l}createEmbeddedView(o,a){const l=this._declarationTContainer.tViews,d=Ug(this._declarationLView,l,o,16,null,l.declTNode,null,null,null,null,a||null);d[17]=this._declarationLView[this._declarationTContainer.index];const _=this._declarationLView[19];return null!==_&&(d[19]=_.createEmbeddedView(l)),_f(l,d,o),new Cf(d)}};function Yf(){return Qf(vn(),Te())}function Qf(i,o){return 4&i.type?new ob(o,i,W(i,o)):null}let Pr=(()=>{class i{}return i.__NG_ELEMENT_ID__=ab,i})();function ab(){return Kv(vn(),Te())}const Jf=Pr,Xf=class extends Jf{constructor(o,a,l){super(),this._lContainer=o,this._hostTNode=a,this._hostLView=l}get element(){return W(this._hostTNode,this._hostLView)}get injector(){return new oo(this._hostTNode,this._hostLView)}get parentInjector(){const o=_u(this._hostTNode,this._hostLView);if(id(o)){const a=da(o,this._hostLView),l=er(o);return new oo(a[1].data[l+8],a)}return new oo(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(o){const a=Wv(this._lContainer);return null!==a&&a[o]||null}get length(){return this._lContainer.length-10}createEmbeddedView(o,a,l){let d,f;"number"==typeof l?d=l:null!=l&&(d=l.index,f=l.injector);const _=o.createEmbeddedView(a||{},f);return this.insert(_,d),_}createComponent(o,a,l,d,f){const _=o&&!function cr(i){return"function"==typeof i}(o);let E;if(_)E=a;else{const k=a||{};E=k.index,l=k.injector,d=k.projectableNodes,f=k.environmentInjector||k.ngModuleRef}const I=_?o:new Hd(Mt(o)),T=l||this.parentInjector;if(!f&&null==I.ngModule){const z=(_?T:this.parentInjector).get(Fn,null);z&&(f=z)}const R=I.create(T,d,void 0,f);return this.insert(R.hostView,E),R}insert(o,a){const l=o._lView,d=l[1];if(function tu(i){return Ar(i[3])}(l)){const R=this.indexOf(o);if(-1!==R)this.detach(R);else{const k=l[3],z=new Xf(k,k[6],k[3]);z.detach(z.indexOf(o))}}const f=this._adjustIndex(a),_=this._lContainer;!function ef(i,o,a,l){const d=10+l,f=a.length;l>0&&(a[d-1][4]=o),l<f-10?(o[4]=a[d],Ul(a,10+l,o)):(a.push(o),o[4]=null),o[3]=a;const _=o[17];null!==_&&a!==_&&function sc(i,o){const a=i[9];o[16]!==o[3][3][16]&&(i[2]=!0),null===a?i[9]=[o]:a.push(o)}(_,o);const E=o[19];null!==E&&E.insertView(i),o[2]|=64}(d,l,_,f);const E=a_(f,_),I=l[11],T=Fu(I,_[7]);return null!==T&&function t_(i,o,a,l,d,f){l[0]=d,l[6]=o,Ad(i,l,a,1,d,f)}(d,_[6],I,l,T,E),o.attachToViewContainerRef(),Ul(ep(_),f,o),o}move(o,a){return this.insert(o,a)}indexOf(o){const a=Wv(this._lContainer);return null!==a?a.indexOf(o):-1}remove(o){const a=this._adjustIndex(o,-1),l=tf(this._lContainer,a);l&&(Oo(ep(this._lContainer),a),r_(l[1],l))}detach(o){const a=this._adjustIndex(o,-1),l=tf(this._lContainer,a);return l&&null!=Oo(ep(this._lContainer),a)?new Cf(l):null}_adjustIndex(o,a=0){return o??this.length+a}};function Wv(i){return i[8]}function ep(i){return i[8]||(i[8]=[])}function Kv(i,o){let a;const l=o[i.index];if(Ar(l))a=l;else{let d;if(8&i.type)d=_n(l);else{const f=o[11];d=f.createComment("");const _=xr(i,o);oc(f,Fu(f,_),d,function s_(i,o){return i.nextSibling(o)}(f,_),!1)}o[i.index]=a=function DE(i,o,a,l){return new Array(i,!0,!1,o,null,0,l,a,null,null)}(l,o,d,i),hc(o,a)}return new Xf(a,i,o)}class np{constructor(o){this.queryList=o,this.matches=null}clone(){return new np(this.queryList)}setDirty(){this.queryList.setDirty()}}class rp{constructor(o=[]){this.queries=o}createEmbeddedView(o){const a=o.queries;if(null!==a){const l=null!==o.contentQueries?o.contentQueries[0]:a.length,d=[];for(let f=0;f<l;f++){const _=a.getByIndex(f);d.push(this.queries[_.indexInDeclarationView].clone())}return new rp(d)}return null}insertView(o){this.dirtyQueriesWithMatches(o)}detachView(o){this.dirtyQueriesWithMatches(o)}dirtyQueriesWithMatches(o){for(let a=0;a<this.queries.length;a++)null!==cb(o,a).matches&&this.queries[a].setDirty()}}class ip{constructor(o,a,l=null){this.predicate=o,this.flags=a,this.read=l}}class Ic{constructor(o=[]){this.queries=o}elementStart(o,a){for(let l=0;l<this.queries.length;l++)this.queries[l].elementStart(o,a)}elementEnd(o){for(let a=0;a<this.queries.length;a++)this.queries[a].elementEnd(o)}embeddedTView(o){let a=null;for(let l=0;l<this.length;l++){const d=null!==a?a.length:0,f=this.getByIndex(l).embeddedTView(o,d);f&&(f.indexInDeclarationView=l,null!==a?a.push(f):a=[f])}return null!==a?new Ic(a):null}template(o,a){for(let l=0;l<this.queries.length;l++)this.queries[l].template(o,a)}getByIndex(o){return this.queries[o]}get length(){return this.queries.length}track(o){this.queries.push(o)}}class bm{constructor(o,a=-1){this.metadata=o,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=a}elementStart(o,a){this.isApplyingToNode(a)&&this.matchTNode(o,a)}elementEnd(o){this._declarationNodeIndex===o.index&&(this._appliesToNextNode=!1)}template(o,a){this.elementStart(o,a)}embeddedTView(o,a){return this.isApplyingToNode(o)?(this.crossesNgTemplate=!0,this.addMatch(-o.index,a),new bm(this.metadata)):null}isApplyingToNode(o){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const a=this._declarationNodeIndex;let l=o.parent;for(;null!==l&&8&l.type&&l.index!==a;)l=l.parent;return a===(null!==l?l.index:-1)}return this._appliesToNextNode}matchTNode(o,a){const l=this.metadata.predicate;if(Array.isArray(l))for(let d=0;d<l.length;d++){const f=l[d];this.matchTNodeWithReadOption(o,a,GT(a,f)),this.matchTNodeWithReadOption(o,a,So(a,o,f,!1,!1))}else l===nh?4&a.type&&this.matchTNodeWithReadOption(o,a,-1):this.matchTNodeWithReadOption(o,a,So(a,o,l,!1,!1))}matchTNodeWithReadOption(o,a,l){if(null!==l){const d=this.metadata.read;if(null!==d)if(d===ue||d===Pr||d===nh&&4&a.type)this.addMatch(a.index,-2);else{const f=So(a,o,d,!1,!1);null!==f&&this.addMatch(a.index,f)}else this.addMatch(a.index,l)}}addMatch(o,a){null===this.matches?this.matches=[o,a]:this.matches.push(o,a)}}function GT(i,o){const a=i.localNames;if(null!==a)for(let l=0;l<a.length;l+=2)if(a[l]===o)return a[l+1];return null}function Dm(i,o,a,l){return-1===a?function Zv(i,o){return 11&i.type?W(i,o):4&i.type?Qf(i,o):null}(o,i):-2===a?function Yv(i,o,a){return a===ue?W(o,i):a===nh?Qf(o,i):a===Pr?Kv(o,i):void 0}(i,o,l):Yi(i,i[1],a,o)}function Qv(i,o,a,l){const d=o[19].queries[l];if(null===d.matches){const f=i.data,_=a.matches,E=[];for(let I=0;I<_.length;I+=2){const T=_[I];E.push(T<0?null:Dm(o,f[T],_[I+1],a.metadata.read))}d.matches=E}return d.matches}function Cm(i,o,a,l){const d=i.queries.getByIndex(a),f=d.matches;if(null!==f){const _=Qv(i,o,d,a);for(let E=0;E<f.length;E+=2){const I=f[E];if(I>0)l.push(_[E/2]);else{const T=f[E+1],R=o[-I];for(let k=10;k<R.length;k++){const z=R[k];z[17]===z[3]&&Cm(z[1],z,T,l)}if(null!==R[9]){const k=R[9];for(let z=0;z<k.length;z++){const te=k[z];Cm(te[1],te,T,l)}}}}}return l}function Jv(i){const o=Te(),a=Ft(),l=Tl();ua(l+1);const d=cb(a,l);if(i.dirty&&na(o)===(2==(2&d.metadata.flags))){if(null===d.matches)i.reset([]);else{const f=d.crossesNgTemplate?Cm(a,o,l,[]):Qv(a,o,d,l);i.reset(f,Le),i.notifyOnChanges()}return!0}return!1}function rh(i,o,a,l){const d=Ft();if(d.firstCreatePass){const f=vn();(function Wu(i,o,a){null===i.queries&&(i.queries=new Ic),i.queries.track(new bm(o,a))})(d,new ip(o,a,l),f.index),function ew(i,o){const a=i.contentQueries||(i.contentQueries=[]);o!==(a.length?a[a.length-1]:-1)&&a.push(i.queries.length-1,o)}(d,i),2==(2&a)&&(d.staticContentQueries=!0)}!function ih(i,o,a){const l=new Ga(4==(4&a));Ud(i,o,l,l.destroy),null===o[19]&&(o[19]=new rp),o[19].queries.push(new np(l))}(d,Te(),a)}function Xv(){return function Tm(i,o){return i[19].queries[o].queryList}(Te(),Tl())}function cb(i,o){return i.queries.getByIndex(o)}function Tc(...i){}const zo=new on("Application Initializer");let hp=(()=>{class i{constructor(a){this.appInits=a,this.resolve=Tc,this.reject=Tc,this.initialized=!1,this.done=!1,this.donePromise=new Promise((l,d)=>{this.resolve=l,this.reject=d})}runInitializers(){if(this.initialized)return;const a=[],l=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let d=0;d<this.appInits.length;d++){const f=this.appInits[d]();if(q_(f))a.push(f);else if($E(f)){const _=new Promise((E,I)=>{f.subscribe({complete:E,error:I})});a.push(_)}}Promise.all(a).then(()=>{l()}).catch(d=>{this.reject(d)}),0===a.length&&l(),this.initialized=!0}}return i.\u0275fac=function(a){return new(a||i)(In(zo,8))},i.\u0275prov=Wt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const vb=new on("AppId",{providedIn:"root",factory:function Pm(){return`${Lm()}${Lm()}${Lm()}`}});function Lm(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Vm=new on("Platform Initializer"),Um=new on("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),aw=new on("appBootstrapListener");let iS=(()=>{class i{log(a){console.log(a)}warn(a){console.warn(a)}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Wt({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();const Qu=new on("LocaleId",{providedIn:"root",factory:()=>D(Qu,Ke.Optional|Ke.SkipSelf)||function Eb(){return typeof $localize<"u"&&$localize.locale||vc}()}),Ib=new on("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class Cb{constructor(o,a){this.ngModuleFactory=o,this.componentFactories=a}}let Bm=(()=>{class i{compileModuleSync(a){return new wc(a)}compileModuleAsync(a){return Promise.resolve(this.compileModuleSync(a))}compileModuleAndAllComponentsSync(a){const l=this.compileModuleSync(a),f=Oa(Sr(a).declarations).reduce((_,E)=>{const I=Mt(E);return I&&_.push(new Hd(I)),_},[]);return new Cb(l,f)}compileModuleAndAllComponentsAsync(a){return Promise.resolve(this.compileModuleAndAllComponentsSync(a))}clearCache(){}clearCacheFor(a){}getModuleId(a){}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Wt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const jm=(()=>Promise.resolve(0))();function Di(i){typeof Zone>"u"?jm.then(()=>{i&&i.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",i)}class ds{constructor({enableLongStackTrace:o=!1,shouldCoalesceEventChangeDetection:a=!1,shouldCoalesceRunChangeDetection:l=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Ho(!1),this.onMicrotaskEmpty=new Ho(!1),this.onStable=new Ho(!1),this.onError=new Ho(!1),typeof Zone>"u")throw new ve(908,!1);Zone.assertZonePatched();const d=this;if(d._nesting=0,d._outer=d._inner=Zone.current,Zone.AsyncStackTaggingZoneSpec){const f=Zone.AsyncStackTaggingZoneSpec;d._inner=d._inner.fork(new f("Angular"))}Zone.TaskTrackingZoneSpec&&(d._inner=d._inner.fork(new Zone.TaskTrackingZoneSpec)),o&&Zone.longStackTraceZoneSpec&&(d._inner=d._inner.fork(Zone.longStackTraceZoneSpec)),d.shouldCoalesceEventChangeDetection=!l&&a,d.shouldCoalesceRunChangeDetection=l,d.lastRequestAnimationFrameId=-1,d.nativeRequestAnimationFrame=function Sb(){let i=nn.requestAnimationFrame,o=nn.cancelAnimationFrame;if(typeof Zone<"u"&&i&&o){const a=i[Zone.__symbol__("OriginalDelegate")];a&&(i=a);const l=o[Zone.__symbol__("OriginalDelegate")];l&&(o=l)}return{nativeRequestAnimationFrame:i,nativeCancelAnimationFrame:o}}().nativeRequestAnimationFrame,function hw(i){const o=()=>{!function uS(i){i.isCheckStableRunning||-1!==i.lastRequestAnimationFrameId||(i.lastRequestAnimationFrameId=i.nativeRequestAnimationFrame.call(nn,()=>{i.fakeTopEventTask||(i.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{i.lastRequestAnimationFrameId=-1,fw(i),i.isCheckStableRunning=!0,dw(i),i.isCheckStableRunning=!1},void 0,()=>{},()=>{})),i.fakeTopEventTask.invoke()}),fw(i))}(i)};i._inner=i._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(a,l,d,f,_,E)=>{try{return Ab(i),a.invokeTask(d,f,_,E)}finally{(i.shouldCoalesceEventChangeDetection&&"eventTask"===f.type||i.shouldCoalesceRunChangeDetection)&&o(),pw(i)}},onInvoke:(a,l,d,f,_,E,I)=>{try{return Ab(i),a.invoke(d,f,_,E,I)}finally{i.shouldCoalesceRunChangeDetection&&o(),pw(i)}},onHasTask:(a,l,d,f)=>{a.hasTask(d,f),l===d&&("microTask"==f.change?(i._hasPendingMicrotasks=f.microTask,fw(i),dw(i)):"macroTask"==f.change&&(i.hasPendingMacrotasks=f.macroTask))},onHandleError:(a,l,d,f)=>(a.handleError(d,f),i.runOutsideAngular(()=>i.onError.emit(f)),!1)})}(d)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!ds.isInAngularZone())throw new ve(909,!1)}static assertNotInAngularZone(){if(ds.isInAngularZone())throw new ve(909,!1)}run(o,a,l){return this._inner.run(o,a,l)}runTask(o,a,l,d){const f=this._inner,_=f.scheduleEventTask("NgZoneEvent: "+d,o,ah,Tc,Tc);try{return f.runTask(_,a,l)}finally{f.cancelTask(_)}}runGuarded(o,a,l){return this._inner.runGuarded(o,a,l)}runOutsideAngular(o){return this._outer.run(o)}}const ah={};function dw(i){if(0==i._nesting&&!i.hasPendingMicrotasks&&!i.isStable)try{i._nesting++,i.onMicrotaskEmpty.emit(null)}finally{if(i._nesting--,!i.hasPendingMicrotasks)try{i.runOutsideAngular(()=>i.onStable.emit(null))}finally{i.isStable=!0}}}function fw(i){i.hasPendingMicrotasks=!!(i._hasPendingMicrotasks||(i.shouldCoalesceEventChangeDetection||i.shouldCoalesceRunChangeDetection)&&-1!==i.lastRequestAnimationFrameId)}function Ab(i){i._nesting++,i.isStable&&(i.isStable=!1,i.onUnstable.emit(null))}function pw(i){i._nesting--,dw(i)}class lS{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Ho,this.onMicrotaskEmpty=new Ho,this.onStable=new Ho,this.onError=new Ho}run(o,a,l){return o.apply(a,l)}runGuarded(o,a,l){return o.apply(a,l)}runOutsideAngular(o){return o()}runTask(o,a,l,d){return o.apply(a,l)}}const fp=new on(""),xb=new on("");let qo,Mb=(()=>{class i{constructor(a,l,d){this._ngZone=a,this.registry=l,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,qo||(function uh(i){qo=i}(d),d.addToWindow(l)),this._watchAngularEvents(),a.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{ds.assertNotInAngularZone(),Di(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Di(()=>{for(;0!==this._callbacks.length;){let a=this._callbacks.pop();clearTimeout(a.timeoutId),a.doneCb(this._didWork)}this._didWork=!1});else{let a=this.getPendingTasks();this._callbacks=this._callbacks.filter(l=>!l.updateCb||!l.updateCb(a)||(clearTimeout(l.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(a=>({source:a.source,creationLocation:a.creationLocation,data:a.data})):[]}addCallback(a,l,d){let f=-1;l&&l>0&&(f=setTimeout(()=>{this._callbacks=this._callbacks.filter(_=>_.timeoutId!==f),a(this._didWork,this.getPendingTasks())},l)),this._callbacks.push({doneCb:a,timeoutId:f,updateCb:d})}whenStable(a,l,d){if(d&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(a,l,d),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(a){this.registry.registerApplication(a,this)}unregisterApplication(a){this.registry.unregisterApplication(a)}findProviders(a,l,d){return[]}}return i.\u0275fac=function(a){return new(a||i)(In(ds),In(Er),In(xb))},i.\u0275prov=Wt({token:i,factory:i.\u0275fac}),i})(),Er=(()=>{class i{constructor(){this._applications=new Map}registerApplication(a,l){this._applications.set(a,l)}unregisterApplication(a){this._applications.delete(a)}unregisterAllApplications(){this._applications.clear()}getTestability(a){return this._applications.get(a)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(a,l=!0){return qo?.findTestabilityInTree(this,a,l)??null}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Wt({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})(),Wo=null;const Rb=new on("AllowMultipleToken"),Oe=new on("PlatformDestroyListeners");class Tt{constructor(o,a){this.name=o,this.token=a}}function Ir(i,o,a=[]){const l=`Platform: ${o}`,d=new on(l);return(f=[])=>{let _=gw();if(!_||_.injector.get(Rb,!1)){const E=[...a,...f,{provide:d,useValue:!0}];i?i(E):function cS(i){if(Wo&&!Wo.get(Rb,!1))throw new ve(400,!1);Wo=i;const o=i.get(Pb);(function ce(i){const o=i.get(Vm,null);o&&o.forEach(a=>a())})(i)}(function kb(i=[],o){return lc.create({name:o,providers:[{provide:Nu,useValue:"platform"},{provide:Oe,useValue:new Set([()=>Wo=null])},...i]})}(E,l))}return function Ob(i){const o=gw();if(!o)throw new ve(401,!1);return o}()}}function gw(){return Wo?.get(Pb)??null}let Pb=(()=>{class i{constructor(a){this._injector=a,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(a,l){const d=function mw(i,o){let a;return a="noop"===i?new lS:("zone.js"===i?void 0:i)||new ds(o),a}(l?.ngZone,function Fb(i){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!i||!i.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!i||!i.ngZoneRunCoalescing)||!1}}(l)),f=[{provide:ds,useValue:d}];return d.run(()=>{const _=lc.create({providers:f,parent:this.injector,name:a.moduleType.name}),E=a.create(_),I=E.injector.get(ss,null);if(!I)throw new ve(402,!1);return d.runOutsideAngular(()=>{const T=d.onError.subscribe({next:R=>{I.handleError(R)}});E.onDestroy(()=>{pp(this._modules,E),T.unsubscribe()})}),function Lb(i,o,a){try{const l=a();return q_(l)?l.catch(d=>{throw o.runOutsideAngular(()=>i.handleError(d)),d}):l}catch(l){throw o.runOutsideAngular(()=>i.handleError(l)),l}}(I,d,()=>{const T=E.injector.get(hp);return T.runInitializers(),T.donePromise.then(()=>(function mT(i){Ut(i,"Expected localeId to be defined"),"string"==typeof i&&(gT=i.toLowerCase().replace(/_/g,"-"))}(E.injector.get(Qu,vc)||vc),this._moduleDoBootstrap(E),E))})})}bootstrapModule(a,l=[]){const d=dS({},l);return function Ac(i,o,a){const l=new wc(a);return Promise.resolve(l)}(0,0,a).then(f=>this.bootstrapModuleFactory(f,d))}_moduleDoBootstrap(a){const l=a.injector.get($m);if(a._bootstrapComponents.length>0)a._bootstrapComponents.forEach(d=>l.bootstrap(d));else{if(!a.instance.ngDoBootstrap)throw new ve(403,!1);a.instance.ngDoBootstrap(l)}this._modules.push(a)}onDestroy(a){this._destroyListeners.push(a)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new ve(404,!1);this._modules.slice().forEach(l=>l.destroy()),this._destroyListeners.forEach(l=>l());const a=this._injector.get(Oe,null);a&&(a.forEach(l=>l()),a.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return i.\u0275fac=function(a){return new(a||i)(In(lc))},i.\u0275prov=Wt({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();function dS(i,o){return Array.isArray(o)?o.reduce(dS,i):{...i,...o}}let $m=(()=>{class i{constructor(a,l,d){this._zone=a,this._injector=l,this._exceptionHandler=d,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const f=new O.y(E=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{E.next(this._stable),E.complete()})}),_=new O.y(E=>{let I;this._zone.runOutsideAngular(()=>{I=this._zone.onStable.subscribe(()=>{ds.assertNotInAngularZone(),Di(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,E.next(!0))})})});const T=this._zone.onUnstable.subscribe(()=>{ds.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{E.next(!1)}))});return()=>{I.unsubscribe(),T.unsubscribe()}});this.isStable=(0,oe.T)(f,_.pipe((0,re.B)()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(a,l){const d=a instanceof mg;if(!this._injector.get(hp).done)throw!d&&Ti(a),new ve(405,false);let _;_=d?a:this._injector.get(S).resolveComponentFactory(a),this.componentTypes.push(_.componentType);const E=function et(i){return i.isBoundToModule}(_)?void 0:this._injector.get(zu),T=_.create(lc.NULL,[],l||_.selector,E),R=T.location.nativeElement,k=T.injector.get(fp,null);return k?.registerApplication(R),T.onDestroy(()=>{this.detachView(T.hostView),pp(this.components,T),k?.unregisterApplication(R)}),this._loadComponent(T),T}tick(){if(this._runningTick)throw new ve(101,!1);try{this._runningTick=!0;for(let a of this._views)a.detectChanges()}catch(a){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(a))}finally{this._runningTick=!1}}attachView(a){const l=a;this._views.push(l),l.attachToAppRef(this)}detachView(a){const l=a;pp(this._views,l),l.detachFromAppRef()}_loadComponent(a){this.attachView(a.hostView),this.tick(),this.components.push(a),this._injector.get(aw,[]).concat(this._bootstrapListeners).forEach(d=>d(a))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(a=>a()),this._views.slice().forEach(a=>a.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(a){return this._destroyListeners.push(a),()=>pp(this._destroyListeners,a)}destroy(){if(this._destroyed)throw new ve(406,!1);const a=this._injector;a.destroy&&!a.destroyed&&a.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return i.\u0275fac=function(a){return new(a||i)(In(ds),In(Fn),In(ss))},i.\u0275prov=Wt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function pp(i,o){const a=i.indexOf(o);a>-1&&i.splice(a,1)}let yw=!0,Cn=!1;function bt(){return Cn=!0,yw}function gp(){if(Cn)throw new Error("Cannot enable prod mode after platform setup.");yw=!1}let Ge=(()=>{class i{}return i.__NG_ELEMENT_ID__=Hm,i})();function Hm(i){return function _w(i,o,a){if(Xo(i)&&!a){const l=jt(i.index,o);return new Cf(l,l)}return 47&i.type?new Cf(o[16],o):null}(vn(),Te(),16==(16&i))}class qm{constructor(){}supports(o){return Tf(o)}create(o){return new pS(o)}}const fS=(i,o)=>o;class pS{constructor(o){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=o||fS}forEachItem(o){let a;for(a=this._itHead;null!==a;a=a._next)o(a)}forEachOperation(o){let a=this._itHead,l=this._removalsHead,d=0,f=null;for(;a||l;){const _=!l||a&&a.currentIndex<bw(l,d,f)?a:l,E=bw(_,d,f),I=_.currentIndex;if(_===l)d--,l=l._nextRemoved;else if(a=a._next,null==_.previousIndex)d++;else{f||(f=[]);const T=E-d,R=I-d;if(T!=R){for(let z=0;z<T;z++){const te=z<f.length?f[z]:f[z]=0,we=te+z;R<=we&&we<T&&(f[z]=te+1)}f[_.previousIndex]=R-T}}E!==I&&o(_,E,I)}}forEachPreviousItem(o){let a;for(a=this._previousItHead;null!==a;a=a._nextPrevious)o(a)}forEachAddedItem(o){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)o(a)}forEachMovedItem(o){let a;for(a=this._movesHead;null!==a;a=a._nextMoved)o(a)}forEachRemovedItem(o){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)o(a)}forEachIdentityChange(o){let a;for(a=this._identityChangesHead;null!==a;a=a._nextIdentityChange)o(a)}diff(o){if(null==o&&(o=[]),!Tf(o))throw new ve(900,!1);return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let d,f,_,a=this._itHead,l=!1;if(Array.isArray(o)){this.length=o.length;for(let E=0;E<this.length;E++)f=o[E],_=this._trackByFn(E,f),null!==a&&Object.is(a.trackById,_)?(l&&(a=this._verifyReinsertion(a,f,_,E)),Object.is(a.item,f)||this._addIdentityChange(a,f)):(a=this._mismatch(a,f,_,E),l=!0),a=a._next}else d=0,function UC(i,o){if(Array.isArray(i))for(let a=0;a<i.length;a++)o(i[a]);else{const a=i[$a()]();let l;for(;!(l=a.next()).done;)o(l.value)}}(o,E=>{_=this._trackByFn(d,E),null!==a&&Object.is(a.trackById,_)?(l&&(a=this._verifyReinsertion(a,E,_,d)),Object.is(a.item,E)||this._addIdentityChange(a,E)):(a=this._mismatch(a,E,_,d),l=!0),a=a._next,d++}),this.length=d;return this._truncate(a),this.collection=o,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let o;for(o=this._previousItHead=this._itHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._additionsHead;null!==o;o=o._nextAdded)o.previousIndex=o.currentIndex;for(this._additionsHead=this._additionsTail=null,o=this._movesHead;null!==o;o=o._nextMoved)o.previousIndex=o.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(o,a,l,d){let f;return null===o?f=this._itTail:(f=o._prev,this._remove(o)),null!==(o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null))?(Object.is(o.item,a)||this._addIdentityChange(o,a),this._reinsertAfter(o,f,d)):null!==(o=null===this._linkedRecords?null:this._linkedRecords.get(l,d))?(Object.is(o.item,a)||this._addIdentityChange(o,a),this._moveAfter(o,f,d)):o=this._addAfter(new Li(a,l),f,d),o}_verifyReinsertion(o,a,l,d){let f=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null);return null!==f?o=this._reinsertAfter(f,o._prev,d):o.currentIndex!=d&&(o.currentIndex=d,this._addToMoves(o,d)),o}_truncate(o){for(;null!==o;){const a=o._next;this._addToRemovals(this._unlink(o)),o=a}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(o,a,l){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(o);const d=o._prevRemoved,f=o._nextRemoved;return null===d?this._removalsHead=f:d._nextRemoved=f,null===f?this._removalsTail=d:f._prevRemoved=d,this._insertAfter(o,a,l),this._addToMoves(o,l),o}_moveAfter(o,a,l){return this._unlink(o),this._insertAfter(o,a,l),this._addToMoves(o,l),o}_addAfter(o,a,l){return this._insertAfter(o,a,l),this._additionsTail=null===this._additionsTail?this._additionsHead=o:this._additionsTail._nextAdded=o,o}_insertAfter(o,a,l){const d=null===a?this._itHead:a._next;return o._next=d,o._prev=a,null===d?this._itTail=o:d._prev=o,null===a?this._itHead=o:a._next=o,null===this._linkedRecords&&(this._linkedRecords=new el),this._linkedRecords.put(o),o.currentIndex=l,o}_remove(o){return this._addToRemovals(this._unlink(o))}_unlink(o){null!==this._linkedRecords&&this._linkedRecords.remove(o);const a=o._prev,l=o._next;return null===a?this._itHead=l:a._next=l,null===l?this._itTail=a:l._prev=a,o}_addToMoves(o,a){return o.previousIndex===a||(this._movesTail=null===this._movesTail?this._movesHead=o:this._movesTail._nextMoved=o),o}_addToRemovals(o){return null===this._unlinkedRecords&&(this._unlinkedRecords=new el),this._unlinkedRecords.put(o),o.currentIndex=null,o._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=o,o._prevRemoved=null):(o._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=o),o}_addIdentityChange(o,a){return o.item=a,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=o:this._identityChangesTail._nextIdentityChange=o,o}}class Li{constructor(o,a){this.item=o,this.trackById=a,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Ub{constructor(){this._head=null,this._tail=null}add(o){null===this._head?(this._head=this._tail=o,o._nextDup=null,o._prevDup=null):(this._tail._nextDup=o,o._prevDup=this._tail,o._nextDup=null,this._tail=o)}get(o,a){let l;for(l=this._head;null!==l;l=l._nextDup)if((null===a||a<=l.currentIndex)&&Object.is(l.trackById,o))return l;return null}remove(o){const a=o._prevDup,l=o._nextDup;return null===a?this._head=l:a._nextDup=l,null===l?this._tail=a:l._prevDup=a,null===this._head}}class el{constructor(){this.map=new Map}put(o){const a=o.trackById;let l=this.map.get(a);l||(l=new Ub,this.map.set(a,l)),l.add(o)}get(o,a){const d=this.map.get(o);return d?d.get(o,a):null}remove(o){const a=o.trackById;return this.map.get(a).remove(o)&&this.map.delete(a),o}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function bw(i,o,a){const l=i.previousIndex;if(null===l)return l;let d=0;return a&&l<a.length&&(d=a[l]),l+o+d}class Un{constructor(){}supports(o){return o instanceof Map||U_(o)}create(){return new Wm}}class Wm{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(o){let a;for(a=this._mapHead;null!==a;a=a._next)o(a)}forEachPreviousItem(o){let a;for(a=this._previousMapHead;null!==a;a=a._nextPrevious)o(a)}forEachChangedItem(o){let a;for(a=this._changesHead;null!==a;a=a._nextChanged)o(a)}forEachAddedItem(o){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)o(a)}forEachRemovedItem(o){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)o(a)}diff(o){if(o){if(!(o instanceof Map||U_(o)))throw new ve(900,!1)}else o=new Map;return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let a=this._mapHead;if(this._appendAfter=null,this._forEach(o,(l,d)=>{if(a&&a.key===d)this._maybeAddToChanges(a,l),this._appendAfter=a,a=a._next;else{const f=this._getOrCreateRecordForKey(d,l);a=this._insertBeforeOrAppend(a,f)}}),a){a._prev&&(a._prev._next=null),this._removalsHead=a;for(let l=a;null!==l;l=l._nextRemoved)l===this._mapHead&&(this._mapHead=null),this._records.delete(l.key),l._nextRemoved=l._next,l.previousValue=l.currentValue,l.currentValue=null,l._prev=null,l._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(o,a){if(o){const l=o._prev;return a._next=o,a._prev=l,o._prev=a,l&&(l._next=a),o===this._mapHead&&(this._mapHead=a),this._appendAfter=o,o}return this._appendAfter?(this._appendAfter._next=a,a._prev=this._appendAfter):this._mapHead=a,this._appendAfter=a,null}_getOrCreateRecordForKey(o,a){if(this._records.has(o)){const d=this._records.get(o);this._maybeAddToChanges(d,a);const f=d._prev,_=d._next;return f&&(f._next=_),_&&(_._prev=f),d._next=null,d._prev=null,d}const l=new ni(o);return this._records.set(o,l),l.currentValue=a,this._addToAdditions(l),l}_reset(){if(this.isDirty){let o;for(this._previousMapHead=this._mapHead,o=this._previousMapHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._changesHead;null!==o;o=o._nextChanged)o.previousValue=o.currentValue;for(o=this._additionsHead;null!=o;o=o._nextAdded)o.previousValue=o.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(o,a){Object.is(a,o.currentValue)||(o.previousValue=o.currentValue,o.currentValue=a,this._addToChanges(o))}_addToAdditions(o){null===this._additionsHead?this._additionsHead=this._additionsTail=o:(this._additionsTail._nextAdded=o,this._additionsTail=o)}_addToChanges(o){null===this._changesHead?this._changesHead=this._changesTail=o:(this._changesTail._nextChanged=o,this._changesTail=o)}_forEach(o,a){o instanceof Map?o.forEach(a):Object.keys(o).forEach(l=>a(o[l],l))}}class ni{constructor(o){this.key=o,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function ln(){return new Km([new qm])}let Km=(()=>{class i{constructor(a){this.factories=a}static create(a,l){if(null!=l){const d=l.factories.slice();a=a.concat(d)}return new i(a)}static extend(a){return{provide:i,useFactory:l=>i.create(a,l||ln()),deps:[[i,new yt,new je]]}}find(a){const l=this.factories.find(d=>d.supports(a));if(null!=l)return l;throw new ve(901,!1)}}return i.\u0275prov=Wt({token:i,providedIn:"root",factory:ln}),i})();function Vi(){return new Dw([new Un])}let Dw=(()=>{class i{constructor(a){this.factories=a}static create(a,l){if(l){const d=l.factories.slice();a=a.concat(d)}return new i(a)}static extend(a){return{provide:i,useFactory:l=>i.create(a,l||Vi()),deps:[[i,new yt,new je]]}}find(a){const l=this.factories.find(d=>d.supports(a));if(l)return l;throw new ve(901,!1)}}return i.\u0275prov=Wt({token:i,providedIn:"root",factory:Vi}),i})();const Rc=Ir(null,"core",[]);let Cw=(()=>{class i{constructor(a){}}return i.\u0275fac=function(a){return new(a||i)(In($m))},i.\u0275mod=rt({type:i}),i.\u0275inj=Ot({}),i})();function Bb(i){return"boolean"==typeof i?i:null!=i&&"false"!==i}},3942:(at,Ae,P)=>{P.d(Ae,{Z:()=>ve});var m=P(2090),ee=P(4859),O=P(9681),oe=P(1877);class re{constructor(me,fe){this._delegate=me,this.firebase=fe,(0,O._addComponent)(me,new ee.wA("app-compat",()=>this,"PUBLIC")),this.container=me.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(me){this._delegate.automaticDataCollectionEnabled=me}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(me=>{this._delegate.checkDestroyed(),me()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,O.deleteApp)(this._delegate)))}_getService(me,fe=O._DEFAULT_ENTRY_NAME){var Ye;this._delegate.checkDestroyed();const nt=this._delegate.container.getProvider(me);return!nt.isInitialized()&&"EXPLICIT"===(null===(Ye=nt.getComponent())||void 0===Ye?void 0:Ye.instantiationMode)&&nt.initialize(),nt.getImmediate({identifier:fe})}_removeServiceInstance(me,fe=O._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(me).clearInstance(fe)}_addComponent(me){(0,O._addComponent)(this._delegate,me)}_addOrOverwriteComponent(me){(0,O._addOrOverwriteComponent)(this._delegate,me)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const le=new m.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),B=function pe(){const Je=function he(Je){const me={},fe={__esModule:!0,initializeApp:function xe($e,U={}){const ge=O.initializeApp($e,U);if((0,m.r3)(me,ge.name))return me[ge.name];const Z=new Je(ge,fe);return me[ge.name]=Z,Z},app:nt,registerVersion:O.registerVersion,setLogLevel:O.setLogLevel,onLog:O.onLog,apps:null,SDK_VERSION:O.SDK_VERSION,INTERNAL:{registerComponent:function Ee($e){const U=$e.name,ge=U.replace("-compat","");if(O._registerComponent($e)&&"PUBLIC"===$e.type){const Z=(X=nt())=>{if("function"!=typeof X[ge])throw le.create("invalid-app-argument",{appName:U});return X[ge]()};void 0!==$e.serviceProps&&(0,m.ZB)(Z,$e.serviceProps),fe[ge]=Z,Je.prototype[ge]=function(...X){return this._getService.bind(this,U).apply(this,$e.multipleInstances?X:[])}}return"PUBLIC"===$e.type?fe[ge]:null},removeApp:function Ye($e){delete me[$e]},useAsService:function Be($e,U){return"serverAuth"===U?null:U},modularAPIs:O}};function nt($e){if(!(0,m.r3)(me,$e=$e||O._DEFAULT_ENTRY_NAME))throw le.create("no-app",{appName:$e});return me[$e]}return fe.default=fe,Object.defineProperty(fe,"apps",{get:function _e(){return Object.keys(me).map($e=>me[$e])}}),nt.App=Je,fe}(re);return Je.INTERNAL=Object.assign(Object.assign({},Je.INTERNAL),{createFirebaseNamespace:pe,extendNamespace:function me(fe){(0,m.ZB)(Je,fe)},createSubscribe:m.ne,ErrorFactory:m.LL,deepExtend:m.ZB}),Je}(),$=new oe.Yd("@firebase/app-compat");if((0,m.jU)()&&void 0!==self.firebase){$.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Je=self.firebase.SDK_VERSION;Je&&Je.indexOf("LITE")>=0&&$.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const ve=B;!function Me(Je){(0,O.registerVersion)("@firebase/app-compat","0.1.33",Je)}()},9681:(at,Ae,P)=>{P.r(Ae),P.d(Ae,{FirebaseError:()=>oe.ZR,SDK_VERSION:()=>vs,_DEFAULT_ENTRY_NAME:()=>Ut,_addComponent:()=>qt,_addOrOverwriteComponent:()=>Wt,_apps:()=>tn,_clearComponents:()=>Yo,_components:()=>Tn,_getProvider:()=>Ot,_registerComponent:()=>Cr,_removeServiceInstance:()=>Xt,deleteApp:()=>_o,getApp:()=>Br,getApps:()=>hi,initializeApp:()=>Ci,onLog:()=>ji,registerVersion:()=>jr,setLogLevel:()=>Sn});var m=P(5861),ee=P(4859),O=P(1877),oe=P(2090),re=P(8766);class de{constructor(H){this.container=H}getPlatformInfoString(){return this.container.getProviders().map(q=>{if(function le(V){return"VERSION"===V.getComponent()?.type}(q)){const be=q.getImmediate();return`${be.library}/${be.version}`}return null}).filter(q=>q).join(" ")}}const he="@firebase/app",B=new O.Yd("@firebase/app"),Ut="[DEFAULT]",qe={[he]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},tn=new Map,Tn=new Map;function qt(V,H){try{V.container.addComponent(H)}catch(q){B.debug(`Component ${H.name} failed to register with FirebaseApp ${V.name}`,q)}}function Wt(V,H){V.container.addOrOverwriteComponent(H)}function Cr(V){const H=V.name;if(Tn.has(H))return B.debug(`There were multiple attempts to register component ${H}.`),!1;Tn.set(H,V);for(const q of tn.values())qt(q,V);return!0}function Ot(V,H){const q=V.container.getProvider("heartbeat").getImmediate({optional:!0});return q&&q.triggerHeartbeat(),V.container.getProvider(H)}function Xt(V,H,q=Ut){Ot(V,H).clearInstance(q)}function Yo(){Tn.clear()}const pr=new oe.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Ur{constructor(H,q,be){this._isDeleted=!1,this._options=Object.assign({},H),this._config=Object.assign({},q),this._name=q.name,this._automaticDataCollectionEnabled=q.automaticDataCollectionEnabled,this._container=be,this.container.addComponent(new ee.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(H){this.checkDestroyed(),this._automaticDataCollectionEnabled=H}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(H){this._isDeleted=H}checkDestroyed(){if(this.isDeleted)throw pr.create("app-deleted",{appName:this._name})}}const vs="9.9.4";function Ci(V,H={}){"object"!=typeof H&&(H={name:H});const q=Object.assign({name:Ut,automaticDataCollectionEnabled:!1},H),be=q.name;if("string"!=typeof be||!be)throw pr.create("bad-app-name",{appName:String(be)});const Ue=tn.get(be);if(Ue){if((0,oe.vZ)(V,Ue.options)&&(0,oe.vZ)(q,Ue.config))return Ue;throw pr.create("duplicate-app",{appName:be})}const rt=new ee.H0(be);for(const Zt of Tn.values())rt.addComponent(Zt);const sn=new Ur(V,q,rt);return tn.set(be,sn),sn}function Br(V=Ut){const H=tn.get(V);if(!H)throw pr.create("no-app",{appName:V});return H}function hi(){return Array.from(tn.values())}function _o(V){return Ke.apply(this,arguments)}function Ke(){return(Ke=(0,m.Z)(function*(V){const H=V.name;tn.has(H)&&(tn.delete(H),yield Promise.all(V.container.getProviders().map(q=>q.delete())),V.isDeleted=!0)})).apply(this,arguments)}function jr(V,H,q){var be;let Ue=null!==(be=qe[V])&&void 0!==be?be:V;q&&(Ue+=`-${q}`);const rt=Ue.match(/\s|\//),sn=H.match(/\s|\//);if(rt||sn){const Zt=[`Unable to register library "${Ue}" with version "${H}":`];return rt&&Zt.push(`library name "${Ue}" contains illegal characters (whitespace or "/")`),rt&&sn&&Zt.push("and"),sn&&Zt.push(`version name "${H}" contains illegal characters (whitespace or "/")`),void B.warn(Zt.join(" "))}Cr(new ee.wA(`${Ue}-version`,()=>({library:Ue,version:H}),"VERSION"))}function ji(V,H){if(null!==V&&"function"!=typeof V)throw pr.create("invalid-log-argument");(0,O.Am)(V,H)}function Sn(V){(0,O.Ub)(V)}const An="firebase-heartbeat-store";let jn=null;function dn(){return jn||(jn=(0,re.X3)("firebase-heartbeat-database",1,{upgrade:(V,H)=>{0===H&&V.createObjectStore(An)}}).catch(V=>{throw pr.create("idb-open",{originalErrorMessage:V.message})})),jn}function st(){return(st=(0,m.Z)(function*(V){var H;try{return(yield dn()).transaction(An).objectStore(An).get(Jn(V))}catch(q){if(q instanceof oe.ZR)B.warn(q.message);else{const be=pr.create("idb-get",{originalErrorMessage:null===(H=q)||void 0===H?void 0:H.message});B.warn(be.message)}}})).apply(this,arguments)}function nn(V,H){return Qn.apply(this,arguments)}function Qn(){return(Qn=(0,m.Z)(function*(V,H){var q;try{const Ue=(yield dn()).transaction(An,"readwrite");return yield Ue.objectStore(An).put(H,Jn(V)),Ue.done}catch(be){if(be instanceof oe.ZR)B.warn(be.message);else{const Ue=pr.create("idb-set",{originalErrorMessage:null===(q=be)||void 0===q?void 0:q.message});B.warn(Ue.message)}}})).apply(this,arguments)}function Jn(V){return`${V.name}!${V.options.appId}`}class $i{constructor(H){this.container=H,this._heartbeatsCache=null;const q=this.container.getProvider("app").getImmediate();this._storage=new Gt(q),this._heartbeatsCachePromise=this._storage.read().then(be=>(this._heartbeatsCache=be,be))}triggerHeartbeat(){var H=this;return(0,m.Z)(function*(){const be=H.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Ue=Kt();if(null===H._heartbeatsCache&&(H._heartbeatsCache=yield H._heartbeatsCachePromise),H._heartbeatsCache.lastSentHeartbeatDate!==Ue&&!H._heartbeatsCache.heartbeats.some(rt=>rt.date===Ue))return H._heartbeatsCache.heartbeats.push({date:Ue,agent:be}),H._heartbeatsCache.heartbeats=H._heartbeatsCache.heartbeats.filter(rt=>{const sn=new Date(rt.date).valueOf();return Date.now()-sn<=2592e6}),H._storage.overwrite(H._heartbeatsCache)})()}getHeartbeatsHeader(){var H=this;return(0,m.Z)(function*(){if(null===H._heartbeatsCache&&(yield H._heartbeatsCachePromise),null===H._heartbeatsCache||0===H._heartbeatsCache.heartbeats.length)return"";const q=Kt(),{heartbeatsToSend:be,unsentEntries:Ue}=function pi(V,H=1024){const q=[];let be=V.slice();for(const Ue of V){const rt=q.find(sn=>sn.agent===Ue.agent);if(rt){if(rt.dates.push(Ue.date),K(q)>H){rt.dates.pop();break}}else if(q.push({agent:Ue.agent,dates:[Ue.date]}),K(q)>H){q.pop();break}be=be.slice(1)}return{heartbeatsToSend:q,unsentEntries:be}}(H._heartbeatsCache.heartbeats),rt=(0,oe.L)(JSON.stringify({version:2,heartbeats:be}));return H._heartbeatsCache.lastSentHeartbeatDate=q,Ue.length>0?(H._heartbeatsCache.heartbeats=Ue,yield H._storage.overwrite(H._heartbeatsCache)):(H._heartbeatsCache.heartbeats=[],H._storage.overwrite(H._heartbeatsCache)),rt})()}}function Kt(){return(new Date).toISOString().substring(0,10)}class Gt{constructor(H){this.app=H,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,m.Z)(function*(){return!!(0,oe.hl)()&&(0,oe.eu)().then(()=>!0).catch(()=>!1)})()}read(){var H=this;return(0,m.Z)(function*(){return(yield H._canUseIndexedDBPromise)&&(yield function ft(V){return st.apply(this,arguments)}(H.app))||{heartbeats:[]}})()}overwrite(H){var q=this;return(0,m.Z)(function*(){var be;if(yield q._canUseIndexedDBPromise){const rt=yield q.read();return nn(q.app,{lastSentHeartbeatDate:null!==(be=H.lastSentHeartbeatDate)&&void 0!==be?be:rt.lastSentHeartbeatDate,heartbeats:H.heartbeats})}})()}add(H){var q=this;return(0,m.Z)(function*(){var be;if(yield q._canUseIndexedDBPromise){const rt=yield q.read();return nn(q.app,{lastSentHeartbeatDate:null!==(be=H.lastSentHeartbeatDate)&&void 0!==be?be:rt.lastSentHeartbeatDate,heartbeats:[...rt.heartbeats,...H.heartbeats]})}})()}}function K(V){return(0,oe.L)(JSON.stringify({version:2,heartbeats:V})).length}!function j(V){Cr(new ee.wA("platform-logger",H=>new de(H),"PRIVATE")),Cr(new ee.wA("heartbeat",H=>new $i(H),"PRIVATE")),jr(he,"0.7.32",V),jr(he,"0.7.32","esm2017"),jr("fire-js","")}("")},4859:(at,Ae,P)=>{P.d(Ae,{H0:()=>he,wA:()=>O});var m=P(5861),ee=P(2090);class O{constructor(B,$,Y){this.name=B,this.instanceFactory=$,this.type=Y,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(B){return this.instantiationMode=B,this}setMultipleInstances(B){return this.multipleInstances=B,this}setServiceProps(B){return this.serviceProps=B,this}setInstanceCreatedCallback(B){return this.onInstanceCreated=B,this}}const oe="[DEFAULT]";class re{constructor(B,$){this.name=B,this.container=$,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(B){const $=this.normalizeInstanceIdentifier(B);if(!this.instancesDeferred.has($)){const Y=new ee.BH;if(this.instancesDeferred.set($,Y),this.isInitialized($)||this.shouldAutoInitialize())try{const Ve=this.getOrInitializeService({instanceIdentifier:$});Ve&&Y.resolve(Ve)}catch{}}return this.instancesDeferred.get($).promise}getImmediate(B){var $;const Y=this.normalizeInstanceIdentifier(B?.identifier),Ve=null!==($=B?.optional)&&void 0!==$&&$;if(!this.isInitialized(Y)&&!this.shouldAutoInitialize()){if(Ve)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:Y})}catch(Me){if(Ve)return null;throw Me}}getComponent(){return this.component}setComponent(B){if(B.name!==this.name)throw Error(`Mismatching Component ${B.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=B,this.shouldAutoInitialize()){if(function le(pe){return"EAGER"===pe.instantiationMode}(B))try{this.getOrInitializeService({instanceIdentifier:oe})}catch{}for(const[$,Y]of this.instancesDeferred.entries()){const Ve=this.normalizeInstanceIdentifier($);try{const Me=this.getOrInitializeService({instanceIdentifier:Ve});Y.resolve(Me)}catch{}}}}clearInstance(B=oe){this.instancesDeferred.delete(B),this.instancesOptions.delete(B),this.instances.delete(B)}delete(){var B=this;return(0,m.Z)(function*(){const $=Array.from(B.instances.values());yield Promise.all([...$.filter(Y=>"INTERNAL"in Y).map(Y=>Y.INTERNAL.delete()),...$.filter(Y=>"_delete"in Y).map(Y=>Y._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(B=oe){return this.instances.has(B)}getOptions(B=oe){return this.instancesOptions.get(B)||{}}initialize(B={}){const{options:$={}}=B,Y=this.normalizeInstanceIdentifier(B.instanceIdentifier);if(this.isInitialized(Y))throw Error(`${this.name}(${Y}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Ve=this.getOrInitializeService({instanceIdentifier:Y,options:$});for(const[Me,ve]of this.instancesDeferred.entries())Y===this.normalizeInstanceIdentifier(Me)&&ve.resolve(Ve);return Ve}onInit(B,$){var Y;const Ve=this.normalizeInstanceIdentifier($),Me=null!==(Y=this.onInitCallbacks.get(Ve))&&void 0!==Y?Y:new Set;Me.add(B),this.onInitCallbacks.set(Ve,Me);const ve=this.instances.get(Ve);return ve&&B(ve,Ve),()=>{Me.delete(B)}}invokeOnInitCallbacks(B,$){const Y=this.onInitCallbacks.get($);if(Y)for(const Ve of Y)try{Ve(B,$)}catch{}}getOrInitializeService({instanceIdentifier:B,options:$={}}){let Y=this.instances.get(B);if(!Y&&this.component&&(Y=this.component.instanceFactory(this.container,{instanceIdentifier:(pe=B,pe===oe?void 0:pe),options:$}),this.instances.set(B,Y),this.instancesOptions.set(B,$),this.invokeOnInitCallbacks(Y,B),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,B,Y)}catch{}var pe;return Y||null}normalizeInstanceIdentifier(B=oe){return this.component?this.component.multipleInstances?B:oe:B}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class he{constructor(B){this.name=B,this.providers=new Map}addComponent(B){const $=this.getProvider(B.name);if($.isComponentSet())throw new Error(`Component ${B.name} has already been registered with ${this.name}`);$.setComponent(B)}addOrOverwriteComponent(B){this.getProvider(B.name).isComponentSet()&&this.providers.delete(B.name),this.addComponent(B)}getProvider(B){if(this.providers.has(B))return this.providers.get(B);const $=new re(B,this);return this.providers.set(B,$),$}getProviders(){return Array.from(this.providers.values())}}},1877:(at,Ae,P)=>{P.d(Ae,{Am:()=>pe,Ub:()=>he,Yd:()=>le,in:()=>ee});const m=[];var ee=(()=>{return(B=ee||(ee={}))[B.DEBUG=0]="DEBUG",B[B.VERBOSE=1]="VERBOSE",B[B.INFO=2]="INFO",B[B.WARN=3]="WARN",B[B.ERROR=4]="ERROR",B[B.SILENT=5]="SILENT",ee;var B})();const O={debug:ee.DEBUG,verbose:ee.VERBOSE,info:ee.INFO,warn:ee.WARN,error:ee.ERROR,silent:ee.SILENT},oe=ee.INFO,re={[ee.DEBUG]:"log",[ee.VERBOSE]:"log",[ee.INFO]:"info",[ee.WARN]:"warn",[ee.ERROR]:"error"},de=(B,$,...Y)=>{if($<B.logLevel)return;const Ve=(new Date).toISOString(),Me=re[$];if(!Me)throw new Error(`Attempted to log a message with an invalid logType (value: ${$})`);console[Me](`[${Ve}]  ${B.name}:`,...Y)};class le{constructor($){this.name=$,this._logLevel=oe,this._logHandler=de,this._userLogHandler=null,m.push(this)}get logLevel(){return this._logLevel}set logLevel($){if(!($ in ee))throw new TypeError(`Invalid value "${$}" assigned to \`logLevel\``);this._logLevel=$}setLogLevel($){this._logLevel="string"==typeof $?O[$]:$}get logHandler(){return this._logHandler}set logHandler($){if("function"!=typeof $)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=$}get userLogHandler(){return this._userLogHandler}set userLogHandler($){this._userLogHandler=$}debug(...$){this._userLogHandler&&this._userLogHandler(this,ee.DEBUG,...$),this._logHandler(this,ee.DEBUG,...$)}log(...$){this._userLogHandler&&this._userLogHandler(this,ee.VERBOSE,...$),this._logHandler(this,ee.VERBOSE,...$)}info(...$){this._userLogHandler&&this._userLogHandler(this,ee.INFO,...$),this._logHandler(this,ee.INFO,...$)}warn(...$){this._userLogHandler&&this._userLogHandler(this,ee.WARN,...$),this._logHandler(this,ee.WARN,...$)}error(...$){this._userLogHandler&&this._userLogHandler(this,ee.ERROR,...$),this._logHandler(this,ee.ERROR,...$)}}function he(B){m.forEach($=>{$.setLogLevel(B)})}function pe(B,$){for(const Y of m){let Ve=null;$&&$.level&&(Ve=O[$.level]),Y.userLogHandler=null===B?null:(Me,ve,...Je)=>{const me=Je.map(fe=>{if(null==fe)return null;if("string"==typeof fe)return fe;if("number"==typeof fe||"boolean"==typeof fe)return fe.toString();if(fe instanceof Error)return fe.message;try{return JSON.stringify(fe)}catch{return null}}).filter(fe=>fe).join(" ");ve>=(Ve??Me.logLevel)&&B({level:ee[ve].toLowerCase(),message:me,args:Je,type:Me.name})}}}},8766:(at,Ae,P)=>{P.d(Ae,{Lj:()=>xe,X3:()=>nt});var m=P(5861);let O,oe;const le=new WeakMap,he=new WeakMap,pe=new WeakMap,B=new WeakMap,$=new WeakMap;let Me={get(U,ge,Z){if(U instanceof IDBTransaction){if("done"===ge)return he.get(U);if("objectStoreNames"===ge)return U.objectStoreNames||pe.get(U);if("store"===ge)return Z.objectStoreNames[1]?void 0:Z.objectStore(Z.objectStoreNames[0])}return fe(U[ge])},set:(U,ge,Z)=>(U[ge]=Z,!0),has:(U,ge)=>U instanceof IDBTransaction&&("done"===ge||"store"===ge)||ge in U};function me(U){return"function"==typeof U?function Je(U){return U!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function de(){return oe||(oe=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(U)?function(...ge){return U.apply(Ye(this),ge),fe(le.get(this))}:function(...ge){return fe(U.apply(Ye(this),ge))}:function(ge,...Z){const X=U.call(Ye(this),ge,...Z);return pe.set(X,ge.sort?ge.sort():[ge]),fe(X)}}(U):(U instanceof IDBTransaction&&function Ve(U){if(he.has(U))return;const ge=new Promise((Z,X)=>{const ie=()=>{U.removeEventListener("complete",ne),U.removeEventListener("error",Pe),U.removeEventListener("abort",Pe)},ne=()=>{Z(),ie()},Pe=()=>{X(U.error||new DOMException("AbortError","AbortError")),ie()};U.addEventListener("complete",ne),U.addEventListener("error",Pe),U.addEventListener("abort",Pe)});he.set(U,ge)}(U),((U,ge)=>ge.some(Z=>U instanceof Z))(U,function re(){return O||(O=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(U,Me):U)}function fe(U){if(U instanceof IDBRequest)return function Y(U){const ge=new Promise((Z,X)=>{const ie=()=>{U.removeEventListener("success",ne),U.removeEventListener("error",Pe)},ne=()=>{Z(fe(U.result)),ie()},Pe=()=>{X(U.error),ie()};U.addEventListener("success",ne),U.addEventListener("error",Pe)});return ge.then(Z=>{Z instanceof IDBCursor&&le.set(Z,U)}).catch(()=>{}),$.set(ge,U),ge}(U);if(B.has(U))return B.get(U);const ge=me(U);return ge!==U&&(B.set(U,ge),$.set(ge,U)),ge}const Ye=U=>$.get(U);function nt(U,ge,{blocked:Z,upgrade:X,blocking:ie,terminated:ne}={}){const Pe=indexedDB.open(U,ge),ke=fe(Pe);return X&&Pe.addEventListener("upgradeneeded",dt=>{X(fe(Pe.result),dt.oldVersion,dt.newVersion,fe(Pe.transaction))}),Z&&Pe.addEventListener("blocked",()=>Z()),ke.then(dt=>{ne&&dt.addEventListener("close",()=>ne()),ie&&dt.addEventListener("versionchange",()=>ie())}).catch(()=>{}),ke}function xe(U,{blocked:ge}={}){const Z=indexedDB.deleteDatabase(U);return ge&&Z.addEventListener("blocked",()=>ge()),fe(Z).then(()=>{})}const _e=["get","getKey","getAll","getAllKeys","count"],Ee=["put","add","delete","clear"],Be=new Map;function $e(U,ge){if(!(U instanceof IDBDatabase)||ge in U||"string"!=typeof ge)return;if(Be.get(ge))return Be.get(ge);const Z=ge.replace(/FromIndex$/,""),X=ge!==Z,ie=Ee.includes(Z);if(!(Z in(X?IDBIndex:IDBObjectStore).prototype)||!ie&&!_e.includes(Z))return;const ne=function(){var Pe=(0,m.Z)(function*(ke,...dt){const $t=this.transaction(ke,ie?"readwrite":"readonly");let Ut=$t.store;return X&&(Ut=Ut.index(dt.shift())),(yield Promise.all([Ut[Z](...dt),ie&&$t.done]))[0]});return function(dt){return Pe.apply(this,arguments)}}();return Be.set(ge,ne),ne}!function ve(U){Me=U(Me)}(U=>({...U,get:(ge,Z,X)=>$e(ge,Z)||U.get(ge,Z,X),has:(ge,Z)=>!!$e(ge,Z)||U.has(ge,Z)}))},5861:(at,Ae,P)=>{function m(O,oe,re,de,le,he,pe){try{var B=O[he](pe),$=B.value}catch(Y){return void re(Y)}B.done?oe($):Promise.resolve($).then(de,le)}function ee(O){return function(){var oe=this,re=arguments;return new Promise(function(de,le){var he=O.apply(oe,re);function pe($){m(he,de,le,pe,B,"next",$)}function B($){m(he,de,le,pe,B,"throw",$)}pe(void 0)})}}P.d(Ae,{Z:()=>ee})}},at=>{at(at.s=5706)}]);