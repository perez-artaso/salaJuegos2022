"use strict";(self.webpackChunksala_juegos_2022=self.webpackChunksala_juegos_2022||[]).push([[179],{2011:(ot,Ae,P)=>{P.d(Ae,{Dh:()=>he,GT:()=>de,cc:()=>Me,hO:()=>Le,on:()=>B,pX:()=>re,xv:()=>pe});var g=P(4650),ee=P(127),k=P(5813);ot=P.hmd(ot);const oe=["ngOnDestroy"],re=(fe,Ye,nt,xe={})=>new Proxy(fe,{get:(ve,Ie)=>nt.runOutsideAngular(()=>{var Ue;if(fe[Ie])return!(null===(Ue=xe?.spy)||void 0===Ue)&&Ue.get&&xe.spy.get(Ie,fe[Ie]),fe[Ie];if(oe.indexOf(Ie)>-1)return()=>{};const je=Ye.toPromise().then(U=>{const ge=U&&U[Ie];return"function"==typeof ge?ge.bind(U):ge&&ge.then?ge.then(Z=>nt.run(()=>Z)):nt.run(()=>ge)});return new Proxy(()=>{},{get:(U,ge)=>je[ge],apply:(U,ge,Z)=>je.then(X=>{var ie;const ne=X&&X(...Z);return!(null===(ie=xe?.spy)||void 0===ie)&&ie.apply&&xe.spy.apply(Ie,Z,ne),ne})})})}),de=(fe,Ye)=>{Ye.forEach(nt=>{Object.getOwnPropertyNames(nt.prototype||nt).forEach(xe=>{Object.defineProperty(fe.prototype,xe,Object.getOwnPropertyDescriptor(nt.prototype||nt,xe))})})};class le{constructor(Ye){return Ye}}const he=new g.OlP("angularfire2.app.options"),pe=new g.OlP("angularfire2.app.name");function B(fe,Ye,nt){const ve="object"==typeof nt&&nt||{};ve.name=ve.name||"string"==typeof nt&&nt||"[DEFAULT]";const Ue=ee.Z.apps.filter(je=>je&&je.name===ve.name)[0]||Ye.runOutsideAngular(()=>ee.Z.initializeApp(fe,ve));try{JSON.stringify(fe)!==JSON.stringify(Ue.options)&&$("error",`${Ue.name} Firebase App already initialized with different options${ot.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new le(Ue)}const $=(fe,...Ye)=>{(0,g.X6Q)()&&typeof console<"u"&&console[fe](...Ye)},Y={provide:le,useFactory:B,deps:[he,g.R0b,[new g.FiY,pe]]};let Le=(()=>{class fe{constructor(nt){ee.Z.registerVersion("angularfire",k.q4.full,"core"),ee.Z.registerVersion("angularfire",k.q4.full,"app-compat"),ee.Z.registerVersion("angular",g.q4F.full,nt.toString())}static initializeApp(nt,xe){return{ngModule:fe,providers:[{provide:he,useValue:nt},{provide:pe,useValue:xe}]}}}return fe.\u0275fac=function(nt){return new(nt||fe)(g.LFG(g.Lbi))},fe.\u0275mod=g.oAB({type:fe}),fe.\u0275inj=g.cJS({providers:[Y]}),fe})();function Me(fe,Ye,nt,xe,ve){const[,Ie,Ue]=globalThis.\u0275AngularfireInstanceCache.find(je=>je[0]===fe)||[];if(Ie)return function we(fe,Ye){try{return fe.toString()===Ye.toString()}catch{return fe===Ye}}(ve,Ue)||(me("error",`${Ye} was already initialized on the ${nt} Firebase App with different settings.${Je?" You may need to reload as Firebase is not HMR aware.":""}`),me("warn",{is:ve,was:Ue})),Ie;{const je=xe();return globalThis.\u0275AngularfireInstanceCache.push([fe,je,ve]),je}}const Je=!!ot.hot,me=(fe,...Ye)=>{(0,g.X6Q)()&&typeof console<"u"&&console[fe](...Ye)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5813:(ot,Ae,P)=>{P.d(Ae,{q4:()=>Mr,iC:()=>rs,fc:()=>Bl,HU:()=>Tu,vb:()=>qr,JM:()=>_a});var g=P(4650),ee=P(5867),k=P(5861),oe=P(9681),re=P(2090),de=P(4859),le=P(1877),he=P(8766);const pe="@firebase/installations",B="0.5.12",Y=`w:${B}`,Le="FIS_v2",Ye=new re.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function nt(D){return D instanceof re.ZR&&D.code.includes("request-failed")}function xe({projectId:D}){return`https://firebaseinstallations.googleapis.com/v1/projects/${D}/installations`}function ve(D){return{token:D.token,requestStatus:2,expiresIn:X(D.expiresIn),creationTime:Date.now()}}function Ie(D,C){return Ue.apply(this,arguments)}function Ue(){return(Ue=(0,k.Z)(function*(D,C){const F=(yield C.json()).error;return Ye.create("request-failed",{requestName:D,serverCode:F.code,serverMessage:F.message,serverStatus:F.status})})).apply(this,arguments)}function je({apiKey:D}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":D})}function U(D,{refreshToken:C}){const x=je(D);return x.append("Authorization",function ie(D){return`${Le} ${D}`}(C)),x}function ge(D){return Z.apply(this,arguments)}function Z(){return(Z=(0,k.Z)(function*(D){const C=yield D();return C.status>=500&&C.status<600?D():C})).apply(this,arguments)}function X(D){return Number(D.replace("s","000"))}function ne(D,C){return Pe.apply(this,arguments)}function Pe(){return(Pe=(0,k.Z)(function*({appConfig:D,heartbeatServiceProvider:C},{fid:x}){const F=xe(D),J=je(D),ae=C.getImmediate({optional:!0});if(ae){const yt=yield ae.getHeartbeatsHeader();yt&&J.append("x-firebase-client",yt)}const Be={method:"POST",headers:J,body:JSON.stringify({fid:x,authVersion:Le,appId:D.appId,sdkVersion:Y})},at=yield ge(()=>fetch(F,Be));if(at.ok){const yt=yield at.json();return{fid:yt.fid||x,registrationStatus:2,refreshToken:yt.refreshToken,authToken:ve(yt.authToken)}}throw yield Ie("Create Installation",at)})).apply(this,arguments)}function Oe(D){return new Promise(C=>{setTimeout(C,D)})}const Ht=/^[cdef][\w-]{21}$/;function qe(){try{const D=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(D),D[0]=112+D[0]%16;const x=function tn(D){return function ct(D){return btoa(String.fromCharCode(...D)).replace(/\+/g,"-").replace(/\//g,"_")}(D).substr(0,22)}(D);return Ht.test(x)?x:""}catch{return""}}function Cn(D){return`${D.appName}!${D.appId}`}const Wt=new Map;function Kt(D,C){const x=Cn(D);Xt(x,C),function Wo(D,C){const x=function mr(){return!Vr&&"BroadcastChannel"in self&&(Vr=new BroadcastChannel("[Firebase] FID Change"),Vr.onmessage=D=>{Xt(D.data.key,D.data.fid)}),Vr}();x&&x.postMessage({key:D,fid:C}),function Ur(){0===Wt.size&&Vr&&(Vr.close(),Vr=null)}()}(x,C)}function Xt(D,C){const x=Wt.get(D);if(x)for(const F of x)F(C)}let Vr=null;const Br="firebase-installations-store";let hi=null;function _o(){return hi||(hi=(0,he.X3)("firebase-installations-database",1,{upgrade:(D,C)=>{0===C&&D.createObjectStore(Br)}})),hi}function Ke(D,C){return jr.apply(this,arguments)}function jr(){return(jr=(0,k.Z)(function*(D,C){const x=Cn(D),J=(yield _o()).transaction(Br,"readwrite"),ae=J.objectStore(Br),Ce=yield ae.get(x);return yield ae.put(C,x),yield J.done,(!Ce||Ce.fid!==C.fid)&&Kt(D,C.fid),C})).apply(this,arguments)}function Gi(D){return Tn.apply(this,arguments)}function Tn(){return(Tn=(0,k.Z)(function*(D){const C=Cn(D),F=(yield _o()).transaction(Br,"readwrite");yield F.objectStore(Br).delete(C),yield F.done})).apply(this,arguments)}function fi(D,C){return ti.apply(this,arguments)}function ti(){return(ti=(0,k.Z)(function*(D,C){const x=Cn(D),J=(yield _o()).transaction(Br,"readwrite"),ae=J.objectStore(Br),Ce=yield ae.get(x),Be=C(Ce);return void 0===Be?yield ae.delete(x):yield ae.put(Be,x),yield J.done,Be&&(!Ce||Ce.fid!==Be.fid)&&Kt(D,Be.fid),Be})).apply(this,arguments)}function Sn(D){return jn.apply(this,arguments)}function jn(){return(jn=(0,k.Z)(function*(D){let C;const x=yield fi(D.appConfig,F=>{const J=ln(F),ae=ht(D,J);return C=ae.registrationPromise,ae.installationEntry});return""===x.fid?{installationEntry:yield C}:{installationEntry:x,registrationPromise:C}})).apply(this,arguments)}function ln(D){return Et(D||{fid:qe(),registrationStatus:0})}function ht(D,C){if(0===C.registrationStatus){if(!navigator.onLine)return{installationEntry:C,registrationPromise:Promise.reject(Ye.create("app-offline"))};const x={fid:C.fid,registrationStatus:1,registrationTime:Date.now()},F=function st(D,C){return nn.apply(this,arguments)}(D,x);return{installationEntry:x,registrationPromise:F}}return 1===C.registrationStatus?{installationEntry:C,registrationPromise:er(D)}:{installationEntry:C}}function nn(){return(nn=(0,k.Z)(function*(D,C){try{const x=yield ne(D,C);return Ke(D.appConfig,x)}catch(x){throw nt(x)&&409===x.customData.serverCode?yield Gi(D.appConfig):yield Ke(D.appConfig,{fid:C.fid,registrationStatus:0}),x}})).apply(this,arguments)}function er(D){return tr.apply(this,arguments)}function tr(){return(tr=(0,k.Z)(function*(D){let C=yield Tr(D.appConfig);for(;1===C.registrationStatus;)yield Oe(100),C=yield Tr(D.appConfig);if(0===C.registrationStatus){const{installationEntry:x,registrationPromise:F}=yield Sn(D);return F||x}return C})).apply(this,arguments)}function Tr(D){return fi(D,C=>{if(!C)throw Ye.create("installation-not-found");return Et(C)})}function Et(D){return function zi(D){return 1===D.registrationStatus&&D.registrationTime+1e4<Date.now()}(D)?{fid:D.fid,registrationStatus:0}:D}function Zt(D,C){return pi.apply(this,arguments)}function pi(){return(pi=(0,k.Z)(function*({appConfig:D,heartbeatServiceProvider:C},x){const F=Gt(D,x),J=U(D,x),ae=C.getImmediate({optional:!0});if(ae){const yt=yield ae.getHeartbeatsHeader();yt&&J.append("x-firebase-client",yt)}const Be={method:"POST",headers:J,body:JSON.stringify({installation:{sdkVersion:Y,appId:D.appId}})},at=yield ge(()=>fetch(F,Be));if(at.ok)return ve(yield at.json());throw yield Ie("Generate Auth Token",at)})).apply(this,arguments)}function Gt(D,{fid:C}){return`${xe(D)}/${C}/authTokens:generate`}function K(D){return j.apply(this,arguments)}function j(){return(j=(0,k.Z)(function*(D,C=!1){let x;const F=yield fi(D.appConfig,ae=>{if(!rt(ae))throw Ye.create("not-registered");const Ce=ae.authToken;if(!C&&on(Ce))return ae;if(1===Ce.requestStatus)return x=V(D,C),ae;{if(!navigator.onLine)throw Ye.create("app-offline");const Be=$n(ae);return x=De(D,Be),Be}});return x?yield x:F.authToken})).apply(this,arguments)}function V(D,C){return H.apply(this,arguments)}function H(){return(H=(0,k.Z)(function*(D,C){let x=yield q(D.appConfig);for(;1===x.authToken.requestStatus;)yield Oe(100),x=yield q(D.appConfig);const F=x.authToken;return 0===F.requestStatus?K(D,C):F})).apply(this,arguments)}function q(D){return fi(D,C=>{if(!rt(C))throw Ye.create("not-registered");return function Pt(D){return 1===D.requestStatus&&D.requestTime+1e4<Date.now()}(C.authToken)?Object.assign(Object.assign({},C),{authToken:{requestStatus:0}}):C})}function De(D,C){return Ve.apply(this,arguments)}function Ve(){return(Ve=(0,k.Z)(function*(D,C){try{const x=yield Zt(D,C),F=Object.assign(Object.assign({},C),{authToken:x});return yield Ke(D.appConfig,F),x}catch(x){if(!nt(x)||401!==x.customData.serverCode&&404!==x.customData.serverCode){const F=Object.assign(Object.assign({},C),{authToken:{requestStatus:0}});yield Ke(D.appConfig,F)}else yield Gi(D.appConfig);throw x}})).apply(this,arguments)}function rt(D){return void 0!==D&&2===D.registrationStatus}function on(D){return 2===D.requestStatus&&!function Yt(D){const C=Date.now();return C<D.creationTime||D.creationTime+D.expiresIn<C+36e5}(D)}function $n(D){const C={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},D),{authToken:C})}function dn(){return(dn=(0,k.Z)(function*(D){const C=D,{installationEntry:x,registrationPromise:F}=yield Sn(C);return F?F.catch(console.error):K(C).catch(console.error),x.fid})).apply(this,arguments)}function Ai(){return(Ai=(0,k.Z)(function*(D,C=!1){const x=D;return yield Sr(x),(yield K(x,C)).token})).apply(this,arguments)}function Sr(D){return On.apply(this,arguments)}function On(){return(On=(0,k.Z)(function*(D){const{registrationPromise:C}=yield Sn(D);C&&(yield C)})).apply(this,arguments)}function Es(D){return Ye.create("missing-app-config-values",{valueName:D})}const Ws="installations",fn=D=>{const C=D.getProvider("app").getImmediate(),x=function hn(D){if(!D||!D.options)throw Es("App Configuration");if(!D.name)throw Es("App Name");const C=["projectId","apiKey","appId"];for(const x of C)if(!D.options[x])throw Es(x);return{appName:D.name,projectId:D.options.projectId,apiKey:D.options.apiKey,appId:D.options.appId}}(C);return{app:C,appConfig:x,heartbeatServiceProvider:(0,oe._getProvider)(C,"heartbeat"),_delete:()=>Promise.resolve()}},Ks=D=>{const C=D.getProvider("app").getImmediate(),x=(0,oe._getProvider)(C,Ws).getImmediate();return{getId:()=>function Mt(D){return dn.apply(this,arguments)}(x),getToken:J=>function Nn(D){return Ai.apply(this,arguments)}(x,J)}};(function ul(){(0,oe._registerComponent)(new de.wA(Ws,fn,"PUBLIC")),(0,oe._registerComponent)(new de.wA("installations-internal",Ks,"PRIVATE"))})(),(0,oe.registerVersion)(pe,B),(0,oe.registerVersion)(pe,B,"esm2017");const xi="@firebase/remote-config",Pn=new re.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Nh{constructor(C,x,F,J){this.client=C,this.storage=x,this.storageCache=F,this.logger=J}isCachedDataFresh(C,x){if(!x)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const F=Date.now()-x,J=F<=C;return this.logger.debug(`Config fetch cache check. Cache age millis: ${F}. Cache max age millis (minimumFetchIntervalMillis setting): ${C}. Is cache hit: ${J}.`),J}fetch(C){var x=this;return(0,k.Z)(function*(){const[F,J]=yield Promise.all([x.storage.getLastSuccessfulFetchTimestampMillis(),x.storage.getLastSuccessfulFetchResponse()]);if(J&&x.isCachedDataFresh(C.cacheMaxAgeMillis,F))return J;C.eTag=J&&J.eTag;const ae=yield x.client.fetch(C),Ce=[x.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===ae.status&&Ce.push(x.storage.setLastSuccessfulFetchResponse(ae)),yield Promise.all(Ce),ae})()}}function fl(D=navigator){return D.languages&&D.languages[0]||D.language}class pl{constructor(C,x,F,J,ae,Ce){this.firebaseInstallations=C,this.sdkVersion=x,this.namespace=F,this.projectId=J,this.apiKey=ae,this.appId=Ce}fetch(C){var x=this;return(0,k.Z)(function*(){var F,J,ae;const[Ce,Be]=yield Promise.all([x.firebaseInstallations.getId(),x.firebaseInstallations.getToken()]),yt=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${x.projectId}/namespaces/${x.namespace}:fetch?key=${x.apiKey}`,St={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":C.eTag||"*"},dt={sdk_version:x.sdkVersion,app_instance_id:Ce,app_instance_id_token:Be,app_id:x.appId,language_code:fl()},pn={method:"POST",headers:St,body:JSON.stringify(dt)},sr=fetch(yt,pn),Os=new Promise((Wr,Ps)=>{C.signal.addEventListener(()=>{const Hh=new Error("The operation was aborted.");Hh.name="AbortError",Ps(Hh)})});let is;try{yield Promise.race([sr,Os]),is=yield sr}catch(Wr){let Ps="fetch-client-network";throw"AbortError"===(null===(F=Wr)||void 0===F?void 0:F.name)&&(Ps="fetch-timeout"),Pn.create(Ps,{originalErrorMessage:null===(J=Wr)||void 0===J?void 0:J.message})}let ks=is.status;const ho=is.headers.get("ETag")||void 0;let ss,bn;if(200===is.status){let Wr;try{Wr=yield is.json()}catch(Ps){throw Pn.create("fetch-client-parse",{originalErrorMessage:null===(ae=Ps)||void 0===ae?void 0:ae.message})}ss=Wr.entries,bn=Wr.state}if("INSTANCE_STATE_UNSPECIFIED"===bn?ks=500:"NO_CHANGE"===bn?ks=304:("NO_TEMPLATE"===bn||"EMPTY_CONFIG"===bn)&&(ss={}),304!==ks&&200!==ks)throw Pn.create("fetch-status",{httpStatus:ks});return{status:ks,eTag:ho,config:ss}})()}}class Up{constructor(C,x){this.client=C,this.storage=x}fetch(C){var x=this;return(0,k.Z)(function*(){const F=(yield x.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return x.attemptFetch(C,F)})()}attemptFetch(C,{throttleEndTimeMillis:x,backoffCount:F}){var J=this;return(0,k.Z)(function*(){yield function Gn(D,C){return new Promise((x,F)=>{const J=Math.max(C-Date.now(),0),ae=setTimeout(x,J);D.addEventListener(()=>{clearTimeout(ae),F(Pn.create("fetch-throttle",{throttleEndTimeMillis:C}))})})}(C.signal,x);try{const ae=yield J.client.fetch(C);return yield J.storage.deleteThrottleMetadata(),ae}catch(ae){if(!function Uc(D){if(!(D instanceof re.ZR&&D.customData))return!1;const C=Number(D.customData.httpStatus);return 429===C||500===C||503===C||504===C}(ae))throw ae;const Ce={throttleEndTimeMillis:Date.now()+(0,re.$s)(F),backoffCount:F+1};return yield J.storage.setThrottleMetadata(Ce),J.attemptFetch(C,Ce)}})()}}class Bc{constructor(C,x,F,J,ae){this.app=C,this._client=x,this._storageCache=F,this._storage=J,this._logger=ae,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function gl(D,C){var x;const F=D.target.error||void 0;return Pn.create(C,{originalErrorMessage:F&&(null===(x=F)||void 0===x?void 0:x.message)})}const Cs="app_namespace_store";class Hp{constructor(C,x,F,J=function $p(){return new Promise((D,C)=>{var x;try{const F=indexedDB.open("firebase_remote_config",1);F.onerror=J=>{C(gl(J,"storage-open"))},F.onsuccess=J=>{D(J.target.result)},F.onupgradeneeded=J=>{0===J.oldVersion&&J.target.result.createObjectStore(Cs,{keyPath:"compositeKey"})}}catch(F){C(Pn.create("storage-open",{originalErrorMessage:null===(x=F)||void 0===x?void 0:x.message}))}})}()){this.appId=C,this.appName=x,this.namespace=F,this.openDbPromise=J}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(C){return this.set("last_fetch_status",C)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(C){return this.set("last_successful_fetch_timestamp_millis",C)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(C){return this.set("last_successful_fetch_response",C)}getActiveConfig(){return this.get("active_config")}setActiveConfig(C){return this.set("active_config",C)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(C){return this.set("active_config_etag",C)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(C){return this.set("throttle_metadata",C)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(C){var x=this;return(0,k.Z)(function*(){const F=yield x.openDbPromise;return new Promise((J,ae)=>{var Ce;const at=F.transaction([Cs],"readonly").objectStore(Cs),yt=x.createCompositeKey(C);try{const St=at.get(yt);St.onerror=dt=>{ae(gl(dt,"storage-get"))},St.onsuccess=dt=>{const pn=dt.target.result;J(pn?pn.value:void 0)}}catch(St){ae(Pn.create("storage-get",{originalErrorMessage:null===(Ce=St)||void 0===Ce?void 0:Ce.message}))}})})()}set(C,x){var F=this;return(0,k.Z)(function*(){const J=yield F.openDbPromise;return new Promise((ae,Ce)=>{var Be;const yt=J.transaction([Cs],"readwrite").objectStore(Cs),St=F.createCompositeKey(C);try{const dt=yt.put({compositeKey:St,value:x});dt.onerror=pn=>{Ce(gl(pn,"storage-set"))},dt.onsuccess=()=>{ae()}}catch(dt){Ce(Pn.create("storage-set",{originalErrorMessage:null===(Be=dt)||void 0===Be?void 0:Be.message}))}})})()}delete(C){var x=this;return(0,k.Z)(function*(){const F=yield x.openDbPromise;return new Promise((J,ae)=>{var Ce;const at=F.transaction([Cs],"readwrite").objectStore(Cs),yt=x.createCompositeKey(C);try{const St=at.delete(yt);St.onerror=dt=>{ae(gl(dt,"storage-delete"))},St.onsuccess=()=>{J()}}catch(St){ae(Pn.create("storage-delete",{originalErrorMessage:null===(Ce=St)||void 0===Ce?void 0:Ce.message}))}})})()}createCompositeKey(C){return[this.appId,this.appName,this.namespace,C].join()}}class $c{constructor(C){this.storage=C}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var C=this;return(0,k.Z)(function*(){const x=C.storage.getLastFetchStatus(),F=C.storage.getLastSuccessfulFetchTimestampMillis(),J=C.storage.getActiveConfig(),ae=yield x;ae&&(C.lastFetchStatus=ae);const Ce=yield F;Ce&&(C.lastSuccessfulFetchTimestampMillis=Ce);const Be=yield J;Be&&(C.activeConfig=Be)})()}setLastFetchStatus(C){return this.lastFetchStatus=C,this.storage.setLastFetchStatus(C)}setLastSuccessfulFetchTimestampMillis(C){return this.lastSuccessfulFetchTimestampMillis=C,this.storage.setLastSuccessfulFetchTimestampMillis(C)}setActiveConfig(C){return this.activeConfig=C,this.storage.setActiveConfig(C)}}function Qa(){return Oh.apply(this,arguments)}function Oh(){return(Oh=(0,k.Z)(function*(){if(!(0,re.hl)())return!1;try{return yield(0,re.eu)()}catch{return!1}})).apply(this,arguments)}!function Ts(){(0,oe._registerComponent)(new de.wA("remote-config",function D(C,{instanceIdentifier:x}){const F=C.getProvider("app").getImmediate(),J=C.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw Pn.create("registration-window");if(!(0,re.hl)())throw Pn.create("indexed-db-unavailable");const{projectId:ae,apiKey:Ce,appId:Be}=F.options;if(!ae)throw Pn.create("registration-project-id");if(!Ce)throw Pn.create("registration-api-key");if(!Be)throw Pn.create("registration-app-id");const at=new Hp(Be,F.name,x=x||"firebase"),yt=new $c(at),St=new le.Yd(xi);St.logLevel=le.in.ERROR;const dt=new pl(J,oe.SDK_VERSION,x,ae,Ce,Be),pn=new Up(dt,at),sr=new Nh(pn,at,yt,St),Os=new Bc(F,sr,yt,at,St);return function lr(D){const C=(0,re.m9)(D);C._initializePromise||(C._initializePromise=C._storageCache.loadFromStorage().then(()=>{C._isInitializationComplete=!0}))}(Os),Os},"PUBLIC").setMultipleInstances(!0)),(0,oe.registerVersion)(xi,"0.3.11"),(0,oe.registerVersion)(xi,"0.3.11","esm2017")}();const Mi="/firebase-messaging-sw.js",Wi="/firebase-cloud-messaging-push-scope",Ki="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Qo="google.c.a.c_id",Ja="google.c.a.c_l",ml="google.c.a.ts",kh="google.c.a.e";var Zi=(()=>{return(D=Zi||(Zi={})).PUSH_RECEIVED="push-received",D.NOTIFICATION_CLICKED="notification-clicked",Zi;var D})();function ri(D){const C=new Uint8Array(D);return btoa(String.fromCharCode(...C)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function $r(D){const x=(D+"=".repeat((4-D.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),F=atob(x),J=new Uint8Array(F.length);for(let ae=0;ae<F.length;++ae)J[ae]=F.charCodeAt(ae);return J}const wo="fcm_token_details_db",cr="fcm_token_object_Store";function Ph(D){return Fh.apply(this,arguments)}function Fh(){return Fh=(0,k.Z)(function*(D){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(ae=>ae.name).includes(wo))return null;let C=null;return(yield(0,he.X3)(wo,5,{upgrade:(F=(0,k.Z)(function*(J,ae,Ce,Be){var at;if(ae<2||!J.objectStoreNames.contains(cr))return;const yt=Be.objectStore(cr),St=yield yt.index("fcmSenderId").get(D);if(yield yt.clear(),St)if(2===ae){const dt=St;if(!dt.auth||!dt.p256dh||!dt.endpoint)return;C={token:dt.fcmToken,createTime:null!==(at=dt.createTime)&&void 0!==at?at:Date.now(),subscriptionOptions:{auth:dt.auth,p256dh:dt.p256dh,endpoint:dt.endpoint,swScope:dt.swScope,vapidKey:"string"==typeof dt.vapidKey?dt.vapidKey:ri(dt.vapidKey)}}}else if(3===ae){const dt=St;C={token:dt.fcmToken,createTime:dt.createTime,subscriptionOptions:{auth:ri(dt.auth),p256dh:ri(dt.p256dh),endpoint:dt.endpoint,swScope:dt.swScope,vapidKey:ri(dt.vapidKey)}}}else if(4===ae){const dt=St;C={token:dt.fcmToken,createTime:dt.createTime,subscriptionOptions:{auth:ri(dt.auth),p256dh:ri(dt.p256dh),endpoint:dt.endpoint,swScope:dt.swScope,vapidKey:ri(dt.vapidKey)}}}}),function(ae,Ce,Be,at){return F.apply(this,arguments)})})).close(),yield(0,he.Lj)(wo),yield(0,he.Lj)("fcm_vapid_details_db"),yield(0,he.Lj)("undefined"),_n(C)?C:null;var F}),Fh.apply(this,arguments)}function _n(D){if(!D||!D.subscriptionOptions)return!1;const{subscriptionOptions:C}=D;return"number"==typeof D.createTime&&D.createTime>0&&"string"==typeof D.token&&D.token.length>0&&"string"==typeof C.auth&&C.auth.length>0&&"string"==typeof C.p256dh&&C.p256dh.length>0&&"string"==typeof C.endpoint&&C.endpoint.length>0&&"string"==typeof C.swScope&&C.swScope.length>0&&"string"==typeof C.vapidKey&&C.vapidKey.length>0}const ii="firebase-messaging-store";let xr=null;function eu(){return xr||(xr=(0,he.X3)("firebase-messaging-database",1,{upgrade:(D,C)=>{0===C&&D.createObjectStore(ii)}})),xr}function Qs(D){return Yi.apply(this,arguments)}function Yi(){return(Yi=(0,k.Z)(function*(D){const C=yi(D),F=yield(yield eu()).transaction(ii).objectStore(ii).get(C);if(F)return F;{const J=yield Ph(D.appConfig.senderId);if(J)return yield jt(D,J),J}})).apply(this,arguments)}function jt(D,C){return Xo.apply(this,arguments)}function Xo(){return(Xo=(0,k.Z)(function*(D,C){const x=yi(D),J=(yield eu()).transaction(ii,"readwrite");return yield J.objectStore(ii).put(C,x),yield J.done,C})).apply(this,arguments)}function Js(D){return tu.apply(this,arguments)}function tu(){return(tu=(0,k.Z)(function*(D){const C=yi(D),F=(yield eu()).transaction(ii,"readwrite");yield F.objectStore(ii).delete(C),yield F.done})).apply(this,arguments)}function yi({appConfig:D}){return D.appId}const yn=new re.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function It(D,C){return ru.apply(this,arguments)}function ru(){return(ru=(0,k.Z)(function*(D,C){var x;const F=yield _l(D),J=Se(C),ae={method:"POST",headers:F,body:JSON.stringify(J)};let Ce;try{Ce=yield(yield fetch(Qi(D.appConfig),ae)).json()}catch(Be){throw yn.create("token-subscribe-failed",{errorInfo:null===(x=Be)||void 0===x?void 0:x.toString()})}if(Ce.error)throw yn.create("token-subscribe-failed",{errorInfo:Ce.error.message});if(!Ce.token)throw yn.create("token-subscribe-no-token");return Ce.token})).apply(this,arguments)}function Vh(D,C){return iu.apply(this,arguments)}function iu(){return(iu=(0,k.Z)(function*(D,C){var x;const F=yield _l(D),J=Se(C.subscriptionOptions),ae={method:"PATCH",headers:F,body:JSON.stringify(J)};let Ce;try{Ce=yield(yield fetch(`${Qi(D.appConfig)}/${C.token}`,ae)).json()}catch(Be){throw yn.create("token-update-failed",{errorInfo:null===(x=Be)||void 0===x?void 0:x.toString()})}if(Ce.error)throw yn.create("token-update-failed",{errorInfo:Ce.error.message});if(!Ce.token)throw yn.create("token-update-no-token");return Ce.token})).apply(this,arguments)}function su(D,C){return yl.apply(this,arguments)}function yl(){return(yl=(0,k.Z)(function*(D,C){var x;const J={method:"DELETE",headers:yield _l(D)};try{const Ce=yield(yield fetch(`${Qi(D.appConfig)}/${C}`,J)).json();if(Ce.error)throw yn.create("token-unsubscribe-failed",{errorInfo:Ce.error.message})}catch(ae){throw yn.create("token-unsubscribe-failed",{errorInfo:null===(x=ae)||void 0===x?void 0:x.toString()})}})).apply(this,arguments)}function Qi({projectId:D}){return`https://fcmregistrations.googleapis.com/v1/projects/${D}/registrations`}function _l(D){return ea.apply(this,arguments)}function ea(){return(ea=(0,k.Z)(function*({appConfig:D,installations:C}){const x=yield C.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":D.apiKey,"x-goog-firebase-installations-auth":`FIS ${x}`})})).apply(this,arguments)}function Se({p256dh:D,auth:C,endpoint:x,vapidKey:F}){const J={web:{endpoint:x,auth:C,p256dh:D}};return F!==Ki&&(J.web.applicationPubKey=F),J}const Ft=6048e5;function vl(D){return wl.apply(this,arguments)}function wl(){return(wl=(0,k.Z)(function*(D){const C=yield El(D.swRegistration,D.vapidKey),x={vapidKey:D.vapidKey,swScope:D.swRegistration.scope,endpoint:C.endpoint,auth:ri(C.getKey("auth")),p256dh:ri(C.getKey("p256dh"))},F=yield Qs(D.firebaseDependencies);if(F){if(qc(F.subscriptionOptions,x))return Date.now()>=F.createTime+Ft?Eo(D,{token:F.token,createTime:Date.now(),subscriptionOptions:x}):F.token;try{yield su(D.firebaseDependencies,F.token)}catch(J){console.warn(J)}return ta(D.firebaseDependencies,x)}return ta(D.firebaseDependencies,x)})).apply(this,arguments)}function vn(D){return ou.apply(this,arguments)}function ou(){return(ou=(0,k.Z)(function*(D){const C=yield Qs(D.firebaseDependencies);C&&(yield su(D.firebaseDependencies,C.token),yield Js(D.firebaseDependencies));const x=yield D.swRegistration.pushManager.getSubscription();return!x||x.unsubscribe()})).apply(this,arguments)}function Eo(D,C){return si.apply(this,arguments)}function si(){return(si=(0,k.Z)(function*(D,C){try{const x=yield Vh(D.firebaseDependencies,C),F=Object.assign(Object.assign({},C),{token:x,createTime:Date.now()});return yield jt(D.firebaseDependencies,F),x}catch(x){throw yield vn(D),x}})).apply(this,arguments)}function ta(D,C){return na.apply(this,arguments)}function na(){return(na=(0,k.Z)(function*(D,C){const F={token:yield It(D,C),createTime:Date.now(),subscriptionOptions:C};return yield jt(D,F),F.token})).apply(this,arguments)}function El(D,C){return Il.apply(this,arguments)}function Il(){return(Il=(0,k.Z)(function*(D,C){return(yield D.pushManager.getSubscription())||D.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:$r(C)})})).apply(this,arguments)}function qc(D,C){return C.vapidKey===D.vapidKey&&C.endpoint===D.endpoint&&C.auth===D.auth&&C.p256dh===D.p256dh}function Xs(D){const C={from:D.from,collapseKey:D.collapse_key,messageId:D.fcmMessageId};return function wn(D,C){if(!C.notification)return;D.notification={};const x=C.notification.title;x&&(D.notification.title=x);const F=C.notification.body;F&&(D.notification.body=F);const J=C.notification.image;J&&(D.notification.image=J)}(C,D),function Ri(D,C){!C.data||(D.data=C.data)}(C,D),function bl(D,C){var x,F,J,ae,Ce;if(!(C.fcmOptions||null!==(x=C.notification)&&void 0!==x&&x.click_action))return;D.fcmOptions={};const Be=null!==(J=null===(F=C.fcmOptions)||void 0===F?void 0:F.link)&&void 0!==J?J:null===(ae=C.notification)||void 0===ae?void 0:ae.click_action;Be&&(D.fcmOptions.link=Be);const at=null===(Ce=C.fcmOptions)||void 0===Ce?void 0:Ce.analytics_label;at&&(D.fcmOptions.analyticsLabel=at)}(C,D),C}function eo(D){return"object"==typeof D&&!!D&&Qo in D}function Ji(D,C){const x=[];for(let F=0;F<D.length;F++)x.push(D.charAt(F)),F<C.length&&x.push(C.charAt(F));return x.join("")}function ra(D){return yn.create("missing-app-config-values",{valueName:D})}Ji("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Ji("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class zp{constructor(C,x,F){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const J=function Gp(D){if(!D||!D.options)throw ra("App Configuration Object");if(!D.name)throw ra("App Name");const C=["projectId","apiKey","appId","messagingSenderId"],{options:x}=D;for(const F of C)if(!x[F])throw ra(F);return{appName:D.name,projectId:x.projectId,apiKey:x.apiKey,appId:x.appId,senderId:x.messagingSenderId}}(C);this.firebaseDependencies={app:C,appConfig:J,installations:x,analyticsProvider:F}}_delete(){return Promise.resolve()}}function Dl(D){return au.apply(this,arguments)}function au(){return(au=(0,k.Z)(function*(D){var C;try{D.swRegistration=yield navigator.serviceWorker.register(Mi,{scope:Wi}),D.swRegistration.update().catch(()=>{})}catch(x){throw yn.create("failed-service-worker-registration",{browserErrorMessage:null===(C=x)||void 0===C?void 0:C.message})}})).apply(this,arguments)}function ia(D,C){return Cl.apply(this,arguments)}function Cl(){return(Cl=(0,k.Z)(function*(D,C){if(!C&&!D.swRegistration&&(yield Dl(D)),C||!D.swRegistration){if(!(C instanceof ServiceWorkerRegistration))throw yn.create("invalid-sw-registration");D.swRegistration=C}})).apply(this,arguments)}function sa(D,C){return Tl.apply(this,arguments)}function Tl(){return(Tl=(0,k.Z)(function*(D,C){C?D.vapidKey=C:D.vapidKey||(D.vapidKey=Ki)})).apply(this,arguments)}function lu(){return(lu=(0,k.Z)(function*(D,C){if(!navigator)throw yn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw yn.create("permission-blocked");return yield sa(D,C?.vapidKey),yield ia(D,C?.serviceWorkerRegistration),vl(D)})).apply(this,arguments)}function Sl(D,C,x){return Al.apply(this,arguments)}function Al(){return(Al=(0,k.Z)(function*(D,C,x){const F=xl(C);(yield D.firebaseDependencies.analyticsProvider.get()).logEvent(F,{message_id:x[Qo],message_name:x[Ja],message_time:x[ml],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function xl(D){switch(D){case Zi.NOTIFICATION_CLICKED:return"notification_open";case Zi.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function to(){return(to=(0,k.Z)(function*(D,C){const x=C.data;if(!x.isFirebaseMessaging)return;D.onMessageHandler&&x.messageType===Zi.PUSH_RECEIVED&&("function"==typeof D.onMessageHandler?D.onMessageHandler(Xs(x)):D.onMessageHandler.next(Xs(x)));const F=x.data;eo(F)&&"1"===F[kh]&&(yield Sl(D,x.messageType,F))})).apply(this,arguments)}const no="@firebase/messaging",zn=D=>{const C=new zp(D.getProvider("app").getImmediate(),D.getProvider("installations-internal").getImmediate(),D.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",x=>function Wc(D,C){return to.apply(this,arguments)}(C,x)),C},Hr=D=>{const C=D.getProvider("messaging").getImmediate();return{getToken:F=>function uu(D,C){return lu.apply(this,arguments)}(C,F)}};function Kc(){return Ml.apply(this,arguments)}function Ml(){return(Ml=(0,k.Z)(function*(){try{yield(0,re.eu)()}catch{return!1}return typeof window<"u"&&(0,re.hl)()&&(0,re.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function cn(){(0,oe._registerComponent)(new de.wA("messaging",zn,"PUBLIC")),(0,oe._registerComponent)(new de.wA("messaging-internal",Hr,"PRIVATE")),(0,oe.registerVersion)(no,"0.9.16"),(0,oe.registerVersion)(no,"0.9.16","esm2017")}();const Do="analytics",Qc="firebase_id",ro="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",hu="https://www.googletagmanager.com/gtag/js",En=new le.Yd("@firebase/analytics");function fu(D){return Promise.all(D.map(C=>C.catch(x=>x)))}function pu(D,C){const x=document.createElement("script");x.src=`${hu}?l=${D}&id=${C}`,x.async=!0,document.head.appendChild(x)}function Bh(D,C,x,F,J,ae){return Co.apply(this,arguments)}function Co(){return(Co=(0,k.Z)(function*(D,C,x,F,J,ae){const Ce=F[J];try{if(Ce)yield C[Ce];else{const at=(yield fu(x)).find(yt=>yt.measurementId===J);at&&(yield C[at.appId])}}catch(Be){En.error(Be)}D("config",J,ae)})).apply(this,arguments)}function To(D,C,x,F,J){return io.apply(this,arguments)}function io(){return(io=(0,k.Z)(function*(D,C,x,F,J){try{let ae=[];if(J&&J.send_to){let Ce=J.send_to;Array.isArray(Ce)||(Ce=[Ce]);const Be=yield fu(x);for(const at of Ce){const yt=Be.find(dt=>dt.measurementId===at),St=yt&&C[yt.appId];if(!St){ae=[];break}ae.push(St)}}0===ae.length&&(ae=Object.values(C)),yield Promise.all(ae),D("event",F,J||{})}catch(ae){En.error(ae)}})).apply(this,arguments)}function Xc(){const D=window.document.getElementsByTagName("script");for(const C of Object.values(D))if(C.src&&C.src.includes(hu))return C;return null}const rr=new re.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),la=new class Ni{constructor(C={},x=1e3){this.throttleMetadata=C,this.intervalMillis=x}getThrottleMetadata(C){return this.throttleMetadata[C]}setThrottleMetadata(C,x){this.throttleMetadata[C]=x}deleteThrottleMetadata(C){delete this.throttleMetadata[C]}};function td(D){return new Headers({Accept:"application/json","x-goog-api-key":D})}function ca(D){return Ol.apply(this,arguments)}function Ol(){return(Ol=(0,k.Z)(function*(D){var C;const{appId:x,apiKey:F}=D,J={method:"GET",headers:td(F)},ae=ro.replace("{app-id}",x),Ce=yield fetch(ae,J);if(200!==Ce.status&&304!==Ce.status){let Be="";try{const at=yield Ce.json();null!==(C=at.error)&&void 0!==C&&C.message&&(Be=at.error.message)}catch{}throw rr.create("config-fetch-failed",{httpStatus:Ce.status,responseMessage:Be})}return Ce.json()})).apply(this,arguments)}function An(D){return _i.apply(this,arguments)}function _i(){return(_i=(0,k.Z)(function*(D,C=la,x){const{appId:F,apiKey:J,measurementId:ae}=D.options;if(!F)throw rr.create("no-app-id");if(!J){if(ae)return{measurementId:ae,appId:F};throw rr.create("no-api-key")}const Ce=C.getThrottleMetadata(F)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Be=new _u;return setTimeout((0,k.Z)(function*(){Be.abort()}),void 0!==x?x:6e4),mu({appId:F,apiKey:J,measurementId:ae},Ce,Be,C)})).apply(this,arguments)}function mu(D,C,x){return so.apply(this,arguments)}function so(){return(so=(0,k.Z)(function*(D,{throttleEndTimeMillis:C,backoffCount:x},F,J=la){var ae,Ce;const{appId:Be,measurementId:at}=D;try{yield da(F,C)}catch(yt){if(at)return En.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${at} provided in the "measurementId" field in the local Firebase config. [${null===(ae=yt)||void 0===ae?void 0:ae.message}]`),{appId:Be,measurementId:at};throw yt}try{const yt=yield ca(D);return J.deleteThrottleMetadata(Be),yt}catch(yt){const St=yt;if(!yu(St)){if(J.deleteThrottleMetadata(Be),at)return En.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${at} provided in the "measurementId" field in the local Firebase config. [${St?.message}]`),{appId:Be,measurementId:at};throw yt}const dt=503===Number(null===(Ce=St?.customData)||void 0===Ce?void 0:Ce.httpStatus)?(0,re.$s)(x,J.intervalMillis,30):(0,re.$s)(x,J.intervalMillis),pn={throttleEndTimeMillis:Date.now()+dt,backoffCount:x+1};return J.setThrottleMetadata(Be,pn),En.debug(`Calling attemptFetch again in ${dt} millis`),mu(D,pn,F,J)}})).apply(this,arguments)}function da(D,C){return new Promise((x,F)=>{const J=Math.max(C-Date.now(),0),ae=setTimeout(x,J);D.addEventListener(()=>{clearTimeout(ae),F(rr.create("fetch-throttle",{throttleEndTimeMillis:C}))})})}function yu(D){if(!(D instanceof re.ZR&&D.customData))return!1;const C=Number(D.customData.httpStatus);return 429===C||500===C||503===C||504===C}class _u{constructor(){this.listeners=[]}addEventListener(C){this.listeners.push(C)}abort(){this.listeners.forEach(C=>C())}}let xs,fa;function Ms(){return(Ms=(0,k.Z)(function*(D,C,x,F,J){if(J&&J.global)D("event",x,F);else{const ae=yield C;D("event",x,Object.assign(Object.assign({},F),{send_to:ae}))}})).apply(this,arguments)}function ao(D){fa=D}function Fl(D){xs=D}function es(){return wu.apply(this,arguments)}function wu(){return(wu=(0,k.Z)(function*(){var D;if(!(0,re.hl)())return En.warn(rr.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,re.eu)()}catch(C){return En.warn(rr.create("indexeddb-unavailable",{errorInfo:null===(D=C)||void 0===D?void 0:D.toString()}).message),!1}return!0})).apply(this,arguments)}function xo(){return(xo=(0,k.Z)(function*(D,C,x,F,J,ae,Ce){var Be;const at=An(D);at.then(sr=>{x[sr.measurementId]=sr.appId,D.options.measurementId&&sr.measurementId!==D.options.measurementId&&En.warn(`The measurement ID in the local Firebase config (${D.options.measurementId}) does not match the measurement ID fetched from the server (${sr.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(sr=>En.error(sr)),C.push(at);const yt=es().then(sr=>{if(sr)return F.getId()}),[St,dt]=yield Promise.all([at,yt]);Xc()||pu(ae,St.measurementId),fa&&(J("consent","default",fa),ao(void 0)),J("js",new Date);const pn=null!==(Be=Ce?.config)&&void 0!==Be?Be:{};return pn.origin="firebase",pn.update=!0,null!=dt&&(pn[Qc]=dt),J("config",St.measurementId,pn),xs&&(J("set",xs),Fl(void 0)),St.measurementId})).apply(this,arguments)}class Eu{constructor(C){this.app=C}_delete(){return delete Gr[this.app.options.appId],Promise.resolve()}}let Gr={},Rs=[];const Mo={};let No,uo,Ro="dataLayer",pa=!1;function Dy(D,C,x){!function qp(){const D=[];if((0,re.ru)()&&D.push("This is a browser extension environment."),(0,re.zI)()||D.push("Cookies are not available."),D.length>0){const C=D.map((F,J)=>`(${J+1}) ${F}`).join(" "),x=rr.create("invalid-analytics-context",{errorInfo:C});En.warn(x.message)}}();const F=D.options.appId;if(!F)throw rr.create("no-app-id");if(!D.options.apiKey){if(!D.options.measurementId)throw rr.create("no-api-key");En.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${D.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Gr[F])throw rr.create("already-exists",{id:F});if(!pa){!function Jc(D){let C=[];Array.isArray(window[D])?C=window[D]:window[D]=C}(Ro);const{wrappedGtag:ae,gtagCore:Ce}=function oa(D,C,x,F,J){let ae=function(...Ce){window[F].push(arguments)};return window[J]&&"function"==typeof window[J]&&(ae=window[J]),window[J]=function gu(D,C,x,F){function ae(){return(ae=(0,k.Z)(function*(Ce,Be,at){try{"event"===Ce?yield To(D,C,x,Be,at):"config"===Ce?yield Bh(D,C,x,F,Be,at):"consent"===Ce?D("consent","update",at):D("set",Be)}catch(yt){En.error(yt)}})).apply(this,arguments)}return function J(Ce,Be,at){return ae.apply(this,arguments)}}(ae,D,C,x),{gtagCore:ae,wrappedGtag:window[J]}}(Gr,Rs,Mo,Ro,"gtag");uo=ae,No=Ce,pa=!0}return Gr[F]=function Ao(D,C,x,F,J,ae,Ce){return xo.apply(this,arguments)}(D,Rs,Mo,C,No,Ro,x),new Eu(D)}function Ty(){return jh.apply(this,arguments)}function jh(){return(jh=(0,k.Z)(function*(){if((0,re.ru)()||!(0,re.zI)()||!(0,re.hl)())return!1;try{return yield(0,re.eu)()}catch{return!1}})).apply(this,arguments)}const $h="@firebase/analytics";!function zr(){(0,oe._registerComponent)(new de.wA(Do,(C,{options:x})=>Dy(C.getProvider("app").getImmediate(),C.getProvider("installations-internal").getImmediate(),x),"PUBLIC")),(0,oe._registerComponent)(new de.wA("analytics-internal",function D(C){try{const x=C.getProvider(Do).getImmediate();return{logEvent:(F,J,ae)=>function zt(D,C,x,F){D=(0,re.m9)(D),function nd(D,C,x,F,J){return Ms.apply(this,arguments)}(uo,Gr[D.app.options.appId],C,x,F).catch(J=>En.error(J))}(x,F,J,ae)}}catch(x){throw rr.create("interop-component-reg-failed",{reason:x})}},"PRIVATE")),(0,oe.registerVersion)($h,"0.8.0"),(0,oe.registerVersion)($h,"0.8.0","esm2017")}();var vi=P(4408),Oo=P(7565);const ts=new class wi extends Oo.v{}(class Vl extends vi.o{constructor(C,x){super(C,x),this.scheduler=C,this.work=x}schedule(C,x=0){return x>0?super.schedule(C,x):(this.delay=x,this.state=C,this.scheduler.flush(this),this)}execute(C,x){return x>0||this.closed?super.execute(C,x):this._execute(C,x)}requestAsyncId(C,x,F=0){return null!=F&&F>0||null==F&&this.delay>0?super.requestAsyncId(C,x,F):C.flush(this)}});var ft=P(4986),Du=P(8505),lo=P(5363),ga=P(9468);const Mr=new g.GfV("7.4.1"),ma="__angularfire_symbol__analyticsIsSupportedValue",ns="__angularfire_symbol__analyticsIsSupported",Oi="__angularfire_symbol__remoteConfigIsSupportedValue",Rr="__angularfire_symbol__remoteConfigIsSupported",Ul="__angularfire_symbol__messagingIsSupportedValue",Cu="__angularfire_symbol__messagingIsSupported";function _a(D,C,x){if(C){if(1===C.length)return C[0];const ae=C.filter(Ce=>Ce.app===x);if(1===ae.length)return ae[0]}return x.container.getProvider(D).getImmediate({optional:!0})}globalThis[ns]||(globalThis[ns]=Ty().then(D=>globalThis[ma]=D).catch(()=>globalThis[ma]=!1)),globalThis[Cu]||(globalThis[Cu]=Kc().then(D=>globalThis[Ul]=D).catch(()=>globalThis[Ul]=!1)),globalThis[Rr]||(globalThis[Rr]=Qa().then(D=>globalThis[Oi]=D).catch(()=>globalThis[Oi]=!1));const qr=(D,C)=>{const x=C?[C]:(0,ee.C6)(),F=[];return x.forEach(J=>{J.container.getProvider(D).instances.forEach(Ce=>{F.includes(Ce)||F.push(Ce)})}),F};function ko(){}class un{constructor(C,x=ts){this.zone=C,this.delegate=x}now(){return this.delegate.now()}schedule(C,x,F){const J=this.zone;return this.delegate.schedule(function(Ce){J.runGuarded(()=>{C.apply(this,[Ce])})},x,F)}}class ki{constructor(C){this.zone=C,this.task=null}call(C,x){const F=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",ko,{},ko,ko)),x.pipe((0,Du.b)({next:F,complete:F,error:F})).subscribe(C).add(F)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Tu=(()=>{class D{constructor(x){this.ngZone=x,this.outsideAngular=x.runOutsideAngular(()=>new un(Zone.current)),this.insideAngular=x.run(()=>new un(Zone.current,ft.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return D.\u0275fac=function(x){return new(x||D)(g.LFG(g.R0b))},D.\u0275prov=g.Yz7({token:D,factory:D.\u0275fac,providedIn:"root"}),D})();function Ns(){const D=globalThis.\u0275AngularFireScheduler;if(!D)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return D}function Bl(D){return D.pipe((0,lo.Q)(Ns().outsideAngular))}function rs(D){return Ns(),function jl(D){return function(x){return(x=x.lift(new ki(D.ngZone))).pipe((0,ga.R)(D.outsideAngular),(0,lo.Q)(D.insideAngular))}}(Ns())(D)}},2090:(ot,Ae,P)=>{P.d(Ae,{$s:()=>zi,BH:()=>Le,G6:()=>je,L:()=>he,LL:()=>Pe,Mn:()=>Ie,Sg:()=>Me,UG:()=>me,US:()=>de,ZB:()=>$,ZR:()=>ne,b$:()=>nt,d:()=>xe,eu:()=>ge,hl:()=>U,jU:()=>fe,m9:()=>Gt,ne:()=>_o,pd:()=>Br,r3:()=>Cr,ru:()=>Ye,tV:()=>pe,uI:()=>Je,vZ:()=>Vr,w1:()=>ve,xO:()=>ws,xb:()=>Xt,z$:()=>we,zI:()=>Z,zd:()=>Si});const oe=function(K){const j=[];let V=0;for(let H=0;H<K.length;H++){let q=K.charCodeAt(H);q<128?j[V++]=q:q<2048?(j[V++]=q>>6|192,j[V++]=63&q|128):55296==(64512&q)&&H+1<K.length&&56320==(64512&K.charCodeAt(H+1))?(q=65536+((1023&q)<<10)+(1023&K.charCodeAt(++H)),j[V++]=q>>18|240,j[V++]=q>>12&63|128,j[V++]=q>>6&63|128,j[V++]=63&q|128):(j[V++]=q>>12|224,j[V++]=q>>6&63|128,j[V++]=63&q|128)}return j},de={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(K,j){if(!Array.isArray(K))throw Error("encodeByteArray takes an array as a parameter");this.init_();const V=j?this.byteToCharMapWebSafe_:this.byteToCharMap_,H=[];for(let q=0;q<K.length;q+=3){const De=K[q],Ve=q+1<K.length,rt=Ve?K[q+1]:0,on=q+2<K.length,Yt=on?K[q+2]:0;let Mt=(15&rt)<<2|Yt>>6,dn=63&Yt;on||(dn=64,Ve||(Mt=64)),H.push(V[De>>2],V[(3&De)<<4|rt>>4],V[Mt],V[dn])}return H.join("")},encodeString(K,j){return this.HAS_NATIVE_SUPPORT&&!j?btoa(K):this.encodeByteArray(oe(K),j)},decodeString(K,j){return this.HAS_NATIVE_SUPPORT&&!j?atob(K):function(K){const j=[];let V=0,H=0;for(;V<K.length;){const q=K[V++];if(q<128)j[H++]=String.fromCharCode(q);else if(q>191&&q<224){const De=K[V++];j[H++]=String.fromCharCode((31&q)<<6|63&De)}else if(q>239&&q<365){const on=((7&q)<<18|(63&K[V++])<<12|(63&K[V++])<<6|63&K[V++])-65536;j[H++]=String.fromCharCode(55296+(on>>10)),j[H++]=String.fromCharCode(56320+(1023&on))}else{const De=K[V++],Ve=K[V++];j[H++]=String.fromCharCode((15&q)<<12|(63&De)<<6|63&Ve)}}return j.join("")}(this.decodeStringToByteArray(K,j))},decodeStringToByteArray(K,j){this.init_();const V=j?this.charToByteMapWebSafe_:this.charToByteMap_,H=[];for(let q=0;q<K.length;){const De=V[K.charAt(q++)],rt=q<K.length?V[K.charAt(q)]:0;++q;const Yt=q<K.length?V[K.charAt(q)]:64;++q;const Pt=q<K.length?V[K.charAt(q)]:64;if(++q,null==De||null==rt||null==Yt||null==Pt)throw Error();H.push(De<<2|rt>>4),64!==Yt&&(H.push(rt<<4&240|Yt>>2),64!==Pt&&H.push(Yt<<6&192|Pt))}return H},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let K=0;K<this.ENCODED_VALS.length;K++)this.byteToCharMap_[K]=this.ENCODED_VALS.charAt(K),this.charToByteMap_[this.byteToCharMap_[K]]=K,this.byteToCharMapWebSafe_[K]=this.ENCODED_VALS_WEBSAFE.charAt(K),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[K]]=K,K>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(K)]=K,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(K)]=K)}}},he=function(K){return function(K){const j=oe(K);return de.encodeByteArray(j,!0)}(K).replace(/\./g,"")},pe=function(K){try{return de.decodeString(K,!0)}catch(j){console.error("base64Decode failed: ",j)}return null};function $(K,j){if(!(j instanceof Object))return j;switch(j.constructor){case Date:return new Date(j.getTime());case Object:void 0===K&&(K={});break;case Array:K=[];break;default:return j}for(const V in j)!j.hasOwnProperty(V)||!Y(V)||(K[V]=$(K[V],j[V]));return K}function Y(K){return"__proto__"!==K}class Le{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((j,V)=>{this.resolve=j,this.reject=V})}wrapCallback(j){return(V,H)=>{V?this.reject(V):this.resolve(H),"function"==typeof j&&(this.promise.catch(()=>{}),1===j.length?j(V):j(V,H))}}}function Me(K,j){if(K.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const H=j||"demo-project",q=K.iat||0,De=K.sub||K.user_id;if(!De)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Ve=Object.assign({iss:`https://securetoken.google.com/${H}`,aud:H,iat:q,exp:q+3600,auth_time:q,sub:De,user_id:De,firebase:{sign_in_provider:"custom",identities:{}}},K);return[he(JSON.stringify({alg:"none",type:"JWT"})),he(JSON.stringify(Ve)),""].join(".")}function we(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Je(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(we())}function me(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function fe(){return"object"==typeof self&&self.self===self}function Ye(){const K="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof K&&void 0!==K.id}function nt(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function xe(){return we().indexOf("Electron/")>=0}function ve(){const K=we();return K.indexOf("MSIE ")>=0||K.indexOf("Trident/")>=0}function Ie(){return we().indexOf("MSAppHost/")>=0}function je(){return!me()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function U(){return"object"==typeof indexedDB}function ge(){return new Promise((K,j)=>{try{let V=!0;const H="validate-browser-context-for-indexeddb-analytics-module",q=self.indexedDB.open(H);q.onsuccess=()=>{q.result.close(),V||self.indexedDB.deleteDatabase(H),K(!0)},q.onupgradeneeded=()=>{V=!1},q.onerror=()=>{var De;j((null===(De=q.error)||void 0===De?void 0:De.message)||"")}}catch(V){j(V)}})}function Z(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class ne extends Error{constructor(j,V,H){super(V),this.code=j,this.customData=H,this.name="FirebaseError",Object.setPrototypeOf(this,ne.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Pe.prototype.create)}}class Pe{constructor(j,V,H){this.service=j,this.serviceName=V,this.errors=H}create(j,...V){const H=V[0]||{},q=`${this.service}/${j}`,De=this.errors[j],Ve=De?function Oe(K,j){return K.replace(ct,(V,H)=>{const q=j[H];return null!=q?String(q):`<${H}?>`})}(De,H):"Error";return new ne(q,`${this.serviceName}: ${Ve} (${q}).`,H)}}const ct=/\{\$([^}]+)}/g;function Cr(K,j){return Object.prototype.hasOwnProperty.call(K,j)}function Xt(K){for(const j in K)if(Object.prototype.hasOwnProperty.call(K,j))return!1;return!0}function Vr(K,j){if(K===j)return!0;const V=Object.keys(K),H=Object.keys(j);for(const q of V){if(!H.includes(q))return!1;const De=K[q],Ve=j[q];if(mr(De)&&mr(Ve)){if(!Vr(De,Ve))return!1}else if(De!==Ve)return!1}for(const q of H)if(!V.includes(q))return!1;return!0}function mr(K){return null!==K&&"object"==typeof K}function ws(K){const j=[];for(const[V,H]of Object.entries(K))Array.isArray(H)?H.forEach(q=>{j.push(encodeURIComponent(V)+"="+encodeURIComponent(q))}):j.push(encodeURIComponent(V)+"="+encodeURIComponent(H));return j.length?"&"+j.join("&"):""}function Si(K){const j={};return K.replace(/^\?/,"").split("&").forEach(H=>{if(H){const[q,De]=H.split("=");j[decodeURIComponent(q)]=decodeURIComponent(De)}}),j}function Br(K){const j=K.indexOf("?");if(!j)return"";const V=K.indexOf("#",j);return K.substring(j,V>0?V:void 0)}function _o(K,j){const V=new Ke(K,j);return V.subscribe.bind(V)}class Ke{constructor(j,V){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=V,this.task.then(()=>{j(this)}).catch(H=>{this.error(H)})}next(j){this.forEachObserver(V=>{V.next(j)})}error(j){this.forEachObserver(V=>{V.error(j)}),this.close(j)}complete(){this.forEachObserver(j=>{j.complete()}),this.close()}subscribe(j,V,H){let q;if(void 0===j&&void 0===V&&void 0===H)throw new Error("Missing Observer.");q=function Gi(K,j){if("object"!=typeof K||null===K)return!1;for(const V of j)if(V in K&&"function"==typeof K[V])return!0;return!1}(j,["next","error","complete"])?j:{next:j,error:V,complete:H},void 0===q.next&&(q.next=Tn),void 0===q.error&&(q.error=Tn),void 0===q.complete&&(q.complete=Tn);const De=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?q.error(this.finalError):q.complete()}catch{}}),this.observers.push(q),De}unsubscribeOne(j){void 0===this.observers||void 0===this.observers[j]||(delete this.observers[j],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(j){if(!this.finalized)for(let V=0;V<this.observers.length;V++)this.sendOne(V,j)}sendOne(j,V){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[j])try{V(this.observers[j])}catch(H){typeof console<"u"&&console.error&&console.error(H)}})}close(j){this.finalized||(this.finalized=!0,void 0!==j&&(this.finalError=j),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Tn(){}function zi(K,j=1e3,V=2){const H=j*Math.pow(V,K),q=Math.round(.5*H*(Math.random()-.5)*2);return Math.min(144e5,H+q)}function Gt(K){return K&&K._delegate?K._delegate:K}},3223:(ot,Ae,P)=>{var g=P(4650);let ee=null;function k(){return ee}const le=new g.OlP("DocumentToken");let he=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:function(){return function pe(){return(0,g.LFG)($)}()},providedIn:"platform"}),n})();const B=new g.OlP("Location Initialized");let $=(()=>{class n extends he{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return k().getBaseHref(this._doc)}onPopState(t){const r=k().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=k().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,s){Y()?this._history.pushState(t,r,s):this.location.hash=s}replaceState(t,r,s){Y()?this._history.replaceState(t,r,s):this.location.hash=s}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(le))},n.\u0275prov=g.Yz7({token:n,factory:function(){return function Le(){return new $((0,g.LFG)(le))}()},providedIn:"platform"}),n})();function Y(){return!!window.history.pushState}function Me(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function we(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function Je(n){return n&&"?"!==n[0]?"?"+n:n}let me=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:function(){return(0,g.f3M)(Ye)},providedIn:"root"}),n})();const fe=new g.OlP("appBaseHref");let Ye=(()=>{class n extends me{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??(0,g.f3M)(le).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Me(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+Je(this._platformLocation.search),s=this._platformLocation.hash;return s&&t?`${r}${s}`:r}pushState(t,r,s,u){const c=this.prepareExternalUrl(s+Je(u));this._platformLocation.pushState(t,r,c)}replaceState(t,r,s,u){const c=this.prepareExternalUrl(s+Je(u));this._platformLocation.replaceState(t,r,c)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(he),g.LFG(fe,8))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),nt=(()=>{class n extends me{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=Me(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,s,u){let c=this.prepareExternalUrl(s+Je(u));0==c.length&&(c=this._platformLocation.pathname),this._platformLocation.pushState(t,r,c)}replaceState(t,r,s,u){let c=this.prepareExternalUrl(s+Je(u));0==c.length&&(c=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,c)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(he),g.LFG(fe,8))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})(),xe=(()=>{class n{constructor(t){this._subject=new g.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._baseHref=we(Ue(r)),this._locationStrategy.onPopState(s=>{this._subject.emit({url:this.path(!0),pop:!0,state:s.state,type:s.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Je(r))}normalize(t){return n.stripTrailingSlash(function Ie(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,Ue(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",s=null){this._locationStrategy.pushState(s,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Je(r)),s)}replaceState(t,r="",s=null){this._locationStrategy.replaceState(s,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Je(r)),s)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(s=>s(t,r))}subscribe(t,r,s){return this._subject.subscribe({next:t,error:r,complete:s})}}return n.normalizeQueryParams=Je,n.joinWithSlash=Me,n.stripTrailingSlash=we,n.\u0275fac=function(t){return new(t||n)(g.LFG(me))},n.\u0275prov=g.Yz7({token:n,factory:function(){return function ve(){return new xe((0,g.LFG)(me))}()},providedIn:"root"}),n})();function Ue(n){return n.replace(/\/index.html$/,"")}function Ko(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[s,u]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(s.trim()===e)return decodeURIComponent(u)}return null}let Jo=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({}),n})();function cr(n){return"server"===n}let Xa=(()=>{class n{}return n.\u0275prov=(0,g.Yz7)({token:n,providedIn:"root",factory:()=>new Lh((0,g.LFG)(le),window)}),n})();class Lh{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function xr(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let s=r.currentNode;for(;s;){const u=s.shadowRoot;if(u){const c=u.getElementById(e)||u.querySelector(`[name="${e}"]`);if(c)return c}s=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,s=t.top+this.window.pageYOffset,u=this.offset();this.window.scrollTo(r-u[0],s-u[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=ii(this.window.history)||ii(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function ii(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class Qs{}class to extends class Wc extends class de{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function re(n){ee||(ee=n)}(new to)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function cu(){return no=no||document.querySelector("base"),no?no.getAttribute("href"):null}();return null==t?null:function Hr(n){zn=zn||document.createElement("a"),zn.setAttribute("href",n);const e=zn.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){no=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Ko(document.cookie,e)}}let zn,no=null;const cn=new g.OlP("TRANSITION_ID"),Ml=[{provide:g.ip1,useFactory:function Kc(n,e,t){return()=>{t.get(g.CZH).donePromise.then(()=>{const r=k(),s=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let u=0;u<s.length;u++)r.remove(s[u])})}},deps:[cn,le,g.zs3],multi:!0}];let Rl=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();const du=new g.OlP("EventManagerPlugins");let Zc=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(s=>s.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,s){return this._findPluginFor(r).addEventListener(t,r,s)}addGlobalEventListener(t,r,s){return this._findPluginFor(r).addGlobalEventListener(t,r,s)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const s=this._plugins;for(let u=0;u<s.length;u++){const c=s[u];if(c.supports(t))return this._eventNameToPlugin.set(t,c),c}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(du),g.LFG(g.R0b))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();class Nl{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const s=k().getGlobalEventTarget(this._doc,e);if(!s)throw new Error(`Unsupported event target ${s} for event ${t}`);return this.addEventListener(s,t,r)}}let Io=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(s=>{this._stylesSet.has(s)||(this._stylesSet.add(s),r.add(s))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})(),bo=(()=>{class n extends Io{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,s){t.forEach(u=>{const c=this._doc.createElement("style");c.textContent=u,s.push(r.appendChild(c))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(Yc),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,s)=>{this._addStylesToHost(t,s,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(Yc))}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(le))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();function Yc(n){k().remove(n)}const Do={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Qc=/%COMP%/g;function pu(n,e,t){for(let r=0;r<e.length;r++){let s=e[r];Array.isArray(s)?pu(n,s,t):(s=s.replace(Qc,n),t.push(s))}return t}function Jc(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let Co=(()=>{class n{constructor(t,r,s){this.eventManager=t,this.sharedStylesHost=r,this.appId=s,this.rendererByCompId=new Map,this.defaultRenderer=new To(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case g.ifc.Emulated:{let s=this.rendererByCompId.get(r.id);return s||(s=new Xc(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,s)),s.applyToHost(t),s}case 1:case g.ifc.ShadowDom:return new ed(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const s=pu(r.id,r.styles,[]);this.sharedStylesHost.addStyles(s),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(Zc),g.LFG(bo),g.LFG(g.AFp))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();class To{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(Do[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){(oa(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(oa(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,s){if(s){t=s+":"+t;const u=Do[s];u?e.setAttributeNS(u,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const s=Do[r];s?e.removeAttributeNS(s,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,s){s&(g.JOm.DashCase|g.JOm.Important)?e.style.setProperty(t,r,s&g.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&g.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,Jc(r)):this.eventManager.addEventListener(e,t,Jc(r))}}function oa(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class Xc extends To{constructor(e,t,r,s){super(e),this.component=r;const u=pu(s+"-"+r.id,r.styles,[]);t.addStyles(u),this.contentAttr=function En(n){return"_ngcontent-%COMP%".replace(Qc,n)}(s+"-"+r.id),this.hostAttr=function fu(n){return"_nghost-%COMP%".replace(Qc,n)}(s+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class ed extends To{constructor(e,t,r,s){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const u=pu(s.id,s.styles,[]);for(let c=0;c<u.length;c++){const m=document.createElement("style");m.textContent=u[c],this.shadowRoot.appendChild(m)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let rr=(()=>{class n extends Nl{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,s){return t.addEventListener(r,s,!1),()=>this.removeEventListener(t,r,s)}removeEventListener(t,r,s){return t.removeEventListener(r,s)}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(le))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();const aa=["alt","control","meta","shift"],ua={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Ni={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let la=(()=>{class n extends Nl{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,s){const u=n.parseEventName(r),c=n.eventCallback(u.fullKey,s,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>k().onAndCancel(t,u.domEventName,c))}static parseEventName(t){const r=t.toLowerCase().split("."),s=r.shift();if(0===r.length||"keydown"!==s&&"keyup"!==s)return null;const u=n._normalizeKey(r.pop());let c="",m=r.indexOf("code");if(m>-1&&(r.splice(m,1),c="code."),aa.forEach(b=>{const A=r.indexOf(b);A>-1&&(r.splice(A,1),c+=b+".")}),c+=u,0!=r.length||0===u.length)return null;const v={};return v.domEventName=s,v.fullKey=c,v}static matchEventFullKeyCode(t,r){let s=ua[t.key]||t.key,u="";return r.indexOf("code.")>-1&&(s=t.code,u="code."),!(null==s||!s)&&(s=s.toLowerCase()," "===s?s="space":"."===s&&(s="dot"),aa.forEach(c=>{c!==s&&(0,Ni[c])(t)&&(u+=c+".")}),u+=s,u===r)}static eventCallback(t,r,s){return u=>{n.matchEventFullKeyCode(u,t)&&s.runGuarded(()=>r(u))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(le))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();const _u=(0,g.eFA)(g._c5,"browser",[{provide:g.Lbi,useValue:"browser"},{provide:g.g9A,useValue:function mu(){to.makeCurrent()},multi:!0},{provide:le,useFactory:function da(){return(0,g.RDi)(document),document},deps:[]}]),xs=new g.OlP(""),nd=[{provide:g.rWj,useClass:class Uh{addToWindow(e){g.dqk.getAngularTestability=(r,s=!0)=>{const u=e.findTestabilityInTree(r,s);if(null==u)throw new Error("Could not find testability for element.");return u},g.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),g.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),g.dqk.frameworkStabilizers||(g.dqk.frameworkStabilizers=[]),g.dqk.frameworkStabilizers.push(r=>{const s=g.dqk.getAllAngularTestabilities();let u=s.length,c=!1;const m=function(v){c=c||v,u--,0==u&&r(c)};s.forEach(function(v){v.whenStable(m)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?k().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:g.lri,useClass:g.dDg,deps:[g.R0b,g.eoX,g.rWj]},{provide:g.dDg,useClass:g.dDg,deps:[g.R0b,g.eoX,g.rWj]}],Ms=[{provide:g.zSh,useValue:"root"},{provide:g.qLn,useFactory:function so(){return new g.qLn},deps:[]},{provide:du,useClass:rr,multi:!0,deps:[le,g.R0b,g.Lbi]},{provide:du,useClass:la,multi:!0,deps:[le]},{provide:Co,useClass:Co,deps:[Zc,bo,g.AFp]},{provide:g.FYo,useExisting:Co},{provide:Io,useExisting:bo},{provide:bo,useClass:bo,deps:[le]},{provide:Zc,useClass:Zc,deps:[du,g.R0b]},{provide:Qs,useClass:Rl,deps:[]},[]];let kl=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:g.AFp,useValue:t.appId},{provide:cn,useExisting:g.AFp},Ml]}}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(xs,12))},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({providers:[...Ms,...nd],imports:[Jo,g.hGG]}),n})(),Xi=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(le))},n.\u0275prov=g.Yz7({token:n,factory:function(t){let r=null;return r=t?new t:function So(){return new Xi((0,g.LFG)(le))}(),r},providedIn:"root"}),n})();typeof window<"u"&&window;var zt=P(8996),dr=P(9751);const{isArray:$h}=Array,{getPrototypeOf:bu,prototype:zr,keys:vi}=Object;function Vl(n){if(1===n.length){const e=n[0];if($h(e))return{args:e,keys:null};if(function Oo(n){return n&&"object"==typeof n&&bu(n)===zr}(e)){const t=vi(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}var wi=P(8421),ts=P(7669),hr=P(5403),ft=P(4004);const{isArray:Du}=Array;function ga(n){return(0,ft.U)(e=>function lo(n,e){return Du(e)?n(...e):n(e)}(n,e))}function Mr(n,e){return n.reduce((t,r,s)=>(t[r]=e[s],t),{})}const un=new g.OlP("NgValidators"),ki=new g.OlP("NgAsyncValidators");function C(n){return null!=n}function x(n){return(0,g.QGY)(n)?(0,zt.D)(n):n}function F(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function J(n,e){return e.map(t=>t(n))}function Ce(n){return n.map(e=>function ae(n){return!n.validate}(e)?e:t=>e.validate(t))}function at(n){return null!=n?function Be(n){if(!n)return null;const e=n.filter(C);return 0==e.length?null:function(t){return F(J(t,e))}}(Ce(n)):null}function St(n){return null!=n?function yt(n){if(!n)return null;const e=n.filter(C);return 0==e.length?null:function(t){return function ma(...n){const e=(0,ts.jO)(n),{args:t,keys:r}=Vl(n),s=new dr.y(u=>{const{length:c}=t;if(!c)return void u.complete();const m=new Array(c);let v=c,b=c;for(let A=0;A<c;A++){let M=!1;(0,wi.Xf)(t[A]).subscribe((0,hr.x)(u,L=>{M||(M=!0,b--),m[A]=L},()=>v--,void 0,()=>{(!v||!M)&&(b||u.next(r?Mr(r,m):m),u.complete())}))}});return e?s.pipe(ga(e)):s}(J(t,e).map(x)).pipe((0,ft.U)(F))}}(Ce(n)):null}function dt(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function Os(n){return n?Array.isArray(n)?n:[n]:[]}function is(n,e){return Array.isArray(n)?n.includes(e):n===e}function ks(n,e){const t=Os(e);return Os(n).forEach(s=>{is(t,s)||t.push(s)}),t}function ho(n,e){return Os(e).filter(t=>!is(n,t))}class bn extends class ss{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=at(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=St(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}{get formDirective(){return null}get path(){return null}}let Zp=(()=>{class n extends class Ps{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(bn,10))},n.\u0275dir=g.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&g.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},features:[g.qOj]}),n})();const Ia="VALID",Gl="INVALID",ba="PENDING",Au="DISABLED";function Jp(n){return Array.isArray(n)?at(n):n||null}function Xp(n){return Array.isArray(n)?St(n):n||null}function ql(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class ud extends class Mu{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=Jp(this._rawValidators),this._composedAsyncValidatorFn=Xp(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===Ia}get invalid(){return this.status===Gl}get pending(){return this.status==ba}get disabled(){return this.status===Au}get enabled(){return this.status!==Au}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=Jp(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=Xp(e)}addValidators(e){this.setValidators(ks(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(ks(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(ho(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(ho(e,this._rawAsyncValidators))}hasValidator(e){return is(this._rawValidators,e)}hasAsyncValidator(e){return is(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=ba,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Au,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Ia,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Ia||this.status===ba)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Au:Ia}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=ba,this._hasOwnPendingAsyncValidator=!0;const t=x(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((r,s)=>r&&r._find(s),this)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new g.vpe,this.statusChanges=new g.vpe}_calculateStatus(){return this._allControlsDisabled()?Au:this.errors?Gl:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(ba)?ba:this._anyControlsHaveStatus(Gl)?Gl:Ia}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){ql(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}}{constructor(e,t,r){super(function xu(n){return(ql(n)?n.validators:n)||null}(t),function zl(n,e){return(ql(e)?e.asyncValidators:n)||null}(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){(function os(n,e,t){n._forEachChild((r,s)=>{if(void 0===t[s])throw new g.vHH(1002,"")})})(this,0,e),Object.keys(e).forEach(r=>{(function eg(n,e,t){const r=n.controls;if(!(e?Object.keys(r):r).length)throw new g.vHH(1e3,"");if(!r[t])throw new g.vHH(1001,"")})(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{const s=this.controls[r];s&&s.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,s)=>{r.reset(e[s],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,r,s)=>((r.enabled||this.disabled)&&(t[s]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((s,u)=>{r=t(r,s,u)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}function cd(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function Wh(n,e){const t=function pn(n){return n._rawValidators}(n);null!==e.validator?n.setValidators(dt(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=function sr(n){return n._rawAsyncValidators}(n);null!==e.asyncValidator?n.setAsyncValidators(dt(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const s=()=>n.updateValueAndValidity();cd(e._rawValidators,s),cd(e._rawAsyncValidators,s)}function Po(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}const Yh={provide:bn,useExisting:(0,g.Gpc)(()=>fd)},Kl=(()=>Promise.resolve(null))();let fd=(()=>{class n extends bn{constructor(t,r){super(),this.submitted=!1,this._directives=new Set,this.ngSubmit=new g.vpe,this.form=new ud({},at(t),St(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){Kl.then(()=>{const r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),function Fi(n,e){Wh(n,e),e.valueAccessor.writeValue(n.value),n.disabled&&e.valueAccessor.setDisabledState?.(!0),function ng(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&Po(n,e)})}(n,e),function rg(n,e){const t=(r,s)=>{e.valueAccessor.writeValue(r),s&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function Fs(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&Po(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function qh(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}(t.control,t),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){Kl.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){Kl.then(()=>{const r=this._findContainer(t.path),s=new ud({});(function Kh(n,e){Wh(n,e)})(s,t),r.registerControl(t.name,s),s.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){Kl.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){Kl.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,function Zh(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this._directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(un,10),g.Y36(ki,10))},n.\u0275dir=g.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(t,r){1&t&&g.NdJ("submit",function(u){return r.onSubmit(u)})("reset",function(){return r.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[g._Bn([Yh]),g.qOj]}),n})(),Vy=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=g.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})(),Jh=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({}),n})(),vg=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({imports:[Jh]}),n})(),nc=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({imports:[vg]}),n})();function it(...n){const e=(0,ts.yG)(n);return(0,zt.D)(n,e)}var Kr=P(5577),wg=P(576);function xa(n,e){return(0,wg.m)(e)?(0,Kr.z)(n,e,1):(0,Kr.z)(n,1)}var Zr=P(4482);function Li(n,e){return(0,Zr.e)((t,r)=>{let s=0;t.subscribe((0,hr.x)(r,u=>n.call(e,u,s++)&&r.next(u)))})}class w0{}class Eg{}class us{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?this.lazyInit="string"==typeof e?()=>{this.headers=new Map,e.split("\n").forEach(t=>{const r=t.indexOf(":");if(r>0){const s=t.slice(0,r),u=s.toLowerCase(),c=t.slice(r+1).trim();this.maybeSetNormalizedName(s,u),this.headers.has(u)?this.headers.get(u).push(c):this.headers.set(u,[c])}})}:()=>{this.headers=new Map,Object.keys(e).forEach(t=>{let r=e[t];const s=t.toLowerCase();"string"==typeof r&&(r=[r]),r.length>0&&(this.headers.set(s,r),this.maybeSetNormalizedName(t,s))})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof us?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new us;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof us?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(e.name,t);const s=("a"===e.op?this.headers.get(t):void 0)||[];s.push(...r),this.headers.set(t,s);break;case"d":const u=e.value;if(u){let c=this.headers.get(t);if(!c)return;c=c.filter(m=>-1===u.indexOf(m)),0===c.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,c)}else this.headers.delete(t),this.normalizedNames.delete(t)}}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class TD{encodeKey(e){return I0(e)}encodeValue(e){return I0(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const E0=/%(\d[a-f0-9])/gi,AD={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function I0(n){return encodeURIComponent(n).replace(E0,(e,t)=>AD[t]??e)}function Ig(n){return`${n}`}class ku{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new TD,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function SD(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(s=>{const u=s.indexOf("="),[c,m]=-1==u?[e.decodeKey(s),""]:[e.decodeKey(s.slice(0,u)),e.decodeValue(s.slice(u+1))],v=t.get(c)||[];v.push(m),t.set(c,v)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const r=e.fromObject[t],s=Array.isArray(r)?r.map(Ig):[Ig(r)];this.map.set(t,s)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(r=>{const s=e[r];Array.isArray(s)?s.forEach(u=>{t.push({param:r,value:u,op:"a"})}):t.push({param:r,value:s,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new ku({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(Ig(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let r=this.map.get(e.param)||[];const s=r.indexOf(Ig(e.value));-1!==s&&r.splice(s,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class xD{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function D0(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function qy(n){return typeof Blob<"u"&&n instanceof Blob}function C0(n){return typeof FormData<"u"&&n instanceof FormData}class _r{constructor(e,t,r,s){let u;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function MD(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||s?(this.body=void 0!==r?r:null,u=s):u=r,u&&(this.reportProgress=!!u.reportProgress,this.withCredentials=!!u.withCredentials,u.responseType&&(this.responseType=u.responseType),u.headers&&(this.headers=u.headers),u.context&&(this.context=u.context),u.params&&(this.params=u.params)),this.headers||(this.headers=new us),this.context||(this.context=new xD),this.params){const c=this.params.toString();if(0===c.length)this.urlWithParams=t;else{const m=t.indexOf("?");this.urlWithParams=t+(-1===m?"?":m<t.length-1?"&":"")+c}}else this.params=new ku,this.urlWithParams=t}serializeBody(){return null===this.body?null:D0(this.body)||qy(this.body)||C0(this.body)||function RD(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof ku?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||C0(this.body)?null:qy(this.body)?this.body.type||null:D0(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof ku?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){const t=e.method||this.method,r=e.url||this.url,s=e.responseType||this.responseType,u=void 0!==e.body?e.body:this.body,c=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,m=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let v=e.headers||this.headers,b=e.params||this.params;const A=e.context??this.context;return void 0!==e.setHeaders&&(v=Object.keys(e.setHeaders).reduce((M,L)=>M.set(L,e.setHeaders[L]),v)),e.setParams&&(b=Object.keys(e.setParams).reduce((M,L)=>M.set(L,e.setParams[L]),b)),new _r(t,r,u,{params:b,headers:v,context:A,reportProgress:m,responseType:s,withCredentials:c})}}var Wn=(()=>((Wn=Wn||{})[Wn.Sent=0]="Sent",Wn[Wn.UploadProgress=1]="UploadProgress",Wn[Wn.ResponseHeader=2]="ResponseHeader",Wn[Wn.DownloadProgress=3]="DownloadProgress",Wn[Wn.Response=4]="Response",Wn[Wn.User=5]="User",Wn))();class bg{constructor(e,t=200,r="OK"){this.headers=e.headers||new us,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class nf extends bg{constructor(e={}){super(e),this.type=Wn.ResponseHeader}clone(e={}){return new nf({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class vr extends bg{constructor(e={}){super(e),this.type=Wn.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new vr({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class Id extends bg{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function rf(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let ND=(()=>{class n{constructor(t){this.handler=t}request(t,r,s={}){let u;if(t instanceof _r)u=t;else{let v,b;v=s.headers instanceof us?s.headers:new us(s.headers),s.params&&(b=s.params instanceof ku?s.params:new ku({fromObject:s.params})),u=new _r(t,r,void 0!==s.body?s.body:null,{headers:v,context:s.context,params:b,reportProgress:s.reportProgress,responseType:s.responseType||"json",withCredentials:s.withCredentials})}const c=it(u).pipe(xa(v=>this.handler.handle(v)));if(t instanceof _r||"events"===s.observe)return c;const m=c.pipe(Li(v=>v instanceof vr));switch(s.observe||"body"){case"body":switch(u.responseType){case"arraybuffer":return m.pipe((0,ft.U)(v=>{if(null!==v.body&&!(v.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return v.body}));case"blob":return m.pipe((0,ft.U)(v=>{if(null!==v.body&&!(v.body instanceof Blob))throw new Error("Response is not a Blob.");return v.body}));case"text":return m.pipe((0,ft.U)(v=>{if(null!==v.body&&"string"!=typeof v.body)throw new Error("Response is not a string.");return v.body}));default:return m.pipe((0,ft.U)(v=>v.body))}case"response":return m;default:throw new Error(`Unreachable: unhandled observe type ${s.observe}}`)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:(new ku).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,s={}){return this.request("PATCH",t,rf(s,r))}post(t,r,s={}){return this.request("POST",t,rf(s,r))}put(t,r,s={}){return this.request("PUT",t,rf(s,r))}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(w0))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();class T0{constructor(e,t){this.next=e,this.interceptor=t}handle(e){return this.interceptor.intercept(e,this.next)}}const Wy=new g.OlP("HTTP_INTERCEPTORS");let OD=(()=>{class n{intercept(t,r){return r.handle(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();const Ma=/^\)\]\}',?\n/;let S0=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new dr.y(r=>{const s=this.xhrFactory.build();if(s.open(t.method,t.urlWithParams),t.withCredentials&&(s.withCredentials=!0),t.headers.forEach((G,Q)=>s.setRequestHeader(G,Q.join(","))),t.headers.has("Accept")||s.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const G=t.detectContentTypeHeader();null!==G&&s.setRequestHeader("Content-Type",G)}if(t.responseType){const G=t.responseType.toLowerCase();s.responseType="json"!==G?G:"text"}const u=t.serializeBody();let c=null;const m=()=>{if(null!==c)return c;const G=s.statusText||"OK",Q=new us(s.getAllResponseHeaders()),be=function FD(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(s)||t.url;return c=new nf({headers:Q,status:s.status,statusText:G,url:be}),c},v=()=>{let{headers:G,status:Q,statusText:be,url:Te}=m(),Ze=null;204!==Q&&(Ze=typeof s.response>"u"?s.responseText:s.response),0===Q&&(Q=Ze?200:0);let ut=Q>=200&&Q<300;if("json"===t.responseType&&"string"==typeof Ze){const lt=Ze;Ze=Ze.replace(Ma,"");try{Ze=""!==Ze?JSON.parse(Ze):null}catch(tt){Ze=lt,ut&&(ut=!1,Ze={error:tt,text:Ze})}}ut?(r.next(new vr({body:Ze,headers:G,status:Q,statusText:be,url:Te||void 0})),r.complete()):r.error(new Id({error:Ze,headers:G,status:Q,statusText:be,url:Te||void 0}))},b=G=>{const{url:Q}=m(),be=new Id({error:G,status:s.status||0,statusText:s.statusText||"Unknown Error",url:Q||void 0});r.error(be)};let A=!1;const M=G=>{A||(r.next(m()),A=!0);let Q={type:Wn.DownloadProgress,loaded:G.loaded};G.lengthComputable&&(Q.total=G.total),"text"===t.responseType&&!!s.responseText&&(Q.partialText=s.responseText),r.next(Q)},L=G=>{let Q={type:Wn.UploadProgress,loaded:G.loaded};G.lengthComputable&&(Q.total=G.total),r.next(Q)};return s.addEventListener("load",v),s.addEventListener("error",b),s.addEventListener("timeout",b),s.addEventListener("abort",b),t.reportProgress&&(s.addEventListener("progress",M),null!==u&&s.upload&&s.upload.addEventListener("progress",L)),s.send(u),r.next({type:Wn.Sent}),()=>{s.removeEventListener("error",b),s.removeEventListener("abort",b),s.removeEventListener("load",v),s.removeEventListener("timeout",b),t.reportProgress&&(s.removeEventListener("progress",M),null!==u&&s.upload&&s.upload.removeEventListener("progress",L)),s.readyState!==s.DONE&&s.abort()}})}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(Qs))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();const A0=new g.OlP("XSRF_COOKIE_NAME"),x0=new g.OlP("XSRF_HEADER_NAME");class Ky{}let Ox=(()=>{class n{constructor(t,r,s){this.doc=t,this.platform=r,this.cookieName=s,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=Ko(t,this.cookieName),this.lastCookieString=t),this.lastToken}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(le),g.LFG(g.Lbi),g.LFG(A0))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})(),Ls=(()=>{class n{constructor(t,r){this.tokenService=t,this.headerName=r}intercept(t,r){const s=t.url.toLowerCase();if("GET"===t.method||"HEAD"===t.method||s.startsWith("http://")||s.startsWith("https://"))return r.handle(t);const u=this.tokenService.getToken();return null!==u&&!t.headers.has(this.headerName)&&(t=t.clone({headers:t.headers.set(this.headerName,u)})),r.handle(t)}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(Ky),g.LFG(x0))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})(),Zy=(()=>{class n{constructor(t,r){this.backend=t,this.injector=r,this.chain=null}handle(t){if(null===this.chain){const r=this.injector.get(Wy,[]);this.chain=r.reduceRight((s,u)=>new T0(s,u),this.backend)}return this.chain.handle(t)}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(Eg),g.LFG(g.zs3))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})(),R0=(()=>{class n{static disable(){return{ngModule:n,providers:[{provide:Ls,useClass:OD}]}}static withOptions(t={}){return{ngModule:n,providers:[t.cookieName?{provide:A0,useValue:t.cookieName}:[],t.headerName?{provide:x0,useValue:t.headerName}:[]]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({providers:[Ls,{provide:Wy,useExisting:Ls,multi:!0},{provide:Ky,useClass:Ox},{provide:A0,useValue:"XSRF-TOKEN"},{provide:x0,useValue:"X-XSRF-TOKEN"}]}),n})(),LD=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({providers:[ND,{provide:w0,useClass:Zy},S0,{provide:Eg,useExisting:S0}],imports:[R0.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]}),n})();var Ra=P(7579);class ls extends Ra.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}const af=(0,P(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var Cg=P(4671),bd=P(9672);function Tg(...n){const e=(0,ts.yG)(n),t=(0,ts.jO)(n),{args:r,keys:s}=Vl(n);if(0===r.length)return(0,zt.D)([],e);const u=new dr.y(function N0(n,e,t=Cg.y){return r=>{O0(e,()=>{const{length:s}=n,u=new Array(s);let c=s,m=s;for(let v=0;v<s;v++)O0(e,()=>{const b=(0,zt.D)(n[v],e);let A=!1;b.subscribe((0,hr.x)(r,M=>{u[v]=M,A||(A=!0,m--),m||r.next(t(u.slice()))},()=>{--c||r.complete()}))},r)},r)}}(r,e,s?c=>Mr(s,c):Cg.y));return t?u.pipe(ga(t)):u}function O0(n,e,t){n?(0,bd.f)(t,n,e):e()}var rc=P(8189);function Qy(...n){return function VD(){return(0,rc.J)(1)}()((0,zt.D)(n,(0,ts.yG)(n)))}function k0(n){return new dr.y(e=>{(0,wi.Xf)(n()).subscribe(e)})}var UD=P(9635);function uf(n,e){const t=(0,wg.m)(n)?n:()=>n,r=s=>s.error(t());return new dr.y(e?s=>e.schedule(r,0,s):r)}var ic=P(515),Jy=P(727);function lf(){return(0,Zr.e)((n,e)=>{let t=null;n._refCount++;const r=(0,hr.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const s=n._connection,u=t;t=null,s&&(!u||s===u)&&s.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class Xy extends dr.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,Zr.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Jy.w0;const t=this.getSubject();e.add(this.source.subscribe((0,hr.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Jy.w0.EMPTY)}return e}refCount(){return lf()(this)}}function Kn(n,e){return(0,Zr.e)((t,r)=>{let s=null,u=0,c=!1;const m=()=>c&&!s&&r.complete();t.subscribe((0,hr.x)(r,v=>{s?.unsubscribe();let b=0;const A=u++;(0,wi.Xf)(n(v,A)).subscribe(s=(0,hr.x)(r,M=>r.next(e?e(v,M,A,b++):M),()=>{s=null,m()}))},()=>{c=!0,m()}))})}function cf(n){return n<=0?()=>ic.E:(0,Zr.e)((e,t)=>{let r=0;e.subscribe((0,hr.x)(t,s=>{++r<=n&&(t.next(s),n<=r&&t.complete())}))})}function Sg(...n){const e=(0,ts.yG)(n);return(0,Zr.e)((t,r)=>{(e?Qy(n,t,e):Qy(n,t)).subscribe(r)})}function df(n){return(0,Zr.e)((e,t)=>{let r=!1;e.subscribe((0,hr.x)(t,s=>{r=!0,t.next(s)},()=>{r||t.next(n),t.complete()}))})}function e_(n=sc){return(0,Zr.e)((e,t)=>{let r=!1;e.subscribe((0,hr.x)(t,s=>{r=!0,t.next(s)},()=>r?t.complete():t.error(n())))})}function sc(){return new af}function Vo(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Li((s,u)=>n(s,u,r)):Cg.y,cf(1),t?df(e):e_(()=>new af))}var Yr=P(8505);function Pu(n){return(0,Zr.e)((e,t)=>{let u,r=null,s=!1;r=e.subscribe((0,hr.x)(t,void 0,void 0,c=>{u=(0,wi.Xf)(n(c,Pu(n)(e))),r?(r.unsubscribe(),r=null,u.subscribe(t)):s=!0})),s&&(r.unsubscribe(),r=null,u.subscribe(t))})}function Fx(n,e,t,r,s){return(u,c)=>{let m=t,v=e,b=0;u.subscribe((0,hr.x)(c,A=>{const M=b++;v=m?n(v,A,M):(m=!0,A),r&&c.next(v)},s&&(()=>{m&&c.next(v),c.complete()})))}}function Fu(n,e){return(0,Zr.e)(Fx(n,e,arguments.length>=2,!0))}function t_(n){return n<=0?()=>ic.E:(0,Zr.e)((e,t)=>{let r=[];e.subscribe((0,hr.x)(t,s=>{r.push(s),n<r.length&&r.shift()},()=>{for(const s of r)t.next(s);t.complete()},void 0,()=>{r=null}))})}function n_(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Li((s,u)=>n(s,u,r)):Cg.y,t_(1),t?df(e):e_(()=>new af))}function hf(n){return(0,Zr.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}const Lt="primary",Lu=Symbol("RouteTitle");class Ag{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function oc(n){return new Ag(n)}function r_(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const s={};for(let u=0;u<r.length;u++){const c=r[u],m=n[u];if(c.startsWith(":"))s[c.substring(1)]=m;else if(c!==m.path)return null}return{consumed:n.slice(0,r.length),posParams:s}}function Vs(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let s;for(let u=0;u<t.length;u++)if(s=t[u],!Dd(n[s],e[s]))return!1;return!0}function Dd(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((s,u)=>r[u]===s)}return n===e}function V0(n){return Array.prototype.concat.apply([],n)}function i_(n){return n.length>0?n[n.length-1]:null}function Qr(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function Na(n){return(0,g.CqO)(n)?n:(0,g.QGY)(n)?(0,zt.D)(Promise.resolve(n)):it(n)}const Vx={exact:function $0(n,e,t){if(!Vu(n.segments,e.segments)||!pf(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!$0(n.children[r],e.children[r],t))return!1;return!0},subset:Us},s_={exact:function j0(n,e){return Vs(n,e)},subset:function BD(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>Dd(n[t],e[t]))},ignored:()=>!0};function B0(n,e,t){return Vx[t.paths](n.root,e.root,t.matrixParams)&&s_[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function Us(n,e,t){return H0(n,e,e.segments,t)}function H0(n,e,t,r){if(n.segments.length>t.length){const s=n.segments.slice(0,t.length);return!(!Vu(s,t)||e.hasChildren()||!pf(s,t,r))}if(n.segments.length===t.length){if(!Vu(n.segments,t)||!pf(n.segments,t,r))return!1;for(const s in e.children)if(!n.children[s]||!Us(n.children[s],e.children[s],r))return!1;return!0}{const s=t.slice(0,n.segments.length),u=t.slice(n.segments.length);return!!(Vu(n.segments,s)&&pf(n.segments,s,r)&&n.children[Lt])&&H0(n.children[Lt],e,u,r)}}function pf(n,e,t){return e.every((r,s)=>s_[t](n[s].parameters,r.parameters))}class ac{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=oc(this.queryParams)),this._queryParamMap}toString(){return Nt.serialize(this)}}class Bt{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Qr(t,(r,s)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return xg(this)}}class gf{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=oc(this.parameters)),this._parameterMap}toString(){return z0(this)}}function Vu(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let G0=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:function(){return new o_},providedIn:"root"}),n})();class o_{parse(e){const t=new qD(e);return new ac(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${Cd(e.root,!0)}`,r=function Ux(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(s=>`${Mg(t)}=${Mg(s)}`).join("&"):`${Mg(t)}=${Mg(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function HD(n){return encodeURI(n)}(e.fragment)}`:""}`}}const Nt=new o_;function xg(n){return n.segments.map(e=>z0(e)).join("/")}function Cd(n,e){if(!n.hasChildren())return xg(n);if(e){const t=n.children[Lt]?Cd(n.children[Lt],!1):"",r=[];return Qr(n.children,(s,u)=>{u!==Lt&&r.push(`${u}:${Cd(s,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function $D(n,e){let t=[];return Qr(n.children,(r,s)=>{s===Lt&&(t=t.concat(e(r,s)))}),Qr(n.children,(r,s)=>{s!==Lt&&(t=t.concat(e(r,s)))}),t}(n,(r,s)=>s===Lt?[Cd(n.children[Lt],!1)]:[`${s}:${Cd(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Lt]?`${xg(n)}/${t[0]}`:`${xg(n)}/(${t.join("//")})`}}function a_(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Mg(n){return a_(n).replace(/%3B/gi,";")}function Rg(n){return a_(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Ng(n){return decodeURIComponent(n)}function u_(n){return Ng(n.replace(/\+/g,"%20"))}function z0(n){return`${Rg(n.path)}${function GD(n){return Object.keys(n).map(e=>`;${Rg(e)}=${Rg(n[e])}`).join("")}(n.parameters)}`}const q0=/^[^\/()?;=#]+/;function mf(n){const e=n.match(q0);return e?e[0]:""}const uc=/^[^=?&#]+/,l_=/^[^&#]+/;class qD{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Bt([],{}):new Bt([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Lt]=new Bt(e,t)),r}parseSegment(){const e=mf(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new g.vHH(4009,!1);return this.capture(e),new gf(Ng(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=mf(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const s=mf(this.remaining);s&&(r=s,this.capture(r))}e[Ng(t)]=Ng(r)}parseQueryParam(e){const t=function zD(n){const e=n.match(uc);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const c=function c_(n){const e=n.match(l_);return e?e[0]:""}(this.remaining);c&&(r=c,this.capture(r))}const s=u_(t),u=u_(r);if(e.hasOwnProperty(s)){let c=e[s];Array.isArray(c)||(c=[c],e[s]=c),c.push(u)}else e[s]=u}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=mf(this.remaining),s=this.remaining[r.length];if("/"!==s&&")"!==s&&";"!==s)throw new g.vHH(4010,!1);let u;r.indexOf(":")>-1?(u=r.slice(0,r.indexOf(":")),this.capture(u),this.capture(":")):e&&(u=Lt);const c=this.parseChildren();t[u]=1===Object.keys(c).length?c[Lt]:new Bt([],c),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new g.vHH(4011,!1)}}function W0(n){return n.segments.length>0?new Bt([],{[Lt]:n}):n}function d_(n){const e={};for(const r of Object.keys(n.children)){const u=d_(n.children[r]);(u.segments.length>0||u.hasChildren())&&(e[r]=u)}return function Bx(n){if(1===n.numberOfChildren&&n.children[Lt]){const e=n.children[Lt];return new Bt(n.segments.concat(e.segments),e.children)}return n}(new Bt(n.segments,e))}function lc(n){return n instanceof ac}function KD(n,e,t,r,s){if(0===t.length)return Ad(e.root,e.root,e.root,r,s);const u=function Z0(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new K0(!0,0,n);let e=0,t=!1;const r=n.reduce((s,u,c)=>{if("object"==typeof u&&null!=u){if(u.outlets){const m={};return Qr(u.outlets,(v,b)=>{m[b]="string"==typeof v?v.split("/"):v}),[...s,{outlets:m}]}if(u.segmentPath)return[...s,u.segmentPath]}return"string"!=typeof u?[...s,u]:0===c?(u.split("/").forEach((m,v)=>{0==v&&"."===m||(0==v&&""===m?t=!0:".."===m?e++:""!=m&&s.push(m))}),s):[...s,u]},[]);return new K0(t,e,r)}(t);return u.toRoot()?Ad(e.root,e.root,new Bt([],{}),r,s):function c(v){const b=function YD(n,e,t,r){if(n.isAbsolute)return new xd(e.root,!0,0);if(-1===r)return new xd(t,t===e.root,0);return function f_(n,e,t){let r=n,s=e,u=t;for(;u>s;){if(u-=s,r=r.parent,!r)throw new g.vHH(4005,!1);s=r.segments.length}return new xd(r,!1,s-u)}(t,r+(Sd(n.commands[0])?0:1),n.numberOfDoubleDots)}(u,e,n.snapshot?._urlSegment,v),A=b.processChildren?Md(b.segmentGroup,b.index,u.commands):kg(b.segmentGroup,b.index,u.commands);return Ad(e.root,b.segmentGroup,A,r,s)}(n.snapshot?._lastPathIndex)}function Sd(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function Uu(n){return"object"==typeof n&&null!=n&&n.outlets}function Ad(n,e,t,r,s){let c,u={};r&&Qr(r,(v,b)=>{u[b]=Array.isArray(v)?v.map(A=>`${A}`):`${v}`}),c=n===e?t:h_(n,e,t);const m=W0(d_(c));return new ac(m,u,s)}function h_(n,e,t){const r={};return Qr(n.children,(s,u)=>{r[u]=s===e?t:h_(s,e,t)}),new Bt(n.segments,r)}class K0{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Sd(r[0]))throw new g.vHH(4003,!1);const s=r.find(Uu);if(s&&s!==i_(r))throw new g.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class xd{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function kg(n,e,t){if(n||(n=new Bt([],{})),0===n.segments.length&&n.hasChildren())return Md(n,e,t);const r=function p_(n,e,t){let r=0,s=e;const u={match:!1,pathIndex:0,commandIndex:0};for(;s<n.segments.length;){if(r>=t.length)return u;const c=n.segments[s],m=t[r];if(Uu(m))break;const v=`${m}`,b=r<t.length-1?t[r+1]:null;if(s>0&&void 0===v)break;if(v&&b&&"object"==typeof b&&void 0===b.outlets){if(!JD(v,b,c))return u;r+=2}else{if(!JD(v,{},c))return u;r++}s++}return{match:!0,pathIndex:s,commandIndex:r}}(n,e,t),s=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const u=new Bt(n.segments.slice(0,r.pathIndex),{});return u.children[Lt]=new Bt(n.segments.slice(r.pathIndex),n.children),Md(u,0,s)}return r.match&&0===s.length?new Bt(n.segments,{}):r.match&&!n.hasChildren()?Y0(n,e,t):r.match?Md(n,0,s):Y0(n,e,t)}function Md(n,e,t){if(0===t.length)return new Bt(n.segments,{});{const r=function QD(n){return Uu(n[0])?n[0].outlets:{[Lt]:n}}(t),s={};return Qr(r,(u,c)=>{"string"==typeof u&&(u=[u]),null!==u&&(s[c]=kg(n.children[c],e,u))}),Qr(n.children,(u,c)=>{void 0===r[c]&&(s[c]=u)}),new Bt(n.segments,s)}}function Y0(n,e,t){const r=n.segments.slice(0,e);let s=0;for(;s<t.length;){const u=t[s];if(Uu(u)){const v=g_(u.outlets);return new Bt(r,v)}if(0===s&&Sd(t[0])){r.push(new gf(n.segments[e].path,Q0(t[0]))),s++;continue}const c=Uu(u)?u.outlets[Lt]:`${u}`,m=s<t.length-1?t[s+1]:null;c&&m&&Sd(m)?(r.push(new gf(c,Q0(m))),s+=2):(r.push(new gf(c,{})),s++)}return new Bt(r,{})}function g_(n){const e={};return Qr(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=Y0(new Bt([],{}),0,t))}),e}function Q0(n){const e={};return Qr(n,(t,r)=>e[r]=`${t}`),e}function JD(n,e,t){return n==t.path&&Vs(e,t.parameters)}class Vi{constructor(e,t){this.id=e,this.url=t}}class Pg extends Vi{constructor(e,t,r="imperative",s=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=s}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Bu extends Vi{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class cc extends Vi{constructor(e,t,r,s){super(e,t),this.reason=r,this.code=s,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Bs extends Vi{constructor(e,t,r,s){super(e,t),this.error=r,this.target=s,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class J0 extends Vi{constructor(e,t,r,s){super(e,t),this.urlAfterRedirects=r,this.state=s,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class XD extends Vi{constructor(e,t,r,s){super(e,t),this.urlAfterRedirects=r,this.state=s,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class m_ extends Vi{constructor(e,t,r,s,u){super(e,t),this.urlAfterRedirects=r,this.state=s,this.shouldActivate=u,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Oa extends Vi{constructor(e,t,r,s){super(e,t),this.urlAfterRedirects=r,this.state=s,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class y_ extends Vi{constructor(e,t,r,s){super(e,t),this.urlAfterRedirects=r,this.state=s,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class X0{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class __{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class jx{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class eE{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class $x{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Fg{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class yf{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class Lg{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=_f(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=_f(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=tE(e,this._root);return t.length<2?[]:t[t.length-2].children.map(s=>s.value).filter(s=>s!==e)}pathFromRoot(e){return tE(e,this._root).map(t=>t.value)}}function _f(n,e){if(n===e.value)return e;for(const t of e.children){const r=_f(n,t);if(r)return r}return null}function tE(n,e){if(n===e.value)return[e];for(const t of e.children){const r=tE(n,t);if(r.length)return r.unshift(e),r}return[]}class ka{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Rd(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class nE extends Lg{constructor(e,t){super(e),this.snapshot=t,E_(this,e)}toString(){return this.snapshot.toString()}}function rE(n,e){const t=function iE(n,e){const c=new vf([],{},{},"",{},Lt,e,null,n.root,-1,{});return new w_("",new ka(c,[]))}(n,e),r=new ls([new gf("",{})]),s=new ls({}),u=new ls({}),c=new ls({}),m=new ls(""),v=new Nd(r,s,c,m,u,Lt,e,t.root);return v.snapshot=t.root,new nE(new ka(v,[]),t)}class Nd{constructor(e,t,r,s,u,c,m,v){this.url=e,this.params=t,this.queryParams=r,this.fragment=s,this.data=u,this.outlet=c,this.component=m,this.title=this.data?.pipe((0,ft.U)(b=>b[Lu]))??it(void 0),this._futureSnapshot=v}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,ft.U)(e=>oc(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,ft.U)(e=>oc(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function sE(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const s=t[r],u=t[r-1];if(s.routeConfig&&""===s.routeConfig.path)r--;else{if(u.component)break;r--}}return function Hx(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class vf{constructor(e,t,r,s,u,c,m,v,b,A,M,L){this.url=e,this.params=t,this.queryParams=r,this.fragment=s,this.data=u,this.outlet=c,this.component=m,this.title=this.data?.[Lu],this.routeConfig=v,this._urlSegment=b,this._lastPathIndex=A,this._correctedLastPathIndex=L??A,this._resolve=M}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=oc(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=oc(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class w_ extends Lg{constructor(e,t){super(t),this.url=e,E_(this,t)}toString(){return Vg(this._root)}}function E_(n,e){e.value._routerState=n,e.children.forEach(t=>E_(n,t))}function Vg(n){const e=n.children.length>0?` { ${n.children.map(Vg).join(", ")} } `:"";return`${n.value}${e}`}function oE(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Vs(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),Vs(e.params,t.params)||n.params.next(t.params),function L0(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Vs(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),Vs(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function aE(n,e){const t=Vs(n.params,e.params)&&function jD(n,e){return Vu(n,e)&&n.every((t,r)=>Vs(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||aE(n.parent,e.parent))}function Ug(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const s=function zx(n,e,t){return e.children.map(r=>{for(const s of t.children)if(n.shouldReuseRoute(r.value,s.value.snapshot))return Ug(n,r,s);return Ug(n,r)})}(n,e,t);return new ka(r,s)}{if(n.shouldAttach(e.value)){const u=n.retrieve(e.value);if(null!==u){const c=u.route;return c.value._futureSnapshot=e.value,c.children=e.children.map(m=>Ug(n,m)),c}}const r=function qx(n){return new Nd(new ls(n.url),new ls(n.params),new ls(n.queryParams),new ls(n.fragment),new ls(n.data),n.outlet,n.component,n)}(e.value),s=e.children.map(u=>Ug(n,u));return new ka(r,s)}}const uE="ngNavigationCancelingError";function eC(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=lc(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,s=tC(!1,0,e);return s.url=t,s.navigationBehaviorOptions=r,s}function tC(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[uE]=!0,r.cancellationCode=e,t&&(r.url=t),r}function nC(n){return Pa(n)&&lc(n.url)}function Pa(n){return n&&n[uE]}class I_{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new wf,this.attachRef=null}}let wf=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const s=this.getOrCreateContext(t);s.outlet=r,this.contexts.set(t,s)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new I_,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Ef=!1;let If=(()=>{class n{constructor(t,r,s,u,c){this.parentContexts=t,this.location=r,this.changeDetector=u,this.environmentInjector=c,this.activated=null,this._activatedRoute=null,this.activateEvents=new g.vpe,this.deactivateEvents=new g.vpe,this.attachEvents=new g.vpe,this.detachEvents=new g.vpe,this.name=s||Lt,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.getContext(this.name)?.outlet===this&&this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new g.vHH(4012,Ef);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new g.vHH(4012,Ef);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new g.vHH(4012,Ef);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new g.vHH(4013,Ef);this._activatedRoute=t;const s=this.location,c=t._futureSnapshot.component,m=this.parentContexts.getOrCreateContext(this.name).children,v=new lE(t,m,s.injector);if(r&&function b_(n){return!!n.resolveComponentFactory}(r)){const b=r.resolveComponentFactory(c);this.activated=s.createComponent(b,s.length,v)}else this.activated=s.createComponent(c,{index:s.length,injector:v,environmentInjector:r??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(wf),g.Y36(g.s_b),g.$8M("name"),g.Y36(g.sBO),g.Y36(g.lqb))},n.\u0275dir=g.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0}),n})();class lE{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Nd?this.route:e===wf?this.childContexts:this.parent.get(e,t)}}let D_=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=g.Xpm({type:n,selectors:[["ng-component"]],standalone:!0,features:[g.jDz],decls:1,vars:0,template:function(t,r){1&t&&g._UZ(0,"router-outlet")},dependencies:[If],encapsulation:2}),n})();function Fa(n,e){return n.providers&&!n._injector&&(n._injector=(0,g.MMx)(n.providers,e,`Route: ${n.path}`)),n._injector??e}function bf(n){const e=n.children&&n.children.map(bf),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Lt&&(t.component=D_),t}function Jr(n){return n.outlet||Lt}function Df(n,e){const t=n.filter(r=>Jr(r)===e);return t.push(...n.filter(r=>Jr(r)!==e)),t}function La(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class cE{constructor(e,t,r,s){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=s}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),oE(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const s=Rd(t);e.children.forEach(u=>{const c=u.value.outlet;this.deactivateRoutes(u,s[c],r),delete s[c]}),Qr(s,(u,c)=>{this.deactivateRouteAndItsChildren(u,r)})}deactivateRoutes(e,t,r){const s=e.value,u=t?t.value:null;if(s===u)if(s.component){const c=r.getContext(s.outlet);c&&this.deactivateChildRoutes(e,t,c.children)}else this.deactivateChildRoutes(e,t,r);else u&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),s=r&&e.value.component?r.children:t,u=Rd(e);for(const c of Object.keys(u))this.deactivateRouteAndItsChildren(u[c],s);if(r&&r.outlet){const c=r.outlet.detach(),m=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:c,route:e,contexts:m})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),s=r&&e.value.component?r.children:t,u=Rd(e);for(const c of Object.keys(u))this.deactivateRouteAndItsChildren(u[c],s);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const s=Rd(t);e.children.forEach(u=>{this.activateRoutes(u,s[u.value.outlet],r),this.forwardEvent(new Fg(u.value.snapshot))}),e.children.length&&this.forwardEvent(new eE(e.value.snapshot))}activateRoutes(e,t,r){const s=e.value,u=t?t.value:null;if(oE(s),s===u)if(s.component){const c=r.getOrCreateContext(s.outlet);this.activateChildRoutes(e,t,c.children)}else this.activateChildRoutes(e,t,r);else if(s.component){const c=r.getOrCreateContext(s.outlet);if(this.routeReuseStrategy.shouldAttach(s.snapshot)){const m=this.routeReuseStrategy.retrieve(s.snapshot);this.routeReuseStrategy.store(s.snapshot,null),c.children.onOutletReAttached(m.contexts),c.attachRef=m.componentRef,c.route=m.route.value,c.outlet&&c.outlet.attach(m.componentRef,m.route.value),oE(m.route.value),this.activateChildRoutes(e,null,c.children)}else{const m=La(s.snapshot),v=m?.get(g._Vd)??null;c.attachRef=null,c.route=s,c.resolver=v,c.injector=m,c.outlet&&c.outlet.activateWith(s,c.injector),this.activateChildRoutes(e,null,c.children)}}else this.activateChildRoutes(e,null,r)}}class T_{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class kd{constructor(e,t){this.component=e,this.route=t}}function S_(n,e,t){const r=n._root;return Cf(r,e?e._root:null,t,[r.value])}function ju(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||(0,g.Z0I)(n)?e.get(n):n:r}function Cf(n,e,t,r,s={canDeactivateChecks:[],canActivateChecks:[]}){const u=Rd(e);return n.children.forEach(c=>{(function Zx(n,e,t,r,s={canDeactivateChecks:[],canActivateChecks:[]}){const u=n.value,c=e?e.value:null,m=t?t.getContext(n.value.outlet):null;if(c&&u.routeConfig===c.routeConfig){const v=function aC(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!Vu(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Vu(n.url,e.url)||!Vs(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!aE(n,e)||!Vs(n.queryParams,e.queryParams);default:return!aE(n,e)}}(c,u,u.routeConfig.runGuardsAndResolvers);v?s.canActivateChecks.push(new T_(r)):(u.data=c.data,u._resolvedData=c._resolvedData),Cf(n,e,u.component?m?m.children:null:t,r,s),v&&m&&m.outlet&&m.outlet.isActivated&&s.canDeactivateChecks.push(new kd(m.outlet.component,c))}else c&&Pd(e,m,s),s.canActivateChecks.push(new T_(r)),Cf(n,null,u.component?m?m.children:null:t,r,s)})(c,u[c.value.outlet],t,r.concat([c.value]),s),delete u[c.value.outlet]}),Qr(u,(c,m)=>Pd(c,t.getContext(m),s)),s}function Pd(n,e,t){const r=Rd(n),s=n.value;Qr(r,(u,c)=>{Pd(u,s.component?e?e.children.getContext(c):null:e,t)}),t.canDeactivateChecks.push(new kd(s.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,s))}function Tf(n){return"function"==typeof n}function Sf(n){return n instanceof af||"EmptyError"===n?.name}const Af=Symbol("INITIAL_VALUE");function Fd(){return Kn(n=>Tg(n.map(e=>e.pipe(cf(1),Sg(Af)))).pipe((0,ft.U)(e=>{for(const t of e)if(!0!==t){if(t===Af)return Af;if(!1===t||t instanceof ac)return t}return!0}),Li(e=>e!==Af),cf(1)))}function vE(n){return(0,UD.z)((0,Yr.b)(e=>{if(lc(e))throw eC(0,e)}),(0,ft.U)(e=>!0===e))}const xf={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function wE(n,e,t,r,s){const u=A_(n,e,t);return u.matched?function Uo(n,e,t,r){const s=e.canMatch;return s&&0!==s.length?it(s.map(c=>{const m=ju(c,n);return Na(function lC(n){return n&&Tf(n.canMatch)}(m)?m.canMatch(e,t):n.runInContext(()=>m(e,t)))})).pipe(Fd(),vE()):it(!0)}(r=Fa(e,r),e,t).pipe((0,ft.U)(c=>!0===c?u:{...xf})):it(u)}function A_(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...xf}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const s=(e.matcher||r_)(t,n,e);if(!s)return{...xf};const u={};Qr(s.posParams,(m,v)=>{u[v]=m.path});const c=s.consumed.length>0?{...u,...s.consumed[s.consumed.length-1].parameters}:u;return{matched:!0,consumedSegments:s.consumed,remainingSegments:t.slice(s.consumed.length),parameters:c,positionalParamSegments:s.posParams??{}}}function x_(n,e,t,r,s="corrected"){if(t.length>0&&function yC(n,e,t){return t.some(r=>Ld(n,e,r)&&Jr(r)!==Lt)}(n,t,r)){const c=new Bt(e,function mC(n,e,t,r){const s={};s[Lt]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const u of t)if(""===u.path&&Jr(u)!==Lt){const c=new Bt([],{});c._sourceSegment=n,c._segmentIndexShift=e.length,s[Jr(u)]=c}return s}(n,e,r,new Bt(t,n.children)));return c._sourceSegment=n,c._segmentIndexShift=e.length,{segmentGroup:c,slicedSegments:[]}}if(0===t.length&&function _C(n,e,t){return t.some(r=>Ld(n,e,r))}(n,t,r)){const c=new Bt(n.segments,function EE(n,e,t,r,s,u){const c={};for(const m of r)if(Ld(n,t,m)&&!s[Jr(m)]){const v=new Bt([],{});v._sourceSegment=n,v._segmentIndexShift="legacy"===u?n.segments.length:e.length,c[Jr(m)]=v}return{...s,...c}}(n,e,t,r,n.children,s));return c._sourceSegment=n,c._segmentIndexShift=e.length,{segmentGroup:c,slicedSegments:t}}const u=new Bt(n.segments,n.children);return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:t}}function Ld(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function IE(n,e,t,r){return!!(Jr(n)===r||r!==Lt&&Ld(e,t,n))&&("**"===n.path||A_(e,n,t).matched)}function bE(n,e,t){return 0===e.length&&!n.children[t]}const dc=!1;class Vd{constructor(e){this.segmentGroup=e||null}}class DE{constructor(e){this.urlTree=e}}function hc(n){return uf(new Vd(n))}function M_(n){return uf(new DE(n))}class Jx{constructor(e,t,r,s,u){this.injector=e,this.configLoader=t,this.urlSerializer=r,this.urlTree=s,this.config=u,this.allowRedirects=!0}apply(){const e=x_(this.urlTree.root,[],[],this.config).segmentGroup,t=new Bt(e.segments,e.children);return this.expandSegmentGroup(this.injector,this.config,t,Lt).pipe((0,ft.U)(u=>this.createUrlTree(d_(u),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Pu(u=>{if(u instanceof DE)return this.allowRedirects=!1,this.match(u.urlTree);throw u instanceof Vd?this.noMatchError(u):u}))}match(e){return this.expandSegmentGroup(this.injector,this.config,e.root,Lt).pipe((0,ft.U)(s=>this.createUrlTree(d_(s),e.queryParams,e.fragment))).pipe(Pu(s=>{throw s instanceof Vd?this.noMatchError(s):s}))}noMatchError(e){return new g.vHH(4002,dc)}createUrlTree(e,t,r){const s=W0(e);return new ac(s,t,r)}expandSegmentGroup(e,t,r,s){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,ft.U)(u=>new Bt([],u))):this.expandSegment(e,r,t,r.segments,s,!0)}expandChildren(e,t,r){const s=[];for(const u of Object.keys(r.children))"primary"===u?s.unshift(u):s.push(u);return(0,zt.D)(s).pipe(xa(u=>{const c=r.children[u],m=Df(t,u);return this.expandSegmentGroup(e,m,c,u).pipe((0,ft.U)(v=>({segment:v,outlet:u})))}),Fu((u,c)=>(u[c.outlet]=c.segment,u),{}),n_())}expandSegment(e,t,r,s,u,c){return(0,zt.D)(r).pipe(xa(m=>this.expandSegmentAgainstRoute(e,t,r,m,s,u,c).pipe(Pu(b=>{if(b instanceof Vd)return it(null);throw b}))),Vo(m=>!!m),Pu((m,v)=>{if(Sf(m))return bE(t,s,u)?it(new Bt([],{})):hc(t);throw m}))}expandSegmentAgainstRoute(e,t,r,s,u,c,m){return IE(s,t,u,c)?void 0===s.redirectTo?this.matchSegmentAgainstRoute(e,t,s,u,c):m&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,s,u,c):hc(t):hc(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,s,u,c){return"**"===s.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,s,c):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,s,u,c)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,s){const u=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?M_(u):this.lineralizeSegments(r,u).pipe((0,Kr.z)(c=>{const m=new Bt(c,{});return this.expandSegment(e,m,t,c,s,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,s,u,c){const{matched:m,consumedSegments:v,remainingSegments:b,positionalParamSegments:A}=A_(t,s,u);if(!m)return hc(t);const M=this.applyRedirectCommands(v,s.redirectTo,A);return s.redirectTo.startsWith("/")?M_(M):this.lineralizeSegments(s,M).pipe((0,Kr.z)(L=>this.expandSegment(e,t,r,L.concat(b),c,!1)))}matchSegmentAgainstRoute(e,t,r,s,u){return"**"===r.path?(e=Fa(r,e),r.loadChildren?(r._loadedRoutes?it({routes:r._loadedRoutes,injector:r._loadedInjector}):this.configLoader.loadChildren(e,r)).pipe((0,ft.U)(m=>(r._loadedRoutes=m.routes,r._loadedInjector=m.injector,new Bt(s,{})))):it(new Bt(s,{}))):wE(t,r,s,e).pipe(Kn(({matched:c,consumedSegments:m,remainingSegments:v})=>c?this.getChildConfig(e=r._injector??e,r,s).pipe((0,Kr.z)(A=>{const M=A.injector??e,L=A.routes,{segmentGroup:G,slicedSegments:Q}=x_(t,m,v,L),be=new Bt(G.segments,G.children);if(0===Q.length&&be.hasChildren())return this.expandChildren(M,L,be).pipe((0,ft.U)(lt=>new Bt(m,lt)));if(0===L.length&&0===Q.length)return it(new Bt(m,{}));const Te=Jr(r)===u;return this.expandSegment(M,be,L,Q,Te?Lt:u,!0).pipe((0,ft.U)(ut=>new Bt(m.concat(ut.segments),ut.children)))})):hc(t)))}getChildConfig(e,t,r){return t.children?it({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?it({routes:t._loadedRoutes,injector:t._loadedInjector}):function _E(n,e,t,r){const s=e.canLoad;return void 0===s||0===s.length?it(!0):it(s.map(c=>{const m=ju(c,n);return Na(function fE(n){return n&&Tf(n.canLoad)}(m)?m.canLoad(e,t):n.runInContext(()=>m(e,t)))})).pipe(Fd(),vE())}(e,t,r).pipe((0,Kr.z)(s=>s?this.configLoader.loadChildren(e,t).pipe((0,Yr.b)(u=>{t._loadedRoutes=u.routes,t._loadedInjector=u.injector})):function Qx(n){return uf(tC(dc,3))}())):it({routes:[],injector:e})}lineralizeSegments(e,t){let r=[],s=t.root;for(;;){if(r=r.concat(s.segments),0===s.numberOfChildren)return it(r);if(s.numberOfChildren>1||!s.children[Lt])return uf(new g.vHH(4e3,dc));s=s.children[Lt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,s){const u=this.createSegmentGroup(e,t.root,r,s);return new ac(u,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Qr(e,(s,u)=>{if("string"==typeof s&&s.startsWith(":")){const m=s.substring(1);r[u]=t[m]}else r[u]=s}),r}createSegmentGroup(e,t,r,s){const u=this.createSegments(e,t.segments,r,s);let c={};return Qr(t.children,(m,v)=>{c[v]=this.createSegmentGroup(e,m,r,s)}),new Bt(u,c)}createSegments(e,t,r,s){return t.map(u=>u.path.startsWith(":")?this.findPosParam(e,u,s):this.findOrReturn(u,r))}findPosParam(e,t,r){const s=r[t.path.substring(1)];if(!s)throw new g.vHH(4001,dc);return s}findOrReturn(e,t){let r=0;for(const s of t){if(s.path===e.path)return t.splice(r),s;r++}return e}}class TE{}class Va{constructor(e,t,r,s,u,c,m,v){this.injector=e,this.rootComponentType=t,this.config=r,this.urlTree=s,this.url=u,this.paramsInheritanceStrategy=c,this.relativeLinkResolution=m,this.urlSerializer=v}recognize(){const e=x_(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,Lt).pipe((0,ft.U)(t=>{if(null===t)return null;const r=new vf([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Lt,this.rootComponentType,null,this.urlTree.root,-1,{}),s=new ka(r,t),u=new w_(this.url,s);return this.inheritParamsAndData(u._root),u}))}inheritParamsAndData(e){const t=e.value,r=sE(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(s=>this.inheritParamsAndData(s))}processSegmentGroup(e,t,r,s){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,s)}processChildren(e,t,r){return(0,zt.D)(Object.keys(r.children)).pipe(xa(s=>{const u=r.children[s],c=Df(t,s);return this.processSegmentGroup(e,c,u,s)}),Fu((s,u)=>s&&u?(s.push(...u),s):null),function P0(n,e=!1){return(0,Zr.e)((t,r)=>{let s=0;t.subscribe((0,hr.x)(r,u=>{const c=n(u,s++);(c||e)&&r.next(u),!c&&r.complete()}))})}(s=>null!==s),df(null),n_(),(0,ft.U)(s=>{if(null===s)return null;const u=AE(s);return function jg(n){n.sort((e,t)=>e.value.outlet===Lt?-1:t.value.outlet===Lt?1:e.value.outlet.localeCompare(t.value.outlet))}(u),u}))}processSegment(e,t,r,s,u){return(0,zt.D)(t).pipe(xa(c=>this.processSegmentAgainstRoute(c._injector??e,c,r,s,u)),Vo(c=>!!c),Pu(c=>{if(Sf(c))return bE(r,s,u)?it([]):it(null);throw c}))}processSegmentAgainstRoute(e,t,r,s,u){if(t.redirectTo||!IE(t,r,s,u))return it(null);let c;if("**"===t.path){const m=s.length>0?i_(s).parameters:{},v=xE(r)+s.length;c=it({snapshot:new vf(s,m,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Ud(t),Jr(t),t.component??t._loadedComponent??null,t,k_(r),v,RE(t),v),consumedSegments:[],remainingSegments:[]})}else c=wE(r,t,s,e).pipe((0,ft.U)(({matched:m,consumedSegments:v,remainingSegments:b,parameters:A})=>{if(!m)return null;const M=xE(r)+v.length;return{snapshot:new vf(v,A,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Ud(t),Jr(t),t.component??t._loadedComponent??null,t,k_(r),M,RE(t),M),consumedSegments:v,remainingSegments:b}}));return c.pipe(Kn(m=>{if(null===m)return it(null);const{snapshot:v,consumedSegments:b,remainingSegments:A}=m;e=t._injector??e;const M=t._loadedInjector??e,L=function $g(n){return n.children?n.children:n.loadChildren?n._loadedRoutes:[]}(t),{segmentGroup:G,slicedSegments:Q}=x_(r,b,A,L.filter(Te=>void 0===Te.redirectTo),this.relativeLinkResolution);if(0===Q.length&&G.hasChildren())return this.processChildren(M,L,G).pipe((0,ft.U)(Te=>null===Te?null:[new ka(v,Te)]));if(0===L.length&&0===Q.length)return it([new ka(v,[])]);const be=Jr(t)===u;return this.processSegment(M,L,G,Q,be?Lt:u).pipe((0,ft.U)(Te=>null===Te?null:[new ka(v,Te)]))}))}}function Rf(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function AE(n){const e=[],t=new Set;for(const r of n){if(!Rf(r)){e.push(r);continue}const s=e.find(u=>r.value.routeConfig===u.value.routeConfig);void 0!==s?(s.children.push(...r.children),t.add(s)):e.push(r)}for(const r of t){const s=AE(r.children);e.push(new ka(r.value,s))}return e.filter(r=>!t.has(r))}function k_(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function xE(n){let e=n,t=e._segmentIndexShift??0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift??0;return t-1}function Ud(n){return n.data||{}}function RE(n){return n.resolve||{}}function NE(n){return"string"==typeof n.title||null===n.title}function Hg(n){return Kn(e=>{const t=n(e);return t?(0,zt.D)(t).pipe((0,ft.U)(()=>e)):it(e)})}let Gg=(()=>{class n{buildTitle(t){let r,s=t.root;for(;void 0!==s;)r=this.getResolvedTitleForRoute(s)??r,s=s.children.find(u=>u.outlet===Lt);return r}getResolvedTitleForRoute(t){return t.data[Lu]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:function(){return(0,g.f3M)(OE)},providedIn:"root"}),n})(),OE=(()=>{class n extends Gg{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(Xi))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class bC{}class CC extends class DC{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const zg=new g.OlP("",{providedIn:"root",factory:()=>({})}),Bd=new g.OlP("ROUTES");let Ua=(()=>{class n{constructor(t,r){this.injector=t,this.compiler=r,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return it(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=Na(t.loadComponent()).pipe((0,Yr.b)(u=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=u}),hf(()=>{this.componentLoaders.delete(t)})),s=new Xy(r,()=>new Ra.x).pipe(lf());return this.componentLoaders.set(t,s),s}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return it({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const u=this.loadModuleFactoryOrRoutes(r.loadChildren).pipe((0,ft.U)(m=>{this.onLoadEndListener&&this.onLoadEndListener(r);let v,b,A=!1;Array.isArray(m)?b=m:(v=m.create(t).injector,b=V0(v.get(Bd,[],g.XFs.Self|g.XFs.Optional)));return{routes:b.map(bf),injector:v}}),hf(()=>{this.childrenLoaders.delete(r)})),c=new Xy(u,()=>new Ra.x).pipe(lf());return this.childrenLoaders.set(r,c),c}loadModuleFactoryOrRoutes(t){return Na(t()).pipe((0,Kr.z)(r=>r instanceof g.YKP||Array.isArray(r)?it(r):(0,zt.D)(this.compiler.compileModuleAsync(r))))}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(g.zs3),g.LFG(g.Sil))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class tM{}class Nf{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function SC(n){throw n}function P_(n,e,t){return e.parse("/")}const AC={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Bo={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};function Xr(){const n=(0,g.f3M)(G0),e=(0,g.f3M)(wf),t=(0,g.f3M)(xe),r=(0,g.f3M)(g.zs3),s=(0,g.f3M)(g.Sil),u=(0,g.f3M)(Bd,{optional:!0})??[],c=(0,g.f3M)(zg,{optional:!0})??{},m=(0,g.f3M)(OE),v=(0,g.f3M)(Gg,{optional:!0}),b=(0,g.f3M)(tM,{optional:!0}),A=(0,g.f3M)(bC,{optional:!0}),M=new Vn(null,n,e,t,r,s,V0(u));return b&&(M.urlHandlingStrategy=b),A&&(M.routeReuseStrategy=A),M.titleStrategy=v??m,function Of(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(c,M),M}let Vn=(()=>{class n{constructor(t,r,s,u,c,m,v){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=s,this.location=u,this.config=v,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new Ra.x,this.errorHandler=SC,this.malformedUriErrorHandler=P_,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=()=>it(void 0),this.urlHandlingStrategy=new Nf,this.routeReuseStrategy=new CC,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.configLoader=c.get(Ua),this.configLoader.onLoadEndListener=L=>this.triggerEvent(new __(L)),this.configLoader.onLoadStartListener=L=>this.triggerEvent(new X0(L)),this.ngModule=c.get(g.h0i),this.console=c.get(g.c2e);const M=c.get(g.R0b);this.isNgZoneEnabled=M instanceof g.R0b&&g.R0b.isInAngularZone(),this.resetConfig(v),this.currentUrlTree=function U0(){return new ac(new Bt([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=rE(this.currentUrlTree,this.rootComponentType),this.transitions=new ls({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){return this.location.getState()?.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(Li(s=>0!==s.id),(0,ft.U)(s=>({...s,extractedUrl:this.urlHandlingStrategy.extract(s.rawUrl)})),Kn(s=>{let u=!1,c=!1;return it(s).pipe((0,Yr.b)(m=>{this.currentNavigation={id:m.id,initialUrl:m.rawUrl,extractedUrl:m.extractedUrl,trigger:m.source,extras:m.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),Kn(m=>{const v=this.browserUrlTree.toString(),b=!this.navigated||m.extractedUrl.toString()!==v||v!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||b)&&this.urlHandlingStrategy.shouldProcessUrl(m.rawUrl))return ds(m.source)&&(this.browserUrlTree=m.extractedUrl),it(m).pipe(Kn(M=>{const L=this.transitions.getValue();return r.next(new Pg(M.id,this.serializeUrl(M.extractedUrl),M.source,M.restoredState)),L!==this.transitions.getValue()?ic.E:Promise.resolve(M)}),function CE(n,e,t,r){return Kn(s=>function R_(n,e,t,r,s){return new Jx(n,e,t,r,s).apply()}(n,e,t,s.extractedUrl,r).pipe((0,ft.U)(u=>({...s,urlAfterRedirects:u}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,Yr.b)(M=>{this.currentNavigation={...this.currentNavigation,finalUrl:M.urlAfterRedirects},s.urlAfterRedirects=M.urlAfterRedirects}),function Xx(n,e,t,r,s,u){return(0,Kr.z)(c=>function N_(n,e,t,r,s,u,c="emptyOnly",m="legacy"){return new Va(n,e,t,r,s,c,m,u).recognize().pipe(Kn(v=>null===v?function SE(n){return new dr.y(e=>e.error(n))}(new TE):it(v)))}(n,e,t,c.urlAfterRedirects,r.serialize(c.urlAfterRedirects),r,s,u).pipe((0,ft.U)(m=>({...c,targetSnapshot:m}))))}(this.ngModule.injector,this.rootComponentType,this.config,this.urlSerializer,this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,Yr.b)(M=>{if(s.targetSnapshot=M.targetSnapshot,"eager"===this.urlUpdateStrategy){if(!M.extras.skipLocationChange){const G=this.urlHandlingStrategy.merge(M.urlAfterRedirects,M.rawUrl);this.setBrowserUrl(G,M)}this.browserUrlTree=M.urlAfterRedirects}const L=new J0(M.id,this.serializeUrl(M.extractedUrl),this.serializeUrl(M.urlAfterRedirects),M.targetSnapshot);r.next(L)}));if(b&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:L,extractedUrl:G,source:Q,restoredState:be,extras:Te}=m,Ze=new Pg(L,this.serializeUrl(G),Q,be);r.next(Ze);const ut=rE(G,this.rootComponentType).snapshot;return it(s={...m,targetSnapshot:ut,urlAfterRedirects:G,extras:{...Te,skipLocationChange:!1,replaceUrl:!1}})}return this.rawUrlTree=m.rawUrl,m.resolve(null),ic.E}),(0,Yr.b)(m=>{const v=new XD(m.id,this.serializeUrl(m.extractedUrl),this.serializeUrl(m.urlAfterRedirects),m.targetSnapshot);this.triggerEvent(v)}),(0,ft.U)(m=>s={...m,guards:S_(m.targetSnapshot,m.currentSnapshot,this.rootContexts)}),function dC(n,e){return(0,Kr.z)(t=>{const{targetSnapshot:r,currentSnapshot:s,guards:{canActivateChecks:u,canDeactivateChecks:c}}=t;return 0===c.length&&0===u.length?it({...t,guardsResult:!0}):function hC(n,e,t,r){return(0,zt.D)(n).pipe((0,Kr.z)(s=>function yE(n,e,t,r,s){const u=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return u&&0!==u.length?it(u.map(m=>{const v=La(e)??s,b=ju(m,v);return Na(function pE(n){return n&&Tf(n.canDeactivate)}(b)?b.canDeactivate(n,e,t,r):v.runInContext(()=>b(n,e,t,r))).pipe(Vo())})).pipe(Fd()):it(!0)}(s.component,s.route,t,e,r)),Vo(s=>!0!==s,!0))}(c,r,s,n).pipe((0,Kr.z)(m=>m&&function hE(n){return"boolean"==typeof n}(m)?function gE(n,e,t,r){return(0,zt.D)(e).pipe(xa(s=>Qy(function mE(n,e){return null!==n&&e&&e(new jx(n)),it(!0)}(s.route.parent,r),function fC(n,e){return null!==n&&e&&e(new $x(n)),it(!0)}(s.route,r),function gC(n,e,t){const r=e[e.length-1],u=e.slice(0,e.length-1).reverse().map(c=>function dE(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(c)).filter(c=>null!==c).map(c=>k0(()=>it(c.guards.map(v=>{const b=La(c.node)??t,A=ju(v,b);return Na(function cs(n){return n&&Tf(n.canActivateChild)}(A)?A.canActivateChild(r,n):b.runInContext(()=>A(r,n))).pipe(Vo())})).pipe(Fd())));return it(u).pipe(Fd())}(n,s.path,t),function pC(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return it(!0);const s=r.map(u=>k0(()=>{const c=La(e)??t,m=ju(u,c);return Na(function uC(n){return n&&Tf(n.canActivate)}(m)?m.canActivate(e,n):c.runInContext(()=>m(e,n))).pipe(Vo())}));return it(s).pipe(Fd())}(n,s.route,t))),Vo(s=>!0!==s,!0))}(r,u,n,e):it(m)),(0,ft.U)(m=>({...t,guardsResult:m})))})}(this.ngModule.injector,m=>this.triggerEvent(m)),(0,Yr.b)(m=>{if(s.guardsResult=m.guardsResult,lc(m.guardsResult))throw eC(0,m.guardsResult);const v=new m_(m.id,this.serializeUrl(m.extractedUrl),this.serializeUrl(m.urlAfterRedirects),m.targetSnapshot,!!m.guardsResult);this.triggerEvent(v)}),Li(m=>!!m.guardsResult||(this.restoreHistory(m),this.cancelNavigationTransition(m,"",3),!1)),Hg(m=>{if(m.guards.canActivateChecks.length)return it(m).pipe((0,Yr.b)(v=>{const b=new Oa(v.id,this.serializeUrl(v.extractedUrl),this.serializeUrl(v.urlAfterRedirects),v.targetSnapshot);this.triggerEvent(b)}),Kn(v=>{let b=!1;return it(v).pipe(function vC(n,e){return(0,Kr.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:s}}=t;if(!s.length)return it(t);let u=0;return(0,zt.D)(s).pipe(xa(c=>function eM(n,e,t,r){const s=n.routeConfig,u=n._resolve;return void 0!==s?.title&&!NE(s)&&(u[Lu]=s.title),function wC(n,e,t,r){const s=function EC(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===s.length)return it({});const u={};return(0,zt.D)(s).pipe((0,Kr.z)(c=>function IC(n,e,t,r){const s=La(e)??r,u=ju(n,s);return Na(u.resolve?u.resolve(e,t):s.runInContext(()=>u(e,t)))}(n[c],e,t,r).pipe(Vo(),(0,Yr.b)(m=>{u[c]=m}))),t_(1),function F0(n){return(0,ft.U)(()=>n)}(u),Pu(c=>Sf(c)?ic.E:uf(c)))}(u,n,e,r).pipe((0,ft.U)(c=>(n._resolvedData=c,n.data=sE(n,t).resolve,s&&NE(s)&&(n.data[Lu]=s.title),null)))}(c.route,r,n,e)),(0,Yr.b)(()=>u++),t_(1),(0,Kr.z)(c=>u===s.length?it(t):ic.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,Yr.b)({next:()=>b=!0,complete:()=>{b||(this.restoreHistory(v),this.cancelNavigationTransition(v,"",2))}}))}),(0,Yr.b)(v=>{const b=new y_(v.id,this.serializeUrl(v.extractedUrl),this.serializeUrl(v.urlAfterRedirects),v.targetSnapshot);this.triggerEvent(b)}))}),Hg(m=>{const v=b=>{const A=[];b.routeConfig?.loadComponent&&!b.routeConfig._loadedComponent&&A.push(this.configLoader.loadComponent(b.routeConfig).pipe((0,Yr.b)(M=>{b.component=M}),(0,ft.U)(()=>{})));for(const M of b.children)A.push(...v(M));return A};return Tg(v(m.targetSnapshot.root)).pipe(df(),cf(1))}),Hg(()=>this.afterPreactivation()),(0,ft.U)(m=>{const v=function Gx(n,e,t){const r=Ug(n,e._root,t?t._root:void 0);return new nE(r,e)}(this.routeReuseStrategy,m.targetSnapshot,m.currentRouterState);return s={...m,targetRouterState:v}}),(0,Yr.b)(m=>{this.currentUrlTree=m.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(m.urlAfterRedirects,m.rawUrl),this.routerState=m.targetRouterState,"deferred"===this.urlUpdateStrategy&&(m.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,m),this.browserUrlTree=m.urlAfterRedirects)}),((n,e,t)=>(0,ft.U)(r=>(new cE(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,m=>this.triggerEvent(m)),(0,Yr.b)({next(){u=!0},complete(){u=!0}}),hf(()=>{u||c||this.cancelNavigationTransition(s,"",1),this.currentNavigation?.id===s.id&&(this.currentNavigation=null)}),Pu(m=>{if(c=!0,Pa(m)){nC(m)||(this.navigated=!0,this.restoreHistory(s,!0));const v=new cc(s.id,this.serializeUrl(s.extractedUrl),m.message,m.cancellationCode);if(r.next(v),nC(m)){const b=this.urlHandlingStrategy.merge(m.url,this.rawUrlTree),A={skipLocationChange:s.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||ds(s.source)};this.scheduleNavigation(b,"imperative",null,A,{resolve:s.resolve,reject:s.reject,promise:s.promise})}else s.resolve(!1)}else{this.restoreHistory(s,!0);const v=new Bs(s.id,this.serializeUrl(s.extractedUrl),m,s.targetSnapshot??void 0);r.next(v);try{s.resolve(this.errorHandler(m))}catch(b){s.reject(b)}}return ic.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next({...this.transitions.value,...t})}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{const s={replaceUrl:!0},u=t.state?.navigationId?t.state:null;if(u){const m={...u};delete m.navigationId,delete m.\u0275routerPageId,0!==Object.keys(m).length&&(s.state=m)}const c=this.parseUrl(t.url);this.scheduleNavigation(c,r,u,s)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){this.config=t.map(bf),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:s,queryParams:u,fragment:c,queryParamsHandling:m,preserveFragment:v}=r,b=s||this.routerState.root,A=v?this.currentUrlTree.fragment:c;let M=null;switch(m){case"merge":M={...this.currentUrlTree.queryParams,...u};break;case"preserve":M=this.currentUrlTree.queryParams;break;default:M=u||null}return null!==M&&(M=this.removeEmptyProps(M)),KD(b,this.currentUrlTree,t,M,A??null)}navigateByUrl(t,r={skipLocationChange:!1}){const s=lc(t)?t:this.parseUrl(t),u=this.urlHandlingStrategy.merge(s,this.rawUrlTree);return this.scheduleNavigation(u,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function Wg(n){for(let e=0;e<n.length;e++){if(null==n[e])throw new g.vHH(4008,false)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(s){r=this.malformedUriErrorHandler(s,this.urlSerializer,t)}return r}isActive(t,r){let s;if(s=!0===r?{...AC}:!1===r?{...Bo}:r,lc(t))return B0(this.currentUrlTree,t,s);const u=this.parseUrl(t);return B0(this.currentUrlTree,u,s)}removeEmptyProps(t){return Object.keys(t).reduce((r,s)=>{const u=t[s];return null!=u&&(r[s]=u),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new Bu(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.titleStrategy?.updateTitle(this.routerState.snapshot),t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,s,u,c){if(this.disposed)return Promise.resolve(!1);let m,v,b;c?(m=c.resolve,v=c.reject,b=c.promise):b=new Promise((L,G)=>{m=L,v=G});const A=++this.navigationId;let M;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(s=this.location.getState()),M=s&&s.\u0275routerPageId?s.\u0275routerPageId:u.replaceUrl||u.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1):M=0,this.setTransition({id:A,targetPageId:M,source:r,restoredState:s,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:u,resolve:m,reject:v,promise:b,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),b.catch(L=>Promise.reject(L))}setBrowserUrl(t,r){const s=this.urlSerializer.serialize(t),u={...r.extras.state,...this.generateNgRouterState(r.id,r.targetPageId)};this.location.isCurrentPathEqualTo(s)||r.extras.replaceUrl?this.location.replaceState(s,"",u):this.location.go(s,"",u)}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const s=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.currentNavigation?.finalUrl||0===s?this.currentUrlTree===this.currentNavigation?.finalUrl&&0===s&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(s)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r,s){const u=new cc(t.id,this.serializeUrl(t.extractedUrl),r,s);this.triggerEvent(u),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){g.$Z()},n.\u0275prov=g.Yz7({token:n,factory:function(){return Xr()},providedIn:"root"}),n})();function ds(n){return"imperative"!==n}let Ba=(()=>{class n{constructor(t,r,s){this.router=t,this.route=r,this.locationStrategy=s,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.commands=null,this.href=null,this.onChanges=new Ra.x,this.subscription=t.events.subscribe(u=>{u instanceof Bu&&this.updateTargetUrlAndHref()})}set preserveFragment(t){this._preserveFragment=(0,g.D6c)(t)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(t){this._skipLocationChange=(0,g.D6c)(t)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(t){this._replaceUrl=(0,g.D6c)(t)}get replaceUrl(){return this._replaceUrl}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:null}ngOnChanges(t){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(t,r,s,u,c){return!!(0!==t||r||s||u||c||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!1)}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(Vn),g.Y36(Nd),g.Y36(me))},n.\u0275dir=g.lG2({type:n,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(t,r){1&t&&g.NdJ("click",function(u){return r.onClick(u.button,u.ctrlKey,u.shiftKey,u.altKey,u.metaKey)}),2&t&&g.uIk("target",r.target)("href",r.href,g.LSH)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[g.TTD]}),n})();class fc{}let Hd=(()=>{class n{constructor(t,r,s,u,c){this.router=t,this.injector=s,this.preloadingStrategy=u,this.loader=c}setUpPreloading(){this.subscription=this.router.events.pipe(Li(t=>t instanceof Bu),xa(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const s=[];for(const u of r){u.providers&&!u._injector&&(u._injector=(0,g.MMx)(u.providers,t,`Route: ${u.path}`));const c=u._injector??t,m=u._loadedInjector??c;u.loadChildren&&!u._loadedRoutes&&void 0===u.canLoad||u.loadComponent&&!u._loadedComponent?s.push(this.preloadConfig(c,u)):(u.children||u._loadedRoutes)&&s.push(this.processRoutes(m,u.children??u._loadedRoutes))}return(0,zt.D)(s).pipe((0,rc.J)())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let s;s=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):it(null);const u=s.pipe((0,Kr.z)(c=>null===c?it(void 0):(r._loadedRoutes=c.routes,r._loadedInjector=c.injector,this.processRoutes(c.injector??t,c.routes))));if(r.loadComponent&&!r._loadedComponent){const c=this.loader.loadComponent(r);return(0,zt.D)([u,c]).pipe((0,rc.J)())}return u})}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(Vn),g.LFG(g.Sil),g.LFG(g.lqb),g.LFG(fc),g.LFG(Ua))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const $u=new g.OlP("");let pc=(()=>{class n{constructor(t,r,s={}){this.router=t,this.viewportScroller=r,this.options=s,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},s.scrollPositionRestoration=s.scrollPositionRestoration||"disabled",s.anchorScrolling=s.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Pg?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Bu&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof yf&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new yf(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){g.$Z()},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();function gc(n,e){return{\u0275kind:n,\u0275providers:e}}function Kg(n){return[{provide:Bd,multi:!0,useValue:n}]}function L_(){const n=(0,g.f3M)(g.zs3);return e=>{const t=n.get(g.z2F);if(e!==t.components[0])return;const r=n.get(Vn),s=n.get(V_);1===n.get(Zg)&&r.initialNavigation(),n.get(FE,null,g.XFs.Optional)?.setUpPreloading(),n.get($u,null,g.XFs.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),s.next(),s.complete()}}const V_=new g.OlP("",{factory:()=>new Ra.x}),Zg=new g.OlP("",{providedIn:"root",factory:()=>1});const FE=new g.OlP("");function kC(n){return gc(0,[{provide:FE,useExisting:Hd},{provide:fc,useExisting:n}])}const Vf=new g.OlP("ROUTER_FORROOT_GUARD"),Yg=[xe,{provide:G0,useClass:o_},{provide:Vn,useFactory:Xr},wf,{provide:Nd,useFactory:function F_(n){return n.routerState.root},deps:[Vn]},Ua];function U_(){return new g.PXZ("Router",Vn)}let LE=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[Yg,[],Kg(t),{provide:Vf,useFactory:FC,deps:[[Vn,new g.FiY,new g.tp0]]},{provide:zg,useValue:r||{}},r?.useHash?{provide:me,useClass:nt}:{provide:me,useClass:Ye},{provide:$u,useFactory:()=>{const n=(0,g.f3M)(Vn),e=(0,g.f3M)(Xa),t=(0,g.f3M)(zg);return t.scrollOffset&&e.setOffset(t.scrollOffset),new pc(n,e,t)}},r?.preloadingStrategy?kC(r.preloadingStrategy).\u0275providers:[],{provide:g.PXZ,multi:!0,useFactory:U_},r?.initialNavigation?$_(r):[],[{provide:H_,useFactory:L_},{provide:g.tb,multi:!0,useExisting:H_}]]}}static forChild(t){return{ngModule:n,providers:[Kg(t)]}}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(Vf,8))},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({imports:[D_]}),n})();function FC(n){return"guarded"}function $_(n){return["disabled"===n.initialNavigation?gc(3,[{provide:g.ip1,multi:!0,useFactory:()=>{const e=(0,g.f3M)(Vn);return()=>{e.setUpLocationChangeListener()}}},{provide:Zg,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?gc(2,[{provide:Zg,useValue:0},{provide:g.ip1,multi:!0,deps:[g.zs3],useFactory:e=>{const t=e.get(B,Promise.resolve(null));let r=!1;return()=>t.then(()=>new Promise(u=>{const c=e.get(Vn),m=e.get(V_);(function s(u){e.get(Vn).events.pipe(Li(m=>m instanceof Bu||m instanceof cc||m instanceof Bs),(0,ft.U)(m=>m instanceof Bu||m instanceof cc&&(0===m.code||1===m.code)&&null),Li(m=>null!==m),cf(1)).subscribe(()=>{u()})})(()=>{u(!0),r=!0}),c.afterPreactivation=()=>(u(!0),r||m.closed?it(void 0):m),c.initialNavigation()}))}}]).\u0275providers:[]]}const H_=new g.OlP(""),jE=[{path:"",component:(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=g.Xpm({type:n,selectors:[["app-login-form"]],decls:16,vars:0,consts:[[1,"login-container","text-center"],[1,"form-signin","w-100","m-auto"],["src","../../../assets/rayo-espacial-logo-grande.png","alt","","width","200","height","200",1,"mb-4"],[1,"form-floating"],["type","email","id","floatingInput","placeholder","name@example.com",1,"form-control"],["for","floatingInput"],["type","password","id","floatingPassword","placeholder","Password",1,"form-control"],["for","floatingPassword"],["type","submit",1,"w-100","btn","btn-lg","btn-primary","mt-4","submit-customization"],[1,"mt-5","mb-3","text-muted"]],template:function(t,r){1&t&&(g.TgZ(0,"div",0)(1,"main",1)(2,"form"),g._UZ(3,"img",2),g.TgZ(4,"div",3),g._UZ(5,"input",4),g.TgZ(6,"label",5),g._uU(7,"Email"),g.qZA()(),g.TgZ(8,"div",3),g._UZ(9,"input",6),g.TgZ(10,"label",7),g._uU(11,"Password"),g.qZA()(),g.TgZ(12,"button",8),g._uU(13,"Ingresar"),g.qZA(),g.TgZ(14,"p",9),g._uU(15,"\xa9 Ignacio Perez Artaso - 2022"),g.qZA()()()())},dependencies:[Vy,Zp,fd],styles:[".login-container[_ngcontent-%COMP%]{display:flex;align-items:center;padding-top:40px;padding-bottom:40px;background-color:#e6e0bb}.form-signin[_ngcontent-%COMP%]{max-width:330px;padding:15px}.form-signin[_ngcontent-%COMP%]   .form-floating[_ngcontent-%COMP%]:focus-within{z-index:2}.form-signin[_ngcontent-%COMP%]   input[type=email][_ngcontent-%COMP%]{margin-bottom:-1px;border-bottom-right-radius:0;border-bottom-left-radius:0}.form-signin[_ngcontent-%COMP%]   input[type=password][_ngcontent-%COMP%]{margin-bottom:10px;border-top-left-radius:0;border-top-right-radius:0}.submit-customization[_ngcontent-%COMP%]{background-color:#0d0f45!important;border:none!important}"]}),n})()},{path:"about-me",component:(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=g.Xpm({type:n,selectors:[["app-about-me"]],decls:34,vars:0,consts:[[1,"container","mt-4"],[1,"row"],[1,"co-12","col-lg-3"],[1,"card"],["src","../../../assets/micara.webp","alt","Card image cap",1,"card-img-top","img-thumbnail","img-fluid","rounded-pill"],[1,"card-body"],[1,"card-title"],[1,"col","align-self-center","my-sm-4"],[1,"card-text"]],template:function(t,r){1&t&&(g.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),g._UZ(4,"img",4),g.TgZ(5,"div",5)(6,"h5",6),g._uU(7,"Ignacio Perez Artaso"),g.qZA(),g.TgZ(8,"ul")(9,"li"),g._uU(10," DNI: 37124127 "),g.qZA(),g.TgZ(11,"li"),g._uU(12," Legajo Nro. 106134 "),g.qZA(),g.TgZ(13,"li"),g._uU(14," Divisi\xf3n: 4to B "),g.qZA(),g.TgZ(15,"li"),g._uU(16," https://github.com/perez-artaso "),g.qZA(),g.TgZ(17,"li"),g._uU(18,"perez.artaso@gmail.com "),g.qZA()()()()(),g.TgZ(19,"div",7)(20,"div",3)(21,"h1"),g._uU(22,"RayoEspacial"),g.qZA(),g.TgZ(23,"div",5)(24,"h5",6),g._uU(25,"El Camino"),g.qZA(),g.TgZ(26,"p",8),g._uU(27," Mi juego consiste en un tablero en forma de grilla cuadrangular en el que se ense\xf1ar\xe1 al jugador una ruta que conecta una entrada con una salida. Tras unos instantes, se ocultar\xe1 este recorrido y el intr\xe9pido jugador deber\xe1 recordarlo, contando con tres intentos para recorrer correctamente el camino. "),g._UZ(28,"br")(29,"br"),g._uU(30," Cualquier equivocaci\xf3n en la ruta contar\xe1 como un intento fallido. Los recorridos se generar\xe1n proceduralmente al inicio de cada partida, por lo que el desaf\xedo se renovar\xe1 constantemente. "),g._UZ(31,"br")(32,"br"),g._uU(33," El tama\xf1o del tablero ser\xe1 personalizable. Mientras m\xe1s grande, m\xe1s puntos dar\xe1 la victoria. "),g.qZA()()()()()())},styles:["[_ngcontent-%COMP%]:root{--main-color: #E6E0BB;--main-contrast: #0D0F45}.card[_ngcontent-%COMP%]{background-color:#e6e0bb}h1[_ngcontent-%COMP%]{text-align:center}"]}),n})()},{path:"home",component:(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=g.Xpm({type:n,selectors:[["app-home"]],decls:2,vars:0,template:function(t,r){1&t&&(g.TgZ(0,"p"),g._uU(1,"home works!"),g.qZA())}}),n})()}];let $E=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({imports:[LE.forRoot(jE),LE]}),n})(),UC=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=g.Xpm({type:n,selectors:[["app-navbar"]],decls:21,vars:0,consts:[[1,"navbar","navbar-expand-lg","navbar-dark","bg-primary","navbar-customization"],[1,"container-fluid"],["routerLink","/",1,"navbar-brand"],["src","../../../assets/rocket-only.png","width","50","height","50","alt","Bootstrap","loading","lazy",1,"d-inline-block","align-top"],["type","button","data-bs-toggle","collapse","data-bs-target","#navbarSupportedContent2","aria-controls","navbarSupportedContent2","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["id","navbarSupportedContent2",1,"collapse","navbar-collapse"],[1,"navbar-nav","me-auto","mb-2","mb-lg-0"],[1,"nav-item"],["aria-current","page","routerLink","/",1,"nav-link","active","nav-link-customization"],["routerLink","/about-me",1,"nav-link","nav-link-customization"],[1,"nav-item","dropdown"],["href","#","role","button","data-bs-toggle","dropdown","aria-expanded","false",1,"nav-link","dropdown-toggle","nav-link-customization"],[1,"dropdown-menu"],["href","#",1,"dropdown-item","nav-link-customization"]],template:function(t,r){1&t&&(g.TgZ(0,"nav",0)(1,"div",1)(2,"a",2),g._UZ(3,"img",3),g.qZA(),g.TgZ(4,"button",4),g._UZ(5,"span",5),g.qZA(),g.TgZ(6,"div",6)(7,"ul",7)(8,"li",8)(9,"a",9),g._uU(10,"Inicio"),g.qZA()(),g.TgZ(11,"li",8)(12,"a",10),g._uU(13,"Qui\xe9n Soy"),g.qZA()(),g.TgZ(14,"li",11)(15,"a",12),g._uU(16," Qui\xe9n Sos "),g.qZA(),g.TgZ(17,"ul",13)(18,"li")(19,"a",14),g._uU(20,"Registrarse"),g.qZA()()()()()()()())},dependencies:[Ba],styles:[".navbar-customization[_ngcontent-%COMP%]{background-color:#e6e0bb!important;border-bottom:.1rem solid #0D0F45!important}.nav-link-customization[_ngcontent-%COMP%]{color:#0d0f45}.active[_ngcontent-%COMP%]{color:#0d0f45!important;font-family:orbitron-black}.navbar-toggler[_ngcontent-%COMP%]{background-color:#0d0f45}"]}),n})(),BC=(()=>{class n{constructor(){this.title="sala-juegos-2022"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=g.Xpm({type:n,selectors:[["app-root"]],decls:2,vars:0,template:function(t,r){1&t&&g._UZ(0,"app-navbar")(1,"router-outlet")},dependencies:[If,UC]}),n})();var Ei=P(2011);const HE_firebaseConfig={apiKey:"AIzaSyD0FF-k7oz1RvH525aoPPdGGfo8Y7q_9Rw",authDomain:"salajuegos2022.firebaseapp.com",databaseURL:"https://salajuegos2022-default-rtdb.firebaseio.com",projectId:"salajuegos2022",storageBucket:"salajuegos2022.appspot.com",messagingSenderId:"15910949459",appId:"1:15910949459:web:cdef48d9faa371ab90aca6"};var GE=P(6451),zd=P(5363),zE=P(6063);class qE extends Ra.x{constructor(e=1/0,t=1/0,r=zE.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:s,_timestampProvider:u,_windowTime:c}=this;t||(r.push(e),!s&&r.push(u.now()+c)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:s}=this,u=s.slice();for(let c=0;c<u.length&&!e.closed;c+=r?1:2)e.next(u[c]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:s}=this,u=(s?1:2)*e;if(e<1/0&&u<r.length&&r.splice(0,r.length-u),!s){const c=t.now();let m=0;for(let v=1;v<r.length&&r[v]<=c;v+=2)m=v;m&&r.splice(0,m+1)}}}var WE=P(3099);function G_(n,e,t){let r,s=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:s=!1,scheduler:t}=n):r=n??1/0,(0,WE.B)({connector:()=>new qE(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:s})}function z_(n,e){return(0,wg.m)(e)?Kn(()=>n,e):Kn(()=>n)}var Qg=P(9468),Dn=P(5813);P(5867);var _e=P(5861),js=P(9681),Bf=P(4859),Dt=P(2090),jo=P(1877);const mo=new Map,ZC={activated:!1,tokenObservers:[]},YC={initialized:!1,enabled:!1};function gn(n){return mo.get(n)||ZC}function or(n,e){mo.set(n,e)}function Ui(){return YC}class Z_{constructor(e,t,r,s,u){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=s,this.upperBound=u,this.pending=null,this.nextErrorWaitInterval=s,s>u)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,_e.Z)(function*(){t.stop();try{t.pending=new Dt.BH,yield function jf(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new Dt.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const ai=new Dt.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function Y_(n){if(!gn(n).activated)throw ai.create("use-before-activation",{appName:n.name})}function Q_(n,e){return tm.apply(this,arguments)}function tm(){return(tm=(0,_e.Z)(function*({url:n,body:e},t){var r,s;const u={"Content-Type":"application/json"},c=t.getImmediate({optional:!0});if(c){const G=yield c.getHeartbeatsHeader();G&&(u["X-Firebase-Client"]=G)}const m={method:"POST",body:JSON.stringify(e),headers:u};let v,b;try{v=yield fetch(n,m)}catch(G){throw ai.create("fetch-network-error",{originalErrorMessage:null===(r=G)||void 0===r?void 0:r.message})}if(200!==v.status)throw ai.create("fetch-status-error",{httpStatus:v.status});try{b=yield v.json()}catch(G){throw ai.create("fetch-parse-error",{originalErrorMessage:null===(s=G)||void 0===s?void 0:s.message})}const A=b.ttl.match(/^([\d.]+)(s)$/);if(!A||!A[2]||isNaN(Number(A[1])))throw ai.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${b.ttl}`});const M=1e3*Number(A[1]),L=Date.now();return{token:b.token,expireTimeMillis:L+M,issuedAtTimeMillis:L}})).apply(this,arguments)}function J_(n,e){const{projectId:t,appId:r,apiKey:s}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${r}:exchangeDebugToken?key=${s}`,body:{debug_token:e}}}const qd="firebase-app-check-store";let $f=null;function ev(){return $f||($f=new Promise((n,e)=>{var t;try{const r=indexedDB.open("firebase-app-check-database",1);r.onsuccess=s=>{n(s.target.result)},r.onerror=s=>{var u;e(ai.create("storage-open",{originalErrorMessage:null===(u=s.target.error)||void 0===u?void 0:u.message}))},r.onupgradeneeded=s=>{0===s.oldVersion&&s.target.result.createObjectStore(qd,{keyPath:"compositeKey"})}}catch(r){e(ai.create("storage-open",{originalErrorMessage:null===(t=r)||void 0===t?void 0:t.message}))}}),$f)}function tv(){return(tv=(0,_e.Z)(function*(n,e){const r=(yield ev()).transaction(qd,"readwrite"),u=r.objectStore(qd).put({compositeKey:n,value:e});return new Promise((c,m)=>{u.onsuccess=v=>{c()},r.onerror=v=>{var b;m(ai.create("storage-set",{originalErrorMessage:null===(b=v.target.error)||void 0===b?void 0:b.message}))}})})).apply(this,arguments)}const Hf=new jo.Yd("@firebase/app-check");function oI(n,e){return(0,Dt.hl)()?function nI(n,e){return function rI(n,e){return tv.apply(this,arguments)}(function sI(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{Hf.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function aI(){return Ui().enabled}function uI(){return sv.apply(this,arguments)}function sv(){return(sv=(0,_e.Z)(function*(){const n=Ui();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const oT={error:"UNKNOWN_ERROR"};function lI(n){return Dt.US.encodeString(JSON.stringify(n),!1)}function Gf(n){return nm.apply(this,arguments)}function nm(){return(nm=(0,_e.Z)(function*(n,e=!1){const t=n.app;Y_(t);const r=gn(t);let u,s=r.token;if(!s){const v=yield r.cachedTokenPromise;v&&zf(v)&&(s=v)}if(!e&&s&&zf(s))return{token:s.token};let m,c=!1;if(aI()){r.exchangeTokenPromise||(r.exchangeTokenPromise=Q_(J_(t,yield uI()),n.heartbeatServiceProvider).then(b=>(r.exchangeTokenPromise=void 0,b)),c=!0);const v=yield r.exchangeTokenPromise;return yield oI(t,v),or(t,Object.assign(Object.assign({},r),{token:v})),{token:v.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().then(v=>(r.exchangeTokenPromise=void 0,v)),c=!0),s=yield r.exchangeTokenPromise}catch(v){"appCheck/throttled"===v.code?Hf.warn(v.message):Hf.error(v),u=v}return s?(m={token:s.token},or(t,Object.assign(Object.assign({},r),{token:s})),yield oI(t,s)):m=dI(u),c&&av(t,m),m})).apply(this,arguments)}function im(n,e){const t=gn(n),r=t.tokenObservers.filter(s=>s.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),or(n,Object.assign(Object.assign({},t),{tokenObservers:r}))}function ov(n){const{app:e}=n,t=gn(e);let r=t.tokenRefresher;r||(r=function cI(n){const{app:e}=n;return new Z_((0,_e.Z)(function*(){let r;if(r=gn(e).token?yield Gf(n,!0):yield Gf(n),r.error)throw r.error}),()=>!0,()=>{const t=gn(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),or(e,Object.assign(Object.assign({},t),{tokenRefresher:r}))),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function av(n,e){const t=gn(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch{}}function zf(n){return n.expireTimeMillis-Date.now()>0}function dI(n){return{token:lI(oT),error:n}}class hI{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=gn(this.app);for(const t of e)im(this.app,t.next);return Promise.resolve()}}const yI="app-check-internal";!function mT(){(0,js._registerComponent)(new Bf.wA("app-check",n=>function yc(n,e){return new hI(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(yI).initialize()})),(0,js._registerComponent)(new Bf.wA(yI,n=>function aT(n){return{getToken:e=>Gf(n,e),addTokenListener:e=>function rm(n,e,t,r){const{app:s}=n,u=gn(s),c={next:t,error:r,type:e};if(or(s,Object.assign(Object.assign({},u),{tokenObservers:[...u.tokenObservers,c]})),u.token&&zf(u.token)){const m=u.token;Promise.resolve().then(()=>{t({token:m.token}),ov(n)}).catch(()=>{})}u.cachedTokenPromise.then(()=>ov(n))}(n,"INTERNAL",e),removeTokenListener:e=>im(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,js.registerVersion)("@firebase/app-check","0.5.12")}();class om{constructor(){return(0,Dn.vb)("app-check")}}typeof window<"u"&&window;var hv=P(127);const II=new g.OlP("angularfire2.auth.use-emulator"),bI=new g.OlP("angularfire2.auth.settings"),bT=new g.OlP("angularfire2.auth.tenant-id"),DT=new g.OlP("angularfire2.auth.langugage-code"),CT=new g.OlP("angularfire2.auth.use-device-language"),TT=new g.OlP("angularfire.auth.persistence"),fv=(n,e,t,r,s,u,c,m)=>(0,Ei.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const v=e.runOutsideAngular(()=>n.auth());if(t&&v.useEmulator(...t),r&&(v.tenantId=r),v.languageCode=s,u&&v.useDeviceLanguage(),c)for(const[b,A]of Object.entries(c))v.settings[b]=A;return m&&v.setPersistence(m),v},[t,r,s,u,c,m]);let Zd=(()=>{class n{constructor(t,r,s,u,c,m,v,b,A,M,L,G){const Q=new Ra.x,be=it(void 0).pipe((0,zd.Q)(c.outsideAngular),Kn(()=>u.runOutsideAngular(()=>Promise.resolve().then(P.bind(P,2274)))),(0,ft.U)(()=>(0,Ei.on)(t,u,r)),(0,ft.U)(Te=>fv(Te,u,m,b,A,M,v,L)),G_({bufferSize:1,refCount:!1}));if(cr(s))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=it(null);else{be.pipe(Vo()).subscribe();const Ze=be.pipe(Kn(tt=>tt.getRedirectResult().then(bt=>bt,()=>null)),Dn.iC,G_({bufferSize:1,refCount:!1})),ut=be.pipe(Kn(tt=>new dr.y(bt=>({unsubscribe:u.runOutsideAngular(()=>tt.onAuthStateChanged(kt=>bt.next(kt),kt=>bt.error(kt),()=>bt.complete()))})))),lt=be.pipe(Kn(tt=>new dr.y(bt=>({unsubscribe:u.runOutsideAngular(()=>tt.onIdTokenChanged(kt=>bt.next(kt),kt=>bt.error(kt),()=>bt.complete()))}))));this.authState=Ze.pipe(z_(ut),(0,Qg.R)(c.outsideAngular),(0,zd.Q)(c.insideAngular)),this.user=Ze.pipe(z_(lt),(0,Qg.R)(c.outsideAngular),(0,zd.Q)(c.insideAngular)),this.idToken=this.user.pipe(Kn(tt=>tt?(0,zt.D)(tt.getIdToken()):it(null))),this.idTokenResult=this.user.pipe(Kn(tt=>tt?(0,zt.D)(tt.getIdTokenResult()):it(null))),this.credential=(0,GE.T)(Ze,Q,this.authState.pipe(Li(tt=>!tt))).pipe((0,ft.U)(tt=>tt?.user?tt:null),(0,Qg.R)(c.outsideAngular),(0,zd.Q)(c.insideAngular))}return(0,Ei.pX)(this,be,u,{spy:{apply:(Te,Ze,ut)=>{(Te.startsWith("signIn")||Te.startsWith("createUser"))&&ut.then(lt=>Q.next(lt))}}})}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(Ei.Dh),g.LFG(Ei.xv,8),g.LFG(g.Lbi),g.LFG(g.R0b),g.LFG(Dn.HU),g.LFG(II,8),g.LFG(bI,8),g.LFG(bT,8),g.LFG(DT,8),g.LFG(CT,8),g.LFG(TT,8),g.LFG(om,8))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),ST=(()=>{class n{constructor(){hv.Z.registerVersion("angularfire",Dn.q4.full,"auth-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({providers:[Zd]}),n})();var DI=P(4986);function lm(){return(0,Zr.e)((n,e)=>{let t,r=!1;n.subscribe((0,hr.x)(e,s=>{const u=t;t=s,r&&e.next([u,s]),r=!0}))})}function AT(n,e){return n===e}P(2274);var Xe,CI=P(3942),xT=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ja={},pv=pv||{},xt=xT||self;function $a(){}function gv(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function Yd(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var cm="closure_uid_"+(1e9*Math.random()>>>0),RT=0;function TI(n,e,t){return n.call.apply(n.bind,arguments)}function NT(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var s=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(s,r),n.apply(e,s)}}return function(){return n.apply(e,arguments)}}function wr(n,e,t){return(wr=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?TI:NT).apply(null,arguments)}function dm(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function Or(n,e){function t(){}t.prototype=e.prototype,n.Z=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Vb=function(r,s,u){for(var c=Array(arguments.length-2),m=2;m<arguments.length;m++)c[m-2]=arguments[m];return e.prototype[s].apply(r,c)}}function Ha(){this.s=this.s,this.o=this.o}var kT={};Ha.prototype.s=!1,Ha.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function MT(n){return Object.prototype.hasOwnProperty.call(n,cm)&&n[cm]||(n[cm]=++RT)}(this);delete kT[n]}},Ha.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const SI=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1},hm=Array.prototype.forEach?function(n,e,t){Array.prototype.forEach.call(n,e,t)}:function(n,e,t){const r=n.length,s="string"==typeof n?n.split(""):n;for(let u=0;u<r;u++)u in s&&e.call(t,s[u],u,n)};function mv(n){return Array.prototype.concat.apply([],arguments)}function yv(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function fm(n){return/^[\s\xa0]*$/.test(n)}var bi,AI=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function Ii(n,e){return-1!=n.indexOf(e)}function _v(n,e){return n<e?-1:n>e?1:0}e:{var xI=xt.navigator;if(xI){var MI=xI.userAgent;if(MI){bi=MI;break e}}bi=""}function pm(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function vv(n){const e={};for(const t in n)e[t]=n[t];return e}var RI="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function NI(n,e){let t,r;for(let s=1;s<arguments.length;s++){for(t in r=arguments[s],r)n[t]=r[t];for(let u=0;u<RI.length;u++)t=RI[u],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function gm(n){return gm[" "](n),n}gm[" "]=$a;var ym,n,LT=Ii(bi,"Opera"),Qd=Ii(bi,"Trident")||Ii(bi,"MSIE"),mm=Ii(bi,"Edge"),Yf=mm||Qd,wv=Ii(bi,"Gecko")&&!(Ii(bi.toLowerCase(),"webkit")&&!Ii(bi,"Edge"))&&!(Ii(bi,"Trident")||Ii(bi,"MSIE"))&&!Ii(bi,"Edge"),Ev=Ii(bi.toLowerCase(),"webkit")&&!Ii(bi,"Edge");function OI(){var n=xt.document;return n?n.documentMode:void 0}e:{var Qf="",Iv=(n=bi,wv?/rv:([^\);]+)(\)|;)/.exec(n):mm?/Edge\/([\d\.]+)/.exec(n):Qd?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):Ev?/WebKit\/(\S+)/.exec(n):LT?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(Iv&&(Qf=Iv?Iv[1]:""),Qd){var _m=OI();if(null!=_m&&_m>parseFloat(Qf)){ym=String(_m);break e}}ym=Qf}var Jd={};var PI=xt.document&&Qd&&(OI()||parseInt(ym,10))||void 0,Dv=function(){if(!xt.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{xt.addEventListener("test",$a,e),xt.removeEventListener("test",$a,e)}catch{}return n}();function ui(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}function vc(n,e){if(ui.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(wv){e:{try{gm(e.nodeName);var s=!0;break e}catch{}s=!1}s||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:UT[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&vc.Z.h.call(this)}}ui.prototype.h=function(){this.defaultPrevented=!0},Or(vc,ui);var UT={2:"touch",3:"pen",4:"mouse"};vc.prototype.h=function(){vc.Z.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Xd="closure_listenable_"+(1e6*Math.random()|0),Cv=0;function FI(n,e,t,r,s){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ia=s,this.key=++Cv,this.ca=this.fa=!1}function Jf(n){n.ca=!0,n.listener=null,n.proxy=null,n.src=null,n.ia=null}function Xf(n){this.src=n,this.g={},this.h=0}function vm(n,e){var t=e.type;if(t in n.g){var u,r=n.g[t],s=SI(r,e);(u=0<=s)&&Array.prototype.splice.call(r,s,1),u&&(Jf(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function Tv(n,e,t,r){for(var s=0;s<n.length;++s){var u=n[s];if(!u.ca&&u.listener==e&&u.capture==!!t&&u.ia==r)return s}return-1}Xf.prototype.add=function(n,e,t,r,s){var u=n.toString();(n=this.g[u])||(n=this.g[u]=[],this.h++);var c=Tv(n,e,r,s);return-1<c?(e=n[c],t||(e.fa=!1)):((e=new FI(e,this.src,u,!!r,s)).fa=t,n.push(e)),e};var Sv="closure_lm_"+(1e6*Math.random()|0),Av={};function LI(n,e,t,r,s){if(r&&r.once)return Mv(n,e,t,r,s);if(Array.isArray(e)){for(var u=0;u<e.length;u++)LI(n,e[u],t,r,s);return null}return t=kv(t),n&&n[Xd]?n.N(e,t,Yd(r)?!!r.capture:!!r,s):xv(n,e,t,!1,r,s)}function xv(n,e,t,r,s,u){if(!e)throw Error("Invalid event type");var c=Yd(s)?!!s.capture:!!s,m=Nv(n);if(m||(n[Sv]=m=new Xf(n)),(t=m.add(e,t,r,c,u)).proxy)return t;if(r=function gM(){var e=mM;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)Dv||(s=c),void 0===s&&(s=!1),n.addEventListener(e.toString(),r,s);else if(n.attachEvent)n.attachEvent(BT(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function Mv(n,e,t,r,s){if(Array.isArray(e)){for(var u=0;u<e.length;u++)Mv(n,e[u],t,r,s);return null}return t=kv(t),n&&n[Xd]?n.O(e,t,Yd(r)?!!r.capture:!!r,s):xv(n,e,t,!0,r,s)}function VI(n,e,t,r,s){if(Array.isArray(e))for(var u=0;u<e.length;u++)VI(n,e[u],t,r,s);else r=Yd(r)?!!r.capture:!!r,t=kv(t),n&&n[Xd]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=Tv(u=n.g[e],t,r,s))&&(Jf(u[t]),Array.prototype.splice.call(u,t,1),0==u.length&&(delete n.g[e],n.h--))):n&&(n=Nv(n))&&(e=n.g[e.toString()],n=-1,e&&(n=Tv(e,t,r,s)),(t=-1<n?e[n]:null)&&Rv(t))}function Rv(n){if("number"!=typeof n&&n&&!n.ca){var e=n.src;if(e&&e[Xd])vm(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(BT(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=Nv(e))?(vm(t,n),0==t.h&&(t.src=null,e[Sv]=null)):Jf(n)}}}function BT(n){return n in Av?Av[n]:Av[n]="on"+n}function mM(n,e){if(n.ca)n=!0;else{e=new vc(e,this);var t=n.listener,r=n.ia||n.src;n.fa&&Rv(n),n=t.call(r,e)}return n}function Nv(n){return(n=n[Sv])instanceof Xf?n:null}var Ov="__closure_events_fn_"+(1e9*Math.random()>>>0);function kv(n){return"function"==typeof n?n:(n[Ov]||(n[Ov]=function(e){return n.handleEvent(e)}),n[Ov])}function kr(){Ha.call(this),this.i=new Xf(this),this.P=this,this.I=null}function ei(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new ui(e,n);else if(e instanceof ui)e.target=e.target||n;else{var s=e;NI(e=new ui(r,n),s)}if(s=!0,t)for(var u=t.length-1;0<=u;u--){var c=e.g=t[u];s=wm(c,r,!0,e)&&s}if(s=wm(c=e.g=n,r,!0,e)&&s,s=wm(c,r,!1,e)&&s,t)for(u=0;u<t.length;u++)s=wm(c=e.g=t[u],r,!1,e)&&s}function wm(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var s=!0,u=0;u<e.length;++u){var c=e[u];if(c&&!c.ca&&c.capture==t){var m=c.listener,v=c.ia||c.src;c.fa&&vm(n.i,c),s=!1!==m.call(v,r)&&s}}return s&&!r.defaultPrevented}Or(kr,Ha),kr.prototype[Xd]=!0,kr.prototype.removeEventListener=function(n,e,t,r){VI(this,n,e,t,r)},kr.prototype.M=function(){if(kr.Z.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)Jf(t[r]);delete n.g[e],n.h--}}this.I=null},kr.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},kr.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var Pv=xt.JSON.stringify;function jT(){var n=Fv;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var Em,UI=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new HT,n=>n.reset());class HT{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function GT(n){xt.setTimeout(()=>{throw n},0)}function wc(n,e){Em||function BI(){var n=xt.Promise.resolve(void 0);Em=function(){n.then(jI)}}(),Im||(Em(),Im=!0),Fv.add(n,e)}var Im=!1,Fv=new class $T{constructor(){this.h=this.g=null}add(e,t){const r=UI.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function jI(){for(var n;n=jT();){try{n.h.call(n.g)}catch(t){GT(t)}var e=UI;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}Im=!1}function bm(n,e){kr.call(this),this.h=n||1,this.g=e||xt,this.j=wr(this.kb,this),this.l=Date.now()}function Lv(n){n.da=!1,n.S&&(n.g.clearTimeout(n.S),n.S=null)}function $I(n,e,t){if("function"==typeof n)t&&(n=wr(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=wr(n.handleEvent,n)}return 2147483647<Number(e)?-1:xt.setTimeout(n,e||0)}function HI(n){n.g=$I(()=>{n.g=null,n.i&&(n.i=!1,HI(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}Or(bm,kr),(Xe=bm.prototype).da=!1,Xe.S=null,Xe.kb=function(){if(this.da){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-n):(this.S&&(this.g.clearTimeout(this.S),this.S=null),ei(this,"tick"),this.da&&(Lv(this),this.start()))}},Xe.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Xe.M=function(){bm.Z.M.call(this),Lv(this),delete this.g};class zT extends Ha{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:HI(this)}M(){super.M(),this.g&&(xt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ep(n){Ha.call(this),this.h=n,this.g={}}Or(ep,Ha);var GI=[];function zI(n,e,t,r){Array.isArray(t)||(t&&(GI[0]=t.toString()),t=GI);for(var s=0;s<t.length;s++){var u=LI(e,t[s],r||n.handleEvent,!1,n.h||n);if(!u)break;n.g[u.key]=u}}function eh(n){pm(n.g,function(e,t){this.g.hasOwnProperty(t)&&Rv(e)},n),n.g={}}function Dm(){this.g=!0}function th(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function tp(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var s=r[1];if(Array.isArray(s)&&!(1>s.length)){var u=s[0];if("noop"!=u&&"stop"!=u&&"close"!=u)for(var c=1;c<s.length;c++)s[c]=""}}}return Pv(t)}catch{return e}}(n,t)+(r?" "+r:"")})}ep.prototype.M=function(){ep.Z.M.call(this),eh(this)},ep.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Dm.prototype.Aa=function(){this.g=!1},Dm.prototype.info=function(){};var Ec={},qI=null;function Cm(){return qI=qI||new kr}function np(n){ui.call(this,Ec.Ma,n)}function Hu(n){const e=Cm();ei(e,new np(e,n))}function WI(n,e){ui.call(this,Ec.STAT_EVENT,n),this.stat=e}function Di(n){const e=Cm();ei(e,new WI(e,n))}function Bv(n,e){ui.call(this,Ec.Na,n),this.size=e}function nh(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return xt.setTimeout(function(){n()},e)}Ec.Ma="serverreachability",Or(np,ui),Ec.STAT_EVENT="statevent",Or(WI,ui),Ec.Na="timingevent",Or(Bv,ui);var rh={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},jv={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function $v(){}function qT(){}$v.prototype.h=null;var ip,Ic={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function rp(){ui.call(this,"d")}function Tm(){ui.call(this,"c")}function ih(){}function sp(n,e,t,r){this.l=n,this.j=e,this.m=t,this.X=r||1,this.V=new ep(this),this.P=WT,this.W=new bm(n=Yf?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new ZI}function ZI(){this.i=null,this.g="",this.h=!1}Or(rp,ui),Or(Tm,ui),Or(ih,$v),ih.prototype.g=function(){return new XMLHttpRequest},ih.prototype.i=function(){return{}},ip=new ih;var WT=45e3,Hv={},op={};function ap(n,e,t){n.K=1,n.v=xm(hs(e)),n.s=t,n.U=!0,Gv(n,null)}function Gv(n,e){n.F=Date.now(),up(n),n.A=hs(n.v);var t=n.A,r=n.X;Array.isArray(r)||(r=[String(r)]),QT(t.h,"t",r),n.C=0,t=n.l.H,n.h=new ZI,n.g=cb(n.l,t?e:null,!n.s),0<n.O&&(n.L=new zT(wr(n.Ia,n,n.g),n.O)),zI(n.V,n.g,"readystatechange",n.gb),e=n.H?vv(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ea(n.A,n.u,n.s,e)):(n.u="GET",n.g.ea(n.A,n.u,null,e)),Hu(1),function Vv(n,e,t,r,s,u){n.info(function(){if(n.g)if(u)for(var c="",m=u.split("&"),v=0;v<m.length;v++){var b=m[v].split("=");if(1<b.length){var A=b[0];b=b[1];var M=A.split("_");c=2<=M.length&&"type"==M[1]?c+(A+"=")+b+"&":c+(A+"=redacted&")}}else c=null;else c=u;return"XMLHTTP REQ ("+r+") [attempt "+s+"]: "+e+"\n"+t+"\n"+c})}(n.j,n.u,n.A,n.m,n.X,n.s)}function YI(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Ba}function zv(n,e,t){let s,r=!0;for(;!n.I&&n.C<t.length;){if(s=QI(n,t),s==op){4==e&&(n.o=4,Di(14),r=!1),th(n.j,n.m,null,"[Incomplete Response]");break}if(s==Hv){n.o=4,Di(15),th(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}th(n.j,n.m,s,null),Wv(n,s)}YI(n)&&s!=op&&s!=Hv&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,Di(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.aa&&(n.aa=!0,(e=n.l).g==n&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+t.length),uw(e),e.L=!0,Di(11))):(th(n.j,n.m,t,"[Invalid Chunked Response]"),Gu(n),cp(n))}function QI(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?op:(t=Number(e.substring(t,r)),isNaN(t)?Hv:(r+=1)+t>e.length?op:(e=e.substr(r,t),n.C=r+t,e))}function up(n){n.Y=Date.now()+n.P,qv(n,n.P)}function qv(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=nh(wr(n.eb,n),e)}function lp(n){n.B&&(xt.clearTimeout(n.B),n.B=null)}function cp(n){0==n.l.G||n.I||lb(n.l,n)}function Gu(n){lp(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,Lv(n.W),eh(n.V),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function Wv(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||ew(t.i,n)))if(t.I=n.N,!n.J&&ew(t.i,n)&&3==t.G){try{var r=t.Ca.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var s=r;if(0==s[0]){e:if(!t.u){if(t.g){if(!(t.g.F+3e3<n.F))break e;lw(t),sw(t)}aw(t),Di(18)}}else t.ta=s[1],0<t.ta-t.U&&37500>s[2]&&t.N&&0==t.A&&!t.v&&(t.v=nh(wr(t.ab,t),6e3));if(1>=Xv(t.i)&&t.ka){try{t.ka()}catch{}t.ka=void 0}}else Ku(t,11)}else if((n.J||t.g==n)&&lw(t),!fm(e))for(s=t.Ca.g.parse(e),e=0;e<s.length;e++){let b=s[e];if(t.U=b[0],b=b[1],2==t.G)if("c"==b[0]){t.J=b[1],t.la=b[2];const A=b[3];null!=A&&(t.ma=A,t.h.info("VER="+t.ma));const M=b[4];null!=M&&(t.za=M,t.h.info("SVER="+t.za));const L=b[5];null!=L&&"number"==typeof L&&0<L&&(t.K=r=1.5*L,t.h.info("backChannelRequestTimeoutMs_="+r)),r=t;const G=n.g;if(G){const Q=G.g?G.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Q){var u=r.i;!u.g&&(Ii(Q,"spdy")||Ii(Q,"quic")||Ii(Q,"h2"))&&(u.j=u.l,u.g=new Set,u.h&&(Om(u,u.h),u.h=null))}if(r.D){const be=G.g?G.g.getResponseHeader("X-HTTP-Session-Id"):null;be&&(r.sa=be,xn(r.F,r.D,be))}}t.G=3,t.j&&t.j.xa(),t.$&&(t.O=Date.now()-n.F,t.h.info("Handshake RTT: "+t.O+"ms"));var c=n;if((r=t).oa=$s(r,r.H?r.la:null,r.W),c.J){tw(r.i,c);var m=c,v=r.K;v&&m.setTimeout(v),m.B&&(lp(m),up(m)),r.g=c}else oS(r);0<t.l.length&&Fm(t)}else"stop"!=b[0]&&"close"!=b[0]||Ku(t,7);else 3==t.G&&("stop"==b[0]||"close"==b[0]?"stop"==b[0]?Ku(t,7):Pm(t):"noop"!=b[0]&&t.j&&t.j.wa(b),t.A=0)}Hu(4)}catch{}}function zu(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(gv(n)||"string"==typeof n)hm(n,e,void 0);else{if(n.T&&"function"==typeof n.T)var t=n.T();else if(n.R&&"function"==typeof n.R)t=void 0;else if(gv(n)||"string"==typeof n){t=[];for(var r=n.length,s=0;s<r;s++)t.push(s)}else for(s in t=[],r=0,n)t[r++]=s;r=function Ci(n){if(n.R&&"function"==typeof n.R)return n.R();if("string"==typeof n)return n.split("");if(gv(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),s=r.length;for(var u=0;u<s;u++)e.call(void 0,r[u],t&&t[u],n)}}function sh(n,e){this.h={},this.g=[],this.i=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var r=0;r<t;r+=2)this.set(arguments[r],arguments[r+1])}else if(n)if(n instanceof sh)for(t=n.T(),r=0;r<t.length;r++)this.set(t[r],n.get(t[r]));else for(r in n)this.set(r,n[r])}function Kv(n){if(n.i!=n.g.length){for(var e=0,t=0;e<n.g.length;){var r=n.g[e];oh(n.h,r)&&(n.g[t++]=r),e++}n.g.length=t}if(n.i!=n.g.length){var s={};for(t=e=0;e<n.g.length;)oh(s,r=n.g[e])||(n.g[t++]=r,s[r]=1),e++;n.g.length=t}}function oh(n,e){return Object.prototype.hasOwnProperty.call(n,e)}(Xe=sp.prototype).setTimeout=function(n){this.P=n},Xe.gb=function(n){n=n.target;const e=this.L;e&&3==Go(n)?e.l():this.Ia(n)},Xe.Ia=function(n){try{if(n==this.g)e:{const A=Go(this.g);var e=this.g.Da();const M=this.g.ba();if(!(3>A)&&(3!=A||Yf||this.g&&(this.h.h||this.g.ga()||iw(this.g)))){this.I||4!=A||7==e||Hu(8==e||0>=M?3:2),lp(this);var t=this.g.ba();this.N=t;t:if(YI(this)){var r=iw(this.g);n="";var s=r.length,u=4==Go(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Gu(this),cp(this);var c="";break t}this.h.i=new xt.TextDecoder}for(e=0;e<s;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:u&&e==s-1});r.splice(0,s),this.h.g+=n,this.C=0,c=this.h.g}else c=this.g.ga();if(this.i=200==t,function $o(n,e,t,r,s,u,c){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+s+"]: "+e+"\n"+t+"\n"+u+" "+c})}(this.j,this.u,this.A,this.m,this.X,A,t),this.i){if(this.$&&!this.J){t:{if(this.g){var m,v=this.g;if((m=v.g?v.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!fm(m)){var b=m;break t}}b=null}if(!(t=b)){this.i=!1,this.o=3,Di(12),Gu(this),cp(this);break e}th(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Wv(this,t)}this.U?(zv(this,A,c),Yf&&this.i&&3==A&&(zI(this.V,this.W,"tick",this.fb),this.W.start())):(th(this.j,this.m,c,null),Wv(this,c)),4==A&&Gu(this),this.i&&!this.I&&(4==A?lb(this.l,this):(this.i=!1,up(this)))}else 400==t&&0<c.indexOf("Unknown SID")?(this.o=3,Di(12)):(this.o=0,Di(13)),Gu(this),cp(this)}}}catch{}},Xe.fb=function(){if(this.g){var n=Go(this.g),e=this.g.ga();this.C<e.length&&(lp(this),zv(this,n,e),this.i&&4!=n&&up(this))}},Xe.cancel=function(){this.I=!0,Gu(this)},Xe.eb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function Uv(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(Hu(3),Di(17)),Gu(this),this.o=2,cp(this)):qv(this,this.Y-n)},(Xe=sh.prototype).R=function(){Kv(this);for(var n=[],e=0;e<this.g.length;e++)n.push(this.h[this.g[e]]);return n},Xe.T=function(){return Kv(this),this.g.concat()},Xe.get=function(n,e){return oh(this.h,n)?this.h[n]:e},Xe.set=function(n,e){oh(this.h,n)||(this.i++,this.g.push(n)),this.h[n]=e},Xe.forEach=function(n,e){for(var t=this.T(),r=0;r<t.length;r++){var s=t[r],u=this.get(s);n.call(e,u,s,this)}};var KT=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function qu(n,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,n instanceof qu){this.g=void 0!==e?e:n.g,Sm(this,n.j),this.s=n.s,ah(this,n.i),Am(this,n.m),this.l=n.l,e=n.h;var t=new Ho;t.i=e.i,e.g&&(t.g=new sh(e.g),t.h=e.h),Zv(this,t),this.o=n.o}else n&&(t=String(n).match(KT))?(this.g=!!e,Sm(this,t[1]||"",!0),this.s=uh(t[2]||""),ah(this,t[3]||"",!0),Am(this,t[4]),this.l=uh(t[5]||"",!0),Zv(this,t[6]||"",!0),this.o=uh(t[7]||"")):(this.g=!!e,this.h=new Ho(null,this.g))}function hs(n){return new qu(n)}function Sm(n,e,t){n.j=t?uh(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function ah(n,e,t){n.i=t?uh(e,!0):e}function Am(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function Zv(n,e,t){e instanceof Ho?(n.h=e,function _M(n,e){e&&!n.j&&(Wu(n),n.i=null,n.g.forEach(function(t,r){var s=r.toLowerCase();r!=s&&(Qv(this,r),QT(this,s,t))},n)),n.j=e}(n.h,n.g)):(t||(e=lh(e,YT)),n.h=new Ho(e,n.g))}function xn(n,e,t){n.h.set(e,t)}function xm(n){return xn(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function uh(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function lh(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,Mm),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function Mm(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}qu.prototype.toString=function(){var n=[],e=this.j;e&&n.push(lh(e,Rm,!0),":");var t=this.i;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(lh(e,Rm,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.i&&"/"!=t.charAt(0)&&n.push("/"),n.push(lh(t,"/"==t.charAt(0)?XI:yM,!0))),(t=this.h.toString())&&n.push("?",t),(t=this.o)&&n.push("#",lh(t,eb)),n.join("")};var Rm=/[#\/\?@]/g,yM=/[#\?:]/g,XI=/[#\?]/g,YT=/[#\?@]/g,eb=/#/g;function Ho(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function Wu(n){n.g||(n.g=new sh,n.h=0,n.i&&function JI(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),s=null;if(0<=r){var u=n[t].substring(0,r);s=n[t].substring(r+1)}else u=n[t];e(u,s?decodeURIComponent(s.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function Qv(n,e){Wu(n),e=ch(n,e),oh(n.g.h,e)&&(n.i=null,n.h-=n.g.get(e).length,oh((n=n.g).h,e)&&(delete n.h[e],n.i--,n.g.length>2*n.i&&Kv(n)))}function Nm(n,e){return Wu(n),e=ch(n,e),oh(n.g.h,e)}function QT(n,e,t){Qv(n,e),0<t.length&&(n.i=null,n.g.set(ch(n,e),yv(t)),n.h+=t.length)}function ch(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function tb(n){this.l=n||XT,n=xt.PerformanceNavigationTiming?0<(n=xt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(xt.g&&xt.g.Ea&&xt.g.Ea()&&xt.g.Ea().Zb),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(Xe=Ho.prototype).add=function(n,e){Wu(this),this.i=null,n=ch(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},Xe.forEach=function(n,e){Wu(this),this.g.forEach(function(t,r){hm(t,function(s){n.call(e,s,r,this)},this)},this)},Xe.T=function(){Wu(this);for(var n=this.g.R(),e=this.g.T(),t=[],r=0;r<e.length;r++)for(var s=n[r],u=0;u<s.length;u++)t.push(e[r]);return t},Xe.R=function(n){Wu(this);var e=[];if("string"==typeof n)Nm(this,n)&&(e=mv(e,this.g.get(ch(this,n))));else{n=this.g.R();for(var t=0;t<n.length;t++)e=mv(e,n[t])}return e},Xe.set=function(n,e){return Wu(this),this.i=null,Nm(this,n=ch(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},Xe.get=function(n,e){return n&&0<(n=this.R(n)).length?String(n[0]):e},Xe.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var n=[],e=this.g.T(),t=0;t<e.length;t++){var r=e[t],s=encodeURIComponent(String(r));r=this.R(r);for(var u=0;u<r.length;u++){var c=s;""!==r[u]&&(c+="="+encodeURIComponent(String(r[u]))),n.push(c)}}return this.i=n.join("&")};var XT=10;function Jv(n){return!!n.h||!!n.g&&n.g.size>=n.j}function Xv(n){return n.h?1:n.g?n.g.size:0}function ew(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function Om(n,e){n.g?n.g.add(e):n.h=e}function tw(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function nb(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return yv(n.i)}function nw(){}function rb(){this.g=new nw}function eS(n,e,t){const r=t||"";try{zu(n,function(s,u){let c=s;Yd(s)&&(c=Pv(s)),e.push(r+u+"="+encodeURIComponent(c))})}catch(s){throw e.push(r+"type="+encodeURIComponent("_badmap")),s}}function dp(n,e,t,r,s){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,s(r)}catch{}}function dh(n){this.l=n.$b||null,this.j=n.ib||!1}function hp(n,e){kr.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=rw,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}tb.prototype.cancel=function(){if(this.i=nb(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},nw.prototype.stringify=function(n){return xt.JSON.stringify(n,void 0)},nw.prototype.parse=function(n){return xt.JSON.parse(n,void 0)},Or(dh,$v),dh.prototype.g=function(){return new hp(this.l,this.j)},dh.prototype.i=function(n){return function(){return n}}({}),Or(hp,kr);var rw=0;function sb(n){n.j.read().then(n.Sa.bind(n)).catch(n.ha.bind(n))}function km(n){n.readyState=4,n.l=null,n.j=null,n.A=null,hh(n)}function hh(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(Xe=hp.prototype).open=function(n,e){if(this.readyState!=rw)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,hh(this)},Xe.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||xt).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},Xe.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,km(this)),this.readyState=rw},Xe.Va=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,hh(this)),this.g&&(this.readyState=3,hh(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(typeof xt.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;sb(this)}else n.text().then(this.Ua.bind(this),this.ha.bind(this))},Xe.Sa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?km(this):hh(this),3==this.readyState&&sb(this)}},Xe.Ua=function(n){this.g&&(this.response=this.responseText=n,km(this))},Xe.Ta=function(n){this.g&&(this.response=n,km(this))},Xe.ha=function(){this.g&&km(this)},Xe.setRequestHeader=function(n,e){this.v.append(n,e)},Xe.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},Xe.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(hp.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var vM=xt.JSON.parse;function Er(n){kr.call(this),this.headers=new sh,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=tS,this.K=this.L=!1}Or(Er,kr);var tS="",wM=/^https?$/i,EM=["POST","PUT"];function bM(n){return"content-type"==n.toLowerCase()}function nS(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,fp(n),pp(n)}function fp(n){n.D||(n.D=!0,ei(n,"complete"),ei(n,"error"))}function rS(n){if(n.h&&typeof pv<"u"&&(!n.C[1]||4!=Go(n)||2!=n.ba()))if(n.v&&4==Go(n))$I(n.Fa,0,n);else if(ei(n,"readystatechange"),4==Go(n)){n.h=!1;try{const m=n.ba();e:switch(m){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===m){var s=String(n.H).match(KT)[1]||null;if(!s&&xt.self&&xt.self.location){var u=xt.self.location.protocol;s=u.substr(0,u.length-1)}r=!wM.test(s?s.toLowerCase():"")}t=r}if(t)ei(n,"complete"),ei(n,"success");else{n.m=6;try{var c=2<Go(n)?n.g.statusText:""}catch{c=""}n.j=c+" ["+n.ba()+"]",fp(n)}}finally{pp(n)}}}function pp(n,e){if(n.g){gp(n);const t=n.g,r=n.C[0]?$a:null;n.g=null,n.C=null,e||ei(n,"ready");try{t.onreadystatechange=r}catch{}}}function gp(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(xt.clearTimeout(n.A),n.A=null)}function Go(n){return n.g?n.g.readyState:0}function iw(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case tS:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function mp(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=function DM(n){let e="";return pm(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):xn(n,e,t))}function fh(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function ob(n){this.za=0,this.l=[],this.h=new Dm,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=fh("failFast",!1,n),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=fh("baseRetryDelayMs",5e3,n),this.$a=fh("retryDelaySeedMs",1e4,n),this.Ya=fh("forwardChannelMaxRetries",2,n),this.ra=fh("forwardChannelRequestTimeoutMs",2e4,n),this.qa=n&&n.xmlHttpFactory||void 0,this.Ba=n&&n.Yb||!1,this.K=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.J="",this.i=new tb(n&&n.concurrentRequestLimit),this.Ca=new rb,this.ja=n&&n.fastHandshake||!1,this.Ra=n&&n.Wb||!1,n&&n.Aa&&this.h.Aa(),n&&n.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&n&&n.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!n||!1!==n.Xb}function Pm(n){if(iS(n),3==n.G){var e=n.V++,t=hs(n.F);xn(t,"SID",n.J),xn(t,"RID",e),xn(t,"TYPE","terminate"),Vm(n,t),(e=new sp(n,n.h,e,void 0)).K=2,e.v=xm(hs(t)),t=!1,xt.navigator&&xt.navigator.sendBeacon&&(t=xt.navigator.sendBeacon(e.v.toString(),"")),!t&&xt.Image&&((new Image).src=e.v,t=!0),t||(e.g=cb(e.l,null),e.g.ea(e.v)),e.F=Date.now(),up(e)}aS(n)}function sw(n){n.g&&(uw(n),n.g.cancel(),n.g=null)}function iS(n){sw(n),n.u&&(xt.clearTimeout(n.u),n.u=null),lw(n),n.i.cancel(),n.m&&("number"==typeof n.m&&xt.clearTimeout(n.m),n.m=null)}function ow(n,e){n.l.push(new class{constructor(n,e){this.h=n,this.g=e}}(n.Za++,e)),3==n.G&&Fm(n)}function Fm(n){Jv(n.i)||n.m||(n.m=!0,wc(n.Ha,n),n.C=0)}function ab(n,e){var t;t=e?e.m:n.V++;const r=hs(n.F);xn(r,"SID",n.J),xn(r,"RID",t),xn(r,"AID",n.U),Vm(n,r),n.o&&n.s&&mp(r,n.o,n.s),t=new sp(n,n.h,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.l=e.D.concat(n.l)),e=sS(n,t,1e3),t.setTimeout(Math.round(.5*n.ra)+Math.round(.5*n.ra*Math.random())),Om(n.i,t),ap(t,r,e)}function Vm(n,e){n.j&&zu({},function(t,r){xn(e,r,t)})}function sS(n,e,t){t=Math.min(n.l.length,t);var r=n.j?wr(n.j.Oa,n.j,n):null;e:{var s=n.l;let u=-1;for(;;){const c=["count="+t];-1==u?0<t?(u=s[0].h,c.push("ofs="+u)):u=0:c.push("ofs="+u);let m=!0;for(let v=0;v<t;v++){let b=s[v].h;const A=s[v].g;if(b-=u,0>b)u=Math.max(0,s[v].h-100),m=!1;else try{eS(A,c,"req"+b+"_")}catch{r&&r(A)}}if(m){r=c.join("&");break e}}}return n=n.l.splice(0,t),e.D=n,r}function oS(n){n.g||n.u||(n.Y=1,wc(n.Ga,n),n.A=0)}function aw(n){return!(n.g||n.u||3<=n.A||(n.Y++,n.u=nh(wr(n.Ga,n),cw(n,n.A)),n.A++,0))}function uw(n){null!=n.B&&(xt.clearTimeout(n.B),n.B=null)}function ub(n){n.g=new sp(n,n.h,"rpc",n.Y),null===n.o&&(n.g.H=n.s),n.g.O=0;var e=hs(n.oa);xn(e,"RID","rpc"),xn(e,"SID",n.J),xn(e,"CI",n.N?"0":"1"),xn(e,"AID",n.U),Vm(n,e),xn(e,"TYPE","xmlhttp"),n.o&&n.s&&mp(e,n.o,n.s),n.K&&n.g.setTimeout(n.K);var t=n.g;n=n.la,t.K=1,t.v=xm(hs(e)),t.s=null,t.U=!0,Gv(t,n)}function lw(n){null!=n.v&&(xt.clearTimeout(n.v),n.v=null)}function lb(n,e){var t=null;if(n.g==e){lw(n),uw(n),n.g=null;var r=2}else{if(!ew(n.i,e))return;t=e.D,tw(n.i,e),r=1}if(n.I=e.N,0!=n.G)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var s=n.C;ei(r=Cm(),new Bv(r,t,e,s)),Fm(n)}else oS(n);else if(3==(s=e.o)||0==s&&0<n.I||!(1==r&&function Lm(n,e){return!(Xv(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.l=e.D.concat(n.l),0):1==n.G||2==n.G||n.C>=(n.Xa?0:n.Ya)||(n.m=nh(wr(n.Ha,n,e),cw(n,n.C)),n.C++,0)))}(n,e)||2==r&&aw(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),s){case 1:Ku(n,5);break;case 4:Ku(n,10);break;case 3:Ku(n,6);break;default:Ku(n,2)}}function cw(n,e){let t=n.Pa+Math.floor(Math.random()*n.$a);return n.j||(t*=2),t*e}function Ku(n,e){if(n.h.info("Error code "+e),2==e){var t=null;n.j&&(t=null);var r=wr(n.jb,n);t||(t=new qu("//www.google.com/images/cleardot.gif"),xt.location&&"http"==xt.location.protocol||Sm(t,"https"),xm(t)),function ib(n,e){const t=new Dm;if(xt.Image){const r=new Image;r.onload=dm(dp,t,r,"TestLoadImage: loaded",!0,e),r.onerror=dm(dp,t,r,"TestLoadImage: error",!1,e),r.onabort=dm(dp,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=dm(dp,t,r,"TestLoadImage: timeout",!1,e),xt.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else Di(2);n.G=0,n.j&&n.j.va(e),aS(n),iS(n)}function aS(n){n.G=0,n.I=-1,n.j&&((0!=nb(n.i).length||0!=n.l.length)&&(n.i.i.length=0,yv(n.l),n.l.length=0),n.j.ua())}function $s(n,e,t){let r=function ZT(n){return n instanceof qu?hs(n):new qu(n,void 0)}(t);if(""!=r.i)e&&ah(r,e+"."+r.i),Am(r,r.m);else{const s=xt.location;r=function Yv(n,e,t,r){var s=new qu(null,void 0);return n&&Sm(s,n),e&&ah(s,e),t&&Am(s,t),r&&(s.l=r),s}(s.protocol,e?e+"."+s.hostname:s.hostname,+s.port,t)}return n.aa&&pm(n.aa,function(s,u){xn(r,u,s)}),t=n.sa,(e=n.D)&&t&&xn(r,e,t),xn(r,"VER",n.ma),Vm(n,r),r}function cb(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Er(t&&n.Ba&&!n.qa?new dh({ib:!0}):n.qa)).L=n.H,e}function Um(){}function Bm(){if(Qd&&!(10<=Number(PI)))throw Error("Environmental error: no available transport.")}function Mn(n,e){kr.call(this),this.g=new ob(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.P=n,(n=e&&e.httpHeadersOverwriteParam)&&!fm(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!fm(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new ph(this)}function db(n){rp.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function jm(){Tm.call(this),this.status=1}function ph(n){this.g=n}(Xe=Er.prototype).ea=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():ip.g(),this.C=function KI(n){return n.h||(n.h=n.i())}(this.u?this.u:ip),this.g.onreadystatechange=wr(this.Fa,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(u){return void nS(this,u)}n=t||"";const s=new sh(this.headers);r&&zu(r,function(u,c){s.set(c,u)}),r=function PT(n){e:{var e=bM;const t=n.length,r="string"==typeof n?n.split(""):n;for(let s=0;s<t;s++)if(s in r&&e.call(void 0,r[s],s,n)){e=s;break e}e=-1}return 0>e?null:"string"==typeof n?n.charAt(e):n[e]}(s.T()),t=xt.FormData&&n instanceof xt.FormData,!(0<=SI(EM,e))||r||t||s.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),s.forEach(function(u,c){this.g.setRequestHeader(c,u)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{gp(this),0<this.B&&((this.K=function IM(n){return Qd&&function kI(){return function FT(n){var e=Jd;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=AI(String(ym)).split("."),t=AI("9").split("."),r=Math.max(e.length,t.length);for(let c=0;0==n&&c<r;c++){var s=e[c]||"",u=t[c]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],u=/(\d*)(\D*)(.*)/.exec(u)||["","","",""],0==s[0].length&&0==u[0].length)break;n=_v(0==s[1].length?0:parseInt(s[1],10),0==u[1].length?0:parseInt(u[1],10))||_v(0==s[2].length,0==u[2].length)||_v(s[2],u[2]),s=s[3],u=u[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=wr(this.pa,this)):this.A=$I(this.pa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(u){nS(this,u)}},Xe.pa=function(){typeof pv<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,ei(this,"timeout"),this.abort(8))},Xe.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,ei(this,"complete"),ei(this,"abort"),pp(this))},Xe.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),pp(this,!0)),Er.Z.M.call(this)},Xe.Fa=function(){this.s||(this.F||this.v||this.l?rS(this):this.cb())},Xe.cb=function(){rS(this)},Xe.ba=function(){try{return 2<Go(this)?this.g.status:-1}catch{return-1}},Xe.ga=function(){try{return this.g?this.g.responseText:""}catch{return""}},Xe.Qa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),vM(e)}},Xe.Da=function(){return this.m},Xe.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(Xe=ob.prototype).ma=8,Xe.G=1,Xe.hb=function(n){try{this.h.info("Origin Trials invoked: "+n)}catch{}},Xe.Ha=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.V=Math.floor(1e5*Math.random()),n=this.V++;const s=new sp(this,this.h,n,void 0);let u=this.s;if(this.P&&(u?(u=vv(u),NI(u,this.P)):u=this.P),null===this.o&&(s.H=u),this.ja)e:{for(var e=0,t=0;t<this.l.length;t++){var r=this.l[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.l.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=sS(this,s,e),xn(t=hs(this.F),"RID",n),xn(t,"CVER",22),this.D&&xn(t,"X-HTTP-Session-Id",this.D),Vm(this,t),this.o&&u&&mp(t,this.o,u),Om(this.i,s),this.Ra&&xn(t,"TYPE","init"),this.ja?(xn(t,"$req",e),xn(t,"SID","null"),s.$=!0,ap(s,t,null)):ap(s,t,e),this.G=2}}else 3==this.G&&(n?ab(this,n):0==this.l.length||Jv(this.i)||ab(this))},Xe.Ga=function(){if(this.u=null,ub(this),this.$&&!(this.L||null==this.g||0>=this.O)){var n=2*this.O;this.h.info("BP detection timer enabled: "+n),this.B=nh(wr(this.bb,this),n)}},Xe.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,Di(10),sw(this),ub(this))},Xe.ab=function(){null!=this.v&&(this.v=null,sw(this),aw(this),Di(19))},Xe.jb=function(n){n?(this.h.info("Successfully pinged google.com"),Di(2)):(this.h.info("Failed to ping google.com"),Di(1))},(Xe=Um.prototype).xa=function(){},Xe.wa=function(){},Xe.va=function(){},Xe.ua=function(){},Xe.Oa=function(){},Bm.prototype.g=function(n,e){return new Mn(n,e)},Or(Mn,kr),Mn.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;n.Wa&&(n.h.info("Origin Trials enabled."),wc(wr(n.hb,n,e))),Di(0),n.W=e,n.aa=t||{},n.N=n.X,n.F=$s(n,null,n.W),Fm(n)},Mn.prototype.close=function(){Pm(this.g)},Mn.prototype.u=function(n){if("string"==typeof n){var e={};e.__data__=n,ow(this.g,e)}else this.v?((e={}).__data__=Pv(n),ow(this.g,e)):ow(this.g,n)},Mn.prototype.M=function(){this.g.j=null,delete this.j,Pm(this.g),delete this.g,Mn.Z.M.call(this)},Or(db,rp),Or(jm,Tm),Or(ph,Um),ph.prototype.xa=function(){ei(this.g,"a")},ph.prototype.wa=function(n){ei(this.g,new db(n))},ph.prototype.va=function(n){ei(this.g,new jm(n))},ph.prototype.ua=function(){ei(this.g,"b")},Bm.prototype.createWebChannel=Bm.prototype.g,Mn.prototype.send=Mn.prototype.u,Mn.prototype.open=Mn.prototype.m,Mn.prototype.close=Mn.prototype.close,rh.NO_ERROR=0,rh.TIMEOUT=8,rh.HTTP_ERROR=6,jv.COMPLETE="complete",qT.EventType=Ic,Ic.OPEN="a",Ic.CLOSE="b",Ic.ERROR="c",Ic.MESSAGE="d",kr.prototype.listen=kr.prototype.N,Er.prototype.listenOnce=Er.prototype.O,Er.prototype.getLastError=Er.prototype.La,Er.prototype.getLastErrorCode=Er.prototype.Da,Er.prototype.getStatus=Er.prototype.ba,Er.prototype.getResponseJson=Er.prototype.Qa,Er.prototype.getResponseText=Er.prototype.ga,Er.prototype.send=Er.prototype.ea;var uS=ja.createWebChannelTransport=function(){return new Bm},dw=ja.getStatEventTarget=function(){return Cm()},$m=ja.ErrorCode=rh,hb=ja.EventType=jv,lS=ja.Event=Ec,hw=ja.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},fb=ja.FetchXmlHttpFactory=dh,Hm=ja.WebChannel=qT,pb=ja.XhrIo=Er;const gb="@firebase/firestore";class fr{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}fr.UNAUTHENTICATED=new fr(null),fr.GOOGLE_CREDENTIALS=new fr("google-credentials-uid"),fr.FIRST_PARTY=new fr("first-party-uid"),fr.MOCK_USER=new fr("mock-user");let fs="9.9.4";const Ga=new jo.Yd("@firebase/firestore");function yp(){return Ga.logLevel}function ke(n,...e){if(Ga.logLevel<=jo.in.DEBUG){const t=e.map(fw);Ga.debug(`Firestore (${fs}): ${n}`,...t)}}function pr(n,...e){if(Ga.logLevel<=jo.in.ERROR){const t=e.map(fw);Ga.error(`Firestore (${fs}): ${n}`,...t)}}function bc(n,...e){if(Ga.logLevel<=jo.in.WARN){const t=e.map(fw);Ga.warn(`Firestore (${fs}): ${n}`,...t)}}function fw(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function et(n="Unexpected state"){const e=`FIRESTORE (${fs}) INTERNAL ASSERTION FAILED: `+n;throw pr(e),new Error(e)}function Tt(n,e){n||et()}function We(n,e){return n}const ce={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Re extends Dt.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Ir{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class cS{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class pw{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(fr.UNAUTHENTICATED))}shutdown(){}}class yb{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class _b{constructor(e){this.t=e,this.currentUser=fr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let s=this.i;const u=b=>this.i!==s?(s=this.i,t(b)):Promise.resolve();let c=new Ir;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new Ir,e.enqueueRetryable(()=>u(this.currentUser))};const m=()=>{const b=c;e.enqueueRetryable((0,_e.Z)(function*(){yield b.promise,yield u(r.currentUser)}))},v=b=>{ke("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=b,this.auth.addAuthTokenListener(this.o),m()};this.t.onInit(b=>v(b)),setTimeout(()=>{if(!this.auth){const b=this.t.getImmediate({optional:!0});b?v(b):(ke("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new Ir)}},0),m()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(ke("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Tt("string"==typeof r.accessToken),new cS(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Tt(null===e||"string"==typeof e),new fr(e)}}class vb{constructor(e,t,r,s){this.h=e,this.l=t,this.m=r,this.g=s,this.type="FirstParty",this.user=fr.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(Tt(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class wb{constructor(e,t,r,s){this.h=e,this.l=t,this.m=r,this.g=s}getToken(){return Promise.resolve(new vb(this.h,this.l,this.m,this.g))}start(e,t){e.enqueueRetryable(()=>t(fr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class gw{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Gm{constructor(e){this.T=e,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(e,t){const r=u=>{null!=u.error&&ke("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const c=u.token!==this.A;return this.A=u.token,ke("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable(()=>r(u))};const s=u=>{ke("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.appCheck.addTokenListener(this.o)};this.T.onInit(u=>s(u)),setTimeout(()=>{if(!this.appCheck){const u=this.T.getImmediate({optional:!0});u?s(u):ke("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Tt("string"==typeof t.token),this.A=t.token,new gw(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function Eb(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class Ib{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=Eb(40);for(let u=0;u<s.length;++u)r.length<20&&s[u]<t&&(r+=e.charAt(s[u]%e.length))}return r}}function At(n,e){return n<e?-1:n>e?1:0}function Dc(n,e,t){return n.length===e.length&&n.every((r,s)=>t(r,e[s]))}function bb(n){return n+"\0"}class Rn{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Re(ce.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Re(ce.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Re(ce.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Re(ce.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Rn.fromMillis(Date.now())}static fromDate(e){return Rn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Rn(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?At(this.nanoseconds,e.nanoseconds):At(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Ct{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Ct(e)}static min(){return new Ct(new Rn(0,0))}static max(){return new Ct(new Rn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class zm{constructor(e,t,r){void 0===t?t=0:t>e.length&&et(),void 0===r?r=e.length-t:r>e.length-t&&et(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===zm.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof zm?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let s=0;s<r;s++){const u=e.get(s),c=t.get(s);if(u<c)return-1;if(u>c)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class qt extends zm{construct(e,t,r){return new qt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Re(ce.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(s=>s.length>0))}return new qt(t)}static emptyPath(){return new qt([])}}const dS=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Zn extends zm{construct(e,t,r){return new Zn(e,t,r)}static isValidIdentifier(e){return dS.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Zn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Zn(["__name__"])}static fromServerFormat(e){const t=[];let r="",s=0;const u=()=>{if(0===r.length)throw new Re(ce.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let c=!1;for(;s<e.length;){const m=e[s];if("\\"===m){if(s+1===e.length)throw new Re(ce.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const v=e[s+1];if("\\"!==v&&"."!==v&&"`"!==v)throw new Re(ce.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=v,s+=2}else"`"===m?(c=!c,s++):"."!==m||c?(r+=m,s++):(u(),s++)}if(u(),c)throw new Re(ce.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Zn(t)}static emptyPath(){return new Zn([])}}class Ge{constructor(e){this.path=e}static fromPath(e){return new Ge(qt.fromString(e))}static fromName(e){return new Ge(qt.fromString(e).popFirst(5))}static empty(){return new Ge(qt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===qt.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return qt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ge(new qt(e.slice()))}}class yw{constructor(e,t,r,s){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=s}}function Db(n){return n.fields.find(e=>2===e.kind)}function gh(n){return n.fields.filter(e=>2!==e.kind)}yw.UNKNOWN_ID=-1;class _w{constructor(e,t){this.fieldPath=e,this.kind=t}}class Zu{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Zu(0,Bi.min())}}function Cb(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,s=Ct.fromTimestamp(1e9===r?new Rn(t+1,0):new Rn(t,r));return new Bi(s,Ge.empty(),e)}function Tb(n){return new Bi(n.readTime,n.key,-1)}class Bi{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Bi(Ct.min(),Ge.empty(),-1)}static max(){return new Bi(Ct.max(),Ge.empty(),-1)}}function qa(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=Ge.comparator(n.documentKey,e.documentKey),0!==t?t:At(n.largestBatchId,e.largestBatchId))}const vw="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class qm{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function zo(n){return ww.apply(this,arguments)}function ww(){return ww=(0,_e.Z)(function*(n){if(n.code!==ce.FAILED_PRECONDITION||n.message!==vw)throw n;ke("LocalStore","Unexpectedly lost primary lease")}),ww.apply(this,arguments)}class se{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&et(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new se((r,s)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(r,s)},this.catchCallback=u=>{this.wrapFailure(t,u).next(r,s)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof se?t:se.resolve(t)}catch(t){return se.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):se.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):se.reject(t)}static resolve(e){return new se((t,r)=>{t(e)})}static reject(e){return new se((t,r)=>{r(e)})}static waitFor(e){return new se((t,r)=>{let s=0,u=0,c=!1;e.forEach(m=>{++s,m.next(()=>{++u,c&&u===s&&t()},v=>r(v))}),c=!0,u===s&&t()})}static or(e){let t=se.resolve(!1);for(const r of e)t=t.next(s=>s?se.resolve(s):r());return t}static forEach(e,t){const r=[];return e.forEach((s,u)=>{r.push(t.call(this,s,u))}),this.waitFor(r)}static mapArray(e,t){return new se((r,s)=>{const u=e.length,c=new Array(u);let m=0;for(let v=0;v<u;v++){const b=v;t(e[b]).next(A=>{c[b]=A,++m,m===u&&r(c)},A=>s(A))}})}static doWhile(e,t){return new se((r,s)=>{const u=()=>{!0===e()?t().next(()=>{u()},s):r()};u()})}}class mh{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.P=new Ir,this.transaction.oncomplete=()=>{this.P.resolve()},this.transaction.onabort=()=>{t.error?this.P.reject(new Wm(e,t.error)):this.P.resolve()},this.transaction.onerror=r=>{const s=Ew(r.target.error);this.P.reject(new Wm(e,s))}}static open(e,t,r,s){try{return new mh(t,e.transaction(s,r))}catch(u){throw new Wm(t,u)}}get v(){return this.P.promise}abort(e){e&&this.P.reject(e),this.aborted||(ke("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}V(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new SM(t)}}class ji{constructor(e,t,r){this.name=e,this.version=t,this.S=r,12.2===ji.D((0,Dt.z$)())&&pr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return ke("SimpleDb","Removing database:",e),Yu(window.indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!(0,Dt.hl)())return!1;if(ji.N())return!0;const e=(0,Dt.z$)(),t=ji.D(e),r=0<t&&t<10,s=ji.k(e),u=0<s&&s<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||u)}static N(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.M)}static O(e,t){return e.store(t)}static D(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static k(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}F(e){var t=this;return(0,_e.Z)(function*(){return t.db||(ke("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,s)=>{const u=indexedDB.open(t.name,t.version);u.onsuccess=c=>{r(c.target.result)},u.onblocked=()=>{s(new Wm(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},u.onerror=c=>{const m=c.target.error;s("VersionError"===m.name?new Re(ce.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===m.name?new Re(ce.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+m):new Wm(e,m))},u.onupgradeneeded=c=>{ke("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',c.oldVersion),t.S.$(c.target.result,u.transaction,c.oldVersion,t.version).next(()=>{ke("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.B&&(t.db.onversionchange=r=>t.B(r)),t.db})()}L(e){this.B=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,s){var u=this;return(0,_e.Z)(function*(){const c="readonly"===t;let m=0;for(;;){++m;try{u.db=yield u.F(e);const v=mh.open(u.db,e,c?"readonly":"readwrite",r),b=s(v).next(A=>(v.V(),A)).catch(A=>(v.abort(A),se.reject(A))).toPromise();return b.catch(()=>{}),yield v.v,b}catch(v){const b=v,A="FirebaseError"!==b.name&&m<3;if(ke("SimpleDb","Transaction failed with error:",b.message,"Retrying:",A),u.close(),!A)return Promise.reject(b)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class TM{constructor(e){this.U=e,this.q=!1,this.K=null}get isDone(){return this.q}get G(){return this.K}set cursor(e){this.U=e}done(){this.q=!0}j(e){this.K=e}delete(){return Yu(this.U.delete())}}class Wm extends Re{constructor(e,t){super(ce.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Cc(n){return"IndexedDbTransactionError"===n.name}class SM{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(ke("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(ke("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Yu(r)}add(e){return ke("SimpleDb","ADD",this.store.name,e,e),Yu(this.store.add(e))}get(e){return Yu(this.store.get(e)).next(t=>(void 0===t&&(t=null),ke("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return ke("SimpleDb","DELETE",this.store.name,e),Yu(this.store.delete(e))}count(){return ke("SimpleDb","COUNT",this.store.name),Yu(this.store.count())}W(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const s=this.cursor(r),u=[];return this.H(s,(c,m)=>{u.push(m)}).next(()=>u)}{const s=this.store.getAll(r.range);return new se((u,c)=>{s.onerror=m=>{c(m.target.error)},s.onsuccess=m=>{u(m.target.result)}})}}J(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new se((s,u)=>{r.onerror=c=>{u(c.target.error)},r.onsuccess=c=>{s(c.target.result)}})}Y(e,t){ke("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.X=!1;const s=this.cursor(r);return this.H(s,(u,c,m)=>m.delete())}Z(e,t){let r;t?r=e:(r={},t=e);const s=this.cursor(r);return this.H(s,t)}tt(e){const t=this.cursor({});return new se((r,s)=>{t.onerror=u=>{const c=Ew(u.target.error);s(c)},t.onsuccess=u=>{const c=u.target.result;c?e(c.primaryKey,c.value).next(m=>{m?c.continue():r()}):r()}})}H(e,t){const r=[];return new se((s,u)=>{e.onerror=c=>{u(c.target.error)},e.onsuccess=c=>{const m=c.target.result;if(!m)return void s();const v=new TM(m),b=t(m.primaryKey,m.value,v);if(b instanceof se){const A=b.catch(M=>(v.done(),se.reject(M)));r.push(A)}v.isDone?s():null===v.G?m.continue():m.continue(v.G)}}).next(()=>se.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.X?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Yu(n){return new se((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const s=Ew(r.target.error);t(s)}})}let Sb=!1;function Ew(n){const e=ji.D((0,Dt.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Re("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Sb||(Sb=!0,setTimeout(()=>{throw r},0)),r}}return n}class fS{constructor(e,t){this.asyncQueue=e,this.et=t,this.task=null}start(){this.nt(15)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}nt(e){var t=this;ke("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,_e.Z)(function*(){t.task=null;try{ke("IndexBackiller",`Documents written: ${yield t.et.st()}`)}catch(r){Cc(r)?ke("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield zo(r)}yield t.nt(1)}))}}class pS{constructor(e,t){this.localStore=e,this.persistence=t}st(e=50){var t=this;return(0,_e.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.it(r,e))})()}it(e,t){const r=new Set;let s=t,u=!0;return se.doWhile(()=>!0===u&&s>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(c=>{if(null!==c&&!r.has(c))return ke("IndexBackiller",`Processing collection: ${c}`),this.rt(e,c,s).next(m=>{s-=m,r.add(c)});u=!1})).next(()=>t-s)}rt(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(s=>this.localStore.localDocuments.getNextDocuments(e,t,s,r).next(u=>{const c=u.changes;return this.localStore.indexManager.updateIndexEntries(e,c).next(()=>this.ot(s,u)).next(m=>(ke("IndexBackiller",`Updating offset: ${m}`),this.localStore.indexManager.updateCollectionGroup(e,t,m))).next(()=>c.size)}))}ot(e,t){let r=e;return t.changes.forEach((s,u)=>{const c=Tb(u);qa(c,r)>0&&(r=c)}),new Bi(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}class Ti{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ut(r),this.ct=r=>t.writeSequenceNumber(r))}ut(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ct&&this.ct(e),e}}function Iw(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Qu(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function Ab(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}Ti.at=-1;class Yn{constructor(e,t){this.comparator=e,this.root=t||br.EMPTY}insert(e,t){return new Yn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,br.BLACK,null,null))}remove(e){return new Yn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,br.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(0===s)return t+r.left.size;s<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new _p(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new _p(this.root,e,this.comparator,!1)}getReverseIterator(){return new _p(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new _p(this.root,e,this.comparator,!0)}}class _p{constructor(e,t,r,s){this.isReverse=s,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=t?r(e.key,t):1,t&&s&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(0===u){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class br{constructor(e,t,r,s,u){this.key=e,this.value=t,this.color=r??br.RED,this.left=s??br.EMPTY,this.right=u??br.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,s,u){return new br(e??this.key,t??this.value,r??this.color,s??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let s=this;const u=r(e,s.key);return s=u<0?s.copy(null,null,null,s.left.insert(e,t,r),null):0===u?s.copy(null,t,null,null,null):s.copy(null,null,null,null,s.right.insert(e,t,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return br.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,s=this;if(t(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,t),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),0===t(e,s.key)){if(s.right.isEmpty())return br.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,t))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,br.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,br.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw et();const e=this.left.check();if(e!==this.right.check())throw et();return e+(this.isRed()?0:1)}}br.EMPTY=null,br.RED=!0,br.BLACK=!1,br.EMPTY=new class{constructor(){this.size=0}get key(){throw et()}get value(){throw et()}get color(){throw et()}get left(){throw et()}get right(){throw et()}copy(n,e,t,r,s){return this}insert(n,e,t){return new br(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class mn{constructor(e){this.comparator=e,this.data=new Yn(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;t(s.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new bw(this.data.getIterator())}getIteratorFrom(e){return new bw(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof mn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const s=t.getNext().key,u=r.getNext().key;if(0!==this.comparator(s,u))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new mn(this.comparator);return t.data=e,t}}class bw{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Ju(n){return n.hasNext()?n.getNext():void 0}class ps{constructor(e){this.fields=e,e.sort(Zn.comparator)}static empty(){return new ps([])}unionWith(e){let t=new mn(Zn.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new ps(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Dc(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class Pr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new Pr(t)}static fromUint8Array(e){const t=function(r){let s="";for(let u=0;u<r.length;++u)s+=String.fromCharCode(r[u]);return s}(e);return new Pr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return At(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Pr.EMPTY_BYTE_STRING=new Pr("");const AM=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Xu(n){if(Tt(!!n),"string"==typeof n){let e=0;const t=AM.exec(n);if(Tt(!!t),t[1]){let s=t[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Qn(n.seconds),nanos:Qn(n.nanos)}}function Qn(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Tc(n){return"string"==typeof n?Pr.fromBase64String(n):Pr.fromUint8Array(n)}function xb(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function mS(n){const e=n.mapValue.fields.__previous_value__;return xb(e)?mS(e):e}function Km(n){const e=Xu(n.mapValue.fields.__local_write_time__.timestampValue);return new Rn(e.seconds,e.nanos)}class xM{constructor(e,t,r,s,u,c,m,v){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=s,this.ssl=u,this.forceLongPolling=c,this.autoDetectLongPolling=m,this.useFetchStreams=v}}class Sc{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Sc("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Sc&&e.projectId===this.projectId&&e.database===this.database}}function vp(n){return null==n}function Zm(n){return 0===n&&1/n==-1/0}function yS(n){return"number"==typeof n&&Number.isInteger(n)&&!Zm(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}const Ac={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Dw={nullValue:"NULL_VALUE"};function yh(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?xb(n)?4:z(n)?9007199254740991:10:et()}function Wa(n,e){if(n===e)return!0;const t=yh(n);if(t!==yh(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Km(n).isEqual(Km(e));case 3:return function(r,s){if("string"==typeof r.timestampValue&&"string"==typeof s.timestampValue&&r.timestampValue.length===s.timestampValue.length)return r.timestampValue===s.timestampValue;const u=Xu(r.timestampValue),c=Xu(s.timestampValue);return u.seconds===c.seconds&&u.nanos===c.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return s=e,Tc(n.bytesValue).isEqual(Tc(s.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,s){return Qn(r.geoPointValue.latitude)===Qn(s.geoPointValue.latitude)&&Qn(r.geoPointValue.longitude)===Qn(s.geoPointValue.longitude)}(n,e);case 2:return function(r,s){if("integerValue"in r&&"integerValue"in s)return Qn(r.integerValue)===Qn(s.integerValue);if("doubleValue"in r&&"doubleValue"in s){const u=Qn(r.doubleValue),c=Qn(s.doubleValue);return u===c?Zm(u)===Zm(c):isNaN(u)&&isNaN(c)}return!1}(n,e);case 9:return Dc(n.arrayValue.values||[],e.arrayValue.values||[],Wa);case 10:return function(r,s){const u=r.mapValue.fields||{},c=s.mapValue.fields||{};if(Iw(u)!==Iw(c))return!1;for(const m in u)if(u.hasOwnProperty(m)&&(void 0===c[m]||!Wa(u[m],c[m])))return!1;return!0}(n,e);default:return et()}var s}function i(n,e){return void 0!==(n.values||[]).find(t=>Wa(t,e))}function o(n,e){if(n===e)return 0;const t=yh(n),r=yh(e);if(t!==r)return At(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return At(n.booleanValue,e.booleanValue);case 2:return function(s,u){const c=Qn(s.integerValue||s.doubleValue),m=Qn(u.integerValue||u.doubleValue);return c<m?-1:c>m?1:c===m?0:isNaN(c)?isNaN(m)?0:-1:1}(n,e);case 3:return a(n.timestampValue,e.timestampValue);case 4:return a(Km(n),Km(e));case 5:return At(n.stringValue,e.stringValue);case 6:return function(s,u){const c=Tc(s),m=Tc(u);return c.compareTo(m)}(n.bytesValue,e.bytesValue);case 7:return function(s,u){const c=s.split("/"),m=u.split("/");for(let v=0;v<c.length&&v<m.length;v++){const b=At(c[v],m[v]);if(0!==b)return b}return At(c.length,m.length)}(n.referenceValue,e.referenceValue);case 8:return function(s,u){const c=At(Qn(s.latitude),Qn(u.latitude));return 0!==c?c:At(Qn(s.longitude),Qn(u.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(s,u){const c=s.values||[],m=u.values||[];for(let v=0;v<c.length&&v<m.length;++v){const b=o(c[v],m[v]);if(b)return b}return At(c.length,m.length)}(n.arrayValue,e.arrayValue);case 10:return function(s,u){if(s===Ac.mapValue&&u===Ac.mapValue)return 0;if(s===Ac.mapValue)return 1;if(u===Ac.mapValue)return-1;const c=s.fields||{},m=Object.keys(c),v=u.fields||{},b=Object.keys(v);m.sort(),b.sort();for(let A=0;A<m.length&&A<b.length;++A){const M=At(m[A],b[A]);if(0!==M)return M;const L=o(c[m[A]],v[b[A]]);if(0!==L)return L}return At(m.length,b.length)}(n.mapValue,e.mapValue);default:throw et()}}function a(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return At(n,e);const t=Xu(n),r=Xu(e),s=At(t.seconds,r.seconds);return 0!==s?s:At(t.nanos,r.nanos)}function l(n){return d(n)}function d(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const s=Xu(r);return`time(${s.seconds},${s.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Tc(n.bytesValue).toBase64():"referenceValue"in n?Ge.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let s="[",u=!0;for(const c of r.values||[])u?u=!1:s+=",",s+=d(c);return s+"]"}(n.arrayValue):"mapValue"in n?function(r){const s=Object.keys(r.fields||{}).sort();let u="{",c=!0;for(const m of s)c?c=!1:u+=",",u+=`${m}:${d(r.fields[m])}`;return u+"}"}(n.mapValue):et();var e}function f(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function _(n){return!!n&&"integerValue"in n}function E(n){return!!n&&"arrayValue"in n}function I(n){return!!n&&"nullValue"in n}function T(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function R(n){return!!n&&"mapValue"in n}function O(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Qu(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=O(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=O(n.arrayValue.values[t]);return e}return Object.assign({},n)}function z(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function te(n){return"nullValue"in n?Dw:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?f(Sc.empty(),Ge.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:et()}function Ee(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?f(Sc.empty(),Ge.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?Ac:et()}function Ne(n,e){const t=o(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function ze(n,e){const t=o(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class $e{constructor(e){this.value=e}static empty(){return new $e({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!R(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=O(t)}setAll(e){let t=Zn.emptyPath(),r={},s=[];e.forEach((c,m)=>{if(!t.isImmediateParentOf(m)){const v=this.getFieldsMap(t);this.applyChanges(v,r,s),r={},s=[],t=m.popLast()}c?r[m.lastSegment()]=O(c):s.push(m.lastSegment())});const u=this.getFieldsMap(t);this.applyChanges(u,r,s)}delete(e){const t=this.field(e.popLast());R(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Wa(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=t.mapValue.fields[e.get(r)];R(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=s),t=s}return t.mapValue.fields}applyChanges(e,t,r){Qu(t,(s,u)=>e[s]=u);for(const s of r)delete e[s]}clone(){return new $e(O(this.value))}}function wt(n){const e=[];return Qu(n.fields,(t,r)=>{const s=new Zn([t]);if(R(r)){const u=wt(r.mapValue).fields;if(0===u.length)e.push(s);else for(const c of u)e.push(s.child(c))}else e.push(s)}),new ps(e)}class ye{constructor(e,t,r,s,u,c){this.key=e,this.documentType=t,this.version=r,this.readTime=s,this.data=u,this.documentState=c}static newInvalidDocument(e){return new ye(e,0,Ct.min(),Ct.min(),$e.empty(),0)}static newFoundDocument(e,t,r){return new ye(e,1,t,Ct.min(),r,0)}static newNoDocument(e,t){return new ye(e,2,t,Ct.min(),$e.empty(),0)}static newUnknownDocument(e,t){return new ye(e,3,t,Ct.min(),$e.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=$e.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=$e.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ct.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof ye&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ye(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class mt{constructor(e,t=null,r=[],s=[],u=null,c=null,m=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=s,this.limit=u,this.startAt=c,this.endAt=m,this.ht=null}}function $t(n,e=null,t=[],r=[],s=null,u=null,c=null){return new mt(n,e,t,r,s,u,c)}function sn(n){const e=We(n);if(null===e.ht){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>{return(s=r).field.canonicalString()+s.op.toString()+l(s.value);var s}).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(s=r).field.canonicalString()+s.dir;var s}).join(","),vp(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>l(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>l(r)).join(",")),e.ht=t}return e.ht}function Mc(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let s=0;s<n.orderBy.length;s++)if(!vk(n.orderBy[s],e.orderBy[s]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let s=0;s<n.filters.length;s++)if((t=n.filters[s]).op!==(r=e.filters[s]).op||!t.field.isEqual(r.field)||!Wa(t.value,r.value))return!1;var t,r;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!NM(n.startAt,e.startAt)&&NM(n.endAt,e.endAt)}function _h(n){return Ge.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function vh(n,e){return n.filters.filter(t=>t instanceof Dr&&t.field.isEqual(e))}function Ym(n,e,t){let r=Dw,s=!0;for(const u of vh(n,e)){let c=Dw,m=!0;switch(u.op){case"<":case"<=":c=te(u.value);break;case"==":case"in":case">=":c=u.value;break;case">":c=u.value,m=!1;break;case"!=":case"not-in":c=Dw}Ne({value:r,inclusive:s},{value:c,inclusive:m})<0&&(r=c,s=m)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const c=t.position[u];Ne({value:r,inclusive:s},{value:c,inclusive:t.inclusive})<0&&(r=c,s=t.inclusive);break}return{value:r,inclusive:s}}function Qm(n,e,t){let r=Ac,s=!0;for(const u of vh(n,e)){let c=Ac,m=!0;switch(u.op){case">=":case">":c=Ee(u.value),m=!1;break;case"==":case"in":case"<=":c=u.value;break;case"<":c=u.value,m=!1;break;case"!=":case"not-in":c=Ac}ze({value:r,inclusive:s},{value:c,inclusive:m})>0&&(r=c,s=m)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const c=t.position[u];ze({value:r,inclusive:s},{value:c,inclusive:t.inclusive})>0&&(r=c,s=t.inclusive);break}return{value:r,inclusive:s}}class Dr extends class{}{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.lt(e,t,r):new Cw(e,t,r):"array-contains"===t?new gk(e,r):"in"===t?new mk(e,r):"not-in"===t?new yk(e,r):"array-contains-any"===t?new _k(e,r):new Dr(e,t,r)}static lt(e,t,r){return"in"===t?new Tw(e,r):new Sw(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.ft(o(t,this.value)):null!==t&&yh(this.value)===yh(t)&&this.ft(o(t,this.value))}ft(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return et()}}dt(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class Cw extends Dr{constructor(e,t,r){super(e,t,r),this.key=Ge.fromName(r.referenceValue)}matches(e){const t=Ge.comparator(e.key,this.key);return this.ft(t)}}class Tw extends Dr{constructor(e,t){super(e,"in",t),this.keys=MM(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class Sw extends Dr{constructor(e,t){super(e,"not-in",t),this.keys=MM(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function MM(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>Ge.fromName(r.referenceValue))}class gk extends Dr{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return E(t)&&i(t.arrayValue,this.value)}}class mk extends Dr{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&i(this.value.arrayValue,t)}}class yk extends Dr{constructor(e,t){super(e,"not-in",t)}matches(e){if(i(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!i(this.value.arrayValue,t)}}class _k extends Dr{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!E(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>i(this.value.arrayValue,r))}}class wh{constructor(e,t){this.position=e,this.inclusive=t}}class Jm{constructor(e,t="asc"){this.field=e,this.dir=t}}function vk(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function RM(n,e,t){let r=0;for(let s=0;s<n.position.length;s++){const u=e[s],c=n.position[s];if(r=u.field.isKeyField()?Ge.comparator(Ge.fromName(c.referenceValue),t.key):o(c,t.data.field(u.field)),"desc"===u.dir&&(r*=-1),0!==r)break}return r}function NM(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Wa(n.position[t],e.position[t]))return!1;return!0}class Rc{constructor(e,t=null,r=[],s=[],u=null,c="F",m=null,v=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=s,this.limit=u,this.limitType=c,this.startAt=m,this.endAt=v,this._t=null,this.wt=null}}function OM(n,e,t,r,s,u,c,m){return new Rc(n,e,t,r,s,u,c,m)}function Xm(n){return new Rc(n)}function kM(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function _S(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function vS(n){for(const e of n.filters)if(e.dt())return e.field;return null}function wS(n){return null!==n.collectionGroup}function ey(n){const e=We(n);if(null===e._t){e._t=[];const t=vS(e),r=_S(e);if(null!==t&&null===r)t.isKeyField()||e._t.push(new Jm(t)),e._t.push(new Jm(Zn.keyField(),"asc"));else{let s=!1;for(const u of e.explicitOrderBy)e._t.push(u),u.field.isKeyField()&&(s=!0);if(!s){const u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e._t.push(new Jm(Zn.keyField(),u))}}}return e._t}function Hs(n){const e=We(n);if(!e.wt)if("F"===e.limitType)e.wt=$t(e.path,e.collectionGroup,ey(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const u of ey(e))t.push(new Jm(u.field,"desc"===u.dir?"asc":"desc"));const r=e.endAt?new wh(e.endAt.position,e.endAt.inclusive):null,s=e.startAt?new wh(e.startAt.position,e.startAt.inclusive):null;e.wt=$t(e.path,e.collectionGroup,t,e.filters,e.limit,r,s)}return e.wt}function Mb(n,e,t){return new Rc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Aw(n,e){return Mc(Hs(n),Hs(e))&&n.limitType===e.limitType}function PM(n){return`${sn(Hs(n))}|lt:${n.limitType}`}function ES(n){return`Query(target=${function xc(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(r=t).field.canonicalString()} ${r.op} ${l(r.value)}`;var r}).join(", ")}]`),vp(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(r=t).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>l(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>l(t)).join(",")),`Target(${e})`}(Hs(n))}; limitType=${n.limitType})`}function IS(n,e){return e.isFoundDocument()&&function(t,r){const s=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(s):Ge.isDocumentKey(t.path)?t.path.isEqual(s):t.path.isImmediateParentOf(s)}(n,e)&&function(t,r){for(const s of t.explicitOrderBy)if(!s.field.isKeyField()&&null===r.data.field(s.field))return!1;return!0}(n,e)&&function(t,r){for(const s of t.filters)if(!s.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(s,u,c){const m=RM(s,u,c);return s.inclusive?m<=0:m<0}(t.startAt,ey(t),r)||t.endAt&&!function(s,u,c){const m=RM(s,u,c);return s.inclusive?m>=0:m>0}(t.endAt,ey(t),r)));var t,r}function FM(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function LM(n){return(e,t)=>{let r=!1;for(const s of ey(n)){const u=wk(s,e,t);if(0!==u)return u;r=r||s.field.isKeyField()}return 0}}function wk(n,e,t){const r=n.field.isKeyField()?Ge.comparator(e.key,t.key):function(s,u,c){const m=u.data.field(s),v=c.data.field(s);return null!==m&&null!==v?o(m,v):et()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return et()}}function VM(n,e){if(n.gt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Zm(e)?"-0":e}}function UM(n){return{integerValue:""+n}}function BM(n,e){return yS(e)?UM(e):VM(n,e)}class Rb{constructor(){this._=void 0}}function Ek(n,e,t){return n instanceof ty?function(r,s){const u={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return s&&(u.fields.__previous_value__=s),{mapValue:u}}(t,e):n instanceof wp?$M(n,e):n instanceof Ep?HM(n,e):function(r,s){const u=jM(r,s),c=GM(u)+GM(r.yt);return _(u)&&_(r.yt)?UM(c):VM(r.It,c)}(n,e)}function Ik(n,e,t){return n instanceof wp?$M(n,e):n instanceof Ep?HM(n,e):t}function jM(n,e){return n instanceof ny?_(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class ty extends Rb{}class wp extends Rb{constructor(e){super(),this.elements=e}}function $M(n,e){const t=zM(e);for(const r of n.elements)t.some(s=>Wa(s,r))||t.push(r);return{arrayValue:{values:t}}}class Ep extends Rb{constructor(e){super(),this.elements=e}}function HM(n,e){let t=zM(e);for(const r of n.elements)t=t.filter(s=>!Wa(s,r));return{arrayValue:{values:t}}}class ny extends Rb{constructor(e,t){super(),this.It=e,this.yt=t}}function GM(n){return Qn(n.integerValue||n.doubleValue)}function zM(n){return E(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class xw{constructor(e,t){this.field=e,this.transform=t}}class Dk{constructor(e,t){this.version=e,this.transformResults=t}}class Jn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Jn}static exists(e){return new Jn(void 0,e)}static updateTime(e){return new Jn(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Nb(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class Ob{}function qM(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new iy(n.key,Jn.none()):new ry(n.key,n.data,Jn.none());{const t=n.data,r=$e.empty();let s=new mn(Zn.comparator);for(let u of e.fields)if(!s.has(u)){let c=t.field(u);null===c&&u.length>1&&(u=u.popLast(),c=t.field(u)),null===c?r.delete(u):r.set(u,c),s=s.add(u)}return new Nc(n.key,r,new ps(s.toArray()),Jn.none())}}function Ck(n,e,t){n instanceof ry?function(r,s,u){const c=r.value.clone(),m=ZM(r.fieldTransforms,s,u.transformResults);c.setAll(m),s.convertToFoundDocument(u.version,c).setHasCommittedMutations()}(n,e,t):n instanceof Nc?function(r,s,u){if(!Nb(r.precondition,s))return void s.convertToUnknownDocument(u.version);const c=ZM(r.fieldTransforms,s,u.transformResults),m=s.data;m.setAll(KM(r)),m.setAll(c),s.convertToFoundDocument(u.version,m).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function Mw(n,e,t,r){return n instanceof ry?function(s,u,c,m){if(!Nb(s.precondition,u))return c;const v=s.value.clone(),b=YM(s.fieldTransforms,m,u);return v.setAll(b),u.convertToFoundDocument(u.version,v).setHasLocalMutations(),null}(n,e,t,r):n instanceof Nc?function(s,u,c,m){if(!Nb(s.precondition,u))return c;const v=YM(s.fieldTransforms,m,u),b=u.data;return b.setAll(KM(s)),b.setAll(v),u.convertToFoundDocument(u.version,b).setHasLocalMutations(),null===c?null:c.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(A=>A.field))}(n,e,t,r):(c=t,Nb(n.precondition,u=e)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):c);var u,c}function Tk(n,e){let t=null;for(const r of n.fieldTransforms){const s=e.data.field(r.field),u=jM(r.transform,s||null);null!=u&&(null===t&&(t=$e.empty()),t.set(r.field,u))}return t||null}function WM(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&Dc(t,r,(s,u)=>function bk(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof wp&&r instanceof wp||t instanceof Ep&&r instanceof Ep?Dc(t.elements,r.elements,Wa):t instanceof ny&&r instanceof ny?Wa(t.yt,r.yt):t instanceof ty&&r instanceof ty);var t,r}(s,u))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class ry extends Ob{constructor(e,t,r,s=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Nc extends Ob{constructor(e,t,r,s,u=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=s,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function KM(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function ZM(n,e,t){const r=new Map;Tt(n.length===t.length);for(let s=0;s<t.length;s++){const u=n[s],c=u.transform,m=e.data.field(u.field);r.set(u.field,Ik(c,m,t[s]))}return r}function YM(n,e,t){const r=new Map;for(const s of n){const u=s.transform,c=t.data.field(s.field);r.set(s.field,Ek(u,c,e))}return r}class iy extends Ob{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class bS extends Ob{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Sk{constructor(e){this.count=e}}var Fr,en;function QM(n){switch(n){default:return et();case ce.CANCELLED:case ce.UNKNOWN:case ce.DEADLINE_EXCEEDED:case ce.RESOURCE_EXHAUSTED:case ce.INTERNAL:case ce.UNAVAILABLE:case ce.UNAUTHENTICATED:return!1;case ce.INVALID_ARGUMENT:case ce.NOT_FOUND:case ce.ALREADY_EXISTS:case ce.PERMISSION_DENIED:case ce.FAILED_PRECONDITION:case ce.ABORTED:case ce.OUT_OF_RANGE:case ce.UNIMPLEMENTED:case ce.DATA_LOSS:return!0}}function JM(n){if(void 0===n)return pr("GRPC error has no .code"),ce.UNKNOWN;switch(n){case Fr.OK:return ce.OK;case Fr.CANCELLED:return ce.CANCELLED;case Fr.UNKNOWN:return ce.UNKNOWN;case Fr.DEADLINE_EXCEEDED:return ce.DEADLINE_EXCEEDED;case Fr.RESOURCE_EXHAUSTED:return ce.RESOURCE_EXHAUSTED;case Fr.INTERNAL:return ce.INTERNAL;case Fr.UNAVAILABLE:return ce.UNAVAILABLE;case Fr.UNAUTHENTICATED:return ce.UNAUTHENTICATED;case Fr.INVALID_ARGUMENT:return ce.INVALID_ARGUMENT;case Fr.NOT_FOUND:return ce.NOT_FOUND;case Fr.ALREADY_EXISTS:return ce.ALREADY_EXISTS;case Fr.PERMISSION_DENIED:return ce.PERMISSION_DENIED;case Fr.FAILED_PRECONDITION:return ce.FAILED_PRECONDITION;case Fr.ABORTED:return ce.ABORTED;case Fr.OUT_OF_RANGE:return ce.OUT_OF_RANGE;case Fr.UNIMPLEMENTED:return ce.UNIMPLEMENTED;case Fr.DATA_LOSS:return ce.DATA_LOSS;default:return et()}}(en=Fr||(Fr={}))[en.OK=0]="OK",en[en.CANCELLED=1]="CANCELLED",en[en.UNKNOWN=2]="UNKNOWN",en[en.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",en[en.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",en[en.NOT_FOUND=5]="NOT_FOUND",en[en.ALREADY_EXISTS=6]="ALREADY_EXISTS",en[en.PERMISSION_DENIED=7]="PERMISSION_DENIED",en[en.UNAUTHENTICATED=16]="UNAUTHENTICATED",en[en.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",en[en.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",en[en.ABORTED=10]="ABORTED",en[en.OUT_OF_RANGE=11]="OUT_OF_RANGE",en[en.UNIMPLEMENTED=12]="UNIMPLEMENTED",en[en.INTERNAL=13]="INTERNAL",en[en.UNAVAILABLE=14]="UNAVAILABLE",en[en.DATA_LOSS=15]="DATA_LOSS";class Eh{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[s,u]of r)if(this.equalsFn(s,e))return u}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),s=this.inner[r];if(void 0===s)return this.inner[r]=[[e,t]],void this.innerSize++;for(let u=0;u<s.length;u++)if(this.equalsFn(s[u][0],e))return void(s[u]=[e,t]);s.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return 1===r.length?delete this.inner[t]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Qu(this.inner,(t,r)=>{for(const[s,u]of r)e(s,u)})}isEmpty(){return Ab(this.inner)}size(){return this.innerSize}}const Ak=new Yn(Ge.comparator);function Gs(){return Ak}const XM=new Yn(Ge.comparator);function Rw(...n){let e=XM;for(const t of n)e=e.insert(t.key,t);return e}function eR(n){let e=XM;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function el(){return Nw()}function tR(){return Nw()}function Nw(){return new Eh(n=>n.toString(),(n,e)=>n.isEqual(e))}const xk=new Yn(Ge.comparator),Mk=new mn(Ge.comparator);function Vt(...n){let e=Mk;for(const t of n)e=e.add(t);return e}const Rk=new mn(At);function kb(){return Rk}class Ow{constructor(e,t,r,s,u){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,t){const r=new Map;return r.set(e,kw.createSynthesizedTargetChangeForCurrentChange(e,t)),new Ow(Ct.min(),r,kb(),Gs(),Vt())}}class kw{constructor(e,t,r,s,u){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,t){return new kw(Pr.EMPTY_BYTE_STRING,t,Vt(),Vt(),Vt())}}class Pb{constructor(e,t,r,s){this.Tt=e,this.removedTargetIds=t,this.key=r,this.Et=s}}class nR{constructor(e,t){this.targetId=e,this.At=t}}class rR{constructor(e,t,r=Pr.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=s}}class iR{constructor(){this.Rt=0,this.bt=oR(),this.Pt=Pr.EMPTY_BYTE_STRING,this.vt=!1,this.Vt=!0}get current(){return this.vt}get resumeToken(){return this.Pt}get St(){return 0!==this.Rt}get Dt(){return this.Vt}Ct(e){e.approximateByteSize()>0&&(this.Vt=!0,this.Pt=e)}xt(){let e=Vt(),t=Vt(),r=Vt();return this.bt.forEach((s,u)=>{switch(u){case 0:e=e.add(s);break;case 2:t=t.add(s);break;case 1:r=r.add(s);break;default:et()}}),new kw(this.Pt,this.vt,e,t,r)}Nt(){this.Vt=!1,this.bt=oR()}kt(e,t){this.Vt=!0,this.bt=this.bt.insert(e,t)}Mt(e){this.Vt=!0,this.bt=this.bt.remove(e)}Ot(){this.Rt+=1}Ft(){this.Rt-=1}$t(){this.Vt=!0,this.vt=!0}}class Nk{constructor(e){this.Bt=e,this.Lt=new Map,this.Ut=Gs(),this.qt=sR(),this.Kt=new mn(At)}Gt(e){for(const t of e.Tt)e.Et&&e.Et.isFoundDocument()?this.Qt(t,e.Et):this.jt(t,e.key,e.Et);for(const t of e.removedTargetIds)this.jt(t,e.key,e.Et)}Wt(e){this.forEachTarget(e,t=>{const r=this.zt(t);switch(e.state){case 0:this.Ht(t)&&r.Ct(e.resumeToken);break;case 1:r.Ft(),r.St||r.Nt(),r.Ct(e.resumeToken);break;case 2:r.Ft(),r.St||this.removeTarget(t);break;case 3:this.Ht(t)&&(r.$t(),r.Ct(e.resumeToken));break;case 4:this.Ht(t)&&(this.Jt(t),r.Ct(e.resumeToken));break;default:et()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Lt.forEach((r,s)=>{this.Ht(s)&&t(s)})}Yt(e){const t=e.targetId,r=e.At.count,s=this.Xt(t);if(s){const u=s.target;if(_h(u))if(0===r){const c=new Ge(u.path);this.jt(t,c,ye.newNoDocument(c,Ct.min()))}else Tt(1===r);else this.Zt(t)!==r&&(this.Jt(t),this.Kt=this.Kt.add(t))}}te(e){const t=new Map;this.Lt.forEach((u,c)=>{const m=this.Xt(c);if(m){if(u.current&&_h(m.target)){const v=new Ge(m.target.path);null!==this.Ut.get(v)||this.ee(c,v)||this.jt(c,v,ye.newNoDocument(v,e))}u.Dt&&(t.set(c,u.xt()),u.Nt())}});let r=Vt();this.qt.forEach((u,c)=>{let m=!0;c.forEachWhile(v=>{const b=this.Xt(v);return!b||2===b.purpose||(m=!1,!1)}),m&&(r=r.add(u))}),this.Ut.forEach((u,c)=>c.setReadTime(e));const s=new Ow(e,t,this.Kt,this.Ut,r);return this.Ut=Gs(),this.qt=sR(),this.Kt=new mn(At),s}Qt(e,t){if(!this.Ht(e))return;const r=this.ee(e,t.key)?2:0;this.zt(e).kt(t.key,r),this.Ut=this.Ut.insert(t.key,t),this.qt=this.qt.insert(t.key,this.ne(t.key).add(e))}jt(e,t,r){if(!this.Ht(e))return;const s=this.zt(e);this.ee(e,t)?s.kt(t,1):s.Mt(t),this.qt=this.qt.insert(t,this.ne(t).delete(e)),r&&(this.Ut=this.Ut.insert(t,r))}removeTarget(e){this.Lt.delete(e)}Zt(e){const t=this.zt(e).xt();return this.Bt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ot(e){this.zt(e).Ot()}zt(e){let t=this.Lt.get(e);return t||(t=new iR,this.Lt.set(e,t)),t}ne(e){let t=this.qt.get(e);return t||(t=new mn(At),this.qt=this.qt.insert(e,t)),t}Ht(e){const t=null!==this.Xt(e);return t||ke("WatchChangeAggregator","Detected inactive target",e),t}Xt(e){const t=this.Lt.get(e);return t&&t.St?null:this.Bt.se(e)}Jt(e){this.Lt.set(e,new iR),this.Bt.getRemoteKeysForTarget(e).forEach(t=>{this.jt(e,t,null)})}ee(e,t){return this.Bt.getRemoteKeysForTarget(e).has(t)}}function sR(){return new Yn(Ge.comparator)}function oR(){return new Yn(Ge.comparator)}const Ok={asc:"ASCENDING",desc:"DESCENDING"},kk={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class Pk{constructor(e,t){this.databaseId=e,this.gt=t}}function Pw(n,e){return n.gt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function aR(n,e){return n.gt?e.toBase64():e.toUint8Array()}function Fk(n,e){return Pw(n,e.toTimestamp())}function li(n){return Tt(!!n),Ct.fromTimestamp(function(e){const t=Xu(e);return new Rn(t.seconds,t.nanos)}(n))}function DS(n,e){return(t=n,new qt(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function uR(n){const e=qt.fromString(n);return Tt(yR(e)),e}function Fw(n,e){return DS(n.databaseId,e.path)}function tl(n,e){const t=uR(e);if(t.get(1)!==n.databaseId.projectId)throw new Re(ce.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Re(ce.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Ge(cR(t))}function CS(n,e){return DS(n.databaseId,e)}function lR(n){const e=uR(n);return 4===e.length?qt.emptyPath():cR(e)}function Lw(n){return new qt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function cR(n){return Tt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function dR(n,e,t){return{name:Fw(n,e),fields:t.value.mapValue.fields}}function hR(n,e,t){const r=tl(n,e.name),s=li(e.updateTime),u=new $e({mapValue:{fields:e.fields}}),c=ye.newFoundDocument(r,s,u);return t&&c.setHasCommittedMutations(),t?c.setHasCommittedMutations():c}function Vw(n,e){let t;if(e instanceof ry)t={update:dR(n,e.key,e.value)};else if(e instanceof iy)t={delete:Fw(n,e.key)};else if(e instanceof Nc)t={update:dR(n,e.key,e.data),updateMask:zk(e.fieldMask)};else{if(!(e instanceof bS))return et();t={verify:Fw(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(s,u){const c=u.transform;if(c instanceof ty)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof wp)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof Ep)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof ny)return{fieldPath:u.field.canonicalString(),increment:c.yt};throw et()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(s=e.precondition).updateTime?{updateTime:Fk(n,s.updateTime)}:void 0!==s.exists?{exists:s.exists}:et()),t;var s}function TS(n,e){const t=e.currentDocument?void 0!==(s=e.currentDocument).updateTime?Jn.updateTime(li(s.updateTime)):void 0!==s.exists?Jn.exists(s.exists):Jn.none():Jn.none(),r=e.updateTransforms?e.updateTransforms.map(s=>function(u,c){let m=null;"setToServerValue"in c?(Tt("REQUEST_TIME"===c.setToServerValue),m=new ty):"appendMissingElements"in c?m=new wp(c.appendMissingElements.values||[]):"removeAllFromArray"in c?m=new Ep(c.removeAllFromArray.values||[]):"increment"in c?m=new ny(u,c.increment):et();const v=Zn.fromServerFormat(c.fieldPath);return new xw(v,m)}(n,s)):[];var s;if(e.update){const s=tl(n,e.update.name),u=new $e({mapValue:{fields:e.update.fields}});if(e.updateMask){const c=new ps((e.updateMask.fieldPaths||[]).map(b=>Zn.fromServerFormat(b)));return new Nc(s,u,c,t,r)}return new ry(s,u,t,r)}if(e.delete){const s=tl(n,e.delete);return new iy(s,t)}if(e.verify){const s=tl(n,e.verify);return new bS(s,t)}return et()}function fR(n,e){return{documents:[CS(n,e.path)]}}function pR(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=CS(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=CS(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const s=function(v){if(0===v.length)return;const b=v.map(A=>function(M){if("=="===M.op){if(T(M.value))return{unaryFilter:{field:sy(M.field),op:"IS_NAN"}};if(I(M.value))return{unaryFilter:{field:sy(M.field),op:"IS_NULL"}}}else if("!="===M.op){if(T(M.value))return{unaryFilter:{field:sy(M.field),op:"IS_NOT_NAN"}};if(I(M.value))return{unaryFilter:{field:sy(M.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:sy(M.field),op:$k(M.op),value:M.value}}}(A));return 1===b.length?b[0]:{compositeFilter:{op:"AND",filters:b}}}(e.filters);s&&(t.structuredQuery.where=s);const u=function(v){if(0!==v.length)return v.map(b=>{return{field:sy((A=b).field),direction:jk(A.dir)};var A})}(e.orderBy);u&&(t.structuredQuery.orderBy=u);const c=(b=e.limit,n.gt||vp(b)?b:{value:b});var b,m,v;return null!==c&&(t.structuredQuery.limit=c),e.startAt&&(t.structuredQuery.startAt={before:(m=e.startAt).inclusive,values:m.position}),e.endAt&&(t.structuredQuery.endAt={before:!(v=e.endAt).inclusive,values:v.position}),t}function gR(n){let e=lR(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let s=null;if(r>0){Tt(1===r);const A=t.from[0];A.allDescendants?s=A.collectionId:e=e.child(A.collectionId)}let u=[];t.where&&(u=mR(t.where));let c=[];t.orderBy&&(c=t.orderBy.map(A=>{return new Jm(oy((M=A).field),function(L){switch(L){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(M.direction));var M}));let m=null;t.limit&&(m=function(A){let M;return M="object"==typeof A?A.value:A,vp(M)?null:M}(t.limit));let v=null;var A;t.startAt&&(v=new wh((A=t.startAt).values||[],!!A.before));let b=null;return t.endAt&&(b=function(A){return new wh(A.values||[],!A.before)}(t.endAt)),OM(e,s,c,u,m,"F",v,b)}function mR(n){return n?void 0!==n.unaryFilter?[Gk(n)]:void 0!==n.fieldFilter?[Hk(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>mR(e)).reduce((e,t)=>e.concat(t)):et():[]}function jk(n){return Ok[n]}function $k(n){return kk[n]}function sy(n){return{fieldPath:n.canonicalString()}}function oy(n){return Zn.fromServerFormat(n.fieldPath)}function Hk(n){return Dr.create(oy(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return et()}}(n.fieldFilter.op),n.fieldFilter.value)}function Gk(n){switch(n.unaryFilter.op){case"IS_NAN":const e=oy(n.unaryFilter.field);return Dr.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=oy(n.unaryFilter.field);return Dr.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=oy(n.unaryFilter.field);return Dr.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=oy(n.unaryFilter.field);return Dr.create(s,"!=",{nullValue:"NULL_VALUE"});default:return et()}}function zk(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function yR(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function gs(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=_R(e)),e=qk(n.get(t),e);return _R(e)}function qk(n,e){let t=e;const r=n.length;for(let s=0;s<r;s++){const u=n.charAt(s);switch(u){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=u}}return t}function _R(n){return n+"\x01\x01"}function nl(n){const e=n.length;if(Tt(e>=2),2===e)return Tt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),qt.emptyPath();const t=e-2,r=[];let s="";for(let u=0;u<e;){const c=n.indexOf("\x01",u);switch((c<0||c>t)&&et(),n.charAt(c+1)){case"\x01":const m=n.substring(u,c);let v;0===s.length?v=m:(s+=m,v=s,s=""),r.push(v);break;case"\x10":s+=n.substring(u,c),s+="\0";break;case"\x11":s+=n.substring(u,c+1);break;default:et()}u=c+2}return new qt(r)}const vR=["userId","batchId"];function Fb(n,e){return[n,gs(e)]}function wR(n,e,t){return[n,gs(e),t]}const Wk={},Kk=["prefixPath","collectionGroup","readTime","documentId"],Zk=["prefixPath","collectionGroup","documentId"],Yk=["collectionGroup","readTime","prefixPath","documentId"],Qk=["canonicalId","targetId"],Jk=["targetId","path"],Xk=["path","targetId"],eP=["collectionId","parent"],tP=["indexId","uid"],nP=["uid","sequenceNumber"],rP=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],iP=["indexId","uid","orderedDocumentKey"],sP=["userId","collectionPath","documentId"],oP=["userId","collectionPath","largestBatchId"],aP=["userId","collectionGroup","largestBatchId"],ER=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],uP=[...ER,"documentOverlays"],IR=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],bR=IR,lP=[...bR,"indexConfiguration","indexState","indexEntries"];class SS extends qm{constructor(e,t){super(),this.ie=e,this.currentSequenceNumber=t}}function ci(n,e){const t=We(n);return ji.O(t.ie,e)}class AS{constructor(e,t,r,s){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let s=0;s<this.mutations.length;s++){const u=this.mutations[s];u.key.isEqual(e.key)&&Ck(u,e,r[s])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Mw(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Mw(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=tR();return this.mutations.forEach(s=>{const u=e.get(s.key),c=u.overlayedDocument;let m=this.applyToLocalView(c,u.mutatedFields);m=t.has(s.key)?null:m;const v=qM(c,m);null!==v&&r.set(s.key,v),c.isValidDocument()||c.convertToNoDocument(Ct.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Vt())}isEqual(e){return this.batchId===e.batchId&&Dc(this.mutations,e.mutations,(t,r)=>WM(t,r))&&Dc(this.baseMutations,e.baseMutations,(t,r)=>WM(t,r))}}class xS{constructor(e,t,r,s){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=s}static from(e,t,r){Tt(e.mutations.length===r.length);let s=xk;const u=e.mutations;for(let c=0;c<u.length;c++)s=s.insert(u[c].key,r[c].version);return new xS(e,t,r,s)}}class MS{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Ih{constructor(e,t,r,s,u=Ct.min(),c=Ct.min(),m=Pr.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=m}withSequenceNumber(e){return new Ih(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new Ih(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Ih(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class DR{constructor(e){this.re=e}}function CR(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Lb(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:Fw(s=n.re,(u=e).key),fields:u.data.value.mapValue.fields,updateTime:Pw(s,u.version.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Ip(e.version)};else{if(!e.isUnknownDocument())return et();r.unknownDocument={path:t.path.toArray(),version:Ip(e.version)}}var s,u;return r}function Lb(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Ip(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function bp(n){const e=new Rn(n.seconds,n.nanoseconds);return Ct.fromTimestamp(e)}function Dp(n,e){const t=(e.baseMutations||[]).map(u=>TS(n.re,u));for(let u=0;u<e.mutations.length-1;++u){const c=e.mutations[u];u+1<e.mutations.length&&void 0!==e.mutations[u+1].transform&&(c.updateTransforms=e.mutations[u+1].transform.fieldTransforms,e.mutations.splice(u+1,1),++u)}const r=e.mutations.map(u=>TS(n.re,u)),s=Rn.fromMillis(e.localWriteTimeMs);return new AS(e.batchId,s,t,r)}function Uw(n){const e=bp(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?bp(n.lastLimboFreeSnapshotVersion):Ct.min();let r;var s;return void 0!==n.query.documents?(Tt(1===(s=n.query).documents.length),r=Hs(Xm(lR(s.documents[0])))):r=Hs(gR(n.query)),new Ih(r,n.targetId,0,n.lastListenSequenceNumber,e,t,Pr.fromBase64String(n.resumeToken))}function TR(n,e){const t=Ip(e.snapshotVersion),r=Ip(e.lastLimboFreeSnapshotVersion);let s;s=_h(e.target)?fR(n.re,e.target):pR(n.re,e.target);const u=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:sn(e.target),readTime:t,resumeToken:u,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:s}}function RS(n){const e=gR({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?Mb(e,e.limit,"L"):e}function NS(n,e){return new MS(e.largestBatchId,TS(n.re,e.overlayMutation))}function SR(n,e){const t=e.path.lastSegment();return[n,gs(e.path.popLast()),t]}function AR(n,e,t,r){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:Ip(r.readTime),documentKey:gs(r.documentKey.path),largestBatchId:r.largestBatchId}}class dP{getBundleMetadata(e,t){return xR(e).get(t).next(r=>{if(r)return{id:(s=r).bundleId,createTime:bp(s.createTime),version:s.version};var s})}saveBundleMetadata(e,t){return xR(e).put({bundleId:(r=t).id,createTime:Ip(li(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return MR(e).get(t).next(r=>{if(r)return{name:(s=r).name,query:RS(s.bundledQuery),readTime:bp(s.readTime)};var s})}saveNamedQuery(e,t){return MR(e).put({name:(r=t).name,readTime:Ip(li(r.readTime)),bundledQuery:r.bundledQuery});var r}}function xR(n){return ci(n,"bundles")}function MR(n){return ci(n,"namedQueries")}class Vb{constructor(e,t){this.It=e,this.userId=t}static oe(e,t){return new Vb(e,t.uid||"")}getOverlay(e,t){return Bw(e).get(SR(this.userId,t)).next(r=>r?NS(this.It,r):null)}getOverlays(e,t){const r=el();return se.forEach(t,s=>this.getOverlay(e,s).next(u=>{null!==u&&r.set(s,u)})).next(()=>r)}saveOverlays(e,t,r){const s=[];return r.forEach((u,c)=>{const m=new MS(t,c);s.push(this.ue(e,m))}),se.waitFor(s)}removeOverlaysForBatchId(e,t,r){const s=new Set;t.forEach(c=>s.add(gs(c.getCollectionPath())));const u=[];return s.forEach(c=>{const m=IDBKeyRange.bound([this.userId,c,r],[this.userId,c,r+1],!1,!0);u.push(Bw(e).Y("collectionPathOverlayIndex",m))}),se.waitFor(u)}getOverlaysForCollection(e,t,r){const s=el(),u=gs(t),c=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,Number.POSITIVE_INFINITY],!0);return Bw(e).W("collectionPathOverlayIndex",c).next(m=>{for(const v of m){const b=NS(this.It,v);s.set(b.getKey(),b)}return s})}getOverlaysForCollectionGroup(e,t,r,s){const u=el();let c;const m=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Bw(e).Z({index:"collectionGroupOverlayIndex",range:m},(v,b,A)=>{const M=NS(this.It,b);u.size()<s||M.largestBatchId===c?(u.set(M.getKey(),M),c=M.largestBatchId):A.done()}).next(()=>u)}ue(e,t){return Bw(e).put(function(r,s,u){const[c,m,v]=SR(s,u.mutation.key);return{userId:s,collectionPath:m,documentId:v,collectionGroup:u.mutation.key.getCollectionGroup(),largestBatchId:u.largestBatchId,overlayMutation:Vw(r.re,u.mutation)}}(this.It,this.userId,t))}}function Bw(n){return ci(n,"documentOverlays")}class Cp{constructor(){}ce(e,t){this.ae(e,t),t.he()}ae(e,t){if("nullValue"in e)this.le(t,5);else if("booleanValue"in e)this.le(t,10),t.fe(e.booleanValue?1:0);else if("integerValue"in e)this.le(t,15),t.fe(Qn(e.integerValue));else if("doubleValue"in e){const r=Qn(e.doubleValue);isNaN(r)?this.le(t,13):(this.le(t,15),Zm(r)?t.fe(0):t.fe(r))}else if("timestampValue"in e){const r=e.timestampValue;this.le(t,20),"string"==typeof r?t.de(r):(t.de(`${r.seconds||""}`),t.fe(r.nanos||0))}else if("stringValue"in e)this._e(e.stringValue,t),this.we(t);else if("bytesValue"in e)this.le(t,30),t.me(Tc(e.bytesValue)),this.we(t);else if("referenceValue"in e)this.ge(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.le(t,45),t.fe(r.latitude||0),t.fe(r.longitude||0)}else"mapValue"in e?z(e)?this.le(t,Number.MAX_SAFE_INTEGER):(this.ye(e.mapValue,t),this.we(t)):"arrayValue"in e?(this.pe(e.arrayValue,t),this.we(t)):et()}_e(e,t){this.le(t,25),this.Ie(e,t)}Ie(e,t){t.de(e)}ye(e,t){const r=e.fields||{};this.le(t,55);for(const s of Object.keys(r))this._e(s,t),this.ae(r[s],t)}pe(e,t){const r=e.values||[];this.le(t,50);for(const s of r)this.ae(s,t)}ge(e,t){this.le(t,37),Ge.fromName(e).path.forEach(r=>{this.le(t,60),this.Ie(r,t)})}le(e,t){e.fe(t)}we(e){e.fe(2)}}function hP(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function RR(n){const e=64-function(t){let r=0;for(let s=0;s<8;++s){const u=hP(255&t[s]);if(r+=u,8!==u)break}return r}(n);return Math.ceil(e/8)}Cp.Te=new Cp;class fP{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ee(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ae(r.value),r=t.next();this.Re()}be(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Pe(r.value),r=t.next();this.ve()}Ve(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ae(r);else if(r<2048)this.Ae(960|r>>>6),this.Ae(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ae(480|r>>>12),this.Ae(128|63&r>>>6),this.Ae(128|63&r);else{const s=t.codePointAt(0);this.Ae(240|s>>>18),this.Ae(128|63&s>>>12),this.Ae(128|63&s>>>6),this.Ae(128|63&s)}}this.Re()}Se(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Pe(r);else if(r<2048)this.Pe(960|r>>>6),this.Pe(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Pe(480|r>>>12),this.Pe(128|63&r>>>6),this.Pe(128|63&r);else{const s=t.codePointAt(0);this.Pe(240|s>>>18),this.Pe(128|63&s>>>12),this.Pe(128|63&s>>>6),this.Pe(128|63&s)}}this.ve()}De(e){const t=this.Ce(e),r=RR(t);this.xe(1+r),this.buffer[this.position++]=255&r;for(let s=t.length-r;s<t.length;++s)this.buffer[this.position++]=255&t[s]}Ne(e){const t=this.Ce(e),r=RR(t);this.xe(1+r),this.buffer[this.position++]=~(255&r);for(let s=t.length-r;s<t.length;++s)this.buffer[this.position++]=~(255&t[s])}ke(){this.Me(255),this.Me(255)}Oe(){this.Fe(255),this.Fe(255)}reset(){this.position=0}seed(e){this.xe(e.length),this.buffer.set(e,this.position),this.position+=e.length}$e(){return this.buffer.slice(0,this.position)}Ce(e){const t=function(s){const u=new DataView(new ArrayBuffer(8));return u.setFloat64(0,s,!1),new Uint8Array(u.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let s=1;s<t.length;++s)t[s]^=r?255:0;return t}Ae(e){const t=255&e;0===t?(this.Me(0),this.Me(255)):255===t?(this.Me(255),this.Me(0)):this.Me(t)}Pe(e){const t=255&e;0===t?(this.Fe(0),this.Fe(255)):255===t?(this.Fe(255),this.Fe(0)):this.Fe(e)}Re(){this.Me(0),this.Me(1)}ve(){this.Fe(0),this.Fe(1)}Me(e){this.xe(1),this.buffer[this.position++]=e}Fe(e){this.xe(1),this.buffer[this.position++]=~e}xe(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const s=new Uint8Array(r);s.set(this.buffer),this.buffer=s}}class pP{constructor(e){this.Be=e}me(e){this.Be.Ee(e)}de(e){this.Be.Ve(e)}fe(e){this.Be.De(e)}he(){this.Be.ke()}}class gP{constructor(e){this.Be=e}me(e){this.Be.be(e)}de(e){this.Be.Se(e)}fe(e){this.Be.Ne(e)}he(){this.Be.Oe()}}class jw{constructor(){this.Be=new fP,this.Le=new pP(this.Be),this.Ue=new gP(this.Be)}seed(e){this.Be.seed(e)}qe(e){return 0===e?this.Le:this.Ue}$e(){return this.Be.$e()}reset(){this.Be.reset()}}class Tp{constructor(e,t,r,s){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=s}Ke(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Tp(this.indexId,this.documentKey,this.arrayValue,r)}}function Sp(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=NR(n.arrayValue,e.arrayValue),0!==t?t:(t=NR(n.directionalValue,e.directionalValue),0!==t?t:Ge.comparator(n.documentKey,e.documentKey)))}function NR(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class mP{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ge=e.orderBy,this.Qe=[];for(const t of e.filters){const r=t;r.dt()?this.je=r:this.Qe.push(r)}}We(e){const t=Db(e);if(void 0!==t&&!this.ze(t))return!1;const r=gh(e);let s=0,u=0;for(;s<r.length&&this.ze(r[s]);++s);if(s===r.length)return!0;if(void 0!==this.je){const c=r[s];if(!this.He(this.je,c)||!this.Je(this.Ge[u++],c))return!1;++s}for(;s<r.length;++s){const c=r[s];if(u>=this.Ge.length||!this.Je(this.Ge[u++],c))return!1}return!0}ze(e){for(const t of this.Qe)if(this.He(t,e))return!0;return!1}He(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Je(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class yP{constructor(){this.Ye=new OS}addToCollectionParentIndex(e,t){return this.Ye.add(t),se.resolve()}getCollectionParents(e,t){return se.resolve(this.Ye.getEntries(t))}addFieldIndex(e,t){return se.resolve()}deleteFieldIndex(e,t){return se.resolve()}getDocumentsMatchingTarget(e,t){return se.resolve(null)}getIndexType(e,t){return se.resolve(0)}getFieldIndexes(e,t){return se.resolve([])}getNextCollectionGroupToUpdate(e){return se.resolve(null)}getMinOffset(e,t){return se.resolve(Bi.min())}getMinOffsetFromCollectionGroup(e,t){return se.resolve(Bi.min())}updateCollectionGroup(e,t,r){return se.resolve()}updateIndexEntries(e,t){return se.resolve()}}class OS{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t]||new mn(qt.comparator),u=!s.has(r);return this.index[t]=s.add(r),u}has(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t];return s&&s.has(r)}getEntries(e){return(this.index[e]||new mn(qt.comparator)).toArray()}}const Ub=new Uint8Array(0);class _P{constructor(e,t){this.user=e,this.databaseId=t,this.Xe=new OS,this.Ze=new Eh(r=>sn(r),(r,s)=>Mc(r,s)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Xe.has(t)){const r=t.lastSegment(),s=t.popLast();e.addOnCommittedListener(()=>{this.Xe.add(t)});const u={collectionId:r,parent:gs(s)};return OR(e).put(u)}return se.resolve()}getCollectionParents(e,t){const r=[],s=IDBKeyRange.bound([t,""],[bb(t),""],!1,!0);return OR(e).W(s).next(u=>{for(const c of u){if(c.collectionId!==t)break;r.push(nl(c.parent))}return r})}addFieldIndex(e,t){const r=Bb(e),s={indexId:(c=t).indexId,collectionGroup:c.collectionGroup,fields:c.fields.map(m=>[m.fieldPath.canonicalString(),m.kind])};var c;delete s.indexId;const u=r.add(s);if(t.indexState){const c=Hw(e);return u.next(m=>{c.put(AR(m,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return u.next()}deleteFieldIndex(e,t){const r=Bb(e),s=Hw(e),u=$w(e);return r.delete(t.indexId).next(()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>u.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=$w(e);let s=!0;const u=new Map;return se.forEach(this.tn(t),c=>this.en(e,c).next(m=>{s&&(s=!!m),u.set(c,m)})).next(()=>{if(s){let c=Vt();const m=[];return se.forEach(u,(v,b)=>{var A;ke("IndexedDbIndexManager",`Using index ${A=v,`id=${A.indexId}|cg=${A.collectionGroup}|f=${A.fields.map(lt=>`${lt.fieldPath}:${lt.kind}`).join(",")}`} to execute ${sn(t)}`);const M=function(lt,tt){const bt=Db(tt);if(void 0===bt)return null;for(const kt of vh(lt,bt.fieldPath))switch(kt.op){case"array-contains-any":return kt.value.arrayValue.values||[];case"array-contains":return[kt.value]}return null}(b,v),L=function(lt,tt){const bt=new Map;for(const kt of gh(tt))for(const ar of vh(lt,kt.fieldPath))switch(ar.op){case"==":case"in":bt.set(kt.fieldPath.canonicalString(),ar.value);break;case"not-in":case"!=":return bt.set(kt.fieldPath.canonicalString(),ar.value),Array.from(bt.values())}return null}(b,v),G=function(lt,tt){const bt=[];let kt=!0;for(const ar of gh(tt)){const Za=0===ar.kind?Ym(lt,ar.fieldPath,lt.startAt):Qm(lt,ar.fieldPath,lt.startAt);bt.push(Za.value),kt&&(kt=Za.inclusive)}return new wh(bt,kt)}(b,v),Q=function(lt,tt){const bt=[];let kt=!0;for(const ar of gh(tt)){const Za=0===ar.kind?Qm(lt,ar.fieldPath,lt.endAt):Ym(lt,ar.fieldPath,lt.endAt);bt.push(Za.value),kt&&(kt=Za.inclusive)}return new wh(bt,kt)}(b,v),be=this.nn(v,b,G),Te=this.nn(v,b,Q),Ze=this.sn(v,b,L),ut=this.rn(v.indexId,M,be,G.inclusive,Te,Q.inclusive,Ze);return se.forEach(ut,lt=>r.J(lt,t.limit).next(tt=>{tt.forEach(bt=>{const kt=Ge.fromSegments(bt.documentKey);c.has(kt)||(c=c.add(kt),m.push(kt))})}))}).next(()=>m)}return se.resolve(null)})}tn(e){let t=this.Ze.get(e);return t||(t=[e],this.Ze.set(e,t),t)}rn(e,t,r,s,u,c,m){const v=(null!=t?t.length:1)*Math.max(r.length,u.length),b=v/(null!=t?t.length:1),A=[];for(let M=0;M<v;++M){const L=t?this.on(t[M/b]):Ub,G=this.un(e,L,r[M%b],s),Q=this.cn(e,L,u[M%b],c),be=m.map(Te=>this.un(e,L,Te,!0));A.push(...this.createRange(G,Q,be))}return A}un(e,t,r,s){const u=new Tp(e,Ge.empty(),t,r);return s?u:u.Ke()}cn(e,t,r,s){const u=new Tp(e,Ge.empty(),t,r);return s?u.Ke():u}en(e,t){const r=new mP(t),s=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,s).next(u=>{let c=null;for(const m of u)r.We(m)&&(!c||m.fields.length>c.fields.length)&&(c=m);return c})}getIndexType(e,t){let r=2;return se.forEach(this.tn(t),s=>this.en(e,s).next(u=>{u?0!==r&&u.fields.length<function(c){let m=new mn(Zn.comparator),v=!1;for(const b of c.filters){const A=b;A.field.isKeyField()||("array-contains"===A.op||"array-contains-any"===A.op?v=!0:m=m.add(A.field))}for(const b of c.orderBy)b.field.isKeyField()||(m=m.add(b.field));return m.size+(v?1:0)}(s)&&(r=1):r=0})).next(()=>r)}an(e,t){const r=new jw;for(const s of gh(e)){const u=t.data.field(s.fieldPath);if(null==u)return null;const c=r.qe(s.kind);Cp.Te.ce(u,c)}return r.$e()}on(e){const t=new jw;return Cp.Te.ce(e,t.qe(0)),t.$e()}hn(e,t){const r=new jw;return Cp.Te.ce(f(this.databaseId,t),r.qe(function(s){const u=gh(s);return 0===u.length?0:u[u.length-1].kind}(e))),r.$e()}sn(e,t,r){if(null===r)return[];let s=[];s.push(new jw);let u=0;for(const c of gh(e)){const m=r[u++];for(const v of s)if(this.ln(t,c.fieldPath)&&E(m))s=this.fn(s,c,m);else{const b=v.qe(c.kind);Cp.Te.ce(m,b)}}return this.dn(s)}nn(e,t,r){return this.sn(e,t,r.position)}dn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].$e();return t}fn(e,t,r){const s=[...e],u=[];for(const c of r.arrayValue.values||[])for(const m of s){const v=new jw;v.seed(m.$e()),Cp.Te.ce(c,v.qe(t.kind)),u.push(v)}return u}ln(e,t){return!!e.filters.find(r=>r instanceof Dr&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=Bb(e),s=Hw(e);return(t?r.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.W()).next(u=>{const c=[];return se.forEach(u,m=>s.get([m.indexId,this.uid]).next(v=>{c.push(function(b,A){const M=A?new Zu(A.sequenceNumber,new Bi(bp(A.readTime),new Ge(nl(A.documentKey)),A.largestBatchId)):Zu.empty(),L=b.fields.map(([G,Q])=>new _w(Zn.fromServerFormat(G),Q));return new yw(b.indexId,b.collectionGroup,L,M)}(m,v))})).next(()=>c)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,s)=>{const u=r.indexState.sequenceNumber-s.indexState.sequenceNumber;return 0!==u?u:At(r.collectionGroup,s.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const s=Bb(e),u=Hw(e);return this._n(e).next(c=>s.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(m=>se.forEach(m,v=>u.put(AR(v.indexId,this.user,c,r)))))}updateIndexEntries(e,t){const r=new Map;return se.forEach(t,(s,u)=>{const c=r.get(s.collectionGroup);return(c?se.resolve(c):this.getFieldIndexes(e,s.collectionGroup)).next(m=>(r.set(s.collectionGroup,m),se.forEach(m,v=>this.wn(e,s,v).next(b=>{const A=this.mn(u,v);return b.isEqual(A)?se.resolve():this.gn(e,u,v,b,A)}))))})}yn(e,t,r,s){return $w(e).put({indexId:s.indexId,uid:this.uid,arrayValue:s.arrayValue,directionalValue:s.directionalValue,orderedDocumentKey:this.hn(r,t.key),documentKey:t.key.path.toArray()})}pn(e,t,r,s){return $w(e).delete([s.indexId,this.uid,s.arrayValue,s.directionalValue,this.hn(r,t.key),t.key.path.toArray()])}wn(e,t,r){const s=$w(e);let u=new mn(Sp);return s.Z({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.hn(r,t)])},(c,m)=>{u=u.add(new Tp(r.indexId,t,m.arrayValue,m.directionalValue))}).next(()=>u)}mn(e,t){let r=new mn(Sp);const s=this.an(t,e);if(null==s)return r;const u=Db(t);if(null!=u){const c=e.data.field(u.fieldPath);if(E(c))for(const m of c.arrayValue.values||[])r=r.add(new Tp(t.indexId,e.key,this.on(m),s))}else r=r.add(new Tp(t.indexId,e.key,Ub,s));return r}gn(e,t,r,s,u){ke("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const c=[];return function(m,v,b,A,M){const L=m.getIterator(),G=v.getIterator();let Q=Ju(L),be=Ju(G);for(;Q||be;){let Te=!1,Ze=!1;if(Q&&be){const ut=b(Q,be);ut<0?Ze=!0:ut>0&&(Te=!0)}else null!=Q?Ze=!0:Te=!0;Te?(A(be),be=Ju(G)):Ze?(M(Q),Q=Ju(L)):(Q=Ju(L),be=Ju(G))}}(s,u,Sp,m=>{c.push(this.yn(e,t,r,m))},m=>{c.push(this.pn(e,t,r,m))}),se.waitFor(c)}_n(e){let t=1;return Hw(e).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,s,u)=>{u.done(),t=s.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((c,m)=>Sp(c,m)).filter((c,m,v)=>!m||0!==Sp(c,v[m-1]));const s=[];s.push(e);for(const c of r){const m=Sp(c,e),v=Sp(c,t);if(0===m)s[0]=e.Ke();else if(m>0&&v<0)s.push(c),s.push(c.Ke());else if(v>0)break}s.push(t);const u=[];for(let c=0;c<s.length;c+=2)u.push(IDBKeyRange.bound([s[c].indexId,this.uid,s[c].arrayValue,s[c].directionalValue,Ub,[]],[s[c+1].indexId,this.uid,s[c+1].arrayValue,s[c+1].directionalValue,Ub,[]]));return u}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(kR)}getMinOffset(e,t){return se.mapArray(this.tn(t),r=>this.en(e,r).next(s=>s||et())).next(kR)}}function OR(n){return ci(n,"collectionParents")}function $w(n){return ci(n,"indexEntries")}function Bb(n){return ci(n,"indexConfiguration")}function Hw(n){return ci(n,"indexState")}function kR(n){Tt(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const s=n[r].indexState.offset;qa(s,e)<0&&(e=s),t<s.largestBatchId&&(t=s.largestBatchId)}return new Bi(e.readTime,e.documentKey,t)}const PR={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class zs{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new zs(e,zs.DEFAULT_COLLECTION_PERCENTILE,zs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function FR(n,e,t){const r=n.store("mutations"),s=n.store("documentMutations"),u=[],c=IDBKeyRange.only(t.batchId);let m=0;const v=r.Z({range:c},(A,M,L)=>(m++,L.delete()));u.push(v.next(()=>{Tt(1===m)}));const b=[];for(const A of t.mutations){const M=wR(e,A.key.path,t.batchId);u.push(s.delete(M)),b.push(A.key)}return se.waitFor(u).next(()=>b)}function jb(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw et();e=n.noDocument}return JSON.stringify(e).length}zs.DEFAULT_COLLECTION_PERCENTILE=10,zs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,zs.DEFAULT=new zs(41943040,zs.DEFAULT_COLLECTION_PERCENTILE,zs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),zs.DISABLED=new zs(-1,0,0);class $b{constructor(e,t,r,s){this.userId=e,this.It=t,this.indexManager=r,this.referenceDelegate=s,this.In={}}static oe(e,t,r,s){Tt(""!==e.uid);const u=e.isAuthenticated()?e.uid:"";return new $b(u,t,r,s)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return bh(e).Z({index:"userMutationsIndex",range:r},(s,u,c)=>{t=!1,c.done()}).next(()=>t)}addMutationBatch(e,t,r,s){const u=ay(e),c=bh(e);return c.add({}).next(m=>{Tt("number"==typeof m);const v=new AS(m,t,r,s),b=function(L,G,Q){const be=Q.baseMutations.map(Ze=>Vw(L.re,Ze)),Te=Q.mutations.map(Ze=>Vw(L.re,Ze));return{userId:G,batchId:Q.batchId,localWriteTimeMs:Q.localWriteTime.toMillis(),baseMutations:be,mutations:Te}}(this.It,this.userId,v),A=[];let M=new mn((L,G)=>At(L.canonicalString(),G.canonicalString()));for(const L of s){const G=wR(this.userId,L.key.path,m);M=M.add(L.key.path.popLast()),A.push(c.put(b)),A.push(u.put(G,Wk))}return M.forEach(L=>{A.push(this.indexManager.addToCollectionParentIndex(e,L))}),e.addOnCommittedListener(()=>{this.In[m]=v.keys()}),se.waitFor(A).next(()=>v)})}lookupMutationBatch(e,t){return bh(e).get(t).next(r=>r?(Tt(r.userId===this.userId),Dp(this.It,r)):null)}Tn(e,t){return this.In[t]?se.resolve(this.In[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const s=r.keys();return this.In[t]=s,s}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,s=IDBKeyRange.lowerBound([this.userId,r]);let u=null;return bh(e).Z({index:"userMutationsIndex",range:s},(c,m,v)=>{m.userId===this.userId&&(Tt(m.batchId>=r),u=Dp(this.It,m)),v.done()}).next(()=>u)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return bh(e).Z({index:"userMutationsIndex",range:t,reverse:!0},(s,u,c)=>{r=u.batchId,c.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return bh(e).W("userMutationsIndex",t).next(r=>r.map(s=>Dp(this.It,s)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=Fb(this.userId,t.path),s=IDBKeyRange.lowerBound(r),u=[];return ay(e).Z({range:s},(c,m,v)=>{const[b,A,M]=c,L=nl(A);if(b===this.userId&&t.path.isEqual(L))return bh(e).get(M).next(G=>{if(!G)throw et();Tt(G.userId===this.userId),u.push(Dp(this.It,G))});v.done()}).next(()=>u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new mn(At);const s=[];return t.forEach(u=>{const c=Fb(this.userId,u.path),m=IDBKeyRange.lowerBound(c),v=ay(e).Z({range:m},(b,A,M)=>{const[L,G,Q]=b,be=nl(G);L===this.userId&&u.path.isEqual(be)?r=r.add(Q):M.done()});s.push(v)}),se.waitFor(s).next(()=>this.En(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,s=r.length+1,u=Fb(this.userId,r),c=IDBKeyRange.lowerBound(u);let m=new mn(At);return ay(e).Z({range:c},(v,b,A)=>{const[M,L,G]=v,Q=nl(L);M===this.userId&&r.isPrefixOf(Q)?Q.length===s&&(m=m.add(G)):A.done()}).next(()=>this.En(e,m))}En(e,t){const r=[],s=[];return t.forEach(u=>{s.push(bh(e).get(u).next(c=>{if(null===c)throw et();Tt(c.userId===this.userId),r.push(Dp(this.It,c))}))}),se.waitFor(s).next(()=>r)}removeMutationBatch(e,t){return FR(e.ie,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.An(t.batchId)}),se.forEach(r,s=>this.referenceDelegate.markPotentiallyOrphaned(e,s))))}An(e){delete this.In[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return se.resolve();const r=IDBKeyRange.lowerBound([this.userId]),s=[];return ay(e).Z({range:r},(u,c,m)=>{if(u[0]===this.userId){const v=nl(u[1]);s.push(v)}else m.done()}).next(()=>{Tt(0===s.length)})})}containsKey(e,t){return LR(e,this.userId,t)}Rn(e){return VR(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function LR(n,e,t){const r=Fb(e,t.path),s=r[1],u=IDBKeyRange.lowerBound(r);let c=!1;return ay(n).Z({range:u,X:!0},(m,v,b)=>{const[A,M,L]=m;A===e&&M===s&&(c=!0),b.done()}).next(()=>c)}function bh(n){return ci(n,"mutations")}function ay(n){return ci(n,"documentMutations")}function VR(n){return ci(n,"mutationQueues")}class Ap{constructor(e){this.bn=e}next(){return this.bn+=2,this.bn}static Pn(){return new Ap(0)}static vn(){return new Ap(-1)}}class vP{constructor(e,t){this.referenceDelegate=e,this.It=t}allocateTargetId(e){return this.Vn(e).next(t=>{const r=new Ap(t.highestTargetId);return t.highestTargetId=r.next(),this.Sn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Vn(e).next(t=>Ct.fromTimestamp(new Rn(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Vn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.Vn(e).next(s=>(s.highestListenSequenceNumber=t,r&&(s.lastRemoteSnapshotVersion=r.toTimestamp()),t>s.highestListenSequenceNumber&&(s.highestListenSequenceNumber=t),this.Sn(e,s)))}addTargetData(e,t){return this.Dn(e,t).next(()=>this.Vn(e).next(r=>(r.targetCount+=1,this.Cn(t,r),this.Sn(e,r))))}updateTargetData(e,t){return this.Dn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>uy(e).delete(t.targetId)).next(()=>this.Vn(e)).next(r=>(Tt(r.targetCount>0),r.targetCount-=1,this.Sn(e,r)))}removeTargets(e,t,r){let s=0;const u=[];return uy(e).Z((c,m)=>{const v=Uw(m);v.sequenceNumber<=t&&null===r.get(v.targetId)&&(s++,u.push(this.removeTargetData(e,v)))}).next(()=>se.waitFor(u)).next(()=>s)}forEachTarget(e,t){return uy(e).Z((r,s)=>{const u=Uw(s);t(u)})}Vn(e){return UR(e).get("targetGlobalKey").next(t=>(Tt(null!==t),t))}Sn(e,t){return UR(e).put("targetGlobalKey",t)}Dn(e,t){return uy(e).put(TR(this.It,t))}Cn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Vn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=sn(t),s=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let u=null;return uy(e).Z({range:s,index:"queryTargetsIndex"},(c,m,v)=>{const b=Uw(m);Mc(t,b.target)&&(u=b,v.done())}).next(()=>u)}addMatchingKeys(e,t,r){const s=[],u=Dh(e);return t.forEach(c=>{const m=gs(c.path);s.push(u.put({targetId:r,path:m})),s.push(this.referenceDelegate.addReference(e,r,c))}),se.waitFor(s)}removeMatchingKeys(e,t,r){const s=Dh(e);return se.forEach(t,u=>{const c=gs(u.path);return se.waitFor([s.delete([r,c]),this.referenceDelegate.removeReference(e,r,u)])})}removeMatchingKeysForTargetId(e,t){const r=Dh(e),s=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(s)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),s=Dh(e);let u=Vt();return s.Z({range:r,X:!0},(c,m,v)=>{const b=nl(c[1]),A=new Ge(b);u=u.add(A)}).next(()=>u)}containsKey(e,t){const r=gs(t.path),s=IDBKeyRange.bound([r],[bb(r)],!1,!0);let u=0;return Dh(e).Z({index:"documentTargetsIndex",X:!0,range:s},([c,m],v,b)=>{0!==c&&(u++,b.done())}).next(()=>u>0)}se(e,t){return uy(e).get(t).next(r=>r?Uw(r):null)}}function uy(n){return ci(n,"targets")}function UR(n){return ci(n,"targetGlobal")}function Dh(n){return ci(n,"targetDocuments")}function BR([n,e],[t,r]){const s=At(n,t);return 0===s?At(e,r):s}class wP{constructor(e){this.xn=e,this.buffer=new mn(BR),this.Nn=0}kn(){return++this.Nn}Mn(e){const t=[e,this.kn()];if(this.buffer.size<this.xn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();BR(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class EP{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.On=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Fn(6e4)}stop(){this.On&&(this.On.cancel(),this.On=null)}get started(){return null!==this.On}Fn(e){var t=this;ke("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.On=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,_e.Z)(function*(){t.On=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){Cc(r)?ke("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield zo(r)}yield t.Fn(3e5)}))}}class IP{constructor(e,t){this.$n=e,this.params=t}calculateTargetCount(e,t){return this.$n.Bn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return se.resolve(Ti.at);const r=new wP(t);return this.$n.forEachTarget(e,s=>r.Mn(s.sequenceNumber)).next(()=>this.$n.Ln(e,s=>r.Mn(s))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.$n.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.$n.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(ke("LruGarbageCollector","Garbage collection skipped; disabled"),se.resolve(PR)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(ke("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),PR):this.Un(e,t))}getCacheSize(e){return this.$n.getCacheSize(e)}Un(e,t){let r,s,u,c,m,v,b;const A=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(M=>(M>this.params.maximumSequenceNumbersToCollect?(ke("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${M}`),s=this.params.maximumSequenceNumbersToCollect):s=M,c=Date.now(),this.nthSequenceNumber(e,s))).next(M=>(r=M,m=Date.now(),this.removeTargets(e,r,t))).next(M=>(u=M,v=Date.now(),this.removeOrphanedDocuments(e,r))).next(M=>(b=Date.now(),yp()<=jo.in.DEBUG&&ke("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${c-A}ms\n\tDetermined least recently used ${s} in `+(m-c)+`ms\n\tRemoved ${u} targets in `+(v-m)+`ms\n\tRemoved ${M} documents in `+(b-v)+`ms\nTotal Duration: ${b-A}ms`),se.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:u,documentsRemoved:M})))}}class bP{constructor(e,t){this.db=e,this.garbageCollector=new IP(this,t)}Bn(e){const t=this.qn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(s=>r+s))}qn(e){let t=0;return this.Ln(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Ln(e,t){return this.Kn(e,(r,s)=>t(s))}addReference(e,t,r){return Hb(e,r)}removeReference(e,t,r){return Hb(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return Hb(e,t)}Gn(e,t){return function(r,s){let u=!1;return VR(r).tt(c=>LR(r,c,s).next(m=>(m&&(u=!0),se.resolve(!m)))).next(()=>u)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),s=[];let u=0;return this.Kn(e,(c,m)=>{if(m<=t){const v=this.Gn(e,c).next(b=>{if(!b)return u++,r.getEntry(e,c).next(()=>(r.removeEntry(c,Ct.min()),Dh(e).delete([0,gs(c.path)])))});s.push(v)}}).next(()=>se.waitFor(s)).next(()=>r.apply(e)).next(()=>u)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return Hb(e,t)}Kn(e,t){const r=Dh(e);let s,u=Ti.at;return r.Z({index:"documentTargetsIndex"},([c,m],{path:v,sequenceNumber:b})=>{0===c?(u!==Ti.at&&t(new Ge(nl(s)),u),u=b,s=v):u=Ti.at}).next(()=>{u!==Ti.at&&t(new Ge(nl(s)),u)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Hb(n,e){return Dh(n).put((r=n.currentSequenceNumber,{targetId:0,path:gs(e.path),sequenceNumber:r}));var r}class jR{constructor(){this.changes=new Eh(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,ye.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?se.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class DP{constructor(e){this.It=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return xp(e).put(r)}removeEntry(e,t,r){return xp(e).delete(function(s,u){const c=s.path.toArray();return[c.slice(0,c.length-2),c[c.length-2],Lb(u),c[c.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Qn(e,r)))}getEntry(e,t){let r=ye.newInvalidDocument(t);return xp(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(Gw(t))},(s,u)=>{r=this.jn(t,u)}).next(()=>r)}Wn(e,t){let r={size:0,document:ye.newInvalidDocument(t)};return xp(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(Gw(t))},(s,u)=>{r={document:this.jn(t,u),size:jb(u)}}).next(()=>r)}getEntries(e,t){let r=Gs();return this.zn(e,t,(s,u)=>{const c=this.jn(s,u);r=r.insert(s,c)}).next(()=>r)}Hn(e,t){let r=Gs(),s=new Yn(Ge.comparator);return this.zn(e,t,(u,c)=>{const m=this.jn(u,c);r=r.insert(u,m),s=s.insert(u,jb(c))}).next(()=>({documents:r,Jn:s}))}zn(e,t,r){if(t.isEmpty())return se.resolve();let s=new mn(zR);t.forEach(v=>s=s.add(v));const u=IDBKeyRange.bound(Gw(s.first()),Gw(s.last())),c=s.getIterator();let m=c.getNext();return xp(e).Z({index:"documentKeyIndex",range:u},(v,b,A)=>{const M=Ge.fromSegments([...b.prefixPath,b.collectionGroup,b.documentId]);for(;m&&zR(m,M)<0;)r(m,null),m=c.getNext();m&&m.isEqual(M)&&(r(m,b),m=c.hasNext()?c.getNext():null),m?A.j(Gw(m)):A.done()}).next(()=>{for(;m;)r(m,null),m=c.hasNext()?c.getNext():null})}getAllFromCollection(e,t,r){const s=[t.popLast().toArray(),t.lastSegment(),Lb(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],u=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return xp(e).W(IDBKeyRange.bound(s,u,!0)).next(c=>{let m=Gs();for(const v of c){const b=this.jn(Ge.fromSegments(v.prefixPath.concat(v.collectionGroup,v.documentId)),v);m=m.insert(b.key,b)}return m})}getAllFromCollectionGroup(e,t,r,s){let u=Gs();const c=GR(t,r),m=GR(t,Bi.max());return xp(e).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(c,m,!0)},(v,b,A)=>{const M=this.jn(Ge.fromSegments(b.prefixPath.concat(b.collectionGroup,b.documentId)),b);u=u.insert(M.key,M),u.size===s&&A.done()}).next(()=>u)}newChangeBuffer(e){return new CP(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return HR(e).get("remoteDocumentGlobalKey").next(t=>(Tt(!!t),t))}Qn(e,t){return HR(e).put("remoteDocumentGlobalKey",t)}jn(e,t){if(t){const r=function cP(n,e){let t;if(e.document)t=hR(n.re,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Ge.fromSegments(e.noDocument.path),s=bp(e.noDocument.readTime);t=ye.newNoDocument(r,s),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return et();{const r=Ge.fromSegments(e.unknownDocument.path),s=bp(e.unknownDocument.version);t=ye.newUnknownDocument(r,s)}}return e.readTime&&t.setReadTime(function(r){const s=new Rn(r[0],r[1]);return Ct.fromTimestamp(s)}(e.readTime)),t}(this.It,t);if(!r.isNoDocument()||!r.version.isEqual(Ct.min()))return r}return ye.newInvalidDocument(e)}}function $R(n){return new DP(n)}class CP extends jR{constructor(e,t){super(),this.Yn=e,this.trackRemovals=t,this.Xn=new Eh(r=>r.toString(),(r,s)=>r.isEqual(s))}applyChanges(e){const t=[];let r=0,s=new mn((u,c)=>At(u.canonicalString(),c.canonicalString()));return this.changes.forEach((u,c)=>{const m=this.Xn.get(u);if(t.push(this.Yn.removeEntry(e,u,m.readTime)),c.isValidDocument()){const v=CR(this.Yn.It,c);s=s.add(u.path.popLast()),r+=jb(v)-m.size,t.push(this.Yn.addEntry(e,u,v))}else if(r-=m.size,this.trackRemovals){const v=CR(this.Yn.It,c.convertToNoDocument(Ct.min()));t.push(this.Yn.addEntry(e,u,v))}}),s.forEach(u=>{t.push(this.Yn.indexManager.addToCollectionParentIndex(e,u))}),t.push(this.Yn.updateMetadata(e,r)),se.waitFor(t)}getFromCache(e,t){return this.Yn.Wn(e,t).next(r=>(this.Xn.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Yn.Hn(e,t).next(({documents:r,Jn:s})=>(s.forEach((u,c)=>{this.Xn.set(u,{size:c,readTime:r.get(u).readTime})}),r))}}function HR(n){return ci(n,"remoteDocumentGlobal")}function xp(n){return ci(n,"remoteDocumentsV14")}function Gw(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function GR(n,e){const t=e.documentKey.path.toArray();return[n,Lb(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function zR(n,e){const t=n.path.toArray(),r=e.path.toArray();let s=0;for(let u=0;u<t.length-2&&u<r.length-2;++u)if(s=At(t[u],r[u]),s)return s;return s=At(t.length,r.length),s||(s=At(t[t.length-2],r[r.length-2]),s||At(t[t.length-1],r[r.length-1]))}class TP{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class qR{constructor(e,t,r,s){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(s=>(r=s,this.getBaseDocument(e,t,r))).next(s=>(null!==r&&Mw(r.mutation,s,ps.empty(),Rn.now()),s))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Vt()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Vt()){const s=el();return this.populateOverlays(e,s,t).next(()=>this.computeViews(e,t,s,r).next(u=>{let c=Rw();return u.forEach((m,v)=>{c=c.insert(m,v.overlayedDocument)}),c}))}getOverlayedDocuments(e,t){const r=el();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Vt()))}populateOverlays(e,t,r){const s=[];return r.forEach(u=>{t.has(u)||s.push(u)}),this.documentOverlayCache.getOverlays(e,s).next(u=>{u.forEach((c,m)=>{t.set(c,m)})})}computeViews(e,t,r,s){let u=Gs();const c=Nw(),m=Nw();return t.forEach((v,b)=>{const A=r.get(b.key);s.has(b.key)&&(void 0===A||A.mutation instanceof Nc)?u=u.insert(b.key,b):void 0!==A&&(c.set(b.key,A.mutation.getFieldMask()),Mw(A.mutation,b,A.mutation.getFieldMask(),Rn.now()))}),this.recalculateAndSaveOverlays(e,u).next(v=>(v.forEach((b,A)=>c.set(b,A)),t.forEach((b,A)=>{var M;return m.set(b,new TP(A,null!==(M=c.get(b))&&void 0!==M?M:null))}),m))}recalculateAndSaveOverlays(e,t){const r=Nw();let s=new Yn((c,m)=>c-m),u=Vt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(c=>{for(const m of c)m.keys().forEach(v=>{const b=t.get(v);if(null===b)return;let A=r.get(v)||ps.empty();A=m.applyToLocalView(b,A),r.set(v,A);const M=(s.get(m.batchId)||Vt()).add(v);s=s.insert(m.batchId,M)})}).next(()=>{const c=[],m=s.getReverseIterator();for(;m.hasNext();){const v=m.getNext(),b=v.key,A=v.value,M=tR();A.forEach(L=>{if(!u.has(L)){const G=qM(t.get(L),r.get(L));null!==G&&M.set(L,G),u=u.add(L)}}),c.push(this.documentOverlayCache.saveOverlays(e,b,M))}return se.waitFor(c)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return Ge.isDocumentKey((s=t).path)&&null===s.collectionGroup&&0===s.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):wS(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var s}getNextDocuments(e,t,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,s).next(u=>{const c=s-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,s-u.size):se.resolve(el());let m=-1,v=u;return c.next(b=>se.forEach(b,(A,M)=>(m<M.largestBatchId&&(m=M.largestBatchId),u.get(A)?se.resolve():this.getBaseDocument(e,A,M).next(L=>{v=v.insert(A,L)}))).next(()=>this.populateOverlays(e,b,u)).next(()=>this.computeViews(e,v,b,Vt())).next(A=>({batchId:m,changes:eR(A)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ge(t)).next(r=>{let s=Rw();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const s=t.collectionGroup;let u=Rw();return this.indexManager.getCollectionParents(e,s).next(c=>se.forEach(c,m=>{const v=(b=t,A=m.child(s),new Rc(A,null,b.explicitOrderBy.slice(),b.filters.slice(),b.limit,b.limitType,b.startAt,b.endAt));var b,A;return this.getDocumentsMatchingCollectionQuery(e,v,r).next(b=>{b.forEach((A,M)=>{u=u.insert(A,M)})})}).next(()=>u))}getDocumentsMatchingCollectionQuery(e,t,r){let s;return this.remoteDocumentCache.getAllFromCollection(e,t.path,r).next(u=>(s=u,this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId))).next(u=>{u.forEach((m,v)=>{const b=v.getKey();null===s.get(b)&&(s=s.insert(b,ye.newInvalidDocument(b)))});let c=Rw();return s.forEach((m,v)=>{const b=u.get(m);void 0!==b&&Mw(b.mutation,v,ps.empty(),Rn.now()),IS(t,v)&&(c=c.insert(m,v))}),c})}getBaseDocument(e,t,r){return null===r||1===r.mutation.type?this.remoteDocumentCache.getEntry(e,t):se.resolve(ye.newInvalidDocument(t))}}class SP{constructor(e){this.It=e,this.Zn=new Map,this.ts=new Map}getBundleMetadata(e,t){return se.resolve(this.Zn.get(t))}saveBundleMetadata(e,t){var r;return this.Zn.set(t.id,{id:(r=t).id,version:r.version,createTime:li(r.createTime)}),se.resolve()}getNamedQuery(e,t){return se.resolve(this.ts.get(t))}saveNamedQuery(e,t){return this.ts.set(t.name,{name:(r=t).name,query:RS(r.bundledQuery),readTime:li(r.readTime)}),se.resolve();var r}}class AP{constructor(){this.overlays=new Yn(Ge.comparator),this.es=new Map}getOverlay(e,t){return se.resolve(this.overlays.get(t))}getOverlays(e,t){const r=el();return se.forEach(t,s=>this.getOverlay(e,s).next(u=>{null!==u&&r.set(s,u)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((s,u)=>{this.ue(e,t,u)}),se.resolve()}removeOverlaysForBatchId(e,t,r){const s=this.es.get(r);return void 0!==s&&(s.forEach(u=>this.overlays=this.overlays.remove(u)),this.es.delete(r)),se.resolve()}getOverlaysForCollection(e,t,r){const s=el(),u=t.length+1,c=new Ge(t.child("")),m=this.overlays.getIteratorFrom(c);for(;m.hasNext();){const v=m.getNext().value,b=v.getKey();if(!t.isPrefixOf(b.path))break;b.path.length===u&&v.largestBatchId>r&&s.set(v.getKey(),v)}return se.resolve(s)}getOverlaysForCollectionGroup(e,t,r,s){let u=new Yn((b,A)=>b-A);const c=this.overlays.getIterator();for(;c.hasNext();){const b=c.getNext().value;if(b.getKey().getCollectionGroup()===t&&b.largestBatchId>r){let A=u.get(b.largestBatchId);null===A&&(A=el(),u=u.insert(b.largestBatchId,A)),A.set(b.getKey(),b)}}const m=el(),v=u.getIterator();for(;v.hasNext()&&(v.getNext().value.forEach((b,A)=>m.set(b,A)),!(m.size()>=s)););return se.resolve(m)}ue(e,t,r){const s=this.overlays.get(r.key);if(null!==s){const c=this.es.get(s.largestBatchId).delete(r.key);this.es.set(s.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new MS(t,r));let u=this.es.get(t);void 0===u&&(u=Vt(),this.es.set(t,u)),this.es.set(t,u.add(r.key))}}class kS{constructor(){this.ns=new mn(di.ss),this.rs=new mn(di.os)}isEmpty(){return this.ns.isEmpty()}addReference(e,t){const r=new di(e,t);this.ns=this.ns.add(r),this.rs=this.rs.add(r)}us(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.cs(new di(e,t))}hs(e,t){e.forEach(r=>this.removeReference(r,t))}ls(e){const t=new Ge(new qt([])),r=new di(t,e),s=new di(t,e+1),u=[];return this.rs.forEachInRange([r,s],c=>{this.cs(c),u.push(c.key)}),u}fs(){this.ns.forEach(e=>this.cs(e))}cs(e){this.ns=this.ns.delete(e),this.rs=this.rs.delete(e)}ds(e){const t=new Ge(new qt([])),r=new di(t,e),s=new di(t,e+1);let u=Vt();return this.rs.forEachInRange([r,s],c=>{u=u.add(c.key)}),u}containsKey(e){const t=new di(e,0),r=this.ns.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class di{constructor(e,t){this.key=e,this._s=t}static ss(e,t){return Ge.comparator(e.key,t.key)||At(e._s,t._s)}static os(e,t){return At(e._s,t._s)||Ge.comparator(e.key,t.key)}}class xP{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.ws=1,this.gs=new mn(di.ss)}checkEmpty(e){return se.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,s){const u=this.ws;this.ws++;const c=new AS(u,t,r,s);this.mutationQueue.push(c);for(const m of s)this.gs=this.gs.add(new di(m.key,u)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return se.resolve(c)}lookupMutationBatch(e,t){return se.resolve(this.ys(t))}getNextMutationBatchAfterBatchId(e,t){const s=this.ps(t+1),u=s<0?0:s;return se.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return se.resolve(0===this.mutationQueue.length?-1:this.ws-1)}getAllMutationBatches(e){return se.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new di(t,0),s=new di(t,Number.POSITIVE_INFINITY),u=[];return this.gs.forEachInRange([r,s],c=>{const m=this.ys(c._s);u.push(m)}),se.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new mn(At);return t.forEach(s=>{const u=new di(s,0),c=new di(s,Number.POSITIVE_INFINITY);this.gs.forEachInRange([u,c],m=>{r=r.add(m._s)})}),se.resolve(this.Is(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,s=r.length+1;let u=r;Ge.isDocumentKey(u)||(u=u.child(""));const c=new di(new Ge(u),0);let m=new mn(At);return this.gs.forEachWhile(v=>{const b=v.key.path;return!!r.isPrefixOf(b)&&(b.length===s&&(m=m.add(v._s)),!0)},c),se.resolve(this.Is(m))}Is(e){const t=[];return e.forEach(r=>{const s=this.ys(r);null!==s&&t.push(s)}),t}removeMutationBatch(e,t){Tt(0===this.Ts(t.batchId,"removed")),this.mutationQueue.shift();let r=this.gs;return se.forEach(t.mutations,s=>{const u=new di(s.key,t.batchId);return r=r.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.gs=r})}An(e){}containsKey(e,t){const r=new di(t,0),s=this.gs.firstAfterOrEqual(r);return se.resolve(t.isEqual(s&&s.key))}performConsistencyCheck(e){return se.resolve()}Ts(e,t){return this.ps(e)}ps(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}ys(e){const t=this.ps(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class MP{constructor(e){this.Es=e,this.docs=new Yn(Ge.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,s=this.docs.get(r),u=s?s.size:0,c=this.Es(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:c}),this.size+=c-u,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return se.resolve(r?r.document.mutableCopy():ye.newInvalidDocument(t))}getEntries(e,t){let r=Gs();return t.forEach(s=>{const u=this.docs.get(s);r=r.insert(s,u?u.document.mutableCopy():ye.newInvalidDocument(s))}),se.resolve(r)}getAllFromCollection(e,t,r){let s=Gs();const u=new Ge(t.child("")),c=this.docs.getIteratorFrom(u);for(;c.hasNext();){const{key:m,value:{document:v}}=c.getNext();if(!t.isPrefixOf(m.path))break;m.path.length>t.length+1||qa(Tb(v),r)<=0||(s=s.insert(v.key,v.mutableCopy()))}return se.resolve(s)}getAllFromCollectionGroup(e,t,r,s){et()}As(e,t){return se.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new RP(this)}getSize(e){return se.resolve(this.size)}}class RP extends jR{constructor(e){super(),this.Yn=e}applyChanges(e){const t=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?t.push(this.Yn.addEntry(e,s)):this.Yn.removeEntry(r)}),se.waitFor(t)}getFromCache(e,t){return this.Yn.getEntry(e,t)}getAllFromCache(e,t){return this.Yn.getEntries(e,t)}}class NP{constructor(e){this.persistence=e,this.Rs=new Eh(t=>sn(t),Mc),this.lastRemoteSnapshotVersion=Ct.min(),this.highestTargetId=0,this.bs=0,this.Ps=new kS,this.targetCount=0,this.vs=Ap.Pn()}forEachTarget(e,t){return this.Rs.forEach((r,s)=>t(s)),se.resolve()}getLastRemoteSnapshotVersion(e){return se.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return se.resolve(this.bs)}allocateTargetId(e){return this.highestTargetId=this.vs.next(),se.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.bs&&(this.bs=t),se.resolve()}Dn(e){this.Rs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.vs=new Ap(t),this.highestTargetId=t),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}addTargetData(e,t){return this.Dn(t),this.targetCount+=1,se.resolve()}updateTargetData(e,t){return this.Dn(t),se.resolve()}removeTargetData(e,t){return this.Rs.delete(t.target),this.Ps.ls(t.targetId),this.targetCount-=1,se.resolve()}removeTargets(e,t,r){let s=0;const u=[];return this.Rs.forEach((c,m)=>{m.sequenceNumber<=t&&null===r.get(m.targetId)&&(this.Rs.delete(c),u.push(this.removeMatchingKeysForTargetId(e,m.targetId)),s++)}),se.waitFor(u).next(()=>s)}getTargetCount(e){return se.resolve(this.targetCount)}getTargetData(e,t){const r=this.Rs.get(t)||null;return se.resolve(r)}addMatchingKeys(e,t,r){return this.Ps.us(t,r),se.resolve()}removeMatchingKeys(e,t,r){this.Ps.hs(t,r);const s=this.persistence.referenceDelegate,u=[];return s&&t.forEach(c=>{u.push(s.markPotentiallyOrphaned(e,c))}),se.waitFor(u)}removeMatchingKeysForTargetId(e,t){return this.Ps.ls(t),se.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Ps.ds(t);return se.resolve(r)}containsKey(e,t){return se.resolve(this.Ps.containsKey(t))}}class WR{constructor(e,t){this.Vs={},this.overlays={},this.Ss=new Ti(0),this.Ds=!1,this.Ds=!0,this.referenceDelegate=e(this),this.Cs=new NP(this),this.indexManager=new yP,this.remoteDocumentCache=new MP(r=>this.referenceDelegate.xs(r)),this.It=new DR(t),this.Ns=new SP(this.It)}start(){return Promise.resolve()}shutdown(){return this.Ds=!1,Promise.resolve()}get started(){return this.Ds}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new AP,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Vs[e.toKey()];return r||(r=new xP(t,this.referenceDelegate),this.Vs[e.toKey()]=r),r}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ns}runTransaction(e,t,r){ke("MemoryPersistence","Starting transaction:",e);const s=new OP(this.Ss.next());return this.referenceDelegate.ks(),r(s).next(u=>this.referenceDelegate.Ms(s).next(()=>u)).toPromise().then(u=>(s.raiseOnCommittedEvent(),u))}Os(e,t){return se.or(Object.values(this.Vs).map(r=>()=>r.containsKey(e,t)))}}class OP extends qm{constructor(e){super(),this.currentSequenceNumber=e}}class Gb{constructor(e){this.persistence=e,this.Fs=new kS,this.$s=null}static Bs(e){return new Gb(e)}get Ls(){if(this.$s)return this.$s;throw et()}addReference(e,t,r){return this.Fs.addReference(r,t),this.Ls.delete(r.toString()),se.resolve()}removeReference(e,t,r){return this.Fs.removeReference(r,t),this.Ls.add(r.toString()),se.resolve()}markPotentiallyOrphaned(e,t){return this.Ls.add(t.toString()),se.resolve()}removeTarget(e,t){this.Fs.ls(t.targetId).forEach(s=>this.Ls.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(s=>{s.forEach(u=>this.Ls.add(u.toString()))}).next(()=>r.removeTargetData(e,t))}ks(){this.$s=new Set}Ms(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return se.forEach(this.Ls,r=>{const s=Ge.fromPath(r);return this.Us(e,s).next(u=>{u||t.removeEntry(s,Ct.min())})}).next(()=>(this.$s=null,t.apply(e)))}updateLimboDocument(e,t){return this.Us(e,t).next(r=>{r?this.Ls.delete(t.toString()):this.Ls.add(t.toString())})}xs(e){return 0}Us(e,t){return se.or([()=>se.resolve(this.Fs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Os(e,t)])}}class kP{constructor(e){this.It=e}$(e,t,r,s){const u=new mh("createOrUpgrade",t);var m;r<1&&s>=1&&(e.createObjectStore("owner"),(m=e).createObjectStore("mutationQueues",{keyPath:"userId"}),m.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",vR,{unique:!0}),m.createObjectStore("documentMutations"),KR(e),function(m){m.createObjectStore("remoteDocuments")}(e));let c=se.resolve();return r<3&&s>=3&&(0!==r&&(function(m){m.deleteObjectStore("targetDocuments"),m.deleteObjectStore("targets"),m.deleteObjectStore("targetGlobal")}(e),KR(e)),c=c.next(()=>function(m){const v=m.store("targetGlobal"),b={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Ct.min().toTimestamp(),targetCount:0};return v.put("targetGlobalKey",b)}(u))),r<4&&s>=4&&(0!==r&&(c=c.next(()=>function(m,v){return v.store("mutations").W().next(b=>{m.deleteObjectStore("mutations"),m.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",vR,{unique:!0});const A=v.store("mutations"),M=b.map(L=>A.put(L));return se.waitFor(M)})}(e,u))),c=c.next(()=>{!function(m){m.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&s>=5&&(c=c.next(()=>this.qs(u))),r<6&&s>=6&&(c=c.next(()=>(function(m){m.createObjectStore("remoteDocumentGlobal")}(e),this.Ks(u)))),r<7&&s>=7&&(c=c.next(()=>this.Gs(u))),r<8&&s>=8&&(c=c.next(()=>this.Qs(e,u))),r<9&&s>=9&&(c=c.next(()=>{!function(m){m.objectStoreNames.contains("remoteDocumentChanges")&&m.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&s>=10&&(c=c.next(()=>this.js(u))),r<11&&s>=11&&(c=c.next(()=>{(function(m){m.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(m){m.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&s>=12&&(c=c.next(()=>{!function(m){const v=m.createObjectStore("documentOverlays",{keyPath:sP});v.createIndex("collectionPathOverlayIndex",oP,{unique:!1}),v.createIndex("collectionGroupOverlayIndex",aP,{unique:!1})}(e)})),r<13&&s>=13&&(c=c.next(()=>function(m){const v=m.createObjectStore("remoteDocumentsV14",{keyPath:Kk});v.createIndex("documentKeyIndex",Zk),v.createIndex("collectionGroupIndex",Yk)}(e)).next(()=>this.Ws(e,u)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&s>=14&&(c=c.next(()=>this.zs(e,u))),r<15&&s>=15&&(c=c.next(()=>function(m){m.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),m.createObjectStore("indexState",{keyPath:tP}).createIndex("sequenceNumberIndex",nP,{unique:!1}),m.createObjectStore("indexEntries",{keyPath:rP}).createIndex("documentKeyIndex",iP,{unique:!1})}(e))),c}Ks(e){let t=0;return e.store("remoteDocuments").Z((r,s)=>{t+=jb(s)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}qs(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.W().next(s=>se.forEach(s,u=>{const c=IDBKeyRange.bound([u.userId,-1],[u.userId,u.lastAcknowledgedBatchId]);return r.W("userMutationsIndex",c).next(m=>se.forEach(m,v=>{Tt(v.userId===u.userId);const b=Dp(this.It,v);return FR(e,u.userId,b).next(()=>{})}))}))}Gs(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(s=>{const u=[];return r.Z((c,m)=>{const v=new qt(c),b=[0,gs(v)];u.push(t.get(b).next(A=>A?se.resolve():t.put({targetId:0,path:gs(v),sequenceNumber:s.highestListenSequenceNumber})))}).next(()=>se.waitFor(u))})}Qs(e,t){e.createObjectStore("collectionParents",{keyPath:eP});const r=t.store("collectionParents"),s=new OS,u=c=>{if(s.add(c)){const m=c.lastSegment(),v=c.popLast();return r.put({collectionId:m,parent:gs(v)})}};return t.store("remoteDocuments").Z({X:!0},(c,m)=>{const v=new qt(c);return u(v.popLast())}).next(()=>t.store("documentMutations").Z({X:!0},([c,m,v],b)=>{const A=nl(m);return u(A.popLast())}))}js(e){const t=e.store("targets");return t.Z((r,s)=>{const u=Uw(s),c=TR(this.It,u);return t.put(c)})}Ws(e,t){const r=t.store("remoteDocuments"),s=[];return r.Z((u,c)=>{const m=t.store("remoteDocumentsV14"),v=(b=c,b.document?new Ge(qt.fromString(b.document.name).popFirst(5)):b.noDocument?Ge.fromSegments(b.noDocument.path):b.unknownDocument?Ge.fromSegments(b.unknownDocument.path):et()).path.toArray();var b;const A={prefixPath:v.slice(0,v.length-2),collectionGroup:v[v.length-2],documentId:v[v.length-1],readTime:c.readTime||[0,0],unknownDocument:c.unknownDocument,noDocument:c.noDocument,document:c.document,hasCommittedMutations:!!c.hasCommittedMutations};s.push(m.put(A))}).next(()=>se.waitFor(s))}zs(e,t){const r=t.store("mutations"),s=$R(this.It),u=new WR(Gb.Bs,this.It.re);return r.W().next(c=>{const m=new Map;return c.forEach(v=>{var b;let A=null!==(b=m.get(v.userId))&&void 0!==b?b:Vt();Dp(this.It,v).keys().forEach(M=>A=A.add(M)),m.set(v.userId,A)}),se.forEach(m,(v,b)=>{const A=new fr(b),M=Vb.oe(this.It,A),L=u.getIndexManager(A),G=$b.oe(A,this.It,L,u.referenceDelegate);return new qR(s,G,M,L).recalculateAndSaveOverlaysForDocumentKeys(new SS(t,Ti.at),v).next()})})}}function KR(n){n.createObjectStore("targetDocuments",{keyPath:Jk}).createIndex("documentTargetsIndex",Xk,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Qk,{unique:!0}),n.createObjectStore("targetGlobal")}const PS="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class FS{constructor(e,t,r,s,u,c,m,v,b,A,M=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Hs=u,this.window=c,this.document=m,this.Js=b,this.Ys=A,this.Xs=M,this.Ss=null,this.Ds=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Zs=null,this.inForeground=!1,this.ti=null,this.ei=null,this.ni=Number.NEGATIVE_INFINITY,this.si=L=>Promise.resolve(),!FS.C())throw new Re(ce.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new bP(this,s),this.ii=t+"main",this.It=new DR(v),this.ri=new ji(this.ii,this.Xs,new kP(this.It)),this.Cs=new vP(this.referenceDelegate,this.It),this.remoteDocumentCache=$R(this.It),this.Ns=new dP,this.window&&this.window.localStorage?this.oi=this.window.localStorage:(this.oi=null,!1===A&&pr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ui().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Re(ce.FAILED_PRECONDITION,PS);return this.ci(),this.ai(),this.hi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Cs.getHighestSequenceNumber(e))}).then(e=>{this.Ss=new Ti(e,this.Js)}).then(()=>{this.Ds=!0}).catch(e=>(this.ri&&this.ri.close(),Promise.reject(e)))}li(e){var t=this;return this.si=function(){var r=(0,_e.Z)(function*(s){if(t.started)return e(s)});return function(s){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ri.L(function(){var t=(0,_e.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Hs.enqueueAndForget((0,_e.Z)(function*(){t.started&&(yield t.ui())})))}ui(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>zb(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.fi(e).next(t=>{t||(this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)))})}).next(()=>this.di(e)).next(t=>this.isPrimary&&!t?this._i(e).next(()=>!1):!!t&&this.wi(e).next(()=>!0))).catch(e=>{if(Cc(e))return ke("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return ke("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Hs.enqueueRetryable(()=>this.si(e)),this.isPrimary=e})}fi(e){return zw(e).get("owner").next(t=>se.resolve(this.mi(t)))}gi(e){return zb(e).delete(this.clientId)}yi(){var e=this;return(0,_e.Z)(function*(){if(e.isPrimary&&!e.pi(e.ni,18e5)){e.ni=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const s=ci(r,"clientMetadata");return s.W().next(u=>{const c=e.Ii(u,18e5),m=u.filter(v=>-1===c.indexOf(v));return se.forEach(m,v=>s.delete(v.clientId)).next(()=>m)})}).catch(()=>[]);if(e.oi)for(const r of t)e.oi.removeItem(e.Ti(r.clientId))}})()}hi(){this.ei=this.Hs.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ui().then(()=>this.yi()).then(()=>this.hi()))}mi(e){return!!e&&e.ownerId===this.clientId}di(e){return this.Ys?se.resolve(!0):zw(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)){if(this.mi(t)&&this.networkEnabled)return!0;if(!this.mi(t)){if(!t.allowTabSynchronization)throw new Re(ce.FAILED_PRECONDITION,PS);return!1}}return!(!this.networkEnabled||!this.inForeground)||zb(e).W().next(r=>void 0===this.Ii(r,5e3).find(s=>{if(this.clientId!==s.clientId){const c=!this.inForeground&&s.inForeground,m=this.networkEnabled===s.networkEnabled;if(!this.networkEnabled&&s.networkEnabled||c&&m)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&ke("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,_e.Z)(function*(){e.Ds=!1,e.Ai(),e.ei&&(e.ei.cancel(),e.ei=null),e.Ri(),e.bi(),yield e.ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new SS(t,Ti.at);return e._i(r).next(()=>e.gi(r))}),e.ri.close(),e.Pi()})()}Ii(e,t){return e.filter(r=>this.pi(r.updateTimeMs,t)&&!this.Ei(r.clientId))}vi(){return this.runTransaction("getActiveClients","readonly",e=>zb(e).W().next(t=>this.Ii(t,18e5).map(r=>r.clientId)))}get started(){return this.Ds}getMutationQueue(e,t){return $b.oe(e,this.It,t,this.referenceDelegate)}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new _P(e,this.It.re.databaseId)}getDocumentOverlayCache(e){return Vb.oe(this.It,e)}getBundleCache(){return this.Ns}runTransaction(e,t,r){ke("IndexedDbPersistence","Starting transaction:",e);const s="readonly"===t?"readonly":"readwrite",u=15===(c=this.Xs)?lP:14===c?bR:13===c?IR:12===c?uP:11===c?ER:void et();var c;let m;return this.ri.runTransaction(e,s,u,v=>(m=new SS(v,this.Ss?this.Ss.next():Ti.at),"readwrite-primary"===t?this.fi(m).next(b=>!!b||this.di(m)).next(b=>{if(!b)throw pr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)),new Re(ce.FAILED_PRECONDITION,vw);return r(m)}).next(b=>this.wi(m).next(()=>b)):this.Vi(m).next(()=>r(m)))).then(v=>(m.raiseOnCommittedEvent(),v))}Vi(e){return zw(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)&&!this.mi(t)&&!(this.Ys||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Re(ce.FAILED_PRECONDITION,PS)})}wi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return zw(e).put("owner",t)}static C(){return ji.C()}_i(e){const t=zw(e);return t.get("owner").next(r=>this.mi(r)?(ke("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):se.resolve())}pi(e,t){const r=Date.now();return!(e<r-t||e>r&&(pr(`Detected an update time that is in the future: ${e} > ${r}`),1))}ci(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ti=()=>{this.Hs.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ui()))},this.document.addEventListener("visibilitychange",this.ti),this.inForeground="visible"===this.document.visibilityState)}Ri(){this.ti&&(this.document.removeEventListener("visibilitychange",this.ti),this.ti=null)}ai(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Zs=()=>{this.Ai(),(0,Dt.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Hs.enterRestrictedMode(!0),this.Hs.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Zs))}bi(){this.Zs&&(this.window.removeEventListener("pagehide",this.Zs),this.Zs=null)}Ei(e){var t;try{const r=null!==(null===(t=this.oi)||void 0===t?void 0:t.getItem(this.Ti(e)));return ke("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return pr("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ai(){if(this.oi)try{this.oi.setItem(this.Ti(this.clientId),String(Date.now()))}catch(e){pr("Failed to set zombie client id.",e)}}Pi(){if(this.oi)try{this.oi.removeItem(this.Ti(this.clientId))}catch{}}Ti(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function zw(n){return ci(n,"owner")}function zb(n){return ci(n,"clientMetadata")}function LS(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class VS{constructor(e,t,r,s){this.targetId=e,this.fromCache=t,this.Si=r,this.Di=s}static Ci(e,t){let r=Vt(),s=Vt();for(const u of t.docChanges)switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:s=s.add(u.doc.key)}return new VS(e,t.fromCache,r,s)}}class ZR{constructor(){this.xi=!1}initialize(e,t){this.Ni=e,this.indexManager=t,this.xi=!0}getDocumentsMatchingQuery(e,t,r,s){return this.ki(e,t).next(u=>u||this.Mi(e,t,s,r)).next(u=>u||this.Oi(e,t))}ki(e,t){if(kM(t))return se.resolve(null);let r=Hs(t);return this.indexManager.getIndexType(e,r).next(s=>0===s?null:(null!==t.limit&&1===s&&(t=Mb(t,null,"F"),r=Hs(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(u=>{const c=Vt(...u);return this.Ni.getDocuments(e,c).next(m=>this.indexManager.getMinOffset(e,r).next(v=>{const b=this.Fi(t,m);return this.$i(t,b,c,v.readTime)?this.ki(e,Mb(t,null,"F")):this.Bi(e,b,t,v)}))})))}Mi(e,t,r,s){return kM(t)||s.isEqual(Ct.min())?this.Oi(e,t):this.Ni.getDocuments(e,r).next(u=>{const c=this.Fi(t,u);return this.$i(t,c,r,s)?this.Oi(e,t):(yp()<=jo.in.DEBUG&&ke("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),ES(t)),this.Bi(e,c,t,Cb(s,-1)))})}Fi(e,t){let r=new mn(LM(e));return t.forEach((s,u)=>{IS(e,u)&&(r=r.add(u))}),r}$i(e,t,r,s){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const u="F"===e.limitType?t.last():t.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(s)>0)}Oi(e,t){return yp()<=jo.in.DEBUG&&ke("QueryEngine","Using full collection scan to execute query:",ES(t)),this.Ni.getDocumentsMatchingQuery(e,t,Bi.min())}Bi(e,t,r,s){return this.Ni.getDocumentsMatchingQuery(e,r,s).next(u=>(t.forEach(c=>{u=u.insert(c.key,c)}),u))}}class PP{constructor(e,t,r,s){this.persistence=e,this.Li=t,this.It=s,this.Ui=new Yn(At),this.qi=new Eh(u=>sn(u),Mc),this.Ki=new Map,this.Gi=e.getRemoteDocumentCache(),this.Cs=e.getTargetCache(),this.Ns=e.getBundleCache(),this.Qi(r)}Qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new qR(this.Gi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Gi.setIndexManager(this.indexManager),this.Li.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ui))}}function YR(n,e,t,r){return new PP(n,e,t,r)}function QR(n,e){return US.apply(this,arguments)}function US(){return US=(0,_e.Z)(function*(n,e){const t=We(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let s;return t.mutationQueue.getAllMutationBatches(r).next(u=>(s=u,t.Qi(e),t.mutationQueue.getAllMutationBatches(r))).next(u=>{const c=[],m=[];let v=Vt();for(const b of s){c.push(b.batchId);for(const A of b.mutations)v=v.add(A.key)}for(const b of u){m.push(b.batchId);for(const A of b.mutations)v=v.add(A.key)}return t.localDocuments.getDocuments(r,v).next(b=>({ji:b,removedBatchIds:c,addedBatchIds:m}))})})}),US.apply(this,arguments)}function FP(n,e){const t=We(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),u=t.Gi.newChangeBuffer({trackRemovals:!0});return function(c,m,v,b){const A=v.batch,M=A.keys();let L=se.resolve();return M.forEach(G=>{L=L.next(()=>b.getEntry(m,G)).next(Q=>{const be=v.docVersions.get(G);Tt(null!==be),Q.version.compareTo(be)<0&&(A.applyToRemoteDocument(Q,v),Q.isValidDocument()&&(Q.setReadTime(v.commitVersion),b.addEntry(Q)))})}),L.next(()=>c.mutationQueue.removeMutationBatch(m,A))}(t,r,e,u).next(()=>u.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(c){let m=Vt();for(let v=0;v<c.mutationResults.length;++v)c.mutationResults[v].transformResults.length>0&&(m=m.add(c.batch.mutations[v].key));return m}(e))).next(()=>t.localDocuments.getDocuments(r,s))})}function JR(n){const e=We(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Cs.getLastRemoteSnapshotVersion(t))}function LP(n,e){const t=We(n),r=e.snapshotVersion;let s=t.Ui;return t.persistence.runTransaction("Apply remote event","readwrite-primary",u=>{const c=t.Gi.newChangeBuffer({trackRemovals:!0});s=t.Ui;const m=[];e.targetChanges.forEach((A,M)=>{const L=s.get(M);if(!L)return;m.push(t.Cs.removeMatchingKeys(u,A.removedDocuments,M).next(()=>t.Cs.addMatchingKeys(u,A.addedDocuments,M)));let G=L.withSequenceNumber(u.currentSequenceNumber);var Q,be,Te;e.targetMismatches.has(M)?G=G.withResumeToken(Pr.EMPTY_BYTE_STRING,Ct.min()).withLastLimboFreeSnapshotVersion(Ct.min()):A.resumeToken.approximateByteSize()>0&&(G=G.withResumeToken(A.resumeToken,r)),s=s.insert(M,G),be=G,Te=A,(0===(Q=L).resumeToken.approximateByteSize()||be.snapshotVersion.toMicroseconds()-Q.snapshotVersion.toMicroseconds()>=3e8||Te.addedDocuments.size+Te.modifiedDocuments.size+Te.removedDocuments.size>0)&&m.push(t.Cs.updateTargetData(u,G))});let v=Gs(),b=Vt();if(e.documentUpdates.forEach(A=>{e.resolvedLimboDocuments.has(A)&&m.push(t.persistence.referenceDelegate.updateLimboDocument(u,A))}),m.push(XR(u,c,e.documentUpdates).next(A=>{v=A.Wi,b=A.zi})),!r.isEqual(Ct.min())){const A=t.Cs.getLastRemoteSnapshotVersion(u).next(M=>t.Cs.setTargetsMetadata(u,u.currentSequenceNumber,r));m.push(A)}return se.waitFor(m).next(()=>c.apply(u)).next(()=>t.localDocuments.getLocalViewOfDocuments(u,v,b)).next(()=>v)}).then(u=>(t.Ui=s,u))}function XR(n,e,t){let r=Vt(),s=Vt();return t.forEach(u=>r=r.add(u)),e.getEntries(n,r).next(u=>{let c=Gs();return t.forEach((m,v)=>{const b=u.get(m);v.isFoundDocument()!==b.isFoundDocument()&&(s=s.add(m)),v.isNoDocument()&&v.version.isEqual(Ct.min())?(e.removeEntry(m,v.readTime),c=c.insert(m,v)):!b.isValidDocument()||v.version.compareTo(b.version)>0||0===v.version.compareTo(b.version)&&b.hasPendingWrites?(e.addEntry(v),c=c.insert(m,v)):ke("LocalStore","Ignoring outdated watch update for ",m,". Current version:",b.version," Watch version:",v.version)}),{Wi:c,zi:s}})}function VP(n,e){const t=We(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function ly(n,e){const t=We(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return t.Cs.getTargetData(r,e).next(u=>u?(s=u,se.resolve(s)):t.Cs.allocateTargetId(r).next(c=>(s=new Ih(e,c,0,r.currentSequenceNumber),t.Cs.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=t.Ui.get(r.targetId);return(null===s||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(t.Ui=t.Ui.insert(r.targetId,r),t.qi.set(e,r.targetId)),r})}function cy(n,e,t){return BS.apply(this,arguments)}function BS(){return BS=(0,_e.Z)(function*(n,e,t){const r=We(n),s=r.Ui.get(e),u=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",u,c=>r.persistence.referenceDelegate.removeTarget(c,s)))}catch(c){if(!Cc(c))throw c;ke("LocalStore",`Failed to update sequence numbers for target ${e}: ${c}`)}r.Ui=r.Ui.remove(e),r.qi.delete(s.target)}),BS.apply(this,arguments)}function qb(n,e,t){const r=We(n);let s=Ct.min(),u=Vt();return r.persistence.runTransaction("Execute query","readonly",c=>function(m,v,b){const A=We(m),M=A.qi.get(b);return void 0!==M?se.resolve(A.Ui.get(M)):A.Cs.getTargetData(v,b)}(r,c,Hs(e)).next(m=>{if(m)return s=m.lastLimboFreeSnapshotVersion,r.Cs.getMatchingKeysForTargetId(c,m.targetId).next(v=>{u=v})}).next(()=>r.Li.getDocumentsMatchingQuery(c,e,t?s:Ct.min(),t?u:Vt())).next(m=>(nN(r,FM(e),m),{documents:m,Hi:u})))}function eN(n,e){const t=We(n),r=We(t.Cs),s=t.Ui.get(e);return s?Promise.resolve(s.target):t.persistence.runTransaction("Get target data","readonly",u=>r.se(u,e).next(c=>c?c.target:null))}function tN(n,e){const t=We(n),r=t.Ki.get(e)||Ct.min();return t.persistence.runTransaction("Get new document changes","readonly",s=>t.Gi.getAllFromCollectionGroup(s,e,Cb(r,-1),Number.MAX_SAFE_INTEGER)).then(s=>(nN(t,e,s),s))}function nN(n,e,t){let r=Ct.min();t.forEach((s,u)=>{u.readTime.compareTo(r)>0&&(r=u.readTime)}),n.Ki.set(e,r)}function jS(){return jS=(0,_e.Z)(function*(n,e,t,r){const s=We(n);let u=Vt(),c=Gs();for(const b of t){const A=e.Ji(b.metadata.name);b.document&&(u=u.add(A));const M=e.Yi(b);M.setReadTime(e.Xi(b.metadata.readTime)),c=c.insert(A,M)}const m=s.Gi.newChangeBuffer({trackRemovals:!0}),v=yield ly(s,(b=r,Hs(Xm(qt.fromString(`__bundle__/docs/${b}`)))));var b;return s.persistence.runTransaction("Apply bundle documents","readwrite",b=>XR(b,m,c).next(A=>(m.apply(b),A)).next(A=>s.Cs.removeMatchingKeysForTargetId(b,v.targetId).next(()=>s.Cs.addMatchingKeys(b,u,v.targetId)).next(()=>s.localDocuments.getLocalViewOfDocuments(b,A.Wi,A.zi)).next(()=>A.Wi)))}),jS.apply(this,arguments)}function BP(n,e){return $S.apply(this,arguments)}function $S(){return $S=(0,_e.Z)(function*(n,e,t=Vt()){const r=yield ly(n,Hs(RS(e.bundledQuery))),s=We(n);return s.persistence.runTransaction("Save named query","readwrite",u=>{const c=li(e.readTime);if(r.snapshotVersion.compareTo(c)>=0)return s.Ns.saveNamedQuery(u,e);const m=r.withResumeToken(Pr.EMPTY_BYTE_STRING,c);return s.Ui=s.Ui.insert(m.targetId,m),s.Cs.updateTargetData(u,m).next(()=>s.Cs.removeMatchingKeysForTargetId(u,r.targetId)).next(()=>s.Cs.addMatchingKeys(u,t,r.targetId)).next(()=>s.Ns.saveNamedQuery(u,e))})}),$S.apply(this,arguments)}function rN(n,e){return`firestore_clients_${n}_${e}`}function iN(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function HS(n,e){return`firestore_targets_${n}_${e}`}class Wb{constructor(e,t,r,s){this.user=e,this.batchId=t,this.state=r,this.error=s}static Zi(e,t,r){const s=JSON.parse(r);let u,c="object"==typeof s&&-1!==["pending","acknowledged","rejected"].indexOf(s.state)&&(void 0===s.error||"object"==typeof s.error);return c&&s.error&&(c="string"==typeof s.error.message&&"string"==typeof s.error.code,c&&(u=new Re(s.error.code,s.error.message))),c?new Wb(e,t,s.state,u):(pr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class qw{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Zi(e,t){const r=JSON.parse(t);let s,u="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return u&&r.error&&(u="string"==typeof r.error.message&&"string"==typeof r.error.code,u&&(s=new Re(r.error.code,r.error.message))),u?new qw(e,r.state,s):(pr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Kb{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Zi(e,t){const r=JSON.parse(t);let s="object"==typeof r&&r.activeTargetIds instanceof Array,u=kb();for(let c=0;s&&c<r.activeTargetIds.length;++c)s=yS(r.activeTargetIds[c]),u=u.add(r.activeTargetIds[c]);return s?new Kb(e,u):(pr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class GS{constructor(e,t){this.clientId=e,this.onlineState=t}static Zi(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new GS(t.clientId,t.onlineState):(pr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class zS{constructor(){this.activeTargetIds=kb()}er(e){this.activeTargetIds=this.activeTargetIds.add(e)}nr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}tr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class qS{constructor(e,t,r,s,u){this.window=e,this.Hs=t,this.persistenceKey=r,this.sr=s,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ir=this.rr.bind(this),this.ur=new Yn(At),this.started=!1,this.cr=[];const c=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=u,this.ar=rN(this.persistenceKey,this.sr),this.hr=`firestore_sequence_number_${this.persistenceKey}`,this.ur=this.ur.insert(this.sr,new zS),this.lr=new RegExp(`^firestore_clients_${c}_([^_]*)$`),this.dr=new RegExp(`^firestore_mutations_${c}_(\\d+)(?:_(.*))?$`),this._r=new RegExp(`^firestore_targets_${c}_(\\d+)$`),this.wr=`firestore_online_state_${this.persistenceKey}`,this.mr=function(m){return`firestore_bundle_loaded_v2_${m}`}(this.persistenceKey),this.window.addEventListener("storage",this.ir)}static C(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,_e.Z)(function*(){const t=yield e.syncEngine.vi();for(const s of t){if(s===e.sr)continue;const u=e.getItem(rN(e.persistenceKey,s));if(u){const c=Kb.Zi(s,u);c&&(e.ur=e.ur.insert(c.clientId,c))}}e.gr();const r=e.storage.getItem(e.wr);if(r){const s=e.yr(r);s&&e.pr(s)}for(const s of e.cr)e.rr(s);e.cr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.hr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ir(this.ur)}isActiveQueryTarget(e){let t=!1;return this.ur.forEach((r,s)=>{s.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Tr(e,"pending")}updateMutationState(e,t,r){this.Tr(e,t,r),this.Er(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(HS(this.persistenceKey,e));if(r){const s=qw.Zi(e,r);s&&(t=s.state)}}return this.Ar.er(e),this.gr(),t}removeLocalQueryTarget(e){this.Ar.nr(e),this.gr()}isLocalQueryTarget(e){return this.Ar.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(HS(this.persistenceKey,e))}updateQueryState(e,t,r){this.Rr(e,t,r)}handleUserChange(e,t,r){t.forEach(s=>{this.Er(s)}),this.currentUser=e,r.forEach(s=>{this.addPendingMutation(s)})}setOnlineState(e){this.br(e)}notifyBundleLoaded(e){this.Pr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ir),this.removeItem(this.ar),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return ke("SharedClientState","READ",e,t),t}setItem(e,t){ke("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){ke("SharedClientState","REMOVE",e),this.storage.removeItem(e)}rr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(ke("SharedClientState","EVENT",r.key,r.newValue),r.key===this.ar)return void pr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Hs.enqueueRetryable((0,_e.Z)(function*(){if(t.started){if(null!==r.key)if(t.lr.test(r.key)){if(null==r.newValue){const s=t.vr(r.key);return t.Vr(s,null)}{const s=t.Sr(r.key,r.newValue);if(s)return t.Vr(s.clientId,s)}}else if(t.dr.test(r.key)){if(null!==r.newValue){const s=t.Dr(r.key,r.newValue);if(s)return t.Cr(s)}}else if(t._r.test(r.key)){if(null!==r.newValue){const s=t.Nr(r.key,r.newValue);if(s)return t.kr(s)}}else if(r.key===t.wr){if(null!==r.newValue){const s=t.yr(r.newValue);if(s)return t.pr(s)}}else if(r.key===t.hr){const s=function(u){let c=Ti.at;if(null!=u)try{const m=JSON.parse(u);Tt("number"==typeof m),c=m}catch(m){pr("SharedClientState","Failed to read sequence number from WebStorage",m)}return c}(r.newValue);s!==Ti.at&&t.sequenceNumberHandler(s)}else if(r.key===t.mr){const s=t.Mr(r.newValue);yield Promise.all(s.map(u=>t.syncEngine.Or(u)))}}else t.cr.push(r)}))}}get Ar(){return this.ur.get(this.sr)}gr(){this.setItem(this.ar,this.Ar.tr())}Tr(e,t,r){const s=new Wb(this.currentUser,e,t,r),u=iN(this.persistenceKey,this.currentUser,e);this.setItem(u,s.tr())}Er(e){const t=iN(this.persistenceKey,this.currentUser,e);this.removeItem(t)}br(e){this.storage.setItem(this.wr,JSON.stringify({clientId:this.sr,onlineState:e}))}Rr(e,t,r){const s=HS(this.persistenceKey,e),u=new qw(e,t,r);this.setItem(s,u.tr())}Pr(e){const t=JSON.stringify(Array.from(e));this.setItem(this.mr,t)}vr(e){const t=this.lr.exec(e);return t?t[1]:null}Sr(e,t){const r=this.vr(e);return Kb.Zi(r,t)}Dr(e,t){const r=this.dr.exec(e),s=Number(r[1]);return Wb.Zi(new fr(void 0!==r[2]?r[2]:null),s,t)}Nr(e,t){const r=this._r.exec(e),s=Number(r[1]);return qw.Zi(s,t)}yr(e){return GS.Zi(e)}Mr(e){return JSON.parse(e)}Cr(e){var t=this;return(0,_e.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Fr(e.batchId,e.state,e.error);ke("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}kr(e){return this.syncEngine.$r(e.targetId,e.state,e.error)}Vr(e,t){const r=t?this.ur.insert(e,t):this.ur.remove(e),s=this.Ir(this.ur),u=this.Ir(r),c=[],m=[];return u.forEach(v=>{s.has(v)||c.push(v)}),s.forEach(v=>{u.has(v)||m.push(v)}),this.syncEngine.Br(c,m).then(()=>{this.ur=r})}pr(e){this.ur.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ir(e){let t=kb();return e.forEach((r,s)=>{t=t.unionWith(s.activeTargetIds)}),t}}class sN{constructor(){this.Lr=new zS,this.Ur={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Lr.er(e),this.Ur[e]||"not-current"}updateQueryState(e,t,r){this.Ur[e]=t}removeLocalQueryTarget(e){this.Lr.nr(e)}isLocalQueryTarget(e){return this.Lr.activeTargetIds.has(e)}clearQueryState(e){delete this.Ur[e]}getAllActiveQueryTargets(){return this.Lr.activeTargetIds}isActiveQueryTarget(e){return this.Lr.activeTargetIds.has(e)}start(){return this.Lr=new zS,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class jP{qr(e){}shutdown(){}}class oN{constructor(){this.Kr=()=>this.Gr(),this.Qr=()=>this.jr(),this.Wr=[],this.zr()}qr(e){this.Wr.push(e)}shutdown(){window.removeEventListener("online",this.Kr),window.removeEventListener("offline",this.Qr)}zr(){window.addEventListener("online",this.Kr),window.addEventListener("offline",this.Qr)}Gr(){ke("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Wr)e(0)}jr(){ke("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Wr)e(1)}static C(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const $P={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class HP{constructor(e){this.Hr=e.Hr,this.Jr=e.Jr}Yr(e){this.Xr=e}Zr(e){this.eo=e}onMessage(e){this.no=e}close(){this.Jr()}send(e){this.Hr(e)}so(){this.Xr()}io(e){this.eo(e)}ro(e){this.no(e)}}class GP extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.oo=(e.ssl?"https":"http")+"://"+e.host,this.uo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}co(e,t,r,s,u){const c=this.ao(e,t);ke("RestConnection","Sending: ",c,r);const m={};return this.ho(m,s,u),this.lo(e,c,m,r).then(v=>(ke("RestConnection","Received: ",v),v),v=>{throw bc("RestConnection",`${e} failed with error: `,v,"url: ",c,"request:",r),v})}fo(e,t,r,s,u,c){return this.co(e,t,r,s,u)}ho(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+fs,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((s,u)=>e[u]=s),r&&r.headers.forEach((s,u)=>e[u]=s)}ao(e,t){return`${this.oo}/v1/${t}:${$P[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}lo(e,t,r,s){return new Promise((u,c)=>{const m=new pb;m.listenOnce(hb.COMPLETE,()=>{try{switch(m.getLastErrorCode()){case $m.NO_ERROR:const b=m.getResponseJson();ke("Connection","XHR received:",JSON.stringify(b)),u(b);break;case $m.TIMEOUT:ke("Connection",'RPC "'+e+'" timed out'),c(new Re(ce.DEADLINE_EXCEEDED,"Request time out"));break;case $m.HTTP_ERROR:const A=m.getStatus();if(ke("Connection",'RPC "'+e+'" failed with status:',A,"response text:",m.getResponseText()),A>0){const M=m.getResponseJson().error;if(M&&M.status&&M.message){const L=function(G){const Q=G.toLowerCase().replace(/_/g,"-");return Object.values(ce).indexOf(Q)>=0?Q:ce.UNKNOWN}(M.status);c(new Re(L,M.message))}else c(new Re(ce.UNKNOWN,"Server responded with status "+m.getStatus()))}else c(new Re(ce.UNAVAILABLE,"Connection failed."));break;default:et()}}finally{ke("Connection",'RPC "'+e+'" completed.')}});const v=JSON.stringify(s);m.send(t,"POST",v,r,15)})}_o(e,t,r){const s=[this.oo,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=uS(),c=dw(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(m.xmlHttpFactory=new fb({})),this.ho(m.initMessageHeaders,t,r),(0,Dt.uI)()||(0,Dt.b$)()||(0,Dt.d)()||(0,Dt.w1)()||(0,Dt.Mn)()||(0,Dt.ru)()||(m.httpHeadersOverwriteParam="$httpHeaders");const v=s.join("");ke("Connection","Creating WebChannel: "+v,m);const b=u.createWebChannel(v,m);let A=!1,M=!1;const L=new HP({Hr:Q=>{M?ke("Connection","Not sending because WebChannel is closed:",Q):(A||(ke("Connection","Opening WebChannel transport."),b.open(),A=!0),ke("Connection","WebChannel sending:",Q),b.send(Q))},Jr:()=>b.close()}),G=(Q,be,Te)=>{Q.listen(be,Ze=>{try{Te(Ze)}catch(ut){setTimeout(()=>{throw ut},0)}})};return G(b,Hm.EventType.OPEN,()=>{M||ke("Connection","WebChannel transport opened.")}),G(b,Hm.EventType.CLOSE,()=>{M||(M=!0,ke("Connection","WebChannel transport closed"),L.io())}),G(b,Hm.EventType.ERROR,Q=>{M||(M=!0,bc("Connection","WebChannel transport errored:",Q),L.io(new Re(ce.UNAVAILABLE,"The operation could not be completed")))}),G(b,Hm.EventType.MESSAGE,Q=>{var be;if(!M){const Te=Q.data[0];Tt(!!Te);const Ze=Te,ut=Ze.error||(null===(be=Ze[0])||void 0===be?void 0:be.error);if(ut){ke("Connection","WebChannel received error:",ut);const lt=ut.status;let tt=function(kt){const ar=Fr[kt];if(void 0!==ar)return JM(ar)}(lt),bt=ut.message;void 0===tt&&(tt=ce.INTERNAL,bt="Unknown error status: "+lt+" with message "+ut.message),M=!0,L.io(new Re(tt,bt)),b.close()}else ke("Connection","WebChannel received:",Te),L.ro(Te)}}),G(c,lS.STAT_EVENT,Q=>{Q.stat===hw.PROXY?ke("Connection","Detected buffering proxy"):Q.stat===hw.NOPROXY&&ke("Connection","Detected no buffering proxy")}),setTimeout(()=>{L.so()},0),L}}function aN(){return typeof window<"u"?window:null}function Zb(){return typeof document<"u"?document:null}function Ww(n){return new Pk(n,!0)}class WS{constructor(e,t,r=1e3,s=1.5,u=6e4){this.Hs=e,this.timerId=t,this.wo=r,this.mo=s,this.yo=u,this.po=0,this.Io=null,this.To=Date.now(),this.reset()}reset(){this.po=0}Eo(){this.po=this.yo}Ao(e){this.cancel();const t=Math.floor(this.po+this.Ro()),r=Math.max(0,Date.now()-this.To),s=Math.max(0,t-r);s>0&&ke("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.po} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Io=this.Hs.enqueueAfterDelay(this.timerId,s,()=>(this.To=Date.now(),e())),this.po*=this.mo,this.po<this.wo&&(this.po=this.wo),this.po>this.yo&&(this.po=this.yo)}bo(){null!==this.Io&&(this.Io.skipDelay(),this.Io=null)}cancel(){null!==this.Io&&(this.Io.cancel(),this.Io=null)}Ro(){return(Math.random()-.5)*this.po}}class uN{constructor(e,t,r,s,u,c,m,v){this.Hs=e,this.Po=r,this.vo=s,this.Vo=u,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=m,this.listener=v,this.state=0,this.So=0,this.Do=null,this.Co=null,this.stream=null,this.xo=new WS(e,t)}No(){return 1===this.state||5===this.state||this.ko()}ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Mo()}stop(){var e=this;return(0,_e.Z)(function*(){e.No()&&(yield e.close(0))})()}Oo(){this.state=0,this.xo.reset()}Fo(){this.ko()&&null===this.Do&&(this.Do=this.Hs.enqueueAfterDelay(this.Po,6e4,()=>this.$o()))}Bo(e){this.Lo(),this.stream.send(e)}$o(){var e=this;return(0,_e.Z)(function*(){if(e.ko())return e.close(0)})()}Lo(){this.Do&&(this.Do.cancel(),this.Do=null)}Uo(){this.Co&&(this.Co.cancel(),this.Co=null)}close(e,t){var r=this;return(0,_e.Z)(function*(){r.Lo(),r.Uo(),r.xo.cancel(),r.So++,4!==e?r.xo.reset():t&&t.code===ce.RESOURCE_EXHAUSTED?(pr(t.toString()),pr("Using maximum backoff delay to prevent overloading the backend."),r.xo.Eo()):t&&t.code===ce.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.qo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Zr(t)})()}qo(){}auth(){this.state=1;const e=this.Ko(this.So),t=this.So;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.So===t&&this.Go(r,s)},r=>{e(()=>{const s=new Re(ce.UNKNOWN,"Fetching auth token failed: "+r.message);return this.Qo(s)})})}Go(e,t){const r=this.Ko(this.So);this.stream=this.jo(e,t),this.stream.Yr(()=>{r(()=>(this.state=2,this.Co=this.Hs.enqueueAfterDelay(this.vo,1e4,()=>(this.ko()&&(this.state=3),Promise.resolve())),this.listener.Yr()))}),this.stream.Zr(s=>{r(()=>this.Qo(s))}),this.stream.onMessage(s=>{r(()=>this.onMessage(s))})}Mo(){var e=this;this.state=5,this.xo.Ao((0,_e.Z)(function*(){e.state=0,e.start()}))}Qo(e){return ke("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Ko(e){return t=>{this.Hs.enqueueAndForget(()=>this.So===e?t():(ke("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class zP extends uN{constructor(e,t,r,s,u,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,s,c),this.It=u}jo(e,t){return this.Vo._o("Listen",e,t)}onMessage(e){this.xo.reset();const t=function Vk(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(v=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===v?1:"REMOVE"===v?2:"CURRENT"===v?3:"RESET"===v?4:et(),s=e.targetChange.targetIds||[],u=function(v,b){return v.gt?(Tt(void 0===b||"string"==typeof b),Pr.fromBase64String(b||"")):(Tt(void 0===b||b instanceof Uint8Array),Pr.fromUint8Array(b||new Uint8Array))}(n,e.targetChange.resumeToken),c=e.targetChange.cause,m=c&&function(v){const b=void 0===v.code?ce.UNKNOWN:JM(v.code);return new Re(b,v.message||"")}(c);t=new rR(r,s,u,m||null)}else if("documentChange"in e){const r=e.documentChange,s=tl(n,r.document.name),u=li(r.document.updateTime),c=new $e({mapValue:{fields:r.document.fields}}),m=ye.newFoundDocument(s,u,c);t=new Pb(r.targetIds||[],r.removedTargetIds||[],m.key,m)}else if("documentDelete"in e){const r=e.documentDelete,s=tl(n,r.document),u=r.readTime?li(r.readTime):Ct.min(),c=ye.newNoDocument(s,u);t=new Pb([],r.removedTargetIds||[],c.key,c)}else if("documentRemove"in e){const r=e.documentRemove,s=tl(n,r.document);t=new Pb([],r.removedTargetIds||[],s,null)}else{if(!("filter"in e))return et();{const r=e.filter,u=new Sk(r.count||0);t=new nR(r.targetId,u)}}var v;return t}(this.It,e),r=function(s){if(!("targetChange"in s))return Ct.min();const u=s.targetChange;return u.targetIds&&u.targetIds.length?Ct.min():u.readTime?li(u.readTime):Ct.min()}(e);return this.listener.Wo(t,r)}zo(e){const t={};t.database=Lw(this.It),t.addTarget=function(s,u){let c;const m=u.target;return c=_h(m)?{documents:fR(s,m)}:{query:pR(s,m)},c.targetId=u.targetId,u.resumeToken.approximateByteSize()>0?c.resumeToken=aR(s,u.resumeToken):u.snapshotVersion.compareTo(Ct.min())>0&&(c.readTime=Pw(s,u.snapshotVersion.toTimestamp())),c}(this.It,e);const r=function Bk(n,e){const t=function(r,s){switch(s){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return et()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Bo(t)}Ho(e){const t={};t.database=Lw(this.It),t.removeTarget=e,this.Bo(t)}}class qP extends uN{constructor(e,t,r,s,u,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,s,c),this.It=u,this.Jo=!1}get Yo(){return this.Jo}start(){this.Jo=!1,this.lastStreamToken=void 0,super.start()}qo(){this.Jo&&this.Xo([])}jo(e,t){return this.Vo._o("Write",e,t)}onMessage(e){if(Tt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Jo){this.xo.reset();const t=function Uk(n,e){return n&&n.length>0?(Tt(void 0!==e),n.map(t=>function(r,s){let u=li(r.updateTime?r.updateTime:s);return u.isEqual(Ct.min())&&(u=li(s)),new Dk(u,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=li(e.commitTime);return this.listener.Zo(r,t)}return Tt(!e.writeResults||0===e.writeResults.length),this.Jo=!0,this.listener.tu()}eu(){const e={};e.database=Lw(this.It),this.Bo(e)}Xo(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>Vw(this.It,r))};this.Bo(t)}}class WP extends class{}{constructor(e,t,r,s){super(),this.authCredentials=e,this.appCheckCredentials=t,this.Vo=r,this.It=s,this.nu=!1}su(){if(this.nu)throw new Re(ce.FAILED_PRECONDITION,"The client has already been terminated.")}co(e,t,r){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,u])=>this.Vo.co(e,t,r,s,u)).catch(s=>{throw"FirebaseError"===s.name?(s.code===ce.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Re(ce.UNKNOWN,s.toString())})}fo(e,t,r,s){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,c])=>this.Vo.fo(e,t,r,u,c,s)).catch(u=>{throw"FirebaseError"===u.name?(u.code===ce.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new Re(ce.UNKNOWN,u.toString())})}terminate(){this.nu=!0}}class KP{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.iu=0,this.ru=null,this.ou=!0}uu(){0===this.iu&&(this.cu("Unknown"),this.ru=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ru=null,this.au("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve())))}hu(e){"Online"===this.state?this.cu("Unknown"):(this.iu++,this.iu>=1&&(this.lu(),this.au(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.cu("Offline")))}set(e){this.lu(),this.iu=0,"Online"===e&&(this.ou=!1),this.cu(e)}cu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}au(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ou?(pr(t),this.ou=!1):ke("OnlineStateTracker",t)}lu(){null!==this.ru&&(this.ru.cancel(),this.ru=null)}}class ZP{constructor(e,t,r,s,u){var c=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.fu=[],this.du=new Map,this._u=new Set,this.wu=[],this.mu=u,this.mu.qr(m=>{r.enqueueAndForget((0,_e.Z)(function*(){var v;Ch(c)&&(ke("RemoteStore","Restarting streams for network reachability change."),yield(v=(0,_e.Z)(function*(b){const A=We(b);A._u.add(4),yield dy(A),A.gu.set("Unknown"),A._u.delete(4),yield Kw(A)}),function(b){return v.apply(this,arguments)})(c))}))}),this.gu=new KP(r,s)}}function Kw(n){return KS.apply(this,arguments)}function KS(){return KS=(0,_e.Z)(function*(n){if(Ch(n))for(const e of n.wu)yield e(!0)}),KS.apply(this,arguments)}function dy(n){return ZS.apply(this,arguments)}function ZS(){return ZS=(0,_e.Z)(function*(n){for(const e of n.wu)yield e(!1)}),ZS.apply(this,arguments)}function Yb(n,e){const t=We(n);t.du.has(e.targetId)||(t.du.set(e.targetId,e),JS(t)?QS(t):fy(t).ko()&&YS(t,e))}function Zw(n,e){const t=We(n),r=fy(t);t.du.delete(e),r.ko()&&lN(t,e),0===t.du.size&&(r.ko()?r.Fo():Ch(t)&&t.gu.set("Unknown"))}function YS(n,e){n.yu.Ot(e.targetId),fy(n).zo(e)}function lN(n,e){n.yu.Ot(e),fy(n).Ho(e)}function QS(n){n.yu=new Nk({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),se:e=>n.du.get(e)||null}),fy(n).start(),n.gu.uu()}function JS(n){return Ch(n)&&!fy(n).No()&&n.du.size>0}function Ch(n){return 0===We(n)._u.size}function cN(n){n.yu=void 0}function YP(n){return XS.apply(this,arguments)}function XS(){return XS=(0,_e.Z)(function*(n){n.du.forEach((e,t)=>{YS(n,e)})}),XS.apply(this,arguments)}function QP(n,e){return eA.apply(this,arguments)}function eA(){return eA=(0,_e.Z)(function*(n,e){cN(n),JS(n)?(n.gu.hu(e),QS(n)):n.gu.set("Unknown")}),eA.apply(this,arguments)}function JP(n,e,t){return tA.apply(this,arguments)}function tA(){return tA=(0,_e.Z)(function*(n,e,t){if(n.gu.set("Online"),e instanceof rR&&2===e.state&&e.cause)try{yield(r=(0,_e.Z)(function*(s,u){const c=u.cause;for(const m of u.targetIds)s.du.has(m)&&(yield s.remoteSyncer.rejectListen(m,c),s.du.delete(m),s.yu.removeTarget(m))}),function(s,u){return r.apply(this,arguments)})(n,e)}catch(r){ke("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Qb(n,r)}else if(e instanceof Pb?n.yu.Gt(e):e instanceof nR?n.yu.Yt(e):n.yu.Wt(e),!t.isEqual(Ct.min()))try{const r=yield JR(n.localStore);t.compareTo(r)>=0&&(yield function(s,u){const c=s.yu.te(u);return c.targetChanges.forEach((m,v)=>{if(m.resumeToken.approximateByteSize()>0){const b=s.du.get(v);b&&s.du.set(v,b.withResumeToken(m.resumeToken,u))}}),c.targetMismatches.forEach(m=>{const v=s.du.get(m);if(!v)return;s.du.set(m,v.withResumeToken(Pr.EMPTY_BYTE_STRING,v.snapshotVersion)),lN(s,m);const b=new Ih(v.target,m,1,v.sequenceNumber);YS(s,b)}),s.remoteSyncer.applyRemoteEvent(c)}(n,t))}catch(r){ke("RemoteStore","Failed to raise snapshot:",r),yield Qb(n,r)}var r}),tA.apply(this,arguments)}function Qb(n,e,t){return nA.apply(this,arguments)}function nA(){return nA=(0,_e.Z)(function*(n,e,t){if(!Cc(e))throw e;n._u.add(1),yield dy(n),n.gu.set("Offline"),t||(t=()=>JR(n.localStore)),n.asyncQueue.enqueueRetryable((0,_e.Z)(function*(){ke("RemoteStore","Retrying IndexedDB access"),yield t(),n._u.delete(1),yield Kw(n)}))}),nA.apply(this,arguments)}function dN(n,e){return e().catch(t=>Qb(n,t,e))}function hy(n){return rA.apply(this,arguments)}function rA(){return rA=(0,_e.Z)(function*(n){const e=We(n),t=Th(e);let r=e.fu.length>0?e.fu[e.fu.length-1].batchId:-1;for(;XP(e);)try{const s=yield VP(e.localStore,r);if(null===s){0===e.fu.length&&t.Fo();break}r=s.batchId,e1(e,s)}catch(s){yield Qb(e,s)}hN(e)&&fN(e)}),rA.apply(this,arguments)}function XP(n){return Ch(n)&&n.fu.length<10}function e1(n,e){n.fu.push(e);const t=Th(n);t.ko()&&t.Yo&&t.Xo(e.mutations)}function hN(n){return Ch(n)&&!Th(n).No()&&n.fu.length>0}function fN(n){Th(n).start()}function t1(n){return iA.apply(this,arguments)}function iA(){return iA=(0,_e.Z)(function*(n){Th(n).eu()}),iA.apply(this,arguments)}function n1(n){return sA.apply(this,arguments)}function sA(){return sA=(0,_e.Z)(function*(n){const e=Th(n);for(const t of n.fu)e.Xo(t.mutations)}),sA.apply(this,arguments)}function r1(n,e,t){return oA.apply(this,arguments)}function oA(){return oA=(0,_e.Z)(function*(n,e,t){const r=n.fu.shift(),s=xS.from(r,e,t);yield dN(n,()=>n.remoteSyncer.applySuccessfulWrite(s)),yield hy(n)}),oA.apply(this,arguments)}function i1(n,e){return aA.apply(this,arguments)}function aA(){return aA=(0,_e.Z)(function*(n,e){var t;e&&Th(n).Yo&&(yield(t=(0,_e.Z)(function*(r,s){if(QM(u=s.code)&&u!==ce.ABORTED){const c=r.fu.shift();Th(r).Oo(),yield dN(r,()=>r.remoteSyncer.rejectFailedWrite(c.batchId,s)),yield hy(r)}var u}),function(r,s){return t.apply(this,arguments)})(n,e)),hN(n)&&fN(n)}),aA.apply(this,arguments)}function pN(n,e){return uA.apply(this,arguments)}function uA(){return uA=(0,_e.Z)(function*(n,e){const t=We(n);t.asyncQueue.verifyOperationInProgress(),ke("RemoteStore","RemoteStore received new credentials");const r=Ch(t);t._u.add(3),yield dy(t),r&&t.gu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t._u.delete(3),yield Kw(t)}),uA.apply(this,arguments)}function lA(n,e){return cA.apply(this,arguments)}function cA(){return cA=(0,_e.Z)(function*(n,e){const t=We(n);e?(t._u.delete(2),yield Kw(t)):e||(t._u.add(2),yield dy(t),t.gu.set("Unknown"))}),cA.apply(this,arguments)}function fy(n){return n.pu||(n.pu=function(e,t,r){const s=We(e);return s.su(),new zP(t,s.Vo,s.authCredentials,s.appCheckCredentials,s.It,r)}(n.datastore,n.asyncQueue,{Yr:YP.bind(null,n),Zr:QP.bind(null,n),Wo:JP.bind(null,n)}),n.wu.push(function(){var e=(0,_e.Z)(function*(t){t?(n.pu.Oo(),JS(n)?QS(n):n.gu.set("Unknown")):(yield n.pu.stop(),cN(n))});return function(t){return e.apply(this,arguments)}}())),n.pu}function Th(n){return n.Iu||(n.Iu=function(e,t,r){const s=We(e);return s.su(),new qP(t,s.Vo,s.authCredentials,s.appCheckCredentials,s.It,r)}(n.datastore,n.asyncQueue,{Yr:t1.bind(null,n),Zr:i1.bind(null,n),tu:n1.bind(null,n),Zo:r1.bind(null,n)}),n.wu.push(function(){var e=(0,_e.Z)(function*(t){t?(n.Iu.Oo(),yield hy(n)):(yield n.Iu.stop(),n.fu.length>0&&(ke("RemoteStore",`Stopping write stream with ${n.fu.length} pending writes`),n.fu=[]))});return function(t){return e.apply(this,arguments)}}())),n.Iu}class dA{constructor(e,t,r,s,u){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=s,this.removalCallback=u,this.deferred=new Ir,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}static createAndSchedule(e,t,r,s,u){const c=Date.now()+r,m=new dA(e,t,c,s,u);return m.start(r),m}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Re(ce.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function py(n,e){if(pr("AsyncQueue",`${e}: ${n}`),Cc(n))return new Re(ce.UNAVAILABLE,`${e}: ${n}`);throw n}class gy{constructor(e){this.comparator=e?(t,r)=>e(t,r)||Ge.comparator(t.key,r.key):(t,r)=>Ge.comparator(t.key,r.key),this.keyedMap=Rw(),this.sortedSet=new Yn(this.comparator)}static emptySet(e){return new gy(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof gy)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const s=t.getNext().key,u=r.getNext().key;if(!s.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new gy;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class gN{constructor(){this.Tu=new Yn(Ge.comparator)}track(e){const t=e.doc.key,r=this.Tu.get(t);r?0!==e.type&&3===r.type?this.Tu=this.Tu.insert(t,e):3===e.type&&1!==r.type?this.Tu=this.Tu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Tu=this.Tu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Tu=this.Tu.remove(t):1===e.type&&2===r.type?this.Tu=this.Tu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):et():this.Tu=this.Tu.insert(t,e)}Eu(){const e=[];return this.Tu.inorderTraversal((t,r)=>{e.push(r)}),e}}class my{constructor(e,t,r,s,u,c,m,v){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=u,this.fromCache=c,this.syncStateChanged=m,this.excludesMetadataChanges=v}static fromInitialDocuments(e,t,r,s){const u=[];return t.forEach(c=>{u.push({type:0,doc:c})}),new my(e,t,gy.emptySet(t),u,r,s,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Aw(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let s=0;s<t.length;s++)if(t[s].type!==r[s].type||!t[s].doc.isEqual(r[s].doc))return!1;return!0}}class s1{constructor(){this.Au=void 0,this.listeners=[]}}class o1{constructor(){this.queries=new Eh(e=>PM(e),Aw),this.onlineState="Unknown",this.Ru=new Set}}function hA(n,e){return fA.apply(this,arguments)}function fA(){return fA=(0,_e.Z)(function*(n,e){const t=We(n),r=e.query;let s=!1,u=t.queries.get(r);if(u||(s=!0,u=new s1),s)try{u.Au=yield t.onListen(r)}catch(c){const m=py(c,`Initialization of query '${ES(e.query)}' failed`);return void e.onError(m)}t.queries.set(r,u),u.listeners.push(e),e.bu(t.onlineState),u.Au&&e.Pu(u.Au)&&mA(t)}),fA.apply(this,arguments)}function pA(n,e){return gA.apply(this,arguments)}function gA(){return gA=(0,_e.Z)(function*(n,e){const t=We(n),r=e.query;let s=!1;const u=t.queries.get(r);if(u){const c=u.listeners.indexOf(e);c>=0&&(u.listeners.splice(c,1),s=0===u.listeners.length)}if(s)return t.queries.delete(r),t.onUnlisten(r)}),gA.apply(this,arguments)}function a1(n,e){const t=We(n);let r=!1;for(const s of e){const c=t.queries.get(s.query);if(c){for(const m of c.listeners)m.Pu(s)&&(r=!0);c.Au=s}}r&&mA(t)}function u1(n,e,t){const r=We(n),s=r.queries.get(e);if(s)for(const u of s.listeners)u.onError(t);r.queries.delete(e)}function mA(n){n.Ru.forEach(e=>{e.next()})}class yA{constructor(e,t,r){this.query=e,this.vu=t,this.Vu=!1,this.Su=null,this.onlineState="Unknown",this.options=r||{}}Pu(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)3!==s.type&&r.push(s);e=new my(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.Vu?this.Du(e)&&(this.vu.next(e),t=!0):this.Cu(e,this.onlineState)&&(this.xu(e),t=!0),this.Su=e,t}onError(e){this.vu.error(e)}bu(e){this.onlineState=e;let t=!1;return this.Su&&!this.Vu&&this.Cu(this.Su,e)&&(this.xu(this.Su),t=!0),t}Cu(e,t){return!e.fromCache||!(this.options.Nu&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}Du(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Su&&this.Su.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}xu(e){e=my.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.Vu=!0,this.vu.next(e)}}class l1{constructor(e,t){this.payload=e,this.byteLength=t}ku(){return"metadata"in this.payload}}class mN{constructor(e){this.It=e}Ji(e){return tl(this.It,e)}Yi(e){return e.metadata.exists?hR(this.It,e.document,!1):ye.newNoDocument(this.Ji(e.metadata.name),this.Xi(e.metadata.readTime))}Xi(e){return li(e)}}class c1{constructor(e,t,r){this.Mu=e,this.localStore=t,this.It=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=yN(e)}Ou(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;const r=qt.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Fu(e){const t=new Map,r=new mN(this.It);for(const s of e)if(s.metadata.queries){const u=r.Ji(s.metadata.name);for(const c of s.metadata.queries){const m=(t.get(c)||Vt()).add(u);t.set(c,m)}}return t}complete(){var e=this;return(0,_e.Z)(function*(){const t=yield function UP(n,e,t,r){return jS.apply(this,arguments)}(e.localStore,new mN(e.It),e.documents,e.Mu.id),r=e.Fu(e.documents);for(const s of e.queries)yield BP(e.localStore,s,r.get(s.name));return e.progress.taskState="Success",{progress:e.progress,$u:e.collectionGroups,Bu:t}})()}}function yN(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class _N{constructor(e){this.key=e}}class vN{constructor(e){this.key=e}}class wN{constructor(e,t){this.query=e,this.Lu=t,this.Uu=null,this.current=!1,this.qu=Vt(),this.mutatedKeys=Vt(),this.Ku=LM(e),this.Gu=new gy(this.Ku)}get Qu(){return this.Lu}ju(e,t){const r=t?t.Wu:new gN,s=t?t.Gu:this.Gu;let u=t?t.mutatedKeys:this.mutatedKeys,c=s,m=!1;const v="F"===this.query.limitType&&s.size===this.query.limit?s.last():null,b="L"===this.query.limitType&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((A,M)=>{const L=s.get(A),G=IS(this.query,M)?M:null,Q=!!L&&this.mutatedKeys.has(L.key),be=!!G&&(G.hasLocalMutations||this.mutatedKeys.has(G.key)&&G.hasCommittedMutations);let Te=!1;L&&G?L.data.isEqual(G.data)?Q!==be&&(r.track({type:3,doc:G}),Te=!0):this.zu(L,G)||(r.track({type:2,doc:G}),Te=!0,(v&&this.Ku(G,v)>0||b&&this.Ku(G,b)<0)&&(m=!0)):!L&&G?(r.track({type:0,doc:G}),Te=!0):L&&!G&&(r.track({type:1,doc:L}),Te=!0,(v||b)&&(m=!0)),Te&&(G?(c=c.add(G),u=be?u.add(A):u.delete(A)):(c=c.delete(A),u=u.delete(A)))}),null!==this.query.limit)for(;c.size>this.query.limit;){const A="F"===this.query.limitType?c.last():c.first();c=c.delete(A.key),u=u.delete(A.key),r.track({type:1,doc:A})}return{Gu:c,Wu:r,$i:m,mutatedKeys:u}}zu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const s=this.Gu;this.Gu=e.Gu,this.mutatedKeys=e.mutatedKeys;const u=e.Wu.Eu();u.sort((b,A)=>function(M,L){const G=Q=>{switch(Q){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return et()}};return G(M)-G(L)}(b.type,A.type)||this.Ku(b.doc,A.doc)),this.Hu(r);const c=t?this.Ju():[],m=0===this.qu.size&&this.current?1:0,v=m!==this.Uu;return this.Uu=m,0!==u.length||v?{snapshot:new my(this.query,e.Gu,s,u,e.mutatedKeys,0===m,v,!1),Yu:c}:{Yu:c}}bu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Gu:this.Gu,Wu:new gN,mutatedKeys:this.mutatedKeys,$i:!1},!1)):{Yu:[]}}Xu(e){return!this.Lu.has(e)&&!!this.Gu.has(e)&&!this.Gu.get(e).hasLocalMutations}Hu(e){e&&(e.addedDocuments.forEach(t=>this.Lu=this.Lu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Lu=this.Lu.delete(t)),this.current=e.current)}Ju(){if(!this.current)return[];const e=this.qu;this.qu=Vt(),this.Gu.forEach(r=>{this.Xu(r.key)&&(this.qu=this.qu.add(r.key))});const t=[];return e.forEach(r=>{this.qu.has(r)||t.push(new vN(r))}),this.qu.forEach(r=>{e.has(r)||t.push(new _N(r))}),t}Zu(e){this.Lu=e.Hi,this.qu=Vt();const t=this.ju(e.documents);return this.applyChanges(t,!0)}tc(){return my.fromInitialDocuments(this.query,this.Gu,this.mutatedKeys,0===this.Uu)}}class d1{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class h1{constructor(e){this.key=e,this.ec=!1}}class f1{constructor(e,t,r,s,u,c){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=s,this.currentUser=u,this.maxConcurrentLimboResolutions=c,this.nc={},this.sc=new Eh(m=>PM(m),Aw),this.ic=new Map,this.rc=new Set,this.oc=new Yn(Ge.comparator),this.uc=new Map,this.cc=new kS,this.ac={},this.hc=new Map,this.lc=Ap.vn(),this.onlineState="Unknown",this.fc=void 0}get isPrimaryClient(){return!0===this.fc}}function p1(n,e){return _A.apply(this,arguments)}function _A(){return _A=(0,_e.Z)(function*(n,e){const t=jA(n);let r,s;const u=t.sc.get(e);if(u)r=u.targetId,t.sharedClientState.addLocalQueryTarget(r),s=u.view.tc();else{const c=yield ly(t.localStore,Hs(e));t.isPrimaryClient&&Yb(t.remoteStore,c);const m=t.sharedClientState.addLocalQueryTarget(c.targetId);r=c.targetId,s=yield vA(t,e,r,"current"===m)}return s}),_A.apply(this,arguments)}function vA(n,e,t,r){return wA.apply(this,arguments)}function wA(){return wA=(0,_e.Z)(function*(n,e,t,r){n.dc=(A,M,L)=>{return(G=(0,_e.Z)(function*(Q,be,Te,Ze){let ut=be.view.ju(Te);ut.$i&&(ut=yield qb(Q.localStore,be.query,!1).then(({documents:bt})=>be.view.ju(bt,ut)));const lt=Ze&&Ze.targetChanges.get(be.targetId),tt=be.view.applyChanges(ut,Q.isPrimaryClient,lt);return MA(Q,be.targetId,tt.Yu),tt.snapshot}),function(Q,be,Te,Ze){return G.apply(this,arguments)})(n,A,M,L);var G};const s=yield qb(n.localStore,e,!0),u=new wN(e,s.Hi),c=u.ju(s.documents),m=kw.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState),v=u.applyChanges(c,n.isPrimaryClient,m);MA(n,t,v.Yu);const b=new d1(e,t,u);return n.sc.set(e,b),n.ic.has(t)?n.ic.get(t).push(e):n.ic.set(t,[e]),v.snapshot}),wA.apply(this,arguments)}function g1(n,e){return EA.apply(this,arguments)}function EA(){return EA=(0,_e.Z)(function*(n,e){const t=We(n),r=t.sc.get(e),s=t.ic.get(r.targetId);if(s.length>1)return t.ic.set(r.targetId,s.filter(u=>!Aw(u,e))),void t.sc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield cy(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),Zw(t.remoteStore,r.targetId),yy(t,r.targetId)}).catch(zo))):(yy(t,r.targetId),yield cy(t.localStore,r.targetId,!0))}),EA.apply(this,arguments)}function IA(){return IA=(0,_e.Z)(function*(n,e,t){const r=$A(n);try{const s=yield function(u,c){const m=We(u),v=Rn.now(),b=c.reduce((L,G)=>L.add(G.key),Vt());let A,M;return m.persistence.runTransaction("Locally write mutations","readwrite",L=>{let G=Gs(),Q=Vt();return m.Gi.getEntries(L,b).next(be=>{G=be,G.forEach((Te,Ze)=>{Ze.isValidDocument()||(Q=Q.add(Te))})}).next(()=>m.localDocuments.getOverlayedDocuments(L,G)).next(be=>{A=be;const Te=[];for(const Ze of c){const ut=Tk(Ze,A.get(Ze.key).overlayedDocument);null!=ut&&Te.push(new Nc(Ze.key,ut,wt(ut.value.mapValue),Jn.exists(!0)))}return m.mutationQueue.addMutationBatch(L,v,Te,c)}).next(be=>{M=be;const Te=be.applyToLocalDocumentSet(A,Q);return m.documentOverlayCache.saveOverlays(L,be.batchId,Te)})}).then(()=>({batchId:M.batchId,changes:eR(A)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(u,c,m){let v=u.ac[u.currentUser.toKey()];v||(v=new Yn(At)),v=v.insert(c,m),u.ac[u.currentUser.toKey()]=v}(r,s.batchId,t),yield Oc(r,s.changes),yield hy(r.remoteStore)}catch(s){const u=py(s,"Failed to persist write");t.reject(u)}}),IA.apply(this,arguments)}function EN(n,e){return bA.apply(this,arguments)}function bA(){return bA=(0,_e.Z)(function*(n,e){const t=We(n);try{const r=yield LP(t.localStore,e);e.targetChanges.forEach((s,u)=>{const c=t.uc.get(u);c&&(Tt(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?c.ec=!0:s.modifiedDocuments.size>0?Tt(c.ec):s.removedDocuments.size>0&&(Tt(c.ec),c.ec=!1))}),yield Oc(t,r,e)}catch(r){yield zo(r)}}),bA.apply(this,arguments)}function IN(n,e,t){const r=We(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const s=[];r.sc.forEach((u,c)=>{const m=c.view.bu(e);m.snapshot&&s.push(m.snapshot)}),function(u,c){const m=We(u);m.onlineState=c;let v=!1;m.queries.forEach((b,A)=>{for(const M of A.listeners)M.bu(c)&&(v=!0)}),v&&mA(m)}(r.eventManager,e),s.length&&r.nc.Wo(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function y1(n,e,t){return DA.apply(this,arguments)}function DA(){return DA=(0,_e.Z)(function*(n,e,t){const r=We(n);r.sharedClientState.updateQueryState(e,"rejected",t);const s=r.uc.get(e),u=s&&s.key;if(u){let c=new Yn(Ge.comparator);c=c.insert(u,ye.newNoDocument(u,Ct.min()));const m=Vt().add(u),v=new Ow(Ct.min(),new Map,new mn(At),c,m);yield EN(r,v),r.oc=r.oc.remove(u),r.uc.delete(e),RA(r)}else yield cy(r.localStore,e,!1).then(()=>yy(r,e,t)).catch(zo)}),DA.apply(this,arguments)}function _1(n,e){return CA.apply(this,arguments)}function CA(){return CA=(0,_e.Z)(function*(n,e){const t=We(n),r=e.batch.batchId;try{const s=yield FP(t.localStore,e);xA(t,r,null),AA(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Oc(t,s)}catch(s){yield zo(s)}}),CA.apply(this,arguments)}function v1(n,e,t){return TA.apply(this,arguments)}function TA(){return TA=(0,_e.Z)(function*(n,e,t){const r=We(n);try{const s=yield function(u,c){const m=We(u);return m.persistence.runTransaction("Reject batch","readwrite-primary",v=>{let b;return m.mutationQueue.lookupMutationBatch(v,c).next(A=>(Tt(null!==A),b=A.keys(),m.mutationQueue.removeMutationBatch(v,A))).next(()=>m.mutationQueue.performConsistencyCheck(v)).next(()=>m.documentOverlayCache.removeOverlaysForBatchId(v,b,c)).next(()=>m.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(v,b)).next(()=>m.localDocuments.getDocuments(v,b))})}(r.localStore,e);xA(r,e,t),AA(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Oc(r,s)}catch(s){yield zo(s)}}),TA.apply(this,arguments)}function SA(){return SA=(0,_e.Z)(function*(n,e){const t=We(n);Ch(t.remoteStore)||ke("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(u){const c=We(u);return c.persistence.runTransaction("Get highest unacknowledged batch id","readonly",m=>c.mutationQueue.getHighestUnacknowledgedBatchId(m))}(t.localStore);if(-1===r)return void e.resolve();const s=t.hc.get(r)||[];s.push(e),t.hc.set(r,s)}catch(r){const s=py(r,"Initialization of waitForPendingWrites() operation failed");e.reject(s)}}),SA.apply(this,arguments)}function AA(n,e){(n.hc.get(e)||[]).forEach(t=>{t.resolve()}),n.hc.delete(e)}function xA(n,e,t){const r=We(n);let s=r.ac[r.currentUser.toKey()];if(s){const u=s.get(e);u&&(t?u.reject(t):u.resolve(),s=s.remove(e)),r.ac[r.currentUser.toKey()]=s}}function yy(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.ic.get(e))n.sc.delete(r),t&&n.nc._c(r,t);n.ic.delete(e),n.isPrimaryClient&&n.cc.ls(e).forEach(r=>{n.cc.containsKey(r)||bN(n,r)})}function bN(n,e){n.rc.delete(e.path.canonicalString());const t=n.oc.get(e);null!==t&&(Zw(n.remoteStore,t),n.oc=n.oc.remove(e),n.uc.delete(t),RA(n))}function MA(n,e,t){for(const r of t)r instanceof _N?(n.cc.addReference(r.key,e),E1(n,r)):r instanceof vN?(ke("SyncEngine","Document no longer in limbo: "+r.key),n.cc.removeReference(r.key,e),n.cc.containsKey(r.key)||bN(n,r.key)):et()}function E1(n,e){const t=e.key,r=t.path.canonicalString();n.oc.get(t)||n.rc.has(r)||(ke("SyncEngine","New document in limbo: "+t),n.rc.add(r),RA(n))}function RA(n){for(;n.rc.size>0&&n.oc.size<n.maxConcurrentLimboResolutions;){const e=n.rc.values().next().value;n.rc.delete(e);const t=new Ge(qt.fromString(e)),r=n.lc.next();n.uc.set(r,new h1(t)),n.oc=n.oc.insert(t,r),Yb(n.remoteStore,new Ih(Hs(Xm(t.path)),r,2,Ti.at))}}function Oc(n,e,t){return NA.apply(this,arguments)}function NA(){return NA=(0,_e.Z)(function*(n,e,t){const r=We(n),s=[],u=[],c=[];var m;r.sc.isEmpty()||(r.sc.forEach((m,v)=>{c.push(r.dc(v,e,t).then(b=>{if(b){r.isPrimaryClient&&r.sharedClientState.updateQueryState(v.targetId,b.fromCache?"not-current":"current"),s.push(b);const A=VS.Ci(v.targetId,b);u.push(A)}}))}),yield Promise.all(c),r.nc.Wo(s),yield(m=(0,_e.Z)(function*(v,b){const A=We(v);try{yield A.persistence.runTransaction("notifyLocalViewChanges","readwrite",M=>se.forEach(b,L=>se.forEach(L.Si,G=>A.persistence.referenceDelegate.addReference(M,L.targetId,G)).next(()=>se.forEach(L.Di,G=>A.persistence.referenceDelegate.removeReference(M,L.targetId,G)))))}catch(M){if(!Cc(M))throw M;ke("LocalStore","Failed to update sequence numbers: "+M)}for(const M of b){const L=M.targetId;if(!M.fromCache){const G=A.Ui.get(L),be=G.withLastLimboFreeSnapshotVersion(G.snapshotVersion);A.Ui=A.Ui.insert(L,be)}}}),function(v,b){return m.apply(this,arguments)})(r.localStore,u))}),NA.apply(this,arguments)}function I1(n,e){return OA.apply(this,arguments)}function OA(){return OA=(0,_e.Z)(function*(n,e){const t=We(n);if(!t.currentUser.isEqual(e)){ke("SyncEngine","User change. New user:",e.toKey());const r=yield QR(t.localStore,e);t.currentUser=e,(s=t).hc.forEach(c=>{c.forEach(m=>{m.reject(new Re(ce.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),s.hc.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Oc(t,r.ji)}var s}),OA.apply(this,arguments)}function b1(n,e){const t=We(n),r=t.uc.get(e);if(r&&r.ec)return Vt().add(r.key);{let s=Vt();const u=t.ic.get(e);if(!u)return s;for(const c of u){const m=t.sc.get(c);s=s.unionWith(m.view.Qu)}return s}}function D1(n,e){return kA.apply(this,arguments)}function kA(){return kA=(0,_e.Z)(function*(n,e){const t=We(n),r=yield qb(t.localStore,e.query,!0),s=e.view.Zu(r);return t.isPrimaryClient&&MA(t,e.targetId,s.Yu),s}),kA.apply(this,arguments)}function C1(n,e){return PA.apply(this,arguments)}function PA(){return PA=(0,_e.Z)(function*(n,e){const t=We(n);return tN(t.localStore,e).then(r=>Oc(t,r))}),PA.apply(this,arguments)}function T1(n,e,t,r){return FA.apply(this,arguments)}function FA(){return FA=(0,_e.Z)(function*(n,e,t,r){const s=We(n),u=yield function(c,m){const v=We(c),b=We(v.mutationQueue);return v.persistence.runTransaction("Lookup mutation documents","readonly",A=>b.Tn(A,m).next(M=>M?v.localDocuments.getDocuments(A,M):se.resolve(null)))}(s.localStore,e);var m;null!==u?("pending"===t?yield hy(s.remoteStore):"acknowledged"===t||"rejected"===t?(xA(s,e,r||null),AA(s,e),m=e,We(We(s.localStore).mutationQueue).An(m)):et(),yield Oc(s,u)):ke("SyncEngine","Cannot apply mutation batch with id: "+e)}),FA.apply(this,arguments)}function LA(){return LA=(0,_e.Z)(function*(n,e){const t=We(n);if(jA(t),$A(t),!0===e&&!0!==t.fc){const r=t.sharedClientState.getAllActiveQueryTargets(),s=yield DN(t,r.toArray());t.fc=!0,yield lA(t.remoteStore,!0);for(const u of s)Yb(t.remoteStore,u)}else if(!1===e&&!1!==t.fc){const r=[];let s=Promise.resolve();t.ic.forEach((u,c)=>{t.sharedClientState.isLocalQueryTarget(c)?r.push(c):s=s.then(()=>(yy(t,c),cy(t.localStore,c,!0))),Zw(t.remoteStore,c)}),yield s,yield DN(t,r),function(u){const c=We(u);c.uc.forEach((m,v)=>{Zw(c.remoteStore,v)}),c.cc.fs(),c.uc=new Map,c.oc=new Yn(Ge.comparator)}(t),t.fc=!1,yield lA(t.remoteStore,!1)}}),LA.apply(this,arguments)}function DN(n,e,t){return VA.apply(this,arguments)}function VA(){return VA=(0,_e.Z)(function*(n,e,t){const r=We(n),s=[],u=[];for(const c of e){let m;const v=r.ic.get(c);if(v&&0!==v.length){m=yield ly(r.localStore,Hs(v[0]));for(const b of v){const A=r.sc.get(b),M=yield D1(r,A);M.snapshot&&u.push(M.snapshot)}}else{const b=yield eN(r.localStore,c);m=yield ly(r.localStore,b),yield vA(r,CN(b),c,!1)}s.push(m)}return r.nc.Wo(u),s}),VA.apply(this,arguments)}function CN(n){return OM(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function A1(n){const e=We(n);return We(We(e.localStore).persistence).vi()}function x1(n,e,t,r){return UA.apply(this,arguments)}function UA(){return UA=(0,_e.Z)(function*(n,e,t,r){const s=We(n);if(s.fc)return void ke("SyncEngine","Ignoring unexpected query state notification.");const u=s.ic.get(e);if(u&&u.length>0)switch(t){case"current":case"not-current":{const c=yield tN(s.localStore,FM(u[0])),m=Ow.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield Oc(s,c,m);break}case"rejected":yield cy(s.localStore,e,!0),yy(s,e,r);break;default:et()}}),UA.apply(this,arguments)}function M1(n,e,t){return BA.apply(this,arguments)}function BA(){return BA=(0,_e.Z)(function*(n,e,t){const r=jA(n);if(r.fc){for(const s of e){if(r.ic.has(s)){ke("SyncEngine","Adding an already active target "+s);continue}const u=yield eN(r.localStore,s),c=yield ly(r.localStore,u);yield vA(r,CN(u),c.targetId,!1),Yb(r.remoteStore,c)}for(const s of t)r.ic.has(s)&&(yield cy(r.localStore,s,!1).then(()=>{Zw(r.remoteStore,s),yy(r,s)}).catch(zo))}}),BA.apply(this,arguments)}function jA(n){const e=We(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=EN.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=b1.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=y1.bind(null,e),e.nc.Wo=a1.bind(null,e.eventManager),e.nc._c=u1.bind(null,e.eventManager),e}function $A(n){const e=We(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=_1.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=v1.bind(null,e),e}class TN{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,_e.Z)(function*(){t.It=Ww(e.databaseInfo.databaseId),t.sharedClientState=t.mc(e),t.persistence=t.gc(e),yield t.persistence.start(),t.localStore=t.yc(e),t.gcScheduler=t.Ic(e,t.localStore),t.indexBackfillerScheduler=t.Tc(e,t.localStore)})()}Ic(e,t){return null}Tc(e,t){return null}yc(e){return YR(this.persistence,new ZR,e.initialUser,this.It)}gc(e){return new WR(Gb.Bs,this.It)}mc(e){return new sN}terminate(){var e=this;return(0,_e.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class SN extends TN{constructor(e,t,r){super(),this.Ec=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,_e.Z)(function*(){yield t().call(r,e),yield r.Ec.initialize(r,e),yield $A(r.Ec.syncEngine),yield hy(r.Ec.remoteStore),yield r.persistence.li(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}yc(e){return YR(this.persistence,new ZR,e.initialUser,this.It)}Ic(e,t){return new EP(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}Tc(e,t){const r=new pS(t,this.persistence);return new fS(e.asyncQueue,r)}gc(e){const t=LS(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?zs.withCacheSize(this.cacheSizeBytes):zs.DEFAULT;return new FS(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,aN(),Zb(),this.It,this.sharedClientState,!!this.forceOwnership)}mc(e){return new sN}}class N1 extends SN{constructor(e,t){super(e,t,!1),this.Ec=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,_e.Z)(function*(){yield t().call(r,e);const s=r.Ec.syncEngine;r.sharedClientState instanceof qS&&(r.sharedClientState.syncEngine={Fr:T1.bind(null,s),$r:x1.bind(null,s),Br:M1.bind(null,s),vi:A1.bind(null,s),Or:C1.bind(null,s)},yield r.sharedClientState.start()),yield r.persistence.li(function(){var u=(0,_e.Z)(function*(c){yield function S1(n,e){return LA.apply(this,arguments)}(r.Ec.syncEngine,c),r.gcScheduler&&(c&&!r.gcScheduler.started?r.gcScheduler.start():c||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(c&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():c||r.indexBackfillerScheduler.stop())});return function(c){return u.apply(this,arguments)}}())})()}mc(e){const t=aN();if(!qS.C(t))throw new Re(ce.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=LS(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new qS(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class HA{initialize(e,t){var r=this;return(0,_e.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=s=>IN(r.syncEngine,s,1),r.remoteStore.remoteSyncer.handleCredentialChange=I1.bind(null,r.syncEngine),yield lA(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new o1}createDatastore(e){const t=Ww(e.databaseInfo.databaseId),r=new GP(e.databaseInfo);return new WP(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,s=e.asyncQueue,u=m=>IN(this.syncEngine,m,0),c=oN.C()?new oN:new jP,new ZP(t,r,s,u,c);var t,r,s,u,c}createSyncEngine(e,t){return function(r,s,u,c,m,v,b){const A=new f1(r,s,u,c,m,v);return b&&(A.fc=!0),A}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,_e.Z)(function*(t){const r=We(t);ke("RemoteStore","RemoteStore shutting down."),r._u.add(5),yield dy(r),r.mu.shutdown(),r.gu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function AN(n,e=10240){let t=0;return{read:()=>(0,_e.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,_e.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class Jb{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ac(this.observer.next,e)}error(e){this.observer.error?this.Ac(this.observer.error,e):pr("Uncaught Error in snapshot listener:",e)}Rc(){this.muted=!0}Ac(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class O1{constructor(e,t){this.bc=e,this.It=t,this.metadata=new Ir,this.buffer=new Uint8Array,this.Pc=new TextDecoder("utf-8"),this.vc().then(r=>{r&&r.ku()?this.metadata.resolve(r.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.payload)}`))},r=>this.metadata.reject(r))}close(){return this.bc.cancel()}getMetadata(){var e=this;return(0,_e.Z)(function*(){return e.metadata.promise})()}wc(){var e=this;return(0,_e.Z)(function*(){return yield e.getMetadata(),e.vc()})()}vc(){var e=this;return(0,_e.Z)(function*(){const t=yield e.Vc();if(null===t)return null;const r=e.Pc.decode(t),s=Number(r);isNaN(s)&&e.Sc(`length string (${r}) is not valid number`);const u=yield e.Dc(s);return new l1(JSON.parse(u),t.length+s)})()}Cc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Vc(){var e=this;return(0,_e.Z)(function*(){for(;e.Cc()<0&&!(yield e.xc()););if(0===e.buffer.length)return null;const t=e.Cc();t<0&&e.Sc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}Dc(e){var t=this;return(0,_e.Z)(function*(){for(;t.buffer.length<e;)(yield t.xc())&&t.Sc("Reached the end of bundle when more is expected.");const r=t.Pc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Sc(e){throw this.bc.cancel(),new Error(`Invalid bundle format: ${e}`)}xc(){var e=this;return(0,_e.Z)(function*(){const t=yield e.bc.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class k1{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,_e.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Re(ce.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(s=(0,_e.Z)(function*(u,c){const m=We(u),v=Lw(m.It)+"/documents",b={documents:c.map(G=>Fw(m.It,G))},A=yield m.fo("BatchGetDocuments",v,b,c.length),M=new Map;A.forEach(G=>{const Q=function Lk(n,e){return"found"in e?function(t,r){Tt(!!r.found);const s=tl(t,r.found.name),u=li(r.found.updateTime),c=new $e({mapValue:{fields:r.found.fields}});return ye.newFoundDocument(s,u,c)}(n,e):"missing"in e?function(t,r){Tt(!!r.missing),Tt(!!r.readTime);const s=tl(t,r.missing),u=li(r.readTime);return ye.newNoDocument(s,u)}(n,e):et()}(m.It,G);M.set(Q.key.toString(),Q)});const L=[];return c.forEach(G=>{const Q=M.get(G.toString());Tt(!!Q),L.push(Q)}),L}),function(u,c){return s.apply(this,arguments)})(t.datastore,e);var s;return r.forEach(s=>t.recordVersion(s)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new iy(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,_e.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,s)=>{const u=Ge.fromPath(s);e.mutations.push(new bS(u,e.precondition(u)))}),yield(r=(0,_e.Z)(function*(s,u){const c=We(s),m=Lw(c.It)+"/documents",v={writes:u.map(b=>Vw(c.It,b))};yield c.co("Commit",m,v)}),function(s,u){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw et();t=Ct.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Re(ce.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Ct.min())?Jn.exists(!1):Jn.updateTime(t):Jn.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Ct.min()))throw new Re(ce.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Jn.updateTime(t)}return Jn.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class P1{constructor(e,t,r,s,u){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=s,this.deferred=u,this.Nc=r.maxAttempts,this.xo=new WS(this.asyncQueue,"transaction_retry")}run(){this.Nc-=1,this.kc()}kc(){var e=this;this.xo.Ao((0,_e.Z)(function*(){const t=new k1(e.datastore),r=e.Mc(t);r&&r.then(s=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(s)}).catch(u=>{e.Oc(u)}))}).catch(s=>{e.Oc(s)})}))}Mc(e){try{const t=this.updateFunction(e);return!vp(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Oc(e){this.Nc>0&&this.Fc(e)?(this.Nc-=1,this.asyncQueue.enqueueAndForget(()=>(this.kc(),Promise.resolve()))):this.deferred.reject(e)}Fc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!QM(t)}return!1}}class F1{constructor(e,t,r,s){var u=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=s,this.user=fr.UNAUTHENTICATED,this.clientId=Ib.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var c=(0,_e.Z)(function*(m){ke("FirestoreClient","Received user=",m.uid),yield u.authCredentialListener(m),u.user=m});return function(m){return c.apply(this,arguments)}}()),this.appCheckCredentials.start(r,c=>(ke("FirestoreClient","Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}getConfiguration(){var e=this;return(0,_e.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Re(ce.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Ir;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,_e.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const s=py(r,"Failed to shutdown persistence");t.reject(s)}})),t.promise}}function xN(n,e){return GA.apply(this,arguments)}function GA(){return GA=(0,_e.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),ke("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var s=(0,_e.Z)(function*(u){r.isEqual(u)||(yield QR(e.localStore,u),r=u)});return function(u){return s.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),GA.apply(this,arguments)}function MN(n,e){return zA.apply(this,arguments)}function zA(){return zA=(0,_e.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield qA(n);ke("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(s=>pN(e.remoteStore,s)),n.setAppCheckTokenChangeListener((s,u)=>pN(e.remoteStore,u)),n.onlineComponents=e}),zA.apply(this,arguments)}function qA(n){return WA.apply(this,arguments)}function WA(){return WA=(0,_e.Z)(function*(n){return n.offlineComponents||(ke("FirestoreClient","Using default OfflineComponentProvider"),yield xN(n,new TN)),n.offlineComponents}),WA.apply(this,arguments)}function Xb(n){return KA.apply(this,arguments)}function KA(){return KA=(0,_e.Z)(function*(n){return n.onlineComponents||(ke("FirestoreClient","Using default OnlineComponentProvider"),yield MN(n,new HA)),n.onlineComponents}),KA.apply(this,arguments)}function RN(n){return qA(n).then(e=>e.persistence)}function eD(n){return qA(n).then(e=>e.localStore)}function NN(n){return Xb(n).then(e=>e.remoteStore)}function ZA(n){return Xb(n).then(e=>e.syncEngine)}function _y(n){return YA.apply(this,arguments)}function YA(){return YA=(0,_e.Z)(function*(n){const e=yield Xb(n),t=e.eventManager;return t.onListen=p1.bind(null,e.syncEngine),t.onUnlisten=g1.bind(null,e.syncEngine),t}),YA.apply(this,arguments)}function ON(n,e,t={}){const r=new Ir;return n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return function(s,u,c,m,v){const b=new Jb({next:M=>{u.enqueueAndForget(()=>pA(s,A));const L=M.docs.has(c);!L&&M.fromCache?v.reject(new Re(ce.UNAVAILABLE,"Failed to get document because the client is offline.")):L&&M.fromCache&&m&&"server"===m.source?v.reject(new Re(ce.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):v.resolve(M)},error:M=>v.reject(M)}),A=new yA(Xm(c.path),b,{includeMetadataChanges:!0,Nu:!0});return hA(s,A)}(yield _y(n),n.asyncQueue,e,t,r)})),r.promise}function kN(n,e,t={}){const r=new Ir;return n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return function(s,u,c,m,v){const b=new Jb({next:M=>{u.enqueueAndForget(()=>pA(s,A)),M.fromCache&&"server"===m.source?v.reject(new Re(ce.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):v.resolve(M)},error:M=>v.reject(M)}),A=new yA(c,b,{includeMetadataChanges:!0,Nu:!0});return hA(s,A)}(yield _y(n),n.asyncQueue,e,t,r)})),r.promise}const PN=new Map;function QA(n,e,t){if(!t)throw new Re(ce.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function FN(n,e,t,r){if(!0===e&&!0===r)throw new Re(ce.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function LN(n){if(!Ge.isDocumentKey(n))throw new Re(ce.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function VN(n){if(Ge.isDocumentKey(n))throw new Re(ce.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function tD(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":et()}function Jt(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Re(ce.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=tD(n);throw new Re(ce.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function UN(n,e){if(e<=0)throw new Re(ce.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class BN{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Re(ce.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Re(ce.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,FN("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Yw{constructor(e,t,r,s){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new BN({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Re(ce.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Re(ce.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new BN(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new pw;switch(t.type){case"gapi":return new wb(t.client,t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new Re(ce.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=PN.get(e);t&&(ke("ComponentProvider","Removing Datastore"),PN.delete(e),t.terminate())}(this),Promise.resolve()}}class Bn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new rl(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Bn(this.firestore,e,this._key)}}class $i{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new $i(this.firestore,e,this._query)}}class rl extends $i{constructor(e,t,r){super(e,t,Xm(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Bn(this.firestore,null,new Ge(e))}withConverter(e){return new rl(this.firestore,e,this._path)}}function jN(n,e,...t){if(n=(0,Dt.m9)(n),QA("collection","path",e),n instanceof Yw){const r=qt.fromString(e,...t);return VN(r),new rl(n,null,r)}{if(!(n instanceof Bn||n instanceof rl))throw new Re(ce.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(qt.fromString(e,...t));return VN(r),new rl(n.firestore,null,r)}}function nD(n,e,...t){if(n=(0,Dt.m9)(n),1===arguments.length&&(e=Ib.R()),QA("doc","path",e),n instanceof Yw){const r=qt.fromString(e,...t);return LN(r),new Bn(n,null,new Ge(r))}{if(!(n instanceof Bn||n instanceof rl))throw new Re(ce.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(qt.fromString(e,...t));return LN(r),new Bn(n.firestore,n instanceof rl?n.converter:null,new Ge(r))}}function $N(n,e){return n=(0,Dt.m9)(n),e=(0,Dt.m9)(e),(n instanceof Bn||n instanceof rl)&&(e instanceof Bn||e instanceof rl)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function HN(n,e){return n=(0,Dt.m9)(n),e=(0,Dt.m9)(e),n instanceof $i&&e instanceof $i&&n.firestore===e.firestore&&Aw(n._query,e._query)&&n.converter===e.converter}class W1{constructor(){this.$c=Promise.resolve(),this.Bc=[],this.Lc=!1,this.Uc=[],this.qc=null,this.Kc=!1,this.Gc=!1,this.Qc=[],this.xo=new WS(this,"async_queue_retry"),this.jc=()=>{const t=Zb();t&&ke("AsyncQueue","Visibility state changed to "+t.visibilityState),this.xo.bo()};const e=Zb();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.jc)}get isShuttingDown(){return this.Lc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Wc(),this.zc(e)}enterRestrictedMode(e){if(!this.Lc){this.Lc=!0,this.Gc=e||!1;const t=Zb();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.jc)}}enqueue(e){if(this.Wc(),this.Lc)return new Promise(()=>{});const t=new Ir;return this.zc(()=>this.Lc&&this.Gc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Bc.push(e),this.Hc()))}Hc(){var e=this;return(0,_e.Z)(function*(){if(0!==e.Bc.length){try{yield e.Bc[0](),e.Bc.shift(),e.xo.reset()}catch(t){if(!Cc(t))throw t;ke("AsyncQueue","Operation failed with retryable error: "+t)}e.Bc.length>0&&e.xo.Ao(()=>e.Hc())}})()}zc(e){const t=this.$c.then(()=>(this.Kc=!0,e().catch(r=>{throw this.qc=r,this.Kc=!1,pr("INTERNAL UNHANDLED ERROR: ",function(u){let c=u.message||"";return u.stack&&(c=u.stack.includes(u.message)?u.stack:u.message+"\n"+u.stack),c}(r)),r}).then(r=>(this.Kc=!1,r))));return this.$c=t,t}enqueueAfterDelay(e,t,r){this.Wc(),this.Qc.indexOf(e)>-1&&(t=0);const s=dA.createAndSchedule(this,e,t,r,u=>this.Jc(u));return this.Uc.push(s),s}Wc(){this.qc&&et()}verifyOperationInProgress(){}Yc(){var e=this;return(0,_e.Z)(function*(){let t;do{t=e.$c,yield t}while(t!==e.$c)})()}Xc(e){for(const t of this.Uc)if(t.timerId===e)return!0;return!1}Zc(e){return this.Yc().then(()=>{this.Uc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.Uc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Yc()})}ta(e){this.Qc.push(e)}Jc(e){const t=this.Uc.indexOf(e);this.Uc.splice(t,1)}}function JA(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const s of["next","error","complete"])if(s in r&&"function"==typeof r[s])return!0;return!1}(n)}class K1{constructor(){this._progressObserver={},this._taskCompletionResolver=new Ir,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Xn extends Yw{constructor(e,t,r,s){super(e,t,r,s),this.type="firestore",this._queue=new W1,this._persistenceKey=s?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||GN(this),this._firestoreClient.terminate()}}function Lr(n){return n._firestoreClient||GN(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function GN(n){var e;const t=n._freezeSettings(),r=(u=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new xM(n._databaseId,u,n._persistenceKey,(m=t).host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,m.useFetchStreams));var u,m;n._firestoreClient=new F1(n._authCredentials,n._appCheckCredentials,n._queue,r)}function zN(n,e,t){const r=new Ir;return n.asyncQueue.enqueue((0,_e.Z)(function*(){try{yield xN(n,t),yield MN(n,e),r.resolve()}catch(s){const u=s;if(!("FirebaseError"===(c=u).name?c.code===ce.FAILED_PRECONDITION||c.code===ce.UNIMPLEMENTED:!(typeof DOMException<"u"&&c instanceof DOMException)||22===c.code||20===c.code||11===c.code))throw u;bc("Error enabling offline persistence. Falling back to persistence disabled: "+u),r.reject(u)}var c})).then(()=>r.promise)}function qN(n){if(n._initialized||n._terminated)throw new Re(ce.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class kc{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Re(ce.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Zn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class il{constructor(e){this._byteString=e}static fromBase64String(e){try{return new il(Pr.fromBase64String(e))}catch(t){throw new Re(ce.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new il(Pr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Mp{constructor(e){this._methodName=e}}class rD{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Re(ce.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Re(ce.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return At(this._lat,e._lat)||At(this._long,e._long)}}const iF=/^__.*__$/;class sF{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new Nc(e,this.data,this.fieldMask,t,this.fieldTransforms):new ry(e,this.data,t,this.fieldTransforms)}}class WN{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Nc(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function KN(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw et()}}class iD{constructor(e,t,r,s,u,c){this.settings=e,this.databaseId=t,this.It=r,this.ignoreUndefinedProperties=s,void 0===u&&this.ea(),this.fieldTransforms=u||[],this.fieldMask=c||[]}get path(){return this.settings.path}get na(){return this.settings.na}sa(e){return new iD(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.It,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ia(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),s=this.sa({path:r,ra:!1});return s.oa(e),s}ua(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),s=this.sa({path:r,ra:!1});return s.ea(),s}ca(e){return this.sa({path:void 0,ra:!0})}aa(e){return aD(e,this.settings.methodName,this.settings.ha||!1,this.path,this.settings.la)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}ea(){if(this.path)for(let e=0;e<this.path.length;e++)this.oa(this.path.get(e))}oa(e){if(0===e.length)throw this.aa("Document fields must not be empty");if(KN(this.na)&&iF.test(e))throw this.aa('Document fields cannot begin and end with "__"')}}class oF{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.It=r||Ww(e)}fa(e,t,r,s=!1){return new iD({na:e,methodName:t,la:r,path:Zn.emptyPath(),ra:!1,ha:s},this.databaseId,this.It,this.ignoreUndefinedProperties)}}function Rp(n){const e=n._freezeSettings(),t=Ww(n._databaseId);return new oF(n._databaseId,!!e.ignoreUndefinedProperties,t)}function sD(n,e,t,r,s,u={}){const c=n.fa(u.merge||u.mergeFields?2:0,e,t,s);nx("Data must be an object, but it was:",c,r);const m=QN(r,c);let v,b;if(u.merge)v=new ps(c.fieldMask),b=c.fieldTransforms;else if(u.mergeFields){const A=[];for(const M of u.mergeFields){const L=rx(e,M,t);if(!c.contains(L))throw new Re(ce.INVALID_ARGUMENT,`Field '${L}' is specified in your field mask but missing from your input data.`);XN(A,L)||A.push(L)}v=new ps(A),b=c.fieldTransforms.filter(M=>v.covers(M.field))}else v=null,b=c.fieldTransforms;return new sF(new $e(m),v,b)}class Qw extends Mp{_toFieldTransform(e){if(2!==e.na)throw e.aa(1===e.na?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Qw}}function ZN(n,e,t){return new iD({na:3,la:e.settings.la,methodName:n._methodName,ra:t},e.databaseId,e.It,e.ignoreUndefinedProperties)}class XA extends Mp{_toFieldTransform(e){return new xw(e.path,new ty)}isEqual(e){return e instanceof XA}}class aF extends Mp{constructor(e,t){super(e),this.da=t}_toFieldTransform(e){const t=ZN(this,e,!0),r=this.da.map(u=>Np(u,t)),s=new wp(r);return new xw(e.path,s)}isEqual(e){return this===e}}class uF extends Mp{constructor(e,t){super(e),this.da=t}_toFieldTransform(e){const t=ZN(this,e,!0),r=this.da.map(u=>Np(u,t)),s=new Ep(r);return new xw(e.path,s)}isEqual(e){return this===e}}class lF extends Mp{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=new ny(e.It,BM(e.It,this._a));return new xw(e.path,t)}isEqual(e){return this===e}}function ex(n,e,t,r){const s=n.fa(1,e,t);nx("Data must be an object, but it was:",s,r);const u=[],c=$e.empty();Qu(r,(v,b)=>{const A=oD(e,v,t);b=(0,Dt.m9)(b);const M=s.ua(A);if(b instanceof Qw)u.push(A);else{const L=Np(b,M);null!=L&&(u.push(A),c.set(A,L))}});const m=new ps(u);return new WN(c,m,s.fieldTransforms)}function tx(n,e,t,r,s,u){const c=n.fa(1,e,t),m=[rx(e,r,t)],v=[s];if(u.length%2!=0)throw new Re(ce.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let L=0;L<u.length;L+=2)m.push(rx(e,u[L])),v.push(u[L+1]);const b=[],A=$e.empty();for(let L=m.length-1;L>=0;--L)if(!XN(b,m[L])){const G=m[L];let Q=v[L];Q=(0,Dt.m9)(Q);const be=c.ua(G);if(Q instanceof Qw)b.push(G);else{const Te=Np(Q,be);null!=Te&&(b.push(G),A.set(G,Te))}}const M=new ps(b);return new WN(A,M,c.fieldTransforms)}function YN(n,e,t,r=!1){return Np(t,n.fa(r?4:3,e))}function Np(n,e){if(JN(n=(0,Dt.m9)(n)))return nx("Unsupported field value:",e,n),QN(n,e);if(n instanceof Mp)return function(t,r){if(!KN(r.na))throw r.aa(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.aa(`${t._methodName}() is not currently supported inside arrays`);const s=t._toFieldTransform(r);s&&r.fieldTransforms.push(s)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.ra&&4!==e.na)throw e.aa("Nested arrays are not supported");return function(t,r){const s=[];let u=0;for(const c of t){let m=Np(c,r.ca(u));null==m&&(m={nullValue:"NULL_VALUE"}),s.push(m),u++}return{arrayValue:{values:s}}}(n,e)}return function(t,r){if(null===(t=(0,Dt.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return BM(r.It,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const s=Rn.fromDate(t);return{timestampValue:Pw(r.It,s)}}if(t instanceof Rn){const s=new Rn(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Pw(r.It,s)}}if(t instanceof rD)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof il)return{bytesValue:aR(r.It,t._byteString)};if(t instanceof Bn){const s=r.databaseId,u=t.firestore._databaseId;if(!u.isEqual(s))throw r.aa(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:DS(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.aa(`Unsupported field value: ${tD(t)}`)}(n,e)}function QN(n,e){const t={};return Ab(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Qu(n,(r,s)=>{const u=Np(s,e.ia(r));null!=u&&(t[r]=u)}),{mapValue:{fields:t}}}function JN(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Rn||n instanceof rD||n instanceof il||n instanceof Bn||n instanceof Mp)}function nx(n,e,t){if(!JN(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=tD(t);throw e.aa("an object"===r?n+" a custom object":n+" "+r)}var r}function rx(n,e,t){if((e=(0,Dt.m9)(e))instanceof kc)return e._internalPath;if("string"==typeof e)return oD(n,e);throw aD("Field path arguments must be of type string or ",n,!1,void 0,t)}const cF=new RegExp("[~\\*/\\[\\]]");function oD(n,e,t){if(e.search(cF)>=0)throw aD(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new kc(...e.split("."))._internalPath}catch{throw aD(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function aD(n,e,t,r,s){const u=r&&!r.isEmpty(),c=void 0!==s;let m=`Function ${e}() called with invalid data`;t&&(m+=" (via `toFirestore()`)"),m+=". ";let v="";return(u||c)&&(v+=" (found",u&&(v+=` in field ${r}`),c&&(v+=` in document ${s}`),v+=")"),new Re(ce.INVALID_ARGUMENT,m+n+v)}function XN(n,e){return n.some(t=>t.isEqual(e))}class Jw{constructor(e,t,r,s,u){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=s,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new Bn(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new dF(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(uD("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class dF extends Jw{data(){return super.data()}}function uD(n,e){return"string"==typeof e?oD(n,e):e instanceof kc?e._internalPath:e._delegate._internalPath}class Op{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Pc extends Jw{constructor(e,t,r,s,u,c){super(e,t,r,s,c),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Xw(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(uD("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class Xw extends Pc{data(e={}){return super.data(e)}}class Sh{constructor(e,t,r,s){this._firestore=e,this._userDataWriter=t,this._snapshot=s,this.metadata=new Op(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Xw(this._firestore,this._userDataWriter,r.key,r,new Op(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Re(ce.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,s){if(r._snapshot.oldDocs.isEmpty()){let u=0;return r._snapshot.docChanges.map(c=>({type:"added",doc:new Xw(r._firestore,r._userDataWriter,c.doc.key,c.doc,new Op(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:u++}))}{let u=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(c=>s||3!==c.type).map(c=>{const m=new Xw(r._firestore,r._userDataWriter,c.doc.key,c.doc,new Op(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter);let v=-1,b=-1;return 0!==c.type&&(v=u.indexOf(c.doc.key),u=u.delete(c.doc.key)),1!==c.type&&(u=u.add(c.doc),b=u.indexOf(c.doc.key)),{type:hF(c.type),doc:m,oldIndex:v,newIndex:b}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function hF(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return et()}}function eO(n,e){return n instanceof Pc&&e instanceof Pc?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Sh&&e instanceof Sh&&n._firestore===e._firestore&&HN(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function tO(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Re(ce.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class e0{}function Ah(n,...e){for(const t of e)n=t._apply(n);return n}class fF extends e0{constructor(e,t,r){super(),this.wa=e,this.ma=t,this.ga=r,this.type="where"}_apply(e){const t=Rp(e.firestore),r=function(s,u,c,m,v,b,A){let M;if(v.isKeyField()){if("array-contains"===b||"array-contains-any"===b)throw new Re(ce.INVALID_ARGUMENT,`Invalid Query. You can't perform '${b}' queries on documentId().`);if("in"===b||"not-in"===b){aO(A,b);const G=[];for(const Q of A)G.push(oO(m,s,Q));M={arrayValue:{values:G}}}else M=oO(m,s,A)}else"in"!==b&&"not-in"!==b&&"array-contains-any"!==b||aO(A,b),M=YN(c,"where",A,"in"===b||"not-in"===b);const L=Dr.create(v,b,M);return function(G,Q){if(Q.dt()){const Te=vS(G);if(null!==Te&&!Te.isEqual(Q.field))throw new Re(ce.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${Te.toString()}' and '${Q.field.toString()}'`);const Ze=_S(G);null!==Ze&&uO(0,Q.field,Ze)}const be=function(Te,Ze){for(const ut of Te.filters)if(Ze.indexOf(ut.op)>=0)return ut.op;return null}(G,function(Te){switch(Te){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(Q.op));if(null!==be)throw new Re(ce.INVALID_ARGUMENT,be===Q.op?`Invalid query. You cannot use more than one '${Q.op.toString()}' filter.`:`Invalid query. You cannot use '${Q.op.toString()}' filters with '${be.toString()}' filters.`)}(s,L),L}(e._query,0,t,e.firestore._databaseId,this.wa,this.ma,this.ga);return new $i(e.firestore,e.converter,function(s,u){const c=s.filters.concat([u]);return new Rc(s.path,s.collectionGroup,s.explicitOrderBy.slice(),c,s.limit,s.limitType,s.startAt,s.endAt)}(e._query,r))}}class gF extends e0{constructor(e,t){super(),this.wa=e,this.ya=t,this.type="orderBy"}_apply(e){const t=function(r,s,u){if(null!==r.startAt)throw new Re(ce.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Re(ce.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const c=new Jm(s,u);return function(m,v){if(null===_S(m)){const b=vS(m);null!==b&&uO(0,b,v.field)}}(r,c),c}(e._query,this.wa,this.ya);return new $i(e.firestore,e.converter,function(r,s){const u=r.explicitOrderBy.concat([s]);return new Rc(r.path,r.collectionGroup,u,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class nO extends e0{constructor(e,t,r){super(),this.type=e,this.pa=t,this.Ia=r}_apply(e){return new $i(e.firestore,e.converter,Mb(e._query,this.pa,this.Ia))}}class rO extends e0{constructor(e,t,r){super(),this.type=e,this.Ta=t,this.Ea=r}_apply(e){const t=sO(e,this.type,this.Ta,this.Ea);return new $i(e.firestore,e.converter,(s=t,new Rc((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,s,r.endAt)));var r,s}}class iO extends e0{constructor(e,t,r){super(),this.type=e,this.Ta=t,this.Ea=r}_apply(e){const t=sO(e,this.type,this.Ta,this.Ea);return new $i(e.firestore,e.converter,(s=t,new Rc((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,s)));var r,s}}function sO(n,e,t,r){if(t[0]=(0,Dt.m9)(t[0]),t[0]instanceof Jw)return function(s,u,c,m,v){if(!m)throw new Re(ce.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${c}().`);const b=[];for(const A of ey(s))if(A.field.isKeyField())b.push(f(u,m.key));else{const M=m.data.field(A.field);if(xb(M))throw new Re(ce.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+A.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===M){const L=A.field.canonicalString();throw new Re(ce.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${L}' (used as the orderBy) does not exist.`)}b.push(M)}return new wh(b,v)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const s=Rp(n.firestore);return function(u,c,m,v,b,A){const M=u.explicitOrderBy;if(b.length>M.length)throw new Re(ce.INVALID_ARGUMENT,`Too many arguments provided to ${v}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const L=[];for(let G=0;G<b.length;G++){const Q=b[G];if(M[G].field.isKeyField()){if("string"!=typeof Q)throw new Re(ce.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${v}(), but got a ${typeof Q}`);if(!wS(u)&&-1!==Q.indexOf("/"))throw new Re(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${v}() must be a plain document ID, but '${Q}' contains a slash.`);const be=u.path.child(qt.fromString(Q));if(!Ge.isDocumentKey(be))throw new Re(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${v}() must result in a valid document path, but '${be}' is not because it contains an odd number of segments.`);const Te=new Ge(be);L.push(f(c,Te))}else{const be=YN(m,v,Q);L.push(be)}}return new wh(L,A)}(n._query,n.firestore._databaseId,s,e,t,r)}}function oO(n,e,t){if("string"==typeof(t=(0,Dt.m9)(t))){if(""===t)throw new Re(ce.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!wS(e)&&-1!==t.indexOf("/"))throw new Re(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(qt.fromString(t));if(!Ge.isDocumentKey(r))throw new Re(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return f(n,new Ge(r))}if(t instanceof Bn)return f(n,t._key);throw new Re(ce.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${tD(t)}.`)}function aO(n,e){if(!Array.isArray(n)||0===n.length)throw new Re(ce.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new Re(ce.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function uO(n,e,t){if(!t.isEqual(e))throw new Re(ce.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}const bF={maxAttempts:5};class ix{convertValue(e,t="none"){switch(yh(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Qn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Tc(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw et()}}convertObject(e,t){const r={};return Qu(e.fields,(s,u)=>{r[s]=this.convertValue(u,t)}),r}convertGeoPoint(e){return new rD(Qn(e.latitude),Qn(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=mS(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Km(e));default:return null}}convertTimestamp(e){const t=Xu(e);return new Rn(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=qt.fromString(e);Tt(yR(r));const s=new Sc(r.get(1),r.get(3)),u=new Ge(r.popFirst(5));return s.isEqual(t)||pr(`Document ${u} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),u}}function lD(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class DF extends ix{constructor(e){super(),this.firestore=e}convertBytes(e){return new il(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Bn(this.firestore,null,t)}}class lO{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Rp(e)}set(e,t,r){this._verifyNotCommitted();const s=xh(e,this._firestore),u=lD(s.converter,t,r),c=sD(this._dataReader,"WriteBatch.set",s._key,u,null!==s.converter,r);return this._mutations.push(c.toMutation(s._key,Jn.none())),this}update(e,t,r,...s){this._verifyNotCommitted();const u=xh(e,this._firestore);let c;return c="string"==typeof(t=(0,Dt.m9)(t))||t instanceof kc?tx(this._dataReader,"WriteBatch.update",u._key,t,r,s):ex(this._dataReader,"WriteBatch.update",u._key,t),this._mutations.push(c.toMutation(u._key,Jn.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=xh(e,this._firestore);return this._mutations=this._mutations.concat(new iy(t._key,Jn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Re(ce.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function xh(n,e){if((n=(0,Dt.m9)(n)).firestore!==e)throw new Re(ce.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class kp extends ix{constructor(e){super(),this.firestore=e}convertBytes(e){return new il(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Bn(this.firestore,null,t)}}function cO(n,e,t){n=Jt(n,Bn);const r=Jt(n.firestore,Xn),s=lD(n.converter,e,t);return vy(r,[sD(Rp(r),"setDoc",n._key,s,null!==n.converter,t).toMutation(n._key,Jn.none())])}function dO(n,e,t,...r){n=Jt(n,Bn);const s=Jt(n.firestore,Xn),u=Rp(s);let c;return c="string"==typeof(e=(0,Dt.m9)(e))||e instanceof kc?tx(u,"updateDoc",n._key,e,t,r):ex(u,"updateDoc",n._key,e),vy(s,[c.toMutation(n._key,Jn.exists(!0))])}function hO(n,...e){var t,r,s;n=(0,Dt.m9)(n);let u={includeMetadataChanges:!1},c=0;"object"!=typeof e[c]||JA(e[c])||(u=e[c],c++);const m={includeMetadataChanges:u.includeMetadataChanges};if(JA(e[c])){const M=e[c];e[c]=null===(t=M.next)||void 0===t?void 0:t.bind(M),e[c+1]=null===(r=M.error)||void 0===r?void 0:r.bind(M),e[c+2]=null===(s=M.complete)||void 0===s?void 0:s.bind(M)}let v,b,A;if(n instanceof Bn)b=Jt(n.firestore,Xn),A=Xm(n._key.path),v={next:M=>{e[c]&&e[c](sx(b,n,M))},error:e[c+1],complete:e[c+2]};else{const M=Jt(n,$i);b=Jt(M.firestore,Xn),A=M._query;const L=new kp(b);v={next:G=>{e[c]&&e[c](new Sh(b,L,M,G))},error:e[c+1],complete:e[c+2]},tO(n._query)}return function(M,L,G,Q){const be=new Jb(Q),Te=new yA(L,be,G);return M.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return hA(yield _y(M),Te)})),()=>{be.Rc(),M.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return pA(yield _y(M),Te)}))}}(Lr(b),A,m,v)}function vy(n,e){return function(t,r){const s=new Ir;return t.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return function m1(n,e,t){return IA.apply(this,arguments)}(yield ZA(t),r,s)})),s.promise}(Lr(n),e)}function sx(n,e,t){const r=t.docs.get(e._key),s=new kp(n);return new Pc(n,s,e._key,r,new Op(t.hasPendingWrites,t.fromCache),e.converter)}class kF extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Rp(e)}get(e){const t=xh(e,this._firestore),r=new DF(this._firestore);return this._transaction.lookup([t._key]).then(s=>{if(!s||1!==s.length)return et();const u=s[0];if(u.isFoundDocument())return new Jw(this._firestore,r,u.key,u,t.converter);if(u.isNoDocument())return new Jw(this._firestore,r,t._key,null,t.converter);throw et()})}set(e,t,r){const s=xh(e,this._firestore),u=lD(s.converter,t,r),c=sD(this._dataReader,"Transaction.set",s._key,u,null!==s.converter,r);return this._transaction.set(s._key,c),this}update(e,t,r,...s){const u=xh(e,this._firestore);let c;return c="string"==typeof(t=(0,Dt.m9)(t))||t instanceof kc?tx(this._dataReader,"Transaction.update",u._key,t,r,s):ex(this._dataReader,"Transaction.update",u._key,t),this._transaction.update(u._key,c),this}delete(e){const t=xh(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=xh(e,this._firestore),r=new kp(this._firestore);return super.get(e).then(s=>new Pc(this._firestore,r,t._key,s._document,new Op(!1,!1),t.converter))}}function ox(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Re("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function pO(){if(typeof Uint8Array>"u")throw new Re("unimplemented","Uint8Arrays are not available in this environment.")}function gO(){if(!function gS(){return typeof atob<"u"}())throw new Re("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){fs=js.SDK_VERSION,(0,js._registerComponent)(new Bf.wA("firestore",(t,{instanceIdentifier:r,options:s})=>{const u=t.getProvider("app").getImmediate(),c=new Xn(new _b(t.getProvider("auth-internal")),new Gm(t.getProvider("app-check-internal")),function(m,v){if(!Object.prototype.hasOwnProperty.apply(m.options,["projectId"]))throw new Re(ce.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Sc(m.options.projectId,v)}(u,r),u);return s=Object.assign({useFetchStreams:e},s),c._setSettings(s),c},"PUBLIC").setMultipleInstances(!0)),(0,js.registerVersion)(gb,"3.4.15",n),(0,js.registerVersion)(gb,"3.4.15","esm2017")}();class t0{constructor(e){this._delegate=e}static fromBase64String(e){return gO(),new t0(il.fromBase64String(e))}static fromUint8Array(e){return pO(),new t0(il.fromUint8Array(e))}toBase64(){return gO(),this._delegate.toBase64()}toUint8Array(){return pO(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function ax(n){return function HF(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class GF{enableIndexedDbPersistence(e,t){return function Y1(n,e){qN(n=Jt(n,Xn));const t=Lr(n),r=n._freezeSettings(),s=new HA;return zN(t,s,new SN(s,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function Q1(n){qN(n=Jt(n,Xn));const e=Lr(n),t=n._freezeSettings(),r=new HA;return zN(e,r,new N1(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function J1(n){if(n._initialized&&!n._terminated)throw new Re(ce.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Ir;return n._queue.enqueueAndForgetEvenWhileRestricted((0,_e.Z)(function*(){try{yield(t=(0,_e.Z)(function*(r){if(!ji.C())return Promise.resolve();const s=r+"main";yield ji.delete(s)}),function(r){return t.apply(this,arguments)})(LS(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class mO{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Sc||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&bc("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function z1(n,e,t,r={}){var s;const u=(n=Jt(n,Yw))._getSettings();if("firestore.googleapis.com"!==u.host&&u.host!==e&&bc("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},u),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let c,m;if("string"==typeof r.mockUserToken)c=r.mockUserToken,m=fr.MOCK_USER;else{c=(0,Dt.Sg)(r.mockUserToken,null===(s=n._app)||void 0===s?void 0:s.options.projectId);const v=r.mockUserToken.sub||r.mockUserToken.user_id;if(!v)throw new Re(ce.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new fr(v)}n._authCredentials=new yb(new cS(c,m))}}(this._delegate,e,t,r)}enableNetwork(){return function eF(n){return function L1(n){return n.asyncQueue.enqueue((0,_e.Z)(function*(){const e=yield RN(n),t=yield NN(n);return e.setNetworkEnabled(!0),function(r){const s=We(r);return s._u.delete(0),Kw(s)}(t)}))}(Lr(n=Jt(n,Xn)))}(this._delegate)}disableNetwork(){return function tF(n){return function V1(n){return n.asyncQueue.enqueue((0,_e.Z)(function*(){const e=yield RN(n),t=yield NN(n);return e.setNetworkEnabled(!1),(r=(0,_e.Z)(function*(s){const u=We(s);u._u.add(0),yield dy(u),u.gu.set("Offline")}),function(s){return r.apply(this,arguments)})(t);var r}))}(Lr(n=Jt(n,Xn)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,FN("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function X1(n){return function(e){const t=new Ir;return e.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return function w1(n,e){return SA.apply(this,arguments)}(yield ZA(e),t)})),t.promise}(Lr(n=Jt(n,Xn)))}(this._delegate)}onSnapshotsInSync(e){return function OF(n,e){return function j1(n,e){const t=new Jb(e);return n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return r=yield _y(n),s=t,We(r).Ru.add(s),void s.next();var r,s})),()=>{t.Rc(),n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return r=yield _y(n),s=t,void We(r).Ru.delete(s);var r,s}))}}(Lr(n=Jt(n,Xn)),JA(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Re("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new wy(this,jN(this._delegate,e))}catch(t){throw ms(t,"collection()","Firestore.collection()")}}doc(e){try{return new qo(this,nD(this._delegate,e))}catch(t){throw ms(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new ys(this,function q1(n,e){if(n=Jt(n,Yw),QA("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Re(ce.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new $i(n,null,(t=e,new Rc(qt.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw ms(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function PF(n,e,t){n=Jt(n,Xn);const r=Object.assign(Object.assign({},bF),t);return function(s){if(s.maxAttempts<1)throw new Re(ce.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function $1(n,e,t){const r=new Ir;return n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){const s=yield(u=n,Xb(u).then(c=>c.datastore));var u;new P1(n.asyncQueue,s,t,e,r).run()})),r.promise}(Lr(n),s=>e(new kF(n,s)),r)}(this._delegate,t=>e(new yO(this,t)))}batch(){return Lr(this._delegate),new _O(new lO(this._delegate,e=>vy(this._delegate,e)))}loadBundle(e){return function nF(n,e){const t=Lr(n=Jt(n,Xn)),r=new K1;return function H1(n,e,t,r){const s=function(u,c){let m;return m="string"==typeof u?(new TextEncoder).encode(u):u,v=function(v,b){if(v instanceof Uint8Array)return AN(v,b);if(v instanceof ArrayBuffer)return AN(new Uint8Array(v),b);if(v instanceof ReadableStream)return v.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(m),new O1(v,c);var v}(t,Ww(e));n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){!function R1(n,e,t){const r=We(n);var s;(s=(0,_e.Z)(function*(u,c,m){try{const v=yield c.getMetadata();if(yield function(L,G){const Q=We(L),be=li(G.createTime);return Q.persistence.runTransaction("hasNewerBundle","readonly",Te=>Q.Ns.getBundleMetadata(Te,G.id)).then(Te=>!!Te&&Te.createTime.compareTo(be)>=0)}(u.localStore,v))return yield c.close(),m._completeWith({taskState:"Success",documentsLoaded:(L=v).totalDocuments,bytesLoaded:L.totalBytes,totalDocuments:L.totalDocuments,totalBytes:L.totalBytes}),Promise.resolve(new Set);m._updateProgress(yN(v));const b=new c1(v,u.localStore,c.It);let A=yield c.wc();for(;A;){const L=yield b.Ou(A);L&&m._updateProgress(L),A=yield c.wc()}const M=yield b.complete();return yield Oc(u,M.Bu,void 0),yield function(L,G){const Q=We(L);return Q.persistence.runTransaction("Save bundle","readwrite",be=>Q.Ns.saveBundleMetadata(be,G))}(u.localStore,v),m._completeWith(M.progress),Promise.resolve(M.$u)}catch(v){return bc("SyncEngine",`Loading bundle failed with ${v}`),m._failWith(v),Promise.resolve(new Set)}var L}),function(u,c,m){return s.apply(this,arguments)})(r,e,t).then(s=>{r.sharedClientState.notifyBundleLoaded(s)})}(yield ZA(n),s,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function rF(n,e){return function G1(n,e){return n.asyncQueue.enqueue((0,_e.Z)(function*(){return function(t,r){const s=We(t);return s.persistence.runTransaction("Get named query","readonly",u=>s.Ns.getNamedQuery(u,r))}(yield eD(n),e)}))}(Lr(n=Jt(n,Xn)),e).then(t=>t?new $i(n,null,t.query):null)}(this._delegate,e).then(t=>t?new ys(this,t):null)}}class cD extends ix{constructor(e){super(),this.firestore=e}convertBytes(e){return new t0(new il(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return qo.forKey(t,this.firestore,null)}}class yO{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new cD(e)}get(e){const t=Fp(e);return this._delegate.get(t).then(r=>new n0(this._firestore,new Pc(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const s=Fp(e);return r?(ox("Transaction.set",r),this._delegate.set(s,t,r)):this._delegate.set(s,t),this}update(e,t,r,...s){const u=Fp(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...s),this}delete(e){const t=Fp(e);return this._delegate.delete(t),this}}class _O{constructor(e){this._delegate=e}set(e,t,r){const s=Fp(e);return r?(ox("WriteBatch.set",r),this._delegate.set(s,t,r)):this._delegate.set(s,t),this}update(e,t,r,...s){const u=Fp(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...s),this}delete(e){const t=Fp(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Pp{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new Xw(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new r0(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=Pp.INSTANCES;let s=r.get(e);s||(s=new WeakMap,r.set(e,s));let u=s.get(t);return u||(u=new Pp(e,new cD(e),t),s.set(t,u)),u}}Pp.INSTANCES=new WeakMap;class qo{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new cD(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Re("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new qo(t,new Bn(t._delegate,r,new Ge(e)))}static forKey(e,t,r){return new qo(t,new Bn(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new wy(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new wy(this.firestore,jN(this._delegate,e))}catch(t){throw ms(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,Dt.m9)(e))instanceof Bn&&$N(this._delegate,e)}set(e,t){t=ox("DocumentReference.set",t);try{return t?cO(this._delegate,e,t):cO(this._delegate,e)}catch(r){throw ms(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?dO(this._delegate,e):dO(this._delegate,e,t,...r)}catch(s){throw ms(s,"updateDoc()","DocumentReference.update()")}}delete(){return function RF(n){return vy(Jt(n.firestore,Xn),[new iy(n._key,Jn.none())])}(this._delegate)}onSnapshot(...e){const t=vO(e),r=wO(e,s=>new n0(this.firestore,new Pc(this.firestore._delegate,this._userDataWriter,s._key,s._document,s.metadata,this._delegate.converter)));return hO(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function TF(n){n=Jt(n,Bn);const e=Jt(n.firestore,Xn),t=Lr(e),r=new kp(e);return function U1(n,e){const t=new Ir;return n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return(r=(0,_e.Z)(function*(s,u,c){try{const m=yield function(v,b){const A=We(v);return A.persistence.runTransaction("read document","readonly",M=>A.localDocuments.getDocument(M,b))}(s,u);m.isFoundDocument()?c.resolve(m):m.isNoDocument()?c.resolve(null):c.reject(new Re(ce.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(m){const v=py(m,`Failed to get document '${u} from cache`);c.reject(v)}}),function(s,u,c){return r.apply(this,arguments)})(yield eD(n),e,t);var r})),t.promise}(t,n._key).then(s=>new Pc(e,r,n._key,s,new Op(null!==s&&s.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function SF(n){n=Jt(n,Bn);const e=Jt(n.firestore,Xn);return ON(Lr(e),n._key,{source:"server"}).then(t=>sx(e,n,t))}(this._delegate):function CF(n){n=Jt(n,Bn);const e=Jt(n.firestore,Xn);return ON(Lr(e),n._key).then(t=>sx(e,n,t))}(this._delegate),t.then(r=>new n0(this.firestore,new Pc(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new qo(this.firestore,this._delegate.withConverter(e?Pp.getInstance(this.firestore,e):null))}}function ms(n,e,t){return n.message=n.message.replace(e,t),n}function vO(n){for(const e of n)if("object"==typeof e&&!ax(e))return e;return{}}function wO(n,e){var t,r;let s;return s=ax(n[0])?n[0]:ax(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:u=>{s.next&&s.next(e(u))},error:null===(t=s.error)||void 0===t?void 0:t.bind(s),complete:null===(r=s.complete)||void 0===r?void 0:r.bind(s)}}class n0{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new qo(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return eO(this._delegate,e._delegate)}}class r0 extends n0{data(e){const t=this._delegate.data(e);return function mb(n,e){n||et()}(void 0!==t),t}}class ys{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new cD(e)}where(e,t,r){try{return new ys(this.firestore,Ah(this._delegate,function pF(n,e,t){const r=e,s=uD("where",n);return new fF(s,r,t)}(e,t,r)))}catch(s){throw ms(s,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new ys(this.firestore,Ah(this._delegate,function mF(n,e="asc"){const t=e,r=uD("orderBy",n);return new gF(r,t)}(e,t)))}catch(r){throw ms(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new ys(this.firestore,Ah(this._delegate,function yF(n){return UN("limit",n),new nO("limit",n,"F")}(e)))}catch(t){throw ms(t,"limit()","Query.limit()")}}limitToLast(e){try{return new ys(this.firestore,Ah(this._delegate,function _F(n){return UN("limitToLast",n),new nO("limitToLast",n,"L")}(e)))}catch(t){throw ms(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new ys(this.firestore,Ah(this._delegate,function vF(...n){return new rO("startAt",n,!0)}(...e)))}catch(t){throw ms(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new ys(this.firestore,Ah(this._delegate,function wF(...n){return new rO("startAfter",n,!1)}(...e)))}catch(t){throw ms(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new ys(this.firestore,Ah(this._delegate,function EF(...n){return new iO("endBefore",n,!1)}(...e)))}catch(t){throw ms(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new ys(this.firestore,Ah(this._delegate,function IF(...n){return new iO("endAt",n,!0)}(...e)))}catch(t){throw ms(t,"endAt()","Query.endAt()")}}isEqual(e){return HN(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function xF(n){n=Jt(n,$i);const e=Jt(n.firestore,Xn),t=Lr(e),r=new kp(e);return function B1(n,e){const t=new Ir;return n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return(r=(0,_e.Z)(function*(s,u,c){try{const m=yield qb(s,u,!0),v=new wN(u,m.Hi),b=v.ju(m.documents),A=v.applyChanges(b,!1);c.resolve(A.snapshot)}catch(m){const v=py(m,`Failed to execute query '${u} against cache`);c.reject(v)}}),function(s,u,c){return r.apply(this,arguments)})(yield eD(n),e,t);var r})),t.promise}(t,n._query).then(s=>new Sh(e,r,n,s))}(this._delegate):"server"===e?.source?function MF(n){n=Jt(n,$i);const e=Jt(n.firestore,Xn),t=Lr(e),r=new kp(e);return kN(t,n._query,{source:"server"}).then(s=>new Sh(e,r,n,s))}(this._delegate):function AF(n){n=Jt(n,$i);const e=Jt(n.firestore,Xn),t=Lr(e),r=new kp(e);return tO(n._query),kN(t,n._query).then(s=>new Sh(e,r,n,s))}(this._delegate),t.then(r=>new ux(this.firestore,new Sh(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=vO(e),r=wO(e,s=>new ux(this.firestore,new Sh(this.firestore._delegate,this._userDataWriter,this._delegate,s._snapshot)));return hO(this._delegate,t,r)}withConverter(e){return new ys(this.firestore,this._delegate.withConverter(e?Pp.getInstance(this.firestore,e):null))}}class qF{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new r0(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class ux{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new ys(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new r0(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new qF(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new r0(this._firestore,r))})}isEqual(e){return eO(this._delegate,e._delegate)}}class wy extends ys{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new qo(this.firestore,e):null}doc(e){try{return new qo(this.firestore,void 0===e?nD(this._delegate):nD(this._delegate,e))}catch(t){throw ms(t,"doc()","CollectionReference.doc()")}}add(e){return function NF(n,e){const t=Jt(n.firestore,Xn),r=nD(n),s=lD(n.converter,e);return vy(t,[sD(Rp(n.firestore),"addDoc",r._key,s,null!==n.converter,{}).toMutation(r._key,Jn.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new qo(this.firestore,t))}isEqual(e){return $N(this._delegate,e._delegate)}withConverter(e){return new wy(this.firestore,this._delegate.withConverter(e?Pp.getInstance(this.firestore,e):null))}}function Fp(n){return Jt(n,Bn)}class lx{constructor(...e){this._delegate=new kc(...e)}static documentId(){return new lx(Zn.keyField().canonicalString())}isEqual(e){return(e=(0,Dt.m9)(e))instanceof kc&&this._delegate._internalPath.isEqual(e._internalPath)}}class Lp{constructor(e){this._delegate=e}static serverTimestamp(){const e=function LF(){return new XA("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Lp(e)}static delete(){const e=function FF(){return new Qw("deleteField")}();return e._methodName="FieldValue.delete",new Lp(e)}static arrayUnion(...e){const t=function VF(...n){return new aF("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new Lp(t)}static arrayRemove(...e){const t=function UF(...n){return new uF("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new Lp(t)}static increment(e){const t=function BF(n){return new lF("increment",n)}(e);return t._methodName="FieldValue.increment",new Lp(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const WF={Firestore:mO,GeoPoint:rD,Timestamp:Rn,Blob:t0,Transaction:yO,WriteBatch:_O,DocumentReference:qo,DocumentSnapshot:n0,Query:ys,QueryDocumentSnapshot:r0,QuerySnapshot:ux,CollectionReference:wy,FieldPath:lx,FieldValue:Lp,setLogLevel:function zF(n){!function za(n){Ga.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function EO(n,e){return function YF(n,e=DI.z){return new dr.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function cx(n,e){return EO(n,e).pipe((0,ft.U)(t=>({payload:t,type:"query"})))}function dD(n,e){return cx(n,e).pipe(Sg(void 0),lm(),(0,ft.U)(([t,r])=>{const s=r.payload.docChanges(),u=s.map(c=>({type:c.type,payload:c}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((c,m)=>{const v=s.find(A=>A.doc.ref.isEqual(c.ref)),b=t?.payload.docs.find(A=>A.ref.isEqual(c.ref));v&&JSON.stringify(v.doc.metadata)===JSON.stringify(c.metadata)||!v&&b&&JSON.stringify(b.metadata)===JSON.stringify(c.metadata)||u.push({type:"modified",payload:{oldIndex:m,newIndex:m,type:"modified",doc:c}})}),u}))}function IO(n,e,t){return dD(n,t).pipe(Fu((r,s)=>function JF(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function XF(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return dx(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return dx(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return dx(n,e.oldIndex,1)}return n}(n,r))}),n}(r,s.map(u=>u.payload),e),[]),function Zf(n,e=Cg.y){return n=n??AT,(0,Zr.e)((t,r)=>{let s,u=!0;t.subscribe((0,hr.x)(r,c=>{const m=e(c);(u||!n(s,m))&&(u=!1,s=m,r.next(c))}))})}(),(0,ft.U)(r=>r.map(s=>({type:s.type,payload:s}))))}function dx(n,e,t,...r){const s=n.slice();return s.splice(e,t,...r),s}function bO(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}!function ZF(n){(function KF(n,e){n.INTERNAL.registerComponent(new Bf.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),s=t.getProvider("firestore").getImmediate();return e(r,s)},"PUBLIC").setServiceProps(Object.assign({},WF)))})(n,(e,t)=>new mO(e,t,new GF)),n.registerVersion("@firebase/firestore-compat","0.1.24")}(CI.Z);class DO{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=dD(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,ft.U)(r=>r.filter(s=>e.indexOf(s.type)>-1)))),t.pipe(Sg(void 0),lm(),Li(([r,s])=>s.length>0||!r),(0,ft.U)(([r,s])=>s),Dn.iC)}auditTrail(e){return this.stateChanges(e).pipe(Fu((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=bO(e);return IO(this.query,t,this.afs.schedulers.outsideAngular).pipe(Dn.iC)}valueChanges(e={}){return cx(this.query,this.afs.schedulers.outsideAngular).pipe((0,ft.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),Dn.iC)}get(e){return(0,zt.D)(this.query.get(e)).pipe(Dn.iC)}add(e){return this.ref.add(e)}doc(e){return new CO(this.ref.doc(e),this.afs)}}class CO{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:s,query:u}=AO(r,t);return new DO(s,u,this.afs)}snapshotChanges(){return function QF(n,e){return EO(n,e).pipe(Sg(void 0),lm(),(0,ft.U)(([t,r])=>r.exists?t?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Dn.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,ft.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,zt.D)(this.ref.get(e)).pipe(Dn.iC)}}class eL{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?dD(this.query,this.afs.schedulers.outsideAngular).pipe((0,ft.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),Li(t=>t.length>0),Dn.iC):dD(this.query,this.afs.schedulers.outsideAngular).pipe(Dn.iC)}auditTrail(e){return this.stateChanges(e).pipe(Fu((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=bO(e);return IO(this.query,t,this.afs.schedulers.outsideAngular).pipe(Dn.iC)}valueChanges(e={}){return cx(this.query,this.afs.schedulers.outsideAngular).pipe((0,ft.U)(r=>r.payload.docs.map(s=>e.idField?Object.assign({[e.idField]:s.id},s.data()):s.data())),Dn.iC)}get(e){return(0,zt.D)(this.query.get(e)).pipe(Dn.iC)}}const TO=new g.OlP("angularfire2.enableFirestorePersistence"),SO=new g.OlP("angularfire2.firestore.persistenceSettings"),tL=new g.OlP("angularfire2.firestore.settings"),nL=new g.OlP("angularfire2.firestore.use-emulator");function AO(n,e=(t=>t)){return{query:e(n),ref:n}}let rL=(()=>{class n{constructor(t,r,s,u,c,m,v,b,A,M,L,G,Q,be,Te,Ze,ut){this.schedulers=v;const lt=(0,Ei.on)(t,m,r),tt=A;M&&fv(lt,m,L,Q,be,Te,G,Ze),[this.firestore,this.persistenceEnabled$]=(0,Ei.cc)(`${lt.name}.firestore`,"AngularFirestore",lt.name,()=>{const bt=m.runOutsideAngular(()=>lt.firestore());if(u&&bt.settings(u),tt&&bt.useEmulator(...tt),s&&!cr(c)){const kt=()=>{try{return(0,zt.D)(bt.enablePersistence(b||void 0).then(()=>!0,()=>!1))}catch(ar){return typeof console<"u"&&console.warn(ar),it(!1)}};return[bt,m.runOutsideAngular(kt)]}return[bt,it(!1)]},[u,tt,s])}collection(t,r){let s;s="string"==typeof t?this.firestore.collection(t):t;const{ref:u,query:c}=AO(s,r),m=this.schedulers.ngZone.run(()=>u);return new DO(m,c,this)}collectionGroup(t,r){const s=r||(c=>c),u=this.firestore.collectionGroup(t);return new eL(s(u),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const s=this.schedulers.ngZone.run(()=>r);return new CO(s,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(Ei.Dh),g.LFG(Ei.xv,8),g.LFG(TO,8),g.LFG(tL,8),g.LFG(g.Lbi),g.LFG(g.R0b),g.LFG(Dn.HU),g.LFG(SO,8),g.LFG(nL,8),g.LFG(Zd,8),g.LFG(II,8),g.LFG(bI,8),g.LFG(bT,8),g.LFG(DT,8),g.LFG(CT,8),g.LFG(TT,8),g.LFG(om,8))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),iL=(()=>{class n{constructor(){hv.Z.registerVersion("angularfire",Dn.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:TO,useValue:!0},{provide:SO,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({providers:[rL]}),n})();const xO="firebasestorage.googleapis.com",MO="storageBucket";class gr extends Dt.ZR{constructor(e,t){super(hx(e),`Firebase Storage: ${t} (${hx(e)})`),this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,gr.prototype)}_codeEquals(e){return hx(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}function hx(n){return"storage/"+n}function fx(){return new gr("unknown","An unknown error occurred, please check the error payload for server response.")}function RO(){return new gr("canceled","User canceled the upload/download.")}function NO(){return new gr("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function Ey(n){return new gr("invalid-argument",n)}function OO(){return new gr("app-deleted","The Firebase app was deleted.")}function kO(n){return new gr("invalid-root-operation","The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function s0(n,e){return new gr("invalid-format","String does not match format '"+n+"': "+e)}function o0(n){throw new gr("internal-error","Internal error: "+n)}class Hi{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=Hi.makeFromUrl(e,t)}catch{return new Hi(e,"")}if(""===r.path)return r;throw function gL(n){return new gr("invalid-default-bucket","Invalid default bucket '"+n+"'.")}(e)}static makeFromUrl(e,t){let r=null;const s="([A-Za-z0-9.\\-_]+)",m=new RegExp("^gs://"+s+"(/(.*))?$","i");function b(tt){tt.path_=decodeURIComponent(tt.path)}const M=t.replace(/[.]/g,"\\."),lt=[{regex:m,indices:{bucket:1,path:3},postModify:function u(tt){"/"===tt.path.charAt(tt.path.length-1)&&(tt.path_=tt.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${M}/v[A-Za-z0-9_]+/b/${s}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:b},{regex:new RegExp(`^https?://${t===xO?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${s}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:b}];for(let tt=0;tt<lt.length;tt++){const bt=lt[tt],kt=bt.regex.exec(e);if(kt){let Za=kt[bt.indices.path];Za||(Za=""),r=new Hi(kt[bt.indices.bucket],Za),bt.postModify(r);break}}if(null==r)throw function pL(n){return new gr("invalid-url","Invalid URL '"+n+"'.")}(e);return r}}class vL{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function hD(n){return"string"==typeof n||n instanceof String}function PO(n){return px()&&n instanceof Blob}function px(){return typeof Blob<"u"}function gx(n,e,t,r){if(r<e)throw Ey(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw Ey(`Invalid value for '${n}'. Expected ${t} or less.`)}function Fc(n,e,t){let r=e;return null==t&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function FO(n){const e=encodeURIComponent;let t="?";for(const r in n)n.hasOwnProperty(r)&&(t=t+(e(r)+"=")+e(n[r])+"&");return t=t.slice(0,-1),t}var Mh=(()=>(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"}(Mh||(Mh={})),Mh))();class CL{constructor(e,t,r,s,u,c,m,v,b,A,M){this.url_=e,this.method_=t,this.headers_=r,this.body_=s,this.successCodes_=u,this.additionalRetryCodes_=c,this.callback_=m,this.errorCallback_=v,this.timeout_=b,this.progressCallback_=A,this.connectionFactory_=M,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((L,G)=>{this.resolve_=L,this.reject_=G,this.start_()})}start_(){const t=(r,s)=>{const u=this.resolve_,c=this.reject_,m=s.connection;if(s.wasSuccessCode)try{const v=this.callback_(m,m.getResponse());!function IL(n){return void 0!==n}(v)?u():u(v)}catch(v){c(v)}else if(null!==m){const v=fx();v.serverResponse=m.getErrorText(),c(this.errorCallback_?this.errorCallback_(m,v):v)}else c(s.canceled?this.appDelete_?OO():RO():function fL(){return new gr("retry-limit-exceeded","Max retry time for operation exceeded, please try again.")}())};this.canceled_?t(0,new fD(!1,null,!0)):this.backoffId_=function wL(n,e,t){let r=1,s=null,u=null,c=!1,m=0;function v(){return 2===m}let b=!1;function A(...Te){b||(b=!0,e.apply(null,Te))}function M(Te){s=setTimeout(()=>{s=null,n(G,v())},Te)}function L(){u&&clearTimeout(u)}function G(Te,...Ze){if(b)return void L();if(Te)return L(),void A.call(null,Te,...Ze);if(v()||c)return L(),void A.call(null,Te,...Ze);let lt;r<64&&(r*=2),1===m?(m=2,lt=0):lt=1e3*(r+Math.random()),M(lt)}let Q=!1;function be(Te){Q||(Q=!0,L(),!b&&(null!==s?(Te||(m=2),clearTimeout(s),M(0)):Te||(m=1)))}return M(0),u=setTimeout(()=>{c=!0,be(!0)},t),be}((r,s)=>{if(s)return void r(!1,new fD(!1,null,!0));const u=this.connectionFactory_();this.pendingConnection_=u;const c=m=>{null!==this.progressCallback_&&this.progressCallback_(m.loaded,m.lengthComputable?m.total:-1)};null!==this.progressCallback_&&u.addUploadProgressListener(c),u.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&u.removeUploadProgressListener(c),this.pendingConnection_=null;const m=u.getErrorCode()===Mh.NO_ERROR,v=u.getStatus();if(!m||this.isRetryStatusCode_(v)){const A=u.getErrorCode()===Mh.ABORT;return void r(!1,new fD(!1,null,A))}const b=-1!==this.successCodes_.indexOf(v);r(!0,new fD(b,u))})},t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function EL(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}isRetryStatusCode_(e){const t=e>=500&&e<600,s=-1!==[408,429].indexOf(e),u=-1!==this.additionalRetryCodes_.indexOf(e);return t||s||u}}class fD{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function NL(...n){const e=function RL(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}();if(void 0!==e){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}if(px())return new Blob(n);throw new gr("unsupported-environment","This browser doesn't seem to support creating Blobs")}const yo={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class mx{constructor(e,t){this.data=e,this.contentType=t||null}}function yx(n,e){switch(n){case yo.RAW:return new mx(LO(e));case yo.BASE64:case yo.BASE64URL:return new mx(VO(n,e));case yo.DATA_URL:return new mx(function FL(n){const e=new UO(n);return e.base64?VO(yo.BASE64,e.rest):function PL(n){let e;try{e=decodeURIComponent(n)}catch{throw s0(yo.DATA_URL,"Malformed data URL.")}return LO(e)}(e.rest)}(e),function LL(n){return new UO(n).contentType}(e))}throw fx()}function LO(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);r<=127?e.push(r):r<=2047?e.push(192|r>>6,128|63&r):55296==(64512&r)?t<n.length-1&&56320==(64512&n.charCodeAt(t+1))?(r=65536|(1023&r)<<10|1023&n.charCodeAt(++t),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):e.push(239,191,189):56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function VO(n,e){switch(n){case yo.BASE64:{const s=-1!==e.indexOf("-"),u=-1!==e.indexOf("_");if(s||u)throw s0(n,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case yo.BASE64URL:{const s=-1!==e.indexOf("+"),u=-1!==e.indexOf("/");if(s||u)throw s0(n,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=function kL(n){return atob(n)}(e)}catch{throw s0(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let s=0;s<t.length;s++)r[s]=t.charCodeAt(s);return r}class UO{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw s0(yo.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;null!=r&&(this.base64=function VL(n,e){return n.length>=e.length&&n.substring(n.length-e.length)===e}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}class sl{constructor(e,t){let r=0,s="";PO(e)?(this.data_=e,r=e.size,s=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=s}size(){return this.size_}type(){return this.type_}slice(e,t){if(PO(this.data_)){const s=function OL(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}(this.data_,e,t);return null===s?null:new sl(s)}{const r=new Uint8Array(this.data_.buffer,e,t-e);return new sl(r,!0)}}static getBlob(...e){if(px()){const t=e.map(r=>r instanceof sl?r.data_:r);return new sl(NL.apply(null,t))}{const t=e.map(c=>hD(c)?yx(yo.RAW,c).data:c.data_);let r=0;t.forEach(c=>{r+=c.byteLength});const s=new Uint8Array(r);let u=0;return t.forEach(c=>{for(let m=0;m<c.length;m++)s[u++]=c[m]}),new sl(s,!0)}}uploadData(){return this.data_}}function _x(n){let e;try{e=JSON.parse(n)}catch{return null}return function DL(n){return"object"==typeof n&&!Array.isArray(n)}(e)?e:null}function BO(n){const e=n.lastIndexOf("/",n.length-2);return-1===e?n:n.slice(e+1)}function jL(n,e){return e}class _s{constructor(e,t,r,s){this.server=e,this.local=t||e,this.writable=!!r,this.xform=s||jL}}let pD=null;function a0(){if(pD)return pD;const n=[];n.push(new _s("bucket")),n.push(new _s("generation")),n.push(new _s("metageneration")),n.push(new _s("name","fullPath",!0));const t=new _s("name");t.xform=function e(u,c){return function $L(n){return!hD(n)||n.length<2?n:BO(n)}(c)},n.push(t);const s=new _s("size");return s.xform=function r(u,c){return void 0!==c?Number(c):c},n.push(s),n.push(new _s("timeCreated")),n.push(new _s("updated")),n.push(new _s("md5Hash",null,!0)),n.push(new _s("cacheControl",null,!0)),n.push(new _s("contentDisposition",null,!0)),n.push(new _s("contentEncoding",null,!0)),n.push(new _s("contentLanguage",null,!0)),n.push(new _s("contentType",null,!0)),n.push(new _s("metadata","customMetadata",!0)),pD=n,pD}function jO(n,e,t){const r=_x(e);return null===r?null:function GL(n,e,t){const r={type:"file"},s=t.length;for(let u=0;u<s;u++){const c=t[u];r[c.local]=c.xform(r,e[c.server])}return function HL(n,e){Object.defineProperty(n,"ref",{get:function t(){const u=new Hi(n.bucket,n.fullPath);return e._makeStorageReference(u)}})}(r,n),r}(n,r,t)}function vx(n,e){const t={},r=e.length;for(let s=0;s<r;s++){const u=e[s];u.writable&&(t[u.server]=n[u.local])}return JSON.stringify(t)}const $O="prefixes";class ol{constructor(e,t,r,s){this.url=e,this.method=t,this.handler=r,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function al(n){if(!n)throw fx()}function gD(n,e){return function t(r,s){const u=jO(n,s,e);return al(null!==u),u}}function Iy(n){return function e(t,r){let s;return s=401===t.getStatus()?t.getErrorText().includes("Firebase App Check token is invalid")?function dL(){return new gr("unauthorized-app","This app does not have permission to access Firebase Storage on this project.")}():function cL(){return new gr("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===t.getStatus()?function lL(n){return new gr("quota-exceeded","Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(n.bucket):403===t.getStatus()?function hL(n){return new gr("unauthorized","User does not have permission to access '"+n+"'.")}(n.path):r,s.serverResponse=r.serverResponse,s}}function u0(n){const e=Iy(n);return function t(r,s){let u=e(r,s);return 404===r.getStatus()&&(u=function uL(n){return new gr("object-not-found","Object '"+n+"' does not exist.")}(n.path)),u.serverResponse=s.serverResponse,u}}function GO(n,e,t){const s=Fc(e.fullServerUrl(),n.host,n._protocol),c=n.maxOperationRetryTime,m=new ol(s,"GET",gD(n,t),c);return m.errorHandler=u0(e),m}function YL(n,e,t,r,s){const u={};u.prefix=e.isRoot?"":e.path+"/",t&&t.length>0&&(u.delimiter=t),r&&(u.pageToken=r),s&&(u.maxResults=s);const m=Fc(e.bucketOnlyServerUrl(),n.host,n._protocol),b=n.maxOperationRetryTime,A=new ol(m,"GET",function KL(n,e){return function t(r,s){const u=function WL(n,e,t){const r=_x(t);return null===r?null:function qL(n,e,t){const r={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[$O])for(const s of t[$O]){const u=s.replace(/\/$/,""),c=n._makeStorageReference(new Hi(e,u));r.prefixes.push(c)}if(t.items)for(const s of t.items){const u=n._makeStorageReference(new Hi(e,s.name));r.items.push(u)}return r}(n,e,r)}(n,e,s);return al(null!==u),u}}(n,e.bucket),b);return A.urlParams=u,A.errorHandler=Iy(e),A}function qO(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=function eV(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}(null,e)),r}class mD{constructor(e,t,r,s){this.current=e,this.total=t,this.finalized=!!r,this.metadata=s||null}}function wx(n,e){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch{al(!1)}return al(!!t&&-1!==(e||["active"]).indexOf(t)),t}const iV={STATE_CHANGED:"state_changed"},vs={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function Ex(n){switch(n){case"running":case"pausing":case"canceling":return vs.RUNNING;case"paused":return vs.PAUSED;case"success":return vs.SUCCESS;case"canceled":return vs.CANCELED;default:return vs.ERROR}}class sV{constructor(e,t,r){if(function bL(n){return"function"==typeof n}(e)||null!=t||null!=r)this.next=e,this.error=t??void 0,this.complete=r??void 0;else{const u=e;this.next=u.next,this.error=u.error,this.complete=u.complete}}}function by(n){return(...e)=>{Promise.resolve().then(()=>n(...e))}}class aV extends class oV{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Mh.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Mh.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Mh.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,s){if(this.sent_)throw o0("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==s)for(const u in s)s.hasOwnProperty(u)&&this.xhr_.setRequestHeader(u,s[u].toString());return void 0!==r?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw o0("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw o0("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw o0("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw o0("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}{initXhr(){this.xhr_.responseType="text"}}function Ka(){return new aV}class YO{constructor(e,t,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=r,this._mappings=a0(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=s=>{this._request=void 0,this._chunkMultiplier=1,s._codeEquals("canceled")?(this._needToFetchStatus=!0,this.completeTransitions_()):(this._error=s,this._transition("error"))},this._metadataErrorHandler=s=>{this._request=void 0,s._codeEquals("canceled")?this.completeTransitions_():(this._error=s,this._transition("error"))},this._promise=new Promise((s,u)=>{this._resolve=s,this._reject=u,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,r])=>{switch(this._state){case"running":e(t,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((e,t)=>{const r=function tV(n,e,t,r,s){const u=e.bucketOnlyServerUrl(),c=qO(e,r,s),m={name:c.fullPath},v=Fc(u,n.host,n._protocol),A={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":c.contentType,"Content-Type":"application/json; charset=utf-8"},M=vx(c,t),Q=new ol(v,"POST",function G(be){let Te;wx(be);try{Te=be.getResponseHeader("X-Goog-Upload-URL")}catch{al(!1)}return al(hD(Te)),Te},n.maxUploadRetryTime);return Q.urlParams=m,Q.headers=A,Q.body=M,Q.errorHandler=Iy(e),Q}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),s=this._ref.storage._makeRequest(r,Ka,e,t);this._request=s,s.getPromise().then(u=>{this._request=void 0,this._uploadUrl=u,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,r)=>{const s=function nV(n,e,t,r){const v=new ol(t,"POST",function u(b){const A=wx(b,["active","final"]);let M=null;try{M=b.getResponseHeader("X-Goog-Upload-Size-Received")}catch{al(!1)}M||al(!1);const L=Number(M);return al(!isNaN(L)),new mD(L,r.size(),"final"===A)},n.maxUploadRetryTime);return v.headers={"X-Goog-Upload-Command":"query"},v.errorHandler=Iy(e),v}(this._ref.storage,this._ref._location,e,this._blob),u=this._ref.storage._makeRequest(s,Ka,t,r);this._request=u,u.getPromise().then(c=>{this._request=void 0,this._updateProgress(c.current),this._needToFetchStatus=!1,c.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=262144*this._chunkMultiplier,t=new mD(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((s,u)=>{let c;try{c=function rV(n,e,t,r,s,u,c,m){const v=new mD(0,0);if(c?(v.current=c.current,v.total=c.total):(v.current=0,v.total=r.size()),r.size()!==v.total)throw function yL(){return new gr("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.")}();const b=v.total-v.current;let A=b;s>0&&(A=Math.min(A,s));const M=v.current,Q={"X-Goog-Upload-Command":A===b?"upload, finalize":"upload","X-Goog-Upload-Offset":`${v.current}`},be=r.slice(M,M+A);if(null===be)throw NO();const lt=new ol(t,"POST",function Te(tt,bt){const kt=wx(tt,["active","final"]),ar=v.current+A,Za=r.size();let Dx;return Dx="final"===kt?gD(e,u)(tt,bt):null,new mD(ar,Za,"final"===kt,Dx)},e.maxUploadRetryTime);return lt.headers=Q,lt.body=be.uploadData(),lt.progressCallback=m||null,lt.errorHandler=Iy(n),lt}(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(v){return this._error=v,void this._transition("error")}const m=this._ref.storage._makeRequest(c,Ka,s,u);this._request=m,m.getPromise().then(v=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(v.current),v.finalized?(this._metadata=v.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const r=GO(this._ref.storage,this._ref._location,this._mappings),s=this._ref.storage._makeRequest(r,Ka,e,t);this._request=s,s.getPromise().then(u=>{this._request=void 0,this._metadata=u,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const r=function WO(n,e,t,r,s){const u=e.bucketOnlyServerUrl(),c={"X-Goog-Upload-Protocol":"multipart"},v=function m(){let lt="";for(let tt=0;tt<2;tt++)lt+=Math.random().toString().slice(2);return lt}();c["Content-Type"]="multipart/related; boundary="+v;const b=qO(e,r,s),A=vx(b,t),G=sl.getBlob("--"+v+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+A+"\r\n--"+v+"\r\nContent-Type: "+b.contentType+"\r\n\r\n",r,"\r\n--"+v+"--");if(null===G)throw NO();const Q={name:b.fullPath},be=Fc(u,n.host,n._protocol),Ze=n.maxUploadRetryTime,ut=new ol(be,"POST",gD(n,t),Ze);return ut.urlParams=Q,ut.headers=c,ut.body=G.uploadData(),ut.errorHandler=Iy(e),ut}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),s=this._ref.storage._makeRequest(r,Ka,e,t);this._request=s,s.getPromise().then(u=>{this._request=void 0,this._metadata=u,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request&&this._request.cancel();break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=RO(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=Ex(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,r,s){const u=new sV(t||void 0,r||void 0,s||void 0);return this._addObserver(u),()=>{this._removeObserver(u)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(Ex(this._state)){case vs.SUCCESS:by(this._resolve.bind(null,this.snapshot))();break;case vs.CANCELED:case vs.ERROR:by(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(Ex(this._state)){case vs.RUNNING:case vs.PAUSED:e.next&&by(e.next.bind(e,this.snapshot))();break;case vs.SUCCESS:e.complete&&by(e.complete.bind(e))();break;default:e.error&&by(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class Vp{constructor(e,t){this._service=e,this._location=t instanceof Hi?t:Hi.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Vp(e,t)}get root(){const e=new Hi(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return BO(this._location.path)}get storage(){return this._service}get parent(){const e=function UL(n){if(0===n.length)return null;const e=n.lastIndexOf("/");return-1===e?"":n.slice(0,e)}(this._location.path);if(null===e)return null;const t=new Hi(this._location.bucket,e);return new Vp(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw kO(e)}}function JO(n,e,t){return Ix.apply(this,arguments)}function Ix(){return Ix=(0,_e.Z)(function*(n,e,t){const s=yield XO(n,{pageToken:t});e.prefixes.push(...s.prefixes),e.items.push(...s.items),null!=s.nextPageToken&&(yield JO(n,e,s.nextPageToken))}),Ix.apply(this,arguments)}function XO(n,e){null!=e&&"number"==typeof e.maxResults&&gx("options.maxResults",1,1e3,e.maxResults);const t=e||{},r=YL(n.storage,n._location,"/",t.pageToken,t.maxResults);return n.storage.makeRequestWithTokens(r,Ka)}function vV(n){n._throwIfRoot("getDownloadURL");const e=function QL(n,e,t){const s=Fc(e.fullServerUrl(),n.host,n._protocol),c=n.maxOperationRetryTime,m=new ol(s,"GET",function ZL(n,e){return function t(r,s){const u=jO(n,s,e);return al(null!==u),function zL(n,e,t,r){const s=_x(e);if(null===s||!hD(s.downloadTokens))return null;const u=s.downloadTokens;if(0===u.length)return null;const c=encodeURIComponent;return u.split(",").map(b=>{const M=n.fullPath;return Fc("/b/"+c(n.bucket)+"/o/"+c(M),t,r)+FO({alt:"media",token:b})})[0]}(u,s,n.host,n._protocol)}}(n,t),c);return m.errorHandler=u0(e),m}(n.storage,n._location,a0());return n.storage.makeRequestWithTokens(e,Ka).then(t=>{if(null===t)throw function _L(){return new gr("no-download-url","The given file does not have any download URLs.")}();return t})}function ek(n,e){const t=function BL(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return 0===n.length?t:n+"/"+t}(n._location.path,e),r=new Hi(n._location.bucket,t);return new Vp(n.storage,r)}function tk(n,e){if(n instanceof bx){const t=n;if(null==t._bucket)throw function mL(){return new gr("no-default-bucket","No default bucket found. Did you set the '"+MO+"' property when initializing the app?")}();const r=new Vp(t,t._bucket);return null!=e?tk(r,e):r}return void 0!==e?ek(n,e):n}function bV(n,e){if(e&&function EV(n){return/^[A-Za-z]+:\/\//.test(n)}(e)){if(n instanceof bx)return function IV(n,e){return new Vp(n,e)}(n,e);throw Ey("To use ref(service, url), the first argument must be a Storage instance.")}return tk(n,e)}function nk(n,e){const t=e?.[MO];return null==t?null:Hi.makeFromBucketSpec(t,n)}class bx{constructor(e,t,r,s,u){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=s,this._firebaseVersion=u,this._bucket=null,this._host=xO,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=s?Hi.makeFromBucketSpec(s,this._host):nk(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?Hi.makeFromBucketSpec(this._url,e):nk(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){gx("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){gx("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,_e.Z)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const t=e._authProvider.getImmediate({optional:!0});if(t){const r=yield t.getToken();if(null!==r)return r.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,_e.Z)(function*(){const t=e._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Vp(this,e)}_makeRequest(e,t,r,s){if(this._deleted)return new vL(OO());{const u=function ML(n,e,t,r,s,u){const c=FO(n.urlParams),m=n.url+c,v=Object.assign({},n.headers);return function AL(n,e){e&&(n["X-Firebase-GMPID"]=e)}(v,e),function TL(n,e){null!==e&&e.length>0&&(n.Authorization="Firebase "+e)}(v,t),function SL(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}(v,u),function xL(n,e){null!==e&&(n["X-Firebase-AppCheck"]=e)}(v,r),new CL(m,n.method,v,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,s)}(e,this._appId,r,s,t,this._firebaseVersion);return this._requests.add(u),u.getPromise().then(()=>this._requests.delete(u),()=>this._requests.delete(u)),u}}makeRequestWithTokens(e,t){var r=this;return(0,_e.Z)(function*(){const[s,u]=yield Promise.all([r._getAuthToken(),r._getAppCheckToken()]);return r._makeRequest(e,t,s,u).getPromise()})()}}const rk="@firebase/storage";function ok(n,e){return bV(n=(0,Dt.m9)(n),e)}function kV(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),s=n.getProvider("app-check-internal");return new bx(t,r,s,e,js.SDK_VERSION)}!function PV(){(0,js._registerComponent)(new Bf.wA("storage",kV,"PUBLIC").setMultipleInstances(!0)),(0,js.registerVersion)(rk,"0.9.9",""),(0,js.registerVersion)(rk,"0.9.9","esm2017")}();class yD{constructor(e,t,r){this._delegate=e,this.task=t,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class ak{constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new yD(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then(r=>{if(e)return e(new yD(r,this,this._ref))},t)}on(e,t,r,s){let u;return t&&(u="function"==typeof t?c=>t(new yD(c,this,this._ref)):{next:t.next?c=>t.next(new yD(c,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,u,r||void 0,s||void 0)}}class uk{constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map(e=>new Lc(e,this._service))}get items(){return this._delegate.items.map(e=>new Lc(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class Lc{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const t=function NV(n,e){return ek(n,e)}(this._delegate,e);return new Lc(t,this.storage)}get root(){return new Lc(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return null==e?null:new Lc(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new ak(function CV(n,e,t){return function pV(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new YO(n,new sl(e),t)}(n=(0,Dt.m9)(n),e,t)}(this._delegate,e,t),this)}putString(e,t=yo.RAW,r){this._throwIfRoot("putString");const s=yx(t,e),u=Object.assign({},r);return null==u.contentType&&null!=s.contentType&&(u.contentType=s.contentType),new ak(new YO(this._delegate,new sl(s.data,!0),u),this)}listAll(){return function xV(n){return function mV(n){const e={prefixes:[],items:[]};return JO(n,e).then(()=>e)}(n=(0,Dt.m9)(n))}(this._delegate).then(e=>new uk(e,this.storage))}list(e){return function AV(n,e){return XO(n=(0,Dt.m9)(n),e)}(this._delegate,e||void 0).then(t=>new uk(t,this.storage))}getMetadata(){return function TV(n){return function yV(n){n._throwIfRoot("getMetadata");const e=GO(n.storage,n._location,a0());return n.storage.makeRequestWithTokens(e,Ka)}(n=(0,Dt.m9)(n))}(this._delegate)}updateMetadata(e){return function SV(n,e){return function _V(n,e){n._throwIfRoot("updateMetadata");const t=function JL(n,e,t,r){const u=Fc(e.fullServerUrl(),n.host,n._protocol),m=vx(t,r),b=n.maxOperationRetryTime,A=new ol(u,"PATCH",gD(n,r),b);return A.headers={"Content-Type":"application/json; charset=utf-8"},A.body=m,A.errorHandler=u0(e),A}(n.storage,n._location,e,a0());return n.storage.makeRequestWithTokens(t,Ka)}(n=(0,Dt.m9)(n),e)}(this._delegate,e)}getDownloadURL(){return function MV(n){return vV(n=(0,Dt.m9)(n))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function RV(n){return function wV(n){n._throwIfRoot("deleteObject");const e=function XL(n,e){const r=Fc(e.fullServerUrl(),n.host,n._protocol),m=new ol(r,"DELETE",function c(v,b){},n.maxOperationRetryTime);return m.successCodes=[200,204],m.errorHandler=u0(e),m}(n.storage,n._location);return n.storage.makeRequestWithTokens(e,Ka)}(n=(0,Dt.m9)(n))}(this._delegate)}_throwIfRoot(e){if(""===this._delegate._location.path)throw kO(e)}}class lk{constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(ck(e))throw Ey("ref() expected a child path but got a URL, use refFromURL instead.");return new Lc(ok(this._delegate,e),this)}refFromURL(e){if(!ck(e))throw Ey("refFromURL() expected a full URL but got a child path, use ref() instead.");try{Hi.makeFromUrl(e,this._delegate.host)}catch{throw Ey("refFromUrl() expected a valid full URL but got an invalid one.")}return new Lc(ok(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t,r={}){!function OV(n,e,t,r={}){!function DV(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:s}=r;s&&(n._overrideAuthToken="string"==typeof s?s:(0,Dt.Sg)(s,n.app.options.projectId))}(n,e,t,r)}(this._delegate,e,t,r)}}function ck(n){return/^[A-Za-z]+:\/\//.test(n)}function UV(n,{instanceIdentifier:e}){const t=n.getProvider("app-compat").getImmediate(),r=n.getProvider("storage").getImmediate({identifier:e});return new lk(t,r)}function dk(n){const e=function jV(n){return new dr.y(e=>{const t=c=>e.next(c);t(n.snapshot);const u=n.on("state_changed",t);return n.then(c=>{t(c),e.complete()},c=>{t(n.snapshot),(c=>{e.error(c)})(c)}),function(){u()}}).pipe(function sL(n,e=DI.z){return(0,Zr.e)((t,r)=>{let s=null,u=null,c=null;const m=()=>{if(s){s.unsubscribe(),s=null;const b=u;u=null,r.next(b)}};function v(){const b=c+n,A=e.now();if(A<b)return s=this.schedule(void 0,b-A),void r.add(s);m()}t.subscribe((0,hr.x)(r,b=>{u=b,c=e.now(),s||(s=e.schedule(v,n),r.add(s))},()=>{m(),r.complete()},void 0,()=>{u=s=null}))})}(0))}(n);return{task:n,then:n.then.bind(n),catch:n.catch.bind(n),pause:n.pause.bind(n),cancel:n.cancel.bind(n),resume:n.resume.bind(n),snapshotChanges:()=>e,percentageChanges:()=>e.pipe((0,ft.U)(t=>t.bytesTransferred/t.totalBytes*100))}}function _D(n){return{getDownloadURL:()=>it(void 0).pipe(Dn.fc,Kn(()=>n.getDownloadURL()),Dn.iC),getMetadata:()=>it(void 0).pipe(Dn.fc,Kn(()=>n.getMetadata()),Dn.iC),delete:()=>(0,zt.D)(n.delete()),child:e=>_D(n.child(e)),updateMetadata:e=>(0,zt.D)(n.updateMetadata(e)),put:(e,t)=>dk(n.put(e,t)),putString:(e,t,r)=>dk(n.putString(e,t,r)),list:e=>(0,zt.D)(n.list(e)),listAll:()=>(0,zt.D)(n.listAll())}}!function BV(n){const e={TaskState:vs,TaskEvent:iV,StringFormat:yo,Storage:lk,Reference:Lc};n.INTERNAL.registerComponent(new Bf.wA("storage-compat",UV,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),n.registerVersion("@firebase/storage-compat","0.1.17")}(CI.Z);const $V=new g.OlP("angularfire2.storageBucket"),HV=new g.OlP("angularfire2.storage.maxUploadRetryTime"),GV=new g.OlP("angularfire2.storage.maxOperationRetryTime"),zV=new g.OlP("angularfire2.storage.use-emulator");let qV=(()=>{class n{constructor(t,r,s,u,c,m,v,b,A,M){const L=(0,Ei.on)(t,c,r);this.storage=(0,Ei.cc)(`${L.name}.storage.${s}`,"AngularFireStorage",L.name,()=>{const G=c.runOutsideAngular(()=>L.storage(s||void 0)),Q=A;return Q&&G.useEmulator(...Q),v&&G.setMaxUploadRetryTime(v),b&&G.setMaxOperationRetryTime(b),G},[v,b])}ref(t){return _D(this.storage.ref(t))}refFromURL(t){return _D(this.storage.refFromURL(t))}upload(t,r,s){return _D(this.storage.ref(t)).put(r,s)}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(Ei.Dh),g.LFG(Ei.xv,8),g.LFG($V,8),g.LFG(g.Lbi),g.LFG(g.R0b),g.LFG(Dn.HU),g.LFG(HV,8),g.LFG(GV,8),g.LFG(zV,8),g.LFG(om,8))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),WV=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({}),n})(),KV=(()=>{class n{constructor(){hv.Z.registerVersion("angularfire",Dn.q4.full,"gcs-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({providers:[qV],imports:[WV]}),n})(),ZV=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n,bootstrap:[BC]}),n.\u0275inj=g.cJS({imports:[kl,$E,nc,LD,Ei.hO.initializeApp(HE_firebaseConfig),ST,iL,KV]}),n})();(0,g.G48)(),_u().bootstrapModule(ZV).catch(n=>console.error(n))},5867:(ot,Ae,P)=>{P.d(Ae,{C6:()=>g.getApps,Mq:()=>g.getApp});var g=P(9681);(0,g.registerVersion)("firebase","9.9.4","app")},127:(ot,Ae,P)=>{P.d(Ae,{Z:()=>g.Z});var g=P(3942);g.Z.registerVersion("firebase","9.9.4","app-compat")},2274:(ot,Ae,P)=>{P.r(Ae);var g=P(5861),ee=P(3942),k=P(2090),oe=P(9681),re=P(655),de=P(1877),le=P(4859);const we=function Le(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},Je=function Me(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},me=new k.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Ye=new de.Yd("@firebase/auth");function nt(y,...h){Ye.logLevel<=de.in.ERROR&&Ye.error(`Auth (${oe.SDK_VERSION}): ${y}`,...h)}function xe(y,...h){throw je(y,...h)}function ve(y,...h){return je(y,...h)}function Ie(y,h,p){const w=Object.assign(Object.assign({},Je()),{[h]:p});return new k.LL("auth","Firebase",w).create(h,{appName:y.name})}function Ue(y,h,p){if(!(h instanceof p))throw p.name!==h.constructor.name&&xe(y,"argument-error"),Ie(y,"argument-error",`Type of ${h.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function je(y,...h){if("string"!=typeof y){const p=h[0],w=[...h.slice(1)];return w[0]&&(w[0].appName=y.name),y._errorFactory.create(p,...w)}return me.create(y,...h)}function U(y,h,...p){if(!y)throw je(h,...p)}function ge(y){const h="INTERNAL ASSERTION FAILED: "+y;throw nt(h),new Error(h)}function Z(y,h){y||ge(h)}const X=new Map;function ie(y){Z(y instanceof Function,"Expected a class definition");let h=X.get(y);return h?(Z(h instanceof y,"Instance stored in cache mismatched with class"),h):(h=new y,X.set(y,h),h)}function Oe(){var y;return typeof self<"u"&&(null===(y=self.location)||void 0===y?void 0:y.href)||""}function ct(){return"http:"===Ht()||"https:"===Ht()}function Ht(){var y;return typeof self<"u"&&(null===(y=self.location)||void 0===y?void 0:y.protocol)||null}class tn{constructor(h,p){this.shortDelay=h,this.longDelay=p,Z(p>h,"Short delay should be less than long delay!"),this.isMobile=(0,k.uI)()||(0,k.b$)()}get(){return function Ut(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(ct()||(0,k.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Cn(y,h){Z(y.emulator,"Emulator should always be set here");const{url:p}=y.emulator;return h?`${p}${h.startsWith("/")?h.slice(1):h}`:p}class Wt{static initialize(h,p,w){this.fetchImpl=h,p&&(this.headersImpl=p),w&&(this.responseImpl=w)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void ge("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void ge("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void ge("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Kt={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},Cr=new tn(3e4,6e4);function Ot(y,h){return y.tenantId&&!h.tenantId?Object.assign(Object.assign({},h),{tenantId:y.tenantId}):h}function Xt(y,h,p,w){return Wo.apply(this,arguments)}function Wo(){return(Wo=(0,g.Z)(function*(y,h,p,w,S={}){return Vr(y,S,(0,g.Z)(function*(){let N={},W={};w&&("GET"===h?W=w:N={body:JSON.stringify(w)});const ue=(0,k.xO)(Object.assign({key:y.config.apiKey},W)).slice(1),Fe=yield y._getAdditionalHeaders();return Fe["Content-Type"]="application/json",y.languageCode&&(Fe["X-Firebase-Locale"]=y.languageCode),Wt.fetch()(Si(y,y.config.apiHost,p,ue),Object.assign({method:h,headers:Fe,referrerPolicy:"no-referrer"},N))}))})).apply(this,arguments)}function Vr(y,h,p){return mr.apply(this,arguments)}function mr(){return(mr=(0,g.Z)(function*(y,h,p){y._canInitEmulator=!1;const w=Object.assign(Object.assign({},Kt),h);try{const S=new Br(y),N=yield Promise.race([p(),S.promise]);S.clearNetworkTimeout();const W=yield N.json();if("needConfirmation"in W)throw hi(y,"account-exists-with-different-credential",W);if(N.ok&&!("errorMessage"in W))return W;{const ue=N.ok?W.errorMessage:W.error.message,[Fe,Qe]=ue.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Fe)throw hi(y,"credential-already-in-use",W);if("EMAIL_EXISTS"===Fe)throw hi(y,"email-already-in-use",W);if("USER_DISABLED"===Fe)throw hi(y,"user-disabled",W);const gt=w[Fe]||Fe.toLowerCase().replace(/[_\s]+/g,"-");if(Qe)throw Ie(y,gt,Qe);xe(y,gt)}}catch(S){if(S instanceof k.ZR)throw S;xe(y,"network-request-failed")}})).apply(this,arguments)}function Ur(y,h,p,w){return ws.apply(this,arguments)}function ws(){return(ws=(0,g.Z)(function*(y,h,p,w,S={}){const N=yield Xt(y,h,p,w,S);return"mfaPendingCredential"in N&&xe(y,"multi-factor-auth-required",{_serverResponse:N}),N})).apply(this,arguments)}function Si(y,h,p,w){const S=`${h}${p}?${w}`;return y.config.emulator?Cn(y.config,S):`${y.config.apiScheme}://${S}`}class Br{constructor(h){this.auth=h,this.timer=null,this.promise=new Promise((p,w)=>{this.timer=setTimeout(()=>w(ve(this.auth,"network-request-failed")),Cr.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function hi(y,h,p){const w={appName:y.name};p.email&&(w.email=p.email),p.phoneNumber&&(w.phoneNumber=p.phoneNumber);const S=ve(y,h,w);return S.customData._tokenResponse=p,S}function Ke(){return(Ke=(0,g.Z)(function*(y,h){return Xt(y,"POST","/v1/accounts:delete",h)})).apply(this,arguments)}function jr(y,h){return Gi.apply(this,arguments)}function Gi(){return(Gi=(0,g.Z)(function*(y,h){return Xt(y,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function Tn(y,h){return fi.apply(this,arguments)}function fi(){return(fi=(0,g.Z)(function*(y,h){return Xt(y,"POST","/v1/accounts:lookup",h)})).apply(this,arguments)}function ti(y){if(y)try{const h=new Date(Number(y));if(!isNaN(h.getTime()))return h.toUTCString()}catch{}}function ln(){return(ln=(0,g.Z)(function*(y,h=!1){const p=(0,k.m9)(y),w=yield p.getIdToken(h),S=st(w);U(S&&S.exp&&S.auth_time&&S.iat,p.auth,"internal-error");const N="object"==typeof S.firebase?S.firebase:void 0,W=N?.sign_in_provider;return{claims:S,token:w,authTime:ti(ht(S.auth_time)),issuedAtTime:ti(ht(S.iat)),expirationTime:ti(ht(S.exp)),signInProvider:W||null,signInSecondFactor:N?.sign_in_second_factor||null}})).apply(this,arguments)}function ht(y){return 1e3*Number(y)}function st(y){var h;const[p,w,S]=y.split(".");if(void 0===p||void 0===w||void 0===S)return nt("JWT malformed, contained fewer than 3 sections"),null;try{const N=(0,k.tV)(w);return N?JSON.parse(N):(nt("Failed to decode base64 JWT payload"),null)}catch(N){return nt("Caught error parsing JWT payload as JSON",null===(h=N)||void 0===h?void 0:h.toString()),null}}function er(y,h){return tr.apply(this,arguments)}function tr(){return(tr=(0,g.Z)(function*(y,h,p=!1){if(p)return h;try{return yield h}catch(w){throw w instanceof k.ZR&&Tr(w)&&y.auth.currentUser===y&&(yield y.auth.signOut()),w}})).apply(this,arguments)}function Tr({code:y}){return"auth/user-disabled"===y||"auth/user-token-expired"===y}class Et{constructor(h){this.user=h,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(h){var p;if(h){const w=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),w}{this.errorBackoff=3e4;const S=(null!==(p=this.user.stsTokenManager.expirationTime)&&void 0!==p?p:0)-Date.now()-3e5;return Math.max(0,S)}}schedule(h=!1){var p=this;if(!this.isRunning)return;const w=this.getInterval(h);this.timerId=setTimeout((0,g.Z)(function*(){yield p.iteration()}),w)}iteration(){var h=this;return(0,g.Z)(function*(){var p;try{yield h.user.getIdToken(!0)}catch(w){return void("auth/network-request-failed"===(null===(p=w)||void 0===p?void 0:p.code)&&h.schedule(!0))}h.schedule()})()}}class zi{constructor(h,p){this.createdAt=h,this.lastLoginAt=p,this._initializeTime()}_initializeTime(){this.lastSignInTime=ti(this.lastLoginAt),this.creationTime=ti(this.createdAt)}_copy(h){this.createdAt=h.createdAt,this.lastLoginAt=h.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Zt(y){return pi.apply(this,arguments)}function pi(){return(pi=(0,g.Z)(function*(y){var h;const p=y.auth,w=yield y.getIdToken(),S=yield er(y,Tn(p,{idToken:w}));U(S?.users.length,p,"internal-error");const N=S.users[0];y._notifyReloadListener(N);const W=null!==(h=N.providerUserInfo)&&void 0!==h&&h.length?V(N.providerUserInfo):[],ue=j(y.providerData,W),gt=!!y.isAnonymous&&!(y.email&&N.passwordHash||ue?.length),pt={uid:N.localId,displayName:N.displayName||null,photoURL:N.photoUrl||null,email:N.email||null,emailVerified:N.emailVerified||!1,phoneNumber:N.phoneNumber||null,tenantId:N.tenantId||null,providerData:ue,metadata:new zi(N.createdAt,N.lastLoginAt),isAnonymous:gt};Object.assign(y,pt)})).apply(this,arguments)}function K(){return(K=(0,g.Z)(function*(y){const h=(0,k.m9)(y);yield Zt(h),yield h.auth._persistUserIfCurrent(h),h.auth._notifyListenersIfCurrent(h)})).apply(this,arguments)}function j(y,h){return[...y.filter(w=>!h.some(S=>S.providerId===w.providerId)),...h]}function V(y){return y.map(h=>{var{providerId:p}=h,w=(0,re._T)(h,["providerId"]);return{providerId:p,uid:w.rawId||"",displayName:w.displayName||null,email:w.email||null,phoneNumber:w.phoneNumber||null,photoURL:w.photoUrl||null}})}function q(){return(q=(0,g.Z)(function*(y,h){const p=yield Vr(y,{},(0,g.Z)(function*(){const w=(0,k.xO)({grant_type:"refresh_token",refresh_token:h}).slice(1),{tokenApiHost:S,apiKey:N}=y.config,W=Si(y,S,"/v1/token",`key=${N}`),ue=yield y._getAdditionalHeaders();return ue["Content-Type"]="application/x-www-form-urlencoded",Wt.fetch()(W,{method:"POST",headers:ue,body:w})}));return{accessToken:p.access_token,expiresIn:p.expires_in,refreshToken:p.refresh_token}})).apply(this,arguments)}class De{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(h){U(h.idToken,"internal-error"),U(typeof h.idToken<"u","internal-error"),U(typeof h.refreshToken<"u","internal-error");const p="expiresIn"in h&&typeof h.expiresIn<"u"?Number(h.expiresIn):function nn(y){const h=st(y);return U(h,"internal-error"),U(typeof h.exp<"u","internal-error"),U(typeof h.iat<"u","internal-error"),Number(h.exp)-Number(h.iat)}(h.idToken);this.updateTokensAndExpiration(h.idToken,h.refreshToken,p)}getToken(h,p=!1){var w=this;return(0,g.Z)(function*(){return U(!w.accessToken||w.refreshToken,h,"user-token-expired"),p||!w.accessToken||w.isExpired?w.refreshToken?(yield w.refresh(h,w.refreshToken),w.accessToken):null:w.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(h,p){var w=this;return(0,g.Z)(function*(){const{accessToken:S,refreshToken:N,expiresIn:W}=yield function H(y,h){return q.apply(this,arguments)}(h,p);w.updateTokensAndExpiration(S,N,Number(W))})()}updateTokensAndExpiration(h,p,w){this.refreshToken=p||null,this.accessToken=h||null,this.expirationTime=Date.now()+1e3*w}static fromJSON(h,p){const{refreshToken:w,accessToken:S,expirationTime:N}=p,W=new De;return w&&(U("string"==typeof w,"internal-error",{appName:h}),W.refreshToken=w),S&&(U("string"==typeof S,"internal-error",{appName:h}),W.accessToken=S),N&&(U("number"==typeof N,"internal-error",{appName:h}),W.expirationTime=N),W}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(h){this.accessToken=h.accessToken,this.refreshToken=h.refreshToken,this.expirationTime=h.expirationTime}_clone(){return Object.assign(new De,this.toJSON())}_performRefresh(){return ge("not implemented")}}function Ve(y,h){U("string"==typeof y||typeof y>"u","internal-error",{appName:h})}class rt{constructor(h){var{uid:p,auth:w,stsTokenManager:S}=h,N=(0,re._T)(h,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Et(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=p,this.auth=w,this.stsTokenManager=S,this.accessToken=S.accessToken,this.displayName=N.displayName||null,this.email=N.email||null,this.emailVerified=N.emailVerified||!1,this.phoneNumber=N.phoneNumber||null,this.photoURL=N.photoURL||null,this.isAnonymous=N.isAnonymous||!1,this.tenantId=N.tenantId||null,this.providerData=N.providerData?[...N.providerData]:[],this.metadata=new zi(N.createdAt||void 0,N.lastLoginAt||void 0)}getIdToken(h){var p=this;return(0,g.Z)(function*(){const w=yield er(p,p.stsTokenManager.getToken(p.auth,h));return U(w,p.auth,"internal-error"),p.accessToken!==w&&(p.accessToken=w,yield p.auth._persistUserIfCurrent(p),p.auth._notifyListenersIfCurrent(p)),w})()}getIdTokenResult(h){return function jn(y){return ln.apply(this,arguments)}(this,h)}reload(){return function Gt(y){return K.apply(this,arguments)}(this)}_assign(h){this!==h&&(U(this.uid===h.uid,this.auth,"internal-error"),this.displayName=h.displayName,this.photoURL=h.photoURL,this.email=h.email,this.emailVerified=h.emailVerified,this.phoneNumber=h.phoneNumber,this.isAnonymous=h.isAnonymous,this.tenantId=h.tenantId,this.providerData=h.providerData.map(p=>Object.assign({},p)),this.metadata._copy(h.metadata),this.stsTokenManager._assign(h.stsTokenManager))}_clone(h){return new rt(Object.assign(Object.assign({},this),{auth:h,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(h){U(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=h,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(h){this.reloadListener?this.reloadListener(h):this.reloadUserInfo=h}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(h,p=!1){var w=this;return(0,g.Z)(function*(){let S=!1;h.idToken&&h.idToken!==w.stsTokenManager.accessToken&&(w.stsTokenManager.updateFromServerResponse(h),S=!0),p&&(yield Zt(w)),yield w.auth._persistUserIfCurrent(w),S&&w.auth._notifyListenersIfCurrent(w)})()}delete(){var h=this;return(0,g.Z)(function*(){const p=yield h.getIdToken();return yield er(h,function _o(y,h){return Ke.apply(this,arguments)}(h.auth,{idToken:p})),h.stsTokenManager.clearRefreshToken(),h.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(h=>Object.assign({},h)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(h,p){var w,S,N,W,ue,Fe,Qe,gt;const pt=null!==(w=p.displayName)&&void 0!==w?w:void 0,qn=null!==(S=p.email)&&void 0!==S?S:void 0,as=null!==(N=p.phoneNumber)&&void 0!==N?N:void 0,Ou=null!==(W=p.photoURL)&&void 0!==W?W:void 0,_g=null!==(ue=p.tenantId)&&void 0!==ue?ue:void 0,wd=null!==(Fe=p._redirectEventId)&&void 0!==Fe?Fe:void 0,Hy=null!==(Qe=p.createdAt)&&void 0!==Qe?Qe:void 0,vg=null!==(gt=p.lastLoginAt)&&void 0!==gt?gt:void 0,{uid:nc,emailVerified:_0,isAnonymous:Gy,providerData:Ed,stsTokenManager:v0}=p;U(nc&&v0,h,"internal-error");const DD=De.fromJSON(this.name,v0);U("string"==typeof nc,h,"internal-error"),Ve(pt,h.name),Ve(qn,h.name),U("boolean"==typeof _0,h,"internal-error"),U("boolean"==typeof Gy,h,"internal-error"),Ve(as,h.name),Ve(Ou,h.name),Ve(_g,h.name),Ve(wd,h.name),Ve(Hy,h.name),Ve(vg,h.name);const zy=new rt({uid:nc,auth:h,email:qn,emailVerified:_0,displayName:pt,isAnonymous:Gy,photoURL:Ou,phoneNumber:as,tenantId:_g,stsTokenManager:DD,createdAt:Hy,lastLoginAt:vg});return Ed&&Array.isArray(Ed)&&(zy.providerData=Ed.map(CD=>Object.assign({},CD))),wd&&(zy._redirectEventId=wd),zy}static _fromIdTokenResponse(h,p,w=!1){return(0,g.Z)(function*(){const S=new De;S.updateFromServerResponse(p);const N=new rt({uid:p.localId,auth:h,stsTokenManager:S,isAnonymous:w});return yield Zt(N),N})()}}const Yt=(()=>{class y{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,g.Z)(function*(){return!0})()}_set(p,w){var S=this;return(0,g.Z)(function*(){S.storage[p]=w})()}_get(p){var w=this;return(0,g.Z)(function*(){const S=w.storage[p];return void 0===S?null:S})()}_remove(p){var w=this;return(0,g.Z)(function*(){delete w.storage[p]})()}_addListener(p,w){}_removeListener(p,w){}}return y.type="NONE",y})();function $n(y,h,p){return`firebase:${y}:${h}:${p}`}class Pt{constructor(h,p,w){this.persistence=h,this.auth=p,this.userKey=w;const{config:S,name:N}=this.auth;this.fullUserKey=$n(this.userKey,S.apiKey,N),this.fullPersistenceKey=$n("persistence",S.apiKey,N),this.boundEventHandler=p._onStorageEvent.bind(p),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(h){return this.persistence._set(this.fullUserKey,h.toJSON())}getCurrentUser(){var h=this;return(0,g.Z)(function*(){const p=yield h.persistence._get(h.fullUserKey);return p?rt._fromJSON(h.auth,p):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(h){var p=this;return(0,g.Z)(function*(){if(p.persistence===h)return;const w=yield p.getCurrentUser();return yield p.removeCurrentUser(),p.persistence=h,w?p.setCurrentUser(w):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(h,p,w="authUser"){return(0,g.Z)(function*(){if(!p.length)return new Pt(ie(Yt),h,w);const S=(yield Promise.all(p.map(function(){var Qe=(0,g.Z)(function*(gt){if(yield gt._isAvailable())return gt});return function(gt){return Qe.apply(this,arguments)}}()))).filter(Qe=>Qe);let N=S[0]||ie(Yt);const W=$n(w,h.config.apiKey,h.name);let ue=null;for(const Qe of p)try{const gt=yield Qe._get(W);if(gt){const pt=rt._fromJSON(h,gt);Qe!==N&&(ue=pt),N=Qe;break}}catch{}const Fe=S.filter(Qe=>Qe._shouldAllowMigration);return N._shouldAllowMigration&&Fe.length?(N=Fe[0],ue&&(yield N._set(W,ue.toJSON())),yield Promise.all(p.map(function(){var Qe=(0,g.Z)(function*(gt){if(gt!==N)try{yield gt._remove(W)}catch{}});return function(gt){return Qe.apply(this,arguments)}}())),new Pt(N,h,w)):new Pt(N,h,w)})()}}function Mt(y){const h=y.toLowerCase();if(h.includes("opera/")||h.includes("opr/")||h.includes("opios/"))return"Opera";if(Sr(h))return"IEMobile";if(h.includes("msie")||h.includes("trident/"))return"IE";if(h.includes("edge/"))return"Edge";if(dn(h))return"Firefox";if(h.includes("silk/"))return"Silk";if(He(h))return"Blackberry";if(_t(h))return"Webos";if(Nn(h))return"Safari";if((h.includes("chrome/")||Ai(h))&&!h.includes("edge/"))return"Chrome";if(On(h))return"Android";{const w=y.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===w?.length)return w[1]}return"Other"}function dn(y=(0,k.z$)()){return/firefox\//i.test(y)}function Nn(y=(0,k.z$)()){const h=y.toLowerCase();return h.includes("safari/")&&!h.includes("chrome/")&&!h.includes("crios/")&&!h.includes("android")}function Ai(y=(0,k.z$)()){return/crios\//i.test(y)}function Sr(y=(0,k.z$)()){return/iemobile/i.test(y)}function On(y=(0,k.z$)()){return/android/i.test(y)}function He(y=(0,k.z$)()){return/blackberry/i.test(y)}function _t(y=(0,k.z$)()){return/webos/i.test(y)}function Qt(y=(0,k.z$)()){return/iphone|ipad|ipod/i.test(y)||/macintosh/i.test(y)&&/mobile/i.test(y)}function qs(y=(0,k.z$)()){return Qt(y)||On(y)||_t(y)||He(y)||/windows phone/i.test(y)||Sr(y)}function Es(y,h=[]){let p;switch(y){case"Browser":p=Mt((0,k.z$)());break;case"Worker":p=`${Mt((0,k.z$)())}-${y}`;break;default:p=y}const w=h.length?h.join(","):"FirebaseCore-web";return`${p}/JsCore/${oe.SDK_VERSION}/${w}`}class Ws{constructor(h){this.auth=h,this.queue=[]}pushCallback(h,p){const w=N=>new Promise((W,ue)=>{try{W(h(N))}catch(Fe){ue(Fe)}});w.onAbort=p,this.queue.push(w);const S=this.queue.length-1;return()=>{this.queue[S]=()=>Promise.resolve()}}runMiddleware(h){var p=this;return(0,g.Z)(function*(){var w;if(p.auth.currentUser===h)return;const S=[];try{for(const N of p.queue)yield N(h),N.onAbort&&S.push(N.onAbort)}catch(N){S.reverse();for(const W of S)try{W()}catch{}throw p.auth._errorFactory.create("login-blocked",{originalMessage:null===(w=N)||void 0===w?void 0:w.message})}})()}}class Rt{constructor(h,p,w){this.app=h,this.heartbeatServiceProvider=p,this.config=w,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Ks(this),this.idTokenSubscription=new Ks(this),this.beforeStateQueue=new Ws(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=me,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=h.name,this.clientVersion=w.sdkClientVersion}_initializeWithPersistence(h,p){var w=this;return p&&(this._popupRedirectResolver=ie(p)),this._initializationPromise=this.queue((0,g.Z)(function*(){var S,N;if(!w._deleted&&(w.persistenceManager=yield Pt.create(w,h),!w._deleted)){if(null!==(S=w._popupRedirectResolver)&&void 0!==S&&S._shouldInitProactively)try{yield w._popupRedirectResolver._initialize(w)}catch{}yield w.initializeCurrentUser(p),w.lastNotifiedUid=(null===(N=w.currentUser)||void 0===N?void 0:N.uid)||null,!w._deleted&&(w._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var h=this;return(0,g.Z)(function*(){if(h._deleted)return;const p=yield h.assertedPersistence.getCurrentUser();if(h.currentUser||p){if(h.currentUser&&p&&h.currentUser.uid===p.uid)return h._currentUser._assign(p),void(yield h.currentUser.getIdToken());yield h._updateCurrentUser(p,!0)}})()}initializeCurrentUser(h){var p=this;return(0,g.Z)(function*(){var w;const S=yield p.assertedPersistence.getCurrentUser();let N=S,W=!1;if(h&&p.config.authDomain){yield p.getOrInitRedirectPersistenceManager();const ue=null===(w=p.redirectUser)||void 0===w?void 0:w._redirectEventId,Fe=N?._redirectEventId,Qe=yield p.tryRedirectSignIn(h);(!ue||ue===Fe)&&Qe?.user&&(N=Qe.user,W=!0)}if(!N)return p.directlySetCurrentUser(null);if(!N._redirectEventId){if(W)try{yield p.beforeStateQueue.runMiddleware(N)}catch(ue){N=S,p._popupRedirectResolver._overrideRedirectResult(p,()=>Promise.reject(ue))}return N?p.reloadAndSetCurrentUserOrClear(N):p.directlySetCurrentUser(null)}return U(p._popupRedirectResolver,p,"argument-error"),yield p.getOrInitRedirectPersistenceManager(),p.redirectUser&&p.redirectUser._redirectEventId===N._redirectEventId?p.directlySetCurrentUser(N):p.reloadAndSetCurrentUserOrClear(N)})()}tryRedirectSignIn(h){var p=this;return(0,g.Z)(function*(){let w=null;try{w=yield p._popupRedirectResolver._completeRedirectFn(p,h,!0)}catch{yield p._setRedirectUser(null)}return w})()}reloadAndSetCurrentUserOrClear(h){var p=this;return(0,g.Z)(function*(){var w;try{yield Zt(h)}catch(S){if("auth/network-request-failed"!==(null===(w=S)||void 0===w?void 0:w.code))return p.directlySetCurrentUser(null)}return p.directlySetCurrentUser(h)})()}useDeviceLanguage(){this.languageCode=function qe(){if(typeof navigator>"u")return null;const y=navigator;return y.languages&&y.languages[0]||y.language||null}()}_delete(){var h=this;return(0,g.Z)(function*(){h._deleted=!0})()}updateCurrentUser(h){var p=this;return(0,g.Z)(function*(){const w=h?(0,k.m9)(h):null;return w&&U(w.auth.config.apiKey===p.config.apiKey,p,"invalid-user-token"),p._updateCurrentUser(w&&w._clone(p))})()}_updateCurrentUser(h,p=!1){var w=this;return(0,g.Z)(function*(){if(!w._deleted)return h&&U(w.tenantId===h.tenantId,w,"tenant-id-mismatch"),p||(yield w.beforeStateQueue.runMiddleware(h)),w.queue((0,g.Z)(function*(){yield w.directlySetCurrentUser(h),w.notifyAuthListeners()}))})()}signOut(){var h=this;return(0,g.Z)(function*(){return yield h.beforeStateQueue.runMiddleware(null),(h.redirectPersistenceManager||h._popupRedirectResolver)&&(yield h._setRedirectUser(null)),h._updateCurrentUser(null,!0)})()}setPersistence(h){var p=this;return this.queue((0,g.Z)(function*(){yield p.assertedPersistence.setPersistence(ie(h))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(h){this._errorFactory=new k.LL("auth","Firebase",h())}onAuthStateChanged(h,p,w){return this.registerStateListener(this.authStateSubscription,h,p,w)}beforeAuthStateChanged(h,p){return this.beforeStateQueue.pushCallback(h,p)}onIdTokenChanged(h,p,w){return this.registerStateListener(this.idTokenSubscription,h,p,w)}toJSON(){var h;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(h=this._currentUser)||void 0===h?void 0:h.toJSON()}}_setRedirectUser(h,p){var w=this;return(0,g.Z)(function*(){const S=yield w.getOrInitRedirectPersistenceManager(p);return null===h?S.removeCurrentUser():S.setCurrentUser(h)})()}getOrInitRedirectPersistenceManager(h){var p=this;return(0,g.Z)(function*(){if(!p.redirectPersistenceManager){const w=h&&ie(h)||p._popupRedirectResolver;U(w,p,"argument-error"),p.redirectPersistenceManager=yield Pt.create(p,[ie(w._redirectPersistence)],"redirectUser"),p.redirectUser=yield p.redirectPersistenceManager.getCurrentUser()}return p.redirectPersistenceManager})()}_redirectUserForId(h){var p=this;return(0,g.Z)(function*(){var w,S;return p._isInitialized&&(yield p.queue((0,g.Z)(function*(){}))),(null===(w=p._currentUser)||void 0===w?void 0:w._redirectEventId)===h?p._currentUser:(null===(S=p.redirectUser)||void 0===S?void 0:S._redirectEventId)===h?p.redirectUser:null})()}_persistUserIfCurrent(h){var p=this;return(0,g.Z)(function*(){if(h===p.currentUser)return p.queue((0,g.Z)(function*(){return p.directlySetCurrentUser(h)}))})()}_notifyListenersIfCurrent(h){h===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var h,p;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const w=null!==(p=null===(h=this.currentUser)||void 0===h?void 0:h.uid)&&void 0!==p?p:null;this.lastNotifiedUid!==w&&(this.lastNotifiedUid=w,this.authStateSubscription.next(this.currentUser))}registerStateListener(h,p,w,S){if(this._deleted)return()=>{};const N="function"==typeof p?p:p.next.bind(p),W=this._isInitialized?Promise.resolve():this._initializationPromise;return U(W,this,"internal-error"),W.then(()=>N(this.currentUser)),"function"==typeof p?h.addObserver(p,w,S):h.addObserver(p)}directlySetCurrentUser(h){var p=this;return(0,g.Z)(function*(){p.currentUser&&p.currentUser!==h&&p._currentUser._stopProactiveRefresh(),h&&p.isProactiveRefreshEnabled&&h._startProactiveRefresh(),p.currentUser=h,h?yield p.assertedPersistence.setCurrentUser(h):yield p.assertedPersistence.removeCurrentUser()})()}queue(h){return this.operations=this.operations.then(h,h),this.operations}get assertedPersistence(){return U(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(h){!h||this.frameworks.includes(h)||(this.frameworks.push(h),this.frameworks.sort(),this.clientVersion=Es(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var h=this;return(0,g.Z)(function*(){var p;const w={"X-Client-Version":h.clientVersion};h.app.options.appId&&(w["X-Firebase-gmpid"]=h.app.options.appId);const S=yield null===(p=h.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===p?void 0:p.getHeartbeatsHeader();return S&&(w["X-Firebase-Client"]=S),w})()}}function fn(y){return(0,k.m9)(y)}class Ks{constructor(h){this.auth=h,this.observer=null,this.addObserver=(0,k.ne)(p=>this.observer=p)}get next(){return U(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function xi(y){const h=y.indexOf(":");return h<0?"":y.substr(0,h+1)}function Is(y){if(!y)return null;const h=Number(y);return isNaN(h)?null:h}class ur{constructor(h,p){this.providerId=h,this.signInMethod=p}toJSON(){return ge("not implemented")}_getIdTokenResponse(h){return ge("not implemented")}_linkToIdToken(h,p){return ge("not implemented")}_getReauthenticationResolver(h){return ge("not implemented")}}function Pn(y,h){return Ko.apply(this,arguments)}function Ko(){return(Ko=(0,g.Z)(function*(y,h){return Xt(y,"POST","/v1/accounts:resetPassword",Ot(y,h))})).apply(this,arguments)}function rn(y,h){return ll.apply(this,arguments)}function ll(){return(ll=(0,g.Z)(function*(y,h){return Xt(y,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function cl(y,h){return Zs.apply(this,arguments)}function Zs(){return(Zs=(0,g.Z)(function*(y,h){return Xt(y,"POST","/v1/accounts:update",Ot(y,h))})).apply(this,arguments)}function vo(){return(vo=(0,g.Z)(function*(y,h){return Ur(y,"POST","/v1/accounts:signInWithPassword",Ot(y,h))})).apply(this,arguments)}function Ds(y,h){return mi.apply(this,arguments)}function mi(){return(mi=(0,g.Z)(function*(y,h){return Xt(y,"POST","/v1/accounts:sendOobCode",Ot(y,h))})).apply(this,arguments)}function lr(y,h){return dl.apply(this,arguments)}function dl(){return(dl=(0,g.Z)(function*(y,h){return Ds(y,h)})).apply(this,arguments)}function nr(y,h){return Ar.apply(this,arguments)}function Ar(){return(Ar=(0,g.Z)(function*(y,h){return Ds(y,h)})).apply(this,arguments)}function Ya(y,h){return Yo.apply(this,arguments)}function Yo(){return(Yo=(0,g.Z)(function*(y,h){return Ds(y,h)})).apply(this,arguments)}function hl(y,h){return yr.apply(this,arguments)}function yr(){return(yr=(0,g.Z)(function*(y,h){return Ds(y,h)})).apply(this,arguments)}function Vc(){return(Vc=(0,g.Z)(function*(y,h){return Ur(y,"POST","/v1/accounts:signInWithEmailLink",Ot(y,h))})).apply(this,arguments)}function fl(){return(fl=(0,g.Z)(function*(y,h){return Ur(y,"POST","/v1/accounts:signInWithEmailLink",Ot(y,h))})).apply(this,arguments)}class pl extends ur{constructor(h,p,w,S=null){super("password",w),this._email=h,this._password=p,this._tenantId=S}static _fromEmailAndPassword(h,p){return new pl(h,p,"password")}static _fromEmailAndCode(h,p,w=null){return new pl(h,p,"emailLink",w)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(h){const p="string"==typeof h?JSON.parse(h):h;if(p?.email&&p?.password){if("password"===p.signInMethod)return this._fromEmailAndPassword(p.email,p.password);if("emailLink"===p.signInMethod)return this._fromEmailAndCode(p.email,p.password,p.tenantId)}return null}_getIdTokenResponse(h){var p=this;return(0,g.Z)(function*(){switch(p.signInMethod){case"password":return function Zo(y,h){return vo.apply(this,arguments)}(h,{returnSecureToken:!0,email:p._email,password:p._password});case"emailLink":return function Rh(y,h){return Vc.apply(this,arguments)}(h,{email:p._email,oobCode:p._password});default:xe(h,"internal-error")}})()}_linkToIdToken(h,p){var w=this;return(0,g.Z)(function*(){switch(w.signInMethod){case"password":return rn(h,{idToken:p,returnSecureToken:!0,email:w._email,password:w._password});case"emailLink":return function Nh(y,h){return fl.apply(this,arguments)}(h,{idToken:p,email:w._email,oobCode:w._password});default:xe(h,"internal-error")}})()}_getReauthenticationResolver(h){return this._getIdTokenResponse(h)}}function Gn(y,h){return Uc.apply(this,arguments)}function Uc(){return(Uc=(0,g.Z)(function*(y,h){return Ur(y,"POST","/v1/accounts:signInWithIdp",Ot(y,h))})).apply(this,arguments)}class qi extends ur{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(h){const p=new qi(h.providerId,h.signInMethod);return h.idToken||h.accessToken?(h.idToken&&(p.idToken=h.idToken),h.accessToken&&(p.accessToken=h.accessToken),h.nonce&&!h.pendingToken&&(p.nonce=h.nonce),h.pendingToken&&(p.pendingToken=h.pendingToken)):h.oauthToken&&h.oauthTokenSecret?(p.accessToken=h.oauthToken,p.secret=h.oauthTokenSecret):xe("argument-error"),p}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(h){const p="string"==typeof h?JSON.parse(h):h,{providerId:w,signInMethod:S}=p,N=(0,re._T)(p,["providerId","signInMethod"]);if(!w||!S)return null;const W=new qi(w,S);return W.idToken=N.idToken||void 0,W.accessToken=N.accessToken||void 0,W.secret=N.secret,W.nonce=N.nonce,W.pendingToken=N.pendingToken||null,W}_getIdTokenResponse(h){return Gn(h,this.buildRequest())}_linkToIdToken(h,p){const w=this.buildRequest();return w.idToken=p,Gn(h,w)}_getReauthenticationResolver(h){const p=this.buildRequest();return p.autoCreate=!1,Gn(h,p)}buildRequest(){const h={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)h.pendingToken=this.pendingToken;else{const p={};this.idToken&&(p.id_token=this.idToken),this.accessToken&&(p.access_token=this.accessToken),this.secret&&(p.oauth_token_secret=this.secret),p.providerId=this.providerId,this.nonce&&!this.pendingToken&&(p.nonce=this.nonce),h.postBody=(0,k.xO)(p)}return h}}function Bp(y,h){return Bc.apply(this,arguments)}function Bc(){return(Bc=(0,g.Z)(function*(y,h){return Xt(y,"POST","/v1/accounts:sendVerificationCode",Ot(y,h))})).apply(this,arguments)}function Cs(){return(Cs=(0,g.Z)(function*(y,h){return Ur(y,"POST","/v1/accounts:signInWithPhoneNumber",Ot(y,h))})).apply(this,arguments)}function jc(){return(jc=(0,g.Z)(function*(y,h){const p=yield Ur(y,"POST","/v1/accounts:signInWithPhoneNumber",Ot(y,h));if(p.temporaryProof)throw hi(y,"account-exists-with-different-credential",p);return p})).apply(this,arguments)}const $p={USER_NOT_FOUND:"user-not-found"};function $c(){return($c=(0,g.Z)(function*(y,h){return Ur(y,"POST","/v1/accounts:signInWithPhoneNumber",Ot(y,Object.assign(Object.assign({},h),{operation:"REAUTH"})),$p)})).apply(this,arguments)}class Ts extends ur{constructor(h){super("phone","phone"),this.params=h}static _fromVerification(h,p){return new Ts({verificationId:h,verificationCode:p})}static _fromTokenResponse(h,p){return new Ts({phoneNumber:h,temporaryProof:p})}_getIdTokenResponse(h){return function gl(y,h){return Cs.apply(this,arguments)}(h,this._makeVerificationRequest())}_linkToIdToken(h,p){return function jp(y,h){return jc.apply(this,arguments)}(h,Object.assign({idToken:p},this._makeVerificationRequest()))}_getReauthenticationResolver(h){return function Hp(y,h){return $c.apply(this,arguments)}(h,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:h,phoneNumber:p,verificationId:w,verificationCode:S}=this.params;return h&&p?{temporaryProof:h,phoneNumber:p}:{sessionInfo:w,code:S}}toJSON(){const h={providerId:this.providerId};return this.params.phoneNumber&&(h.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(h.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(h.verificationCode=this.params.verificationCode),this.params.verificationId&&(h.verificationId=this.params.verificationId),h}static fromJSON(h){"string"==typeof h&&(h=JSON.parse(h));const{verificationId:p,verificationCode:w,phoneNumber:S,temporaryProof:N}=h;return w||p||S||N?new Ts({verificationId:p,verificationCode:w,phoneNumber:S,temporaryProof:N}):null}}class Qa{constructor(h){var p,w,S,N,W,ue;const Fe=(0,k.zd)((0,k.pd)(h)),Qe=null!==(p=Fe.apiKey)&&void 0!==p?p:null,gt=null!==(w=Fe.oobCode)&&void 0!==w?w:null,pt=function Hc(y){switch(y){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(S=Fe.mode)&&void 0!==S?S:null);U(Qe&&gt&&pt,"argument-error"),this.apiKey=Qe,this.operation=pt,this.code=gt,this.continueUrl=null!==(N=Fe.continueUrl)&&void 0!==N?N:null,this.languageCode=null!==(W=Fe.languageCode)&&void 0!==W?W:null,this.tenantId=null!==(ue=Fe.tenantId)&&void 0!==ue?ue:null}static parseLink(h){const p=function Gc(y){const h=(0,k.zd)((0,k.pd)(y)).link,p=h?(0,k.zd)((0,k.pd)(h)).deep_link_id:null,w=(0,k.zd)((0,k.pd)(y)).deep_link_id;return(w?(0,k.zd)((0,k.pd)(w)).link:null)||w||p||h||y}(h);try{return new Qa(p)}catch{return null}}}let Mi=(()=>{class y{constructor(){this.providerId=y.PROVIDER_ID}static credential(p,w){return pl._fromEmailAndPassword(p,w)}static credentialWithLink(p,w){const S=Qa.parseLink(w);return U(S,"argument-error"),pl._fromEmailAndCode(p,S.code,S.tenantId)}}return y.PROVIDER_ID="password",y.EMAIL_PASSWORD_SIGN_IN_METHOD="password",y.EMAIL_LINK_SIGN_IN_METHOD="emailLink",y})();class Wi{constructor(h){this.providerId=h,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(h){this.defaultLanguageCode=h}setCustomParameters(h){return this.customParameters=h,this}getCustomParameters(){return this.customParameters}}class Ki extends Wi{constructor(){super(...arguments),this.scopes=[]}addScope(h){return this.scopes.includes(h)||this.scopes.push(h),this}getScopes(){return[...this.scopes]}}class Ys extends Ki{static credentialFromJSON(h){const p="string"==typeof h?JSON.parse(h):h;return U("providerId"in p&&"signInMethod"in p,"argument-error"),qi._fromParams(p)}credential(h){return this._credential(Object.assign(Object.assign({},h),{nonce:h.rawNonce}))}_credential(h){return U(h.idToken||h.accessToken,"argument-error"),qi._fromParams(Object.assign(Object.assign({},h),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(h){return Ys.oauthCredentialFromTaggedObject(h)}static credentialFromError(h){return Ys.oauthCredentialFromTaggedObject(h.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{oauthIdToken:p,oauthAccessToken:w,oauthTokenSecret:S,pendingToken:N,nonce:W,providerId:ue}=h;if(!w&&!S&&!p&&!N||!ue)return null;try{return new Ys(ue)._credential({idToken:p,accessToken:w,nonce:W,pendingToken:N})}catch{return null}}}let Qo=(()=>{class y extends Ki{constructor(){super("facebook.com")}static credential(p){return qi._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.FACEBOOK_SIGN_IN_METHOD,accessToken:p})}static credentialFromResult(p){return y.credentialFromTaggedObject(p)}static credentialFromError(p){return y.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p||!("oauthAccessToken"in p)||!p.oauthAccessToken)return null;try{return y.credential(p.oauthAccessToken)}catch{return null}}}return y.FACEBOOK_SIGN_IN_METHOD="facebook.com",y.PROVIDER_ID="facebook.com",y})(),Ja=(()=>{class y extends Ki{constructor(){super("google.com"),this.addScope("profile")}static credential(p,w){return qi._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GOOGLE_SIGN_IN_METHOD,idToken:p,accessToken:w})}static credentialFromResult(p){return y.credentialFromTaggedObject(p)}static credentialFromError(p){return y.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthIdToken:w,oauthAccessToken:S}=p;if(!w&&!S)return null;try{return y.credential(w,S)}catch{return null}}}return y.GOOGLE_SIGN_IN_METHOD="google.com",y.PROVIDER_ID="google.com",y})(),ml=(()=>{class y extends Ki{constructor(){super("github.com")}static credential(p){return qi._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GITHUB_SIGN_IN_METHOD,accessToken:p})}static credentialFromResult(p){return y.credentialFromTaggedObject(p)}static credentialFromError(p){return y.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p||!("oauthAccessToken"in p)||!p.oauthAccessToken)return null;try{return y.credential(p.oauthAccessToken)}catch{return null}}}return y.GITHUB_SIGN_IN_METHOD="github.com",y.PROVIDER_ID="github.com",y})();class Jo extends ur{constructor(h,p){super(h,h),this.pendingToken=p}_getIdTokenResponse(h){return Gn(h,this.buildRequest())}_linkToIdToken(h,p){const w=this.buildRequest();return w.idToken=p,Gn(h,w)}_getReauthenticationResolver(h){const p=this.buildRequest();return p.autoCreate=!1,Gn(h,p)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(h){const p="string"==typeof h?JSON.parse(h):h,{providerId:w,signInMethod:S,pendingToken:N}=p;return w&&S&&N&&w===S?new Jo(w,N):null}static _create(h,p){return new Jo(h,p)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class ri extends Wi{constructor(h){U(h.startsWith("saml."),"argument-error"),super(h)}static credentialFromResult(h){return ri.samlCredentialFromTaggedObject(h)}static credentialFromError(h){return ri.samlCredentialFromTaggedObject(h.customData||{})}static credentialFromJSON(h){const p=Jo.fromJSON(h);return U(p,"argument-error"),p}static samlCredentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{pendingToken:p,providerId:w}=h;if(!p||!w)return null;try{return Jo._create(w,p)}catch{return null}}}let $r=(()=>{class y extends Ki{constructor(){super("twitter.com")}static credential(p,w){return qi._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.TWITTER_SIGN_IN_METHOD,oauthToken:p,oauthTokenSecret:w})}static credentialFromResult(p){return y.credentialFromTaggedObject(p)}static credentialFromError(p){return y.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthAccessToken:w,oauthTokenSecret:S}=p;if(!w||!S)return null;try{return y.credential(w,S)}catch{return null}}}return y.TWITTER_SIGN_IN_METHOD="twitter.com",y.PROVIDER_ID="twitter.com",y})();function wo(y,h){return zc.apply(this,arguments)}function zc(){return(zc=(0,g.Z)(function*(y,h){return Ur(y,"POST","/v1/accounts:signUp",Ot(y,h))})).apply(this,arguments)}class cr{constructor(h){this.user=h.user,this.providerId=h.providerId,this._tokenResponse=h._tokenResponse,this.operationType=h.operationType}static _fromIdTokenResponse(h,p,w,S=!1){return(0,g.Z)(function*(){const N=yield rt._fromIdTokenResponse(h,w,S),W=Ph(w);return new cr({user:N,providerId:W,_tokenResponse:w,operationType:p})})()}static _forOperation(h,p,w){return(0,g.Z)(function*(){yield h._updateTokensIfNecessary(w,!0);const S=Ph(w);return new cr({user:h,providerId:S,_tokenResponse:w,operationType:p})})()}}function Ph(y){return y.providerId?y.providerId:"phoneNumber"in y?"phone":null}function _n(){return(_n=(0,g.Z)(function*(y){var h;const p=fn(y);if(yield p._initializationPromise,null!==(h=p.currentUser)&&void 0!==h&&h.isAnonymous)return new cr({user:p.currentUser,providerId:null,operationType:"signIn"});const w=yield wo(p,{returnSecureToken:!0}),S=yield cr._fromIdTokenResponse(p,"signIn",w,!0);return yield p._updateCurrentUser(S.user),S})).apply(this,arguments)}class Xa extends k.ZR{constructor(h,p,w,S){var N;super(p.code,p.message),this.operationType=w,this.user=S,Object.setPrototypeOf(this,Xa.prototype),this.customData={appName:h.name,tenantId:null!==(N=h.tenantId)&&void 0!==N?N:void 0,_serverResponse:p.customData._serverResponse,operationType:w}}static _fromErrorAndOperation(h,p,w,S){return new Xa(h,p,w,S)}}function Lh(y,h,p,w){return("reauthenticate"===h?p._getReauthenticationResolver(y):p._getIdTokenResponse(y)).catch(N=>{throw"auth/multi-factor-auth-required"===N.code?Xa._fromErrorAndOperation(y,N,h,w):N})}function ii(y){return new Set(y.map(({providerId:h})=>h).filter(h=>!!h))}function eu(){return(eu=(0,g.Z)(function*(y,h){const p=(0,k.m9)(y);yield jt(!0,p,h);const{providerUserInfo:w}=yield jr(p.auth,{idToken:yield p.getIdToken(),deleteProvider:[h]}),S=ii(w||[]);return p.providerData=p.providerData.filter(N=>S.has(N.providerId)),S.has("phone")||(p.phoneNumber=null),yield p.auth._persistUserIfCurrent(p),p})).apply(this,arguments)}function Qs(y,h){return Yi.apply(this,arguments)}function Yi(){return(Yi=(0,g.Z)(function*(y,h,p=!1){const w=yield er(y,h._linkToIdToken(y.auth,yield y.getIdToken()),p);return cr._forOperation(y,"link",w)})).apply(this,arguments)}function jt(y,h,p){return Xo.apply(this,arguments)}function Xo(){return(Xo=(0,g.Z)(function*(y,h,p){yield Zt(h);const S=!1===y?"provider-already-linked":"no-such-provider";U(ii(h.providerData).has(p)===y,h.auth,S)})).apply(this,arguments)}function Js(y,h){return tu.apply(this,arguments)}function tu(){return(tu=(0,g.Z)(function*(y,h,p=!1){var w;const{auth:S}=y,N="reauthenticate";try{const W=yield er(y,Lh(S,N,h,y),p);U(W.idToken,S,"internal-error");const ue=st(W.idToken);U(ue,S,"internal-error");const{sub:Fe}=ue;return U(y.uid===Fe,S,"user-mismatch"),cr._forOperation(y,N,W)}catch(W){throw"auth/user-not-found"===(null===(w=W)||void 0===w?void 0:w.code)&&xe(S,"user-mismatch"),W}})).apply(this,arguments)}function yi(y,h){return nu.apply(this,arguments)}function nu(){return(nu=(0,g.Z)(function*(y,h,p=!1){const w="signIn",S=yield Lh(y,w,h),N=yield cr._fromIdTokenResponse(y,w,S);return p||(yield y._updateCurrentUser(N.user)),N})).apply(this,arguments)}function yn(y,h){return It.apply(this,arguments)}function It(){return(It=(0,g.Z)(function*(y,h){return yi(fn(y),h)})).apply(this,arguments)}function ru(y,h){return Vh.apply(this,arguments)}function Vh(){return(Vh=(0,g.Z)(function*(y,h){const p=(0,k.m9)(y);return yield jt(!1,p,h.providerId),Qs(p,h)})).apply(this,arguments)}function iu(y,h){return su.apply(this,arguments)}function su(){return(su=(0,g.Z)(function*(y,h){return Js((0,k.m9)(y),h)})).apply(this,arguments)}function yl(y,h){return Qi.apply(this,arguments)}function Qi(){return(Qi=(0,g.Z)(function*(y,h){return Ur(y,"POST","/v1/accounts:signInWithCustomToken",Ot(y,h))})).apply(this,arguments)}function ea(){return(ea=(0,g.Z)(function*(y,h){const p=fn(y),w=yield yl(p,{token:h,returnSecureToken:!0}),S=yield cr._fromIdTokenResponse(p,"signIn",w);return yield p._updateCurrentUser(S.user),S})).apply(this,arguments)}class Se{constructor(h,p){this.factorId=h,this.uid=p.mfaEnrollmentId,this.enrollmentTime=new Date(p.enrolledAt).toUTCString(),this.displayName=p.displayName}static _fromServerResponse(h,p){return"phoneInfo"in p?Ft._fromServerResponse(h,p):xe(h,"internal-error")}}class Ft extends Se{constructor(h){super("phone",h),this.phoneNumber=h.phoneInfo}static _fromServerResponse(h,p){return new Ft(p)}}function vl(y,h,p){var w;U((null===(w=p.url)||void 0===w?void 0:w.length)>0,y,"invalid-continue-uri"),U(typeof p.dynamicLinkDomain>"u"||p.dynamicLinkDomain.length>0,y,"invalid-dynamic-link-domain"),h.continueUrl=p.url,h.dynamicLinkDomain=p.dynamicLinkDomain,h.canHandleCodeInApp=p.handleCodeInApp,p.iOS&&(U(p.iOS.bundleId.length>0,y,"missing-ios-bundle-id"),h.iOSBundleId=p.iOS.bundleId),p.android&&(U(p.android.packageName.length>0,y,"missing-android-pkg-name"),h.androidInstallApp=p.android.installApp,h.androidMinimumVersionCode=p.android.minimumVersion,h.androidPackageName=p.android.packageName)}function vn(){return(vn=(0,g.Z)(function*(y,h,p){const w=(0,k.m9)(y),S={requestType:"PASSWORD_RESET",email:h};p&&vl(w,S,p),yield nr(w,S)})).apply(this,arguments)}function Eo(){return(Eo=(0,g.Z)(function*(y,h,p){yield Pn((0,k.m9)(y),{oobCode:h,newPassword:p})})).apply(this,arguments)}function ta(){return(ta=(0,g.Z)(function*(y,h){yield cl((0,k.m9)(y),{oobCode:h})})).apply(this,arguments)}function na(y,h){return El.apply(this,arguments)}function El(){return(El=(0,g.Z)(function*(y,h){const p=(0,k.m9)(y),w=yield Pn(p,{oobCode:h}),S=w.requestType;switch(U(S,p,"internal-error"),S){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":U(w.newEmail,p,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":U(w.mfaInfo,p,"internal-error");default:U(w.email,p,"internal-error")}let N=null;return w.mfaInfo&&(N=Se._fromServerResponse(fn(p),w.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===w.requestType?w.newEmail:w.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===w.requestType?w.email:w.newEmail)||null,multiFactorInfo:N},operation:S}})).apply(this,arguments)}function qc(){return(qc=(0,g.Z)(function*(y,h){const{data:p}=yield na((0,k.m9)(y),h);return p.email})).apply(this,arguments)}function wn(){return(wn=(0,g.Z)(function*(y,h,p){const w=fn(y),S=yield wo(w,{returnSecureToken:!0,email:h,password:p}),N=yield cr._fromIdTokenResponse(w,"signIn",S);return yield w._updateCurrentUser(N.user),N})).apply(this,arguments)}function eo(){return(eo=(0,g.Z)(function*(y,h,p){const w=(0,k.m9)(y),S={requestType:"EMAIL_SIGNIN",email:h};U(p.handleCodeInApp,w,"argument-error"),p&&vl(w,S,p),yield Ya(w,S)})).apply(this,arguments)}function ra(){return(ra=(0,g.Z)(function*(y,h,p){const w=(0,k.m9)(y),S=Mi.credentialWithLink(h,p||Oe());return U(S._tenantId===(w.tenantId||null),w,"tenant-id-mismatch"),yn(w,S)})).apply(this,arguments)}function zp(y,h){return Dl.apply(this,arguments)}function Dl(){return(Dl=(0,g.Z)(function*(y,h){return Xt(y,"POST","/v1/accounts:createAuthUri",Ot(y,h))})).apply(this,arguments)}function ia(){return(ia=(0,g.Z)(function*(y,h){const w={identifier:h,continueUri:ct()?Oe():"http://localhost"},{signinMethods:S}=yield zp((0,k.m9)(y),w);return S||[]})).apply(this,arguments)}function sa(){return(sa=(0,g.Z)(function*(y,h){const p=(0,k.m9)(y),S={requestType:"VERIFY_EMAIL",idToken:yield y.getIdToken()};h&&vl(p.auth,S,h);const{email:N}=yield lr(p.auth,S);N!==y.email&&(yield y.reload())})).apply(this,arguments)}function uu(){return(uu=(0,g.Z)(function*(y,h,p){const w=(0,k.m9)(y),N={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield y.getIdToken(),newEmail:h};p&&vl(w.auth,N,p);const{email:W}=yield hl(w.auth,N);W!==y.email&&(yield y.reload())})).apply(this,arguments)}function lu(y,h){return Sl.apply(this,arguments)}function Sl(){return(Sl=(0,g.Z)(function*(y,h){return Xt(y,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function xl(){return(xl=(0,g.Z)(function*(y,{displayName:h,photoURL:p}){if(void 0===h&&void 0===p)return;const w=(0,k.m9)(y),N={idToken:yield w.getIdToken(),displayName:h,photoUrl:p,returnSecureToken:!0},W=yield er(w,lu(w.auth,N));w.displayName=W.displayName||null,w.photoURL=W.photoUrl||null;const ue=w.providerData.find(({providerId:Fe})=>"password"===Fe);ue&&(ue.displayName=w.displayName,ue.photoURL=w.photoURL),yield w._updateTokensIfNecessary(W)})).apply(this,arguments)}function no(y,h,p){return cu.apply(this,arguments)}function cu(){return(cu=(0,g.Z)(function*(y,h,p){const{auth:w}=y,N={idToken:yield y.getIdToken(),returnSecureToken:!0};h&&(N.email=h),p&&(N.password=p);const W=yield er(y,rn(w,N));yield y._updateTokensIfNecessary(W,!0)})).apply(this,arguments)}class Hr{constructor(h,p,w={}){this.isNewUser=h,this.providerId=p,this.profile=w}}class cn extends Hr{constructor(h,p,w,S){super(h,p,w),this.username=S}}class Kc extends Hr{constructor(h,p){super(h,"facebook.com",p)}}class Ml extends cn{constructor(h,p){super(h,"github.com",p,"string"==typeof p?.login?p?.login:null)}}class Uh extends Hr{constructor(h,p){super(h,"google.com",p)}}class Rl extends cn{constructor(h,p,w){super(h,"twitter.com",p,w)}}function du(y){const{user:h,_tokenResponse:p}=y;return h.isAnonymous&&!p?{providerId:null,isNewUser:!1,profile:null}:function zn(y){var h,p;if(!y)return null;const{providerId:w}=y,S=y.rawUserInfo?JSON.parse(y.rawUserInfo):{},N=y.isNewUser||"identitytoolkit#SignupNewUserResponse"===y.kind;if(!w&&y?.idToken){const W=null===(p=null===(h=st(y.idToken))||void 0===h?void 0:h.firebase)||void 0===p?void 0:p.sign_in_provider;if(W)return new Hr(N,"anonymous"!==W&&"custom"!==W?W:null)}if(!w)return null;switch(w){case"facebook.com":return new Kc(N,S);case"github.com":return new Ml(N,S);case"google.com":return new Uh(N,S);case"twitter.com":return new Rl(N,S,y.screenName||null);case"custom":case"anonymous":return new Hr(N,null);default:return new Hr(N,w,S)}}(p)}class ro{constructor(h,p){this.type=h,this.credential=p}static _fromIdtoken(h){return new ro("enroll",h)}static _fromMfaPendingCredential(h){return new ro("signin",h)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(h){var p,w;if(h?.multiFactorSession){if(null!==(p=h.multiFactorSession)&&void 0!==p&&p.pendingCredential)return ro._fromMfaPendingCredential(h.multiFactorSession.pendingCredential);if(null!==(w=h.multiFactorSession)&&void 0!==w&&w.idToken)return ro._fromIdtoken(h.multiFactorSession.idToken)}return null}}class hu{constructor(h,p,w){this.session=h,this.hints=p,this.signInResolver=w}static _fromError(h,p){const w=fn(h),S=p.customData._serverResponse,N=(S.mfaInfo||[]).map(ue=>Se._fromServerResponse(w,ue));U(S.mfaPendingCredential,w,"internal-error");const W=ro._fromMfaPendingCredential(S.mfaPendingCredential);return new hu(W,N,function(){var ue=(0,g.Z)(function*(Fe){const Qe=yield Fe._process(w,W);delete S.mfaInfo,delete S.mfaPendingCredential;const gt=Object.assign(Object.assign({},S),{idToken:Qe.idToken,refreshToken:Qe.refreshToken});switch(p.operationType){case"signIn":const pt=yield cr._fromIdTokenResponse(w,p.operationType,gt);return yield w._updateCurrentUser(pt.user),pt;case"reauthenticate":return U(p.user,w,"internal-error"),cr._forOperation(p.user,p.operationType,gt);default:xe(w,"internal-error")}});return function(Fe){return ue.apply(this,arguments)}}())}resolveSignIn(h){var p=this;return(0,g.Z)(function*(){return p.signInResolver(h)})()}}function fu(y,h){return Xt(y,"POST","/v2/accounts/mfaEnrollment:start",Ot(y,h))}class Bh{constructor(h){this.user=h,this.enrolledFactors=[],h._onReload(p=>{p.mfaInfo&&(this.enrolledFactors=p.mfaInfo.map(w=>Se._fromServerResponse(h.auth,w)))})}static _fromUser(h){return new Bh(h)}getSession(){var h=this;return(0,g.Z)(function*(){return ro._fromIdtoken(yield h.user.getIdToken())})()}enroll(h,p){var w=this;return(0,g.Z)(function*(){const S=h,N=yield w.getSession(),W=yield er(w.user,S._process(w.user.auth,N,p));return yield w.user._updateTokensIfNecessary(W),w.user.reload()})()}unenroll(h){var p=this;return(0,g.Z)(function*(){var w;const S="string"==typeof h?h:h.uid,N=yield p.user.getIdToken(),W=yield er(p.user,function Jc(y,h){return Xt(y,"POST","/v2/accounts/mfaEnrollment:withdraw",Ot(y,h))}(p.user.auth,{idToken:N,mfaEnrollmentId:S}));p.enrolledFactors=p.enrolledFactors.filter(({uid:ue})=>ue!==S),yield p.user._updateTokensIfNecessary(W);try{yield p.user.reload()}catch(ue){if("auth/user-token-expired"!==(null===(w=ue)||void 0===w?void 0:w.code))throw ue}})()}}const Co=new WeakMap,io="__sak";class gu{constructor(h,p){this.storageRetriever=h,this.type=p}_isAvailable(){try{return this.storage?(this.storage.setItem(io,"1"),this.storage.removeItem(io),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(h,p){return this.storage.setItem(h,JSON.stringify(p)),Promise.resolve()}_get(h){const p=this.storage.getItem(h);return Promise.resolve(p?JSON.parse(p):null)}_remove(h){return this.storage.removeItem(h),Promise.resolve()}get storage(){return this.storageRetriever()}}const aa=(()=>{class y extends gu{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(p,w)=>this.onStorageEvent(p,w),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function oa(){const y=(0,k.z$)();return Nn(y)||Qt(y)}()&&function hn(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=qs(),this._shouldAllowMigration=!0}forAllChangedKeys(p){for(const w of Object.keys(this.listeners)){const S=this.storage.getItem(w),N=this.localCache[w];S!==N&&p(w,N,S)}}onStorageEvent(p,w=!1){if(!p.key)return void this.forAllChangedKeys((ue,Fe,Qe)=>{this.notifyListeners(ue,Qe)});const S=p.key;if(w?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const ue=this.storage.getItem(S);if(p.newValue!==ue)null!==p.newValue?this.storage.setItem(S,p.newValue):this.storage.removeItem(S);else if(this.localCache[S]===p.newValue&&!w)return}const N=()=>{const ue=this.storage.getItem(S);!w&&this.localCache[S]===ue||this.notifyListeners(S,ue)},W=this.storage.getItem(S);!function Hn(){return(0,k.w1)()&&10===document.documentMode}()||W===p.newValue||p.newValue===p.oldValue?N():setTimeout(N,10)}notifyListeners(p,w){this.localCache[p]=w;const S=this.listeners[p];if(S)for(const N of Array.from(S))N(w&&JSON.parse(w))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((p,w,S)=>{this.onStorageEvent(new StorageEvent("storage",{key:p,oldValue:w,newValue:S}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(p,w){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[p]||(this.listeners[p]=new Set,this.localCache[p]=this.storage.getItem(p)),this.listeners[p].add(w)}_removeListener(p,w){this.listeners[p]&&(this.listeners[p].delete(w),0===this.listeners[p].size&&delete this.listeners[p]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(p,w){var S=()=>super._set,N=this;return(0,g.Z)(function*(){yield S().call(N,p,w),N.localCache[p]=JSON.stringify(w)})()}_get(p){var w=()=>super._get,S=this;return(0,g.Z)(function*(){const N=yield w().call(S,p);return S.localCache[p]=JSON.stringify(N),N})()}_remove(p){var w=()=>super._remove,S=this;return(0,g.Z)(function*(){yield w().call(S,p),delete S.localCache[p]})()}}return y.type="LOCAL",y})(),Ni=(()=>{class y extends gu{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(p,w){}_removeListener(p,w){}}return y.type="SESSION",y})();let td=(()=>{class y{constructor(p){this.eventTarget=p,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(p){const w=this.receivers.find(N=>N.isListeningto(p));if(w)return w;const S=new y(p);return this.receivers.push(S),S}isListeningto(p){return this.eventTarget===p}handleEvent(p){var w=this;return(0,g.Z)(function*(){const S=p,{eventId:N,eventType:W,data:ue}=S.data,Fe=w.handlersMap[W];if(!Fe?.size)return;S.ports[0].postMessage({status:"ack",eventId:N,eventType:W});const Qe=Array.from(Fe).map(function(){var pt=(0,g.Z)(function*(qn){return qn(S.origin,ue)});return function(qn){return pt.apply(this,arguments)}}()),gt=yield function la(y){return Promise.all(y.map(function(){var h=(0,g.Z)(function*(p){try{return{fulfilled:!0,value:yield p}}catch(w){return{fulfilled:!1,reason:w}}});return function(p){return h.apply(this,arguments)}}()))}(Qe);S.ports[0].postMessage({status:"done",eventId:N,eventType:W,response:gt})})()}_subscribe(p,w){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[p]||(this.handlersMap[p]=new Set),this.handlersMap[p].add(w)}_unsubscribe(p,w){this.handlersMap[p]&&w&&this.handlersMap[p].delete(w),(!w||0===this.handlersMap[p].size)&&delete this.handlersMap[p],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return y.receivers=[],y})();function ca(y="",h=10){let p="";for(let w=0;w<h;w++)p+=Math.floor(10*Math.random());return y+p}class Ol{constructor(h){this.target=h,this.handlers=new Set}removeMessageHandler(h){h.messageChannel&&(h.messageChannel.port1.removeEventListener("message",h.onMessage),h.messageChannel.port1.close()),this.handlers.delete(h)}_send(h,p,w=50){var S=this;return(0,g.Z)(function*(){const N=typeof MessageChannel<"u"?new MessageChannel:null;if(!N)throw new Error("connection_unavailable");let W,ue;return new Promise((Fe,Qe)=>{const gt=ca("",20);N.port1.start();const pt=setTimeout(()=>{Qe(new Error("unsupported_event"))},w);ue={messageChannel:N,onMessage(qn){const as=qn;if(as.data.eventId===gt)switch(as.data.status){case"ack":clearTimeout(pt),W=setTimeout(()=>{Qe(new Error("timeout"))},3e3);break;case"done":clearTimeout(W),Fe(as.data.response);break;default:clearTimeout(pt),clearTimeout(W),Qe(new Error("invalid_response"))}}},S.handlers.add(ue),N.port1.addEventListener("message",ue.onMessage),S.target.postMessage({eventType:h,eventId:gt,data:p},[N.port2])}).finally(()=>{ue&&S.removeMessageHandler(ue)})})()}}function An(){return window}function mu(){return typeof An().WorkerGlobalScope<"u"&&"function"==typeof An().importScripts}function da(){return(da=(0,g.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const xs="firebaseLocalStorageDb",Ms="firebaseLocalStorage",kl="fbase_key";class oo{constructor(h){this.request=h}toPromise(){return new Promise((h,p)=>{this.request.addEventListener("success",()=>{h(this.request.result)}),this.request.addEventListener("error",()=>{p(this.request.error)})})}}function ha(y,h){return y.transaction([Ms],h?"readwrite":"readonly").objectStore(Ms)}function So(){const y=indexedDB.open(xs,1);return new Promise((h,p)=>{y.addEventListener("error",()=>{p(y.error)}),y.addEventListener("upgradeneeded",()=>{const w=y.result;try{w.createObjectStore(Ms,{keyPath:kl})}catch(S){p(S)}}),y.addEventListener("success",(0,g.Z)(function*(){const w=y.result;w.objectStoreNames.contains(Ms)?h(w):(w.close(),yield function rd(){const y=indexedDB.deleteDatabase(xs);return new oo(y).toPromise()}(),h(yield So()))}))})}function Xi(y,h,p){return Pl.apply(this,arguments)}function Pl(){return(Pl=(0,g.Z)(function*(y,h,p){const w=ha(y,!0).put({[kl]:h,value:p});return new oo(w).toPromise()})).apply(this,arguments)}function fa(){return(fa=(0,g.Z)(function*(y,h){const p=ha(y,!1).get(h),w=yield new oo(p).toPromise();return void 0===w?null:w.value})).apply(this,arguments)}function ao(y,h){const p=ha(y,!0).delete(h);return new oo(p).toPromise()}const Ao=(()=>{class y{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var p=this;return(0,g.Z)(function*(){return p.db||(p.db=yield So()),p.db})()}_withRetries(p){var w=this;return(0,g.Z)(function*(){let S=0;for(;;)try{const N=yield w._openDb();return yield p(N)}catch(N){if(S++>3)throw N;w.db&&(w.db.close(),w.db=void 0)}})()}initializeServiceWorkerMessaging(){var p=this;return(0,g.Z)(function*(){return mu()?p.initializeReceiver():p.initializeSender()})()}initializeReceiver(){var p=this;return(0,g.Z)(function*(){p.receiver=td._getInstance(function _u(){return mu()?self:null}()),p.receiver._subscribe("keyChanged",function(){var w=(0,g.Z)(function*(S,N){return{keyProcessed:(yield p._poll()).includes(N.key)}});return function(S,N){return w.apply(this,arguments)}}()),p.receiver._subscribe("ping",function(){var w=(0,g.Z)(function*(S,N){return["keyChanged"]});return function(S,N){return w.apply(this,arguments)}}())})()}initializeSender(){var p=this;return(0,g.Z)(function*(){var w,S;if(p.activeServiceWorker=yield function so(){return da.apply(this,arguments)}(),!p.activeServiceWorker)return;p.sender=new Ol(p.activeServiceWorker);const N=yield p.sender._send("ping",{},800);!N||(null===(w=N[0])||void 0===w?void 0:w.fulfilled)&&(null===(S=N[0])||void 0===S?void 0:S.value.includes("keyChanged"))&&(p.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(p){var w=this;return(0,g.Z)(function*(){if(w.sender&&w.activeServiceWorker&&function yu(){var y;return(null===(y=navigator?.serviceWorker)||void 0===y?void 0:y.controller)||null}()===w.activeServiceWorker)try{yield w.sender._send("keyChanged",{key:p},w.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,g.Z)(function*(){try{if(!indexedDB)return!1;const p=yield So();return yield Xi(p,io,"1"),yield ao(p,io),!0}catch{}return!1})()}_withPendingWrite(p){var w=this;return(0,g.Z)(function*(){w.pendingWrites++;try{yield p()}finally{w.pendingWrites--}})()}_set(p,w){var S=this;return(0,g.Z)(function*(){return S._withPendingWrite((0,g.Z)(function*(){return yield S._withRetries(N=>Xi(N,p,w)),S.localCache[p]=w,S.notifyServiceWorker(p)}))})()}_get(p){var w=this;return(0,g.Z)(function*(){const S=yield w._withRetries(N=>function vu(y,h){return fa.apply(this,arguments)}(N,p));return w.localCache[p]=S,S})()}_remove(p){var w=this;return(0,g.Z)(function*(){return w._withPendingWrite((0,g.Z)(function*(){return yield w._withRetries(S=>ao(S,p)),delete w.localCache[p],w.notifyServiceWorker(p)}))})()}_poll(){var p=this;return(0,g.Z)(function*(){const w=yield p._withRetries(W=>{const ue=ha(W,!1).getAll();return new oo(ue).toPromise()});if(!w)return[];if(0!==p.pendingWrites)return[];const S=[],N=new Set;for(const{fbase_key:W,value:ue}of w)N.add(W),JSON.stringify(p.localCache[W])!==JSON.stringify(ue)&&(p.notifyListeners(W,ue),S.push(W));for(const W of Object.keys(p.localCache))p.localCache[W]&&!N.has(W)&&(p.notifyListeners(W,null),S.push(W));return S})()}notifyListeners(p,w){this.localCache[p]=w;const S=this.listeners[p];if(S)for(const N of Array.from(S))N(w)}startPolling(){var p=this;this.stopPolling(),this.pollTimer=setInterval((0,g.Z)(function*(){return p._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(p,w){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[p]||(this.listeners[p]=new Set,this._get(p)),this.listeners[p].add(w)}_removeListener(p,w){this.listeners[p]&&(this.listeners[p].delete(w),0===this.listeners[p].size&&delete this.listeners[p]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return y.type="LOCAL",y})();function xo(y,h){return Xt(y,"POST","/v2/accounts/mfaSignIn:start",Ot(y,h))}function Rs(){return(Rs=(0,g.Z)(function*(y){return(yield Xt(y,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Ro(y){return new Promise((h,p)=>{const w=document.createElement("script");w.setAttribute("src",y),w.onload=h,w.onerror=S=>{const N=ve("internal-error");N.customData=S,p(N)},w.type="text/javascript",w.charset="UTF-8",function Mo(){var y,h;return null!==(h=null===(y=document.getElementsByTagName("head"))||void 0===y?void 0:y[0])&&void 0!==h?h:document}().appendChild(w)})}function Iu(y){return`__${y}${Math.floor(1e6*Math.random())}`}const pa=1e12;class an{constructor(h){this.auth=h,this.counter=pa,this._widgets=new Map}render(h,p){const w=this.counter;return this._widgets.set(w,new qp(h,this.auth.name,p||{})),this.counter++,w}reset(h){var p;const w=h||pa;null===(p=this._widgets.get(w))||void 0===p||p.delete(),this._widgets.delete(w)}getResponse(h){var p;return(null===(p=this._widgets.get(h||pa))||void 0===p?void 0:p.getResponse())||""}execute(h){var p=this;return(0,g.Z)(function*(){var w;return null===(w=p._widgets.get(h||pa))||void 0===w||w.execute(),""})()}}class qp{constructor(h,p,w){this.params=w,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const S="string"==typeof h?document.getElementById(h):h;U(S,"argument-error",{appName:p}),this.container=S,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Dy(y){const h=[],p="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let w=0;w<y;w++)h.push(p.charAt(Math.floor(Math.random()*p.length)));return h.join("")}(50);const{callback:h,"expired-callback":p}=this.params;if(h)try{h(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,p)try{p()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Wp=Iu("rcb"),Cy=new tn(3e4,6e4);class jh{constructor(){var h;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(h=An().grecaptcha)||void 0===h||!h.render)}load(h,p=""){return U(function l0(y){return y.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(y)}(p),h,"argument-error"),this.shouldResolveImmediately(p)?Promise.resolve(An().grecaptcha):new Promise((w,S)=>{const N=An().setTimeout(()=>{S(ve(h,"network-request-failed"))},Cy.get());An()[Wp]=()=>{An().clearTimeout(N),delete An()[Wp];const ue=An().grecaptcha;if(!ue)return void S(ve(h,"internal-error"));const Fe=ue.render;ue.render=(Qe,gt)=>{const pt=Fe(Qe,gt);return this.counter++,pt},this.hostLanguage=p,w(ue)},Ro(`https://www.google.com/recaptcha/api.js??${(0,k.xO)({onload:Wp,render:"explicit",hl:p})}`).catch(()=>{clearTimeout(N),S(ve(h,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(h){var p;return!(null===(p=An().grecaptcha)||void 0===p||!p.render)&&(h===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Ll{load(h){return(0,g.Z)(function*(){return new an(h)})()}clearedOneInstance(){}}const Sy="recaptcha",Ay={theme:"light",type:"image"};class ir{constructor(h,p=Object.assign({},Ay),w){this.parameters=p,this.type=Sy,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=fn(w),this.isInvisible="invisible"===this.parameters.size,U(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const S="string"==typeof h?document.getElementById(h):h;U(S,this.auth,"argument-error"),this.container=S,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Ll:new jh,this.validateStartingState()}verify(){var h=this;return(0,g.Z)(function*(){h.assertNotDestroyed();const p=yield h.render(),w=h.getAssertedRecaptcha();return w.getResponse(p)||new Promise(N=>{const W=ue=>{!ue||(h.tokenChangeListeners.delete(W),N(ue))};h.tokenChangeListeners.add(W),h.isInvisible&&w.execute(p)})})()}render(){try{this.assertNotDestroyed()}catch(h){return Promise.reject(h)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(h=>{throw this.renderPromise=null,h})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(h=>{this.container.removeChild(h)})}validateStartingState(){U(!this.parameters.sitekey,this.auth,"argument-error"),U(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),U(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(h){return p=>{if(this.tokenChangeListeners.forEach(w=>w(p)),"function"==typeof h)h(p);else if("string"==typeof h){const w=An()[h];"function"==typeof w&&w(p)}}}assertNotDestroyed(){U(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var h=this;return(0,g.Z)(function*(){if(yield h.init(),!h.widgetId){let p=h.container;if(!h.isInvisible){const w=document.createElement("div");p.appendChild(w),p=w}h.widgetId=h.getAssertedRecaptcha().render(p,h.parameters)}return h.widgetId})()}init(){var h=this;return(0,g.Z)(function*(){U(ct()&&!mu(),h.auth,"internal-error"),yield function zt(){let y=null;return new Promise(h=>{"complete"!==document.readyState?(y=()=>h(),window.addEventListener("load",y)):h()}).catch(h=>{throw y&&window.removeEventListener("load",y),h})}(),h.recaptcha=yield h._recaptchaLoader.load(h.auth,h.auth.languageCode||void 0);const p=yield function Gr(y){return Rs.apply(this,arguments)}(h.auth);U(p,h.auth,"internal-error"),h.parameters.sitekey=p})()}getAssertedRecaptcha(){return U(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class dr{constructor(h,p){this.verificationId=h,this.onConfirmation=p}confirm(h){const p=Ts._fromVerification(this.verificationId,h);return this.onConfirmation(p)}}function bu(){return(bu=(0,g.Z)(function*(y,h,p){const w=fn(y),S=yield wi(w,h,(0,k.m9)(p));return new dr(S,N=>yn(w,N))})).apply(this,arguments)}function vi(){return(vi=(0,g.Z)(function*(y,h,p){const w=(0,k.m9)(y);yield jt(!1,w,"phone");const S=yield wi(w.auth,h,(0,k.m9)(p));return new dr(S,N=>ru(w,N))})).apply(this,arguments)}function Oo(){return(Oo=(0,g.Z)(function*(y,h,p){const w=(0,k.m9)(y),S=yield wi(w.auth,h,(0,k.m9)(p));return new dr(S,N=>iu(w,N))})).apply(this,arguments)}function wi(y,h,p){return ts.apply(this,arguments)}function ts(){return(ts=(0,g.Z)(function*(y,h,p){var w;const S=yield p.verify();try{let N;if(U("string"==typeof S,y,"argument-error"),U(p.type===Sy,y,"argument-error"),N="string"==typeof h?{phoneNumber:h}:h,"session"in N){const W=N.session;if("phoneNumber"in N)return U("enroll"===W.type,y,"internal-error"),(yield fu(y,{idToken:W.credential,phoneEnrollmentInfo:{phoneNumber:N.phoneNumber,recaptchaToken:S}})).phoneSessionInfo.sessionInfo;{U("signin"===W.type,y,"internal-error");const ue=(null===(w=N.multiFactorHint)||void 0===w?void 0:w.uid)||N.multiFactorUid;return U(ue,y,"missing-multi-factor-info"),(yield xo(y,{mfaPendingCredential:W.credential,mfaEnrollmentId:ue,phoneSignInInfo:{recaptchaToken:S}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:W}=yield Bp(y,{phoneNumber:N.phoneNumber,recaptchaToken:S});return W}}finally{p._reset()}})).apply(this,arguments)}function ft(){return(ft=(0,g.Z)(function*(y,h){yield Qs((0,k.m9)(y),h)})).apply(this,arguments)}let Du=(()=>{class y{constructor(p){this.providerId=y.PROVIDER_ID,this.auth=fn(p)}verifyPhoneNumber(p,w){return wi(this.auth,p,(0,k.m9)(w))}static credential(p,w){return Ts._fromVerification(p,w)}static credentialFromResult(p){return y.credentialFromTaggedObject(p)}static credentialFromError(p){return y.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{phoneNumber:w,temporaryProof:S}=p;return w&&S?Ts._fromTokenResponse(w,S):null}}return y.PROVIDER_ID="phone",y.PHONE_SIGN_IN_METHOD="phone",y})();function lo(y,h){return h?ie(h):(U(y._popupRedirectResolver,y,"argument-error"),y._popupRedirectResolver)}class ga extends ur{constructor(h){super("custom","custom"),this.params=h}_getIdTokenResponse(h){return Gn(h,this._buildIdpRequest())}_linkToIdToken(h,p){return Gn(h,this._buildIdpRequest(p))}_getReauthenticationResolver(h){return Gn(h,this._buildIdpRequest())}_buildIdpRequest(h){const p={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return h&&(p.idToken=h),p}}function Mr(y){return yi(y.auth,new ga(y),y.bypassAuthState)}function ma(y){const{auth:h,user:p}=y;return U(p,h,"internal-error"),Js(p,new ga(y),y.bypassAuthState)}function ns(y){return Oi.apply(this,arguments)}function Oi(){return(Oi=(0,g.Z)(function*(y){const{auth:h,user:p}=y;return U(p,h,"internal-error"),Qs(p,new ga(y),y.bypassAuthState)})).apply(this,arguments)}class Rr{constructor(h,p,w,S,N=!1){this.auth=h,this.resolver=w,this.user=S,this.bypassAuthState=N,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(p)?p:[p]}execute(){var h=this;return new Promise(function(){var p=(0,g.Z)(function*(w,S){h.pendingPromise={resolve:w,reject:S};try{h.eventManager=yield h.resolver._initialize(h.auth),yield h.onExecution(),h.eventManager.registerConsumer(h)}catch(N){h.reject(N)}});return function(w,S){return p.apply(this,arguments)}}())}onAuthEvent(h){var p=this;return(0,g.Z)(function*(){const{urlResponse:w,sessionId:S,postBody:N,tenantId:W,error:ue,type:Fe}=h;if(ue)return void p.reject(ue);const Qe={auth:p.auth,requestUri:w,sessionId:S,tenantId:W||void 0,postBody:N||void 0,user:p.user,bypassAuthState:p.bypassAuthState};try{p.resolve(yield p.getIdpTask(Fe)(Qe))}catch(gt){p.reject(gt)}})()}onError(h){this.reject(h)}getIdpTask(h){switch(h){case"signInViaPopup":case"signInViaRedirect":return Mr;case"linkViaPopup":case"linkViaRedirect":return ns;case"reauthViaPopup":case"reauthViaRedirect":return ma;default:xe(this.auth,"internal-error")}}resolve(h){Z(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(h),this.unregisterAndCleanUp()}reject(h){Z(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(h),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Ul=new tn(2e3,1e4);function ya(){return(ya=(0,g.Z)(function*(y,h,p){const w=fn(y);Ue(y,h,Wi);const S=lo(w,p);return new qr(w,"signInViaPopup",h,S).executeNotNull()})).apply(this,arguments)}function id(){return(id=(0,g.Z)(function*(y,h,p){const w=(0,k.m9)(y);Ue(w.auth,h,Wi);const S=lo(w.auth,p);return new qr(w.auth,"reauthViaPopup",h,S,w).executeNotNull()})).apply(this,arguments)}function _a(){return(_a=(0,g.Z)(function*(y,h,p){const w=(0,k.m9)(y);Ue(w.auth,h,Wi);const S=lo(w.auth,p);return new qr(w.auth,"linkViaPopup",h,S,w).executeNotNull()})).apply(this,arguments)}let qr=(()=>{class y extends Rr{constructor(p,w,S,N,W){super(p,w,N,W),this.provider=S,this.authWindow=null,this.pollId=null,y.currentPopupAction&&y.currentPopupAction.cancel(),y.currentPopupAction=this}executeNotNull(){var p=this;return(0,g.Z)(function*(){const w=yield p.execute();return U(w,p.auth,"internal-error"),w})()}onExecution(){var p=this;return(0,g.Z)(function*(){Z(1===p.filter.length,"Popup operations only handle one event");const w=ca();p.authWindow=yield p.resolver._openPopup(p.auth,p.provider,p.filter[0],w),p.authWindow.associatedEvent=w,p.resolver._originValidation(p.auth).catch(S=>{p.reject(S)}),p.resolver._isIframeWebStorageSupported(p.auth,S=>{S||p.reject(ve(p.auth,"web-storage-unsupported"))}),p.pollUserCancellation()})()}get eventId(){var p;return(null===(p=this.authWindow)||void 0===p?void 0:p.associatedEvent)||null}cancel(){this.reject(ve(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,y.currentPopupAction=null}pollUserCancellation(){const p=()=>{var w,S;this.pollId=null!==(S=null===(w=this.authWindow)||void 0===w?void 0:w.window)&&void 0!==S&&S.closed?window.setTimeout(()=>{this.pollId=null,this.reject(ve(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(p,Ul.get())};p()}}return y.currentPopupAction=null,y})();const un=new Map;class ki extends Rr{constructor(h,p,w=!1){super(h,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],p,void 0,w),this.eventId=null}execute(){var h=()=>super.execute,p=this;return(0,g.Z)(function*(){let w=un.get(p.auth._key());if(!w){try{const N=(yield function Tu(y,h){return Ns.apply(this,arguments)}(p.resolver,p.auth))?yield h().call(p):null;w=()=>Promise.resolve(N)}catch(S){w=()=>Promise.reject(S)}un.set(p.auth._key(),w)}return p.bypassAuthState||un.set(p.auth._key(),()=>Promise.resolve(null)),w()})()}onAuthEvent(h){var p=()=>super.onAuthEvent,w=this;return(0,g.Z)(function*(){if("signInViaRedirect"===h.type)return p().call(w,h);if("unknown"!==h.type){if(h.eventId){const S=yield w.auth._redirectUserForId(h.eventId);if(S)return w.user=S,p().call(w,h);w.resolve(null)}}else w.resolve(null)})()}onExecution(){return(0,g.Z)(function*(){})()}cleanUp(){}}function Ns(){return(Ns=(0,g.Z)(function*(y,h){const p=jl(h),w=rs(y);if(!(yield w._isAvailable()))return!1;const S="true"===(yield w._get(p));return yield w._remove(p),S})).apply(this,arguments)}function Su(y,h){return Pi.apply(this,arguments)}function Pi(){return(Pi=(0,g.Z)(function*(y,h){return rs(y)._set(jl(h),"true")})).apply(this,arguments)}function co(y,h){un.set(y._key(),h)}function rs(y){return ie(y._redirectPersistence)}function jl(y){return $n("pendingRedirect",y.config.apiKey,y.name)}function D(){return(D=(0,g.Z)(function*(y,h,p){const w=fn(y);Ue(y,h,Wi);const S=lo(w,p);return yield Su(S,w),S._openRedirect(w,h,"signInViaRedirect")})).apply(this,arguments)}function F(){return(F=(0,g.Z)(function*(y,h,p){const w=(0,k.m9)(y);Ue(w.auth,h,Wi);const S=lo(w.auth,p);yield Su(S,w.auth);const N=yield dt(w);return S._openRedirect(w.auth,h,"reauthViaRedirect",N)})).apply(this,arguments)}function Ce(){return(Ce=(0,g.Z)(function*(y,h,p){const w=(0,k.m9)(y);Ue(w.auth,h,Wi);const S=lo(w.auth,p);yield jt(!1,w,h.providerId),yield Su(S,w.auth);const N=yield dt(w);return S._openRedirect(w.auth,h,"linkViaRedirect",N)})).apply(this,arguments)}function at(){return(at=(0,g.Z)(function*(y,h){return yield fn(y)._initializationPromise,yt(y,h,!1)})).apply(this,arguments)}function yt(y,h){return St.apply(this,arguments)}function St(){return(St=(0,g.Z)(function*(y,h,p=!1){const w=fn(y),S=lo(w,h),W=yield new ki(w,S,p).execute();return W&&!p&&(delete W.user._redirectEventId,yield w._persistUserIfCurrent(W.user),yield w._setRedirectUser(null,h)),W})).apply(this,arguments)}function dt(y){return pn.apply(this,arguments)}function pn(){return(pn=(0,g.Z)(function*(y){const h=ca(`${y.uid}:::`);return y._redirectEventId=h,yield y.auth._setRedirectUser(y),yield y.auth._persistUserIfCurrent(y),h})).apply(this,arguments)}class Os{constructor(h){this.auth=h,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(h){this.consumers.add(h),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,h)&&(this.sendToConsumer(this.queuedRedirectEvent,h),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(h){this.consumers.delete(h)}onEvent(h){if(this.hasEventBeenHandled(h))return!1;let p=!1;return this.consumers.forEach(w=>{this.isEventForConsumer(h,w)&&(p=!0,this.sendToConsumer(h,w),this.saveEventToCache(h))}),this.hasHandledPotentialRedirect||!function ho(y){switch(y.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return ks(y);default:return!1}}(h)||(this.hasHandledPotentialRedirect=!0,p||(this.queuedRedirectEvent=h,p=!0)),p}sendToConsumer(h,p){var w;if(h.error&&!ks(h)){const S=(null===(w=h.error.code)||void 0===w?void 0:w.split("auth/")[1])||"internal-error";p.onError(ve(this.auth,S))}else p.onAuthEvent(h)}isEventForConsumer(h,p){const w=null===p.eventId||!!h.eventId&&h.eventId===p.eventId;return p.filter.includes(h.type)&&w}hasEventBeenHandled(h){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(is(h))}saveEventToCache(h){this.cachedEventUids.add(is(h)),this.lastProcessedEventTime=Date.now()}}function is(y){return[y.type,y.eventId,y.sessionId,y.tenantId].filter(h=>h).join("-")}function ks({type:y,error:h}){return"unknown"===y&&"auth/no-auth-event"===h?.code}function ss(y){return bn.apply(this,arguments)}function bn(){return(bn=(0,g.Z)(function*(y,h={}){return Xt(y,"GET","/v1/projects",h)})).apply(this,arguments)}const Wr=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Ps=/^https?/;function xy(){return(xy=(0,g.Z)(function*(y){if(y.config.emulator)return;const{authorizedDomains:h}=yield ss(y);for(const p of h)try{if(My(p))return}catch{}xe(y,"unauthorized-domain")})).apply(this,arguments)}function My(y){const h=Oe(),{protocol:p,hostname:w}=new URL(h);if(y.startsWith("chrome-extension://")){const W=new URL(y);return""===W.hostname&&""===w?"chrome-extension:"===p&&y.replace("chrome-extension://","")===h.replace("chrome-extension://",""):"chrome-extension:"===p&&W.hostname===w}if(!Ps.test(p))return!1;if(Wr.test(y))return w===y;const S=y.replace(/\./g,"\\.");return new RegExp("^(.+\\."+S+"|"+S+")$","i").test(w)}const Zp=new tn(3e4,6e4);function ad(){const y=An().___jsl;if(y?.H)for(const h of Object.keys(y.H))if(y.H[h].r=y.H[h].r||[],y.H[h].L=y.H[h].L||[],y.H[h].r=[...y.H[h].L],y.CP)for(let p=0;p<y.CP.length;p++)y.CP[p]=null}let $l=null;function Gh(y){return $l=$l||function va(y){return new Promise((h,p)=>{var w,S,N;function W(){ad(),gapi.load("gapi.iframes",{callback:()=>{h(gapi.iframes.getContext())},ontimeout:()=>{ad(),p(ve(y,"network-request-failed"))},timeout:Zp.get()})}if(null!==(S=null===(w=An().gapi)||void 0===w?void 0:w.iframes)&&void 0!==S&&S.Iframe)h(gapi.iframes.getContext());else{if(null===(N=An().gapi)||void 0===N||!N.load){const ue=Iu("iframefcb");return An()[ue]=()=>{gapi.load?W():p(ve(y,"network-request-failed"))},Ro(`https://apis.google.com/js/api.js?onload=${ue}`).catch(Fe=>p(Fe))}W()}}).catch(h=>{throw $l=null,h})}(y),$l}const Yp=new tn(5e3,15e3),wD={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Qp=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function c0(y){const h=y.config;U(h.authDomain,y,"auth-domain-config-required");const p=h.emulator?Cn(h,"emulator/auth/iframe"):`https://${y.config.authDomain}/__/auth/iframe`,w={apiKey:h.apiKey,appName:y.name,v:oe.SDK_VERSION},S=Qp.get(y.config.apiHost);S&&(w.eid=S);const N=y._getFrameworks();return N.length&&(w.fw=N.join(",")),`${p}?${(0,k.xO)(w).slice(1)}`}function Hl(){return Hl=(0,g.Z)(function*(y){const h=yield Gh(y),p=An().gapi;return U(p,y,"internal-error"),h.open({where:document.body,url:c0(y),messageHandlersFilter:p.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:wD,dontclear:!0},w=>new Promise(function(){var S=(0,g.Z)(function*(N,W){yield w.restyle({setHideOnLeave:!1});const ue=ve(y,"network-request-failed"),Fe=An().setTimeout(()=>{W(ue)},Yp.get());function Qe(){An().clearTimeout(Fe),N(w)}w.ping(Qe).then(Qe,()=>{W(ue)})});return function(N,W){return S.apply(this,arguments)}}()))}),Hl.apply(this,arguments)}const zh={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Ea{constructor(h){this.window=h,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function xu(y,h,p,w,S,N){U(y.config.authDomain,y,"auth-domain-config-required"),U(y.config.apiKey,y,"invalid-api-key");const W={apiKey:y.config.apiKey,appName:y.name,authType:p,redirectUrl:w,v:oe.SDK_VERSION,eventId:S};if(h instanceof Wi){h.setDefaultLanguage(y.languageCode),W.providerId=h.providerId||"",(0,k.xb)(h.getCustomParameters())||(W.customParameters=JSON.stringify(h.getCustomParameters()));for(const[Fe,Qe]of Object.entries(N||{}))W[Fe]=Qe}if(h instanceof Ki){const Fe=h.getScopes().filter(Qe=>""!==Qe);Fe.length>0&&(W.scopes=Fe.join(","))}y.tenantId&&(W.tid=y.tenantId);const ue=W;for(const Fe of Object.keys(ue))void 0===ue[Fe]&&delete ue[Fe];return`${function Jp({config:y}){return y.emulator?Cn(y,"emulator/auth/handler"):`https://${y.authDomain}/__/auth/handler`}(y)}?${(0,k.xO)(ue).slice(1)}`}const zl="webStorageSupport";class os extends class eg{constructor(h){this.factorId=h}_process(h,p,w){switch(p.type){case"enroll":return this._finalizeEnroll(h,p.credential,w);case"signin":return this._finalizeSignIn(h,p.credential);default:return ge("unexpected MultiFactorSessionType")}}}{constructor(h){super("phone"),this.credential=h}static _fromCredential(h){return new os(h)}_finalizeEnroll(h,p,w){return function pu(y,h){return Xt(y,"POST","/v2/accounts/mfaEnrollment:finalize",Ot(y,h))}(h,{idToken:p,displayName:w,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(h,p){return function Eu(y,h){return Xt(y,"POST","/v2/accounts/mfaSignIn:finalize",Ot(y,h))}(h,{mfaPendingCredential:p,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Mu=(()=>{class y{constructor(){}static assertion(p){return os._fromCredential(p)}}return y.FACTOR_ID="phone",y})();var ud="@firebase/auth";class ED{constructor(h){this.auth=h,this.internalListeners=new Map}getUid(){var h;return this.assertAuthConfigured(),(null===(h=this.auth.currentUser)||void 0===h?void 0:h.uid)||null}getToken(h){var p=this;return(0,g.Z)(function*(){return p.assertAuthConfigured(),yield p.auth._initializationPromise,p.auth.currentUser?{accessToken:yield p.auth.currentUser.getIdToken(h)}:null})()}addAuthTokenListener(h){if(this.assertAuthConfigured(),this.internalListeners.has(h))return;const p=this.auth.onIdTokenChanged(w=>{var S;h((null===(S=w)||void 0===S?void 0:S.stsTokenManager.accessToken)||null)});this.internalListeners.set(h,p),this.updateProactiveRefresh()}removeAuthTokenListener(h){this.assertAuthConfigured();const p=this.internalListeners.get(h);!p||(this.internalListeners.delete(h),p(),this.updateProactiveRefresh())}assertAuthConfigured(){U(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Fi(){return window}function qh(){return(qh=(0,g.Z)(function*(y,h,p){var w;const{BuildInfo:S}=Fi();Z(h.sessionId,"AuthEvent did not contain a session ID");const N=yield Kh(h.sessionId),W={};return Qt()?W.ibi=S.packageName:On()?W.apn=S.packageName:xe(y,"operation-not-supported-in-this-environment"),S.displayName&&(W.appDisplayName=S.displayName),W.sessionId=N,xu(y,p,h.type,void 0,null!==(w=h.eventId)&&void 0!==w?w:void 0,W)})).apply(this,arguments)}function fo(){return(fo=(0,g.Z)(function*(y){const{BuildInfo:h}=Fi(),p={};Qt()?p.iosBundleId=h.packageName:On()?p.androidPackageName=h.packageName:xe(y,"operation-not-supported-in-this-environment"),yield ss(y,p)})).apply(this,arguments)}function Po(){return(Po=(0,g.Z)(function*(y,h,p){const{cordova:w}=Fi();let S=()=>{};try{yield new Promise((N,W)=>{let ue=null;function Fe(){var pt;N();const qn=null===(pt=w.plugins.browsertab)||void 0===pt?void 0:pt.close;"function"==typeof qn&&qn(),"function"==typeof p?.close&&p.close()}function Qe(){ue||(ue=window.setTimeout(()=>{W(ve(y,"redirect-cancelled-by-user"))},2e3))}function gt(){"visible"===document?.visibilityState&&Qe()}h.addPassiveListener(Fe),document.addEventListener("resume",Qe,!1),On()&&document.addEventListener("visibilitychange",gt,!1),S=()=>{h.removePassiveListener(Fe),document.removeEventListener("resume",Qe,!1),document.removeEventListener("visibilitychange",gt,!1),ue&&window.clearTimeout(ue)}})}finally{S()}})).apply(this,arguments)}function Kh(y){return dd.apply(this,arguments)}function dd(){return(dd=(0,g.Z)(function*(y){const h=bD(y),p=yield crypto.subtle.digest("SHA-256",h);return Array.from(new Uint8Array(p)).map(S=>S.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function bD(y){if(Z(/[0-9a-zA-Z]+/.test(y),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(y);const h=new ArrayBuffer(y.length),p=new Uint8Array(h);for(let w=0;w<y.length;w++)p[w]=y.charCodeAt(w);return p}!function ID(y){(0,oe._registerComponent)(new le.wA("auth",(h,{options:p})=>{const w=h.getProvider("app").getImmediate(),S=h.getProvider("heartbeat"),{apiKey:N,authDomain:W}=w.options;return((ue,Fe)=>{U(N&&!N.includes(":"),"invalid-api-key",{appName:ue.name}),U(!W?.includes(":"),"argument-error",{appName:ue.name});const Qe={apiKey:N,authDomain:W,clientPlatform:y,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Es(y)},gt=new Rt(ue,Fe,Qe);return function Pe(y,h){const p=h?.persistence||[],w=(Array.isArray(p)?p:[p]).map(ie);h?.errorMap&&y._updateErrorMap(h.errorMap),y._initializeWithPersistence(w,h?.popupRedirectResolver)}(gt,p),gt})(w,S)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((h,p,w)=>{h.getProvider("auth-internal").initialize()})),(0,oe._registerComponent)(new le.wA("auth-internal",h=>{const p=fn(h.getProvider("auth").getImmediate());return new ED(p)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,oe.registerVersion)(ud,"0.20.6",function f0(y){switch(y){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(y)),(0,oe.registerVersion)(ud,"0.20.6","esm2017")}("Browser");class Py extends Os{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(h=>{this.resolveInialized=h})}addPassiveListener(h){this.passiveListeners.add(h)}removePassiveListener(h){this.passiveListeners.delete(h)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(h){return this.resolveInialized(),this.passiveListeners.forEach(p=>p(h)),super.onEvent(h)}initialized(){var h=this;return(0,g.Z)(function*(){yield h.initPromise})()}}function hd(y){return Zh.apply(this,arguments)}function Zh(){return(Zh=(0,g.Z)(function*(y){const h=yield ag()._get(Yh(y));return h&&(yield ag()._remove(Yh(y))),h})).apply(this,arguments)}function og(){const y=[],h="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let p=0;p<20;p++){const w=Math.floor(Math.random()*h.length);y.push(h.charAt(w))}return y.join("")}function ag(){return ie(aa)}function Yh(y){return $n("authEvent",y.config.apiKey,y.name)}function Ru(y){if(!y?.includes("?"))return{};const[h,...p]=y.split("?");return(0,k.zd)(p.join("?"))}function cg(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:ve("no-auth-event")}}function Yl(){var y;return(null===(y=self?.location)||void 0===y?void 0:y.protocol)||null}function Qh(y=(0,k.z$)()){return!("file:"!==Yl()&&"ionic:"!==Yl()&&"capacitor:"!==Yl()||!y.toLowerCase().match(/iphone|ipad|ipod|android/))}function Uy(){try{const y=self.localStorage,h=ca();if(y)return y.setItem(h,"1"),y.removeItem(h),!function Vy(y=(0,k.z$)()){return function hg(){return(0,k.w1)()&&11===document?.documentMode}()||function fg(y=(0,k.z$)()){return/Edge\/\d+/.test(y)}(y)}()||(0,k.hl)()}catch{return Fo()&&(0,k.hl)()}return!1}function Fo(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Ql(){return(function Fy(){return"http:"===Yl()||"https:"===Yl()}()||(0,k.ru)()||Qh())&&!function Ly(){return(0,k.b$)()||(0,k.UG)()}()&&Uy()&&!Fo()}function pg(){return Qh()&&typeof document<"u"}function pd(){return(pd=(0,g.Z)(function*(){return!!pg()&&new Promise(y=>{const h=setTimeout(()=>{y(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(h),y(!0)})})})).apply(this,arguments)}const oi={LOCAL:"local",NONE:"none",SESSION:"session"},Da=U,Jl="persistence";function gd(y){return Xl.apply(this,arguments)}function Xl(){return(Xl=(0,g.Z)(function*(y){yield y._initializationPromise;const h=Xh(),p=$n(Jl,y.config.apiKey,y.name);h&&h.setItem(p,y._getPersistence())})).apply(this,arguments)}function Xh(){var y;try{return(null===(y=function gg(){return typeof window<"u"?window:null}())||void 0===y?void 0:y.sessionStorage)||null}catch{return null}}const po=U;class Lo{constructor(){this.browserResolver=ie(class Xp{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Ni,this._completeRedirectFn=yt,this._overrideRedirectResult=co}_openPopup(h,p,w,S){var N=this;return(0,g.Z)(function*(){var W;Z(null===(W=N.eventManagers[h._key()])||void 0===W?void 0:W.manager,"_initialize() not called before _openPopup()");const ue=xu(h,p,w,Oe(),S);return function Ia(y,h,p,w=500,S=600){const N=Math.max((window.screen.availHeight-S)/2,0).toString(),W=Math.max((window.screen.availWidth-w)/2,0).toString();let ue="";const Fe=Object.assign(Object.assign({},zh),{width:w.toString(),height:S.toString(),top:N,left:W}),Qe=(0,k.z$)().toLowerCase();p&&(ue=Ai(Qe)?"_blank":p),dn(Qe)&&(h=h||"http://localhost",Fe.scrollbars="yes");const gt=Object.entries(Fe).reduce((qn,[as,Ou])=>`${qn}${as}=${Ou},`,"");if(function gi(y=(0,k.z$)()){var h;return Qt(y)&&!(null===(h=window.navigator)||void 0===h||!h.standalone)}(Qe)&&"_self"!==ue)return function Gl(y,h){const p=document.createElement("a");p.href=y,p.target=h;const w=document.createEvent("MouseEvent");w.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),p.dispatchEvent(w)}(h||"",ue),new Ea(null);const pt=window.open(h||"",ue,gt);U(pt,y,"popup-blocked");try{pt.focus()}catch{}return new Ea(pt)}(h,ue,ca())})()}_openRedirect(h,p,w,S){var N=this;return(0,g.Z)(function*(){return yield N._originValidation(h),function _i(y){An().location.href=y}(xu(h,p,w,Oe(),S)),new Promise(()=>{})})()}_initialize(h){const p=h._key();if(this.eventManagers[p]){const{manager:S,promise:N}=this.eventManagers[p];return S?Promise.resolve(S):(Z(N,"If manager is not set, promise should be"),N)}const w=this.initAndGetManager(h);return this.eventManagers[p]={promise:w},w.catch(()=>{delete this.eventManagers[p]}),w}initAndGetManager(h){var p=this;return(0,g.Z)(function*(){const w=yield function Ny(y){return Hl.apply(this,arguments)}(h),S=new Os(h);return w.register("authEvent",N=>(U(N?.authEvent,h,"invalid-auth-event"),{status:S.onEvent(N.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),p.eventManagers[h._key()]={manager:S},p.iframes[h._key()]=w,S})()}_isIframeWebStorageSupported(h,p){this.iframes[h._key()].send(zl,{type:zl},S=>{var N;const W=null===(N=S?.[0])||void 0===N?void 0:N[zl];void 0!==W&&p(!!W),xe(h,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(h){const p=h._key();return this.originValidationPromises[p]||(this.originValidationPromises[p]=function Hh(y){return xy.apply(this,arguments)}(h)),this.originValidationPromises[p]}get _shouldInitProactively(){return qs()||Nn()||Qt()}}),this.cordovaResolver=ie(class ug{constructor(){this._redirectPersistence=Ni,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=yt,this._overrideRedirectResult=co}_initialize(h){var p=this;return(0,g.Z)(function*(){const w=h._key();let S=p.eventManagers.get(w);return S||(S=new Py(h),p.eventManagers.set(w,S),p.attachCallbackListeners(h,S)),S})()}_openPopup(h){xe(h,"operation-not-supported-in-this-environment")}_openRedirect(h,p,w,S){var N=this;return(0,g.Z)(function*(){!function rg(y){var h,p,w,S,N,W,ue,Fe,Qe,gt;const pt=Fi();U("function"==typeof(null===(h=pt?.universalLinks)||void 0===h?void 0:h.subscribe),y,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),U(typeof(null===(p=pt?.BuildInfo)||void 0===p?void 0:p.packageName)<"u",y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),U("function"==typeof(null===(N=null===(S=null===(w=pt?.cordova)||void 0===w?void 0:w.plugins)||void 0===S?void 0:S.browsertab)||void 0===N?void 0:N.openUrl),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),U("function"==typeof(null===(Fe=null===(ue=null===(W=pt?.cordova)||void 0===W?void 0:W.plugins)||void 0===ue?void 0:ue.browsertab)||void 0===Fe?void 0:Fe.isAvailable),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),U("function"==typeof(null===(gt=null===(Qe=pt?.cordova)||void 0===Qe?void 0:Qe.InAppBrowser)||void 0===gt?void 0:gt.open),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(h);const W=yield N._initialize(h);yield W.initialized(),W.resetRedirect(),function Bl(){un.clear()}(),yield N._originValidation(h);const ue=function ig(y,h,p=null){return{type:h,eventId:p,urlResponse:null,sessionId:og(),postBody:null,tenantId:y.tenantId,error:ve(y,"no-auth-event")}}(h,w,S);yield function Wl(y,h){return ag()._set(Yh(y),h)}(h,ue);const Fe=yield function cd(y,h,p){return qh.apply(this,arguments)}(h,ue,p),Qe=yield function ng(y){const{cordova:h}=Fi();return new Promise(p=>{h.plugins.browsertab.isAvailable(w=>{let S=null;w?h.plugins.browsertab.openUrl(y):S=h.InAppBrowser.open(y,function ni(y=(0,k.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(y)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(y)}()?"_blank":"_system","location=yes"),p(S)})})}(Fe);return function Fs(y,h,p){return Po.apply(this,arguments)}(h,W,Qe)})()}_isIframeWebStorageSupported(h,p){throw new Error("Method not implemented.")}_originValidation(h){const p=h._key();return this.originValidationPromises[p]||(this.originValidationPromises[p]=function Wh(y){return fo.apply(this,arguments)}(h)),this.originValidationPromises[p]}attachCallbackListeners(h,p){const{universalLinks:w,handleOpenURL:S,BuildInfo:N}=Fi(),W=setTimeout((0,g.Z)(function*(){yield hd(h),p.onEvent(cg())}),500),ue=function(){var gt=(0,g.Z)(function*(pt){clearTimeout(W);const qn=yield hd(h);let as=null;qn&&pt?.url&&(as=function sg(y,h){var p,w;const S=function fd(y){const h=Ru(y),p=h.link?decodeURIComponent(h.link):void 0,w=Ru(p).link,S=h.deep_link_id?decodeURIComponent(h.deep_link_id):void 0;return Ru(S).link||S||w||p||y}(h);if(S.includes("/__/auth/callback")){const N=Ru(S),W=N.firebaseError?function Kl(y){try{return JSON.parse(y)}catch{return null}}(decodeURIComponent(N.firebaseError)):null,ue=null===(w=null===(p=W?.code)||void 0===p?void 0:p.split("auth/"))||void 0===w?void 0:w[1],Fe=ue?ve(ue):null;return Fe?{type:y.type,eventId:y.eventId,tenantId:y.tenantId,error:Fe,urlResponse:null,sessionId:null,postBody:null}:{type:y.type,eventId:y.eventId,tenantId:y.tenantId,sessionId:y.sessionId,urlResponse:S,postBody:null}}return null}(qn,pt.url)),p.onEvent(as||cg())});return function(qn){return gt.apply(this,arguments)}}();typeof w<"u"&&"function"==typeof w.subscribe&&w.subscribe(null,ue);const Fe=S,Qe=`${N.packageName.toLowerCase()}://`;Fi().handleOpenURL=function(){var gt=(0,g.Z)(function*(pt){if(pt.toLowerCase().startsWith(Qe)&&ue({url:pt}),"function"==typeof Fe)try{Fe(pt)}catch(qn){console.error(qn)}});return function(pt){return gt.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=Ni,this._completeRedirectFn=yt,this._overrideRedirectResult=co}_initialize(h){var p=this;return(0,g.Z)(function*(){return yield p.selectUnderlyingResolver(),p.assertedUnderlyingResolver._initialize(h)})()}_openPopup(h,p,w,S){var N=this;return(0,g.Z)(function*(){return yield N.selectUnderlyingResolver(),N.assertedUnderlyingResolver._openPopup(h,p,w,S)})()}_openRedirect(h,p,w,S){var N=this;return(0,g.Z)(function*(){return yield N.selectUnderlyingResolver(),N.assertedUnderlyingResolver._openRedirect(h,p,w,S)})()}_isIframeWebStorageSupported(h,p){this.assertedUnderlyingResolver._isIframeWebStorageSupported(h,p)}_originValidation(h){return this.assertedUnderlyingResolver._originValidation(h)}get _shouldInitProactively(){return pg()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return po(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var h=this;return(0,g.Z)(function*(){if(h.underlyingResolver)return;const p=yield function Jh(){return pd.apply(this,arguments)}();h.underlyingResolver=p?h.cordovaResolver:h.browserResolver})()}}function Nu(y){return y.unwrap()}function By(y){return tc(y)}function tc(y){const{_tokenResponse:h}=y instanceof k.ZR?y.customData:y;if(!h)return null;if(!(y instanceof k.ZR)&&"temporaryProof"in h&&"phoneNumber"in h)return Du.credentialFromResult(y);const p=h.providerId;if(!p||"password"===p)return null;let w;switch(p){case"google.com":w=Ja;break;case"facebook.com":w=Qo;break;case"github.com":w=ml;break;case"twitter.com":w=$r;break;default:const{oauthIdToken:S,oauthAccessToken:N,oauthTokenSecret:W,pendingToken:ue,nonce:Fe}=h;return N||W||S||ue?ue?p.startsWith("saml.")?Jo._create(p,ue):qi._fromParams({providerId:p,signInMethod:p,pendingToken:ue,idToken:S,accessToken:N}):new Ys(p).credential({idToken:S,accessToken:N,rawNonce:Fe}):null}return y instanceof k.ZR?w.credentialFromError(y):w.credentialFromResult(y)}function Ln(y,h){return h.catch(p=>{throw p instanceof k.ZR&&function yd(y,h){var p,w;const S=null===(p=h.customData)||void 0===p?void 0:p._tokenResponse;if("auth/multi-factor-auth-required"===(null===(w=h)||void 0===w?void 0:w.code))h.resolver=new jy(y,function En(y,h){var p;const w=(0,k.m9)(y),S=h;return U(h.customData.operationType,w,"argument-error"),U(null===(p=S.customData._serverResponse)||void 0===p?void 0:p.mfaPendingCredential,w,"argument-error"),hu._fromError(w,S)}(y,h));else if(S){const N=tc(h),W=h;N&&(W.credential=N,W.tenantId=S.tenantId||void 0,W.email=S.email||void 0,W.phoneNumber=S.phoneNumber||void 0)}}(y,p),p}).then(p=>{const S=p.user;return{operationType:p.operationType,credential:By(p),additionalUserInfo:du(p),user:go.getOrCreate(S)}})}function _d(y,h){return Ca.apply(this,arguments)}function Ca(){return(Ca=(0,g.Z)(function*(y,h){const p=yield h;return{verificationId:p.verificationId,confirm:w=>Ln(y,p.confirm(w))}})).apply(this,arguments)}class jy{constructor(h,p){this.resolver=p,this.auth=function ec(y){return y.wrapped()}(h)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(h){return Ln(Nu(this.auth),this.resolver.resolveSignIn(h))}}class go{constructor(h){this._delegate=h,this.multiFactor=function To(y){const h=(0,k.m9)(y);return Co.has(h)||Co.set(h,Bh._fromUser(h)),Co.get(h)}(h)}static getOrCreate(h){return go.USER_MAP.has(h)||go.USER_MAP.set(h,new go(h)),go.USER_MAP.get(h)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(h){return this._delegate.getIdTokenResult(h)}getIdToken(h){return this._delegate.getIdToken(h)}linkAndRetrieveDataWithCredential(h){return this.linkWithCredential(h)}linkWithCredential(h){var p=this;return(0,g.Z)(function*(){return Ln(p.auth,ru(p._delegate,h))})()}linkWithPhoneNumber(h,p){var w=this;return(0,g.Z)(function*(){return _d(w.auth,function zr(y,h,p){return vi.apply(this,arguments)}(w._delegate,h,p))})()}linkWithPopup(h){var p=this;return(0,g.Z)(function*(){return Ln(p.auth,function sd(y,h,p){return _a.apply(this,arguments)}(p._delegate,h,Lo))})()}linkWithRedirect(h){var p=this;return(0,g.Z)(function*(){return yield gd(fn(p.auth)),function J(y,h,p){return function ae(y,h,p){return Ce.apply(this,arguments)}(y,h,p)}(p._delegate,h,Lo)})()}reauthenticateAndRetrieveDataWithCredential(h){return this.reauthenticateWithCredential(h)}reauthenticateWithCredential(h){var p=this;return(0,g.Z)(function*(){return Ln(p.auth,iu(p._delegate,h))})()}reauthenticateWithPhoneNumber(h,p){return _d(this.auth,function Vl(y,h,p){return Oo.apply(this,arguments)}(this._delegate,h,p))}reauthenticateWithPopup(h){return Ln(this.auth,function Kp(y,h,p){return id.apply(this,arguments)}(this._delegate,h,Lo))}reauthenticateWithRedirect(h){var p=this;return(0,g.Z)(function*(){return yield gd(fn(p.auth)),function C(y,h,p){return function x(y,h,p){return F.apply(this,arguments)}(y,h,p)}(p._delegate,h,Lo)})()}sendEmailVerification(h){return function Cl(y,h){return sa.apply(this,arguments)}(this._delegate,h)}unlink(h){var p=this;return(0,g.Z)(function*(){return yield function xr(y,h){return eu.apply(this,arguments)}(p._delegate,h),p})()}updateEmail(h){return function Wc(y,h){return no((0,k.m9)(y),h,null)}(this._delegate,h)}updatePassword(h){return function to(y,h){return no((0,k.m9)(y),null,h)}(this._delegate,h)}updatePhoneNumber(h){return function hr(y,h){return ft.apply(this,arguments)}(this._delegate,h)}updateProfile(h){return function Al(y,h){return xl.apply(this,arguments)}(this._delegate,h)}verifyBeforeUpdateEmail(h,p){return function Tl(y,h,p){return uu.apply(this,arguments)}(this._delegate,h,p)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}go.USER_MAP=new WeakMap;const Ta=U;let Sa=(()=>{class y{constructor(p,w){if(this.app=p,w.isInitialized())return this._delegate=w.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:S}=p.options;Ta(S,"invalid-api-key",{appName:p.name}),Ta(S,"invalid-api-key",{appName:p.name});const N=typeof window<"u"?Lo:void 0;this._delegate=w.initialize({options:{persistence:ef(S,p.name),popupRedirectResolver:N}}),this._delegate._updateErrorMap(we),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?go.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(p){this._delegate.languageCode=p}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(p){this._delegate.tenantId=p}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(p,w){!function ul(y,h,p){const w=fn(y);U(w._canInitEmulator,w,"emulator-config-failed"),U(/^https?:\/\//.test(h),w,"invalid-emulator-scheme");const S=!!p?.disableWarnings,N=xi(h),{host:W,port:ue}=function kn(y){const h=xi(y),p=/(\/\/)?([^?#/]+)/.exec(y.substr(h.length));if(!p)return{host:"",port:null};const w=p[2].split("@").pop()||"",S=/^(\[[^\]]+\])(:|$)/.exec(w);if(S){const N=S[1];return{host:N,port:Is(w.substr(N.length+1))}}{const[N,W]=w.split(":");return{host:N,port:Is(W)}}}(h);w.config.emulator={url:`${N}//${W}${null===ue?"":`:${ue}`}/`},w.settings.appVerificationDisabledForTesting=!0,w.emulatorConfig=Object.freeze({host:W,port:ue,protocol:N.replace(":",""),options:Object.freeze({disableWarnings:S})}),S||function bs(){function y(){const h=document.createElement("p"),p=h.style;h.innerText="Running in emulator mode. Do not use with production credentials.",p.position="fixed",p.width="100%",p.backgroundColor="#ffffff",p.border=".1em solid #000000",p.color="#b50000",p.bottom="0px",p.left="0px",p.margin="0px",p.zIndex="10000",p.textAlign="center",h.classList.add("firebase-emulator-warning"),document.body.appendChild(h)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",y):y())}()}(this._delegate,p,w)}applyActionCode(p){return function si(y,h){return ta.apply(this,arguments)}(this._delegate,p)}checkActionCode(p){return na(this._delegate,p)}confirmPasswordReset(p,w){return function ou(y,h,p){return Eo.apply(this,arguments)}(this._delegate,p,w)}createUserWithEmailAndPassword(p,w){var S=this;return(0,g.Z)(function*(){return Ln(S._delegate,function Xs(y,h,p){return wn.apply(this,arguments)}(S._delegate,p,w))})()}fetchProvidersForEmail(p){return this.fetchSignInMethodsForEmail(p)}fetchSignInMethodsForEmail(p){return function au(y,h){return ia.apply(this,arguments)}(this._delegate,p)}isSignInWithEmailLink(p){return function Ji(y,h){return"EMAIL_SIGNIN"===Qa.parseLink(h)?.operation}(0,p)}getRedirectResult(){var p=this;return(0,g.Z)(function*(){Ta(Ql(),p._delegate,"operation-not-supported-in-this-environment");const w=yield function Be(y,h){return at.apply(this,arguments)}(p._delegate,Lo);return w?Ln(p._delegate,Promise.resolve(w)):{credential:null,user:null}})()}addFrameworkForLogging(p){!function Fn(y,h){fn(y)._logFramework(h)}(this._delegate,p)}onAuthStateChanged(p,w,S){const{next:N,error:W,complete:ue}=$y(p,w,S);return this._delegate.onAuthStateChanged(N,W,ue)}onIdTokenChanged(p,w,S){const{next:N,error:W,complete:ue}=$y(p,w,S);return this._delegate.onIdTokenChanged(N,W,ue)}sendSignInLinkToEmail(p,w){return function bl(y,h,p){return eo.apply(this,arguments)}(this._delegate,p,w)}sendPasswordResetEmail(p,w){return function wl(y,h,p){return vn.apply(this,arguments)}(this._delegate,p,w||void 0)}setPersistence(p){var w=this;return(0,g.Z)(function*(){let S;switch(function y0(y,h){Da(Object.values(oi).includes(h),y,"invalid-persistence-type"),(0,k.b$)()?Da(h!==oi.SESSION,y,"unsupported-persistence-type"):(0,k.UG)()?Da(h===oi.NONE,y,"unsupported-persistence-type"):Fo()?Da(h===oi.NONE||h===oi.LOCAL&&(0,k.hl)(),y,"unsupported-persistence-type"):Da(h===oi.NONE||Uy(),y,"unsupported-persistence-type")}(w._delegate,p),p){case oi.SESSION:S=Ni;break;case oi.LOCAL:S=(yield ie(Ao)._isAvailable())?Ao:aa;break;case oi.NONE:S=Yt;break;default:return xe("argument-error",{appName:w._delegate.name})}return w._delegate.setPersistence(S)})()}signInAndRetrieveDataWithCredential(p){return this.signInWithCredential(p)}signInAnonymously(){return Ln(this._delegate,function Fh(y){return _n.apply(this,arguments)}(this._delegate))}signInWithCredential(p){return Ln(this._delegate,yn(this._delegate,p))}signInWithCustomToken(p){return Ln(this._delegate,function _l(y,h){return ea.apply(this,arguments)}(this._delegate,p))}signInWithEmailAndPassword(p,w){return Ln(this._delegate,function Ri(y,h,p){return yn((0,k.m9)(y),Mi.credential(h,p))}(this._delegate,p,w))}signInWithEmailLink(p,w){return Ln(this._delegate,function Gp(y,h,p){return ra.apply(this,arguments)}(this._delegate,p,w))}signInWithPhoneNumber(p,w){return _d(this._delegate,function $h(y,h,p){return bu.apply(this,arguments)}(this._delegate,p,w))}signInWithPopup(p){var w=this;return(0,g.Z)(function*(){return Ta(Ql(),w._delegate,"operation-not-supported-in-this-environment"),Ln(w._delegate,function Cu(y,h,p){return ya.apply(this,arguments)}(w._delegate,p,Lo))})()}signInWithRedirect(p){var w=this;return(0,g.Z)(function*(){return Ta(Ql(),w._delegate,"operation-not-supported-in-this-environment"),yield gd(w._delegate),function In(y,h,p){return function od(y,h,p){return D.apply(this,arguments)}(y,h,p)}(w._delegate,p,Lo)})()}updateCurrentUser(p){return this._delegate.updateCurrentUser(p)}verifyPasswordResetCode(p){return function Il(y,h){return qc.apply(this,arguments)}(this._delegate,p)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return y.Persistence=oi,y})();function $y(y,h,p){let w=y;"function"!=typeof y&&({next:w,error:h,complete:p}=y);const S=w;return{next:W=>S(W&&go.getOrCreate(W)),error:h,complete:p}}function ef(y,h){const p=function md(y,h){const p=Xh();if(!p)return[];const w=$n(Jl,y,h);switch(p.getItem(w)){case oi.NONE:return[Yt];case oi.LOCAL:return[Ao,Ni];case oi.SESSION:return[Ni];default:return[]}}(y,h);if(typeof self<"u"&&!p.includes(Ao)&&p.push(Ao),typeof window<"u")for(const w of[aa,Ni])p.includes(w)||p.push(w);return p.includes(Yt)||p.push(Yt),p}class tf{constructor(){this.providerId="phone",this._delegate=new Du(Nu(ee.Z.auth()))}static credential(h,p){return Du.credential(h,p)}verifyPhoneNumber(h,p){return this._delegate.verifyPhoneNumber(h,p)}unwrap(){return this._delegate}}tf.PHONE_SIGN_IN_METHOD=Du.PHONE_SIGN_IN_METHOD,tf.PROVIDER_ID=Du.PROVIDER_ID;const mg=U;class vd{constructor(h,p,w=ee.Z.app()){var S;mg(null===(S=w.options)||void 0===S?void 0:S.apiKey,"invalid-api-key",{appName:w.name}),this._delegate=new ir(h,p,w.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function yg(y){y.INTERNAL.registerComponent(new le.wA("auth-compat",h=>{const p=h.getProvider("app-compat").getImmediate(),w=h.getProvider("auth");return new Sa(p,w)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:Mi,FacebookAuthProvider:Qo,GithubAuthProvider:ml,GoogleAuthProvider:Ja,OAuthProvider:Ys,SAMLAuthProvider:ri,PhoneAuthProvider:tf,PhoneMultiFactorGenerator:Mu,RecaptchaVerifier:vd,TwitterAuthProvider:$r,Auth:Sa,AuthCredential:ur,Error:k.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),y.registerVersion("@firebase/auth-compat","0.2.19")}(ee.Z)},9751:(ot,Ae,P)=>{P.d(Ae,{y:()=>he});var g=P(2961),ee=P(727),k=P(8822),oe=P(9635),re=P(2416),de=P(576),le=P(2806);let he=(()=>{class Y{constructor(Me){Me&&(this._subscribe=Me)}lift(Me){const we=new Y;return we.source=this,we.operator=Me,we}subscribe(Me,we,Je){const me=function $(Y){return Y&&Y instanceof g.Lv||function B(Y){return Y&&(0,de.m)(Y.next)&&(0,de.m)(Y.error)&&(0,de.m)(Y.complete)}(Y)&&(0,ee.Nn)(Y)}(Me)?Me:new g.Hp(Me,we,Je);return(0,le.x)(()=>{const{operator:fe,source:Ye}=this;me.add(fe?fe.call(me,Ye):Ye?this._subscribe(me):this._trySubscribe(me))}),me}_trySubscribe(Me){try{return this._subscribe(Me)}catch(we){Me.error(we)}}forEach(Me,we){return new(we=pe(we))((Je,me)=>{const fe=new g.Hp({next:Ye=>{try{Me(Ye)}catch(nt){me(nt),fe.unsubscribe()}},error:me,complete:Je});this.subscribe(fe)})}_subscribe(Me){var we;return null===(we=this.source)||void 0===we?void 0:we.subscribe(Me)}[k.L](){return this}pipe(...Me){return(0,oe.U)(Me)(this)}toPromise(Me){return new(Me=pe(Me))((we,Je)=>{let me;this.subscribe(fe=>me=fe,fe=>Je(fe),()=>we(me))})}}return Y.create=Le=>new Y(Le),Y})();function pe(Y){var Le;return null!==(Le=Y??re.v.Promise)&&void 0!==Le?Le:Promise}},7579:(ot,Ae,P)=>{P.d(Ae,{x:()=>le});var g=P(9751),ee=P(727);const oe=(0,P(3888).d)(pe=>function(){pe(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var re=P(8737),de=P(2806);let le=(()=>{class pe extends g.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift($){const Y=new he(this,this);return Y.operator=$,Y}_throwIfClosed(){if(this.closed)throw new oe}next($){(0,de.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const Y of this.currentObservers)Y.next($)}})}error($){(0,de.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=$;const{observers:Y}=this;for(;Y.length;)Y.shift().error($)}})}complete(){(0,de.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:$}=this;for(;$.length;)$.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var $;return(null===($=this.observers)||void 0===$?void 0:$.length)>0}_trySubscribe($){return this._throwIfClosed(),super._trySubscribe($)}_subscribe($){return this._throwIfClosed(),this._checkFinalizedStatuses($),this._innerSubscribe($)}_innerSubscribe($){const{hasError:Y,isStopped:Le,observers:Me}=this;return Y||Le?ee.Lc:(this.currentObservers=null,Me.push($),new ee.w0(()=>{this.currentObservers=null,(0,re.P)(Me,$)}))}_checkFinalizedStatuses($){const{hasError:Y,thrownError:Le,isStopped:Me}=this;Y?$.error(Le):Me&&$.complete()}asObservable(){const $=new g.y;return $.source=this,$}}return pe.create=(B,$)=>new he(B,$),pe})();class he extends le{constructor(B,$){super(),this.destination=B,this.source=$}next(B){var $,Y;null===(Y=null===($=this.destination)||void 0===$?void 0:$.next)||void 0===Y||Y.call($,B)}error(B){var $,Y;null===(Y=null===($=this.destination)||void 0===$?void 0:$.error)||void 0===Y||Y.call($,B)}complete(){var B,$;null===($=null===(B=this.destination)||void 0===B?void 0:B.complete)||void 0===$||$.call(B)}_subscribe(B){var $,Y;return null!==(Y=null===($=this.source)||void 0===$?void 0:$.subscribe(B))&&void 0!==Y?Y:ee.Lc}}},2961:(ot,Ae,P)=>{P.d(Ae,{Hp:()=>Je,Lv:()=>Y});var g=P(576),ee=P(727),k=P(2416),oe=P(7849);function re(){}const de=pe("C",void 0,void 0);function pe(xe,ve,Ie){return{kind:xe,value:ve,error:Ie}}var B=P(3410),$=P(2806);class Y extends ee.w0{constructor(ve){super(),this.isStopped=!1,ve?(this.destination=ve,(0,ee.Nn)(ve)&&ve.add(this)):this.destination=nt}static create(ve,Ie,Ue){return new Je(ve,Ie,Ue)}next(ve){this.isStopped?Ye(function he(xe){return pe("N",xe,void 0)}(ve),this):this._next(ve)}error(ve){this.isStopped?Ye(function le(xe){return pe("E",void 0,xe)}(ve),this):(this.isStopped=!0,this._error(ve))}complete(){this.isStopped?Ye(de,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(ve){this.destination.next(ve)}_error(ve){try{this.destination.error(ve)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Le=Function.prototype.bind;function Me(xe,ve){return Le.call(xe,ve)}class we{constructor(ve){this.partialObserver=ve}next(ve){const{partialObserver:Ie}=this;if(Ie.next)try{Ie.next(ve)}catch(Ue){me(Ue)}}error(ve){const{partialObserver:Ie}=this;if(Ie.error)try{Ie.error(ve)}catch(Ue){me(Ue)}else me(ve)}complete(){const{partialObserver:ve}=this;if(ve.complete)try{ve.complete()}catch(Ie){me(Ie)}}}class Je extends Y{constructor(ve,Ie,Ue){let je;if(super(),(0,g.m)(ve)||!ve)je={next:ve??void 0,error:Ie??void 0,complete:Ue??void 0};else{let U;this&&k.v.useDeprecatedNextContext?(U=Object.create(ve),U.unsubscribe=()=>this.unsubscribe(),je={next:ve.next&&Me(ve.next,U),error:ve.error&&Me(ve.error,U),complete:ve.complete&&Me(ve.complete,U)}):je=ve}this.destination=new we(je)}}function me(xe){k.v.useDeprecatedSynchronousErrorHandling?(0,$.O)(xe):(0,oe.h)(xe)}function Ye(xe,ve){const{onStoppedNotification:Ie}=k.v;Ie&&B.z.setTimeout(()=>Ie(xe,ve))}const nt={closed:!0,next:re,error:function fe(xe){throw xe},complete:re}},727:(ot,Ae,P)=>{P.d(Ae,{Lc:()=>de,w0:()=>re,Nn:()=>le});var g=P(576);const k=(0,P(3888).d)(pe=>function($){pe(this),this.message=$?`${$.length} errors occurred during unsubscription:\n${$.map((Y,Le)=>`${Le+1}) ${Y.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=$});var oe=P(8737);class re{constructor(B){this.initialTeardown=B,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let B;if(!this.closed){this.closed=!0;const{_parentage:$}=this;if($)if(this._parentage=null,Array.isArray($))for(const Me of $)Me.remove(this);else $.remove(this);const{initialTeardown:Y}=this;if((0,g.m)(Y))try{Y()}catch(Me){B=Me instanceof k?Me.errors:[Me]}const{_finalizers:Le}=this;if(Le){this._finalizers=null;for(const Me of Le)try{he(Me)}catch(we){B=B??[],we instanceof k?B=[...B,...we.errors]:B.push(we)}}if(B)throw new k(B)}}add(B){var $;if(B&&B!==this)if(this.closed)he(B);else{if(B instanceof re){if(B.closed||B._hasParent(this))return;B._addParent(this)}(this._finalizers=null!==($=this._finalizers)&&void 0!==$?$:[]).push(B)}}_hasParent(B){const{_parentage:$}=this;return $===B||Array.isArray($)&&$.includes(B)}_addParent(B){const{_parentage:$}=this;this._parentage=Array.isArray($)?($.push(B),$):$?[$,B]:B}_removeParent(B){const{_parentage:$}=this;$===B?this._parentage=null:Array.isArray($)&&(0,oe.P)($,B)}remove(B){const{_finalizers:$}=this;$&&(0,oe.P)($,B),B instanceof re&&B._removeParent(this)}}re.EMPTY=(()=>{const pe=new re;return pe.closed=!0,pe})();const de=re.EMPTY;function le(pe){return pe instanceof re||pe&&"closed"in pe&&(0,g.m)(pe.remove)&&(0,g.m)(pe.add)&&(0,g.m)(pe.unsubscribe)}function he(pe){(0,g.m)(pe)?pe():pe.unsubscribe()}},2416:(ot,Ae,P)=>{P.d(Ae,{v:()=>g});const g={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(ot,Ae,P)=>{P.d(Ae,{E:()=>ee});const ee=new(P(9751).y)(re=>re.complete())},8996:(ot,Ae,P)=>{P.d(Ae,{D:()=>ve});var g=P(8421),ee=P(5363),k=P(9468),de=P(9751),he=P(2202),pe=P(576),B=P(9672);function Y(Ie,Ue){if(!Ie)throw new Error("Iterable cannot be null");return new de.y(je=>{(0,B.f)(je,Ue,()=>{const U=Ie[Symbol.asyncIterator]();(0,B.f)(je,Ue,()=>{U.next().then(ge=>{ge.done?je.complete():je.next(ge.value)})},0,!0)})})}var Le=P(3670),Me=P(8239),we=P(1144),Je=P(6495),me=P(2206),fe=P(4532),Ye=P(3260);function ve(Ie,Ue){return Ue?function xe(Ie,Ue){if(null!=Ie){if((0,Le.c)(Ie))return function oe(Ie,Ue){return(0,g.Xf)(Ie).pipe((0,k.R)(Ue),(0,ee.Q)(Ue))}(Ie,Ue);if((0,we.z)(Ie))return function le(Ie,Ue){return new de.y(je=>{let U=0;return Ue.schedule(function(){U===Ie.length?je.complete():(je.next(Ie[U++]),je.closed||this.schedule())})})}(Ie,Ue);if((0,Me.t)(Ie))return function re(Ie,Ue){return(0,g.Xf)(Ie).pipe((0,k.R)(Ue),(0,ee.Q)(Ue))}(Ie,Ue);if((0,me.D)(Ie))return Y(Ie,Ue);if((0,Je.T)(Ie))return function $(Ie,Ue){return new de.y(je=>{let U;return(0,B.f)(je,Ue,()=>{U=Ie[he.h](),(0,B.f)(je,Ue,()=>{let ge,Z;try{({value:ge,done:Z}=U.next())}catch(X){return void je.error(X)}Z?je.complete():je.next(ge)},0,!0)}),()=>(0,pe.m)(U?.return)&&U.return()})}(Ie,Ue);if((0,Ye.L)(Ie))return function nt(Ie,Ue){return Y((0,Ye.Q)(Ie),Ue)}(Ie,Ue)}throw(0,fe.z)(Ie)}(Ie,Ue):(0,g.Xf)(Ie)}},8421:(ot,Ae,P)=>{P.d(Ae,{Xf:()=>Le});var g=P(655),ee=P(1144),k=P(8239),oe=P(9751),re=P(3670),de=P(2206),le=P(4532),he=P(6495),pe=P(3260),B=P(576),$=P(7849),Y=P(8822);function Le(xe){if(xe instanceof oe.y)return xe;if(null!=xe){if((0,re.c)(xe))return function Me(xe){return new oe.y(ve=>{const Ie=xe[Y.L]();if((0,B.m)(Ie.subscribe))return Ie.subscribe(ve);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(xe);if((0,ee.z)(xe))return function we(xe){return new oe.y(ve=>{for(let Ie=0;Ie<xe.length&&!ve.closed;Ie++)ve.next(xe[Ie]);ve.complete()})}(xe);if((0,k.t)(xe))return function Je(xe){return new oe.y(ve=>{xe.then(Ie=>{ve.closed||(ve.next(Ie),ve.complete())},Ie=>ve.error(Ie)).then(null,$.h)})}(xe);if((0,de.D)(xe))return fe(xe);if((0,he.T)(xe))return function me(xe){return new oe.y(ve=>{for(const Ie of xe)if(ve.next(Ie),ve.closed)return;ve.complete()})}(xe);if((0,pe.L)(xe))return function Ye(xe){return fe((0,pe.Q)(xe))}(xe)}throw(0,le.z)(xe)}function fe(xe){return new oe.y(ve=>{(function nt(xe,ve){var Ie,Ue,je,U;return(0,g.mG)(this,void 0,void 0,function*(){try{for(Ie=(0,g.KL)(xe);!(Ue=yield Ie.next()).done;)if(ve.next(Ue.value),ve.closed)return}catch(ge){je={error:ge}}finally{try{Ue&&!Ue.done&&(U=Ie.return)&&(yield U.call(Ie))}finally{if(je)throw je.error}}ve.complete()})})(xe,ve).catch(Ie=>ve.error(Ie))})}},6451:(ot,Ae,P)=>{P.d(Ae,{T:()=>de});var g=P(8189),ee=P(8421),k=P(515),oe=P(7669),re=P(8996);function de(...le){const he=(0,oe.yG)(le),pe=(0,oe._6)(le,1/0),B=le;return B.length?1===B.length?(0,ee.Xf)(B[0]):(0,g.J)(pe)((0,re.D)(B,he)):k.E}},5403:(ot,Ae,P)=>{P.d(Ae,{x:()=>ee});var g=P(2961);function ee(oe,re,de,le,he){return new k(oe,re,de,le,he)}class k extends g.Lv{constructor(re,de,le,he,pe,B){super(re),this.onFinalize=pe,this.shouldUnsubscribe=B,this._next=de?function($){try{de($)}catch(Y){re.error(Y)}}:super._next,this._error=he?function($){try{he($)}catch(Y){re.error(Y)}finally{this.unsubscribe()}}:super._error,this._complete=le?function(){try{le()}catch($){re.error($)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var re;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:de}=this;super.unsubscribe(),!de&&(null===(re=this.onFinalize)||void 0===re||re.call(this))}}}},4004:(ot,Ae,P)=>{P.d(Ae,{U:()=>k});var g=P(4482),ee=P(5403);function k(oe,re){return(0,g.e)((de,le)=>{let he=0;de.subscribe((0,ee.x)(le,pe=>{le.next(oe.call(re,pe,he++))}))})}},8189:(ot,Ae,P)=>{P.d(Ae,{J:()=>k});var g=P(5577),ee=P(4671);function k(oe=1/0){return(0,g.z)(ee.y,oe)}},5577:(ot,Ae,P)=>{P.d(Ae,{z:()=>he});var g=P(4004),ee=P(8421),k=P(4482),oe=P(9672),re=P(5403),le=P(576);function he(pe,B,$=1/0){return(0,le.m)(B)?he((Y,Le)=>(0,g.U)((Me,we)=>B(Y,Me,Le,we))((0,ee.Xf)(pe(Y,Le))),$):("number"==typeof B&&($=B),(0,k.e)((Y,Le)=>function de(pe,B,$,Y,Le,Me,we,Je){const me=[];let fe=0,Ye=0,nt=!1;const xe=()=>{nt&&!me.length&&!fe&&B.complete()},ve=Ue=>fe<Y?Ie(Ue):me.push(Ue),Ie=Ue=>{Me&&B.next(Ue),fe++;let je=!1;(0,ee.Xf)($(Ue,Ye++)).subscribe((0,re.x)(B,U=>{Le?.(U),Me?ve(U):B.next(U)},()=>{je=!0},void 0,()=>{if(je)try{for(fe--;me.length&&fe<Y;){const U=me.shift();we?(0,oe.f)(B,we,()=>Ie(U)):Ie(U)}xe()}catch(U){B.error(U)}}))};return pe.subscribe((0,re.x)(B,ve,()=>{nt=!0,xe()})),()=>{Je?.()}}(Y,Le,pe,$)))}},5363:(ot,Ae,P)=>{P.d(Ae,{Q:()=>oe});var g=P(9672),ee=P(4482),k=P(5403);function oe(re,de=0){return(0,ee.e)((le,he)=>{le.subscribe((0,k.x)(he,pe=>(0,g.f)(he,re,()=>he.next(pe),de),()=>(0,g.f)(he,re,()=>he.complete(),de),pe=>(0,g.f)(he,re,()=>he.error(pe),de)))})}},3099:(ot,Ae,P)=>{P.d(Ae,{B:()=>re});var g=P(8421),ee=P(7579),k=P(2961),oe=P(4482);function re(le={}){const{connector:he=(()=>new ee.x),resetOnError:pe=!0,resetOnComplete:B=!0,resetOnRefCountZero:$=!0}=le;return Y=>{let Le,Me,we,Je=0,me=!1,fe=!1;const Ye=()=>{Me?.unsubscribe(),Me=void 0},nt=()=>{Ye(),Le=we=void 0,me=fe=!1},xe=()=>{const ve=Le;nt(),ve?.unsubscribe()};return(0,oe.e)((ve,Ie)=>{Je++,!fe&&!me&&Ye();const Ue=we=we??he();Ie.add(()=>{Je--,0===Je&&!fe&&!me&&(Me=de(xe,$))}),Ue.subscribe(Ie),!Le&&Je>0&&(Le=new k.Hp({next:je=>Ue.next(je),error:je=>{fe=!0,Ye(),Me=de(nt,pe,je),Ue.error(je)},complete:()=>{me=!0,Ye(),Me=de(nt,B),Ue.complete()}}),(0,g.Xf)(ve).subscribe(Le))})(Y)}}function de(le,he,...pe){if(!0===he)return void le();if(!1===he)return;const B=new k.Hp({next:()=>{B.unsubscribe(),le()}});return he(...pe).subscribe(B)}},9468:(ot,Ae,P)=>{P.d(Ae,{R:()=>ee});var g=P(4482);function ee(k,oe=0){return(0,g.e)((re,de)=>{de.add(k.schedule(()=>re.subscribe(de),oe))})}},8505:(ot,Ae,P)=>{P.d(Ae,{b:()=>re});var g=P(576),ee=P(4482),k=P(5403),oe=P(4671);function re(de,le,he){const pe=(0,g.m)(de)||le||he?{next:de,error:le,complete:he}:de;return pe?(0,ee.e)((B,$)=>{var Y;null===(Y=pe.subscribe)||void 0===Y||Y.call(pe);let Le=!0;B.subscribe((0,k.x)($,Me=>{var we;null===(we=pe.next)||void 0===we||we.call(pe,Me),$.next(Me)},()=>{var Me;Le=!1,null===(Me=pe.complete)||void 0===Me||Me.call(pe),$.complete()},Me=>{var we;Le=!1,null===(we=pe.error)||void 0===we||we.call(pe,Me),$.error(Me)},()=>{var Me,we;Le&&(null===(Me=pe.unsubscribe)||void 0===Me||Me.call(pe)),null===(we=pe.finalize)||void 0===we||we.call(pe)}))}):oe.y}},4408:(ot,Ae,P)=>{P.d(Ae,{o:()=>re});var g=P(727);class ee extends g.w0{constructor(le,he){super()}schedule(le,he=0){return this}}const k={setInterval(de,le,...he){const{delegate:pe}=k;return pe?.setInterval?pe.setInterval(de,le,...he):setInterval(de,le,...he)},clearInterval(de){const{delegate:le}=k;return(le?.clearInterval||clearInterval)(de)},delegate:void 0};var oe=P(8737);class re extends ee{constructor(le,he){super(le,he),this.scheduler=le,this.work=he,this.pending=!1}schedule(le,he=0){if(this.closed)return this;this.state=le;const pe=this.id,B=this.scheduler;return null!=pe&&(this.id=this.recycleAsyncId(B,pe,he)),this.pending=!0,this.delay=he,this.id=this.id||this.requestAsyncId(B,this.id,he),this}requestAsyncId(le,he,pe=0){return k.setInterval(le.flush.bind(le,this),pe)}recycleAsyncId(le,he,pe=0){if(null!=pe&&this.delay===pe&&!1===this.pending)return he;k.clearInterval(he)}execute(le,he){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const pe=this._execute(le,he);if(pe)return pe;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(le,he){let B,pe=!1;try{this.work(le)}catch($){pe=!0,B=$||new Error("Scheduled action threw falsy error")}if(pe)return this.unsubscribe(),B}unsubscribe(){if(!this.closed){const{id:le,scheduler:he}=this,{actions:pe}=he;this.work=this.state=this.scheduler=null,this.pending=!1,(0,oe.P)(pe,this),null!=le&&(this.id=this.recycleAsyncId(he,le,null)),this.delay=null,super.unsubscribe()}}}},7565:(ot,Ae,P)=>{P.d(Ae,{v:()=>k});var g=P(6063);class ee{constructor(re,de=ee.now){this.schedulerActionCtor=re,this.now=de}schedule(re,de=0,le){return new this.schedulerActionCtor(this,re).schedule(le,de)}}ee.now=g.l.now;class k extends ee{constructor(re,de=ee.now){super(re,de),this.actions=[],this._active=!1,this._scheduled=void 0}flush(re){const{actions:de}=this;if(this._active)return void de.push(re);let le;this._active=!0;do{if(le=re.execute(re.state,re.delay))break}while(re=de.shift());if(this._active=!1,le){for(;re=de.shift();)re.unsubscribe();throw le}}}},4986:(ot,Ae,P)=>{P.d(Ae,{z:()=>k});var g=P(4408);const k=new(P(7565).v)(g.o)},6063:(ot,Ae,P)=>{P.d(Ae,{l:()=>g});const g={now:()=>(g.delegate||Date).now(),delegate:void 0}},3410:(ot,Ae,P)=>{P.d(Ae,{z:()=>g});const g={setTimeout(ee,k,...oe){const{delegate:re}=g;return re?.setTimeout?re.setTimeout(ee,k,...oe):setTimeout(ee,k,...oe)},clearTimeout(ee){const{delegate:k}=g;return(k?.clearTimeout||clearTimeout)(ee)},delegate:void 0}},2202:(ot,Ae,P)=>{P.d(Ae,{h:()=>ee});const ee=function g(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(ot,Ae,P)=>{P.d(Ae,{L:()=>g});const g="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(ot,Ae,P)=>{P.d(Ae,{_6:()=>de,jO:()=>oe,yG:()=>re});var g=P(576);function k(le){return le[le.length-1]}function oe(le){return(0,g.m)(k(le))?le.pop():void 0}function re(le){return function ee(le){return le&&(0,g.m)(le.schedule)}(k(le))?le.pop():void 0}function de(le,he){return"number"==typeof k(le)?le.pop():he}},8737:(ot,Ae,P)=>{function g(ee,k){if(ee){const oe=ee.indexOf(k);0<=oe&&ee.splice(oe,1)}}P.d(Ae,{P:()=>g})},3888:(ot,Ae,P)=>{function g(ee){const oe=ee(re=>{Error.call(re),re.stack=(new Error).stack});return oe.prototype=Object.create(Error.prototype),oe.prototype.constructor=oe,oe}P.d(Ae,{d:()=>g})},2806:(ot,Ae,P)=>{P.d(Ae,{O:()=>oe,x:()=>k});var g=P(2416);let ee=null;function k(re){if(g.v.useDeprecatedSynchronousErrorHandling){const de=!ee;if(de&&(ee={errorThrown:!1,error:null}),re(),de){const{errorThrown:le,error:he}=ee;if(ee=null,le)throw he}}else re()}function oe(re){g.v.useDeprecatedSynchronousErrorHandling&&ee&&(ee.errorThrown=!0,ee.error=re)}},9672:(ot,Ae,P)=>{function g(ee,k,oe,re=0,de=!1){const le=k.schedule(function(){oe(),de?ee.add(this.schedule(null,re)):this.unsubscribe()},re);if(ee.add(le),!de)return le}P.d(Ae,{f:()=>g})},4671:(ot,Ae,P)=>{function g(ee){return ee}P.d(Ae,{y:()=>g})},1144:(ot,Ae,P)=>{P.d(Ae,{z:()=>g});const g=ee=>ee&&"number"==typeof ee.length&&"function"!=typeof ee},2206:(ot,Ae,P)=>{P.d(Ae,{D:()=>ee});var g=P(576);function ee(k){return Symbol.asyncIterator&&(0,g.m)(k?.[Symbol.asyncIterator])}},576:(ot,Ae,P)=>{function g(ee){return"function"==typeof ee}P.d(Ae,{m:()=>g})},3670:(ot,Ae,P)=>{P.d(Ae,{c:()=>k});var g=P(8822),ee=P(576);function k(oe){return(0,ee.m)(oe[g.L])}},6495:(ot,Ae,P)=>{P.d(Ae,{T:()=>k});var g=P(2202),ee=P(576);function k(oe){return(0,ee.m)(oe?.[g.h])}},8239:(ot,Ae,P)=>{P.d(Ae,{t:()=>ee});var g=P(576);function ee(k){return(0,g.m)(k?.then)}},3260:(ot,Ae,P)=>{P.d(Ae,{L:()=>oe,Q:()=>k});var g=P(655),ee=P(576);function k(re){return(0,g.FC)(this,arguments,function*(){const le=re.getReader();try{for(;;){const{value:he,done:pe}=yield(0,g.qq)(le.read());if(pe)return yield(0,g.qq)(void 0);yield yield(0,g.qq)(he)}}finally{le.releaseLock()}})}function oe(re){return(0,ee.m)(re?.getReader)}},4482:(ot,Ae,P)=>{P.d(Ae,{A:()=>ee,e:()=>k});var g=P(576);function ee(oe){return(0,g.m)(oe?.lift)}function k(oe){return re=>{if(ee(re))return re.lift(function(de){try{return oe(de,this)}catch(le){this.error(le)}});throw new TypeError("Unable to lift unknown Observable type")}}},9635:(ot,Ae,P)=>{P.d(Ae,{U:()=>k,z:()=>ee});var g=P(4671);function ee(...oe){return k(oe)}function k(oe){return 0===oe.length?g.y:1===oe.length?oe[0]:function(de){return oe.reduce((le,he)=>he(le),de)}}},7849:(ot,Ae,P)=>{P.d(Ae,{h:()=>k});var g=P(2416),ee=P(3410);function k(oe){ee.z.setTimeout(()=>{const{onUnhandledError:re}=g.v;if(!re)throw oe;re(oe)})}},4532:(ot,Ae,P)=>{function g(ee){return new TypeError(`You provided ${null!==ee&&"object"==typeof ee?"an invalid object":`'${ee}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}P.d(Ae,{z:()=>g})},655:(ot,Ae,P)=>{function oe(Z,X){var ie={};for(var ne in Z)Object.prototype.hasOwnProperty.call(Z,ne)&&X.indexOf(ne)<0&&(ie[ne]=Z[ne]);if(null!=Z&&"function"==typeof Object.getOwnPropertySymbols){var Pe=0;for(ne=Object.getOwnPropertySymbols(Z);Pe<ne.length;Pe++)X.indexOf(ne[Pe])<0&&Object.prototype.propertyIsEnumerable.call(Z,ne[Pe])&&(ie[ne[Pe]]=Z[ne[Pe]])}return ie}function he(Z,X,ie,ne){return new(ie||(ie=Promise))(function(Oe,ct){function Ht(tn){try{qe(ne.next(tn))}catch(Cn){ct(Cn)}}function Ut(tn){try{qe(ne.throw(tn))}catch(Cn){ct(Cn)}}function qe(tn){tn.done?Oe(tn.value):function Pe(Oe){return Oe instanceof ie?Oe:new ie(function(ct){ct(Oe)})}(tn.value).then(Ht,Ut)}qe((ne=ne.apply(Z,X||[])).next())})}function me(Z){return this instanceof me?(this.v=Z,this):new me(Z)}function fe(Z,X,ie){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Pe,ne=ie.apply(Z,X||[]),Oe=[];return Pe={},ct("next"),ct("throw"),ct("return"),Pe[Symbol.asyncIterator]=function(){return this},Pe;function ct(Wt){ne[Wt]&&(Pe[Wt]=function(Kt){return new Promise(function(Cr,Ot){Oe.push([Wt,Kt,Cr,Ot])>1||Ht(Wt,Kt)})})}function Ht(Wt,Kt){try{!function Ut(Wt){Wt.value instanceof me?Promise.resolve(Wt.value.v).then(qe,tn):Cn(Oe[0][2],Wt)}(ne[Wt](Kt))}catch(Cr){Cn(Oe[0][3],Cr)}}function qe(Wt){Ht("next",Wt)}function tn(Wt){Ht("throw",Wt)}function Cn(Wt,Kt){Wt(Kt),Oe.shift(),Oe.length&&Ht(Oe[0][0],Oe[0][1])}}function nt(Z){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ie,X=Z[Symbol.asyncIterator];return X?X.call(Z):(Z=function Y(Z){var X="function"==typeof Symbol&&Symbol.iterator,ie=X&&Z[X],ne=0;if(ie)return ie.call(Z);if(Z&&"number"==typeof Z.length)return{next:function(){return Z&&ne>=Z.length&&(Z=void 0),{value:Z&&Z[ne++],done:!Z}}};throw new TypeError(X?"Object is not iterable.":"Symbol.iterator is not defined.")}(Z),ie={},ne("next"),ne("throw"),ne("return"),ie[Symbol.asyncIterator]=function(){return this},ie);function ne(Oe){ie[Oe]=Z[Oe]&&function(ct){return new Promise(function(Ht,Ut){!function Pe(Oe,ct,Ht,Ut){Promise.resolve(Ut).then(function(qe){Oe({value:qe,done:Ht})},ct)}(Ht,Ut,(ct=Z[Oe](ct)).done,ct.value)})}}}P.d(Ae,{FC:()=>fe,KL:()=>nt,_T:()=>oe,mG:()=>he,qq:()=>me})},4650:(ot,Ae,P)=>{P.d(Ae,{$8M:()=>Eu,$Z:()=>Pg,AFp:()=>Go,AaK:()=>he,CRH:()=>QI,CZH:()=>gp,CqO:()=>UE,D6c:()=>Tc,EJc:()=>ab,F4k:()=>H_,FYo:()=>gt,FiY:()=>Be,G48:()=>Rn,GfV:()=>Ou,Gpc:()=>$,JOm:()=>Ls,LFG:()=>In,LSH:()=>dg,Lbi:()=>ob,Lck:()=>bv,MMx:()=>vc,NdJ:()=>BE,OlP:()=>an,PXZ:()=>fw,QGY:()=>$_,QP$:()=>Ai,Qsj:()=>pt,R0b:()=>Mn,RDi:()=>c0,Rgc:()=>tp,SBq:()=>ue,Sil:()=>uw,Suo:()=>zv,TTD:()=>Ki,TgZ:()=>Vf,X6Q:()=>bb,XFs:()=>Ke,Xpm:()=>H,Xts:()=>Ql,Y36:()=>Vi,YKP:()=>kI,Yjl:()=>Pt,Yz7:()=>Kt,Z0I:()=>Wo,ZZ4:()=>br,_Bn:()=>_m,_UZ:()=>U_,_Vd:()=>S,_c5:()=>Xu,_uU:()=>QE,aQg:()=>Ju,c2e:()=>ow,cJS:()=>Ot,cg1:()=>uv,dDg:()=>Hm,dqk:()=>nn,eFA:()=>ce,ekj:()=>jo,eoX:()=>pb,f3M:()=>D,g9A:()=>fh,h0i:()=>Jd,hGG:()=>Qn,iGM:()=>Gv,ifc:()=>st,ip1:()=>pp,jDz:()=>Xd,kL8:()=>fI,lG2:()=>$n,lqb:()=>Ln,lri:()=>hw,n5z:()=>es,oAB:()=>rt,q4F:()=>_g,qLn:()=>us,qOj:()=>Gg,qZA:()=>Yg,rWj:()=>fb,sBO:()=>dS,sIi:()=>Nf,s_b:()=>Hu,soG:()=>Lm,tb:()=>Pm,tp0:()=>yt,uIk:()=>kf,vHH:()=>we,vpe:()=>$o,wAp:()=>vt,z2F:()=>Gm,zSh:()=>Nu,zs3:()=>uc});var g=P(7579),ee=P(727),k=P(9751),oe=P(6451),re=P(3099);function de(i){for(let o in i)if(i[o]===de)return o;throw Error("Could not find renamed property on target object.")}function le(i,o){for(const a in o)o.hasOwnProperty(a)&&!i.hasOwnProperty(a)&&(i[a]=o[a])}function he(i){if("string"==typeof i)return i;if(Array.isArray(i))return"["+i.map(he).join(", ")+"]";if(null==i)return""+i;if(i.overriddenName)return`${i.overriddenName}`;if(i.name)return`${i.name}`;const o=i.toString();if(null==o)return""+o;const a=o.indexOf("\n");return-1===a?o:o.substring(0,a)}function pe(i,o){return null==i||""===i?null===o?"":o:null==o||""===o?i:i+" "+o}const B=de({__forward_ref__:de});function $(i){return i.__forward_ref__=$,i.toString=function(){return he(this())},i}function Y(i){return Le(i)?i():i}function Le(i){return"function"==typeof i&&i.hasOwnProperty(B)&&i.__forward_ref__===$}class we extends Error{constructor(o,a){super(function Je(i,o){return`NG0${Math.abs(i)}${o?": "+o.trim():""}`}(o,a)),this.code=o}}function me(i){return"string"==typeof i?i:null==i?"":String(i)}function ve(i,o){throw new we(-201,!1)}function Ut(i,o){null==i&&function qe(i,o,a,l){throw new Error(`ASSERTION ERROR: ${i}`+(null==l?"":` [Expected=> ${a} ${l} ${o} <=Actual]`))}(o,i,null,"!=")}function Kt(i){return{token:i.token,providedIn:i.providedIn||null,factory:i.factory,value:void 0}}function Ot(i){return{providers:i.providers||[],imports:i.imports||[]}}function Xt(i){return Vr(i,Si)||Vr(i,hi)}function Wo(i){return null!==Xt(i)}function Vr(i,o){return i.hasOwnProperty(o)?i[o]:null}function ws(i){return i&&(i.hasOwnProperty(Br)||i.hasOwnProperty(_o))?i[Br]:null}const Si=de({\u0275prov:de}),Br=de({\u0275inj:de}),hi=de({ngInjectableDef:de}),_o=de({ngInjectorDef:de});var Ke=(()=>((Ke=Ke||{})[Ke.Default=0]="Default",Ke[Ke.Host=1]="Host",Ke[Ke.Self=2]="Self",Ke[Ke.SkipSelf=4]="SkipSelf",Ke[Ke.Optional=8]="Optional",Ke))();let jr;function Tn(i){const o=jr;return jr=i,o}function fi(i,o,a){const l=Xt(i);return l&&"root"==l.providedIn?void 0===l.value?l.value=l.factory():l.value:a&Ke.Optional?null:void 0!==o?o:void ve(he(i))}function Sn(i){return{toString:i}.toString()}var jn=(()=>((jn=jn||{})[jn.OnPush=0]="OnPush",jn[jn.Default=1]="Default",jn))(),st=(()=>{return(i=st||(st={}))[i.Emulated=0]="Emulated",i[i.None=2]="None",i[i.ShadowDom=3]="ShadowDom",st;var i})();const nn=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),Tr={},Et=[],zi=de({\u0275cmp:de}),Zt=de({\u0275dir:de}),pi=de({\u0275pipe:de}),Gt=de({\u0275mod:de}),K=de({\u0275fac:de}),j=de({__NG_ELEMENT_ID__:de});let V=0;function H(i){return Sn(()=>{const a=!0===i.standalone,l={},d={type:i.type,providersResolver:null,decls:i.decls,vars:i.vars,factory:null,template:i.template||null,consts:i.consts||null,ngContentSelectors:i.ngContentSelectors,hostBindings:i.hostBindings||null,hostVars:i.hostVars||0,hostAttrs:i.hostAttrs||null,contentQueries:i.contentQueries||null,declaredInputs:l,inputs:null,outputs:null,exportAs:i.exportAs||null,onPush:i.changeDetection===jn.OnPush,directiveDefs:null,pipeDefs:null,standalone:a,dependencies:a&&i.dependencies||null,getStandaloneInjector:null,selectors:i.selectors||Et,viewQuery:i.viewQuery||null,features:i.features||null,data:i.data||{},encapsulation:i.encapsulation||st.Emulated,id:"c"+V++,styles:i.styles||Et,_:null,setInput:null,schemas:i.schemas||null,tView:null},f=i.dependencies,_=i.features;return d.inputs=Yt(i.inputs,l),d.outputs=Yt(i.outputs),_&&_.forEach(E=>E(d)),d.directiveDefs=f?()=>("function"==typeof f?f():f).map(De).filter(Ve):null,d.pipeDefs=f?()=>("function"==typeof f?f():f).map(Nn).filter(Ve):null,d})}function De(i){return Mt(i)||dn(i)}function Ve(i){return null!==i}function rt(i){return Sn(()=>({type:i.type,bootstrap:i.bootstrap||Et,declarations:i.declarations||Et,imports:i.imports||Et,exports:i.exports||Et,transitiveCompileScopes:null,schemas:i.schemas||null,id:i.id||null}))}function Yt(i,o){if(null==i)return Tr;const a={};for(const l in i)if(i.hasOwnProperty(l)){let d=i[l],f=d;Array.isArray(d)&&(f=d[1],d=d[0]),a[d]=l,o&&(o[d]=f)}return a}const $n=H;function Pt(i){return{type:i.type,name:i.name,factory:null,pure:!1!==i.pure,standalone:!0===i.standalone,onDestroy:i.type.prototype.ngOnDestroy||null}}function Mt(i){return i[zi]||null}function dn(i){return i[Zt]||null}function Nn(i){return i[pi]||null}function Ai(i){const o=Mt(i)||dn(i)||Nn(i);return null!==o&&o.standalone}function Sr(i,o){const a=i[Gt]||null;if(!a&&!0===o)throw new Error(`Type ${he(i)} does not have '\u0275mod' property.`);return a}function nr(i){return Array.isArray(i)&&"object"==typeof i[1]}function Ar(i){return Array.isArray(i)&&!0===i[1]}function Ya(i){return 0!=(8&i.flags)}function Yo(i){return 2==(2&i.flags)}function hl(i){return 1==(1&i.flags)}function yr(i){return null!==i.template}function Rh(i){return 0!=(256&i[2])}function Mi(i,o){return i.hasOwnProperty(K)?i[K]:null}class Wi{constructor(o,a,l){this.previousValue=o,this.currentValue=a,this.firstChange=l}isFirstChange(){return this.firstChange}}function Ki(){return Ys}function Ys(i){return i.type.prototype.ngOnChanges&&(i.setInput=Ja),Qo}function Qo(){const i=kh(this),o=i?.current;if(o){const a=i.previous;if(a===Tr)i.previous=o;else for(let l in o)a[l]=o[l];i.current=null,this.ngOnChanges(o)}}function Ja(i,o,a,l){const d=kh(i)||function Jo(i,o){return i[ml]=o}(i,{previous:Tr,current:null}),f=d.current||(d.current={}),_=d.previous,E=this.declaredInputs[a],I=_[E];f[E]=new Wi(I&&I.currentValue,o,_===Tr),i[l]=o}Ki.ngInherit=!0;const ml="__ngSimpleChanges__";function kh(i){return i[ml]||null}function _n(i){for(;Array.isArray(i);)i=i[0];return i}function xr(i,o){return _n(o[i.index])}function Qs(i,o){return i.data[o]}function jt(i,o){const a=o[i];return nr(a)?a:a[0]}function Xo(i){return 4==(4&i[2])}function Js(i){return 64==(64&i[2])}function yi(i,o){return null==o?null:i[o]}function nu(i){i[18]=0}function yn(i,o){i[5]+=o;let a=i,l=i[3];for(;null!==l&&(1===o&&1===a[5]||-1===o&&0===a[5]);)l[5]+=o,a=l,l=l[3]}const It={lFrame:Al(null),bindingsEnabled:!0};function Qi(){return It.bindingsEnabled}function Se(){return It.lFrame.lView}function Ft(){return It.lFrame.tView}function vn(){let i=ou();for(;null!==i&&64===i.type;)i=i.parent;return i}function ou(){return It.lFrame.currentTNode}function si(i,o){const a=It.lFrame;a.currentTNode=i,a.isParent=o}function ta(){return It.lFrame.isParent}function zp(i,o){const a=It.lFrame;a.bindingIndex=a.bindingRootIndex=i,au(o)}function au(i){It.lFrame.currentDirectiveIndex=i}function Cl(){return It.lFrame.currentQueryIndex}function sa(i){It.lFrame.currentQueryIndex=i}function Tl(i){const o=i[1];return 2===o.type?o.declTNode:1===o.type?i[6]:null}function uu(i,o,a){if(a&Ke.SkipSelf){let d=o,f=i;for(;!(d=d.parent,null!==d||a&Ke.Host||(d=Tl(f),null===d||(f=f[15],10&d.type))););if(null===d)return!1;o=d,i=f}const l=It.lFrame=Sl();return l.currentTNode=o,l.lView=i,!0}function lu(i){const o=Sl(),a=i[1];It.lFrame=o,o.currentTNode=a.firstChild,o.lView=i,o.tView=a,o.contextLView=i,o.bindingIndex=a.bindingStartIndex,o.inI18n=!1}function Sl(){const i=It.lFrame,o=null===i?null:i.child;return null===o?Al(i):o}function Al(i){const o={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:i,child:null,inI18n:!1};return null!==i&&(i.child=o),o}function xl(){const i=It.lFrame;return It.lFrame=i.parent,i.currentTNode=null,i.lView=null,i}const Wc=xl;function to(){const i=xl();i.isParent=!0,i.tView=null,i.selectedIndex=-1,i.contextLView=null,i.elementDepthCount=0,i.currentDirectiveIndex=-1,i.currentNamespace=null,i.bindingRootIndex=-1,i.bindingIndex=-1,i.currentQueryIndex=0}function zn(){return It.lFrame.selectedIndex}function Hr(i){It.lFrame.selectedIndex=i}function Nl(i,o){for(let a=o.directiveStart,l=o.directiveEnd;a<l;a++){const f=i.data[a].type.prototype,{ngAfterContentInit:_,ngAfterContentChecked:E,ngAfterViewInit:I,ngAfterViewChecked:T,ngOnDestroy:R}=f;_&&(i.contentHooks||(i.contentHooks=[])).push(-a,_),E&&((i.contentHooks||(i.contentHooks=[])).push(a,E),(i.contentCheckHooks||(i.contentCheckHooks=[])).push(a,E)),I&&(i.viewHooks||(i.viewHooks=[])).push(-a,I),T&&((i.viewHooks||(i.viewHooks=[])).push(a,T),(i.viewCheckHooks||(i.viewCheckHooks=[])).push(a,T)),null!=R&&(i.destroyHooks||(i.destroyHooks=[])).push(a,R)}}function Io(i,o,a){Do(i,o,3,a)}function bo(i,o,a,l){(3&i[2])===a&&Do(i,o,a,l)}function Yc(i,o){let a=i[2];(3&a)===o&&(a&=2047,a+=1,i[2]=a)}function Do(i,o,a,l){const f=l??-1,_=o.length-1;let E=0;for(let I=void 0!==l?65535&i[18]:0;I<_;I++)if("number"==typeof o[I+1]){if(E=o[I],null!=l&&E>=l)break}else o[I]<0&&(i[18]+=65536),(E<f||-1==f)&&(Qc(i,a,o,I),i[18]=(4294901760&i[18])+I+2),I++}function Qc(i,o,a,l){const d=a[l]<0,f=a[l+1],E=i[d?-a[l]:a[l]];if(d){if(i[2]>>11<i[18]>>16&&(3&i[2])===o){i[2]+=2048;try{f.call(E)}finally{}}}else try{f.call(E)}finally{}}class As{constructor(o,a,l){this.factory=o,this.resolving=!1,this.canSeeViewProviders=a,this.injectImpl=l}}function To(i,o,a){let l=0;for(;l<a.length;){const d=a[l];if("number"==typeof d){if(0!==d)break;l++;const f=a[l++],_=a[l++],E=a[l++];i.setAttribute(o,_,E,f)}else{const f=d,_=a[++l];gu(f)?i.setProperty(o,f,_):i.setAttribute(o,f,_),l++}}return l}function io(i){return 3===i||4===i||6===i}function gu(i){return 64===i.charCodeAt(0)}function oa(i,o){if(null!==o&&0!==o.length)if(null===i||0===i.length)i=o.slice();else{let a=-1;for(let l=0;l<o.length;l++){const d=o[l];"number"==typeof d?a=d:0===a||Xc(i,a,d,null,-1===a||2===a?o[++l]:null)}}return i}function Xc(i,o,a,l,d){let f=0,_=i.length;if(-1===o)_=-1;else for(;f<i.length;){const E=i[f++];if("number"==typeof E){if(E===o){_=-1;break}if(E>o){_=f-1;break}}}for(;f<i.length;){const E=i[f];if("number"==typeof E)break;if(E===a){if(null===l)return void(null!==d&&(i[f+1]=d));if(l===i[f+1])return void(i[f+2]=d)}f++,null!==l&&f++,null!==d&&f++}-1!==_&&(i.splice(_,0,o),f=_+1),i.splice(f++,0,a),null!==l&&i.splice(f++,0,l),null!==d&&i.splice(f++,0,d)}function ed(i){return-1!==i}function rr(i){return 32767&i}function ua(i,o){let a=function aa(i){return i>>16}(i),l=o;for(;a>0;)l=l[15],a--;return l}let Ni=!0;function la(i){const o=Ni;return Ni=i,o}let An=0;const _i={};function so(i,o){const a=yu(i,o);if(-1!==a)return a;const l=o[1];l.firstCreatePass&&(i.injectorIndex=o.length,da(l.data,i),da(o,null),da(l.blueprint,null));const d=_u(i,o),f=i.injectorIndex;if(ed(d)){const _=rr(d),E=ua(d,o),I=E[1].data;for(let T=0;T<8;T++)o[f+T]=E[_+T]|I[_+T]}return o[f+8]=d,f}function da(i,o){i.push(0,0,0,0,0,0,0,0,o)}function yu(i,o){return-1===i.injectorIndex||i.parent&&i.parent.injectorIndex===i.injectorIndex||null===o[i.injectorIndex+8]?-1:i.injectorIndex}function _u(i,o){if(i.parent&&-1!==i.parent.injectorIndex)return i.parent.injectorIndex;let a=0,l=null,d=o;for(;null!==d;){if(l=xo(d),null===l)return-1;if(a++,d=d[15],-1!==l.injectorIndex)return l.injectorIndex|a<<16}return-1}function xs(i,o,a){!function mu(i,o,a){let l;"string"==typeof a?l=a.charCodeAt(0)||0:a.hasOwnProperty(j)&&(l=a[j]),null==l&&(l=a[j]=An++);const d=255&l;o.data[i+(d>>5)]|=1<<d}(i,o,a)}function Ms(i,o,a){if(a&Ke.Optional)return i;ve()}function kl(i,o,a,l){if(a&Ke.Optional&&void 0===l&&(l=null),0==(a&(Ke.Self|Ke.Host))){const d=i[9],f=Tn(void 0);try{return d?d.get(o,l,a&Ke.Optional):fi(o,l,a&Ke.Optional)}finally{Tn(f)}}return Ms(l,0,a)}function oo(i,o,a,l=Ke.Default,d){if(null!==i){if(1024&o[2]){const _=function Ao(i,o,a,l,d){let f=i,_=o;for(;null!==f&&null!==_&&1024&_[2]&&!(256&_[2]);){const E=ha(f,_,a,l|Ke.Self,_i);if(E!==_i)return E;let I=f.parent;if(!I){const T=_[21];if(T){const R=T.get(a,_i,l);if(R!==_i)return R}I=xo(_),_=_[15]}f=I}return d}(i,o,a,l,_i);if(_!==_i)return _}const f=ha(i,o,a,l,_i);if(f!==_i)return f}return kl(o,a,l,d)}function ha(i,o,a,l,d){const f=function Pl(i){if("string"==typeof i)return i.charCodeAt(0)||0;const o=i.hasOwnProperty(j)?i[j]:void 0;return"number"==typeof o?o>=0?255&o:Fl:o}(a);if("function"==typeof f){if(!uu(o,i,l))return l&Ke.Host?Ms(d,0,l):kl(o,a,l,d);try{const _=f(l);if(null!=_||l&Ke.Optional)return _;ve()}finally{Wc()}}else if("number"==typeof f){let _=null,E=yu(i,o),I=-1,T=l&Ke.Host?o[16][6]:null;for((-1===E||l&Ke.SkipSelf)&&(I=-1===E?_u(i,o):o[E+8],-1!==I&&fa(l,!1)?(_=o[1],E=rr(I),o=ua(I,o)):E=-1);-1!==E;){const R=o[1];if(vu(f,E,R.data)){const O=rd(E,o,a,_,l,T);if(O!==_i)return O}I=o[E+8],-1!==I&&fa(l,o[1].data[E+8]===T)&&vu(f,E,o)?(_=R,E=rr(I),o=ua(I,o)):E=-1}}return d}function rd(i,o,a,l,d,f){const _=o[1],E=_.data[i+8],R=So(E,_,a,null==l?Yo(E)&&Ni:l!=_&&0!=(3&E.type),d&Ke.Host&&f===E);return null!==R?Xi(o,_,R,E):_i}function So(i,o,a,l,d){const f=i.providerIndexes,_=o.data,E=1048575&f,I=i.directiveStart,R=f>>20,z=d?E+R:i.directiveEnd;for(let te=l?E:E+R;te<z;te++){const Ee=_[te];if(te<I&&a===Ee||te>=I&&Ee.type===a)return te}if(d){const te=_[I];if(te&&yr(te)&&te.type===a)return I}return null}function Xi(i,o,a,l){let d=i[a];const f=o.data;if(function ro(i){return i instanceof As}(d)){const _=d;_.resolving&&function Ye(i,o){const a=o?`. Dependency path: ${o.join(" > ")} > ${i}`:"";throw new we(-200,`Circular dependency in DI detected for ${i}${a}`)}(function fe(i){return"function"==typeof i?i.name||i.toString():"object"==typeof i&&null!=i&&"function"==typeof i.type?i.type.name||i.type.toString():me(i)}(f[a]));const E=la(_.canSeeViewProviders);_.resolving=!0;const I=_.injectImpl?Tn(_.injectImpl):null;uu(i,l,Ke.Default);try{d=i[a]=_.factory(void 0,f,i,l),o.firstCreatePass&&a>=l.directiveStart&&function Zc(i,o,a){const{ngOnChanges:l,ngOnInit:d,ngDoCheck:f}=o.type.prototype;if(l){const _=Ys(o);(a.preOrderHooks||(a.preOrderHooks=[])).push(i,_),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(i,_)}d&&(a.preOrderHooks||(a.preOrderHooks=[])).push(0-i,d),f&&((a.preOrderHooks||(a.preOrderHooks=[])).push(i,f),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(i,f))}(a,f[a],o)}finally{null!==I&&Tn(I),la(E),_.resolving=!1,Wc()}}return d}function vu(i,o,a){return!!(a[o+(i>>5)]&1<<i)}function fa(i,o){return!(i&Ke.Self||i&Ke.Host&&o)}class ao{constructor(o,a){this._tNode=o,this._lView=a}get(o,a,l){return oo(this._tNode,this._lView,o,l,a)}}function Fl(){return new ao(vn(),Se())}function es(i){return Sn(()=>{const o=i.prototype.constructor,a=o[K]||wu(o),l=Object.prototype;let d=Object.getPrototypeOf(i.prototype).constructor;for(;d&&d!==l;){const f=d[K]||wu(d);if(f&&f!==a)return f;d=Object.getPrototypeOf(d)}return f=>new f})}function wu(i){return Le(i)?()=>{const o=wu(Y(i));return o&&o()}:Mi(i)}function xo(i){const o=i[1],a=o.type;return 2===a?o.declTNode:1===a?i[6]:null}function Eu(i){return function nd(i,o){if("class"===o)return i.classes;if("style"===o)return i.styles;const a=i.attrs;if(a){const l=a.length;let d=0;for(;d<l;){const f=a[d];if(io(f))break;if(0===f)d+=2;else if("number"==typeof f)for(d++;d<l&&"string"==typeof a[d];)d++;else{if(f===o)return a[d+1];d+=2}}}return null}(vn(),i)}const Rs="__parameters__";function No(i,o,a){return Sn(()=>{const l=function Iu(i){return function(...a){if(i){const l=i(...a);for(const d in l)this[d]=l[d]}}}(o);function d(...f){if(this instanceof d)return l.apply(this,f),this;const _=new d(...f);return E.annotation=_,E;function E(I,T,R){const O=I.hasOwnProperty(Rs)?I[Rs]:Object.defineProperty(I,Rs,{value:[]})[Rs];for(;O.length<=R;)O.push(null);return(O[R]=O[R]||[]).push(_),I}}return a&&(d.prototype=Object.create(a.prototype)),d.prototype.ngMetadataName=i,d.annotationCls=d,d})}class an{constructor(o,a){this._desc=o,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof a?this.__NG_ELEMENT_ID__=a:void 0!==a&&(this.\u0275prov=Kt({token:this,providedIn:a.providedIn||"root",factory:a.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function zr(i,o){void 0===o&&(o=i);for(let a=0;a<i.length;a++){let l=i[a];Array.isArray(l)?(o===i&&(o=i.slice(0,a)),zr(l,o)):o!==i&&o.push(l)}return o}function vi(i,o){i.forEach(a=>Array.isArray(a)?vi(a,o):o(a))}function Vl(i,o,a){o>=i.length?i.push(a):i.splice(o,0,a)}function Oo(i,o){return o>=i.length-1?i.pop():i.splice(o,1)[0]}function Mr(i,o,a){let l=ns(i,o);return l>=0?i[1|l]=a:(l=~l,function ft(i,o,a,l){let d=i.length;if(d==o)i.push(a,l);else if(1===d)i.push(l,i[0]),i[0]=a;else{for(d--,i.push(i[d-1],i[d]);d>o;)i[d]=i[d-2],d--;i[o]=a,i[o+1]=l}}(i,l,o,a)),l}function ma(i,o){const a=ns(i,o);if(a>=0)return i[1|a]}function ns(i,o){return function Rr(i,o,a){let l=0,d=i.length>>a;for(;d!==l;){const f=l+(d-l>>1),_=i[f<<a];if(o===_)return f<<a;_>o?d=f:l=f+1}return~(d<<a)}(i,o,1)}const un={},ki="__NG_DI_FLAG__",Tu="ngTempTokenPath",Su=/\n/gm,Bl="__source";let co;function rs(i){const o=co;return co=i,o}function jl(i,o=Ke.Default){if(void 0===co)throw new we(-203,!1);return null===co?fi(i,void 0,o):co.get(i,o&Ke.Optional?null:void 0,o)}function In(i,o=Ke.Default){return(function Gi(){return jr}()||jl)(Y(i),o)}function D(i,o=Ke.Default){return"number"!=typeof o&&(o=0|(o.optional&&8)|(o.host&&1)|(o.self&&2)|(o.skipSelf&&4)),In(i,o)}function C(i){const o=[];for(let a=0;a<i.length;a++){const l=Y(i[a]);if(Array.isArray(l)){if(0===l.length)throw new we(900,!1);let d,f=Ke.Default;for(let _=0;_<l.length;_++){const E=l[_],I=F(E);"number"==typeof I?-1===I?d=E.token:f|=I:d=E}o.push(In(d,f))}else o.push(In(l))}return o}function x(i,o){return i[ki]=o,i.prototype[ki]=o,i}function F(i){return i[ki]}const Be=x(No("Optional"),8),yt=x(No("SkipSelf"),4);let Qp;function c0(i){Qp=i}class xu{constructor(o){this.changingThisBreaksApplicationSecurity=o}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function os(i){return i instanceof xu?i.changingThisBreaksApplicationSecurity:i}const Wh=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;var Fn=(()=>((Fn=Fn||{})[Fn.NONE=0]="NONE",Fn[Fn.HTML=1]="HTML",Fn[Fn.STYLE=2]="STYLE",Fn[Fn.SCRIPT=3]="SCRIPT",Fn[Fn.URL=4]="URL",Fn[Fn.RESOURCE_URL=5]="RESOURCE_URL",Fn))();function dg(i){const o=function Fo(){const i=Se();return i&&i[12]}();return o?o.sanitize(Fn.URL,i)||"":function Mu(i,o){const a=function ud(i){return i instanceof xu&&i.getTypeName()||null}(i);if(null!=a&&a!==o){if("ResourceURL"===a&&"URL"===o)return!0;throw new Error(`Required a safe ${o}, got a ${a} (see https://g.co/ng/security#xss)`)}return a===o}(i,"URL")?os(i):function fo(i){return(i=String(i)).match(Wh)?i:"unsafe:"+i}(me(i))}const Ql=new an("ENVIRONMENT_INITIALIZER"),pg=new an("INJECTOR",-1),Jh=new an("INJECTOR_DEF_TYPES");class pd{get(o,a=un){if(a===un){const l=new Error(`NullInjectorError: No provider for ${he(o)}!`);throw l.name="NullInjectorError",l}return a}}function gg(...i){return{\u0275providers:oi(0,i)}}function oi(i,...o){const a=[],l=new Set;let d;return vi(o,f=>{const _=f;Jl(_,a,[],l)&&(d||(d=[]),d.push(_))}),void 0!==d&&Da(d,a),a}function Da(i,o){for(let a=0;a<i.length;a++){const{providers:d}=i[a];vi(d,f=>{o.push(f)})}}function Jl(i,o,a,l){if(!(i=Y(i)))return!1;let d=null,f=ws(i);const _=!f&&Mt(i);if(f||_){if(_&&!_.standalone)return!1;d=i}else{const I=i.ngModule;if(f=ws(I),!f)return!1;d=I}const E=l.has(d);if(_){if(E)return!1;if(l.add(d),_.dependencies){const I="function"==typeof _.dependencies?_.dependencies():_.dependencies;for(const T of I)Jl(T,o,a,l)}}else{if(!f)return!1;{if(null!=f.imports&&!E){let T;l.add(d);try{vi(f.imports,R=>{Jl(R,o,a,l)&&(T||(T=[]),T.push(R))})}finally{}void 0!==T&&Da(T,o)}if(!E){const T=Mi(d)||(()=>new d);o.push({provide:d,useFactory:T,deps:Et},{provide:Jh,useValue:d,multi:!0},{provide:Ql,useValue:()=>In(d),multi:!0})}const I=f.providers;null==I||E||vi(I,R=>{o.push(R)})}}return d!==i&&void 0!==i.providers}const gd=de({provide:String,useValue:de});function Xl(i){return null!==i&&"object"==typeof i&&gd in i}function po(i){return"function"==typeof i}const Nu=new an("Set Injector scope."),ec={},By={};let yd;function tc(){return void 0===yd&&(yd=new pd),yd}class Ln{}class _d extends Ln{constructor(o,a,l,d){super(),this.parent=a,this.source=l,this.scopes=d,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,vd(o,_=>this.processProvider(_)),this.records.set(pg,Sa(void 0,this)),d.has("environment")&&this.records.set(Ln,Sa(void 0,this));const f=this.records.get(Nu);null!=f&&"string"==typeof f.value&&this.scopes.add(f.value),this.injectorDefTypes=new Set(this.get(Jh.multi,Et,Ke.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const o of this._ngOnDestroyHooks)o.ngOnDestroy();for(const o of this._onDestroyHooks)o()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(o){this._onDestroyHooks.push(o)}runInContext(o){this.assertNotDestroyed();const a=rs(this),l=Tn(void 0);try{return o()}finally{rs(a),Tn(l)}}get(o,a=un,l=Ke.Default){this.assertNotDestroyed();const d=rs(this),f=Tn(void 0);try{if(!(l&Ke.SkipSelf)){let E=this.records.get(o);if(void 0===E){const I=function tf(i){return"function"==typeof i||"object"==typeof i&&i instanceof an}(o)&&Xt(o);E=I&&this.injectableDefInScope(I)?Sa(Ca(o),ec):null,this.records.set(o,E)}if(null!=E)return this.hydrate(o,E)}return(l&Ke.Self?tc():this.parent).get(o,a=l&Ke.Optional&&a===un?null:a)}catch(_){if("NullInjectorError"===_.name){if((_[Tu]=_[Tu]||[]).unshift(he(o)),d)throw _;return function J(i,o,a,l){const d=i[Tu];throw o[Bl]&&d.unshift(o[Bl]),i.message=function ae(i,o,a,l=null){i=i&&"\n"===i.charAt(0)&&"\u0275"==i.charAt(1)?i.slice(2):i;let d=he(o);if(Array.isArray(o))d=o.map(he).join(" -> ");else if("object"==typeof o){let f=[];for(let _ in o)if(o.hasOwnProperty(_)){let E=o[_];f.push(_+":"+("string"==typeof E?JSON.stringify(E):he(E)))}d=`{${f.join(", ")}}`}return`${a}${l?"("+l+")":""}[${d}]: ${i.replace(Su,"\n  ")}`}("\n"+i.message,d,a,l),i.ngTokenPath=d,i[Tu]=null,i}(_,o,"R3InjectorError",this.source)}throw _}finally{Tn(f),rs(d)}}resolveInjectorInitializers(){const o=rs(this),a=Tn(void 0);try{const l=this.get(Ql.multi,Et,Ke.Self);for(const d of l)d()}finally{rs(o),Tn(a)}}toString(){const o=[],a=this.records;for(const l of a.keys())o.push(he(l));return`R3Injector[${o.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new we(205,!1)}processProvider(o){let a=po(o=Y(o))?o:Y(o&&o.provide);const l=function go(i){return Xl(i)?Sa(void 0,i.useValue):Sa(Ta(i),ec)}(o);if(po(o)||!0!==o.multi)this.records.get(a);else{let d=this.records.get(a);d||(d=Sa(void 0,ec,!0),d.factory=()=>C(d.multi),this.records.set(a,d)),a=o,d.multi.push(o)}this.records.set(a,l)}hydrate(o,a){return a.value===ec&&(a.value=By,a.value=a.factory()),"object"==typeof a.value&&a.value&&function ef(i){return null!==i&&"object"==typeof i&&"function"==typeof i.ngOnDestroy}(a.value)&&this._ngOnDestroyHooks.add(a.value),a.value}injectableDefInScope(o){if(!o.providedIn)return!1;const a=Y(o.providedIn);return"string"==typeof a?"any"===a||this.scopes.has(a):this.injectorDefTypes.has(a)}}function Ca(i){const o=Xt(i),a=null!==o?o.factory:Mi(i);if(null!==a)return a;if(i instanceof an)throw new we(204,!1);if(i instanceof Function)return function jy(i){const o=i.length;if(o>0)throw function wi(i,o){const a=[];for(let l=0;l<i;l++)a.push(o);return a}(o,"?"),new we(204,!1);const a=function mr(i){const o=i&&(i[Si]||i[hi]);if(o){const a=function Ur(i){if(i.hasOwnProperty("name"))return i.name;const o=(""+i).match(/^function\s*([^\s(]+)/);return null===o?"":o[1]}(i);return console.warn(`DEPRECATED: DI is instantiating a token "${a}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${a}" class.`),o}return null}(i);return null!==a?()=>a.factory(i):()=>new i}(i);throw new we(204,!1)}function Ta(i,o,a){let l;if(po(i)){const d=Y(i);return Mi(d)||Ca(d)}if(Xl(i))l=()=>Y(i.useValue);else if(function Xh(i){return!(!i||!i.useFactory)}(i))l=()=>i.useFactory(...C(i.deps||[]));else if(function md(i){return!(!i||!i.useExisting)}(i))l=()=>In(Y(i.useExisting));else{const d=Y(i&&(i.useClass||i.provide));if(!function $y(i){return!!i.deps}(i))return Mi(d)||Ca(d);l=()=>new d(...C(i.deps))}return l}function Sa(i,o,a=!1){return{factory:i,value:o,multi:a?[]:void 0}}function mg(i){return!!i.\u0275providers}function vd(i,o){for(const a of i)Array.isArray(a)?vd(a,o):mg(a)?vd(a.\u0275providers,o):o(a)}class yg{}class w{resolveComponentFactory(o){throw function y(i){const o=Error(`No component factory found for ${he(i)}. Did you add it to @NgModule.entryComponents?`);return o.ngComponent=i,o}(o)}}let S=(()=>{class i{}return i.NULL=new w,i})();function N(){return W(vn(),Se())}function W(i,o){return new ue(xr(i,o))}let ue=(()=>{class i{constructor(a){this.nativeElement=a}}return i.__NG_ELEMENT_ID__=N,i})();function Fe(i){return i instanceof ue?i.nativeElement:i}class gt{}let pt=(()=>{class i{}return i.__NG_ELEMENT_ID__=()=>function qn(){const i=Se(),a=jt(vn().index,i);return(nr(a)?a:i)[11]}(),i})(),as=(()=>{class i{}return i.\u0275prov=Kt({token:i,providedIn:"root",factory:()=>null}),i})();class Ou{constructor(o){this.full=o,this.major=o.split(".")[0],this.minor=o.split(".")[1],this.patch=o.split(".").slice(2).join(".")}}const _g=new Ou("14.2.0"),wd={};function Eg(i){return i.ngOriginalError}class us{constructor(){this._console=console}handleError(o){const a=this._findOriginalError(o);this._console.error("ERROR",o),a&&this._console.error("ORIGINAL ERROR",a)}_findOriginalError(o){let a=o&&Eg(o);for(;a&&Eg(a);)a=Eg(a);return a||null}}const b0=new Map;let xD=0;const nf="__ngContext__";function vr(i,o){nr(o)?(i[nf]=o[20],function D0(i){b0.set(i[20],i)}(o)):i[nf]=o}function Id(i){const o=i[nf];return"number"==typeof o?function qy(i){return b0.get(i)||null}(o):o||null}function rf(i){const o=Id(i);return o?nr(o)?o:o.lView:null}function Ma(i){return i instanceof Function?i():i}var Ls=(()=>((Ls=Ls||{})[Ls.Important=1]="Important",Ls[Ls.DashCase=2]="DashCase",Ls))();function M0(i,o){return undefined(i,o)}function Dg(i){const o=i[3];return Ar(o)?o[3]:o}function ls(i){return af(i[13])}function Yy(i){return af(i[4])}function af(i){for(;null!==i&&!Ar(i);)i=i[4];return i}function bd(i,o,a,l,d){if(null!=l){let f,_=!1;Ar(l)?f=l:nr(l)&&(_=!0,l=l[0]);const E=_n(l);0===i&&null!==a?null==d?Vo(o,a,E):sc(o,a,E,d||null,!0):1===i&&null!==a?sc(o,a,E,d||null,!0):2===i?function L0(i,o,a){const l=Fu(i,o);l&&function Pu(i,o,a,l){i.removeChild(o,a,l)}(i,l,o,a)}(o,E,_):3===i&&o.destroyNode(E),null!=f&&function Lx(i,o,a,l,d){const f=a[7];f!==_n(a)&&bd(o,i,l,f,d);for(let E=10;E<a.length;E++){const I=a[E];Dd(I[1],I,i,o,l,f)}}(o,i,f,a,d)}}function rc(i,o,a){return i.createElement(o,a)}function Jy(i,o){const a=i[9],l=a.indexOf(o),d=o[3];512&o[2]&&(o[2]&=-513,yn(d,-1)),a.splice(l,1)}function lf(i,o){if(i.length<=10)return;const a=10+o,l=i[a];if(l){const d=l[17];null!==d&&d!==i&&Jy(d,l),o>0&&(i[a-1][4]=l[4]);const f=Oo(i,10+o);!function VD(i,o){Dd(i,o,o[11],2,null,null),o[0]=null,o[6]=null}(l[1],l);const _=f[19];null!==_&&_.detachView(f[1]),l[3]=null,l[4]=null,l[2]&=-65}return l}function Xy(i,o){if(!(128&o[2])){const a=o[11];a.destroyNode&&Dd(i,o,a,3,null,null),function UD(i){let o=i[13];if(!o)return Kn(i[1],i);for(;o;){let a=null;if(nr(o))a=o[13];else{const l=o[10];l&&(a=l)}if(!a){for(;o&&!o[4]&&o!==i;)nr(o)&&Kn(o[1],o),o=o[3];null===o&&(o=i),nr(o)&&Kn(o[1],o),a=o&&o[4]}o=a}}(o)}}function Kn(i,o){if(!(128&o[2])){o[2]&=-65,o[2]|=128,function Sg(i,o){let a;if(null!=i&&null!=(a=i.destroyHooks))for(let l=0;l<a.length;l+=2){const d=o[a[l]];if(!(d instanceof As)){const f=a[l+1];if(Array.isArray(f))for(let _=0;_<f.length;_+=2){const E=d[f[_]],I=f[_+1];try{I.call(E)}finally{}}else try{f.call(d)}finally{}}}}(i,o),function cf(i,o){const a=i.cleanup,l=o[7];let d=-1;if(null!==a)for(let f=0;f<a.length-1;f+=2)if("string"==typeof a[f]){const _=a[f+1],E="function"==typeof _?_(o):_n(o[_]),I=l[d=a[f+2]],T=a[f+3];"boolean"==typeof T?E.removeEventListener(a[f],I,T):T>=0?l[d=T]():l[d=-T].unsubscribe(),f+=2}else{const _=l[d=a[f+1]];a[f].call(_)}if(null!==l){for(let f=d+1;f<l.length;f++)(0,l[f])();o[7]=null}}(i,o),1===o[1].type&&o[11].destroy();const a=o[17];if(null!==a&&Ar(o[3])){a!==o[3]&&Jy(a,o);const l=o[19];null!==l&&l.detachView(i)}!function C0(i){b0.delete(i[20])}(o)}}function df(i,o,a){return function e_(i,o,a){let l=o;for(;null!==l&&40&l.type;)l=(o=l).parent;if(null===l)return a[0];if(2&l.flags){const d=i.data[l.directiveStart].encapsulation;if(d===st.None||d===st.Emulated)return null}return xr(l,a)}(i,o.parent,a)}function sc(i,o,a,l,d){i.insertBefore(o,a,l,d)}function Vo(i,o,a){i.appendChild(o,a)}function Yr(i,o,a,l,d){null!==l?sc(i,o,a,l,d):Vo(i,o,a)}function Fu(i,o){return i.parentNode(o)}let F0=function P0(i,o,a){return 40&i.type?xr(i,a):null};function Lu(i,o,a,l){const d=df(i,l,o),f=o[11],E=function n_(i,o,a){return F0(i,o,a)}(l.parent||o[6],l,o);if(null!=d)if(Array.isArray(a))for(let I=0;I<a.length;I++)Yr(f,d,a[I],E,!1);else Yr(f,d,a,E,!1)}function Ag(i,o){if(null!==o){const a=o.type;if(3&a)return xr(o,i);if(4&a)return r_(-1,i[o.index]);if(8&a){const l=o.child;if(null!==l)return Ag(i,l);{const d=i[o.index];return Ar(d)?r_(-1,d):_n(d)}}if(32&a)return M0(o,i)()||_n(i[o.index]);{const l=oc(i,o);return null!==l?Array.isArray(l)?l[0]:Ag(Dg(i[16]),l):Ag(i,o.next)}}return null}function oc(i,o){return null!==o?i[16][6].projection[o.projection]:null}function r_(i,o){const a=10+i+1;if(a<o.length){const l=o[a],d=l[1].firstChild;if(null!==d)return Ag(l,d)}return o[7]}function Vs(i,o,a,l,d,f,_){for(;null!=a;){const E=l[a.index],I=a.type;if(_&&0===o&&(E&&vr(_n(E),l),a.flags|=4),64!=(64&a.flags))if(8&I)Vs(i,o,a.child,l,d,f,!1),bd(o,i,d,E,f);else if(32&I){const T=M0(a,l);let R;for(;R=T();)bd(o,i,d,R,f);bd(o,i,d,E,f)}else 16&I?i_(i,o,l,a,d,f):bd(o,i,d,E,f);a=_?a.projectionNext:a.next}}function Dd(i,o,a,l,d,f){Vs(a,l,i.firstChild,o,d,f,!1)}function i_(i,o,a,l,d,f){const _=a[16],I=_[6].projection[l.projection];if(Array.isArray(I))for(let T=0;T<I.length;T++)bd(o,i,d,I[T],f);else Vs(i,o,I,_[3],d,f,!0)}function Na(i,o,a){i.setAttribute(o,"style",a)}function ff(i,o,a){""===a?i.removeAttribute(o,"class"):i.setAttribute(o,"class",a)}function U0(i,o,a){let l=i.length;for(;;){const d=i.indexOf(o,a);if(-1===d)return d;if(0===d||i.charCodeAt(d-1)<=32){const f=o.length;if(d+f===l||i.charCodeAt(d+f)<=32)return d}a=d+1}}const s_="ng-template";function B0(i,o,a){let l=0;for(;l<i.length;){let d=i[l++];if(a&&"class"===d){if(d=i[l],-1!==U0(d.toLowerCase(),o,0))return!0}else if(1===d){for(;l<i.length&&"string"==typeof(d=i[l++]);)if(d.toLowerCase()===o)return!0;return!1}}return!1}function j0(i){return 4===i.type&&i.value!==s_}function $0(i,o,a){return o===(4!==i.type||a?i.value:s_)}function BD(i,o,a){let l=4;const d=i.attrs||[],f=function Bt(i){for(let o=0;o<i.length;o++)if(io(i[o]))return o;return i.length}(d);let _=!1;for(let E=0;E<o.length;E++){const I=o[E];if("number"!=typeof I){if(!_)if(4&l){if(l=2|1&l,""!==I&&!$0(i,I,a)||""===I&&1===o.length){if(Us(l))return!1;_=!0}}else{const T=8&l?I:o[++E];if(8&l&&null!==i.attrs){if(!B0(i.attrs,T,a)){if(Us(l))return!1;_=!0}continue}const O=H0(8&l?"class":I,d,j0(i),a);if(-1===O){if(Us(l))return!1;_=!0;continue}if(""!==T){let z;z=O>f?"":d[O+1].toLowerCase();const te=8&l?z:null;if(te&&-1!==U0(te,T,0)||2&l&&T!==z){if(Us(l))return!1;_=!0}}}}else{if(!_&&!Us(l)&&!Us(I))return!1;if(_&&Us(I))continue;_=!1,l=I|1&l}}return Us(l)||_}function Us(i){return 0==(1&i)}function H0(i,o,a,l){if(null===o)return-1;let d=0;if(l||!a){let f=!1;for(;d<o.length;){const _=o[d];if(_===i)return d;if(3===_||6===_)f=!0;else{if(1===_||2===_){let E=o[++d];for(;"string"==typeof E;)E=o[++d];continue}if(4===_)break;if(0===_){d+=4;continue}}d+=f?1:2}return-1}return function gf(i,o){let a=i.indexOf(4);if(a>-1)for(a++;a<i.length;){const l=i[a];if("number"==typeof l)return-1;if(l===o)return a;a++}return-1}(o,i)}function pf(i,o,a=!1){for(let l=0;l<o.length;l++)if(BD(i,o[l],a))return!0;return!1}function Vu(i,o){return i?":not("+o.trim()+")":o}function $D(i){let o=i[0],a=1,l=2,d="",f=!1;for(;a<i.length;){let _=i[a];if("string"==typeof _)if(2&l){const E=i[++a];d+="["+_+(E.length>0?'="'+E+'"':"")+"]"}else 8&l?d+="."+_:4&l&&(d+=" "+_);else""!==d&&!Us(_)&&(o+=Vu(f,d),d=""),l=_,f=f||!Us(l);a++}return""!==d&&(o+=Vu(f,d)),o}const Nt={};function q0(i,o=null,a=null,l){const d=mf(i,o,a,l);return d.resolveInjectorInitializers(),d}function mf(i,o=null,a=null,l,d=new Set){const f=[a||Et,gg(i)];return l=l||("object"==typeof i?void 0:he(i)),new _d(f,o||tc(),l||null,d)}let uc=(()=>{class i{static create(a,l){if(Array.isArray(a))return q0({name:""},l,a,"");{const d=a.name??"";return q0({name:d},a.parent,a.providers,d)}}}return i.THROW_IF_NOT_FOUND=un,i.NULL=new pd,i.\u0275prov=Kt({token:i,providedIn:"any",factory:()=>In(pg)}),i.__NG_ELEMENT_ID__=-1,i})();function Vi(i,o=Ke.Default){const a=Se();return null===a?In(i,o):oo(vn(),a,Y(i),o)}function Pg(){throw new Error("invalid")}function cc(i,o){return i<<17|o<<2}function Bs(i){return i>>17&32767}function m_(i){return 2|i}function Oa(i){return(131068&i)>>2}function y_(i,o){return-131069&i|o<<2}function __(i){return 1|i}function iC(i,o){const a=i.contentQueries;if(null!==a)for(let l=0;l<a.length;l+=2){const d=a[l],f=a[l+1];if(-1!==f){const _=i.data[f];sa(d),_.contentQueries(2,o[f],f)}}}function Bg(i,o,a,l,d,f,_,E,I,T,R){const O=o.blueprint.slice();return O[0]=d,O[2]=76|l,(null!==R||i&&1024&i[2])&&(O[2]|=1024),nu(O),O[3]=O[15]=i,O[8]=a,O[10]=_||i&&i[10],O[11]=E||i&&i[11],O[12]=I||i&&i[12]||null,O[9]=T||i&&i[9]||null,O[6]=f,O[20]=function MD(){return xD++}(),O[21]=R,O[16]=2==o.type?i[16]:O,O}function Od(i,o,a,l,d){let f=i.data[o];if(null===f)f=function bf(i,o,a,l,d){const f=ou(),_=ta(),I=i.data[o]=function Tf(i,o,a,l,d,f){return{type:a,index:l,insertBeforeIndex:null,injectorIndex:o?o.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:d,attrs:f,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:o,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,_?f:f&&f.parent,a,o,l,d);return null===i.firstChild&&(i.firstChild=I),null!==f&&(_?null==f.child&&null!==I.parent&&(f.child=I):null===f.next&&(f.next=I)),I}(i,o,a,l,d),function Gp(){return It.lFrame.inI18n}()&&(f.flags|=64);else if(64&f.type){f.type=a,f.value=l,f.attrs=d;const _=function Eo(){const i=It.lFrame,o=i.currentTNode;return i.isParent?o:o.parent}();f.injectorIndex=null===_?-1:_.injectorIndex}return si(f,!0),f}function Jr(i,o,a,l){if(0===a)return-1;const d=o.length;for(let f=0;f<a;f++)o.push(l),i.blueprint.push(l),i.data.push(null);return d}function Df(i,o,a){lu(o);try{const l=i.viewQuery;null!==l&&R_(1,l,a);const d=i.template;null!==d&&cE(i,o,d,1,a),i.firstCreatePass&&(i.firstCreatePass=!1),i.staticContentQueries&&iC(i,o),i.staticViewQueries&&R_(2,i.viewQuery,a);const f=i.components;null!==f&&function sC(i,o){for(let a=0;a<o.length;a++)IE(i,o[a])}(o,f)}catch(l){throw i.firstCreatePass&&(i.incompleteFirstPass=!0,i.firstCreatePass=!1),l}finally{o[2]&=-5,to()}}function La(i,o,a,l){const d=o[2];if(128!=(128&d)){lu(o);try{nu(o),function bl(i){return It.lFrame.bindingIndex=i}(i.bindingStartIndex),null!==a&&cE(i,o,a,2,l);const _=3==(3&d);if(_){const T=i.preOrderCheckHooks;null!==T&&Io(o,T,null)}else{const T=i.preOrderHooks;null!==T&&bo(o,T,0,null),Yc(o,0)}if(function yC(i){for(let o=ls(i);null!==o;o=Yy(o)){if(!o[2])continue;const a=o[9];for(let l=0;l<a.length;l++){const d=a[l],f=d[3];0==(512&d[2])&&yn(f,1),d[2]|=512}}}(o),function mC(i){for(let o=ls(i);null!==o;o=Yy(o))for(let a=10;a<o.length;a++){const l=o[a],d=l[1];Js(l)&&La(d,l,d.template,l[8])}}(o),null!==i.contentQueries&&iC(i,o),_){const T=i.contentCheckHooks;null!==T&&Io(o,T)}else{const T=i.contentHooks;null!==T&&bo(o,T,1),Yc(o,1)}!function Kx(i,o){const a=i.hostBindingOpCodes;if(null!==a)try{for(let l=0;l<a.length;l++){const d=a[l];if(d<0)Hr(~d);else{const f=d,_=a[++l],E=a[++l];zp(_,f),E(2,o[f])}}}finally{Hr(-1)}}(i,o);const E=i.components;null!==E&&function C_(i,o){for(let a=0;a<o.length;a++)_C(i,o[a])}(o,E);const I=i.viewQuery;if(null!==I&&R_(2,I,l),_){const T=i.viewCheckHooks;null!==T&&Io(o,T)}else{const T=i.viewHooks;null!==T&&bo(o,T,2),Yc(o,2)}!0===i.firstUpdatePass&&(i.firstUpdatePass=!1),o[2]&=-41,512&o[2]&&(o[2]&=-513,yn(o[3],-1))}finally{to()}}}function oC(i,o,a,l){const d=o[10],_=Xo(o);try{!_&&d.begin&&d.begin(),_&&Df(i,o,l),La(i,o,a,l)}finally{!_&&d.end&&d.end()}}function cE(i,o,a,l,d){const f=zn(),_=2&l;try{Hr(-1),_&&o.length>22&&function Cd(i,o,a,l){if(!l)if(3==(3&o[2])){const f=i.preOrderCheckHooks;null!==f&&Io(o,f,a)}else{const f=i.preOrderHooks;null!==f&&bo(o,f,0,a)}Hr(a)}(i,o,22,!1),a(l,d)}finally{Hr(f)}}function dE(i){const o=i.tView;return null===o||o.incompleteFirstPass?i.tView=ju(1,null,i.template,i.decls,i.vars,i.directiveDefs,i.pipeDefs,i.viewQuery,i.schemas,i.consts):o}function ju(i,o,a,l,d,f,_,E,I,T){const R=22+l,O=R+d,z=function Cf(i,o){const a=[];for(let l=0;l<o;l++)a.push(l<i?null:Nt);return a}(R,O),te="function"==typeof T?T():T;return z[1]={type:i,blueprint:z,template:a,queries:null,viewQuery:E,declTNode:o,data:z.slice().fill(null,R),bindingStartIndex:R,expandoStartIndex:O,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof f?f():f,pipeRegistry:"function"==typeof _?_():_,firstChild:null,schemas:I,consts:te,incompleteFirstPass:!1}}function Pd(i,o,a,l){const d=CE(o);null===a?d.push(l):(d.push(a),i.firstCreatePass&&Mf(i).push(l,d.length-1))}function hE(i,o,a){for(let l in i)if(i.hasOwnProperty(l)){const d=i[l];(a=null===a?{}:a).hasOwnProperty(l)?a[l].push(o,d):a[l]=[o,d]}return a}function fE(i,o){const l=o.directiveEnd,d=i.data,f=o.attrs,_=[];let E=null,I=null;for(let T=o.directiveStart;T<l;T++){const R=d[T],O=R.inputs,z=null===f||j0(o)?null:A_(O,f);_.push(z),E=hE(O,T,E),I=hE(R.outputs,T,I)}null!==E&&(E.hasOwnProperty("class")&&(o.flags|=16),E.hasOwnProperty("style")&&(o.flags|=32)),o.initialInputs=_,o.inputs=E,o.outputs=I}function Af(i,o,a,l,d,f){const _=f.hostBindings;if(_){let E=i.hostBindingOpCodes;null===E&&(E=i.hostBindingOpCodes=[]);const I=~o.index;(function Fd(i){let o=i.length;for(;o>0;){const a=i[--o];if("number"==typeof a&&a<0)return a}return 0})(E)!=I&&E.push(I),E.push(l,d,_)}}function gE(i,o){null!==i.hostBindings&&i.hostBindings(1,o)}function mE(i,o){o.flags|=2,(i.components||(i.components=[])).push(o.index)}function gC(i,o,a){if(a){if(o.exportAs)for(let l=0;l<o.exportAs.length;l++)a[o.exportAs[l]]=i;yr(o)&&(a[""]=i)}}function yE(i,o,a){i.flags|=1,i.directiveStart=o,i.directiveEnd=o+a,i.providerIndexes=o}function _E(i,o,a,l,d){i.data[l]=d;const f=d.factory||(d.factory=Mi(d.type)),_=new As(f,yr(d),Vi);i.blueprint[l]=_,a[l]=_,Af(i,o,0,l,Jr(i,a,d.hostVars,Nt),d)}function vE(i,o,a){const l=xr(o,i),d=dE(a),f=i[10],_=dc(i,Bg(i,d,null,a.onPush?32:16,l,o,f,f.createRenderer(l,a),null,null,null));i[o.index]=_}function Uo(i,o,a,l,d,f){const _=xr(i,o);!function xf(i,o,a,l,d,f,_){if(null==f)i.removeAttribute(o,d,a);else{const E=null==_?me(f):_(f,l||"",d);i.setAttribute(o,d,E,a)}}(o[11],_,f,i.value,a,l,d)}function wE(i,o,a,l,d,f){const _=f[o];if(null!==_){const E=l.setInput;for(let I=0;I<_.length;){const T=_[I++],R=_[I++],O=_[I++];null!==E?l.setInput(a,O,T,R):a[R]=O}}}function A_(i,o){let a=null,l=0;for(;l<o.length;){const d=o[l];if(0!==d)if(5!==d){if("number"==typeof d)break;i.hasOwnProperty(d)&&(null===a&&(a=[]),a.push(d,i[d],o[l+1])),l+=2}else l+=2;else l+=4}return a}function _C(i,o){const a=jt(o,i);if(Js(a)){const l=a[1];48&a[2]?La(l,a,l.template,a[8]):a[5]>0&&Ld(a)}}function Ld(i){for(let l=ls(i);null!==l;l=Yy(l))for(let d=10;d<l.length;d++){const f=l[d];if(Js(f))if(512&f[2]){const _=f[1];La(_,f,_.template,f[8])}else f[5]>0&&Ld(f)}const a=i[1].components;if(null!==a)for(let l=0;l<a.length;l++){const d=jt(a[l],i);Js(d)&&d[5]>0&&Ld(d)}}function IE(i,o){const a=jt(o,i),l=a[1];(function bE(i,o){for(let a=o.length;a<i.blueprint.length;a++)o.push(i.blueprint[a])})(l,a),Df(l,a,a[8])}function dc(i,o){return i[13]?i[14][4]=o:i[13]=o,i[14]=o,o}function Vd(i){for(;i;){i[2]|=32;const o=Dg(i);if(Rh(i)&&!o)return i;i=o}return null}function R_(i,o,a){sa(0),o(i,a)}function CE(i){return i[7]||(i[7]=[])}function Mf(i){return i.cleanup||(i.cleanup=[])}function SE(i,o){const a=i[9],l=a?a.get(us,null):null;l&&l.handleError(o)}function N_(i,o,a,l,d){for(let f=0;f<a.length;){const _=a[f++],E=a[f++],I=o[_],T=i.data[_];null!==T.setInput?T.setInput(I,d,l,E):I[E]=d}}function jg(i,o,a){let l=a?i.styles:null,d=a?i.classes:null,f=0;if(null!==o)for(let _=0;_<o.length;_++){const E=o[_];"number"==typeof E?f=E:1==f?d=pe(d,E):2==f&&(l=pe(l,E+": "+o[++_]+";"))}a?i.styles=l:i.stylesWithoutHost=l,a?i.classes=d:i.classesWithoutHost=d}function $g(i,o,a,l,d=!1){for(;null!==a;){const f=o[a.index];if(null!==f&&l.push(_n(f)),Ar(f))for(let E=10;E<f.length;E++){const I=f[E],T=I[1].firstChild;null!==T&&$g(I[1],I,T,l)}const _=a.type;if(8&_)$g(i,o,a.child,l);else if(32&_){const E=M0(a,o);let I;for(;I=E();)l.push(I)}else if(16&_){const E=oc(o,a);if(Array.isArray(E))l.push(...E);else{const I=Dg(o[16]);$g(I[1],I,E,l,!0)}}a=d?a.projectionNext:a.next}return l}class Rf{constructor(o,a){this._lView=o,this._cdRefInjectingView=a,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const o=this._lView,a=o[1];return $g(a,o,a.firstChild,[])}get context(){return this._lView[8]}set context(o){this._lView[8]=o}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const o=this._lView[3];if(Ar(o)){const a=o[8],l=a?a.indexOf(this):-1;l>-1&&(lf(o,l),Oo(a,l))}this._attachedToViewContainer=!1}Xy(this._lView[1],this._lView)}onDestroy(o){Pd(this._lView[1],this._lView,null,o)}markForCheck(){Vd(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){!function hc(i,o,a){const l=o[10];l.begin&&l.begin();try{La(i,o,i.template,a)}catch(d){throw SE(o,d),d}finally{l.end&&l.end()}}(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new we(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function k0(i,o){Dd(i,o,o[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(o){if(this._attachedToViewContainer)throw new we(902,!1);this._appRef=o}}class AE extends Rf{constructor(o){super(o),this._view=o}detectChanges(){!function M_(i){!function DE(i){for(let o=0;o<i.components.length;o++){const a=i.components[o],l=rf(a);if(null!==l){const d=l[1];oC(d,l,d.template,a)}}}(i[8])}(this._view)}checkNoChanges(){}get context(){return null}}class O_ extends S{constructor(o){super(),this.ngModule=o}resolveComponentFactory(o){const a=Mt(o);return new Ud(a,this.ngModule)}}function k_(i){const o=[];for(let a in i)i.hasOwnProperty(a)&&o.push({propName:i[a],templateName:a});return o}class ME{constructor(o,a){this.injector=o,this.parentInjector=a}get(o,a,l){const d=this.injector.get(o,wd,l);return d!==wd||a===wd?d:this.parentInjector.get(o,a,l)}}class Ud extends yg{constructor(o,a){super(),this.componentDef=o,this.ngModule=a,this.componentType=o.type,this.selector=function G0(i){return i.map($D).join(",")}(o.selectors),this.ngContentSelectors=o.ngContentSelectors?o.ngContentSelectors:[],this.isBoundToModule=!!a}get inputs(){return k_(this.componentDef.inputs)}get outputs(){return k_(this.componentDef.outputs)}create(o,a,l,d){let f=(d=d||this.ngModule)instanceof Ln?d:d?.injector;f&&null!==this.componentDef.getStandaloneInjector&&(f=this.componentDef.getStandaloneInjector(f)||f);const _=f?new ME(o,f):o,E=_.get(gt,null);if(null===E)throw new we(407,!1);const I=_.get(as,null),T=E.createRenderer(null,this.componentDef),R=this.componentDef.selectors[0][0]||"div",O=l?function aC(i,o,a){return i.selectRootElement(o,a===st.ShadowDom)}(T,l,this.componentDef.encapsulation):rc(E.createRenderer(null,this.componentDef),R,function xE(i){const o=i.toLowerCase();return"svg"===o?"svg":"math"===o?"math":null}(R)),z=this.componentDef.onPush?288:272,te={components:[]},Ee=ju(0,null,null,1,0,null,null,null,null,null),Ne=Bg(null,Ee,te,z,null,null,E,T,I,_,null);let ze,$e;lu(Ne);try{const wt=function wC(i,o,a,l,d,f){const _=a[1];a[22]=i;const I=Od(_,22,2,"#host",null),T=I.mergedAttrs=o.hostAttrs;null!==T&&(jg(I,T,!0),null!==i&&(To(d,i,T),null!==I.classes&&ff(d,i,I.classes),null!==I.styles&&Na(d,i,I.styles)));const R=l.createRenderer(i,o),O=Bg(a,dE(o),null,o.onPush?32:16,a[22],I,l,R,f||null,null,null);return _.firstCreatePass&&(xs(so(I,a),_,o.type),mE(_,I),yE(I,a.length,1)),dc(a,O),a[22]=O}(O,this.componentDef,Ne,E,T);if(O)if(l)To(T,O,["ng-version",_g.full]);else{const{attrs:ye,classes:mt}=function o_(i){const o=[],a=[];let l=1,d=2;for(;l<i.length;){let f=i[l];if("string"==typeof f)2===d?""!==f&&o.push(f,i[++l]):8===d&&a.push(f);else{if(!Us(d))break;d=f}l++}return{attrs:o,classes:a}}(this.componentDef.selectors[0]);ye&&To(T,O,ye),mt&&mt.length>0&&ff(T,O,mt.join(" "))}if($e=Qs(Ee,22),void 0!==a){const ye=$e.projection=[];for(let mt=0;mt<this.ngContentSelectors.length;mt++){const $t=a[mt];ye.push(null!=$t?Array.from($t):null)}}ze=function EC(i,o,a,l,d){const f=a[1],_=function cC(i,o,a){const l=vn();i.firstCreatePass&&(a.providersResolver&&a.providersResolver(a),_E(i,l,o,Jr(i,o,1,null),a),fE(i,l));const d=Xi(o,i,l.directiveStart,l);vr(d,o);const f=xr(l,o);return f&&vr(f,o),d}(f,a,o);if(l.components.push(_),i[8]=_,null!==d)for(const I of d)I(_,o);if(o.contentQueries){const I=vn();o.contentQueries(1,_,I.directiveStart)}const E=vn();return!f.firstCreatePass||null===o.hostBindings&&null===o.hostAttrs||(Hr(E.index),Af(a[1],E,0,E.directiveStart,E.directiveEnd,o),gE(o,_)),_}(wt,this.componentDef,Ne,te,[NE]),Df(Ee,Ne,null)}finally{to()}return new vC(this.componentType,ze,W($e,Ne),Ne,$e)}}class vC extends class Aa{}{constructor(o,a,l,d,f){super(),this.location=l,this._rootLView=d,this._tNode=f,this.instance=a,this.hostView=this.changeDetectorRef=new AE(d),this.componentType=o}setInput(o,a){const l=this._tNode.inputs;let d;if(null!==l&&(d=l[o])){const f=this._rootLView;N_(f[1],f,d,o,a),function pE(i,o){const a=jt(o,i);16&a[2]||(a[2]|=32)}(f,this._tNode.index)}}get injector(){return new ao(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(o){this.hostView.onDestroy(o)}}function NE(){const i=vn();Nl(Se()[1],i)}function Gg(i){let o=function Hg(i){return Object.getPrototypeOf(i.prototype).constructor}(i.type),a=!0;const l=[i];for(;o;){let d;if(yr(i))d=o.\u0275cmp||o.\u0275dir;else{if(o.\u0275cmp)throw new we(903,!1);d=o.\u0275dir}if(d){if(a){l.push(d);const _=i;_.inputs=kE(i.inputs),_.declaredInputs=kE(i.declaredInputs),_.outputs=kE(i.outputs);const E=d.hostBindings;E&&CC(i,E);const I=d.viewQuery,T=d.contentQueries;if(I&&bC(i,I),T&&DC(i,T),le(i.inputs,d.inputs),le(i.declaredInputs,d.declaredInputs),le(i.outputs,d.outputs),yr(d)&&d.data.animation){const R=i.data;R.animation=(R.animation||[]).concat(d.data.animation)}}const f=d.features;if(f)for(let _=0;_<f.length;_++){const E=f[_];E&&E.ngInherit&&E(i),E===Gg&&(a=!1)}}o=Object.getPrototypeOf(o)}!function OE(i){let o=0,a=null;for(let l=i.length-1;l>=0;l--){const d=i[l];d.hostVars=o+=d.hostVars,d.hostAttrs=oa(d.hostAttrs,a=oa(a,d.hostAttrs))}}(l)}function kE(i){return i===Tr?{}:i===Et?[]:i}function bC(i,o){const a=i.viewQuery;i.viewQuery=a?(l,d)=>{o(l,d),a(l,d)}:o}function DC(i,o){const a=i.contentQueries;i.contentQueries=a?(l,d,f)=>{o(l,d,f),a(l,d,f)}:o}function CC(i,o){const a=i.hostBindings;i.hostBindings=a?(l,d)=>{o(l,d),a(l,d)}:o}let Bd=null;function Ua(){if(!Bd){const i=nn.Symbol;if(i&&i.iterator)Bd=i.iterator;else{const o=Object.getOwnPropertyNames(Map.prototype);for(let a=0;a<o.length;++a){const l=o[a];"entries"!==l&&"size"!==l&&Map.prototype[l]===Map.prototype.entries&&(Bd=l)}}}return Bd}function Nf(i){return!!P_(i)&&(Array.isArray(i)||!(i instanceof Map)&&Ua()in i)}function P_(i){return null!==i&&("function"==typeof i||"object"==typeof i)}function Xr(i,o,a){return!Object.is(i[o],a)&&(i[o]=a,!0)}function kf(i,o,a,l){const d=Se();return Xr(d,function eo(){return It.lFrame.bindingIndex++}(),o)&&(Ft(),Uo(function cn(){const i=It.lFrame;return Qs(i.tView,i.selectedIndex)}(),d,i,o,a,l)),kf}function Gd(i,o,a,l,d){const _=d?"class":"style";N_(i,a,o.inputs[_],_,l)}function Vf(i,o,a,l){const d=Se(),f=Ft(),_=22+i,E=d[11],I=d[_]=rc(E,o,function du(){return It.lFrame.currentNamespace}()),T=f.firstCreatePass?function nM(i,o,a,l,d,f,_){const E=o.consts,T=Od(o,i,2,d,yi(E,f));return function Sf(i,o,a,l){let d=!1;if(Qi()){const f=function fC(i,o,a){const l=i.directiveRegistry;let d=null;if(l)for(let f=0;f<l.length;f++){const _=l[f];pf(a,_.selectors,!1)&&(d||(d=[]),xs(so(a,o),i,_.type),yr(_)?(mE(i,a),d.unshift(_)):d.push(_))}return d}(i,o,a),_=null===l?null:{"":-1};if(null!==f){d=!0,yE(a,i.data.length,f.length);for(let R=0;R<f.length;R++){const O=f[R];O.providersResolver&&O.providersResolver(O)}let E=!1,I=!1,T=Jr(i,o,f.length,null);for(let R=0;R<f.length;R++){const O=f[R];a.mergedAttrs=oa(a.mergedAttrs,O.hostAttrs),_E(i,a,o,T,O),gC(T,O,_),null!==O.contentQueries&&(a.flags|=8),(null!==O.hostBindings||null!==O.hostAttrs||0!==O.hostVars)&&(a.flags|=128);const z=O.type.prototype;!E&&(z.ngOnChanges||z.ngOnInit||z.ngDoCheck)&&((i.preOrderHooks||(i.preOrderHooks=[])).push(a.index),E=!0),!I&&(z.ngOnChanges||z.ngDoCheck)&&((i.preOrderCheckHooks||(i.preOrderCheckHooks=[])).push(a.index),I=!0),T++}fE(i,a)}_&&function pC(i,o,a){if(o){const l=i.localNames=[];for(let d=0;d<o.length;d+=2){const f=a[o[d+1]];if(null==f)throw new we(-301,!1);l.push(o[d],f)}}}(a,l,_)}return a.mergedAttrs=oa(a.mergedAttrs,a.attrs),d}(o,a,T,yi(E,_)),null!==T.attrs&&jg(T,T.attrs,!1),null!==T.mergedAttrs&&jg(T,T.mergedAttrs,!0),null!==o.queries&&o.queries.elementStart(o,T),T}(_,f,d,0,o,a,l):f.data[_];si(T,!0);const R=T.mergedAttrs;null!==R&&To(E,I,R);const O=T.classes;null!==O&&ff(E,I,O);const z=T.styles;return null!==z&&Na(E,I,z),64!=(64&T.flags)&&Lu(f,d,I,T),0===function iu(){return It.lFrame.elementDepthCount}()&&vr(I,d),function su(){It.lFrame.elementDepthCount++}(),hl(T)&&(function kd(i,o,a){!Qi()||(function dC(i,o,a,l){const d=a.directiveStart,f=a.directiveEnd;i.firstCreatePass||so(a,o),vr(l,o);const _=a.initialInputs;for(let E=d;E<f;E++){const I=i.data[E],T=yr(I);T&&vE(o,a,I);const R=Xi(o,i,E,a);vr(R,o),null!==_&&wE(0,E-d,R,I,0,_),T&&(jt(a.index,o)[8]=R)}}(i,o,a,xr(a,o)),128==(128&a.flags)&&function hC(i,o,a){const l=a.directiveStart,d=a.directiveEnd,f=a.index,_=function Dl(){return It.lFrame.currentDirectiveIndex}();try{Hr(f);for(let E=l;E<d;E++){const I=i.data[E],T=o[E];au(E),(null!==I.hostBindings||0!==I.hostVars||null!==I.hostAttrs)&&gE(I,T)}}finally{Hr(-1),au(_)}}(i,o,a))}(f,d,T),function T_(i,o,a){if(Ya(o)){const d=o.directiveEnd;for(let f=o.directiveStart;f<d;f++){const _=i.data[f];_.contentQueries&&_.contentQueries(1,a[f],f)}}}(f,T,d)),null!==l&&function S_(i,o,a=xr){const l=o.localNames;if(null!==l){let d=o.index+1;for(let f=0;f<l.length;f+=2){const _=l[f+1],E=-1===_?a(o,i):i[_];i[d++]=E}}}(d,T),Vf}function Yg(){let i=vn();ta()?function na(){It.lFrame.isParent=!1}():(i=i.parent,si(i,!1));const o=i;!function yl(){It.lFrame.elementDepthCount--}();const a=Ft();return a.firstCreatePass&&(Nl(a,i),Ya(i)&&a.queries.elementEnd(i)),null!=o.classesWithoutHost&&function pu(i){return 0!=(16&i.flags)}(o)&&Gd(a,o,Se(),o.classesWithoutHost,!0),null!=o.stylesWithoutHost&&function Jc(i){return 0!=(32&i.flags)}(o)&&Gd(a,o,Se(),o.stylesWithoutHost,!1),Yg}function U_(i,o,a,l){return Vf(i,o,a,l),Yg(),U_}function $_(i){return!!i&&"function"==typeof i.then}function H_(i){return!!i&&"function"==typeof i.subscribe}const UE=H_;function BE(i,o,a,l){const d=Se(),f=Ft(),_=vn();return function VC(i,o,a,l,d,f,_,E){const I=hl(l),R=i.firstCreatePass&&Mf(i),O=o[8],z=CE(o);let te=!0;if(3&l.type||E){const ze=xr(l,o),$e=E?E(ze):ze,wt=z.length,ye=E?$t=>E(_n($t[l.index])):l.index;let mt=null;if(!E&&I&&(mt=function rM(i,o,a,l){const d=i.cleanup;if(null!=d)for(let f=0;f<d.length-1;f+=2){const _=d[f];if(_===a&&d[f+1]===l){const E=o[7],I=d[f+2];return E.length>I?E[I]:null}"string"==typeof _&&(f+=2)}return null}(i,o,d,l.index)),null!==mt)(mt.__ngLastListenerFn__||mt).__ngNextListenerFn__=f,mt.__ngLastListenerFn__=f,te=!1;else{f=$E(l,o,O,f,!1);const $t=a.listen($e,d,f);z.push(f,$t),R&&R.push(d,ye,wt,wt+1)}}else f=$E(l,o,O,f,!1);const Ee=l.outputs;let Ne;if(te&&null!==Ee&&(Ne=Ee[d])){const ze=Ne.length;if(ze)for(let $e=0;$e<ze;$e+=2){const sn=o[Ne[$e]][Ne[$e+1]].subscribe(f),xc=z.length;z.push(f,sn),R&&R.push(d,l.index,xc,-(xc+1))}}}(f,d,d[11],_,i,o,0,l),BE}function jE(i,o,a,l){try{return!1!==a(l)}catch(d){return SE(i,d),!1}}function $E(i,o,a,l,d){return function f(_){if(_===Function)return l;Vd(2&i.flags?jt(i.index,o):o);let I=jE(o,0,l,_),T=f.__ngNextListenerFn__;for(;T;)I=jE(o,0,T,_)&&I,T=T.__ngNextListenerFn__;return d&&!1===I&&(_.preventDefault(),_.returnValue=!1),I}}function KE(i,o,a,l,d){const f=i[a+1],_=null===o;let E=l?Bs(f):Oa(f),I=!1;for(;0!==E&&(!1===I||_);){const R=i[E+1];K_(i[E],o)&&(I=!0,i[E+1]=l?__(R):m_(R)),E=l?Bs(R):Oa(R)}I&&(i[a+1]=l?m_(f):__(f))}function K_(i,o){return null===i||null==o||(Array.isArray(i)?i[1]:i)===o||!(!Array.isArray(i)||"string"!=typeof o)&&ns(i,o)>=0}function jo(i,o){return function or(i,o,a,l){const d=Se(),f=Ft(),_=function Ji(i){const o=It.lFrame,a=o.bindingIndex;return o.bindingIndex=o.bindingIndex+i,a}(2);f.firstUpdatePass&&function ZE(i,o,a,l){const d=i.data;if(null===d[a+1]){const f=d[zn()],_=function Jg(i,o){return o>=i.expandoStartIndex}(i,a);(function tm(i,o){return 0!=(i.flags&(o?16:32))})(f,l)&&null===o&&!_&&(o=!1),o=function QC(i,o,a,l){const d=function ia(i){const o=It.lFrame.currentDirectiveIndex;return-1===o?null:i[o]}(i);let f=l?o.residualClasses:o.residualStyles;if(null===d)0===(l?o.classBindings:o.styleBindings)&&(a=jf(a=Z_(null,i,o,a,l),o.attrs,l),f=null);else{const _=o.directiveStylingLast;if(-1===_||i[_]!==d)if(a=Z_(d,i,o,a,l),null===f){let I=function JC(i,o,a){const l=a?o.classBindings:o.styleBindings;if(0!==Oa(l))return i[Bs(l)]}(i,o,l);void 0!==I&&Array.isArray(I)&&(I=Z_(null,i,o,I[1],l),I=jf(I,o.attrs,l),function YE(i,o,a,l){i[Bs(a?o.classBindings:o.styleBindings)]=l}(i,o,l,I))}else f=function XC(i,o,a){let l;const d=o.directiveEnd;for(let f=1+o.directiveStylingLast;f<d;f++)l=jf(l,i[f].hostAttrs,a);return jf(l,o.attrs,a)}(i,o,l)}return void 0!==f&&(l?o.residualClasses=f:o.residualStyles=f),a}(d,f,o,l),function jC(i,o,a,l,d,f){let _=f?o.classBindings:o.styleBindings,E=Bs(_),I=Oa(_);i[l]=a;let R,T=!1;if(Array.isArray(a)){const O=a;R=O[1],(null===R||ns(O,R)>0)&&(T=!0)}else R=a;if(d)if(0!==I){const z=Bs(i[E+1]);i[l+1]=cc(z,E),0!==z&&(i[z+1]=y_(i[z+1],l)),i[E+1]=function XD(i,o){return 131071&i|o<<17}(i[E+1],l)}else i[l+1]=cc(E,0),0!==E&&(i[E+1]=y_(i[E+1],l)),E=l;else i[l+1]=cc(I,0),0===E?E=l:i[I+1]=y_(i[I+1],l),I=l;T&&(i[l+1]=m_(i[l+1])),KE(i,R,l,!0),KE(i,R,l,!1),function iM(i,o,a,l,d){const f=d?i.residualClasses:i.residualStyles;null!=f&&"string"==typeof o&&ns(f,o)>=0&&(a[l+1]=__(a[l+1]))}(o,R,i,l,f),_=cc(E,I),f?o.classBindings=_:o.styleBindings=_}(d,f,o,a,_,l)}}(f,i,_,l),o!==Nt&&Xr(d,_,o)&&function Y_(i,o,a,l,d,f,_,E){if(!(3&o.type))return;const I=i.data,T=I[E+1];mc(function X0(i){return 1==(1&i)}(T)?em(I,o,a,d,Oa(T),_):void 0)||(mc(f)||function J0(i){return 2==(2&i)}(T)&&(f=em(I,null,a,d,E,_)),function Qr(i,o,a,l,d){if(o)d?i.addClass(a,l):i.removeClass(a,l);else{let f=-1===l.indexOf("-")?void 0:Ls.DashCase;null==d?i.removeStyle(a,l,f):("string"==typeof d&&d.endsWith("!important")&&(d=d.slice(0,-10),f|=Ls.Important),i.setStyle(a,l,d,f))}}(l,_,function ii(i,o){return _n(o[i])}(zn(),a),d,f))}(f,f.data[zn()],d,d[11],i,d[_+1]=function Q_(i,o){return null==i||("string"==typeof o?i+=o:"object"==typeof i&&(i=he(os(i)))),i}(o,a),l,_)}(i,o,null,!0),jo}function Z_(i,o,a,l,d){let f=null;const _=a.directiveEnd;let E=a.directiveStylingLast;for(-1===E?E=a.directiveStart:E++;E<_&&(f=o[E],l=jf(l,f.hostAttrs,d),f!==i);)E++;return null!==i&&(a.directiveStylingLast=E),l}function jf(i,o,a){const l=a?1:2;let d=-1;if(null!==o)for(let f=0;f<o.length;f++){const _=o[f];"number"==typeof _?d=_:d===l&&(Array.isArray(i)||(i=void 0===i?[]:["",i]),Mr(i,_,!!a||o[++f]))}return void 0===i?null:i}function em(i,o,a,l,d,f){const _=null===o;let E;for(;d>0;){const I=i[d],T=Array.isArray(I),R=T?I[1]:I,O=null===R;let z=a[d+1];z===Nt&&(z=O?Et:void 0);let te=O?ma(z,l):R===l?z:void 0;if(T&&!mc(te)&&(te=ma(I,l)),mc(te)&&(E=te,_))return E;const Ee=i[d+1];d=_?Bs(Ee):Oa(Ee)}if(null!==o){let I=f?o.residualClasses:o.residualStyles;null!=I&&(E=ma(I,l))}return E}function mc(i){return void 0!==i}function QE(i,o=""){const a=Se(),l=Ft(),d=i+22,f=l.firstCreatePass?Od(l,d,1,o,null):l.data[d],_=a[d]=function Tg(i,o){return i.createText(o)}(a[11],o);Lu(l,a,_,f),si(f,!1)}const yc=void 0;var uT=["en",[["a","p"],["AM","PM"],yc],[["AM","PM"],yc,yc],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],yc,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],yc,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",yc,"{1} 'at' {0}",yc],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function aT(i){const a=Math.floor(Math.abs(i)),l=i.toString().replace(/^[^.]*\.?/,"").length;return 1===a&&0===l?1:5}];let Wd={};function uv(i){const o=function lv(i){return i.toLowerCase().replace(/_/g,"-")}(i);let a=qf(o);if(a)return a;const l=o.split("-")[0];if(a=qf(l),a)return a;if("en"===l)return uT;throw new we(701,!1)}function fI(i){return uv(i)[vt.PluralCase]}function qf(i){return i in Wd||(Wd[i]=nn.ng&&nn.ng.common&&nn.ng.common.locales&&nn.ng.common.locales[i]),Wd[i]}var vt=(()=>((vt=vt||{})[vt.LocaleId=0]="LocaleId",vt[vt.DayPeriodsFormat=1]="DayPeriodsFormat",vt[vt.DayPeriodsStandalone=2]="DayPeriodsStandalone",vt[vt.DaysFormat=3]="DaysFormat",vt[vt.DaysStandalone=4]="DaysStandalone",vt[vt.MonthsFormat=5]="MonthsFormat",vt[vt.MonthsStandalone=6]="MonthsStandalone",vt[vt.Eras=7]="Eras",vt[vt.FirstDayOfWeek=8]="FirstDayOfWeek",vt[vt.WeekendRange=9]="WeekendRange",vt[vt.DateFormat=10]="DateFormat",vt[vt.TimeFormat=11]="TimeFormat",vt[vt.DateTimeFormat=12]="DateTimeFormat",vt[vt.NumberSymbols=13]="NumberSymbols",vt[vt.NumberFormats=14]="NumberFormats",vt[vt.CurrencyCode=15]="CurrencyCode",vt[vt.CurrencySymbol=16]="CurrencySymbol",vt[vt.CurrencyName=17]="CurrencyName",vt[vt.Currencies=18]="Currencies",vt[vt.Directionality=19]="Directionality",vt[vt.PluralCase=20]="PluralCase",vt[vt.ExtraData=21]="ExtraData",vt))();const Kd="en-US";let fT=Kd;function mm(i,o,a,l,d){if(i=Y(i),Array.isArray(i))for(let f=0;f<i.length;f++)mm(i[f],o,a,l,d);else{const f=Ft(),_=Se();let E=po(i)?i:Y(i.provide),I=Ta(i);const T=vn(),R=1048575&T.providerIndexes,O=T.directiveStart,z=T.providerIndexes>>20;if(po(i)||!i.multi){const te=new As(I,d,Vi),Ee=Ev(E,o,d?R:R+z,O);-1===Ee?(xs(so(T,_),f,E),Yf(f,i,o.length),o.push(E),T.directiveStart++,T.directiveEnd++,d&&(T.providerIndexes+=1048576),a.push(te),_.push(te)):(a[Ee]=te,_[Ee]=te)}else{const te=Ev(E,o,R+z,O),Ee=Ev(E,o,R,R+z),Ne=te>=0&&a[te],ze=Ee>=0&&a[Ee];if(d&&!ze||!d&&!Ne){xs(so(T,_),f,E);const $e=function Iv(i,o,a,l,d){const f=new As(i,a,Vi);return f.multi=[],f.index=o,f.componentProviders=0,wv(f,d,l&&!a),f}(d?ym:OI,a.length,d,l,I);!d&&ze&&(a[Ee].providerFactory=$e),Yf(f,i,o.length,0),o.push(E),T.directiveStart++,T.directiveEnd++,d&&(T.providerIndexes+=1048576),a.push($e),_.push($e)}else Yf(f,i,te>-1?te:Ee,wv(a[d?Ee:te],I,!d&&l));!d&&l&&ze&&a[Ee].componentProviders++}}}function Yf(i,o,a,l){const d=po(o),f=function Lo(i){return!!i.useClass}(o);if(d||f){const I=(f?Y(o.useClass):o).prototype.ngOnDestroy;if(I){const T=i.destroyHooks||(i.destroyHooks=[]);if(!d&&o.multi){const R=T.indexOf(a);-1===R?T.push(a,[l,I]):T[R+1].push(l,I)}else T.push(a,I)}}}function wv(i,o,a){return a&&i.componentProviders++,i.multi.push(o)-1}function Ev(i,o,a,l){for(let d=a;d<l;d++)if(o[d]===i)return d;return-1}function OI(i,o,a,l){return Qf(this.multi,[])}function ym(i,o,a,l){const d=this.multi;let f;if(this.providerFactory){const _=this.providerFactory.componentProviders,E=Xi(a,a[1],this.providerFactory.index,l);f=E.slice(0,_),Qf(d,f);for(let I=_;I<E.length;I++)f.push(E[I])}else f=[],Qf(d,f);return f}function Qf(i,o){for(let a=0;a<i.length;a++)o.push((0,i[a])());return o}function _m(i,o=[]){return a=>{a.providersResolver=(l,d)=>function Qd(i,o,a){const l=Ft();if(l.firstCreatePass){const d=yr(i);mm(a,l.data,l.blueprint,d,!0),mm(o,l.data,l.blueprint,d,!1)}}(l,d?d(i):i,o)}}class Jd{}class kI{}function bv(i,o){return new PI(i,o??null)}class PI extends Jd{constructor(o,a){super(),this._parent=a,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new O_(this);const l=Sr(o);this._bootstrapComponents=Ma(l.bootstrap),this._r3Injector=mf(o,a,[{provide:Jd,useValue:this},{provide:S,useValue:this.componentFactoryResolver}],he(o),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(o)}get injector(){return this._r3Injector}destroy(){const o=this._r3Injector;!o.destroyed&&o.destroy(),this.destroyCbs.forEach(a=>a()),this.destroyCbs=null}onDestroy(o){this.destroyCbs.push(o)}}class Dv extends kI{constructor(o){super(),this.moduleType=o}create(o){return new PI(this.moduleType,o)}}class ui extends Jd{constructor(o,a,l){super(),this.componentFactoryResolver=new O_(this),this.instance=null;const d=new _d([...o,{provide:Jd,useValue:this},{provide:S,useValue:this.componentFactoryResolver}],a||tc(),l,new Set(["environment"]));this.injector=d,d.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(o){this.injector.onDestroy(o)}}function vc(i,o,a=null){return new ui(i,o,a).injector}let UT=(()=>{class i{constructor(a){this._injector=a,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(a){if(!a.standalone)return null;if(!this.cachedInjectors.has(a.id)){const l=oi(0,a.type),d=l.length>0?vc([l],this._injector,`Standalone[${a.type.name}]`):null;this.cachedInjectors.set(a.id,d)}return this.cachedInjectors.get(a.id)}ngOnDestroy(){try{for(const a of this.cachedInjectors.values())null!==a&&a.destroy()}finally{this.cachedInjectors.clear()}}}return i.\u0275prov=Kt({token:i,providedIn:"environment",factory:()=>new i(In(Ln))}),i})();function Xd(i){i.getStandaloneInjector=o=>o.get(UT).getOrCreateStandaloneInjector(i)}function Vv(i){return o=>{setTimeout(i,void 0,o)}}const $o=class Dm extends g.x{constructor(o=!1){super(),this.__isAsync=o}emit(o){super.next(o)}subscribe(o,a,l){let d=o,f=a||(()=>null),_=l;if(o&&"object"==typeof o){const I=o;d=I.next?.bind(I),f=I.error?.bind(I),_=I.complete?.bind(I)}this.__isAsync&&(f=Vv(f),d&&(d=Vv(d)),_&&(_=Vv(_)));const E=super.subscribe({next:d,error:f,complete:_});return o instanceof ee.w0&&o.add(E),E}};function th(){return this._results[Ua()]()}class Uv{constructor(o=!1){this._emitDistinctChangesOnly=o,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const a=Ua(),l=Uv.prototype;l[a]||(l[a]=th)}get changes(){return this._changes||(this._changes=new $o)}get(o){return this._results[o]}map(o){return this._results.map(o)}filter(o){return this._results.filter(o)}find(o){return this._results.find(o)}reduce(o,a){return this._results.reduce(o,a)}forEach(o){this._results.forEach(o)}some(o){return this._results.some(o)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(o,a){const l=this;l.dirty=!1;const d=zr(o);(this._changesDetected=!function bu(i,o,a){if(i.length!==o.length)return!1;for(let l=0;l<i.length;l++){let d=i[l],f=o[l];if(a&&(d=a(d),f=a(f)),f!==d)return!1}return!0}(l._results,d,a))&&(l._results=d,l.length=d.length,l.last=d[this.length-1],l.first=d[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let tp=(()=>{class i{}return i.__NG_ELEMENT_ID__=Cm,i})();const Ec=tp,qI=class extends Ec{constructor(o,a,l){super(),this._declarationLView=o,this._declarationTContainer=a,this.elementRef=l}createEmbeddedView(o,a){const l=this._declarationTContainer.tViews,d=Bg(this._declarationLView,l,o,16,null,l.declTNode,null,null,null,null,a||null);d[17]=this._declarationLView[this._declarationTContainer.index];const _=this._declarationLView[19];return null!==_&&(d[19]=_.createEmbeddedView(l)),Df(l,d,o),new Rf(d)}};function Cm(){return np(vn(),Se())}function np(i,o){return 4&i.type?new qI(o,i,W(i,o)):null}let Hu=(()=>{class i{}return i.__NG_ELEMENT_ID__=WI,i})();function WI(){return jv(vn(),Se())}const Di=Hu,Bv=class extends Di{constructor(o,a,l){super(),this._lContainer=o,this._hostTNode=a,this._hostLView=l}get element(){return W(this._hostTNode,this._hostLView)}get injector(){return new ao(this._hostTNode,this._hostLView)}get parentInjector(){const o=_u(this._hostTNode,this._hostLView);if(ed(o)){const a=ua(o,this._hostLView),l=rr(o);return new ao(a[1].data[l+8],a)}return new ao(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(o){const a=nh(this._lContainer);return null!==a&&a[o]||null}get length(){return this._lContainer.length-10}createEmbeddedView(o,a,l){let d,f;"number"==typeof l?d=l:null!=l&&(d=l.index,f=l.injector);const _=o.createEmbeddedView(a||{},f);return this.insert(_,d),_}createComponent(o,a,l,d,f){const _=o&&!function dr(i){return"function"==typeof i}(o);let E;if(_)E=a;else{const O=a||{};E=O.index,l=O.injector,d=O.projectableNodes,f=O.environmentInjector||O.ngModuleRef}const I=_?o:new Ud(Mt(o)),T=l||this.parentInjector;if(!f&&null==I.ngModule){const z=(_?T:this.parentInjector).get(Ln,null);z&&(f=z)}const R=I.create(T,d,void 0,f);return this.insert(R.hostView,E),R}insert(o,a){const l=o._lView,d=l[1];if(function tu(i){return Ar(i[3])}(l)){const R=this.indexOf(o);if(-1!==R)this.detach(R);else{const O=l[3],z=new Bv(O,O[6],O[3]);z.detach(z.indexOf(o))}}const f=this._adjustIndex(a),_=this._lContainer;!function uf(i,o,a,l){const d=10+l,f=a.length;l>0&&(a[d-1][4]=o),l<f-10?(o[4]=a[d],Vl(a,10+l,o)):(a.push(o),o[4]=null),o[3]=a;const _=o[17];null!==_&&a!==_&&function ic(i,o){const a=i[9];o[16]!==o[3][3][16]&&(i[2]=!0),null===a?i[9]=[o]:a.push(o)}(_,o);const E=o[19];null!==E&&E.insertView(i),o[2]|=64}(d,l,_,f);const E=r_(f,_),I=l[11],T=Fu(I,_[7]);return null!==T&&function Qy(i,o,a,l,d,f){l[0]=d,l[6]=o,Dd(i,l,a,1,d,f)}(d,_[6],I,l,T,E),o.attachToViewContainerRef(),Vl(rh(_),f,o),o}move(o,a){return this.insert(o,a)}indexOf(o){const a=nh(this._lContainer);return null!==a?a.indexOf(o):-1}remove(o){const a=this._adjustIndex(o,-1),l=lf(this._lContainer,a);l&&(Oo(rh(this._lContainer),a),Xy(l[1],l))}detach(o){const a=this._adjustIndex(o,-1),l=lf(this._lContainer,a);return l&&null!=Oo(rh(this._lContainer),a)?new Rf(l):null}_adjustIndex(o,a=0){return o??this.length+a}};function nh(i){return i[8]}function rh(i){return i[8]||(i[8]=[])}function jv(i,o){let a;const l=o[i.index];if(Ar(l))a=l;else{let d;if(8&i.type)d=_n(l);else{const f=o[11];d=f.createComment("");const _=xr(i,o);sc(f,Fu(f,_),d,function t_(i,o){return i.nextSibling(o)}(f,_),!1)}o[i.index]=a=function EE(i,o,a,l){return new Array(i,!0,!1,o,null,0,l,a,null,null)}(l,o,d,i),dc(o,a)}return new Bv(a,i,o)}class Ic{constructor(o){this.queryList=o,this.matches=null}clone(){return new Ic(this.queryList)}setDirty(){this.queryList.setDirty()}}class rp{constructor(o=[]){this.queries=o}createEmbeddedView(o){const a=o.queries;if(null!==a){const l=null!==o.contentQueries?o.contentQueries[0]:a.length,d=[];for(let f=0;f<l;f++){const _=a.getByIndex(f);d.push(this.queries[_.indexInDeclarationView].clone())}return new rp(d)}return null}insertView(o){this.dirtyQueriesWithMatches(o)}detachView(o){this.dirtyQueriesWithMatches(o)}dirtyQueriesWithMatches(o){for(let a=0;a<this.queries.length;a++)null!==Gu(o,a).matches&&this.queries[a].setDirty()}}class Tm{constructor(o,a,l=null){this.predicate=o,this.flags=a,this.read=l}}class ip{constructor(o=[]){this.queries=o}elementStart(o,a){for(let l=0;l<this.queries.length;l++)this.queries[l].elementStart(o,a)}elementEnd(o){for(let a=0;a<this.queries.length;a++)this.queries[a].elementEnd(o)}embeddedTView(o){let a=null;for(let l=0;l<this.length;l++){const d=null!==a?a.length:0,f=this.getByIndex(l).embeddedTView(o,d);f&&(f.indexInDeclarationView=l,null!==a?a.push(f):a=[f])}return null!==a?new ip(a):null}template(o,a){for(let l=0;l<this.queries.length;l++)this.queries[l].template(o,a)}getByIndex(o){return this.queries[o]}get length(){return this.queries.length}track(o){this.queries.push(o)}}class ih{constructor(o,a=-1){this.metadata=o,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=a}elementStart(o,a){this.isApplyingToNode(a)&&this.matchTNode(o,a)}elementEnd(o){this._declarationNodeIndex===o.index&&(this._appliesToNextNode=!1)}template(o,a){this.elementStart(o,a)}embeddedTView(o,a){return this.isApplyingToNode(o)?(this.crossesNgTemplate=!0,this.addMatch(-o.index,a),new ih(this.metadata)):null}isApplyingToNode(o){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const a=this._declarationNodeIndex;let l=o.parent;for(;null!==l&&8&l.type&&l.index!==a;)l=l.parent;return a===(null!==l?l.index:-1)}return this._appliesToNextNode}matchTNode(o,a){const l=this.metadata.predicate;if(Array.isArray(l))for(let d=0;d<l.length;d++){const f=l[d];this.matchTNodeWithReadOption(o,a,sp(a,f)),this.matchTNodeWithReadOption(o,a,So(a,o,f,!1,!1))}else l===tp?4&a.type&&this.matchTNodeWithReadOption(o,a,-1):this.matchTNodeWithReadOption(o,a,So(a,o,l,!1,!1))}matchTNodeWithReadOption(o,a,l){if(null!==l){const d=this.metadata.read;if(null!==d)if(d===ue||d===Hu||d===tp&&4&a.type)this.addMatch(a.index,-2);else{const f=So(a,o,d,!1,!1);null!==f&&this.addMatch(a.index,f)}else this.addMatch(a.index,l)}}addMatch(o,a){null===this.matches?this.matches=[o,a]:this.matches.push(o,a)}}function sp(i,o){const a=i.localNames;if(null!==a)for(let l=0;l<a.length;l+=2)if(a[l]===o)return a[l+1];return null}function WT(i,o,a,l){return-1===a?function ZI(i,o){return 11&i.type?W(i,o):4&i.type?np(i,o):null}(o,i):-2===a?function Hv(i,o,a){return a===ue?W(o,i):a===tp?np(o,i):a===Hu?jv(o,i):void 0}(i,o,l):Xi(i,i[1],a,o)}function op(i,o,a,l){const d=o[19].queries[l];if(null===d.matches){const f=i.data,_=a.matches,E=[];for(let I=0;I<_.length;I+=2){const T=_[I];E.push(T<0?null:WT(o,f[T],_[I+1],a.metadata.read))}d.matches=E}return d.matches}function ap(i,o,a,l){const d=i.queries.getByIndex(a),f=d.matches;if(null!==f){const _=op(i,o,d,a);for(let E=0;E<f.length;E+=2){const I=f[E];if(I>0)l.push(_[E/2]);else{const T=f[E+1],R=o[-I];for(let O=10;O<R.length;O++){const z=R[O];z[17]===z[3]&&ap(z[1],z,T,l)}if(null!==R[9]){const O=R[9];for(let z=0;z<O.length;z++){const te=O[z];ap(te[1],te,T,l)}}}}}return l}function Gv(i){const o=Se(),a=Ft(),l=Cl();sa(l+1);const d=Gu(a,l);if(i.dirty&&Xo(o)===(2==(2&d.metadata.flags))){if(null===d.matches)i.reset([]);else{const f=d.crossesNgTemplate?ap(a,o,l,[]):op(a,o,d,l);i.reset(f,Fe),i.notifyOnChanges()}return!0}return!1}function zv(i,o,a,l){const d=Ft();if(d.firstCreatePass){const f=vn();(function lp(i,o,a){null===i.queries&&(i.queries=new ip),i.queries.track(new ih(o,a))})(d,new Tm(o,a,l),f.index),function cp(i,o){const a=i.contentQueries||(i.contentQueries=[]);o!==(a.length?a[a.length-1]:-1)&&a.push(i.queries.length-1,o)}(d,i),2==(2&a)&&(d.staticContentQueries=!0)}!function qv(i,o,a){const l=new Uv(4==(4&a));Pd(i,o,l,l.destroy),null===o[19]&&(o[19]=new rp),o[19].queries.push(new Ic(l))}(d,Se(),a)}function QI(){return function up(i,o){return i[19].queries[o].queryList}(Se(),Cl())}function Gu(i,o){return i.queries.getByIndex(o)}function fp(...i){}const pp=new an("Application Initializer");let gp=(()=>{class i{constructor(a){this.appInits=a,this.resolve=fp,this.reject=fp,this.initialized=!1,this.done=!1,this.donePromise=new Promise((l,d)=>{this.resolve=l,this.reject=d})}runInitializers(){if(this.initialized)return;const a=[],l=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let d=0;d<this.appInits.length;d++){const f=this.appInits[d]();if($_(f))a.push(f);else if(UE(f)){const _=new Promise((E,I)=>{f.subscribe({complete:E,error:I})});a.push(_)}}Promise.all(a).then(()=>{l()}).catch(d=>{this.reject(d)}),0===a.length&&l(),this.initialized=!0}}return i.\u0275fac=function(a){return new(a||i)(In(pp,8))},i.\u0275prov=Kt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const Go=new an("AppId",{providedIn:"root",factory:function iw(){return`${mp()}${mp()}${mp()}`}});function mp(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const fh=new an("Platform Initializer"),ob=new an("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),Pm=new an("appBootstrapListener");let ow=(()=>{class i{log(a){console.log(a)}warn(a){console.warn(a)}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Kt({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();const Lm=new an("LocaleId",{providedIn:"root",factory:()=>D(Lm,Ke.Optional|Ke.SkipSelf)||function Fm(){return typeof $localize<"u"&&$localize.locale||Kd}()}),ab=new an("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class aw{constructor(o,a){this.ngModuleFactory=o,this.componentFactories=a}}let uw=(()=>{class i{compileModuleSync(a){return new Dv(a)}compileModuleAsync(a){return Promise.resolve(this.compileModuleSync(a))}compileModuleAndAllComponentsSync(a){const l=this.compileModuleSync(a),f=Ma(Sr(a).declarations).reduce((_,E)=>{const I=Mt(E);return I&&_.push(new Ud(I)),_},[]);return new aw(l,f)}compileModuleAndAllComponentsAsync(a){return Promise.resolve(this.compileModuleAndAllComponentsSync(a))}clearCache(){}clearCacheFor(a){}getModuleId(a){}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Kt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const cb=(()=>Promise.resolve(0))();function Um(i){typeof Zone>"u"?cb.then(()=>{i&&i.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",i)}class Mn{constructor({enableLongStackTrace:o=!1,shouldCoalesceEventChangeDetection:a=!1,shouldCoalesceRunChangeDetection:l=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new $o(!1),this.onMicrotaskEmpty=new $o(!1),this.onStable=new $o(!1),this.onError=new $o(!1),typeof Zone>"u")throw new we(908,!1);Zone.assertZonePatched();const d=this;if(d._nesting=0,d._outer=d._inner=Zone.current,Zone.AsyncStackTaggingZoneSpec){const f=Zone.AsyncStackTaggingZoneSpec;d._inner=d._inner.fork(new f("Angular"))}Zone.TaskTrackingZoneSpec&&(d._inner=d._inner.fork(new Zone.TaskTrackingZoneSpec)),o&&Zone.longStackTraceZoneSpec&&(d._inner=d._inner.fork(Zone.longStackTraceZoneSpec)),d.shouldCoalesceEventChangeDetection=!l&&a,d.shouldCoalesceRunChangeDetection=l,d.lastRequestAnimationFrameId=-1,d.nativeRequestAnimationFrame=function Bm(){let i=nn.requestAnimationFrame,o=nn.cancelAnimationFrame;if(typeof Zone<"u"&&i&&o){const a=i[Zone.__symbol__("OriginalDelegate")];a&&(i=a);const l=o[Zone.__symbol__("OriginalDelegate")];l&&(o=l)}return{nativeRequestAnimationFrame:i,nativeCancelAnimationFrame:o}}().nativeRequestAnimationFrame,function uS(i){const o=()=>{!function ph(i){i.isCheckStableRunning||-1!==i.lastRequestAnimationFrameId||(i.lastRequestAnimationFrameId=i.nativeRequestAnimationFrame.call(nn,()=>{i.fakeTopEventTask||(i.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{i.lastRequestAnimationFrameId=-1,dw(i),i.isCheckStableRunning=!0,jm(i),i.isCheckStableRunning=!1},void 0,()=>{},()=>{})),i.fakeTopEventTask.invoke()}),dw(i))}(i)};i._inner=i._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(a,l,d,f,_,E)=>{try{return $m(i),a.invokeTask(d,f,_,E)}finally{(i.shouldCoalesceEventChangeDetection&&"eventTask"===f.type||i.shouldCoalesceRunChangeDetection)&&o(),hb(i)}},onInvoke:(a,l,d,f,_,E,I)=>{try{return $m(i),a.invoke(d,f,_,E,I)}finally{i.shouldCoalesceRunChangeDetection&&o(),hb(i)}},onHasTask:(a,l,d,f)=>{a.hasTask(d,f),l===d&&("microTask"==f.change?(i._hasPendingMicrotasks=f.microTask,dw(i),jm(i)):"macroTask"==f.change&&(i.hasPendingMacrotasks=f.macroTask))},onHandleError:(a,l,d,f)=>(a.handleError(d,f),i.runOutsideAngular(()=>i.onError.emit(f)),!1)})}(d)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Mn.isInAngularZone())throw new we(909,!1)}static assertNotInAngularZone(){if(Mn.isInAngularZone())throw new we(909,!1)}run(o,a,l){return this._inner.run(o,a,l)}runTask(o,a,l,d){const f=this._inner,_=f.scheduleEventTask("NgZoneEvent: "+d,o,db,fp,fp);try{return f.runTask(_,a,l)}finally{f.cancelTask(_)}}runGuarded(o,a,l){return this._inner.runGuarded(o,a,l)}runOutsideAngular(o){return this._outer.run(o)}}const db={};function jm(i){if(0==i._nesting&&!i.hasPendingMicrotasks&&!i.isStable)try{i._nesting++,i.onMicrotaskEmpty.emit(null)}finally{if(i._nesting--,!i.hasPendingMicrotasks)try{i.runOutsideAngular(()=>i.onStable.emit(null))}finally{i.isStable=!0}}}function dw(i){i.hasPendingMicrotasks=!!(i._hasPendingMicrotasks||(i.shouldCoalesceEventChangeDetection||i.shouldCoalesceRunChangeDetection)&&-1!==i.lastRequestAnimationFrameId)}function $m(i){i._nesting++,i.isStable&&(i.isStable=!1,i.onUnstable.emit(null))}function hb(i){i._nesting--,jm(i)}class lS{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new $o,this.onMicrotaskEmpty=new $o,this.onStable=new $o,this.onError=new $o}run(o,a,l){return o.apply(a,l)}runGuarded(o,a,l){return o.apply(a,l)}runOutsideAngular(o){return o()}runTask(o,a,l,d){return o.apply(a,l)}}const hw=new an(""),fb=new an("");let fr,Hm=(()=>{class i{constructor(a,l,d){this._ngZone=a,this.registry=l,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,fr||(function gb(i){fr=i}(d),d.addToWindow(l)),this._watchAngularEvents(),a.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Mn.assertNotInAngularZone(),Um(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Um(()=>{for(;0!==this._callbacks.length;){let a=this._callbacks.pop();clearTimeout(a.timeoutId),a.doneCb(this._didWork)}this._didWork=!1});else{let a=this.getPendingTasks();this._callbacks=this._callbacks.filter(l=>!l.updateCb||!l.updateCb(a)||(clearTimeout(l.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(a=>({source:a.source,creationLocation:a.creationLocation,data:a.data})):[]}addCallback(a,l,d){let f=-1;l&&l>0&&(f=setTimeout(()=>{this._callbacks=this._callbacks.filter(_=>_.timeoutId!==f),a(this._didWork,this.getPendingTasks())},l)),this._callbacks.push({doneCb:a,timeoutId:f,updateCb:d})}whenStable(a,l,d){if(d&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(a,l,d),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(a){this.registry.registerApplication(a,this)}unregisterApplication(a){this.registry.unregisterApplication(a)}findProviders(a,l,d){return[]}}return i.\u0275fac=function(a){return new(a||i)(In(Mn),In(pb),In(fb))},i.\u0275prov=Kt({token:i,factory:i.\u0275fac}),i})(),pb=(()=>{class i{constructor(){this._applications=new Map}registerApplication(a,l){this._applications.set(a,l)}unregisterApplication(a){this._applications.delete(a)}unregisterAllApplications(){this._applications.clear()}getTestability(a){return this._applications.get(a)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(a,l=!0){return fr?.findTestabilityInTree(this,a,l)??null}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Kt({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})(),fs=null;const Ga=new an("AllowMultipleToken"),yp=new an("PlatformDestroyListeners");class fw{constructor(o,a){this.name=o,this.token=a}}function ce(i,o,a=[]){const l=`Platform: ${o}`,d=new an(l);return(f=[])=>{let _=pw();if(!_||_.injector.get(Ga,!1)){const E=[...a,...f,{provide:d,useValue:!0}];i?i(E):function et(i){if(fs&&!fs.get(Ga,!1))throw new we(400,!1);fs=i;const o=i.get(yb);(function mb(i){const o=i.get(fh,null);o&&o.forEach(a=>a())})(i)}(function Ir(i=[],o){return uc.create({name:o,providers:[{provide:Nu,useValue:"platform"},{provide:yp,useValue:new Set([()=>fs=null])},...i]})}(E,l))}return function Re(i){const o=pw();if(!o)throw new we(401,!1);return o}()}}function pw(){return fs?.get(yb)??null}let yb=(()=>{class i{constructor(a){this._injector=a,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(a,l){const d=function vb(i,o){let a;return a="noop"===i?new lS:("zone.js"===i?void 0:i)||new Mn(o),a}(l?.ngZone,function _b(i){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!i||!i.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!i||!i.ngZoneRunCoalescing)||!1}}(l)),f=[{provide:Mn,useValue:d}];return d.run(()=>{const _=uc.create({providers:f,parent:this.injector,name:a.moduleType.name}),E=a.create(_),I=E.injector.get(us,null);if(!I)throw new we(402,!1);return d.runOutsideAngular(()=>{const T=d.onError.subscribe({next:R=>{I.handleError(R)}});E.onDestroy(()=>{mw(this._modules,E),T.unsubscribe()})}),function wb(i,o,a){try{const l=a();return $_(l)?l.catch(d=>{throw o.runOutsideAngular(()=>i.handleError(d)),d}):l}catch(l){throw o.runOutsideAngular(()=>i.handleError(l)),l}}(I,d,()=>{const T=E.injector.get(gp);return T.runInitializers(),T.donePromise.then(()=>(function gI(i){Ut(i,"Expected localeId to be defined"),"string"==typeof i&&(fT=i.toLowerCase().replace(/_/g,"-"))}(E.injector.get(Lm,Kd)||Kd),this._moduleDoBootstrap(E),E))})})}bootstrapModule(a,l=[]){const d=gw({},l);return function ke(i,o,a){const l=new Dv(a);return Promise.resolve(l)}(0,0,a).then(f=>this.bootstrapModuleFactory(f,d))}_moduleDoBootstrap(a){const l=a.injector.get(Gm);if(a._bootstrapComponents.length>0)a._bootstrapComponents.forEach(d=>l.bootstrap(d));else{if(!a.instance.ngDoBootstrap)throw new we(403,!1);a.instance.ngDoBootstrap(l)}this._modules.push(a)}onDestroy(a){this._destroyListeners.push(a)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new we(404,!1);this._modules.slice().forEach(l=>l.destroy()),this._destroyListeners.forEach(l=>l());const a=this._injector.get(yp,null);a&&(a.forEach(l=>l()),a.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return i.\u0275fac=function(a){return new(a||i)(In(uc))},i.\u0275prov=Kt({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();function gw(i,o){return Array.isArray(o)?o.reduce(gw,i):{...i,...o}}let Gm=(()=>{class i{constructor(a,l,d){this._zone=a,this._injector=l,this._exceptionHandler=d,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const f=new k.y(E=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{E.next(this._stable),E.complete()})}),_=new k.y(E=>{let I;this._zone.runOutsideAngular(()=>{I=this._zone.onStable.subscribe(()=>{Mn.assertNotInAngularZone(),Um(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,E.next(!0))})})});const T=this._zone.onUnstable.subscribe(()=>{Mn.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{E.next(!1)}))});return()=>{I.unsubscribe(),T.unsubscribe()}});this.isStable=(0,oe.T)(f,_.pipe((0,re.B)()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(a,l){const d=a instanceof yg;if(!this._injector.get(gp).done)throw!d&&Ai(a),new we(405,false);let _;_=d?a:this._injector.get(S).resolveComponentFactory(a),this.componentTypes.push(_.componentType);const E=function bc(i){return i.isBoundToModule}(_)?void 0:this._injector.get(Jd),T=_.create(uc.NULL,[],l||_.selector,E),R=T.location.nativeElement,O=T.injector.get(hw,null);return O?.registerApplication(R),T.onDestroy(()=>{this.detachView(T.hostView),mw(this.components,T),O?.unregisterApplication(R)}),this._loadComponent(T),T}tick(){if(this._runningTick)throw new we(101,!1);try{this._runningTick=!0;for(let a of this._views)a.detectChanges()}catch(a){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(a))}finally{this._runningTick=!1}}attachView(a){const l=a;this._views.push(l),l.attachToAppRef(this)}detachView(a){const l=a;mw(this._views,l),l.detachFromAppRef()}_loadComponent(a){this.attachView(a.hostView),this.tick(),this.components.push(a),this._injector.get(Pm,[]).concat(this._bootstrapListeners).forEach(d=>d(a))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(a=>a()),this._views.slice().forEach(a=>a.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(a){return this._destroyListeners.push(a),()=>mw(this._destroyListeners,a)}destroy(){if(this._destroyed)throw new we(406,!1);const a=this._injector;a.destroy&&!a.destroyed&&a.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return i.\u0275fac=function(a){return new(a||i)(In(Mn),In(Ln),In(us))},i.\u0275prov=Kt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function mw(i,o){const a=i.indexOf(o);a>-1&&i.splice(a,1)}let At=!0,Dc=!1;function bb(){return Dc=!0,At}function Rn(){if(Dc)throw new Error("Cannot enable prod mode after platform setup.");At=!1}let dS=(()=>{class i{}return i.__NG_ELEMENT_ID__=Zn,i})();function Zn(i){return function Ge(i,o,a){if(Yo(i)&&!a){const l=jt(i.index,o);return new Rf(l,l)}return 47&i.type?new Rf(o[16],o):null}(vn(),Se(),16==(16&i))}class Yu{constructor(){}supports(o){return Nf(o)}create(o){return new Ew(o)}}const Sb=(i,o)=>o;class Ew{constructor(o){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=o||Sb}forEachItem(o){let a;for(a=this._itHead;null!==a;a=a._next)o(a)}forEachOperation(o){let a=this._itHead,l=this._removalsHead,d=0,f=null;for(;a||l;){const _=!l||a&&a.currentIndex<Iw(l,d,f)?a:l,E=Iw(_,d,f),I=_.currentIndex;if(_===l)d--,l=l._nextRemoved;else if(a=a._next,null==_.previousIndex)d++;else{f||(f=[]);const T=E-d,R=I-d;if(T!=R){for(let z=0;z<T;z++){const te=z<f.length?f[z]:f[z]=0,Ee=te+z;R<=Ee&&Ee<T&&(f[z]=te+1)}f[_.previousIndex]=R-T}}E!==I&&o(_,E,I)}}forEachPreviousItem(o){let a;for(a=this._previousItHead;null!==a;a=a._nextPrevious)o(a)}forEachAddedItem(o){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)o(a)}forEachMovedItem(o){let a;for(a=this._movesHead;null!==a;a=a._nextMoved)o(a)}forEachRemovedItem(o){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)o(a)}forEachIdentityChange(o){let a;for(a=this._identityChangesHead;null!==a;a=a._nextIdentityChange)o(a)}diff(o){if(null==o&&(o=[]),!Nf(o))throw new we(900,!1);return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let d,f,_,a=this._itHead,l=!1;if(Array.isArray(o)){this.length=o.length;for(let E=0;E<this.length;E++)f=o[E],_=this._trackByFn(E,f),null!==a&&Object.is(a.trackById,_)?(l&&(a=this._verifyReinsertion(a,f,_,E)),Object.is(a.item,f)||this._addIdentityChange(a,f)):(a=this._mismatch(a,f,_,E),l=!0),a=a._next}else d=0,function SC(i,o){if(Array.isArray(i))for(let a=0;a<i.length;a++)o(i[a]);else{const a=i[Ua()]();let l;for(;!(l=a.next()).done;)o(l.value)}}(o,E=>{_=this._trackByFn(d,E),null!==a&&Object.is(a.trackById,_)?(l&&(a=this._verifyReinsertion(a,E,_,d)),Object.is(a.item,E)||this._addIdentityChange(a,E)):(a=this._mismatch(a,E,_,d),l=!0),a=a._next,d++}),this.length=d;return this._truncate(a),this.collection=o,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let o;for(o=this._previousItHead=this._itHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._additionsHead;null!==o;o=o._nextAdded)o.previousIndex=o.currentIndex;for(this._additionsHead=this._additionsTail=null,o=this._movesHead;null!==o;o=o._nextMoved)o.previousIndex=o.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(o,a,l,d){let f;return null===o?f=this._itTail:(f=o._prev,this._remove(o)),null!==(o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null))?(Object.is(o.item,a)||this._addIdentityChange(o,a),this._reinsertAfter(o,f,d)):null!==(o=null===this._linkedRecords?null:this._linkedRecords.get(l,d))?(Object.is(o.item,a)||this._addIdentityChange(o,a),this._moveAfter(o,f,d)):o=this._addAfter(new fS(a,l),f,d),o}_verifyReinsertion(o,a,l,d){let f=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null);return null!==f?o=this._reinsertAfter(f,o._prev,d):o.currentIndex!=d&&(o.currentIndex=d,this._addToMoves(o,d)),o}_truncate(o){for(;null!==o;){const a=o._next;this._addToRemovals(this._unlink(o)),o=a}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(o,a,l){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(o);const d=o._prevRemoved,f=o._nextRemoved;return null===d?this._removalsHead=f:d._nextRemoved=f,null===f?this._removalsTail=d:f._prevRemoved=d,this._insertAfter(o,a,l),this._addToMoves(o,l),o}_moveAfter(o,a,l){return this._unlink(o),this._insertAfter(o,a,l),this._addToMoves(o,l),o}_addAfter(o,a,l){return this._insertAfter(o,a,l),this._additionsTail=null===this._additionsTail?this._additionsHead=o:this._additionsTail._nextAdded=o,o}_insertAfter(o,a,l){const d=null===a?this._itHead:a._next;return o._next=d,o._prev=a,null===d?this._itTail=o:d._prev=o,null===a?this._itHead=o:a._next=o,null===this._linkedRecords&&(this._linkedRecords=new Ti),this._linkedRecords.put(o),o.currentIndex=l,o}_remove(o){return this._addToRemovals(this._unlink(o))}_unlink(o){null!==this._linkedRecords&&this._linkedRecords.remove(o);const a=o._prev,l=o._next;return null===a?this._itHead=l:a._next=l,null===l?this._itTail=a:l._prev=a,o}_addToMoves(o,a){return o.previousIndex===a||(this._movesTail=null===this._movesTail?this._movesHead=o:this._movesTail._nextMoved=o),o}_addToRemovals(o){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Ti),this._unlinkedRecords.put(o),o.currentIndex=null,o._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=o,o._prevRemoved=null):(o._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=o),o}_addIdentityChange(o,a){return o.item=a,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=o:this._identityChangesTail._nextIdentityChange=o,o}}class fS{constructor(o,a){this.item=o,this.trackById=a,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class pS{constructor(){this._head=null,this._tail=null}add(o){null===this._head?(this._head=this._tail=o,o._nextDup=null,o._prevDup=null):(this._tail._nextDup=o,o._prevDup=this._tail,o._nextDup=null,this._tail=o)}get(o,a){let l;for(l=this._head;null!==l;l=l._nextDup)if((null===a||a<=l.currentIndex)&&Object.is(l.trackById,o))return l;return null}remove(o){const a=o._prevDup,l=o._nextDup;return null===a?this._head=l:a._nextDup=l,null===l?this._tail=a:l._prevDup=a,null===this._head}}class Ti{constructor(){this.map=new Map}put(o){const a=o.trackById;let l=this.map.get(a);l||(l=new pS,this.map.set(a,l)),l.add(o)}get(o,a){const d=this.map.get(o);return d?d.get(o,a):null}remove(o){const a=o.trackById;return this.map.get(a).remove(o)&&this.map.delete(a),o}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Iw(i,o,a){const l=i.previousIndex;if(null===l)return l;let d=0;return a&&l<a.length&&(d=a[l]),l+o+d}class Qu{constructor(){}supports(o){return o instanceof Map||P_(o)}create(){return new Ab}}class Ab{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(o){let a;for(a=this._mapHead;null!==a;a=a._next)o(a)}forEachPreviousItem(o){let a;for(a=this._previousMapHead;null!==a;a=a._nextPrevious)o(a)}forEachChangedItem(o){let a;for(a=this._changesHead;null!==a;a=a._nextChanged)o(a)}forEachAddedItem(o){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)o(a)}forEachRemovedItem(o){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)o(a)}diff(o){if(o){if(!(o instanceof Map||P_(o)))throw new we(900,!1)}else o=new Map;return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let a=this._mapHead;if(this._appendAfter=null,this._forEach(o,(l,d)=>{if(a&&a.key===d)this._maybeAddToChanges(a,l),this._appendAfter=a,a=a._next;else{const f=this._getOrCreateRecordForKey(d,l);a=this._insertBeforeOrAppend(a,f)}}),a){a._prev&&(a._prev._next=null),this._removalsHead=a;for(let l=a;null!==l;l=l._nextRemoved)l===this._mapHead&&(this._mapHead=null),this._records.delete(l.key),l._nextRemoved=l._next,l.previousValue=l.currentValue,l.currentValue=null,l._prev=null,l._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(o,a){if(o){const l=o._prev;return a._next=o,a._prev=l,o._prev=a,l&&(l._next=a),o===this._mapHead&&(this._mapHead=a),this._appendAfter=o,o}return this._appendAfter?(this._appendAfter._next=a,a._prev=this._appendAfter):this._mapHead=a,this._appendAfter=a,null}_getOrCreateRecordForKey(o,a){if(this._records.has(o)){const d=this._records.get(o);this._maybeAddToChanges(d,a);const f=d._prev,_=d._next;return f&&(f._next=_),_&&(_._prev=f),d._next=null,d._prev=null,d}const l=new Yn(o);return this._records.set(o,l),l.currentValue=a,this._addToAdditions(l),l}_reset(){if(this.isDirty){let o;for(this._previousMapHead=this._mapHead,o=this._previousMapHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._changesHead;null!==o;o=o._nextChanged)o.previousValue=o.currentValue;for(o=this._additionsHead;null!=o;o=o._nextAdded)o.previousValue=o.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(o,a){Object.is(a,o.currentValue)||(o.previousValue=o.currentValue,o.currentValue=a,this._addToChanges(o))}_addToAdditions(o){null===this._additionsHead?this._additionsHead=this._additionsTail=o:(this._additionsTail._nextAdded=o,this._additionsTail=o)}_addToChanges(o){null===this._changesHead?this._changesHead=this._changesTail=o:(this._changesTail._nextChanged=o,this._changesTail=o)}_forEach(o,a){o instanceof Map?o.forEach(a):Object.keys(o).forEach(l=>a(o[l],l))}}class Yn{constructor(o){this.key=o,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function _p(){return new br([new Yu])}let br=(()=>{class i{constructor(a){this.factories=a}static create(a,l){if(null!=l){const d=l.factories.slice();a=a.concat(d)}return new i(a)}static extend(a){return{provide:i,useFactory:l=>i.create(a,l||_p()),deps:[[i,new yt,new Be]]}}find(a){const l=this.factories.find(d=>d.supports(a));if(null!=l)return l;throw new we(901,!1)}}return i.\u0275prov=Kt({token:i,providedIn:"root",factory:_p}),i})();function bw(){return new Ju([new Qu])}let Ju=(()=>{class i{constructor(a){this.factories=a}static create(a,l){if(l){const d=l.factories.slice();a=a.concat(d)}return new i(a)}static extend(a){return{provide:i,useFactory:l=>i.create(a,l||bw()),deps:[[i,new yt,new Be]]}}find(a){const l=this.factories.find(d=>d.supports(a));if(l)return l;throw new we(901,!1)}}return i.\u0275prov=Kt({token:i,providedIn:"root",factory:bw}),i})();const Xu=ce(null,"core",[]);let Qn=(()=>{class i{constructor(a){}}return i.\u0275fac=function(a){return new(a||i)(In(Gm))},i.\u0275mod=rt({type:i}),i.\u0275inj=Ot({}),i})();function Tc(i){return"boolean"==typeof i?i:null!=i&&"false"!==i}},3942:(ot,Ae,P)=>{P.d(Ae,{Z:()=>we});var g=P(2090),ee=P(4859),k=P(9681),oe=P(1877);class re{constructor(me,fe){this._delegate=me,this.firebase=fe,(0,k._addComponent)(me,new ee.wA("app-compat",()=>this,"PUBLIC")),this.container=me.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(me){this._delegate.automaticDataCollectionEnabled=me}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(me=>{this._delegate.checkDestroyed(),me()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,k.deleteApp)(this._delegate)))}_getService(me,fe=k._DEFAULT_ENTRY_NAME){var Ye;this._delegate.checkDestroyed();const nt=this._delegate.container.getProvider(me);return!nt.isInitialized()&&"EXPLICIT"===(null===(Ye=nt.getComponent())||void 0===Ye?void 0:Ye.instantiationMode)&&nt.initialize(),nt.getImmediate({identifier:fe})}_removeServiceInstance(me,fe=k._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(me).clearInstance(fe)}_addComponent(me){(0,k._addComponent)(this._delegate,me)}_addOrOverwriteComponent(me){(0,k._addOrOverwriteComponent)(this._delegate,me)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const le=new g.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),B=function pe(){const Je=function he(Je){const me={},fe={__esModule:!0,initializeApp:function xe(je,U={}){const ge=k.initializeApp(je,U);if((0,g.r3)(me,ge.name))return me[ge.name];const Z=new Je(ge,fe);return me[ge.name]=Z,Z},app:nt,registerVersion:k.registerVersion,setLogLevel:k.setLogLevel,onLog:k.onLog,apps:null,SDK_VERSION:k.SDK_VERSION,INTERNAL:{registerComponent:function Ie(je){const U=je.name,ge=U.replace("-compat","");if(k._registerComponent(je)&&"PUBLIC"===je.type){const Z=(X=nt())=>{if("function"!=typeof X[ge])throw le.create("invalid-app-argument",{appName:U});return X[ge]()};void 0!==je.serviceProps&&(0,g.ZB)(Z,je.serviceProps),fe[ge]=Z,Je.prototype[ge]=function(...X){return this._getService.bind(this,U).apply(this,je.multipleInstances?X:[])}}return"PUBLIC"===je.type?fe[ge]:null},removeApp:function Ye(je){delete me[je]},useAsService:function Ue(je,U){return"serverAuth"===U?null:U},modularAPIs:k}};function nt(je){if(!(0,g.r3)(me,je=je||k._DEFAULT_ENTRY_NAME))throw le.create("no-app",{appName:je});return me[je]}return fe.default=fe,Object.defineProperty(fe,"apps",{get:function ve(){return Object.keys(me).map(je=>me[je])}}),nt.App=Je,fe}(re);return Je.INTERNAL=Object.assign(Object.assign({},Je.INTERNAL),{createFirebaseNamespace:pe,extendNamespace:function me(fe){(0,g.ZB)(Je,fe)},createSubscribe:g.ne,ErrorFactory:g.LL,deepExtend:g.ZB}),Je}(),$=new oe.Yd("@firebase/app-compat");if((0,g.jU)()&&void 0!==self.firebase){$.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Je=self.firebase.SDK_VERSION;Je&&Je.indexOf("LITE")>=0&&$.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const we=B;!function Me(Je){(0,k.registerVersion)("@firebase/app-compat","0.1.33",Je)}()},9681:(ot,Ae,P)=>{P.r(Ae),P.d(Ae,{FirebaseError:()=>oe.ZR,SDK_VERSION:()=>ws,_DEFAULT_ENTRY_NAME:()=>Ut,_addComponent:()=>Wt,_addOrOverwriteComponent:()=>Kt,_apps:()=>tn,_clearComponents:()=>Wo,_components:()=>Cn,_getProvider:()=>Ot,_registerComponent:()=>Cr,_removeServiceInstance:()=>Xt,deleteApp:()=>_o,getApp:()=>Br,getApps:()=>hi,initializeApp:()=>Si,onLog:()=>Gi,registerVersion:()=>jr,setLogLevel:()=>Tn});var g=P(5861),ee=P(4859),k=P(1877),oe=P(2090),re=P(8766);class de{constructor(H){this.container=H}getPlatformInfoString(){return this.container.getProviders().map(q=>{if(function le(V){return"VERSION"===V.getComponent()?.type}(q)){const De=q.getImmediate();return`${De.library}/${De.version}`}return null}).filter(q=>q).join(" ")}}const he="@firebase/app",B=new k.Yd("@firebase/app"),Ut="[DEFAULT]",qe={[he]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},tn=new Map,Cn=new Map;function Wt(V,H){try{V.container.addComponent(H)}catch(q){B.debug(`Component ${H.name} failed to register with FirebaseApp ${V.name}`,q)}}function Kt(V,H){V.container.addOrOverwriteComponent(H)}function Cr(V){const H=V.name;if(Cn.has(H))return B.debug(`There were multiple attempts to register component ${H}.`),!1;Cn.set(H,V);for(const q of tn.values())Wt(q,V);return!0}function Ot(V,H){const q=V.container.getProvider("heartbeat").getImmediate({optional:!0});return q&&q.triggerHeartbeat(),V.container.getProvider(H)}function Xt(V,H,q=Ut){Ot(V,H).clearInstance(q)}function Wo(){Cn.clear()}const mr=new oe.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Ur{constructor(H,q,De){this._isDeleted=!1,this._options=Object.assign({},H),this._config=Object.assign({},q),this._name=q.name,this._automaticDataCollectionEnabled=q.automaticDataCollectionEnabled,this._container=De,this.container.addComponent(new ee.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(H){this.checkDestroyed(),this._automaticDataCollectionEnabled=H}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(H){this._isDeleted=H}checkDestroyed(){if(this.isDeleted)throw mr.create("app-deleted",{appName:this._name})}}const ws="9.9.4";function Si(V,H={}){"object"!=typeof H&&(H={name:H});const q=Object.assign({name:Ut,automaticDataCollectionEnabled:!1},H),De=q.name;if("string"!=typeof De||!De)throw mr.create("bad-app-name",{appName:String(De)});const Ve=tn.get(De);if(Ve){if((0,oe.vZ)(V,Ve.options)&&(0,oe.vZ)(q,Ve.config))return Ve;throw mr.create("duplicate-app",{appName:De})}const rt=new ee.H0(De);for(const Yt of Cn.values())rt.addComponent(Yt);const on=new Ur(V,q,rt);return tn.set(De,on),on}function Br(V=Ut){const H=tn.get(V);if(!H)throw mr.create("no-app",{appName:V});return H}function hi(){return Array.from(tn.values())}function _o(V){return Ke.apply(this,arguments)}function Ke(){return(Ke=(0,g.Z)(function*(V){const H=V.name;tn.has(H)&&(tn.delete(H),yield Promise.all(V.container.getProviders().map(q=>q.delete())),V.isDeleted=!0)})).apply(this,arguments)}function jr(V,H,q){var De;let Ve=null!==(De=qe[V])&&void 0!==De?De:V;q&&(Ve+=`-${q}`);const rt=Ve.match(/\s|\//),on=H.match(/\s|\//);if(rt||on){const Yt=[`Unable to register library "${Ve}" with version "${H}":`];return rt&&Yt.push(`library name "${Ve}" contains illegal characters (whitespace or "/")`),rt&&on&&Yt.push("and"),on&&Yt.push(`version name "${H}" contains illegal characters (whitespace or "/")`),void B.warn(Yt.join(" "))}Cr(new ee.wA(`${Ve}-version`,()=>({library:Ve,version:H}),"VERSION"))}function Gi(V,H){if(null!==V&&"function"!=typeof V)throw mr.create("invalid-log-argument");(0,k.Am)(V,H)}function Tn(V){(0,k.Ub)(V)}const Sn="firebase-heartbeat-store";let jn=null;function ln(){return jn||(jn=(0,re.X3)("firebase-heartbeat-database",1,{upgrade:(V,H)=>{0===H&&V.createObjectStore(Sn)}}).catch(V=>{throw mr.create("idb-open",{originalErrorMessage:V.message})})),jn}function st(){return(st=(0,g.Z)(function*(V){var H;try{return(yield ln()).transaction(Sn).objectStore(Sn).get(tr(V))}catch(q){if(q instanceof oe.ZR)B.warn(q.message);else{const De=mr.create("idb-get",{originalErrorMessage:null===(H=q)||void 0===H?void 0:H.message});B.warn(De.message)}}})).apply(this,arguments)}function nn(V,H){return er.apply(this,arguments)}function er(){return(er=(0,g.Z)(function*(V,H){var q;try{const Ve=(yield ln()).transaction(Sn,"readwrite");return yield Ve.objectStore(Sn).put(H,tr(V)),Ve.done}catch(De){if(De instanceof oe.ZR)B.warn(De.message);else{const Ve=mr.create("idb-set",{originalErrorMessage:null===(q=De)||void 0===q?void 0:q.message});B.warn(Ve.message)}}})).apply(this,arguments)}function tr(V){return`${V.name}!${V.options.appId}`}class zi{constructor(H){this.container=H,this._heartbeatsCache=null;const q=this.container.getProvider("app").getImmediate();this._storage=new Gt(q),this._heartbeatsCachePromise=this._storage.read().then(De=>(this._heartbeatsCache=De,De))}triggerHeartbeat(){var H=this;return(0,g.Z)(function*(){const De=H.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Ve=Zt();if(null===H._heartbeatsCache&&(H._heartbeatsCache=yield H._heartbeatsCachePromise),H._heartbeatsCache.lastSentHeartbeatDate!==Ve&&!H._heartbeatsCache.heartbeats.some(rt=>rt.date===Ve))return H._heartbeatsCache.heartbeats.push({date:Ve,agent:De}),H._heartbeatsCache.heartbeats=H._heartbeatsCache.heartbeats.filter(rt=>{const on=new Date(rt.date).valueOf();return Date.now()-on<=2592e6}),H._storage.overwrite(H._heartbeatsCache)})()}getHeartbeatsHeader(){var H=this;return(0,g.Z)(function*(){if(null===H._heartbeatsCache&&(yield H._heartbeatsCachePromise),null===H._heartbeatsCache||0===H._heartbeatsCache.heartbeats.length)return"";const q=Zt(),{heartbeatsToSend:De,unsentEntries:Ve}=function pi(V,H=1024){const q=[];let De=V.slice();for(const Ve of V){const rt=q.find(on=>on.agent===Ve.agent);if(rt){if(rt.dates.push(Ve.date),K(q)>H){rt.dates.pop();break}}else if(q.push({agent:Ve.agent,dates:[Ve.date]}),K(q)>H){q.pop();break}De=De.slice(1)}return{heartbeatsToSend:q,unsentEntries:De}}(H._heartbeatsCache.heartbeats),rt=(0,oe.L)(JSON.stringify({version:2,heartbeats:De}));return H._heartbeatsCache.lastSentHeartbeatDate=q,Ve.length>0?(H._heartbeatsCache.heartbeats=Ve,yield H._storage.overwrite(H._heartbeatsCache)):(H._heartbeatsCache.heartbeats=[],H._storage.overwrite(H._heartbeatsCache)),rt})()}}function Zt(){return(new Date).toISOString().substring(0,10)}class Gt{constructor(H){this.app=H,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,g.Z)(function*(){return!!(0,oe.hl)()&&(0,oe.eu)().then(()=>!0).catch(()=>!1)})()}read(){var H=this;return(0,g.Z)(function*(){return(yield H._canUseIndexedDBPromise)&&(yield function ht(V){return st.apply(this,arguments)}(H.app))||{heartbeats:[]}})()}overwrite(H){var q=this;return(0,g.Z)(function*(){var De;if(yield q._canUseIndexedDBPromise){const rt=yield q.read();return nn(q.app,{lastSentHeartbeatDate:null!==(De=H.lastSentHeartbeatDate)&&void 0!==De?De:rt.lastSentHeartbeatDate,heartbeats:H.heartbeats})}})()}add(H){var q=this;return(0,g.Z)(function*(){var De;if(yield q._canUseIndexedDBPromise){const rt=yield q.read();return nn(q.app,{lastSentHeartbeatDate:null!==(De=H.lastSentHeartbeatDate)&&void 0!==De?De:rt.lastSentHeartbeatDate,heartbeats:[...rt.heartbeats,...H.heartbeats]})}})()}}function K(V){return(0,oe.L)(JSON.stringify({version:2,heartbeats:V})).length}!function j(V){Cr(new ee.wA("platform-logger",H=>new de(H),"PRIVATE")),Cr(new ee.wA("heartbeat",H=>new zi(H),"PRIVATE")),jr(he,"0.7.32",V),jr(he,"0.7.32","esm2017"),jr("fire-js","")}("")},4859:(ot,Ae,P)=>{P.d(Ae,{H0:()=>he,wA:()=>k});var g=P(5861),ee=P(2090);class k{constructor(B,$,Y){this.name=B,this.instanceFactory=$,this.type=Y,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(B){return this.instantiationMode=B,this}setMultipleInstances(B){return this.multipleInstances=B,this}setServiceProps(B){return this.serviceProps=B,this}setInstanceCreatedCallback(B){return this.onInstanceCreated=B,this}}const oe="[DEFAULT]";class re{constructor(B,$){this.name=B,this.container=$,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(B){const $=this.normalizeInstanceIdentifier(B);if(!this.instancesDeferred.has($)){const Y=new ee.BH;if(this.instancesDeferred.set($,Y),this.isInitialized($)||this.shouldAutoInitialize())try{const Le=this.getOrInitializeService({instanceIdentifier:$});Le&&Y.resolve(Le)}catch{}}return this.instancesDeferred.get($).promise}getImmediate(B){var $;const Y=this.normalizeInstanceIdentifier(B?.identifier),Le=null!==($=B?.optional)&&void 0!==$&&$;if(!this.isInitialized(Y)&&!this.shouldAutoInitialize()){if(Le)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:Y})}catch(Me){if(Le)return null;throw Me}}getComponent(){return this.component}setComponent(B){if(B.name!==this.name)throw Error(`Mismatching Component ${B.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=B,this.shouldAutoInitialize()){if(function le(pe){return"EAGER"===pe.instantiationMode}(B))try{this.getOrInitializeService({instanceIdentifier:oe})}catch{}for(const[$,Y]of this.instancesDeferred.entries()){const Le=this.normalizeInstanceIdentifier($);try{const Me=this.getOrInitializeService({instanceIdentifier:Le});Y.resolve(Me)}catch{}}}}clearInstance(B=oe){this.instancesDeferred.delete(B),this.instancesOptions.delete(B),this.instances.delete(B)}delete(){var B=this;return(0,g.Z)(function*(){const $=Array.from(B.instances.values());yield Promise.all([...$.filter(Y=>"INTERNAL"in Y).map(Y=>Y.INTERNAL.delete()),...$.filter(Y=>"_delete"in Y).map(Y=>Y._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(B=oe){return this.instances.has(B)}getOptions(B=oe){return this.instancesOptions.get(B)||{}}initialize(B={}){const{options:$={}}=B,Y=this.normalizeInstanceIdentifier(B.instanceIdentifier);if(this.isInitialized(Y))throw Error(`${this.name}(${Y}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Le=this.getOrInitializeService({instanceIdentifier:Y,options:$});for(const[Me,we]of this.instancesDeferred.entries())Y===this.normalizeInstanceIdentifier(Me)&&we.resolve(Le);return Le}onInit(B,$){var Y;const Le=this.normalizeInstanceIdentifier($),Me=null!==(Y=this.onInitCallbacks.get(Le))&&void 0!==Y?Y:new Set;Me.add(B),this.onInitCallbacks.set(Le,Me);const we=this.instances.get(Le);return we&&B(we,Le),()=>{Me.delete(B)}}invokeOnInitCallbacks(B,$){const Y=this.onInitCallbacks.get($);if(Y)for(const Le of Y)try{Le(B,$)}catch{}}getOrInitializeService({instanceIdentifier:B,options:$={}}){let Y=this.instances.get(B);if(!Y&&this.component&&(Y=this.component.instanceFactory(this.container,{instanceIdentifier:(pe=B,pe===oe?void 0:pe),options:$}),this.instances.set(B,Y),this.instancesOptions.set(B,$),this.invokeOnInitCallbacks(Y,B),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,B,Y)}catch{}var pe;return Y||null}normalizeInstanceIdentifier(B=oe){return this.component?this.component.multipleInstances?B:oe:B}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class he{constructor(B){this.name=B,this.providers=new Map}addComponent(B){const $=this.getProvider(B.name);if($.isComponentSet())throw new Error(`Component ${B.name} has already been registered with ${this.name}`);$.setComponent(B)}addOrOverwriteComponent(B){this.getProvider(B.name).isComponentSet()&&this.providers.delete(B.name),this.addComponent(B)}getProvider(B){if(this.providers.has(B))return this.providers.get(B);const $=new re(B,this);return this.providers.set(B,$),$}getProviders(){return Array.from(this.providers.values())}}},1877:(ot,Ae,P)=>{P.d(Ae,{Am:()=>pe,Ub:()=>he,Yd:()=>le,in:()=>ee});const g=[];var ee=(()=>{return(B=ee||(ee={}))[B.DEBUG=0]="DEBUG",B[B.VERBOSE=1]="VERBOSE",B[B.INFO=2]="INFO",B[B.WARN=3]="WARN",B[B.ERROR=4]="ERROR",B[B.SILENT=5]="SILENT",ee;var B})();const k={debug:ee.DEBUG,verbose:ee.VERBOSE,info:ee.INFO,warn:ee.WARN,error:ee.ERROR,silent:ee.SILENT},oe=ee.INFO,re={[ee.DEBUG]:"log",[ee.VERBOSE]:"log",[ee.INFO]:"info",[ee.WARN]:"warn",[ee.ERROR]:"error"},de=(B,$,...Y)=>{if($<B.logLevel)return;const Le=(new Date).toISOString(),Me=re[$];if(!Me)throw new Error(`Attempted to log a message with an invalid logType (value: ${$})`);console[Me](`[${Le}]  ${B.name}:`,...Y)};class le{constructor($){this.name=$,this._logLevel=oe,this._logHandler=de,this._userLogHandler=null,g.push(this)}get logLevel(){return this._logLevel}set logLevel($){if(!($ in ee))throw new TypeError(`Invalid value "${$}" assigned to \`logLevel\``);this._logLevel=$}setLogLevel($){this._logLevel="string"==typeof $?k[$]:$}get logHandler(){return this._logHandler}set logHandler($){if("function"!=typeof $)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=$}get userLogHandler(){return this._userLogHandler}set userLogHandler($){this._userLogHandler=$}debug(...$){this._userLogHandler&&this._userLogHandler(this,ee.DEBUG,...$),this._logHandler(this,ee.DEBUG,...$)}log(...$){this._userLogHandler&&this._userLogHandler(this,ee.VERBOSE,...$),this._logHandler(this,ee.VERBOSE,...$)}info(...$){this._userLogHandler&&this._userLogHandler(this,ee.INFO,...$),this._logHandler(this,ee.INFO,...$)}warn(...$){this._userLogHandler&&this._userLogHandler(this,ee.WARN,...$),this._logHandler(this,ee.WARN,...$)}error(...$){this._userLogHandler&&this._userLogHandler(this,ee.ERROR,...$),this._logHandler(this,ee.ERROR,...$)}}function he(B){g.forEach($=>{$.setLogLevel(B)})}function pe(B,$){for(const Y of g){let Le=null;$&&$.level&&(Le=k[$.level]),Y.userLogHandler=null===B?null:(Me,we,...Je)=>{const me=Je.map(fe=>{if(null==fe)return null;if("string"==typeof fe)return fe;if("number"==typeof fe||"boolean"==typeof fe)return fe.toString();if(fe instanceof Error)return fe.message;try{return JSON.stringify(fe)}catch{return null}}).filter(fe=>fe).join(" ");we>=(Le??Me.logLevel)&&B({level:ee[we].toLowerCase(),message:me,args:Je,type:Me.name})}}}},8766:(ot,Ae,P)=>{P.d(Ae,{Lj:()=>xe,X3:()=>nt});var g=P(5861);let k,oe;const le=new WeakMap,he=new WeakMap,pe=new WeakMap,B=new WeakMap,$=new WeakMap;let Me={get(U,ge,Z){if(U instanceof IDBTransaction){if("done"===ge)return he.get(U);if("objectStoreNames"===ge)return U.objectStoreNames||pe.get(U);if("store"===ge)return Z.objectStoreNames[1]?void 0:Z.objectStore(Z.objectStoreNames[0])}return fe(U[ge])},set:(U,ge,Z)=>(U[ge]=Z,!0),has:(U,ge)=>U instanceof IDBTransaction&&("done"===ge||"store"===ge)||ge in U};function me(U){return"function"==typeof U?function Je(U){return U!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function de(){return oe||(oe=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(U)?function(...ge){return U.apply(Ye(this),ge),fe(le.get(this))}:function(...ge){return fe(U.apply(Ye(this),ge))}:function(ge,...Z){const X=U.call(Ye(this),ge,...Z);return pe.set(X,ge.sort?ge.sort():[ge]),fe(X)}}(U):(U instanceof IDBTransaction&&function Le(U){if(he.has(U))return;const ge=new Promise((Z,X)=>{const ie=()=>{U.removeEventListener("complete",ne),U.removeEventListener("error",Pe),U.removeEventListener("abort",Pe)},ne=()=>{Z(),ie()},Pe=()=>{X(U.error||new DOMException("AbortError","AbortError")),ie()};U.addEventListener("complete",ne),U.addEventListener("error",Pe),U.addEventListener("abort",Pe)});he.set(U,ge)}(U),((U,ge)=>ge.some(Z=>U instanceof Z))(U,function re(){return k||(k=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(U,Me):U)}function fe(U){if(U instanceof IDBRequest)return function Y(U){const ge=new Promise((Z,X)=>{const ie=()=>{U.removeEventListener("success",ne),U.removeEventListener("error",Pe)},ne=()=>{Z(fe(U.result)),ie()},Pe=()=>{X(U.error),ie()};U.addEventListener("success",ne),U.addEventListener("error",Pe)});return ge.then(Z=>{Z instanceof IDBCursor&&le.set(Z,U)}).catch(()=>{}),$.set(ge,U),ge}(U);if(B.has(U))return B.get(U);const ge=me(U);return ge!==U&&(B.set(U,ge),$.set(ge,U)),ge}const Ye=U=>$.get(U);function nt(U,ge,{blocked:Z,upgrade:X,blocking:ie,terminated:ne}={}){const Pe=indexedDB.open(U,ge),Oe=fe(Pe);return X&&Pe.addEventListener("upgradeneeded",ct=>{X(fe(Pe.result),ct.oldVersion,ct.newVersion,fe(Pe.transaction))}),Z&&Pe.addEventListener("blocked",()=>Z()),Oe.then(ct=>{ne&&ct.addEventListener("close",()=>ne()),ie&&ct.addEventListener("versionchange",()=>ie())}).catch(()=>{}),Oe}function xe(U,{blocked:ge}={}){const Z=indexedDB.deleteDatabase(U);return ge&&Z.addEventListener("blocked",()=>ge()),fe(Z).then(()=>{})}const ve=["get","getKey","getAll","getAllKeys","count"],Ie=["put","add","delete","clear"],Ue=new Map;function je(U,ge){if(!(U instanceof IDBDatabase)||ge in U||"string"!=typeof ge)return;if(Ue.get(ge))return Ue.get(ge);const Z=ge.replace(/FromIndex$/,""),X=ge!==Z,ie=Ie.includes(Z);if(!(Z in(X?IDBIndex:IDBObjectStore).prototype)||!ie&&!ve.includes(Z))return;const ne=function(){var Pe=(0,g.Z)(function*(Oe,...ct){const Ht=this.transaction(Oe,ie?"readwrite":"readonly");let Ut=Ht.store;return X&&(Ut=Ut.index(ct.shift())),(yield Promise.all([Ut[Z](...ct),ie&&Ht.done]))[0]});return function(ct){return Pe.apply(this,arguments)}}();return Ue.set(ge,ne),ne}!function we(U){Me=U(Me)}(U=>({...U,get:(ge,Z,X)=>je(ge,Z)||U.get(ge,Z,X),has:(ge,Z)=>!!je(ge,Z)||U.has(ge,Z)}))},5861:(ot,Ae,P)=>{function g(k,oe,re,de,le,he,pe){try{var B=k[he](pe),$=B.value}catch(Y){return void re(Y)}B.done?oe($):Promise.resolve($).then(de,le)}function ee(k){return function(){var oe=this,re=arguments;return new Promise(function(de,le){var he=k.apply(oe,re);function pe($){g(he,de,le,pe,B,"next",$)}function B($){g(he,de,le,pe,B,"throw",$)}pe(void 0)})}}P.d(Ae,{Z:()=>ee})}},ot=>{ot(ot.s=3223)}]);