"use strict";(self.webpackChunksala_juegos_2022=self.webpackChunksala_juegos_2022||[]).push([[179],{440:(Gt,We,V)=>{V.d(We,{nm:()=>Oi});var p=V(5813);V(4650),V(5867);var he=V(5861),rt=V(9681),Je=V(4859),vt=V(2090),tt=V(1877);const ae=new Map,Fe={activated:!1,tokenObservers:[]},ne={initialized:!1,enabled:!1};function Ie(xe){return ae.get(xe)||Fe}function de(xe,Ae){ae.set(xe,Ae)}function Ne(){return ne}class tn{constructor(Ae,Ve,lt,Dt,Xt){if(this.operation=Ae,this.retryPolicy=Ve,this.getWaitDuration=lt,this.lowerBound=Dt,this.upperBound=Xt,this.pending=null,this.nextErrorWaitInterval=Dt,Dt>Xt)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(Ae){var Ve=this;return(0,he.Z)(function*(){Ve.stop();try{Ve.pending=new vt.BH,yield function Kt(xe){return new Promise(Ae=>{setTimeout(Ae,xe)})}(Ve.getNextRun(Ae)),Ve.pending.resolve(),yield Ve.pending.promise,Ve.pending=new vt.BH,yield Ve.operation(),Ve.pending.resolve(),yield Ve.pending.promise,Ve.process(!0).catch(()=>{})}catch(lt){Ve.retryPolicy(lt)?Ve.process(!1).catch(()=>{}):Ve.stop()}})()}getNextRun(Ae){if(Ae)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const Ve=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),Ve}}}const kt=new vt.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function un(xe){if(!Ie(xe).activated)throw kt.create("use-before-activation",{appName:xe.name})}function vr(xe,Ae){return _r.apply(this,arguments)}function _r(){return(_r=(0,he.Z)(function*({url:xe,body:Ae},Ve){var lt,Dt;const Xt={"Content-Type":"application/json"},bn=Ve.getImmediate({optional:!0});if(bn){const pi=yield bn.getHeartbeatsHeader();pi&&(Xt["X-Firebase-Client"]=pi)}const Er={method:"POST",body:JSON.stringify(Ae),headers:Xt};let Un,fi;try{Un=yield fetch(xe,Er)}catch(pi){throw kt.create("fetch-network-error",{originalErrorMessage:null===(lt=pi)||void 0===lt?void 0:lt.message})}if(200!==Un.status)throw kt.create("fetch-status-error",{httpStatus:Un.status});try{fi=yield Un.json()}catch(pi){throw kt.create("fetch-parse-error",{originalErrorMessage:null===(Dt=pi)||void 0===Dt?void 0:Dt.message})}const vo=fi.ttl.match(/^([\d.]+)(s)$/);if(!vo||!vo[2]||isNaN(Number(vo[1])))throw kt.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${fi.ttl}`});const Ks=1e3*Number(vo[1]),Hr=Date.now();return{token:fi.token,expireTimeMillis:Hr+Ks,issuedAtTimeMillis:Hr}})).apply(this,arguments)}function qt(xe,Ae){const{projectId:Ve,appId:lt,apiKey:Dt}=xe.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${Ve}/apps/${lt}:exchangeDebugToken?key=${Dt}`,body:{debug_token:Ae}}}const lr="firebase-app-check-store";let nr=null;function En(){return nr||(nr=new Promise((xe,Ae)=>{var Ve;try{const lt=indexedDB.open("firebase-app-check-database",1);lt.onsuccess=Dt=>{xe(Dt.target.result)},lt.onerror=Dt=>{var Xt;Ae(kt.create("storage-open",{originalErrorMessage:null===(Xt=Dt.target.error)||void 0===Xt?void 0:Xt.message}))},lt.onupgradeneeded=Dt=>{0===Dt.oldVersion&&Dt.target.result.createObjectStore(lr,{keyPath:"compositeKey"})}}catch(lt){Ae(kt.create("storage-open",{originalErrorMessage:null===(Ve=lt)||void 0===Ve?void 0:Ve.message}))}}),nr)}function ge(){return(ge=(0,he.Z)(function*(xe,Ae){const lt=(yield En()).transaction(lr,"readwrite"),Xt=lt.objectStore(lr).put({compositeKey:xe,value:Ae});return new Promise((bn,Er)=>{Xt.onsuccess=Un=>{bn()},lt.onerror=Un=>{var fi;Er(kt.create("storage-set",{originalErrorMessage:null===(fi=Un.target.error)||void 0===fi?void 0:fi.message}))}})})).apply(this,arguments)}const Lt=new tt.Yd("@firebase/app-check");function At(xe,Ae){return(0,vt.hl)()?function ei(xe,Ae){return function Ue(xe,Ae){return ge.apply(this,arguments)}(function st(xe){return`${xe.options.appId}-${xe.name}`}(xe),Ae)}(xe,Ae).catch(Ve=>{Lt.warn(`Failed to write token to IndexedDB. Error: ${Ve}`)}):Promise.resolve()}function Sr(){return Ne().enabled}function fn(){return me.apply(this,arguments)}function me(){return(me=(0,he.Z)(function*(){const xe=Ne();if(xe.enabled&&xe.token)return xe.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const oe={error:"UNKNOWN_ERROR"};function Ee(xe){return vt.US.encodeString(JSON.stringify(xe),!1)}function ye(xe){return ut.apply(this,arguments)}function ut(){return(ut=(0,he.Z)(function*(xe,Ae=!1){const Ve=xe.app;un(Ve);const lt=Ie(Ve);let Xt,Dt=lt.token;if(!Dt){const Un=yield lt.cachedTokenPromise;Un&&Sn(Un)&&(Dt=Un)}if(!Ae&&Dt&&Sn(Dt))return{token:Dt.token};let Er,bn=!1;if(Sr()){lt.exchangeTokenPromise||(lt.exchangeTokenPromise=vr(qt(Ve,yield fn()),xe.heartbeatServiceProvider).then(fi=>(lt.exchangeTokenPromise=void 0,fi)),bn=!0);const Un=yield lt.exchangeTokenPromise;return yield At(Ve,Un),de(Ve,Object.assign(Object.assign({},lt),{token:Un})),{token:Un.token}}try{lt.exchangeTokenPromise||(lt.exchangeTokenPromise=lt.provider.getToken().then(Un=>(lt.exchangeTokenPromise=void 0,Un)),bn=!0),Dt=yield lt.exchangeTokenPromise}catch(Un){"appCheck/throttled"===Un.code?Lt.warn(Un.message):Lt.error(Un),Xt=Un}return Dt?(Er={token:Dt.token},de(Ve,Object.assign(Object.assign({},lt),{token:Dt})),yield At(Ve,Dt)):Er=ln(Xt),bn&&cr(Ve,Er),Er})).apply(this,arguments)}function Vt(xe,Ae){const Ve=Ie(xe),lt=Ve.tokenObservers.filter(Dt=>Dt.next!==Ae);0===lt.length&&Ve.tokenRefresher&&Ve.tokenRefresher.isRunning()&&Ve.tokenRefresher.stop(),de(xe,Object.assign(Object.assign({},Ve),{tokenObservers:lt}))}function ar(xe){const{app:Ae}=xe,Ve=Ie(Ae);let lt=Ve.tokenRefresher;lt||(lt=function gn(xe){const{app:Ae}=xe;return new tn((0,he.Z)(function*(){let lt;if(lt=Ie(Ae).token?yield ye(xe,!0):yield ye(xe),lt.error)throw lt.error}),()=>!0,()=>{const Ve=Ie(Ae);if(Ve.token){let lt=Ve.token.issuedAtTimeMillis+.5*(Ve.token.expireTimeMillis-Ve.token.issuedAtTimeMillis)+3e5;return lt=Math.min(lt,Ve.token.expireTimeMillis-3e5),Math.max(0,lt-Date.now())}return 0},3e4,96e4)}(xe),de(Ae,Object.assign(Object.assign({},Ve),{tokenRefresher:lt}))),!lt.isRunning()&&Ve.isTokenAutoRefreshEnabled&&lt.start()}function cr(xe,Ae){const Ve=Ie(xe).tokenObservers;for(const lt of Ve)try{"EXTERNAL"===lt.type&&null!=Ae.error?lt.error(Ae.error):lt.next(Ae)}catch{}}function Sn(xe){return xe.expireTimeMillis-Date.now()>0}function ln(xe){return{token:Ee(oe),error:xe}}class Jn{constructor(Ae,Ve){this.app=Ae,this.heartbeatServiceProvider=Ve}_delete(){const{tokenObservers:Ae}=Ie(this.app);for(const Ve of Ae)Vt(this.app,Ve.next);return Promise.resolve()}}const Qi="app-check-internal";!function Ti(){(0,rt._registerComponent)(new Je.wA("app-check",xe=>function kn(xe,Ae){return new Jn(xe,Ae)}(xe.getProvider("app").getImmediate(),xe.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((xe,Ae,Ve)=>{xe.getProvider(Qi).initialize()})),(0,rt._registerComponent)(new Je.wA(Qi,xe=>function qr(xe){return{getToken:Ae=>ye(xe,Ae),addTokenListener:Ae=>function gt(xe,Ae,Ve,lt){const{app:Dt}=xe,Xt=Ie(Dt),bn={next:Ve,error:lt,type:Ae};if(de(Dt,Object.assign(Object.assign({},Xt),{tokenObservers:[...Xt.tokenObservers,bn]})),Xt.token&&Sn(Xt.token)){const Er=Xt.token;Promise.resolve().then(()=>{Ve({token:Er.token}),ar(xe)}).catch(()=>{})}Xt.cachedTokenPromise.then(()=>ar(xe))}(xe,"INTERNAL",Ae),removeTokenListener:Ae=>Vt(xe.app,Ae)}}(xe.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,rt.registerVersion)("@firebase/app-check","0.5.12")}();class Oi{constructor(){return(0,p.vb)("app-check")}}typeof window<"u"&&window},1205:(Gt,We,V)=>{V.d(We,{zQ:()=>dt,ww:()=>wt,rT:()=>ne,f7:()=>de,L6:()=>ae,_Q:()=>Fe,lh:()=>Ie,Qv:()=>tt,nw:()=>Ne});var p=V(4650),C=V(7579),G=V(9646),be=V(9751),we=V(8996),Me=V(6451),Re=V(5363),Oe=V(3900),ke=V(4004),le=V(6063);class ue extends C.x{constructor(Mt=1/0,$t=1/0,ht=le.l){super(),this._bufferSize=Mt,this._windowTime=$t,this._timestampProvider=ht,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=$t===1/0,this._bufferSize=Math.max(1,Mt),this._windowTime=Math.max(1,$t)}next(Mt){const{isStopped:$t,_buffer:ht,_infiniteTimeWindow:tn,_timestampProvider:Kt,_windowTime:on}=this;$t||(ht.push(Mt),!tn&&ht.push(Kt.now()+on)),this._trimBuffer(),super.next(Mt)}_subscribe(Mt){this._throwIfClosed(),this._trimBuffer();const $t=this._innerSubscribe(Mt),{_infiniteTimeWindow:ht,_buffer:tn}=this,Kt=tn.slice();for(let on=0;on<Kt.length&&!Mt.closed;on+=ht?1:2)Mt.next(Kt[on]);return this._checkFinalizedStatuses(Mt),$t}_trimBuffer(){const{_bufferSize:Mt,_timestampProvider:$t,_buffer:ht,_infiniteTimeWindow:tn}=this,Kt=(tn?1:2)*Mt;if(Mt<1/0&&Kt<ht.length&&ht.splice(0,ht.length-Kt),!tn){const on=$t.now();let kt=0;for(let Nn=1;Nn<ht.length&&ht[Nn]<=on;Nn+=2)kt=Nn;kt&&ht.splice(0,kt+1)}}}var Ce=V(3099);function yt(Ct,Mt,$t){let ht,tn=!1;return Ct&&"object"==typeof Ct?({bufferSize:ht=1/0,windowTime:Mt=1/0,refCount:tn=!1,scheduler:$t}=Ct):ht=Ct??1/0,(0,Ce.B)({connector:()=>new ue(ht,Mt,$t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:tn})}var ot=V(590),Ze=V(576);function Ot(Ct,Mt){return(0,Ze.m)(Mt)?(0,Oe.w)(()=>Ct,Mt):(0,Oe.w)(()=>Ct)}var Ke=V(9468),He=V(9300),Bt=V(5813),jt=V(2011),he=V(6895),rt=V(440),Je=V(127);const tt=new p.OlP("angularfire2.auth.use-emulator"),ae=new p.OlP("angularfire2.auth.settings"),Fe=new p.OlP("angularfire2.auth.tenant-id"),ne=new p.OlP("angularfire2.auth.langugage-code"),Ie=new p.OlP("angularfire2.auth.use-device-language"),de=new p.OlP("angularfire.auth.persistence"),Ne=(Ct,Mt,$t,ht,tn,Kt,on,kt)=>(0,jt.cc)(`${Ct.name}.auth`,"AngularFireAuth",Ct.name,()=>{const Nn=Mt.runOutsideAngular(()=>Ct.auth());if($t&&Nn.useEmulator(...$t),ht&&(Nn.tenantId=ht),Nn.languageCode=tn,Kt&&Nn.useDeviceLanguage(),on)for(const[un,$n]of Object.entries(on))Nn.settings[un]=$n;return kt&&Nn.setPersistence(kt),Nn},[$t,ht,tn,Kt,on,kt]);let dt=(()=>{class Ct{constructor($t,ht,tn,Kt,on,kt,Nn,un,$n,Wr,vr,_r){const yr=new C.x,Ir=(0,G.of)(void 0).pipe((0,Re.Q)(on.outsideAngular),(0,Oe.w)(()=>Kt.runOutsideAngular(()=>Promise.resolve().then(V.bind(V,2274)))),(0,ke.U)(()=>(0,jt.on)($t,Kt,ht)),(0,ke.U)(qt=>Ne(qt,Kt,kt,un,$n,Wr,Nn,vr)),yt({bufferSize:1,refCount:!1}));if((0,he.PM)(tn))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,G.of)(null);else{Ir.pipe((0,ot.P)()).subscribe();const rr=Ir.pipe((0,Oe.w)(pt=>pt.getRedirectResult().then(nr=>nr,()=>null)),Bt.iC,yt({bufferSize:1,refCount:!1})),zn=Ir.pipe((0,Oe.w)(pt=>new be.y(nr=>({unsubscribe:Kt.runOutsideAngular(()=>pt.onAuthStateChanged(En=>nr.next(En),En=>nr.error(En),()=>nr.complete()))})))),lr=Ir.pipe((0,Oe.w)(pt=>new be.y(nr=>({unsubscribe:Kt.runOutsideAngular(()=>pt.onIdTokenChanged(En=>nr.next(En),En=>nr.error(En),()=>nr.complete()))}))));this.authState=rr.pipe(Ot(zn),(0,Ke.R)(on.outsideAngular),(0,Re.Q)(on.insideAngular)),this.user=rr.pipe(Ot(lr),(0,Ke.R)(on.outsideAngular),(0,Re.Q)(on.insideAngular)),this.idToken=this.user.pipe((0,Oe.w)(pt=>pt?(0,we.D)(pt.getIdToken()):(0,G.of)(null))),this.idTokenResult=this.user.pipe((0,Oe.w)(pt=>pt?(0,we.D)(pt.getIdTokenResult()):(0,G.of)(null))),this.credential=(0,Me.T)(rr,yr,this.authState.pipe((0,He.h)(pt=>!pt))).pipe((0,ke.U)(pt=>pt?.user?pt:null),(0,Ke.R)(on.outsideAngular),(0,Re.Q)(on.insideAngular))}return(0,jt.pX)(this,Ir,Kt,{spy:{apply:(qt,rr,zn)=>{(qt.startsWith("signIn")||qt.startsWith("createUser"))&&zn.then(lr=>yr.next(lr))}}})}}return Ct.\u0275fac=function($t){return new($t||Ct)(p.LFG(jt.Dh),p.LFG(jt.xv,8),p.LFG(p.Lbi),p.LFG(p.R0b),p.LFG(Bt.HU),p.LFG(tt,8),p.LFG(ae,8),p.LFG(Fe,8),p.LFG(ne,8),p.LFG(Ie,8),p.LFG(de,8),p.LFG(rt.nm,8))},Ct.\u0275prov=p.Yz7({token:Ct,factory:Ct.\u0275fac,providedIn:"any"}),Ct})(),wt=(()=>{class Ct{constructor(){Je.Z.registerVersion("angularfire",Bt.q4.full,"auth-compat")}}return Ct.\u0275fac=function($t){return new($t||Ct)},Ct.\u0275mod=p.oAB({type:Ct}),Ct.\u0275inj=p.cJS({providers:[dt]}),Ct})()},7566:(Gt,We,V)=>{V.d(We,{ST:()=>m_,yb:()=>ky});var p=V(4650),C=V(4986),G=V(9751),be=V(8996),we=V(9646),Me=V(5813),Re=V(8675),Oe=V(4482),ke=V(5403);function le(){return(0,Oe.e)((i,e)=>{let t,o=!1;i.subscribe((0,ke.x)(e,u=>{const d=t;t=u,o&&e.next([d,u]),o=!0}))})}var ue=V(4004),Ce=V(5026),yt=V(4671);function Ze(i,e){return i===e}var ne,Ot=V(9300),Ke=V(2011),He=V(6895),jt=(V(2274),V(3942)),he=V(5861),rt=V(9681),Je=V(4859),vt=V(1877),tt=V(2090),ae=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Fe={},Ie=Ie||{},de=ae||self;function Ne(){}function dt(i){var e=typeof i;return"array"==(e="object"!=e?e:i?Array.isArray(i)?"array":e:"null")||"object"==e&&"number"==typeof i.length}function wt(i){var e=typeof i;return"object"==e&&null!=i||"function"==e}var Mt="closure_uid_"+(1e9*Math.random()>>>0),$t=0;function ht(i,e,t){return i.call.apply(i.bind,arguments)}function tn(i,e,t){if(!i)throw Error();if(2<arguments.length){var o=Array.prototype.slice.call(arguments,2);return function(){var u=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(u,o),i.apply(e,u)}}return function(){return i.apply(e,arguments)}}function Kt(i,e,t){return(Kt=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?ht:tn).apply(null,arguments)}function on(i,e){var t=Array.prototype.slice.call(arguments,1);return function(){var o=t.slice();return o.push.apply(o,arguments),i.apply(this,o)}}function kt(i,e){function t(){}t.prototype=e.prototype,i.Z=e.prototype,i.prototype=new t,i.prototype.constructor=i,i.Vb=function(o,u,d){for(var g=Array(arguments.length-2),D=2;D<arguments.length;D++)g[D-2]=arguments[D];return e.prototype[u].apply(o,g)}}function Nn(){this.s=this.s,this.o=this.o}var $n={};Nn.prototype.s=!1,Nn.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var i=function Ct(i){return Object.prototype.hasOwnProperty.call(i,Mt)&&i[Mt]||(i[Mt]=++$t)}(this);delete $n[i]}},Nn.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Wr=Array.prototype.indexOf?function(i,e){return Array.prototype.indexOf.call(i,e,void 0)}:function(i,e){if("string"==typeof i)return"string"!=typeof e||1!=e.length?-1:i.indexOf(e,0);for(let t=0;t<i.length;t++)if(t in i&&i[t]===e)return t;return-1},vr=Array.prototype.forEach?function(i,e,t){Array.prototype.forEach.call(i,e,t)}:function(i,e,t){const o=i.length,u="string"==typeof i?i.split(""):i;for(let d=0;d<o;d++)d in u&&e.call(t,u[d],d,i)};function yr(i){return Array.prototype.concat.apply([],arguments)}function Ir(i){const e=i.length;if(0<e){const t=Array(e);for(let o=0;o<e;o++)t[o]=i[o];return t}return[]}function qt(i){return/^[\s\xa0]*$/.test(i)}var pt,rr=String.prototype.trim?function(i){return i.trim()}:function(i){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(i)[1]};function zn(i,e){return-1!=i.indexOf(e)}function lr(i,e){return i<e?-1:i>e?1:0}e:{var nr=de.navigator;if(nr){var En=nr.userAgent;if(En){pt=En;break e}}pt=""}function Hn(i,e,t){for(const o in i)e.call(t,i[o],o,i)}function ei(i){const e={};for(const t in i)e[t]=i[t];return e}var ti="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function wr(i,e){let t,o;for(let u=1;u<arguments.length;u++){for(t in o=arguments[u],o)i[t]=o[t];for(let d=0;d<ti.length;d++)t=ti[d],Object.prototype.hasOwnProperty.call(o,t)&&(i[t]=o[t])}}function Ue(i){return Ue[" "](i),i}Ue[" "]=Ne;var ir,i,se=zn(pt,"Opera"),Be=zn(pt,"Trident")||zn(pt,"MSIE"),st=zn(pt,"Edge"),Lt=st||Be,Ft=zn(pt,"Gecko")&&!(zn(pt.toLowerCase(),"webkit")&&!zn(pt,"Edge"))&&!(zn(pt,"Trident")||zn(pt,"MSIE"))&&!zn(pt,"Edge"),Vn=zn(pt.toLowerCase(),"webkit")&&!zn(pt,"Edge");function At(){var i=de.document;return i?i.documentMode:void 0}e:{var xn="",Sr=(i=pt,Ft?/rv:([^\);]+)(\)|;)/.exec(i):st?/Edge\/([\d\.]+)/.exec(i):Be?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(i):Vn?/WebKit\/(\S+)/.exec(i):se?/(?:Version)[ \/]?(\S+)/.exec(i):void 0);if(Sr&&(xn=Sr?Sr[1]:""),Be){var fn=At();if(null!=fn&&fn>parseFloat(xn)){ir=String(fn);break e}}ir=xn}var me={};var ye=de.document&&Be&&(At()||parseInt(ir,10))||void 0,ut=function(){if(!de.addEventListener||!Object.defineProperty)return!1;var i=!1,e=Object.defineProperty({},"passive",{get:function(){i=!0}});try{de.addEventListener("test",Ne,e),de.removeEventListener("test",Ne,e)}catch{}return i}();function gt(i,e){this.type=i,this.g=this.target=e,this.defaultPrevented=!1}function Vt(i,e){if(gt.call(this,i?i.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,i){var t=this.type=i.type,o=i.changedTouches&&i.changedTouches.length?i.changedTouches[0]:null;if(this.target=i.target||i.srcElement,this.g=e,e=i.relatedTarget){if(Ft){e:{try{Ue(e.nodeName);var u=!0;break e}catch{}u=!1}u||(e=null)}}else"mouseover"==t?e=i.fromElement:"mouseout"==t&&(e=i.toElement);this.relatedTarget=e,o?(this.clientX=void 0!==o.clientX?o.clientX:o.pageX,this.clientY=void 0!==o.clientY?o.clientY:o.pageY,this.screenX=o.screenX||0,this.screenY=o.screenY||0):(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0),this.button=i.button,this.key=i.key||"",this.ctrlKey=i.ctrlKey,this.altKey=i.altKey,this.shiftKey=i.shiftKey,this.metaKey=i.metaKey,this.pointerId=i.pointerId||0,this.pointerType="string"==typeof i.pointerType?i.pointerType:ar[i.pointerType]||"",this.state=i.state,this.i=i,i.defaultPrevented&&Vt.Z.h.call(this)}}gt.prototype.h=function(){this.defaultPrevented=!0},kt(Vt,gt);var ar={2:"touch",3:"pen",4:"mouse"};Vt.prototype.h=function(){Vt.Z.h.call(this);var i=this.i;i.preventDefault?i.preventDefault():i.returnValue=!1};var gn="closure_listenable_"+(1e6*Math.random()|0),cr=0;function Sn(i,e,t,o,u){this.listener=i,this.proxy=null,this.src=e,this.type=t,this.capture=!!o,this.ia=u,this.key=++cr,this.ca=this.fa=!1}function ln(i){i.ca=!0,i.listener=null,i.proxy=null,i.src=null,i.ia=null}function Jn(i){this.src=i,this.g={},this.h=0}function kn(i,e){var t=e.type;if(t in i.g){var d,o=i.g[t],u=Wr(o,e);(d=0<=u)&&Array.prototype.splice.call(o,u,1),d&&(ln(e),0==i.g[t].length&&(delete i.g[t],i.h--))}}function qr(i,e,t,o){for(var u=0;u<i.length;++u){var d=i[u];if(!d.ca&&d.listener==e&&d.capture==!!t&&d.ia==o)return u}return-1}Jn.prototype.add=function(i,e,t,o,u){var d=i.toString();(i=this.g[d])||(i=this.g[d]=[],this.h++);var g=qr(i,e,o,u);return-1<g?(e=i[g],t||(e.fa=!1)):((e=new Sn(e,this.src,d,!!o,u)).fa=t,i.push(e)),e};var $r="closure_lm_"+(1e6*Math.random()|0),Dr={};function ve(i,e,t,o,u){if(o&&o.once)return Le(i,e,t,o,u);if(Array.isArray(e)){for(var d=0;d<e.length;d++)ve(i,e[d],t,o,u);return null}return t=mn(t),i&&i[gn]?i.N(e,t,wt(o)?!!o.capture:!!o,u):ce(i,e,t,!1,o,u)}function ce(i,e,t,o,u,d){if(!e)throw Error("Invalid event type");var g=wt(u)?!!u.capture:!!u,D=hr(i);if(D||(i[$r]=D=new Jn(i)),(t=D.add(e,t,o,g,d)).proxy)return t;if(o=function re(){var e=cn;return function i(t){return e.call(i.src,i.listener,t)}}(),t.proxy=o,o.src=i,o.listener=t,i.addEventListener)ut||(u=g),void 0===u&&(u=!1),i.addEventListener(e.toString(),o,u);else if(i.attachEvent)i.attachEvent(pn(e.toString()),o);else{if(!i.addListener||!i.removeListener)throw Error("addEventListener and attachEvent are unavailable.");i.addListener(o)}return t}function Le(i,e,t,o,u){if(Array.isArray(e)){for(var d=0;d<e.length;d++)Le(i,e[d],t,o,u);return null}return t=mn(t),i&&i[gn]?i.O(e,t,wt(o)?!!o.capture:!!o,u):ce(i,e,t,!0,o,u)}function at(i,e,t,o,u){if(Array.isArray(e))for(var d=0;d<e.length;d++)at(i,e[d],t,o,u);else o=wt(o)?!!o.capture:!!o,t=mn(t),i&&i[gn]?(i=i.i,(e=String(e).toString())in i.g&&-1<(t=qr(d=i.g[e],t,o,u))&&(ln(d[t]),Array.prototype.splice.call(d,t,1),0==d.length&&(delete i.g[e],i.h--))):i&&(i=hr(i))&&(e=i.g[e.toString()],i=-1,e&&(i=qr(e,t,o,u)),(t=-1<i?e[i]:null)&&Wt(t))}function Wt(i){if("number"!=typeof i&&i&&!i.ca){var e=i.src;if(e&&e[gn])kn(e.i,i);else{var t=i.type,o=i.proxy;e.removeEventListener?e.removeEventListener(t,o,i.capture):e.detachEvent?e.detachEvent(pn(t),o):e.addListener&&e.removeListener&&e.removeListener(o),(t=hr(e))?(kn(t,i),0==t.h&&(t.src=null,e[$r]=null)):ln(i)}}}function pn(i){return i in Dr?Dr[i]:Dr[i]="on"+i}function cn(i,e){if(i.ca)i=!0;else{e=new Vt(e,this);var t=i.listener,o=i.ia||i.src;i.fa&&Wt(i),i=t.call(o,e)}return i}function hr(i){return(i=i[$r])instanceof Jn?i:null}var Cr="__closure_events_fn_"+(1e9*Math.random()>>>0);function mn(i){return"function"==typeof i?i:(i[Cr]||(i[Cr]=function(e){return i.handleEvent(e)}),i[Cr])}function In(){Nn.call(this),this.i=new Jn(this),this.P=this,this.I=null}function Xn(i,e){var t,o=i.I;if(o)for(t=[];o;o=o.I)t.push(o);if(i=i.P,o=e.type||e,"string"==typeof e)e=new gt(e,i);else if(e instanceof gt)e.target=e.target||i;else{var u=e;wr(e=new gt(o,i),u)}if(u=!0,t)for(var d=t.length-1;0<=d;d--){var g=e.g=t[d];u=ms(g,o,!0,e)&&u}if(u=ms(g=e.g=i,o,!0,e)&&u,u=ms(g,o,!1,e)&&u,t)for(d=0;d<t.length;d++)u=ms(g=e.g=t[d],o,!1,e)&&u}function ms(i,e,t,o){if(!(e=i.i.g[String(e)]))return!0;e=e.concat();for(var u=!0,d=0;d<e.length;++d){var g=e[d];if(g&&!g.ca&&g.capture==t){var D=g.listener,L=g.ia||g.src;g.fa&&kn(i.i,g),u=!1!==D.call(L,o)&&u}}return u&&!o.defaultPrevented}kt(In,Nn),In.prototype[gn]=!0,In.prototype.removeEventListener=function(i,e,t,o){at(this,i,e,t,o)},In.prototype.M=function(){if(In.Z.M.call(this),this.i){var e,i=this.i;for(e in i.g){for(var t=i.g[e],o=0;o<t.length;o++)ln(t[o]);delete i.g[e],i.h--}}this.I=null},In.prototype.N=function(i,e,t,o){return this.i.add(String(i),e,!1,t,o)},In.prototype.O=function(i,e,t,o){return this.i.add(String(i),e,!0,t,o)};var Li=de.JSON.stringify;function Fr(){var i=Ti;let e=null;return i.g&&(e=i.g,i.g=i.g.next,i.g||(i.h=null),e.next=null),e}var Mn,as=new class{constructor(i,e){this.i=i,this.j=e,this.h=0,this.g=null}get(){let i;return 0<this.h?(this.h--,i=this.g,this.g=i.next,i.next=null):i=this.i(),i}}(()=>new Zr,i=>i.reset());class Zr{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function Lr(i){de.setTimeout(()=>{throw i},0)}function Ri(i,e){Mn||function oo(){var i=de.Promise.resolve(void 0);Mn=function(){i.then(Ps)}}(),Qi||(Mn(),Qi=!0),Ti.add(i,e)}var Qi=!1,Ti=new class Ns{constructor(){this.h=this.g=null}add(e,t){const o=as.get();o.set(e,t),this.h?this.h.next=o:this.g=o,this.h=o}};function Ps(){for(var i;i=Fr();){try{i.h.call(i.g)}catch(t){Lr(t)}var e=as;e.j(i),100>e.h&&(e.h++,i.next=e.g,e.g=i)}Qi=!1}function Ii(i,e){In.call(this),this.h=i||1,this.g=e||de,this.j=Kt(this.kb,this),this.l=Date.now()}function Oi(i){i.da=!1,i.S&&(i.g.clearTimeout(i.S),i.S=null)}function Ji(i,e,t){if("function"==typeof i)t&&(i=Kt(i,t));else{if(!i||"function"!=typeof i.handleEvent)throw Error("Invalid listener argument");i=Kt(i.handleEvent,i)}return 2147483647<Number(e)?-1:de.setTimeout(i,e||0)}function Ar(i){i.g=Ji(()=>{i.g=null,i.i&&(i.i=!1,Ar(i))},i.j);const e=i.h;i.h=null,i.m.apply(null,e)}kt(Ii,In),(ne=Ii.prototype).da=!1,ne.S=null,ne.kb=function(){if(this.da){var i=Date.now()-this.l;0<i&&i<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-i):(this.S&&(this.g.clearTimeout(this.S),this.S=null),Xn(this,"tick"),this.da&&(Oi(this),this.start()))}},ne.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},ne.M=function(){Ii.Z.M.call(this),Oi(this),delete this.g};class us extends Nn{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Ar(this)}M(){super.M(),this.g&&(de.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function er(i){Nn.call(this),this.h=i,this.g={}}kt(er,Nn);var Kr=[];function Ws(i,e,t,o){Array.isArray(t)||(t&&(Kr[0]=t.toString()),t=Kr);for(var u=0;u<t.length;u++){var d=ve(e,t[u],o||i.handleEvent,!1,i.h||i);if(!d)break;i.g[d.key]=d}}function ys(i){Hn(i.g,function(e,t){this.g.hasOwnProperty(t)&&Wt(e)},i),i.g={}}function qs(){this.g=!0}function Si(i,e,t,o){i.info(function(){return"XMLHTTP TEXT ("+e+"): "+function Zs(i,e){if(!i.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(i=0;i<t.length;i++)if(Array.isArray(t[i])){var o=t[i];if(!(2>o.length)){var u=o[1];if(Array.isArray(u)&&!(1>u.length)){var d=u[0];if("noop"!=d&&"stop"!=d&&"close"!=d)for(var g=1;g<u.length;g++)u[g]=""}}}return Li(t)}catch{return e}}(i,t)+(o?" "+o:"")})}er.prototype.M=function(){er.Z.M.call(this),ys(this)},er.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},qs.prototype.Aa=function(){this.g=!1},qs.prototype.info=function(){};var ks={},ri=null;function xe(){return ri=ri||new In}function Ae(i){gt.call(this,ks.Ma,i)}function Ve(i){const e=xe();Xn(e,new Ae(e,i))}function lt(i,e){gt.call(this,ks.STAT_EVENT,i),this.stat=e}function Dt(i){const e=xe();Xn(e,new lt(e,i))}function Xt(i,e){gt.call(this,ks.Na,i),this.size=e}function bn(i,e){if("function"!=typeof i)throw Error("Fn must not be null and must be a function");return de.setTimeout(function(){i()},e)}ks.Ma="serverreachability",kt(Ae,gt),ks.STAT_EVENT="statevent",kt(lt,gt),ks.Na="timingevent",kt(Xt,gt);var Er={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},Un={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function fi(){}function Ks(){}fi.prototype.h=null;var vs,Hr={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function pi(){gt.call(this,"d")}function Ni(){gt.call(this,"c")}function ao(){}function Pi(i,e,t,o){this.l=i,this.j=e,this.m=t,this.X=o||1,this.V=new er(this),this.P=ki,this.W=new Ii(i=Lt?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new Xi}function Xi(){this.i=null,this.g="",this.h=!1}kt(pi,gt),kt(Ni,gt),kt(ao,fi),ao.prototype.g=function(){return new XMLHttpRequest},ao.prototype.i=function(){return{}},vs=new ao;var ki=45e3,ls={},Fs={};function cs(i,e,t){i.K=1,i.v=lo(gi(e)),i.s=t,i.U=!0,Ls(i,null)}function Ls(i,e){i.F=Date.now(),ii(i),i.A=gi(i.v);var t=i.A,o=i.X;Array.isArray(o)||(o=[String(o)]),Ur(t.h,"t",o),i.C=0,t=i.l.H,i.h=new Xi,i.g=Jr(i.l,t?e:null,!i.s),0<i.O&&(i.L=new us(Kt(i.Ia,i,i.g),i.O)),Ws(i.V,i.g,"readystatechange",i.gb),e=i.H?ei(i.H):{},i.s?(i.u||(i.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",i.g.ea(i.A,i.u,i.s,e)):(i.u="GET",i.g.ea(i.A,i.u,null,e)),Ve(1),function xr(i,e,t,o,u,d){i.info(function(){if(i.g)if(d)for(var g="",D=d.split("&"),L=0;L<D.length;L++){var H=D[L].split("=");if(1<H.length){var Q=H[0];H=H[1];var _e=Q.split("_");g=2<=_e.length&&"type"==_e[1]?g+(Q+"=")+H+"&":g+(Q+"=redacted&")}}else g=null;else g=d;return"XMLHTTP REQ ("+o+") [attempt "+u+"]: "+e+"\n"+t+"\n"+g})}(i.j,i.u,i.A,i.m,i.X,i.s)}function _o(i){return!!i.g&&"GET"==i.u&&2!=i.K&&i.l.Ba}function Vs(i,e,t){let u,o=!0;for(;!i.I&&i.C<t.length;){if(u=_s(i,t),u==Fs){4==e&&(i.o=4,Dt(14),o=!1),Si(i.j,i.m,null,"[Incomplete Response]");break}if(u==ls){i.o=4,Dt(15),Si(i.j,i.m,t,"[Invalid Chunk]"),o=!1;break}Si(i.j,i.m,u,null),wo(i,u)}_o(i)&&u!=Fs&&u!=ls&&(i.h.g="",i.C=0),4!=e||0!=t.length||i.h.h||(i.o=1,Dt(16),o=!1),i.i=i.i&&o,o?0<t.length&&!i.aa&&(i.aa=!0,(e=i.l).g==i&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+t.length),J(e),e.L=!0,Dt(11))):(Si(i.j,i.m,t,"[Invalid Chunked Response]"),Vr(i),Yr(i))}function _s(i,e){var t=i.C,o=e.indexOf("\n",t);return-1==o?Fs:(t=Number(e.substring(t,o)),isNaN(t)?ls:(o+=1)+t>e.length?Fs:(e=e.substr(o,t),i.C=o+t,e))}function ii(i){i.Y=Date.now()+i.P,Vi(i,i.P)}function Vi(i,e){if(null!=i.B)throw Error("WatchDog timer not null");i.B=bn(Kt(i.eb,i),e)}function Ai(i){i.B&&(de.clearTimeout(i.B),i.B=null)}function Yr(i){0==i.l.G||i.I||bt(i.l,i)}function Vr(i){Ai(i);var e=i.L;e&&"function"==typeof e.na&&e.na(),i.L=null,Oi(i.W),ys(i.V),i.g&&(e=i.g,i.g=null,e.abort(),e.na())}function wo(i,e){try{var t=i.l;if(0!=t.G&&(t.g==i||F(t.i,i)))if(t.I=i.N,!i.J&&F(t.i,i)&&3==t.G){try{var o=t.Ca.g.parse(e)}catch{o=null}if(Array.isArray(o)&&3==o.length){var u=o;if(0==u[0]){e:if(!t.u){if(t.g){if(!(t.g.F+3e3<i.F))break e;je(t),pr(t)}j(t),Dt(18)}}else t.ta=u[1],0<t.ta-t.U&&37500>u[2]&&t.N&&0==t.A&&!t.v&&(t.v=bn(Kt(t.ab,t),6e3));if(1>=ca(t.i)&&t.ka){try{t.ka()}catch{}t.ka=void 0}}else Ut(t,11)}else if((i.J||t.g==i)&&je(t),!qt(e))for(u=t.Ca.g.parse(e),e=0;e<u.length;e++){let H=u[e];if(t.U=H[0],H=H[1],2==t.G)if("c"==H[0]){t.J=H[1],t.la=H[2];const Q=H[3];null!=Q&&(t.ma=Q,t.h.info("VER="+t.ma));const _e=H[4];null!=_e&&(t.za=_e,t.h.info("SVER="+t.za));const Ge=H[5];null!=Ge&&"number"==typeof Ge&&0<Ge&&(t.K=o=1.5*Ge,t.h.info("backChannelRequestTimeoutMs_="+o)),o=t;const ct=i.g;if(ct){const mt=ct.g?ct.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(mt){var d=o.i;!d.g&&(zn(mt,"spdy")||zn(mt,"quic")||zn(mt,"h2"))&&(d.j=d.l,d.g=new Set,d.h&&(N(d,d.h),d.h=null))}if(o.D){const Yt=ct.g?ct.g.getResponseHeader("X-HTTP-Session-Id"):null;Yt&&(o.sa=Yt,Qn(o.F,o.D,Yt))}}t.G=3,t.j&&t.j.xa(),t.$&&(t.O=Date.now()-i.F,t.h.info("Handshake RTT: "+t.O+"ms"));var g=i;if((o=t).oa=Gn(o,o.H?o.la:null,o.W),g.J){A(o.i,g);var D=g,L=o.K;L&&D.setTimeout(L),D.B&&(Ai(D),ii(D)),o.g=g}else O(o);0<t.l.length&&Os(t)}else"stop"!=H[0]&&"close"!=H[0]||Ut(t,7);else 3==t.G&&("stop"==H[0]||"close"==H[0]?"stop"==H[0]?Ut(t,7):oi(t):"noop"!=H[0]&&t.j&&t.j.wa(H),t.A=0)}Ve(4)}catch{}}function Mr(i,e){if(i.forEach&&"function"==typeof i.forEach)i.forEach(e,void 0);else if(dt(i)||"string"==typeof i)vr(i,e,void 0);else{if(i.T&&"function"==typeof i.T)var t=i.T();else if(i.R&&"function"==typeof i.R)t=void 0;else if(dt(i)||"string"==typeof i){t=[];for(var o=i.length,u=0;u<o;u++)t.push(u)}else for(u in t=[],o=0,i)t[o++]=u;o=function uo(i){if(i.R&&"function"==typeof i.R)return i.R();if("string"==typeof i)return i.split("");if(dt(i)){for(var e=[],t=i.length,o=0;o<t;o++)e.push(i[o]);return e}for(o in e=[],t=0,i)e[t++]=i[o];return e}(i),u=o.length;for(var d=0;d<u;d++)e.call(void 0,o[d],t&&t[d],i)}}function ds(i,e){this.h={},this.g=[],this.i=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var o=0;o<t;o+=2)this.set(arguments[o],arguments[o+1])}else if(i)if(i instanceof ds)for(t=i.T(),o=0;o<t.length;o++)this.set(t[o],i.get(t[o]));else for(o in i)this.set(o,i[o])}function Ro(i){if(i.i!=i.g.length){for(var e=0,t=0;e<i.g.length;){var o=i.g[e];fr(i.h,o)&&(i.g[t++]=o),e++}i.g.length=t}if(i.i!=i.g.length){var u={};for(t=e=0;e<i.g.length;)fr(u,o=i.g[e])||(i.g[t++]=o,u[o]=1),e++;i.g.length=t}}function fr(i,e){return Object.prototype.hasOwnProperty.call(i,e)}(ne=Pi.prototype).setTimeout=function(i){this.P=i},ne.gb=function(i){i=i.target;const e=this.L;e&&3==nt(i)?e.l():this.Ia(i)},ne.Ia=function(i){try{if(i==this.g)e:{const Q=nt(this.g);var e=this.g.Da();const _e=this.g.ba();if(!(3>Q)&&(3!=Q||Lt||this.g&&(this.h.h||this.g.ga()||Jt(this.g)))){this.I||4!=Q||7==e||Ve(8==e||0>=_e?3:2),Ai(this);var t=this.g.ba();this.N=t;t:if(_o(this)){var o=Jt(this.g);i="";var u=o.length,d=4==nt(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Vr(this),Yr(this);var g="";break t}this.h.i=new de.TextDecoder}for(e=0;e<u;e++)this.h.h=!0,i+=this.h.i.decode(o[e],{stream:d&&e==u-1});o.splice(0,u),this.h.g+=i,this.C=0,g=this.h.g}else g=this.g.ga();if(this.i=200==t,function ni(i,e,t,o,u,d,g){i.info(function(){return"XMLHTTP RESP ("+o+") [ attempt "+u+"]: "+e+"\n"+t+"\n"+d+" "+g})}(this.j,this.u,this.A,this.m,this.X,Q,t),this.i){if(this.$&&!this.J){t:{if(this.g){var D,L=this.g;if((D=L.g?L.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!qt(D)){var H=D;break t}}H=null}if(!(t=H)){this.i=!1,this.o=3,Dt(12),Vr(this),Yr(this);break e}Si(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,wo(this,t)}this.U?(Vs(this,Q,g),Lt&&this.i&&3==Q&&(Ws(this.V,this.W,"tick",this.fb),this.W.start())):(Si(this.j,this.m,g,null),wo(this,g)),4==Q&&Vr(this),this.i&&!this.I&&(4==Q?bt(this.l,this):(this.i=!1,ii(this)))}else 400==t&&0<g.indexOf("Unknown SID")?(this.o=3,Dt(12)):(this.o=0,Dt(13)),Vr(this),Yr(this)}}}catch{}},ne.fb=function(){if(this.g){var i=nt(this.g),e=this.g.ga();this.C<e.length&&(Ai(this),Vs(this,i,e),this.i&&4!=i&&ii(this))}},ne.cancel=function(){this.I=!0,Vr(this)},ne.eb=function(){this.B=null;const i=Date.now();0<=i-this.Y?(function Ho(i,e){i.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(Ve(3),Dt(17)),Vr(this),this.o=2,Yr(this)):Vi(this,this.Y-i)},(ne=ds.prototype).R=function(){Ro(this);for(var i=[],e=0;e<this.g.length;e++)i.push(this.h[this.g[e]]);return i},ne.T=function(){return Ro(this),this.g.concat()},ne.get=function(i,e){return fr(this.h,i)?this.h[i]:e},ne.set=function(i,e){fr(this.h,i)||(this.i++,this.g.push(i)),this.h[i]=e},ne.forEach=function(i,e){for(var t=this.T(),o=0;o<t.length;o++){var u=t[o],d=this.get(u);i.call(e,d,u,this)}};var si=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Ui(i,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,i instanceof Ui){this.g=void 0!==e?e:i.g,Wn(this,i.j),this.s=i.s,Di(this,i.i),ws(this,i.m),this.l=i.l,e=i.h;var t=new ft;t.i=e.i,e.g&&(t.g=new ds(e.g),t.h=e.h),Go(this,t),this.o=i.o}else i&&(t=String(i).match(si))?(this.g=!!e,Wn(this,t[1]||"",!0),this.s=Us(t[2]||""),Di(this,t[3]||"",!0),ws(this,t[4]),this.l=Us(t[5]||"",!0),Go(this,t[6]||"",!0),this.o=Us(t[7]||"")):(this.g=!!e,this.h=new ft(null,this.g))}function gi(i){return new Ui(i)}function Wn(i,e,t){i.j=t?Us(e,!0):e,i.j&&(i.j=i.j.replace(/:$/,""))}function Di(i,e,t){i.i=t?Us(e,!0):e}function ws(i,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);i.m=e}else i.m=null}function Go(i,e,t){e instanceof ft?(i.h=e,function Is(i,e){e&&!i.j&&(Rn(i),i.i=null,i.g.forEach(function(t,o){var u=o.toLowerCase();o!=u&&(Bs(this,o),Ur(this,u,t))},i)),i.j=e}(i.h,i.g)):(t||(e=Ys(e,Eo)),i.h=new ft(e,i.g))}function Qn(i,e,t){i.h.set(e,t)}function lo(i){return Qn(i,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),i}function Us(i,e){return i?e?decodeURI(i.replace(/%25/g,"%2525")):decodeURIComponent(i):""}function Ys(i,e,t){return"string"==typeof i?(i=encodeURI(i).replace(e,Oo),t&&(i=i.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),i):null}function Oo(i){return"%"+((i=i.charCodeAt(0))>>4&15).toString(16)+(15&i).toString(16)}Ui.prototype.toString=function(){var i=[],e=this.j;e&&i.push(Ys(e,Qs,!0),":");var t=this.i;return(t||"file"==e)&&(i.push("//"),(e=this.s)&&i.push(Ys(e,Qs,!0),"@"),i.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&i.push(":",String(t))),(t=this.l)&&(this.i&&"/"!=t.charAt(0)&&i.push("/"),i.push(Ys(t,"/"==t.charAt(0)?Es:Bi,!0))),(t=this.h.toString())&&i.push("?",t),(t=this.o)&&i.push("#",Ys(t,No)),i.join("")};var Qs=/[#\/\?@]/g,Bi=/[#\?:]/g,Es=/[#\?]/g,Eo=/[#\?@]/g,No=/#/g;function ft(i,e){this.h=this.g=null,this.i=i||null,this.j=!!e}function Rn(i){i.g||(i.g=new ds,i.h=0,i.i&&function es(i,e){if(i){i=i.split("&");for(var t=0;t<i.length;t++){var o=i[t].indexOf("="),u=null;if(0<=o){var d=i[t].substring(0,o);u=i[t].substring(o+1)}else d=i[t];e(d,u?decodeURIComponent(u.replace(/\+/g," ")):"")}}}(i.i,function(e,t){i.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function Bs(i,e){Rn(i),e=ts(i,e),fr(i.g.h,e)&&(i.i=null,i.h-=i.g.get(e).length,fr((i=i.g).h,e)&&(delete i.h[e],i.i--,i.g.length>2*i.i&&Ro(i)))}function Po(i,e){return Rn(i),e=ts(i,e),fr(i.g.h,e)}function Ur(i,e,t){Bs(i,e),0<t.length&&(i.i=null,i.g.set(ts(i,e),Ir(t)),i.h+=t.length)}function ts(i,e){return e=String(e),i.j&&(e=e.toLowerCase()),e}function Io(i){this.l=i||js,i=de.PerformanceNavigationTiming?0<(i=de.performance.getEntriesByType("navigation")).length&&("hq"==i[0].nextHopProtocol||"h2"==i[0].nextHopProtocol):!!(de.g&&de.g.Ea&&de.g.Ea()&&de.g.Ea().Zb),this.j=i?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(ne=ft.prototype).add=function(i,e){Rn(this),this.i=null,i=ts(this,i);var t=this.g.get(i);return t||this.g.set(i,t=[]),t.push(e),this.h+=1,this},ne.forEach=function(i,e){Rn(this),this.g.forEach(function(t,o){vr(t,function(u){i.call(e,u,o,this)},this)},this)},ne.T=function(){Rn(this);for(var i=this.g.R(),e=this.g.T(),t=[],o=0;o<e.length;o++)for(var u=i[o],d=0;d<u.length;d++)t.push(e[o]);return t},ne.R=function(i){Rn(this);var e=[];if("string"==typeof i)Po(this,i)&&(e=yr(e,this.g.get(ts(this,i))));else{i=this.g.R();for(var t=0;t<i.length;t++)e=yr(e,i[t])}return e},ne.set=function(i,e){return Rn(this),this.i=null,Po(this,i=ts(this,i))&&(this.h-=this.g.get(i).length),this.g.set(i,[e]),this.h+=1,this},ne.get=function(i,e){return i&&0<(i=this.R(i)).length?String(i[0]):e},ne.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var i=[],e=this.g.T(),t=0;t<e.length;t++){var o=e[t],u=encodeURIComponent(String(o));o=this.R(o);for(var d=0;d<o.length;d++){var g=u;""!==o[d]&&(g+="="+encodeURIComponent(String(o[d]))),i.push(g)}}return this.i=i.join("&")};var js=10;function Do(i){return!!i.h||!!i.g&&i.g.size>=i.j}function ca(i){return i.h?1:i.g?i.g.size:0}function F(i,e){return i.h?i.h==e:!!i.g&&i.g.has(e)}function N(i,e){i.g?i.g.add(e):i.h=e}function A(i,e){i.h&&i.h==e?i.h=null:i.g&&i.g.has(e)&&i.g.delete(e)}function K(i){if(null!=i.h)return i.i.concat(i.h.D);if(null!=i.g&&0!==i.g.size){let e=i.i;for(const t of i.g.values())e=e.concat(t.D);return e}return Ir(i.i)}function Xe(){}function nn(){this.g=new Xe}function dr(i,e,t){const o=t||"";try{Mr(i,function(u,d){let g=u;wt(u)&&(g=Li(u)),e.push(o+d+"="+encodeURIComponent(g))})}catch(u){throw e.push(o+"type="+encodeURIComponent("_badmap")),u}}function mi(i,e,t,o,u){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,u(o)}catch{}}function ji(i){this.l=i.$b||null,this.j=i.ib||!1}function Js(i,e){In.call(this),this.D=i,this.u=e,this.m=void 0,this.readyState=Xs,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Io.prototype.cancel=function(){if(this.i=K(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const i of this.g.values())i.cancel();this.g.clear()}},Xe.prototype.stringify=function(i){return de.JSON.stringify(i,void 0)},Xe.prototype.parse=function(i){return de.JSON.parse(i,void 0)},kt(ji,fi),ji.prototype.g=function(){return new Js(this.l,this.j)},ji.prototype.i=function(i){return function(){return i}}({}),kt(Js,In);var Xs=0;function ko(i){i.j.read().then(i.Sa.bind(i)).catch(i.ha.bind(i))}function zo(i){i.readyState=4,i.l=null,i.j=null,i.A=null,co(i)}function co(i){i.onreadystatechange&&i.onreadystatechange.call(i)}(ne=Js.prototype).open=function(i,e){if(this.readyState!=Xs)throw this.abort(),Error("Error reopening a connection");this.C=i,this.B=e,this.readyState=1,co(this)},ne.send=function(i){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};i&&(e.body=i),(this.D||de).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},ne.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,zo(this)),this.readyState=Xs},ne.Va=function(i){if(this.g&&(this.l=i,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=i.headers,this.readyState=2,co(this)),this.g&&(this.readyState=3,co(this),this.g)))if("arraybuffer"===this.responseType)i.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(typeof de.ReadableStream<"u"&&"body"in i){if(this.j=i.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;ko(this)}else i.text().then(this.Ua.bind(this),this.ha.bind(this))},ne.Sa=function(i){if(this.g){if(this.u&&i.value)this.response.push(i.value);else if(!this.u){var e=i.value?i.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!i.done}))&&(this.response=this.responseText+=e)}i.done?zo(this):co(this),3==this.readyState&&ko(this)}},ne.Ua=function(i){this.g&&(this.response=this.responseText=i,zo(this))},ne.Ta=function(i){this.g&&(this.response=i,zo(this))},ne.ha=function(){this.g&&zo(this)},ne.setRequestHeader=function(i,e){this.v.append(i,e)},ne.getResponseHeader=function(i){return this.h&&this.h.get(i.toLowerCase())||""},ne.getAllResponseHeaders=function(){if(!this.h)return"";const i=[],e=this.h.entries();for(var t=e.next();!t.done;)i.push((t=t.value)[0]+": "+t[1]),t=e.next();return i.join("\r\n")},Object.defineProperty(Js.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(i){this.m=i?"include":"same-origin"}});var Ea=de.JSON.parse;function Rr(i){In.call(this),this.headers=new ds,this.u=i||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Wo,this.K=this.L=!1}kt(Rr,In);var Wo="",da=/^https?$/i,Rs=["POST","PUT"];function S(i){return"content-type"==i.toLowerCase()}function $(i,e){i.h=!1,i.g&&(i.l=!0,i.g.abort(),i.l=!1),i.j=e,i.m=5,R(i),fe(i)}function R(i){i.D||(i.D=!0,Xn(i,"complete"),Xn(i,"error"))}function q(i){if(i.h&&typeof Ie<"u"&&(!i.C[1]||4!=nt(i)||2!=i.ba()))if(i.v&&4==nt(i))Ji(i.Fa,0,i);else if(Xn(i,"readystatechange"),4==nt(i)){i.h=!1;try{const D=i.ba();e:switch(D){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var o;if(o=0===D){var u=String(i.H).match(si)[1]||null;if(!u&&de.self&&de.self.location){var d=de.self.location.protocol;u=d.substr(0,d.length-1)}o=!da.test(u?u.toLowerCase():"")}t=o}if(t)Xn(i,"complete"),Xn(i,"success");else{i.m=6;try{var g=2<nt(i)?i.g.statusText:""}catch{g=""}i.j=g+" ["+i.ba()+"]",R(i)}}finally{fe(i)}}}function fe(i,e){if(i.g){ze(i);const t=i.g,o=i.C[0]?Ne:null;i.g=null,i.C=null,e||Xn(i,"ready");try{t.onreadystatechange=o}catch{}}}function ze(i){i.g&&i.K&&(i.g.ontimeout=null),i.A&&(de.clearTimeout(i.A),i.A=null)}function nt(i){return i.g?i.g.readyState:0}function Jt(i){try{if(!i.g)return null;if("response"in i.g)return i.g.response;switch(i.J){case Wo:case"text":return i.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in i.g)return i.g.mozResponseArrayBuffer}return null}catch{return null}}function ur(i,e,t){e:{for(o in t){var o=!1;break e}o=!0}o||(t=function sr(i){let e="";return Hn(i,function(t,o){e+=o,e+=":",e+=t,e+="\r\n"}),e}(t),"string"==typeof i?null!=t&&encodeURIComponent(String(t)):Qn(i,e,t))}function qn(i,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[i]||e}function Zn(i){this.za=0,this.l=[],this.h=new qs,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=qn("failFast",!1,i),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=qn("baseRetryDelayMs",5e3,i),this.$a=qn("retryDelaySeedMs",1e4,i),this.Ya=qn("forwardChannelMaxRetries",2,i),this.ra=qn("forwardChannelRequestTimeoutMs",2e4,i),this.qa=i&&i.xmlHttpFactory||void 0,this.Ba=i&&i.Yb||!1,this.K=void 0,this.H=i&&i.supportsCrossDomainXhr||!1,this.J="",this.i=new Io(i&&i.concurrentRequestLimit),this.Ca=new nn,this.ja=i&&i.fastHandshake||!1,this.Ra=i&&i.Wb||!1,i&&i.Aa&&this.h.Aa(),i&&i.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&i&&i.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!i||!1!==i.Xb}function oi(i){if(Or(i),3==i.G){var e=i.V++,t=gi(i.F);Qn(t,"SID",i.J),Qn(t,"RID",e),Qn(t,"TYPE","terminate"),ps(i,t),(e=new Pi(i,i.h,e,void 0)).K=2,e.v=lo(gi(t)),t=!1,de.navigator&&de.navigator.sendBeacon&&(t=de.navigator.sendBeacon(e.v.toString(),"")),!t&&de.Image&&((new Image).src=e.v,t=!0),t||(e.g=Jr(e.l,null),e.g.ea(e.v)),e.F=Date.now(),ii(e)}An(i)}function pr(i){i.g&&(J(i),i.g.cancel(),i.g=null)}function Or(i){pr(i),i.u&&(de.clearTimeout(i.u),i.u=null),je(i),i.i.cancel(),i.m&&("number"==typeof i.m&&de.clearTimeout(i.m),i.m=null)}function $s(i,e){i.l.push(new class{constructor(i,e){this.h=i,this.g=e}}(i.Za++,e)),3==i.G&&Os(i)}function Os(i){Do(i.i)||i.m||(i.m=!0,Ri(i.Ha,i),i.C=0)}function Co(i,e){var t;t=e?e.m:i.V++;const o=gi(i.F);Qn(o,"SID",i.J),Qn(o,"RID",t),Qn(o,"AID",i.U),ps(i,o),i.o&&i.s&&ur(o,i.o,i.s),t=new Pi(i,i.h,t,i.C+1),null===i.o&&(t.H=i.s),e&&(i.l=e.D.concat(i.l)),e=x(i,t,1e3),t.setTimeout(Math.round(.5*i.ra)+Math.round(.5*i.ra*Math.random())),N(i.i,t),cs(t,o,e)}function ps(i,e){i.j&&Mr({},function(t,o){Qn(e,o,t)})}function x(i,e,t){t=Math.min(i.l.length,t);var o=i.j?Kt(i.j.Oa,i.j,i):null;e:{var u=i.l;let d=-1;for(;;){const g=["count="+t];-1==d?0<t?(d=u[0].h,g.push("ofs="+d)):d=0:g.push("ofs="+d);let D=!0;for(let L=0;L<t;L++){let H=u[L].h;const Q=u[L].g;if(H-=d,0>H)d=Math.max(0,u[L].h-100),D=!1;else try{dr(Q,g,"req"+H+"_")}catch{o&&o(Q)}}if(D){o=g.join("&");break e}}}return i=i.l.splice(0,t),e.D=i,o}function O(i){i.g||i.u||(i.Y=1,Ri(i.Ga,i),i.A=0)}function j(i){return!(i.g||i.u||3<=i.A||(i.Y++,i.u=bn(Kt(i.Ga,i),sn(i,i.A)),i.A++,0))}function J(i){null!=i.B&&(de.clearTimeout(i.B),i.B=null)}function De(i){i.g=new Pi(i,i.h,"rpc",i.Y),null===i.o&&(i.g.H=i.s),i.g.O=0;var e=gi(i.oa);Qn(e,"RID","rpc"),Qn(e,"SID",i.J),Qn(e,"CI",i.N?"0":"1"),Qn(e,"AID",i.U),ps(i,e),Qn(e,"TYPE","xmlhttp"),i.o&&i.s&&ur(e,i.o,i.s),i.K&&i.g.setTimeout(i.K);var t=i.g;i=i.la,t.K=1,t.v=lo(gi(e)),t.s=null,t.U=!0,Ls(t,i)}function je(i){null!=i.v&&(de.clearTimeout(i.v),i.v=null)}function bt(i,e){var t=null;if(i.g==e){je(i),J(i),i.g=null;var o=2}else{if(!F(i.i,e))return;t=e.D,A(i.i,e),o=1}if(i.I=e.N,0!=i.G)if(e.i)if(1==o){t=e.s?e.s.length:0,e=Date.now()-e.F;var u=i.C;Xn(o=xe(),new Xt(o,t,e,u)),Os(i)}else O(i);else if(3==(u=e.o)||0==u&&0<i.I||!(1==o&&function eo(i,e){return!(ca(i.i)>=i.i.j-(i.m?1:0)||(i.m?(i.l=e.D.concat(i.l),0):1==i.G||2==i.G||i.C>=(i.Xa?0:i.Ya)||(i.m=bn(Kt(i.Ha,i,e),sn(i,i.C)),i.C++,0)))}(i,e)||2==o&&j(i)))switch(t&&0<t.length&&(e=i.i,e.i=e.i.concat(t)),u){case 1:Ut(i,5);break;case 4:Ut(i,10);break;case 3:Ut(i,6);break;default:Ut(i,2)}}function sn(i,e){let t=i.Pa+Math.floor(Math.random()*i.$a);return i.j||(t*=2),t*e}function Ut(i,e){if(i.h.info("Error code "+e),2==e){var t=null;i.j&&(t=null);var o=Kt(i.jb,i);t||(t=new Ui("//www.google.com/images/cleardot.gif"),de.location&&"http"==de.location.protocol||Wn(t,"https"),lo(t)),function fs(i,e){const t=new qs;if(de.Image){const o=new Image;o.onload=on(mi,t,o,"TestLoadImage: loaded",!0,e),o.onerror=on(mi,t,o,"TestLoadImage: error",!1,e),o.onabort=on(mi,t,o,"TestLoadImage: abort",!1,e),o.ontimeout=on(mi,t,o,"TestLoadImage: timeout",!1,e),de.setTimeout(function(){o.ontimeout&&o.ontimeout()},1e4),o.src=i}else e(!1)}(t.toString(),o)}else Dt(2);i.G=0,i.j&&i.j.va(e),An(i),Or(i)}function An(i){i.G=0,i.I=-1,i.j&&((0!=K(i.i).length||0!=i.l.length)&&(i.i.i.length=0,Ir(i.l),i.l.length=0),i.j.ua())}function Gn(i,e,t){let o=function Qr(i){return i instanceof Ui?gi(i):new Ui(i,void 0)}(t);if(""!=o.i)e&&Di(o,e+"."+o.i),ws(o,o.m);else{const u=de.location;o=function yn(i,e,t,o){var u=new Ui(null,void 0);return i&&Wn(u,i),e&&Di(u,e),t&&ws(u,t),o&&(u.l=o),u}(u.protocol,e?e+"."+u.hostname:u.hostname,+u.port,t)}return i.aa&&Hn(i.aa,function(u,d){Qn(o,d,u)}),t=i.sa,(e=i.D)&&t&&Qn(o,e,t),Qn(o,"VER",i.ma),ps(i,o),o}function Jr(i,e,t){if(e&&!i.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Rr(t&&i.Ba&&!i.qa?new ji({ib:!0}):i.qa)).L=i.H,e}function Nr(){}function ai(){if(Be&&!(10<=Number(ye)))throw Error("Environmental error: no available transport.")}function gr(i,e){In.call(this),this.g=new Zn(e),this.l=i,this.h=e&&e.messageUrlParams||null,i=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(i?i["X-Client-Protocol"]="webchannel":i={"X-Client-Protocol":"webchannel"}),this.g.s=i,i=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(i?i["X-WebChannel-Content-Type"]=e.messageContentType:i={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(i?i["X-WebChannel-Client-Profile"]=e.ya:i={"X-WebChannel-Client-Profile":e.ya}),this.g.P=i,(i=e&&e.httpHeadersOverwriteParam)&&!qt(i)&&(this.g.o=i),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!qt(e)&&(this.g.D=e,null!==(i=this.h)&&e in i&&e in(i=this.h)&&delete i[e]),this.j=new $i(this)}function br(i){pi.call(this);var e=i.__sm__;if(e){e:{for(const t in e){i=t;break e}i=void 0}(this.i=i)&&(i=this.i,e=null!==e&&i in e?e[i]:void 0),this.data=e}else this.data=i}function ui(){Ni.call(this),this.status=1}function $i(i){this.g=i}(ne=Rr.prototype).ea=function(i,e,t,o){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+i);e=e?e.toUpperCase():"GET",this.H=i,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():vs.g(),this.C=function vo(i){return i.h||(i.h=i.i())}(this.u?this.u:vs),this.g.onreadystatechange=Kt(this.Fa,this);try{this.F=!0,this.g.open(e,String(i),!0),this.F=!1}catch(d){return void $(this,d)}i=t||"";const u=new ds(this.headers);o&&Mr(o,function(d,g){u.set(g,d)}),o=function _r(i){e:{var e=S;const t=i.length,o="string"==typeof i?i.split(""):i;for(let u=0;u<t;u++)if(u in o&&e.call(void 0,o[u],u,i)){e=u;break e}e=-1}return 0>e?null:"string"==typeof i?i.charAt(e):i[e]}(u.T()),t=de.FormData&&i instanceof de.FormData,!(0<=Wr(Rs,e))||o||t||u.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),u.forEach(function(d,g){this.g.setRequestHeader(g,d)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{ze(this),0<this.B&&((this.K=function ha(i){return Be&&function X(){return function ge(i){var e=me;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=i(9)}(function(){let i=0;const e=rr(String(ir)).split("."),t=rr("9").split("."),o=Math.max(e.length,t.length);for(let g=0;0==i&&g<o;g++){var u=e[g]||"",d=t[g]||"";do{if(u=/(\d*)(\D*)(.*)/.exec(u)||["","","",""],d=/(\d*)(\D*)(.*)/.exec(d)||["","","",""],0==u[0].length&&0==d[0].length)break;i=lr(0==u[1].length?0:parseInt(u[1],10),0==d[1].length?0:parseInt(d[1],10))||lr(0==u[2].length,0==d[2].length)||lr(u[2],d[2]),u=u[3],d=d[3]}while(0==i)}return 0<=i})}()&&"number"==typeof i.timeout&&void 0!==i.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Kt(this.pa,this)):this.A=Ji(this.pa,this.B,this)),this.v=!0,this.g.send(i),this.v=!1}catch(d){$(this,d)}},ne.pa=function(){typeof Ie<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Xn(this,"timeout"),this.abort(8))},ne.abort=function(i){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=i||7,Xn(this,"complete"),Xn(this,"abort"),fe(this))},ne.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),fe(this,!0)),Rr.Z.M.call(this)},ne.Fa=function(){this.s||(this.F||this.v||this.l?q(this):this.cb())},ne.cb=function(){q(this)},ne.ba=function(){try{return 2<nt(this)?this.g.status:-1}catch{return-1}},ne.ga=function(){try{return this.g?this.g.responseText:""}catch{return""}},ne.Qa=function(i){if(this.g){var e=this.g.responseText;return i&&0==e.indexOf(i)&&(e=e.substring(i.length)),Ea(e)}},ne.Da=function(){return this.m},ne.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(ne=Zn.prototype).ma=8,ne.G=1,ne.hb=function(i){try{this.h.info("Origin Trials invoked: "+i)}catch{}},ne.Ha=function(i){if(this.m)if(this.m=null,1==this.G){if(!i){this.V=Math.floor(1e5*Math.random()),i=this.V++;const u=new Pi(this,this.h,i,void 0);let d=this.s;if(this.P&&(d?(d=ei(d),wr(d,this.P)):d=this.P),null===this.o&&(u.H=d),this.ja)e:{for(var e=0,t=0;t<this.l.length;t++){var o=this.l[t];if(void 0===(o="__data__"in o.g&&"string"==typeof(o=o.g.__data__)?o.length:void 0))break;if(4096<(e+=o)){e=t;break e}if(4096===e||t===this.l.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=x(this,u,e),Qn(t=gi(this.F),"RID",i),Qn(t,"CVER",22),this.D&&Qn(t,"X-HTTP-Session-Id",this.D),ps(this,t),this.o&&d&&ur(t,this.o,d),N(this.i,u),this.Ra&&Qn(t,"TYPE","init"),this.ja?(Qn(t,"$req",e),Qn(t,"SID","null"),u.$=!0,cs(u,t,null)):cs(u,t,e),this.G=2}}else 3==this.G&&(i?Co(this,i):0==this.l.length||Do(this.i)||Co(this))},ne.Ga=function(){if(this.u=null,De(this),this.$&&!(this.L||null==this.g||0>=this.O)){var i=2*this.O;this.h.info("BP detection timer enabled: "+i),this.B=bn(Kt(this.bb,this),i)}},ne.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,Dt(10),pr(this),De(this))},ne.ab=function(){null!=this.v&&(this.v=null,pr(this),j(this),Dt(19))},ne.jb=function(i){i?(this.h.info("Successfully pinged google.com"),Dt(2)):(this.h.info("Failed to ping google.com"),Dt(1))},(ne=Nr.prototype).xa=function(){},ne.wa=function(){},ne.va=function(){},ne.ua=function(){},ne.Oa=function(){},ai.prototype.g=function(i,e){return new gr(i,e)},kt(gr,In),gr.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var i=this.g,e=this.l,t=this.h||void 0;i.Wa&&(i.h.info("Origin Trials enabled."),Ri(Kt(i.hb,i,e))),Dt(0),i.W=e,i.aa=t||{},i.N=i.X,i.F=Gn(i,null,i.W),Os(i)},gr.prototype.close=function(){oi(this.g)},gr.prototype.u=function(i){if("string"==typeof i){var e={};e.__data__=i,$s(this.g,e)}else this.v?((e={}).__data__=Li(i),$s(this.g,e)):$s(this.g,i)},gr.prototype.M=function(){this.g.j=null,delete this.j,oi(this.g),delete this.g,gr.Z.M.call(this)},kt(br,pi),kt(ui,Ni),kt($i,Nr),$i.prototype.xa=function(){Xn(this.g,"a")},$i.prototype.wa=function(i){Xn(this.g,new br(i))},$i.prototype.va=function(i){Xn(this.g,new ui(i))},$i.prototype.ua=function(){Xn(this.g,"b")},ai.prototype.createWebChannel=ai.prototype.g,gr.prototype.send=gr.prototype.u,gr.prototype.open=gr.prototype.m,gr.prototype.close=gr.prototype.close,Er.NO_ERROR=0,Er.TIMEOUT=8,Er.HTTP_ERROR=6,Un.COMPLETE="complete",Ks.EventType=Hr,Hr.OPEN="a",Hr.CLOSE="b",Hr.ERROR="c",Hr.MESSAGE="d",In.prototype.listen=In.prototype.N,Rr.prototype.listenOnce=Rr.prototype.O,Rr.prototype.getLastError=Rr.prototype.La,Rr.prototype.getLastErrorCode=Rr.prototype.Da,Rr.prototype.getStatus=Rr.prototype.ba,Rr.prototype.getResponseJson=Rr.prototype.Qa,Rr.prototype.getResponseText=Rr.prototype.ga,Rr.prototype.send=Rr.prototype.ea;var Hi=Fe.createWebChannelTransport=function(){return new ai},xi=Fe.getStatEventTarget=function(){return xe()},Gi=Fe.ErrorCode=Er,ho=Fe.EventType=Un,bo=Fe.Event=ks,li=Fe.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},ns=Fe.FetchXmlHttpFactory=ji,To=Fe.WebChannel=Ks,Ma=Fe.XhrIo=Rr;const Ra="@firebase/firestore";class zi{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}zi.UNAUTHENTICATED=new zi(null),zi.GOOGLE_CREDENTIALS=new zi("google-credentials-uid"),zi.FIRST_PARTY=new zi("first-party-uid"),zi.MOCK_USER=new zi("mock-user");let ta="9.9.4";const to=new vt.Yd("@firebase/firestore");function Oa(){return to.logLevel}function Tt(i,...e){if(to.logLevel<=vt.in.DEBUG){const t=e.map(za);to.debug(`Firestore (${ta}): ${i}`,...t)}}function Pr(i,...e){if(to.logLevel<=vt.in.ERROR){const t=e.map(za);to.error(`Firestore (${ta}): ${i}`,...t)}}function Fo(i,...e){if(to.logLevel<=vt.in.WARN){const t=e.map(za);to.warn(`Firestore (${ta}): ${i}`,...t)}}function za(i){if("string"==typeof i)return i;try{return JSON.stringify(i)}catch{return i}}function Qt(i="Unexpected state"){const e=`FIRESTORE (${ta}) INTERNAL ASSERTION FAILED: `+i;throw Pr(e),new Error(e)}function vn(i,e){i||Qt()}function Ht(i,e){return i}const Qe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Et extends tt.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Wi{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class qi{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class nu{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(zi.UNAUTHENTICATED))}shutdown(){}}class Ia{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class Na{constructor(e){this.t=e,this.currentUser=zi.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var o=this;let u=this.i;const d=H=>this.i!==u?(u=this.i,t(H)):Promise.resolve();let g=new Wi;this.o=()=>{this.i++,this.currentUser=this.u(),g.resolve(),g=new Wi,e.enqueueRetryable(()=>d(this.currentUser))};const D=()=>{const H=g;e.enqueueRetryable((0,he.Z)(function*(){yield H.promise,yield d(o.currentUser)}))},L=H=>{Tt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=H,this.auth.addAuthTokenListener(this.o),D()};this.t.onInit(H=>L(H)),setTimeout(()=>{if(!this.auth){const H=this.t.getImmediate({optional:!0});H?L(H):(Tt("FirebaseAuthCredentialsProvider","Auth not yet detected"),g.resolve(),g=new Wi)}},0),D()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(o=>this.i!==e?(Tt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):o?(vn("string"==typeof o.accessToken),new qi(o.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return vn(null===e||"string"==typeof e),new zi(e)}}class Pa{constructor(e,t,o,u){this.h=e,this.l=t,this.m=o,this.g=u,this.type="FirstParty",this.user=zi.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(vn(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class no{constructor(e,t,o,u){this.h=e,this.l=t,this.m=o,this.g=u}getToken(){return Promise.resolve(new Pa(this.h,this.l,this.m,this.g))}start(e,t){e.enqueueRetryable(()=>t(zi.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class qo{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class pa{constructor(e){this.T=e,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(e,t){const o=d=>{null!=d.error&&Tt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${d.error.message}`);const g=d.token!==this.A;return this.A=d.token,Tt("FirebaseAppCheckTokenProvider",`Received ${g?"new":"existing"} token.`),g?t(d.token):Promise.resolve()};this.o=d=>{e.enqueueRetryable(()=>o(d))};const u=d=>{Tt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=d,this.appCheck.addTokenListener(this.o)};this.T.onInit(d=>u(d)),setTimeout(()=>{if(!this.appCheck){const d=this.T.getImmediate({optional:!0});d?u(d):Tt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(vn("string"==typeof t.token),this.A=t.token,new qo(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function iu(i){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(i);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let o=0;o<i;o++)t[o]=Math.floor(256*Math.random());return t}class ga{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let o="";for(;o.length<20;){const u=iu(40);for(let d=0;d<u.length;++d)o.length<20&&u[d]<t&&(o+=e.charAt(u[d]%e.length))}return o}}function Dn(i,e){return i<e?-1:i>e?1:0}function So(i,e,t){return i.length===e.length&&i.every((o,u)=>t(o,e[u]))}function kr(i){return i+"\0"}class Mi{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Et(Qe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Et(Qe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Et(Qe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Et(Qe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Mi.fromMillis(Date.now())}static fromDate(e){return Mi.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),o=Math.floor(1e6*(e-1e3*t));return new Mi(t,o)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Dn(this.nanoseconds,e.nanoseconds):Dn(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Pn{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Pn(e)}static min(){return new Pn(new Mi(0,0))}static max(){return new Pn(new Mi(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Zo{constructor(e,t,o){void 0===t?t=0:t>e.length&&Qt(),void 0===o?o=e.length-t:o>e.length-t&&Qt(),this.segments=e,this.offset=t,this.len=o}get length(){return this.len}isEqual(e){return 0===Zo.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Zo?e.forEach(o=>{t.push(o)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,o=this.limit();t<o;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const o=Math.min(e.length,t.length);for(let u=0;u<o;u++){const d=e.get(u),g=t.get(u);if(d<g)return-1;if(d>g)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class mr extends Zo{construct(e,t,o){return new mr(e,t,o)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const o of e){if(o.indexOf("//")>=0)throw new Et(Qe.INVALID_ARGUMENT,`Invalid segment (${o}). Paths must not contain // in them.`);t.push(...o.split("/").filter(u=>u.length>0))}return new mr(t)}static emptyPath(){return new mr([])}}const Gc=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class yi extends Zo{construct(e,t,o){return new yi(e,t,o)}static isValidIdentifier(e){return Gc.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),yi.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new yi(["__name__"])}static fromServerFormat(e){const t=[];let o="",u=0;const d=()=>{if(0===o.length)throw new Et(Qe.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(o),o=""};let g=!1;for(;u<e.length;){const D=e[u];if("\\"===D){if(u+1===e.length)throw new Et(Qe.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const L=e[u+1];if("\\"!==L&&"."!==L&&"`"!==L)throw new Et(Qe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);o+=L,u+=2}else"`"===D?(g=!g,u++):"."!==D||g?(o+=D,u++):(d(),u++)}if(d(),g)throw new Et(Qe.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new yi(t)}static emptyPath(){return new yi([])}}class zt{constructor(e){this.path=e}static fromPath(e){return new zt(mr.fromString(e))}static fromName(e){return new zt(mr.fromString(e).popFirst(5))}static empty(){return new zt(mr.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===mr.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return mr.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new zt(new mr(e.slice()))}}class na{constructor(e,t,o,u){this.indexId=e,this.collectionGroup=t,this.fields=o,this.indexState=u}}function qu(i){return i.fields.find(e=>2===e.kind)}function Wa(i){return i.fields.filter(e=>2!==e.kind)}na.UNKNOWN_ID=-1;class Da{constructor(e,t){this.fieldPath=e,this.kind=t}}class su{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new su(0,vi.min())}}function ma(i,e){const t=i.toTimestamp().seconds,o=i.toTimestamp().nanoseconds+1,u=Pn.fromTimestamp(1e9===o?new Mi(t+1,0):new Mi(t,o));return new vi(u,zt.empty(),e)}function fo(i){return new vi(i.readTime,i.key,-1)}class vi{constructor(e,t,o){this.readTime=e,this.documentKey=t,this.largestBatchId=o}static min(){return new vi(Pn.min(),zt.empty(),-1)}static max(){return new vi(Pn.max(),zt.empty(),-1)}}function ou(i,e){let t=i.readTime.compareTo(e.readTime);return 0!==t?t:(t=zt.comparator(i.documentKey,e.documentKey),0!==t?t:Dn(i.largestBatchId,e.largestBatchId))}const Ca="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class ra{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function Lo(i){return Zu.apply(this,arguments)}function Zu(){return Zu=(0,he.Z)(function*(i){if(i.code!==Qe.FAILED_PRECONDITION||i.message!==Ca)throw i;Tt("LocalStore","Unexpectedly lost primary lease")}),Zu.apply(this,arguments)}class qe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Qt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new qe((o,u)=>{this.nextCallback=d=>{this.wrapSuccess(e,d).next(o,u)},this.catchCallback=d=>{this.wrapFailure(t,d).next(o,u)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof qe?t:qe.resolve(t)}catch(t){return qe.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):qe.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):qe.reject(t)}static resolve(e){return new qe((t,o)=>{t(e)})}static reject(e){return new qe((t,o)=>{o(e)})}static waitFor(e){return new qe((t,o)=>{let u=0,d=0,g=!1;e.forEach(D=>{++u,D.next(()=>{++d,g&&d===u&&t()},L=>o(L))}),g=!0,d===u&&t()})}static or(e){let t=qe.resolve(!1);for(const o of e)t=t.next(u=>u?qe.resolve(u):o());return t}static forEach(e,t){const o=[];return e.forEach((u,d)=>{o.push(t.call(this,u,d))}),this.waitFor(o)}static mapArray(e,t){return new qe((o,u)=>{const d=e.length,g=new Array(d);let D=0;for(let L=0;L<d;L++){const H=L;t(e[H]).next(Q=>{g[H]=Q,++D,D===d&&o(g)},Q=>u(Q))}})}static doWhile(e,t){return new qe((o,u)=>{const d=()=>{!0===e()?t().next(()=>{d()},u):o()};d()})}}class ba{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.P=new Wi,this.transaction.oncomplete=()=>{this.P.resolve()},this.transaction.onabort=()=>{t.error?this.P.reject(new Cs(e,t.error)):this.P.resolve()},this.transaction.onerror=o=>{const u=b(o.target.error);this.P.reject(new Cs(e,u))}}static open(e,t,o,u){try{return new ba(t,e.transaction(u,o))}catch(d){throw new Cs(t,d)}}get v(){return this.P.promise}abort(e){e&&this.P.reject(e),this.aborted||(Tt("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}V(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new _(t)}}class Ds{constructor(e,t,o){this.name=e,this.version=t,this.S=o,12.2===Ds.D((0,tt.z$)())&&Pr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Tt("SimpleDb","Removing database:",e),w(window.indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!(0,tt.hl)())return!1;if(Ds.N())return!0;const e=(0,tt.z$)(),t=Ds.D(e),o=0<t&&t<10,u=Ds.k(e),d=0<u&&u<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||o||d)}static N(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.M)}static O(e,t){return e.store(t)}static D(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),o=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(o)}static k(e){const t=e.match(/Android ([\d.]+)/i),o=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(o)}F(e){var t=this;return(0,he.Z)(function*(){return t.db||(Tt("SimpleDb","Opening database:",t.name),t.db=yield new Promise((o,u)=>{const d=indexedDB.open(t.name,t.version);d.onsuccess=g=>{o(g.target.result)},d.onblocked=()=>{u(new Cs(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},d.onerror=g=>{const D=g.target.error;u("VersionError"===D.name?new Et(Qe.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===D.name?new Et(Qe.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+D):new Cs(e,D))},d.onupgradeneeded=g=>{Tt("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',g.oldVersion),t.S.$(g.target.result,d.transaction,g.oldVersion,t.version).next(()=>{Tt("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.B&&(t.db.onversionchange=o=>t.B(o)),t.db})()}L(e){this.B=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,o,u){var d=this;return(0,he.Z)(function*(){const g="readonly"===t;let D=0;for(;;){++D;try{d.db=yield d.F(e);const L=ba.open(d.db,e,g?"readonly":"readwrite",o),H=u(L).next(Q=>(L.V(),Q)).catch(Q=>(L.abort(Q),qe.reject(Q))).toPromise();return H.catch(()=>{}),yield L.v,H}catch(L){const H=L,Q="FirebaseError"!==H.name&&D<3;if(Tt("SimpleDb","Transaction failed with error:",H.message,"Retrying:",Q),d.close(),!Q)return Promise.reject(H)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class qa{constructor(e){this.U=e,this.q=!1,this.K=null}get isDone(){return this.q}get G(){return this.K}set cursor(e){this.U=e}done(){this.q=!0}j(e){this.K=e}delete(){return w(this.U.delete())}}class Cs extends Et{constructor(e,t){super(Qe.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Vo(i){return"IndexedDbTransactionError"===i.name}class _{constructor(e){this.store=e}put(e,t){let o;return void 0!==t?(Tt("SimpleDb","PUT",this.store.name,e,t),o=this.store.put(t,e)):(Tt("SimpleDb","PUT",this.store.name,"<auto-key>",e),o=this.store.put(e)),w(o)}add(e){return Tt("SimpleDb","ADD",this.store.name,e,e),w(this.store.add(e))}get(e){return w(this.store.get(e)).next(t=>(void 0===t&&(t=null),Tt("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Tt("SimpleDb","DELETE",this.store.name,e),w(this.store.delete(e))}count(){return Tt("SimpleDb","COUNT",this.store.name),w(this.store.count())}W(e,t){const o=this.options(e,t);if(o.index||"function"!=typeof this.store.getAll){const u=this.cursor(o),d=[];return this.H(u,(g,D)=>{d.push(D)}).next(()=>d)}{const u=this.store.getAll(o.range);return new qe((d,g)=>{u.onerror=D=>{g(D.target.error)},u.onsuccess=D=>{d(D.target.result)}})}}J(e,t){const o=this.store.getAll(e,null===t?void 0:t);return new qe((u,d)=>{o.onerror=g=>{d(g.target.error)},o.onsuccess=g=>{u(g.target.result)}})}Y(e,t){Tt("SimpleDb","DELETE ALL",this.store.name);const o=this.options(e,t);o.X=!1;const u=this.cursor(o);return this.H(u,(d,g,D)=>D.delete())}Z(e,t){let o;t?o=e:(o={},t=e);const u=this.cursor(o);return this.H(u,t)}tt(e){const t=this.cursor({});return new qe((o,u)=>{t.onerror=d=>{const g=b(d.target.error);u(g)},t.onsuccess=d=>{const g=d.target.result;g?e(g.primaryKey,g.value).next(D=>{D?g.continue():o()}):o()}})}H(e,t){const o=[];return new qe((u,d)=>{e.onerror=g=>{d(g.target.error)},e.onsuccess=g=>{const D=g.target.result;if(!D)return void u();const L=new qa(D),H=t(D.primaryKey,D.value,L);if(H instanceof qe){const Q=H.catch(_e=>(L.done(),qe.reject(_e)));o.push(Q)}L.isDone?u():null===L.G?D.continue():D.continue(L.G)}}).next(()=>qe.waitFor(o))}options(e,t){let o;return void 0!==e&&("string"==typeof e?o=e:t=e),{index:o,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const o=this.store.index(e.index);return e.X?o.openKeyCursor(e.range,t):o.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function w(i){return new qe((e,t)=>{i.onsuccess=o=>{e(o.target.result)},i.onerror=o=>{const u=b(o.target.error);t(u)}})}let v=!1;function b(i){const e=Ds.D((0,tt.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(i.message.indexOf(t)>=0){const o=new Et("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return v||(v=!0,setTimeout(()=>{throw o},0)),o}}return i}class P{constructor(e,t){this.asyncQueue=e,this.et=t,this.task=null}start(){this.nt(15)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}nt(e){var t=this;Tt("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,he.Z)(function*(){t.task=null;try{Tt("IndexBackiller",`Documents written: ${yield t.et.st()}`)}catch(o){Vo(o)?Tt("IndexBackiller","Ignoring IndexedDB error during index backfill: ",o):yield Lo(o)}yield t.nt(1)}))}}class z{constructor(e,t){this.localStore=e,this.persistence=t}st(e=50){var t=this;return(0,he.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",o=>t.it(o,e))})()}it(e,t){const o=new Set;let u=t,d=!0;return qe.doWhile(()=>!0===d&&u>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(g=>{if(null!==g&&!o.has(g))return Tt("IndexBackiller",`Processing collection: ${g}`),this.rt(e,g,u).next(D=>{u-=D,o.add(g)});d=!1})).next(()=>t-u)}rt(e,t,o){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(u=>this.localStore.localDocuments.getNextDocuments(e,t,u,o).next(d=>{const g=d.changes;return this.localStore.indexManager.updateIndexEntries(e,g).next(()=>this.ot(u,d)).next(D=>(Tt("IndexBackiller",`Updating offset: ${D}`),this.localStore.indexManager.updateCollectionGroup(e,t,D))).next(()=>g.size)}))}ot(e,t){let o=e;return t.changes.forEach((u,d)=>{const g=fo(d);ou(g,o)>0&&(o=g)}),new vi(o.readTime,o.documentKey,Math.max(t.batchId,e.largestBatchId))}}class te{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=o=>this.ut(o),this.ct=o=>t.writeSequenceNumber(o))}ut(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ct&&this.ct(e),e}}function pe(i){let e=0;for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e++;return e}function et(i,e){for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e(t,i[t])}function Rt(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}te.at=-1;class rn{constructor(e,t){this.comparator=e,this.root=t||Cn.EMPTY}insert(e,t){return new rn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Cn.BLACK,null,null))}remove(e){return new rn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Cn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const o=this.comparator(e,t.key);if(0===o)return t.value;o<0?t=t.left:o>0&&(t=t.right)}return null}indexOf(e){let t=0,o=this.root;for(;!o.isEmpty();){const u=this.comparator(e,o.key);if(0===u)return t+o.left.size;u<0?o=o.left:(t+=o.left.size+1,o=o.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,o)=>(e(t,o),!1))}toString(){const e=[];return this.inorderTraversal((t,o)=>(e.push(`${t}:${o}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Zt(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Zt(this.root,e,this.comparator,!1)}getReverseIterator(){return new Zt(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Zt(this.root,e,this.comparator,!0)}}class Zt{constructor(e,t,o,u){this.isReverse=u,this.nodeStack=[];let d=1;for(;!e.isEmpty();)if(d=t?o(e.key,t):1,t&&u&&(d*=-1),d<0)e=this.isReverse?e.left:e.right;else{if(0===d){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Cn{constructor(e,t,o,u,d){this.key=e,this.value=t,this.color=o??Cn.RED,this.left=u??Cn.EMPTY,this.right=d??Cn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,o,u,d){return new Cn(e??this.key,t??this.value,o??this.color,u??this.left,d??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,o){let u=this;const d=o(e,u.key);return u=d<0?u.copy(null,null,null,u.left.insert(e,t,o),null):0===d?u.copy(null,t,null,null,null):u.copy(null,null,null,null,u.right.insert(e,t,o)),u.fixUp()}removeMin(){if(this.left.isEmpty())return Cn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let o,u=this;if(t(e,u.key)<0)u.left.isEmpty()||u.left.isRed()||u.left.left.isRed()||(u=u.moveRedLeft()),u=u.copy(null,null,null,u.left.remove(e,t),null);else{if(u.left.isRed()&&(u=u.rotateRight()),u.right.isEmpty()||u.right.isRed()||u.right.left.isRed()||(u=u.moveRedRight()),0===t(e,u.key)){if(u.right.isEmpty())return Cn.EMPTY;o=u.right.min(),u=u.copy(o.key,o.value,null,null,u.right.removeMin())}u=u.copy(null,null,null,null,u.right.remove(e,t))}return u.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Cn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Cn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Qt();const e=this.left.check();if(e!==this.right.check())throw Qt();return e+(this.isRed()?0:1)}}Cn.EMPTY=null,Cn.RED=!0,Cn.BLACK=!1,Cn.EMPTY=new class{constructor(){this.size=0}get key(){throw Qt()}get value(){throw Qt()}get color(){throw Qt()}get left(){throw Qt()}get right(){throw Qt()}copy(i,e,t,o,u){return this}insert(i,e,t){return new Cn(i,e)}remove(i,e){return this}isEmpty(){return!0}inorderTraversal(i){return!1}reverseTraversal(i){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Kn{constructor(e){this.comparator=e,this.data=new rn(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,o)=>(e(t),!1))}forEachInRange(e,t){const o=this.data.getIteratorFrom(e[0]);for(;o.hasNext();){const u=o.getNext();if(this.comparator(u.key,e[1])>=0)return;t(u.key)}}forEachWhile(e,t){let o;for(o=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();o.hasNext();)if(!e(o.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new po(this.data.getIterator())}getIteratorFrom(e){return new po(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(o=>{t=t.add(o)}),t}isEqual(e){if(!(e instanceof Kn)||this.size!==e.size)return!1;const t=this.data.getIterator(),o=e.data.getIterator();for(;t.hasNext();){const u=t.getNext().key,d=o.getNext().key;if(0!==this.comparator(u,d))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Kn(this.comparator);return t.data=e,t}}class po{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Zi(i){return i.hasNext()?i.getNext():void 0}class hi{constructor(e){this.fields=e,e.sort(yi.comparator)}static empty(){return new hi([])}unionWith(e){let t=new Kn(yi.comparator);for(const o of this.fields)t=t.add(o);for(const o of e)t=t.add(o);return new hi(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return So(this.fields,e.fields,(t,o)=>t.isEqual(o))}}class _i{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new _i(t)}static fromUint8Array(e){const t=function(o){let u="";for(let d=0;d<o.length;++d)u+=String.fromCharCode(o[d]);return u}(e);return new _i(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let o=0;o<e.length;o++)t[o]=e.charCodeAt(o);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Dn(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}_i.EMPTY_BYTE_STRING=new _i("");const Fa=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function go(i){if(vn(!!i),"string"==typeof i){let e=0;const t=Fa.exec(i);if(vn(!!t),t[1]){let u=t[1];u=(u+"000000000").substr(0,9),e=Number(u)}const o=new Date(i);return{seconds:Math.floor(o.getTime()/1e3),nanos:e}}return{seconds:Fi(i.seconds),nanos:Fi(i.nanos)}}function Fi(i){return"number"==typeof i?i:"string"==typeof i?Number(i):0}function wi(i){return"string"==typeof i?_i.fromBase64String(i):_i.fromUint8Array(i)}function _l(i){var e,t;return"server_timestamp"===(null===(t=((null===(e=i?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function M(i){const e=i.mapValue.fields.__previous_value__;return _l(e)?M(e):e}function k(i){const e=go(i.mapValue.fields.__local_write_time__.timestampValue);return new Mi(e.seconds,e.nanos)}class W{constructor(e,t,o,u,d,g,D,L){this.databaseId=e,this.appId=t,this.persistenceKey=o,this.host=u,this.ssl=d,this.forceLongPolling=g,this.autoDetectLongPolling=D,this.useFetchStreams=L}}class ie{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new ie("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof ie&&e.projectId===this.projectId&&e.database===this.database}}function Pe(i){return null==i}function Ye(i){return 0===i&&1/i==-1/0}function It(i){return"number"==typeof i&&Number.isInteger(i)&&!Ye(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}const Nt={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},_n={nullValue:"NULL_VALUE"};function Tn(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?_l(i)?4:zc(i)?9007199254740991:10:Qt()}function Fn(i,e){if(i===e)return!0;const t=Tn(i);if(t!==Tn(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return k(i).isEqual(k(e));case 3:return function(o,u){if("string"==typeof o.timestampValue&&"string"==typeof u.timestampValue&&o.timestampValue.length===u.timestampValue.length)return o.timestampValue===u.timestampValue;const d=go(o.timestampValue),g=go(u.timestampValue);return d.seconds===g.seconds&&d.nanos===g.nanos}(i,e);case 5:return i.stringValue===e.stringValue;case 6:return u=e,wi(i.bytesValue).isEqual(wi(u.bytesValue));case 7:return i.referenceValue===e.referenceValue;case 8:return function(o,u){return Fi(o.geoPointValue.latitude)===Fi(u.geoPointValue.latitude)&&Fi(o.geoPointValue.longitude)===Fi(u.geoPointValue.longitude)}(i,e);case 2:return function(o,u){if("integerValue"in o&&"integerValue"in u)return Fi(o.integerValue)===Fi(u.integerValue);if("doubleValue"in o&&"doubleValue"in u){const d=Fi(o.doubleValue),g=Fi(u.doubleValue);return d===g?Ye(d)===Ye(g):isNaN(d)&&isNaN(g)}return!1}(i,e);case 9:return So(i.arrayValue.values||[],e.arrayValue.values||[],Fn);case 10:return function(o,u){const d=o.mapValue.fields||{},g=u.mapValue.fields||{};if(pe(d)!==pe(g))return!1;for(const D in d)if(d.hasOwnProperty(D)&&(void 0===g[D]||!Fn(d[D],g[D])))return!1;return!0}(i,e);default:return Qt()}var u}function wn(i,e){return void 0!==(i.values||[]).find(t=>Fn(t,e))}function Xr(i,e){if(i===e)return 0;const t=Tn(i),o=Tn(e);if(t!==o)return Dn(t,o);switch(t){case 0:case 9007199254740991:return 0;case 1:return Dn(i.booleanValue,e.booleanValue);case 2:return function(u,d){const g=Fi(u.integerValue||u.doubleValue),D=Fi(d.integerValue||d.doubleValue);return g<D?-1:g>D?1:g===D?0:isNaN(g)?isNaN(D)?0:-1:1}(i,e);case 3:return Hs(i.timestampValue,e.timestampValue);case 4:return Hs(k(i),k(e));case 5:return Dn(i.stringValue,e.stringValue);case 6:return function(u,d){const g=wi(u),D=wi(d);return g.compareTo(D)}(i.bytesValue,e.bytesValue);case 7:return function(u,d){const g=u.split("/"),D=d.split("/");for(let L=0;L<g.length&&L<D.length;L++){const H=Dn(g[L],D[L]);if(0!==H)return H}return Dn(g.length,D.length)}(i.referenceValue,e.referenceValue);case 8:return function(u,d){const g=Dn(Fi(u.latitude),Fi(d.latitude));return 0!==g?g:Dn(Fi(u.longitude),Fi(d.longitude))}(i.geoPointValue,e.geoPointValue);case 9:return function(u,d){const g=u.values||[],D=d.values||[];for(let L=0;L<g.length&&L<D.length;++L){const H=Xr(g[L],D[L]);if(H)return H}return Dn(g.length,D.length)}(i.arrayValue,e.arrayValue);case 10:return function(u,d){if(u===Nt.mapValue&&d===Nt.mapValue)return 0;if(u===Nt.mapValue)return 1;if(d===Nt.mapValue)return-1;const g=u.fields||{},D=Object.keys(g),L=d.fields||{},H=Object.keys(L);D.sort(),H.sort();for(let Q=0;Q<D.length&&Q<H.length;++Q){const _e=Dn(D[Q],H[Q]);if(0!==_e)return _e;const Ge=Xr(g[D[Q]],L[H[Q]]);if(0!==Ge)return Ge}return Dn(D.length,H.length)}(i.mapValue,e.mapValue);default:throw Qt()}}function Hs(i,e){if("string"==typeof i&&"string"==typeof e&&i.length===e.length)return Dn(i,e);const t=go(i),o=go(e),u=Dn(t.seconds,o.seconds);return 0!==u?u:Dn(t.nanos,o.nanos)}function ia(i){return La(i)}function La(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?function(o){const u=go(o);return`time(${u.seconds},${u.nanos})`}(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?wi(i.bytesValue).toBase64():"referenceValue"in i?zt.fromName(i.referenceValue).toString():"geoPointValue"in i?`geo(${(e=i.geoPointValue).latitude},${e.longitude})`:"arrayValue"in i?function(o){let u="[",d=!0;for(const g of o.values||[])d?d=!1:u+=",",u+=La(g);return u+"]"}(i.arrayValue):"mapValue"in i?function(o){const u=Object.keys(o.fields||{}).sort();let d="{",g=!0;for(const D of u)g?g=!1:d+=",",d+=`${D}:${La(o.fields[D])}`;return d+"}"}(i.mapValue):Qt();var e}function Uo(i,e){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${e.path.canonicalString()}`}}function Va(i){return!!i&&"integerValue"in i}function Yo(i){return!!i&&"arrayValue"in i}function Ua(i){return!!i&&"nullValue"in i}function Za(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function ya(i){return!!i&&"mapValue"in i}function au(i){if(i.geoPointValue)return{geoPointValue:Object.assign({},i.geoPointValue)};if(i.timestampValue&&"object"==typeof i.timestampValue)return{timestampValue:Object.assign({},i.timestampValue)};if(i.mapValue){const e={mapValue:{fields:{}}};return et(i.mapValue.fields,(t,o)=>e.mapValue.fields[t]=au(o)),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(i.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=au(i.arrayValue.values[t]);return e}return Object.assign({},i)}function zc(i){return"__max__"===(((i.mapValue||{}).fields||{}).__type__||{}).stringValue}function $f(i){return"nullValue"in i?_n:"booleanValue"in i?{booleanValue:!1}:"integerValue"in i||"doubleValue"in i?{doubleValue:NaN}:"timestampValue"in i?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in i?{stringValue:""}:"bytesValue"in i?{bytesValue:""}:"referenceValue"in i?Uo(ie.empty(),zt.empty()):"geoPointValue"in i?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in i?{arrayValue:{}}:"mapValue"in i?{mapValue:{}}:Qt()}function Hf(i){return"nullValue"in i?{booleanValue:!1}:"booleanValue"in i?{doubleValue:NaN}:"integerValue"in i||"doubleValue"in i?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in i?{stringValue:""}:"stringValue"in i?{bytesValue:""}:"bytesValue"in i?Uo(ie.empty(),zt.empty()):"referenceValue"in i?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in i?{arrayValue:{}}:"arrayValue"in i?{mapValue:{}}:"mapValue"in i?Nt:Qt()}function Wc(i,e){const t=Xr(i.value,e.value);return 0!==t?t:i.inclusive&&!e.inclusive?-1:!i.inclusive&&e.inclusive?1:0}function wl(i,e){const t=Xr(i.value,e.value);return 0!==t?t:i.inclusive&&!e.inclusive?1:!i.inclusive&&e.inclusive?-1:0}class bs{constructor(e){this.value=e}static empty(){return new bs({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let o=0;o<e.length-1;++o)if(t=(t.mapValue.fields||{})[e.get(o)],!ya(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=au(t)}setAll(e){let t=yi.emptyPath(),o={},u=[];e.forEach((g,D)=>{if(!t.isImmediateParentOf(D)){const L=this.getFieldsMap(t);this.applyChanges(L,o,u),o={},u=[],t=D.popLast()}g?o[D.lastSegment()]=au(g):u.push(D.lastSegment())});const d=this.getFieldsMap(t);this.applyChanges(d,o,u)}delete(e){const t=this.field(e.popLast());ya(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Fn(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let o=0;o<e.length;++o){let u=t.mapValue.fields[e.get(o)];ya(u)&&u.mapValue.fields||(u={mapValue:{fields:{}}},t.mapValue.fields[e.get(o)]=u),t=u}return t.mapValue.fields}applyChanges(e,t,o){et(t,(u,d)=>e[u]=d);for(const u of o)delete e[u]}clone(){return new bs(au(this.value))}}function Jd(i){const e=[];return et(i.fields,(t,o)=>{const u=new yi([t]);if(ya(o)){const d=Jd(o.mapValue).fields;if(0===d.length)e.push(u);else for(const g of d)e.push(u.child(g))}else e.push(u)}),new hi(e)}class Ci{constructor(e,t,o,u,d,g){this.key=e,this.documentType=t,this.version=o,this.readTime=u,this.data=d,this.documentState=g}static newInvalidDocument(e){return new Ci(e,0,Pn.min(),Pn.min(),bs.empty(),0)}static newFoundDocument(e,t,o){return new Ci(e,1,t,Pn.min(),o,0)}static newNoDocument(e,t){return new Ci(e,2,t,Pn.min(),bs.empty(),0)}static newUnknownDocument(e,t){return new Ci(e,3,t,Pn.min(),bs.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=bs.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=bs.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Pn.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Ci&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ci(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Tg{constructor(e,t=null,o=[],u=[],d=null,g=null,D=null){this.path=e,this.collectionGroup=t,this.orderBy=o,this.filters=u,this.limit=d,this.startAt=g,this.endAt=D,this.ht=null}}function qc(i,e=null,t=[],o=[],u=null,d=null,g=null){return new Tg(i,e,t,o,u,d,g)}function Ku(i){const e=Ht(i);if(null===e.ht){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(o=>{return(u=o).field.canonicalString()+u.op.toString()+ia(u.value);var u}).join(","),t+="|ob:",t+=e.orderBy.map(o=>{return(u=o).field.canonicalString()+u.dir;var u}).join(","),Pe(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(o=>ia(o)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(o=>ia(o)).join(",")),e.ht=t}return e.ht}function El(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let u=0;u<i.orderBy.length;u++)if(!zf(i.orderBy[u],e.orderBy[u]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let u=0;u<i.filters.length;u++)if((t=i.filters[u]).op!==(o=e.filters[u]).op||!t.field.isEqual(o.field)||!Fn(t.value,o.value))return!1;var t,o;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!nh(i.startAt,e.startAt)&&nh(i.endAt,e.endAt)}function Il(i){return zt.isDocumentKey(i.path)&&null===i.collectionGroup&&0===i.filters.length}function Ka(i,e){return i.filters.filter(t=>t instanceof mo&&t.field.isEqual(e))}function ac(i,e,t){let o=_n,u=!0;for(const d of Ka(i,e)){let g=_n,D=!0;switch(d.op){case"<":case"<=":g=$f(d.value);break;case"==":case"in":case">=":g=d.value;break;case">":g=d.value,D=!1;break;case"!=":case"not-in":g=_n}Wc({value:o,inclusive:u},{value:g,inclusive:D})<0&&(o=g,u=D)}if(null!==t)for(let d=0;d<i.orderBy.length;++d)if(i.orderBy[d].field.isEqual(e)){const g=t.position[d];Wc({value:o,inclusive:u},{value:g,inclusive:t.inclusive})<0&&(o=g,u=t.inclusive);break}return{value:o,inclusive:u}}function xu(i,e,t){let o=Nt,u=!0;for(const d of Ka(i,e)){let g=Nt,D=!0;switch(d.op){case">=":case">":g=Hf(d.value),D=!1;break;case"==":case"in":case"<=":g=d.value;break;case"<":g=d.value,D=!1;break;case"!=":case"not-in":g=Nt}wl({value:o,inclusive:u},{value:g,inclusive:D})>0&&(o=g,u=D)}if(null!==t)for(let d=0;d<i.orderBy.length;++d)if(i.orderBy[d].field.isEqual(e)){const g=t.position[d];wl({value:o,inclusive:u},{value:g,inclusive:t.inclusive})>0&&(o=g,u=t.inclusive);break}return{value:o,inclusive:u}}class mo extends class{}{constructor(e,t,o){super(),this.field=e,this.op=t,this.value=o}static create(e,t,o){return e.isKeyField()?"in"===t||"not-in"===t?this.lt(e,t,o):new Gf(e,t,o):"array-contains"===t?new Xd(e,o):"in"===t?new eh(e,o):"not-in"===t?new th(e,o):"array-contains-any"===t?new lc(e,o):new mo(e,t,o)}static lt(e,t,o){return"in"===t?new Sg(e,o):new Dl(e,o)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.ft(Xr(t,this.value)):null!==t&&Tn(this.value)===Tn(t)&&this.ft(Xr(t,this.value))}ft(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Qt()}}dt(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class Gf extends mo{constructor(e,t,o){super(e,t,o),this.key=zt.fromName(o.referenceValue)}matches(e){const t=zt.comparator(e.key,this.key);return this.ft(t)}}class Sg extends mo{constructor(e,t){super(e,"in",t),this.keys=uc(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class Dl extends mo{constructor(e,t){super(e,"not-in",t),this.keys=uc(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function uc(i,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(o=>zt.fromName(o.referenceValue))}class Xd extends mo{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Yo(t)&&wn(t.arrayValue,this.value)}}class eh extends mo{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&wn(this.value.arrayValue,t)}}class th extends mo{constructor(e,t){super(e,"not-in",t)}matches(e){if(wn(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!wn(this.value.arrayValue,t)}}class lc extends mo{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Yo(t)||!t.arrayValue.values)&&t.arrayValue.values.some(o=>wn(this.value.arrayValue,o))}}class uu{constructor(e,t){this.position=e,this.inclusive=t}}class lu{constructor(e,t="asc"){this.field=e,this.dir=t}}function zf(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}function Kc(i,e,t){let o=0;for(let u=0;u<i.position.length;u++){const d=e[u],g=i.position[u];if(o=d.field.isKeyField()?zt.comparator(zt.fromName(g.referenceValue),t.key):Xr(g,t.data.field(d.field)),"desc"===d.dir&&(o*=-1),0!==o)break}return o}function nh(i,e){if(null===i)return null===e;if(null===e||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let t=0;t<i.position.length;t++)if(!Fn(i.position[t],e.position[t]))return!1;return!0}class ro{constructor(e,t=null,o=[],u=[],d=null,g="F",D=null,L=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=o,this.filters=u,this.limit=d,this.limitType=g,this.startAt=D,this.endAt=L,this._t=null,this.wt=null}}function Yu(i,e,t,o,u,d,g,D){return new ro(i,e,t,o,u,d,g,D)}function Mu(i){return new ro(i)}function rh(i){return 0===i.filters.length&&null===i.limit&&null==i.startAt&&null==i.endAt&&(0===i.explicitOrderBy.length||1===i.explicitOrderBy.length&&i.explicitOrderBy[0].field.isKeyField())}function ih(i){return i.explicitOrderBy.length>0?i.explicitOrderBy[0].field:null}function sh(i){for(const e of i.filters)if(e.dt())return e.field;return null}function oh(i){return null!==i.collectionGroup}function cc(i){const e=Ht(i);if(null===e._t){e._t=[];const t=sh(e),o=ih(e);if(null!==t&&null===o)t.isKeyField()||e._t.push(new lu(t)),e._t.push(new lu(yi.keyField(),"asc"));else{let u=!1;for(const d of e.explicitOrderBy)e._t.push(d),d.field.isKeyField()&&(u=!0);if(!u){const d=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e._t.push(new lu(yi.keyField(),d))}}}return e._t}function Ts(i){const e=Ht(i);if(!e.wt)if("F"===e.limitType)e.wt=qc(e.path,e.collectionGroup,cc(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const d of cc(e))t.push(new lu(d.field,"desc"===d.dir?"asc":"desc"));const o=e.endAt?new uu(e.endAt.position,e.endAt.inclusive):null,u=e.startAt?new uu(e.startAt.position,e.startAt.inclusive):null;e.wt=qc(e.path,e.collectionGroup,t,e.filters,e.limit,o,u)}return e.wt}function dc(i,e,t){return new ro(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,t,i.startAt,i.endAt)}function Cl(i,e){return El(Ts(i),Ts(e))&&i.limitType===e.limitType}function hc(i){return`${Ku(Ts(i))}|lt:${i.limitType}`}function Yc(i){return`Query(target=${function Zc(i){let e=i.path.canonicalString();return null!==i.collectionGroup&&(e+=" collectionGroup="+i.collectionGroup),i.filters.length>0&&(e+=`, filters: [${i.filters.map(t=>{return`${(o=t).field.canonicalString()} ${o.op} ${ia(o.value)}`;var o}).join(", ")}]`),Pe(i.limit)||(e+=", limit: "+i.limit),i.orderBy.length>0&&(e+=`, orderBy: [${i.orderBy.map(t=>{return`${(o=t).field.canonicalString()} (${o.dir})`;var o}).join(", ")}]`),i.startAt&&(e+=", startAt: ",e+=i.startAt.inclusive?"b:":"a:",e+=i.startAt.position.map(t=>ia(t)).join(",")),i.endAt&&(e+=", endAt: ",e+=i.endAt.inclusive?"a:":"b:",e+=i.endAt.position.map(t=>ia(t)).join(",")),`Target(${e})`}(Ts(i))}; limitType=${i.limitType})`}function cu(i,e){return e.isFoundDocument()&&function(t,o){const u=o.key.path;return null!==t.collectionGroup?o.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(u):zt.isDocumentKey(t.path)?t.path.isEqual(u):t.path.isImmediateParentOf(u)}(i,e)&&function(t,o){for(const u of t.explicitOrderBy)if(!u.field.isKeyField()&&null===o.data.field(u.field))return!1;return!0}(i,e)&&function(t,o){for(const u of t.filters)if(!u.matches(o))return!1;return!0}(i,e)&&(o=e,!((t=i).startAt&&!function(u,d,g){const D=Kc(u,d,g);return u.inclusive?D<=0:D<0}(t.startAt,cc(t),o)||t.endAt&&!function(u,d,g){const D=Kc(u,d,g);return u.inclusive?D>=0:D>0}(t.endAt,cc(t),o)));var t,o}function Qc(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function Ta(i){return(e,t)=>{let o=!1;for(const u of cc(i)){const d=Ru(u,e,t);if(0!==d)return d;o=o||u.field.isKeyField()}return 0}}function Ru(i,e,t){const o=i.field.isKeyField()?zt.comparator(e.key,t.key):function(u,d,g){const D=d.data.field(u),L=g.data.field(u);return null!==D&&null!==L?Xr(D,L):Qt()}(i.field,e,t);switch(i.dir){case"asc":return o;case"desc":return-1*o;default:return Qt()}}function Jc(i,e){if(i.gt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ye(e)?"-0":e}}function Xc(i){return{integerValue:""+i}}function bl(i,e){return It(e)?Xc(e):Jc(i,e)}class ed{constructor(){this._=void 0}}function Ag(i,e,t){return i instanceof du?function(o,u){const d={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return u&&(d.fields.__previous_value__=u),{mapValue:d}}(t,e):i instanceof Ba?td(i,e):i instanceof Qu?nd(i,e):function(o,u){const d=fc(o,u),g=pc(d)+pc(o.yt);return Va(d)&&Va(o.yt)?Xc(g):Jc(o.It,g)}(i,e)}function xg(i,e,t){return i instanceof Ba?td(i,e):i instanceof Qu?nd(i,e):t}function fc(i,e){return i instanceof hu?Va(t=e)||(o=t)&&"doubleValue"in o?e:{integerValue:0}:null;var o,t}class du extends ed{}class Ba extends ed{constructor(e){super(),this.elements=e}}function td(i,e){const t=ah(e);for(const o of i.elements)t.some(u=>Fn(u,o))||t.push(o);return{arrayValue:{values:t}}}class Qu extends ed{constructor(e){super(),this.elements=e}}function nd(i,e){let t=ah(e);for(const o of i.elements)t=t.filter(u=>!Fn(u,o));return{arrayValue:{values:t}}}class hu extends ed{constructor(e,t){super(),this.It=e,this.yt=t}}function pc(i){return Fi(i.integerValue||i.doubleValue)}function ah(i){return Yo(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}class Tl{constructor(e,t){this.field=e,this.transform=t}}class gc{constructor(e,t){this.version=e,this.transformResults=t}}class Ki{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Ki}static exists(e){return new Ki(void 0,e)}static updateTime(e){return new Ki(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Ju(i,e){return void 0!==i.updateTime?e.isFoundDocument()&&e.version.isEqual(i.updateTime):void 0===i.exists||i.exists===e.isFoundDocument()}class Al{}function Ss(i,e){if(!i.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return i.isNoDocument()?new Ml(i.key,Ki.none()):new Xu(i.key,i.data,Ki.none());{const t=i.data,o=bs.empty();let u=new Kn(yi.comparator);for(let d of e.fields)if(!u.has(d)){let g=t.field(d);null===g&&d.length>1&&(d=d.popLast(),g=t.field(d)),null===g?o.delete(d):o.set(d,g),u=u.add(d)}return new ja(i.key,o,new hi(u.toArray()),Ki.none())}}function Wf(i,e,t){i instanceof Xu?function(o,u,d){const g=o.value.clone(),D=lh(o.fieldTransforms,u,d.transformResults);g.setAll(D),u.convertToFoundDocument(d.version,g).setHasCommittedMutations()}(i,e,t):i instanceof ja?function(o,u,d){if(!Ju(o.precondition,u))return void u.convertToUnknownDocument(d.version);const g=lh(o.fieldTransforms,u,d.transformResults),D=u.data;D.setAll(uh(o)),D.setAll(g),u.convertToFoundDocument(d.version,D).setHasCommittedMutations()}(i,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function xl(i,e,t,o){return i instanceof Xu?function(u,d,g,D){if(!Ju(u.precondition,d))return g;const L=u.value.clone(),H=ch(u.fieldTransforms,D,d);return L.setAll(H),d.convertToFoundDocument(d.version,L).setHasLocalMutations(),null}(i,e,t,o):i instanceof ja?function(u,d,g,D){if(!Ju(u.precondition,d))return g;const L=ch(u.fieldTransforms,D,d),H=d.data;return H.setAll(uh(u)),H.setAll(L),d.convertToFoundDocument(d.version,H).setHasLocalMutations(),null===g?null:g.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map(Q=>Q.field))}(i,e,t,o):(g=t,Ju(i.precondition,d=e)?(d.convertToNoDocument(d.version).setHasLocalMutations(),null):g);var d,g}function rd(i,e){let t=null;for(const o of i.fieldTransforms){const u=e.data.field(o.field),d=fc(o.transform,u||null);null!=d&&(null===t&&(t=bs.empty()),t.set(o.field,d))}return t||null}function Ou(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&(o=e.fieldTransforms,!!(void 0===(t=i.fieldTransforms)&&void 0===o||t&&o&&So(t,o,(u,d)=>function Sl(i,e){return i.field.isEqual(e.field)&&(o=e.transform,(t=i.transform)instanceof Ba&&o instanceof Ba||t instanceof Qu&&o instanceof Qu?So(t.elements,o.elements,Fn):t instanceof hu&&o instanceof hu?Fn(t.yt,o.yt):t instanceof du&&o instanceof du);var t,o}(u,d))))&&(0===i.type?i.value.isEqual(e.value):1!==i.type||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask));var t,o}class Xu extends Al{constructor(e,t,o,u=[]){super(),this.key=e,this.value=t,this.precondition=o,this.fieldTransforms=u,this.type=0}getFieldMask(){return null}}class ja extends Al{constructor(e,t,o,u,d=[]){super(),this.key=e,this.data=t,this.fieldMask=o,this.precondition=u,this.fieldTransforms=d,this.type=1}getFieldMask(){return this.fieldMask}}function uh(i){const e=new Map;return i.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const o=i.data.field(t);e.set(t,o)}}),e}function lh(i,e,t){const o=new Map;vn(i.length===t.length);for(let u=0;u<t.length;u++){const d=i[u],g=d.transform,D=e.data.field(d.field);o.set(d.field,xg(g,D,t[u]))}return o}function ch(i,e,t){const o=new Map;for(const u of i){const d=u.transform,g=t.data.field(u.field);o.set(u.field,Ag(d,g,e))}return o}class Ml extends Al{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class id extends Al{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Nu{constructor(e){this.count=e}}var Yi,Tr;function sd(i){switch(i){default:return Qt();case Qe.CANCELLED:case Qe.UNKNOWN:case Qe.DEADLINE_EXCEEDED:case Qe.RESOURCE_EXHAUSTED:case Qe.INTERNAL:case Qe.UNAVAILABLE:case Qe.UNAUTHENTICATED:return!1;case Qe.INVALID_ARGUMENT:case Qe.NOT_FOUND:case Qe.ALREADY_EXISTS:case Qe.PERMISSION_DENIED:case Qe.FAILED_PRECONDITION:case Qe.ABORTED:case Qe.OUT_OF_RANGE:case Qe.UNIMPLEMENTED:case Qe.DATA_LOSS:return!0}}function Rl(i){if(void 0===i)return Pr("GRPC error has no .code"),Qe.UNKNOWN;switch(i){case Yi.OK:return Qe.OK;case Yi.CANCELLED:return Qe.CANCELLED;case Yi.UNKNOWN:return Qe.UNKNOWN;case Yi.DEADLINE_EXCEEDED:return Qe.DEADLINE_EXCEEDED;case Yi.RESOURCE_EXHAUSTED:return Qe.RESOURCE_EXHAUSTED;case Yi.INTERNAL:return Qe.INTERNAL;case Yi.UNAVAILABLE:return Qe.UNAVAILABLE;case Yi.UNAUTHENTICATED:return Qe.UNAUTHENTICATED;case Yi.INVALID_ARGUMENT:return Qe.INVALID_ARGUMENT;case Yi.NOT_FOUND:return Qe.NOT_FOUND;case Yi.ALREADY_EXISTS:return Qe.ALREADY_EXISTS;case Yi.PERMISSION_DENIED:return Qe.PERMISSION_DENIED;case Yi.FAILED_PRECONDITION:return Qe.FAILED_PRECONDITION;case Yi.ABORTED:return Qe.ABORTED;case Yi.OUT_OF_RANGE:return Qe.OUT_OF_RANGE;case Yi.UNIMPLEMENTED:return Qe.UNIMPLEMENTED;case Yi.DATA_LOSS:return Qe.DATA_LOSS;default:return Qt()}}(Tr=Yi||(Yi={}))[Tr.OK=0]="OK",Tr[Tr.CANCELLED=1]="CANCELLED",Tr[Tr.UNKNOWN=2]="UNKNOWN",Tr[Tr.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Tr[Tr.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Tr[Tr.NOT_FOUND=5]="NOT_FOUND",Tr[Tr.ALREADY_EXISTS=6]="ALREADY_EXISTS",Tr[Tr.PERMISSION_DENIED=7]="PERMISSION_DENIED",Tr[Tr.UNAUTHENTICATED=16]="UNAUTHENTICATED",Tr[Tr.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Tr[Tr.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Tr[Tr.ABORTED=10]="ABORTED",Tr[Tr.OUT_OF_RANGE=11]="OUT_OF_RANGE",Tr[Tr.UNIMPLEMENTED=12]="UNIMPLEMENTED",Tr[Tr.INTERNAL=13]="INTERNAL",Tr[Tr.UNAVAILABLE=14]="UNAVAILABLE",Tr[Tr.DATA_LOSS=15]="DATA_LOSS";class fu{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),o=this.inner[t];if(void 0!==o)for(const[u,d]of o)if(this.equalsFn(u,e))return d}has(e){return void 0!==this.get(e)}set(e,t){const o=this.mapKeyFn(e),u=this.inner[o];if(void 0===u)return this.inner[o]=[[e,t]],void this.innerSize++;for(let d=0;d<u.length;d++)if(this.equalsFn(u[d][0],e))return void(u[d]=[e,t]);u.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),o=this.inner[t];if(void 0===o)return!1;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return 1===o.length?delete this.inner[t]:o.splice(u,1),this.innerSize--,!0;return!1}forEach(e){et(this.inner,(t,o)=>{for(const[u,d]of o)e(u,d)})}isEmpty(){return Rt(this.inner)}size(){return this.innerSize}}const Qo=new rn(zt.comparator);function Gs(){return Qo}const Ol=new rn(zt.comparator);function mc(...i){let e=Ol;for(const t of i)e=e.insert(t.key,t);return e}function yc(i){let e=Ol;return i.forEach((t,o)=>e=e.insert(t,o.overlayedDocument)),e}function Jo(){return Pu()}function od(){return Pu()}function Pu(){return new fu(i=>i.toString(),(i,e)=>i.isEqual(e))}const ku=new rn(zt.comparator),pu=new Kn(zt.comparator);function tr(...i){let e=pu;for(const t of i)e=e.add(t);return e}const vc=new Kn(Dn);function _c(){return vc}class Fu{constructor(e,t,o,u,d){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=o,this.documentUpdates=u,this.resolvedLimboDocuments=d}static createSynthesizedRemoteEventForCurrentChange(e,t){const o=new Map;return o.set(e,Ya.createSynthesizedTargetChangeForCurrentChange(e,t)),new Fu(Pn.min(),o,_c(),Gs(),tr())}}class Ya{constructor(e,t,o,u,d){this.resumeToken=e,this.current=t,this.addedDocuments=o,this.modifiedDocuments=u,this.removedDocuments=d}static createSynthesizedTargetChangeForCurrentChange(e,t){return new Ya(_i.EMPTY_BYTE_STRING,t,tr(),tr(),tr())}}class rs{constructor(e,t,o,u){this.Tt=e,this.removedTargetIds=t,this.key=o,this.Et=u}}class Nl{constructor(e,t){this.targetId=e,this.At=t}}class el{constructor(e,t,o=_i.EMPTY_BYTE_STRING,u=null){this.state=e,this.targetIds=t,this.resumeToken=o,this.cause=u}}class dh{constructor(){this.Rt=0,this.bt=gu(),this.Pt=_i.EMPTY_BYTE_STRING,this.vt=!1,this.Vt=!0}get current(){return this.vt}get resumeToken(){return this.Pt}get St(){return 0!==this.Rt}get Dt(){return this.Vt}Ct(e){e.approximateByteSize()>0&&(this.Vt=!0,this.Pt=e)}xt(){let e=tr(),t=tr(),o=tr();return this.bt.forEach((u,d)=>{switch(d){case 0:e=e.add(u);break;case 2:t=t.add(u);break;case 1:o=o.add(u);break;default:Qt()}}),new Ya(this.Pt,this.vt,e,t,o)}Nt(){this.Vt=!1,this.bt=gu()}kt(e,t){this.Vt=!0,this.bt=this.bt.insert(e,t)}Mt(e){this.Vt=!0,this.bt=this.bt.remove(e)}Ot(){this.Rt+=1}Ft(){this.Rt-=1}$t(){this.Vt=!0,this.vt=!0}}class Qa{constructor(e){this.Bt=e,this.Lt=new Map,this.Ut=Gs(),this.qt=Lu(),this.Kt=new Kn(Dn)}Gt(e){for(const t of e.Tt)e.Et&&e.Et.isFoundDocument()?this.Qt(t,e.Et):this.jt(t,e.key,e.Et);for(const t of e.removedTargetIds)this.jt(t,e.key,e.Et)}Wt(e){this.forEachTarget(e,t=>{const o=this.zt(t);switch(e.state){case 0:this.Ht(t)&&o.Ct(e.resumeToken);break;case 1:o.Ft(),o.St||o.Nt(),o.Ct(e.resumeToken);break;case 2:o.Ft(),o.St||this.removeTarget(t);break;case 3:this.Ht(t)&&(o.$t(),o.Ct(e.resumeToken));break;case 4:this.Ht(t)&&(this.Jt(t),o.Ct(e.resumeToken));break;default:Qt()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Lt.forEach((o,u)=>{this.Ht(u)&&t(u)})}Yt(e){const t=e.targetId,o=e.At.count,u=this.Xt(t);if(u){const d=u.target;if(Il(d))if(0===o){const g=new zt(d.path);this.jt(t,g,Ci.newNoDocument(g,Pn.min()))}else vn(1===o);else this.Zt(t)!==o&&(this.Jt(t),this.Kt=this.Kt.add(t))}}te(e){const t=new Map;this.Lt.forEach((d,g)=>{const D=this.Xt(g);if(D){if(d.current&&Il(D.target)){const L=new zt(D.target.path);null!==this.Ut.get(L)||this.ee(g,L)||this.jt(g,L,Ci.newNoDocument(L,e))}d.Dt&&(t.set(g,d.xt()),d.Nt())}});let o=tr();this.qt.forEach((d,g)=>{let D=!0;g.forEachWhile(L=>{const H=this.Xt(L);return!H||2===H.purpose||(D=!1,!1)}),D&&(o=o.add(d))}),this.Ut.forEach((d,g)=>g.setReadTime(e));const u=new Fu(e,t,this.Kt,this.Ut,o);return this.Ut=Gs(),this.qt=Lu(),this.Kt=new Kn(Dn),u}Qt(e,t){if(!this.Ht(e))return;const o=this.ee(e,t.key)?2:0;this.zt(e).kt(t.key,o),this.Ut=this.Ut.insert(t.key,t),this.qt=this.qt.insert(t.key,this.ne(t.key).add(e))}jt(e,t,o){if(!this.Ht(e))return;const u=this.zt(e);this.ee(e,t)?u.kt(t,1):u.Mt(t),this.qt=this.qt.insert(t,this.ne(t).delete(e)),o&&(this.Ut=this.Ut.insert(t,o))}removeTarget(e){this.Lt.delete(e)}Zt(e){const t=this.zt(e).xt();return this.Bt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ot(e){this.zt(e).Ot()}zt(e){let t=this.Lt.get(e);return t||(t=new dh,this.Lt.set(e,t)),t}ne(e){let t=this.qt.get(e);return t||(t=new Kn(Dn),this.qt=this.qt.insert(e,t)),t}Ht(e){const t=null!==this.Xt(e);return t||Tt("WatchChangeAggregator","Detected inactive target",e),t}Xt(e){const t=this.Lt.get(e);return t&&t.St?null:this.Bt.se(e)}Jt(e){this.Lt.set(e,new dh),this.Bt.getRemoteKeysForTarget(e).forEach(t=>{this.jt(e,t,null)})}ee(e,t){return this.Bt.getRemoteKeysForTarget(e).has(t)}}function Lu(){return new rn(zt.comparator)}function gu(){return new rn(zt.comparator)}const hh={asc:"ASCENDING",desc:"DESCENDING"},qf={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class ad{constructor(e,t){this.databaseId=e,this.gt=t}}function Pl(i,e){return i.gt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function wc(i,e){return i.gt?e.toBase64():e.toUint8Array()}function Zf(i,e){return Pl(i,e.toTimestamp())}function zs(i){return vn(!!i),Pn.fromTimestamp(function(e){const t=go(e);return new Mi(t.seconds,t.nanos)}(i))}function m(i,e){return(t=i,new mr(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function c(i){const e=mr.fromString(i);return vn(qy(e)),e}function f(i,e){return m(i.databaseId,e.path)}function E(i,e){const t=c(e);if(t.get(1)!==i.databaseId.projectId)throw new Et(Qe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+i.databaseId.projectId);if(t.get(3)!==i.databaseId.database)throw new Et(Qe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+i.databaseId.database);return new zt(it(t))}function B(i,e){return m(i.databaseId,e)}function Y(i){const e=c(i);return 4===e.length?mr.emptyPath():it(e)}function Te(i){return new mr(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function it(i){return vn(i.length>4&&"documents"===i.get(4)),i.popFirst(5)}function Pt(i,e,t){return{name:f(i,e),fields:t.value.mapValue.fields}}function an(i,e,t){const o=E(i,e.name),u=zs(e.updateTime),d=new bs({mapValue:{fields:e.fields}}),g=Ci.newFoundDocument(o,u,d);return t&&g.setHasCommittedMutations(),t?g.setHasCommittedMutations():g}function is(i,e){let t;if(e instanceof Xu)t={update:Pt(i,e.key,e.value)};else if(e instanceof Ml)t={delete:f(i,e.key)};else if(e instanceof ja)t={update:Pt(i,e.key,e.data),updateMask:Rg(e.fieldMask)};else{if(!(e instanceof id))return Qt();t={verify:f(i,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(o=>function(u,d){const g=d.transform;if(g instanceof du)return{fieldPath:d.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(g instanceof Ba)return{fieldPath:d.field.canonicalString(),appendMissingElements:{values:g.elements}};if(g instanceof Qu)return{fieldPath:d.field.canonicalString(),removeAllFromArray:{values:g.elements}};if(g instanceof hu)return{fieldPath:d.field.canonicalString(),increment:g.yt};throw Qt()}(0,o))),e.precondition.isNone||(t.currentDocument=void 0!==(u=e.precondition).updateTime?{updateTime:Zf(i,u.updateTime)}:void 0!==u.exists?{exists:u.exists}:Qt()),t;var u}function sa(i,e){const t=e.currentDocument?void 0!==(u=e.currentDocument).updateTime?Ki.updateTime(zs(u.updateTime)):void 0!==u.exists?Ki.exists(u.exists):Ki.none():Ki.none(),o=e.updateTransforms?e.updateTransforms.map(u=>function(d,g){let D=null;"setToServerValue"in g?(vn("REQUEST_TIME"===g.setToServerValue),D=new du):"appendMissingElements"in g?D=new Ba(g.appendMissingElements.values||[]):"removeAllFromArray"in g?D=new Qu(g.removeAllFromArray.values||[]):"increment"in g?D=new hu(d,g.increment):Qt();const L=yi.fromServerFormat(g.fieldPath);return new Tl(L,D)}(i,u)):[];var u;if(e.update){const u=E(i,e.update.name),d=new bs({mapValue:{fields:e.update.fields}});if(e.updateMask){const g=new hi((e.updateMask.fieldPaths||[]).map(H=>yi.fromServerFormat(H)));return new ja(u,d,g,t,o)}return new Xu(u,d,t,o)}if(e.delete){const u=E(i,e.delete);return new Ml(u,t)}if(e.verify){const u=E(i,e.verify);return new id(u,t)}return Qt()}function Ec(i,e){return{documents:[B(i,e.path)]}}function tl(i,e){const t={structuredQuery:{}},o=e.path;null!==e.collectionGroup?(t.parent=B(i,o),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=B(i,o.popLast()),t.structuredQuery.from=[{collectionId:o.lastSegment()}]);const u=function(L){if(0===L.length)return;const H=L.map(Q=>function(_e){if("=="===_e.op){if(Za(_e.value))return{unaryFilter:{field:$a(_e.field),op:"IS_NAN"}};if(Ua(_e.value))return{unaryFilter:{field:$a(_e.field),op:"IS_NULL"}}}else if("!="===_e.op){if(Za(_e.value))return{unaryFilter:{field:$a(_e.field),op:"IS_NOT_NAN"}};if(Ua(_e.value))return{unaryFilter:{field:$a(_e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:$a(_e.field),op:Yf(_e.op),value:_e.value}}}(Q));return 1===H.length?H[0]:{compositeFilter:{op:"AND",filters:H}}}(e.filters);u&&(t.structuredQuery.where=u);const d=function(L){if(0!==L.length)return L.map(H=>{return{field:$a((Q=H).field),direction:Kf(Q.dir)};var Q})}(e.orderBy);d&&(t.structuredQuery.orderBy=d);const g=(H=e.limit,i.gt||Pe(H)?H:{value:H});var H,D,L;return null!==g&&(t.structuredQuery.limit=g),e.startAt&&(t.structuredQuery.startAt={before:(D=e.startAt).inclusive,values:D.position}),e.endAt&&(t.structuredQuery.endAt={before:!(L=e.endAt).inclusive,values:L.position}),t}function ud(i){let e=Y(i.parent);const t=i.structuredQuery,o=t.from?t.from.length:0;let u=null;if(o>0){vn(1===o);const Q=t.from[0];Q.allDescendants?u=Q.collectionId:e=e.child(Q.collectionId)}let d=[];t.where&&(d=nl(t.where));let g=[];t.orderBy&&(g=t.orderBy.map(Q=>{return new lu(rl((_e=Q).field),function(Ge){switch(Ge){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(_e.direction));var _e}));let D=null;t.limit&&(D=function(Q){let _e;return _e="object"==typeof Q?Q.value:Q,Pe(_e)?null:_e}(t.limit));let L=null;var Q;t.startAt&&(L=new uu((Q=t.startAt).values||[],!!Q.before));let H=null;return t.endAt&&(H=function(Q){return new uu(Q.values||[],!Q.before)}(t.endAt)),Yu(e,u,g,d,D,"F",L,H)}function nl(i){return i?void 0!==i.unaryFilter?[ph(i)]:void 0!==i.fieldFilter?[Mg(i)]:void 0!==i.compositeFilter?i.compositeFilter.filters.map(e=>nl(e)).reduce((e,t)=>e.concat(t)):Qt():[]}function Kf(i){return hh[i]}function Yf(i){return qf[i]}function $a(i){return{fieldPath:i.canonicalString()}}function rl(i){return yi.fromServerFormat(i.fieldPath)}function Mg(i){return mo.create(rl(i.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Qt()}}(i.fieldFilter.op),i.fieldFilter.value)}function ph(i){switch(i.unaryFilter.op){case"IS_NAN":const e=rl(i.unaryFilter.field);return mo.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=rl(i.unaryFilter.field);return mo.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=rl(i.unaryFilter.field);return mo.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=rl(i.unaryFilter.field);return mo.create(u,"!=",{nullValue:"NULL_VALUE"});default:return Qt()}}function Rg(i){const e=[];return i.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function qy(i){return i.length>=4&&"projects"===i.get(0)&&"databases"===i.get(2)}function oa(i){let e="";for(let t=0;t<i.length;t++)e.length>0&&(e=gh(e)),e=Og(i.get(t),e);return gh(e)}function Og(i,e){let t=e;const o=i.length;for(let u=0;u<o;u++){const d=i.charAt(u);switch(d){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=d}}return t}function gh(i){return i+"\x01\x01"}function Ja(i){const e=i.length;if(vn(e>=2),2===e)return vn("\x01"===i.charAt(0)&&"\x01"===i.charAt(1)),mr.emptyPath();const t=e-2,o=[];let u="";for(let d=0;d<e;){const g=i.indexOf("\x01",d);switch((g<0||g>t)&&Qt(),i.charAt(g+1)){case"\x01":const D=i.substring(d,g);let L;0===u.length?L=D:(u+=D,L=u,u=""),o.push(L);break;case"\x10":u+=i.substring(d,g),u+="\0";break;case"\x11":u+=i.substring(d,g+1);break;default:Qt()}d=g+2}return new mr(o)}const Qf=["userId","batchId"];function ld(i,e){return[i,oa(e)]}function mh(i,e,t){return[i,oa(e),t]}const Zy={},Jf=["prefixPath","collectionGroup","readTime","documentId"],cd=["prefixPath","collectionGroup","documentId"],Ky=["collectionGroup","readTime","prefixPath","documentId"],Yy=["canonicalId","targetId"],Qy=["targetId","path"],Ng=["path","targetId"],Jy=["collectionId","parent"],Xy=["indexId","uid"],ev=["uid","sequenceNumber"],tv=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Xf=["indexId","uid","orderedDocumentKey"],nv=["userId","collectionPath","documentId"],rv=["userId","collectionPath","largestBatchId"],iv=["userId","collectionGroup","largestBatchId"],ep=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],sv=[...ep,"documentOverlays"],Pg=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Xo=Pg,tp=[...Xo,"indexConfiguration","indexState","indexEntries"];class yh extends ra{constructor(e,t){super(),this.ie=e,this.currentSequenceNumber=t}}function io(i,e){const t=Ht(i);return Ds.O(t.ie,e)}class Ao{constructor(e,t,o,u){this.batchId=e,this.localWriteTime=t,this.baseMutations=o,this.mutations=u}applyToRemoteDocument(e,t){const o=t.mutationResults;for(let u=0;u<this.mutations.length;u++){const d=this.mutations[u];d.key.isEqual(e.key)&&Wf(d,e,o[u])}}applyToLocalView(e,t){for(const o of this.baseMutations)o.key.isEqual(e.key)&&(t=xl(o,e,t,this.localWriteTime));for(const o of this.mutations)o.key.isEqual(e.key)&&(t=xl(o,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const o=od();return this.mutations.forEach(u=>{const d=e.get(u.key),g=d.overlayedDocument;let D=this.applyToLocalView(g,d.mutatedFields);D=t.has(u.key)?null:D;const L=Ss(g,D);null!==L&&o.set(u.key,L),g.isValidDocument()||g.convertToNoDocument(Pn.min())}),o}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),tr())}isEqual(e){return this.batchId===e.batchId&&So(this.mutations,e.mutations,(t,o)=>Ou(t,o))&&So(this.baseMutations,e.baseMutations,(t,o)=>Ou(t,o))}}class Fl{constructor(e,t,o,u){this.batch=e,this.commitVersion=t,this.mutationResults=o,this.docVersions=u}static from(e,t,o){vn(e.mutations.length===o.length);let u=ku;const d=e.mutations;for(let g=0;g<d.length;g++)u=u.insert(d[g].key,o[g].version);return new Fl(e,t,o,u)}}class dd{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class il{constructor(e,t,o,u,d=Pn.min(),g=Pn.min(),D=_i.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=o,this.sequenceNumber=u,this.snapshotVersion=d,this.lastLimboFreeSnapshotVersion=g,this.resumeToken=D}withSequenceNumber(e){return new il(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new il(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new il(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class kg{constructor(e){this.re=e}}function Lg(i,e){const t=e.key,o={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:hd(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())o.document={name:f(u=i.re,(d=e).key),fields:d.data.value.mapValue.fields,updateTime:Pl(u,d.version.toTimestamp())};else if(e.isNoDocument())o.noDocument={path:t.path.toArray(),readTime:Ll(e.version)};else{if(!e.isUnknownDocument())return Qt();o.unknownDocument={path:t.path.toArray(),version:Ll(e.version)}}var u,d;return o}function hd(i){const e=i.toTimestamp();return[e.seconds,e.nanoseconds]}function Ll(i){const e=i.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function sl(i){const e=new Mi(i.seconds,i.nanoseconds);return Pn.fromTimestamp(e)}function Vl(i,e){const t=(e.baseMutations||[]).map(d=>sa(i.re,d));for(let d=0;d<e.mutations.length-1;++d){const g=e.mutations[d];d+1<e.mutations.length&&void 0!==e.mutations[d+1].transform&&(g.updateTransforms=e.mutations[d+1].transform.fieldTransforms,e.mutations.splice(d+1,1),++d)}const o=e.mutations.map(d=>sa(i.re,d)),u=Mi.fromMillis(e.localWriteTimeMs);return new Ao(e.batchId,u,t,o)}function fd(i){const e=sl(i.readTime),t=void 0!==i.lastLimboFreeSnapshotVersion?sl(i.lastLimboFreeSnapshotVersion):Pn.min();let o;var u;return void 0!==i.query.documents?(vn(1===(u=i.query).documents.length),o=Ts(Mu(Y(u.documents[0])))):o=Ts(ud(i.query)),new il(o,i.targetId,0,i.lastListenSequenceNumber,e,t,_i.fromBase64String(i.resumeToken))}function Vg(i,e){const t=Ll(e.snapshotVersion),o=Ll(e.lastLimboFreeSnapshotVersion);let u;u=Il(e.target)?Ec(i.re,e.target):tl(i.re,e.target);const d=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Ku(e.target),readTime:t,resumeToken:d,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:o,query:u}}function np(i){const e=ud({parent:i.parent,structuredQuery:i.structuredQuery});return"LAST"===i.limitType?dc(e,e.limit,"L"):e}function rp(i,e){return new dd(e.largestBatchId,sa(i.re,e.overlayMutation))}function Ul(i,e){const t=e.path.lastSegment();return[i,oa(e.path.popLast()),t]}function mu(i,e,t,o){return{indexId:i,uid:e.uid||"",sequenceNumber:t,readTime:Ll(o.readTime),documentKey:oa(o.documentKey.path),largestBatchId:o.largestBatchId}}class ov{getBundleMetadata(e,t){return Ug(e).get(t).next(o=>{if(o)return{id:(u=o).bundleId,createTime:sl(u.createTime),version:u.version};var u})}saveBundleMetadata(e,t){return Ug(e).put({bundleId:(o=t).id,createTime:Ll(zs(o.createTime)),version:o.version});var o}getNamedQuery(e,t){return av(e).get(t).next(o=>{if(o)return{name:(u=o).name,query:np(u.bundledQuery),readTime:sl(u.readTime)};var u})}saveNamedQuery(e,t){return av(e).put({name:(o=t).name,readTime:Ll(zs(o.readTime)),bundledQuery:o.bundledQuery});var o}}function Ug(i){return io(i,"bundles")}function av(i){return io(i,"namedQueries")}class ip{constructor(e,t){this.It=e,this.userId=t}static oe(e,t){return new ip(e,t.uid||"")}getOverlay(e,t){return Ic(e).get(Ul(this.userId,t)).next(o=>o?rp(this.It,o):null)}getOverlays(e,t){const o=Jo();return qe.forEach(t,u=>this.getOverlay(e,u).next(d=>{null!==d&&o.set(u,d)})).next(()=>o)}saveOverlays(e,t,o){const u=[];return o.forEach((d,g)=>{const D=new dd(t,g);u.push(this.ue(e,D))}),qe.waitFor(u)}removeOverlaysForBatchId(e,t,o){const u=new Set;t.forEach(g=>u.add(oa(g.getCollectionPath())));const d=[];return u.forEach(g=>{const D=IDBKeyRange.bound([this.userId,g,o],[this.userId,g,o+1],!1,!0);d.push(Ic(e).Y("collectionPathOverlayIndex",D))}),qe.waitFor(d)}getOverlaysForCollection(e,t,o){const u=Jo(),d=oa(t),g=IDBKeyRange.bound([this.userId,d,o],[this.userId,d,Number.POSITIVE_INFINITY],!0);return Ic(e).W("collectionPathOverlayIndex",g).next(D=>{for(const L of D){const H=rp(this.It,L);u.set(H.getKey(),H)}return u})}getOverlaysForCollectionGroup(e,t,o,u){const d=Jo();let g;const D=IDBKeyRange.bound([this.userId,t,o],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Ic(e).Z({index:"collectionGroupOverlayIndex",range:D},(L,H,Q)=>{const _e=rp(this.It,H);d.size()<u||_e.largestBatchId===g?(d.set(_e.getKey(),_e),g=_e.largestBatchId):Q.done()}).next(()=>d)}ue(e,t){return Ic(e).put(function(o,u,d){const[g,D,L]=Ul(u,d.mutation.key);return{userId:u,collectionPath:D,documentId:L,collectionGroup:d.mutation.key.getCollectionGroup(),largestBatchId:d.largestBatchId,overlayMutation:is(o.re,d.mutation)}}(this.It,this.userId,t))}}function Ic(i){return io(i,"documentOverlays")}class Dc{constructor(){}ce(e,t){this.ae(e,t),t.he()}ae(e,t){if("nullValue"in e)this.le(t,5);else if("booleanValue"in e)this.le(t,10),t.fe(e.booleanValue?1:0);else if("integerValue"in e)this.le(t,15),t.fe(Fi(e.integerValue));else if("doubleValue"in e){const o=Fi(e.doubleValue);isNaN(o)?this.le(t,13):(this.le(t,15),Ye(o)?t.fe(0):t.fe(o))}else if("timestampValue"in e){const o=e.timestampValue;this.le(t,20),"string"==typeof o?t.de(o):(t.de(`${o.seconds||""}`),t.fe(o.nanos||0))}else if("stringValue"in e)this._e(e.stringValue,t),this.we(t);else if("bytesValue"in e)this.le(t,30),t.me(wi(e.bytesValue)),this.we(t);else if("referenceValue"in e)this.ge(e.referenceValue,t);else if("geoPointValue"in e){const o=e.geoPointValue;this.le(t,45),t.fe(o.latitude||0),t.fe(o.longitude||0)}else"mapValue"in e?zc(e)?this.le(t,Number.MAX_SAFE_INTEGER):(this.ye(e.mapValue,t),this.we(t)):"arrayValue"in e?(this.pe(e.arrayValue,t),this.we(t)):Qt()}_e(e,t){this.le(t,25),this.Ie(e,t)}Ie(e,t){t.de(e)}ye(e,t){const o=e.fields||{};this.le(t,55);for(const u of Object.keys(o))this._e(u,t),this.ae(o[u],t)}pe(e,t){const o=e.values||[];this.le(t,50);for(const u of o)this.ae(u,t)}ge(e,t){this.le(t,37),zt.fromName(e).path.forEach(o=>{this.le(t,60),this.Ie(o,t)})}le(e,t){e.fe(t)}we(e){e.fe(2)}}function yu(i){if(0===i)return 8;let e=0;return i>>4==0&&(e+=4,i<<=4),i>>6==0&&(e+=2,i<<=2),i>>7==0&&(e+=1),e}function vh(i){const e=64-function(t){let o=0;for(let u=0;u<8;++u){const d=yu(255&t[u]);if(o+=d,8!==d)break}return o}(i);return Math.ceil(e/8)}Dc.Te=new Dc;class sp{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ee(e){const t=e[Symbol.iterator]();let o=t.next();for(;!o.done;)this.Ae(o.value),o=t.next();this.Re()}be(e){const t=e[Symbol.iterator]();let o=t.next();for(;!o.done;)this.Pe(o.value),o=t.next();this.ve()}Ve(e){for(const t of e){const o=t.charCodeAt(0);if(o<128)this.Ae(o);else if(o<2048)this.Ae(960|o>>>6),this.Ae(128|63&o);else if(t<"\ud800"||"\udbff"<t)this.Ae(480|o>>>12),this.Ae(128|63&o>>>6),this.Ae(128|63&o);else{const u=t.codePointAt(0);this.Ae(240|u>>>18),this.Ae(128|63&u>>>12),this.Ae(128|63&u>>>6),this.Ae(128|63&u)}}this.Re()}Se(e){for(const t of e){const o=t.charCodeAt(0);if(o<128)this.Pe(o);else if(o<2048)this.Pe(960|o>>>6),this.Pe(128|63&o);else if(t<"\ud800"||"\udbff"<t)this.Pe(480|o>>>12),this.Pe(128|63&o>>>6),this.Pe(128|63&o);else{const u=t.codePointAt(0);this.Pe(240|u>>>18),this.Pe(128|63&u>>>12),this.Pe(128|63&u>>>6),this.Pe(128|63&u)}}this.ve()}De(e){const t=this.Ce(e),o=vh(t);this.xe(1+o),this.buffer[this.position++]=255&o;for(let u=t.length-o;u<t.length;++u)this.buffer[this.position++]=255&t[u]}Ne(e){const t=this.Ce(e),o=vh(t);this.xe(1+o),this.buffer[this.position++]=~(255&o);for(let u=t.length-o;u<t.length;++u)this.buffer[this.position++]=~(255&t[u])}ke(){this.Me(255),this.Me(255)}Oe(){this.Fe(255),this.Fe(255)}reset(){this.position=0}seed(e){this.xe(e.length),this.buffer.set(e,this.position),this.position+=e.length}$e(){return this.buffer.slice(0,this.position)}Ce(e){const t=function(u){const d=new DataView(new ArrayBuffer(8));return d.setFloat64(0,u,!1),new Uint8Array(d.buffer)}(e),o=0!=(128&t[0]);t[0]^=o?255:128;for(let u=1;u<t.length;++u)t[u]^=o?255:0;return t}Ae(e){const t=255&e;0===t?(this.Me(0),this.Me(255)):255===t?(this.Me(255),this.Me(0)):this.Me(t)}Pe(e){const t=255&e;0===t?(this.Fe(0),this.Fe(255)):255===t?(this.Fe(255),this.Fe(0)):this.Fe(e)}Re(){this.Me(0),this.Me(1)}ve(){this.Fe(0),this.Fe(1)}Me(e){this.xe(1),this.buffer[this.position++]=e}Fe(e){this.xe(1),this.buffer[this.position++]=~e}xe(e){const t=e+this.position;if(t<=this.buffer.length)return;let o=2*this.buffer.length;o<t&&(o=t);const u=new Uint8Array(o);u.set(this.buffer),this.buffer=u}}class uv{constructor(e){this.Be=e}me(e){this.Be.Ee(e)}de(e){this.Be.Ve(e)}fe(e){this.Be.De(e)}he(){this.Be.ke()}}class Bg{constructor(e){this.Be=e}me(e){this.Be.be(e)}de(e){this.Be.Se(e)}fe(e){this.Be.Ne(e)}he(){this.Be.Oe()}}class pd{constructor(){this.Be=new sp,this.Le=new uv(this.Be),this.Ue=new Bg(this.Be)}seed(e){this.Be.seed(e)}qe(e){return 0===e?this.Le:this.Ue}$e(){return this.Be.$e()}reset(){this.Be.reset()}}class Xa{constructor(e,t,o,u){this.indexId=e,this.documentKey=t,this.arrayValue=o,this.directionalValue=u}Ke(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,o=new Uint8Array(t);return o.set(this.directionalValue,0),t!==e?o.set([0],this.directionalValue.length):++o[o.length-1],new Xa(this.indexId,this.documentKey,this.arrayValue,o)}}function Bl(i,e){let t=i.indexId-e.indexId;return 0!==t?t:(t=jg(i.arrayValue,e.arrayValue),0!==t?t:(t=jg(i.directionalValue,e.directionalValue),0!==t?t:zt.comparator(i.documentKey,e.documentKey)))}function jg(i,e){for(let t=0;t<i.length&&t<e.length;++t){const o=i[t]-e[t];if(0!==o)return o}return i.length-e.length}class op{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ge=e.orderBy,this.Qe=[];for(const t of e.filters){const o=t;o.dt()?this.je=o:this.Qe.push(o)}}We(e){const t=qu(e);if(void 0!==t&&!this.ze(t))return!1;const o=Wa(e);let u=0,d=0;for(;u<o.length&&this.ze(o[u]);++u);if(u===o.length)return!0;if(void 0!==this.je){const g=o[u];if(!this.He(this.je,g)||!this.Je(this.Ge[d++],g))return!1;++u}for(;u<o.length;++u){const g=o[u];if(d>=this.Ge.length||!this.Je(this.Ge[d++],g))return!1}return!0}ze(e){for(const t of this.Qe)if(this.He(t,e))return!0;return!1}He(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Je(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class ap{constructor(){this.Ye=new _h}addToCollectionParentIndex(e,t){return this.Ye.add(t),qe.resolve()}getCollectionParents(e,t){return qe.resolve(this.Ye.getEntries(t))}addFieldIndex(e,t){return qe.resolve()}deleteFieldIndex(e,t){return qe.resolve()}getDocumentsMatchingTarget(e,t){return qe.resolve(null)}getIndexType(e,t){return qe.resolve(0)}getFieldIndexes(e,t){return qe.resolve([])}getNextCollectionGroupToUpdate(e){return qe.resolve(null)}getMinOffset(e,t){return qe.resolve(vi.min())}getMinOffsetFromCollectionGroup(e,t){return qe.resolve(vi.min())}updateCollectionGroup(e,t,o){return qe.resolve()}updateIndexEntries(e,t){return qe.resolve()}}class _h{constructor(){this.index={}}add(e){const t=e.lastSegment(),o=e.popLast(),u=this.index[t]||new Kn(mr.comparator),d=!u.has(o);return this.index[t]=u.add(o),d}has(e){const t=e.lastSegment(),o=e.popLast(),u=this.index[t];return u&&u.has(o)}getEntries(e){return(this.index[e]||new Kn(mr.comparator)).toArray()}}const up=new Uint8Array(0);class Cc{constructor(e,t){this.user=e,this.databaseId=t,this.Xe=new _h,this.Ze=new fu(o=>Ku(o),(o,u)=>El(o,u)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Xe.has(t)){const o=t.lastSegment(),u=t.popLast();e.addOnCommittedListener(()=>{this.Xe.add(t)});const d={collectionId:o,parent:oa(u)};return wh(e).put(d)}return qe.resolve()}getCollectionParents(e,t){const o=[],u=IDBKeyRange.bound([t,""],[kr(t),""],!1,!0);return wh(e).W(u).next(d=>{for(const g of d){if(g.collectionId!==t)break;o.push(Ja(g.parent))}return o})}addFieldIndex(e,t){const o=Eh(e),u={indexId:(g=t).indexId,collectionGroup:g.collectionGroup,fields:g.fields.map(D=>[D.fieldPath.canonicalString(),D.kind])};var g;delete u.indexId;const d=o.add(u);if(t.indexState){const g=jl(e);return d.next(D=>{g.put(mu(D,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return d.next()}deleteFieldIndex(e,t){const o=Eh(e),u=jl(e),d=bc(e);return o.delete(t.indexId).next(()=>u.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>d.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const o=bc(e);let u=!0;const d=new Map;return qe.forEach(this.tn(t),g=>this.en(e,g).next(D=>{u&&(u=!!D),d.set(g,D)})).next(()=>{if(u){let g=tr();const D=[];return qe.forEach(d,(L,H)=>{var Q;Tt("IndexedDbIndexManager",`Using index ${Q=L,`id=${Q.indexId}|cg=${Q.collectionGroup}|f=${Q.fields.map(jr=>`${jr.fieldPath}:${jr.kind}`).join(",")}`} to execute ${Ku(t)}`);const _e=function(jr,xs){const di=qu(xs);if(void 0===di)return null;for(const Ei of Ka(jr,di.fieldPath))switch(Ei.op){case"array-contains-any":return Ei.value.arrayValue.values||[];case"array-contains":return[Ei.value]}return null}(H,L),Ge=function(jr,xs){const di=new Map;for(const Ei of Wa(xs))for(const so of Ka(jr,Ei.fieldPath))switch(so.op){case"==":case"in":di.set(Ei.fieldPath.canonicalString(),so.value);break;case"not-in":case"!=":return di.set(Ei.fieldPath.canonicalString(),so.value),Array.from(di.values())}return null}(H,L),ct=function(jr,xs){const di=[];let Ei=!0;for(const so of Wa(xs)){const $c=0===so.kind?ac(jr,so.fieldPath,jr.startAt):xu(jr,so.fieldPath,jr.startAt);di.push($c.value),Ei&&(Ei=$c.inclusive)}return new uu(di,Ei)}(H,L),mt=function(jr,xs){const di=[];let Ei=!0;for(const so of Wa(xs)){const $c=0===so.kind?xu(jr,so.fieldPath,jr.endAt):ac(jr,so.fieldPath,jr.endAt);di.push($c.value),Ei&&(Ei=$c.inclusive)}return new uu(di,Ei)}(H,L),Yt=this.nn(L,H,ct),hn=this.nn(L,H,mt),Gr=this.sn(L,H,Ge),ci=this.rn(L.indexId,_e,Yt,ct.inclusive,hn,mt.inclusive,Gr);return qe.forEach(ci,jr=>o.J(jr,t.limit).next(xs=>{xs.forEach(di=>{const Ei=zt.fromSegments(di.documentKey);g.has(Ei)||(g=g.add(Ei),D.push(Ei))})}))}).next(()=>D)}return qe.resolve(null)})}tn(e){let t=this.Ze.get(e);return t||(t=[e],this.Ze.set(e,t),t)}rn(e,t,o,u,d,g,D){const L=(null!=t?t.length:1)*Math.max(o.length,d.length),H=L/(null!=t?t.length:1),Q=[];for(let _e=0;_e<L;++_e){const Ge=t?this.on(t[_e/H]):up,ct=this.un(e,Ge,o[_e%H],u),mt=this.cn(e,Ge,d[_e%H],g),Yt=D.map(hn=>this.un(e,Ge,hn,!0));Q.push(...this.createRange(ct,mt,Yt))}return Q}un(e,t,o,u){const d=new Xa(e,zt.empty(),t,o);return u?d:d.Ke()}cn(e,t,o,u){const d=new Xa(e,zt.empty(),t,o);return u?d.Ke():d}en(e,t){const o=new op(t),u=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,u).next(d=>{let g=null;for(const D of d)o.We(D)&&(!g||D.fields.length>g.fields.length)&&(g=D);return g})}getIndexType(e,t){let o=2;return qe.forEach(this.tn(t),u=>this.en(e,u).next(d=>{d?0!==o&&d.fields.length<function(g){let D=new Kn(yi.comparator),L=!1;for(const H of g.filters){const Q=H;Q.field.isKeyField()||("array-contains"===Q.op||"array-contains-any"===Q.op?L=!0:D=D.add(Q.field))}for(const H of g.orderBy)H.field.isKeyField()||(D=D.add(H.field));return D.size+(L?1:0)}(u)&&(o=1):o=0})).next(()=>o)}an(e,t){const o=new pd;for(const u of Wa(e)){const d=t.data.field(u.fieldPath);if(null==d)return null;const g=o.qe(u.kind);Dc.Te.ce(d,g)}return o.$e()}on(e){const t=new pd;return Dc.Te.ce(e,t.qe(0)),t.$e()}hn(e,t){const o=new pd;return Dc.Te.ce(Uo(this.databaseId,t),o.qe(function(u){const d=Wa(u);return 0===d.length?0:d[d.length-1].kind}(e))),o.$e()}sn(e,t,o){if(null===o)return[];let u=[];u.push(new pd);let d=0;for(const g of Wa(e)){const D=o[d++];for(const L of u)if(this.ln(t,g.fieldPath)&&Yo(D))u=this.fn(u,g,D);else{const H=L.qe(g.kind);Dc.Te.ce(D,H)}}return this.dn(u)}nn(e,t,o){return this.sn(e,t,o.position)}dn(e){const t=[];for(let o=0;o<e.length;++o)t[o]=e[o].$e();return t}fn(e,t,o){const u=[...e],d=[];for(const g of o.arrayValue.values||[])for(const D of u){const L=new pd;L.seed(D.$e()),Dc.Te.ce(g,L.qe(t.kind)),d.push(L)}return d}ln(e,t){return!!e.filters.find(o=>o instanceof mo&&o.field.isEqual(t)&&("in"===o.op||"not-in"===o.op))}getFieldIndexes(e,t){const o=Eh(e),u=jl(e);return(t?o.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):o.W()).next(d=>{const g=[];return qe.forEach(d,D=>u.get([D.indexId,this.uid]).next(L=>{g.push(function(H,Q){const _e=Q?new su(Q.sequenceNumber,new vi(sl(Q.readTime),new zt(Ja(Q.documentKey)),Q.largestBatchId)):su.empty(),Ge=H.fields.map(([ct,mt])=>new Da(yi.fromServerFormat(ct),mt));return new na(H.indexId,H.collectionGroup,Ge,_e)}(D,L))})).next(()=>g)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((o,u)=>{const d=o.indexState.sequenceNumber-u.indexState.sequenceNumber;return 0!==d?d:Dn(o.collectionGroup,u.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,o){const u=Eh(e),d=jl(e);return this._n(e).next(g=>u.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(D=>qe.forEach(D,L=>d.put(mu(L.indexId,this.user,g,o)))))}updateIndexEntries(e,t){const o=new Map;return qe.forEach(t,(u,d)=>{const g=o.get(u.collectionGroup);return(g?qe.resolve(g):this.getFieldIndexes(e,u.collectionGroup)).next(D=>(o.set(u.collectionGroup,D),qe.forEach(D,L=>this.wn(e,u,L).next(H=>{const Q=this.mn(d,L);return H.isEqual(Q)?qe.resolve():this.gn(e,d,L,H,Q)}))))})}yn(e,t,o,u){return bc(e).put({indexId:u.indexId,uid:this.uid,arrayValue:u.arrayValue,directionalValue:u.directionalValue,orderedDocumentKey:this.hn(o,t.key),documentKey:t.key.path.toArray()})}pn(e,t,o,u){return bc(e).delete([u.indexId,this.uid,u.arrayValue,u.directionalValue,this.hn(o,t.key),t.key.path.toArray()])}wn(e,t,o){const u=bc(e);let d=new Kn(Bl);return u.Z({index:"documentKeyIndex",range:IDBKeyRange.only([o.indexId,this.uid,this.hn(o,t)])},(g,D)=>{d=d.add(new Xa(o.indexId,t,D.arrayValue,D.directionalValue))}).next(()=>d)}mn(e,t){let o=new Kn(Bl);const u=this.an(t,e);if(null==u)return o;const d=qu(t);if(null!=d){const g=e.data.field(d.fieldPath);if(Yo(g))for(const D of g.arrayValue.values||[])o=o.add(new Xa(t.indexId,e.key,this.on(D),u))}else o=o.add(new Xa(t.indexId,e.key,up,u));return o}gn(e,t,o,u,d){Tt("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const g=[];return function(D,L,H,Q,_e){const Ge=D.getIterator(),ct=L.getIterator();let mt=Zi(Ge),Yt=Zi(ct);for(;mt||Yt;){let hn=!1,Gr=!1;if(mt&&Yt){const ci=H(mt,Yt);ci<0?Gr=!0:ci>0&&(hn=!0)}else null!=mt?Gr=!0:hn=!0;hn?(Q(Yt),Yt=Zi(ct)):Gr?(_e(mt),mt=Zi(Ge)):(mt=Zi(Ge),Yt=Zi(ct))}}(u,d,Bl,D=>{g.push(this.yn(e,t,o,D))},D=>{g.push(this.pn(e,t,o,D))}),qe.waitFor(g)}_n(e){let t=1;return jl(e).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(o,u,d)=>{d.done(),t=u.sequenceNumber+1}).next(()=>t)}createRange(e,t,o){o=o.sort((g,D)=>Bl(g,D)).filter((g,D,L)=>!D||0!==Bl(g,L[D-1]));const u=[];u.push(e);for(const g of o){const D=Bl(g,e),L=Bl(g,t);if(0===D)u[0]=e.Ke();else if(D>0&&L<0)u.push(g),u.push(g.Ke());else if(L>0)break}u.push(t);const d=[];for(let g=0;g<u.length;g+=2)d.push(IDBKeyRange.bound([u[g].indexId,this.uid,u[g].arrayValue,u[g].directionalValue,up,[]],[u[g+1].indexId,this.uid,u[g+1].arrayValue,u[g+1].directionalValue,up,[]]));return d}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next($g)}getMinOffset(e,t){return qe.mapArray(this.tn(t),o=>this.en(e,o).next(u=>u||Qt())).next($g)}}function wh(i){return io(i,"collectionParents")}function bc(i){return io(i,"indexEntries")}function Eh(i){return io(i,"indexConfiguration")}function jl(i){return io(i,"indexState")}function $g(i){vn(0!==i.length);let e=i[0].indexState.offset,t=e.largestBatchId;for(let o=1;o<i.length;o++){const u=i[o].indexState.offset;ou(u,e)<0&&(e=u),t<u.largestBatchId&&(t=u.largestBatchId)}return new vi(e.readTime,e.documentKey,t)}const Hg={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class va{constructor(e,t,o){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=o}static withCacheSize(e){return new va(e,va.DEFAULT_COLLECTION_PERCENTILE,va.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function Gg(i,e,t){const o=i.store("mutations"),u=i.store("documentMutations"),d=[],g=IDBKeyRange.only(t.batchId);let D=0;const L=o.Z({range:g},(Q,_e,Ge)=>(D++,Ge.delete()));d.push(L.next(()=>{vn(1===D)}));const H=[];for(const Q of t.mutations){const _e=mh(e,Q.key.path,t.batchId);d.push(u.delete(_e)),H.push(Q.key)}return qe.waitFor(d).next(()=>H)}function Ih(i){if(!i)return 0;let e;if(i.document)e=i.document;else if(i.unknownDocument)e=i.unknownDocument;else{if(!i.noDocument)throw Qt();e=i.noDocument}return JSON.stringify(e).length}va.DEFAULT_COLLECTION_PERCENTILE=10,va.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,va.DEFAULT=new va(41943040,va.DEFAULT_COLLECTION_PERCENTILE,va.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),va.DISABLED=new va(-1,0,0);class Dh{constructor(e,t,o,u){this.userId=e,this.It=t,this.indexManager=o,this.referenceDelegate=u,this.In={}}static oe(e,t,o,u){vn(""!==e.uid);const d=e.isAuthenticated()?e.uid:"";return new Dh(d,t,o,u)}checkEmpty(e){let t=!0;const o=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return vu(e).Z({index:"userMutationsIndex",range:o},(u,d,g)=>{t=!1,g.done()}).next(()=>t)}addMutationBatch(e,t,o,u){const d=$l(e),g=vu(e);return g.add({}).next(D=>{vn("number"==typeof D);const L=new Ao(D,t,o,u),H=function(Ge,ct,mt){const Yt=mt.baseMutations.map(Gr=>is(Ge.re,Gr)),hn=mt.mutations.map(Gr=>is(Ge.re,Gr));return{userId:ct,batchId:mt.batchId,localWriteTimeMs:mt.localWriteTime.toMillis(),baseMutations:Yt,mutations:hn}}(this.It,this.userId,L),Q=[];let _e=new Kn((Ge,ct)=>Dn(Ge.canonicalString(),ct.canonicalString()));for(const Ge of u){const ct=mh(this.userId,Ge.key.path,D);_e=_e.add(Ge.key.path.popLast()),Q.push(g.put(H)),Q.push(d.put(ct,Zy))}return _e.forEach(Ge=>{Q.push(this.indexManager.addToCollectionParentIndex(e,Ge))}),e.addOnCommittedListener(()=>{this.In[D]=L.keys()}),qe.waitFor(Q).next(()=>L)})}lookupMutationBatch(e,t){return vu(e).get(t).next(o=>o?(vn(o.userId===this.userId),Vl(this.It,o)):null)}Tn(e,t){return this.In[t]?qe.resolve(this.In[t]):this.lookupMutationBatch(e,t).next(o=>{if(o){const u=o.keys();return this.In[t]=u,u}return null})}getNextMutationBatchAfterBatchId(e,t){const o=t+1,u=IDBKeyRange.lowerBound([this.userId,o]);let d=null;return vu(e).Z({index:"userMutationsIndex",range:u},(g,D,L)=>{D.userId===this.userId&&(vn(D.batchId>=o),d=Vl(this.It,D)),L.done()}).next(()=>d)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let o=-1;return vu(e).Z({index:"userMutationsIndex",range:t,reverse:!0},(u,d,g)=>{o=d.batchId,g.done()}).next(()=>o)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return vu(e).W("userMutationsIndex",t).next(o=>o.map(u=>Vl(this.It,u)))}getAllMutationBatchesAffectingDocumentKey(e,t){const o=ld(this.userId,t.path),u=IDBKeyRange.lowerBound(o),d=[];return $l(e).Z({range:u},(g,D,L)=>{const[H,Q,_e]=g,Ge=Ja(Q);if(H===this.userId&&t.path.isEqual(Ge))return vu(e).get(_e).next(ct=>{if(!ct)throw Qt();vn(ct.userId===this.userId),d.push(Vl(this.It,ct))});L.done()}).next(()=>d)}getAllMutationBatchesAffectingDocumentKeys(e,t){let o=new Kn(Dn);const u=[];return t.forEach(d=>{const g=ld(this.userId,d.path),D=IDBKeyRange.lowerBound(g),L=$l(e).Z({range:D},(H,Q,_e)=>{const[Ge,ct,mt]=H,Yt=Ja(ct);Ge===this.userId&&d.path.isEqual(Yt)?o=o.add(mt):_e.done()});u.push(L)}),qe.waitFor(u).next(()=>this.En(e,o))}getAllMutationBatchesAffectingQuery(e,t){const o=t.path,u=o.length+1,d=ld(this.userId,o),g=IDBKeyRange.lowerBound(d);let D=new Kn(Dn);return $l(e).Z({range:g},(L,H,Q)=>{const[_e,Ge,ct]=L,mt=Ja(Ge);_e===this.userId&&o.isPrefixOf(mt)?mt.length===u&&(D=D.add(ct)):Q.done()}).next(()=>this.En(e,D))}En(e,t){const o=[],u=[];return t.forEach(d=>{u.push(vu(e).get(d).next(g=>{if(null===g)throw Qt();vn(g.userId===this.userId),o.push(Vl(this.It,g))}))}),qe.waitFor(u).next(()=>o)}removeMutationBatch(e,t){return Gg(e.ie,this.userId,t).next(o=>(e.addOnCommittedListener(()=>{this.An(t.batchId)}),qe.forEach(o,u=>this.referenceDelegate.markPotentiallyOrphaned(e,u))))}An(e){delete this.In[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return qe.resolve();const o=IDBKeyRange.lowerBound([this.userId]),u=[];return $l(e).Z({range:o},(d,g,D)=>{if(d[0]===this.userId){const L=Ja(d[1]);u.push(L)}else D.done()}).next(()=>{vn(0===u.length)})})}containsKey(e,t){return lp(e,this.userId,t)}Rn(e){return Ch(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function lp(i,e,t){const o=ld(e,t.path),u=o[1],d=IDBKeyRange.lowerBound(o);let g=!1;return $l(i).Z({range:d,X:!0},(D,L,H)=>{const[Q,_e,Ge]=D;Q===e&&_e===u&&(g=!0),H.done()}).next(()=>g)}function vu(i){return io(i,"mutations")}function $l(i){return io(i,"documentMutations")}function Ch(i){return io(i,"mutationQueues")}class Hl{constructor(e){this.bn=e}next(){return this.bn+=2,this.bn}static Pn(){return new Hl(0)}static vn(){return new Hl(-1)}}class lv{constructor(e,t){this.referenceDelegate=e,this.It=t}allocateTargetId(e){return this.Vn(e).next(t=>{const o=new Hl(t.highestTargetId);return t.highestTargetId=o.next(),this.Sn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Vn(e).next(t=>Pn.fromTimestamp(new Mi(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Vn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,o){return this.Vn(e).next(u=>(u.highestListenSequenceNumber=t,o&&(u.lastRemoteSnapshotVersion=o.toTimestamp()),t>u.highestListenSequenceNumber&&(u.highestListenSequenceNumber=t),this.Sn(e,u)))}addTargetData(e,t){return this.Dn(e,t).next(()=>this.Vn(e).next(o=>(o.targetCount+=1,this.Cn(t,o),this.Sn(e,o))))}updateTargetData(e,t){return this.Dn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Gl(e).delete(t.targetId)).next(()=>this.Vn(e)).next(o=>(vn(o.targetCount>0),o.targetCount-=1,this.Sn(e,o)))}removeTargets(e,t,o){let u=0;const d=[];return Gl(e).Z((g,D)=>{const L=fd(D);L.sequenceNumber<=t&&null===o.get(L.targetId)&&(u++,d.push(this.removeTargetData(e,L)))}).next(()=>qe.waitFor(d)).next(()=>u)}forEachTarget(e,t){return Gl(e).Z((o,u)=>{const d=fd(u);t(d)})}Vn(e){return cp(e).get("targetGlobalKey").next(t=>(vn(null!==t),t))}Sn(e,t){return cp(e).put("targetGlobalKey",t)}Dn(e,t){return Gl(e).put(Vg(this.It,t))}Cn(e,t){let o=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,o=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,o=!0),o}getTargetCount(e){return this.Vn(e).next(t=>t.targetCount)}getTargetData(e,t){const o=Ku(t),u=IDBKeyRange.bound([o,Number.NEGATIVE_INFINITY],[o,Number.POSITIVE_INFINITY]);let d=null;return Gl(e).Z({range:u,index:"queryTargetsIndex"},(g,D,L)=>{const H=fd(D);El(t,H.target)&&(d=H,L.done())}).next(()=>d)}addMatchingKeys(e,t,o){const u=[],d=_a(e);return t.forEach(g=>{const D=oa(g.path);u.push(d.put({targetId:o,path:D})),u.push(this.referenceDelegate.addReference(e,o,g))}),qe.waitFor(u)}removeMatchingKeys(e,t,o){const u=_a(e);return qe.forEach(t,d=>{const g=oa(d.path);return qe.waitFor([u.delete([o,g]),this.referenceDelegate.removeReference(e,o,d)])})}removeMatchingKeysForTargetId(e,t){const o=_a(e),u=IDBKeyRange.bound([t],[t+1],!1,!0);return o.delete(u)}getMatchingKeysForTargetId(e,t){const o=IDBKeyRange.bound([t],[t+1],!1,!0),u=_a(e);let d=tr();return u.Z({range:o,X:!0},(g,D,L)=>{const H=Ja(g[1]),Q=new zt(H);d=d.add(Q)}).next(()=>d)}containsKey(e,t){const o=oa(t.path),u=IDBKeyRange.bound([o],[kr(o)],!1,!0);let d=0;return _a(e).Z({index:"documentTargetsIndex",X:!0,range:u},([g,D],L,H)=>{0!==g&&(d++,H.done())}).next(()=>d>0)}se(e,t){return Gl(e).get(t).next(o=>o?fd(o):null)}}function Gl(i){return io(i,"targets")}function cp(i){return io(i,"targetGlobal")}function _a(i){return io(i,"targetDocuments")}function dp([i,e],[t,o]){const u=Dn(i,t);return 0===u?Dn(e,o):u}class zg{constructor(e){this.xn=e,this.buffer=new Kn(dp),this.Nn=0}kn(){return++this.Nn}Mn(e){const t=[e,this.kn()];if(this.buffer.size<this.xn)this.buffer=this.buffer.add(t);else{const o=this.buffer.last();dp(t,o)<0&&(this.buffer=this.buffer.delete(o).add(t))}}get maxValue(){return this.buffer.last()[0]}}class cv{constructor(e,t,o){this.garbageCollector=e,this.asyncQueue=t,this.localStore=o,this.On=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Fn(6e4)}stop(){this.On&&(this.On.cancel(),this.On=null)}get started(){return null!==this.On}Fn(e){var t=this;Tt("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.On=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,he.Z)(function*(){t.On=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(o){Vo(o)?Tt("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",o):yield Lo(o)}yield t.Fn(3e5)}))}}class a0{constructor(e,t){this.$n=e,this.params=t}calculateTargetCount(e,t){return this.$n.Bn(e).next(o=>Math.floor(t/100*o))}nthSequenceNumber(e,t){if(0===t)return qe.resolve(te.at);const o=new zg(t);return this.$n.forEachTarget(e,u=>o.Mn(u.sequenceNumber)).next(()=>this.$n.Ln(e,u=>o.Mn(u))).next(()=>o.maxValue)}removeTargets(e,t,o){return this.$n.removeTargets(e,t,o)}removeOrphanedDocuments(e,t){return this.$n.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Tt("LruGarbageCollector","Garbage collection skipped; disabled"),qe.resolve(Hg)):this.getCacheSize(e).next(o=>o<this.params.cacheSizeCollectionThreshold?(Tt("LruGarbageCollector",`Garbage collection skipped; Cache size ${o} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Hg):this.Un(e,t))}getCacheSize(e){return this.$n.getCacheSize(e)}Un(e,t){let o,u,d,g,D,L,H;const Q=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(_e=>(_e>this.params.maximumSequenceNumbersToCollect?(Tt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${_e}`),u=this.params.maximumSequenceNumbersToCollect):u=_e,g=Date.now(),this.nthSequenceNumber(e,u))).next(_e=>(o=_e,D=Date.now(),this.removeTargets(e,o,t))).next(_e=>(d=_e,L=Date.now(),this.removeOrphanedDocuments(e,o))).next(_e=>(H=Date.now(),Oa()<=vt.in.DEBUG&&Tt("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${g-Q}ms\n\tDetermined least recently used ${u} in `+(D-g)+`ms\n\tRemoved ${d} targets in `+(L-D)+`ms\n\tRemoved ${_e} documents in `+(H-L)+`ms\nTotal Duration: ${H-Q}ms`),qe.resolve({didRun:!0,sequenceNumbersCollected:u,targetsRemoved:d,documentsRemoved:_e})))}}class bh{constructor(e,t){this.db=e,this.garbageCollector=new a0(this,t)}Bn(e){const t=this.qn(e);return this.db.getTargetCache().getTargetCount(e).next(o=>t.next(u=>o+u))}qn(e){let t=0;return this.Ln(e,o=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Ln(e,t){return this.Kn(e,(o,u)=>t(u))}addReference(e,t,o){return Th(e,o)}removeReference(e,t,o){return Th(e,o)}removeTargets(e,t,o){return this.db.getTargetCache().removeTargets(e,t,o)}markPotentiallyOrphaned(e,t){return Th(e,t)}Gn(e,t){return function(o,u){let d=!1;return Ch(o).tt(g=>lp(o,g,u).next(D=>(D&&(d=!0),qe.resolve(!D)))).next(()=>d)}(e,t)}removeOrphanedDocuments(e,t){const o=this.db.getRemoteDocumentCache().newChangeBuffer(),u=[];let d=0;return this.Kn(e,(g,D)=>{if(D<=t){const L=this.Gn(e,g).next(H=>{if(!H)return d++,o.getEntry(e,g).next(()=>(o.removeEntry(g,Pn.min()),_a(e).delete([0,oa(g.path)])))});u.push(L)}}).next(()=>qe.waitFor(u)).next(()=>o.apply(e)).next(()=>d)}removeTarget(e,t){const o=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,o)}updateLimboDocument(e,t){return Th(e,t)}Kn(e,t){const o=_a(e);let u,d=te.at;return o.Z({index:"documentTargetsIndex"},([g,D],{path:L,sequenceNumber:H})=>{0===g?(d!==te.at&&t(new zt(Ja(u)),d),d=H,u=L):d=te.at}).next(()=>{d!==te.at&&t(new zt(Ja(u)),d)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Th(i,e){return _a(i).put((o=i.currentSequenceNumber,{targetId:0,path:oa(e.path),sequenceNumber:o}));var o}class hp{constructor(){this.changes=new fu(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Ci.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const o=this.changes.get(t);return void 0!==o?qe.resolve(o):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Wg{constructor(e){this.It=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,o){return _u(e).put(o)}removeEntry(e,t,o){return _u(e).delete(function(u,d){const g=u.path.toArray();return[g.slice(0,g.length-2),g[g.length-2],hd(d),g[g.length-1]]}(t,o))}updateMetadata(e,t){return this.getMetadata(e).next(o=>(o.byteSize+=t,this.Qn(e,o)))}getEntry(e,t){let o=Ci.newInvalidDocument(t);return _u(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(ol(t))},(u,d)=>{o=this.jn(t,d)}).next(()=>o)}Wn(e,t){let o={size:0,document:Ci.newInvalidDocument(t)};return _u(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(ol(t))},(u,d)=>{o={document:this.jn(t,d),size:Ih(d)}}).next(()=>o)}getEntries(e,t){let o=Gs();return this.zn(e,t,(u,d)=>{const g=this.jn(u,d);o=o.insert(u,g)}).next(()=>o)}Hn(e,t){let o=Gs(),u=new rn(zt.comparator);return this.zn(e,t,(d,g)=>{const D=this.jn(d,g);o=o.insert(d,D),u=u.insert(d,Ih(g))}).next(()=>({documents:o,Jn:u}))}zn(e,t,o){if(t.isEmpty())return qe.resolve();let u=new Kn(Sh);t.forEach(L=>u=u.add(L));const d=IDBKeyRange.bound(ol(u.first()),ol(u.last())),g=u.getIterator();let D=g.getNext();return _u(e).Z({index:"documentKeyIndex",range:d},(L,H,Q)=>{const _e=zt.fromSegments([...H.prefixPath,H.collectionGroup,H.documentId]);for(;D&&Sh(D,_e)<0;)o(D,null),D=g.getNext();D&&D.isEqual(_e)&&(o(D,H),D=g.hasNext()?g.getNext():null),D?Q.j(ol(D)):Q.done()}).next(()=>{for(;D;)o(D,null),D=g.hasNext()?g.getNext():null})}getAllFromCollection(e,t,o){const u=[t.popLast().toArray(),t.lastSegment(),hd(o.readTime),o.documentKey.path.isEmpty()?"":o.documentKey.path.lastSegment()],d=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return _u(e).W(IDBKeyRange.bound(u,d,!0)).next(g=>{let D=Gs();for(const L of g){const H=this.jn(zt.fromSegments(L.prefixPath.concat(L.collectionGroup,L.documentId)),L);D=D.insert(H.key,H)}return D})}getAllFromCollectionGroup(e,t,o,u){let d=Gs();const g=mp(t,o),D=mp(t,vi.max());return _u(e).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(g,D,!0)},(L,H,Q)=>{const _e=this.jn(zt.fromSegments(H.prefixPath.concat(H.collectionGroup,H.documentId)),H);d=d.insert(_e.key,_e),d.size===u&&Q.done()}).next(()=>d)}newChangeBuffer(e){return new pp(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return gp(e).get("remoteDocumentGlobalKey").next(t=>(vn(!!t),t))}Qn(e,t){return gp(e).put("remoteDocumentGlobalKey",t)}jn(e,t){if(t){const o=function Fg(i,e){let t;if(e.document)t=an(i.re,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const o=zt.fromSegments(e.noDocument.path),u=sl(e.noDocument.readTime);t=Ci.newNoDocument(o,u),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return Qt();{const o=zt.fromSegments(e.unknownDocument.path),u=sl(e.unknownDocument.version);t=Ci.newUnknownDocument(o,u)}}return e.readTime&&t.setReadTime(function(o){const u=new Mi(o[0],o[1]);return Pn.fromTimestamp(u)}(e.readTime)),t}(this.It,t);if(!o.isNoDocument()||!o.version.isEqual(Pn.min()))return o}return Ci.newInvalidDocument(e)}}function fp(i){return new Wg(i)}class pp extends hp{constructor(e,t){super(),this.Yn=e,this.trackRemovals=t,this.Xn=new fu(o=>o.toString(),(o,u)=>o.isEqual(u))}applyChanges(e){const t=[];let o=0,u=new Kn((d,g)=>Dn(d.canonicalString(),g.canonicalString()));return this.changes.forEach((d,g)=>{const D=this.Xn.get(d);if(t.push(this.Yn.removeEntry(e,d,D.readTime)),g.isValidDocument()){const L=Lg(this.Yn.It,g);u=u.add(d.path.popLast()),o+=Ih(L)-D.size,t.push(this.Yn.addEntry(e,d,L))}else if(o-=D.size,this.trackRemovals){const L=Lg(this.Yn.It,g.convertToNoDocument(Pn.min()));t.push(this.Yn.addEntry(e,d,L))}}),u.forEach(d=>{t.push(this.Yn.indexManager.addToCollectionParentIndex(e,d))}),t.push(this.Yn.updateMetadata(e,o)),qe.waitFor(t)}getFromCache(e,t){return this.Yn.Wn(e,t).next(o=>(this.Xn.set(t,{size:o.size,readTime:o.document.readTime}),o.document))}getAllFromCache(e,t){return this.Yn.Hn(e,t).next(({documents:o,Jn:u})=>(u.forEach((d,g)=>{this.Xn.set(d,{size:g,readTime:o.get(d).readTime})}),o))}}function gp(i){return io(i,"remoteDocumentGlobal")}function _u(i){return io(i,"remoteDocumentsV14")}function ol(i){const e=i.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function mp(i,e){const t=e.documentKey.path.toArray();return[i,hd(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function Sh(i,e){const t=i.path.toArray(),o=e.path.toArray();let u=0;for(let d=0;d<t.length-2&&d<o.length-2;++d)if(u=Dn(t[d],o[d]),u)return u;return u=Dn(t.length,o.length),u||(u=Dn(t[t.length-2],o[o.length-2]),u||Dn(t[t.length-1],o[o.length-1]))}class qg{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class Ah{constructor(e,t,o,u){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=o,this.indexManager=u}getDocument(e,t){let o=null;return this.documentOverlayCache.getOverlay(e,t).next(u=>(o=u,this.getBaseDocument(e,t,o))).next(u=>(null!==o&&xl(o.mutation,u,hi.empty(),Mi.now()),u))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(o=>this.getLocalViewOfDocuments(e,o,tr()).next(()=>o))}getLocalViewOfDocuments(e,t,o=tr()){const u=Jo();return this.populateOverlays(e,u,t).next(()=>this.computeViews(e,t,u,o).next(d=>{let g=mc();return d.forEach((D,L)=>{g=g.insert(D,L.overlayedDocument)}),g}))}getOverlayedDocuments(e,t){const o=Jo();return this.populateOverlays(e,o,t).next(()=>this.computeViews(e,t,o,tr()))}populateOverlays(e,t,o){const u=[];return o.forEach(d=>{t.has(d)||u.push(d)}),this.documentOverlayCache.getOverlays(e,u).next(d=>{d.forEach((g,D)=>{t.set(g,D)})})}computeViews(e,t,o,u){let d=Gs();const g=Pu(),D=Pu();return t.forEach((L,H)=>{const Q=o.get(H.key);u.has(H.key)&&(void 0===Q||Q.mutation instanceof ja)?d=d.insert(H.key,H):void 0!==Q&&(g.set(H.key,Q.mutation.getFieldMask()),xl(Q.mutation,H,Q.mutation.getFieldMask(),Mi.now()))}),this.recalculateAndSaveOverlays(e,d).next(L=>(L.forEach((H,Q)=>g.set(H,Q)),t.forEach((H,Q)=>{var _e;return D.set(H,new qg(Q,null!==(_e=g.get(H))&&void 0!==_e?_e:null))}),D))}recalculateAndSaveOverlays(e,t){const o=Pu();let u=new rn((g,D)=>g-D),d=tr();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(g=>{for(const D of g)D.keys().forEach(L=>{const H=t.get(L);if(null===H)return;let Q=o.get(L)||hi.empty();Q=D.applyToLocalView(H,Q),o.set(L,Q);const _e=(u.get(D.batchId)||tr()).add(L);u=u.insert(D.batchId,_e)})}).next(()=>{const g=[],D=u.getReverseIterator();for(;D.hasNext();){const L=D.getNext(),H=L.key,Q=L.value,_e=od();Q.forEach(Ge=>{if(!d.has(Ge)){const ct=Ss(t.get(Ge),o.get(Ge));null!==ct&&_e.set(Ge,ct),d=d.add(Ge)}}),g.push(this.documentOverlayCache.saveOverlays(e,H,_e))}return qe.waitFor(g)}).next(()=>o)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(o=>this.recalculateAndSaveOverlays(e,o))}getDocumentsMatchingQuery(e,t,o){return zt.isDocumentKey((u=t).path)&&null===u.collectionGroup&&0===u.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):oh(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,o):this.getDocumentsMatchingCollectionQuery(e,t,o);var u}getNextDocuments(e,t,o,u){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,o,u).next(d=>{const g=u-d.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,o.largestBatchId,u-d.size):qe.resolve(Jo());let D=-1,L=d;return g.next(H=>qe.forEach(H,(Q,_e)=>(D<_e.largestBatchId&&(D=_e.largestBatchId),d.get(Q)?qe.resolve():this.getBaseDocument(e,Q,_e).next(Ge=>{L=L.insert(Q,Ge)}))).next(()=>this.populateOverlays(e,H,d)).next(()=>this.computeViews(e,L,H,tr())).next(Q=>({batchId:D,changes:yc(Q)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new zt(t)).next(o=>{let u=mc();return o.isFoundDocument()&&(u=u.insert(o.key,o)),u})}getDocumentsMatchingCollectionGroupQuery(e,t,o){const u=t.collectionGroup;let d=mc();return this.indexManager.getCollectionParents(e,u).next(g=>qe.forEach(g,D=>{const L=(H=t,Q=D.child(u),new ro(Q,null,H.explicitOrderBy.slice(),H.filters.slice(),H.limit,H.limitType,H.startAt,H.endAt));var H,Q;return this.getDocumentsMatchingCollectionQuery(e,L,o).next(H=>{H.forEach((Q,_e)=>{d=d.insert(Q,_e)})})}).next(()=>d))}getDocumentsMatchingCollectionQuery(e,t,o){let u;return this.remoteDocumentCache.getAllFromCollection(e,t.path,o).next(d=>(u=d,this.documentOverlayCache.getOverlaysForCollection(e,t.path,o.largestBatchId))).next(d=>{d.forEach((D,L)=>{const H=L.getKey();null===u.get(H)&&(u=u.insert(H,Ci.newInvalidDocument(H)))});let g=mc();return u.forEach((D,L)=>{const H=d.get(D);void 0!==H&&xl(H.mutation,L,hi.empty(),Mi.now()),cu(t,L)&&(g=g.insert(D,L))}),g})}getBaseDocument(e,t,o){return null===o||1===o.mutation.type?this.remoteDocumentCache.getEntry(e,t):qe.resolve(Ci.newInvalidDocument(t))}}class gd{constructor(e){this.It=e,this.Zn=new Map,this.ts=new Map}getBundleMetadata(e,t){return qe.resolve(this.Zn.get(t))}saveBundleMetadata(e,t){var o;return this.Zn.set(t.id,{id:(o=t).id,version:o.version,createTime:zs(o.createTime)}),qe.resolve()}getNamedQuery(e,t){return qe.resolve(this.ts.get(t))}saveNamedQuery(e,t){return this.ts.set(t.name,{name:(o=t).name,query:np(o.bundledQuery),readTime:zs(o.readTime)}),qe.resolve();var o}}class dv{constructor(){this.overlays=new rn(zt.comparator),this.es=new Map}getOverlay(e,t){return qe.resolve(this.overlays.get(t))}getOverlays(e,t){const o=Jo();return qe.forEach(t,u=>this.getOverlay(e,u).next(d=>{null!==d&&o.set(u,d)})).next(()=>o)}saveOverlays(e,t,o){return o.forEach((u,d)=>{this.ue(e,t,d)}),qe.resolve()}removeOverlaysForBatchId(e,t,o){const u=this.es.get(o);return void 0!==u&&(u.forEach(d=>this.overlays=this.overlays.remove(d)),this.es.delete(o)),qe.resolve()}getOverlaysForCollection(e,t,o){const u=Jo(),d=t.length+1,g=new zt(t.child("")),D=this.overlays.getIteratorFrom(g);for(;D.hasNext();){const L=D.getNext().value,H=L.getKey();if(!t.isPrefixOf(H.path))break;H.path.length===d&&L.largestBatchId>o&&u.set(L.getKey(),L)}return qe.resolve(u)}getOverlaysForCollectionGroup(e,t,o,u){let d=new rn((H,Q)=>H-Q);const g=this.overlays.getIterator();for(;g.hasNext();){const H=g.getNext().value;if(H.getKey().getCollectionGroup()===t&&H.largestBatchId>o){let Q=d.get(H.largestBatchId);null===Q&&(Q=Jo(),d=d.insert(H.largestBatchId,Q)),Q.set(H.getKey(),H)}}const D=Jo(),L=d.getIterator();for(;L.hasNext()&&(L.getNext().value.forEach((H,Q)=>D.set(H,Q)),!(D.size()>=u)););return qe.resolve(D)}ue(e,t,o){const u=this.overlays.get(o.key);if(null!==u){const g=this.es.get(u.largestBatchId).delete(o.key);this.es.set(u.largestBatchId,g)}this.overlays=this.overlays.insert(o.key,new dd(t,o));let d=this.es.get(t);void 0===d&&(d=tr(),this.es.set(t,d)),this.es.set(t,d.add(o.key))}}class xh{constructor(){this.ns=new Kn(xo.ss),this.rs=new Kn(xo.os)}isEmpty(){return this.ns.isEmpty()}addReference(e,t){const o=new xo(e,t);this.ns=this.ns.add(o),this.rs=this.rs.add(o)}us(e,t){e.forEach(o=>this.addReference(o,t))}removeReference(e,t){this.cs(new xo(e,t))}hs(e,t){e.forEach(o=>this.removeReference(o,t))}ls(e){const t=new zt(new mr([])),o=new xo(t,e),u=new xo(t,e+1),d=[];return this.rs.forEachInRange([o,u],g=>{this.cs(g),d.push(g.key)}),d}fs(){this.ns.forEach(e=>this.cs(e))}cs(e){this.ns=this.ns.delete(e),this.rs=this.rs.delete(e)}ds(e){const t=new zt(new mr([])),o=new xo(t,e),u=new xo(t,e+1);let d=tr();return this.rs.forEachInRange([o,u],g=>{d=d.add(g.key)}),d}containsKey(e){const t=new xo(e,0),o=this.ns.firstAfterOrEqual(t);return null!==o&&e.isEqual(o.key)}}class xo{constructor(e,t){this.key=e,this._s=t}static ss(e,t){return zt.comparator(e.key,t.key)||Dn(e._s,t._s)}static os(e,t){return Dn(e._s,t._s)||zt.comparator(e.key,t.key)}}class hv{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.ws=1,this.gs=new Kn(xo.ss)}checkEmpty(e){return qe.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,o,u){const d=this.ws;this.ws++;const g=new Ao(d,t,o,u);this.mutationQueue.push(g);for(const D of u)this.gs=this.gs.add(new xo(D.key,d)),this.indexManager.addToCollectionParentIndex(e,D.key.path.popLast());return qe.resolve(g)}lookupMutationBatch(e,t){return qe.resolve(this.ys(t))}getNextMutationBatchAfterBatchId(e,t){const u=this.ps(t+1),d=u<0?0:u;return qe.resolve(this.mutationQueue.length>d?this.mutationQueue[d]:null)}getHighestUnacknowledgedBatchId(){return qe.resolve(0===this.mutationQueue.length?-1:this.ws-1)}getAllMutationBatches(e){return qe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const o=new xo(t,0),u=new xo(t,Number.POSITIVE_INFINITY),d=[];return this.gs.forEachInRange([o,u],g=>{const D=this.ys(g._s);d.push(D)}),qe.resolve(d)}getAllMutationBatchesAffectingDocumentKeys(e,t){let o=new Kn(Dn);return t.forEach(u=>{const d=new xo(u,0),g=new xo(u,Number.POSITIVE_INFINITY);this.gs.forEachInRange([d,g],D=>{o=o.add(D._s)})}),qe.resolve(this.Is(o))}getAllMutationBatchesAffectingQuery(e,t){const o=t.path,u=o.length+1;let d=o;zt.isDocumentKey(d)||(d=d.child(""));const g=new xo(new zt(d),0);let D=new Kn(Dn);return this.gs.forEachWhile(L=>{const H=L.key.path;return!!o.isPrefixOf(H)&&(H.length===u&&(D=D.add(L._s)),!0)},g),qe.resolve(this.Is(D))}Is(e){const t=[];return e.forEach(o=>{const u=this.ys(o);null!==u&&t.push(u)}),t}removeMutationBatch(e,t){vn(0===this.Ts(t.batchId,"removed")),this.mutationQueue.shift();let o=this.gs;return qe.forEach(t.mutations,u=>{const d=new xo(u.key,t.batchId);return o=o.delete(d),this.referenceDelegate.markPotentiallyOrphaned(e,u.key)}).next(()=>{this.gs=o})}An(e){}containsKey(e,t){const o=new xo(t,0),u=this.gs.firstAfterOrEqual(o);return qe.resolve(t.isEqual(u&&u.key))}performConsistencyCheck(e){return qe.resolve()}Ts(e,t){return this.ps(e)}ps(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}ys(e){const t=this.ps(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class Zg{constructor(e){this.Es=e,this.docs=new rn(zt.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const o=t.key,u=this.docs.get(o),d=u?u.size:0,g=this.Es(t);return this.docs=this.docs.insert(o,{document:t.mutableCopy(),size:g}),this.size+=g-d,this.indexManager.addToCollectionParentIndex(e,o.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const o=this.docs.get(t);return qe.resolve(o?o.document.mutableCopy():Ci.newInvalidDocument(t))}getEntries(e,t){let o=Gs();return t.forEach(u=>{const d=this.docs.get(u);o=o.insert(u,d?d.document.mutableCopy():Ci.newInvalidDocument(u))}),qe.resolve(o)}getAllFromCollection(e,t,o){let u=Gs();const d=new zt(t.child("")),g=this.docs.getIteratorFrom(d);for(;g.hasNext();){const{key:D,value:{document:L}}=g.getNext();if(!t.isPrefixOf(D.path))break;D.path.length>t.length+1||ou(fo(L),o)<=0||(u=u.insert(L.key,L.mutableCopy()))}return qe.resolve(u)}getAllFromCollectionGroup(e,t,o,u){Qt()}As(e,t){return qe.forEach(this.docs,o=>t(o))}newChangeBuffer(e){return new yp(this)}getSize(e){return qe.resolve(this.size)}}class yp extends hp{constructor(e){super(),this.Yn=e}applyChanges(e){const t=[];return this.changes.forEach((o,u)=>{u.isValidDocument()?t.push(this.Yn.addEntry(e,u)):this.Yn.removeEntry(o)}),qe.waitFor(t)}getFromCache(e,t){return this.Yn.getEntry(e,t)}getAllFromCache(e,t){return this.Yn.getEntries(e,t)}}class Kg{constructor(e){this.persistence=e,this.Rs=new fu(t=>Ku(t),El),this.lastRemoteSnapshotVersion=Pn.min(),this.highestTargetId=0,this.bs=0,this.Ps=new xh,this.targetCount=0,this.vs=Hl.Pn()}forEachTarget(e,t){return this.Rs.forEach((o,u)=>t(u)),qe.resolve()}getLastRemoteSnapshotVersion(e){return qe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return qe.resolve(this.bs)}allocateTargetId(e){return this.highestTargetId=this.vs.next(),qe.resolve(this.highestTargetId)}setTargetsMetadata(e,t,o){return o&&(this.lastRemoteSnapshotVersion=o),t>this.bs&&(this.bs=t),qe.resolve()}Dn(e){this.Rs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.vs=new Hl(t),this.highestTargetId=t),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}addTargetData(e,t){return this.Dn(t),this.targetCount+=1,qe.resolve()}updateTargetData(e,t){return this.Dn(t),qe.resolve()}removeTargetData(e,t){return this.Rs.delete(t.target),this.Ps.ls(t.targetId),this.targetCount-=1,qe.resolve()}removeTargets(e,t,o){let u=0;const d=[];return this.Rs.forEach((g,D)=>{D.sequenceNumber<=t&&null===o.get(D.targetId)&&(this.Rs.delete(g),d.push(this.removeMatchingKeysForTargetId(e,D.targetId)),u++)}),qe.waitFor(d).next(()=>u)}getTargetCount(e){return qe.resolve(this.targetCount)}getTargetData(e,t){const o=this.Rs.get(t)||null;return qe.resolve(o)}addMatchingKeys(e,t,o){return this.Ps.us(t,o),qe.resolve()}removeMatchingKeys(e,t,o){this.Ps.hs(t,o);const u=this.persistence.referenceDelegate,d=[];return u&&t.forEach(g=>{d.push(u.markPotentiallyOrphaned(e,g))}),qe.waitFor(d)}removeMatchingKeysForTargetId(e,t){return this.Ps.ls(t),qe.resolve()}getMatchingKeysForTargetId(e,t){const o=this.Ps.ds(t);return qe.resolve(o)}containsKey(e,t){return qe.resolve(this.Ps.containsKey(t))}}class fv{constructor(e,t){this.Vs={},this.overlays={},this.Ss=new te(0),this.Ds=!1,this.Ds=!0,this.referenceDelegate=e(this),this.Cs=new Kg(this),this.indexManager=new ap,this.remoteDocumentCache=new Zg(o=>this.referenceDelegate.xs(o)),this.It=new kg(t),this.Ns=new gd(this.It)}start(){return Promise.resolve()}shutdown(){return this.Ds=!1,Promise.resolve()}get started(){return this.Ds}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new dv,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let o=this.Vs[e.toKey()];return o||(o=new hv(t,this.referenceDelegate),this.Vs[e.toKey()]=o),o}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ns}runTransaction(e,t,o){Tt("MemoryPersistence","Starting transaction:",e);const u=new Yg(this.Ss.next());return this.referenceDelegate.ks(),o(u).next(d=>this.referenceDelegate.Ms(u).next(()=>d)).toPromise().then(d=>(u.raiseOnCommittedEvent(),d))}Os(e,t){return qe.or(Object.values(this.Vs).map(o=>()=>o.containsKey(e,t)))}}class Yg extends ra{constructor(e){super(),this.currentSequenceNumber=e}}class Mh{constructor(e){this.persistence=e,this.Fs=new xh,this.$s=null}static Bs(e){return new Mh(e)}get Ls(){if(this.$s)return this.$s;throw Qt()}addReference(e,t,o){return this.Fs.addReference(o,t),this.Ls.delete(o.toString()),qe.resolve()}removeReference(e,t,o){return this.Fs.removeReference(o,t),this.Ls.add(o.toString()),qe.resolve()}markPotentiallyOrphaned(e,t){return this.Ls.add(t.toString()),qe.resolve()}removeTarget(e,t){this.Fs.ls(t.targetId).forEach(u=>this.Ls.add(u.toString()));const o=this.persistence.getTargetCache();return o.getMatchingKeysForTargetId(e,t.targetId).next(u=>{u.forEach(d=>this.Ls.add(d.toString()))}).next(()=>o.removeTargetData(e,t))}ks(){this.$s=new Set}Ms(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return qe.forEach(this.Ls,o=>{const u=zt.fromPath(o);return this.Us(e,u).next(d=>{d||t.removeEntry(u,Pn.min())})}).next(()=>(this.$s=null,t.apply(e)))}updateLimboDocument(e,t){return this.Us(e,t).next(o=>{o?this.Ls.delete(t.toString()):this.Ls.add(t.toString())})}xs(e){return 0}Us(e,t){return qe.or([()=>qe.resolve(this.Fs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Os(e,t)])}}class Qg{constructor(e){this.It=e}$(e,t,o,u){const d=new ba("createOrUpgrade",t);var D;o<1&&u>=1&&(e.createObjectStore("owner"),(D=e).createObjectStore("mutationQueues",{keyPath:"userId"}),D.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Qf,{unique:!0}),D.createObjectStore("documentMutations"),Jg(e),function(D){D.createObjectStore("remoteDocuments")}(e));let g=qe.resolve();return o<3&&u>=3&&(0!==o&&(function(D){D.deleteObjectStore("targetDocuments"),D.deleteObjectStore("targets"),D.deleteObjectStore("targetGlobal")}(e),Jg(e)),g=g.next(()=>function(D){const L=D.store("targetGlobal"),H={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Pn.min().toTimestamp(),targetCount:0};return L.put("targetGlobalKey",H)}(d))),o<4&&u>=4&&(0!==o&&(g=g.next(()=>function(D,L){return L.store("mutations").W().next(H=>{D.deleteObjectStore("mutations"),D.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Qf,{unique:!0});const Q=L.store("mutations"),_e=H.map(Ge=>Q.put(Ge));return qe.waitFor(_e)})}(e,d))),g=g.next(()=>{!function(D){D.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),o<5&&u>=5&&(g=g.next(()=>this.qs(d))),o<6&&u>=6&&(g=g.next(()=>(function(D){D.createObjectStore("remoteDocumentGlobal")}(e),this.Ks(d)))),o<7&&u>=7&&(g=g.next(()=>this.Gs(d))),o<8&&u>=8&&(g=g.next(()=>this.Qs(e,d))),o<9&&u>=9&&(g=g.next(()=>{!function(D){D.objectStoreNames.contains("remoteDocumentChanges")&&D.deleteObjectStore("remoteDocumentChanges")}(e)})),o<10&&u>=10&&(g=g.next(()=>this.js(d))),o<11&&u>=11&&(g=g.next(()=>{(function(D){D.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(D){D.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),o<12&&u>=12&&(g=g.next(()=>{!function(D){const L=D.createObjectStore("documentOverlays",{keyPath:nv});L.createIndex("collectionPathOverlayIndex",rv,{unique:!1}),L.createIndex("collectionGroupOverlayIndex",iv,{unique:!1})}(e)})),o<13&&u>=13&&(g=g.next(()=>function(D){const L=D.createObjectStore("remoteDocumentsV14",{keyPath:Jf});L.createIndex("documentKeyIndex",cd),L.createIndex("collectionGroupIndex",Ky)}(e)).next(()=>this.Ws(e,d)).next(()=>e.deleteObjectStore("remoteDocuments"))),o<14&&u>=14&&(g=g.next(()=>this.zs(e,d))),o<15&&u>=15&&(g=g.next(()=>function(D){D.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),D.createObjectStore("indexState",{keyPath:Xy}).createIndex("sequenceNumberIndex",ev,{unique:!1}),D.createObjectStore("indexEntries",{keyPath:tv}).createIndex("documentKeyIndex",Xf,{unique:!1})}(e))),g}Ks(e){let t=0;return e.store("remoteDocuments").Z((o,u)=>{t+=Ih(u)}).next(()=>{const o={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",o)})}qs(e){const t=e.store("mutationQueues"),o=e.store("mutations");return t.W().next(u=>qe.forEach(u,d=>{const g=IDBKeyRange.bound([d.userId,-1],[d.userId,d.lastAcknowledgedBatchId]);return o.W("userMutationsIndex",g).next(D=>qe.forEach(D,L=>{vn(L.userId===d.userId);const H=Vl(this.It,L);return Gg(e,d.userId,H).next(()=>{})}))}))}Gs(e){const t=e.store("targetDocuments"),o=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(u=>{const d=[];return o.Z((g,D)=>{const L=new mr(g),H=[0,oa(L)];d.push(t.get(H).next(Q=>Q?qe.resolve():t.put({targetId:0,path:oa(L),sequenceNumber:u.highestListenSequenceNumber})))}).next(()=>qe.waitFor(d))})}Qs(e,t){e.createObjectStore("collectionParents",{keyPath:Jy});const o=t.store("collectionParents"),u=new _h,d=g=>{if(u.add(g)){const D=g.lastSegment(),L=g.popLast();return o.put({collectionId:D,parent:oa(L)})}};return t.store("remoteDocuments").Z({X:!0},(g,D)=>{const L=new mr(g);return d(L.popLast())}).next(()=>t.store("documentMutations").Z({X:!0},([g,D,L],H)=>{const Q=Ja(D);return d(Q.popLast())}))}js(e){const t=e.store("targets");return t.Z((o,u)=>{const d=fd(u),g=Vg(this.It,d);return t.put(g)})}Ws(e,t){const o=t.store("remoteDocuments"),u=[];return o.Z((d,g)=>{const D=t.store("remoteDocumentsV14"),L=(H=g,H.document?new zt(mr.fromString(H.document.name).popFirst(5)):H.noDocument?zt.fromSegments(H.noDocument.path):H.unknownDocument?zt.fromSegments(H.unknownDocument.path):Qt()).path.toArray();var H;const Q={prefixPath:L.slice(0,L.length-2),collectionGroup:L[L.length-2],documentId:L[L.length-1],readTime:g.readTime||[0,0],unknownDocument:g.unknownDocument,noDocument:g.noDocument,document:g.document,hasCommittedMutations:!!g.hasCommittedMutations};u.push(D.put(Q))}).next(()=>qe.waitFor(u))}zs(e,t){const o=t.store("mutations"),u=fp(this.It),d=new fv(Mh.Bs,this.It.re);return o.W().next(g=>{const D=new Map;return g.forEach(L=>{var H;let Q=null!==(H=D.get(L.userId))&&void 0!==H?H:tr();Vl(this.It,L).keys().forEach(_e=>Q=Q.add(_e)),D.set(L.userId,Q)}),qe.forEach(D,(L,H)=>{const Q=new zi(H),_e=ip.oe(this.It,Q),Ge=d.getIndexManager(Q),ct=Dh.oe(Q,this.It,Ge,d.referenceDelegate);return new Ah(u,ct,_e,Ge).recalculateAndSaveOverlaysForDocumentKeys(new yh(t,te.at),L).next()})})}}function Jg(i){i.createObjectStore("targetDocuments",{keyPath:Qy}).createIndex("documentTargetsIndex",Ng,{unique:!0}),i.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Yy,{unique:!0}),i.createObjectStore("targetGlobal")}const vp="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Sa{constructor(e,t,o,u,d,g,D,L,H,Q,_e=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=o,this.Hs=d,this.window=g,this.document=D,this.Js=H,this.Ys=Q,this.Xs=_e,this.Ss=null,this.Ds=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Zs=null,this.inForeground=!1,this.ti=null,this.ei=null,this.ni=Number.NEGATIVE_INFINITY,this.si=Ge=>Promise.resolve(),!Sa.C())throw new Et(Qe.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new bh(this,u),this.ii=t+"main",this.It=new kg(L),this.ri=new Ds(this.ii,this.Xs,new Qg(this.It)),this.Cs=new lv(this.referenceDelegate,this.It),this.remoteDocumentCache=fp(this.It),this.Ns=new ov,this.window&&this.window.localStorage?this.oi=this.window.localStorage:(this.oi=null,!1===Q&&Pr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ui().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Et(Qe.FAILED_PRECONDITION,vp);return this.ci(),this.ai(),this.hi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Cs.getHighestSequenceNumber(e))}).then(e=>{this.Ss=new te(e,this.Js)}).then(()=>{this.Ds=!0}).catch(e=>(this.ri&&this.ri.close(),Promise.reject(e)))}li(e){var t=this;return this.si=function(){var o=(0,he.Z)(function*(u){if(t.started)return e(u)});return function(u){return o.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ri.L(function(){var t=(0,he.Z)(function*(o){null===o.newVersion&&(yield e())});return function(o){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Hs.enqueueAndForget((0,he.Z)(function*(){t.started&&(yield t.ui())})))}ui(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>yd(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.fi(e).next(t=>{t||(this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)))})}).next(()=>this.di(e)).next(t=>this.isPrimary&&!t?this._i(e).next(()=>!1):!!t&&this.wi(e).next(()=>!0))).catch(e=>{if(Vo(e))return Tt("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Tt("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Hs.enqueueRetryable(()=>this.si(e)),this.isPrimary=e})}fi(e){return md(e).get("owner").next(t=>qe.resolve(this.mi(t)))}gi(e){return yd(e).delete(this.clientId)}yi(){var e=this;return(0,he.Z)(function*(){if(e.isPrimary&&!e.pi(e.ni,18e5)){e.ni=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",o=>{const u=io(o,"clientMetadata");return u.W().next(d=>{const g=e.Ii(d,18e5),D=d.filter(L=>-1===g.indexOf(L));return qe.forEach(D,L=>u.delete(L.clientId)).next(()=>D)})}).catch(()=>[]);if(e.oi)for(const o of t)e.oi.removeItem(e.Ti(o.clientId))}})()}hi(){this.ei=this.Hs.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ui().then(()=>this.yi()).then(()=>this.hi()))}mi(e){return!!e&&e.ownerId===this.clientId}di(e){return this.Ys?qe.resolve(!0):md(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)){if(this.mi(t)&&this.networkEnabled)return!0;if(!this.mi(t)){if(!t.allowTabSynchronization)throw new Et(Qe.FAILED_PRECONDITION,vp);return!1}}return!(!this.networkEnabled||!this.inForeground)||yd(e).W().next(o=>void 0===this.Ii(o,5e3).find(u=>{if(this.clientId!==u.clientId){const g=!this.inForeground&&u.inForeground,D=this.networkEnabled===u.networkEnabled;if(!this.networkEnabled&&u.networkEnabled||g&&D)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&Tt("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,he.Z)(function*(){e.Ds=!1,e.Ai(),e.ei&&(e.ei.cancel(),e.ei=null),e.Ri(),e.bi(),yield e.ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const o=new yh(t,te.at);return e._i(o).next(()=>e.gi(o))}),e.ri.close(),e.Pi()})()}Ii(e,t){return e.filter(o=>this.pi(o.updateTimeMs,t)&&!this.Ei(o.clientId))}vi(){return this.runTransaction("getActiveClients","readonly",e=>yd(e).W().next(t=>this.Ii(t,18e5).map(o=>o.clientId)))}get started(){return this.Ds}getMutationQueue(e,t){return Dh.oe(e,this.It,t,this.referenceDelegate)}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new Cc(e,this.It.re.databaseId)}getDocumentOverlayCache(e){return ip.oe(this.It,e)}getBundleCache(){return this.Ns}runTransaction(e,t,o){Tt("IndexedDbPersistence","Starting transaction:",e);const u="readonly"===t?"readonly":"readwrite",d=15===(g=this.Xs)?tp:14===g?Xo:13===g?Pg:12===g?sv:11===g?ep:void Qt();var g;let D;return this.ri.runTransaction(e,u,d,L=>(D=new yh(L,this.Ss?this.Ss.next():te.at),"readwrite-primary"===t?this.fi(D).next(H=>!!H||this.di(D)).next(H=>{if(!H)throw Pr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)),new Et(Qe.FAILED_PRECONDITION,Ca);return o(D)}).next(H=>this.wi(D).next(()=>H)):this.Vi(D).next(()=>o(D)))).then(L=>(D.raiseOnCommittedEvent(),L))}Vi(e){return md(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)&&!this.mi(t)&&!(this.Ys||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Et(Qe.FAILED_PRECONDITION,vp)})}wi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return md(e).put("owner",t)}static C(){return Ds.C()}_i(e){const t=md(e);return t.get("owner").next(o=>this.mi(o)?(Tt("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):qe.resolve())}pi(e,t){const o=Date.now();return!(e<o-t||e>o&&(Pr(`Detected an update time that is in the future: ${e} > ${o}`),1))}ci(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ti=()=>{this.Hs.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ui()))},this.document.addEventListener("visibilitychange",this.ti),this.inForeground="visible"===this.document.visibilityState)}Ri(){this.ti&&(this.document.removeEventListener("visibilitychange",this.ti),this.ti=null)}ai(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Zs=()=>{this.Ai(),(0,tt.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Hs.enterRestrictedMode(!0),this.Hs.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Zs))}bi(){this.Zs&&(this.window.removeEventListener("pagehide",this.Zs),this.Zs=null)}Ei(e){var t;try{const o=null!==(null===(t=this.oi)||void 0===t?void 0:t.getItem(this.Ti(e)));return Tt("IndexedDbPersistence",`Client '${e}' ${o?"is":"is not"} zombied in LocalStorage`),o}catch(o){return Pr("IndexedDbPersistence","Failed to get zombied client id.",o),!1}}Ai(){if(this.oi)try{this.oi.setItem(this.Ti(this.clientId),String(Date.now()))}catch(e){Pr("Failed to set zombie client id.",e)}}Pi(){if(this.oi)try{this.oi.removeItem(this.Ti(this.clientId))}catch{}}Ti(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function md(i){return io(i,"owner")}function yd(i){return io(i,"clientMetadata")}function _p(i,e){let t=i.projectId;return i.isDefaultDatabase||(t+="."+i.database),"firestore/"+e+"/"+t+"/"}class wp{constructor(e,t,o,u){this.targetId=e,this.fromCache=t,this.Si=o,this.Di=u}static Ci(e,t){let o=tr(),u=tr();for(const d of t.docChanges)switch(d.type){case 0:o=o.add(d.doc.key);break;case 1:u=u.add(d.doc.key)}return new wp(e,t.fromCache,o,u)}}class Xg{constructor(){this.xi=!1}initialize(e,t){this.Ni=e,this.indexManager=t,this.xi=!0}getDocumentsMatchingQuery(e,t,o,u){return this.ki(e,t).next(d=>d||this.Mi(e,t,u,o)).next(d=>d||this.Oi(e,t))}ki(e,t){if(rh(t))return qe.resolve(null);let o=Ts(t);return this.indexManager.getIndexType(e,o).next(u=>0===u?null:(null!==t.limit&&1===u&&(t=dc(t,null,"F"),o=Ts(t)),this.indexManager.getDocumentsMatchingTarget(e,o).next(d=>{const g=tr(...d);return this.Ni.getDocuments(e,g).next(D=>this.indexManager.getMinOffset(e,o).next(L=>{const H=this.Fi(t,D);return this.$i(t,H,g,L.readTime)?this.ki(e,dc(t,null,"F")):this.Bi(e,H,t,L)}))})))}Mi(e,t,o,u){return rh(t)||u.isEqual(Pn.min())?this.Oi(e,t):this.Ni.getDocuments(e,o).next(d=>{const g=this.Fi(t,d);return this.$i(t,g,o,u)?this.Oi(e,t):(Oa()<=vt.in.DEBUG&&Tt("QueryEngine","Re-using previous result from %s to execute query: %s",u.toString(),Yc(t)),this.Bi(e,g,t,ma(u,-1)))})}Fi(e,t){let o=new Kn(Ta(e));return t.forEach((u,d)=>{cu(e,d)&&(o=o.add(d))}),o}$i(e,t,o,u){if(null===e.limit)return!1;if(o.size!==t.size)return!0;const d="F"===e.limitType?t.last():t.first();return!!d&&(d.hasPendingWrites||d.version.compareTo(u)>0)}Oi(e,t){return Oa()<=vt.in.DEBUG&&Tt("QueryEngine","Using full collection scan to execute query:",Yc(t)),this.Ni.getDocumentsMatchingQuery(e,t,vi.min())}Bi(e,t,o,u){return this.Ni.getDocumentsMatchingQuery(e,o,u).next(d=>(t.forEach(g=>{d=d.insert(g.key,g)}),d))}}class pv{constructor(e,t,o,u){this.persistence=e,this.Li=t,this.It=u,this.Ui=new rn(Dn),this.qi=new fu(d=>Ku(d),El),this.Ki=new Map,this.Gi=e.getRemoteDocumentCache(),this.Cs=e.getTargetCache(),this.Ns=e.getBundleCache(),this.Qi(o)}Qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Ah(this.Gi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Gi.setIndexManager(this.indexManager),this.Li.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ui))}}function Ep(i,e,t,o){return new pv(i,e,t,o)}function em(i,e){return Ip.apply(this,arguments)}function Ip(){return Ip=(0,he.Z)(function*(i,e){const t=Ht(i);return yield t.persistence.runTransaction("Handle user change","readonly",o=>{let u;return t.mutationQueue.getAllMutationBatches(o).next(d=>(u=d,t.Qi(e),t.mutationQueue.getAllMutationBatches(o))).next(d=>{const g=[],D=[];let L=tr();for(const H of u){g.push(H.batchId);for(const Q of H.mutations)L=L.add(Q.key)}for(const H of d){D.push(H.batchId);for(const Q of H.mutations)L=L.add(Q.key)}return t.localDocuments.getDocuments(o,L).next(H=>({ji:H,removedBatchIds:g,addedBatchIds:D}))})})}),Ip.apply(this,arguments)}function gv(i,e){const t=Ht(i);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",o=>{const u=e.batch.keys(),d=t.Gi.newChangeBuffer({trackRemovals:!0});return function(g,D,L,H){const Q=L.batch,_e=Q.keys();let Ge=qe.resolve();return _e.forEach(ct=>{Ge=Ge.next(()=>H.getEntry(D,ct)).next(mt=>{const Yt=L.docVersions.get(ct);vn(null!==Yt),mt.version.compareTo(Yt)<0&&(Q.applyToRemoteDocument(mt,L),mt.isValidDocument()&&(mt.setReadTime(L.commitVersion),H.addEntry(mt)))})}),Ge.next(()=>g.mutationQueue.removeMutationBatch(D,Q))}(t,o,e,d).next(()=>d.apply(o)).next(()=>t.mutationQueue.performConsistencyCheck(o)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(o,u,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(o,function(g){let D=tr();for(let L=0;L<g.mutationResults.length;++L)g.mutationResults[L].transformResults.length>0&&(D=D.add(g.batch.mutations[L].key));return D}(e))).next(()=>t.localDocuments.getDocuments(o,u))})}function or(i){const e=Ht(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Cs.getLastRemoteSnapshotVersion(t))}function tm(i,e){const t=Ht(i),o=e.snapshotVersion;let u=t.Ui;return t.persistence.runTransaction("Apply remote event","readwrite-primary",d=>{const g=t.Gi.newChangeBuffer({trackRemovals:!0});u=t.Ui;const D=[];e.targetChanges.forEach((Q,_e)=>{const Ge=u.get(_e);if(!Ge)return;D.push(t.Cs.removeMatchingKeys(d,Q.removedDocuments,_e).next(()=>t.Cs.addMatchingKeys(d,Q.addedDocuments,_e)));let ct=Ge.withSequenceNumber(d.currentSequenceNumber);var mt,Yt,hn;e.targetMismatches.has(_e)?ct=ct.withResumeToken(_i.EMPTY_BYTE_STRING,Pn.min()).withLastLimboFreeSnapshotVersion(Pn.min()):Q.resumeToken.approximateByteSize()>0&&(ct=ct.withResumeToken(Q.resumeToken,o)),u=u.insert(_e,ct),Yt=ct,hn=Q,(0===(mt=Ge).resumeToken.approximateByteSize()||Yt.snapshotVersion.toMicroseconds()-mt.snapshotVersion.toMicroseconds()>=3e8||hn.addedDocuments.size+hn.modifiedDocuments.size+hn.removedDocuments.size>0)&&D.push(t.Cs.updateTargetData(d,ct))});let L=Gs(),H=tr();if(e.documentUpdates.forEach(Q=>{e.resolvedLimboDocuments.has(Q)&&D.push(t.persistence.referenceDelegate.updateLimboDocument(d,Q))}),D.push(Dp(d,g,e.documentUpdates).next(Q=>{L=Q.Wi,H=Q.zi})),!o.isEqual(Pn.min())){const Q=t.Cs.getLastRemoteSnapshotVersion(d).next(_e=>t.Cs.setTargetsMetadata(d,d.currentSequenceNumber,o));D.push(Q)}return qe.waitFor(D).next(()=>g.apply(d)).next(()=>t.localDocuments.getLocalViewOfDocuments(d,L,H)).next(()=>L)}).then(d=>(t.Ui=u,d))}function Dp(i,e,t){let o=tr(),u=tr();return t.forEach(d=>o=o.add(d)),e.getEntries(i,o).next(d=>{let g=Gs();return t.forEach((D,L)=>{const H=d.get(D);L.isFoundDocument()!==H.isFoundDocument()&&(u=u.add(D)),L.isNoDocument()&&L.version.isEqual(Pn.min())?(e.removeEntry(D,L.readTime),g=g.insert(D,L)):!H.isValidDocument()||L.version.compareTo(H.version)>0||0===L.version.compareTo(H.version)&&H.hasPendingWrites?(e.addEntry(L),g=g.insert(D,L)):Tt("LocalStore","Ignoring outdated watch update for ",D,". Current version:",H.version," Watch version:",L.version)}),{Wi:g,zi:u}})}function nm(i,e){const t=Ht(i);return t.persistence.runTransaction("Get next mutation batch","readonly",o=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(o,e)))}function Tc(i,e){const t=Ht(i);return t.persistence.runTransaction("Allocate target","readwrite",o=>{let u;return t.Cs.getTargetData(o,e).next(d=>d?(u=d,qe.resolve(u)):t.Cs.allocateTargetId(o).next(g=>(u=new il(e,g,0,o.currentSequenceNumber),t.Cs.addTargetData(o,u).next(()=>u))))}).then(o=>{const u=t.Ui.get(o.targetId);return(null===u||o.snapshotVersion.compareTo(u.snapshotVersion)>0)&&(t.Ui=t.Ui.insert(o.targetId,o),t.qi.set(e,o.targetId)),o})}function Sc(i,e,t){return Rh.apply(this,arguments)}function Rh(){return Rh=(0,he.Z)(function*(i,e,t){const o=Ht(i),u=o.Ui.get(e),d=t?"readwrite":"readwrite-primary";try{t||(yield o.persistence.runTransaction("Release target",d,g=>o.persistence.referenceDelegate.removeTarget(g,u)))}catch(g){if(!Vo(g))throw g;Tt("LocalStore",`Failed to update sequence numbers for target ${e}: ${g}`)}o.Ui=o.Ui.remove(e),o.qi.delete(u.target)}),Rh.apply(this,arguments)}function Oh(i,e,t){const o=Ht(i);let u=Pn.min(),d=tr();return o.persistence.runTransaction("Execute query","readonly",g=>function(D,L,H){const Q=Ht(D),_e=Q.qi.get(H);return void 0!==_e?qe.resolve(Q.Ui.get(_e)):Q.Cs.getTargetData(L,H)}(o,g,Ts(e)).next(D=>{if(D)return u=D.lastLimboFreeSnapshotVersion,o.Cs.getMatchingKeysForTargetId(g,D.targetId).next(L=>{d=L})}).next(()=>o.Li.getDocumentsMatchingQuery(g,e,t?u:Pn.min(),t?d:tr())).next(D=>(im(o,Qc(e),D),{documents:D,Hi:d})))}function Cp(i,e){const t=Ht(i),o=Ht(t.Cs),u=t.Ui.get(e);return u?Promise.resolve(u.target):t.persistence.runTransaction("Get target data","readonly",d=>o.se(d,e).next(g=>g?g.target:null))}function rm(i,e){const t=Ht(i),o=t.Ki.get(e)||Pn.min();return t.persistence.runTransaction("Get new document changes","readonly",u=>t.Gi.getAllFromCollectionGroup(u,e,ma(o,-1),Number.MAX_SAFE_INTEGER)).then(u=>(im(t,e,u),u))}function im(i,e,t){let o=Pn.min();t.forEach((u,d)=>{d.readTime.compareTo(o)>0&&(o=d.readTime)}),i.Ki.set(e,o)}function Nh(){return Nh=(0,he.Z)(function*(i,e,t,o){const u=Ht(i);let d=tr(),g=Gs();for(const H of t){const Q=e.Ji(H.metadata.name);H.document&&(d=d.add(Q));const _e=e.Yi(H);_e.setReadTime(e.Xi(H.metadata.readTime)),g=g.insert(Q,_e)}const D=u.Gi.newChangeBuffer({trackRemovals:!0}),L=yield Tc(u,(H=o,Ts(Mu(mr.fromString(`__bundle__/docs/${H}`)))));var H;return u.persistence.runTransaction("Apply bundle documents","readwrite",H=>Dp(H,D,g).next(Q=>(D.apply(H),Q)).next(Q=>u.Cs.removeMatchingKeysForTargetId(H,L.targetId).next(()=>u.Cs.addMatchingKeys(H,d,L.targetId)).next(()=>u.localDocuments.getLocalViewOfDocuments(H,Q.Wi,Q.zi)).next(()=>Q.Wi)))}),Nh.apply(this,arguments)}function sm(i,e){return Vu.apply(this,arguments)}function Vu(){return Vu=(0,he.Z)(function*(i,e,t=tr()){const o=yield Tc(i,Ts(np(e.bundledQuery))),u=Ht(i);return u.persistence.runTransaction("Save named query","readwrite",d=>{const g=zs(e.readTime);if(o.snapshotVersion.compareTo(g)>=0)return u.Ns.saveNamedQuery(d,e);const D=o.withResumeToken(_i.EMPTY_BYTE_STRING,g);return u.Ui=u.Ui.insert(D.targetId,D),u.Cs.updateTargetData(d,D).next(()=>u.Cs.removeMatchingKeysForTargetId(d,o.targetId)).next(()=>u.Cs.addMatchingKeys(d,t,o.targetId)).next(()=>u.Ns.saveNamedQuery(d,e))})}),Vu.apply(this,arguments)}function om(i,e){return`firestore_clients_${i}_${e}`}function Ph(i,e,t){let o=`firestore_mutations_${i}_${t}`;return e.isAuthenticated()&&(o+=`_${e.uid}`),o}function vd(i,e){return`firestore_targets_${i}_${e}`}class kh{constructor(e,t,o,u){this.user=e,this.batchId=t,this.state=o,this.error=u}static Zi(e,t,o){const u=JSON.parse(o);let d,g="object"==typeof u&&-1!==["pending","acknowledged","rejected"].indexOf(u.state)&&(void 0===u.error||"object"==typeof u.error);return g&&u.error&&(g="string"==typeof u.error.message&&"string"==typeof u.error.code,g&&(d=new Et(u.error.code,u.error.message))),g?new kh(e,t,u.state,d):(Pr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${o}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Fh{constructor(e,t,o){this.targetId=e,this.state=t,this.error=o}static Zi(e,t){const o=JSON.parse(t);let u,d="object"==typeof o&&-1!==["not-current","current","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return d&&o.error&&(d="string"==typeof o.error.message&&"string"==typeof o.error.code,d&&(u=new Et(o.error.code,o.error.message))),d?new Fh(e,o.state,u):(Pr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class bp{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Zi(e,t){const o=JSON.parse(t);let u="object"==typeof o&&o.activeTargetIds instanceof Array,d=_c();for(let g=0;u&&g<o.activeTargetIds.length;++g)u=It(o.activeTargetIds[g]),d=d.add(o.activeTargetIds[g]);return u?new bp(e,d):(Pr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class am{constructor(e,t){this.clientId=e,this.onlineState=t}static Zi(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new am(t.clientId,t.onlineState):(Pr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class Tp{constructor(){this.activeTargetIds=_c()}er(e){this.activeTargetIds=this.activeTargetIds.add(e)}nr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}tr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Lh{constructor(e,t,o,u,d){this.window=e,this.Hs=t,this.persistenceKey=o,this.sr=u,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ir=this.rr.bind(this),this.ur=new rn(Dn),this.started=!1,this.cr=[];const g=o.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=d,this.ar=om(this.persistenceKey,this.sr),this.hr=`firestore_sequence_number_${this.persistenceKey}`,this.ur=this.ur.insert(this.sr,new Tp),this.lr=new RegExp(`^firestore_clients_${g}_([^_]*)$`),this.dr=new RegExp(`^firestore_mutations_${g}_(\\d+)(?:_(.*))?$`),this._r=new RegExp(`^firestore_targets_${g}_(\\d+)$`),this.wr=`firestore_online_state_${this.persistenceKey}`,this.mr=function(D){return`firestore_bundle_loaded_v2_${D}`}(this.persistenceKey),this.window.addEventListener("storage",this.ir)}static C(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,he.Z)(function*(){const t=yield e.syncEngine.vi();for(const u of t){if(u===e.sr)continue;const d=e.getItem(om(e.persistenceKey,u));if(d){const g=bp.Zi(u,d);g&&(e.ur=e.ur.insert(g.clientId,g))}}e.gr();const o=e.storage.getItem(e.wr);if(o){const u=e.yr(o);u&&e.pr(u)}for(const u of e.cr)e.rr(u);e.cr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.hr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ir(this.ur)}isActiveQueryTarget(e){let t=!1;return this.ur.forEach((o,u)=>{u.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Tr(e,"pending")}updateMutationState(e,t,o){this.Tr(e,t,o),this.Er(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const o=this.storage.getItem(vd(this.persistenceKey,e));if(o){const u=Fh.Zi(e,o);u&&(t=u.state)}}return this.Ar.er(e),this.gr(),t}removeLocalQueryTarget(e){this.Ar.nr(e),this.gr()}isLocalQueryTarget(e){return this.Ar.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(vd(this.persistenceKey,e))}updateQueryState(e,t,o){this.Rr(e,t,o)}handleUserChange(e,t,o){t.forEach(u=>{this.Er(u)}),this.currentUser=e,o.forEach(u=>{this.addPendingMutation(u)})}setOnlineState(e){this.br(e)}notifyBundleLoaded(e){this.Pr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ir),this.removeItem(this.ar),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Tt("SharedClientState","READ",e,t),t}setItem(e,t){Tt("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Tt("SharedClientState","REMOVE",e),this.storage.removeItem(e)}rr(e){var t=this;const o=e;if(o.storageArea===this.storage){if(Tt("SharedClientState","EVENT",o.key,o.newValue),o.key===this.ar)return void Pr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Hs.enqueueRetryable((0,he.Z)(function*(){if(t.started){if(null!==o.key)if(t.lr.test(o.key)){if(null==o.newValue){const u=t.vr(o.key);return t.Vr(u,null)}{const u=t.Sr(o.key,o.newValue);if(u)return t.Vr(u.clientId,u)}}else if(t.dr.test(o.key)){if(null!==o.newValue){const u=t.Dr(o.key,o.newValue);if(u)return t.Cr(u)}}else if(t._r.test(o.key)){if(null!==o.newValue){const u=t.Nr(o.key,o.newValue);if(u)return t.kr(u)}}else if(o.key===t.wr){if(null!==o.newValue){const u=t.yr(o.newValue);if(u)return t.pr(u)}}else if(o.key===t.hr){const u=function(d){let g=te.at;if(null!=d)try{const D=JSON.parse(d);vn("number"==typeof D),g=D}catch(D){Pr("SharedClientState","Failed to read sequence number from WebStorage",D)}return g}(o.newValue);u!==te.at&&t.sequenceNumberHandler(u)}else if(o.key===t.mr){const u=t.Mr(o.newValue);yield Promise.all(u.map(d=>t.syncEngine.Or(d)))}}else t.cr.push(o)}))}}get Ar(){return this.ur.get(this.sr)}gr(){this.setItem(this.ar,this.Ar.tr())}Tr(e,t,o){const u=new kh(this.currentUser,e,t,o),d=Ph(this.persistenceKey,this.currentUser,e);this.setItem(d,u.tr())}Er(e){const t=Ph(this.persistenceKey,this.currentUser,e);this.removeItem(t)}br(e){this.storage.setItem(this.wr,JSON.stringify({clientId:this.sr,onlineState:e}))}Rr(e,t,o){const u=vd(this.persistenceKey,e),d=new Fh(e,t,o);this.setItem(u,d.tr())}Pr(e){const t=JSON.stringify(Array.from(e));this.setItem(this.mr,t)}vr(e){const t=this.lr.exec(e);return t?t[1]:null}Sr(e,t){const o=this.vr(e);return bp.Zi(o,t)}Dr(e,t){const o=this.dr.exec(e),u=Number(o[1]);return kh.Zi(new zi(void 0!==o[2]?o[2]:null),u,t)}Nr(e,t){const o=this._r.exec(e),u=Number(o[1]);return Fh.Zi(u,t)}yr(e){return am.Zi(e)}Mr(e){return JSON.parse(e)}Cr(e){var t=this;return(0,he.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Fr(e.batchId,e.state,e.error);Tt("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}kr(e){return this.syncEngine.$r(e.targetId,e.state,e.error)}Vr(e,t){const o=t?this.ur.insert(e,t):this.ur.remove(e),u=this.Ir(this.ur),d=this.Ir(o),g=[],D=[];return d.forEach(L=>{u.has(L)||g.push(L)}),u.forEach(L=>{d.has(L)||D.push(L)}),this.syncEngine.Br(g,D).then(()=>{this.ur=o})}pr(e){this.ur.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ir(e){let t=_c();return e.forEach((o,u)=>{t=t.unionWith(u.activeTargetIds)}),t}}class mv{constructor(){this.Lr=new Tp,this.Ur={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,o){}addLocalQueryTarget(e){return this.Lr.er(e),this.Ur[e]||"not-current"}updateQueryState(e,t,o){this.Ur[e]=t}removeLocalQueryTarget(e){this.Lr.nr(e)}isLocalQueryTarget(e){return this.Lr.activeTargetIds.has(e)}clearQueryState(e){delete this.Ur[e]}getAllActiveQueryTargets(){return this.Lr.activeTargetIds}isActiveQueryTarget(e){return this.Lr.activeTargetIds.has(e)}start(){return this.Lr=new Tp,Promise.resolve()}handleUserChange(e,t,o){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class yv{qr(e){}shutdown(){}}class zl{constructor(){this.Kr=()=>this.Gr(),this.Qr=()=>this.jr(),this.Wr=[],this.zr()}qr(e){this.Wr.push(e)}shutdown(){window.removeEventListener("online",this.Kr),window.removeEventListener("offline",this.Qr)}zr(){window.addEventListener("online",this.Kr),window.addEventListener("offline",this.Qr)}Gr(){Tt("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Wr)e(0)}jr(){Tt("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Wr)e(1)}static C(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const vv={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class um{constructor(e){this.Hr=e.Hr,this.Jr=e.Jr}Yr(e){this.Xr=e}Zr(e){this.eo=e}onMessage(e){this.no=e}close(){this.Jr()}send(e){this.Hr(e)}so(){this.Xr()}io(e){this.eo(e)}ro(e){this.no(e)}}class Vh extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.oo=(e.ssl?"https":"http")+"://"+e.host,this.uo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}co(e,t,o,u,d){const g=this.ao(e,t);Tt("RestConnection","Sending: ",g,o);const D={};return this.ho(D,u,d),this.lo(e,g,D,o).then(L=>(Tt("RestConnection","Received: ",L),L),L=>{throw Fo("RestConnection",`${e} failed with error: `,L,"url: ",g,"request:",o),L})}fo(e,t,o,u,d,g){return this.co(e,t,o,u,d)}ho(e,t,o){e["X-Goog-Api-Client"]="gl-js/ fire/"+ta,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((u,d)=>e[d]=u),o&&o.headers.forEach((u,d)=>e[d]=u)}ao(e,t){return`${this.oo}/v1/${t}:${vv[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}lo(e,t,o,u){return new Promise((d,g)=>{const D=new Ma;D.listenOnce(ho.COMPLETE,()=>{try{switch(D.getLastErrorCode()){case Gi.NO_ERROR:const H=D.getResponseJson();Tt("Connection","XHR received:",JSON.stringify(H)),d(H);break;case Gi.TIMEOUT:Tt("Connection",'RPC "'+e+'" timed out'),g(new Et(Qe.DEADLINE_EXCEEDED,"Request time out"));break;case Gi.HTTP_ERROR:const Q=D.getStatus();if(Tt("Connection",'RPC "'+e+'" failed with status:',Q,"response text:",D.getResponseText()),Q>0){const _e=D.getResponseJson().error;if(_e&&_e.status&&_e.message){const Ge=function(ct){const mt=ct.toLowerCase().replace(/_/g,"-");return Object.values(Qe).indexOf(mt)>=0?mt:Qe.UNKNOWN}(_e.status);g(new Et(Ge,_e.message))}else g(new Et(Qe.UNKNOWN,"Server responded with status "+D.getStatus()))}else g(new Et(Qe.UNAVAILABLE,"Connection failed."));break;default:Qt()}}finally{Tt("Connection",'RPC "'+e+'" completed.')}});const L=JSON.stringify(u);D.send(t,"POST",L,o,15)})}_o(e,t,o){const u=[this.oo,"/","google.firestore.v1.Firestore","/",e,"/channel"],d=Hi(),g=xi(),D={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(D.xmlHttpFactory=new ns({})),this.ho(D.initMessageHeaders,t,o),(0,tt.uI)()||(0,tt.b$)()||(0,tt.d)()||(0,tt.w1)()||(0,tt.Mn)()||(0,tt.ru)()||(D.httpHeadersOverwriteParam="$httpHeaders");const L=u.join("");Tt("Connection","Creating WebChannel: "+L,D);const H=d.createWebChannel(L,D);let Q=!1,_e=!1;const Ge=new um({Hr:mt=>{_e?Tt("Connection","Not sending because WebChannel is closed:",mt):(Q||(Tt("Connection","Opening WebChannel transport."),H.open(),Q=!0),Tt("Connection","WebChannel sending:",mt),H.send(mt))},Jr:()=>H.close()}),ct=(mt,Yt,hn)=>{mt.listen(Yt,Gr=>{try{hn(Gr)}catch(ci){setTimeout(()=>{throw ci},0)}})};return ct(H,To.EventType.OPEN,()=>{_e||Tt("Connection","WebChannel transport opened.")}),ct(H,To.EventType.CLOSE,()=>{_e||(_e=!0,Tt("Connection","WebChannel transport closed"),Ge.io())}),ct(H,To.EventType.ERROR,mt=>{_e||(_e=!0,Fo("Connection","WebChannel transport errored:",mt),Ge.io(new Et(Qe.UNAVAILABLE,"The operation could not be completed")))}),ct(H,To.EventType.MESSAGE,mt=>{var Yt;if(!_e){const hn=mt.data[0];vn(!!hn);const Gr=hn,ci=Gr.error||(null===(Yt=Gr[0])||void 0===Yt?void 0:Yt.error);if(ci){Tt("Connection","WebChannel received error:",ci);const jr=ci.status;let xs=function(Ei){const so=Yi[Ei];if(void 0!==so)return Rl(so)}(jr),di=ci.message;void 0===xs&&(xs=Qe.INTERNAL,di="Unknown error status: "+jr+" with message "+ci.message),_e=!0,Ge.io(new Et(xs,di)),H.close()}else Tt("Connection","WebChannel received:",hn),Ge.ro(hn)}}),ct(g,bo.STAT_EVENT,mt=>{mt.stat===li.PROXY?Tt("Connection","Detected buffering proxy"):mt.stat===li.NOPROXY&&Tt("Connection","Detected no buffering proxy")}),setTimeout(()=>{Ge.so()},0),Ge}}function lm(){return typeof window<"u"?window:null}function _d(){return typeof document<"u"?document:null}function wd(i){return new ad(i,!0)}class Sp{constructor(e,t,o=1e3,u=1.5,d=6e4){this.Hs=e,this.timerId=t,this.wo=o,this.mo=u,this.yo=d,this.po=0,this.Io=null,this.To=Date.now(),this.reset()}reset(){this.po=0}Eo(){this.po=this.yo}Ao(e){this.cancel();const t=Math.floor(this.po+this.Ro()),o=Math.max(0,Date.now()-this.To),u=Math.max(0,t-o);u>0&&Tt("ExponentialBackoff",`Backing off for ${u} ms (base delay: ${this.po} ms, delay with jitter: ${t} ms, last attempt: ${o} ms ago)`),this.Io=this.Hs.enqueueAfterDelay(this.timerId,u,()=>(this.To=Date.now(),e())),this.po*=this.mo,this.po<this.wo&&(this.po=this.wo),this.po>this.yo&&(this.po=this.yo)}bo(){null!==this.Io&&(this.Io.skipDelay(),this.Io=null)}cancel(){null!==this.Io&&(this.Io.cancel(),this.Io=null)}Ro(){return(Math.random()-.5)*this.po}}class cm{constructor(e,t,o,u,d,g,D,L){this.Hs=e,this.Po=o,this.vo=u,this.Vo=d,this.authCredentialsProvider=g,this.appCheckCredentialsProvider=D,this.listener=L,this.state=0,this.So=0,this.Do=null,this.Co=null,this.stream=null,this.xo=new Sp(e,t)}No(){return 1===this.state||5===this.state||this.ko()}ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Mo()}stop(){var e=this;return(0,he.Z)(function*(){e.No()&&(yield e.close(0))})()}Oo(){this.state=0,this.xo.reset()}Fo(){this.ko()&&null===this.Do&&(this.Do=this.Hs.enqueueAfterDelay(this.Po,6e4,()=>this.$o()))}Bo(e){this.Lo(),this.stream.send(e)}$o(){var e=this;return(0,he.Z)(function*(){if(e.ko())return e.close(0)})()}Lo(){this.Do&&(this.Do.cancel(),this.Do=null)}Uo(){this.Co&&(this.Co.cancel(),this.Co=null)}close(e,t){var o=this;return(0,he.Z)(function*(){o.Lo(),o.Uo(),o.xo.cancel(),o.So++,4!==e?o.xo.reset():t&&t.code===Qe.RESOURCE_EXHAUSTED?(Pr(t.toString()),Pr("Using maximum backoff delay to prevent overloading the backend."),o.xo.Eo()):t&&t.code===Qe.UNAUTHENTICATED&&3!==o.state&&(o.authCredentialsProvider.invalidateToken(),o.appCheckCredentialsProvider.invalidateToken()),null!==o.stream&&(o.qo(),o.stream.close(),o.stream=null),o.state=e,yield o.listener.Zr(t)})()}qo(){}auth(){this.state=1;const e=this.Ko(this.So),t=this.So;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([o,u])=>{this.So===t&&this.Go(o,u)},o=>{e(()=>{const u=new Et(Qe.UNKNOWN,"Fetching auth token failed: "+o.message);return this.Qo(u)})})}Go(e,t){const o=this.Ko(this.So);this.stream=this.jo(e,t),this.stream.Yr(()=>{o(()=>(this.state=2,this.Co=this.Hs.enqueueAfterDelay(this.vo,1e4,()=>(this.ko()&&(this.state=3),Promise.resolve())),this.listener.Yr()))}),this.stream.Zr(u=>{o(()=>this.Qo(u))}),this.stream.onMessage(u=>{o(()=>this.onMessage(u))})}Mo(){var e=this;this.state=5,this.xo.Ao((0,he.Z)(function*(){e.state=0,e.start()}))}Qo(e){return Tt("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Ko(e){return t=>{this.Hs.enqueueAndForget(()=>this.So===e?t():(Tt("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class _v extends cm{constructor(e,t,o,u,d,g){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,o,u,g),this.It=d}jo(e,t){return this.Vo._o("Listen",e,t)}onMessage(e){this.xo.reset();const t=function On(i,e){let t;if("targetChange"in e){const o="NO_CHANGE"===(L=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===L?1:"REMOVE"===L?2:"CURRENT"===L?3:"RESET"===L?4:Qt(),u=e.targetChange.targetIds||[],d=function(L,H){return L.gt?(vn(void 0===H||"string"==typeof H),_i.fromBase64String(H||"")):(vn(void 0===H||H instanceof Uint8Array),_i.fromUint8Array(H||new Uint8Array))}(i,e.targetChange.resumeToken),g=e.targetChange.cause,D=g&&function(L){const H=void 0===L.code?Qe.UNKNOWN:Rl(L.code);return new Et(H,L.message||"")}(g);t=new el(o,u,d,D||null)}else if("documentChange"in e){const o=e.documentChange,u=E(i,o.document.name),d=zs(o.document.updateTime),g=new bs({mapValue:{fields:o.document.fields}}),D=Ci.newFoundDocument(u,d,g);t=new rs(o.targetIds||[],o.removedTargetIds||[],D.key,D)}else if("documentDelete"in e){const o=e.documentDelete,u=E(i,o.document),d=o.readTime?zs(o.readTime):Pn.min(),g=Ci.newNoDocument(u,d);t=new rs([],o.removedTargetIds||[],g.key,g)}else if("documentRemove"in e){const o=e.documentRemove,u=E(i,o.document);t=new rs([],o.removedTargetIds||[],u,null)}else{if(!("filter"in e))return Qt();{const o=e.filter,d=new Nu(o.count||0);t=new Nl(o.targetId,d)}}var L;return t}(this.It,e),o=function(u){if(!("targetChange"in u))return Pn.min();const d=u.targetChange;return d.targetIds&&d.targetIds.length?Pn.min():d.readTime?zs(d.readTime):Pn.min()}(e);return this.listener.Wo(t,o)}zo(e){const t={};t.database=Te(this.It),t.addTarget=function(u,d){let g;const D=d.target;return g=Il(D)?{documents:Ec(u,D)}:{query:tl(u,D)},g.targetId=d.targetId,d.resumeToken.approximateByteSize()>0?g.resumeToken=wc(u,d.resumeToken):d.snapshotVersion.compareTo(Pn.min())>0&&(g.readTime=Pl(u,d.snapshotVersion.toTimestamp())),g}(this.It,e);const o=function fh(i,e){const t=function(o,u){switch(u){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Qt()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);o&&(t.labels=o),this.Bo(t)}Ho(e){const t={};t.database=Te(this.It),t.removeTarget=e,this.Bo(t)}}class wv extends cm{constructor(e,t,o,u,d,g){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,o,u,g),this.It=d,this.Jo=!1}get Yo(){return this.Jo}start(){this.Jo=!1,this.lastStreamToken=void 0,super.start()}qo(){this.Jo&&this.Xo([])}jo(e,t){return this.Vo._o("Write",e,t)}onMessage(e){if(vn(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Jo){this.xo.reset();const t=function kl(i,e){return i&&i.length>0?(vn(void 0!==e),i.map(t=>function(o,u){let d=zs(o.updateTime?o.updateTime:u);return d.isEqual(Pn.min())&&(d=zs(u)),new gc(d,o.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),o=zs(e.commitTime);return this.listener.Zo(o,t)}return vn(!e.writeResults||0===e.writeResults.length),this.Jo=!0,this.listener.tu()}eu(){const e={};e.database=Te(this.It),this.Bo(e)}Xo(e){const t={streamToken:this.lastStreamToken,writes:e.map(o=>is(this.It,o))};this.Bo(t)}}class dm extends class{}{constructor(e,t,o,u){super(),this.authCredentials=e,this.appCheckCredentials=t,this.Vo=o,this.It=u,this.nu=!1}su(){if(this.nu)throw new Et(Qe.FAILED_PRECONDITION,"The client has already been terminated.")}co(e,t,o){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,d])=>this.Vo.co(e,t,o,u,d)).catch(u=>{throw"FirebaseError"===u.name?(u.code===Qe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new Et(Qe.UNKNOWN,u.toString())})}fo(e,t,o,u){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([d,g])=>this.Vo.fo(e,t,o,d,g,u)).catch(d=>{throw"FirebaseError"===d.name?(d.code===Qe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new Et(Qe.UNKNOWN,d.toString())})}terminate(){this.nu=!0}}class Ev{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.iu=0,this.ru=null,this.ou=!0}uu(){0===this.iu&&(this.cu("Unknown"),this.ru=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ru=null,this.au("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve())))}hu(e){"Online"===this.state?this.cu("Unknown"):(this.iu++,this.iu>=1&&(this.lu(),this.au(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.cu("Offline")))}set(e){this.lu(),this.iu=0,"Online"===e&&(this.ou=!1),this.cu(e)}cu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}au(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ou?(Pr(t),this.ou=!1):Tt("OnlineStateTracker",t)}lu(){null!==this.ru&&(this.ru.cancel(),this.ru=null)}}class hm{constructor(e,t,o,u,d){var g=this;this.localStore=e,this.datastore=t,this.asyncQueue=o,this.remoteSyncer={},this.fu=[],this.du=new Map,this._u=new Set,this.wu=[],this.mu=d,this.mu.qr(D=>{o.enqueueAndForget((0,he.Z)(function*(){var L;Mo(g)&&(Tt("RemoteStore","Restarting streams for network reachability change."),yield(L=(0,he.Z)(function*(H){const Q=Ht(H);Q._u.add(4),yield Id(Q),Q.gu.set("Unknown"),Q._u.delete(4),yield Ac(Q)}),function(H){return L.apply(this,arguments)})(g))}))}),this.gu=new Ev(o,u)}}function Ac(i){return Ed.apply(this,arguments)}function Ed(){return Ed=(0,he.Z)(function*(i){if(Mo(i))for(const e of i.wu)yield e(!0)}),Ed.apply(this,arguments)}function Id(i){return Dd.apply(this,arguments)}function Dd(){return Dd=(0,he.Z)(function*(i){for(const e of i.wu)yield e(!1)}),Dd.apply(this,arguments)}function Uh(i,e){const t=Ht(i);t.du.has(e.targetId)||(t.du.set(e.targetId,e),xc(t)?jh(t):Ad(t).ko()&&al(t,e))}function Bh(i,e){const t=Ht(i),o=Ad(t);t.du.delete(e),o.ko()&&Ap(t,e),0===t.du.size&&(o.ko()?o.Fo():Mo(t)&&t.gu.set("Unknown"))}function al(i,e){i.yu.Ot(e.targetId),Ad(i).zo(e)}function Ap(i,e){i.yu.Ot(e),Ad(i).Ho(e)}function jh(i){i.yu=new Qa({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),se:e=>i.du.get(e)||null}),Ad(i).start(),i.gu.uu()}function xc(i){return Mo(i)&&!Ad(i).No()&&i.du.size>0}function Mo(i){return 0===Ht(i)._u.size}function xp(i){i.yu=void 0}function Iv(i){return Cd.apply(this,arguments)}function Cd(){return Cd=(0,he.Z)(function*(i){i.du.forEach((e,t)=>{al(i,e)})}),Cd.apply(this,arguments)}function Uu(i,e){return bd.apply(this,arguments)}function bd(){return bd=(0,he.Z)(function*(i,e){xp(i),xc(i)?(i.gu.hu(e),jh(i)):i.gu.set("Unknown")}),bd.apply(this,arguments)}function fm(i,e,t){return Td.apply(this,arguments)}function Td(){return Td=(0,he.Z)(function*(i,e,t){if(i.gu.set("Online"),e instanceof el&&2===e.state&&e.cause)try{yield(o=(0,he.Z)(function*(u,d){const g=d.cause;for(const D of d.targetIds)u.du.has(D)&&(yield u.remoteSyncer.rejectListen(D,g),u.du.delete(D),u.yu.removeTarget(D))}),function(u,d){return o.apply(this,arguments)})(i,e)}catch(o){Tt("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),o),yield Mp(i,o)}else if(e instanceof rs?i.yu.Gt(e):e instanceof Nl?i.yu.Yt(e):i.yu.Wt(e),!t.isEqual(Pn.min()))try{const o=yield or(i.localStore);t.compareTo(o)>=0&&(yield function(u,d){const g=u.yu.te(d);return g.targetChanges.forEach((D,L)=>{if(D.resumeToken.approximateByteSize()>0){const H=u.du.get(L);H&&u.du.set(L,H.withResumeToken(D.resumeToken,d))}}),g.targetMismatches.forEach(D=>{const L=u.du.get(D);if(!L)return;u.du.set(D,L.withResumeToken(_i.EMPTY_BYTE_STRING,L.snapshotVersion)),Ap(u,D);const H=new il(L.target,D,1,L.sequenceNumber);al(u,H)}),u.remoteSyncer.applyRemoteEvent(g)}(i,t))}catch(o){Tt("RemoteStore","Failed to raise snapshot:",o),yield Mp(i,o)}var o}),Td.apply(this,arguments)}function Mp(i,e,t){return $h.apply(this,arguments)}function $h(){return $h=(0,he.Z)(function*(i,e,t){if(!Vo(e))throw e;i._u.add(1),yield Id(i),i.gu.set("Offline"),t||(t=()=>or(i.localStore)),i.asyncQueue.enqueueRetryable((0,he.Z)(function*(){Tt("RemoteStore","Retrying IndexedDB access"),yield t(),i._u.delete(1),yield Ac(i)}))}),$h.apply(this,arguments)}function Dv(i,e){return e().catch(t=>Mp(i,t,e))}function Bu(i){return Mc.apply(this,arguments)}function Mc(){return Mc=(0,he.Z)(function*(i){const e=Ht(i),t=Wl(e);let o=e.fu.length>0?e.fu[e.fu.length-1].batchId:-1;for(;Rp(e);)try{const u=yield nm(e.localStore,o);if(null===u){0===e.fu.length&&t.Fo();break}o=u.batchId,Op(e,u)}catch(u){yield Mp(e,u)}Hh(e)&&Cv(e)}),Mc.apply(this,arguments)}function Rp(i){return Mo(i)&&i.fu.length<10}function Op(i,e){i.fu.push(e);const t=Wl(i);t.ko()&&t.Yo&&t.Xo(e.mutations)}function Hh(i){return Mo(i)&&!Wl(i).No()&&i.fu.length>0}function Cv(i){Wl(i).start()}function bv(i){return Np.apply(this,arguments)}function Np(){return Np=(0,he.Z)(function*(i){Wl(i).eu()}),Np.apply(this,arguments)}function Tv(i){return Pp.apply(this,arguments)}function Pp(){return Pp=(0,he.Z)(function*(i){const e=Wl(i);for(const t of i.fu)e.Xo(t.mutations)}),Pp.apply(this,arguments)}function pm(i,e,t){return gm.apply(this,arguments)}function gm(){return gm=(0,he.Z)(function*(i,e,t){const o=i.fu.shift(),u=Fl.from(o,e,t);yield Dv(i,()=>i.remoteSyncer.applySuccessfulWrite(u)),yield Bu(i)}),gm.apply(this,arguments)}function Sv(i,e){return mm.apply(this,arguments)}function mm(){return mm=(0,he.Z)(function*(i,e){var t;e&&Wl(i).Yo&&(yield(t=(0,he.Z)(function*(o,u){if(sd(d=u.code)&&d!==Qe.ABORTED){const g=o.fu.shift();Wl(o).Oo(),yield Dv(o,()=>o.remoteSyncer.rejectFailedWrite(g.batchId,u)),yield Bu(o)}var d}),function(o,u){return t.apply(this,arguments)})(i,e)),Hh(i)&&Cv(i)}),mm.apply(this,arguments)}function kp(i,e){return Gh.apply(this,arguments)}function Gh(){return Gh=(0,he.Z)(function*(i,e){const t=Ht(i);t.asyncQueue.verifyOperationInProgress(),Tt("RemoteStore","RemoteStore received new credentials");const o=Mo(t);t._u.add(3),yield Id(t),o&&t.gu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t._u.delete(3),yield Ac(t)}),Gh.apply(this,arguments)}function Fp(i,e){return Sd.apply(this,arguments)}function Sd(){return Sd=(0,he.Z)(function*(i,e){const t=Ht(i);e?(t._u.delete(2),yield Ac(t)):e||(t._u.add(2),yield Id(t),t.gu.set("Unknown"))}),Sd.apply(this,arguments)}function Ad(i){return i.pu||(i.pu=function(e,t,o){const u=Ht(e);return u.su(),new _v(t,u.Vo,u.authCredentials,u.appCheckCredentials,u.It,o)}(i.datastore,i.asyncQueue,{Yr:Iv.bind(null,i),Zr:Uu.bind(null,i),Wo:fm.bind(null,i)}),i.wu.push(function(){var e=(0,he.Z)(function*(t){t?(i.pu.Oo(),xc(i)?jh(i):i.gu.set("Unknown")):(yield i.pu.stop(),xp(i))});return function(t){return e.apply(this,arguments)}}())),i.pu}function Wl(i){return i.Iu||(i.Iu=function(e,t,o){const u=Ht(e);return u.su(),new wv(t,u.Vo,u.authCredentials,u.appCheckCredentials,u.It,o)}(i.datastore,i.asyncQueue,{Yr:bv.bind(null,i),Zr:Sv.bind(null,i),tu:Tv.bind(null,i),Zo:pm.bind(null,i)}),i.wu.push(function(){var e=(0,he.Z)(function*(t){t?(i.Iu.Oo(),yield Bu(i)):(yield i.Iu.stop(),i.fu.length>0&&(Tt("RemoteStore",`Stopping write stream with ${i.fu.length} pending writes`),i.fu=[]))});return function(t){return e.apply(this,arguments)}}())),i.Iu}class ym{constructor(e,t,o,u,d){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=o,this.op=u,this.removalCallback=d,this.deferred=new Wi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(g=>{})}static createAndSchedule(e,t,o,u,d){const g=Date.now()+o,D=new ym(e,t,g,u,d);return D.start(o),D}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Et(Qe.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function xd(i,e){if(Pr("AsyncQueue",`${e}: ${i}`),Vo(i))return new Et(Qe.UNAVAILABLE,`${e}: ${i}`);throw i}class Md{constructor(e){this.comparator=e?(t,o)=>e(t,o)||zt.comparator(t.key,o.key):(t,o)=>zt.comparator(t.key,o.key),this.keyedMap=mc(),this.sortedSet=new rn(this.comparator)}static emptySet(e){return new Md(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,o)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Md)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),o=e.sortedSet.getIterator();for(;t.hasNext();){const u=t.getNext().key,d=o.getNext().key;if(!u.isEqual(d))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const o=new Md;return o.comparator=this.comparator,o.keyedMap=e,o.sortedSet=t,o}}class Av{constructor(){this.Tu=new rn(zt.comparator)}track(e){const t=e.doc.key,o=this.Tu.get(t);o?0!==e.type&&3===o.type?this.Tu=this.Tu.insert(t,e):3===e.type&&1!==o.type?this.Tu=this.Tu.insert(t,{type:o.type,doc:e.doc}):2===e.type&&2===o.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===o.type?this.Tu=this.Tu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===o.type?this.Tu=this.Tu.remove(t):1===e.type&&2===o.type?this.Tu=this.Tu.insert(t,{type:1,doc:o.doc}):0===e.type&&1===o.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):Qt():this.Tu=this.Tu.insert(t,e)}Eu(){const e=[];return this.Tu.inorderTraversal((t,o)=>{e.push(o)}),e}}class Rd{constructor(e,t,o,u,d,g,D,L){this.query=e,this.docs=t,this.oldDocs=o,this.docChanges=u,this.mutatedKeys=d,this.fromCache=g,this.syncStateChanged=D,this.excludesMetadataChanges=L}static fromInitialDocuments(e,t,o,u){const d=[];return t.forEach(g=>{d.push({type:0,doc:g})}),new Rd(e,t,Md.emptySet(t),d,o,u,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Cl(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,o=e.docChanges;if(t.length!==o.length)return!1;for(let u=0;u<t.length;u++)if(t[u].type!==o[u].type||!t[u].doc.isEqual(o[u].doc))return!1;return!0}}class l0{constructor(){this.Au=void 0,this.listeners=[]}}class c0{constructor(){this.queries=new fu(e=>hc(e),Cl),this.onlineState="Unknown",this.Ru=new Set}}function vm(i,e){return wu.apply(this,arguments)}function wu(){return wu=(0,he.Z)(function*(i,e){const t=Ht(i),o=e.query;let u=!1,d=t.queries.get(o);if(d||(u=!0,d=new l0),u)try{d.Au=yield t.onListen(o)}catch(g){const D=xd(g,`Initialization of query '${Yc(e.query)}' failed`);return void e.onError(D)}t.queries.set(o,d),d.listeners.push(e),e.bu(t.onlineState),d.Au&&e.Pu(d.Au)&&zh(t)}),wu.apply(this,arguments)}function Od(i,e){return Lp.apply(this,arguments)}function Lp(){return Lp=(0,he.Z)(function*(i,e){const t=Ht(i),o=e.query;let u=!1;const d=t.queries.get(o);if(d){const g=d.listeners.indexOf(e);g>=0&&(d.listeners.splice(g,1),u=0===d.listeners.length)}if(u)return t.queries.delete(o),t.onUnlisten(o)}),Lp.apply(this,arguments)}function _m(i,e){const t=Ht(i);let o=!1;for(const u of e){const g=t.queries.get(u.query);if(g){for(const D of g.listeners)D.Pu(u)&&(o=!0);g.Au=u}}o&&zh(t)}function Vp(i,e,t){const o=Ht(i),u=o.queries.get(e);if(u)for(const d of u.listeners)d.onError(t);o.queries.delete(e)}function zh(i){i.Ru.forEach(e=>{e.next()})}class Nd{constructor(e,t,o){this.query=e,this.vu=t,this.Vu=!1,this.Su=null,this.onlineState="Unknown",this.options=o||{}}Pu(e){if(!this.options.includeMetadataChanges){const o=[];for(const u of e.docChanges)3!==u.type&&o.push(u);e=new Rd(e.query,e.docs,e.oldDocs,o,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.Vu?this.Du(e)&&(this.vu.next(e),t=!0):this.Cu(e,this.onlineState)&&(this.xu(e),t=!0),this.Su=e,t}onError(e){this.vu.error(e)}bu(e){this.onlineState=e;let t=!1;return this.Su&&!this.Vu&&this.Cu(this.Su,e)&&(this.xu(this.Su),t=!0),t}Cu(e,t){return!e.fromCache||!(this.options.Nu&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}Du(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Su&&this.Su.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}xu(e){e=Rd.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.Vu=!0,this.vu.next(e)}}class xv{constructor(e,t){this.payload=e,this.byteLength=t}ku(){return"metadata"in this.payload}}class ju{constructor(e){this.It=e}Ji(e){return E(this.It,e)}Yi(e){return e.metadata.exists?an(this.It,e.document,!1):Ci.newNoDocument(this.Ji(e.metadata.name),this.Xi(e.metadata.readTime))}Xi(e){return zs(e)}}class wm{constructor(e,t,o){this.Mu=e,this.localStore=t,this.It=o,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=Em(e)}Ou(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;const o=mr.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(o.get(o.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Fu(e){const t=new Map,o=new ju(this.It);for(const u of e)if(u.metadata.queries){const d=o.Ji(u.metadata.name);for(const g of u.metadata.queries){const D=(t.get(g)||tr()).add(d);t.set(g,D)}}return t}complete(){var e=this;return(0,he.Z)(function*(){const t=yield function u0(i,e,t,o){return Nh.apply(this,arguments)}(e.localStore,new ju(e.It),e.documents,e.Mu.id),o=e.Fu(e.documents);for(const u of e.queries)yield sm(e.localStore,u,o.get(u.name));return e.progress.taskState="Success",{progress:e.progress,$u:e.collectionGroups,Bu:t}})()}}function Em(i){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:i.totalDocuments,totalBytes:i.totalBytes}}class Im{constructor(e){this.key=e}}class Up{constructor(e){this.key=e}}class Dm{constructor(e,t){this.query=e,this.Lu=t,this.Uu=null,this.current=!1,this.qu=tr(),this.mutatedKeys=tr(),this.Ku=Ta(e),this.Gu=new Md(this.Ku)}get Qu(){return this.Lu}ju(e,t){const o=t?t.Wu:new Av,u=t?t.Gu:this.Gu;let d=t?t.mutatedKeys:this.mutatedKeys,g=u,D=!1;const L="F"===this.query.limitType&&u.size===this.query.limit?u.last():null,H="L"===this.query.limitType&&u.size===this.query.limit?u.first():null;if(e.inorderTraversal((Q,_e)=>{const Ge=u.get(Q),ct=cu(this.query,_e)?_e:null,mt=!!Ge&&this.mutatedKeys.has(Ge.key),Yt=!!ct&&(ct.hasLocalMutations||this.mutatedKeys.has(ct.key)&&ct.hasCommittedMutations);let hn=!1;Ge&&ct?Ge.data.isEqual(ct.data)?mt!==Yt&&(o.track({type:3,doc:ct}),hn=!0):this.zu(Ge,ct)||(o.track({type:2,doc:ct}),hn=!0,(L&&this.Ku(ct,L)>0||H&&this.Ku(ct,H)<0)&&(D=!0)):!Ge&&ct?(o.track({type:0,doc:ct}),hn=!0):Ge&&!ct&&(o.track({type:1,doc:Ge}),hn=!0,(L||H)&&(D=!0)),hn&&(ct?(g=g.add(ct),d=Yt?d.add(Q):d.delete(Q)):(g=g.delete(Q),d=d.delete(Q)))}),null!==this.query.limit)for(;g.size>this.query.limit;){const Q="F"===this.query.limitType?g.last():g.first();g=g.delete(Q.key),d=d.delete(Q.key),o.track({type:1,doc:Q})}return{Gu:g,Wu:o,$i:D,mutatedKeys:d}}zu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,o){const u=this.Gu;this.Gu=e.Gu,this.mutatedKeys=e.mutatedKeys;const d=e.Wu.Eu();d.sort((H,Q)=>function(_e,Ge){const ct=mt=>{switch(mt){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Qt()}};return ct(_e)-ct(Ge)}(H.type,Q.type)||this.Ku(H.doc,Q.doc)),this.Hu(o);const g=t?this.Ju():[],D=0===this.qu.size&&this.current?1:0,L=D!==this.Uu;return this.Uu=D,0!==d.length||L?{snapshot:new Rd(this.query,e.Gu,u,d,e.mutatedKeys,0===D,L,!1),Yu:g}:{Yu:g}}bu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Gu:this.Gu,Wu:new Av,mutatedKeys:this.mutatedKeys,$i:!1},!1)):{Yu:[]}}Xu(e){return!this.Lu.has(e)&&!!this.Gu.has(e)&&!this.Gu.get(e).hasLocalMutations}Hu(e){e&&(e.addedDocuments.forEach(t=>this.Lu=this.Lu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Lu=this.Lu.delete(t)),this.current=e.current)}Ju(){if(!this.current)return[];const e=this.qu;this.qu=tr(),this.Gu.forEach(o=>{this.Xu(o.key)&&(this.qu=this.qu.add(o.key))});const t=[];return e.forEach(o=>{this.qu.has(o)||t.push(new Up(o))}),this.qu.forEach(o=>{e.has(o)||t.push(new Im(o))}),t}Zu(e){this.Lu=e.Hi,this.qu=tr();const t=this.ju(e.documents);return this.applyChanges(t,!0)}tc(){return Rd.fromInitialDocuments(this.query,this.Gu,this.mutatedKeys,0===this.Uu)}}class Mv{constructor(e,t,o){this.query=e,this.targetId=t,this.view=o}}class Wh{constructor(e){this.key=e,this.ec=!1}}class Rc{constructor(e,t,o,u,d,g){this.localStore=e,this.remoteStore=t,this.eventManager=o,this.sharedClientState=u,this.currentUser=d,this.maxConcurrentLimboResolutions=g,this.nc={},this.sc=new fu(D=>hc(D),Cl),this.ic=new Map,this.rc=new Set,this.oc=new rn(zt.comparator),this.uc=new Map,this.cc=new xh,this.ac={},this.hc=new Map,this.lc=Hl.vn(),this.onlineState="Unknown",this.fc=void 0}get isPrimaryClient(){return!0===this.fc}}function Bp(i,e){return ul.apply(this,arguments)}function ul(){return ul=(0,he.Z)(function*(i,e){const t=Kp(i);let o,u;const d=t.sc.get(e);if(d)o=d.targetId,t.sharedClientState.addLocalQueryTarget(o),u=d.view.tc();else{const g=yield Tc(t.localStore,Ts(e));t.isPrimaryClient&&Uh(t.remoteStore,g);const D=t.sharedClientState.addLocalQueryTarget(g.targetId);o=g.targetId,u=yield Oc(t,e,o,"current"===D)}return u}),ul.apply(this,arguments)}function Oc(i,e,t,o){return ql.apply(this,arguments)}function ql(){return ql=(0,he.Z)(function*(i,e,t,o){i.dc=(Q,_e,Ge)=>{return(ct=(0,he.Z)(function*(mt,Yt,hn,Gr){let ci=Yt.view.ju(hn);ci.$i&&(ci=yield Oh(mt.localStore,Yt.query,!1).then(({documents:di})=>Yt.view.ju(di,ci)));const jr=Gr&&Gr.targetChanges.get(Yt.targetId),xs=Yt.view.applyChanges(ci,mt.isPrimaryClient,jr);return $p(mt,Yt.targetId,xs.Yu),xs.snapshot}),function(mt,Yt,hn,Gr){return ct.apply(this,arguments)})(i,Q,_e,Ge);var ct};const u=yield Oh(i.localStore,e,!0),d=new Dm(e,u.Hi),g=d.ju(u.documents),D=Ya.createSynthesizedTargetChangeForCurrentChange(t,o&&"Offline"!==i.onlineState),L=d.applyChanges(g,i.isPrimaryClient,D);$p(i,t,L.Yu);const H=new Mv(e,t,d);return i.sc.set(e,H),i.ic.has(t)?i.ic.get(t).push(e):i.ic.set(t,[e]),L.snapshot}),ql.apply(this,arguments)}function Rv(i,e){return qh.apply(this,arguments)}function qh(){return qh=(0,he.Z)(function*(i,e){const t=Ht(i),o=t.sc.get(e),u=t.ic.get(o.targetId);if(u.length>1)return t.ic.set(o.targetId,u.filter(d=>!Cl(d,e))),void t.sc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(o.targetId),t.sharedClientState.isActiveQueryTarget(o.targetId)||(yield Sc(t.localStore,o.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(o.targetId),Bh(t.remoteStore,o.targetId),Nc(t,o.targetId)}).catch(Lo))):(Nc(t,o.targetId),yield Sc(t.localStore,o.targetId,!0))}),qh.apply(this,arguments)}function Pd(){return Pd=(0,he.Z)(function*(i,e,t){const o=Yp(i);try{const u=yield function(d,g){const D=Ht(d),L=Mi.now(),H=g.reduce((Ge,ct)=>Ge.add(ct.key),tr());let Q,_e;return D.persistence.runTransaction("Locally write mutations","readwrite",Ge=>{let ct=Gs(),mt=tr();return D.Gi.getEntries(Ge,H).next(Yt=>{ct=Yt,ct.forEach((hn,Gr)=>{Gr.isValidDocument()||(mt=mt.add(hn))})}).next(()=>D.localDocuments.getOverlayedDocuments(Ge,ct)).next(Yt=>{Q=Yt;const hn=[];for(const Gr of g){const ci=rd(Gr,Q.get(Gr.key).overlayedDocument);null!=ci&&hn.push(new ja(Gr.key,ci,Jd(ci.value.mapValue),Ki.exists(!0)))}return D.mutationQueue.addMutationBatch(Ge,L,hn,g)}).next(Yt=>{_e=Yt;const hn=Yt.applyToLocalDocumentSet(Q,mt);return D.documentOverlayCache.saveOverlays(Ge,Yt.batchId,hn)})}).then(()=>({batchId:_e.batchId,changes:yc(Q)}))}(o.localStore,e);o.sharedClientState.addPendingMutation(u.batchId),function(d,g,D){let L=d.ac[d.currentUser.toKey()];L||(L=new rn(Dn)),L=L.insert(g,D),d.ac[d.currentUser.toKey()]=L}(o,u.batchId,t),yield $u(o,u.changes),yield Bu(o.remoteStore)}catch(u){const d=xd(u,"Failed to persist write");t.reject(d)}}),Pd.apply(this,arguments)}function Zh(i,e){return Kh.apply(this,arguments)}function Kh(){return Kh=(0,he.Z)(function*(i,e){const t=Ht(i);try{const o=yield tm(t.localStore,e);e.targetChanges.forEach((u,d)=>{const g=t.uc.get(d);g&&(vn(u.addedDocuments.size+u.modifiedDocuments.size+u.removedDocuments.size<=1),u.addedDocuments.size>0?g.ec=!0:u.modifiedDocuments.size>0?vn(g.ec):u.removedDocuments.size>0&&(vn(g.ec),g.ec=!1))}),yield $u(t,o,e)}catch(o){yield Lo(o)}}),Kh.apply(this,arguments)}function Yh(i,e,t){const o=Ht(i);if(o.isPrimaryClient&&0===t||!o.isPrimaryClient&&1===t){const u=[];o.sc.forEach((d,g)=>{const D=g.view.bu(e);D.snapshot&&u.push(D.snapshot)}),function(d,g){const D=Ht(d);D.onlineState=g;let L=!1;D.queries.forEach((H,Q)=>{for(const _e of Q.listeners)_e.bu(g)&&(L=!0)}),L&&zh(D)}(o.eventManager,e),u.length&&o.nc.Wo(u),o.onlineState=e,o.isPrimaryClient&&o.sharedClientState.setOnlineState(e)}}function Ov(i,e,t){return bm.apply(this,arguments)}function bm(){return bm=(0,he.Z)(function*(i,e,t){const o=Ht(i);o.sharedClientState.updateQueryState(e,"rejected",t);const u=o.uc.get(e),d=u&&u.key;if(d){let g=new rn(zt.comparator);g=g.insert(d,Ci.newNoDocument(d,Pn.min()));const D=tr().add(d),L=new Fu(Pn.min(),new Map,new Kn(Dn),g,D);yield Zh(o,L),o.oc=o.oc.remove(d),o.uc.delete(e),ef(o)}else yield Sc(o.localStore,e,!1).then(()=>Nc(o,e,t)).catch(Lo)}),bm.apply(this,arguments)}function Nv(i,e){return Qh.apply(this,arguments)}function Qh(){return Qh=(0,he.Z)(function*(i,e){const t=Ht(i),o=e.batch.batchId;try{const u=yield gv(t.localStore,e);Xh(t,o,null),aa(t,o),t.sharedClientState.updateMutationState(o,"acknowledged"),yield $u(t,u)}catch(u){yield Lo(u)}}),Qh.apply(this,arguments)}function Pv(i,e,t){return Jh.apply(this,arguments)}function Jh(){return Jh=(0,he.Z)(function*(i,e,t){const o=Ht(i);try{const u=yield function(d,g){const D=Ht(d);return D.persistence.runTransaction("Reject batch","readwrite-primary",L=>{let H;return D.mutationQueue.lookupMutationBatch(L,g).next(Q=>(vn(null!==Q),H=Q.keys(),D.mutationQueue.removeMutationBatch(L,Q))).next(()=>D.mutationQueue.performConsistencyCheck(L)).next(()=>D.documentOverlayCache.removeOverlaysForBatchId(L,H,g)).next(()=>D.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(L,H)).next(()=>D.localDocuments.getDocuments(L,H))})}(o.localStore,e);Xh(o,e,t),aa(o,e),o.sharedClientState.updateMutationState(e,"rejected",t),yield $u(o,u)}catch(u){yield Lo(u)}}),Jh.apply(this,arguments)}function jp(){return jp=(0,he.Z)(function*(i,e){const t=Ht(i);Mo(t.remoteStore)||Tt("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const o=yield function(d){const g=Ht(d);return g.persistence.runTransaction("Get highest unacknowledged batch id","readonly",D=>g.mutationQueue.getHighestUnacknowledgedBatchId(D))}(t.localStore);if(-1===o)return void e.resolve();const u=t.hc.get(o)||[];u.push(e),t.hc.set(o,u)}catch(o){const u=xd(o,"Initialization of waitForPendingWrites() operation failed");e.reject(u)}}),jp.apply(this,arguments)}function aa(i,e){(i.hc.get(e)||[]).forEach(t=>{t.resolve()}),i.hc.delete(e)}function Xh(i,e,t){const o=Ht(i);let u=o.ac[o.currentUser.toKey()];if(u){const d=u.get(e);d&&(t?d.reject(t):d.resolve(),u=u.remove(e)),o.ac[o.currentUser.toKey()]=u}}function Nc(i,e,t=null){i.sharedClientState.removeLocalQueryTarget(e);for(const o of i.ic.get(e))i.sc.delete(o),t&&i.nc._c(o,t);i.ic.delete(e),i.isPrimaryClient&&i.cc.ls(e).forEach(o=>{i.cc.containsKey(o)||kv(i,o)})}function kv(i,e){i.rc.delete(e.path.canonicalString());const t=i.oc.get(e);null!==t&&(Bh(i.remoteStore,t),i.oc=i.oc.remove(e),i.uc.delete(t),ef(i))}function $p(i,e,t){for(const o of t)o instanceof Im?(i.cc.addReference(o.key,e),Hp(i,o)):o instanceof Up?(Tt("SyncEngine","Document no longer in limbo: "+o.key),i.cc.removeReference(o.key,e),i.cc.containsKey(o.key)||kv(i,o.key)):Qt()}function Hp(i,e){const t=e.key,o=t.path.canonicalString();i.oc.get(t)||i.rc.has(o)||(Tt("SyncEngine","New document in limbo: "+t),i.rc.add(o),ef(i))}function ef(i){for(;i.rc.size>0&&i.oc.size<i.maxConcurrentLimboResolutions;){const e=i.rc.values().next().value;i.rc.delete(e);const t=new zt(mr.fromString(e)),o=i.lc.next();i.uc.set(o,new Wh(t)),i.oc=i.oc.insert(t,o),Uh(i.remoteStore,new il(Ts(Mu(t.path)),o,2,te.at))}}function $u(i,e,t){return Gp.apply(this,arguments)}function Gp(){return Gp=(0,he.Z)(function*(i,e,t){const o=Ht(i),u=[],d=[],g=[];var D;o.sc.isEmpty()||(o.sc.forEach((D,L)=>{g.push(o.dc(L,e,t).then(H=>{if(H){o.isPrimaryClient&&o.sharedClientState.updateQueryState(L.targetId,H.fromCache?"not-current":"current"),u.push(H);const Q=wp.Ci(L.targetId,H);d.push(Q)}}))}),yield Promise.all(g),o.nc.Wo(u),yield(D=(0,he.Z)(function*(L,H){const Q=Ht(L);try{yield Q.persistence.runTransaction("notifyLocalViewChanges","readwrite",_e=>qe.forEach(H,Ge=>qe.forEach(Ge.Si,ct=>Q.persistence.referenceDelegate.addReference(_e,Ge.targetId,ct)).next(()=>qe.forEach(Ge.Di,ct=>Q.persistence.referenceDelegate.removeReference(_e,Ge.targetId,ct)))))}catch(_e){if(!Vo(_e))throw _e;Tt("LocalStore","Failed to update sequence numbers: "+_e)}for(const _e of H){const Ge=_e.targetId;if(!_e.fromCache){const ct=Q.Ui.get(Ge),Yt=ct.withLastLimboFreeSnapshotVersion(ct.snapshotVersion);Q.Ui=Q.Ui.insert(Ge,Yt)}}}),function(L,H){return D.apply(this,arguments)})(o.localStore,d))}),Gp.apply(this,arguments)}function Fv(i,e){return tf.apply(this,arguments)}function tf(){return tf=(0,he.Z)(function*(i,e){const t=Ht(i);if(!t.currentUser.isEqual(e)){Tt("SyncEngine","User change. New user:",e.toKey());const o=yield em(t.localStore,e);t.currentUser=e,(u=t).hc.forEach(g=>{g.forEach(D=>{D.reject(new Et(Qe.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),u.hc.clear(),t.sharedClientState.handleUserChange(e,o.removedBatchIds,o.addedBatchIds),yield $u(t,o.ji)}var u}),tf.apply(this,arguments)}function Lv(i,e){const t=Ht(i),o=t.uc.get(e);if(o&&o.ec)return tr().add(o.key);{let u=tr();const d=t.ic.get(e);if(!d)return u;for(const g of d){const D=t.sc.get(g);u=u.unionWith(D.view.Qu)}return u}}function Sm(i,e){return zp.apply(this,arguments)}function zp(){return zp=(0,he.Z)(function*(i,e){const t=Ht(i),o=yield Oh(t.localStore,e.query,!0),u=e.view.Zu(o);return t.isPrimaryClient&&$p(t,e.targetId,u.Yu),u}),zp.apply(this,arguments)}function Vv(i,e){return nf.apply(this,arguments)}function nf(){return nf=(0,he.Z)(function*(i,e){const t=Ht(i);return rm(t.localStore,e).then(o=>$u(t,o))}),nf.apply(this,arguments)}function Am(i,e,t,o){return Wp.apply(this,arguments)}function Wp(){return Wp=(0,he.Z)(function*(i,e,t,o){const u=Ht(i),d=yield function(g,D){const L=Ht(g),H=Ht(L.mutationQueue);return L.persistence.runTransaction("Lookup mutation documents","readonly",Q=>H.Tn(Q,D).next(_e=>_e?L.localDocuments.getDocuments(Q,_e):qe.resolve(null)))}(u.localStore,e);var D;null!==d?("pending"===t?yield Bu(u.remoteStore):"acknowledged"===t||"rejected"===t?(Xh(u,e,o||null),aa(u,e),D=e,Ht(Ht(u.localStore).mutationQueue).An(D)):Qt(),yield $u(u,d)):Tt("SyncEngine","Cannot apply mutation batch with id: "+e)}),Wp.apply(this,arguments)}function kd(){return kd=(0,he.Z)(function*(i,e){const t=Ht(i);if(Kp(t),Yp(t),!0===e&&!0!==t.fc){const o=t.sharedClientState.getAllActiveQueryTargets(),u=yield xm(t,o.toArray());t.fc=!0,yield Fp(t.remoteStore,!0);for(const d of u)Uh(t.remoteStore,d)}else if(!1===e&&!1!==t.fc){const o=[];let u=Promise.resolve();t.ic.forEach((d,g)=>{t.sharedClientState.isLocalQueryTarget(g)?o.push(g):u=u.then(()=>(Nc(t,g),Sc(t.localStore,g,!0))),Bh(t.remoteStore,g)}),yield u,yield xm(t,o),function(d){const g=Ht(d);g.uc.forEach((D,L)=>{Bh(g.remoteStore,L)}),g.cc.fs(),g.uc=new Map,g.oc=new rn(zt.comparator)}(t),t.fc=!1,yield Fp(t.remoteStore,!1)}}),kd.apply(this,arguments)}function xm(i,e,t){return qp.apply(this,arguments)}function qp(){return qp=(0,he.Z)(function*(i,e,t){const o=Ht(i),u=[],d=[];for(const g of e){let D;const L=o.ic.get(g);if(L&&0!==L.length){D=yield Tc(o.localStore,Ts(L[0]));for(const H of L){const Q=o.sc.get(H),_e=yield Sm(o,Q);_e.snapshot&&d.push(_e.snapshot)}}else{const H=yield Cp(o.localStore,g);D=yield Tc(o.localStore,H),yield Oc(o,Uv(H),g,!1)}u.push(D)}return o.nc.Wo(d),u}),qp.apply(this,arguments)}function Uv(i){return Yu(i.path,i.collectionGroup,i.orderBy,i.filters,i.limit,"F",i.startAt,i.endAt)}function Mm(i){const e=Ht(i);return Ht(Ht(e.localStore).persistence).vi()}function Bv(i,e,t,o){return Zp.apply(this,arguments)}function Zp(){return Zp=(0,he.Z)(function*(i,e,t,o){const u=Ht(i);if(u.fc)return void Tt("SyncEngine","Ignoring unexpected query state notification.");const d=u.ic.get(e);if(d&&d.length>0)switch(t){case"current":case"not-current":{const g=yield rm(u.localStore,Qc(d[0])),D=Fu.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield $u(u,g,D);break}case"rejected":yield Sc(u.localStore,e,!0),Nc(u,e,o);break;default:Qt()}}),Zp.apply(this,arguments)}function jv(i,e,t){return Fd.apply(this,arguments)}function Fd(){return Fd=(0,he.Z)(function*(i,e,t){const o=Kp(i);if(o.fc){for(const u of e){if(o.ic.has(u)){Tt("SyncEngine","Adding an already active target "+u);continue}const d=yield Cp(o.localStore,u),g=yield Tc(o.localStore,d);yield Oc(o,Uv(d),g.targetId,!1),Uh(o.remoteStore,g)}for(const u of t)o.ic.has(u)&&(yield Sc(o.localStore,u,!1).then(()=>{Bh(o.remoteStore,u),Nc(o,u)}).catch(Lo))}}),Fd.apply(this,arguments)}function Kp(i){const e=Ht(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=Zh.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Lv.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Ov.bind(null,e),e.nc.Wo=_m.bind(null,e.eventManager),e.nc._c=Vp.bind(null,e.eventManager),e}function Yp(i){const e=Ht(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Nv.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Pv.bind(null,e),e}class sf{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,he.Z)(function*(){t.It=wd(e.databaseInfo.databaseId),t.sharedClientState=t.mc(e),t.persistence=t.gc(e),yield t.persistence.start(),t.localStore=t.yc(e),t.gcScheduler=t.Ic(e,t.localStore),t.indexBackfillerScheduler=t.Tc(e,t.localStore)})()}Ic(e,t){return null}Tc(e,t){return null}yc(e){return Ep(this.persistence,new Xg,e.initialUser,this.It)}gc(e){return new fv(Mh.Bs,this.It)}mc(e){return new mv}terminate(){var e=this;return(0,he.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class Rm extends sf{constructor(e,t,o){super(),this.Ec=e,this.cacheSizeBytes=t,this.forceOwnership=o,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,o=this;return(0,he.Z)(function*(){yield t().call(o,e),yield o.Ec.initialize(o,e),yield Yp(o.Ec.syncEngine),yield Bu(o.Ec.remoteStore),yield o.persistence.li(()=>(o.gcScheduler&&!o.gcScheduler.started&&o.gcScheduler.start(),o.indexBackfillerScheduler&&!o.indexBackfillerScheduler.started&&o.indexBackfillerScheduler.start(),Promise.resolve()))})()}yc(e){return Ep(this.persistence,new Xg,e.initialUser,this.It)}Ic(e,t){return new cv(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}Tc(e,t){const o=new z(t,this.persistence);return new P(e.asyncQueue,o)}gc(e){const t=_p(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),o=void 0!==this.cacheSizeBytes?va.withCacheSize(this.cacheSizeBytes):va.DEFAULT;return new Sa(this.synchronizeTabs,t,e.clientId,o,e.asyncQueue,lm(),_d(),this.It,this.sharedClientState,!!this.forceOwnership)}mc(e){return new mv}}class Qp extends Rm{constructor(e,t){super(e,t,!1),this.Ec=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,o=this;return(0,he.Z)(function*(){yield t().call(o,e);const u=o.Ec.syncEngine;o.sharedClientState instanceof Lh&&(o.sharedClientState.syncEngine={Fr:Am.bind(null,u),$r:Bv.bind(null,u),Br:jv.bind(null,u),vi:Mm.bind(null,u),Or:Vv.bind(null,u)},yield o.sharedClientState.start()),yield o.persistence.li(function(){var d=(0,he.Z)(function*(g){yield function Eu(i,e){return kd.apply(this,arguments)}(o.Ec.syncEngine,g),o.gcScheduler&&(g&&!o.gcScheduler.started?o.gcScheduler.start():g||o.gcScheduler.stop()),o.indexBackfillerScheduler&&(g&&!o.indexBackfillerScheduler.started?o.indexBackfillerScheduler.start():g||o.indexBackfillerScheduler.stop())});return function(g){return d.apply(this,arguments)}}())})()}mc(e){const t=lm();if(!Lh.C(t))throw new Et(Qe.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const o=_p(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Lh(t,e.asyncQueue,o,e.clientId,e.initialUser)}}class af{initialize(e,t){var o=this;return(0,he.Z)(function*(){o.localStore||(o.localStore=e.localStore,o.sharedClientState=e.sharedClientState,o.datastore=o.createDatastore(t),o.remoteStore=o.createRemoteStore(t),o.eventManager=o.createEventManager(t),o.syncEngine=o.createSyncEngine(t,!e.synchronizeTabs),o.sharedClientState.onlineStateHandler=u=>Yh(o.syncEngine,u,1),o.remoteStore.remoteSyncer.handleCredentialChange=Fv.bind(null,o.syncEngine),yield Fp(o.remoteStore,o.syncEngine.isPrimaryClient))})()}createEventManager(e){return new c0}createDatastore(e){const t=wd(e.databaseInfo.databaseId),o=new Vh(e.databaseInfo);return new dm(e.authCredentials,e.appCheckCredentials,o,t)}createRemoteStore(e){return t=this.localStore,o=this.datastore,u=e.asyncQueue,d=D=>Yh(this.syncEngine,D,0),g=zl.C()?new zl:new yv,new hm(t,o,u,d,g);var t,o,u,d,g}createSyncEngine(e,t){return function(o,u,d,g,D,L,H){const Q=new Rc(o,u,d,g,D,L);return H&&(Q.fc=!0),Q}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,he.Z)(function*(t){const o=Ht(t);Tt("RemoteStore","RemoteStore shutting down."),o._u.add(5),yield Id(o),o.mu.shutdown(),o.gu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function $v(i,e=10240){let t=0;return{read:()=>(0,he.Z)(function*(){if(t<i.byteLength){const o={value:i.slice(t,t+e),done:!1};return t+=e,o}return{done:!0}})(),cancel:()=>(0,he.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class Jp{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ac(this.observer.next,e)}error(e){this.observer.error?this.Ac(this.observer.error,e):Pr("Uncaught Error in snapshot listener:",e)}Rc(){this.muted=!0}Ac(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class Xp{constructor(e,t){this.bc=e,this.It=t,this.metadata=new Wi,this.buffer=new Uint8Array,this.Pc=new TextDecoder("utf-8"),this.vc().then(o=>{o&&o.ku()?this.metadata.resolve(o.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(o?.payload)}`))},o=>this.metadata.reject(o))}close(){return this.bc.cancel()}getMetadata(){var e=this;return(0,he.Z)(function*(){return e.metadata.promise})()}wc(){var e=this;return(0,he.Z)(function*(){return yield e.getMetadata(),e.vc()})()}vc(){var e=this;return(0,he.Z)(function*(){const t=yield e.Vc();if(null===t)return null;const o=e.Pc.decode(t),u=Number(o);isNaN(u)&&e.Sc(`length string (${o}) is not valid number`);const d=yield e.Dc(u);return new xv(JSON.parse(d),t.length+u)})()}Cc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Vc(){var e=this;return(0,he.Z)(function*(){for(;e.Cc()<0&&!(yield e.xc()););if(0===e.buffer.length)return null;const t=e.Cc();t<0&&e.Sc("Reached the end of bundle when a length string is expected.");const o=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),o})()}Dc(e){var t=this;return(0,he.Z)(function*(){for(;t.buffer.length<e;)(yield t.xc())&&t.Sc("Reached the end of bundle when more is expected.");const o=t.Pc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),o})()}Sc(e){throw this.bc.cancel(),new Error(`Invalid bundle format: ${e}`)}xc(){var e=this;return(0,he.Z)(function*(){const t=yield e.bc.read();if(!t.done){const o=new Uint8Array(e.buffer.length+t.value.length);o.set(e.buffer),o.set(t.value,e.buffer.length),e.buffer=o}return t.done})()}}class d0{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,he.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Et(Qe.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const o=yield(u=(0,he.Z)(function*(d,g){const D=Ht(d),L=Te(D.It)+"/documents",H={documents:g.map(ct=>f(D.It,ct))},Q=yield D.fo("BatchGetDocuments",L,H,g.length),_e=new Map;Q.forEach(ct=>{const mt=function Ln(i,e){return"found"in e?function(t,o){vn(!!o.found);const u=E(t,o.found.name),d=zs(o.found.updateTime),g=new bs({mapValue:{fields:o.found.fields}});return Ci.newFoundDocument(u,d,g)}(i,e):"missing"in e?function(t,o){vn(!!o.missing),vn(!!o.readTime);const u=E(t,o.missing),d=zs(o.readTime);return Ci.newNoDocument(u,d)}(i,e):Qt()}(D.It,ct);_e.set(mt.key.toString(),mt)});const Ge=[];return g.forEach(ct=>{const mt=_e.get(ct.toString());vn(!!mt),Ge.push(mt)}),Ge}),function(d,g){return u.apply(this,arguments)})(t.datastore,e);var u;return o.forEach(u=>t.recordVersion(u)),o})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(o){this.lastWriteError=o}this.writtenDocs.add(e.toString())}delete(e){this.write(new Ml(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,he.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var o;e.mutations.forEach(o=>{t.delete(o.key.toString())}),t.forEach((o,u)=>{const d=zt.fromPath(u);e.mutations.push(new id(d,e.precondition(d)))}),yield(o=(0,he.Z)(function*(u,d){const g=Ht(u),D=Te(g.It)+"/documents",L={writes:d.map(H=>is(g.It,H))};yield g.co("Commit",D,L)}),function(u,d){return o.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Qt();t=Pn.min()}const o=this.readVersions.get(e.key.toString());if(o){if(!t.isEqual(o))throw new Et(Qe.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Pn.min())?Ki.exists(!1):Ki.updateTime(t):Ki.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Pn.min()))throw new Et(Qe.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Ki.updateTime(t)}return Ki.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class Om{constructor(e,t,o,u,d){this.asyncQueue=e,this.datastore=t,this.options=o,this.updateFunction=u,this.deferred=d,this.Nc=o.maxAttempts,this.xo=new Sp(this.asyncQueue,"transaction_retry")}run(){this.Nc-=1,this.kc()}kc(){var e=this;this.xo.Ao((0,he.Z)(function*(){const t=new d0(e.datastore),o=e.Mc(t);o&&o.then(u=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(u)}).catch(d=>{e.Oc(d)}))}).catch(u=>{e.Oc(u)})}))}Mc(e){try{const t=this.updateFunction(e);return!Pe(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Oc(e){this.Nc>0&&this.Fc(e)?(this.Nc-=1,this.asyncQueue.enqueueAndForget(()=>(this.kc(),Promise.resolve()))):this.deferred.reject(e)}Fc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!sd(t)}return!1}}class Nm{constructor(e,t,o,u){var d=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=o,this.databaseInfo=u,this.user=zi.UNAUTHENTICATED,this.clientId=ga.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(o,function(){var g=(0,he.Z)(function*(D){Tt("FirestoreClient","Received user=",D.uid),yield d.authCredentialListener(D),d.user=D});return function(D){return g.apply(this,arguments)}}()),this.appCheckCredentials.start(o,g=>(Tt("FirestoreClient","Received new app check token=",g),this.appCheckCredentialListener(g,this.user)))}getConfiguration(){var e=this;return(0,he.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Et(Qe.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Wi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,he.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(o){const u=xd(o,"Failed to shutdown persistence");t.reject(u)}})),t.promise}}function eg(i,e){return uf.apply(this,arguments)}function uf(){return uf=(0,he.Z)(function*(i,e){i.asyncQueue.verifyOperationInProgress(),Tt("FirestoreClient","Initializing OfflineComponentProvider");const t=yield i.getConfiguration();yield e.initialize(t);let o=t.initialUser;i.setCredentialChangeListener(function(){var u=(0,he.Z)(function*(d){o.isEqual(d)||(yield em(e.localStore,d),o=d)});return function(d){return u.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>i.terminate()),i.offlineComponents=e}),uf.apply(this,arguments)}function lf(i,e){return eu.apply(this,arguments)}function eu(){return eu=(0,he.Z)(function*(i,e){i.asyncQueue.verifyOperationInProgress();const t=yield Pc(i);Tt("FirestoreClient","Initializing OnlineComponentProvider");const o=yield i.getConfiguration();yield e.initialize(t,o),i.setCredentialChangeListener(u=>kp(e.remoteStore,u)),i.setAppCheckTokenChangeListener((u,d)=>kp(e.remoteStore,d)),i.onlineComponents=e}),eu.apply(this,arguments)}function Pc(i){return kc.apply(this,arguments)}function kc(){return kc=(0,he.Z)(function*(i){return i.offlineComponents||(Tt("FirestoreClient","Using default OfflineComponentProvider"),yield eg(i,new sf)),i.offlineComponents}),kc.apply(this,arguments)}function ll(i){return tg.apply(this,arguments)}function tg(){return tg=(0,he.Z)(function*(i){return i.onlineComponents||(Tt("FirestoreClient","Using default OnlineComponentProvider"),yield lf(i,new af)),i.onlineComponents}),tg.apply(this,arguments)}function cf(i){return Pc(i).then(e=>e.persistence)}function Ld(i){return Pc(i).then(e=>e.localStore)}function Pm(i){return ll(i).then(e=>e.remoteStore)}function ng(i){return ll(i).then(e=>e.syncEngine)}function Iu(i){return rg.apply(this,arguments)}function rg(){return rg=(0,he.Z)(function*(i){const e=yield ll(i),t=e.eventManager;return t.onListen=Bp.bind(null,e.syncEngine),t.onUnlisten=Rv.bind(null,e.syncEngine),t}),rg.apply(this,arguments)}function km(i,e,t={}){const o=new Wi;return i.asyncQueue.enqueueAndForget((0,he.Z)(function*(){return function(u,d,g,D,L){const H=new Jp({next:_e=>{d.enqueueAndForget(()=>Od(u,Q));const Ge=_e.docs.has(g);!Ge&&_e.fromCache?L.reject(new Et(Qe.UNAVAILABLE,"Failed to get document because the client is offline.")):Ge&&_e.fromCache&&D&&"server"===D.source?L.reject(new Et(Qe.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):L.resolve(_e)},error:_e=>L.reject(_e)}),Q=new Nd(Mu(g.path),H,{includeMetadataChanges:!0,Nu:!0});return vm(u,Q)}(yield Iu(i),i.asyncQueue,e,t,o)})),o.promise}function Fm(i,e,t={}){const o=new Wi;return i.asyncQueue.enqueueAndForget((0,he.Z)(function*(){return function(u,d,g,D,L){const H=new Jp({next:_e=>{d.enqueueAndForget(()=>Od(u,Q)),_e.fromCache&&"server"===D.source?L.reject(new Et(Qe.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):L.resolve(_e)},error:_e=>L.reject(_e)}),Q=new Nd(g,H,{includeMetadataChanges:!0,Nu:!0});return vm(u,Q)}(yield Iu(i),i.asyncQueue,e,t,o)})),o.promise}const df=new Map;function sg(i,e,t){if(!t)throw new Et(Qe.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function Vm(i,e,t,o){if(!0===e&&!0===o)throw new Et(Qe.INVALID_ARGUMENT,`${i} and ${t} cannot be used together.`)}function Um(i){if(!zt.isDocumentKey(i))throw new Et(Qe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function Bm(i){if(zt.isDocumentKey(i))throw new Et(Qe.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function hf(i){if(void 0===i)return"undefined";if(null===i)return"null";if("string"==typeof i)return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if("number"==typeof i||"boolean"==typeof i)return""+i;if("object"==typeof i){if(i instanceof Array)return"an array";{const e=(t=i).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof i?"a function":Qt()}function Br(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new Et(Qe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=hf(i);throw new Et(Qe.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return i}function Vd(i,e){if(e<=0)throw new Et(Qe.INVALID_ARGUMENT,`Function ${i}() requires a positive number, but it was: ${e}.`)}class cl{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Et(Qe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Et(Qe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,Vm("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class ff{constructor(e,t,o,u){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=o,this._app=u,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new cl({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Et(Qe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Et(Qe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new cl(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new nu;switch(t.type){case"gapi":return new no(t.client,t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new Et(Qe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=df.get(e);t&&(Tt("ComponentProvider","Removing Datastore"),df.delete(e),t.terminate())}(this),Promise.resolve()}}class ss{constructor(e,t,o){this.converter=t,this._key=o,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ha(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ss(this.firestore,e,this._key)}}class ea{constructor(e,t,o){this.converter=t,this._query=o,this.type="query",this.firestore=e}withConverter(e){return new ea(this.firestore,e,this._query)}}class Ha extends ea{constructor(e,t,o){super(e,t,Mu(o)),this._path=o,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ss(this.firestore,null,new zt(e))}withConverter(e){return new Ha(this.firestore,e,this._path)}}function jm(i,e,...t){if(i=(0,tt.m9)(i),sg("collection","path",e),i instanceof ff){const o=mr.fromString(e,...t);return Bm(o),new Ha(i,null,o)}{if(!(i instanceof ss||i instanceof Ha))throw new Et(Qe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const o=i._path.child(mr.fromString(e,...t));return Bm(o),new Ha(i.firestore,null,o)}}function dl(i,e,...t){if(i=(0,tt.m9)(i),1===arguments.length&&(e=ga.R()),sg("doc","path",e),i instanceof ff){const o=mr.fromString(e,...t);return Um(o),new ss(i,null,new zt(o))}{if(!(i instanceof ss||i instanceof Ha))throw new Et(Qe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const o=i._path.child(mr.fromString(e,...t));return Um(o),new ss(i.firestore,i instanceof Ha?i.converter:null,new zt(o))}}function Bo(i,e){return i=(0,tt.m9)(i),e=(0,tt.m9)(e),(i instanceof ss||i instanceof Ha)&&(e instanceof ss||e instanceof Ha)&&i.firestore===e.firestore&&i.path===e.path&&i.converter===e.converter}function hl(i,e){return i=(0,tt.m9)(i),e=(0,tt.m9)(e),i instanceof ea&&e instanceof ea&&i.firestore===e.firestore&&Cl(i._query,e._query)&&i.converter===e.converter}class pf{constructor(){this.$c=Promise.resolve(),this.Bc=[],this.Lc=!1,this.Uc=[],this.qc=null,this.Kc=!1,this.Gc=!1,this.Qc=[],this.xo=new Sp(this,"async_queue_retry"),this.jc=()=>{const t=_d();t&&Tt("AsyncQueue","Visibility state changed to "+t.visibilityState),this.xo.bo()};const e=_d();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.jc)}get isShuttingDown(){return this.Lc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Wc(),this.zc(e)}enterRestrictedMode(e){if(!this.Lc){this.Lc=!0,this.Gc=e||!1;const t=_d();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.jc)}}enqueue(e){if(this.Wc(),this.Lc)return new Promise(()=>{});const t=new Wi;return this.zc(()=>this.Lc&&this.Gc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Bc.push(e),this.Hc()))}Hc(){var e=this;return(0,he.Z)(function*(){if(0!==e.Bc.length){try{yield e.Bc[0](),e.Bc.shift(),e.xo.reset()}catch(t){if(!Vo(t))throw t;Tt("AsyncQueue","Operation failed with retryable error: "+t)}e.Bc.length>0&&e.xo.Ao(()=>e.Hc())}})()}zc(e){const t=this.$c.then(()=>(this.Kc=!0,e().catch(o=>{throw this.qc=o,this.Kc=!1,Pr("INTERNAL UNHANDLED ERROR: ",function(d){let g=d.message||"";return d.stack&&(g=d.stack.includes(d.message)?d.stack:d.message+"\n"+d.stack),g}(o)),o}).then(o=>(this.Kc=!1,o))));return this.$c=t,t}enqueueAfterDelay(e,t,o){this.Wc(),this.Qc.indexOf(e)>-1&&(t=0);const u=ym.createAndSchedule(this,e,t,o,d=>this.Jc(d));return this.Uc.push(u),u}Wc(){this.qc&&Qt()}verifyOperationInProgress(){}Yc(){var e=this;return(0,he.Z)(function*(){let t;do{t=e.$c,yield t}while(t!==e.$c)})()}Xc(e){for(const t of this.Uc)if(t.timerId===e)return!0;return!1}Zc(e){return this.Yc().then(()=>{this.Uc.sort((t,o)=>t.targetTimeMs-o.targetTimeMs);for(const t of this.Uc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Yc()})}ta(e){this.Qc.push(e)}Jc(e){const t=this.Uc.indexOf(e);this.Uc.splice(t,1)}}function wa(i){return function(e,t){if("object"!=typeof e||null===e)return!1;const o=e;for(const u of["next","error","complete"])if(u in o&&"function"==typeof o[u])return!0;return!1}(i)}class og{constructor(){this._progressObserver={},this._taskCompletionResolver=new Wi,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,o){this._progressObserver={next:e,error:t,complete:o}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class bi extends ff{constructor(e,t,o,u){super(e,t,o,u),this.type="firestore",this._queue=new pf,this._persistenceKey=u?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||Zl(this),this._firestoreClient.terminate()}}function os(i){return i._firestoreClient||Zl(i),i._firestoreClient.verifyNotTerminated(),i._firestoreClient}function Zl(i){var e;const t=i._freezeSettings(),o=(d=(null===(e=i._app)||void 0===e?void 0:e.options.appId)||"",new W(i._databaseId,d,i._persistenceKey,(D=t).host,D.ssl,D.experimentalForceLongPolling,D.experimentalAutoDetectLongPolling,D.useFetchStreams));var d,D;i._firestoreClient=new Nm(i._authCredentials,i._appCheckCredentials,i._queue,o)}function Kl(i,e,t){const o=new Wi;return i.asyncQueue.enqueue((0,he.Z)(function*(){try{yield eg(i,t),yield lf(i,e),o.resolve()}catch(u){const d=u;if(!("FirebaseError"===(g=d).name?g.code===Qe.FAILED_PRECONDITION||g.code===Qe.UNIMPLEMENTED:!(typeof DOMException<"u"&&g instanceof DOMException)||22===g.code||20===g.code||11===g.code))throw d;Fo("Error enabling offline persistence. Falling back to persistence disabled: "+d),o.reject(d)}var g})).then(()=>o.promise)}function ag(i){if(i._initialized||i._terminated)throw new Et(Qe.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Cu{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Et(Qe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new yi(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class bu{constructor(e){this._byteString=e}static fromBase64String(e){try{return new bu(_i.fromBase64String(e))}catch(t){throw new Et(Qe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new bu(_i.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class fl{constructor(e){this._methodName=e}}class gf{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Et(Qe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Et(Qe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Dn(this._lat,e._lat)||Dn(this._long,e._long)}}const Zm=/^__.*__$/;class ug{constructor(e,t,o){this.data=e,this.fieldMask=t,this.fieldTransforms=o}toMutation(e,t){return null!==this.fieldMask?new ja(e,this.data,this.fieldMask,t,this.fieldTransforms):new Xu(e,this.data,t,this.fieldTransforms)}}class mf{constructor(e,t,o){this.data=e,this.fieldMask=t,this.fieldTransforms=o}toMutation(e,t){return new ja(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Km(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Qt()}}class Yl{constructor(e,t,o,u,d,g){this.settings=e,this.databaseId=t,this.It=o,this.ignoreUndefinedProperties=u,void 0===d&&this.ea(),this.fieldTransforms=d||[],this.fieldMask=g||[]}get path(){return this.settings.path}get na(){return this.settings.na}sa(e){return new Yl(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.It,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ia(e){var t;const o=null===(t=this.path)||void 0===t?void 0:t.child(e),u=this.sa({path:o,ra:!1});return u.oa(e),u}ua(e){var t;const o=null===(t=this.path)||void 0===t?void 0:t.child(e),u=this.sa({path:o,ra:!1});return u.ea(),u}ca(e){return this.sa({path:void 0,ra:!0})}aa(e){return bf(e,this.settings.methodName,this.settings.ha||!1,this.path,this.settings.la)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}ea(){if(this.path)for(let e=0;e<this.path.length;e++)this.oa(this.path.get(e))}oa(e){if(0===e.length)throw this.aa("Document fields must not be empty");if(Km(this.na)&&Zm.test(e))throw this.aa('Document fields cannot begin and end with "__"')}}class yf{constructor(e,t,o){this.databaseId=e,this.ignoreUndefinedProperties=t,this.It=o||wd(e)}fa(e,t,o,u=!1){return new Yl({na:e,methodName:t,la:o,path:yi.emptyPath(),ra:!1,ha:u},this.databaseId,this.It,this.ignoreUndefinedProperties)}}function Hu(i){const e=i._freezeSettings(),t=wd(i._databaseId);return new yf(i._databaseId,!!e.ignoreUndefinedProperties,t)}function vf(i,e,t,o,u,d={}){const g=i.fa(d.merge||d.mergeFields?2:0,e,t,u);If("Data must be an object, but it was:",g,o);const D=dg(o,g);let L,H;if(d.merge)L=new hi(g.fieldMask),H=g.fieldTransforms;else if(d.mergeFields){const Q=[];for(const _e of d.mergeFields){const Ge=Df(e,_e,t);if(!g.contains(Ge))throw new Et(Qe.INVALID_ARGUMENT,`Field '${Ge}' is specified in your field mask but missing from your input data.`);Tf(Q,Ge)||Q.push(Ge)}L=new hi(Q),H=g.fieldTransforms.filter(_e=>L.covers(_e.field))}else L=null,H=g.fieldTransforms;return new ug(new bs(D),L,H)}class Ql extends fl{_toFieldTransform(e){if(2!==e.na)throw e.aa(1===e.na?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Ql}}function _f(i,e,t){return new Yl({na:3,la:e.settings.la,methodName:i._methodName,ra:t},e.databaseId,e.It,e.ignoreUndefinedProperties)}class wf extends fl{_toFieldTransform(e){return new Tl(e.path,new du)}isEqual(e){return e instanceof wf}}class Ym extends fl{constructor(e,t){super(e),this.da=t}_toFieldTransform(e){const t=_f(this,e,!0),o=this.da.map(d=>Jl(d,t)),u=new Ba(o);return new Tl(e.path,u)}isEqual(e){return this===e}}class lg extends fl{constructor(e,t){super(e),this.da=t}_toFieldTransform(e){const t=_f(this,e,!0),o=this.da.map(d=>Jl(d,t)),u=new Qu(o);return new Tl(e.path,u)}isEqual(e){return this===e}}class Qm extends fl{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=new hu(e.It,bl(e.It,this._a));return new Tl(e.path,t)}isEqual(e){return this===e}}function Ef(i,e,t,o){const u=i.fa(1,e,t);If("Data must be an object, but it was:",u,o);const d=[],g=bs.empty();et(o,(L,H)=>{const Q=Cf(e,L,t);H=(0,tt.m9)(H);const _e=u.ua(Q);if(H instanceof Ql)d.push(Q);else{const Ge=Jl(H,_e);null!=Ge&&(d.push(Q),g.set(Q,Ge))}});const D=new hi(d);return new mf(g,D,u.fieldTransforms)}function $d(i,e,t,o,u,d){const g=i.fa(1,e,t),D=[Df(e,o,t)],L=[u];if(d.length%2!=0)throw new Et(Qe.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let Ge=0;Ge<d.length;Ge+=2)D.push(Df(e,d[Ge])),L.push(d[Ge+1]);const H=[],Q=bs.empty();for(let Ge=D.length-1;Ge>=0;--Ge)if(!Tf(H,D[Ge])){const ct=D[Ge];let mt=L[Ge];mt=(0,tt.m9)(mt);const Yt=g.ua(ct);if(mt instanceof Ql)H.push(ct);else{const hn=Jl(mt,Yt);null!=hn&&(H.push(ct),Q.set(ct,hn))}}const _e=new hi(H);return new mf(Q,_e,g.fieldTransforms)}function cg(i,e,t,o=!1){return Jl(t,i.fa(o?4:3,e))}function Jl(i,e){if(hg(i=(0,tt.m9)(i)))return If("Unsupported field value:",e,i),dg(i,e);if(i instanceof fl)return function(t,o){if(!Km(o.na))throw o.aa(`${t._methodName}() can only be used with update() and set()`);if(!o.path)throw o.aa(`${t._methodName}() is not currently supported inside arrays`);const u=t._toFieldTransform(o);u&&o.fieldTransforms.push(u)}(i,e),null;if(void 0===i&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.ra&&4!==e.na)throw e.aa("Nested arrays are not supported");return function(t,o){const u=[];let d=0;for(const g of t){let D=Jl(g,o.ca(d));null==D&&(D={nullValue:"NULL_VALUE"}),u.push(D),d++}return{arrayValue:{values:u}}}(i,e)}return function(t,o){if(null===(t=(0,tt.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return bl(o.It,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const u=Mi.fromDate(t);return{timestampValue:Pl(o.It,u)}}if(t instanceof Mi){const u=new Mi(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Pl(o.It,u)}}if(t instanceof gf)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof bu)return{bytesValue:wc(o.It,t._byteString)};if(t instanceof ss){const u=o.databaseId,d=t.firestore._databaseId;if(!d.isEqual(u))throw o.aa(`Document reference is for database ${d.projectId}/${d.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:m(t.firestore._databaseId||o.databaseId,t._key.path)}}throw o.aa(`Unsupported field value: ${hf(t)}`)}(i,e)}function dg(i,e){const t={};return Rt(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):et(i,(o,u)=>{const d=Jl(u,e.ia(o));null!=d&&(t[o]=d)}),{mapValue:{fields:t}}}function hg(i){return!("object"!=typeof i||null===i||i instanceof Array||i instanceof Date||i instanceof Mi||i instanceof gf||i instanceof bu||i instanceof ss||i instanceof fl)}function If(i,e,t){if(!hg(t)||"object"!=typeof(o=t)||null===o||Object.getPrototypeOf(o)!==Object.prototype&&null!==Object.getPrototypeOf(o)){const o=hf(t);throw e.aa("an object"===o?i+" a custom object":i+" "+o)}var o}function Df(i,e,t){if((e=(0,tt.m9)(e))instanceof Cu)return e._internalPath;if("string"==typeof e)return Cf(i,e);throw bf("Field path arguments must be of type string or ",i,!1,void 0,t)}const Zv=new RegExp("[~\\*/\\[\\]]");function Cf(i,e,t){if(e.search(Zv)>=0)throw bf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,t);try{return new Cu(...e.split("."))._internalPath}catch{throw bf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,t)}}function bf(i,e,t,o,u){const d=o&&!o.isEmpty(),g=void 0!==u;let D=`Function ${e}() called with invalid data`;t&&(D+=" (via `toFirestore()`)"),D+=". ";let L="";return(d||g)&&(L+=" (found",d&&(L+=` in field ${o}`),g&&(L+=` in document ${u}`),L+=")"),new Et(Qe.INVALID_ARGUMENT,D+i+L)}function Tf(i,e){return i.some(t=>t.isEqual(e))}class Xl{constructor(e,t,o,u,d){this._firestore=e,this._userDataWriter=t,this._key=o,this._document=u,this._converter=d}get id(){return this._key.path.lastSegment()}get ref(){return new ss(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Jm(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Hd("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class Jm extends Xl{data(){return super.data()}}function Hd(i,e){return"string"==typeof e?Cf(i,e):e instanceof Cu?e._internalPath:e._delegate._internalPath}class pl{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Tu extends Xl{constructor(e,t,o,u,d,g){super(e,t,o,u,g),this._firestore=e,this._firestoreImpl=e,this.metadata=d}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Uc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const o=this._document.data.field(Hd("DocumentSnapshot.get",e));if(null!==o)return this._userDataWriter.convertValue(o,t.serverTimestamps)}}}class Uc extends Tu{data(e={}){return super.data(e)}}class Gu{constructor(e,t,o,u){this._firestore=e,this._userDataWriter=t,this._snapshot=u,this.metadata=new pl(u.hasPendingWrites,u.fromCache),this.query=o}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(o=>{e.call(t,new Uc(this._firestore,this._userDataWriter,o.key,o,new pl(this._snapshot.mutatedKeys.has(o.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Et(Qe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(o,u){if(o._snapshot.oldDocs.isEmpty()){let d=0;return o._snapshot.docChanges.map(g=>({type:"added",doc:new Uc(o._firestore,o._userDataWriter,g.doc.key,g.doc,new pl(o._snapshot.mutatedKeys.has(g.doc.key),o._snapshot.fromCache),o.query.converter),oldIndex:-1,newIndex:d++}))}{let d=o._snapshot.oldDocs;return o._snapshot.docChanges.filter(g=>u||3!==g.type).map(g=>{const D=new Uc(o._firestore,o._userDataWriter,g.doc.key,g.doc,new pl(o._snapshot.mutatedKeys.has(g.doc.key),o._snapshot.fromCache),o.query.converter);let L=-1,H=-1;return 0!==g.type&&(L=d.indexOf(g.doc.key),d=d.delete(g.doc.key)),1!==g.type&&(d=d.add(g.doc),H=d.indexOf(g.doc.key)),{type:Xm(g.type),doc:D,oldIndex:L,newIndex:H}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function Xm(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Qt()}}function fg(i,e){return i instanceof Tu&&e instanceof Tu?i._firestore===e._firestore&&i._key.isEqual(e._key)&&(null===i._document?null===e._document:i._document.isEqual(e._document))&&i._converter===e._converter:i instanceof Gu&&e instanceof Gu&&i._firestore===e._firestore&&hl(i.query,e.query)&&i.metadata.isEqual(e.metadata)&&i._snapshot.isEqual(e._snapshot)}function Kv(i){if("L"===i.limitType&&0===i.explicitOrderBy.length)throw new Et(Qe.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Gd{}function gl(i,...e){for(const t of e)i=t._apply(i);return i}class ey extends Gd{constructor(e,t,o){super(),this.wa=e,this.ma=t,this.ga=o,this.type="where"}_apply(e){const t=Hu(e.firestore),o=function(u,d,g,D,L,H,Q){let _e;if(L.isKeyField()){if("array-contains"===H||"array-contains-any"===H)throw new Et(Qe.INVALID_ARGUMENT,`Invalid Query. You can't perform '${H}' queries on documentId().`);if("in"===H||"not-in"===H){gg(Q,H);const ct=[];for(const mt of Q)ct.push(ay(D,u,mt));_e={arrayValue:{values:ct}}}else _e=ay(D,u,Q)}else"in"!==H&&"not-in"!==H&&"array-contains-any"!==H||gg(Q,H),_e=cg(g,"where",Q,"in"===H||"not-in"===H);const Ge=mo.create(L,H,_e);return function(ct,mt){if(mt.dt()){const hn=sh(ct);if(null!==hn&&!hn.isEqual(mt.field))throw new Et(Qe.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${hn.toString()}' and '${mt.field.toString()}'`);const Gr=ih(ct);null!==Gr&&e_(0,mt.field,Gr)}const Yt=function(hn,Gr){for(const ci of hn.filters)if(Gr.indexOf(ci.op)>=0)return ci.op;return null}(ct,function(hn){switch(hn){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(mt.op));if(null!==Yt)throw new Et(Qe.INVALID_ARGUMENT,Yt===mt.op?`Invalid query. You cannot use more than one '${mt.op.toString()}' filter.`:`Invalid query. You cannot use '${mt.op.toString()}' filters with '${Yt.toString()}' filters.`)}(u,Ge),Ge}(e._query,0,t,e.firestore._databaseId,this.wa,this.ma,this.ga);return new ea(e.firestore,e.converter,function(u,d){const g=u.filters.concat([d]);return new ro(u.path,u.collectionGroup,u.explicitOrderBy.slice(),g,u.limit,u.limitType,u.startAt,u.endAt)}(e._query,o))}}class yo extends Gd{constructor(e,t){super(),this.wa=e,this.ya=t,this.type="orderBy"}_apply(e){const t=function(o,u,d){if(null!==o.startAt)throw new Et(Qe.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==o.endAt)throw new Et(Qe.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const g=new lu(u,d);return function(D,L){if(null===ih(D)){const H=sh(D);null!==H&&e_(0,H,L.field)}}(o,g),g}(e._query,this.wa,this.ya);return new ea(e.firestore,e.converter,function(o,u){const d=o.explicitOrderBy.concat([u]);return new ro(o.path,o.collectionGroup,d,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)}(e._query,t))}}class ny extends Gd{constructor(e,t,o){super(),this.type=e,this.pa=t,this.Ia=o}_apply(e){return new ea(e.firestore,e.converter,dc(e._query,this.pa,this.Ia))}}class iy extends Gd{constructor(e,t,o){super(),this.type=e,this.Ta=t,this.Ea=o}_apply(e){const t=pg(e,this.type,this.Ta,this.Ea);return new ea(e.firestore,e.converter,(u=t,new ro((o=e._query).path,o.collectionGroup,o.explicitOrderBy.slice(),o.filters.slice(),o.limit,o.limitType,u,o.endAt)));var o,u}}class ec extends Gd{constructor(e,t,o){super(),this.type=e,this.Ta=t,this.Ea=o}_apply(e){const t=pg(e,this.type,this.Ta,this.Ea);return new ea(e.firestore,e.converter,(u=t,new ro((o=e._query).path,o.collectionGroup,o.explicitOrderBy.slice(),o.filters.slice(),o.limit,o.limitType,o.startAt,u)));var o,u}}function pg(i,e,t,o){if(t[0]=(0,tt.m9)(t[0]),t[0]instanceof Xl)return function(u,d,g,D,L){if(!D)throw new Et(Qe.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${g}().`);const H=[];for(const Q of cc(u))if(Q.field.isKeyField())H.push(Uo(d,D.key));else{const _e=D.data.field(Q.field);if(_l(_e))throw new Et(Qe.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+Q.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===_e){const Ge=Q.field.canonicalString();throw new Et(Qe.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${Ge}' (used as the orderBy) does not exist.`)}H.push(_e)}return new uu(H,L)}(i._query,i.firestore._databaseId,e,t[0]._document,o);{const u=Hu(i.firestore);return function(d,g,D,L,H,Q){const _e=d.explicitOrderBy;if(H.length>_e.length)throw new Et(Qe.INVALID_ARGUMENT,`Too many arguments provided to ${L}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const Ge=[];for(let ct=0;ct<H.length;ct++){const mt=H[ct];if(_e[ct].field.isKeyField()){if("string"!=typeof mt)throw new Et(Qe.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${L}(), but got a ${typeof mt}`);if(!oh(d)&&-1!==mt.indexOf("/"))throw new Et(Qe.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${L}() must be a plain document ID, but '${mt}' contains a slash.`);const Yt=d.path.child(mr.fromString(mt));if(!zt.isDocumentKey(Yt))throw new Et(Qe.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${L}() must result in a valid document path, but '${Yt}' is not because it contains an odd number of segments.`);const hn=new zt(Yt);Ge.push(Uo(g,hn))}else{const Yt=cg(D,L,mt);Ge.push(Yt)}}return new uu(Ge,Q)}(i._query,i.firestore._databaseId,u,e,t,o)}}function ay(i,e,t){if("string"==typeof(t=(0,tt.m9)(t))){if(""===t)throw new Et(Qe.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!oh(e)&&-1!==t.indexOf("/"))throw new Et(Qe.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const o=e.path.child(mr.fromString(t));if(!zt.isDocumentKey(o))throw new Et(Qe.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${o}' is not because it has an odd number of segments (${o.length}).`);return Uo(i,new zt(o))}if(t instanceof ss)return Uo(i,t._key);throw new Et(Qe.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${hf(t)}.`)}function gg(i,e){if(!Array.isArray(i)||0===i.length)throw new Et(Qe.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(i.length>10)throw new Et(Qe.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function e_(i,e,t){if(!t.isEqual(e))throw new Et(Qe.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}const uy={maxAttempts:5};class zd{convertValue(e,t="none"){switch(Tn(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Fi(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(wi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Qt()}}convertObject(e,t){const o={};return et(e.fields,(u,d)=>{o[u]=this.convertValue(d,t)}),o}convertGeoPoint(e){return new gf(Fi(e.latitude),Fi(e.longitude))}convertArray(e,t){return(e.values||[]).map(o=>this.convertValue(o,t))}convertServerTimestamp(e,t){switch(t){case"previous":const o=M(e);return null==o?null:this.convertValue(o,t);case"estimate":return this.convertTimestamp(k(e));default:return null}}convertTimestamp(e){const t=go(e);return new Mi(t.seconds,t.nanos)}convertDocumentKey(e,t){const o=mr.fromString(e);vn(qy(o));const u=new ie(o.get(1),o.get(3)),d=new zt(o.popFirst(5));return u.isEqual(t)||Pr(`Document ${d} contains a document reference within a different database (${u.projectId}/${u.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),d}}function Aa(i,e,t){let o;return o=i?t&&(t.merge||t.mergeFields)?i.toFirestore(e,t):i.toFirestore(e):e,o}class t_ extends zd{constructor(e){super(),this.firestore=e}convertBytes(e){return new bu(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new ss(this.firestore,null,t)}}class ly{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Hu(e)}set(e,t,o){this._verifyNotCommitted();const u=jo(e,this._firestore),d=Aa(u.converter,t,o),g=vf(this._dataReader,"WriteBatch.set",u._key,d,null!==u.converter,o);return this._mutations.push(g.toMutation(u._key,Ki.none())),this}update(e,t,o,...u){this._verifyNotCommitted();const d=jo(e,this._firestore);let g;return g="string"==typeof(t=(0,tt.m9)(t))||t instanceof Cu?$d(this._dataReader,"WriteBatch.update",d._key,t,o,u):Ef(this._dataReader,"WriteBatch.update",d._key,t),this._mutations.push(g.toMutation(d._key,Ki.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=jo(e,this._firestore);return this._mutations=this._mutations.concat(new Ml(t._key,Ki.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Et(Qe.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function jo(i,e){if((i=(0,tt.m9)(i)).firestore!==e)throw new Et(Qe.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return i}class $o extends zd{constructor(e){super(),this.firestore=e}convertBytes(e){return new bu(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new ss(this.firestore,null,t)}}function hy(i,e,t){i=Br(i,ss);const o=Br(i.firestore,bi),u=Aa(i.converter,e,t);return tc(o,[vf(Hu(o),"setDoc",i._key,u,null!==i.converter,t).toMutation(i._key,Ki.none())])}function Sf(i,e,t,...o){i=Br(i,ss);const u=Br(i.firestore,bi),d=Hu(u);let g;return g="string"==typeof(e=(0,tt.m9)(e))||e instanceof Cu?$d(d,"updateDoc",i._key,e,t,o):Ef(d,"updateDoc",i._key,e),tc(u,[g.toMutation(i._key,Ki.exists(!0))])}function mg(i,...e){var t,o,u;i=(0,tt.m9)(i);let d={includeMetadataChanges:!1},g=0;"object"!=typeof e[g]||wa(e[g])||(d=e[g],g++);const D={includeMetadataChanges:d.includeMetadataChanges};if(wa(e[g])){const _e=e[g];e[g]=null===(t=_e.next)||void 0===t?void 0:t.bind(_e),e[g+1]=null===(o=_e.error)||void 0===o?void 0:o.bind(_e),e[g+2]=null===(u=_e.complete)||void 0===u?void 0:u.bind(_e)}let L,H,Q;if(i instanceof ss)H=Br(i.firestore,bi),Q=Mu(i._key.path),L={next:_e=>{e[g]&&e[g](Af(H,i,_e))},error:e[g+1],complete:e[g+2]};else{const _e=Br(i,ea);H=Br(_e.firestore,bi),Q=_e._query;const Ge=new $o(H);L={next:ct=>{e[g]&&e[g](new Gu(H,Ge,_e,ct))},error:e[g+1],complete:e[g+2]},Kv(i._query)}return function(_e,Ge,ct,mt){const Yt=new Jp(mt),hn=new Nd(Ge,Yt,ct);return _e.asyncQueue.enqueueAndForget((0,he.Z)(function*(){return vm(yield Iu(_e),hn)})),()=>{Yt.Rc(),_e.asyncQueue.enqueueAndForget((0,he.Z)(function*(){return Od(yield Iu(_e),hn)}))}}(os(H),Q,D,L)}function tc(i,e){return function(t,o){const u=new Wi;return t.asyncQueue.enqueueAndForget((0,he.Z)(function*(){return function Cm(i,e,t){return Pd.apply(this,arguments)}(yield ng(t),o,u)})),u.promise}(os(i),e)}function Af(i,e,t){const o=t.docs.get(e._key),u=new $o(i);return new Tu(i,u,e._key,o,new pl(t.hasPendingWrites,t.fromCache),e.converter)}class xf extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Hu(e)}get(e){const t=jo(e,this._firestore),o=new t_(this._firestore);return this._transaction.lookup([t._key]).then(u=>{if(!u||1!==u.length)return Qt();const d=u[0];if(d.isFoundDocument())return new Xl(this._firestore,o,d.key,d,t.converter);if(d.isNoDocument())return new Xl(this._firestore,o,t._key,null,t.converter);throw Qt()})}set(e,t,o){const u=jo(e,this._firestore),d=Aa(u.converter,t,o),g=vf(this._dataReader,"Transaction.set",u._key,d,null!==u.converter,o);return this._transaction.set(u._key,g),this}update(e,t,o,...u){const d=jo(e,this._firestore);let g;return g="string"==typeof(t=(0,tt.m9)(t))||t instanceof Cu?$d(this._dataReader,"Transaction.update",d._key,t,o,u):Ef(this._dataReader,"Transaction.update",d._key,t),this._transaction.update(d._key,g),this}delete(e){const t=jo(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=jo(e,this._firestore),o=new $o(this._firestore);return super.get(e).then(u=>new Tu(this._firestore,o,t._key,u._document,new pl(!1,!1),t.converter))}}function Rf(i,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Et("invalid-argument",`Invalid options passed to function ${i}(): You cannot specify both "merge" and "mergeFields".`);return e}function _g(){if(typeof Uint8Array>"u")throw new Et("unimplemented","Uint8Arrays are not available in this environment.")}function vy(){if(!function Ko(){return typeof atob<"u"}())throw new Et("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(i,e=!0){ta=rt.SDK_VERSION,(0,rt._registerComponent)(new Je.wA("firestore",(t,{instanceIdentifier:o,options:u})=>{const d=t.getProvider("app").getImmediate(),g=new bi(new Na(t.getProvider("auth-internal")),new pa(t.getProvider("app-check-internal")),function(D,L){if(!Object.prototype.hasOwnProperty.apply(D.options,["projectId"]))throw new Et(Qe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ie(D.options.projectId,L)}(d,o),d);return u=Object.assign({useFetchStreams:e},u),g._setSettings(u),g},"PUBLIC").setMultipleInstances(!0)),(0,rt.registerVersion)(Ra,"3.4.15",i),(0,rt.registerVersion)(Ra,"3.4.15","esm2017")}();class qd{constructor(e){this._delegate=e}static fromBase64String(e){return vy(),new qd(bu.fromBase64String(e))}static fromUint8Array(e){return _g(),new qd(bu.fromUint8Array(e))}toBase64(){return vy(),this._delegate.toBase64()}toUint8Array(){return _g(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function wg(i){return function c_(i,e){if("object"!=typeof i||null===i)return!1;const t=i;for(const o of e)if(o in t&&"function"==typeof t[o])return!0;return!1}(i,["next","error","complete"])}class d_{enableIndexedDbPersistence(e,t){return function Lc(i,e){ag(i=Br(i,bi));const t=os(i),o=i._freezeSettings(),u=new af;return Kl(t,u,new Rm(u,o.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function Vc(i){ag(i=Br(i,bi));const e=os(i),t=i._freezeSettings(),o=new af;return Kl(e,o,new Qp(o,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function $m(i){if(i._initialized&&!i._terminated)throw new Et(Qe.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Wi;return i._queue.enqueueAndForgetEvenWhileRestricted((0,he.Z)(function*(){try{yield(t=(0,he.Z)(function*(o){if(!Ds.C())return Promise.resolve();const u=o+"main";yield Ds.delete(u)}),function(o){return t.apply(this,arguments)})(_p(i._databaseId,i._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class _y{constructor(e,t,o){this._delegate=t,this._persistenceProvider=o,this.INTERNAL={delete:()=>this.terminate()},e instanceof ie||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Fo("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,o={}){!function Ud(i,e,t,o={}){var u;const d=(i=Br(i,ff))._getSettings();if("firestore.googleapis.com"!==d.host&&d.host!==e&&Fo("Host has been set in both settings() and useEmulator(), emulator host will be used"),i._setSettings(Object.assign(Object.assign({},d),{host:`${e}:${t}`,ssl:!1})),o.mockUserToken){let g,D;if("string"==typeof o.mockUserToken)g=o.mockUserToken,D=zi.MOCK_USER;else{g=(0,tt.Sg)(o.mockUserToken,null===(u=i._app)||void 0===u?void 0:u.options.projectId);const L=o.mockUserToken.sub||o.mockUserToken.user_id;if(!L)throw new Et(Qe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");D=new zi(L)}i._authCredentials=new Ia(new qi(g,D))}}(this._delegate,e,t,o)}enableNetwork(){return function Gm(i){return function h0(i){return i.asyncQueue.enqueue((0,he.Z)(function*(){const e=yield cf(i),t=yield Pm(i);return e.setNetworkEnabled(!0),function(o){const u=Ht(o);return u._u.delete(0),Ac(u)}(t)}))}(os(i=Br(i,bi)))}(this._delegate)}disableNetwork(){return function zm(i){return function Hv(i){return i.asyncQueue.enqueue((0,he.Z)(function*(){const e=yield cf(i),t=yield Pm(i);return e.setNetworkEnabled(!1),(o=(0,he.Z)(function*(u){const d=Ht(u);d._u.add(0),yield Id(d),d.gu.set("Offline")}),function(u){return o.apply(this,arguments)})(t);var o}))}(os(i=Br(i,bi)))}(this._delegate)}enablePersistence(e){let t=!1,o=!1;return e&&(t=!!e.synchronizeTabs,o=!!e.experimentalForceOwningTab,Vm("synchronizeTabs",t,"experimentalForceOwningTab",o)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,o)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function Hm(i){return function(e){const t=new Wi;return e.asyncQueue.enqueueAndForget((0,he.Z)(function*(){return function Tm(i,e){return jp.apply(this,arguments)}(yield ng(e),t)})),t.promise}(os(i=Br(i,bi)))}(this._delegate)}onSnapshotsInSync(e){return function o_(i,e){return function zv(i,e){const t=new Jp(e);return i.asyncQueue.enqueueAndForget((0,he.Z)(function*(){return o=yield Iu(i),u=t,Ht(o).Ru.add(u),void u.next();var o,u})),()=>{t.Rc(),i.asyncQueue.enqueueAndForget((0,he.Z)(function*(){return o=yield Iu(i),u=t,void Ht(o).Ru.delete(u);var o,u}))}}(os(i=Br(i,bi)),wa(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Et("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new rc(this,jm(this._delegate,e))}catch(t){throw ua(t,"collection()","Firestore.collection()")}}doc(e){try{return new Ga(this,dl(this._delegate,e))}catch(t){throw ua(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new la(this,function Du(i,e){if(i=Br(i,ff),sg("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Et(Qe.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new ea(i,null,(t=e,new ro(mr.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw ua(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function a_(i,e,t){i=Br(i,bi);const o=Object.assign(Object.assign({},uy),t);return function(u){if(u.maxAttempts<1)throw new Et(Qe.INVALID_ARGUMENT,"Max attempts must be at least 1")}(o),function Lm(i,e,t){const o=new Wi;return i.asyncQueue.enqueueAndForget((0,he.Z)(function*(){const u=yield(d=i,ll(d).then(g=>g.datastore));var d;new Om(i.asyncQueue,u,t,e,o).run()})),o.promise}(os(i),u=>e(new xf(i,u)),o)}(this._delegate,t=>e(new wy(this,t)))}batch(){return os(this._delegate),new Ey(new ly(this._delegate,e=>tc(this._delegate,e)))}loadBundle(e){return function Wm(i,e){const t=os(i=Br(i,bi)),o=new og;return function ig(i,e,t,o){const u=function(d,g){let D;return D="string"==typeof d?(new TextEncoder).encode(d):d,L=function(L,H){if(L instanceof Uint8Array)return $v(L,H);if(L instanceof ArrayBuffer)return $v(new Uint8Array(L),H);if(L instanceof ReadableStream)return L.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(D),new Xp(L,g);var L}(t,wd(e));i.asyncQueue.enqueueAndForget((0,he.Z)(function*(){!function rf(i,e,t){const o=Ht(i);var u;(u=(0,he.Z)(function*(d,g,D){try{const L=yield g.getMetadata();if(yield function(Ge,ct){const mt=Ht(Ge),Yt=zs(ct.createTime);return mt.persistence.runTransaction("hasNewerBundle","readonly",hn=>mt.Ns.getBundleMetadata(hn,ct.id)).then(hn=>!!hn&&hn.createTime.compareTo(Yt)>=0)}(d.localStore,L))return yield g.close(),D._completeWith({taskState:"Success",documentsLoaded:(Ge=L).totalDocuments,bytesLoaded:Ge.totalBytes,totalDocuments:Ge.totalDocuments,totalBytes:Ge.totalBytes}),Promise.resolve(new Set);D._updateProgress(Em(L));const H=new wm(L,d.localStore,g.It);let Q=yield g.wc();for(;Q;){const Ge=yield H.Ou(Q);Ge&&D._updateProgress(Ge),Q=yield g.wc()}const _e=yield H.complete();return yield $u(d,_e.Bu,void 0),yield function(Ge,ct){const mt=Ht(Ge);return mt.persistence.runTransaction("Save bundle","readwrite",Yt=>mt.Ns.saveBundleMetadata(Yt,ct))}(d.localStore,L),D._completeWith(_e.progress),Promise.resolve(_e.$u)}catch(L){return Fo("SyncEngine",`Loading bundle failed with ${L}`),D._failWith(L),Promise.resolve(new Set)}var Ge}),function(d,g,D){return u.apply(this,arguments)})(o,e,t).then(u=>{o.sharedClientState.notifyBundleLoaded(u)})}(yield ng(i),u,o)}))}(t,i._databaseId,e,o),o}(this._delegate,e)}namedQuery(e){return function qm(i,e){return function Wv(i,e){return i.asyncQueue.enqueue((0,he.Z)(function*(){return function(t,o){const u=Ht(t);return u.persistence.runTransaction("Get named query","readonly",d=>u.Ns.getNamedQuery(d,o))}(yield Ld(i),e)}))}(os(i=Br(i,bi)),e).then(t=>t?new ea(i,null,t.query):null)}(this._delegate,e).then(t=>t?new la(this,t):null)}}class Of extends zd{constructor(e){super(),this.firestore=e}convertBytes(e){return new qd(new bu(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Ga.forKey(t,this.firestore,null)}}class wy{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new Of(e)}get(e){const t=ml(e);return this._delegate.get(t).then(o=>new Zd(this._firestore,new Tu(this._firestore._delegate,this._userDataWriter,o._key,o._document,o.metadata,t.converter)))}set(e,t,o){const u=ml(e);return o?(Rf("Transaction.set",o),this._delegate.set(u,t,o)):this._delegate.set(u,t),this}update(e,t,o,...u){const d=ml(e);return 2===arguments.length?this._delegate.update(d,t):this._delegate.update(d,t,o,...u),this}delete(e){const t=ml(e);return this._delegate.delete(t),this}}class Ey{constructor(e){this._delegate=e}set(e,t,o){const u=ml(e);return o?(Rf("WriteBatch.set",o),this._delegate.set(u,t,o)):this._delegate.set(u,t),this}update(e,t,o,...u){const d=ml(e);return 2===arguments.length?this._delegate.update(d,t):this._delegate.update(d,t,o,...u),this}delete(e){const t=ml(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class nc{constructor(e,t,o){this._firestore=e,this._userDataWriter=t,this._delegate=o}fromFirestore(e,t){const o=new Uc(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Kd(this._firestore,o),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const o=nc.INSTANCES;let u=o.get(e);u||(u=new WeakMap,o.set(e,u));let d=u.get(t);return d||(d=new nc(e,new Of(e),t),u.set(t,d)),d}}nc.INSTANCES=new WeakMap;class Ga{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Of(e)}static forPath(e,t,o){if(e.length%2!=0)throw new Et("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Ga(t,new ss(t._delegate,o,new zt(e)))}static forKey(e,t,o){return new Ga(t,new ss(t._delegate,o,e))}get id(){return this._delegate.id}get parent(){return new rc(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new rc(this.firestore,jm(this._delegate,e))}catch(t){throw ua(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,tt.m9)(e))instanceof ss&&Bo(this._delegate,e)}set(e,t){t=Rf("DocumentReference.set",t);try{return t?hy(this._delegate,e,t):hy(this._delegate,e)}catch(o){throw ua(o,"setDoc()","DocumentReference.set()")}}update(e,t,...o){try{return 1===arguments.length?Sf(this._delegate,e):Sf(this._delegate,e,t,...o)}catch(u){throw ua(u,"updateDoc()","DocumentReference.update()")}}delete(){return function Wd(i){return tc(Br(i.firestore,bi),[new Ml(i._key,Ki.none())])}(this._delegate)}onSnapshot(...e){const t=Iy(e),o=Dy(e,u=>new Zd(this.firestore,new Tu(this.firestore._delegate,this._userDataWriter,u._key,u._document,u.metadata,this._delegate.converter)));return mg(this._delegate,t,o)}get(e){let t;return t="cache"===e?.source?function cy(i){i=Br(i,ss);const e=Br(i.firestore,bi),t=os(e),o=new $o(e);return function f0(i,e){const t=new Wi;return i.asyncQueue.enqueueAndForget((0,he.Z)(function*(){return(o=(0,he.Z)(function*(u,d,g){try{const D=yield function(L,H){const Q=Ht(L);return Q.persistence.runTransaction("read document","readonly",_e=>Q.localDocuments.getDocument(_e,H))}(u,d);D.isFoundDocument()?g.resolve(D):D.isNoDocument()?g.resolve(null):g.reject(new Et(Qe.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(D){const L=xd(D,`Failed to get document '${d} from cache`);g.reject(L)}}),function(u,d,g){return o.apply(this,arguments)})(yield Ld(i),e,t);var o})),t.promise}(t,i._key).then(u=>new Tu(e,o,i._key,u,new pl(null!==u&&u.hasLocalMutations,!0),i.converter))}(this._delegate):"server"===e?.source?function dy(i){i=Br(i,ss);const e=Br(i.firestore,bi);return km(os(e),i._key,{source:"server"}).then(t=>Af(e,i,t))}(this._delegate):function tu(i){i=Br(i,ss);const e=Br(i.firestore,bi);return km(os(e),i._key).then(t=>Af(e,i,t))}(this._delegate),t.then(o=>new Zd(this.firestore,new Tu(this.firestore._delegate,this._userDataWriter,o._key,o._document,o.metadata,this._delegate.converter)))}withConverter(e){return new Ga(this.firestore,this._delegate.withConverter(e?nc.getInstance(this.firestore,e):null))}}function ua(i,e,t){return i.message=i.message.replace(e,t),i}function Iy(i){for(const e of i)if("object"==typeof e&&!wg(e))return e;return{}}function Dy(i,e){var t,o;let u;return u=wg(i[0])?i[0]:wg(i[1])?i[1]:"function"==typeof i[0]?{next:i[0],error:i[1],complete:i[2]}:{next:i[1],error:i[2],complete:i[3]},{next:d=>{u.next&&u.next(e(d))},error:null===(t=u.error)||void 0===t?void 0:t.bind(u),complete:null===(o=u.complete)||void 0===o?void 0:o.bind(u)}}class Zd{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Ga(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return fg(this._delegate,e._delegate)}}class Kd extends Zd{data(e){const t=this._delegate.data(e);return function Au(i,e){i||Qt()}(void 0!==t),t}}class la{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Of(e)}where(e,t,o){try{return new la(this.firestore,gl(this._delegate,function Yv(i,e,t){const o=e,u=Hd("where",i);return new ey(u,o,t)}(e,t,o)))}catch(u){throw ua(u,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new la(this.firestore,gl(this._delegate,function ty(i,e="asc"){const t=e,o=Hd("orderBy",i);return new yo(o,t)}(e,t)))}catch(o){throw ua(o,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new la(this.firestore,gl(this._delegate,function Qv(i){return Vd("limit",i),new ny("limit",i,"F")}(e)))}catch(t){throw ua(t,"limit()","Query.limit()")}}limitToLast(e){try{return new la(this.firestore,gl(this._delegate,function ry(i){return Vd("limitToLast",i),new ny("limitToLast",i,"L")}(e)))}catch(t){throw ua(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new la(this.firestore,gl(this._delegate,function sy(...i){return new iy("startAt",i,!0)}(...e)))}catch(t){throw ua(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new la(this.firestore,gl(this._delegate,function oy(...i){return new iy("startAfter",i,!1)}(...e)))}catch(t){throw ua(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new la(this.firestore,gl(this._delegate,function Jv(...i){return new ec("endBefore",i,!1)}(...e)))}catch(t){throw ua(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new la(this.firestore,gl(this._delegate,function Xv(...i){return new ec("endAt",i,!0)}(...e)))}catch(t){throw ua(t,"endAt()","Query.endAt()")}}isEqual(e){return hl(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function r_(i){i=Br(i,ea);const e=Br(i.firestore,bi),t=os(e),o=new $o(e);return function Gv(i,e){const t=new Wi;return i.asyncQueue.enqueueAndForget((0,he.Z)(function*(){return(o=(0,he.Z)(function*(u,d,g){try{const D=yield Oh(u,d,!0),L=new Dm(d,D.Hi),H=L.ju(D.documents),Q=L.applyChanges(H,!1);g.resolve(Q.snapshot)}catch(D){const L=xd(D,`Failed to execute query '${d} against cache`);g.reject(L)}}),function(u,d,g){return o.apply(this,arguments)})(yield Ld(i),e,t);var o})),t.promise}(t,i._query).then(u=>new Gu(e,o,i,u))}(this._delegate):"server"===e?.source?function i_(i){i=Br(i,ea);const e=Br(i.firestore,bi),t=os(e),o=new $o(e);return Fm(t,i._query,{source:"server"}).then(u=>new Gu(e,o,i,u))}(this._delegate):function n_(i){i=Br(i,ea);const e=Br(i.firestore,bi),t=os(e),o=new $o(e);return Kv(i._query),Fm(t,i._query).then(u=>new Gu(e,o,i,u))}(this._delegate),t.then(o=>new Nf(this.firestore,new Gu(this.firestore._delegate,this._userDataWriter,this._delegate,o._snapshot)))}onSnapshot(...e){const t=Iy(e),o=Dy(e,u=>new Nf(this.firestore,new Gu(this.firestore._delegate,this._userDataWriter,this._delegate,u._snapshot)));return mg(this._delegate,t,o)}withConverter(e){return new la(this.firestore,this._delegate.withConverter(e?nc.getInstance(this.firestore,e):null))}}class Cy{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Kd(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class Nf{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new la(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Kd(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new Cy(this._firestore,t))}forEach(e,t){this._delegate.forEach(o=>{e.call(t,new Kd(this._firestore,o))})}isEqual(e){return fg(this._delegate,e._delegate)}}class rc extends la{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Ga(this.firestore,e):null}doc(e){try{return new Ga(this.firestore,void 0===e?dl(this._delegate):dl(this._delegate,e))}catch(t){throw ua(t,"doc()","CollectionReference.doc()")}}add(e){return function s_(i,e){const t=Br(i.firestore,bi),o=dl(i),u=Aa(i.converter,e);return tc(t,[vf(Hu(i.firestore),"addDoc",o._key,u,null!==i.converter,{}).toMutation(o._key,Ki.exists(!1))]).then(()=>o)}(this._delegate,e).then(t=>new Ga(this.firestore,t))}isEqual(e){return Bo(this._delegate,e._delegate)}withConverter(e){return new rc(this.firestore,this._delegate.withConverter(e?nc.getInstance(this.firestore,e):null))}}function ml(i){return Br(i,ss)}class Pf{constructor(...e){this._delegate=new Cu(...e)}static documentId(){return new Pf(yi.keyField().canonicalString())}isEqual(e){return(e=(0,tt.m9)(e))instanceof Cu&&this._delegate._internalPath.isEqual(e._internalPath)}}class yl{constructor(e){this._delegate=e}static serverTimestamp(){const e=function py(){return new wf("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new yl(e)}static delete(){const e=function fy(){return new Ql("deleteField")}();return e._methodName="FieldValue.delete",new yl(e)}static arrayUnion(...e){const t=function yg(...i){return new Ym("arrayUnion",i)}(...e);return t._methodName="FieldValue.arrayUnion",new yl(t)}static arrayRemove(...e){const t=function Mf(...i){return new lg("arrayRemove",i)}(...e);return t._methodName="FieldValue.arrayRemove",new yl(t)}static increment(e){const t=function gy(i){return new Qm("increment",i)}(e);return t._methodName="FieldValue.increment",new yl(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const by={Firestore:_y,GeoPoint:gf,Timestamp:Mi,Blob:qd,Transaction:wy,WriteBatch:Ey,DocumentReference:Ga,DocumentSnapshot:Zd,Query:la,QueryDocumentSnapshot:Kd,QuerySnapshot:Nf,CollectionReference:rc,FieldPath:Pf,FieldValue:yl,setLogLevel:function h_(i){!function fa(i){to.setLogLevel(i)}(i)},CACHE_SIZE_UNLIMITED:-1};!function Sy(i){(function Ty(i,e){i.INTERNAL.registerComponent(new Je.wA("firestore-compat",t=>{const o=t.getProvider("app-compat").getImmediate(),u=t.getProvider("firestore").getImmediate();return e(o,u)},"PUBLIC").setServiceProps(Object.assign({},by)))})(i,(e,t)=>new _y(e,t,new d_)),i.registerVersion("@firebase/firestore-compat","0.1.24")}(jt.Z);var zu=V(1205),Ay=V(440),ic=V(127);function xy(i,e){return function f_(i,e=C.z){return new G.y(t=>{let o;return null!=e?e.schedule(()=>{o=i.onSnapshot({includeMetadataChanges:!0},t)}):o=i.onSnapshot({includeMetadataChanges:!0},t),()=>{o?.()}})}(i,e)}function My(i,e){return xy(i,e).pipe((0,ue.U)(t=>({payload:t,type:"query"})))}function jc(i,e){return My(i,e).pipe((0,Re.O)(void 0),le(),(0,ue.U)(([t,o])=>{const u=o.payload.docChanges(),d=u.map(g=>({type:g.type,payload:g}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(o.payload.metadata)&&o.payload.docs.forEach((g,D)=>{const L=u.find(Q=>Q.doc.ref.isEqual(g.ref)),H=t?.payload.docs.find(Q=>Q.ref.isEqual(g.ref));L&&JSON.stringify(L.doc.metadata)===JSON.stringify(g.metadata)||!L&&H&&JSON.stringify(H.metadata)===JSON.stringify(g.metadata)||d.push({type:"modified",payload:{oldIndex:D,newIndex:D,type:"modified",doc:g}})}),d}))}function p_(i,e,t){return jc(i,t).pipe((0,Ce.R)((o,u)=>function Ry(i,e,t){return e.forEach(o=>{t.indexOf(o.type)>-1&&(i=function g0(i,e){switch(e.type){case"added":if(!i[e.newIndex]||!i[e.newIndex].doc.ref.isEqual(e.doc.ref))return kf(i,e.newIndex,0,e);break;case"modified":if(null==i[e.oldIndex]||i[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=i.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return kf(i,e.newIndex,1,e)}break;case"removed":if(i[e.oldIndex]&&i[e.oldIndex].doc.ref.isEqual(e.doc.ref))return kf(i,e.oldIndex,1)}return i}(i,o))}),i}(o,u.map(d=>d.payload),e),[]),function ot(i,e=yt.y){return i=i??Ze,(0,Oe.e)((t,o)=>{let u,d=!0;t.subscribe((0,ke.x)(o,g=>{const D=e(g);(d||!i(u,D))&&(d=!1,u=D,o.next(g))}))})}(),(0,ue.U)(o=>o.map(u=>({type:u.type,payload:u}))))}function kf(i,e,t,...o){const u=i.slice();return u.splice(e,t,...o),u}function Bn(i){return(!i||0===i.length)&&(i=["added","removed","modified"]),i}class Oy{constructor(e,t,o){this.ref=e,this.query=t,this.afs=o}stateChanges(e){let t=jc(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,ue.U)(o=>o.filter(u=>e.indexOf(u.type)>-1)))),t.pipe((0,Re.O)(void 0),le(),(0,Ot.h)(([o,u])=>u.length>0||!o),(0,ue.U)(([o,u])=>u),Me.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,Ce.R)((t,o)=>[...t,...o],[]))}snapshotChanges(e){const t=Bn(e);return p_(this.query,t,this.afs.schedulers.outsideAngular).pipe(Me.iC)}valueChanges(e={}){return My(this.query,this.afs.schedulers.outsideAngular).pipe((0,ue.U)(t=>t.payload.docs.map(o=>e.idField?Object.assign(Object.assign({},o.data()),{[e.idField]:o.id}):o.data())),Me.iC)}get(e){return(0,be.D)(this.query.get(e)).pipe(Me.iC)}add(e){return this.ref.add(e)}doc(e){return new Ny(this.ref.doc(e),this.afs)}}class Ny{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const o=this.ref.collection(e),{ref:u,query:d}=As(o,t);return new Oy(u,d,this.afs)}snapshotChanges(){return function Bc(i,e){return xy(i,e).pipe((0,Re.O)(void 0),le(),(0,ue.U)(([t,o])=>o.exists?t?.exists?{payload:o,type:"modified"}:{payload:o,type:"added"}:{payload:o,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Me.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,ue.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,be.D)(this.ref.get(e)).pipe(Me.iC)}}class g_{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?jc(this.query,this.afs.schedulers.outsideAngular).pipe((0,ue.U)(t=>t.filter(o=>e.indexOf(o.type)>-1)),(0,Ot.h)(t=>t.length>0),Me.iC):jc(this.query,this.afs.schedulers.outsideAngular).pipe(Me.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,Ce.R)((t,o)=>[...t,...o],[]))}snapshotChanges(e){const t=Bn(e);return p_(this.query,t,this.afs.schedulers.outsideAngular).pipe(Me.iC)}valueChanges(e={}){return My(this.query,this.afs.schedulers.outsideAngular).pipe((0,ue.U)(o=>o.payload.docs.map(u=>e.idField?Object.assign({[e.idField]:u.id},u.data()):u.data())),Me.iC)}get(e){return(0,be.D)(this.query.get(e)).pipe(Me.iC)}}const sc=new p.OlP("angularfire2.enableFirestorePersistence"),Py=new p.OlP("angularfire2.firestore.persistenceSettings"),Ff=new p.OlP("angularfire2.firestore.settings"),Lf=new p.OlP("angularfire2.firestore.use-emulator");function As(i,e=(t=>t)){return{query:e(i),ref:i}}let m_=(()=>{class i{constructor(t,o,u,d,g,D,L,H,Q,_e,Ge,ct,mt,Yt,hn,Gr,ci){this.schedulers=L;const jr=(0,Ke.on)(t,D,o),xs=Q;_e&&(0,zu.nw)(jr,D,Ge,mt,Yt,hn,ct,Gr),[this.firestore,this.persistenceEnabled$]=(0,Ke.cc)(`${jr.name}.firestore`,"AngularFirestore",jr.name,()=>{const di=D.runOutsideAngular(()=>jr.firestore());if(d&&di.settings(d),xs&&di.useEmulator(...xs),u&&!(0,He.PM)(g)){const Ei=()=>{try{return(0,be.D)(di.enablePersistence(H||void 0).then(()=>!0,()=>!1))}catch(so){return typeof console<"u"&&console.warn(so),(0,we.of)(!1)}};return[di,D.runOutsideAngular(Ei)]}return[di,(0,we.of)(!1)]},[d,xs,u])}collection(t,o){let u;u="string"==typeof t?this.firestore.collection(t):t;const{ref:d,query:g}=As(u,o),D=this.schedulers.ngZone.run(()=>d);return new Oy(D,g,this)}collectionGroup(t,o){const u=o||(g=>g),d=this.firestore.collectionGroup(t);return new g_(u(d),this)}doc(t){let o;o="string"==typeof t?this.firestore.doc(t):t;const u=this.schedulers.ngZone.run(()=>o);return new Ny(u,this)}createId(){return this.firestore.collection("_").doc().id}}return i.\u0275fac=function(t){return new(t||i)(p.LFG(Ke.Dh),p.LFG(Ke.xv,8),p.LFG(sc,8),p.LFG(Ff,8),p.LFG(p.Lbi),p.LFG(p.R0b),p.LFG(Me.HU),p.LFG(Py,8),p.LFG(Lf,8),p.LFG(zu.zQ,8),p.LFG(zu.Qv,8),p.LFG(zu.L6,8),p.LFG(zu._Q,8),p.LFG(zu.rT,8),p.LFG(zu.lh,8),p.LFG(zu.f7,8),p.LFG(Ay.nm,8))},i.\u0275prov=p.Yz7({token:i,factory:i.\u0275fac,providedIn:"any"}),i})(),ky=(()=>{class i{constructor(){ic.Z.registerVersion("angularfire",Me.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:i,providers:[{provide:sc,useValue:!0},{provide:Py,useValue:t}]}}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=p.oAB({type:i}),i.\u0275inj=p.cJS({providers:[m_]}),i})()},2011:(Gt,We,V)=>{V.d(We,{Dh:()=>Oe,GT:()=>Me,cc:()=>ot,hO:()=>yt,on:()=>le,pX:()=>we,xv:()=>ke});var p=V(4650),C=V(127),G=V(5813);Gt=V.hmd(Gt);const be=["ngOnDestroy"],we=(He,Bt,jt,he={})=>new Proxy(He,{get:(rt,Je)=>jt.runOutsideAngular(()=>{var vt;if(He[Je])return!(null===(vt=he?.spy)||void 0===vt)&&vt.get&&he.spy.get(Je,He[Je]),He[Je];if(be.indexOf(Je)>-1)return()=>{};const tt=Bt.toPromise().then(ae=>{const Fe=ae&&ae[Je];return"function"==typeof Fe?Fe.bind(ae):Fe&&Fe.then?Fe.then(ne=>jt.run(()=>ne)):jt.run(()=>Fe)});return new Proxy(()=>{},{get:(ae,Fe)=>tt[Fe],apply:(ae,Fe,ne)=>tt.then(Ie=>{var de;const Ne=Ie&&Ie(...ne);return!(null===(de=he?.spy)||void 0===de)&&de.apply&&he.spy.apply(Je,ne,Ne),Ne})})})}),Me=(He,Bt)=>{Bt.forEach(jt=>{Object.getOwnPropertyNames(jt.prototype||jt).forEach(he=>{Object.defineProperty(He.prototype,he,Object.getOwnPropertyDescriptor(jt.prototype||jt,he))})})};class Re{constructor(Bt){return Bt}}const Oe=new p.OlP("angularfire2.app.options"),ke=new p.OlP("angularfire2.app.name");function le(He,Bt,jt){const rt="object"==typeof jt&&jt||{};rt.name=rt.name||"string"==typeof jt&&jt||"[DEFAULT]";const vt=C.Z.apps.filter(tt=>tt&&tt.name===rt.name)[0]||Bt.runOutsideAngular(()=>C.Z.initializeApp(He,rt));try{JSON.stringify(He)!==JSON.stringify(vt.options)&&ue("error",`${vt.name} Firebase App already initialized with different options${Gt.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new Re(vt)}const ue=(He,...Bt)=>{(0,p.X6Q)()&&typeof console<"u"&&console[He](...Bt)},Ce={provide:Re,useFactory:le,deps:[Oe,p.R0b,[new p.FiY,ke]]};let yt=(()=>{class He{constructor(jt){C.Z.registerVersion("angularfire",G.q4.full,"core"),C.Z.registerVersion("angularfire",G.q4.full,"app-compat"),C.Z.registerVersion("angular",p.q4F.full,jt.toString())}static initializeApp(jt,he){return{ngModule:He,providers:[{provide:Oe,useValue:jt},{provide:ke,useValue:he}]}}}return He.\u0275fac=function(jt){return new(jt||He)(p.LFG(p.Lbi))},He.\u0275mod=p.oAB({type:He}),He.\u0275inj=p.cJS({providers:[Ce]}),He})();function ot(He,Bt,jt,he,rt){const[,Je,vt]=globalThis.\u0275AngularfireInstanceCache.find(tt=>tt[0]===He)||[];if(Je)return function Ze(He,Bt){try{return He.toString()===Bt.toString()}catch{return He===Bt}}(rt,vt)||(Ke("error",`${Bt} was already initialized on the ${jt} Firebase App with different settings.${Ot?" You may need to reload as Firebase is not HMR aware.":""}`),Ke("warn",{is:rt,was:vt})),Je;{const tt=he();return globalThis.\u0275AngularfireInstanceCache.push([He,tt,rt]),tt}}const Ot=!!Gt.hot,Ke=(He,...Bt)=>{(0,p.X6Q)()&&typeof console<"u"&&console[He](...Bt)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5813:(Gt,We,V)=>{V.d(We,{q4:()=>Cs,iC:()=>go,fc:()=>_i,HU:()=>po,vb:()=>rn,JM:()=>Rt});var p=V(4650),C=V(5867),G=V(5861),be=V(9681),we=V(2090),Me=V(4859),Re=V(1877),Oe=V(8766);const ke="@firebase/installations",le="0.5.12",Ce=`w:${le}`,yt="FIS_v2",Bt=new we.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function jt(M){return M instanceof we.ZR&&M.code.includes("request-failed")}function he({projectId:M}){return`https://firebaseinstallations.googleapis.com/v1/projects/${M}/installations`}function rt(M){return{token:M.token,requestStatus:2,expiresIn:Ie(M.expiresIn),creationTime:Date.now()}}function Je(M,k){return vt.apply(this,arguments)}function vt(){return(vt=(0,G.Z)(function*(M,k){const ie=(yield k.json()).error;return Bt.create("request-failed",{requestName:M,serverCode:ie.code,serverMessage:ie.message,serverStatus:ie.status})})).apply(this,arguments)}function tt({apiKey:M}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":M})}function ae(M,{refreshToken:k}){const W=tt(M);return W.append("Authorization",function de(M){return`${yt} ${M}`}(k)),W}function Fe(M){return ne.apply(this,arguments)}function ne(){return(ne=(0,G.Z)(function*(M){const k=yield M();return k.status>=500&&k.status<600?M():k})).apply(this,arguments)}function Ie(M){return Number(M.replace("s","000"))}function Ne(M,k){return dt.apply(this,arguments)}function dt(){return(dt=(0,G.Z)(function*({appConfig:M,heartbeatServiceProvider:k},{fid:W}){const ie=he(M),Pe=tt(M),Ye=k.getImmediate({optional:!0});if(Ye){const Tn=yield Ye.getHeartbeatsHeader();Tn&&Pe.append("x-firebase-client",Tn)}const Nt={method:"POST",headers:Pe,body:JSON.stringify({fid:W,authVersion:yt,appId:M.appId,sdkVersion:Ce})},_n=yield Fe(()=>fetch(ie,Nt));if(_n.ok){const Tn=yield _n.json();return{fid:Tn.fid||W,registrationStatus:2,refreshToken:Tn.refreshToken,authToken:rt(Tn.authToken)}}throw yield Je("Create Installation",_n)})).apply(this,arguments)}function wt(M){return new Promise(k=>{setTimeout(k,M)})}const Mt=/^[cdef][\w-]{21}$/;function ht(){try{const M=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(M),M[0]=112+M[0]%16;const W=function tn(M){return function Ct(M){return btoa(String.fromCharCode(...M)).replace(/\+/g,"-").replace(/\//g,"_")}(M).substr(0,22)}(M);return Mt.test(W)?W:""}catch{return""}}function Kt(M){return`${M.appName}!${M.appId}`}const on=new Map;function kt(M,k){const W=Kt(M);$n(W,k),function Wr(M,k){const W=function _r(){return!vr&&"BroadcastChannel"in self&&(vr=new BroadcastChannel("[Firebase] FID Change"),vr.onmessage=M=>{$n(M.data.key,M.data.fid)}),vr}();W&&W.postMessage({key:M,fid:k}),function yr(){0===on.size&&vr&&(vr.close(),vr=null)}()}(W,k)}function $n(M,k){const W=on.get(M);if(W)for(const ie of W)ie(k)}let vr=null;const rr="firebase-installations-store";let zn=null;function lr(){return zn||(zn=(0,Oe.X3)("firebase-installations-database",1,{upgrade:(M,k)=>{0===k&&M.createObjectStore(rr)}})),zn}function pt(M,k){return nr.apply(this,arguments)}function nr(){return(nr=(0,G.Z)(function*(M,k){const W=Kt(M),Pe=(yield lr()).transaction(rr,"readwrite"),Ye=Pe.objectStore(rr),It=yield Ye.get(W);return yield Ye.put(k,W),yield Pe.done,(!It||It.fid!==k.fid)&&kt(M,k.fid),k})).apply(this,arguments)}function En(M){return Hn.apply(this,arguments)}function Hn(){return(Hn=(0,G.Z)(function*(M){const k=Kt(M),ie=(yield lr()).transaction(rr,"readwrite");yield ie.objectStore(rr).delete(k),yield ie.done})).apply(this,arguments)}function ei(M,k){return ti.apply(this,arguments)}function ti(){return(ti=(0,G.Z)(function*(M,k){const W=Kt(M),Pe=(yield lr()).transaction(rr,"readwrite"),Ye=Pe.objectStore(rr),It=yield Ye.get(W),Nt=k(It);return void 0===Nt?yield Ye.delete(W):yield Ye.put(Nt,W),yield Pe.done,Nt&&(!It||It.fid!==Nt.fid)&&kt(M,Nt.fid),Nt})).apply(this,arguments)}function wr(M){return Ue.apply(this,arguments)}function Ue(){return(Ue=(0,G.Z)(function*(M){let k;const W=yield ei(M.appConfig,ie=>{const Pe=ge(ie),Ye=se(M,Pe);return k=Ye.registrationPromise,Ye.installationEntry});return""===W.fid?{installationEntry:yield k}:{installationEntry:W,registrationPromise:k}})).apply(this,arguments)}function ge(M){return At(M||{fid:ht(),registrationStatus:0})}function se(M,k){if(0===k.registrationStatus){if(!navigator.onLine)return{installationEntry:k,registrationPromise:Promise.reject(Bt.create("app-offline"))};const W={fid:k.fid,registrationStatus:1,registrationTime:Date.now()},ie=function Be(M,k){return st.apply(this,arguments)}(M,W);return{installationEntry:W,registrationPromise:ie}}return 1===k.registrationStatus?{installationEntry:k,registrationPromise:Lt(M)}:{installationEntry:k}}function st(){return(st=(0,G.Z)(function*(M,k){try{const W=yield Ne(M,k);return pt(M.appConfig,W)}catch(W){throw jt(W)&&409===W.customData.serverCode?yield En(M.appConfig):yield pt(M.appConfig,{fid:k.fid,registrationStatus:0}),W}})).apply(this,arguments)}function Lt(M){return Ft.apply(this,arguments)}function Ft(){return(Ft=(0,G.Z)(function*(M){let k=yield Vn(M.appConfig);for(;1===k.registrationStatus;)yield wt(100),k=yield Vn(M.appConfig);if(0===k.registrationStatus){const{installationEntry:W,registrationPromise:ie}=yield wr(M);return ie||W}return k})).apply(this,arguments)}function Vn(M){return ei(M,k=>{if(!k)throw Bt.create("installation-not-found");return At(k)})}function At(M){return function ir(M){return 1===M.registrationStatus&&M.registrationTime+1e4<Date.now()}(M)?{fid:M.fid,registrationStatus:0}:M}function xn(M,k){return Sr.apply(this,arguments)}function Sr(){return(Sr=(0,G.Z)(function*({appConfig:M,heartbeatServiceProvider:k},W){const ie=fn(M,W),Pe=ae(M,W),Ye=k.getImmediate({optional:!0});if(Ye){const Tn=yield Ye.getHeartbeatsHeader();Tn&&Pe.append("x-firebase-client",Tn)}const Nt={method:"POST",headers:Pe,body:JSON.stringify({installation:{sdkVersion:Ce,appId:M.appId}})},_n=yield Fe(()=>fetch(ie,Nt));if(_n.ok)return rt(yield _n.json());throw yield Je("Generate Auth Token",_n)})).apply(this,arguments)}function fn(M,{fid:k}){return`${he(M)}/${k}/authTokens:generate`}function me(M){return X.apply(this,arguments)}function X(){return(X=(0,G.Z)(function*(M,k=!1){let W;const ie=yield ei(M.appConfig,Ye=>{if(!Vt(Ye))throw Bt.create("not-registered");const It=Ye.authToken;if(!k&&ar(It))return Ye;if(1===It.requestStatus)return W=oe(M,k),Ye;{if(!navigator.onLine)throw Bt.create("app-offline");const Nt=cr(Ye);return W=ut(M,Nt),Nt}});return W?yield W:ie.authToken})).apply(this,arguments)}function oe(M,k){return Ee.apply(this,arguments)}function Ee(){return(Ee=(0,G.Z)(function*(M,k){let W=yield ye(M.appConfig);for(;1===W.authToken.requestStatus;)yield wt(100),W=yield ye(M.appConfig);const ie=W.authToken;return 0===ie.requestStatus?me(M,k):ie})).apply(this,arguments)}function ye(M){return ei(M,k=>{if(!Vt(k))throw Bt.create("not-registered");return function Sn(M){return 1===M.requestStatus&&M.requestTime+1e4<Date.now()}(k.authToken)?Object.assign(Object.assign({},k),{authToken:{requestStatus:0}}):k})}function ut(M,k){return gt.apply(this,arguments)}function gt(){return(gt=(0,G.Z)(function*(M,k){try{const W=yield xn(M,k),ie=Object.assign(Object.assign({},k),{authToken:W});return yield pt(M.appConfig,ie),W}catch(W){if(!jt(W)||401!==W.customData.serverCode&&404!==W.customData.serverCode){const ie=Object.assign(Object.assign({},k),{authToken:{requestStatus:0}});yield pt(M.appConfig,ie)}else yield En(M.appConfig);throw W}})).apply(this,arguments)}function Vt(M){return void 0!==M&&2===M.registrationStatus}function ar(M){return 2===M.requestStatus&&!function gn(M){const k=Date.now();return k<M.creationTime||M.creationTime+M.expiresIn<k+36e5}(M)}function cr(M){const k={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},M),{authToken:k})}function Jn(){return(Jn=(0,G.Z)(function*(M){const k=M,{installationEntry:W,registrationPromise:ie}=yield wr(k);return ie?ie.catch(console.error):me(k).catch(console.error),W.fid})).apply(this,arguments)}function qr(){return(qr=(0,G.Z)(function*(M,k=!1){const W=M;return yield $r(W),(yield me(W,k)).token})).apply(this,arguments)}function $r(M){return Dr.apply(this,arguments)}function Dr(){return(Dr=(0,G.Z)(function*(M){const{registrationPromise:k}=yield wr(M);k&&(yield k)})).apply(this,arguments)}function hr(M){return Bt.create("missing-app-config-values",{valueName:M})}const Cr="installations",In=M=>{const k=M.getProvider("app").getImmediate(),W=function cn(M){if(!M||!M.options)throw hr("App Configuration");if(!M.name)throw hr("App Name");const k=["projectId","apiKey","appId"];for(const W of k)if(!M.options[W])throw hr(W);return{appName:M.name,projectId:M.options.projectId,apiKey:M.options.apiKey,appId:M.options.appId}}(k);return{app:k,appConfig:W,heartbeatServiceProvider:(0,be._getProvider)(k,"heartbeat"),_delete:()=>Promise.resolve()}},Xn=M=>{const k=M.getProvider("app").getImmediate(),W=(0,be._getProvider)(k,Cr).getImmediate();return{getId:()=>function ln(M){return Jn.apply(this,arguments)}(W),getToken:Pe=>function kn(M){return qr.apply(this,arguments)}(W,Pe)}};(function ms(){(0,be._registerComponent)(new Me.wA(Cr,In,"PUBLIC")),(0,be._registerComponent)(new Me.wA("installations-internal",Xn,"PRIVATE"))})(),(0,be.registerVersion)(ke,le),(0,be.registerVersion)(ke,le,"esm2017");const Li="@firebase/remote-config",Lr=new we.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Ho{constructor(k,W,ie,Pe){this.client=k,this.storage=W,this.storageCache=ie,this.logger=Pe}isCachedDataFresh(k,W){if(!W)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const ie=Date.now()-W,Pe=ie<=k;return this.logger.debug(`Config fetch cache check. Cache age millis: ${ie}. Cache max age millis (minimumFetchIntervalMillis setting): ${k}. Is cache hit: ${Pe}.`),Pe}fetch(k){var W=this;return(0,G.Z)(function*(){const[ie,Pe]=yield Promise.all([W.storage.getLastSuccessfulFetchTimestampMillis(),W.storage.getLastSuccessfulFetchResponse()]);if(Pe&&W.isCachedDataFresh(k.cacheMaxAgeMillis,ie))return Pe;k.eTag=Pe&&Pe.eTag;const Ye=yield W.client.fetch(k),It=[W.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===Ye.status&&It.push(W.storage.setLastSuccessfulFetchResponse(Ye)),yield Promise.all(It),Ye})()}}function Zs(M=navigator){return M.languages&&M.languages[0]||M.language}class ks{constructor(k,W,ie,Pe,Ye,It){this.firebaseInstallations=k,this.sdkVersion=W,this.namespace=ie,this.projectId=Pe,this.apiKey=Ye,this.appId=It}fetch(k){var W=this;return(0,G.Z)(function*(){var ie,Pe,Ye;const[It,Nt]=yield Promise.all([W.firebaseInstallations.getId(),W.firebaseInstallations.getToken()]),Tn=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${W.projectId}/namespaces/${W.namespace}:fetch?key=${W.apiKey}`,Fn={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":k.eTag||"*"},wn={sdk_version:W.sdkVersion,app_instance_id:It,app_instance_id_token:Nt,app_id:W.appId,language_code:Zs()},Xr={method:"POST",headers:Fn,body:JSON.stringify(wn)},Hs=fetch(Tn,Xr),ia=new Promise((Za,ya)=>{k.signal.addEventListener(()=>{const au=new Error("The operation was aborted.");au.name="AbortError",ya(au)})});let La;try{yield Promise.race([Hs,ia]),La=yield Hs}catch(Za){let ya="fetch-client-network";throw"AbortError"===(null===(ie=Za)||void 0===ie?void 0:ie.name)&&(ya="fetch-timeout"),Lr.create(ya,{originalErrorMessage:null===(Pe=Za)||void 0===Pe?void 0:Pe.message})}let Uo=La.status;const Va=La.headers.get("ETag")||void 0;let Yo,Ua;if(200===La.status){let Za;try{Za=yield La.json()}catch(ya){throw Lr.create("fetch-client-parse",{originalErrorMessage:null===(Ye=ya)||void 0===Ye?void 0:Ye.message})}Yo=Za.entries,Ua=Za.state}if("INSTANCE_STATE_UNSPECIFIED"===Ua?Uo=500:"NO_CHANGE"===Ua?Uo=304:("NO_TEMPLATE"===Ua||"EMPTY_CONFIG"===Ua)&&(Yo={}),304!==Uo&&200!==Uo)throw Lr.create("fetch-status",{httpStatus:Uo});return{status:Uo,eTag:Va,config:Yo}})()}}class Ae{constructor(k,W){this.client=k,this.storage=W}fetch(k){var W=this;return(0,G.Z)(function*(){const ie=(yield W.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return W.attemptFetch(k,ie)})()}attemptFetch(k,{throttleEndTimeMillis:W,backoffCount:ie}){var Pe=this;return(0,G.Z)(function*(){yield function ri(M,k){return new Promise((W,ie)=>{const Pe=Math.max(k-Date.now(),0),Ye=setTimeout(W,Pe);M.addEventListener(()=>{clearTimeout(Ye),ie(Lr.create("fetch-throttle",{throttleEndTimeMillis:k}))})})}(k.signal,W);try{const Ye=yield Pe.client.fetch(k);return yield Pe.storage.deleteThrottleMetadata(),Ye}catch(Ye){if(!function xe(M){if(!(M instanceof we.ZR&&M.customData))return!1;const k=Number(M.customData.httpStatus);return 429===k||500===k||503===k||504===k}(Ye))throw Ye;const It={throttleEndTimeMillis:Date.now()+(0,we.$s)(ie),backoffCount:ie+1};return yield Pe.storage.setThrottleMetadata(It),Pe.attemptFetch(k,It)}})()}}class Dt{constructor(k,W,ie,Pe,Ye){this.app=k,this._client=W,this._storageCache=ie,this._storage=Pe,this._logger=Ye,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Xt(M,k){var W;const ie=M.target.error||void 0;return Lr.create(k,{originalErrorMessage:ie&&(null===(W=ie)||void 0===W?void 0:W.message)})}const bn="app_namespace_store";class vo{constructor(k,W,ie,Pe=function fi(){return new Promise((M,k)=>{var W;try{const ie=indexedDB.open("firebase_remote_config",1);ie.onerror=Pe=>{k(Xt(Pe,"storage-open"))},ie.onsuccess=Pe=>{M(Pe.target.result)},ie.onupgradeneeded=Pe=>{0===Pe.oldVersion&&Pe.target.result.createObjectStore(bn,{keyPath:"compositeKey"})}}catch(ie){k(Lr.create("storage-open",{originalErrorMessage:null===(W=ie)||void 0===W?void 0:W.message}))}})}()){this.appId=k,this.appName=W,this.namespace=ie,this.openDbPromise=Pe}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(k){return this.set("last_fetch_status",k)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(k){return this.set("last_successful_fetch_timestamp_millis",k)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(k){return this.set("last_successful_fetch_response",k)}getActiveConfig(){return this.get("active_config")}setActiveConfig(k){return this.set("active_config",k)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(k){return this.set("active_config_etag",k)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(k){return this.set("throttle_metadata",k)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(k){var W=this;return(0,G.Z)(function*(){const ie=yield W.openDbPromise;return new Promise((Pe,Ye)=>{var It;const _n=ie.transaction([bn],"readonly").objectStore(bn),Tn=W.createCompositeKey(k);try{const Fn=_n.get(Tn);Fn.onerror=wn=>{Ye(Xt(wn,"storage-get"))},Fn.onsuccess=wn=>{const Xr=wn.target.result;Pe(Xr?Xr.value:void 0)}}catch(Fn){Ye(Lr.create("storage-get",{originalErrorMessage:null===(It=Fn)||void 0===It?void 0:It.message}))}})})()}set(k,W){var ie=this;return(0,G.Z)(function*(){const Pe=yield ie.openDbPromise;return new Promise((Ye,It)=>{var Nt;const Tn=Pe.transaction([bn],"readwrite").objectStore(bn),Fn=ie.createCompositeKey(k);try{const wn=Tn.put({compositeKey:Fn,value:W});wn.onerror=Xr=>{It(Xt(Xr,"storage-set"))},wn.onsuccess=()=>{Ye()}}catch(wn){It(Lr.create("storage-set",{originalErrorMessage:null===(Nt=wn)||void 0===Nt?void 0:Nt.message}))}})})()}delete(k){var W=this;return(0,G.Z)(function*(){const ie=yield W.openDbPromise;return new Promise((Pe,Ye)=>{var It;const _n=ie.transaction([bn],"readwrite").objectStore(bn),Tn=W.createCompositeKey(k);try{const Fn=_n.delete(Tn);Fn.onerror=wn=>{Ye(Xt(wn,"storage-delete"))},Fn.onsuccess=()=>{Pe()}}catch(Fn){Ye(Lr.create("storage-delete",{originalErrorMessage:null===(It=Fn)||void 0===It?void 0:It.message}))}})})()}createCompositeKey(k){return[this.appId,this.appName,this.namespace,k].join()}}class Ks{constructor(k){this.storage=k}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var k=this;return(0,G.Z)(function*(){const W=k.storage.getLastFetchStatus(),ie=k.storage.getLastSuccessfulFetchTimestampMillis(),Pe=k.storage.getActiveConfig(),Ye=yield W;Ye&&(k.lastFetchStatus=Ye);const It=yield ie;It&&(k.lastSuccessfulFetchTimestampMillis=It);const Nt=yield Pe;Nt&&(k.activeConfig=Nt)})()}setLastFetchStatus(k){return this.lastFetchStatus=k,this.storage.setLastFetchStatus(k)}setLastSuccessfulFetchTimestampMillis(k){return this.lastSuccessfulFetchTimestampMillis=k,this.storage.setLastSuccessfulFetchTimestampMillis(k)}setActiveConfig(k){return this.activeConfig=k,this.storage.setActiveConfig(k)}}function vs(){return ao.apply(this,arguments)}function ao(){return(ao=(0,G.Z)(function*(){if(!(0,we.hl)())return!1;try{return yield(0,we.eu)()}catch{return!1}})).apply(this,arguments)}!function Hr(){(0,be._registerComponent)(new Me.wA("remote-config",function M(k,{instanceIdentifier:W}){const ie=k.getProvider("app").getImmediate(),Pe=k.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw Lr.create("registration-window");if(!(0,we.hl)())throw Lr.create("indexed-db-unavailable");const{projectId:Ye,apiKey:It,appId:Nt}=ie.options;if(!Ye)throw Lr.create("registration-project-id");if(!It)throw Lr.create("registration-api-key");if(!Nt)throw Lr.create("registration-app-id");const _n=new vo(Nt,ie.name,W=W||"firebase"),Tn=new Ks(_n),Fn=new Re.Yd(Li);Fn.logLevel=Re.in.ERROR;const wn=new ks(Pe,be.SDK_VERSION,W,Ye,It,Nt),Xr=new Ae(wn,_n),Hs=new Ho(Xr,_n,Tn,Fn),ia=new Dt(ie,Hs,Tn,_n,Fn);return function Ar(M){const k=(0,we.m9)(M);k._initializePromise||(k._initializePromise=k._storageCache.loadFromStorage().then(()=>{k._isInitializationComplete=!0}))}(ia),ia},"PUBLIC").setMultipleInstances(!0)),(0,be.registerVersion)(Li,"0.3.11"),(0,be.registerVersion)(Li,"0.3.11","esm2017")}();const Pi="/firebase-messaging-sw.js",Xi="/firebase-cloud-messaging-push-scope",ki="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Fs="google.c.a.c_id",cs="google.c.a.c_l",Ls="google.c.a.ts",_o="google.c.a.e";var _s=(()=>{return(M=_s||(_s={})).PUSH_RECEIVED="push-received",M.NOTIFICATION_CLICKED="notification-clicked",_s;var M})();function ii(M){const k=new Uint8Array(M);return btoa(String.fromCharCode(...k)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Vi(M){const W=(M+"=".repeat((4-M.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),ie=atob(W),Pe=new Uint8Array(ie.length);for(let Ye=0;Ye<ie.length;++Ye)Pe[Ye]=ie.charCodeAt(Ye);return Pe}const Ai="fcm_token_details_db",Vr="fcm_token_object_Store";function wo(M){return uo.apply(this,arguments)}function uo(){return uo=(0,G.Z)(function*(M){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(Ye=>Ye.name).includes(Ai))return null;let k=null;return(yield(0,Oe.X3)(Ai,5,{upgrade:(ie=(0,G.Z)(function*(Pe,Ye,It,Nt){var _n;if(Ye<2||!Pe.objectStoreNames.contains(Vr))return;const Tn=Nt.objectStore(Vr),Fn=yield Tn.index("fcmSenderId").get(M);if(yield Tn.clear(),Fn)if(2===Ye){const wn=Fn;if(!wn.auth||!wn.p256dh||!wn.endpoint)return;k={token:wn.fcmToken,createTime:null!==(_n=wn.createTime)&&void 0!==_n?_n:Date.now(),subscriptionOptions:{auth:wn.auth,p256dh:wn.p256dh,endpoint:wn.endpoint,swScope:wn.swScope,vapidKey:"string"==typeof wn.vapidKey?wn.vapidKey:ii(wn.vapidKey)}}}else if(3===Ye){const wn=Fn;k={token:wn.fcmToken,createTime:wn.createTime,subscriptionOptions:{auth:ii(wn.auth),p256dh:ii(wn.p256dh),endpoint:wn.endpoint,swScope:wn.swScope,vapidKey:ii(wn.vapidKey)}}}else if(4===Ye){const wn=Fn;k={token:wn.fcmToken,createTime:wn.createTime,subscriptionOptions:{auth:ii(wn.auth),p256dh:ii(wn.p256dh),endpoint:wn.endpoint,swScope:wn.swScope,vapidKey:ii(wn.vapidKey)}}}}),function(Ye,It,Nt,_n){return ie.apply(this,arguments)})})).close(),yield(0,Oe.Lj)(Ai),yield(0,Oe.Lj)("fcm_vapid_details_db"),yield(0,Oe.Lj)("undefined"),Mr(k)?k:null;var ie}),uo.apply(this,arguments)}function Mr(M){if(!M||!M.subscriptionOptions)return!1;const{subscriptionOptions:k}=M;return"number"==typeof M.createTime&&M.createTime>0&&"string"==typeof M.token&&M.token.length>0&&"string"==typeof k.auth&&k.auth.length>0&&"string"==typeof k.p256dh&&k.p256dh.length>0&&"string"==typeof k.endpoint&&k.endpoint.length>0&&"string"==typeof k.swScope&&k.swScope.length>0&&"string"==typeof k.vapidKey&&k.vapidKey.length>0}const fr="firebase-messaging-store";let si=null;function es(){return si||(si=(0,Oe.X3)("firebase-messaging-database",1,{upgrade:(M,k)=>{0===k&&M.createObjectStore(fr)}})),si}function Ui(M){return gi.apply(this,arguments)}function gi(){return(gi=(0,G.Z)(function*(M){const k=Qn(M),ie=yield(yield es()).transaction(fr).objectStore(fr).get(k);if(ie)return ie;{const Pe=yield wo(M.appConfig.senderId);if(Pe)return yield Wn(M,Pe),Pe}})).apply(this,arguments)}function Wn(M,k){return Di.apply(this,arguments)}function Di(){return(Di=(0,G.Z)(function*(M,k){const W=Qn(M),Pe=(yield es()).transaction(fr,"readwrite");return yield Pe.objectStore(fr).put(k,W),yield Pe.done,k})).apply(this,arguments)}function ws(M){return Go.apply(this,arguments)}function Go(){return(Go=(0,G.Z)(function*(M){const k=Qn(M),ie=(yield es()).transaction(fr,"readwrite");yield ie.objectStore(fr).delete(k),yield ie.done})).apply(this,arguments)}function Qn({appConfig:M}){return M.appId}const Qr=new we.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function yn(M,k){return Us.apply(this,arguments)}function Us(){return(Us=(0,G.Z)(function*(M,k){var W;const ie=yield Eo(M),Pe=ft(k),Ye={method:"POST",headers:ie,body:JSON.stringify(Pe)};let It;try{It=yield(yield fetch(Es(M.appConfig),Ye)).json()}catch(Nt){throw Qr.create("token-subscribe-failed",{errorInfo:null===(W=Nt)||void 0===W?void 0:W.toString()})}if(It.error)throw Qr.create("token-subscribe-failed",{errorInfo:It.error.message});if(!It.token)throw Qr.create("token-subscribe-no-token");return It.token})).apply(this,arguments)}function Ys(M,k){return Oo.apply(this,arguments)}function Oo(){return(Oo=(0,G.Z)(function*(M,k){var W;const ie=yield Eo(M),Pe=ft(k.subscriptionOptions),Ye={method:"PATCH",headers:ie,body:JSON.stringify(Pe)};let It;try{It=yield(yield fetch(`${Es(M.appConfig)}/${k.token}`,Ye)).json()}catch(Nt){throw Qr.create("token-update-failed",{errorInfo:null===(W=Nt)||void 0===W?void 0:W.toString()})}if(It.error)throw Qr.create("token-update-failed",{errorInfo:It.error.message});if(!It.token)throw Qr.create("token-update-no-token");return It.token})).apply(this,arguments)}function Qs(M,k){return Bi.apply(this,arguments)}function Bi(){return(Bi=(0,G.Z)(function*(M,k){var W;const Pe={method:"DELETE",headers:yield Eo(M)};try{const It=yield(yield fetch(`${Es(M.appConfig)}/${k}`,Pe)).json();if(It.error)throw Qr.create("token-unsubscribe-failed",{errorInfo:It.error.message})}catch(Ye){throw Qr.create("token-unsubscribe-failed",{errorInfo:null===(W=Ye)||void 0===W?void 0:W.toString()})}})).apply(this,arguments)}function Es({projectId:M}){return`https://fcmregistrations.googleapis.com/v1/projects/${M}/registrations`}function Eo(M){return No.apply(this,arguments)}function No(){return(No=(0,G.Z)(function*({appConfig:M,installations:k}){const W=yield k.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":M.apiKey,"x-goog-firebase-installations-auth":`FIS ${W}`})})).apply(this,arguments)}function ft({p256dh:M,auth:k,endpoint:W,vapidKey:ie}){const Pe={web:{endpoint:W,auth:k,p256dh:M}};return ie!==ki&&(Pe.web.applicationPubKey=ie),Pe}const Rn=6048e5;function Bs(M){return Po.apply(this,arguments)}function Po(){return(Po=(0,G.Z)(function*(M){const k=yield Do(M.swRegistration,M.vapidKey),W={vapidKey:M.vapidKey,swScope:M.swRegistration.scope,endpoint:k.endpoint,auth:ii(k.getKey("auth")),p256dh:ii(k.getKey("p256dh"))},ie=yield Ui(M.firebaseDependencies);if(ie){if(F(ie.subscriptionOptions,W))return Date.now()>=ie.createTime+Rn?Is(M,{token:ie.token,createTime:Date.now(),subscriptionOptions:W}):ie.token;try{yield Qs(M.firebaseDependencies,ie.token)}catch(Pe){console.warn(Pe)}return Io(M.firebaseDependencies,W)}return Io(M.firebaseDependencies,W)})).apply(this,arguments)}function Ur(M){return ts.apply(this,arguments)}function ts(){return(ts=(0,G.Z)(function*(M){const k=yield Ui(M.firebaseDependencies);k&&(yield Qs(M.firebaseDependencies,k.token),yield ws(M.firebaseDependencies));const W=yield M.swRegistration.pushManager.getSubscription();return!W||W.unsubscribe()})).apply(this,arguments)}function Is(M,k){return hs.apply(this,arguments)}function hs(){return(hs=(0,G.Z)(function*(M,k){try{const W=yield Ys(M.firebaseDependencies,k),ie=Object.assign(Object.assign({},k),{token:W,createTime:Date.now()});return yield Wn(M.firebaseDependencies,ie),W}catch(W){throw yield Ur(M),W}})).apply(this,arguments)}function Io(M,k){return js.apply(this,arguments)}function js(){return(js=(0,G.Z)(function*(M,k){const ie={token:yield yn(M,k),createTime:Date.now(),subscriptionOptions:k};return yield Wn(M,ie),ie.token})).apply(this,arguments)}function Do(M,k){return ca.apply(this,arguments)}function ca(){return(ca=(0,G.Z)(function*(M,k){return(yield M.pushManager.getSubscription())||M.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Vi(k)})})).apply(this,arguments)}function F(M,k){return k.vapidKey===M.vapidKey&&k.endpoint===M.endpoint&&k.auth===M.auth&&k.p256dh===M.p256dh}function N(M){const k={from:M.from,collapseKey:M.collapse_key,messageId:M.fcmMessageId};return function A(M,k){if(!k.notification)return;M.notification={};const W=k.notification.title;W&&(M.notification.title=W);const ie=k.notification.body;ie&&(M.notification.body=ie);const Pe=k.notification.image;Pe&&(M.notification.image=Pe)}(k,M),function K(M,k){!k.data||(M.data=k.data)}(k,M),function Xe(M,k){var W,ie,Pe,Ye,It;if(!(k.fcmOptions||null!==(W=k.notification)&&void 0!==W&&W.click_action))return;M.fcmOptions={};const Nt=null!==(Pe=null===(ie=k.fcmOptions)||void 0===ie?void 0:ie.link)&&void 0!==Pe?Pe:null===(Ye=k.notification)||void 0===Ye?void 0:Ye.click_action;Nt&&(M.fcmOptions.link=Nt);const _n=null===(It=k.fcmOptions)||void 0===It?void 0:It.analytics_label;_n&&(M.fcmOptions.analyticsLabel=_n)}(k,M),k}function nn(M){return"object"==typeof M&&!!M&&Fs in M}function dr(M,k){const W=[];for(let ie=0;ie<M.length;ie++)W.push(M.charAt(ie)),ie<k.length&&W.push(k.charAt(ie));return W.join("")}function mi(M){return Qr.create("missing-app-config-values",{valueName:M})}dr("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),dr("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class ji{constructor(k,W,ie){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const Pe=function fs(M){if(!M||!M.options)throw mi("App Configuration Object");if(!M.name)throw mi("App Name");const k=["projectId","apiKey","appId","messagingSenderId"],{options:W}=M;for(const ie of k)if(!W[ie])throw mi(ie);return{appName:M.name,projectId:W.projectId,apiKey:W.apiKey,appId:W.appId,senderId:W.messagingSenderId}}(k);this.firebaseDependencies={app:k,appConfig:Pe,installations:W,analyticsProvider:ie}}_delete(){return Promise.resolve()}}function Js(M){return Xs.apply(this,arguments)}function Xs(){return(Xs=(0,G.Z)(function*(M){var k;try{M.swRegistration=yield navigator.serviceWorker.register(Pi,{scope:Xi}),M.swRegistration.update().catch(()=>{})}catch(W){throw Qr.create("failed-service-worker-registration",{browserErrorMessage:null===(k=W)||void 0===k?void 0:k.message})}})).apply(this,arguments)}function ko(M,k){return zo.apply(this,arguments)}function zo(){return(zo=(0,G.Z)(function*(M,k){if(!k&&!M.swRegistration&&(yield Js(M)),k||!M.swRegistration){if(!(k instanceof ServiceWorkerRegistration))throw Qr.create("invalid-sw-registration");M.swRegistration=k}})).apply(this,arguments)}function co(M,k){return Ea.apply(this,arguments)}function Ea(){return(Ea=(0,G.Z)(function*(M,k){k?M.vapidKey=k:M.vapidKey||(M.vapidKey=ki)})).apply(this,arguments)}function Wo(){return(Wo=(0,G.Z)(function*(M,k){if(!navigator)throw Qr.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Qr.create("permission-blocked");return yield co(M,k?.vapidKey),yield ko(M,k?.serviceWorkerRegistration),Bs(M)})).apply(this,arguments)}function da(M,k,W){return Rs.apply(this,arguments)}function Rs(){return(Rs=(0,G.Z)(function*(M,k,W){const ie=ha(k);(yield M.firebaseDependencies.analyticsProvider.get()).logEvent(ie,{message_id:W[Fs],message_name:W[cs],message_time:W[Ls],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function ha(M){switch(M){case _s.NOTIFICATION_CLICKED:return"notification_open";case _s.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function $(){return($=(0,G.Z)(function*(M,k){const W=k.data;if(!W.isFirebaseMessaging)return;M.onMessageHandler&&W.messageType===_s.PUSH_RECEIVED&&("function"==typeof M.onMessageHandler?M.onMessageHandler(N(W)):M.onMessageHandler.next(N(W)));const ie=W.data;nn(ie)&&"1"===ie[_o]&&(yield da(M,W.messageType,ie))})).apply(this,arguments)}const R="@firebase/messaging",q="0.9.16",fe=M=>{const k=new ji(M.getProvider("app").getImmediate(),M.getProvider("installations-internal").getImmediate(),M.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",W=>function S(M,k){return $.apply(this,arguments)}(k,W)),k},ze=M=>{const k=M.getProvider("messaging").getImmediate();return{getToken:ie=>function Rr(M,k){return Wo.apply(this,arguments)}(k,ie)}};function Jt(){return sr.apply(this,arguments)}function sr(){return(sr=(0,G.Z)(function*(){try{yield(0,we.eu)()}catch{return!1}return typeof window<"u"&&(0,we.hl)()&&(0,we.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function nt(){(0,be._registerComponent)(new Me.wA("messaging",fe,"PUBLIC")),(0,be._registerComponent)(new Me.wA("messaging-internal",ze,"PRIVATE")),(0,be.registerVersion)(R,q),(0,be.registerVersion)(R,q,"esm2017")}();const eo="analytics",Co="firebase_id",O="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",j="https://www.googletagmanager.com/gtag/js",J=new Re.Yd("@firebase/analytics");function De(M){return Promise.all(M.map(k=>k.catch(W=>W)))}function je(M,k){const W=document.createElement("script");W.src=`${j}?l=${M}&id=${k}`,W.async=!0,document.head.appendChild(W)}function sn(M,k,W,ie,Pe,Ye){return Ut.apply(this,arguments)}function Ut(){return(Ut=(0,G.Z)(function*(M,k,W,ie,Pe,Ye){const It=ie[Pe];try{if(It)yield k[It];else{const _n=(yield De(W)).find(Tn=>Tn.measurementId===Pe);_n&&(yield k[_n.appId])}}catch(Nt){J.error(Nt)}M("config",Pe,Ye)})).apply(this,arguments)}function An(M,k,W,ie,Pe){return Gn.apply(this,arguments)}function Gn(){return(Gn=(0,G.Z)(function*(M,k,W,ie,Pe){try{let Ye=[];if(Pe&&Pe.send_to){let It=Pe.send_to;Array.isArray(It)||(It=[It]);const Nt=yield De(W);for(const _n of It){const Tn=Nt.find(wn=>wn.measurementId===_n),Fn=Tn&&k[Tn.appId];if(!Fn){Ye=[];break}Ye.push(Fn)}}0===Ye.length&&(Ye=Object.values(k)),yield Promise.all(Ye),M("event",ie,Pe||{})}catch(Ye){J.error(Ye)}})).apply(this,arguments)}function ai(){const M=window.document.getElementsByTagName("script");for(const k of Object.values(M))if(k.src&&k.src.includes(j))return k;return null}const br=new we.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),xi=new class Hi{constructor(k={},W=1e3){this.throttleMetadata=k,this.intervalMillis=W}getThrottleMetadata(k){return this.throttleMetadata[k]}setThrottleMetadata(k,W){this.throttleMetadata[k]=W}deleteThrottleMetadata(k){delete this.throttleMetadata[k]}};function Gi(M){return new Headers({Accept:"application/json","x-goog-api-key":M})}function ho(M){return bo.apply(this,arguments)}function bo(){return(bo=(0,G.Z)(function*(M){var k;const{appId:W,apiKey:ie}=M,Pe={method:"GET",headers:Gi(ie)},Ye=O.replace("{app-id}",W),It=yield fetch(Ye,Pe);if(200!==It.status&&304!==It.status){let Nt="";try{const _n=yield It.json();null!==(k=_n.error)&&void 0!==k&&k.message&&(Nt=_n.error.message)}catch{}throw br.create("config-fetch-failed",{httpStatus:It.status,responseMessage:Nt})}return It.json()})).apply(this,arguments)}function li(M){return ns.apply(this,arguments)}function ns(){return(ns=(0,G.Z)(function*(M,k=xi,W){const{appId:ie,apiKey:Pe,measurementId:Ye}=M.options;if(!ie)throw br.create("no-app-id");if(!Pe){if(Ye)return{measurementId:Ye,appId:ie};throw br.create("no-api-key")}const It=k.getThrottleMetadata(ie)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Nt=new ta;return setTimeout((0,G.Z)(function*(){Nt.abort()}),void 0!==W?W:6e4),To({appId:ie,apiKey:Pe,measurementId:Ye},It,Nt,k)})).apply(this,arguments)}function To(M,k,W){return Ma.apply(this,arguments)}function Ma(){return(Ma=(0,G.Z)(function*(M,{throttleEndTimeMillis:k,backoffCount:W},ie,Pe=xi){var Ye,It;const{appId:Nt,measurementId:_n}=M;try{yield Ra(ie,k)}catch(Tn){if(_n)return J.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${_n} provided in the "measurementId" field in the local Firebase config. [${null===(Ye=Tn)||void 0===Ye?void 0:Ye.message}]`),{appId:Nt,measurementId:_n};throw Tn}try{const Tn=yield ho(M);return Pe.deleteThrottleMetadata(Nt),Tn}catch(Tn){const Fn=Tn;if(!zi(Fn)){if(Pe.deleteThrottleMetadata(Nt),_n)return J.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${_n} provided in the "measurementId" field in the local Firebase config. [${Fn?.message}]`),{appId:Nt,measurementId:_n};throw Tn}const wn=503===Number(null===(It=Fn?.customData)||void 0===It?void 0:It.httpStatus)?(0,we.$s)(W,Pe.intervalMillis,30):(0,we.$s)(W,Pe.intervalMillis),Xr={throttleEndTimeMillis:Date.now()+wn,backoffCount:W+1};return Pe.setThrottleMetadata(Nt,Xr),J.debug(`Calling attemptFetch again in ${wn} millis`),To(M,Xr,ie,Pe)}})).apply(this,arguments)}function Ra(M,k){return new Promise((W,ie)=>{const Pe=Math.max(k-Date.now(),0),Ye=setTimeout(W,Pe);M.addEventListener(()=>{clearTimeout(Ye),ie(br.create("fetch-throttle",{throttleEndTimeMillis:k}))})})}function zi(M){if(!(M instanceof we.ZR&&M.customData))return!1;const k=Number(M.customData.httpStatus);return 429===k||500===k||503===k||504===k}class ta{constructor(){this.listeners=[]}addEventListener(k){this.listeners.push(k)}abort(){this.listeners.forEach(k=>k())}}let to,Qe;function fa(){return(fa=(0,G.Z)(function*(M,k,W,ie,Pe){if(Pe&&Pe.global)M("event",W,ie);else{const Ye=yield k;M("event",W,Object.assign(Object.assign({},ie),{send_to:Ye}))}})).apply(this,arguments)}function Et(M){Qe=M}function Wi(M){to=M}function qi(){return nu.apply(this,arguments)}function nu(){return(nu=(0,G.Z)(function*(){var M;if(!(0,we.hl)())return J.warn(br.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,we.eu)()}catch(k){return J.warn(br.create("indexeddb-unavailable",{errorInfo:null===(M=k)||void 0===M?void 0:M.toString()}).message),!1}return!0})).apply(this,arguments)}function Na(){return(Na=(0,G.Z)(function*(M,k,W,ie,Pe,Ye,It){var Nt;const _n=li(M);_n.then(Hs=>{W[Hs.measurementId]=Hs.appId,M.options.measurementId&&Hs.measurementId!==M.options.measurementId&&J.warn(`The measurement ID in the local Firebase config (${M.options.measurementId}) does not match the measurement ID fetched from the server (${Hs.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(Hs=>J.error(Hs)),k.push(_n);const Tn=qi().then(Hs=>{if(Hs)return ie.getId()}),[Fn,wn]=yield Promise.all([_n,Tn]);ai()||je(Ye,Fn.measurementId),Qe&&(Pe("consent","default",Qe),Et(void 0)),Pe("js",new Date);const Xr=null!==(Nt=It?.config)&&void 0!==Nt?Nt:{};return Xr.origin="firebase",Xr.update=!0,null!=wn&&(Xr[Co]=wn),Pe("config",Fn.measurementId,Xr),to&&(Pe("set",to),Wi(void 0)),Fn.measurementId})).apply(this,arguments)}class Pa{constructor(k){this.app=k}_delete(){return delete no[this.app.options.appId],Promise.resolve()}}let no={},qo=[];const pa={};let ga,Dn,ru="dataLayer",So=!1;function Pn(M,k,W){!function Mi(){const M=[];if((0,we.ru)()&&M.push("This is a browser extension environment."),(0,we.zI)()||M.push("Cookies are not available."),M.length>0){const k=M.map((ie,Pe)=>`(${Pe+1}) ${ie}`).join(" "),W=br.create("invalid-analytics-context",{errorInfo:k});J.warn(W.message)}}();const ie=M.options.appId;if(!ie)throw br.create("no-app-id");if(!M.options.apiKey){if(!M.options.measurementId)throw br.create("no-api-key");J.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${M.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=no[ie])throw br.create("already-exists",{id:ie});if(!So){!function bt(M){let k=[];Array.isArray(window[M])?k=window[M]:window[M]=k}(ru);const{wrappedGtag:Ye,gtagCore:It}=function Nr(M,k,W,ie,Pe){let Ye=function(...It){window[ie].push(arguments)};return window[Pe]&&"function"==typeof window[Pe]&&(Ye=window[Pe]),window[Pe]=function Jr(M,k,W,ie){function Ye(){return(Ye=(0,G.Z)(function*(It,Nt,_n){try{"event"===It?yield An(M,k,W,Nt,_n):"config"===It?yield sn(M,k,W,ie,Nt,_n):"consent"===It?M("consent","update",_n):M("set",Nt)}catch(Tn){J.error(Tn)}})).apply(this,arguments)}return function Pe(It,Nt,_n){return Ye.apply(this,arguments)}}(Ye,M,k,W),{gtagCore:Ye,wrappedGtag:window[Pe]}}(no,qo,pa,ru,"gtag");Dn=Ye,ga=It,So=!0}return no[ie]=function Ia(M,k,W,ie,Pe,Ye,It){return Na.apply(this,arguments)}(M,qo,pa,k,ga,ru,W),new Pa(M)}function Gc(){return yi.apply(this,arguments)}function yi(){return(yi=(0,G.Z)(function*(){if((0,we.ru)()||!(0,we.zI)()||!(0,we.hl)())return!1;try{return yield(0,we.eu)()}catch{return!1}})).apply(this,arguments)}const su="@firebase/analytics";!function fo(){(0,be._registerComponent)(new Me.wA(eo,(k,{options:W})=>Pn(k.getProvider("app").getImmediate(),k.getProvider("installations-internal").getImmediate(),W),"PUBLIC")),(0,be._registerComponent)(new Me.wA("analytics-internal",function M(k){try{const W=k.getProvider(eo).getImmediate();return{logEvent:(ie,Pe,Ye)=>function Da(M,k,W,ie){M=(0,we.m9)(M),function Oa(M,k,W,ie,Pe){return fa.apply(this,arguments)}(Dn,no[M.app.options.appId],k,W,ie).catch(Pe=>J.error(Pe))}(W,ie,Pe,Ye)}}catch(W){throw br.create("interop-component-reg-failed",{reason:W})}},"PRIVATE")),(0,be.registerVersion)(su,"0.8.0"),(0,be.registerVersion)(su,"0.8.0","esm2017")}();var vi=V(4408),Ca=V(7565);const Lo=new class ra extends Ca.v{}(class ou extends vi.o{constructor(k,W){super(k,W),this.scheduler=k,this.work=W}schedule(k,W=0){return W>0?super.schedule(k,W):(this.delay=W,this.state=k,this.scheduler.flush(this),this)}execute(k,W){return W>0||this.closed?super.execute(k,W):this._execute(k,W)}requestAsyncId(k,W,ie=0){return null!=ie&&ie>0||null==ie&&this.delay>0?super.requestAsyncId(k,W,ie):k.flush(this)}});var qe=V(4986),ba=V(8505),Ds=V(5363),qa=V(9468);const Cs=new p.GfV("7.4.1"),Vo="__angularfire_symbol__analyticsIsSupportedValue",_="__angularfire_symbol__analyticsIsSupported",w="__angularfire_symbol__remoteConfigIsSupportedValue",v="__angularfire_symbol__remoteConfigIsSupported",b="__angularfire_symbol__messagingIsSupportedValue",P="__angularfire_symbol__messagingIsSupported";function Rt(M,k,W){if(k){if(1===k.length)return k[0];const Ye=k.filter(It=>It.app===W);if(1===Ye.length)return Ye[0]}return W.container.getProvider(M).getImmediate({optional:!0})}globalThis[_]||(globalThis[_]=Gc().then(M=>globalThis[Vo]=M).catch(()=>globalThis[Vo]=!1)),globalThis[P]||(globalThis[P]=Jt().then(M=>globalThis[b]=M).catch(()=>globalThis[b]=!1)),globalThis[v]||(globalThis[v]=vs().then(M=>globalThis[w]=M).catch(()=>globalThis[w]=!1));const rn=(M,k)=>{const W=k?[k]:(0,C.C6)(),ie=[];return W.forEach(Pe=>{Pe.container.getProvider(M).instances.forEach(It=>{ie.includes(It)||ie.push(It)})}),ie};function Zt(){}class Cn{constructor(k,W=Lo){this.zone=k,this.delegate=W}now(){return this.delegate.now()}schedule(k,W,ie){const Pe=this.zone;return this.delegate.schedule(function(It){Pe.runGuarded(()=>{k.apply(this,[It])})},W,ie)}}class Kn{constructor(k){this.zone=k,this.task=null}call(k,W){const ie=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Zt,{},Zt,Zt)),W.pipe((0,ba.b)({next:ie,complete:ie,error:ie})).subscribe(k).add(ie)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let po=(()=>{class M{constructor(W){this.ngZone=W,this.outsideAngular=W.runOutsideAngular(()=>new Cn(Zone.current)),this.insideAngular=W.run(()=>new Cn(Zone.current,qe.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return M.\u0275fac=function(W){return new(W||M)(p.LFG(p.R0b))},M.\u0275prov=p.Yz7({token:M,factory:M.\u0275fac,providedIn:"root"}),M})();function Zi(){const M=globalThis.\u0275AngularFireScheduler;if(!M)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return M}function _i(M){return M.pipe((0,Ds.Q)(Zi().outsideAngular))}function go(M){return Zi(),function Fi(M){return function(W){return(W=W.lift(new Kn(M.ngZone))).pipe((0,qa.R)(M.outsideAngular),(0,Ds.Q)(M.insideAngular))}}(Zi())(M)}},2090:(Gt,We,V)=>{V.d(We,{$s:()=>ir,BH:()=>yt,G6:()=>tt,L:()=>Oe,LL:()=>dt,Mn:()=>Je,Sg:()=>ot,UG:()=>Ke,US:()=>Me,ZB:()=>ue,ZR:()=>Ne,b$:()=>jt,d:()=>he,eu:()=>Fe,hl:()=>ae,jU:()=>He,m9:()=>fn,ne:()=>lr,pd:()=>rr,r3:()=>Nn,ru:()=>Bt,tV:()=>ke,uI:()=>Ot,vZ:()=>vr,w1:()=>rt,xO:()=>Ir,xb:()=>$n,z$:()=>Ze,zI:()=>ne,zd:()=>qt});const be=function(me){const X=[];let oe=0;for(let Ee=0;Ee<me.length;Ee++){let ye=me.charCodeAt(Ee);ye<128?X[oe++]=ye:ye<2048?(X[oe++]=ye>>6|192,X[oe++]=63&ye|128):55296==(64512&ye)&&Ee+1<me.length&&56320==(64512&me.charCodeAt(Ee+1))?(ye=65536+((1023&ye)<<10)+(1023&me.charCodeAt(++Ee)),X[oe++]=ye>>18|240,X[oe++]=ye>>12&63|128,X[oe++]=ye>>6&63|128,X[oe++]=63&ye|128):(X[oe++]=ye>>12|224,X[oe++]=ye>>6&63|128,X[oe++]=63&ye|128)}return X},Me={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(me,X){if(!Array.isArray(me))throw Error("encodeByteArray takes an array as a parameter");this.init_();const oe=X?this.byteToCharMapWebSafe_:this.byteToCharMap_,Ee=[];for(let ye=0;ye<me.length;ye+=3){const ut=me[ye],gt=ye+1<me.length,Vt=gt?me[ye+1]:0,ar=ye+2<me.length,gn=ar?me[ye+2]:0;let ln=(15&Vt)<<2|gn>>6,Jn=63&gn;ar||(Jn=64,gt||(ln=64)),Ee.push(oe[ut>>2],oe[(3&ut)<<4|Vt>>4],oe[ln],oe[Jn])}return Ee.join("")},encodeString(me,X){return this.HAS_NATIVE_SUPPORT&&!X?btoa(me):this.encodeByteArray(be(me),X)},decodeString(me,X){return this.HAS_NATIVE_SUPPORT&&!X?atob(me):function(me){const X=[];let oe=0,Ee=0;for(;oe<me.length;){const ye=me[oe++];if(ye<128)X[Ee++]=String.fromCharCode(ye);else if(ye>191&&ye<224){const ut=me[oe++];X[Ee++]=String.fromCharCode((31&ye)<<6|63&ut)}else if(ye>239&&ye<365){const ar=((7&ye)<<18|(63&me[oe++])<<12|(63&me[oe++])<<6|63&me[oe++])-65536;X[Ee++]=String.fromCharCode(55296+(ar>>10)),X[Ee++]=String.fromCharCode(56320+(1023&ar))}else{const ut=me[oe++],gt=me[oe++];X[Ee++]=String.fromCharCode((15&ye)<<12|(63&ut)<<6|63&gt)}}return X.join("")}(this.decodeStringToByteArray(me,X))},decodeStringToByteArray(me,X){this.init_();const oe=X?this.charToByteMapWebSafe_:this.charToByteMap_,Ee=[];for(let ye=0;ye<me.length;){const ut=oe[me.charAt(ye++)],Vt=ye<me.length?oe[me.charAt(ye)]:0;++ye;const gn=ye<me.length?oe[me.charAt(ye)]:64;++ye;const Sn=ye<me.length?oe[me.charAt(ye)]:64;if(++ye,null==ut||null==Vt||null==gn||null==Sn)throw Error();Ee.push(ut<<2|Vt>>4),64!==gn&&(Ee.push(Vt<<4&240|gn>>2),64!==Sn&&Ee.push(gn<<6&192|Sn))}return Ee},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let me=0;me<this.ENCODED_VALS.length;me++)this.byteToCharMap_[me]=this.ENCODED_VALS.charAt(me),this.charToByteMap_[this.byteToCharMap_[me]]=me,this.byteToCharMapWebSafe_[me]=this.ENCODED_VALS_WEBSAFE.charAt(me),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[me]]=me,me>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(me)]=me,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(me)]=me)}}},Oe=function(me){return function(me){const X=be(me);return Me.encodeByteArray(X,!0)}(me).replace(/\./g,"")},ke=function(me){try{return Me.decodeString(me,!0)}catch(X){console.error("base64Decode failed: ",X)}return null};function ue(me,X){if(!(X instanceof Object))return X;switch(X.constructor){case Date:return new Date(X.getTime());case Object:void 0===me&&(me={});break;case Array:me=[];break;default:return X}for(const oe in X)!X.hasOwnProperty(oe)||!Ce(oe)||(me[oe]=ue(me[oe],X[oe]));return me}function Ce(me){return"__proto__"!==me}class yt{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((X,oe)=>{this.resolve=X,this.reject=oe})}wrapCallback(X){return(oe,Ee)=>{oe?this.reject(oe):this.resolve(Ee),"function"==typeof X&&(this.promise.catch(()=>{}),1===X.length?X(oe):X(oe,Ee))}}}function ot(me,X){if(me.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const Ee=X||"demo-project",ye=me.iat||0,ut=me.sub||me.user_id;if(!ut)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const gt=Object.assign({iss:`https://securetoken.google.com/${Ee}`,aud:Ee,iat:ye,exp:ye+3600,auth_time:ye,sub:ut,user_id:ut,firebase:{sign_in_provider:"custom",identities:{}}},me);return[Oe(JSON.stringify({alg:"none",type:"JWT"})),Oe(JSON.stringify(gt)),""].join(".")}function Ze(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Ot(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ze())}function Ke(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function He(){return"object"==typeof self&&self.self===self}function Bt(){const me="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof me&&void 0!==me.id}function jt(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function he(){return Ze().indexOf("Electron/")>=0}function rt(){const me=Ze();return me.indexOf("MSIE ")>=0||me.indexOf("Trident/")>=0}function Je(){return Ze().indexOf("MSAppHost/")>=0}function tt(){return!Ke()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ae(){return"object"==typeof indexedDB}function Fe(){return new Promise((me,X)=>{try{let oe=!0;const Ee="validate-browser-context-for-indexeddb-analytics-module",ye=self.indexedDB.open(Ee);ye.onsuccess=()=>{ye.result.close(),oe||self.indexedDB.deleteDatabase(Ee),me(!0)},ye.onupgradeneeded=()=>{oe=!1},ye.onerror=()=>{var ut;X((null===(ut=ye.error)||void 0===ut?void 0:ut.message)||"")}}catch(oe){X(oe)}})}function ne(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class Ne extends Error{constructor(X,oe,Ee){super(oe),this.code=X,this.customData=Ee,this.name="FirebaseError",Object.setPrototypeOf(this,Ne.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,dt.prototype.create)}}class dt{constructor(X,oe,Ee){this.service=X,this.serviceName=oe,this.errors=Ee}create(X,...oe){const Ee=oe[0]||{},ye=`${this.service}/${X}`,ut=this.errors[X],gt=ut?function wt(me,X){return me.replace(Ct,(oe,Ee)=>{const ye=X[Ee];return null!=ye?String(ye):`<${Ee}?>`})}(ut,Ee):"Error";return new Ne(ye,`${this.serviceName}: ${gt} (${ye}).`,Ee)}}const Ct=/\{\$([^}]+)}/g;function Nn(me,X){return Object.prototype.hasOwnProperty.call(me,X)}function $n(me){for(const X in me)if(Object.prototype.hasOwnProperty.call(me,X))return!1;return!0}function vr(me,X){if(me===X)return!0;const oe=Object.keys(me),Ee=Object.keys(X);for(const ye of oe){if(!Ee.includes(ye))return!1;const ut=me[ye],gt=X[ye];if(_r(ut)&&_r(gt)){if(!vr(ut,gt))return!1}else if(ut!==gt)return!1}for(const ye of Ee)if(!oe.includes(ye))return!1;return!0}function _r(me){return null!==me&&"object"==typeof me}function Ir(me){const X=[];for(const[oe,Ee]of Object.entries(me))Array.isArray(Ee)?Ee.forEach(ye=>{X.push(encodeURIComponent(oe)+"="+encodeURIComponent(ye))}):X.push(encodeURIComponent(oe)+"="+encodeURIComponent(Ee));return X.length?"&"+X.join("&"):""}function qt(me){const X={};return me.replace(/^\?/,"").split("&").forEach(Ee=>{if(Ee){const[ye,ut]=Ee.split("=");X[decodeURIComponent(ye)]=decodeURIComponent(ut)}}),X}function rr(me){const X=me.indexOf("?");if(!X)return"";const oe=me.indexOf("#",X);return me.substring(X,oe>0?oe:void 0)}function lr(me,X){const oe=new pt(me,X);return oe.subscribe.bind(oe)}class pt{constructor(X,oe){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=oe,this.task.then(()=>{X(this)}).catch(Ee=>{this.error(Ee)})}next(X){this.forEachObserver(oe=>{oe.next(X)})}error(X){this.forEachObserver(oe=>{oe.error(X)}),this.close(X)}complete(){this.forEachObserver(X=>{X.complete()}),this.close()}subscribe(X,oe,Ee){let ye;if(void 0===X&&void 0===oe&&void 0===Ee)throw new Error("Missing Observer.");ye=function En(me,X){if("object"!=typeof me||null===me)return!1;for(const oe of X)if(oe in me&&"function"==typeof me[oe])return!0;return!1}(X,["next","error","complete"])?X:{next:X,error:oe,complete:Ee},void 0===ye.next&&(ye.next=Hn),void 0===ye.error&&(ye.error=Hn),void 0===ye.complete&&(ye.complete=Hn);const ut=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?ye.error(this.finalError):ye.complete()}catch{}}),this.observers.push(ye),ut}unsubscribeOne(X){void 0===this.observers||void 0===this.observers[X]||(delete this.observers[X],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(X){if(!this.finalized)for(let oe=0;oe<this.observers.length;oe++)this.sendOne(oe,X)}sendOne(X,oe){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[X])try{oe(this.observers[X])}catch(Ee){typeof console<"u"&&console.error&&console.error(Ee)}})}close(X){this.finalized||(this.finalized=!0,void 0!==X&&(this.finalError=X),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Hn(){}function ir(me,X=1e3,oe=2){const Ee=X*Math.pow(oe,me),ye=Math.round(.5*Ee*(Math.random()-.5)*2);return Math.min(144e5,Ee+ye)}function fn(me){return me&&me._delegate?me._delegate:me}},2557:(Gt,We,V)=>{V.d(We,{e:()=>be});var p=V(7579),C=V(4650),G=V(1205);let be=(()=>{class we{constructor(Re){this.auth=Re,this.currentUser=null,this.notifier$=new p.x}Login(Re,Oe){return this.auth.signInWithEmailAndPassword(Re,Oe)}RegisterUser(Re,Oe){return this.auth.createUserWithEmailAndPassword(Re,Oe)}SetCurrentUser(Re){this.currentUser=Re,this.Notify()}GetCurrentUserEmail(){return this.currentUser?.email}GetCurrentUserPhotoUrl(){return this.currentUser?.photoURL}GetCurrentUserDisplayName(){return this.currentUser?.displayName}GetCurrentUserID(){return this.currentUser?.uid}IsUserLoggedIn(){return null!=this.currentUser}LogOut(){this.currentUser=null,this.Notify()}Notify(){this.notifier$.next(this.currentUser)}UserActivity(){return this.notifier$}}return we.\u0275fac=function(Re){return new(Re||we)(C.LFG(G.zQ))},we.\u0275prov=C.Yz7({token:we,factory:we.\u0275fac,providedIn:"root"}),we})()},2358:(Gt,We,V)=>{var p=V(1481),C=V(4650),G=V(433),be=V(529),we=V(7001);class Me{constructor(O,j){this.id="",this.user_email=O,this.timestamp=j}getLiteralObjectRepresentation(){return{user_email:this.user_email,timestamp:this.timestamp}}}class Re{constructor(){this.INVALID_EMAIL={ocurred:!1,message:"El formato del email ingresado no es v\xe1lido."},this.WRONG_PASSWORD={ocurred:!1,message:"Contrase\xf1a equivocada."},this.USER_NOT_FOUND={ocurred:!1,message:"Usuario inexistente."},this.EMAIL_REQUIRED={ocurred:!1,message:"Email requerido."},this.PASSWORD_REQUIRED={ocurred:!1,message:"Contrase\xf1a requerida."},this.OTHER={ocurred:!1,message:"Ha ocurrido un error."}}ClearErrors(){Object.entries(this).forEach(([O,j])=>{j.ocurred=!1})}HasError(){let O=!1;return Object.entries(this).forEach(([j,J])=>{1==J.ocurred&&(O=!0)}),O}}var Oe=V(2557),ke=V(7566);let le=(()=>{class x{constructor(j){this.firestore=j,this.collectionPath="/login_logs",this.loginLogsCollection=j.collection(this.collectionPath)}getDocuments(){return this.loginLogsCollection.valueChanges({idField:"id"})}addDocument(j){return this.loginLogsCollection.add(j)}updateDocument(j,J){return this.loginLogsCollection.doc(j).update(J)}deleteDocument(j){return this.loginLogsCollection.doc(j).delete()}}return x.\u0275fac=function(j){return new(j||x)(C.LFG(ke.ST))},x.\u0275prov=C.Yz7({token:x,factory:x.\u0275fac,providedIn:"root"}),x})();var ue=V(6895);function Ce(x,O){if(1&x&&(C.TgZ(0,"p",14),C._uU(1),C.qZA()),2&x){const j=C.oxw(2);C.xp6(1),C.hij(" ",j.errors.INVALID_EMAIL.message," ")}}function yt(x,O){if(1&x&&(C.TgZ(0,"p",14),C._uU(1),C.qZA()),2&x){const j=C.oxw(2);C.xp6(1),C.hij(" ",j.errors.WRONG_PASSWORD.message," ")}}function ot(x,O){if(1&x&&(C.TgZ(0,"p",14),C._uU(1),C.qZA()),2&x){const j=C.oxw(2);C.xp6(1),C.hij(" ",j.errors.USER_NOT_FOUND.message," ")}}function Ze(x,O){if(1&x&&(C.TgZ(0,"p",14),C._uU(1),C.qZA()),2&x){const j=C.oxw(2);C.xp6(1),C.hij(" ",j.errors.EMAIL_REQUIRED.message," ")}}function Ot(x,O){if(1&x&&(C.TgZ(0,"p",14),C._uU(1),C.qZA()),2&x){const j=C.oxw(2);C.xp6(1),C.hij(" ",j.errors.PASSWORD_REQUIRED.message," ")}}function Ke(x,O){if(1&x&&(C.TgZ(0,"p",14),C._uU(1),C.qZA()),2&x){const j=C.oxw(2);C.xp6(1),C.hij(" ",j.errors.OTHER.message," ")}}function He(x,O){if(1&x&&(C.TgZ(0,"div",12),C.YNc(1,Ce,2,1,"p",13),C.YNc(2,yt,2,1,"p",13),C.YNc(3,ot,2,1,"p",13),C.YNc(4,Ze,2,1,"p",13),C.YNc(5,Ot,2,1,"p",13),C.YNc(6,Ke,2,1,"p",13),C.qZA()),2&x){const j=C.oxw();C.xp6(1),C.Q6J("ngIf",j.errors.INVALID_EMAIL.ocurred),C.xp6(1),C.Q6J("ngIf",j.errors.WRONG_PASSWORD.ocurred),C.xp6(1),C.Q6J("ngIf",j.errors.USER_NOT_FOUND.ocurred),C.xp6(1),C.Q6J("ngIf",j.errors.EMAIL_REQUIRED.ocurred),C.xp6(1),C.Q6J("ngIf",j.errors.PASSWORD_REQUIRED.ocurred),C.xp6(1),C.Q6J("ngIf",j.errors.OTHER.ocurred)}}let Bt=(()=>{class x{constructor(j,J,De){this.auth=j,this.loginLogs=J,this.router=De,this._email="",this._password="",this.errors=new Re}ngOnInit(){this.auth.IsUserLoggedIn()&&this.router.navigate(["/home"])}login(){this.auth.Login(this._email,this._password).then(j=>{this.loginLogs.addDocument(new Me(this._email,Date.now().toString()).getLiteralObjectRepresentation()),null!=j.user&&this.auth.SetCurrentUser(j.user),this.router.navigate(["/home"])}).catch(j=>{this.errors.ClearErrors(),this.RequiredFieldsFilled()&&("auth/invalid-email"==j.code?this.errors.INVALID_EMAIL.ocurred=!0:"auth/wrong-password"==j.code?this.errors.WRONG_PASSWORD.ocurred=!0:"auth/user-not-found"==j.code?this.errors.USER_NOT_FOUND.ocurred=!0:(this.errors.OTHER.message=j.message,this.errors.OTHER.ocurred=!0))})}access(){this._email="test_user@rayoespacial.com",this._password="123456"}RequiredFieldsFilled(){return""==this._email?(this.errors.EMAIL_REQUIRED.ocurred=!0,!1):""!=this._password||(this.errors.PASSWORD_REQUIRED.ocurred=!0,!1)}}return x.\u0275fac=function(j){return new(j||x)(C.Y36(Oe.e),C.Y36(le),C.Y36(we.F0))},x.\u0275cmp=C.Xpm({type:x,selectors:[["app-login-form"]],decls:19,vars:3,consts:[[1,"login-container","text-center"],[1,"form-signin","w-100","m-auto"],["src","../../../assets/rayo-espacial-logo-grande.png","alt","","width","200","height","200",1,"mb-4"],[1,"form-floating"],["type","email","name","email","id","floatingInput","placeholder","name@example.com",1,"form-control",3,"ngModel","ngModelChange"],["for","floatingInput"],["type","password","name","password","id","floatingPassword","placeholder","Password",1,"form-control",3,"ngModel","ngModelChange"],["for","floatingPassword"],[1,"w-100","btn","btn-lg","btn-primary","mt-4","submit-customization",3,"click"],[1,"w-100","btn","btn-lg","btn-primary","mt-1","access-btn-customization",3,"click"],["class","alert alert-danger mt-5","role","alert",4,"ngIf"],[1,"mt-5","mb-3","text-muted"],["role","alert",1,"alert","alert-danger","mt-5"],["class","m-0",4,"ngIf"],[1,"m-0"]],template:function(j,J){1&j&&(C.TgZ(0,"div",0)(1,"main",1)(2,"form"),C._UZ(3,"img",2),C.TgZ(4,"div",3)(5,"input",4),C.NdJ("ngModelChange",function(je){return J._email=je}),C.qZA(),C.TgZ(6,"label",5),C._uU(7,"Email"),C.qZA()(),C.TgZ(8,"div",3)(9,"input",6),C.NdJ("ngModelChange",function(je){return J._password=je}),C.qZA(),C.TgZ(10,"label",7),C._uU(11,"Password"),C.qZA()(),C.TgZ(12,"button",8),C.NdJ("click",function(){return J.login()}),C._uU(13,"Ingresar"),C.qZA(),C.TgZ(14,"button",9),C.NdJ("click",function(){return J.access()}),C._uU(15,"Acceso R\xe1pido"),C.qZA(),C.YNc(16,He,7,6,"div",10),C.TgZ(17,"p",11),C._uU(18,"\xa9 Ignacio Perez Artaso - 2022"),C.qZA()()()()),2&j&&(C.xp6(5),C.Q6J("ngModel",J._email),C.xp6(4),C.Q6J("ngModel",J._password),C.xp6(7),C.Q6J("ngIf",J.errors.HasError()))},dependencies:[ue.O5,G._Y,G.Fj,G.JJ,G.JL,G.On,G.F],styles:[".login-container[_ngcontent-%COMP%]{display:flex;align-items:center;padding-top:40px;padding-bottom:40px;background-color:#e6e0bb}.form-signin[_ngcontent-%COMP%]{max-width:330px;padding:15px}.form-signin[_ngcontent-%COMP%]   .form-floating[_ngcontent-%COMP%]:focus-within{z-index:2}.form-signin[_ngcontent-%COMP%]   input[type=email][_ngcontent-%COMP%]{margin-bottom:-1px;border-bottom-right-radius:0;border-bottom-left-radius:0}.form-signin[_ngcontent-%COMP%]   input[type=password][_ngcontent-%COMP%]{margin-bottom:10px;border-top-left-radius:0;border-top-right-radius:0}.submit-customization[_ngcontent-%COMP%]{background-color:#0d0f45!important;border:none!important}.access-btn-customization[_ngcontent-%COMP%]{background-color:#450d16;border:none}"]}),x})();class jt{constructor(){this.EMAIL_EXISTS={ocurred:!1,message:"El email ingresado ya se encuentra registrado."},this.WEAK_PASSWORD={ocurred:!1,message:"La contrase\xf1a debe tener al menos seis (6) d\xedgitos."},this.WRONG_PASSWORD_CONFIRMATION={ocurred:!1,message:"Las contrase\xf1as ingresadas no coinciden."},this.EMAIL_REQUIRED={ocurred:!1,message:"Email requerido."},this.PASSWORD_REQUIRED={ocurred:!1,message:"Contrase\xf1a requerida."},this.OTHER={ocurred:!1,message:"Ha ocurrido un error."}}ClearErrors(){Object.entries(this).forEach(([O,j])=>{j.ocurred=!1})}HasError(){let O=!1;return Object.entries(this).forEach(([j,J])=>{1==J.ocurred&&(O=!0)}),O}}function he(x,O){if(1&x&&(C.TgZ(0,"p",15),C._uU(1),C.qZA()),2&x){const j=C.oxw(2);C.xp6(1),C.hij(" ",j.errors.EMAIL_EXISTS.message," ")}}function rt(x,O){if(1&x&&(C.TgZ(0,"p",15),C._uU(1),C.qZA()),2&x){const j=C.oxw(2);C.xp6(1),C.hij(" ",j.errors.WEAK_PASSWORD.message," ")}}function Je(x,O){if(1&x&&(C.TgZ(0,"p",15),C._uU(1),C.qZA()),2&x){const j=C.oxw(2);C.xp6(1),C.hij(" ",j.errors.WRONG_PASSWORD_CONFIRMATION.message," ")}}function vt(x,O){if(1&x&&(C.TgZ(0,"p",15),C._uU(1),C.qZA()),2&x){const j=C.oxw(2);C.xp6(1),C.hij(" ",j.errors.EMAIL_REQUIRED.message," ")}}function tt(x,O){if(1&x&&(C.TgZ(0,"p",15),C._uU(1),C.qZA()),2&x){const j=C.oxw(2);C.xp6(1),C.hij(" ",j.errors.PASSWORD_REQUIRED.message," ")}}function ae(x,O){if(1&x&&(C.TgZ(0,"p",15),C._uU(1),C.qZA()),2&x){const j=C.oxw(2);C.xp6(1),C.hij(" ",j.errors.OTHER.message," ")}}function Fe(x,O){if(1&x&&(C.TgZ(0,"div",13),C.YNc(1,he,2,1,"p",14),C.YNc(2,rt,2,1,"p",14),C.YNc(3,Je,2,1,"p",14),C.YNc(4,vt,2,1,"p",14),C.YNc(5,tt,2,1,"p",14),C.YNc(6,ae,2,1,"p",14),C.qZA()),2&x){const j=C.oxw();C.xp6(1),C.Q6J("ngIf",j.errors.EMAIL_EXISTS.ocurred),C.xp6(1),C.Q6J("ngIf",j.errors.WEAK_PASSWORD.ocurred),C.xp6(1),C.Q6J("ngIf",j.errors.WRONG_PASSWORD_CONFIRMATION.ocurred),C.xp6(1),C.Q6J("ngIf",j.errors.EMAIL_REQUIRED.ocurred),C.xp6(1),C.Q6J("ngIf",j.errors.PASSWORD_REQUIRED.ocurred),C.xp6(1),C.Q6J("ngIf",j.errors.OTHER.ocurred)}}let ne=(()=>{class x{constructor(j,J){this.auth=j,this.router=J,this._email="",this._password="",this._passwordConfirmation="",this.errors=new jt}ngOnInit(){}Register(){this.errors.ClearErrors(),this._password==this._passwordConfirmation?this.auth.RegisterUser(this._email,this._password).then(j=>{null!=j.user&&this.auth.SetCurrentUser(j.user),this.router.navigate(["/home"])}).catch(j=>{this.RequiredFieldsFilled()&&("auth/email-already-in-use"==j.code?this.errors.EMAIL_EXISTS.ocurred=!0:"auth/weak-password"==j.code?this.errors.WEAK_PASSWORD.ocurred=!0:(this.errors.OTHER.message=j.message,this.errors.OTHER.ocurred=!0))}):this.errors.WRONG_PASSWORD_CONFIRMATION.ocurred=!0}RequiredFieldsFilled(){return""==this._email?(this.errors.EMAIL_REQUIRED.ocurred=!0,!1):""!=this._password||(this.errors.PASSWORD_REQUIRED.ocurred=!0,!1)}}return x.\u0275fac=function(j){return new(j||x)(C.Y36(Oe.e),C.Y36(we.F0))},x.\u0275cmp=C.Xpm({type:x,selectors:[["app-register"]],decls:21,vars:4,consts:[[1,"login-container","text-center"],[1,"form-signin","w-100","m-auto"],["src","../../../assets/sign-in-logo.png","alt","","width","200","height","200",1,"mb-4"],[1,"form-floating","mb-2"],["type","email","name","email","id","floatingInput","placeholder","name@example.com",1,"form-control",3,"ngModel","ngModelChange"],["for","floatingInput"],["type","password","name","password","id","floatingPassword","placeholder","Password",1,"form-control",3,"ngModel","ngModelChange"],["for","floatingPassword"],[1,"form-floating"],["type","password","name","passwordConfirmation","id","floatingPassword","placeholder","Password",1,"form-control",3,"ngModel","ngModelChange"],[1,"w-100","btn","btn-lg","btn-primary","mt-4","submit-customization",3,"click"],["class","alert alert-danger mt-5","role","alert",4,"ngIf"],[1,"mt-5","mb-3","text-muted"],["role","alert",1,"alert","alert-danger","mt-5"],["class","m-0",4,"ngIf"],[1,"m-0"]],template:function(j,J){1&j&&(C.TgZ(0,"div",0)(1,"main",1)(2,"form"),C._UZ(3,"img",2),C.TgZ(4,"div",3)(5,"input",4),C.NdJ("ngModelChange",function(je){return J._email=je}),C.qZA(),C.TgZ(6,"label",5),C._uU(7,"Email"),C.qZA()(),C.TgZ(8,"div",3)(9,"input",6),C.NdJ("ngModelChange",function(je){return J._password=je}),C.qZA(),C.TgZ(10,"label",7),C._uU(11,"Nueva Contrase\xf1a"),C.qZA()(),C.TgZ(12,"div",8)(13,"input",9),C.NdJ("ngModelChange",function(je){return J._passwordConfirmation=je}),C.qZA(),C.TgZ(14,"label",7),C._uU(15,"Confirme Su Contrase\xf1a"),C.qZA()(),C.TgZ(16,"button",10),C.NdJ("click",function(){return J.Register()}),C._uU(17,"Registrarse"),C.qZA(),C.YNc(18,Fe,7,6,"div",11),C.TgZ(19,"p",12),C._uU(20,"\xa9 Ignacio Perez Artaso - 2022"),C.qZA()()()()),2&j&&(C.xp6(5),C.Q6J("ngModel",J._email),C.xp6(4),C.Q6J("ngModel",J._password),C.xp6(4),C.Q6J("ngModel",J._passwordConfirmation),C.xp6(5),C.Q6J("ngIf",J.errors.HasError()))},dependencies:[ue.O5,G._Y,G.Fj,G.JJ,G.JL,G.On,G.F],styles:[".login-container[_ngcontent-%COMP%]{display:flex;align-items:center;padding-top:40px;padding-bottom:40px;background-color:#e6e0bb}.form-signin[_ngcontent-%COMP%]{max-width:330px;padding:15px}.form-signin[_ngcontent-%COMP%]   .form-floating[_ngcontent-%COMP%]:focus-within{z-index:2}.form-signin[_ngcontent-%COMP%]   input[type=email][_ngcontent-%COMP%]{margin-bottom:-1px;border-bottom-right-radius:0;border-bottom-left-radius:0}.form-signin[_ngcontent-%COMP%]   input[type=password][_ngcontent-%COMP%]{margin-bottom:-1px;border-top-left-radius:0;border-top-right-radius:0}.submit-customization[_ngcontent-%COMP%]{background-color:#0d0f45!important;border:none!important}"]}),x})(),Ie=(()=>{class x{constructor(j,J){this.auth=j,this.router=J}canActivate(j,J){return!!this.auth.IsUserLoggedIn()||this.router.navigate(["/login"]).then(()=>!1)}}return x.\u0275fac=function(j){return new(j||x)(C.LFG(Oe.e),C.LFG(we.F0))},x.\u0275prov=C.Yz7({token:x,factory:x.\u0275fac,providedIn:"root"}),x})(),de=(()=>{class x{constructor(){this.reveal=[!1,!1]}ngOnInit(){}revealElements(j){}}return x.\u0275fac=function(j){return new(j||x)},x.\u0275cmp=C.Xpm({type:x,selectors:[["app-about-me"]],decls:34,vars:0,consts:[[1,"container","mt-4"],[1,"row"],[1,"co-12","col-lg-3","first-reveal"],[1,"card"],["src","../../../assets/micara.webp","alt","Card image cap",1,"card-img-top","img-thumbnail","img-fluid","rounded-pill"],[1,"card-body"],[1,"card-title"],[1,"col","align-self-center","my-sm-4","second-reveal"],[1,"card-text"]],template:function(j,J){1&j&&(C.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),C._UZ(4,"img",4),C.TgZ(5,"div",5)(6,"h5",6),C._uU(7,"Ignacio Perez Artaso"),C.qZA(),C.TgZ(8,"ul")(9,"li"),C._uU(10," DNI: 37124127 "),C.qZA(),C.TgZ(11,"li"),C._uU(12," Legajo Nro. 106134 "),C.qZA(),C.TgZ(13,"li"),C._uU(14," Divisi\xf3n: 4to B "),C.qZA(),C.TgZ(15,"li"),C._uU(16," https://github.com/perez-artaso "),C.qZA(),C.TgZ(17,"li"),C._uU(18,"perez.artaso@gmail.com "),C.qZA()()()()(),C.TgZ(19,"div",7)(20,"div",3)(21,"h1"),C._uU(22,"RayoEspacial"),C.qZA(),C.TgZ(23,"div",5)(24,"h5",6),C._uU(25,"El Camino"),C.qZA(),C.TgZ(26,"p",8),C._uU(27," Mi juego consiste en un tablero en forma de grilla cuadrangular en el que se ense\xf1ar\xe1 al jugador una ruta que conecta una entrada con una salida. Tras unos instantes, se ocultar\xe1 este recorrido y el intr\xe9pido jugador deber\xe1 recordarlo, contando con tres intentos para recorrer correctamente el camino. "),C._UZ(28,"br")(29,"br"),C._uU(30," Cualquier equivocaci\xf3n en la ruta contar\xe1 como un intento fallido. Los recorridos se generar\xe1n proceduralmente al inicio de cada partida, por lo que el desaf\xedo se renovar\xe1 constantemente. "),C._UZ(31,"br")(32,"br"),C._uU(33," El tama\xf1o del tablero ser\xe1 personalizable. Mientras m\xe1s grande, m\xe1s puntos dar\xe1 la victoria. "),C.qZA()()()()()())},styles:["[_ngcontent-%COMP%]:root{--main-color: #E6E0BB;--main-contrast: #0D0F45}.card[_ngcontent-%COMP%]{background-color:#e6e0bb}h1[_ngcontent-%COMP%]{text-align:center}"]}),x})();class Ne{constructor(O,j,J,De){this._game_description=J,this._game_url=O,this._photo_url=j,this._game_title=De}}function dt(x,O){if(1&x&&(C.TgZ(0,"div",3)(1,"div",4),C._UZ(2,"img",5),C.TgZ(3,"div",6)(4,"p",7),C._uU(5),C.qZA(),C.TgZ(6,"a",8),C._uU(7,"Jugar"),C.qZA()()()()),2&x){const j=O.$implicit;C.xp6(2),C.s9C("src",j._photo_url,C.LSH),C.xp6(3),C.Oqu(j._game_description),C.xp6(1),C.s9C("routerLink",j._game_url)}}const Ct=[{path:"",redirectTo:"home",pathMatch:"full"},{path:"about-me",component:de},{path:"home",component:(()=>{class x{constructor(){this.games=[]}ngOnInit(){this.games.push(new Ne("/ahorcado","/assets/ahorcado.png","Adivin\xe1 cada letra de una palabra intergal\xe1ctica. Pero ten\xe9 cuidado: \xa1cada error pone a tu nave un poco m\xe1s cerca del final de su traves\xeda!","Ahorcado espacial"),new Ne("/mayor-o-menor","/assets/mayor-menor.png","Una baraja creada en un planeta lejano. Sacalas de a una. La siguiente: \xbfser\xe1 mayor?, \xbfser\xe1 menor? S\xf3lo un viajero intr\xe9pido conoce la respuesta.","Mayor o menor"),new Ne("/preguntados-banderas","/assets/trivia.png","\xbfCu\xe1nto sab\xe9s de tu propio planeta? Demostralo en esta trivia de banderas.","Trivia gal\xe1ctica"),new Ne("/el-camino","/assets/elcamino.png","Una dense niebla cae sobre la tierra. \xbfSer\xe1 tu memoria la que te salve de un destino fatal? Descubrilo en nuestro nuevo juego: El Camino.","El camino"))}}return x.\u0275fac=function(j){return new(j||x)},x.\u0275cmp=C.Xpm({type:x,selectors:[["app-home"]],decls:3,vars:1,consts:[[1,"container","mt-2"],[1,"row"],["class","col-12",4,"ngFor","ngForOf"],[1,"col-12"],[2,"display","flex","margin-bottom","2rem"],["alt","Acceso a juego",2,"border-radius","5px",3,"src"],[2,"margin-left","2rem","background-color","aliceblue","display","flex","flex-direction","column","justify-content","space-around","padding","1rem 2rem","width","100%"],[1,"card-text",2,"line-height","2rem"],[1,"btn","btn-primary",2,"width","100%",3,"routerLink"]],template:function(j,J){1&j&&(C.TgZ(0,"div",0)(1,"div",1),C.YNc(2,dt,8,3,"div",2),C.qZA()()),2&j&&(C.xp6(2),C.Q6J("ngForOf",J.games))},dependencies:[ue.sg,we.yS],styles:["img[_ngcontent-%COMP%]{max-width:200px;background-color:#e6e0bb}"]}),x})(),canActivate:[Ie]},{path:"register",component:ne},{path:"login",component:Bt},{path:"chat",loadChildren:()=>V.e(505).then(V.bind(V,505)).then(x=>x.ChatModule),canActivate:[Ie]},{path:"ahorcado",loadChildren:()=>Promise.all([V.e(592),V.e(567)]).then(V.bind(V,1567)).then(x=>x.AhorcadoModule),canActivate:[Ie]},{path:"mayor-o-menor",loadChildren:()=>Promise.all([V.e(592),V.e(200)]).then(V.bind(V,9200)).then(x=>x.MayorOMenorModule),canActivate:[Ie]},{path:"preguntados-banderas",loadChildren:()=>Promise.all([V.e(592),V.e(395)]).then(V.bind(V,8395)).then(x=>x.PreguntadosBanderasModule),canActivate:[Ie]},{path:"el-camino",loadChildren:()=>Promise.all([V.e(592),V.e(749)]).then(V.bind(V,8749)).then(x=>x.ElCaminoModule),canActivate:[Ie]},{path:"scores",loadChildren:()=>Promise.all([V.e(592),V.e(228)]).then(V.bind(V,7228)).then(x=>x.ScoresModule),canActivate:[Ie]},{path:"survey",loadChildren:()=>V.e(175).then(V.bind(V,3175)).then(x=>x.SurveyModule)}];let Mt=(()=>{class x{}return x.\u0275fac=function(j){return new(j||x)},x.\u0275mod=C.oAB({type:x}),x.\u0275inj=C.cJS({imports:[we.Bz.forRoot(Ct,{anchorScrolling:"enabled"}),we.Bz]}),x})();function $t(x,O){1&x&&(C.TgZ(0,"a",17),C._uU(1,"Chat"),C.qZA())}function ht(x,O){1&x&&(C.TgZ(0,"a",18),C._uU(1,"Puntajes"),C.qZA())}function tn(x,O){1&x&&(C.TgZ(0,"a",19),C._uU(1,"Encuesta"),C.qZA())}function Kt(x,O){1&x&&(C.TgZ(0,"li",20)(1,"a",21),C._uU(2," Juegos "),C.qZA(),C.TgZ(3,"ul",22)(4,"li")(5,"a",23),C._uU(6,"Ahorcado"),C.qZA()(),C.TgZ(7,"li")(8,"a",24),C._uU(9,"Banderas"),C.qZA()(),C.TgZ(10,"li")(11,"a",25),C._uU(12,"Mayor o menor"),C.qZA()(),C.TgZ(13,"li")(14,"a",26),C._uU(15,"El camino"),C.qZA()()()())}function on(x,O){if(1&x){const j=C.EpF();C.TgZ(0,"li",20)(1,"a",21),C._uU(2),C.qZA(),C.TgZ(3,"ul",22)(4,"li")(5,"a",27),C.NdJ("click",function(){C.CHM(j);const De=C.oxw();return C.KtG(De.LogOut())}),C._uU(6,"Salir"),C.qZA()()()()}if(2&x){const j=C.oxw();C.xp6(2),C.hij(" ",j.dropdownLabel," ")}}function kt(x,O){1&x&&(C.TgZ(0,"ul",22)(1,"li")(2,"a",29),C._uU(3,"Login"),C.qZA()(),C._UZ(4,"div",30),C.TgZ(5,"li")(6,"a",31),C._uU(7,"Registrate"),C.qZA()()())}function Nn(x,O){if(1&x&&(C.TgZ(0,"li",20)(1,"a",21),C._uU(2),C.qZA(),C.YNc(3,kt,8,0,"ul",28),C.qZA()),2&x){const j=C.oxw();C.xp6(2),C.hij(" ",j.dropdownLabel," "),C.xp6(1),C.Q6J("ngIf",null==j.user)}}let un=(()=>{class x{constructor(j,J){this.auth=j,this.router=J,this.dropdownLabel="Qui\xe9n Sos",this.user=null}ngOnInit(){this.auth.UserActivity().subscribe(j=>{this.user=j,this.dropdownLabel=j&&null!=j.email?j.email:"Qui\xe9n Sos"})}LogOut(){this.auth.LogOut(),this.router.navigate(["/login"])}}return x.\u0275fac=function(j){return new(j||x)(C.Y36(Oe.e),C.Y36(we.F0))},x.\u0275cmp=C.Xpm({type:x,selectors:[["app-navbar"]],decls:24,vars:6,consts:[[1,"navbar","navbar-expand-lg","navbar-dark","bg-primary","navbar-customization"],[1,"container-fluid"],["routerLink","/",1,"navbar-brand"],["src","../../../assets/rocket-only.png","width","50","height","50","alt","Bootstrap","loading","lazy",1,"d-inline-block","align-top"],["type","button","data-bs-toggle","collapse","data-bs-target","#navbarSupportedContent2","aria-controls","navbarSupportedContent2","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["id","navbarSupportedContent2",1,"collapse","navbar-collapse"],[1,"navbar-nav","me-auto","mb-2","mb-lg-0"],[1,"nav-item"],["aria-current","page","routerLink","/",1,"nav-link","active","nav-link-customization"],["routerLink","/about-me",1,"nav-link","nav-link-customization"],["class","nav-link nav-link-customization","routerLink","/chat/chat-room",4,"ngIf"],["class","nav-link nav-link-customization","routerLink","/scores",4,"ngIf"],["class","nav-link nav-link-customization","routerLink","/survey",4,"ngIf"],["class","nav-item dropdown",4,"ngIf"],["class","nav-item dropdown",4,"ngIf","ngIfElse"],["noUser",""],["routerLink","/chat/chat-room",1,"nav-link","nav-link-customization"],["routerLink","/scores",1,"nav-link","nav-link-customization"],["routerLink","/survey",1,"nav-link","nav-link-customization"],[1,"nav-item","dropdown"],["role","button","data-bs-toggle","dropdown","aria-expanded","false",1,"nav-link","dropdown-toggle","nav-link-customization"],[1,"dropdown-menu"],["routerLink","/ahorcado",1,"dropdown-item","nav-link-customization"],["routerLink","/preguntados-banderas",1,"dropdown-item","nav-link-customization"],["routerLink","/mayor-o-menor",1,"dropdown-item","nav-link-customization"],["routerLink","/el-camino",1,"dropdown-item","nav-link-customization"],[1,"dropdown-item","nav-link-customization",3,"click"],["class","dropdown-menu",4,"ngIf"],["routerLink","/login",1,"dropdown-item","nav-link-customization"],[1,"dropdown-divider"],["routerLink","/register",1,"dropdown-item","nav-link-customization"]],template:function(j,J){if(1&j&&(C.TgZ(0,"nav",0)(1,"div",1)(2,"a",2),C._UZ(3,"img",3),C.qZA(),C.TgZ(4,"button",4),C._UZ(5,"span",5),C.qZA(),C.TgZ(6,"div",6)(7,"ul",7)(8,"li",8)(9,"a",9),C._uU(10,"Inicio"),C.qZA()(),C.TgZ(11,"li",8)(12,"a",10),C._uU(13,"Qui\xe9n Soy"),C.qZA()(),C.TgZ(14,"li",8),C.YNc(15,$t,2,0,"a",11),C.qZA(),C.TgZ(16,"li",8),C.YNc(17,ht,2,0,"a",12),C.qZA(),C.TgZ(18,"li",8),C.YNc(19,tn,2,0,"a",13),C.qZA(),C.YNc(20,Kt,16,0,"li",14),C.YNc(21,on,7,1,"li",15),C.YNc(22,Nn,4,2,"ng-template",null,16,C.W1O),C.qZA()()()()),2&j){const De=C.MAs(23);C.xp6(15),C.Q6J("ngIf",null!=J.user),C.xp6(2),C.Q6J("ngIf",null!=J.user),C.xp6(2),C.Q6J("ngIf",null!=J.user),C.xp6(1),C.Q6J("ngIf",null!=J.user),C.xp6(1),C.Q6J("ngIf",null!=J.user)("ngIfElse",De)}},dependencies:[ue.O5,we.yS],styles:[".navbar-customization[_ngcontent-%COMP%]{background-color:#e6e0bb!important;border-bottom:.1rem solid #0D0F45!important}.nav-link-customization[_ngcontent-%COMP%]{color:#0d0f45}.active[_ngcontent-%COMP%]{color:#0d0f45!important;font-family:orbitron-black}.navbar-toggler[_ngcontent-%COMP%]{background-color:#0d0f45}"]}),x})(),$n=(()=>{class x{constructor(){this.title="sala-juegos-2022"}}return x.\u0275fac=function(j){return new(j||x)},x.\u0275cmp=C.Xpm({type:x,selectors:[["app-root"]],decls:2,vars:0,template:function(j,J){1&j&&C._UZ(0,"app-navbar")(1,"router-outlet")},dependencies:[we.lC,un]}),x})();var Wr=V(2011);const vr_firebaseConfig={apiKey:"AIzaSyD0FF-k7oz1RvH525aoPPdGGfo8Y7q_9Rw",authDomain:"salajuegos2022.firebaseapp.com",databaseURL:"https://salajuegos2022-default-rtdb.firebaseio.com",projectId:"salajuegos2022",storageBucket:"salajuegos2022.appspot.com",messagingSenderId:"15910949459",appId:"1:15910949459:web:cdef48d9faa371ab90aca6"};var _r=V(1205),yr=V(9751),Ir=V(9646),qt=V(8996),rr=V(4986),zn=V(4482),lr=V(5403),nr=V(4004),En=V(3900),Hn=V(5813),ei=V(3942),ti=V(5861),wr=V(9681),Ue=V(2090),ge=V(4859);const se="firebasestorage.googleapis.com",Be="storageBucket";class Ft extends Ue.ZR{constructor(O,j){super(Vn(O),`Firebase Storage: ${j} (${Vn(O)})`),this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Ft.prototype)}_codeEquals(O){return Vn(O)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(O){this.customData.serverResponse=O,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}function Vn(x){return"storage/"+x}function At(){return new Ft("unknown","An unknown error occurred, please check the error payload for server response.")}function oe(){return new Ft("canceled","User canceled the upload/download.")}function gt(){return new Ft("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function gn(x){return new Ft("invalid-argument",x)}function cr(){return new Ft("app-deleted","The Firebase app was deleted.")}function Sn(x){return new Ft("invalid-root-operation","The operation '"+x+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function ln(x,O){return new Ft("invalid-format","String does not match format '"+x+"': "+O)}function Jn(x){throw new Ft("internal-error","Internal error: "+x)}class kn{constructor(O,j){this.bucket=O,this.path_=j}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const O=encodeURIComponent;return"/b/"+O(this.bucket)+"/o/"+O(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(O,j){let J;try{J=kn.makeFromUrl(O,j)}catch{return new kn(O,"")}if(""===J.path)return J;throw function ye(x){return new Ft("invalid-default-bucket","Invalid default bucket '"+x+"'.")}(O)}static makeFromUrl(O,j){let J=null;const De="([A-Za-z0-9.\\-_]+)",sn=new RegExp("^gs://"+De+"(/(.*))?$","i");function An(Gi){Gi.path_=decodeURIComponent(Gi.path)}const Jr=j.replace(/[.]/g,"\\."),xi=[{regex:sn,indices:{bucket:1,path:3},postModify:function je(Gi){"/"===Gi.path.charAt(Gi.path.length-1)&&(Gi.path_=Gi.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${Jr}/v[A-Za-z0-9_]+/b/${De}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:An},{regex:new RegExp(`^https?://${j===se?"(?:storage.googleapis.com|storage.cloud.google.com)":j}/${De}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:An}];for(let Gi=0;Gi<xi.length;Gi++){const ho=xi[Gi],bo=ho.regex.exec(O);if(bo){let ns=bo[ho.indices.path];ns||(ns=""),J=new kn(bo[ho.indices.bucket],ns),ho.postModify(J);break}}if(null==J)throw function Ee(x){return new Ft("invalid-url","Invalid URL '"+x+"'.")}(O);return J}}class qr{constructor(O){this.promise_=Promise.reject(O)}getPromise(){return this.promise_}cancel(O=!1){}}function Le(x){return"string"==typeof x||x instanceof String}function at(x){return Wt()&&x instanceof Blob}function Wt(){return typeof Blob<"u"}function pn(x,O,j,J){if(J<O)throw gn(`Invalid value for '${x}'. Expected ${O} or greater.`);if(J>j)throw gn(`Invalid value for '${x}'. Expected ${j} or less.`)}function cn(x,O,j){let J=O;return null==j&&(J=`https://${O}`),`${j}://${J}/v0${x}`}function hr(x){const O=encodeURIComponent;let j="?";for(const J in x)x.hasOwnProperty(J)&&(j=j+(O(J)+"=")+O(x[J])+"&");return j=j.slice(0,-1),j}var Cr=(()=>{return(x=Cr||(Cr={}))[x.NO_ERROR=0]="NO_ERROR",x[x.NETWORK_ERROR=1]="NETWORK_ERROR",x[x.ABORT=2]="ABORT",Cr;var x})();class mn{constructor(O,j,J,De,je,bt,sn,Ut,An,Gn,Jr){this.url_=O,this.method_=j,this.headers_=J,this.body_=De,this.successCodes_=je,this.additionalRetryCodes_=bt,this.callback_=sn,this.errorCallback_=Ut,this.timeout_=An,this.progressCallback_=Gn,this.connectionFactory_=Jr,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((Nr,ai)=>{this.resolve_=Nr,this.reject_=ai,this.start_()})}start_(){const j=(J,De)=>{const je=this.resolve_,bt=this.reject_,sn=De.connection;if(De.wasSuccessCode)try{const Ut=this.callback_(sn,sn.getResponse());!function ve(x){return void 0!==x}(Ut)?je():je(Ut)}catch(Ut){bt(Ut)}else if(null!==sn){const Ut=At();Ut.serverResponse=sn.getErrorText(),bt(this.errorCallback_?this.errorCallback_(sn,Ut):Ut)}else bt(De.canceled?this.appDelete_?cr():oe():function X(){return new Ft("retry-limit-exceeded","Max retry time for operation exceeded, please try again.")}())};this.canceled_?j(0,new In(!1,null,!0)):this.backoffId_=function $r(x,O,j){let J=1,De=null,je=null,bt=!1,sn=0;function Ut(){return 2===sn}let An=!1;function Gn(...ui){An||(An=!0,O.apply(null,ui))}function Jr(ui){De=setTimeout(()=>{De=null,x(ai,Ut())},ui)}function Nr(){je&&clearTimeout(je)}function ai(ui,...$i){if(An)return void Nr();if(ui)return Nr(),void Gn.call(null,ui,...$i);if(Ut()||bt)return Nr(),void Gn.call(null,ui,...$i);let xi;J<64&&(J*=2),1===sn?(sn=2,xi=0):xi=1e3*(J+Math.random()),Jr(xi)}let gr=!1;function br(ui){gr||(gr=!0,Nr(),!An&&(null!==De?(ui||(sn=2),clearTimeout(De),Jr(0)):ui||(sn=1)))}return Jr(0),je=setTimeout(()=>{bt=!0,br(!0)},j),br}((J,De)=>{if(De)return void J(!1,new In(!1,null,!0));const je=this.connectionFactory_();this.pendingConnection_=je;const bt=sn=>{null!==this.progressCallback_&&this.progressCallback_(sn.loaded,sn.lengthComputable?sn.total:-1)};null!==this.progressCallback_&&je.addUploadProgressListener(bt),je.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&je.removeUploadProgressListener(bt),this.pendingConnection_=null;const sn=je.getErrorCode()===Cr.NO_ERROR,Ut=je.getStatus();if(!sn||this.isRetryStatusCode_(Ut)){const Gn=je.getErrorCode()===Cr.ABORT;return void J(!1,new In(!1,null,Gn))}const An=-1!==this.successCodes_.indexOf(Ut);J(!0,new In(An,je))})},j,this.timeout_)}getPromise(){return this.promise_}cancel(O){this.canceled_=!0,this.appDelete_=O||!1,null!==this.backoffId_&&function Dr(x){x(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}isRetryStatusCode_(O){const j=O>=500&&O<600,De=-1!==[408,429].indexOf(O),je=-1!==this.additionalRetryCodes_.indexOf(O);return j||De||je}}class In{constructor(O,j,J){this.wasSuccessCode=O,this.connection=j,this.canceled=!!J}}function Zr(...x){const O=function as(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}();if(void 0!==O){const j=new O;for(let J=0;J<x.length;J++)j.append(x[J]);return j.getBlob()}if(Wt())return new Blob(x);throw new Ft("unsupported-environment","This browser doesn't seem to support creating Blobs")}const Mn={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class oo{constructor(O,j){this.data=O,this.contentType=j||null}}function Qi(x,O){switch(x){case Mn.RAW:return new oo(Ti(O));case Mn.BASE64:case Mn.BASE64URL:return new oo(Ii(x,O));case Mn.DATA_URL:return new oo(function Ji(x){const O=new Oi(x);return O.base64?Ii(Mn.BASE64,O.rest):function Ps(x){let O;try{O=decodeURIComponent(x)}catch{throw ln(Mn.DATA_URL,"Malformed data URL.")}return Ti(O)}(O.rest)}(O),function Ar(x){return new Oi(x).contentType}(O))}throw At()}function Ti(x){const O=[];for(let j=0;j<x.length;j++){let J=x.charCodeAt(j);J<=127?O.push(J):J<=2047?O.push(192|J>>6,128|63&J):55296==(64512&J)?j<x.length-1&&56320==(64512&x.charCodeAt(j+1))?(J=65536|(1023&J)<<10|1023&x.charCodeAt(++j),O.push(240|J>>18,128|J>>12&63,128|J>>6&63,128|63&J)):O.push(239,191,189):56320==(64512&J)?O.push(239,191,189):O.push(224|J>>12,128|J>>6&63,128|63&J)}return new Uint8Array(O)}function Ii(x,O){switch(x){case Mn.BASE64:{const De=-1!==O.indexOf("-"),je=-1!==O.indexOf("_");if(De||je)throw ln(x,"Invalid character '"+(De?"-":"_")+"' found: is it base64url encoded?");break}case Mn.BASE64URL:{const De=-1!==O.indexOf("+"),je=-1!==O.indexOf("/");if(De||je)throw ln(x,"Invalid character '"+(De?"+":"/")+"' found: is it base64 encoded?");O=O.replace(/-/g,"+").replace(/_/g,"/");break}}let j;try{j=function Ri(x){return atob(x)}(O)}catch{throw ln(x,"Invalid character found")}const J=new Uint8Array(j.length);for(let De=0;De<j.length;De++)J[De]=j.charCodeAt(De);return J}class Oi{constructor(O){this.base64=!1,this.contentType=null;const j=O.match(/^data:([^,]+)?,/);if(null===j)throw ln(Mn.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const J=j[1]||null;null!=J&&(this.base64=function us(x,O){return x.length>=O.length&&x.substring(x.length-O.length)===O}(J,";base64"),this.contentType=this.base64?J.substring(0,J.length-7):J),this.rest=O.substring(O.indexOf(",")+1)}}class er{constructor(O,j){let J=0,De="";at(O)?(this.data_=O,J=O.size,De=O.type):O instanceof ArrayBuffer?(j?this.data_=new Uint8Array(O):(this.data_=new Uint8Array(O.byteLength),this.data_.set(new Uint8Array(O))),J=this.data_.length):O instanceof Uint8Array&&(j?this.data_=O:(this.data_=new Uint8Array(O.length),this.data_.set(O)),J=O.length),this.size_=J,this.type_=De}size(){return this.size_}type(){return this.type_}slice(O,j){if(at(this.data_)){const De=function Lr(x,O,j){return x.webkitSlice?x.webkitSlice(O,j):x.mozSlice?x.mozSlice(O,j):x.slice?x.slice(O,j):null}(this.data_,O,j);return null===De?null:new er(De)}{const J=new Uint8Array(this.data_.buffer,O,j-O);return new er(J,!0)}}static getBlob(...O){if(Wt()){const j=O.map(J=>J instanceof er?J.data_:J);return new er(Zr.apply(null,j))}{const j=O.map(bt=>Le(bt)?Qi(Mn.RAW,bt).data:bt.data_);let J=0;j.forEach(bt=>{J+=bt.byteLength});const De=new Uint8Array(J);let je=0;return j.forEach(bt=>{for(let sn=0;sn<bt.length;sn++)De[je++]=bt[sn]}),new er(De,!0)}}uploadData(){return this.data_}}function Kr(x){let O;try{O=JSON.parse(x)}catch{return null}return function re(x){return"object"==typeof x&&!Array.isArray(x)}(O)?O:null}function qs(x){const O=x.lastIndexOf("/",x.length-2);return-1===O?x:x.slice(O+1)}function xr(x,O){return O}class ni{constructor(O,j,J,De){this.server=O,this.local=j||O,this.writable=!!J,this.xform=De||xr}}let Si=null;function Zs(){if(Si)return Si;const x=[];x.push(new ni("bucket")),x.push(new ni("generation")),x.push(new ni("metageneration")),x.push(new ni("name","fullPath",!0));const j=new ni("name");j.xform=function O(je,bt){return function Ho(x){return!Le(x)||x.length<2?x:qs(x)}(bt)},x.push(j);const De=new ni("size");return De.xform=function J(je,bt){return void 0!==bt?Number(bt):bt},x.push(De),x.push(new ni("timeCreated")),x.push(new ni("updated")),x.push(new ni("md5Hash",null,!0)),x.push(new ni("cacheControl",null,!0)),x.push(new ni("contentDisposition",null,!0)),x.push(new ni("contentEncoding",null,!0)),x.push(new ni("contentLanguage",null,!0)),x.push(new ni("contentType",null,!0)),x.push(new ni("metadata","customMetadata",!0)),Si=x,Si}function xe(x,O,j){const J=Kr(O);return null===J?null:function ri(x,O,j){const J={type:"file"},De=j.length;for(let je=0;je<De;je++){const bt=j[je];J[bt.local]=bt.xform(J,O[bt.server])}return function ks(x,O){Object.defineProperty(x,"ref",{get:function j(){const je=new kn(x.bucket,x.fullPath);return O._makeStorageReference(je)}})}(J,x),J}(x,J,j)}function Ve(x,O){const j={},J=O.length;for(let De=0;De<J;De++){const je=O[De];je.writable&&(j[je.server]=x[je.local])}return JSON.stringify(j)}const lt="prefixes";class Er{constructor(O,j,J,De){this.url=O,this.method=j,this.handler=J,this.timeout=De,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Un(x){if(!x)throw At()}function fi(x,O){return function j(J,De){const je=xe(x,De,O);return Un(null!==je),je}}function Hr(x){return function O(j,J){let De;return De=401===j.getStatus()?j.getErrorText().includes("Firebase App Check token is invalid")?function fn(){return new Ft("unauthorized-app","This app does not have permission to access Firebase Storage on this project.")}():function Sr(){return new Ft("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===j.getStatus()?function xn(x){return new Ft("quota-exceeded","Quota for bucket '"+x+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(x.bucket):403===j.getStatus()?function me(x){return new Ft("unauthorized","User does not have permission to access '"+x+"'.")}(x.path):J,De.serverResponse=J.serverResponse,De}}function pi(x){const O=Hr(x);return function j(J,De){let je=O(J,De);return 404===J.getStatus()&&(je=function ir(x){return new Ft("object-not-found","Object '"+x+"' does not exist.")}(x.path)),je.serverResponse=De.serverResponse,je}}function Ni(x,O,j){const De=cn(O.fullServerUrl(),x.host,x._protocol),bt=x.maxOperationRetryTime,sn=new Er(De,"GET",fi(x,j),bt);return sn.errorHandler=pi(O),sn}function vs(x,O,j,J,De){const je={};je.prefix=O.isRoot?"":O.path+"/",j&&j.length>0&&(je.delimiter=j),J&&(je.pageToken=J),De&&(je.maxResults=De);const sn=cn(O.bucketOnlyServerUrl(),x.host,x._protocol),An=x.maxOperationRetryTime,Gn=new Er(sn,"GET",function vo(x,O){return function j(J,De){const je=function bn(x,O,j){const J=Kr(j);return null===J?null:function Xt(x,O,j){const J={prefixes:[],items:[],nextPageToken:j.nextPageToken};if(j[lt])for(const De of j[lt]){const je=De.replace(/\/$/,""),bt=x._makeStorageReference(new kn(O,je));J.prefixes.push(bt)}if(j.items)for(const De of j.items){const je=x._makeStorageReference(new kn(O,De.name));J.items.push(je)}return J}(x,O,J)}(x,O,De);return Un(null!==je),je}}(x,O.bucket),An);return Gn.urlParams=je,Gn.errorHandler=Hr(O),Gn}function Fs(x,O,j){const J=Object.assign({},j);return J.fullPath=x.path,J.size=O.size(),J.contentType||(J.contentType=function ls(x,O){return x&&x.contentType||O&&O.type()||"application/octet-stream"}(null,O)),J}class Ls{constructor(O,j,J,De){this.current=O,this.total=j,this.finalized=!!J,this.metadata=De||null}}function _o(x,O){let j=null;try{j=x.getResponseHeader("X-Goog-Upload-Status")}catch{Un(!1)}return Un(!!j&&-1!==(O||["active"]).indexOf(j)),j}const Ai={STATE_CHANGED:"state_changed"},Yr={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function Vr(x){switch(x){case"running":case"pausing":case"canceling":return Yr.RUNNING;case"paused":return Yr.PAUSED;case"success":return Yr.SUCCESS;case"canceled":return Yr.CANCELED;default:return Yr.ERROR}}class wo{constructor(O,j,J){if(function ce(x){return"function"==typeof x}(O)||null!=j||null!=J)this.next=O,this.error=j??void 0,this.complete=J??void 0;else{const je=O;this.next=je.next,this.error=je.error,this.complete=je.complete}}}function uo(x){return(...O)=>{Promise.resolve().then(()=>x(...O))}}class Ro extends class ds{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Cr.NO_ERROR,this.sendPromise_=new Promise(O=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Cr.ABORT,O()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Cr.NETWORK_ERROR,O()}),this.xhr_.addEventListener("load",()=>{O()})})}send(O,j,J,De){if(this.sent_)throw Jn("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(j,O,!0),void 0!==De)for(const je in De)De.hasOwnProperty(je)&&this.xhr_.setRequestHeader(je,De[je].toString());return void 0!==J?this.xhr_.send(J):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Jn("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Jn("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Jn("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Jn("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(O){return this.xhr_.getResponseHeader(O)}addUploadProgressListener(O){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",O)}removeUploadProgressListener(O){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",O)}}{initXhr(){this.xhr_.responseType="text"}}function fr(){return new Ro}class Wn{constructor(O,j,J=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=O,this._blob=j,this._metadata=J,this._mappings=Zs(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=De=>{this._request=void 0,this._chunkMultiplier=1,De._codeEquals("canceled")?(this._needToFetchStatus=!0,this.completeTransitions_()):(this._error=De,this._transition("error"))},this._metadataErrorHandler=De=>{this._request=void 0,De._codeEquals("canceled")?this.completeTransitions_():(this._error=De,this._transition("error"))},this._promise=new Promise((De,je)=>{this._resolve=De,this._reject=je,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const O=this._transferred;return j=>this._updateProgress(O+j)}_shouldDoResumable(O){return O.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())}_resolveToken(O){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([j,J])=>{switch(this._state){case"running":O(j,J);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((O,j)=>{const J=function Vs(x,O,j,J,De){const je=O.bucketOnlyServerUrl(),bt=Fs(O,J,De),sn={name:bt.fullPath},Ut=cn(je,x.host,x._protocol),Gn={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${J.size()}`,"X-Goog-Upload-Header-Content-Type":bt.contentType,"Content-Type":"application/json; charset=utf-8"},Jr=Ve(bt,j),gr=new Er(Ut,"POST",function ai(br){let ui;_o(br);try{ui=br.getResponseHeader("X-Goog-Upload-URL")}catch{Un(!1)}return Un(Le(ui)),ui},x.maxUploadRetryTime);return gr.urlParams=sn,gr.headers=Gn,gr.body=Jr,gr.errorHandler=Hr(O),gr}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),De=this._ref.storage._makeRequest(J,fr,O,j);this._request=De,De.getPromise().then(je=>{this._request=void 0,this._uploadUrl=je,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const O=this._uploadUrl;this._resolveToken((j,J)=>{const De=function _s(x,O,j,J){const Ut=new Er(j,"POST",function je(An){const Gn=_o(An,["active","final"]);let Jr=null;try{Jr=An.getResponseHeader("X-Goog-Upload-Size-Received")}catch{Un(!1)}Jr||Un(!1);const Nr=Number(Jr);return Un(!isNaN(Nr)),new Ls(Nr,J.size(),"final"===Gn)},x.maxUploadRetryTime);return Ut.headers={"X-Goog-Upload-Command":"query"},Ut.errorHandler=Hr(O),Ut}(this._ref.storage,this._ref._location,O,this._blob),je=this._ref.storage._makeRequest(De,fr,j,J);this._request=je,je.getPromise().then(bt=>{this._request=void 0,this._updateProgress(bt.current),this._needToFetchStatus=!1,bt.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const O=262144*this._chunkMultiplier,j=new Ls(this._transferred,this._blob.size()),J=this._uploadUrl;this._resolveToken((De,je)=>{let bt;try{bt=function Vi(x,O,j,J,De,je,bt,sn){const Ut=new Ls(0,0);if(bt?(Ut.current=bt.current,Ut.total=bt.total):(Ut.current=0,Ut.total=J.size()),J.size()!==Ut.total)throw function Vt(){return new Ft("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.")}();const An=Ut.total-Ut.current;let Gn=An;De>0&&(Gn=Math.min(Gn,De));const Jr=Ut.current,gr={"X-Goog-Upload-Command":Gn===An?"upload, finalize":"upload","X-Goog-Upload-Offset":`${Ut.current}`},br=J.slice(Jr,Jr+Gn);if(null===br)throw gt();const xi=new Er(j,"POST",function ui(Gi,ho){const bo=_o(Gi,["active","final"]),li=Ut.current+Gn,ns=J.size();let To;return To="final"===bo?fi(O,je)(Gi,ho):null,new Ls(li,ns,"final"===bo,To)},O.maxUploadRetryTime);return xi.headers=gr,xi.body=br.uploadData(),xi.progressCallback=sn||null,xi.errorHandler=Hr(x),xi}(this._ref._location,this._ref.storage,J,this._blob,O,this._mappings,j,this._makeProgressCallback())}catch(Ut){return this._error=Ut,void this._transition("error")}const sn=this._ref.storage._makeRequest(bt,fr,De,je);this._request=sn,sn.getPromise().then(Ut=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(Ut.current),Ut.finalized?(this._metadata=Ut.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((O,j)=>{const J=Ni(this._ref.storage,this._ref._location,this._mappings),De=this._ref.storage._makeRequest(J,fr,O,j);this._request=De,De.getPromise().then(je=>{this._request=void 0,this._metadata=je,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((O,j)=>{const J=function cs(x,O,j,J,De){const je=O.bucketOnlyServerUrl(),bt={"X-Goog-Upload-Protocol":"multipart"},Ut=function sn(){let xi="";for(let Gi=0;Gi<2;Gi++)xi+=Math.random().toString().slice(2);return xi}();bt["Content-Type"]="multipart/related; boundary="+Ut;const An=Fs(O,J,De),Gn=Ve(An,j),ai=er.getBlob("--"+Ut+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+Gn+"\r\n--"+Ut+"\r\nContent-Type: "+An.contentType+"\r\n\r\n",J,"\r\n--"+Ut+"--");if(null===ai)throw gt();const gr={name:An.fullPath},br=cn(je,x.host,x._protocol),$i=x.maxUploadRetryTime,Hi=new Er(br,"POST",fi(x,j),$i);return Hi.urlParams=gr,Hi.headers=bt,Hi.body=ai.uploadData(),Hi.errorHandler=Hr(O),Hi}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),De=this._ref.storage._makeRequest(J,fr,O,j);this._request=De,De.getPromise().then(je=>{this._request=void 0,this._metadata=je,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(O){const j=this._transferred;this._transferred=O,this._transferred!==j&&this._notifyObservers()}_transition(O){if(this._state!==O)switch(O){case"canceling":case"pausing":this._state=O,void 0!==this._request&&this._request.cancel();break;case"running":const j="paused"===this._state;this._state=O,j&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=O,this._notifyObservers();break;case"canceled":this._error=oe(),this._state=O,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const O=Vr(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:O,metadata:this._metadata,task:this,ref:this._ref}}on(O,j,J,De){const je=new wo(j||void 0,J||void 0,De||void 0);return this._addObserver(je),()=>{this._removeObserver(je)}}then(O,j){return this._promise.then(O,j)}catch(O){return this.then(null,O)}_addObserver(O){this._observers.push(O),this._notifyObserver(O)}_removeObserver(O){const j=this._observers.indexOf(O);-1!==j&&this._observers.splice(j,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(j=>{this._notifyObserver(j)})}_finishPromise(){if(void 0!==this._resolve){let O=!0;switch(Vr(this._state)){case Yr.SUCCESS:uo(this._resolve.bind(null,this.snapshot))();break;case Yr.CANCELED:case Yr.ERROR:uo(this._reject.bind(null,this._error))();break;default:O=!1}O&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(O){switch(Vr(this._state)){case Yr.RUNNING:case Yr.PAUSED:O.next&&uo(O.next.bind(O,this.snapshot))();break;case Yr.SUCCESS:O.complete&&uo(O.complete.bind(O))();break;default:O.error&&uo(O.error.bind(O,this._error))()}}resume(){const O="paused"===this._state||"pausing"===this._state;return O&&this._transition("running"),O}pause(){const O="running"===this._state;return O&&this._transition("pausing"),O}cancel(){const O="running"===this._state||"pausing"===this._state;return O&&this._transition("canceling"),O}}class Di{constructor(O,j){this._service=O,this._location=j instanceof kn?j:kn.makeFromUrl(j,O.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(O,j){return new Di(O,j)}get root(){const O=new kn(this._location.bucket,"");return this._newRef(this._service,O)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return qs(this._location.path)}get storage(){return this._service}get parent(){const O=function Ws(x){if(0===x.length)return null;const O=x.lastIndexOf("/");return-1===O?"":x.slice(0,O)}(this._location.path);if(null===O)return null;const j=new kn(this._location.bucket,O);return new Di(this._service,j)}_throwIfRoot(O){if(""===this._location.path)throw Sn(O)}}function Us(x,O,j){return Ys.apply(this,arguments)}function Ys(){return(Ys=(0,ti.Z)(function*(x,O,j){const De=yield Oo(x,{pageToken:j});O.prefixes.push(...De.prefixes),O.items.push(...De.items),null!=De.nextPageToken&&(yield Us(x,O,De.nextPageToken))})).apply(this,arguments)}function Oo(x,O){null!=O&&"number"==typeof O.maxResults&&pn("options.maxResults",1,1e3,O.maxResults);const j=O||{},J=vs(x.storage,x._location,"/",j.pageToken,j.maxResults);return x.storage.makeRequestWithTokens(J,fr)}function Es(x){x._throwIfRoot("getDownloadURL");const O=function Pi(x,O,j){const De=cn(O.fullServerUrl(),x.host,x._protocol),bt=x.maxOperationRetryTime,sn=new Er(De,"GET",function Ks(x,O){return function j(J,De){const je=xe(x,De,O);return Un(null!==je),function Ae(x,O,j,J){const De=Kr(O);if(null===De||!Le(De.downloadTokens))return null;const je=De.downloadTokens;if(0===je.length)return null;const bt=encodeURIComponent;return je.split(",").map(An=>{const Jr=x.fullPath;return cn("/b/"+bt(x.bucket)+"/o/"+bt(Jr),j,J)+hr({alt:"media",token:An})})[0]}(je,De,x.host,x._protocol)}}(x,j),bt);return sn.errorHandler=pi(O),sn}(x.storage,x._location,Zs());return x.storage.makeRequestWithTokens(O,fr).then(j=>{if(null===j)throw function ar(){return new Ft("no-download-url","The given file does not have any download URLs.")}();return j})}function No(x,O){const j=function ys(x,O){const j=O.split("/").filter(J=>J.length>0).join("/");return 0===x.length?j:x+"/"+j}(x._location.path,O),J=new kn(x._location.bucket,j);return new Di(x.storage,J)}function Bs(x,O){if(x instanceof Is){const j=x;if(null==j._bucket)throw function ut(){return new Ft("no-default-bucket","No default bucket found. Did you set the '"+Be+"' property when initializing the app?")}();const J=new Di(j,j._bucket);return null!=O?Bs(J,O):J}return void 0!==O?No(x,O):x}function Po(x,O){if(O&&function ft(x){return/^[A-Za-z]+:\/\//.test(x)}(O)){if(x instanceof Is)return function Rn(x,O){return new Di(x,O)}(x,O);throw gn("To use ref(service, url), the first argument must be a Storage instance.")}return Bs(x,O)}function Ur(x,O){const j=O?.[Be];return null==j?null:kn.makeFromBucketSpec(j,x)}class Is{constructor(O,j,J,De,je){this.app=O,this._authProvider=j,this._appCheckProvider=J,this._url=De,this._firebaseVersion=je,this._bucket=null,this._host=se,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=De?kn.makeFromBucketSpec(De,this._host):Ur(this._host,this.app.options)}get host(){return this._host}set host(O){this._host=O,this._bucket=null!=this._url?kn.makeFromBucketSpec(this._url,O):Ur(O,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(O){pn("time",0,Number.POSITIVE_INFINITY,O),this._maxUploadRetryTime=O}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(O){pn("time",0,Number.POSITIVE_INFINITY,O),this._maxOperationRetryTime=O}_getAuthToken(){var O=this;return(0,ti.Z)(function*(){if(O._overrideAuthToken)return O._overrideAuthToken;const j=O._authProvider.getImmediate({optional:!0});if(j){const J=yield j.getToken();if(null!==J)return J.accessToken}return null})()}_getAppCheckToken(){var O=this;return(0,ti.Z)(function*(){const j=O._appCheckProvider.getImmediate({optional:!0});return j?(yield j.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(O=>O.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(O){return new Di(this,O)}_makeRequest(O,j,J,De){if(this._deleted)return new qr(cr());{const je=function Ns(x,O,j,J,De,je){const bt=hr(x.urlParams),sn=x.url+bt,Ut=Object.assign({},x.headers);return function Li(x,O){O&&(x["X-Firebase-GMPID"]=O)}(Ut,O),function Xn(x,O){null!==O&&O.length>0&&(x.Authorization="Firebase "+O)}(Ut,j),function ms(x,O){x["X-Firebase-Storage-Version"]="webjs/"+(O??"AppManager")}(Ut,je),function Fr(x,O){null!==O&&(x["X-Firebase-AppCheck"]=O)}(Ut,J),new mn(sn,x.method,Ut,x.body,x.successCodes,x.additionalRetryCodes,x.handler,x.errorHandler,x.timeout,x.progressCallback,De)}(O,this._appId,J,De,j,this._firebaseVersion);return this._requests.add(je),je.getPromise().then(()=>this._requests.delete(je),()=>this._requests.delete(je)),je}}makeRequestWithTokens(O,j){var J=this;return(0,ti.Z)(function*(){const[De,je]=yield Promise.all([J._getAuthToken(),J._getAppCheckToken()]);return J._makeRequest(O,j,De,je).getPromise()})()}}const hs="@firebase/storage";function mi(x,O){return Po(x=(0,Ue.m9)(x),O)}function co(x,{instanceIdentifier:O}){const j=x.getProvider("app").getImmediate(),J=x.getProvider("auth-internal"),De=x.getProvider("app-check-internal");return new Is(j,J,De,O,wr.SDK_VERSION)}!function Ea(){(0,wr._registerComponent)(new ge.wA("storage",co,"PUBLIC").setMultipleInstances(!0)),(0,wr.registerVersion)(hs,"0.9.9",""),(0,wr.registerVersion)(hs,"0.9.9","esm2017")}();class Rr{constructor(O,j,J){this._delegate=O,this.task=j,this.ref=J}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class Wo{constructor(O,j){this._delegate=O,this._ref=j,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new Rr(this._delegate.snapshot,this,this._ref)}then(O,j){return this._delegate.then(J=>{if(O)return O(new Rr(J,this,this._ref))},j)}on(O,j,J,De){let je;return j&&(je="function"==typeof j?bt=>j(new Rr(bt,this,this._ref)):{next:j.next?bt=>j.next(new Rr(bt,this,this._ref)):void 0,complete:j.complete||void 0,error:j.error||void 0}),this._delegate.on(O,je,J||void 0,De||void 0)}}class da{constructor(O,j){this._delegate=O,this._service=j}get prefixes(){return this._delegate.prefixes.map(O=>new Rs(O,this._service))}get items(){return this._delegate.items.map(O=>new Rs(O,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class Rs{constructor(O,j){this._delegate=O,this.storage=j}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(O){const j=function ji(x,O){return No(x,O)}(this._delegate,O);return new Rs(j,this.storage)}get root(){return new Rs(this._delegate.root,this.storage)}get parent(){const O=this._delegate.parent;return null==O?null:new Rs(O,this.storage)}put(O,j){return this._throwIfRoot("put"),new Wo(function N(x,O,j){return function lo(x,O,j){return x._throwIfRoot("uploadBytesResumable"),new Wn(x,new er(O),j)}(x=(0,Ue.m9)(x),O,j)}(this._delegate,O,j),this)}putString(O,j=Mn.RAW,J){this._throwIfRoot("putString");const De=Qi(j,O),je=Object.assign({},J);return null==je.contentType&&null!=De.contentType&&(je.contentType=De.contentType),new Wo(new Wn(this._delegate,new er(De.data,!0),je),this)}listAll(){return function nn(x){return function yn(x){const O={prefixes:[],items:[]};return Us(x,O).then(()=>O)}(x=(0,Ue.m9)(x))}(this._delegate).then(O=>new da(O,this.storage))}list(O){return function Xe(x,O){return Oo(x=(0,Ue.m9)(x),O)}(this._delegate,O||void 0).then(j=>new da(j,this.storage))}getMetadata(){return function A(x){return function Qs(x){x._throwIfRoot("getMetadata");const O=Ni(x.storage,x._location,Zs());return x.storage.makeRequestWithTokens(O,fr)}(x=(0,Ue.m9)(x))}(this._delegate)}updateMetadata(O){return function K(x,O){return function Bi(x,O){x._throwIfRoot("updateMetadata");const j=function Xi(x,O,j,J){const je=cn(O.fullServerUrl(),x.host,x._protocol),sn=Ve(j,J),An=x.maxOperationRetryTime,Gn=new Er(je,"PATCH",fi(x,J),An);return Gn.headers={"Content-Type":"application/json; charset=utf-8"},Gn.body=sn,Gn.errorHandler=pi(O),Gn}(x.storage,x._location,O,Zs());return x.storage.makeRequestWithTokens(j,fr)}(x=(0,Ue.m9)(x),O)}(this._delegate,O)}getDownloadURL(){return function dr(x){return Es(x=(0,Ue.m9)(x))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function fs(x){return function Eo(x){x._throwIfRoot("deleteObject");const O=function ki(x,O){const J=cn(O.fullServerUrl(),x.host,x._protocol),sn=new Er(J,"DELETE",function bt(Ut,An){},x.maxOperationRetryTime);return sn.successCodes=[200,204],sn.errorHandler=pi(O),sn}(x.storage,x._location);return x.storage.makeRequestWithTokens(O,fr)}(x=(0,Ue.m9)(x))}(this._delegate)}_throwIfRoot(O){if(""===this._delegate._location.path)throw Sn(O)}}class ha{constructor(O,j){this.app=O,this._delegate=j}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(O){if(S(O))throw gn("ref() expected a child path but got a URL, use refFromURL instead.");return new Rs(mi(this._delegate,O),this)}refFromURL(O){if(!S(O))throw gn("refFromURL() expected a full URL but got a child path, use ref() instead.");try{kn.makeFromUrl(O,this._delegate.host)}catch{throw gn("refFromUrl() expected a valid full URL but got an invalid one.")}return new Rs(mi(this._delegate,O),this)}setMaxUploadRetryTime(O){this._delegate.maxUploadRetryTime=O}setMaxOperationRetryTime(O){this._delegate.maxOperationRetryTime=O}useEmulator(O,j,J={}){!function Xs(x,O,j,J={}){!function ts(x,O,j,J={}){x.host=`${O}:${j}`,x._protocol="http";const{mockUserToken:De}=J;De&&(x._overrideAuthToken="string"==typeof De?De:(0,Ue.Sg)(De,x.app.options.projectId))}(x,O,j,J)}(this._delegate,O,j,J)}}function S(x){return/^[A-Za-z]+:\/\//.test(x)}function fe(x,{instanceIdentifier:O}){const j=x.getProvider("app-compat").getImmediate(),J=x.getProvider("storage").getImmediate({identifier:O});return new ha(j,J)}!function ze(x){const O={TaskState:Yr,TaskEvent:Ai,StringFormat:Mn,Storage:ha,Reference:Rs};x.INTERNAL.registerComponent(new ge.wA("storage-compat",fe,"PUBLIC").setServiceProps(O).setMultipleInstances(!0)),x.registerVersion("@firebase/storage-compat","0.1.17")}(ei.Z);var nt=V(440),Jt=V(127);function ur(x){const O=function sr(x){return new yr.y(O=>{const j=bt=>O.next(bt);j(x.snapshot);const je=x.on("state_changed",j);return x.then(bt=>{j(bt),O.complete()},bt=>{j(x.snapshot),(bt=>{O.error(bt)})(bt)}),function(){je()}}).pipe(function pt(x,O=rr.z){return(0,zn.e)((j,J)=>{let De=null,je=null,bt=null;const sn=()=>{if(De){De.unsubscribe(),De=null;const An=je;je=null,J.next(An)}};function Ut(){const An=bt+x,Gn=O.now();if(Gn<An)return De=this.schedule(void 0,An-Gn),void J.add(De);sn()}j.subscribe((0,lr.x)(J,An=>{je=An,bt=O.now(),De||(De=O.schedule(Ut,x),J.add(De))},()=>{sn(),J.complete()},void 0,()=>{je=De=null}))})}(0))}(x);return{task:x,then:x.then.bind(x),catch:x.catch.bind(x),pause:x.pause.bind(x),cancel:x.cancel.bind(x),resume:x.resume.bind(x),snapshotChanges:()=>O,percentageChanges:()=>O.pipe((0,nr.U)(j=>j.bytesTransferred/j.totalBytes*100))}}function qn(x){return{getDownloadURL:()=>(0,Ir.of)(void 0).pipe(Hn.fc,(0,En.w)(()=>x.getDownloadURL()),Hn.iC),getMetadata:()=>(0,Ir.of)(void 0).pipe(Hn.fc,(0,En.w)(()=>x.getMetadata()),Hn.iC),delete:()=>(0,qt.D)(x.delete()),child:O=>qn(x.child(O)),updateMetadata:O=>(0,qt.D)(x.updateMetadata(O)),put:(O,j)=>ur(x.put(O,j)),putString:(O,j,J)=>ur(x.putString(O,j,J)),list:O=>(0,qt.D)(x.list(O)),listAll:()=>(0,qt.D)(x.listAll())}}const Zn=new C.OlP("angularfire2.storageBucket"),oi=new C.OlP("angularfire2.storage.maxUploadRetryTime"),pr=new C.OlP("angularfire2.storage.maxOperationRetryTime"),Or=new C.OlP("angularfire2.storage.use-emulator");let $s=(()=>{class x{constructor(j,J,De,je,bt,sn,Ut,An,Gn,Jr){const Nr=(0,Wr.on)(j,bt,J);this.storage=(0,Wr.cc)(`${Nr.name}.storage.${De}`,"AngularFireStorage",Nr.name,()=>{const ai=bt.runOutsideAngular(()=>Nr.storage(De||void 0)),gr=Gn;return gr&&ai.useEmulator(...gr),Ut&&ai.setMaxUploadRetryTime(Ut),An&&ai.setMaxOperationRetryTime(An),ai},[Ut,An])}ref(j){return qn(this.storage.ref(j))}refFromURL(j){return qn(this.storage.refFromURL(j))}upload(j,J,De){return qn(this.storage.ref(j)).put(J,De)}}return x.\u0275fac=function(j){return new(j||x)(C.LFG(Wr.Dh),C.LFG(Wr.xv,8),C.LFG(Zn,8),C.LFG(C.Lbi),C.LFG(C.R0b),C.LFG(Hn.HU),C.LFG(oi,8),C.LFG(pr,8),C.LFG(Or,8),C.LFG(nt.nm,8))},x.\u0275prov=C.Yz7({token:x,factory:x.\u0275fac,providedIn:"any"}),x})(),eo=(()=>{class x{}return x.\u0275fac=function(j){return new(j||x)},x.\u0275mod=C.oAB({type:x}),x.\u0275inj=C.cJS({}),x})(),Co=(()=>{class x{constructor(){Jt.Z.registerVersion("angularfire",Hn.q4.full,"gcs-compat")}}return x.\u0275fac=function(j){return new(j||x)},x.\u0275mod=C.oAB({type:x}),x.\u0275inj=C.cJS({providers:[$s],imports:[eo]}),x})(),ps=(()=>{class x{}return x.\u0275fac=function(j){return new(j||x)},x.\u0275mod=C.oAB({type:x,bootstrap:[$n]}),x.\u0275inj=C.cJS({imports:[p.b2,Mt,G.u5,be.JF,Wr.hO.initializeApp(vr_firebaseConfig),_r.ww,ke.yb,Co]}),x})();(0,C.G48)(),p.q6().bootstrapModule(ps).catch(x=>console.error(x))},5867:(Gt,We,V)=>{V.d(We,{C6:()=>p.getApps,Mq:()=>p.getApp});var p=V(9681);(0,p.registerVersion)("firebase","9.9.4","app")},127:(Gt,We,V)=>{V.d(We,{Z:()=>p.Z});var p=V(3942);p.Z.registerVersion("firebase","9.9.4","app-compat")},2274:(Gt,We,V)=>{V.r(We);var p=V(5861),C=V(3942),G=V(2090),be=V(9681),we=V(655),Me=V(1877),Re=V(4859);const Ze=function yt(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},Ot=function ot(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},Ke=new G.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Bt=new Me.Yd("@firebase/auth");function jt(m,...c){Bt.logLevel<=Me.in.ERROR&&Bt.error(`Auth (${be.SDK_VERSION}): ${m}`,...c)}function he(m,...c){throw tt(m,...c)}function rt(m,...c){return tt(m,...c)}function Je(m,c,f){const E=Object.assign(Object.assign({},Ot()),{[c]:f});return new G.LL("auth","Firebase",E).create(c,{appName:m.name})}function vt(m,c,f){if(!(c instanceof f))throw f.name!==c.constructor.name&&he(m,"argument-error"),Je(m,"argument-error",`Type of ${c.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function tt(m,...c){if("string"!=typeof m){const f=c[0],E=[...c.slice(1)];return E[0]&&(E[0].appName=m.name),m._errorFactory.create(f,...E)}return Ke.create(m,...c)}function ae(m,c,...f){if(!m)throw tt(c,...f)}function Fe(m){const c="INTERNAL ASSERTION FAILED: "+m;throw jt(c),new Error(c)}function ne(m,c){m||Fe(c)}const Ie=new Map;function de(m){ne(m instanceof Function,"Expected a class definition");let c=Ie.get(m);return c?(ne(c instanceof m,"Instance stored in cache mismatched with class"),c):(c=new m,Ie.set(m,c),c)}function wt(){var m;return typeof self<"u"&&(null===(m=self.location)||void 0===m?void 0:m.href)||""}function Ct(){return"http:"===Mt()||"https:"===Mt()}function Mt(){var m;return typeof self<"u"&&(null===(m=self.location)||void 0===m?void 0:m.protocol)||null}class tn{constructor(c,f){this.shortDelay=c,this.longDelay=f,ne(f>c,"Short delay should be less than long delay!"),this.isMobile=(0,G.uI)()||(0,G.b$)()}get(){return function $t(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Ct()||(0,G.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Kt(m,c){ne(m.emulator,"Emulator should always be set here");const{url:f}=m.emulator;return c?`${f}${c.startsWith("/")?c.slice(1):c}`:f}class on{static initialize(c,f,E){this.fetchImpl=c,f&&(this.headersImpl=f),E&&(this.responseImpl=E)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void Fe("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void Fe("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void Fe("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const kt={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},Nn=new tn(3e4,6e4);function un(m,c){return m.tenantId&&!c.tenantId?Object.assign(Object.assign({},c),{tenantId:m.tenantId}):c}function $n(m,c,f,E){return Wr.apply(this,arguments)}function Wr(){return(Wr=(0,p.Z)(function*(m,c,f,E,B={}){return vr(m,B,(0,p.Z)(function*(){let Y={},Te={};E&&("GET"===c?Te=E:Y={body:JSON.stringify(E)});const it=(0,G.xO)(Object.assign({key:m.config.apiKey},Te)).slice(1),Pt=yield m._getAdditionalHeaders();return Pt["Content-Type"]="application/json",m.languageCode&&(Pt["X-Firebase-Locale"]=m.languageCode),on.fetch()(qt(m,m.config.apiHost,f,it),Object.assign({method:c,headers:Pt,referrerPolicy:"no-referrer"},Y))}))})).apply(this,arguments)}function vr(m,c,f){return _r.apply(this,arguments)}function _r(){return(_r=(0,p.Z)(function*(m,c,f){m._canInitEmulator=!1;const E=Object.assign(Object.assign({},kt),c);try{const B=new rr(m),Y=yield Promise.race([f(),B.promise]);B.clearNetworkTimeout();const Te=yield Y.json();if("needConfirmation"in Te)throw zn(m,"account-exists-with-different-credential",Te);if(Y.ok&&!("errorMessage"in Te))return Te;{const it=Y.ok?Te.errorMessage:Te.error.message,[Pt,an]=it.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Pt)throw zn(m,"credential-already-in-use",Te);if("EMAIL_EXISTS"===Pt)throw zn(m,"email-already-in-use",Te);if("USER_DISABLED"===Pt)throw zn(m,"user-disabled",Te);const Ln=E[Pt]||Pt.toLowerCase().replace(/[_\s]+/g,"-");if(an)throw Je(m,Ln,an);he(m,Ln)}}catch(B){if(B instanceof G.ZR)throw B;he(m,"network-request-failed")}})).apply(this,arguments)}function yr(m,c,f,E){return Ir.apply(this,arguments)}function Ir(){return(Ir=(0,p.Z)(function*(m,c,f,E,B={}){const Y=yield $n(m,c,f,E,B);return"mfaPendingCredential"in Y&&he(m,"multi-factor-auth-required",{_serverResponse:Y}),Y})).apply(this,arguments)}function qt(m,c,f,E){const B=`${c}${f}?${E}`;return m.config.emulator?Kt(m.config,B):`${m.config.apiScheme}://${B}`}class rr{constructor(c){this.auth=c,this.timer=null,this.promise=new Promise((f,E)=>{this.timer=setTimeout(()=>E(rt(this.auth,"network-request-failed")),Nn.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function zn(m,c,f){const E={appName:m.name};f.email&&(E.email=f.email),f.phoneNumber&&(E.phoneNumber=f.phoneNumber);const B=rt(m,c,E);return B.customData._tokenResponse=f,B}function pt(){return(pt=(0,p.Z)(function*(m,c){return $n(m,"POST","/v1/accounts:delete",c)})).apply(this,arguments)}function nr(m,c){return En.apply(this,arguments)}function En(){return(En=(0,p.Z)(function*(m,c){return $n(m,"POST","/v1/accounts:update",c)})).apply(this,arguments)}function Hn(m,c){return ei.apply(this,arguments)}function ei(){return(ei=(0,p.Z)(function*(m,c){return $n(m,"POST","/v1/accounts:lookup",c)})).apply(this,arguments)}function ti(m){if(m)try{const c=new Date(Number(m));if(!isNaN(c.getTime()))return c.toUTCString()}catch{}}function ge(){return(ge=(0,p.Z)(function*(m,c=!1){const f=(0,G.m9)(m),E=yield f.getIdToken(c),B=Be(E);ae(B&&B.exp&&B.auth_time&&B.iat,f.auth,"internal-error");const Y="object"==typeof B.firebase?B.firebase:void 0,Te=Y?.sign_in_provider;return{claims:B,token:E,authTime:ti(se(B.auth_time)),issuedAtTime:ti(se(B.iat)),expirationTime:ti(se(B.exp)),signInProvider:Te||null,signInSecondFactor:Y?.sign_in_second_factor||null}})).apply(this,arguments)}function se(m){return 1e3*Number(m)}function Be(m){var c;const[f,E,B]=m.split(".");if(void 0===f||void 0===E||void 0===B)return jt("JWT malformed, contained fewer than 3 sections"),null;try{const Y=(0,G.tV)(E);return Y?JSON.parse(Y):(jt("Failed to decode base64 JWT payload"),null)}catch(Y){return jt("Caught error parsing JWT payload as JSON",null===(c=Y)||void 0===c?void 0:c.toString()),null}}function Lt(m,c){return Ft.apply(this,arguments)}function Ft(){return(Ft=(0,p.Z)(function*(m,c,f=!1){if(f)return c;try{return yield c}catch(E){throw E instanceof G.ZR&&Vn(E)&&m.auth.currentUser===m&&(yield m.auth.signOut()),E}})).apply(this,arguments)}function Vn({code:m}){return"auth/user-disabled"===m||"auth/user-token-expired"===m}class At{constructor(c){this.user=c,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(c){var f;if(c){const E=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),E}{this.errorBackoff=3e4;const B=(null!==(f=this.user.stsTokenManager.expirationTime)&&void 0!==f?f:0)-Date.now()-3e5;return Math.max(0,B)}}schedule(c=!1){var f=this;if(!this.isRunning)return;const E=this.getInterval(c);this.timerId=setTimeout((0,p.Z)(function*(){yield f.iteration()}),E)}iteration(){var c=this;return(0,p.Z)(function*(){var f;try{yield c.user.getIdToken(!0)}catch(E){return void("auth/network-request-failed"===(null===(f=E)||void 0===f?void 0:f.code)&&c.schedule(!0))}c.schedule()})()}}class ir{constructor(c,f){this.createdAt=c,this.lastLoginAt=f,this._initializeTime()}_initializeTime(){this.lastSignInTime=ti(this.lastLoginAt),this.creationTime=ti(this.createdAt)}_copy(c){this.createdAt=c.createdAt,this.lastLoginAt=c.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function xn(m){return Sr.apply(this,arguments)}function Sr(){return(Sr=(0,p.Z)(function*(m){var c;const f=m.auth,E=yield m.getIdToken(),B=yield Lt(m,Hn(f,{idToken:E}));ae(B?.users.length,f,"internal-error");const Y=B.users[0];m._notifyReloadListener(Y);const Te=null!==(c=Y.providerUserInfo)&&void 0!==c&&c.length?oe(Y.providerUserInfo):[],it=X(m.providerData,Te),Ln=!!m.isAnonymous&&!(m.email&&Y.passwordHash||it?.length),On={uid:Y.localId,displayName:Y.displayName||null,photoURL:Y.photoUrl||null,email:Y.email||null,emailVerified:Y.emailVerified||!1,phoneNumber:Y.phoneNumber||null,tenantId:Y.tenantId||null,providerData:it,metadata:new ir(Y.createdAt,Y.lastLoginAt),isAnonymous:Ln};Object.assign(m,On)})).apply(this,arguments)}function me(){return(me=(0,p.Z)(function*(m){const c=(0,G.m9)(m);yield xn(c),yield c.auth._persistUserIfCurrent(c),c.auth._notifyListenersIfCurrent(c)})).apply(this,arguments)}function X(m,c){return[...m.filter(E=>!c.some(B=>B.providerId===E.providerId)),...c]}function oe(m){return m.map(c=>{var{providerId:f}=c,E=(0,we._T)(c,["providerId"]);return{providerId:f,uid:E.rawId||"",displayName:E.displayName||null,email:E.email||null,phoneNumber:E.phoneNumber||null,photoURL:E.photoUrl||null}})}function ye(){return(ye=(0,p.Z)(function*(m,c){const f=yield vr(m,{},(0,p.Z)(function*(){const E=(0,G.xO)({grant_type:"refresh_token",refresh_token:c}).slice(1),{tokenApiHost:B,apiKey:Y}=m.config,Te=qt(m,B,"/v1/token",`key=${Y}`),it=yield m._getAdditionalHeaders();return it["Content-Type"]="application/x-www-form-urlencoded",on.fetch()(Te,{method:"POST",headers:it,body:E})}));return{accessToken:f.access_token,expiresIn:f.expires_in,refreshToken:f.refresh_token}})).apply(this,arguments)}class ut{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(c){ae(c.idToken,"internal-error"),ae(typeof c.idToken<"u","internal-error"),ae(typeof c.refreshToken<"u","internal-error");const f="expiresIn"in c&&typeof c.expiresIn<"u"?Number(c.expiresIn):function st(m){const c=Be(m);return ae(c,"internal-error"),ae(typeof c.exp<"u","internal-error"),ae(typeof c.iat<"u","internal-error"),Number(c.exp)-Number(c.iat)}(c.idToken);this.updateTokensAndExpiration(c.idToken,c.refreshToken,f)}getToken(c,f=!1){var E=this;return(0,p.Z)(function*(){return ae(!E.accessToken||E.refreshToken,c,"user-token-expired"),f||!E.accessToken||E.isExpired?E.refreshToken?(yield E.refresh(c,E.refreshToken),E.accessToken):null:E.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(c,f){var E=this;return(0,p.Z)(function*(){const{accessToken:B,refreshToken:Y,expiresIn:Te}=yield function Ee(m,c){return ye.apply(this,arguments)}(c,f);E.updateTokensAndExpiration(B,Y,Number(Te))})()}updateTokensAndExpiration(c,f,E){this.refreshToken=f||null,this.accessToken=c||null,this.expirationTime=Date.now()+1e3*E}static fromJSON(c,f){const{refreshToken:E,accessToken:B,expirationTime:Y}=f,Te=new ut;return E&&(ae("string"==typeof E,"internal-error",{appName:c}),Te.refreshToken=E),B&&(ae("string"==typeof B,"internal-error",{appName:c}),Te.accessToken=B),Y&&(ae("number"==typeof Y,"internal-error",{appName:c}),Te.expirationTime=Y),Te}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(c){this.accessToken=c.accessToken,this.refreshToken=c.refreshToken,this.expirationTime=c.expirationTime}_clone(){return Object.assign(new ut,this.toJSON())}_performRefresh(){return Fe("not implemented")}}function gt(m,c){ae("string"==typeof m||typeof m>"u","internal-error",{appName:c})}class Vt{constructor(c){var{uid:f,auth:E,stsTokenManager:B}=c,Y=(0,we._T)(c,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new At(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=f,this.auth=E,this.stsTokenManager=B,this.accessToken=B.accessToken,this.displayName=Y.displayName||null,this.email=Y.email||null,this.emailVerified=Y.emailVerified||!1,this.phoneNumber=Y.phoneNumber||null,this.photoURL=Y.photoURL||null,this.isAnonymous=Y.isAnonymous||!1,this.tenantId=Y.tenantId||null,this.providerData=Y.providerData?[...Y.providerData]:[],this.metadata=new ir(Y.createdAt||void 0,Y.lastLoginAt||void 0)}getIdToken(c){var f=this;return(0,p.Z)(function*(){const E=yield Lt(f,f.stsTokenManager.getToken(f.auth,c));return ae(E,f.auth,"internal-error"),f.accessToken!==E&&(f.accessToken=E,yield f.auth._persistUserIfCurrent(f),f.auth._notifyListenersIfCurrent(f)),E})()}getIdTokenResult(c){return function Ue(m){return ge.apply(this,arguments)}(this,c)}reload(){return function fn(m){return me.apply(this,arguments)}(this)}_assign(c){this!==c&&(ae(this.uid===c.uid,this.auth,"internal-error"),this.displayName=c.displayName,this.photoURL=c.photoURL,this.email=c.email,this.emailVerified=c.emailVerified,this.phoneNumber=c.phoneNumber,this.isAnonymous=c.isAnonymous,this.tenantId=c.tenantId,this.providerData=c.providerData.map(f=>Object.assign({},f)),this.metadata._copy(c.metadata),this.stsTokenManager._assign(c.stsTokenManager))}_clone(c){return new Vt(Object.assign(Object.assign({},this),{auth:c,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(c){ae(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=c,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(c){this.reloadListener?this.reloadListener(c):this.reloadUserInfo=c}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(c,f=!1){var E=this;return(0,p.Z)(function*(){let B=!1;c.idToken&&c.idToken!==E.stsTokenManager.accessToken&&(E.stsTokenManager.updateFromServerResponse(c),B=!0),f&&(yield xn(E)),yield E.auth._persistUserIfCurrent(E),B&&E.auth._notifyListenersIfCurrent(E)})()}delete(){var c=this;return(0,p.Z)(function*(){const f=yield c.getIdToken();return yield Lt(c,function lr(m,c){return pt.apply(this,arguments)}(c.auth,{idToken:f})),c.stsTokenManager.clearRefreshToken(),c.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(c=>Object.assign({},c)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(c,f){var E,B,Y,Te,it,Pt,an,Ln;const On=null!==(E=f.displayName)&&void 0!==E?E:void 0,is=null!==(B=f.email)&&void 0!==B?B:void 0,sa=null!==(Y=f.phoneNumber)&&void 0!==Y?Y:void 0,kl=null!==(Te=f.photoURL)&&void 0!==Te?Te:void 0,Ec=null!==(it=f.tenantId)&&void 0!==it?it:void 0,tl=null!==(Pt=f._redirectEventId)&&void 0!==Pt?Pt:void 0,ud=null!==(an=f.createdAt)&&void 0!==an?an:void 0,fh=null!==(Ln=f.lastLoginAt)&&void 0!==Ln?Ln:void 0,{uid:nl,emailVerified:Kf,isAnonymous:Yf,providerData:$a,stsTokenManager:rl}=f;ae(nl&&rl,c,"internal-error");const Mg=ut.fromJSON(this.name,rl);ae("string"==typeof nl,c,"internal-error"),gt(On,c.name),gt(is,c.name),ae("boolean"==typeof Kf,c,"internal-error"),ae("boolean"==typeof Yf,c,"internal-error"),gt(sa,c.name),gt(kl,c.name),gt(Ec,c.name),gt(tl,c.name),gt(ud,c.name),gt(fh,c.name);const ph=new Vt({uid:nl,auth:c,email:is,emailVerified:Kf,displayName:On,isAnonymous:Yf,photoURL:kl,phoneNumber:sa,tenantId:Ec,stsTokenManager:Mg,createdAt:ud,lastLoginAt:fh});return $a&&Array.isArray($a)&&(ph.providerData=$a.map(Rg=>Object.assign({},Rg))),tl&&(ph._redirectEventId=tl),ph}static _fromIdTokenResponse(c,f,E=!1){return(0,p.Z)(function*(){const B=new ut;B.updateFromServerResponse(f);const Y=new Vt({uid:f.localId,auth:c,stsTokenManager:B,isAnonymous:E});return yield xn(Y),Y})()}}const gn=(()=>{class m{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,p.Z)(function*(){return!0})()}_set(f,E){var B=this;return(0,p.Z)(function*(){B.storage[f]=E})()}_get(f){var E=this;return(0,p.Z)(function*(){const B=E.storage[f];return void 0===B?null:B})()}_remove(f){var E=this;return(0,p.Z)(function*(){delete E.storage[f]})()}_addListener(f,E){}_removeListener(f,E){}}return m.type="NONE",m})();function cr(m,c,f){return`firebase:${m}:${c}:${f}`}class Sn{constructor(c,f,E){this.persistence=c,this.auth=f,this.userKey=E;const{config:B,name:Y}=this.auth;this.fullUserKey=cr(this.userKey,B.apiKey,Y),this.fullPersistenceKey=cr("persistence",B.apiKey,Y),this.boundEventHandler=f._onStorageEvent.bind(f),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(c){return this.persistence._set(this.fullUserKey,c.toJSON())}getCurrentUser(){var c=this;return(0,p.Z)(function*(){const f=yield c.persistence._get(c.fullUserKey);return f?Vt._fromJSON(c.auth,f):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(c){var f=this;return(0,p.Z)(function*(){if(f.persistence===c)return;const E=yield f.getCurrentUser();return yield f.removeCurrentUser(),f.persistence=c,E?f.setCurrentUser(E):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(c,f,E="authUser"){return(0,p.Z)(function*(){if(!f.length)return new Sn(de(gn),c,E);const B=(yield Promise.all(f.map(function(){var an=(0,p.Z)(function*(Ln){if(yield Ln._isAvailable())return Ln});return function(Ln){return an.apply(this,arguments)}}()))).filter(an=>an);let Y=B[0]||de(gn);const Te=cr(E,c.config.apiKey,c.name);let it=null;for(const an of f)try{const Ln=yield an._get(Te);if(Ln){const On=Vt._fromJSON(c,Ln);an!==Y&&(it=On),Y=an;break}}catch{}const Pt=B.filter(an=>an._shouldAllowMigration);return Y._shouldAllowMigration&&Pt.length?(Y=Pt[0],it&&(yield Y._set(Te,it.toJSON())),yield Promise.all(f.map(function(){var an=(0,p.Z)(function*(Ln){if(Ln!==Y)try{yield Ln._remove(Te)}catch{}});return function(Ln){return an.apply(this,arguments)}}())),new Sn(Y,c,E)):new Sn(Y,c,E)})()}}function ln(m){const c=m.toLowerCase();if(c.includes("opera/")||c.includes("opr/")||c.includes("opios/"))return"Opera";if($r(c))return"IEMobile";if(c.includes("msie")||c.includes("trident/"))return"IE";if(c.includes("edge/"))return"Edge";if(Jn(c))return"Firefox";if(c.includes("silk/"))return"Silk";if(ve(c))return"Blackberry";if(ce(c))return"Webos";if(kn(c))return"Safari";if((c.includes("chrome/")||qr(c))&&!c.includes("edge/"))return"Chrome";if(Dr(c))return"Android";{const E=m.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===E?.length)return E[1]}return"Other"}function Jn(m=(0,G.z$)()){return/firefox\//i.test(m)}function kn(m=(0,G.z$)()){const c=m.toLowerCase();return c.includes("safari/")&&!c.includes("chrome/")&&!c.includes("crios/")&&!c.includes("android")}function qr(m=(0,G.z$)()){return/crios\//i.test(m)}function $r(m=(0,G.z$)()){return/iemobile/i.test(m)}function Dr(m=(0,G.z$)()){return/android/i.test(m)}function ve(m=(0,G.z$)()){return/blackberry/i.test(m)}function ce(m=(0,G.z$)()){return/webos/i.test(m)}function re(m=(0,G.z$)()){return/iphone|ipad|ipod/i.test(m)||/macintosh/i.test(m)&&/mobile/i.test(m)}function pn(m=(0,G.z$)()){return re(m)||Dr(m)||ce(m)||ve(m)||/windows phone/i.test(m)||$r(m)}function hr(m,c=[]){let f;switch(m){case"Browser":f=ln((0,G.z$)());break;case"Worker":f=`${ln((0,G.z$)())}-${m}`;break;default:f=m}const E=c.length?c.join(","):"FirebaseCore-web";return`${f}/JsCore/${be.SDK_VERSION}/${E}`}class Cr{constructor(c){this.auth=c,this.queue=[]}pushCallback(c,f){const E=Y=>new Promise((Te,it)=>{try{Te(c(Y))}catch(Pt){it(Pt)}});E.onAbort=f,this.queue.push(E);const B=this.queue.length-1;return()=>{this.queue[B]=()=>Promise.resolve()}}runMiddleware(c){var f=this;return(0,p.Z)(function*(){var E;if(f.auth.currentUser===c)return;const B=[];try{for(const Y of f.queue)yield Y(c),Y.onAbort&&B.push(Y.onAbort)}catch(Y){B.reverse();for(const Te of B)try{Te()}catch{}throw f.auth._errorFactory.create("login-blocked",{originalMessage:null===(E=Y)||void 0===E?void 0:E.message})}})()}}class mn{constructor(c,f,E){this.app=c,this.heartbeatServiceProvider=f,this.config=E,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Xn(this),this.idTokenSubscription=new Xn(this),this.beforeStateQueue=new Cr(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Ke,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=c.name,this.clientVersion=E.sdkClientVersion}_initializeWithPersistence(c,f){var E=this;return f&&(this._popupRedirectResolver=de(f)),this._initializationPromise=this.queue((0,p.Z)(function*(){var B,Y;if(!E._deleted&&(E.persistenceManager=yield Sn.create(E,c),!E._deleted)){if(null!==(B=E._popupRedirectResolver)&&void 0!==B&&B._shouldInitProactively)try{yield E._popupRedirectResolver._initialize(E)}catch{}yield E.initializeCurrentUser(f),E.lastNotifiedUid=(null===(Y=E.currentUser)||void 0===Y?void 0:Y.uid)||null,!E._deleted&&(E._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var c=this;return(0,p.Z)(function*(){if(c._deleted)return;const f=yield c.assertedPersistence.getCurrentUser();if(c.currentUser||f){if(c.currentUser&&f&&c.currentUser.uid===f.uid)return c._currentUser._assign(f),void(yield c.currentUser.getIdToken());yield c._updateCurrentUser(f,!0)}})()}initializeCurrentUser(c){var f=this;return(0,p.Z)(function*(){var E;const B=yield f.assertedPersistence.getCurrentUser();let Y=B,Te=!1;if(c&&f.config.authDomain){yield f.getOrInitRedirectPersistenceManager();const it=null===(E=f.redirectUser)||void 0===E?void 0:E._redirectEventId,Pt=Y?._redirectEventId,an=yield f.tryRedirectSignIn(c);(!it||it===Pt)&&an?.user&&(Y=an.user,Te=!0)}if(!Y)return f.directlySetCurrentUser(null);if(!Y._redirectEventId){if(Te)try{yield f.beforeStateQueue.runMiddleware(Y)}catch(it){Y=B,f._popupRedirectResolver._overrideRedirectResult(f,()=>Promise.reject(it))}return Y?f.reloadAndSetCurrentUserOrClear(Y):f.directlySetCurrentUser(null)}return ae(f._popupRedirectResolver,f,"argument-error"),yield f.getOrInitRedirectPersistenceManager(),f.redirectUser&&f.redirectUser._redirectEventId===Y._redirectEventId?f.directlySetCurrentUser(Y):f.reloadAndSetCurrentUserOrClear(Y)})()}tryRedirectSignIn(c){var f=this;return(0,p.Z)(function*(){let E=null;try{E=yield f._popupRedirectResolver._completeRedirectFn(f,c,!0)}catch{yield f._setRedirectUser(null)}return E})()}reloadAndSetCurrentUserOrClear(c){var f=this;return(0,p.Z)(function*(){var E;try{yield xn(c)}catch(B){if("auth/network-request-failed"!==(null===(E=B)||void 0===E?void 0:E.code))return f.directlySetCurrentUser(null)}return f.directlySetCurrentUser(c)})()}useDeviceLanguage(){this.languageCode=function ht(){if(typeof navigator>"u")return null;const m=navigator;return m.languages&&m.languages[0]||m.language||null}()}_delete(){var c=this;return(0,p.Z)(function*(){c._deleted=!0})()}updateCurrentUser(c){var f=this;return(0,p.Z)(function*(){const E=c?(0,G.m9)(c):null;return E&&ae(E.auth.config.apiKey===f.config.apiKey,f,"invalid-user-token"),f._updateCurrentUser(E&&E._clone(f))})()}_updateCurrentUser(c,f=!1){var E=this;return(0,p.Z)(function*(){if(!E._deleted)return c&&ae(E.tenantId===c.tenantId,E,"tenant-id-mismatch"),f||(yield E.beforeStateQueue.runMiddleware(c)),E.queue((0,p.Z)(function*(){yield E.directlySetCurrentUser(c),E.notifyAuthListeners()}))})()}signOut(){var c=this;return(0,p.Z)(function*(){return yield c.beforeStateQueue.runMiddleware(null),(c.redirectPersistenceManager||c._popupRedirectResolver)&&(yield c._setRedirectUser(null)),c._updateCurrentUser(null,!0)})()}setPersistence(c){var f=this;return this.queue((0,p.Z)(function*(){yield f.assertedPersistence.setPersistence(de(c))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(c){this._errorFactory=new G.LL("auth","Firebase",c())}onAuthStateChanged(c,f,E){return this.registerStateListener(this.authStateSubscription,c,f,E)}beforeAuthStateChanged(c,f){return this.beforeStateQueue.pushCallback(c,f)}onIdTokenChanged(c,f,E){return this.registerStateListener(this.idTokenSubscription,c,f,E)}toJSON(){var c;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(c=this._currentUser)||void 0===c?void 0:c.toJSON()}}_setRedirectUser(c,f){var E=this;return(0,p.Z)(function*(){const B=yield E.getOrInitRedirectPersistenceManager(f);return null===c?B.removeCurrentUser():B.setCurrentUser(c)})()}getOrInitRedirectPersistenceManager(c){var f=this;return(0,p.Z)(function*(){if(!f.redirectPersistenceManager){const E=c&&de(c)||f._popupRedirectResolver;ae(E,f,"argument-error"),f.redirectPersistenceManager=yield Sn.create(f,[de(E._redirectPersistence)],"redirectUser"),f.redirectUser=yield f.redirectPersistenceManager.getCurrentUser()}return f.redirectPersistenceManager})()}_redirectUserForId(c){var f=this;return(0,p.Z)(function*(){var E,B;return f._isInitialized&&(yield f.queue((0,p.Z)(function*(){}))),(null===(E=f._currentUser)||void 0===E?void 0:E._redirectEventId)===c?f._currentUser:(null===(B=f.redirectUser)||void 0===B?void 0:B._redirectEventId)===c?f.redirectUser:null})()}_persistUserIfCurrent(c){var f=this;return(0,p.Z)(function*(){if(c===f.currentUser)return f.queue((0,p.Z)(function*(){return f.directlySetCurrentUser(c)}))})()}_notifyListenersIfCurrent(c){c===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var c,f;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const E=null!==(f=null===(c=this.currentUser)||void 0===c?void 0:c.uid)&&void 0!==f?f:null;this.lastNotifiedUid!==E&&(this.lastNotifiedUid=E,this.authStateSubscription.next(this.currentUser))}registerStateListener(c,f,E,B){if(this._deleted)return()=>{};const Y="function"==typeof f?f:f.next.bind(f),Te=this._isInitialized?Promise.resolve():this._initializationPromise;return ae(Te,this,"internal-error"),Te.then(()=>Y(this.currentUser)),"function"==typeof f?c.addObserver(f,E,B):c.addObserver(f)}directlySetCurrentUser(c){var f=this;return(0,p.Z)(function*(){f.currentUser&&f.currentUser!==c&&f._currentUser._stopProactiveRefresh(),c&&f.isProactiveRefreshEnabled&&c._startProactiveRefresh(),f.currentUser=c,c?yield f.assertedPersistence.setCurrentUser(c):yield f.assertedPersistence.removeCurrentUser()})()}queue(c){return this.operations=this.operations.then(c,c),this.operations}get assertedPersistence(){return ae(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(c){!c||this.frameworks.includes(c)||(this.frameworks.push(c),this.frameworks.sort(),this.clientVersion=hr(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var c=this;return(0,p.Z)(function*(){var f;const E={"X-Client-Version":c.clientVersion};c.app.options.appId&&(E["X-Firebase-gmpid"]=c.app.options.appId);const B=yield null===(f=c.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===f?void 0:f.getHeartbeatsHeader();return B&&(E["X-Firebase-Client"]=B),E})()}}function In(m){return(0,G.m9)(m)}class Xn{constructor(c){this.auth=c,this.observer=null,this.addObserver=(0,G.ne)(f=>this.observer=f)}get next(){return ae(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Li(m){const c=m.indexOf(":");return c<0?"":m.substr(0,c+1)}function Ns(m){if(!m)return null;const c=Number(m);return isNaN(c)?null:c}class Zr{constructor(c,f){this.providerId=c,this.signInMethod=f}toJSON(){return Fe("not implemented")}_getIdTokenResponse(c){return Fe("not implemented")}_linkToIdToken(c,f){return Fe("not implemented")}_getReauthenticationResolver(c){return Fe("not implemented")}}function Lr(m,c){return Ri.apply(this,arguments)}function Ri(){return(Ri=(0,p.Z)(function*(m,c){return $n(m,"POST","/v1/accounts:resetPassword",un(m,c))})).apply(this,arguments)}function Mn(m,c){return oo.apply(this,arguments)}function oo(){return(oo=(0,p.Z)(function*(m,c){return $n(m,"POST","/v1/accounts:update",c)})).apply(this,arguments)}function Qi(m,c){return Ti.apply(this,arguments)}function Ti(){return(Ti=(0,p.Z)(function*(m,c){return $n(m,"POST","/v1/accounts:update",un(m,c))})).apply(this,arguments)}function Ii(){return(Ii=(0,p.Z)(function*(m,c){return yr(m,"POST","/v1/accounts:signInWithPassword",un(m,c))})).apply(this,arguments)}function Oi(m,c){return Ji.apply(this,arguments)}function Ji(){return(Ji=(0,p.Z)(function*(m,c){return $n(m,"POST","/v1/accounts:sendOobCode",un(m,c))})).apply(this,arguments)}function Ar(m,c){return us.apply(this,arguments)}function us(){return(us=(0,p.Z)(function*(m,c){return Oi(m,c)})).apply(this,arguments)}function er(m,c){return Kr.apply(this,arguments)}function Kr(){return(Kr=(0,p.Z)(function*(m,c){return Oi(m,c)})).apply(this,arguments)}function Ws(m,c){return ys.apply(this,arguments)}function ys(){return(ys=(0,p.Z)(function*(m,c){return Oi(m,c)})).apply(this,arguments)}function qs(m,c){return xr.apply(this,arguments)}function xr(){return(xr=(0,p.Z)(function*(m,c){return Oi(m,c)})).apply(this,arguments)}function Si(){return(Si=(0,p.Z)(function*(m,c){return yr(m,"POST","/v1/accounts:signInWithEmailLink",un(m,c))})).apply(this,arguments)}function Zs(){return(Zs=(0,p.Z)(function*(m,c){return yr(m,"POST","/v1/accounts:signInWithEmailLink",un(m,c))})).apply(this,arguments)}class ks extends Zr{constructor(c,f,E,B=null){super("password",E),this._email=c,this._password=f,this._tenantId=B}static _fromEmailAndPassword(c,f){return new ks(c,f,"password")}static _fromEmailAndCode(c,f,E=null){return new ks(c,f,"emailLink",E)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(c){const f="string"==typeof c?JSON.parse(c):c;if(f?.email&&f?.password){if("password"===f.signInMethod)return this._fromEmailAndPassword(f.email,f.password);if("emailLink"===f.signInMethod)return this._fromEmailAndCode(f.email,f.password,f.tenantId)}return null}_getIdTokenResponse(c){var f=this;return(0,p.Z)(function*(){switch(f.signInMethod){case"password":return function Ps(m,c){return Ii.apply(this,arguments)}(c,{returnSecureToken:!0,email:f._email,password:f._password});case"emailLink":return function ni(m,c){return Si.apply(this,arguments)}(c,{email:f._email,oobCode:f._password});default:he(c,"internal-error")}})()}_linkToIdToken(c,f){var E=this;return(0,p.Z)(function*(){switch(E.signInMethod){case"password":return Mn(c,{idToken:f,returnSecureToken:!0,email:E._email,password:E._password});case"emailLink":return function Ho(m,c){return Zs.apply(this,arguments)}(c,{idToken:f,email:E._email,oobCode:E._password});default:he(c,"internal-error")}})()}_getReauthenticationResolver(c){return this._getIdTokenResponse(c)}}function ri(m,c){return xe.apply(this,arguments)}function xe(){return(xe=(0,p.Z)(function*(m,c){return yr(m,"POST","/v1/accounts:signInWithIdp",un(m,c))})).apply(this,arguments)}class Ve extends Zr{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(c){const f=new Ve(c.providerId,c.signInMethod);return c.idToken||c.accessToken?(c.idToken&&(f.idToken=c.idToken),c.accessToken&&(f.accessToken=c.accessToken),c.nonce&&!c.pendingToken&&(f.nonce=c.nonce),c.pendingToken&&(f.pendingToken=c.pendingToken)):c.oauthToken&&c.oauthTokenSecret?(f.accessToken=c.oauthToken,f.secret=c.oauthTokenSecret):he("argument-error"),f}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(c){const f="string"==typeof c?JSON.parse(c):c,{providerId:E,signInMethod:B}=f,Y=(0,we._T)(f,["providerId","signInMethod"]);if(!E||!B)return null;const Te=new Ve(E,B);return Te.idToken=Y.idToken||void 0,Te.accessToken=Y.accessToken||void 0,Te.secret=Y.secret,Te.nonce=Y.nonce,Te.pendingToken=Y.pendingToken||null,Te}_getIdTokenResponse(c){return ri(c,this.buildRequest())}_linkToIdToken(c,f){const E=this.buildRequest();return E.idToken=f,ri(c,E)}_getReauthenticationResolver(c){const f=this.buildRequest();return f.autoCreate=!1,ri(c,f)}buildRequest(){const c={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)c.pendingToken=this.pendingToken;else{const f={};this.idToken&&(f.id_token=this.idToken),this.accessToken&&(f.access_token=this.accessToken),this.secret&&(f.oauth_token_secret=this.secret),f.providerId=this.providerId,this.nonce&&!this.pendingToken&&(f.nonce=this.nonce),c.postBody=(0,G.xO)(f)}return c}}function lt(m,c){return Dt.apply(this,arguments)}function Dt(){return(Dt=(0,p.Z)(function*(m,c){return $n(m,"POST","/v1/accounts:sendVerificationCode",un(m,c))})).apply(this,arguments)}function bn(){return(bn=(0,p.Z)(function*(m,c){return yr(m,"POST","/v1/accounts:signInWithPhoneNumber",un(m,c))})).apply(this,arguments)}function Un(){return(Un=(0,p.Z)(function*(m,c){const f=yield yr(m,"POST","/v1/accounts:signInWithPhoneNumber",un(m,c));if(f.temporaryProof)throw zn(m,"account-exists-with-different-credential",f);return f})).apply(this,arguments)}const fi={USER_NOT_FOUND:"user-not-found"};function Ks(){return(Ks=(0,p.Z)(function*(m,c){return yr(m,"POST","/v1/accounts:signInWithPhoneNumber",un(m,Object.assign(Object.assign({},c),{operation:"REAUTH"})),fi)})).apply(this,arguments)}class Hr extends Zr{constructor(c){super("phone","phone"),this.params=c}static _fromVerification(c,f){return new Hr({verificationId:c,verificationCode:f})}static _fromTokenResponse(c,f){return new Hr({phoneNumber:c,temporaryProof:f})}_getIdTokenResponse(c){return function Xt(m,c){return bn.apply(this,arguments)}(c,this._makeVerificationRequest())}_linkToIdToken(c,f){return function Er(m,c){return Un.apply(this,arguments)}(c,Object.assign({idToken:f},this._makeVerificationRequest()))}_getReauthenticationResolver(c){return function vo(m,c){return Ks.apply(this,arguments)}(c,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:c,phoneNumber:f,verificationId:E,verificationCode:B}=this.params;return c&&f?{temporaryProof:c,phoneNumber:f}:{sessionInfo:E,code:B}}toJSON(){const c={providerId:this.providerId};return this.params.phoneNumber&&(c.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(c.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(c.verificationCode=this.params.verificationCode),this.params.verificationId&&(c.verificationId=this.params.verificationId),c}static fromJSON(c){"string"==typeof c&&(c=JSON.parse(c));const{verificationId:f,verificationCode:E,phoneNumber:B,temporaryProof:Y}=c;return E||f||B||Y?new Hr({verificationId:f,verificationCode:E,phoneNumber:B,temporaryProof:Y}):null}}class vs{constructor(c){var f,E,B,Y,Te,it;const Pt=(0,G.zd)((0,G.pd)(c)),an=null!==(f=Pt.apiKey)&&void 0!==f?f:null,Ln=null!==(E=Pt.oobCode)&&void 0!==E?E:null,On=function pi(m){switch(m){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(B=Pt.mode)&&void 0!==B?B:null);ae(an&&Ln&&On,"argument-error"),this.apiKey=an,this.operation=On,this.code=Ln,this.continueUrl=null!==(Y=Pt.continueUrl)&&void 0!==Y?Y:null,this.languageCode=null!==(Te=Pt.languageCode)&&void 0!==Te?Te:null,this.tenantId=null!==(it=Pt.tenantId)&&void 0!==it?it:null}static parseLink(c){const f=function Ni(m){const c=(0,G.zd)((0,G.pd)(m)).link,f=c?(0,G.zd)((0,G.pd)(c)).deep_link_id:null,E=(0,G.zd)((0,G.pd)(m)).deep_link_id;return(E?(0,G.zd)((0,G.pd)(E)).link:null)||E||f||c||m}(c);try{return new vs(f)}catch{return null}}}let Pi=(()=>{class m{constructor(){this.providerId=m.PROVIDER_ID}static credential(f,E){return ks._fromEmailAndPassword(f,E)}static credentialWithLink(f,E){const B=vs.parseLink(E);return ae(B,"argument-error"),ks._fromEmailAndCode(f,B.code,B.tenantId)}}return m.PROVIDER_ID="password",m.EMAIL_PASSWORD_SIGN_IN_METHOD="password",m.EMAIL_LINK_SIGN_IN_METHOD="emailLink",m})();class Xi{constructor(c){this.providerId=c,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(c){this.defaultLanguageCode=c}setCustomParameters(c){return this.customParameters=c,this}getCustomParameters(){return this.customParameters}}class ki extends Xi{constructor(){super(...arguments),this.scopes=[]}addScope(c){return this.scopes.includes(c)||this.scopes.push(c),this}getScopes(){return[...this.scopes]}}class ls extends ki{static credentialFromJSON(c){const f="string"==typeof c?JSON.parse(c):c;return ae("providerId"in f&&"signInMethod"in f,"argument-error"),Ve._fromParams(f)}credential(c){return this._credential(Object.assign(Object.assign({},c),{nonce:c.rawNonce}))}_credential(c){return ae(c.idToken||c.accessToken,"argument-error"),Ve._fromParams(Object.assign(Object.assign({},c),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(c){return ls.oauthCredentialFromTaggedObject(c)}static credentialFromError(c){return ls.oauthCredentialFromTaggedObject(c.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:c}){if(!c)return null;const{oauthIdToken:f,oauthAccessToken:E,oauthTokenSecret:B,pendingToken:Y,nonce:Te,providerId:it}=c;if(!E&&!B&&!f&&!Y||!it)return null;try{return new ls(it)._credential({idToken:f,accessToken:E,nonce:Te,pendingToken:Y})}catch{return null}}}let Fs=(()=>{class m extends ki{constructor(){super("facebook.com")}static credential(f){return Ve._fromParams({providerId:m.PROVIDER_ID,signInMethod:m.FACEBOOK_SIGN_IN_METHOD,accessToken:f})}static credentialFromResult(f){return m.credentialFromTaggedObject(f)}static credentialFromError(f){return m.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f||!("oauthAccessToken"in f)||!f.oauthAccessToken)return null;try{return m.credential(f.oauthAccessToken)}catch{return null}}}return m.FACEBOOK_SIGN_IN_METHOD="facebook.com",m.PROVIDER_ID="facebook.com",m})(),cs=(()=>{class m extends ki{constructor(){super("google.com"),this.addScope("profile")}static credential(f,E){return Ve._fromParams({providerId:m.PROVIDER_ID,signInMethod:m.GOOGLE_SIGN_IN_METHOD,idToken:f,accessToken:E})}static credentialFromResult(f){return m.credentialFromTaggedObject(f)}static credentialFromError(f){return m.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{oauthIdToken:E,oauthAccessToken:B}=f;if(!E&&!B)return null;try{return m.credential(E,B)}catch{return null}}}return m.GOOGLE_SIGN_IN_METHOD="google.com",m.PROVIDER_ID="google.com",m})(),Ls=(()=>{class m extends ki{constructor(){super("github.com")}static credential(f){return Ve._fromParams({providerId:m.PROVIDER_ID,signInMethod:m.GITHUB_SIGN_IN_METHOD,accessToken:f})}static credentialFromResult(f){return m.credentialFromTaggedObject(f)}static credentialFromError(f){return m.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f||!("oauthAccessToken"in f)||!f.oauthAccessToken)return null;try{return m.credential(f.oauthAccessToken)}catch{return null}}}return m.GITHUB_SIGN_IN_METHOD="github.com",m.PROVIDER_ID="github.com",m})();class Vs extends Zr{constructor(c,f){super(c,c),this.pendingToken=f}_getIdTokenResponse(c){return ri(c,this.buildRequest())}_linkToIdToken(c,f){const E=this.buildRequest();return E.idToken=f,ri(c,E)}_getReauthenticationResolver(c){const f=this.buildRequest();return f.autoCreate=!1,ri(c,f)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(c){const f="string"==typeof c?JSON.parse(c):c,{providerId:E,signInMethod:B,pendingToken:Y}=f;return E&&B&&Y&&E===B?new Vs(E,Y):null}static _create(c,f){return new Vs(c,f)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class ii extends Xi{constructor(c){ae(c.startsWith("saml."),"argument-error"),super(c)}static credentialFromResult(c){return ii.samlCredentialFromTaggedObject(c)}static credentialFromError(c){return ii.samlCredentialFromTaggedObject(c.customData||{})}static credentialFromJSON(c){const f=Vs.fromJSON(c);return ae(f,"argument-error"),f}static samlCredentialFromTaggedObject({_tokenResponse:c}){if(!c)return null;const{pendingToken:f,providerId:E}=c;if(!f||!E)return null;try{return Vs._create(E,f)}catch{return null}}}let Vi=(()=>{class m extends ki{constructor(){super("twitter.com")}static credential(f,E){return Ve._fromParams({providerId:m.PROVIDER_ID,signInMethod:m.TWITTER_SIGN_IN_METHOD,oauthToken:f,oauthTokenSecret:E})}static credentialFromResult(f){return m.credentialFromTaggedObject(f)}static credentialFromError(f){return m.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{oauthAccessToken:E,oauthTokenSecret:B}=f;if(!E||!B)return null;try{return m.credential(E,B)}catch{return null}}}return m.TWITTER_SIGN_IN_METHOD="twitter.com",m.PROVIDER_ID="twitter.com",m})();function Ai(m,c){return Yr.apply(this,arguments)}function Yr(){return(Yr=(0,p.Z)(function*(m,c){return yr(m,"POST","/v1/accounts:signUp",un(m,c))})).apply(this,arguments)}class Vr{constructor(c){this.user=c.user,this.providerId=c.providerId,this._tokenResponse=c._tokenResponse,this.operationType=c.operationType}static _fromIdTokenResponse(c,f,E,B=!1){return(0,p.Z)(function*(){const Y=yield Vt._fromIdTokenResponse(c,E,B),Te=wo(E);return new Vr({user:Y,providerId:Te,_tokenResponse:E,operationType:f})})()}static _forOperation(c,f,E){return(0,p.Z)(function*(){yield c._updateTokensIfNecessary(E,!0);const B=wo(E);return new Vr({user:c,providerId:B,_tokenResponse:E,operationType:f})})()}}function wo(m){return m.providerId?m.providerId:"phoneNumber"in m?"phone":null}function Mr(){return(Mr=(0,p.Z)(function*(m){var c;const f=In(m);if(yield f._initializationPromise,null!==(c=f.currentUser)&&void 0!==c&&c.isAnonymous)return new Vr({user:f.currentUser,providerId:null,operationType:"signIn"});const E=yield Ai(f,{returnSecureToken:!0}),B=yield Vr._fromIdTokenResponse(f,"signIn",E,!0);return yield f._updateCurrentUser(B.user),B})).apply(this,arguments)}class ds extends G.ZR{constructor(c,f,E,B){var Y;super(f.code,f.message),this.operationType=E,this.user=B,Object.setPrototypeOf(this,ds.prototype),this.customData={appName:c.name,tenantId:null!==(Y=c.tenantId)&&void 0!==Y?Y:void 0,_serverResponse:f.customData._serverResponse,operationType:E}}static _fromErrorAndOperation(c,f,E,B){return new ds(c,f,E,B)}}function Ro(m,c,f,E){return("reauthenticate"===c?f._getReauthenticationResolver(m):f._getIdTokenResponse(m)).catch(Y=>{throw"auth/multi-factor-auth-required"===Y.code?ds._fromErrorAndOperation(m,Y,c,E):Y})}function fr(m){return new Set(m.map(({providerId:c})=>c).filter(c=>!!c))}function es(){return(es=(0,p.Z)(function*(m,c){const f=(0,G.m9)(m);yield Wn(!0,f,c);const{providerUserInfo:E}=yield nr(f.auth,{idToken:yield f.getIdToken(),deleteProvider:[c]}),B=fr(E||[]);return f.providerData=f.providerData.filter(Y=>B.has(Y.providerId)),B.has("phone")||(f.phoneNumber=null),yield f.auth._persistUserIfCurrent(f),f})).apply(this,arguments)}function Ui(m,c){return gi.apply(this,arguments)}function gi(){return(gi=(0,p.Z)(function*(m,c,f=!1){const E=yield Lt(m,c._linkToIdToken(m.auth,yield m.getIdToken()),f);return Vr._forOperation(m,"link",E)})).apply(this,arguments)}function Wn(m,c,f){return Di.apply(this,arguments)}function Di(){return(Di=(0,p.Z)(function*(m,c,f){yield xn(c);const B=!1===m?"provider-already-linked":"no-such-provider";ae(fr(c.providerData).has(f)===m,c.auth,B)})).apply(this,arguments)}function ws(m,c){return Go.apply(this,arguments)}function Go(){return(Go=(0,p.Z)(function*(m,c,f=!1){var E;const{auth:B}=m,Y="reauthenticate";try{const Te=yield Lt(m,Ro(B,Y,c,m),f);ae(Te.idToken,B,"internal-error");const it=Be(Te.idToken);ae(it,B,"internal-error");const{sub:Pt}=it;return ae(m.uid===Pt,B,"user-mismatch"),Vr._forOperation(m,Y,Te)}catch(Te){throw"auth/user-not-found"===(null===(E=Te)||void 0===E?void 0:E.code)&&he(B,"user-mismatch"),Te}})).apply(this,arguments)}function Qn(m,c){return lo.apply(this,arguments)}function lo(){return(lo=(0,p.Z)(function*(m,c,f=!1){const E="signIn",B=yield Ro(m,E,c),Y=yield Vr._fromIdTokenResponse(m,E,B);return f||(yield m._updateCurrentUser(Y.user)),Y})).apply(this,arguments)}function Qr(m,c){return yn.apply(this,arguments)}function yn(){return(yn=(0,p.Z)(function*(m,c){return Qn(In(m),c)})).apply(this,arguments)}function Us(m,c){return Ys.apply(this,arguments)}function Ys(){return(Ys=(0,p.Z)(function*(m,c){const f=(0,G.m9)(m);return yield Wn(!1,f,c.providerId),Ui(f,c)})).apply(this,arguments)}function Oo(m,c){return Qs.apply(this,arguments)}function Qs(){return(Qs=(0,p.Z)(function*(m,c){return ws((0,G.m9)(m),c)})).apply(this,arguments)}function Bi(m,c){return Es.apply(this,arguments)}function Es(){return(Es=(0,p.Z)(function*(m,c){return yr(m,"POST","/v1/accounts:signInWithCustomToken",un(m,c))})).apply(this,arguments)}function No(){return(No=(0,p.Z)(function*(m,c){const f=In(m),E=yield Bi(f,{token:c,returnSecureToken:!0}),B=yield Vr._fromIdTokenResponse(f,"signIn",E);return yield f._updateCurrentUser(B.user),B})).apply(this,arguments)}class ft{constructor(c,f){this.factorId=c,this.uid=f.mfaEnrollmentId,this.enrollmentTime=new Date(f.enrolledAt).toUTCString(),this.displayName=f.displayName}static _fromServerResponse(c,f){return"phoneInfo"in f?Rn._fromServerResponse(c,f):he(c,"internal-error")}}class Rn extends ft{constructor(c){super("phone",c),this.phoneNumber=c.phoneInfo}static _fromServerResponse(c,f){return new Rn(f)}}function Bs(m,c,f){var E;ae((null===(E=f.url)||void 0===E?void 0:E.length)>0,m,"invalid-continue-uri"),ae(typeof f.dynamicLinkDomain>"u"||f.dynamicLinkDomain.length>0,m,"invalid-dynamic-link-domain"),c.continueUrl=f.url,c.dynamicLinkDomain=f.dynamicLinkDomain,c.canHandleCodeInApp=f.handleCodeInApp,f.iOS&&(ae(f.iOS.bundleId.length>0,m,"missing-ios-bundle-id"),c.iOSBundleId=f.iOS.bundleId),f.android&&(ae(f.android.packageName.length>0,m,"missing-android-pkg-name"),c.androidInstallApp=f.android.installApp,c.androidMinimumVersionCode=f.android.minimumVersion,c.androidPackageName=f.android.packageName)}function Ur(){return(Ur=(0,p.Z)(function*(m,c,f){const E=(0,G.m9)(m),B={requestType:"PASSWORD_RESET",email:c};f&&Bs(E,B,f),yield er(E,B)})).apply(this,arguments)}function Is(){return(Is=(0,p.Z)(function*(m,c,f){yield Lr((0,G.m9)(m),{oobCode:c,newPassword:f})})).apply(this,arguments)}function Io(){return(Io=(0,p.Z)(function*(m,c){yield Qi((0,G.m9)(m),{oobCode:c})})).apply(this,arguments)}function js(m,c){return Do.apply(this,arguments)}function Do(){return(Do=(0,p.Z)(function*(m,c){const f=(0,G.m9)(m),E=yield Lr(f,{oobCode:c}),B=E.requestType;switch(ae(B,f,"internal-error"),B){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":ae(E.newEmail,f,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":ae(E.mfaInfo,f,"internal-error");default:ae(E.email,f,"internal-error")}let Y=null;return E.mfaInfo&&(Y=ft._fromServerResponse(In(f),E.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.newEmail:E.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.email:E.newEmail)||null,multiFactorInfo:Y},operation:B}})).apply(this,arguments)}function F(){return(F=(0,p.Z)(function*(m,c){const{data:f}=yield js((0,G.m9)(m),c);return f.email})).apply(this,arguments)}function A(){return(A=(0,p.Z)(function*(m,c,f){const E=In(m),B=yield Ai(E,{returnSecureToken:!0,email:c,password:f}),Y=yield Vr._fromIdTokenResponse(E,"signIn",B);return yield E._updateCurrentUser(Y.user),Y})).apply(this,arguments)}function nn(){return(nn=(0,p.Z)(function*(m,c,f){const E=(0,G.m9)(m),B={requestType:"EMAIL_SIGNIN",email:c};ae(f.handleCodeInApp,E,"argument-error"),f&&Bs(E,B,f),yield Ws(E,B)})).apply(this,arguments)}function mi(){return(mi=(0,p.Z)(function*(m,c,f){const E=(0,G.m9)(m),B=Pi.credentialWithLink(c,f||wt());return ae(B._tenantId===(E.tenantId||null),E,"tenant-id-mismatch"),Qr(E,B)})).apply(this,arguments)}function ji(m,c){return Js.apply(this,arguments)}function Js(){return(Js=(0,p.Z)(function*(m,c){return $n(m,"POST","/v1/accounts:createAuthUri",un(m,c))})).apply(this,arguments)}function ko(){return(ko=(0,p.Z)(function*(m,c){const E={identifier:c,continueUri:Ct()?wt():"http://localhost"},{signinMethods:B}=yield ji((0,G.m9)(m),E);return B||[]})).apply(this,arguments)}function co(){return(co=(0,p.Z)(function*(m,c){const f=(0,G.m9)(m),B={requestType:"VERIFY_EMAIL",idToken:yield m.getIdToken()};c&&Bs(f.auth,B,c);const{email:Y}=yield Ar(f.auth,B);Y!==m.email&&(yield m.reload())})).apply(this,arguments)}function Rr(){return(Rr=(0,p.Z)(function*(m,c,f){const E=(0,G.m9)(m),Y={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield m.getIdToken(),newEmail:c};f&&Bs(E.auth,Y,f);const{email:Te}=yield qs(E.auth,Y);Te!==m.email&&(yield m.reload())})).apply(this,arguments)}function Wo(m,c){return da.apply(this,arguments)}function da(){return(da=(0,p.Z)(function*(m,c){return $n(m,"POST","/v1/accounts:update",c)})).apply(this,arguments)}function ha(){return(ha=(0,p.Z)(function*(m,{displayName:c,photoURL:f}){if(void 0===c&&void 0===f)return;const E=(0,G.m9)(m),Y={idToken:yield E.getIdToken(),displayName:c,photoUrl:f,returnSecureToken:!0},Te=yield Lt(E,Wo(E.auth,Y));E.displayName=Te.displayName||null,E.photoURL=Te.photoUrl||null;const it=E.providerData.find(({providerId:Pt})=>"password"===Pt);it&&(it.displayName=E.displayName,it.photoURL=E.photoURL),yield E._updateTokensIfNecessary(Te)})).apply(this,arguments)}function R(m,c,f){return q.apply(this,arguments)}function q(){return(q=(0,p.Z)(function*(m,c,f){const{auth:E}=m,Y={idToken:yield m.getIdToken(),returnSecureToken:!0};c&&(Y.email=c),f&&(Y.password=f);const Te=yield Lt(m,Mn(E,Y));yield m._updateTokensIfNecessary(Te,!0)})).apply(this,arguments)}class ze{constructor(c,f,E={}){this.isNewUser=c,this.providerId=f,this.profile=E}}class nt extends ze{constructor(c,f,E,B){super(c,f,E),this.username=B}}class Jt extends ze{constructor(c,f){super(c,"facebook.com",f)}}class sr extends nt{constructor(c,f){super(c,"github.com",f,"string"==typeof f?.login?f?.login:null)}}class ur extends ze{constructor(c,f){super(c,"google.com",f)}}class qn extends nt{constructor(c,f,E){super(c,"twitter.com",f,E)}}function Zn(m){const{user:c,_tokenResponse:f}=m;return c.isAnonymous&&!f?{providerId:null,isNewUser:!1,profile:null}:function fe(m){var c,f;if(!m)return null;const{providerId:E}=m,B=m.rawUserInfo?JSON.parse(m.rawUserInfo):{},Y=m.isNewUser||"identitytoolkit#SignupNewUserResponse"===m.kind;if(!E&&m?.idToken){const Te=null===(f=null===(c=Be(m.idToken))||void 0===c?void 0:c.firebase)||void 0===f?void 0:f.sign_in_provider;if(Te)return new ze(Y,"anonymous"!==Te&&"custom"!==Te?Te:null)}if(!E)return null;switch(E){case"facebook.com":return new Jt(Y,B);case"github.com":return new sr(Y,B);case"google.com":return new ur(Y,B);case"twitter.com":return new qn(Y,B,m.screenName||null);case"custom":case"anonymous":return new ze(Y,null);default:return new ze(Y,E,B)}}(f)}class O{constructor(c,f){this.type=c,this.credential=f}static _fromIdtoken(c){return new O("enroll",c)}static _fromMfaPendingCredential(c){return new O("signin",c)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(c){var f,E;if(c?.multiFactorSession){if(null!==(f=c.multiFactorSession)&&void 0!==f&&f.pendingCredential)return O._fromMfaPendingCredential(c.multiFactorSession.pendingCredential);if(null!==(E=c.multiFactorSession)&&void 0!==E&&E.idToken)return O._fromIdtoken(c.multiFactorSession.idToken)}return null}}class j{constructor(c,f,E){this.session=c,this.hints=f,this.signInResolver=E}static _fromError(c,f){const E=In(c),B=f.customData._serverResponse,Y=(B.mfaInfo||[]).map(it=>ft._fromServerResponse(E,it));ae(B.mfaPendingCredential,E,"internal-error");const Te=O._fromMfaPendingCredential(B.mfaPendingCredential);return new j(Te,Y,function(){var it=(0,p.Z)(function*(Pt){const an=yield Pt._process(E,Te);delete B.mfaInfo,delete B.mfaPendingCredential;const Ln=Object.assign(Object.assign({},B),{idToken:an.idToken,refreshToken:an.refreshToken});switch(f.operationType){case"signIn":const On=yield Vr._fromIdTokenResponse(E,f.operationType,Ln);return yield E._updateCurrentUser(On.user),On;case"reauthenticate":return ae(f.user,E,"internal-error"),Vr._forOperation(f.user,f.operationType,Ln);default:he(E,"internal-error")}});return function(Pt){return it.apply(this,arguments)}}())}resolveSignIn(c){var f=this;return(0,p.Z)(function*(){return f.signInResolver(c)})()}}function De(m,c){return $n(m,"POST","/v2/accounts/mfaEnrollment:start",un(m,c))}class sn{constructor(c){this.user=c,this.enrolledFactors=[],c._onReload(f=>{f.mfaInfo&&(this.enrolledFactors=f.mfaInfo.map(E=>ft._fromServerResponse(c.auth,E)))})}static _fromUser(c){return new sn(c)}getSession(){var c=this;return(0,p.Z)(function*(){return O._fromIdtoken(yield c.user.getIdToken())})()}enroll(c,f){var E=this;return(0,p.Z)(function*(){const B=c,Y=yield E.getSession(),Te=yield Lt(E.user,B._process(E.user.auth,Y,f));return yield E.user._updateTokensIfNecessary(Te),E.user.reload()})()}unenroll(c){var f=this;return(0,p.Z)(function*(){var E;const B="string"==typeof c?c:c.uid,Y=yield f.user.getIdToken(),Te=yield Lt(f.user,function bt(m,c){return $n(m,"POST","/v2/accounts/mfaEnrollment:withdraw",un(m,c))}(f.user.auth,{idToken:Y,mfaEnrollmentId:B}));f.enrolledFactors=f.enrolledFactors.filter(({uid:it})=>it!==B),yield f.user._updateTokensIfNecessary(Te);try{yield f.user.reload()}catch(it){if("auth/user-token-expired"!==(null===(E=it)||void 0===E?void 0:E.code))throw it}})()}}const Ut=new WeakMap,Gn="__sak";class Jr{constructor(c,f){this.storageRetriever=c,this.type=f}_isAvailable(){try{return this.storage?(this.storage.setItem(Gn,"1"),this.storage.removeItem(Gn),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(c,f){return this.storage.setItem(c,JSON.stringify(f)),Promise.resolve()}_get(c){const f=this.storage.getItem(c);return Promise.resolve(f?JSON.parse(f):null)}_remove(c){return this.storage.removeItem(c),Promise.resolve()}get storage(){return this.storageRetriever()}}const ui=(()=>{class m extends Jr{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(f,E)=>this.onStorageEvent(f,E),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Nr(){const m=(0,G.z$)();return kn(m)||re(m)}()&&function cn(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=pn(),this._shouldAllowMigration=!0}forAllChangedKeys(f){for(const E of Object.keys(this.listeners)){const B=this.storage.getItem(E),Y=this.localCache[E];B!==Y&&f(E,Y,B)}}onStorageEvent(f,E=!1){if(!f.key)return void this.forAllChangedKeys((it,Pt,an)=>{this.notifyListeners(it,an)});const B=f.key;if(E?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const it=this.storage.getItem(B);if(f.newValue!==it)null!==f.newValue?this.storage.setItem(B,f.newValue):this.storage.removeItem(B);else if(this.localCache[B]===f.newValue&&!E)return}const Y=()=>{const it=this.storage.getItem(B);!E&&this.localCache[B]===it||this.notifyListeners(B,it)},Te=this.storage.getItem(B);!function Wt(){return(0,G.w1)()&&10===document.documentMode}()||Te===f.newValue||f.newValue===f.oldValue?Y():setTimeout(Y,10)}notifyListeners(f,E){this.localCache[f]=E;const B=this.listeners[f];if(B)for(const Y of Array.from(B))Y(E&&JSON.parse(E))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((f,E,B)=>{this.onStorageEvent(new StorageEvent("storage",{key:f,oldValue:E,newValue:B}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(f,E){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[f]||(this.listeners[f]=new Set,this.localCache[f]=this.storage.getItem(f)),this.listeners[f].add(E)}_removeListener(f,E){this.listeners[f]&&(this.listeners[f].delete(E),0===this.listeners[f].size&&delete this.listeners[f]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(f,E){var B=()=>super._set,Y=this;return(0,p.Z)(function*(){yield B().call(Y,f,E),Y.localCache[f]=JSON.stringify(E)})()}_get(f){var E=()=>super._get,B=this;return(0,p.Z)(function*(){const Y=yield E().call(B,f);return B.localCache[f]=JSON.stringify(Y),Y})()}_remove(f){var E=()=>super._remove,B=this;return(0,p.Z)(function*(){yield E().call(B,f),delete B.localCache[f]})()}}return m.type="LOCAL",m})(),Hi=(()=>{class m extends Jr{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(f,E){}_removeListener(f,E){}}return m.type="SESSION",m})();let Gi=(()=>{class m{constructor(f){this.eventTarget=f,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(f){const E=this.receivers.find(Y=>Y.isListeningto(f));if(E)return E;const B=new m(f);return this.receivers.push(B),B}isListeningto(f){return this.eventTarget===f}handleEvent(f){var E=this;return(0,p.Z)(function*(){const B=f,{eventId:Y,eventType:Te,data:it}=B.data,Pt=E.handlersMap[Te];if(!Pt?.size)return;B.ports[0].postMessage({status:"ack",eventId:Y,eventType:Te});const an=Array.from(Pt).map(function(){var On=(0,p.Z)(function*(is){return is(B.origin,it)});return function(is){return On.apply(this,arguments)}}()),Ln=yield function xi(m){return Promise.all(m.map(function(){var c=(0,p.Z)(function*(f){try{return{fulfilled:!0,value:yield f}}catch(E){return{fulfilled:!1,reason:E}}});return function(f){return c.apply(this,arguments)}}()))}(an);B.ports[0].postMessage({status:"done",eventId:Y,eventType:Te,response:Ln})})()}_subscribe(f,E){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[f]||(this.handlersMap[f]=new Set),this.handlersMap[f].add(E)}_unsubscribe(f,E){this.handlersMap[f]&&E&&this.handlersMap[f].delete(E),(!E||0===this.handlersMap[f].size)&&delete this.handlersMap[f],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return m.receivers=[],m})();function ho(m="",c=10){let f="";for(let E=0;E<c;E++)f+=Math.floor(10*Math.random());return m+f}class bo{constructor(c){this.target=c,this.handlers=new Set}removeMessageHandler(c){c.messageChannel&&(c.messageChannel.port1.removeEventListener("message",c.onMessage),c.messageChannel.port1.close()),this.handlers.delete(c)}_send(c,f,E=50){var B=this;return(0,p.Z)(function*(){const Y=typeof MessageChannel<"u"?new MessageChannel:null;if(!Y)throw new Error("connection_unavailable");let Te,it;return new Promise((Pt,an)=>{const Ln=ho("",20);Y.port1.start();const On=setTimeout(()=>{an(new Error("unsupported_event"))},E);it={messageChannel:Y,onMessage(is){const sa=is;if(sa.data.eventId===Ln)switch(sa.data.status){case"ack":clearTimeout(On),Te=setTimeout(()=>{an(new Error("timeout"))},3e3);break;case"done":clearTimeout(Te),Pt(sa.data.response);break;default:clearTimeout(On),clearTimeout(Te),an(new Error("invalid_response"))}}},B.handlers.add(it),Y.port1.addEventListener("message",it.onMessage),B.target.postMessage({eventType:c,eventId:Ln,data:f},[Y.port2])}).finally(()=>{it&&B.removeMessageHandler(it)})})()}}function li(){return window}function To(){return typeof li().WorkerGlobalScope<"u"&&"function"==typeof li().importScripts}function Ra(){return(Ra=(0,p.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const to="firebaseLocalStorageDb",fa="firebaseLocalStorage",Tt="fbase_key";class Pr{constructor(c){this.request=c}toPromise(){return new Promise((c,f)=>{this.request.addEventListener("success",()=>{c(this.request.result)}),this.request.addEventListener("error",()=>{f(this.request.error)})})}}function Fo(m,c){return m.transaction([fa],c?"readwrite":"readonly").objectStore(fa)}function Qt(){const m=indexedDB.open(to,1);return new Promise((c,f)=>{m.addEventListener("error",()=>{f(m.error)}),m.addEventListener("upgradeneeded",()=>{const E=m.result;try{E.createObjectStore(fa,{keyPath:Tt})}catch(B){f(B)}}),m.addEventListener("success",(0,p.Z)(function*(){const E=m.result;E.objectStoreNames.contains(fa)?c(E):(E.close(),yield function za(){const m=indexedDB.deleteDatabase(to);return new Pr(m).toPromise()}(),c(yield Qt()))}))})}function vn(m,c,f){return Au.apply(this,arguments)}function Au(){return(Au=(0,p.Z)(function*(m,c,f){const E=Fo(m,!0).put({[Tt]:c,value:f});return new Pr(E).toPromise()})).apply(this,arguments)}function Qe(){return(Qe=(0,p.Z)(function*(m,c){const f=Fo(m,!1).get(c),E=yield new Pr(f).toPromise();return void 0===E?null:E.value})).apply(this,arguments)}function Et(m,c){const f=Fo(m,!0).delete(c);return new Pr(f).toPromise()}const Ia=(()=>{class m{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var f=this;return(0,p.Z)(function*(){return f.db||(f.db=yield Qt()),f.db})()}_withRetries(f){var E=this;return(0,p.Z)(function*(){let B=0;for(;;)try{const Y=yield E._openDb();return yield f(Y)}catch(Y){if(B++>3)throw Y;E.db&&(E.db.close(),E.db=void 0)}})()}initializeServiceWorkerMessaging(){var f=this;return(0,p.Z)(function*(){return To()?f.initializeReceiver():f.initializeSender()})()}initializeReceiver(){var f=this;return(0,p.Z)(function*(){f.receiver=Gi._getInstance(function ta(){return To()?self:null}()),f.receiver._subscribe("keyChanged",function(){var E=(0,p.Z)(function*(B,Y){return{keyProcessed:(yield f._poll()).includes(Y.key)}});return function(B,Y){return E.apply(this,arguments)}}()),f.receiver._subscribe("ping",function(){var E=(0,p.Z)(function*(B,Y){return["keyChanged"]});return function(B,Y){return E.apply(this,arguments)}}())})()}initializeSender(){var f=this;return(0,p.Z)(function*(){var E,B;if(f.activeServiceWorker=yield function Ma(){return Ra.apply(this,arguments)}(),!f.activeServiceWorker)return;f.sender=new bo(f.activeServiceWorker);const Y=yield f.sender._send("ping",{},800);!Y||(null===(E=Y[0])||void 0===E?void 0:E.fulfilled)&&(null===(B=Y[0])||void 0===B?void 0:B.value.includes("keyChanged"))&&(f.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(f){var E=this;return(0,p.Z)(function*(){if(E.sender&&E.activeServiceWorker&&function zi(){var m;return(null===(m=navigator?.serviceWorker)||void 0===m?void 0:m.controller)||null}()===E.activeServiceWorker)try{yield E.sender._send("keyChanged",{key:f},E.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,p.Z)(function*(){try{if(!indexedDB)return!1;const f=yield Qt();return yield vn(f,Gn,"1"),yield Et(f,Gn),!0}catch{}return!1})()}_withPendingWrite(f){var E=this;return(0,p.Z)(function*(){E.pendingWrites++;try{yield f()}finally{E.pendingWrites--}})()}_set(f,E){var B=this;return(0,p.Z)(function*(){return B._withPendingWrite((0,p.Z)(function*(){return yield B._withRetries(Y=>vn(Y,f,E)),B.localCache[f]=E,B.notifyServiceWorker(f)}))})()}_get(f){var E=this;return(0,p.Z)(function*(){const B=yield E._withRetries(Y=>function Ht(m,c){return Qe.apply(this,arguments)}(Y,f));return E.localCache[f]=B,B})()}_remove(f){var E=this;return(0,p.Z)(function*(){return E._withPendingWrite((0,p.Z)(function*(){return yield E._withRetries(B=>Et(B,f)),delete E.localCache[f],E.notifyServiceWorker(f)}))})()}_poll(){var f=this;return(0,p.Z)(function*(){const E=yield f._withRetries(Te=>{const it=Fo(Te,!1).getAll();return new Pr(it).toPromise()});if(!E)return[];if(0!==f.pendingWrites)return[];const B=[],Y=new Set;for(const{fbase_key:Te,value:it}of E)Y.add(Te),JSON.stringify(f.localCache[Te])!==JSON.stringify(it)&&(f.notifyListeners(Te,it),B.push(Te));for(const Te of Object.keys(f.localCache))f.localCache[Te]&&!Y.has(Te)&&(f.notifyListeners(Te,null),B.push(Te));return B})()}notifyListeners(f,E){this.localCache[f]=E;const B=this.listeners[f];if(B)for(const Y of Array.from(B))Y(E)}startPolling(){var f=this;this.stopPolling(),this.pollTimer=setInterval((0,p.Z)(function*(){return f._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(f,E){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[f]||(this.listeners[f]=new Set,this._get(f)),this.listeners[f].add(E)}_removeListener(f,E){this.listeners[f]&&(this.listeners[f].delete(E),0===this.listeners[f].size&&delete this.listeners[f]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return m.type="LOCAL",m})();function Na(m,c){return $n(m,"POST","/v2/accounts/mfaSignIn:start",un(m,c))}function qo(){return(qo=(0,p.Z)(function*(m){return(yield $n(m,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function ru(m){return new Promise((c,f)=>{const E=document.createElement("script");E.setAttribute("src",m),E.onload=c,E.onerror=B=>{const Y=rt("internal-error");Y.customData=B,f(Y)},E.type="text/javascript",E.charset="UTF-8",function pa(){var m,c;return null!==(c=null===(m=document.getElementsByTagName("head"))||void 0===m?void 0:m[0])&&void 0!==c?c:document}().appendChild(E)})}function iu(m){return`__${m}${Math.floor(1e6*Math.random())}`}const So=1e12;class kr{constructor(c){this.auth=c,this.counter=So,this._widgets=new Map}render(c,f){const E=this.counter;return this._widgets.set(E,new Mi(c,this.auth.name,f||{})),this.counter++,E}reset(c){var f;const E=c||So;null===(f=this._widgets.get(E))||void 0===f||f.delete(),this._widgets.delete(E)}getResponse(c){var f;return(null===(f=this._widgets.get(c||So))||void 0===f?void 0:f.getResponse())||""}execute(c){var f=this;return(0,p.Z)(function*(){var E;return null===(E=f._widgets.get(c||So))||void 0===E||E.execute(),""})()}}class Mi{constructor(c,f,E){this.params=E,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const B="string"==typeof c?document.getElementById(c):c;ae(B,"argument-error",{appName:f}),this.container=B,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Pn(m){const c=[],f="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let E=0;E<m;E++)c.push(f.charAt(Math.floor(Math.random()*f.length)));return c.join("")}(50);const{callback:c,"expired-callback":f}=this.params;if(c)try{c(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,f)try{f()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Zo=iu("rcb"),mr=new tn(3e4,6e4);class yi{constructor(){var c;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(c=li().grecaptcha)||void 0===c||!c.render)}load(c,f=""){return ae(function zt(m){return m.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(m)}(f),c,"argument-error"),this.shouldResolveImmediately(f)?Promise.resolve(li().grecaptcha):new Promise((E,B)=>{const Y=li().setTimeout(()=>{B(rt(c,"network-request-failed"))},mr.get());li()[Zo]=()=>{li().clearTimeout(Y),delete li()[Zo];const it=li().grecaptcha;if(!it)return void B(rt(c,"internal-error"));const Pt=it.render;it.render=(an,Ln)=>{const On=Pt(an,Ln);return this.counter++,On},this.hostLanguage=f,E(it)},ru(`https://www.google.com/recaptcha/api.js??${(0,G.xO)({onload:Zo,render:"explicit",hl:f})}`).catch(()=>{clearTimeout(Y),B(rt(c,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(c){var f;return!(null===(f=li().grecaptcha)||void 0===f||!f.render)&&(c===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class na{load(c){return(0,p.Z)(function*(){return new kr(c)})()}clearedOneInstance(){}}const qu="recaptcha",Wa={theme:"light",type:"image"};class gs{constructor(c,f=Object.assign({},Wa),E){this.parameters=f,this.type=qu,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=In(E),this.isInvisible="invisible"===this.parameters.size,ae(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const B="string"==typeof c?document.getElementById(c):c;ae(B,this.auth,"argument-error"),this.container=B,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new na:new yi,this.validateStartingState()}verify(){var c=this;return(0,p.Z)(function*(){c.assertNotDestroyed();const f=yield c.render(),E=c.getAssertedRecaptcha();return E.getResponse(f)||new Promise(Y=>{const Te=it=>{!it||(c.tokenChangeListeners.delete(Te),Y(it))};c.tokenChangeListeners.add(Te),c.isInvisible&&E.execute(f)})})()}render(){try{this.assertNotDestroyed()}catch(c){return Promise.reject(c)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(c=>{throw this.renderPromise=null,c})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(c=>{this.container.removeChild(c)})}validateStartingState(){ae(!this.parameters.sitekey,this.auth,"argument-error"),ae(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),ae(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(c){return f=>{if(this.tokenChangeListeners.forEach(E=>E(f)),"function"==typeof c)c(f);else if("string"==typeof c){const E=li()[c];"function"==typeof E&&E(f)}}}assertNotDestroyed(){ae(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var c=this;return(0,p.Z)(function*(){if(yield c.init(),!c.widgetId){let f=c.container;if(!c.isInvisible){const E=document.createElement("div");f.appendChild(E),f=E}c.widgetId=c.getAssertedRecaptcha().render(f,c.parameters)}return c.widgetId})()}init(){var c=this;return(0,p.Z)(function*(){ae(Ct()&&!To(),c.auth,"internal-error"),yield function Da(){let m=null;return new Promise(c=>{"complete"!==document.readyState?(m=()=>c(),window.addEventListener("load",m)):c()}).catch(c=>{throw m&&window.removeEventListener("load",m),c})}(),c.recaptcha=yield c._recaptchaLoader.load(c.auth,c.auth.languageCode||void 0);const f=yield function no(m){return qo.apply(this,arguments)}(c.auth);ae(f,c.auth,"internal-error"),c.parameters.sitekey=f})()}getAssertedRecaptcha(){return ae(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class ka{constructor(c,f){this.verificationId=c,this.onConfirmation=f}confirm(c){const f=Hr._fromVerification(this.verificationId,c);return this.onConfirmation(f)}}function ma(){return(ma=(0,p.Z)(function*(m,c,f){const E=In(m),B=yield ra(E,c,(0,G.m9)(f));return new ka(B,Y=>Qr(E,Y))})).apply(this,arguments)}function vi(){return(vi=(0,p.Z)(function*(m,c,f){const E=(0,G.m9)(m);yield Wn(!1,E,"phone");const B=yield ra(E.auth,c,(0,G.m9)(f));return new ka(B,Y=>Us(E,Y))})).apply(this,arguments)}function Ca(){return(Ca=(0,p.Z)(function*(m,c,f){const E=(0,G.m9)(m),B=yield ra(E.auth,c,(0,G.m9)(f));return new ka(B,Y=>Oo(E,Y))})).apply(this,arguments)}function ra(m,c,f){return Lo.apply(this,arguments)}function Lo(){return(Lo=(0,p.Z)(function*(m,c,f){var E;const B=yield f.verify();try{let Y;if(ae("string"==typeof B,m,"argument-error"),ae(f.type===qu,m,"argument-error"),Y="string"==typeof c?{phoneNumber:c}:c,"session"in Y){const Te=Y.session;if("phoneNumber"in Y)return ae("enroll"===Te.type,m,"internal-error"),(yield De(m,{idToken:Te.credential,phoneEnrollmentInfo:{phoneNumber:Y.phoneNumber,recaptchaToken:B}})).phoneSessionInfo.sessionInfo;{ae("signin"===Te.type,m,"internal-error");const it=(null===(E=Y.multiFactorHint)||void 0===E?void 0:E.uid)||Y.multiFactorUid;return ae(it,m,"missing-multi-factor-info"),(yield Na(m,{mfaPendingCredential:Te.credential,mfaEnrollmentId:it,phoneSignInInfo:{recaptchaToken:B}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:Te}=yield lt(m,{phoneNumber:Y.phoneNumber,recaptchaToken:B});return Te}}finally{f._reset()}})).apply(this,arguments)}function qe(){return(qe=(0,p.Z)(function*(m,c){yield Ui((0,G.m9)(m),c)})).apply(this,arguments)}let ba=(()=>{class m{constructor(f){this.providerId=m.PROVIDER_ID,this.auth=In(f)}verifyPhoneNumber(f,E){return ra(this.auth,f,(0,G.m9)(E))}static credential(f,E){return Hr._fromVerification(f,E)}static credentialFromResult(f){return m.credentialFromTaggedObject(f)}static credentialFromError(f){return m.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{phoneNumber:E,temporaryProof:B}=f;return E&&B?Hr._fromTokenResponse(E,B):null}}return m.PROVIDER_ID="phone",m.PHONE_SIGN_IN_METHOD="phone",m})();function Ds(m,c){return c?de(c):(ae(m._popupRedirectResolver,m,"argument-error"),m._popupRedirectResolver)}class qa extends Zr{constructor(c){super("custom","custom"),this.params=c}_getIdTokenResponse(c){return ri(c,this._buildIdpRequest())}_linkToIdToken(c,f){return ri(c,this._buildIdpRequest(f))}_getReauthenticationResolver(c){return ri(c,this._buildIdpRequest())}_buildIdpRequest(c){const f={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return c&&(f.idToken=c),f}}function Cs(m){return Qn(m.auth,new qa(m),m.bypassAuthState)}function Vo(m){const{auth:c,user:f}=m;return ae(f,c,"internal-error"),ws(f,new qa(m),m.bypassAuthState)}function _(m){return w.apply(this,arguments)}function w(){return(w=(0,p.Z)(function*(m){const{auth:c,user:f}=m;return ae(f,c,"internal-error"),Ui(f,new qa(m),m.bypassAuthState)})).apply(this,arguments)}class v{constructor(c,f,E,B,Y=!1){this.auth=c,this.resolver=E,this.user=B,this.bypassAuthState=Y,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(f)?f:[f]}execute(){var c=this;return new Promise(function(){var f=(0,p.Z)(function*(E,B){c.pendingPromise={resolve:E,reject:B};try{c.eventManager=yield c.resolver._initialize(c.auth),yield c.onExecution(),c.eventManager.registerConsumer(c)}catch(Y){c.reject(Y)}});return function(E,B){return f.apply(this,arguments)}}())}onAuthEvent(c){var f=this;return(0,p.Z)(function*(){const{urlResponse:E,sessionId:B,postBody:Y,tenantId:Te,error:it,type:Pt}=c;if(it)return void f.reject(it);const an={auth:f.auth,requestUri:E,sessionId:B,tenantId:Te||void 0,postBody:Y||void 0,user:f.user,bypassAuthState:f.bypassAuthState};try{f.resolve(yield f.getIdpTask(Pt)(an))}catch(Ln){f.reject(Ln)}})()}onError(c){this.reject(c)}getIdpTask(c){switch(c){case"signInViaPopup":case"signInViaRedirect":return Cs;case"linkViaPopup":case"linkViaRedirect":return _;case"reauthViaPopup":case"reauthViaRedirect":return Vo;default:he(this.auth,"internal-error")}}resolve(c){ne(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(c),this.unregisterAndCleanUp()}reject(c){ne(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(c),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const b=new tn(2e3,1e4);function z(){return(z=(0,p.Z)(function*(m,c,f){const E=In(m);vt(m,c,Xi);const B=Ds(E,f);return new rn(E,"signInViaPopup",c,B).executeNotNull()})).apply(this,arguments)}function pe(){return(pe=(0,p.Z)(function*(m,c,f){const E=(0,G.m9)(m);vt(E.auth,c,Xi);const B=Ds(E.auth,f);return new rn(E.auth,"reauthViaPopup",c,B,E).executeNotNull()})).apply(this,arguments)}function Rt(){return(Rt=(0,p.Z)(function*(m,c,f){const E=(0,G.m9)(m);vt(E.auth,c,Xi);const B=Ds(E.auth,f);return new rn(E.auth,"linkViaPopup",c,B,E).executeNotNull()})).apply(this,arguments)}let rn=(()=>{class m extends v{constructor(f,E,B,Y,Te){super(f,E,Y,Te),this.provider=B,this.authWindow=null,this.pollId=null,m.currentPopupAction&&m.currentPopupAction.cancel(),m.currentPopupAction=this}executeNotNull(){var f=this;return(0,p.Z)(function*(){const E=yield f.execute();return ae(E,f.auth,"internal-error"),E})()}onExecution(){var f=this;return(0,p.Z)(function*(){ne(1===f.filter.length,"Popup operations only handle one event");const E=ho();f.authWindow=yield f.resolver._openPopup(f.auth,f.provider,f.filter[0],E),f.authWindow.associatedEvent=E,f.resolver._originValidation(f.auth).catch(B=>{f.reject(B)}),f.resolver._isIframeWebStorageSupported(f.auth,B=>{B||f.reject(rt(f.auth,"web-storage-unsupported"))}),f.pollUserCancellation()})()}get eventId(){var f;return(null===(f=this.authWindow)||void 0===f?void 0:f.associatedEvent)||null}cancel(){this.reject(rt(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,m.currentPopupAction=null}pollUserCancellation(){const f=()=>{var E,B;this.pollId=null!==(B=null===(E=this.authWindow)||void 0===E?void 0:E.window)&&void 0!==B&&B.closed?window.setTimeout(()=>{this.pollId=null,this.reject(rt(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(f,b.get())};f()}}return m.currentPopupAction=null,m})();const Cn=new Map;class Kn extends v{constructor(c,f,E=!1){super(c,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],f,void 0,E),this.eventId=null}execute(){var c=()=>super.execute,f=this;return(0,p.Z)(function*(){let E=Cn.get(f.auth._key());if(!E){try{const Y=(yield function po(m,c){return Zi.apply(this,arguments)}(f.resolver,f.auth))?yield c().call(f):null;E=()=>Promise.resolve(Y)}catch(B){E=()=>Promise.reject(B)}Cn.set(f.auth._key(),E)}return f.bypassAuthState||Cn.set(f.auth._key(),()=>Promise.resolve(null)),E()})()}onAuthEvent(c){var f=()=>super.onAuthEvent,E=this;return(0,p.Z)(function*(){if("signInViaRedirect"===c.type)return f().call(E,c);if("unknown"!==c.type){if(c.eventId){const B=yield E.auth._redirectUserForId(c.eventId);if(B)return E.user=B,f().call(E,c);E.resolve(null)}}else E.resolve(null)})()}onExecution(){return(0,p.Z)(function*(){})()}cleanUp(){}}function Zi(){return(Zi=(0,p.Z)(function*(m,c){const f=Fi(c),E=go(m);if(!(yield E._isAvailable()))return!1;const B="true"===(yield E._get(f));return yield E._remove(f),B})).apply(this,arguments)}function hi(m,c){return Ko.apply(this,arguments)}function Ko(){return(Ko=(0,p.Z)(function*(m,c){return go(m)._set(Fi(c),"true")})).apply(this,arguments)}function Fa(m,c){Cn.set(m._key(),c)}function go(m){return de(m._redirectPersistence)}function Fi(m){return cr("pendingRedirect",m.config.apiKey,m.name)}function M(){return(M=(0,p.Z)(function*(m,c,f){const E=In(m);vt(m,c,Xi);const B=Ds(E,f);return yield hi(B,E),B._openRedirect(E,c,"signInViaRedirect")})).apply(this,arguments)}function ie(){return(ie=(0,p.Z)(function*(m,c,f){const E=(0,G.m9)(m);vt(E.auth,c,Xi);const B=Ds(E.auth,f);yield hi(B,E.auth);const Y=yield wn(E);return B._openRedirect(E.auth,c,"reauthViaRedirect",Y)})).apply(this,arguments)}function It(){return(It=(0,p.Z)(function*(m,c,f){const E=(0,G.m9)(m);vt(E.auth,c,Xi);const B=Ds(E.auth,f);yield Wn(!1,E,c.providerId),yield hi(B,E.auth);const Y=yield wn(E);return B._openRedirect(E.auth,c,"linkViaRedirect",Y)})).apply(this,arguments)}function _n(){return(_n=(0,p.Z)(function*(m,c){return yield In(m)._initializationPromise,Tn(m,c,!1)})).apply(this,arguments)}function Tn(m,c){return Fn.apply(this,arguments)}function Fn(){return(Fn=(0,p.Z)(function*(m,c,f=!1){const E=In(m),B=Ds(E,c),Te=yield new Kn(E,B,f).execute();return Te&&!f&&(delete Te.user._redirectEventId,yield E._persistUserIfCurrent(Te.user),yield E._setRedirectUser(null,c)),Te})).apply(this,arguments)}function wn(m){return Xr.apply(this,arguments)}function Xr(){return(Xr=(0,p.Z)(function*(m){const c=ho(`${m.uid}:::`);return m._redirectEventId=c,yield m.auth._setRedirectUser(m),yield m.auth._persistUserIfCurrent(m),c})).apply(this,arguments)}class ia{constructor(c){this.auth=c,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(c){this.consumers.add(c),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,c)&&(this.sendToConsumer(this.queuedRedirectEvent,c),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(c){this.consumers.delete(c)}onEvent(c){if(this.hasEventBeenHandled(c))return!1;let f=!1;return this.consumers.forEach(E=>{this.isEventForConsumer(c,E)&&(f=!0,this.sendToConsumer(c,E),this.saveEventToCache(c))}),this.hasHandledPotentialRedirect||!function Va(m){switch(m.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Uo(m);default:return!1}}(c)||(this.hasHandledPotentialRedirect=!0,f||(this.queuedRedirectEvent=c,f=!0)),f}sendToConsumer(c,f){var E;if(c.error&&!Uo(c)){const B=(null===(E=c.error.code)||void 0===E?void 0:E.split("auth/")[1])||"internal-error";f.onError(rt(this.auth,B))}else f.onAuthEvent(c)}isEventForConsumer(c,f){const E=null===f.eventId||!!c.eventId&&c.eventId===f.eventId;return f.filter.includes(c.type)&&E}hasEventBeenHandled(c){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(La(c))}saveEventToCache(c){this.cachedEventUids.add(La(c)),this.lastProcessedEventTime=Date.now()}}function La(m){return[m.type,m.eventId,m.sessionId,m.tenantId].filter(c=>c).join("-")}function Uo({type:m,error:c}){return"unknown"===m&&"auth/no-auth-event"===c?.code}function Yo(m){return Ua.apply(this,arguments)}function Ua(){return(Ua=(0,p.Z)(function*(m,c={}){return $n(m,"GET","/v1/projects",c)})).apply(this,arguments)}const Za=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ya=/^https?/;function zc(){return(zc=(0,p.Z)(function*(m){if(m.config.emulator)return;const{authorizedDomains:c}=yield Yo(m);for(const f of c)try{if($f(f))return}catch{}he(m,"unauthorized-domain")})).apply(this,arguments)}function $f(m){const c=wt(),{protocol:f,hostname:E}=new URL(c);if(m.startsWith("chrome-extension://")){const Te=new URL(m);return""===Te.hostname&&""===E?"chrome-extension:"===f&&m.replace("chrome-extension://","")===c.replace("chrome-extension://",""):"chrome-extension:"===f&&Te.hostname===E}if(!ya.test(f))return!1;if(Za.test(m))return E===m;const B=m.replace(/\./g,"\\.");return new RegExp("^(.+\\."+B+"|"+B+")$","i").test(E)}const Hf=new tn(3e4,6e4);function Wc(){const m=li().___jsl;if(m?.H)for(const c of Object.keys(m.H))if(m.H[c].r=m.H[c].r||[],m.H[c].L=m.H[c].L||[],m.H[c].r=[...m.H[c].L],m.CP)for(let f=0;f<m.CP.length;f++)m.CP[f]=null}let bs=null;function Jd(m){return bs=bs||function wl(m){return new Promise((c,f)=>{var E,B,Y;function Te(){Wc(),gapi.load("gapi.iframes",{callback:()=>{c(gapi.iframes.getContext())},ontimeout:()=>{Wc(),f(rt(m,"network-request-failed"))},timeout:Hf.get()})}if(null!==(B=null===(E=li().gapi)||void 0===E?void 0:E.iframes)&&void 0!==B&&B.Iframe)c(gapi.iframes.getContext());else{if(null===(Y=li().gapi)||void 0===Y||!Y.load){const it=iu("iframefcb");return li()[it]=()=>{gapi.load?Te():f(rt(m,"network-request-failed"))},ru(`https://apis.google.com/js/api.js?onload=${it}`).catch(Pt=>f(Pt))}Te()}}).catch(c=>{throw bs=null,c})}(m),bs}const Ci=new tn(5e3,15e3),Ku={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Zc=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function El(m){const c=m.config;ae(c.authDomain,m,"auth-domain-config-required");const f=c.emulator?Kt(c,"emulator/auth/iframe"):`https://${m.config.authDomain}/__/auth/iframe`,E={apiKey:c.apiKey,appName:m.name,v:be.SDK_VERSION},B=Zc.get(m.config.apiHost);B&&(E.eid=B);const Y=m._getFrameworks();return Y.length&&(E.fw=Y.join(",")),`${f}?${(0,G.xO)(E).slice(1)}`}function Ka(){return Ka=(0,p.Z)(function*(m){const c=yield Jd(m),f=li().gapi;return ae(f,m,"internal-error"),c.open({where:document.body,url:El(m),messageHandlersFilter:f.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Ku,dontclear:!0},E=>new Promise(function(){var B=(0,p.Z)(function*(Y,Te){yield E.restyle({setHideOnLeave:!1});const it=rt(m,"network-request-failed"),Pt=li().setTimeout(()=>{Te(it)},Ci.get());function an(){li().clearTimeout(Pt),Y(E)}E.ping(an).then(an,()=>{Te(it)})});return function(Y,Te){return B.apply(this,arguments)}}()))}),Ka.apply(this,arguments)}const ac={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Dl{constructor(c){this.window=c,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function lc(m,c,f,E,B,Y){ae(m.config.authDomain,m,"auth-domain-config-required"),ae(m.config.apiKey,m,"invalid-api-key");const Te={apiKey:m.config.apiKey,appName:m.name,authType:f,redirectUrl:E,v:be.SDK_VERSION,eventId:B};if(c instanceof Xi){c.setDefaultLanguage(m.languageCode),Te.providerId=c.providerId||"",(0,G.xb)(c.getCustomParameters())||(Te.customParameters=JSON.stringify(c.getCustomParameters()));for(const[Pt,an]of Object.entries(Y||{}))Te[Pt]=an}if(c instanceof ki){const Pt=c.getScopes().filter(an=>""!==an);Pt.length>0&&(Te.scopes=Pt.join(","))}m.tenantId&&(Te.tid=m.tenantId);const it=Te;for(const Pt of Object.keys(it))void 0===it[Pt]&&delete it[Pt];return`${function uu({config:m}){return m.emulator?Kt(m,"emulator/auth/handler"):`https://${m.authDomain}/__/auth/handler`}(m)}?${(0,G.xO)(it).slice(1)}`}const lu="webStorageSupport";class ro extends class nh{constructor(c){this.factorId=c}_process(c,f,E){switch(f.type){case"enroll":return this._finalizeEnroll(c,f.credential,E);case"signin":return this._finalizeSignIn(c,f.credential);default:return Fe("unexpected MultiFactorSessionType")}}}{constructor(c){super("phone"),this.credential=c}static _fromCredential(c){return new ro(c)}_finalizeEnroll(c,f,E){return function je(m,c){return $n(m,"POST","/v2/accounts/mfaEnrollment:finalize",un(m,c))}(c,{idToken:f,displayName:E,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(c,f){return function Pa(m,c){return $n(m,"POST","/v2/accounts/mfaSignIn:finalize",un(m,c))}(c,{mfaPendingCredential:f,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Yu=(()=>{class m{constructor(){}static assertion(f){return ro._fromCredential(f)}}return m.FACTOR_ID="phone",m})();var Mu="@firebase/auth";class ih{constructor(c){this.auth=c,this.internalListeners=new Map}getUid(){var c;return this.assertAuthConfigured(),(null===(c=this.auth.currentUser)||void 0===c?void 0:c.uid)||null}getToken(c){var f=this;return(0,p.Z)(function*(){return f.assertAuthConfigured(),yield f.auth._initializationPromise,f.auth.currentUser?{accessToken:yield f.auth.currentUser.getIdToken(c)}:null})()}addAuthTokenListener(c){if(this.assertAuthConfigured(),this.internalListeners.has(c))return;const f=this.auth.onIdTokenChanged(E=>{var B;c((null===(B=E)||void 0===B?void 0:B.stsTokenManager.accessToken)||null)});this.internalListeners.set(c,f),this.updateProactiveRefresh()}removeAuthTokenListener(c){this.assertAuthConfigured();const f=this.internalListeners.get(c);!f||(this.internalListeners.delete(c),f(),this.updateProactiveRefresh())}assertAuthConfigured(){ae(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Ts(){return window}function hc(){return(hc=(0,p.Z)(function*(m,c,f){var E;const{BuildInfo:B}=Ts();ne(c.sessionId,"AuthEvent did not contain a session ID");const Y=yield Xc(c.sessionId),Te={};return re()?Te.ibi=B.packageName:Dr()?Te.apn=B.packageName:he(m,"operation-not-supported-in-this-environment"),B.displayName&&(Te.appDisplayName=B.displayName),Te.sessionId=Y,lc(m,f,c.type,void 0,null!==(E=c.eventId)&&void 0!==E?E:void 0,Te)})).apply(this,arguments)}function cu(){return(cu=(0,p.Z)(function*(m){const{BuildInfo:c}=Ts(),f={};re()?f.iosBundleId=c.packageName:Dr()?f.androidPackageName=c.packageName:he(m,"operation-not-supported-in-this-environment"),yield Yo(m,f)})).apply(this,arguments)}function Ru(){return(Ru=(0,p.Z)(function*(m,c,f){const{cordova:E}=Ts();let B=()=>{};try{yield new Promise((Y,Te)=>{let it=null;function Pt(){var On;Y();const is=null===(On=E.plugins.browsertab)||void 0===On?void 0:On.close;"function"==typeof is&&is(),"function"==typeof f?.close&&f.close()}function an(){it||(it=window.setTimeout(()=>{Te(rt(m,"redirect-cancelled-by-user"))},2e3))}function Ln(){"visible"===document?.visibilityState&&an()}c.addPassiveListener(Pt),document.addEventListener("resume",an,!1),Dr()&&document.addEventListener("visibilitychange",Ln,!1),B=()=>{c.removePassiveListener(Pt),document.removeEventListener("resume",an,!1),document.removeEventListener("visibilitychange",Ln,!1),it&&window.clearTimeout(it)}})}finally{B()}})).apply(this,arguments)}function Xc(m){return bl.apply(this,arguments)}function bl(){return(bl=(0,p.Z)(function*(m){const c=ed(m),f=yield crypto.subtle.digest("SHA-256",c);return Array.from(new Uint8Array(f)).map(B=>B.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function ed(m){if(ne(/[0-9a-zA-Z]+/.test(m),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(m);const c=new ArrayBuffer(m.length),f=new Uint8Array(c);for(let E=0;E<m.length;E++)f[E]=m.charCodeAt(E);return f}!function oh(m){(0,be._registerComponent)(new Re.wA("auth",(c,{options:f})=>{const E=c.getProvider("app").getImmediate(),B=c.getProvider("heartbeat"),{apiKey:Y,authDomain:Te}=E.options;return((it,Pt)=>{ae(Y&&!Y.includes(":"),"invalid-api-key",{appName:it.name}),ae(!Te?.includes(":"),"argument-error",{appName:it.name});const an={apiKey:Y,authDomain:Te,clientPlatform:m,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:hr(m)},Ln=new mn(it,Pt,an);return function dt(m,c){const f=c?.persistence||[],E=(Array.isArray(f)?f:[f]).map(de);c?.errorMap&&m._updateErrorMap(c.errorMap),m._initializeWithPersistence(E,c?.popupRedirectResolver)}(Ln,f),Ln})(E,B)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((c,f,E)=>{c.getProvider("auth-internal").initialize()})),(0,be._registerComponent)(new Re.wA("auth-internal",c=>{const f=In(c.getProvider("auth").getImmediate());return new ih(f)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,be.registerVersion)(Mu,"0.20.6",function sh(m){switch(m){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(m)),(0,be.registerVersion)(Mu,"0.20.6","esm2017")}("Browser");class xg extends ia{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(c=>{this.resolveInialized=c})}addPassiveListener(c){this.passiveListeners.add(c)}removePassiveListener(c){this.passiveListeners.delete(c)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(c){return this.resolveInialized(),this.passiveListeners.forEach(f=>f(c)),super.onEvent(c)}initialized(){var c=this;return(0,p.Z)(function*(){yield c.initPromise})()}}function Ba(m){return td.apply(this,arguments)}function td(){return(td=(0,p.Z)(function*(m){const c=yield hu()._get(pc(m));return c&&(yield hu()._remove(pc(m))),c})).apply(this,arguments)}function nd(){const m=[],c="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let f=0;f<20;f++){const E=Math.floor(Math.random()*c.length);m.push(c.charAt(E))}return m.join("")}function hu(){return de(ui)}function pc(m){return cr("authEvent",m.config.apiKey,m.name)}function Sl(m){if(!m?.includes("?"))return{};const[c,...f]=m.split("?");return(0,G.zd)(f.join("?"))}function Al(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:rt("no-auth-event")}}function Ou(){var m;return(null===(m=self?.location)||void 0===m?void 0:m.protocol)||null}function ja(m=(0,G.z$)()){return!("file:"!==Ou()&&"ionic:"!==Ou()&&"capacitor:"!==Ou()||!m.toLowerCase().match(/iphone|ipad|ipod|android/))}function id(){try{const m=self.localStorage,c=ho();if(m)return m.setItem(c,"1"),m.removeItem(c),!function Ml(m=(0,G.z$)()){return function lh(){return(0,G.w1)()&&11===document?.documentMode}()||function ch(m=(0,G.z$)()){return/Edge\/\d+/.test(m)}(m)}()||(0,G.hl)()}catch{return Nu()&&(0,G.hl)()}return!1}function Nu(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Yi(){return(function Xu(){return"http:"===Ou()||"https:"===Ou()}()||(0,G.ru)()||ja())&&!function uh(){return(0,G.b$)()||(0,G.UG)()}()&&id()&&!Nu()}function Tr(){return ja()&&typeof document<"u"}function Rl(){return(Rl=(0,p.Z)(function*(){return!!Tr()&&new Promise(m=>{const c=setTimeout(()=>{m(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(c),m(!0)})})})).apply(this,arguments)}const Qo={LOCAL:"local",NONE:"none",SESSION:"session"},Gs=ae,Ol="persistence";function yc(m){return Jo.apply(this,arguments)}function Jo(){return(Jo=(0,p.Z)(function*(m){yield m._initializationPromise;const c=Pu(),f=cr(Ol,m.config.apiKey,m.name);c&&c.setItem(f,m._getPersistence())})).apply(this,arguments)}function Pu(){var m;try{return(null===(m=function fu(){return typeof window<"u"?window:null}())||void 0===m?void 0:m.sessionStorage)||null}catch{return null}}const ku=ae;class pu{constructor(){this.browserResolver=de(class zf{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Hi,this._completeRedirectFn=Tn,this._overrideRedirectResult=Fa}_openPopup(c,f,E,B){var Y=this;return(0,p.Z)(function*(){var Te;ne(null===(Te=Y.eventManagers[c._key()])||void 0===Te?void 0:Te.manager,"_initialize() not called before _openPopup()");const it=lc(c,f,E,wt(),B);return function uc(m,c,f,E=500,B=600){const Y=Math.max((window.screen.availHeight-B)/2,0).toString(),Te=Math.max((window.screen.availWidth-E)/2,0).toString();let it="";const Pt=Object.assign(Object.assign({},ac),{width:E.toString(),height:B.toString(),top:Y,left:Te}),an=(0,G.z$)().toLowerCase();f&&(it=qr(an)?"_blank":f),Jn(an)&&(c=c||"http://localhost",Pt.scrollbars="yes");const Ln=Object.entries(Pt).reduce((is,[sa,kl])=>`${is}${sa}=${kl},`,"");if(function at(m=(0,G.z$)()){var c;return re(m)&&!(null===(c=window.navigator)||void 0===c||!c.standalone)}(an)&&"_self"!==it)return function Xd(m,c){const f=document.createElement("a");f.href=m,f.target=c;const E=document.createEvent("MouseEvent");E.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),f.dispatchEvent(E)}(c||"",it),new Dl(null);const On=window.open(c||"",it,Ln);ae(On,m,"popup-blocked");try{On.focus()}catch{}return new Dl(On)}(c,it,ho())})()}_openRedirect(c,f,E,B){var Y=this;return(0,p.Z)(function*(){return yield Y._originValidation(c),function ns(m){li().location.href=m}(lc(c,f,E,wt(),B)),new Promise(()=>{})})()}_initialize(c){const f=c._key();if(this.eventManagers[f]){const{manager:B,promise:Y}=this.eventManagers[f];return B?Promise.resolve(B):(ne(Y,"If manager is not set, promise should be"),Y)}const E=this.initAndGetManager(c);return this.eventManagers[f]={promise:E},E.catch(()=>{delete this.eventManagers[f]}),E}initAndGetManager(c){var f=this;return(0,p.Z)(function*(){const E=yield function Il(m){return Ka.apply(this,arguments)}(c),B=new ia(c);return E.register("authEvent",Y=>(ae(Y?.authEvent,c,"invalid-auth-event"),{status:B.onEvent(Y.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),f.eventManagers[c._key()]={manager:B},f.iframes[c._key()]=E,B})()}_isIframeWebStorageSupported(c,f){this.iframes[c._key()].send(lu,{type:lu},B=>{var Y;const Te=null===(Y=B?.[0])||void 0===Y?void 0:Y[lu];void 0!==Te&&f(!!Te),he(c,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(c){const f=c._key();return this.originValidationPromises[f]||(this.originValidationPromises[f]=function au(m){return zc.apply(this,arguments)}(c)),this.originValidationPromises[f]}get _shouldInitProactively(){return pn()||kn()||re()}}),this.cordovaResolver=de(class Ki{constructor(){this._redirectPersistence=Hi,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Tn,this._overrideRedirectResult=Fa}_initialize(c){var f=this;return(0,p.Z)(function*(){const E=c._key();let B=f.eventManagers.get(E);return B||(B=new xg(c),f.eventManagers.set(E,B),f.attachCallbackListeners(c,B)),B})()}_openPopup(c){he(c,"operation-not-supported-in-this-environment")}_openRedirect(c,f,E,B){var Y=this;return(0,p.Z)(function*(){!function Jc(m){var c,f,E,B,Y,Te,it,Pt,an,Ln;const On=Ts();ae("function"==typeof(null===(c=On?.universalLinks)||void 0===c?void 0:c.subscribe),m,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),ae(typeof(null===(f=On?.BuildInfo)||void 0===f?void 0:f.packageName)<"u",m,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),ae("function"==typeof(null===(Y=null===(B=null===(E=On?.cordova)||void 0===E?void 0:E.plugins)||void 0===B?void 0:B.browsertab)||void 0===Y?void 0:Y.openUrl),m,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),ae("function"==typeof(null===(Pt=null===(it=null===(Te=On?.cordova)||void 0===Te?void 0:Te.plugins)||void 0===it?void 0:it.browsertab)||void 0===Pt?void 0:Pt.isAvailable),m,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),ae("function"==typeof(null===(Ln=null===(an=On?.cordova)||void 0===an?void 0:an.InAppBrowser)||void 0===Ln?void 0:Ln.open),m,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(c);const Te=yield Y._initialize(c);yield Te.initialized(),Te.resetRedirect(),function _i(){Cn.clear()}(),yield Y._originValidation(c);const it=function fc(m,c,f=null){return{type:c,eventId:f,urlResponse:null,sessionId:nd(),postBody:null,tenantId:m.tenantId,error:rt(m,"no-auth-event")}}(c,E,B);yield function du(m,c){return hu()._set(pc(m),c)}(c,it);const Pt=yield function Cl(m,c,f){return hc.apply(this,arguments)}(c,it,f),an=yield function Qc(m){const{cordova:c}=Ts();return new Promise(f=>{c.plugins.browsertab.isAvailable(E=>{let B=null;E?c.plugins.browsertab.openUrl(m):B=c.InAppBrowser.open(m,function Le(m=(0,G.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(m)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(m)}()?"_blank":"_system","location=yes"),f(B)})})}(Pt);return function Ta(m,c,f){return Ru.apply(this,arguments)}(c,Te,an)})()}_isIframeWebStorageSupported(c,f){throw new Error("Method not implemented.")}_originValidation(c){const f=c._key();return this.originValidationPromises[f]||(this.originValidationPromises[f]=function Yc(m){return cu.apply(this,arguments)}(c)),this.originValidationPromises[f]}attachCallbackListeners(c,f){const{universalLinks:E,handleOpenURL:B,BuildInfo:Y}=Ts(),Te=setTimeout((0,p.Z)(function*(){yield Ba(c),f.onEvent(Al())}),500),it=function(){var Ln=(0,p.Z)(function*(On){clearTimeout(Te);const is=yield Ba(c);let sa=null;is&&On?.url&&(sa=function Qu(m,c){var f,E;const B=function Tl(m){const c=Sl(m),f=c.link?decodeURIComponent(c.link):void 0,E=Sl(f).link,B=c.deep_link_id?decodeURIComponent(c.deep_link_id):void 0;return Sl(B).link||B||E||f||m}(c);if(B.includes("/__/auth/callback")){const Y=Sl(B),Te=Y.firebaseError?function ah(m){try{return JSON.parse(m)}catch{return null}}(decodeURIComponent(Y.firebaseError)):null,it=null===(E=null===(f=Te?.code)||void 0===f?void 0:f.split("auth/"))||void 0===E?void 0:E[1],Pt=it?rt(it):null;return Pt?{type:m.type,eventId:m.eventId,tenantId:m.tenantId,error:Pt,urlResponse:null,sessionId:null,postBody:null}:{type:m.type,eventId:m.eventId,tenantId:m.tenantId,sessionId:m.sessionId,urlResponse:B,postBody:null}}return null}(is,On.url)),f.onEvent(sa||Al())});return function(is){return Ln.apply(this,arguments)}}();typeof E<"u"&&"function"==typeof E.subscribe&&E.subscribe(null,it);const Pt=B,an=`${Y.packageName.toLowerCase()}://`;Ts().handleOpenURL=function(){var Ln=(0,p.Z)(function*(On){if(On.toLowerCase().startsWith(an)&&it({url:On}),"function"==typeof Pt)try{Pt(On)}catch(is){console.error(is)}});return function(On){return Ln.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=Hi,this._completeRedirectFn=Tn,this._overrideRedirectResult=Fa}_initialize(c){var f=this;return(0,p.Z)(function*(){return yield f.selectUnderlyingResolver(),f.assertedUnderlyingResolver._initialize(c)})()}_openPopup(c,f,E,B){var Y=this;return(0,p.Z)(function*(){return yield Y.selectUnderlyingResolver(),Y.assertedUnderlyingResolver._openPopup(c,f,E,B)})()}_openRedirect(c,f,E,B){var Y=this;return(0,p.Z)(function*(){return yield Y.selectUnderlyingResolver(),Y.assertedUnderlyingResolver._openRedirect(c,f,E,B)})()}_isIframeWebStorageSupported(c,f){this.assertedUnderlyingResolver._isIframeWebStorageSupported(c,f)}_originValidation(c){return this.assertedUnderlyingResolver._originValidation(c)}get _shouldInitProactively(){return Tr()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return ku(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var c=this;return(0,p.Z)(function*(){if(c.underlyingResolver)return;const f=yield function sd(){return Rl.apply(this,arguments)}();c.underlyingResolver=f?c.cordovaResolver:c.browserResolver})()}}function tr(m){return m.unwrap()}function _c(m){return Ya(m)}function Ya(m){const{_tokenResponse:c}=m instanceof G.ZR?m.customData:m;if(!c)return null;if(!(m instanceof G.ZR)&&"temporaryProof"in c&&"phoneNumber"in c)return ba.credentialFromResult(m);const f=c.providerId;if(!f||"password"===f)return null;let E;switch(f){case"google.com":E=cs;break;case"facebook.com":E=Fs;break;case"github.com":E=Ls;break;case"twitter.com":E=Vi;break;default:const{oauthIdToken:B,oauthAccessToken:Y,oauthTokenSecret:Te,pendingToken:it,nonce:Pt}=c;return Y||Te||B||it?it?f.startsWith("saml.")?Vs._create(f,it):Ve._fromParams({providerId:f,signInMethod:f,pendingToken:it,idToken:B,accessToken:Y}):new ls(f).credential({idToken:B,accessToken:Y,rawNonce:Pt}):null}return m instanceof G.ZR?E.credentialFromError(m):E.credentialFromResult(m)}function rs(m,c){return c.catch(f=>{throw f instanceof G.ZR&&function Fu(m,c){var f,E;const B=null===(f=c.customData)||void 0===f?void 0:f._tokenResponse;if("auth/multi-factor-auth-required"===(null===(E=c)||void 0===E?void 0:E.code))c.resolver=new dh(m,function J(m,c){var f;const E=(0,G.m9)(m),B=c;return ae(c.customData.operationType,E,"argument-error"),ae(null===(f=B.customData._serverResponse)||void 0===f?void 0:f.mfaPendingCredential,E,"argument-error"),j._fromError(E,B)}(m,c));else if(B){const Y=Ya(c),Te=c;Y&&(Te.credential=Y,Te.tenantId=B.tenantId||void 0,Te.email=B.email||void 0,Te.phoneNumber=B.phoneNumber||void 0)}}(m,f),f}).then(f=>{const B=f.user;return{operationType:f.operationType,credential:_c(f),additionalUserInfo:Zn(f),user:Qa.getOrCreate(B)}})}function Nl(m,c){return el.apply(this,arguments)}function el(){return(el=(0,p.Z)(function*(m,c){const f=yield c;return{verificationId:f.verificationId,confirm:E=>rs(m,f.confirm(E))}})).apply(this,arguments)}class dh{constructor(c,f){this.resolver=f,this.auth=function vc(m){return m.wrapped()}(c)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(c){return rs(tr(this.auth),this.resolver.resolveSignIn(c))}}class Qa{constructor(c){this._delegate=c,this.multiFactor=function An(m){const c=(0,G.m9)(m);return Ut.has(c)||Ut.set(c,sn._fromUser(c)),Ut.get(c)}(c)}static getOrCreate(c){return Qa.USER_MAP.has(c)||Qa.USER_MAP.set(c,new Qa(c)),Qa.USER_MAP.get(c)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(c){return this._delegate.getIdTokenResult(c)}getIdToken(c){return this._delegate.getIdToken(c)}linkAndRetrieveDataWithCredential(c){return this.linkWithCredential(c)}linkWithCredential(c){var f=this;return(0,p.Z)(function*(){return rs(f.auth,Us(f._delegate,c))})()}linkWithPhoneNumber(c,f){var E=this;return(0,p.Z)(function*(){return Nl(E.auth,function fo(m,c,f){return vi.apply(this,arguments)}(E._delegate,c,f))})()}linkWithPopup(c){var f=this;return(0,p.Z)(function*(){return rs(f.auth,function et(m,c,f){return Rt.apply(this,arguments)}(f._delegate,c,pu))})()}linkWithRedirect(c){var f=this;return(0,p.Z)(function*(){return yield yc(In(f.auth)),function Pe(m,c,f){return function Ye(m,c,f){return It.apply(this,arguments)}(m,c,f)}(f._delegate,c,pu)})()}reauthenticateAndRetrieveDataWithCredential(c){return this.reauthenticateWithCredential(c)}reauthenticateWithCredential(c){var f=this;return(0,p.Z)(function*(){return rs(f.auth,Oo(f._delegate,c))})()}reauthenticateWithPhoneNumber(c,f){return Nl(this.auth,function ou(m,c,f){return Ca.apply(this,arguments)}(this._delegate,c,f))}reauthenticateWithPopup(c){return rs(this.auth,function te(m,c,f){return pe.apply(this,arguments)}(this._delegate,c,pu))}reauthenticateWithRedirect(c){var f=this;return(0,p.Z)(function*(){return yield yc(In(f.auth)),function k(m,c,f){return function W(m,c,f){return ie.apply(this,arguments)}(m,c,f)}(f._delegate,c,pu)})()}sendEmailVerification(c){return function zo(m,c){return co.apply(this,arguments)}(this._delegate,c)}unlink(c){var f=this;return(0,p.Z)(function*(){return yield function si(m,c){return es.apply(this,arguments)}(f._delegate,c),f})()}updateEmail(c){return function S(m,c){return R((0,G.m9)(m),c,null)}(this._delegate,c)}updatePassword(c){return function $(m,c){return R((0,G.m9)(m),null,c)}(this._delegate,c)}updatePhoneNumber(c){return function Zu(m,c){return qe.apply(this,arguments)}(this._delegate,c)}updateProfile(c){return function Rs(m,c){return ha.apply(this,arguments)}(this._delegate,c)}verifyBeforeUpdateEmail(c,f){return function Ea(m,c,f){return Rr.apply(this,arguments)}(this._delegate,c,f)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Qa.USER_MAP=new WeakMap;const Lu=ae;let gu=(()=>{class m{constructor(f,E){if(this.app=f,E.isInitialized())return this._delegate=E.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:B}=f.options;Lu(B,"invalid-api-key",{appName:f.name}),Lu(B,"invalid-api-key",{appName:f.name});const Y=typeof window<"u"?pu:void 0;this._delegate=E.initialize({options:{persistence:qf(B,f.name),popupRedirectResolver:Y}}),this._delegate._updateErrorMap(Ze),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Qa.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(f){this._delegate.languageCode=f}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(f){this._delegate.tenantId=f}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(f,E){!function ms(m,c,f){const E=In(m);ae(E._canInitEmulator,E,"emulator-config-failed"),ae(/^https?:\/\//.test(c),E,"invalid-emulator-scheme");const B=!!f?.disableWarnings,Y=Li(c),{host:Te,port:it}=function Fr(m){const c=Li(m),f=/(\/\/)?([^?#/]+)/.exec(m.substr(c.length));if(!f)return{host:"",port:null};const E=f[2].split("@").pop()||"",B=/^(\[[^\]]+\])(:|$)/.exec(E);if(B){const Y=B[1];return{host:Y,port:Ns(E.substr(Y.length+1))}}{const[Y,Te]=E.split(":");return{host:Y,port:Ns(Te)}}}(c);E.config.emulator={url:`${Y}//${Te}${null===it?"":`:${it}`}/`},E.settings.appVerificationDisabledForTesting=!0,E.emulatorConfig=Object.freeze({host:Te,port:it,protocol:Y.replace(":",""),options:Object.freeze({disableWarnings:B})}),B||function as(){function m(){const c=document.createElement("p"),f=c.style;c.innerText="Running in emulator mode. Do not use with production credentials.",f.position="fixed",f.width="100%",f.backgroundColor="#ffffff",f.border=".1em solid #000000",f.color="#b50000",f.bottom="0px",f.left="0px",f.margin="0px",f.zIndex="10000",f.textAlign="center",c.classList.add("firebase-emulator-warning"),document.body.appendChild(c)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",m):m())}()}(this._delegate,f,E)}applyActionCode(f){return function hs(m,c){return Io.apply(this,arguments)}(this._delegate,f)}checkActionCode(f){return js(this._delegate,f)}confirmPasswordReset(f,E){return function ts(m,c,f){return Is.apply(this,arguments)}(this._delegate,f,E)}createUserWithEmailAndPassword(f,E){var B=this;return(0,p.Z)(function*(){return rs(B._delegate,function N(m,c,f){return A.apply(this,arguments)}(B._delegate,f,E))})()}fetchProvidersForEmail(f){return this.fetchSignInMethodsForEmail(f)}fetchSignInMethodsForEmail(f){return function Xs(m,c){return ko.apply(this,arguments)}(this._delegate,f)}isSignInWithEmailLink(f){return function dr(m,c){return"EMAIL_SIGNIN"===vs.parseLink(c)?.operation}(0,f)}getRedirectResult(){var f=this;return(0,p.Z)(function*(){Lu(Yi(),f._delegate,"operation-not-supported-in-this-environment");const E=yield function Nt(m,c){return _n.apply(this,arguments)}(f._delegate,pu);return E?rs(f._delegate,Promise.resolve(E)):{credential:null,user:null}})()}addFrameworkForLogging(f){!function Ss(m,c){In(m)._logFramework(c)}(this._delegate,f)}onAuthStateChanged(f,E,B){const{next:Y,error:Te,complete:it}=hh(f,E,B);return this._delegate.onAuthStateChanged(Y,Te,it)}onIdTokenChanged(f,E,B){const{next:Y,error:Te,complete:it}=hh(f,E,B);return this._delegate.onIdTokenChanged(Y,Te,it)}sendSignInLinkToEmail(f,E){return function Xe(m,c,f){return nn.apply(this,arguments)}(this._delegate,f,E)}sendPasswordResetEmail(f,E){return function Po(m,c,f){return Ur.apply(this,arguments)}(this._delegate,f,E||void 0)}setPersistence(f){var E=this;return(0,p.Z)(function*(){let B;switch(function mc(m,c){Gs(Object.values(Qo).includes(c),m,"invalid-persistence-type"),(0,G.b$)()?Gs(c!==Qo.SESSION,m,"unsupported-persistence-type"):(0,G.UG)()?Gs(c===Qo.NONE,m,"unsupported-persistence-type"):Nu()?Gs(c===Qo.NONE||c===Qo.LOCAL&&(0,G.hl)(),m,"unsupported-persistence-type"):Gs(c===Qo.NONE||id(),m,"unsupported-persistence-type")}(E._delegate,f),f){case Qo.SESSION:B=Hi;break;case Qo.LOCAL:B=(yield de(Ia)._isAvailable())?Ia:ui;break;case Qo.NONE:B=gn;break;default:return he("argument-error",{appName:E._delegate.name})}return E._delegate.setPersistence(B)})()}signInAndRetrieveDataWithCredential(f){return this.signInWithCredential(f)}signInAnonymously(){return rs(this._delegate,function uo(m){return Mr.apply(this,arguments)}(this._delegate))}signInWithCredential(f){return rs(this._delegate,Qr(this._delegate,f))}signInWithCustomToken(f){return rs(this._delegate,function Eo(m,c){return No.apply(this,arguments)}(this._delegate,f))}signInWithEmailAndPassword(f,E){return rs(this._delegate,function K(m,c,f){return Qr((0,G.m9)(m),Pi.credential(c,f))}(this._delegate,f,E))}signInWithEmailLink(f,E){return rs(this._delegate,function fs(m,c,f){return mi.apply(this,arguments)}(this._delegate,f,E))}signInWithPhoneNumber(f,E){return Nl(this._delegate,function su(m,c,f){return ma.apply(this,arguments)}(this._delegate,f,E))}signInWithPopup(f){var E=this;return(0,p.Z)(function*(){return Lu(Yi(),E._delegate,"operation-not-supported-in-this-environment"),rs(E._delegate,function P(m,c,f){return z.apply(this,arguments)}(E._delegate,f,pu))})()}signInWithRedirect(f){var E=this;return(0,p.Z)(function*(){return Lu(Yi(),E._delegate,"operation-not-supported-in-this-environment"),yield yc(E._delegate),function wi(m,c,f){return function _l(m,c,f){return M.apply(this,arguments)}(m,c,f)}(E._delegate,f,pu)})()}updateCurrentUser(f){return this._delegate.updateCurrentUser(f)}verifyPasswordResetCode(f){return function ca(m,c){return F.apply(this,arguments)}(this._delegate,f)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return m.Persistence=Qo,m})();function hh(m,c,f){let E=m;"function"!=typeof m&&({next:E,error:c,complete:f}=m);const B=E;return{next:Te=>B(Te&&Qa.getOrCreate(Te)),error:c,complete:f}}function qf(m,c){const f=function od(m,c){const f=Pu();if(!f)return[];const E=cr(Ol,m,c);switch(f.getItem(E)){case Qo.NONE:return[gn];case Qo.LOCAL:return[Ia,Hi];case Qo.SESSION:return[Hi];default:return[]}}(m,c);if(typeof self<"u"&&!f.includes(Ia)&&f.push(Ia),typeof window<"u")for(const E of[ui,Hi])f.includes(E)||f.push(E);return f.includes(gn)||f.push(gn),f}class ad{constructor(){this.providerId="phone",this._delegate=new ba(tr(C.Z.auth()))}static credential(c,f){return ba.credential(c,f)}verifyPhoneNumber(c,f){return this._delegate.verifyPhoneNumber(c,f)}unwrap(){return this._delegate}}ad.PHONE_SIGN_IN_METHOD=ba.PHONE_SIGN_IN_METHOD,ad.PROVIDER_ID=ba.PROVIDER_ID;const Pl=ae;class wc{constructor(c,f,E=C.Z.app()){var B;Pl(null===(B=E.options)||void 0===B?void 0:B.apiKey,"invalid-api-key",{appName:E.name}),this._delegate=new gs(c,f,E.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function zs(m){m.INTERNAL.registerComponent(new Re.wA("auth-compat",c=>{const f=c.getProvider("app-compat").getImmediate(),E=c.getProvider("auth");return new gu(f,E)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:Pi,FacebookAuthProvider:Fs,GithubAuthProvider:Ls,GoogleAuthProvider:cs,OAuthProvider:ls,SAMLAuthProvider:ii,PhoneAuthProvider:ad,PhoneMultiFactorGenerator:Yu,RecaptchaVerifier:wc,TwitterAuthProvider:Vi,Auth:gu,AuthCredential:Zr,Error:G.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),m.registerVersion("@firebase/auth-compat","0.2.19")}(C.Z)},9751:(Gt,We,V)=>{V.d(We,{y:()=>Oe});var p=V(2961),C=V(727),G=V(8822),be=V(9635),we=V(2416),Me=V(576),Re=V(2806);let Oe=(()=>{class Ce{constructor(ot){ot&&(this._subscribe=ot)}lift(ot){const Ze=new Ce;return Ze.source=this,Ze.operator=ot,Ze}subscribe(ot,Ze,Ot){const Ke=function ue(Ce){return Ce&&Ce instanceof p.Lv||function le(Ce){return Ce&&(0,Me.m)(Ce.next)&&(0,Me.m)(Ce.error)&&(0,Me.m)(Ce.complete)}(Ce)&&(0,C.Nn)(Ce)}(ot)?ot:new p.Hp(ot,Ze,Ot);return(0,Re.x)(()=>{const{operator:He,source:Bt}=this;Ke.add(He?He.call(Ke,Bt):Bt?this._subscribe(Ke):this._trySubscribe(Ke))}),Ke}_trySubscribe(ot){try{return this._subscribe(ot)}catch(Ze){ot.error(Ze)}}forEach(ot,Ze){return new(Ze=ke(Ze))((Ot,Ke)=>{const He=new p.Hp({next:Bt=>{try{ot(Bt)}catch(jt){Ke(jt),He.unsubscribe()}},error:Ke,complete:Ot});this.subscribe(He)})}_subscribe(ot){var Ze;return null===(Ze=this.source)||void 0===Ze?void 0:Ze.subscribe(ot)}[G.L](){return this}pipe(...ot){return(0,be.U)(ot)(this)}toPromise(ot){return new(ot=ke(ot))((Ze,Ot)=>{let Ke;this.subscribe(He=>Ke=He,He=>Ot(He),()=>Ze(Ke))})}}return Ce.create=yt=>new Ce(yt),Ce})();function ke(Ce){var yt;return null!==(yt=Ce??we.v.Promise)&&void 0!==yt?yt:Promise}},7579:(Gt,We,V)=>{V.d(We,{x:()=>Re});var p=V(9751),C=V(727);const be=(0,V(3888).d)(ke=>function(){ke(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var we=V(8737),Me=V(2806);let Re=(()=>{class ke extends p.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(ue){const Ce=new Oe(this,this);return Ce.operator=ue,Ce}_throwIfClosed(){if(this.closed)throw new be}next(ue){(0,Me.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const Ce of this.currentObservers)Ce.next(ue)}})}error(ue){(0,Me.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=ue;const{observers:Ce}=this;for(;Ce.length;)Ce.shift().error(ue)}})}complete(){(0,Me.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:ue}=this;for(;ue.length;)ue.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var ue;return(null===(ue=this.observers)||void 0===ue?void 0:ue.length)>0}_trySubscribe(ue){return this._throwIfClosed(),super._trySubscribe(ue)}_subscribe(ue){return this._throwIfClosed(),this._checkFinalizedStatuses(ue),this._innerSubscribe(ue)}_innerSubscribe(ue){const{hasError:Ce,isStopped:yt,observers:ot}=this;return Ce||yt?C.Lc:(this.currentObservers=null,ot.push(ue),new C.w0(()=>{this.currentObservers=null,(0,we.P)(ot,ue)}))}_checkFinalizedStatuses(ue){const{hasError:Ce,thrownError:yt,isStopped:ot}=this;Ce?ue.error(yt):ot&&ue.complete()}asObservable(){const ue=new p.y;return ue.source=this,ue}}return ke.create=(le,ue)=>new Oe(le,ue),ke})();class Oe extends Re{constructor(le,ue){super(),this.destination=le,this.source=ue}next(le){var ue,Ce;null===(Ce=null===(ue=this.destination)||void 0===ue?void 0:ue.next)||void 0===Ce||Ce.call(ue,le)}error(le){var ue,Ce;null===(Ce=null===(ue=this.destination)||void 0===ue?void 0:ue.error)||void 0===Ce||Ce.call(ue,le)}complete(){var le,ue;null===(ue=null===(le=this.destination)||void 0===le?void 0:le.complete)||void 0===ue||ue.call(le)}_subscribe(le){var ue,Ce;return null!==(Ce=null===(ue=this.source)||void 0===ue?void 0:ue.subscribe(le))&&void 0!==Ce?Ce:C.Lc}}},2961:(Gt,We,V)=>{V.d(We,{Hp:()=>Ot,Lv:()=>Ce});var p=V(576),C=V(727),G=V(2416),be=V(7849);function we(){}const Me=ke("C",void 0,void 0);function ke(he,rt,Je){return{kind:he,value:rt,error:Je}}var le=V(3410),ue=V(2806);class Ce extends C.w0{constructor(rt){super(),this.isStopped=!1,rt?(this.destination=rt,(0,C.Nn)(rt)&&rt.add(this)):this.destination=jt}static create(rt,Je,vt){return new Ot(rt,Je,vt)}next(rt){this.isStopped?Bt(function Oe(he){return ke("N",he,void 0)}(rt),this):this._next(rt)}error(rt){this.isStopped?Bt(function Re(he){return ke("E",void 0,he)}(rt),this):(this.isStopped=!0,this._error(rt))}complete(){this.isStopped?Bt(Me,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(rt){this.destination.next(rt)}_error(rt){try{this.destination.error(rt)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const yt=Function.prototype.bind;function ot(he,rt){return yt.call(he,rt)}class Ze{constructor(rt){this.partialObserver=rt}next(rt){const{partialObserver:Je}=this;if(Je.next)try{Je.next(rt)}catch(vt){Ke(vt)}}error(rt){const{partialObserver:Je}=this;if(Je.error)try{Je.error(rt)}catch(vt){Ke(vt)}else Ke(rt)}complete(){const{partialObserver:rt}=this;if(rt.complete)try{rt.complete()}catch(Je){Ke(Je)}}}class Ot extends Ce{constructor(rt,Je,vt){let tt;if(super(),(0,p.m)(rt)||!rt)tt={next:rt??void 0,error:Je??void 0,complete:vt??void 0};else{let ae;this&&G.v.useDeprecatedNextContext?(ae=Object.create(rt),ae.unsubscribe=()=>this.unsubscribe(),tt={next:rt.next&&ot(rt.next,ae),error:rt.error&&ot(rt.error,ae),complete:rt.complete&&ot(rt.complete,ae)}):tt=rt}this.destination=new Ze(tt)}}function Ke(he){G.v.useDeprecatedSynchronousErrorHandling?(0,ue.O)(he):(0,be.h)(he)}function Bt(he,rt){const{onStoppedNotification:Je}=G.v;Je&&le.z.setTimeout(()=>Je(he,rt))}const jt={closed:!0,next:we,error:function He(he){throw he},complete:we}},727:(Gt,We,V)=>{V.d(We,{Lc:()=>Me,w0:()=>we,Nn:()=>Re});var p=V(576);const G=(0,V(3888).d)(ke=>function(ue){ke(this),this.message=ue?`${ue.length} errors occurred during unsubscription:\n${ue.map((Ce,yt)=>`${yt+1}) ${Ce.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=ue});var be=V(8737);class we{constructor(le){this.initialTeardown=le,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let le;if(!this.closed){this.closed=!0;const{_parentage:ue}=this;if(ue)if(this._parentage=null,Array.isArray(ue))for(const ot of ue)ot.remove(this);else ue.remove(this);const{initialTeardown:Ce}=this;if((0,p.m)(Ce))try{Ce()}catch(ot){le=ot instanceof G?ot.errors:[ot]}const{_finalizers:yt}=this;if(yt){this._finalizers=null;for(const ot of yt)try{Oe(ot)}catch(Ze){le=le??[],Ze instanceof G?le=[...le,...Ze.errors]:le.push(Ze)}}if(le)throw new G(le)}}add(le){var ue;if(le&&le!==this)if(this.closed)Oe(le);else{if(le instanceof we){if(le.closed||le._hasParent(this))return;le._addParent(this)}(this._finalizers=null!==(ue=this._finalizers)&&void 0!==ue?ue:[]).push(le)}}_hasParent(le){const{_parentage:ue}=this;return ue===le||Array.isArray(ue)&&ue.includes(le)}_addParent(le){const{_parentage:ue}=this;this._parentage=Array.isArray(ue)?(ue.push(le),ue):ue?[ue,le]:le}_removeParent(le){const{_parentage:ue}=this;ue===le?this._parentage=null:Array.isArray(ue)&&(0,be.P)(ue,le)}remove(le){const{_finalizers:ue}=this;ue&&(0,be.P)(ue,le),le instanceof we&&le._removeParent(this)}}we.EMPTY=(()=>{const ke=new we;return ke.closed=!0,ke})();const Me=we.EMPTY;function Re(ke){return ke instanceof we||ke&&"closed"in ke&&(0,p.m)(ke.remove)&&(0,p.m)(ke.add)&&(0,p.m)(ke.unsubscribe)}function Oe(ke){(0,p.m)(ke)?ke():ke.unsubscribe()}},2416:(Gt,We,V)=>{V.d(We,{v:()=>p});const p={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},7272:(Gt,We,V)=>{V.d(We,{z:()=>we});var p=V(8189),G=V(7669),be=V(8996);function we(...Me){return function C(){return(0,p.J)(1)}()((0,be.D)(Me,(0,G.yG)(Me)))}},515:(Gt,We,V)=>{V.d(We,{E:()=>C});const C=new(V(9751).y)(we=>we.complete())},8996:(Gt,We,V)=>{V.d(We,{D:()=>rt});var p=V(8421),C=V(5363),G=V(9468),Me=V(9751),Oe=V(2202),ke=V(576),le=V(9672);function Ce(Je,vt){if(!Je)throw new Error("Iterable cannot be null");return new Me.y(tt=>{(0,le.f)(tt,vt,()=>{const ae=Je[Symbol.asyncIterator]();(0,le.f)(tt,vt,()=>{ae.next().then(Fe=>{Fe.done?tt.complete():tt.next(Fe.value)})},0,!0)})})}var yt=V(3670),ot=V(8239),Ze=V(1144),Ot=V(6495),Ke=V(2206),He=V(4532),Bt=V(3260);function rt(Je,vt){return vt?function he(Je,vt){if(null!=Je){if((0,yt.c)(Je))return function be(Je,vt){return(0,p.Xf)(Je).pipe((0,G.R)(vt),(0,C.Q)(vt))}(Je,vt);if((0,Ze.z)(Je))return function Re(Je,vt){return new Me.y(tt=>{let ae=0;return vt.schedule(function(){ae===Je.length?tt.complete():(tt.next(Je[ae++]),tt.closed||this.schedule())})})}(Je,vt);if((0,ot.t)(Je))return function we(Je,vt){return(0,p.Xf)(Je).pipe((0,G.R)(vt),(0,C.Q)(vt))}(Je,vt);if((0,Ke.D)(Je))return Ce(Je,vt);if((0,Ot.T)(Je))return function ue(Je,vt){return new Me.y(tt=>{let ae;return(0,le.f)(tt,vt,()=>{ae=Je[Oe.h](),(0,le.f)(tt,vt,()=>{let Fe,ne;try{({value:Fe,done:ne}=ae.next())}catch(Ie){return void tt.error(Ie)}ne?tt.complete():tt.next(Fe)},0,!0)}),()=>(0,ke.m)(ae?.return)&&ae.return()})}(Je,vt);if((0,Bt.L)(Je))return function jt(Je,vt){return Ce((0,Bt.Q)(Je),vt)}(Je,vt)}throw(0,He.z)(Je)}(Je,vt):(0,p.Xf)(Je)}},8421:(Gt,We,V)=>{V.d(We,{Xf:()=>yt});var p=V(655),C=V(1144),G=V(8239),be=V(9751),we=V(3670),Me=V(2206),Re=V(4532),Oe=V(6495),ke=V(3260),le=V(576),ue=V(7849),Ce=V(8822);function yt(he){if(he instanceof be.y)return he;if(null!=he){if((0,we.c)(he))return function ot(he){return new be.y(rt=>{const Je=he[Ce.L]();if((0,le.m)(Je.subscribe))return Je.subscribe(rt);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(he);if((0,C.z)(he))return function Ze(he){return new be.y(rt=>{for(let Je=0;Je<he.length&&!rt.closed;Je++)rt.next(he[Je]);rt.complete()})}(he);if((0,G.t)(he))return function Ot(he){return new be.y(rt=>{he.then(Je=>{rt.closed||(rt.next(Je),rt.complete())},Je=>rt.error(Je)).then(null,ue.h)})}(he);if((0,Me.D)(he))return He(he);if((0,Oe.T)(he))return function Ke(he){return new be.y(rt=>{for(const Je of he)if(rt.next(Je),rt.closed)return;rt.complete()})}(he);if((0,ke.L)(he))return function Bt(he){return He((0,ke.Q)(he))}(he)}throw(0,Re.z)(he)}function He(he){return new be.y(rt=>{(function jt(he,rt){var Je,vt,tt,ae;return(0,p.mG)(this,void 0,void 0,function*(){try{for(Je=(0,p.KL)(he);!(vt=yield Je.next()).done;)if(rt.next(vt.value),rt.closed)return}catch(Fe){tt={error:Fe}}finally{try{vt&&!vt.done&&(ae=Je.return)&&(yield ae.call(Je))}finally{if(tt)throw tt.error}}rt.complete()})})(he,rt).catch(Je=>rt.error(Je))})}},6451:(Gt,We,V)=>{V.d(We,{T:()=>Me});var p=V(8189),C=V(8421),G=V(515),be=V(7669),we=V(8996);function Me(...Re){const Oe=(0,be.yG)(Re),ke=(0,be._6)(Re,1/0),le=Re;return le.length?1===le.length?(0,C.Xf)(le[0]):(0,p.J)(ke)((0,we.D)(le,Oe)):G.E}},9646:(Gt,We,V)=>{V.d(We,{of:()=>G});var p=V(7669),C=V(8996);function G(...be){const we=(0,p.yG)(be);return(0,C.D)(be,we)}},5403:(Gt,We,V)=>{V.d(We,{x:()=>C});var p=V(2961);function C(be,we,Me,Re,Oe){return new G(be,we,Me,Re,Oe)}class G extends p.Lv{constructor(we,Me,Re,Oe,ke,le){super(we),this.onFinalize=ke,this.shouldUnsubscribe=le,this._next=Me?function(ue){try{Me(ue)}catch(Ce){we.error(Ce)}}:super._next,this._error=Oe?function(ue){try{Oe(ue)}catch(Ce){we.error(Ce)}finally{this.unsubscribe()}}:super._error,this._complete=Re?function(){try{Re()}catch(ue){we.error(ue)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var we;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:Me}=this;super.unsubscribe(),!Me&&(null===(we=this.onFinalize)||void 0===we||we.call(this))}}}},4351:(Gt,We,V)=>{V.d(We,{b:()=>G});var p=V(5577),C=V(576);function G(be,we){return(0,C.m)(we)?(0,p.z)(be,we,1):(0,p.z)(be,1)}},6590:(Gt,We,V)=>{V.d(We,{d:()=>G});var p=V(4482),C=V(5403);function G(be){return(0,p.e)((we,Me)=>{let Re=!1;we.subscribe((0,C.x)(Me,Oe=>{Re=!0,Me.next(Oe)},()=>{Re||Me.next(be),Me.complete()}))})}},9300:(Gt,We,V)=>{V.d(We,{h:()=>G});var p=V(4482),C=V(5403);function G(be,we){return(0,p.e)((Me,Re)=>{let Oe=0;Me.subscribe((0,C.x)(Re,ke=>be.call(we,ke,Oe++)&&Re.next(ke)))})}},590:(Gt,We,V)=>{V.d(We,{P:()=>Re});var p=V(6805),C=V(9300),G=V(5698),be=V(6590),we=V(8068),Me=V(4671);function Re(Oe,ke){const le=arguments.length>=2;return ue=>ue.pipe(Oe?(0,C.h)((Ce,yt)=>Oe(Ce,yt,ue)):Me.y,(0,G.q)(1),le?(0,be.d)(ke):(0,we.T)(()=>new p.K))}},4004:(Gt,We,V)=>{V.d(We,{U:()=>G});var p=V(4482),C=V(5403);function G(be,we){return(0,p.e)((Me,Re)=>{let Oe=0;Me.subscribe((0,C.x)(Re,ke=>{Re.next(be.call(we,ke,Oe++))}))})}},8189:(Gt,We,V)=>{V.d(We,{J:()=>G});var p=V(5577),C=V(4671);function G(be=1/0){return(0,p.z)(C.y,be)}},5577:(Gt,We,V)=>{V.d(We,{z:()=>Oe});var p=V(4004),C=V(8421),G=V(4482),be=V(9672),we=V(5403),Re=V(576);function Oe(ke,le,ue=1/0){return(0,Re.m)(le)?Oe((Ce,yt)=>(0,p.U)((ot,Ze)=>le(Ce,ot,yt,Ze))((0,C.Xf)(ke(Ce,yt))),ue):("number"==typeof le&&(ue=le),(0,G.e)((Ce,yt)=>function Me(ke,le,ue,Ce,yt,ot,Ze,Ot){const Ke=[];let He=0,Bt=0,jt=!1;const he=()=>{jt&&!Ke.length&&!He&&le.complete()},rt=vt=>He<Ce?Je(vt):Ke.push(vt),Je=vt=>{ot&&le.next(vt),He++;let tt=!1;(0,C.Xf)(ue(vt,Bt++)).subscribe((0,we.x)(le,ae=>{yt?.(ae),ot?rt(ae):le.next(ae)},()=>{tt=!0},void 0,()=>{if(tt)try{for(He--;Ke.length&&He<Ce;){const ae=Ke.shift();Ze?(0,be.f)(le,Ze,()=>Je(ae)):Je(ae)}he()}catch(ae){le.error(ae)}}))};return ke.subscribe((0,we.x)(le,rt,()=>{jt=!0,he()})),()=>{Ot?.()}}(Ce,yt,ke,ue)))}},5363:(Gt,We,V)=>{V.d(We,{Q:()=>be});var p=V(9672),C=V(4482),G=V(5403);function be(we,Me=0){return(0,C.e)((Re,Oe)=>{Re.subscribe((0,G.x)(Oe,ke=>(0,p.f)(Oe,we,()=>Oe.next(ke),Me),()=>(0,p.f)(Oe,we,()=>Oe.complete(),Me),ke=>(0,p.f)(Oe,we,()=>Oe.error(ke),Me)))})}},5026:(Gt,We,V)=>{V.d(We,{R:()=>be});var p=V(4482),C=V(5403);function G(we,Me,Re,Oe,ke){return(le,ue)=>{let Ce=Re,yt=Me,ot=0;le.subscribe((0,C.x)(ue,Ze=>{const Ot=ot++;yt=Ce?we(yt,Ze,Ot):(Ce=!0,Ze),Oe&&ue.next(yt)},ke&&(()=>{Ce&&ue.next(yt),ue.complete()})))}}function be(we,Me){return(0,p.e)(G(we,Me,arguments.length>=2,!0))}},3099:(Gt,We,V)=>{V.d(We,{B:()=>we});var p=V(8421),C=V(7579),G=V(2961),be=V(4482);function we(Re={}){const{connector:Oe=(()=>new C.x),resetOnError:ke=!0,resetOnComplete:le=!0,resetOnRefCountZero:ue=!0}=Re;return Ce=>{let yt,ot,Ze,Ot=0,Ke=!1,He=!1;const Bt=()=>{ot?.unsubscribe(),ot=void 0},jt=()=>{Bt(),yt=Ze=void 0,Ke=He=!1},he=()=>{const rt=yt;jt(),rt?.unsubscribe()};return(0,be.e)((rt,Je)=>{Ot++,!He&&!Ke&&Bt();const vt=Ze=Ze??Oe();Je.add(()=>{Ot--,0===Ot&&!He&&!Ke&&(ot=Me(he,ue))}),vt.subscribe(Je),!yt&&Ot>0&&(yt=new G.Hp({next:tt=>vt.next(tt),error:tt=>{He=!0,Bt(),ot=Me(jt,ke,tt),vt.error(tt)},complete:()=>{Ke=!0,Bt(),ot=Me(jt,le),vt.complete()}}),(0,p.Xf)(rt).subscribe(yt))})(Ce)}}function Me(Re,Oe,...ke){if(!0===Oe)return void Re();if(!1===Oe)return;const le=new G.Hp({next:()=>{le.unsubscribe(),Re()}});return Oe(...ke).subscribe(le)}},8675:(Gt,We,V)=>{V.d(We,{O:()=>be});var p=V(7272),C=V(7669),G=V(4482);function be(...we){const Me=(0,C.yG)(we);return(0,G.e)((Re,Oe)=>{(Me?(0,p.z)(we,Re,Me):(0,p.z)(we,Re)).subscribe(Oe)})}},9468:(Gt,We,V)=>{V.d(We,{R:()=>C});var p=V(4482);function C(G,be=0){return(0,p.e)((we,Me)=>{Me.add(G.schedule(()=>we.subscribe(Me),be))})}},3900:(Gt,We,V)=>{V.d(We,{w:()=>be});var p=V(8421),C=V(4482),G=V(5403);function be(we,Me){return(0,C.e)((Re,Oe)=>{let ke=null,le=0,ue=!1;const Ce=()=>ue&&!ke&&Oe.complete();Re.subscribe((0,G.x)(Oe,yt=>{ke?.unsubscribe();let ot=0;const Ze=le++;(0,p.Xf)(we(yt,Ze)).subscribe(ke=(0,G.x)(Oe,Ot=>Oe.next(Me?Me(yt,Ot,Ze,ot++):Ot),()=>{ke=null,Ce()}))},()=>{ue=!0,Ce()}))})}},5698:(Gt,We,V)=>{V.d(We,{q:()=>be});var p=V(515),C=V(4482),G=V(5403);function be(we){return we<=0?()=>p.E:(0,C.e)((Me,Re)=>{let Oe=0;Me.subscribe((0,G.x)(Re,ke=>{++Oe<=we&&(Re.next(ke),we<=Oe&&Re.complete())}))})}},8505:(Gt,We,V)=>{V.d(We,{b:()=>we});var p=V(576),C=V(4482),G=V(5403),be=V(4671);function we(Me,Re,Oe){const ke=(0,p.m)(Me)||Re||Oe?{next:Me,error:Re,complete:Oe}:Me;return ke?(0,C.e)((le,ue)=>{var Ce;null===(Ce=ke.subscribe)||void 0===Ce||Ce.call(ke);let yt=!0;le.subscribe((0,G.x)(ue,ot=>{var Ze;null===(Ze=ke.next)||void 0===Ze||Ze.call(ke,ot),ue.next(ot)},()=>{var ot;yt=!1,null===(ot=ke.complete)||void 0===ot||ot.call(ke),ue.complete()},ot=>{var Ze;yt=!1,null===(Ze=ke.error)||void 0===Ze||Ze.call(ke,ot),ue.error(ot)},()=>{var ot,Ze;yt&&(null===(ot=ke.unsubscribe)||void 0===ot||ot.call(ke)),null===(Ze=ke.finalize)||void 0===Ze||Ze.call(ke)}))}):be.y}},8068:(Gt,We,V)=>{V.d(We,{T:()=>be});var p=V(6805),C=V(4482),G=V(5403);function be(Me=we){return(0,C.e)((Re,Oe)=>{let ke=!1;Re.subscribe((0,G.x)(Oe,le=>{ke=!0,Oe.next(le)},()=>ke?Oe.complete():Oe.error(Me())))})}function we(){return new p.K}},4408:(Gt,We,V)=>{V.d(We,{o:()=>we});var p=V(727);class C extends p.w0{constructor(Re,Oe){super()}schedule(Re,Oe=0){return this}}const G={setInterval(Me,Re,...Oe){const{delegate:ke}=G;return ke?.setInterval?ke.setInterval(Me,Re,...Oe):setInterval(Me,Re,...Oe)},clearInterval(Me){const{delegate:Re}=G;return(Re?.clearInterval||clearInterval)(Me)},delegate:void 0};var be=V(8737);class we extends C{constructor(Re,Oe){super(Re,Oe),this.scheduler=Re,this.work=Oe,this.pending=!1}schedule(Re,Oe=0){if(this.closed)return this;this.state=Re;const ke=this.id,le=this.scheduler;return null!=ke&&(this.id=this.recycleAsyncId(le,ke,Oe)),this.pending=!0,this.delay=Oe,this.id=this.id||this.requestAsyncId(le,this.id,Oe),this}requestAsyncId(Re,Oe,ke=0){return G.setInterval(Re.flush.bind(Re,this),ke)}recycleAsyncId(Re,Oe,ke=0){if(null!=ke&&this.delay===ke&&!1===this.pending)return Oe;G.clearInterval(Oe)}execute(Re,Oe){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const ke=this._execute(Re,Oe);if(ke)return ke;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(Re,Oe){let le,ke=!1;try{this.work(Re)}catch(ue){ke=!0,le=ue||new Error("Scheduled action threw falsy error")}if(ke)return this.unsubscribe(),le}unsubscribe(){if(!this.closed){const{id:Re,scheduler:Oe}=this,{actions:ke}=Oe;this.work=this.state=this.scheduler=null,this.pending=!1,(0,be.P)(ke,this),null!=Re&&(this.id=this.recycleAsyncId(Oe,Re,null)),this.delay=null,super.unsubscribe()}}}},7565:(Gt,We,V)=>{V.d(We,{v:()=>G});var p=V(6063);class C{constructor(we,Me=C.now){this.schedulerActionCtor=we,this.now=Me}schedule(we,Me=0,Re){return new this.schedulerActionCtor(this,we).schedule(Re,Me)}}C.now=p.l.now;class G extends C{constructor(we,Me=C.now){super(we,Me),this.actions=[],this._active=!1,this._scheduled=void 0}flush(we){const{actions:Me}=this;if(this._active)return void Me.push(we);let Re;this._active=!0;do{if(Re=we.execute(we.state,we.delay))break}while(we=Me.shift());if(this._active=!1,Re){for(;we=Me.shift();)we.unsubscribe();throw Re}}}},4986:(Gt,We,V)=>{V.d(We,{z:()=>G});var p=V(4408);const G=new(V(7565).v)(p.o)},6063:(Gt,We,V)=>{V.d(We,{l:()=>p});const p={now:()=>(p.delegate||Date).now(),delegate:void 0}},3410:(Gt,We,V)=>{V.d(We,{z:()=>p});const p={setTimeout(C,G,...be){const{delegate:we}=p;return we?.setTimeout?we.setTimeout(C,G,...be):setTimeout(C,G,...be)},clearTimeout(C){const{delegate:G}=p;return(G?.clearTimeout||clearTimeout)(C)},delegate:void 0}},2202:(Gt,We,V)=>{V.d(We,{h:()=>C});const C=function p(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(Gt,We,V)=>{V.d(We,{L:()=>p});const p="function"==typeof Symbol&&Symbol.observable||"@@observable"},6805:(Gt,We,V)=>{V.d(We,{K:()=>C});const C=(0,V(3888).d)(G=>function(){G(this),this.name="EmptyError",this.message="no elements in sequence"})},7669:(Gt,We,V)=>{V.d(We,{_6:()=>Me,jO:()=>be,yG:()=>we});var p=V(576);function G(Re){return Re[Re.length-1]}function be(Re){return(0,p.m)(G(Re))?Re.pop():void 0}function we(Re){return function C(Re){return Re&&(0,p.m)(Re.schedule)}(G(Re))?Re.pop():void 0}function Me(Re,Oe){return"number"==typeof G(Re)?Re.pop():Oe}},4742:(Gt,We,V)=>{V.d(We,{D:()=>we});const{isArray:p}=Array,{getPrototypeOf:C,prototype:G,keys:be}=Object;function we(Re){if(1===Re.length){const Oe=Re[0];if(p(Oe))return{args:Oe,keys:null};if(function Me(Re){return Re&&"object"==typeof Re&&C(Re)===G}(Oe)){const ke=be(Oe);return{args:ke.map(le=>Oe[le]),keys:ke}}}return{args:Re,keys:null}}},8737:(Gt,We,V)=>{function p(C,G){if(C){const be=C.indexOf(G);0<=be&&C.splice(be,1)}}V.d(We,{P:()=>p})},3888:(Gt,We,V)=>{function p(C){const be=C(we=>{Error.call(we),we.stack=(new Error).stack});return be.prototype=Object.create(Error.prototype),be.prototype.constructor=be,be}V.d(We,{d:()=>p})},1810:(Gt,We,V)=>{function p(C,G){return C.reduce((be,we,Me)=>(be[we]=G[Me],be),{})}V.d(We,{n:()=>p})},2806:(Gt,We,V)=>{V.d(We,{O:()=>be,x:()=>G});var p=V(2416);let C=null;function G(we){if(p.v.useDeprecatedSynchronousErrorHandling){const Me=!C;if(Me&&(C={errorThrown:!1,error:null}),we(),Me){const{errorThrown:Re,error:Oe}=C;if(C=null,Re)throw Oe}}else we()}function be(we){p.v.useDeprecatedSynchronousErrorHandling&&C&&(C.errorThrown=!0,C.error=we)}},9672:(Gt,We,V)=>{function p(C,G,be,we=0,Me=!1){const Re=G.schedule(function(){be(),Me?C.add(this.schedule(null,we)):this.unsubscribe()},we);if(C.add(Re),!Me)return Re}V.d(We,{f:()=>p})},4671:(Gt,We,V)=>{function p(C){return C}V.d(We,{y:()=>p})},1144:(Gt,We,V)=>{V.d(We,{z:()=>p});const p=C=>C&&"number"==typeof C.length&&"function"!=typeof C},2206:(Gt,We,V)=>{V.d(We,{D:()=>C});var p=V(576);function C(G){return Symbol.asyncIterator&&(0,p.m)(G?.[Symbol.asyncIterator])}},576:(Gt,We,V)=>{function p(C){return"function"==typeof C}V.d(We,{m:()=>p})},3670:(Gt,We,V)=>{V.d(We,{c:()=>G});var p=V(8822),C=V(576);function G(be){return(0,C.m)(be[p.L])}},6495:(Gt,We,V)=>{V.d(We,{T:()=>G});var p=V(2202),C=V(576);function G(be){return(0,C.m)(be?.[p.h])}},8239:(Gt,We,V)=>{V.d(We,{t:()=>C});var p=V(576);function C(G){return(0,p.m)(G?.then)}},3260:(Gt,We,V)=>{V.d(We,{L:()=>be,Q:()=>G});var p=V(655),C=V(576);function G(we){return(0,p.FC)(this,arguments,function*(){const Re=we.getReader();try{for(;;){const{value:Oe,done:ke}=yield(0,p.qq)(Re.read());if(ke)return yield(0,p.qq)(void 0);yield yield(0,p.qq)(Oe)}}finally{Re.releaseLock()}})}function be(we){return(0,C.m)(we?.getReader)}},4482:(Gt,We,V)=>{V.d(We,{A:()=>C,e:()=>G});var p=V(576);function C(be){return(0,p.m)(be?.lift)}function G(be){return we=>{if(C(we))return we.lift(function(Me){try{return be(Me,this)}catch(Re){this.error(Re)}});throw new TypeError("Unable to lift unknown Observable type")}}},3268:(Gt,We,V)=>{V.d(We,{Z:()=>be});var p=V(4004);const{isArray:C}=Array;function be(we){return(0,p.U)(Me=>function G(we,Me){return C(Me)?we(...Me):we(Me)}(we,Me))}},9635:(Gt,We,V)=>{V.d(We,{U:()=>G,z:()=>C});var p=V(4671);function C(...be){return G(be)}function G(be){return 0===be.length?p.y:1===be.length?be[0]:function(Me){return be.reduce((Re,Oe)=>Oe(Re),Me)}}},7849:(Gt,We,V)=>{V.d(We,{h:()=>G});var p=V(2416),C=V(3410);function G(be){C.z.setTimeout(()=>{const{onUnhandledError:we}=p.v;if(!we)throw be;we(be)})}},4532:(Gt,We,V)=>{function p(C){return new TypeError(`You provided ${null!==C&&"object"==typeof C?"an invalid object":`'${C}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}V.d(We,{z:()=>p})},655:(Gt,We,V)=>{function be(ne,Ie){var de={};for(var Ne in ne)Object.prototype.hasOwnProperty.call(ne,Ne)&&Ie.indexOf(Ne)<0&&(de[Ne]=ne[Ne]);if(null!=ne&&"function"==typeof Object.getOwnPropertySymbols){var dt=0;for(Ne=Object.getOwnPropertySymbols(ne);dt<Ne.length;dt++)Ie.indexOf(Ne[dt])<0&&Object.prototype.propertyIsEnumerable.call(ne,Ne[dt])&&(de[Ne[dt]]=ne[Ne[dt]])}return de}function Oe(ne,Ie,de,Ne){return new(de||(de=Promise))(function(wt,Ct){function Mt(tn){try{ht(Ne.next(tn))}catch(Kt){Ct(Kt)}}function $t(tn){try{ht(Ne.throw(tn))}catch(Kt){Ct(Kt)}}function ht(tn){tn.done?wt(tn.value):function dt(wt){return wt instanceof de?wt:new de(function(Ct){Ct(wt)})}(tn.value).then(Mt,$t)}ht((Ne=Ne.apply(ne,Ie||[])).next())})}function Ke(ne){return this instanceof Ke?(this.v=ne,this):new Ke(ne)}function He(ne,Ie,de){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var dt,Ne=de.apply(ne,Ie||[]),wt=[];return dt={},Ct("next"),Ct("throw"),Ct("return"),dt[Symbol.asyncIterator]=function(){return this},dt;function Ct(on){Ne[on]&&(dt[on]=function(kt){return new Promise(function(Nn,un){wt.push([on,kt,Nn,un])>1||Mt(on,kt)})})}function Mt(on,kt){try{!function $t(on){on.value instanceof Ke?Promise.resolve(on.value.v).then(ht,tn):Kt(wt[0][2],on)}(Ne[on](kt))}catch(Nn){Kt(wt[0][3],Nn)}}function ht(on){Mt("next",on)}function tn(on){Mt("throw",on)}function Kt(on,kt){on(kt),wt.shift(),wt.length&&Mt(wt[0][0],wt[0][1])}}function jt(ne){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var de,Ie=ne[Symbol.asyncIterator];return Ie?Ie.call(ne):(ne=function Ce(ne){var Ie="function"==typeof Symbol&&Symbol.iterator,de=Ie&&ne[Ie],Ne=0;if(de)return de.call(ne);if(ne&&"number"==typeof ne.length)return{next:function(){return ne&&Ne>=ne.length&&(ne=void 0),{value:ne&&ne[Ne++],done:!ne}}};throw new TypeError(Ie?"Object is not iterable.":"Symbol.iterator is not defined.")}(ne),de={},Ne("next"),Ne("throw"),Ne("return"),de[Symbol.asyncIterator]=function(){return this},de);function Ne(wt){de[wt]=ne[wt]&&function(Ct){return new Promise(function(Mt,$t){!function dt(wt,Ct,Mt,$t){Promise.resolve($t).then(function(ht){wt({value:ht,done:Mt})},Ct)}(Mt,$t,(Ct=ne[wt](Ct)).done,Ct.value)})}}}V.d(We,{FC:()=>He,KL:()=>jt,_T:()=>be,mG:()=>Oe,qq:()=>Ke})},6895:(Gt,We,V)=>{V.d(We,{Do:()=>jt,EM:()=>ds,HT:()=>we,JF:()=>Ui,K0:()=>Re,Mx:()=>Ri,O5:()=>Ar,PM:()=>Vr,S$:()=>Ke,V_:()=>le,Ye:()=>he,b0:()=>Bt,bD:()=>_s,ez:()=>Vs,mk:()=>Mn,q:()=>G,sg:()=>Ii,w_:()=>Me});var p=V(4650);let C=null;function G(){return C}function we(S){C||(C=S)}class Me{}const Re=new p.OlP("DocumentToken");let Oe=(()=>{class S{historyGo(R){throw new Error("Not implemented")}}return S.\u0275fac=function(R){return new(R||S)},S.\u0275prov=p.Yz7({token:S,factory:function(){return function ke(){return(0,p.LFG)(ue)}()},providedIn:"platform"}),S})();const le=new p.OlP("Location Initialized");let ue=(()=>{class S extends Oe{constructor(R){super(),this._doc=R,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return G().getBaseHref(this._doc)}onPopState(R){const q=G().getGlobalEventTarget(this._doc,"window");return q.addEventListener("popstate",R,!1),()=>q.removeEventListener("popstate",R)}onHashChange(R){const q=G().getGlobalEventTarget(this._doc,"window");return q.addEventListener("hashchange",R,!1),()=>q.removeEventListener("hashchange",R)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(R){this.location.pathname=R}pushState(R,q,fe){Ce()?this._history.pushState(R,q,fe):this.location.hash=fe}replaceState(R,q,fe){Ce()?this._history.replaceState(R,q,fe):this.location.hash=fe}forward(){this._history.forward()}back(){this._history.back()}historyGo(R=0){this._history.go(R)}getState(){return this._history.state}}return S.\u0275fac=function(R){return new(R||S)(p.LFG(Re))},S.\u0275prov=p.Yz7({token:S,factory:function(){return function yt(){return new ue((0,p.LFG)(Re))}()},providedIn:"platform"}),S})();function Ce(){return!!window.history.pushState}function ot(S,$){if(0==S.length)return $;if(0==$.length)return S;let R=0;return S.endsWith("/")&&R++,$.startsWith("/")&&R++,2==R?S+$.substring(1):1==R?S+$:S+"/"+$}function Ze(S){const $=S.match(/#|\?|$/),R=$&&$.index||S.length;return S.slice(0,R-("/"===S[R-1]?1:0))+S.slice(R)}function Ot(S){return S&&"?"!==S[0]?"?"+S:S}let Ke=(()=>{class S{historyGo(R){throw new Error("Not implemented")}}return S.\u0275fac=function(R){return new(R||S)},S.\u0275prov=p.Yz7({token:S,factory:function(){return(0,p.f3M)(Bt)},providedIn:"root"}),S})();const He=new p.OlP("appBaseHref");let Bt=(()=>{class S extends Ke{constructor(R,q){super(),this._platformLocation=R,this._removeListenerFns=[],this._baseHref=q??this._platformLocation.getBaseHrefFromDOM()??(0,p.f3M)(Re).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(R){this._removeListenerFns.push(this._platformLocation.onPopState(R),this._platformLocation.onHashChange(R))}getBaseHref(){return this._baseHref}prepareExternalUrl(R){return ot(this._baseHref,R)}path(R=!1){const q=this._platformLocation.pathname+Ot(this._platformLocation.search),fe=this._platformLocation.hash;return fe&&R?`${q}${fe}`:q}pushState(R,q,fe,ze){const nt=this.prepareExternalUrl(fe+Ot(ze));this._platformLocation.pushState(R,q,nt)}replaceState(R,q,fe,ze){const nt=this.prepareExternalUrl(fe+Ot(ze));this._platformLocation.replaceState(R,q,nt)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(R=0){this._platformLocation.historyGo?.(R)}}return S.\u0275fac=function(R){return new(R||S)(p.LFG(Oe),p.LFG(He,8))},S.\u0275prov=p.Yz7({token:S,factory:S.\u0275fac,providedIn:"root"}),S})(),jt=(()=>{class S extends Ke{constructor(R,q){super(),this._platformLocation=R,this._baseHref="",this._removeListenerFns=[],null!=q&&(this._baseHref=q)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(R){this._removeListenerFns.push(this._platformLocation.onPopState(R),this._platformLocation.onHashChange(R))}getBaseHref(){return this._baseHref}path(R=!1){let q=this._platformLocation.hash;return null==q&&(q="#"),q.length>0?q.substring(1):q}prepareExternalUrl(R){const q=ot(this._baseHref,R);return q.length>0?"#"+q:q}pushState(R,q,fe,ze){let nt=this.prepareExternalUrl(fe+Ot(ze));0==nt.length&&(nt=this._platformLocation.pathname),this._platformLocation.pushState(R,q,nt)}replaceState(R,q,fe,ze){let nt=this.prepareExternalUrl(fe+Ot(ze));0==nt.length&&(nt=this._platformLocation.pathname),this._platformLocation.replaceState(R,q,nt)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(R=0){this._platformLocation.historyGo?.(R)}}return S.\u0275fac=function(R){return new(R||S)(p.LFG(Oe),p.LFG(He,8))},S.\u0275prov=p.Yz7({token:S,factory:S.\u0275fac}),S})(),he=(()=>{class S{constructor(R){this._subject=new p.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=R;const q=this._locationStrategy.getBaseHref();this._baseHref=Ze(vt(q)),this._locationStrategy.onPopState(fe=>{this._subject.emit({url:this.path(!0),pop:!0,state:fe.state,type:fe.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(R=!1){return this.normalize(this._locationStrategy.path(R))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(R,q=""){return this.path()==this.normalize(R+Ot(q))}normalize(R){return S.stripTrailingSlash(function Je(S,$){return S&&$.startsWith(S)?$.substring(S.length):$}(this._baseHref,vt(R)))}prepareExternalUrl(R){return R&&"/"!==R[0]&&(R="/"+R),this._locationStrategy.prepareExternalUrl(R)}go(R,q="",fe=null){this._locationStrategy.pushState(fe,"",R,q),this._notifyUrlChangeListeners(this.prepareExternalUrl(R+Ot(q)),fe)}replaceState(R,q="",fe=null){this._locationStrategy.replaceState(fe,"",R,q),this._notifyUrlChangeListeners(this.prepareExternalUrl(R+Ot(q)),fe)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(R=0){this._locationStrategy.historyGo?.(R)}onUrlChange(R){return this._urlChangeListeners.push(R),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(q=>{this._notifyUrlChangeListeners(q.url,q.state)})),()=>{const q=this._urlChangeListeners.indexOf(R);this._urlChangeListeners.splice(q,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(R="",q){this._urlChangeListeners.forEach(fe=>fe(R,q))}subscribe(R,q,fe){return this._subject.subscribe({next:R,error:q,complete:fe})}}return S.normalizeQueryParams=Ot,S.joinWithSlash=ot,S.stripTrailingSlash=Ze,S.\u0275fac=function(R){return new(R||S)(p.LFG(Ke))},S.\u0275prov=p.Yz7({token:S,factory:function(){return function rt(){return new he((0,p.LFG)(Ke))}()},providedIn:"root"}),S})();function vt(S){return S.replace(/\/index.html$/,"")}function Ri(S,$){$=encodeURIComponent($);for(const R of S.split(";")){const q=R.indexOf("="),[fe,ze]=-1==q?[R,""]:[R.slice(0,q),R.slice(q+1)];if(fe.trim()===$)return decodeURIComponent(ze)}return null}let Mn=(()=>{class S{constructor(R,q,fe,ze){this._iterableDiffers=R,this._keyValueDiffers=q,this._ngEl=fe,this._renderer=ze,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(R){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof R?R.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(R){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof R?R.split(/\s+/):R,this._rawClass&&((0,p.sIi)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const R=this._iterableDiffer.diff(this._rawClass);R&&this._applyIterableChanges(R)}else if(this._keyValueDiffer){const R=this._keyValueDiffer.diff(this._rawClass);R&&this._applyKeyValueChanges(R)}}_applyKeyValueChanges(R){R.forEachAddedItem(q=>this._toggleClass(q.key,q.currentValue)),R.forEachChangedItem(q=>this._toggleClass(q.key,q.currentValue)),R.forEachRemovedItem(q=>{q.previousValue&&this._toggleClass(q.key,!1)})}_applyIterableChanges(R){R.forEachAddedItem(q=>{if("string"!=typeof q.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${(0,p.AaK)(q.item)}`);this._toggleClass(q.item,!0)}),R.forEachRemovedItem(q=>this._toggleClass(q.item,!1))}_applyClasses(R){R&&(Array.isArray(R)||R instanceof Set?R.forEach(q=>this._toggleClass(q,!0)):Object.keys(R).forEach(q=>this._toggleClass(q,!!R[q])))}_removeClasses(R){R&&(Array.isArray(R)||R instanceof Set?R.forEach(q=>this._toggleClass(q,!1)):Object.keys(R).forEach(q=>this._toggleClass(q,!1)))}_toggleClass(R,q){(R=R.trim())&&R.split(/\s+/g).forEach(fe=>{q?this._renderer.addClass(this._ngEl.nativeElement,fe):this._renderer.removeClass(this._ngEl.nativeElement,fe)})}}return S.\u0275fac=function(R){return new(R||S)(p.Y36(p.ZZ4),p.Y36(p.aQg),p.Y36(p.SBq),p.Y36(p.Qsj))},S.\u0275dir=p.lG2({type:S,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0}),S})();class Ps{constructor($,R,q,fe){this.$implicit=$,this.ngForOf=R,this.index=q,this.count=fe}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Ii=(()=>{class S{constructor(R,q,fe){this._viewContainer=R,this._template=q,this._differs=fe,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(R){this._ngForOf=R,this._ngForOfDirty=!0}set ngForTrackBy(R){this._trackByFn=R}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(R){R&&(this._template=R)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const R=this._ngForOf;!this._differ&&R&&(this._differ=this._differs.find(R).create(this.ngForTrackBy))}if(this._differ){const R=this._differ.diff(this._ngForOf);R&&this._applyChanges(R)}}_applyChanges(R){const q=this._viewContainer;R.forEachOperation((fe,ze,nt)=>{if(null==fe.previousIndex)q.createEmbeddedView(this._template,new Ps(fe.item,this._ngForOf,-1,-1),null===nt?void 0:nt);else if(null==nt)q.remove(null===ze?void 0:ze);else if(null!==ze){const Jt=q.get(ze);q.move(Jt,nt),Oi(Jt,fe)}});for(let fe=0,ze=q.length;fe<ze;fe++){const Jt=q.get(fe).context;Jt.index=fe,Jt.count=ze,Jt.ngForOf=this._ngForOf}R.forEachIdentityChange(fe=>{Oi(q.get(fe.currentIndex),fe)})}static ngTemplateContextGuard(R,q){return!0}}return S.\u0275fac=function(R){return new(R||S)(p.Y36(p.s_b),p.Y36(p.Rgc),p.Y36(p.ZZ4))},S.\u0275dir=p.lG2({type:S,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),S})();function Oi(S,$){S.context.$implicit=$.item}let Ar=(()=>{class S{constructor(R,q){this._viewContainer=R,this._context=new us,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=q}set ngIf(R){this._context.$implicit=this._context.ngIf=R,this._updateView()}set ngIfThen(R){er("ngIfThen",R),this._thenTemplateRef=R,this._thenViewRef=null,this._updateView()}set ngIfElse(R){er("ngIfElse",R),this._elseTemplateRef=R,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(R,q){return!0}}return S.\u0275fac=function(R){return new(R||S)(p.Y36(p.s_b),p.Y36(p.Rgc))},S.\u0275dir=p.lG2({type:S,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),S})();class us{constructor(){this.$implicit=null,this.ngIf=null}}function er(S,$){if($&&!$.createEmbeddedView)throw new Error(`${S} must be a TemplateRef, but received '${(0,p.AaK)($)}'.`)}let Vs=(()=>{class S{}return S.\u0275fac=function(R){return new(R||S)},S.\u0275mod=p.oAB({type:S}),S.\u0275inj=p.cJS({}),S})();const _s="browser";function Vr(S){return"server"===S}let ds=(()=>{class S{}return S.\u0275prov=(0,p.Yz7)({token:S,providedIn:"root",factory:()=>new Ro((0,p.LFG)(Re),window)}),S})();class Ro{constructor($,R){this.document=$,this.window=R,this.offset=()=>[0,0]}setOffset($){this.offset=Array.isArray($)?()=>$:$}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition($){this.supportsScrolling()&&this.window.scrollTo($[0],$[1])}scrollToAnchor($){if(!this.supportsScrolling())return;const R=function si(S,$){const R=S.getElementById($)||S.getElementsByName($)[0];if(R)return R;if("function"==typeof S.createTreeWalker&&S.body&&(S.body.createShadowRoot||S.body.attachShadow)){const q=S.createTreeWalker(S.body,NodeFilter.SHOW_ELEMENT);let fe=q.currentNode;for(;fe;){const ze=fe.shadowRoot;if(ze){const nt=ze.getElementById($)||ze.querySelector(`[name="${$}"]`);if(nt)return nt}fe=q.nextNode()}}return null}(this.document,$);R&&(this.scrollToElement(R),R.focus())}setHistoryScrollRestoration($){if(this.supportScrollRestoration()){const R=this.window.history;R&&R.scrollRestoration&&(R.scrollRestoration=$)}}scrollToElement($){const R=$.getBoundingClientRect(),q=R.left+this.window.pageXOffset,fe=R.top+this.window.pageYOffset,ze=this.offset();this.window.scrollTo(q-ze[0],fe-ze[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const $=fr(this.window.history)||fr(Object.getPrototypeOf(this.window.history));return!(!$||!$.writable&&!$.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function fr(S){return Object.getOwnPropertyDescriptor(S,"scrollRestoration")}class Ui{}},529:(Gt,We,V)=>{V.d(We,{JF:()=>ei,eN:()=>wt});var p=V(6895),C=V(4650),G=V(9646),be=V(9751),we=V(4351),Me=V(9300),Re=V(4004);class Oe{}class ke{}class le{constructor(ge){this.normalizedNames=new Map,this.lazyUpdate=null,ge?this.lazyInit="string"==typeof ge?()=>{this.headers=new Map,ge.split("\n").forEach(se=>{const Be=se.indexOf(":");if(Be>0){const st=se.slice(0,Be),Lt=st.toLowerCase(),Ft=se.slice(Be+1).trim();this.maybeSetNormalizedName(st,Lt),this.headers.has(Lt)?this.headers.get(Lt).push(Ft):this.headers.set(Lt,[Ft])}})}:()=>{this.headers=new Map,Object.keys(ge).forEach(se=>{let Be=ge[se];const st=se.toLowerCase();"string"==typeof Be&&(Be=[Be]),Be.length>0&&(this.headers.set(st,Be),this.maybeSetNormalizedName(se,st))})}:this.headers=new Map}has(ge){return this.init(),this.headers.has(ge.toLowerCase())}get(ge){this.init();const se=this.headers.get(ge.toLowerCase());return se&&se.length>0?se[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(ge){return this.init(),this.headers.get(ge.toLowerCase())||null}append(ge,se){return this.clone({name:ge,value:se,op:"a"})}set(ge,se){return this.clone({name:ge,value:se,op:"s"})}delete(ge,se){return this.clone({name:ge,value:se,op:"d"})}maybeSetNormalizedName(ge,se){this.normalizedNames.has(se)||this.normalizedNames.set(se,ge)}init(){this.lazyInit&&(this.lazyInit instanceof le?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(ge=>this.applyUpdate(ge)),this.lazyUpdate=null))}copyFrom(ge){ge.init(),Array.from(ge.headers.keys()).forEach(se=>{this.headers.set(se,ge.headers.get(se)),this.normalizedNames.set(se,ge.normalizedNames.get(se))})}clone(ge){const se=new le;return se.lazyInit=this.lazyInit&&this.lazyInit instanceof le?this.lazyInit:this,se.lazyUpdate=(this.lazyUpdate||[]).concat([ge]),se}applyUpdate(ge){const se=ge.name.toLowerCase();switch(ge.op){case"a":case"s":let Be=ge.value;if("string"==typeof Be&&(Be=[Be]),0===Be.length)return;this.maybeSetNormalizedName(ge.name,se);const st=("a"===ge.op?this.headers.get(se):void 0)||[];st.push(...Be),this.headers.set(se,st);break;case"d":const Lt=ge.value;if(Lt){let Ft=this.headers.get(se);if(!Ft)return;Ft=Ft.filter(Vn=>-1===Lt.indexOf(Vn)),0===Ft.length?(this.headers.delete(se),this.normalizedNames.delete(se)):this.headers.set(se,Ft)}else this.headers.delete(se),this.normalizedNames.delete(se)}}forEach(ge){this.init(),Array.from(this.normalizedNames.keys()).forEach(se=>ge(this.normalizedNames.get(se),this.headers.get(se)))}}class Ce{encodeKey(ge){return Ot(ge)}encodeValue(ge){return Ot(ge)}decodeKey(ge){return decodeURIComponent(ge)}decodeValue(ge){return decodeURIComponent(ge)}}const ot=/%(\d[a-f0-9])/gi,Ze={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function Ot(Ue){return encodeURIComponent(Ue).replace(ot,(ge,se)=>Ze[se]??ge)}function Ke(Ue){return`${Ue}`}class He{constructor(ge={}){if(this.updates=null,this.cloneFrom=null,this.encoder=ge.encoder||new Ce,ge.fromString){if(ge.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function yt(Ue,ge){const se=new Map;return Ue.length>0&&Ue.replace(/^\?/,"").split("&").forEach(st=>{const Lt=st.indexOf("="),[Ft,Vn]=-1==Lt?[ge.decodeKey(st),""]:[ge.decodeKey(st.slice(0,Lt)),ge.decodeValue(st.slice(Lt+1))],At=se.get(Ft)||[];At.push(Vn),se.set(Ft,At)}),se}(ge.fromString,this.encoder)}else ge.fromObject?(this.map=new Map,Object.keys(ge.fromObject).forEach(se=>{const Be=ge.fromObject[se],st=Array.isArray(Be)?Be.map(Ke):[Ke(Be)];this.map.set(se,st)})):this.map=null}has(ge){return this.init(),this.map.has(ge)}get(ge){this.init();const se=this.map.get(ge);return se?se[0]:null}getAll(ge){return this.init(),this.map.get(ge)||null}keys(){return this.init(),Array.from(this.map.keys())}append(ge,se){return this.clone({param:ge,value:se,op:"a"})}appendAll(ge){const se=[];return Object.keys(ge).forEach(Be=>{const st=ge[Be];Array.isArray(st)?st.forEach(Lt=>{se.push({param:Be,value:Lt,op:"a"})}):se.push({param:Be,value:st,op:"a"})}),this.clone(se)}set(ge,se){return this.clone({param:ge,value:se,op:"s"})}delete(ge,se){return this.clone({param:ge,value:se,op:"d"})}toString(){return this.init(),this.keys().map(ge=>{const se=this.encoder.encodeKey(ge);return this.map.get(ge).map(Be=>se+"="+this.encoder.encodeValue(Be)).join("&")}).filter(ge=>""!==ge).join("&")}clone(ge){const se=new He({encoder:this.encoder});return se.cloneFrom=this.cloneFrom||this,se.updates=(this.updates||[]).concat(ge),se}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(ge=>this.map.set(ge,this.cloneFrom.map.get(ge))),this.updates.forEach(ge=>{switch(ge.op){case"a":case"s":const se=("a"===ge.op?this.map.get(ge.param):void 0)||[];se.push(Ke(ge.value)),this.map.set(ge.param,se);break;case"d":if(void 0===ge.value){this.map.delete(ge.param);break}{let Be=this.map.get(ge.param)||[];const st=Be.indexOf(Ke(ge.value));-1!==st&&Be.splice(st,1),Be.length>0?this.map.set(ge.param,Be):this.map.delete(ge.param)}}}),this.cloneFrom=this.updates=null)}}class jt{constructor(){this.map=new Map}set(ge,se){return this.map.set(ge,se),this}get(ge){return this.map.has(ge)||this.map.set(ge,ge.defaultValue()),this.map.get(ge)}delete(ge){return this.map.delete(ge),this}has(ge){return this.map.has(ge)}keys(){return this.map.keys()}}function rt(Ue){return typeof ArrayBuffer<"u"&&Ue instanceof ArrayBuffer}function Je(Ue){return typeof Blob<"u"&&Ue instanceof Blob}function vt(Ue){return typeof FormData<"u"&&Ue instanceof FormData}class ae{constructor(ge,se,Be,st){let Lt;if(this.url=se,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=ge.toUpperCase(),function he(Ue){switch(Ue){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||st?(this.body=void 0!==Be?Be:null,Lt=st):Lt=Be,Lt&&(this.reportProgress=!!Lt.reportProgress,this.withCredentials=!!Lt.withCredentials,Lt.responseType&&(this.responseType=Lt.responseType),Lt.headers&&(this.headers=Lt.headers),Lt.context&&(this.context=Lt.context),Lt.params&&(this.params=Lt.params)),this.headers||(this.headers=new le),this.context||(this.context=new jt),this.params){const Ft=this.params.toString();if(0===Ft.length)this.urlWithParams=se;else{const Vn=se.indexOf("?");this.urlWithParams=se+(-1===Vn?"?":Vn<se.length-1?"&":"")+Ft}}else this.params=new He,this.urlWithParams=se}serializeBody(){return null===this.body?null:rt(this.body)||Je(this.body)||vt(this.body)||function tt(Ue){return typeof URLSearchParams<"u"&&Ue instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof He?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||vt(this.body)?null:Je(this.body)?this.body.type||null:rt(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof He?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(ge={}){const se=ge.method||this.method,Be=ge.url||this.url,st=ge.responseType||this.responseType,Lt=void 0!==ge.body?ge.body:this.body,Ft=void 0!==ge.withCredentials?ge.withCredentials:this.withCredentials,Vn=void 0!==ge.reportProgress?ge.reportProgress:this.reportProgress;let At=ge.headers||this.headers,ir=ge.params||this.params;const xn=ge.context??this.context;return void 0!==ge.setHeaders&&(At=Object.keys(ge.setHeaders).reduce((Sr,fn)=>Sr.set(fn,ge.setHeaders[fn]),At)),ge.setParams&&(ir=Object.keys(ge.setParams).reduce((Sr,fn)=>Sr.set(fn,ge.setParams[fn]),ir)),new ae(se,Be,Lt,{params:ir,headers:At,context:xn,reportProgress:Vn,responseType:st,withCredentials:Ft})}}var Fe=(()=>((Fe=Fe||{})[Fe.Sent=0]="Sent",Fe[Fe.UploadProgress=1]="UploadProgress",Fe[Fe.ResponseHeader=2]="ResponseHeader",Fe[Fe.DownloadProgress=3]="DownloadProgress",Fe[Fe.Response=4]="Response",Fe[Fe.User=5]="User",Fe))();class ne{constructor(ge,se=200,Be="OK"){this.headers=ge.headers||new le,this.status=void 0!==ge.status?ge.status:se,this.statusText=ge.statusText||Be,this.url=ge.url||null,this.ok=this.status>=200&&this.status<300}}class Ie extends ne{constructor(ge={}){super(ge),this.type=Fe.ResponseHeader}clone(ge={}){return new Ie({headers:ge.headers||this.headers,status:void 0!==ge.status?ge.status:this.status,statusText:ge.statusText||this.statusText,url:ge.url||this.url||void 0})}}class de extends ne{constructor(ge={}){super(ge),this.type=Fe.Response,this.body=void 0!==ge.body?ge.body:null}clone(ge={}){return new de({body:void 0!==ge.body?ge.body:this.body,headers:ge.headers||this.headers,status:void 0!==ge.status?ge.status:this.status,statusText:ge.statusText||this.statusText,url:ge.url||this.url||void 0})}}class Ne extends ne{constructor(ge){super(ge,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${ge.url||"(unknown url)"}`:`Http failure response for ${ge.url||"(unknown url)"}: ${ge.status} ${ge.statusText}`,this.error=ge.error||null}}function dt(Ue,ge){return{body:ge,headers:Ue.headers,context:Ue.context,observe:Ue.observe,params:Ue.params,reportProgress:Ue.reportProgress,responseType:Ue.responseType,withCredentials:Ue.withCredentials}}let wt=(()=>{class Ue{constructor(se){this.handler=se}request(se,Be,st={}){let Lt;if(se instanceof ae)Lt=se;else{let At,ir;At=st.headers instanceof le?st.headers:new le(st.headers),st.params&&(ir=st.params instanceof He?st.params:new He({fromObject:st.params})),Lt=new ae(se,Be,void 0!==st.body?st.body:null,{headers:At,context:st.context,params:ir,reportProgress:st.reportProgress,responseType:st.responseType||"json",withCredentials:st.withCredentials})}const Ft=(0,G.of)(Lt).pipe((0,we.b)(At=>this.handler.handle(At)));if(se instanceof ae||"events"===st.observe)return Ft;const Vn=Ft.pipe((0,Me.h)(At=>At instanceof de));switch(st.observe||"body"){case"body":switch(Lt.responseType){case"arraybuffer":return Vn.pipe((0,Re.U)(At=>{if(null!==At.body&&!(At.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return At.body}));case"blob":return Vn.pipe((0,Re.U)(At=>{if(null!==At.body&&!(At.body instanceof Blob))throw new Error("Response is not a Blob.");return At.body}));case"text":return Vn.pipe((0,Re.U)(At=>{if(null!==At.body&&"string"!=typeof At.body)throw new Error("Response is not a string.");return At.body}));default:return Vn.pipe((0,Re.U)(At=>At.body))}case"response":return Vn;default:throw new Error(`Unreachable: unhandled observe type ${st.observe}}`)}}delete(se,Be={}){return this.request("DELETE",se,Be)}get(se,Be={}){return this.request("GET",se,Be)}head(se,Be={}){return this.request("HEAD",se,Be)}jsonp(se,Be){return this.request("JSONP",se,{params:(new He).append(Be,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(se,Be={}){return this.request("OPTIONS",se,Be)}patch(se,Be,st={}){return this.request("PATCH",se,dt(st,Be))}post(se,Be,st={}){return this.request("POST",se,dt(st,Be))}put(se,Be,st={}){return this.request("PUT",se,dt(st,Be))}}return Ue.\u0275fac=function(se){return new(se||Ue)(C.LFG(Oe))},Ue.\u0275prov=C.Yz7({token:Ue,factory:Ue.\u0275fac}),Ue})();class Ct{constructor(ge,se){this.next=ge,this.interceptor=se}handle(ge){return this.interceptor.intercept(ge,this.next)}}const Mt=new C.OlP("HTTP_INTERCEPTORS");let $t=(()=>{class Ue{intercept(se,Be){return Be.handle(se)}}return Ue.\u0275fac=function(se){return new(se||Ue)},Ue.\u0275prov=C.Yz7({token:Ue,factory:Ue.\u0275fac}),Ue})();const vr=/^\)\]\}',?\n/;let yr=(()=>{class Ue{constructor(se){this.xhrFactory=se}handle(se){if("JSONP"===se.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new be.y(Be=>{const st=this.xhrFactory.build();if(st.open(se.method,se.urlWithParams),se.withCredentials&&(st.withCredentials=!0),se.headers.forEach((me,X)=>st.setRequestHeader(me,X.join(","))),se.headers.has("Accept")||st.setRequestHeader("Accept","application/json, text/plain, */*"),!se.headers.has("Content-Type")){const me=se.detectContentTypeHeader();null!==me&&st.setRequestHeader("Content-Type",me)}if(se.responseType){const me=se.responseType.toLowerCase();st.responseType="json"!==me?me:"text"}const Lt=se.serializeBody();let Ft=null;const Vn=()=>{if(null!==Ft)return Ft;const me=st.statusText||"OK",X=new le(st.getAllResponseHeaders()),oe=function _r(Ue){return"responseURL"in Ue&&Ue.responseURL?Ue.responseURL:/^X-Request-URL:/m.test(Ue.getAllResponseHeaders())?Ue.getResponseHeader("X-Request-URL"):null}(st)||se.url;return Ft=new Ie({headers:X,status:st.status,statusText:me,url:oe}),Ft},At=()=>{let{headers:me,status:X,statusText:oe,url:Ee}=Vn(),ye=null;204!==X&&(ye=typeof st.response>"u"?st.responseText:st.response),0===X&&(X=ye?200:0);let ut=X>=200&&X<300;if("json"===se.responseType&&"string"==typeof ye){const gt=ye;ye=ye.replace(vr,"");try{ye=""!==ye?JSON.parse(ye):null}catch(Vt){ye=gt,ut&&(ut=!1,ye={error:Vt,text:ye})}}ut?(Be.next(new de({body:ye,headers:me,status:X,statusText:oe,url:Ee||void 0})),Be.complete()):Be.error(new Ne({error:ye,headers:me,status:X,statusText:oe,url:Ee||void 0}))},ir=me=>{const{url:X}=Vn(),oe=new Ne({error:me,status:st.status||0,statusText:st.statusText||"Unknown Error",url:X||void 0});Be.error(oe)};let xn=!1;const Sr=me=>{xn||(Be.next(Vn()),xn=!0);let X={type:Fe.DownloadProgress,loaded:me.loaded};me.lengthComputable&&(X.total=me.total),"text"===se.responseType&&!!st.responseText&&(X.partialText=st.responseText),Be.next(X)},fn=me=>{let X={type:Fe.UploadProgress,loaded:me.loaded};me.lengthComputable&&(X.total=me.total),Be.next(X)};return st.addEventListener("load",At),st.addEventListener("error",ir),st.addEventListener("timeout",ir),st.addEventListener("abort",ir),se.reportProgress&&(st.addEventListener("progress",Sr),null!==Lt&&st.upload&&st.upload.addEventListener("progress",fn)),st.send(Lt),Be.next({type:Fe.Sent}),()=>{st.removeEventListener("error",ir),st.removeEventListener("abort",ir),st.removeEventListener("load",At),st.removeEventListener("timeout",ir),se.reportProgress&&(st.removeEventListener("progress",Sr),null!==Lt&&st.upload&&st.upload.removeEventListener("progress",fn)),st.readyState!==st.DONE&&st.abort()}})}}return Ue.\u0275fac=function(se){return new(se||Ue)(C.LFG(p.JF))},Ue.\u0275prov=C.Yz7({token:Ue,factory:Ue.\u0275fac}),Ue})();const Ir=new C.OlP("XSRF_COOKIE_NAME"),qt=new C.OlP("XSRF_HEADER_NAME");class rr{}let zn=(()=>{class Ue{constructor(se,Be,st){this.doc=se,this.platform=Be,this.cookieName=st,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const se=this.doc.cookie||"";return se!==this.lastCookieString&&(this.parseCount++,this.lastToken=(0,p.Mx)(se,this.cookieName),this.lastCookieString=se),this.lastToken}}return Ue.\u0275fac=function(se){return new(se||Ue)(C.LFG(p.K0),C.LFG(C.Lbi),C.LFG(Ir))},Ue.\u0275prov=C.Yz7({token:Ue,factory:Ue.\u0275fac}),Ue})(),lr=(()=>{class Ue{constructor(se,Be){this.tokenService=se,this.headerName=Be}intercept(se,Be){const st=se.url.toLowerCase();if("GET"===se.method||"HEAD"===se.method||st.startsWith("http://")||st.startsWith("https://"))return Be.handle(se);const Lt=this.tokenService.getToken();return null!==Lt&&!se.headers.has(this.headerName)&&(se=se.clone({headers:se.headers.set(this.headerName,Lt)})),Be.handle(se)}}return Ue.\u0275fac=function(se){return new(se||Ue)(C.LFG(rr),C.LFG(qt))},Ue.\u0275prov=C.Yz7({token:Ue,factory:Ue.\u0275fac}),Ue})(),pt=(()=>{class Ue{constructor(se,Be){this.backend=se,this.injector=Be,this.chain=null}handle(se){if(null===this.chain){const Be=this.injector.get(Mt,[]);this.chain=Be.reduceRight((st,Lt)=>new Ct(st,Lt),this.backend)}return this.chain.handle(se)}}return Ue.\u0275fac=function(se){return new(se||Ue)(C.LFG(ke),C.LFG(C.zs3))},Ue.\u0275prov=C.Yz7({token:Ue,factory:Ue.\u0275fac}),Ue})(),Hn=(()=>{class Ue{static disable(){return{ngModule:Ue,providers:[{provide:lr,useClass:$t}]}}static withOptions(se={}){return{ngModule:Ue,providers:[se.cookieName?{provide:Ir,useValue:se.cookieName}:[],se.headerName?{provide:qt,useValue:se.headerName}:[]]}}}return Ue.\u0275fac=function(se){return new(se||Ue)},Ue.\u0275mod=C.oAB({type:Ue}),Ue.\u0275inj=C.cJS({providers:[lr,{provide:Mt,useExisting:lr,multi:!0},{provide:rr,useClass:zn},{provide:Ir,useValue:"XSRF-TOKEN"},{provide:qt,useValue:"X-XSRF-TOKEN"}]}),Ue})(),ei=(()=>{class Ue{}return Ue.\u0275fac=function(se){return new(se||Ue)},Ue.\u0275mod=C.oAB({type:Ue}),Ue.\u0275inj=C.cJS({providers:[wt,{provide:Oe,useClass:pt},yr,{provide:ke,useExisting:yr}],imports:[Hn.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]}),Ue})()},4650:(Gt,We,V)=>{V.d(We,{$8M:()=>Pa,$Z:()=>Ap,AFp:()=>Aw,ALo:()=>Z0,AaK:()=>Oe,CHM:()=>Bs,CRH:()=>iw,CZH:()=>jy,CqO:()=>Ef,D6c:()=>kD,EJc:()=>YI,EpF:()=>Ym,F4k:()=>Qm,FYo:()=>Ln,FiY:()=>Nt,G48:()=>yD,Gf:()=>nw,GfV:()=>kl,Gpc:()=>ue,JOm:()=>yu,KtG:()=>Po,LFG:()=>wi,LSH:()=>rd,Lbi:()=>qI,Lck:()=>HE,MAs:()=>Zm,MMx:()=>C_,NdJ:()=>$d,OlP:()=>kr,Oqu:()=>yg,PXZ:()=>dD,Q6J:()=>ug,QGY:()=>lg,QP$:()=>qr,Qsj:()=>On,R0b:()=>Su,RDi:()=>El,Rgc:()=>Cg,SBq:()=>it,Sil:()=>JI,Suo:()=>rw,TTD:()=>ki,TgZ:()=>Yl,VKq:()=>j0,W1O:()=>uw,WLB:()=>$0,X6Q:()=>mD,XFs:()=>pt,Xpm:()=>Ee,Xts:()=>Yi,Y36:()=>al,YKP:()=>O0,YNc:()=>fl,Yjl:()=>Sn,Yz7:()=>kt,Z0I:()=>Wr,ZZ4:()=>K_,_Bn:()=>R0,_UZ:()=>Hu,_Vd:()=>B,_c5:()=>ND,_uU:()=>py,aQg:()=>Y_,c2e:()=>ZI,cJS:()=>un,cg1:()=>jc,dDg:()=>aD,dqk:()=>st,eFA:()=>jw,ekj:()=>zd,eoX:()=>Vw,f3M:()=>M,g9A:()=>Mw,h0i:()=>Uf,hGG:()=>PD,hij:()=>Mf,iGM:()=>tw,ifc:()=>Be,ip1:()=>Sw,jDz:()=>P0,kL8:()=>Ry,lG2:()=>cr,lcZ:()=>K0,lqb:()=>rs,lri:()=>Fw,n5z:()=>qi,oAB:()=>Vt,oxw:()=>Df,q4F:()=>Ec,qLn:()=>cd,qOj:()=>ig,qZA:()=>yf,rWj:()=>Lw,s9C:()=>Tf,sBO:()=>vD,sIi:()=>Ud,s_b:()=>Vy,soG:()=>$y,tb:()=>Rw,tp0:()=>Tn,uIk:()=>og,vHH:()=>Ze,vpe:()=>vl,wAp:()=>Bn,xp6:()=>tm,z2F:()=>Hy,zSh:()=>tr,zs3:()=>Vu});var p=V(7579),C=V(727),G=V(9751),be=V(6451),we=V(3099);function Me(n){for(let r in n)if(n[r]===Me)return r;throw Error("Could not find renamed property on target object.")}function Re(n,r){for(const s in r)r.hasOwnProperty(s)&&!n.hasOwnProperty(s)&&(n[s]=r[s])}function Oe(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(Oe).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const r=n.toString();if(null==r)return""+r;const s=r.indexOf("\n");return-1===s?r:r.substring(0,s)}function ke(n,r){return null==n||""===n?null===r?"":r:null==r||""===r?n:n+" "+r}const le=Me({__forward_ref__:Me});function ue(n){return n.__forward_ref__=ue,n.toString=function(){return Oe(this())},n}function Ce(n){return yt(n)?n():n}function yt(n){return"function"==typeof n&&n.hasOwnProperty(le)&&n.__forward_ref__===ue}class Ze extends Error{constructor(r,s){super(function Ot(n,r){return`NG0${Math.abs(n)}${r?": "+r.trim():""}`}(r,s)),this.code=r}}function Ke(n){return"string"==typeof n?n:null==n?"":String(n)}function rt(n,r){throw new Ze(-201,!1)}function $t(n,r){null==n&&function ht(n,r,s,a){throw new Error(`ASSERTION ERROR: ${n}`+(null==a?"":` [Expected=> ${s} ${a} ${r} <=Actual]`))}(r,n,null,"!=")}function kt(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function un(n){return{providers:n.providers||[],imports:n.imports||[]}}function $n(n){return vr(n,qt)||vr(n,zn)}function Wr(n){return null!==$n(n)}function vr(n,r){return n.hasOwnProperty(r)?n[r]:null}function Ir(n){return n&&(n.hasOwnProperty(rr)||n.hasOwnProperty(lr))?n[rr]:null}const qt=Me({\u0275prov:Me}),rr=Me({\u0275inj:Me}),zn=Me({ngInjectableDef:Me}),lr=Me({ngInjectorDef:Me});var pt=(()=>((pt=pt||{})[pt.Default=0]="Default",pt[pt.Host=1]="Host",pt[pt.Self=2]="Self",pt[pt.SkipSelf=4]="SkipSelf",pt[pt.Optional=8]="Optional",pt))();let nr;function Hn(n){const r=nr;return nr=n,r}function ei(n,r,s){const a=$n(n);return a&&"root"==a.providedIn?void 0===a.value?a.value=a.factory():a.value:s&pt.Optional?null:void 0!==r?r:void rt(Oe(n))}function wr(n){return{toString:n}.toString()}var Ue=(()=>((Ue=Ue||{})[Ue.OnPush=0]="OnPush",Ue[Ue.Default=1]="Default",Ue))(),Be=(()=>{return(n=Be||(Be={}))[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",Be;var n})();const st=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),Vn={},At=[],ir=Me({\u0275cmp:Me}),xn=Me({\u0275dir:Me}),Sr=Me({\u0275pipe:Me}),fn=Me({\u0275mod:Me}),me=Me({\u0275fac:Me}),X=Me({__NG_ELEMENT_ID__:Me});let oe=0;function Ee(n){return wr(()=>{const s=!0===n.standalone,a={},l={type:n.type,providersResolver:null,decls:n.decls,vars:n.vars,factory:null,template:n.template||null,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:a,inputs:null,outputs:null,exportAs:n.exportAs||null,onPush:n.changeDetection===Ue.OnPush,directiveDefs:null,pipeDefs:null,standalone:s,dependencies:s&&n.dependencies||null,getStandaloneInjector:null,selectors:n.selectors||At,viewQuery:n.viewQuery||null,features:n.features||null,data:n.data||{},encapsulation:n.encapsulation||Be.Emulated,id:"c"+oe++,styles:n.styles||At,_:null,setInput:null,schemas:n.schemas||null,tView:null},h=n.dependencies,y=n.features;return l.inputs=gn(n.inputs,a),l.outputs=gn(n.outputs),y&&y.forEach(I=>I(l)),l.directiveDefs=h?()=>("function"==typeof h?h():h).map(ut).filter(gt):null,l.pipeDefs=h?()=>("function"==typeof h?h():h).map(kn).filter(gt):null,l})}function ut(n){return ln(n)||Jn(n)}function gt(n){return null!==n}function Vt(n){return wr(()=>({type:n.type,bootstrap:n.bootstrap||At,declarations:n.declarations||At,imports:n.imports||At,exports:n.exports||At,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function gn(n,r){if(null==n)return Vn;const s={};for(const a in n)if(n.hasOwnProperty(a)){let l=n[a],h=l;Array.isArray(l)&&(h=l[1],l=l[0]),s[l]=a,r&&(r[l]=h)}return s}const cr=Ee;function Sn(n){return{type:n.type,name:n.name,factory:null,pure:!1!==n.pure,standalone:!0===n.standalone,onDestroy:n.type.prototype.ngOnDestroy||null}}function ln(n){return n[ir]||null}function Jn(n){return n[xn]||null}function kn(n){return n[Sr]||null}function qr(n){const r=ln(n)||Jn(n)||kn(n);return null!==r&&r.standalone}function $r(n,r){const s=n[fn]||null;if(!s&&!0===r)throw new Error(`Type ${Oe(n)} does not have '\u0275mod' property.`);return s}function er(n){return Array.isArray(n)&&"object"==typeof n[1]}function Kr(n){return Array.isArray(n)&&!0===n[1]}function Ws(n){return 0!=(8&n.flags)}function ys(n){return 2==(2&n.flags)}function qs(n){return 1==(1&n.flags)}function xr(n){return null!==n.template}function ni(n){return 0!=(256&n[2])}function Pi(n,r){return n.hasOwnProperty(me)?n[me]:null}class Xi{constructor(r,s,a){this.previousValue=r,this.currentValue=s,this.firstChange=a}isFirstChange(){return this.firstChange}}function ki(){return ls}function ls(n){return n.type.prototype.ngOnChanges&&(n.setInput=cs),Fs}function Fs(){const n=_o(this),r=n?.current;if(r){const s=n.previous;if(s===Vn)n.previous=r;else for(let a in r)s[a]=r[a];n.current=null,this.ngOnChanges(r)}}function cs(n,r,s,a){const l=_o(n)||function Vs(n,r){return n[Ls]=r}(n,{previous:Vn,current:null}),h=l.current||(l.current={}),y=l.previous,I=this.declaredInputs[s],T=y[I];h[I]=new Xi(T&&T.currentValue,r,y===Vn),n[a]=r}ki.ngInherit=!0;const Ls="__ngSimpleChanges__";function _o(n){return n[Ls]||null}function Mr(n){for(;Array.isArray(n);)n=n[0];return n}function fr(n,r){return Mr(r[n])}function si(n,r){return Mr(r[n.index])}function Ui(n,r){return n.data[r]}function gi(n,r){return n[r]}function Wn(n,r){const s=r[n];return er(s)?s:s[0]}function Di(n){return 4==(4&n[2])}function ws(n){return 64==(64&n[2])}function Qn(n,r){return null==r?null:n[r]}function lo(n){n[18]=0}function Qr(n,r){n[5]+=r;let s=n,a=n[3];for(;null!==a&&(1===r&&1===s[5]||-1===r&&0===s[5]);)a[5]+=r,s=a,a=a[3]}const yn={lFrame:Rs(null),bindingsEnabled:!0};function Es(){return yn.bindingsEnabled}function ft(){return yn.lFrame.lView}function Rn(){return yn.lFrame.tView}function Bs(n){return yn.lFrame.contextLView=n,n[8]}function Po(n){return yn.lFrame.contextLView=null,n}function Ur(){let n=ts();for(;null!==n&&64===n.type;)n=n.parent;return n}function ts(){return yn.lFrame.currentTNode}function hs(n,r){const s=yn.lFrame;s.currentTNode=n,s.isParent=r}function Io(){return yn.lFrame.isParent}function A(){const n=yn.lFrame;let r=n.bindingRootIndex;return-1===r&&(r=n.bindingRootIndex=n.tView.bindingStartIndex),r}function nn(){return yn.lFrame.bindingIndex++}function ji(n,r){const s=yn.lFrame;s.bindingIndex=s.bindingRootIndex=n,Xs(r)}function Xs(n){yn.lFrame.currentDirectiveIndex=n}function zo(){return yn.lFrame.currentQueryIndex}function co(n){yn.lFrame.currentQueryIndex=n}function Ea(n){const r=n[1];return 2===r.type?r.declTNode:1===r.type?n[6]:null}function Rr(n,r,s){if(s&pt.SkipSelf){let l=r,h=n;for(;!(l=l.parent,null!==l||s&pt.Host||(l=Ea(h),null===l||(h=h[15],10&l.type))););if(null===l)return!1;r=l,n=h}const a=yn.lFrame=da();return a.currentTNode=r,a.lView=n,!0}function Wo(n){const r=da(),s=n[1];yn.lFrame=r,r.currentTNode=s.firstChild,r.lView=n,r.tView=s,r.contextLView=n,r.bindingIndex=s.bindingStartIndex,r.inI18n=!1}function da(){const n=yn.lFrame,r=null===n?null:n.child;return null===r?Rs(n):r}function Rs(n){const r={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=r),r}function ha(){const n=yn.lFrame;return yn.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const S=ha;function $(){const n=ha();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function fe(){return yn.lFrame.selectedIndex}function ze(n){yn.lFrame.selectedIndex=n}function nt(){const n=yn.lFrame;return Ui(n.tView,n.selectedIndex)}function pr(n,r){for(let s=r.directiveStart,a=r.directiveEnd;s<a;s++){const h=n.data[s].type.prototype,{ngAfterContentInit:y,ngAfterContentChecked:I,ngAfterViewInit:T,ngAfterViewChecked:U,ngOnDestroy:Z}=h;y&&(n.contentHooks||(n.contentHooks=[])).push(-s,y),I&&((n.contentHooks||(n.contentHooks=[])).push(s,I),(n.contentCheckHooks||(n.contentCheckHooks=[])).push(s,I)),T&&(n.viewHooks||(n.viewHooks=[])).push(-s,T),U&&((n.viewHooks||(n.viewHooks=[])).push(s,U),(n.viewCheckHooks||(n.viewCheckHooks=[])).push(s,U)),null!=Z&&(n.destroyHooks||(n.destroyHooks=[])).push(s,Z)}}function Or(n,r,s){eo(n,r,3,s)}function $s(n,r,s,a){(3&n[2])===s&&eo(n,r,s,a)}function Os(n,r){let s=n[2];(3&s)===r&&(s&=2047,s+=1,n[2]=s)}function eo(n,r,s,a){const h=a??-1,y=r.length-1;let I=0;for(let T=void 0!==a?65535&n[18]:0;T<y;T++)if("number"==typeof r[T+1]){if(I=r[T],null!=a&&I>=a)break}else r[T]<0&&(n[18]+=65536),(I<h||-1==h)&&(Co(n,s,r,T),n[18]=(4294901760&n[18])+T+2),T++}function Co(n,r,s,a){const l=s[a]<0,h=s[a+1],I=n[l?-s[a]:s[a]];if(l){if(n[2]>>11<n[18]>>16&&(3&n[2])===r){n[2]+=2048;try{h.call(I)}finally{}}}else try{h.call(I)}finally{}}class x{constructor(r,s,a){this.factory=r,this.resolving=!1,this.canSeeViewProviders=s,this.injectImpl=a}}function An(n,r,s){let a=0;for(;a<s.length;){const l=s[a];if("number"==typeof l){if(0!==l)break;a++;const h=s[a++],y=s[a++],I=s[a++];n.setAttribute(r,y,I,h)}else{const h=l,y=s[++a];Jr(h)?n.setProperty(r,h,y):n.setAttribute(r,h,y),a++}}return a}function Gn(n){return 3===n||4===n||6===n}function Jr(n){return 64===n.charCodeAt(0)}function Nr(n,r){if(null!==r&&0!==r.length)if(null===n||0===n.length)n=r.slice();else{let s=-1;for(let a=0;a<r.length;a++){const l=r[a];"number"==typeof l?s=l:0===s||ai(n,s,l,null,-1===s||2===s?r[++a]:null)}}return n}function ai(n,r,s,a,l){let h=0,y=n.length;if(-1===r)y=-1;else for(;h<n.length;){const I=n[h++];if("number"==typeof I){if(I===r){y=-1;break}if(I>r){y=h-1;break}}}for(;h<n.length;){const I=n[h];if("number"==typeof I)break;if(I===s){if(null===a)return void(null!==l&&(n[h+1]=l));if(a===n[h+1])return void(n[h+2]=l)}h++,null!==a&&h++,null!==l&&h++}-1!==y&&(n.splice(y,0,r),h=y+1),n.splice(h++,0,s),null!==a&&n.splice(h++,0,a),null!==l&&n.splice(h++,0,l)}function gr(n){return-1!==n}function br(n){return 32767&n}function $i(n,r){let s=function ui(n){return n>>16}(n),a=r;for(;s>0;)a=a[15],s--;return a}let Hi=!0;function xi(n){const r=Hi;return Hi=n,r}let li=0;const ns={};function Ma(n,r){const s=zi(n,r);if(-1!==s)return s;const a=r[1];a.firstCreatePass&&(n.injectorIndex=r.length,Ra(a.data,n),Ra(r,null),Ra(a.blueprint,null));const l=ta(n,r),h=n.injectorIndex;if(gr(l)){const y=br(l),I=$i(l,r),T=I[1].data;for(let U=0;U<8;U++)r[h+U]=I[y+U]|T[y+U]}return r[h+8]=l,h}function Ra(n,r){n.push(0,0,0,0,0,0,0,0,r)}function zi(n,r){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===r[n.injectorIndex+8]?-1:n.injectorIndex}function ta(n,r){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let s=0,a=null,l=r;for(;null!==l;){if(a=Na(l),null===a)return-1;if(s++,l=l[15],-1!==a.injectorIndex)return a.injectorIndex|s<<16}return-1}function to(n,r,s){!function To(n,r,s){let a;"string"==typeof s?a=s.charCodeAt(0)||0:s.hasOwnProperty(X)&&(a=s[X]),null==a&&(a=s[X]=li++);const l=255&a;r.data[n+(l>>5)]|=1<<l}(n,r,s)}function fa(n,r,s){if(s&pt.Optional)return n;rt()}function Tt(n,r,s,a){if(s&pt.Optional&&void 0===a&&(a=null),0==(s&(pt.Self|pt.Host))){const l=n[9],h=Hn(void 0);try{return l?l.get(r,a,s&pt.Optional):ei(r,a,s&pt.Optional)}finally{Hn(h)}}return fa(a,0,s)}function Pr(n,r,s,a=pt.Default,l){if(null!==n){if(1024&r[2]){const y=function Ia(n,r,s,a,l){let h=n,y=r;for(;null!==h&&null!==y&&1024&y[2]&&!(256&y[2]);){const I=Fo(h,y,s,a|pt.Self,ns);if(I!==ns)return I;let T=h.parent;if(!T){const U=y[21];if(U){const Z=U.get(s,ns,a);if(Z!==ns)return Z}T=Na(y),y=y[15]}h=T}return l}(n,r,s,a,ns);if(y!==ns)return y}const h=Fo(n,r,s,a,ns);if(h!==ns)return h}return Tt(r,s,a,l)}function Fo(n,r,s,a,l){const h=function Au(n){if("string"==typeof n)return n.charCodeAt(0)||0;const r=n.hasOwnProperty(X)?n[X]:void 0;return"number"==typeof r?r>=0?255&r:Wi:r}(s);if("function"==typeof h){if(!Rr(r,n,a))return a&pt.Host?fa(l,0,a):Tt(r,s,a,l);try{const y=h(a);if(null!=y||a&pt.Optional)return y;rt()}finally{S()}}else if("number"==typeof h){let y=null,I=zi(n,r),T=-1,U=a&pt.Host?r[16][6]:null;for((-1===I||a&pt.SkipSelf)&&(T=-1===I?ta(n,r):r[I+8],-1!==T&&Qe(a,!1)?(y=r[1],I=br(T),r=$i(T,r)):I=-1);-1!==I;){const Z=r[1];if(Ht(h,I,Z.data)){const ee=za(I,r,s,y,a,U);if(ee!==ns)return ee}T=r[I+8],-1!==T&&Qe(a,r[1].data[I+8]===U)&&Ht(h,I,r)?(y=Z,I=br(T),r=$i(T,r)):I=-1}}return l}function za(n,r,s,a,l,h){const y=r[1],I=y.data[n+8],Z=Qt(I,y,s,null==a?ys(I)&&Hi:a!=y&&0!=(3&I.type),l&pt.Host&&h===I);return null!==Z?vn(r,y,Z,I):ns}function Qt(n,r,s,a,l){const h=n.providerIndexes,y=r.data,I=1048575&h,T=n.directiveStart,Z=h>>20,Se=l?I+Z:n.directiveEnd;for(let $e=a?I:I+Z;$e<Se;$e++){const _t=y[$e];if($e<T&&s===_t||$e>=T&&_t.type===s)return $e}if(l){const $e=y[T];if($e&&xr($e)&&$e.type===s)return T}return null}function vn(n,r,s,a){let l=n[s];const h=r.data;if(function O(n){return n instanceof x}(l)){const y=l;y.resolving&&function Bt(n,r){const s=r?`. Dependency path: ${r.join(" > ")} > ${n}`:"";throw new Ze(-200,`Circular dependency in DI detected for ${n}${s}`)}(function He(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():Ke(n)}(h[s]));const I=xi(y.canSeeViewProviders);y.resolving=!0;const T=y.injectImpl?Hn(y.injectImpl):null;Rr(n,a,pt.Default);try{l=n[s]=y.factory(void 0,h,n,a),r.firstCreatePass&&s>=a.directiveStart&&function oi(n,r,s){const{ngOnChanges:a,ngOnInit:l,ngDoCheck:h}=r.type.prototype;if(a){const y=ls(r);(s.preOrderHooks||(s.preOrderHooks=[])).push(n,y),(s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(n,y)}l&&(s.preOrderHooks||(s.preOrderHooks=[])).push(0-n,l),h&&((s.preOrderHooks||(s.preOrderHooks=[])).push(n,h),(s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(n,h))}(s,h[s],r)}finally{null!==T&&Hn(T),xi(I),y.resolving=!1,S()}}return l}function Ht(n,r,s){return!!(s[r+(n>>5)]&1<<n)}function Qe(n,r){return!(n&pt.Self||n&pt.Host&&r)}class Et{constructor(r,s){this._tNode=r,this._lView=s}get(r,s,a){return Pr(this._tNode,this._lView,r,a,s)}}function Wi(){return new Et(Ur(),ft())}function qi(n){return wr(()=>{const r=n.prototype.constructor,s=r[me]||nu(r),a=Object.prototype;let l=Object.getPrototypeOf(n.prototype).constructor;for(;l&&l!==a;){const h=l[me]||nu(l);if(h&&h!==s)return h;l=Object.getPrototypeOf(l)}return h=>new h})}function nu(n){return yt(n)?()=>{const r=nu(Ce(n));return r&&r()}:Pi(n)}function Na(n){const r=n[1],s=r.type;return 2===s?r.declTNode:1===s?n[6]:null}function Pa(n){return function Oa(n,r){if("class"===r)return n.classes;if("style"===r)return n.styles;const s=n.attrs;if(s){const a=s.length;let l=0;for(;l<a;){const h=s[l];if(Gn(h))break;if(0===h)l+=2;else if("number"==typeof h)for(l++;l<a&&"string"==typeof s[l];)l++;else{if(h===r)return s[l+1];l+=2}}}return null}(Ur(),n)}const qo="__parameters__";function ga(n,r,s){return wr(()=>{const a=function iu(n){return function(...s){if(n){const a=n(...s);for(const l in a)this[l]=a[l]}}}(r);function l(...h){if(this instanceof l)return a.apply(this,h),this;const y=new l(...h);return I.annotation=y,I;function I(T,U,Z){const ee=T.hasOwnProperty(qo)?T[qo]:Object.defineProperty(T,qo,{value:[]})[qo];for(;ee.length<=Z;)ee.push(null);return(ee[Z]=ee[Z]||[]).push(y),T}}return s&&(l.prototype=Object.create(s.prototype)),l.prototype.ngMetadataName=n,l.annotationCls=l,l})}class kr{constructor(r,s){this._desc=r,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof s?this.__NG_ELEMENT_ID__=s:void 0!==s&&(this.\u0275prov=kt({token:this,providedIn:s.providedIn||"root",factory:s.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function fo(n,r){void 0===r&&(r=n);for(let s=0;s<n.length;s++){let a=n[s];Array.isArray(a)?(r===n&&(r=n.slice(0,s)),fo(a,r)):r!==n&&r.push(a)}return r}function vi(n,r){n.forEach(s=>Array.isArray(s)?vi(s,r):r(s))}function ou(n,r,s){r>=n.length?n.push(s):n.splice(r,0,s)}function Ca(n,r){return r>=n.length-1?n.pop():n.splice(r,1)[0]}function Cs(n,r,s){let a=_(n,r);return a>=0?n[1|a]=s:(a=~a,function qe(n,r,s,a){let l=n.length;if(l==r)n.push(s,a);else if(1===l)n.push(a,n[0]),n[0]=s;else{for(l--,n.push(n[l-1],n[l]);l>r;)n[l]=n[l-2],l--;n[r]=s,n[r+1]=a}}(n,a,r,s)),a}function Vo(n,r){const s=_(n,r);if(s>=0)return n[1|s]}function _(n,r){return function v(n,r,s){let a=0,l=n.length>>s;for(;l!==a;){const h=a+(l-a>>1),y=n[h<<s];if(r===y)return h<<s;y>r?l=h:a=h+1}return~(l<<s)}(n,r,1)}const Cn={},Kn="__NG_DI_FLAG__",po="ngTempTokenPath",hi=/\n/gm,_i="__source";let Fa;function go(n){const r=Fa;return Fa=n,r}function Fi(n,r=pt.Default){if(void 0===Fa)throw new Ze(-203,!1);return null===Fa?ei(n,void 0,r):Fa.get(n,r&pt.Optional?null:void 0,r)}function wi(n,r=pt.Default){return(function En(){return nr}()||Fi)(Ce(n),r)}function M(n,r=pt.Default){return"number"!=typeof r&&(r=0|(r.optional&&8)|(r.host&&1)|(r.self&&2)|(r.skipSelf&&4)),wi(n,r)}function k(n){const r=[];for(let s=0;s<n.length;s++){const a=Ce(n[s]);if(Array.isArray(a)){if(0===a.length)throw new Ze(900,!1);let l,h=pt.Default;for(let y=0;y<a.length;y++){const I=a[y],T=ie(I);"number"==typeof T?-1===T?l=I.token:h|=T:l=I}r.push(wi(l,h))}else r.push(wi(a))}return r}function W(n,r){return n[Kn]=r,n.prototype[Kn]=r,n}function ie(n){return n[Kn]}const Nt=W(ga("Optional"),8),Tn=W(ga("SkipSelf"),4);let Zc;function El(n){Zc=n}class lc{constructor(r){this.changingThisBreaksApplicationSecurity=r}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function ro(n){return n instanceof lc?n.changingThisBreaksApplicationSecurity:n}const Yc=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;var Ss=(()=>((Ss=Ss||{})[Ss.NONE=0]="NONE",Ss[Ss.HTML=1]="HTML",Ss[Ss.STYLE=2]="STYLE",Ss[Ss.SCRIPT=3]="SCRIPT",Ss[Ss.URL=4]="URL",Ss[Ss.RESOURCE_URL=5]="RESOURCE_URL",Ss))();function rd(n){const r=function Nu(){const n=ft();return n&&n[12]}();return r?r.sanitize(Ss.URL,n)||"":function Yu(n,r){const s=function Mu(n){return n instanceof lc&&n.getTypeName()||null}(n);if(null!=s&&s!==r){if("ResourceURL"===s&&"URL"===r)return!0;throw new Error(`Required a safe ${r}, got a ${s} (see https://g.co/ng/security#xss)`)}return s===r}(n,"URL")?ro(n):function cu(n){return(n=String(n)).match(Yc)?n:"unsafe:"+n}(Ke(n))}const Yi=new kr("ENVIRONMENT_INITIALIZER"),Tr=new kr("INJECTOR",-1),sd=new kr("INJECTOR_DEF_TYPES");class Rl{get(r,s=Cn){if(s===Cn){const a=new Error(`NullInjectorError: No provider for ${Oe(r)}!`);throw a.name="NullInjectorError",a}return s}}function fu(...n){return{\u0275providers:Qo(0,n)}}function Qo(n,...r){const s=[],a=new Set;let l;return vi(r,h=>{const y=h;Ol(y,s,[],a)&&(l||(l=[]),l.push(y))}),void 0!==l&&Gs(l,s),s}function Gs(n,r){for(let s=0;s<n.length;s++){const{providers:l}=n[s];vi(l,h=>{r.push(h)})}}function Ol(n,r,s,a){if(!(n=Ce(n)))return!1;let l=null,h=Ir(n);const y=!h&&ln(n);if(h||y){if(y&&!y.standalone)return!1;l=n}else{const T=n.ngModule;if(h=Ir(T),!h)return!1;l=T}const I=a.has(l);if(y){if(I)return!1;if(a.add(l),y.dependencies){const T="function"==typeof y.dependencies?y.dependencies():y.dependencies;for(const U of T)Ol(U,r,s,a)}}else{if(!h)return!1;{if(null!=h.imports&&!I){let U;a.add(l);try{vi(h.imports,Z=>{Ol(Z,r,s,a)&&(U||(U=[]),U.push(Z))})}finally{}void 0!==U&&Gs(U,r)}if(!I){const U=Pi(l)||(()=>new l);r.push({provide:l,useFactory:U,deps:At},{provide:sd,useValue:l,multi:!0},{provide:Yi,useValue:()=>wi(l),multi:!0})}const T=h.providers;null==T||I||vi(T,Z=>{r.push(Z)})}}return l!==n&&void 0!==n.providers}const yc=Me({provide:String,useValue:Me});function Jo(n){return null!==n&&"object"==typeof n&&yc in n}function ku(n){return"function"==typeof n}const tr=new kr("Set Injector scope."),vc={},_c={};let Fu;function Ya(){return void 0===Fu&&(Fu=new Rl),Fu}class rs{}class Nl extends rs{constructor(r,s,a,l){super(),this.parent=s,this.source=a,this.scopes=l,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,wc(r,y=>this.processProvider(y)),this.records.set(Tr,gu(void 0,this)),l.has("environment")&&this.records.set(rs,gu(void 0,this));const h=this.records.get(tr);null!=h&&"string"==typeof h.value&&this.scopes.add(h.value),this.injectorDefTypes=new Set(this.get(sd.multi,At,pt.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const r of this._ngOnDestroyHooks)r.ngOnDestroy();for(const r of this._onDestroyHooks)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(r){this._onDestroyHooks.push(r)}runInContext(r){this.assertNotDestroyed();const s=go(this),a=Hn(void 0);try{return r()}finally{go(s),Hn(a)}}get(r,s=Cn,a=pt.Default){this.assertNotDestroyed();const l=go(this),h=Hn(void 0);try{if(!(a&pt.SkipSelf)){let I=this.records.get(r);if(void 0===I){const T=function ad(n){return"function"==typeof n||"object"==typeof n&&n instanceof kr}(r)&&$n(r);I=T&&this.injectableDefInScope(T)?gu(el(r),vc):null,this.records.set(r,I)}if(null!=I)return this.hydrate(r,I)}return(a&pt.Self?Ya():this.parent).get(r,s=a&pt.Optional&&s===Cn?null:s)}catch(y){if("NullInjectorError"===y.name){if((y[po]=y[po]||[]).unshift(Oe(r)),l)throw y;return function Pe(n,r,s,a){const l=n[po];throw r[_i]&&l.unshift(r[_i]),n.message=function Ye(n,r,s,a=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.slice(2):n;let l=Oe(r);if(Array.isArray(r))l=r.map(Oe).join(" -> ");else if("object"==typeof r){let h=[];for(let y in r)if(r.hasOwnProperty(y)){let I=r[y];h.push(y+":"+("string"==typeof I?JSON.stringify(I):Oe(I)))}l=`{${h.join(", ")}}`}return`${s}${a?"("+a+")":""}[${l}]: ${n.replace(hi,"\n  ")}`}("\n"+n.message,l,s,a),n.ngTokenPath=l,n[po]=null,n}(y,r,"R3InjectorError",this.source)}throw y}finally{Hn(h),go(l)}}resolveInjectorInitializers(){const r=go(this),s=Hn(void 0);try{const a=this.get(Yi.multi,At,pt.Self);for(const l of a)l()}finally{go(r),Hn(s)}}toString(){const r=[],s=this.records;for(const a of s.keys())r.push(Oe(a));return`R3Injector[${r.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Ze(205,!1)}processProvider(r){let s=ku(r=Ce(r))?r:Ce(r&&r.provide);const a=function Qa(n){return Jo(n)?gu(void 0,n.useValue):gu(Lu(n),vc)}(r);if(ku(r)||!0!==r.multi)this.records.get(s);else{let l=this.records.get(s);l||(l=gu(void 0,vc,!0),l.factory=()=>k(l.multi),this.records.set(s,l)),s=r,l.multi.push(r)}this.records.set(s,a)}hydrate(r,s){return s.value===vc&&(s.value=_c,s.value=s.factory()),"object"==typeof s.value&&s.value&&function qf(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(s.value)&&this._ngOnDestroyHooks.add(s.value),s.value}injectableDefInScope(r){if(!r.providedIn)return!1;const s=Ce(r.providedIn);return"string"==typeof s?"any"===s||this.scopes.has(s):this.injectorDefTypes.has(s)}}function el(n){const r=$n(n),s=null!==r?r.factory:Pi(n);if(null!==s)return s;if(n instanceof kr)throw new Ze(204,!1);if(n instanceof Function)return function dh(n){const r=n.length;if(r>0)throw function ra(n,r){const s=[];for(let a=0;a<n;a++)s.push(r);return s}(r,"?"),new Ze(204,!1);const s=function _r(n){const r=n&&(n[qt]||n[zn]);if(r){const s=function yr(n){if(n.hasOwnProperty("name"))return n.name;const r=(""+n).match(/^function\s*([^\s(]+)/);return null===r?"":r[1]}(n);return console.warn(`DEPRECATED: DI is instantiating a token "${s}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${s}" class.`),r}return null}(n);return null!==s?()=>s.factory(n):()=>new n}(n);throw new Ze(204,!1)}function Lu(n,r,s){let a;if(ku(n)){const l=Ce(n);return Pi(l)||el(l)}if(Jo(n))a=()=>Ce(n.useValue);else if(function Pu(n){return!(!n||!n.useFactory)}(n))a=()=>n.useFactory(...k(n.deps||[]));else if(function od(n){return!(!n||!n.useExisting)}(n))a=()=>wi(Ce(n.useExisting));else{const l=Ce(n&&(n.useClass||n.provide));if(!function hh(n){return!!n.deps}(n))return Pi(l)||el(l);a=()=>new l(...k(n.deps))}return a}function gu(n,r,s=!1){return{factory:n,value:r,multi:s?[]:void 0}}function Pl(n){return!!n.\u0275providers}function wc(n,r){for(const s of n)Array.isArray(s)?wc(s,r):Pl(s)?wc(s.\u0275providers,r):r(s)}class zs{}class E{resolveComponentFactory(r){throw function m(n){const r=Error(`No component factory found for ${Oe(n)}. Did you add it to @NgModule.entryComponents?`);return r.ngComponent=n,r}(r)}}let B=(()=>{class n{}return n.NULL=new E,n})();function Y(){return Te(Ur(),ft())}function Te(n,r){return new it(si(n,r))}let it=(()=>{class n{constructor(s){this.nativeElement=s}}return n.__NG_ELEMENT_ID__=Y,n})();function Pt(n){return n instanceof it?n.nativeElement:n}class Ln{}let On=(()=>{class n{}return n.__NG_ELEMENT_ID__=()=>function is(){const n=ft(),s=Wn(Ur().index,n);return(er(s)?s:n)[11]}(),n})(),sa=(()=>{class n{}return n.\u0275prov=kt({token:n,providedIn:"root",factory:()=>null}),n})();class kl{constructor(r){this.full=r,this.major=r.split(".")[0],this.minor=r.split(".")[1],this.patch=r.split(".").slice(2).join(".")}}const Ec=new kl("14.2.0"),tl={};function Jf(n){return n.ngOriginalError}class cd{constructor(){this._console=console}handleError(r){const s=this._findOriginalError(r);this._console.error("ERROR",r),s&&this._console.error("ORIGINAL ERROR",s)}_findOriginalError(r){let s=r&&Jf(r);for(;s&&Jf(s);)s=Jf(s);return s||null}}const Xf=new Map;let nv=0;const io="__ngContext__";function Ao(n,r){er(r)?(n[io]=r[20],function iv(n){Xf.set(n[20],n)}(r)):n[io]=r}function Fl(n){const r=n[io];return"number"==typeof r?function ep(n){return Xf.get(n)||null}(r):r||null}function dd(n){const r=Fl(n);return r?er(r)?r:r.lView:null}function mu(n){return n instanceof Function?n():n}var yu=(()=>((yu=yu||{})[yu.Important=1]="Important",yu[yu.DashCase=2]="DashCase",yu))();function sp(n,r){return undefined(n,r)}function Xa(n){const r=n[3];return Kr(r)?r[3]:r}function op(n){return _h(n[13])}function ap(n){return _h(n[4])}function _h(n){for(;null!==n&&!Kr(n);)n=n[4];return n}function Cc(n,r,s,a,l){if(null!=a){let h,y=!1;Kr(a)?h=a:er(a)&&(y=!0,a=a[0]);const I=Mr(a);0===n&&null!==s?null==l?dp(r,s,I):_a(r,s,I,l||null,!0):1===n&&null!==s?_a(r,s,I,l||null,!0):2===n?function qg(n,r,s){const a=bh(n,r);a&&function cv(n,r,s,a){n.removeChild(r,s,a)}(n,a,r,s)}(r,I,y):3===n&&r.destroyNode(I),null!=h&&function xo(n,r,s,a,l){const h=s[7];h!==Mr(s)&&Cc(r,n,a,h,l);for(let I=10;I<s.length;I++){const T=s[I];gd(T[1],T,n,r,a,h)}}(r,n,h,s,l)}}function jl(n,r,s){return n.createElement(r,s)}function lp(n,r){const s=n[9],a=s.indexOf(r),l=r[3];512&r[2]&&(r[2]&=-513,Qr(l,-1)),s.splice(a,1)}function vu(n,r){if(n.length<=10)return;const s=10+r,a=n[s];if(a){const l=a[17];null!==l&&l!==n&&lp(l,a),r>0&&(n[s-1][4]=a[4]);const h=Ca(n,10+r);!function $g(n,r){gd(n,r,r[11],2,null,null),r[0]=null,r[6]=null}(a[1],a);const y=h[19];null!==y&&y.detachView(h[1]),a[3]=null,a[4]=null,a[2]&=-65}return a}function $l(n,r){if(!(128&r[2])){const s=r[11];s.destroyNode&&gd(n,r,s,3,null,null),function Gg(n){let r=n[13];if(!r)return Ch(n[1],n);for(;r;){let s=null;if(er(r))s=r[13];else{const a=r[10];a&&(s=a)}if(!s){for(;r&&!r[4]&&r!==n;)er(r)&&Ch(r[1],r),r=r[3];null===r&&(r=n),er(r)&&Ch(r[1],r),s=r&&r[4]}r=s}}(r)}}function Ch(n,r){if(!(128&r[2])){r[2]&=-65,r[2]|=128,function lv(n,r){let s;if(null!=n&&null!=(s=n.destroyHooks))for(let a=0;a<s.length;a+=2){const l=r[s[a]];if(!(l instanceof x)){const h=s[a+1];if(Array.isArray(h))for(let y=0;y<h.length;y+=2){const I=l[h[y]],T=h[y+1];try{T.call(I)}finally{}}else try{h.call(l)}finally{}}}}(n,r),function Hl(n,r){const s=n.cleanup,a=r[7];let l=-1;if(null!==s)for(let h=0;h<s.length-1;h+=2)if("string"==typeof s[h]){const y=s[h+1],I="function"==typeof y?y(r):Mr(r[y]),T=a[l=s[h+2]],U=s[h+3];"boolean"==typeof U?I.removeEventListener(s[h],T,U):U>=0?a[l=U]():a[l=-U].unsubscribe(),h+=2}else{const y=a[l=s[h+1]];s[h].call(y)}if(null!==a){for(let h=l+1;h<a.length;h++)(0,a[h])();r[7]=null}}(n,r),1===r[1].type&&r[11].destroy();const s=r[17];if(null!==s&&Kr(r[3])){s!==r[3]&&lp(s,r);const a=r[19];null!==a&&a.detachView(n)}!function sv(n){Xf.delete(n[20])}(r)}}function Gl(n,r,s){return function cp(n,r,s){let a=r;for(;null!==a&&40&a.type;)a=(r=a).parent;if(null===a)return s[0];if(2&a.flags){const l=n.data[a.directiveStart].encapsulation;if(l===Be.None||l===Be.Emulated)return null}return si(a,s)}(n,r.parent,s)}function _a(n,r,s,a,l){n.insertBefore(r,s,a,l)}function dp(n,r,s){n.appendChild(r,s)}function zg(n,r,s,a,l){null!==a?_a(n,r,s,a,l):dp(n,r,s)}function bh(n,r){return n.parentNode(r)}let fp=function Wg(n,r,s){return 40&n.type?si(n,s):null};function _u(n,r,s,a){const l=Gl(n,a,r),h=r[11],I=function hp(n,r,s){return fp(n,r,s)}(a.parent||r[6],a,r);if(null!=l)if(Array.isArray(s))for(let T=0;T<s.length;T++)zg(h,l,s[T],I,!1);else zg(h,l,s,I,!1)}function ol(n,r){if(null!==r){const s=r.type;if(3&s)return si(r,n);if(4&s)return Sh(-1,n[r.index]);if(8&s){const a=r.child;if(null!==a)return ol(n,a);{const l=n[r.index];return Kr(l)?Sh(-1,l):Mr(l)}}if(32&s)return sp(r,n)()||Mr(n[r.index]);{const a=mp(n,r);return null!==a?Array.isArray(a)?a[0]:ol(Xa(n[16]),a):ol(n,r.next)}}return null}function mp(n,r){return null!==r?n[16][6].projection[r.projection]:null}function Sh(n,r){const s=10+n+1;if(s<r.length){const a=r[s],l=a[1].firstChild;if(null!==l)return ol(a,l)}return r[7]}function Ah(n,r,s,a,l,h,y){for(;null!=s;){const I=a[s.index],T=s.type;if(y&&0===r&&(I&&Ao(Mr(I),a),s.flags|=4),64!=(64&s.flags))if(8&T)Ah(n,r,s.child,a,l,h,!1),Cc(r,n,l,I,h);else if(32&T){const U=sp(s,a);let Z;for(;Z=U();)Cc(r,n,l,Z,h);Cc(r,n,l,I,h)}else 16&T?xh(n,r,a,s,l,h):Cc(r,n,l,I,h);s=y?s.projectionNext:s.next}}function gd(n,r,s,a,l,h){Ah(s,a,n.firstChild,r,l,h,!1)}function xh(n,r,s,a,l,h){const y=s[16],T=y[6].projection[a.projection];if(Array.isArray(T))for(let U=0;U<T.length;U++)Cc(r,n,l,T[U],h);else Ah(n,r,T,y[3],l,h,!0)}function Zg(n,r,s){n.setAttribute(r,"style",s)}function yp(n,r,s){""===s?n.removeAttribute(r,"class"):n.setAttribute(r,"class",s)}function Kg(n,r,s){let a=n.length;for(;;){const l=n.indexOf(r,s);if(-1===l)return l;if(0===l||n.charCodeAt(l-1)<=32){const h=r.length;if(l+h===a||n.charCodeAt(l+h)<=32)return l}s=l+1}}const Yg="ng-template";function Mh(n,r,s){let a=0;for(;a<n.length;){let l=n[a++];if(s&&"class"===l){if(l=n[a],-1!==Kg(l.toLowerCase(),r,0))return!0}else if(1===l){for(;a<n.length&&"string"==typeof(l=n[a++]);)if(l.toLowerCase()===r)return!0;return!1}}return!1}function Qg(n){return 4===n.type&&n.value!==Yg}function Jg(n,r,s){return r===(4!==n.type||s?n.value:Yg)}function vp(n,r,s){let a=4;const l=n.attrs||[],h=function wp(n){for(let r=0;r<n.length;r++)if(Gn(n[r]))return r;return n.length}(l);let y=!1;for(let I=0;I<r.length;I++){const T=r[I];if("number"!=typeof T){if(!y)if(4&a){if(a=2|1&a,""!==T&&!Jg(n,T,s)||""===T&&1===r.length){if(Sa(a))return!1;y=!0}}else{const U=8&a?T:r[++I];if(8&a&&null!==n.attrs){if(!Mh(n.attrs,U,s)){if(Sa(a))return!1;y=!0}continue}const ee=md(8&a?"class":T,l,Qg(n),s);if(-1===ee){if(Sa(a))return!1;y=!0;continue}if(""!==U){let Se;Se=ee>h?"":l[ee+1].toLowerCase();const $e=8&a?Se:null;if($e&&-1!==Kg($e,U,0)||2&a&&U!==Se){if(Sa(a))return!1;y=!0}}}}else{if(!y&&!Sa(a)&&!Sa(T))return!1;if(y&&Sa(T))continue;y=!1,a=T|1&a}}return Sa(a)||y}function Sa(n){return 0==(1&n)}function md(n,r,s,a){if(null===r)return-1;let l=0;if(a||!s){let h=!1;for(;l<r.length;){const y=r[l];if(y===n)return l;if(3===y||6===y)h=!0;else{if(1===y||2===y){let I=r[++l];for(;"string"==typeof I;)I=r[++l];continue}if(4===y)break;if(0===y){l+=4;continue}}l+=h?1:2}return-1}return function Xg(n,r){let s=n.indexOf(4);if(s>-1)for(s++;s<n.length;){const a=n[s];if("number"==typeof a)return-1;if(a===r)return s;s++}return-1}(r,n)}function yd(n,r,s=!1){for(let a=0;a<r.length;a++)if(vp(n,r[a],s))return!0;return!1}function Ep(n,r){return n?":not("+r.trim()+")":r}function em(n){let r=n[0],s=1,a=2,l="",h=!1;for(;s<n.length;){let y=n[s];if("string"==typeof y)if(2&a){const I=n[++s];l+="["+y+(I.length>0?'="'+I+'"':"")+"]"}else 8&a?l+="."+y:4&a&&(l+=" "+y);else""!==l&&!Sa(y)&&(r+=Ep(h,l),l=""),a=y,h=h||!Sa(a);s++}return""!==l&&(r+=Ep(h,l)),r}const or={};function tm(n){Dp(Rn(),ft(),fe()+n,!1)}function Dp(n,r,s,a){if(!a)if(3==(3&r[2])){const h=n.preOrderCheckHooks;null!==h&&Or(r,h,s)}else{const h=n.preOrderHooks;null!==h&&$s(r,h,0,s)}ze(s)}function Nh(n,r=null,s=null,a){const l=sm(n,r,s,a);return l.resolveInjectorInitializers(),l}function sm(n,r=null,s=null,a,l=new Set){const h=[s||At,fu(n)];return a=a||("object"==typeof n?void 0:Oe(n)),new Nl(h,r||Ya(),a||null,l)}let Vu=(()=>{class n{static create(s,a){if(Array.isArray(s))return Nh({name:""},a,s,"");{const l=s.name??"";return Nh({name:l},s.parent,s.providers,l)}}}return n.THROW_IF_NOT_FOUND=Cn,n.NULL=new Rl,n.\u0275prov=kt({token:n,providedIn:"any",factory:()=>wi(Tr)}),n.__NG_ELEMENT_ID__=-1,n})();function al(n,r=pt.Default){const s=ft();return null===s?wi(n,r):Pr(Ur(),s,Ce(n),r)}function Ap(){throw new Error("invalid")}function xc(n,r){return n<<17|r<<2}function Mo(n){return n>>17&32767}function Cd(n){return 2|n}function Uu(n){return(131068&n)>>2}function bd(n,r){return-131069&n|r<<2}function Td(n){return 1|n}function Up(n,r){const s=n.contentQueries;if(null!==s)for(let a=0;a<s.length;a+=2){const l=s[a],h=s[a+1];if(-1!==h){const y=n.data[h];co(l),y.contentQueries(2,r[h],h)}}}function Wh(n,r,s,a,l,h,y,I,T,U,Z){const ee=r.blueprint.slice();return ee[0]=l,ee[2]=76|a,(null!==Z||n&&1024&n[2])&&(ee[2]|=1024),lo(ee),ee[3]=ee[15]=n,ee[8]=s,ee[10]=y||n&&n[10],ee[11]=I||n&&n[11],ee[12]=T||n&&n[12]||null,ee[9]=U||n&&n[9]||null,ee[6]=h,ee[20]=function rv(){return nv++}(),ee[21]=Z,ee[16]=2==r.type?n[16]:ee,ee}function Rc(n,r,s,a,l){let h=n.data[r];if(null===h)h=function Bp(n,r,s,a,l){const h=ts(),y=Io(),T=n.data[r]=function Pv(n,r,s,a,l,h){return{type:s,index:a,insertBeforeIndex:null,injectorIndex:r?r.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:l,attrs:h,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:r,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,y?h:h&&h.parent,s,r,a,l);return null===n.firstChild&&(n.firstChild=T),null!==h&&(y?null==h.child&&null!==T.parent&&(h.child=T):null===h.next&&(h.next=T)),T}(n,r,s,a,l),function fs(){return yn.lFrame.inI18n}()&&(h.flags|=64);else if(64&h.type){h.type=s,h.value=a,h.attrs=l;const y=function Is(){const n=yn.lFrame,r=n.currentTNode;return n.isParent?r:r.parent}();h.injectorIndex=null===y?-1:y.injectorIndex}return hs(h,!0),h}function ul(n,r,s,a){if(0===s)return-1;const l=r.length;for(let h=0;h<s;h++)r.push(a),n.blueprint.push(a),n.data.push(null);return l}function Oc(n,r,s){Wo(r);try{const a=n.viewQuery;null!==a&&Xp(1,a,s);const l=n.template;null!==l&&qh(n,r,l,1,s),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&Up(n,r),n.staticViewQueries&&Xp(2,n.viewQuery,s);const h=n.components;null!==h&&function Mv(n,r){for(let s=0;s<r.length;s++)Kp(n,r[s])}(r,h)}catch(a){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),a}finally{r[2]&=-5,$()}}function ql(n,r,s,a){const l=r[2];if(128!=(128&l)){Wo(r);try{lo(r),function Xe(n){return yn.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==s&&qh(n,r,s,2,a);const y=3==(3&l);if(y){const U=n.preOrderCheckHooks;null!==U&&Or(r,U,null)}else{const U=n.preOrderHooks;null!==U&&$s(r,U,0,null),Os(r,0)}if(function Zp(n){for(let r=op(n);null!==r;r=ap(r)){if(!r[2])continue;const s=r[9];for(let a=0;a<s.length;a++){const l=s[a],h=l[3];0==(512&l[2])&&Qr(h,1),l[2]|=512}}}(r),function Bv(n){for(let r=op(n);null!==r;r=ap(r))for(let s=10;s<r.length;s++){const a=r[s],l=a[1];ws(a)&&ql(l,a,l.template,a[8])}}(r),null!==n.contentQueries&&Up(n,r),y){const U=n.contentCheckHooks;null!==U&&Or(r,U)}else{const U=n.contentHooks;null!==U&&$s(r,U,1),Os(r,1)}!function Im(n,r){const s=n.hostBindingOpCodes;if(null!==s)try{for(let a=0;a<s.length;a++){const l=s[a];if(l<0)ze(~l);else{const h=l,y=s[++a],I=s[++a];ji(y,h),I(2,r[h])}}}finally{ze(-1)}}(n,r);const I=n.components;null!==I&&function Dm(n,r){for(let s=0;s<r.length;s++)jv(n,r[s])}(r,I);const T=n.viewQuery;if(null!==T&&Xp(2,T,a),y){const U=n.viewCheckHooks;null!==U&&Or(r,U)}else{const U=n.viewHooks;null!==U&&$s(r,U,2),Os(r,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),r[2]&=-41,512&r[2]&&(r[2]&=-513,Qr(r[3],-1))}finally{$()}}}function Rv(n,r,s,a){const l=r[10],y=Di(r);try{!y&&l.begin&&l.begin(),y&&Oc(n,r,a),ql(n,r,s,a)}finally{!y&&l.end&&l.end()}}function qh(n,r,s,a,l){const h=fe(),y=2&a;try{ze(-1),y&&r.length>22&&Dp(n,r,22,!1),s(a,l)}finally{ze(h)}}function Pd(n,r,s){!Es()||(function Gp(n,r,s,a){const l=s.directiveStart,h=s.directiveEnd;n.firstCreatePass||Ma(s,r),Ao(a,r);const y=s.initialInputs;for(let I=l;I<h;I++){const T=n.data[I],U=xr(T);U&&Wp(r,s,T);const Z=vn(r,n,I,s);Ao(Z,r),null!==y&&xm(0,I-l,Z,T,0,y),U&&(Wn(s.index,r)[8]=Z)}}(n,r,s,si(s,r)),128==(128&s.flags)&&function Fv(n,r,s){const a=s.directiveStart,l=s.directiveEnd,h=s.index,y=function Js(){return yn.lFrame.currentDirectiveIndex}();try{ze(h);for(let I=a;I<l;I++){const T=n.data[I],U=r[I];Xs(I),(null!==T.hostBindings||0!==T.hostVars||null!==T.hostAttrs)&&tf(T,U)}}finally{ze(-1),Xs(y)}}(n,r,s))}function Zh(n,r,s=si){const a=r.localNames;if(null!==a){let l=r.index+1;for(let h=0;h<a.length;h+=2){const y=a[h+1],I=-1===y?s(r,n):n[y];n[l++]=I}}}function Kh(n){const r=n.tView;return null===r||r.incompleteFirstPass?n.tView=Yh(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts):r}function Yh(n,r,s,a,l,h,y,I,T,U){const Z=22+a,ee=Z+l,Se=function Ov(n,r){const s=[];for(let a=0;a<r;a++)s.push(a<n?null:or);return s}(Z,ee),$e="function"==typeof U?U():U;return Se[1]={type:n,blueprint:Se,template:s,queries:null,viewQuery:I,declTNode:r,data:Se.slice().fill(null,Z),bindingStartIndex:Z,expandoStartIndex:ee,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof h?h():h,pipeRegistry:"function"==typeof y?y():y,firstChild:null,schemas:T,consts:$e,incompleteFirstPass:!1}}function Qh(n,r,s,a){const l=Om(r);null===s?l.push(a):(l.push(s),n.firstCreatePass&&Nm(n).push(a,l.length-1))}function Jh(n,r,s){for(let a in n)if(n.hasOwnProperty(a)){const l=n[a];(s=null===s?{}:s).hasOwnProperty(a)?s[a].push(r,l):s[a]=[r,l]}return s}function Tm(n,r){const a=r.directiveEnd,l=n.data,h=r.attrs,y=[];let I=null,T=null;for(let U=r.directiveStart;U<a;U++){const Z=l[U],ee=Z.inputs,Se=null===h||Qg(r)?null:qp(ee,h);y.push(Se),I=Jh(ee,U,I),T=Jh(Z.outputs,U,T)}null!==I&&(I.hasOwnProperty("class")&&(r.flags|=16),I.hasOwnProperty("style")&&(r.flags|=32)),r.initialInputs=y,r.inputs=I,r.outputs=T}function aa(n,r,s,a,l,h,y,I){const T=si(r,s);let Z,U=r.inputs;!I&&null!=U&&(Z=U[a])?(lf(n,s,Z,a,l),ys(r)&&Xh(s,r.index)):3&r.type&&(a=function jp(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(a),l=null!=y?y(l,r.value||"",a):l,h.setProperty(T,a,l))}function Xh(n,r){const s=Wn(r,n);16&s[2]||(s[2]|=32)}function Hp(n,r,s,a){let l=!1;if(Es()){const h=function Lv(n,r,s){const a=n.directiveRegistry;let l=null;if(a)for(let h=0;h<a.length;h++){const y=a[h];yd(s,y.selectors,!1)&&(l||(l=[]),to(Ma(s,r),n,y.type),xr(y)?(Sm(n,s),l.unshift(y)):l.push(y))}return l}(n,r,s),y=null===a?null:{"":-1};if(null!==h){l=!0,nf(s,n.data.length,h.length);for(let Z=0;Z<h.length;Z++){const ee=h[Z];ee.providersResolver&&ee.providersResolver(ee)}let I=!1,T=!1,U=ul(n,r,h.length,null);for(let Z=0;Z<h.length;Z++){const ee=h[Z];s.mergedAttrs=Nr(s.mergedAttrs,ee.hostAttrs),Am(n,s,r,U,ee),Vv(U,ee,y),null!==ee.contentQueries&&(s.flags|=8),(null!==ee.hostBindings||null!==ee.hostAttrs||0!==ee.hostVars)&&(s.flags|=128);const Se=ee.type.prototype;!I&&(Se.ngOnChanges||Se.ngOnInit||Se.ngDoCheck)&&((n.preOrderHooks||(n.preOrderHooks=[])).push(s.index),I=!0),!T&&(Se.ngOnChanges||Se.ngDoCheck)&&((n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(s.index),T=!0),U++}Tm(n,s)}y&&function zp(n,r,s){if(r){const a=n.localNames=[];for(let l=0;l<r.length;l+=2){const h=s[r[l+1]];if(null==h)throw new Ze(-301,!1);a.push(r[l],h)}}}(s,a,y)}return s.mergedAttrs=Nr(s.mergedAttrs,s.attrs),l}function ef(n,r,s,a,l,h){const y=h.hostBindings;if(y){let I=n.hostBindingOpCodes;null===I&&(I=n.hostBindingOpCodes=[]);const T=~r.index;(function $u(n){let r=n.length;for(;r>0;){const s=n[--r];if("number"==typeof s&&s<0)return s}return 0})(I)!=T&&I.push(T),I.push(a,l,y)}}function tf(n,r){null!==n.hostBindings&&n.hostBindings(1,r)}function Sm(n,r){r.flags|=2,(n.components||(n.components=[])).push(r.index)}function Vv(n,r,s){if(s){if(r.exportAs)for(let a=0;a<r.exportAs.length;a++)s[r.exportAs[a]]=n;xr(r)&&(s[""]=n)}}function nf(n,r,s){n.flags|=1,n.directiveStart=r,n.directiveEnd=r+s,n.providerIndexes=r}function Am(n,r,s,a,l){n.data[a]=l;const h=l.factory||(l.factory=Pi(l.type)),y=new x(h,xr(l),al);n.blueprint[a]=y,s[a]=y,ef(n,r,0,a,ul(n,s,l.hostVars,or),l)}function Wp(n,r,s){const a=si(r,n),l=Kh(s),h=n[10],y=rf(n,Wh(n,l,null,s.onPush?32:16,a,r,h,h.createRenderer(a,s),null,null,null));n[r.index]=y}function Eu(n,r,s,a,l,h){const y=si(n,r);!function kd(n,r,s,a,l,h,y){if(null==h)n.removeAttribute(r,l,s);else{const I=null==y?Ke(h):y(h,a||"",l);n.setAttribute(r,l,I,s)}}(r[11],y,h,n.value,s,a,l)}function xm(n,r,s,a,l,h){const y=h[r];if(null!==y){const I=a.setInput;for(let T=0;T<y.length;){const U=y[T++],Z=y[T++],ee=y[T++];null!==I?a.setInput(s,ee,U,Z):s[Z]=ee}}}function qp(n,r){let s=null,a=0;for(;a<r.length;){const l=r[a];if(0!==l)if(5!==l){if("number"==typeof l)break;n.hasOwnProperty(l)&&(null===s&&(s=[]),s.push(l,n[l],r[a+1])),a+=2}else a+=2;else a+=4}return s}function Mm(n,r,s,a){return new Array(n,!0,!1,r,null,0,a,s,null,null)}function jv(n,r){const s=Wn(r,n);if(ws(s)){const a=s[1];48&s[2]?ql(a,s,a.template,s[8]):s[5]>0&&Fd(s)}}function Fd(n){for(let a=op(n);null!==a;a=ap(a))for(let l=10;l<a.length;l++){const h=a[l];if(ws(h))if(512&h[2]){const y=h[1];ql(y,h,y.template,h[8])}else h[5]>0&&Fd(h)}const s=n[1].components;if(null!==s)for(let a=0;a<s.length;a++){const l=Wn(s[a],n);ws(l)&&l[5]>0&&Fd(l)}}function Kp(n,r){const s=Wn(r,n),a=s[1];(function Yp(n,r){for(let s=r.length;s<n.blueprint.length;s++)r.push(n.blueprint[s])})(a,s),Oc(a,s,s[8])}function rf(n,r){return n[13]?n[14][4]=r:n[13]=r,n[14]=r,r}function sf(n){for(;n;){n[2]|=32;const r=Xa(n);if(ni(n)&&!r)return n;n=r}return null}function Xp(n,r,s){co(0),r(n,s)}function Om(n){return n[7]||(n[7]=[])}function Nm(n){return n.cleanup||(n.cleanup=[])}function uf(n,r){const s=n[9],a=s?s.get(cd,null):null;a&&a.handleError(r)}function lf(n,r,s,a,l){for(let h=0;h<s.length;){const y=s[h++],I=s[h++],T=r[y],U=n.data[y];null!==U.setInput?U.setInput(T,l,a,I):T[I]=l}}function Pc(n,r,s){let a=s?n.styles:null,l=s?n.classes:null,h=0;if(null!==r)for(let y=0;y<r.length;y++){const I=r[y];"number"==typeof I?h=I:1==h?l=ke(l,I):2==h&&(a=ke(a,I+": "+r[++y]+";"))}s?n.styles=a:n.stylesWithoutHost=a,s?n.classes=l:n.classesWithoutHost=l}function kc(n,r,s,a,l=!1){for(;null!==s;){const h=r[s.index];if(null!==h&&a.push(Mr(h)),Kr(h))for(let I=10;I<h.length;I++){const T=h[I],U=T[1].firstChild;null!==U&&kc(T[1],T,U,a)}const y=s.type;if(8&y)kc(n,r,s.child,a);else if(32&y){const I=sp(s,r);let T;for(;T=I();)a.push(T)}else if(16&y){const I=mp(r,s);if(Array.isArray(I))a.push(...I);else{const T=Xa(r[16]);kc(T[1],T,I,a,!0)}}s=l?s.projectionNext:s.next}return a}class ll{constructor(r,s){this._lView=r,this._cdRefInjectingView=s,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const r=this._lView,s=r[1];return kc(s,r,s.firstChild,[])}get context(){return this._lView[8]}set context(r){this._lView[8]=r}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const r=this._lView[3];if(Kr(r)){const s=r[8],a=s?s.indexOf(this):-1;a>-1&&(vu(r,a),Ca(s,a))}this._attachedToViewContainer=!1}$l(this._lView[1],this._lView)}onDestroy(r){Qh(this._lView[1],this._lView,null,r)}markForCheck(){sf(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){!function Qp(n,r,s){const a=r[10];a.begin&&a.begin();try{ql(n,r,n.template,s)}catch(l){throw uf(r,l),l}finally{a.end&&a.end()}}(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Ze(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function va(n,r){gd(n,r,r[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(r){if(this._attachedToViewContainer)throw new Ze(902,!1);this._appRef=r}}class tg extends ll{constructor(r){super(r),this._view=r}detectChanges(){!function af(n){!function Rm(n){for(let r=0;r<n.components.length;r++){const s=n.components[r],a=dd(s);if(null!==a){const l=a[1];Rv(l,a,l.template,s)}}}(n[8])}(this._view)}checkNoChanges(){}get context(){return null}}class cf extends B{constructor(r){super(),this.ngModule=r}resolveComponentFactory(r){const s=ln(r);return new Iu(s,this.ngModule)}}function Ld(n){const r=[];for(let s in n)n.hasOwnProperty(s)&&r.push({propName:n[s],templateName:s});return r}class ng{constructor(r,s){this.injector=r,this.parentInjector=s}get(r,s,a){const l=this.injector.get(r,tl,a);return l!==tl||s===tl?l:this.parentInjector.get(r,s,a)}}class Iu extends zs{constructor(r,s){super(),this.componentDef=r,this.ngModule=s,this.componentType=r.type,this.selector=function Ip(n){return n.map(em).join(",")}(r.selectors),this.ngContentSelectors=r.ngContentSelectors?r.ngContentSelectors:[],this.isBoundToModule=!!s}get inputs(){return Ld(this.componentDef.inputs)}get outputs(){return Ld(this.componentDef.outputs)}create(r,s,a,l){let h=(l=l||this.ngModule)instanceof rs?l:l?.injector;h&&null!==this.componentDef.getStandaloneInjector&&(h=this.componentDef.getStandaloneInjector(h)||h);const y=h?new ng(r,h):r,I=y.get(Ln,null);if(null===I)throw new Ze(407,!1);const T=y.get(sa,null),U=I.createRenderer(null,this.componentDef),Z=this.componentDef.selectors[0][0]||"div",ee=a?function Nv(n,r,s){return n.selectRootElement(r,s===Be.ShadowDom)}(U,a,this.componentDef.encapsulation):jl(I.createRenderer(null,this.componentDef),Z,function Pm(n){const r=n.toLowerCase();return"svg"===r?"svg":"math"===r?"math":null}(Z)),Se=this.componentDef.onPush?288:272,$e={components:[]},_t=Yh(0,null,null,1,0,null,null,null,null,null),xt=Wh(null,_t,$e,Se,null,null,I,U,T,y,null);let en,dn;Wo(xt);try{const Yn=function km(n,r,s,a,l,h){const y=s[1];s[22]=n;const T=Rc(y,22,2,"#host",null),U=T.mergedAttrs=r.hostAttrs;null!==U&&(Pc(T,U,!0),null!==n&&(An(l,n,U),null!==T.classes&&yp(l,n,T.classes),null!==T.styles&&Zg(l,n,T.styles)));const Z=a.createRenderer(n,r),ee=Wh(s,Kh(r),null,r.onPush?32:16,s[22],T,a,Z,h||null,null,null);return y.firstCreatePass&&(to(Ma(T,s),y,r.type),Sm(y,T),nf(T,s.length,1)),rf(s,ee),s[22]=ee}(ee,this.componentDef,xt,I,U);if(ee)if(a)An(U,ee,["ng-version",Ec.full]);else{const{attrs:St,classes:jn}=function gv(n){const r=[],s=[];let a=1,l=2;for(;a<n.length;){let h=n[a];if("string"==typeof h)2===l?""!==h&&r.push(h,n[++a]):8===l&&s.push(h);else{if(!Sa(l))break;l=h}a++}return{attrs:r,classes:s}}(this.componentDef.selectors[0]);St&&An(U,ee,St),jn&&jn.length>0&&yp(U,ee,jn.join(" "))}if(dn=Ui(_t,22),void 0!==s){const St=dn.projection=[];for(let jn=0;jn<this.ngContentSelectors.length;jn++){const zr=s[jn];St.push(null!=zr?Array.from(zr):null)}}en=function Gv(n,r,s,a,l){const h=s[1],y=function $p(n,r,s){const a=Ur();n.firstCreatePass&&(s.providersResolver&&s.providersResolver(s),Am(n,a,r,ul(n,r,1,null),s),Tm(n,a));const l=vn(r,n,a.directiveStart,a);Ao(l,r);const h=si(a,r);return h&&Ao(h,r),l}(h,s,r);if(a.components.push(y),n[8]=y,null!==l)for(const T of l)T(y,r);if(r.contentQueries){const T=Ur();r.contentQueries(1,y,T.directiveStart)}const I=Ur();return!h.firstCreatePass||null===r.hostBindings&&null===r.hostAttrs||(ze(I.index),ef(s[1],I,0,I.directiveStart,I.directiveEnd,r),tf(r,y)),y}(Yn,this.componentDef,xt,$e,[zv]),Oc(_t,xt,null)}finally{$()}return new Hv(this.componentType,en,Te(dn,xt),xt,dn)}}class Hv extends class Zf{}{constructor(r,s,a,l,h){super(),this.location=a,this._rootLView=l,this._tNode=h,this.instance=s,this.hostView=this.changeDetectorRef=new tg(l),this.componentType=r}setInput(r,s){const a=this._tNode.inputs;let l;if(null!==a&&(l=a[r])){const h=this._rootLView;lf(h[1],h,l,r,s),Xh(h,this._tNode.index)}}get injector(){return new Et(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(r){this.hostView.onDestroy(r)}}function zv(){const n=Ur();pr(ft()[1],n)}function ig(n){let r=function Lm(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),s=!0;const a=[n];for(;r;){let l;if(xr(n))l=r.\u0275cmp||r.\u0275dir;else{if(r.\u0275cmp)throw new Ze(903,!1);l=r.\u0275dir}if(l){if(s){a.push(l);const y=n;y.inputs=df(n.inputs),y.declaredInputs=df(n.declaredInputs),y.outputs=df(n.outputs);const I=l.hostBindings;I&&Um(n,I);const T=l.viewQuery,U=l.contentQueries;if(T&&sg(n,T),U&&Vm(n,U),Re(n.inputs,l.inputs),Re(n.declaredInputs,l.declaredInputs),Re(n.outputs,l.outputs),xr(l)&&l.data.animation){const Z=n.data;Z.animation=(Z.animation||[]).concat(l.data.animation)}}const h=l.features;if(h)for(let y=0;y<h.length;y++){const I=h[y];I&&I.ngInherit&&I(n),I===ig&&(s=!1)}}r=Object.getPrototypeOf(r)}!function Wv(n){let r=0,s=null;for(let a=n.length-1;a>=0;a--){const l=n[a];l.hostVars=r+=l.hostVars,l.hostAttrs=Nr(l.hostAttrs,s=Nr(s,l.hostAttrs))}}(a)}function df(n){return n===Vn?{}:n===At?[]:n}function sg(n,r){const s=n.viewQuery;n.viewQuery=s?(a,l)=>{r(a,l),s(a,l)}:r}function Vm(n,r){const s=n.contentQueries;n.contentQueries=s?(a,l,h)=>{r(a,l,h),s(a,l,h)}:r}function Um(n,r){const s=n.hostBindings;n.hostBindings=s?(a,l)=>{r(a,l),s(a,l)}:r}let Vd=null;function cl(){if(!Vd){const n=st.Symbol;if(n&&n.iterator)Vd=n.iterator;else{const r=Object.getOwnPropertyNames(Map.prototype);for(let s=0;s<r.length;++s){const a=r[s];"entries"!==a&&"size"!==a&&Map.prototype[a]===Map.prototype.entries&&(Vd=a)}}}return Vd}function Ud(n){return!!Ha(n)&&(Array.isArray(n)||!(n instanceof Map)&&cl()in n)}function Ha(n){return null!==n&&("function"==typeof n||"object"==typeof n)}function Du(n,r,s){return n[r]=s}function Bo(n,r,s){return!Object.is(n[r],s)&&(n[r]=s,!0)}function og(n,r,s,a){const l=ft();return Bo(l,nn(),r)&&(Rn(),Eu(nt(),l,n,r,s,a)),og}function bi(n,r,s,a){return Bo(n,nn(),s)?r+Ke(s)+a:or}function fl(n,r,s,a,l,h,y,I){const T=ft(),U=Rn(),Z=n+22,ee=U.firstCreatePass?function bu(n,r,s,a,l,h,y,I,T){const U=r.consts,Z=Rc(r,n,4,y||null,Qn(U,I));Hp(r,s,Z,Qn(U,T)),pr(r,Z);const ee=Z.tViews=Yh(2,Z,a,l,h,r.directiveRegistry,r.pipeRegistry,null,r.schemas,U);return null!==r.queries&&(r.queries.template(r,Z),ee.queries=r.queries.embeddedTView(Z)),Z}(Z,U,T,r,s,a,l,h,y):U.data[Z];hs(ee,!1);const Se=T[11].createComment("");_u(U,T,Se,ee),Ao(Se,T),rf(T,T[Z]=Mm(Se,T,Se,ee)),qs(ee)&&Pd(U,T,ee),null!=y&&Zh(T,ee,I)}function Zm(n){return gi(function ca(){return yn.lFrame.contextLView}(),22+n)}function ug(n,r,s){const a=ft();return Bo(a,nn(),r)&&aa(Rn(),nt(),a,n,r,a[11],s,!1),ug}function mf(n,r,s,a,l){const y=l?"class":"style";lf(n,s,r.inputs[y],y,a)}function Yl(n,r,s,a){const l=ft(),h=Rn(),y=22+n,I=l[11],T=l[y]=jl(I,r,function Zn(){return yn.lFrame.currentNamespace}()),U=h.firstCreatePass?function Km(n,r,s,a,l,h,y){const I=r.consts,U=Rc(r,n,2,l,Qn(I,h));return Hp(r,s,U,Qn(I,y)),null!==U.attrs&&Pc(U,U.attrs,!1),null!==U.mergedAttrs&&Pc(U,U.mergedAttrs,!0),null!==r.queries&&r.queries.elementStart(r,U),U}(y,h,l,0,r,s,a):h.data[y];hs(U,!0);const Z=U.mergedAttrs;null!==Z&&An(I,T,Z);const ee=U.classes;null!==ee&&yp(I,T,ee);const Se=U.styles;return null!==Se&&Zg(I,T,Se),64!=(64&U.flags)&&_u(h,l,T,U),0===function Oo(){return yn.lFrame.elementDepthCount}()&&Ao(T,l),function Qs(){yn.lFrame.elementDepthCount++}(),qs(U)&&(Pd(h,l,U),function Cm(n,r,s){if(Ws(r)){const l=r.directiveEnd;for(let h=r.directiveStart;h<l;h++){const y=n.data[h];y.contentQueries&&y.contentQueries(1,s[h],h)}}}(h,U,l)),null!==a&&Zh(l,U),Yl}function yf(){let n=Ur();Io()?function js(){yn.lFrame.isParent=!1}():(n=n.parent,hs(n,!1));const r=n;!function Bi(){yn.lFrame.elementDepthCount--}();const s=Rn();return s.firstCreatePass&&(pr(s,n),Ws(n)&&s.queries.elementEnd(n)),null!=r.classesWithoutHost&&function je(n){return 0!=(16&n.flags)}(r)&&mf(s,r,ft(),r.classesWithoutHost,!0),null!=r.stylesWithoutHost&&function bt(n){return 0!=(32&n.flags)}(r)&&mf(s,r,ft(),r.stylesWithoutHost,!1),yf}function Hu(n,r,s,a){return Yl(n,r,s,a),yf(),Hu}function Ym(){return ft()}function lg(n){return!!n&&"function"==typeof n.then}function Qm(n){return!!n&&"function"==typeof n.subscribe}const Ef=Qm;function $d(n,r,s,a){const l=ft(),h=Rn(),y=Ur();return function dg(n,r,s,a,l,h,y,I){const T=qs(a),Z=n.firstCreatePass&&Nm(n),ee=r[8],Se=Om(r);let $e=!0;if(3&a.type||I){const en=si(a,r),dn=I?I(en):en,Yn=Se.length,St=I?zr=>I(Mr(zr[a.index])):a.index;let jn=null;if(!I&&T&&(jn=function Jl(n,r,s,a){const l=n.cleanup;if(null!=l)for(let h=0;h<l.length-1;h+=2){const y=l[h];if(y===s&&l[h+1]===a){const I=r[7],T=l[h+2];return I.length>T?I[T]:null}"string"==typeof y&&(h+=2)}return null}(n,r,l,a.index)),null!==jn)(jn.__ngLastListenerFn__||jn).__ngNextListenerFn__=h,jn.__ngLastListenerFn__=h,$e=!1;else{h=If(a,r,ee,h,!1);const zr=s.listen(dn,l,h);Se.push(h,zr),Z&&Z.push(l,St,Yn,Yn+1)}}else h=If(a,r,ee,h,!1);const _t=a.outputs;let xt;if($e&&null!==_t&&(xt=_t[l])){const en=xt.length;if(en)for(let dn=0;dn<en;dn+=2){const Ms=r[xt[dn]][xt[dn+1]].subscribe(h),Qd=Se.length;Se.push(h,Ms),Z&&Z.push(l,a.index,Qd,-(Qd+1))}}}(h,l,l[11],y,n,r,0,a),$d}function hg(n,r,s,a){try{return!1!==s(a)}catch(l){return uf(n,l),!1}}function If(n,r,s,a,l){return function h(y){if(y===Function)return a;sf(2&n.flags?Wn(n.index,r):r);let T=hg(r,0,a,y),U=h.__ngNextListenerFn__;for(;U;)T=hg(r,0,U,y)&&T,U=U.__ngNextListenerFn__;return l&&!1===T&&(y.preventDefault(),y.returnValue=!1),T}}function Df(n=1){return function R(n){return(yn.lFrame.contextLView=function q(n,r){for(;n>0;)r=r[15],n--;return r}(n,yn.lFrame.contextLView))[8]}(n)}function Tf(n,r,s){return Xl(n,"",r,"",s),Tf}function Xl(n,r,s,a,l){const h=ft(),y=bi(h,r,s,a);return y!==or&&aa(Rn(),nt(),h,n,y,h[11],l,!1),Xl}function ey(n,r,s,a,l){const h=n[s+1],y=null===r;let I=a?Mo(h):Uu(h),T=!1;for(;0!==I&&(!1===T||y);){const Z=n[I+1];Yv(n[I],r)&&(T=!0,n[I+1]=a?Td(Z):Cd(Z)),I=a?Mo(Z):Uu(Z)}T&&(n[s+1]=a?Cd(h):Td(h))}function Yv(n,r){return null===n||null==r||(Array.isArray(n)?n[1]:n)===r||!(!Array.isArray(n)||"string"!=typeof r)&&_(n,r)>=0}function zd(n,r){return function tu(n,r,s,a){const l=ft(),h=Rn(),y=function dr(n){const r=yn.lFrame,s=r.bindingIndex;return r.bindingIndex=r.bindingIndex+n,s}(2);h.firstUpdatePass&&function dy(n,r,s,a){const l=n.data;if(null===l[s+1]){const h=l[fe()],y=function cy(n,r){return r>=n.expandoStartIndex}(n,s);(function fy(n,r){return 0!=(n.flags&(r?16:32))})(h,a)&&null===r&&!y&&(r=!1),r=function n_(n,r,s,a){const l=function ko(n){const r=yn.lFrame.currentDirectiveIndex;return-1===r?null:n[r]}(n);let h=a?r.residualClasses:r.residualStyles;if(null===l)0===(a?r.classBindings:r.styleBindings)&&(s=Wd(s=Sf(null,n,r,s,a),r.attrs,a),h=null);else{const y=r.directiveStylingLast;if(-1===y||n[y]!==l)if(s=Sf(l,n,r,s,a),null===h){let T=function r_(n,r,s){const a=s?r.classBindings:r.styleBindings;if(0!==Uu(a))return n[Mo(a)]}(n,r,a);void 0!==T&&Array.isArray(T)&&(T=Sf(null,n,r,T[1],a),T=Wd(T,r.attrs,a),function i_(n,r,s,a){n[Mo(s?r.classBindings:r.styleBindings)]=a}(n,r,a,T))}else h=function hy(n,r,s){let a;const l=r.directiveEnd;for(let h=1+r.directiveStylingLast;h<l;h++)a=Wd(a,n[h].hostAttrs,s);return Wd(a,r.attrs,s)}(n,r,a)}return void 0!==h&&(a?r.residualClasses=h:r.residualStyles=h),s}(l,h,r,a),function Gd(n,r,s,a,l,h){let y=h?r.classBindings:r.styleBindings,I=Mo(y),T=Uu(y);n[a]=s;let Z,U=!1;if(Array.isArray(s)){const ee=s;Z=ee[1],(null===Z||_(ee,Z)>0)&&(U=!0)}else Z=s;if(l)if(0!==T){const Se=Mo(n[I+1]);n[a+1]=xc(Se,I),0!==Se&&(n[Se+1]=bd(n[Se+1],a)),n[I+1]=function Iv(n,r){return 131071&n|r<<17}(n[I+1],a)}else n[a+1]=xc(I,0),0!==I&&(n[I+1]=bd(n[I+1],a)),I=a;else n[a+1]=xc(T,0),0===I?I=a:n[T+1]=bd(n[T+1],a),T=a;U&&(n[a+1]=Cd(n[a+1])),ey(n,Z,a,!0),ey(n,Z,a,!1),function gl(n,r,s,a,l){const h=l?n.residualClasses:n.residualStyles;null!=h&&"string"==typeof r&&_(h,r)>=0&&(s[a+1]=Td(s[a+1]))}(r,Z,n,a,h),y=xc(I,T),h?r.classBindings=y:r.styleBindings=y}(l,h,r,s,y,a)}}(h,n,y,a),r!==or&&Bo(l,y,r)&&function tc(n,r,s,a,l,h,y,I){if(!(3&r.type))return;const T=n.data,U=T[I+1];xf(function fm(n){return 1==(1&n)}(U)?Af(T,r,s,l,Uu(U),y):void 0)||(xf(h)||function xp(n){return 2==(2&n)}(U)&&(h=Af(T,null,s,l,I,y)),function hv(n,r,s,a,l){if(r)l?n.addClass(s,a):n.removeClass(s,a);else{let h=-1===a.indexOf("-")?void 0:yu.DashCase;null==l?n.removeStyle(s,a,h):("string"==typeof l&&l.endsWith("!important")&&(l=l.slice(0,-10),h|=yu.Important),n.setStyle(s,a,l,h))}}(a,y,fr(fe(),s),l,h))}(h,h.data[fe()],l,l[11],n,l[y+1]=function a_(n,r){return null==n||("string"==typeof r?n+=r:"object"==typeof n&&(n=Oe(ro(n)))),n}(r,s),a,y)}(n,r,null,!0),zd}function Sf(n,r,s,a,l){let h=null;const y=s.directiveEnd;let I=s.directiveStylingLast;for(-1===I?I=s.directiveStart:I++;I<y&&(h=r[I],a=Wd(a,h.hostAttrs,l),h!==n);)I++;return null!==n&&(s.directiveStylingLast=I),a}function Wd(n,r,s){const a=s?1:2;let l=-1;if(null!==r)for(let h=0;h<r.length;h++){const y=r[h];"number"==typeof y?l=y:l===a&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),Cs(n,y,!!s||r[++h]))}return void 0===n?null:n}function Af(n,r,s,a,l,h){const y=null===r;let I;for(;l>0;){const T=n[l],U=Array.isArray(T),Z=U?T[1]:T,ee=null===Z;let Se=s[l+1];Se===or&&(Se=ee?At:void 0);let $e=ee?Vo(Se,a):Z===a?Se:void 0;if(U&&!xf($e)&&($e=Vo(T,a)),xf($e)&&(I=$e,y))return I;const _t=n[l+1];l=y?Mo(_t):Uu(_t)}if(null!==r){let T=h?r.residualClasses:r.residualStyles;null!=T&&(I=Vo(T,a))}return I}function xf(n){return void 0!==n}function py(n,r=""){const s=ft(),a=Rn(),l=n+22,h=a.firstCreatePass?Rc(a,l,1,r,null):a.data[l],y=s[l]=function wh(n,r){return n.createText(r)}(s[11],r);_u(a,s,y,h),hs(h,!1)}function yg(n){return Mf("",n,""),yg}function Mf(n,r,s){const a=ft(),l=bi(a,n,r,s);return l!==or&&function eu(n,r,s){const a=fr(r,n);!function bc(n,r,s){n.setValue(r,s)}(n[11],a,s)}(a,fe(),l),Mf}const ic=void 0;var xy=["en",[["a","p"],["AM","PM"],ic],[["AM","PM"],ic,ic],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],ic,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],ic,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",ic,"{1} 'at' {0}",ic],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function f_(n){const s=Math.floor(Math.abs(n)),a=n.toString().replace(/^[^.]*\.?/,"").length;return 1===s&&0===a?1:5}];let Bc={};function jc(n){const r=function Oy(n){return n.toLowerCase().replace(/_/g,"-")}(n);let s=kf(r);if(s)return s;const a=r.split("-")[0];if(s=kf(a),s)return s;if("en"===a)return xy;throw new Ze(701,!1)}function Ry(n){return jc(n)[Bn.PluralCase]}function kf(n){return n in Bc||(Bc[n]=st.ng&&st.ng.common&&st.ng.common.locales&&st.ng.common.locales[n]),Bc[n]}var Bn=(()=>((Bn=Bn||{})[Bn.LocaleId=0]="LocaleId",Bn[Bn.DayPeriodsFormat=1]="DayPeriodsFormat",Bn[Bn.DayPeriodsStandalone=2]="DayPeriodsStandalone",Bn[Bn.DaysFormat=3]="DaysFormat",Bn[Bn.DaysStandalone=4]="DaysStandalone",Bn[Bn.MonthsFormat=5]="MonthsFormat",Bn[Bn.MonthsStandalone=6]="MonthsStandalone",Bn[Bn.Eras=7]="Eras",Bn[Bn.FirstDayOfWeek=8]="FirstDayOfWeek",Bn[Bn.WeekendRange=9]="WeekendRange",Bn[Bn.DateFormat=10]="DateFormat",Bn[Bn.TimeFormat=11]="TimeFormat",Bn[Bn.DateTimeFormat=12]="DateTimeFormat",Bn[Bn.NumberSymbols=13]="NumberSymbols",Bn[Bn.NumberFormats=14]="NumberFormats",Bn[Bn.CurrencyCode=15]="CurrencyCode",Bn[Bn.CurrencySymbol=16]="CurrencySymbol",Bn[Bn.CurrencyName=17]="CurrencyName",Bn[Bn.Currencies=18]="Currencies",Bn[Bn.Directionality=19]="Directionality",Bn[Bn.PluralCase=20]="PluralCase",Bn[Bn.ExtraData=21]="ExtraData",Bn))();const sc="en-US";let ky=sc;function __(n,r,s,a,l){if(n=Ce(n),Array.isArray(n))for(let h=0;h<n.length;h++)__(n[h],r,s,a,l);else{const h=Rn(),y=ft();let I=ku(n)?n:Ce(n.provide),T=Lu(n);const U=Ur(),Z=1048575&U.providerIndexes,ee=U.directiveStart,Se=U.providerIndexes>>20;if(ku(n)||!n.multi){const $e=new x(T,l,al),_t=E_(I,r,l?Z:Z+Se,ee);-1===_t?(to(Ma(U,y),h,I),w_(h,n,r.length),r.push(I),U.directiveStart++,U.directiveEnd++,l&&(U.providerIndexes+=1048576),s.push($e),y.push($e)):(s[_t]=$e,y[_t]=$e)}else{const $e=E_(I,r,Z+Se,ee),_t=E_(I,r,Z,Z+Se),xt=$e>=0&&s[$e],en=_t>=0&&s[_t];if(l&&!en||!l&&!xt){to(Ma(U,y),h,I);const dn=function $E(n,r,s,a,l){const h=new x(n,s,al);return h.multi=[],h.index=r,h.componentProviders=0,M0(h,l,a&&!s),h}(l?jE:BE,s.length,l,a,T);!l&&en&&(s[_t].providerFactory=dn),w_(h,n,r.length,0),r.push(I),U.directiveStart++,U.directiveEnd++,l&&(U.providerIndexes+=1048576),s.push(dn),y.push(dn)}else w_(h,n,$e>-1?$e:_t,M0(s[l?_t:$e],T,!l&&a));!l&&a&&en&&s[_t].componentProviders++}}}function w_(n,r,s,a){const l=ku(r),h=function pu(n){return!!n.useClass}(r);if(l||h){const T=(h?Ce(r.useClass):r).prototype.ngOnDestroy;if(T){const U=n.destroyHooks||(n.destroyHooks=[]);if(!l&&r.multi){const Z=U.indexOf(s);-1===Z?U.push(s,[a,T]):U[Z+1].push(a,T)}else U.push(s,T)}}}function M0(n,r,s){return s&&n.componentProviders++,n.multi.push(r)-1}function E_(n,r,s,a){for(let l=s;l<a;l++)if(r[l]===n)return l;return-1}function BE(n,r,s,a){return I_(this.multi,[])}function jE(n,r,s,a){const l=this.multi;let h;if(this.providerFactory){const y=this.providerFactory.componentProviders,I=vn(s,s[1],this.providerFactory.index,a);h=I.slice(0,y),I_(l,h);for(let T=y;T<I.length;T++)h.push(I[T])}else h=[],I_(l,h);return h}function I_(n,r){for(let s=0;s<n.length;s++)r.push((0,n[s])());return r}function R0(n,r=[]){return s=>{s.providersResolver=(a,l)=>function UE(n,r,s){const a=Rn();if(a.firstCreatePass){const l=xr(n);__(s,a.data,a.blueprint,l,!0),__(r,a.data,a.blueprint,l,!1)}}(a,l?l(n):n,r)}}class Uf{}class O0{}function HE(n,r){return new N0(n,r??null)}class N0 extends Uf{constructor(r,s){super(),this._parent=s,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new cf(this);const a=$r(r);this._bootstrapComponents=mu(a.bootstrap),this._r3Injector=sm(r,s,[{provide:Uf,useValue:this},{provide:B,useValue:this.componentFactoryResolver}],Oe(r),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(r)}get injector(){return this._r3Injector}destroy(){const r=this._r3Injector;!r.destroyed&&r.destroy(),this.destroyCbs.forEach(s=>s()),this.destroyCbs=null}onDestroy(r){this.destroyCbs.push(r)}}class D_ extends O0{constructor(r){super(),this.moduleType=r}create(r){return new N0(this.moduleType,r)}}class GE extends Uf{constructor(r,s,a){super(),this.componentFactoryResolver=new cf(this),this.instance=null;const l=new Nl([...r,{provide:Uf,useValue:this},{provide:B,useValue:this.componentFactoryResolver}],s||Ya(),a,new Set(["environment"]));this.injector=l,l.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(r){this.injector.onDestroy(r)}}function C_(n,r,s=null){return new GE(n,r,s).injector}let zE=(()=>{class n{constructor(s){this._injector=s,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(s){if(!s.standalone)return null;if(!this.cachedInjectors.has(s.id)){const a=Qo(0,s.type),l=a.length>0?C_([a],this._injector,`Standalone[${s.type.name}]`):null;this.cachedInjectors.set(s.id,l)}return this.cachedInjectors.get(s.id)}ngOnDestroy(){try{for(const s of this.cachedInjectors.values())null!==s&&s.destroy()}finally{this.cachedInjectors.clear()}}}return n.\u0275prov=kt({token:n,providedIn:"environment",factory:()=>new n(wi(rs))}),n})();function P0(n){n.getStandaloneInjector=r=>r.get(zE).getOrCreateStandaloneInjector(n)}function j0(n,r,s,a){return H0(ft(),A(),n,r,s,a)}function $0(n,r,s,a,l){return function G0(n,r,s,a,l,h,y){const I=r+s;return function hl(n,r,s,a){const l=Bo(n,r,s);return Bo(n,r+1,a)||l}(n,I,l,h)?Du(n,I+2,y?a.call(y,l,h):a(l,h)):Ig(n,I+2)}(ft(),A(),n,r,s,a,l)}function Ig(n,r){const s=n[r];return s===or?void 0:s}function H0(n,r,s,a,l,h){const y=r+s;return Bo(n,y,l)?Du(n,y+1,h?a.call(h,l):a(l)):Ig(n,y+1)}function Z0(n,r){const s=Rn();let a;const l=n+22;s.firstCreatePass?(a=function uI(n,r){if(r)for(let s=r.length-1;s>=0;s--){const a=r[s];if(n===a.name)return a}}(r,s.pipeRegistry),s.data[l]=a,a.onDestroy&&(s.destroyHooks||(s.destroyHooks=[])).push(l,a.onDestroy)):a=s.data[l];const h=a.factory||(a.factory=Pi(a.type)),y=Hn(al);try{const I=xi(!1),T=h();return xi(I),function gf(n,r,s,a){s>=n.data.length&&(n.data[s]=null,n.blueprint[s]=null),r[s]=a}(s,ft(),l,T),T}finally{Hn(y)}}function K0(n,r,s){const a=n+22,l=ft(),h=gi(l,a);return function Dg(n,r){return n[1].data[r].pure}(l,a)?H0(l,A(),r,h.transform,s,h):h.transform(s)}function T_(n){return r=>{setTimeout(n,void 0,r)}}const vl=class fI extends p.x{constructor(r=!1){super(),this.__isAsync=r}emit(r){super.next(r)}subscribe(r,s,a){let l=r,h=s||(()=>null),y=a;if(r&&"object"==typeof r){const T=r;l=T.next?.bind(T),h=T.error?.bind(T),y=T.complete?.bind(T)}this.__isAsync&&(h=T_(h),l&&(l=T_(l)),y&&(y=T_(y)));const I=super.subscribe({next:l,error:h,complete:y});return r instanceof C.w0&&r.add(I),I}};function pI(){return this._results[cl()]()}class S_{constructor(r=!1){this._emitDistinctChangesOnly=r,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const s=cl(),a=S_.prototype;a[s]||(a[s]=pI)}get changes(){return this._changes||(this._changes=new vl)}get(r){return this._results[r]}map(r){return this._results.map(r)}filter(r){return this._results.filter(r)}find(r){return this._results.find(r)}reduce(r,s){return this._results.reduce(r,s)}forEach(r){this._results.forEach(r)}some(r){return this._results.some(r)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(r,s){const a=this;a.dirty=!1;const l=fo(r);(this._changesDetected=!function ma(n,r,s){if(n.length!==r.length)return!1;for(let a=0;a<n.length;a++){let l=n[a],h=r[a];if(s&&(l=s(l),h=s(h)),h!==l)return!1}return!0}(a._results,l,s))&&(a._results=l,a.length=l.length,a.last=l[this.length-1],a.first=l[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let Cg=(()=>{class n{}return n.__NG_ELEMENT_ID__=yI,n})();const gI=Cg,mI=class extends gI{constructor(r,s,a){super(),this._declarationLView=r,this._declarationTContainer=s,this.elementRef=a}createEmbeddedView(r,s){const a=this._declarationTContainer.tViews,l=Wh(this._declarationLView,a,r,16,null,a.declTNode,null,null,null,null,s||null);l[17]=this._declarationLView[this._declarationTContainer.index];const y=this._declarationLView[19];return null!==y&&(l[19]=y.createEmbeddedView(a)),Oc(a,l,r),new ll(l)}};function yI(){return Ly(Ur(),ft())}function Ly(n,r){return 4&n.type?new mI(r,n,Te(n,r)):null}let Vy=(()=>{class n{}return n.__NG_ELEMENT_ID__=vI,n})();function vI(){return J0(Ur(),ft())}const _I=Vy,Y0=class extends _I{constructor(r,s,a){super(),this._lContainer=r,this._hostTNode=s,this._hostLView=a}get element(){return Te(this._hostTNode,this._hostLView)}get injector(){return new Et(this._hostTNode,this._hostLView)}get parentInjector(){const r=ta(this._hostTNode,this._hostLView);if(gr(r)){const s=$i(r,this._hostLView),a=br(r);return new Et(s[1].data[a+8],s)}return new Et(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(r){const s=Q0(this._lContainer);return null!==s&&s[r]||null}get length(){return this._lContainer.length-10}createEmbeddedView(r,s,a){let l,h;"number"==typeof a?l=a:null!=a&&(l=a.index,h=a.injector);const y=r.createEmbeddedView(s||{},h);return this.insert(y,l),y}createComponent(r,s,a,l,h){const y=r&&!function ka(n){return"function"==typeof n}(r);let I;if(y)I=s;else{const ee=s||{};I=ee.index,a=ee.injector,l=ee.projectableNodes,h=ee.environmentInjector||ee.ngModuleRef}const T=y?r:new Iu(ln(r)),U=a||this.parentInjector;if(!h&&null==T.ngModule){const Se=(y?U:this.parentInjector).get(rs,null);Se&&(h=Se)}const Z=T.create(U,l,void 0,h);return this.insert(Z.hostView,I),Z}insert(r,s){const a=r._lView,l=a[1];if(function Go(n){return Kr(n[3])}(a)){const Z=this.indexOf(r);if(-1!==Z)this.detach(Z);else{const ee=a[3],Se=new Y0(ee,ee[6],ee[3]);Se.detach(Se.indexOf(r))}}const h=this._adjustIndex(s),y=this._lContainer;!function Ih(n,r,s,a){const l=10+a,h=s.length;a>0&&(s[l-1][4]=r),a<h-10?(r[4]=s[l],ou(s,10+a,r)):(s.push(r),r[4]=null),r[3]=s;const y=r[17];null!==y&&s!==y&&function Dh(n,r){const s=n[9];r[16]!==r[3][3][16]&&(n[2]=!0),null===s?n[9]=[r]:s.push(r)}(y,r);const I=r[19];null!==I&&I.insertView(n),r[2]|=64}(l,a,y,h);const I=Sh(h,y),T=a[11],U=bh(T,y[7]);return null!==U&&function Hg(n,r,s,a,l,h){a[0]=l,a[6]=r,gd(n,a,s,1,l,h)}(l,y[6],T,a,U,I),r.attachToViewContainerRef(),ou(A_(y),h,r),r}move(r,s){return this.insert(r,s)}indexOf(r){const s=Q0(this._lContainer);return null!==s?s.indexOf(r):-1}remove(r){const s=this._adjustIndex(r,-1),a=vu(this._lContainer,s);a&&(Ca(A_(this._lContainer),s),$l(a[1],a))}detach(r){const s=this._adjustIndex(r,-1),a=vu(this._lContainer,s);return a&&null!=Ca(A_(this._lContainer),s)?new ll(a):null}_adjustIndex(r,s=0){return r??this.length+s}};function Q0(n){return n[8]}function A_(n){return n[8]||(n[8]=[])}function J0(n,r){let s;const a=r[n.index];if(Kr(a))s=a;else{let l;if(8&n.type)l=Mr(a);else{const h=r[11];l=h.createComment("");const y=si(n,r);_a(h,bh(h,y),l,function Th(n,r){return n.nextSibling(r)}(h,y),!1)}r[n.index]=s=Mm(a,r,l,n),rf(r,s)}return new Y0(s,n,r)}class x_{constructor(r){this.queryList=r,this.matches=null}clone(){return new x_(this.queryList)}setDirty(){this.queryList.setDirty()}}class M_{constructor(r=[]){this.queries=r}createEmbeddedView(r){const s=r.queries;if(null!==s){const a=null!==r.contentQueries?r.contentQueries[0]:s.length,l=[];for(let h=0;h<a;h++){const y=s.getByIndex(h);l.push(this.queries[y.indexInDeclarationView].clone())}return new M_(l)}return null}insertView(r){this.dirtyQueriesWithMatches(r)}detachView(r){this.dirtyQueriesWithMatches(r)}dirtyQueriesWithMatches(r){for(let s=0;s<this.queries.length;s++)null!==aw(r,s).matches&&this.queries[s].setDirty()}}class X0{constructor(r,s,a=null){this.predicate=r,this.flags=s,this.read=a}}class R_{constructor(r=[]){this.queries=r}elementStart(r,s){for(let a=0;a<this.queries.length;a++)this.queries[a].elementStart(r,s)}elementEnd(r){for(let s=0;s<this.queries.length;s++)this.queries[s].elementEnd(r)}embeddedTView(r){let s=null;for(let a=0;a<this.length;a++){const l=null!==s?s.length:0,h=this.getByIndex(a).embeddedTView(r,l);h&&(h.indexInDeclarationView=a,null!==s?s.push(h):s=[h])}return null!==s?new R_(s):null}template(r,s){for(let a=0;a<this.queries.length;a++)this.queries[a].template(r,s)}getByIndex(r){return this.queries[r]}get length(){return this.queries.length}track(r){this.queries.push(r)}}class O_{constructor(r,s=-1){this.metadata=r,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=s}elementStart(r,s){this.isApplyingToNode(s)&&this.matchTNode(r,s)}elementEnd(r){this._declarationNodeIndex===r.index&&(this._appliesToNextNode=!1)}template(r,s){this.elementStart(r,s)}embeddedTView(r,s){return this.isApplyingToNode(r)?(this.crossesNgTemplate=!0,this.addMatch(-r.index,s),new O_(this.metadata)):null}isApplyingToNode(r){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const s=this._declarationNodeIndex;let a=r.parent;for(;null!==a&&8&a.type&&a.index!==s;)a=a.parent;return s===(null!==a?a.index:-1)}return this._appliesToNextNode}matchTNode(r,s){const a=this.metadata.predicate;if(Array.isArray(a))for(let l=0;l<a.length;l++){const h=a[l];this.matchTNodeWithReadOption(r,s,II(s,h)),this.matchTNodeWithReadOption(r,s,Qt(s,r,h,!1,!1))}else a===Cg?4&s.type&&this.matchTNodeWithReadOption(r,s,-1):this.matchTNodeWithReadOption(r,s,Qt(s,r,a,!1,!1))}matchTNodeWithReadOption(r,s,a){if(null!==a){const l=this.metadata.read;if(null!==l)if(l===it||l===Vy||l===Cg&&4&s.type)this.addMatch(s.index,-2);else{const h=Qt(s,r,l,!1,!1);null!==h&&this.addMatch(s.index,h)}else this.addMatch(s.index,a)}}addMatch(r,s){null===this.matches?this.matches=[r,s]:this.matches.push(r,s)}}function II(n,r){const s=n.localNames;if(null!==s)for(let a=0;a<s.length;a+=2)if(s[a]===r)return s[a+1];return null}function CI(n,r,s,a){return-1===s?function DI(n,r){return 11&n.type?Te(n,r):4&n.type?Ly(n,r):null}(r,n):-2===s?function bI(n,r,s){return s===it?Te(r,n):s===Cg?Ly(r,n):s===Vy?J0(r,n):void 0}(n,r,a):vn(n,n[1],s,r)}function ew(n,r,s,a){const l=r[19].queries[a];if(null===l.matches){const h=n.data,y=s.matches,I=[];for(let T=0;T<y.length;T+=2){const U=y[T];I.push(U<0?null:CI(r,h[U],y[T+1],s.metadata.read))}l.matches=I}return l.matches}function N_(n,r,s,a){const l=n.queries.getByIndex(s),h=l.matches;if(null!==h){const y=ew(n,r,l,s);for(let I=0;I<h.length;I+=2){const T=h[I];if(T>0)a.push(y[I/2]);else{const U=h[I+1],Z=r[-T];for(let ee=10;ee<Z.length;ee++){const Se=Z[ee];Se[17]===Se[3]&&N_(Se[1],Se,U,a)}if(null!==Z[9]){const ee=Z[9];for(let Se=0;Se<ee.length;Se++){const $e=ee[Se];N_($e[1],$e,U,a)}}}}}return a}function tw(n){const r=ft(),s=Rn(),a=zo();co(a+1);const l=aw(s,a);if(n.dirty&&Di(r)===(2==(2&l.metadata.flags))){if(null===l.matches)n.reset([]);else{const h=l.crossesNgTemplate?N_(s,r,a,[]):ew(s,r,l,a);n.reset(h,Pt),n.notifyOnChanges()}return!0}return!1}function nw(n,r,s){const a=Rn();a.firstCreatePass&&(ow(a,new X0(n,r,s),-1),2==(2&r)&&(a.staticViewQueries=!0)),sw(a,ft(),r)}function rw(n,r,s,a){const l=Rn();if(l.firstCreatePass){const h=Ur();ow(l,new X0(r,s,a),h.index),function SI(n,r){const s=n.contentQueries||(n.contentQueries=[]);r!==(s.length?s[s.length-1]:-1)&&s.push(n.queries.length-1,r)}(l,n),2==(2&s)&&(l.staticContentQueries=!0)}sw(l,ft(),s)}function iw(){return function TI(n,r){return n[19].queries[r].queryList}(ft(),zo())}function sw(n,r,s){const a=new S_(4==(4&s));Qh(n,r,a,a.destroy),null===r[19]&&(r[19]=new M_),r[19].queries.push(new x_(a))}function ow(n,r,s){null===n.queries&&(n.queries=new R_),n.queries.track(new O_(r,s))}function aw(n,r){return n.queries.getByIndex(r)}function uw(n,r){return Ly(n,r)}function By(...n){}const Sw=new kr("Application Initializer");let jy=(()=>{class n{constructor(s){this.appInits=s,this.resolve=By,this.reject=By,this.initialized=!1,this.done=!1,this.donePromise=new Promise((a,l)=>{this.resolve=a,this.reject=l})}runInitializers(){if(this.initialized)return;const s=[],a=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let l=0;l<this.appInits.length;l++){const h=this.appInits[l]();if(lg(h))s.push(h);else if(Ef(h)){const y=new Promise((I,T)=>{h.subscribe({complete:I,error:T})});s.push(y)}}Promise.all(s).then(()=>{a()}).catch(l=>{this.reject(l)}),0===s.length&&a(),this.initialized=!0}}return n.\u0275fac=function(s){return new(s||n)(wi(Sw,8))},n.\u0275prov=kt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Aw=new kr("AppId",{providedIn:"root",factory:function xw(){return`${V_()}${V_()}${V_()}`}});function V_(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Mw=new kr("Platform Initializer"),qI=new kr("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),Rw=new kr("appBootstrapListener");let ZI=(()=>{class n{log(s){console.log(s)}warn(s){console.warn(s)}}return n.\u0275fac=function(s){return new(s||n)},n.\u0275prov=kt({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();const $y=new kr("LocaleId",{providedIn:"root",factory:()=>M($y,pt.Optional|pt.SkipSelf)||function KI(){return typeof $localize<"u"&&$localize.locale||sc}()}),YI=new kr("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class QI{constructor(r,s){this.ngModuleFactory=r,this.componentFactories=s}}let JI=(()=>{class n{compileModuleSync(s){return new D_(s)}compileModuleAsync(s){return Promise.resolve(this.compileModuleSync(s))}compileModuleAndAllComponentsSync(s){const a=this.compileModuleSync(s),h=mu($r(s).declarations).reduce((y,I)=>{const T=ln(I);return T&&y.push(new Iu(T)),y},[]);return new QI(a,h)}compileModuleAndAllComponentsAsync(s){return Promise.resolve(this.compileModuleAndAllComponentsSync(s))}clearCache(){}clearCacheFor(s){}getModuleId(s){}}return n.\u0275fac=function(s){return new(s||n)},n.\u0275prov=kt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const tD=(()=>Promise.resolve(0))();function U_(n){typeof Zone>"u"?tD.then(()=>{n&&n.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",n)}class Su{constructor({enableLongStackTrace:r=!1,shouldCoalesceEventChangeDetection:s=!1,shouldCoalesceRunChangeDetection:a=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new vl(!1),this.onMicrotaskEmpty=new vl(!1),this.onStable=new vl(!1),this.onError=new vl(!1),typeof Zone>"u")throw new Ze(908,!1);Zone.assertZonePatched();const l=this;if(l._nesting=0,l._outer=l._inner=Zone.current,Zone.AsyncStackTaggingZoneSpec){const h=Zone.AsyncStackTaggingZoneSpec;l._inner=l._inner.fork(new h("Angular"))}Zone.TaskTrackingZoneSpec&&(l._inner=l._inner.fork(new Zone.TaskTrackingZoneSpec)),r&&Zone.longStackTraceZoneSpec&&(l._inner=l._inner.fork(Zone.longStackTraceZoneSpec)),l.shouldCoalesceEventChangeDetection=!a&&s,l.shouldCoalesceRunChangeDetection=a,l.lastRequestAnimationFrameId=-1,l.nativeRequestAnimationFrame=function nD(){let n=st.requestAnimationFrame,r=st.cancelAnimationFrame;if(typeof Zone<"u"&&n&&r){const s=n[Zone.__symbol__("OriginalDelegate")];s&&(n=s);const a=r[Zone.__symbol__("OriginalDelegate")];a&&(r=a)}return{nativeRequestAnimationFrame:n,nativeCancelAnimationFrame:r}}().nativeRequestAnimationFrame,function sD(n){const r=()=>{!function iD(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(st,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,j_(n),n.isCheckStableRunning=!0,B_(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),j_(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(s,a,l,h,y,I)=>{try{return Pw(n),s.invokeTask(l,h,y,I)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===h.type||n.shouldCoalesceRunChangeDetection)&&r(),kw(n)}},onInvoke:(s,a,l,h,y,I,T)=>{try{return Pw(n),s.invoke(l,h,y,I,T)}finally{n.shouldCoalesceRunChangeDetection&&r(),kw(n)}},onHasTask:(s,a,l,h)=>{s.hasTask(l,h),a===l&&("microTask"==h.change?(n._hasPendingMicrotasks=h.microTask,j_(n),B_(n)):"macroTask"==h.change&&(n.hasPendingMacrotasks=h.macroTask))},onHandleError:(s,a,l,h)=>(s.handleError(l,h),n.runOutsideAngular(()=>n.onError.emit(h)),!1)})}(l)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Su.isInAngularZone())throw new Ze(909,!1)}static assertNotInAngularZone(){if(Su.isInAngularZone())throw new Ze(909,!1)}run(r,s,a){return this._inner.run(r,s,a)}runTask(r,s,a,l){const h=this._inner,y=h.scheduleEventTask("NgZoneEvent: "+l,r,rD,By,By);try{return h.runTask(y,s,a)}finally{h.cancelTask(y)}}runGuarded(r,s,a){return this._inner.runGuarded(r,s,a)}runOutsideAngular(r){return this._outer.run(r)}}const rD={};function B_(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function j_(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function Pw(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function kw(n){n._nesting--,B_(n)}class oD{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new vl,this.onMicrotaskEmpty=new vl,this.onStable=new vl,this.onError=new vl}run(r,s,a){return r.apply(s,a)}runGuarded(r,s,a){return r.apply(s,a)}runOutsideAngular(r){return r()}runTask(r,s,a,l){return r.apply(s,a)}}const Fw=new kr(""),Lw=new kr("");let $_,aD=(()=>{class n{constructor(s,a,l){this._ngZone=s,this.registry=a,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,$_||(function uD(n){$_=n}(l),l.addToWindow(a)),this._watchAngularEvents(),s.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Su.assertNotInAngularZone(),U_(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())U_(()=>{for(;0!==this._callbacks.length;){let s=this._callbacks.pop();clearTimeout(s.timeoutId),s.doneCb(this._didWork)}this._didWork=!1});else{let s=this.getPendingTasks();this._callbacks=this._callbacks.filter(a=>!a.updateCb||!a.updateCb(s)||(clearTimeout(a.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(s=>({source:s.source,creationLocation:s.creationLocation,data:s.data})):[]}addCallback(s,a,l){let h=-1;a&&a>0&&(h=setTimeout(()=>{this._callbacks=this._callbacks.filter(y=>y.timeoutId!==h),s(this._didWork,this.getPendingTasks())},a)),this._callbacks.push({doneCb:s,timeoutId:h,updateCb:l})}whenStable(s,a,l){if(l&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(s,a,l),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(s){this.registry.registerApplication(s,this)}unregisterApplication(s){this.registry.unregisterApplication(s)}findProviders(s,a,l){return[]}}return n.\u0275fac=function(s){return new(s||n)(wi(Su),wi(Vw),wi(Lw))},n.\u0275prov=kt({token:n,factory:n.\u0275fac}),n})(),Vw=(()=>{class n{constructor(){this._applications=new Map}registerApplication(s,a){this._applications.set(s,a)}unregisterApplication(s){this._applications.delete(s)}unregisterAllApplications(){this._applications.clear()}getTestability(s){return this._applications.get(s)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(s,a=!0){return $_?.findTestabilityInTree(this,s,a)??null}}return n.\u0275fac=function(s){return new(s||n)},n.\u0275prov=kt({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})(),Hc=null;const Uw=new kr("AllowMultipleToken"),H_=new kr("PlatformDestroyListeners");class dD{constructor(r,s){this.name=r,this.token=s}}function jw(n,r,s=[]){const a=`Platform: ${r}`,l=new kr(a);return(h=[])=>{let y=G_();if(!y||y.injector.get(Uw,!1)){const I=[...s,...h,{provide:l,useValue:!0}];n?n(I):function hD(n){if(Hc&&!Hc.get(Uw,!1))throw new Ze(400,!1);Hc=n;const r=n.get(Hw);(function Bw(n){const r=n.get(Mw,null);r&&r.forEach(s=>s())})(n)}(function $w(n=[],r){return Vu.create({name:r,providers:[{provide:tr,useValue:"platform"},{provide:H_,useValue:new Set([()=>Hc=null])},...n]})}(I,a))}return function pD(n){const r=G_();if(!r)throw new Ze(401,!1);return r}()}}function G_(){return Hc?.get(Hw)??null}let Hw=(()=>{class n{constructor(s){this._injector=s,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(s,a){const l=function zw(n,r){let s;return s="noop"===n?new oD:("zone.js"===n?void 0:n)||new Su(r),s}(a?.ngZone,function Gw(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!n||!n.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!n||!n.ngZoneRunCoalescing)||!1}}(a)),h=[{provide:Su,useValue:l}];return l.run(()=>{const y=Vu.create({providers:h,parent:this.injector,name:s.moduleType.name}),I=s.create(y),T=I.injector.get(cd,null);if(!T)throw new Ze(402,!1);return l.runOutsideAngular(()=>{const U=l.onError.subscribe({next:Z=>{T.handleError(Z)}});I.onDestroy(()=>{Gy(this._modules,I),U.unsubscribe()})}),function Ww(n,r,s){try{const a=s();return lg(a)?a.catch(l=>{throw r.runOutsideAngular(()=>n.handleError(l)),l}):a}catch(a){throw r.runOutsideAngular(()=>n.handleError(a)),a}}(T,l,()=>{const U=I.injector.get(jy);return U.runInitializers(),U.donePromise.then(()=>(function i(n){$t(n,"Expected localeId to be defined"),"string"==typeof n&&(ky=n.toLowerCase().replace(/_/g,"-"))}(I.injector.get($y,sc)||sc),this._moduleDoBootstrap(I),I))})})}bootstrapModule(s,a=[]){const l=qw({},a);return function lD(n,r,s){const a=new D_(s);return Promise.resolve(a)}(0,0,s).then(h=>this.bootstrapModuleFactory(h,l))}_moduleDoBootstrap(s){const a=s.injector.get(Hy);if(s._bootstrapComponents.length>0)s._bootstrapComponents.forEach(l=>a.bootstrap(l));else{if(!s.instance.ngDoBootstrap)throw new Ze(403,!1);s.instance.ngDoBootstrap(a)}this._modules.push(s)}onDestroy(s){this._destroyListeners.push(s)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Ze(404,!1);this._modules.slice().forEach(a=>a.destroy()),this._destroyListeners.forEach(a=>a());const s=this._injector.get(H_,null);s&&(s.forEach(a=>a()),s.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return n.\u0275fac=function(s){return new(s||n)(wi(Vu))},n.\u0275prov=kt({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();function qw(n,r){return Array.isArray(r)?r.reduce(qw,n):{...n,...r}}let Hy=(()=>{class n{constructor(s,a,l){this._zone=s,this._injector=a,this._exceptionHandler=l,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const h=new G.y(I=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{I.next(this._stable),I.complete()})}),y=new G.y(I=>{let T;this._zone.runOutsideAngular(()=>{T=this._zone.onStable.subscribe(()=>{Su.assertNotInAngularZone(),U_(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,I.next(!0))})})});const U=this._zone.onUnstable.subscribe(()=>{Su.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{I.next(!1)}))});return()=>{T.unsubscribe(),U.unsubscribe()}});this.isStable=(0,be.T)(h,y.pipe((0,we.B)()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(s,a){const l=s instanceof zs;if(!this._injector.get(jy).done)throw!l&&qr(s),new Ze(405,false);let y;y=l?s:this._injector.get(B).resolveComponentFactory(s),this.componentTypes.push(y.componentType);const I=function cD(n){return n.isBoundToModule}(y)?void 0:this._injector.get(Uf),U=y.create(Vu.NULL,[],a||y.selector,I),Z=U.location.nativeElement,ee=U.injector.get(Fw,null);return ee?.registerApplication(Z),U.onDestroy(()=>{this.detachView(U.hostView),Gy(this.components,U),ee?.unregisterApplication(Z)}),this._loadComponent(U),U}tick(){if(this._runningTick)throw new Ze(101,!1);try{this._runningTick=!0;for(let s of this._views)s.detectChanges()}catch(s){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(s))}finally{this._runningTick=!1}}attachView(s){const a=s;this._views.push(a),a.attachToAppRef(this)}detachView(s){const a=s;Gy(this._views,a),a.detachFromAppRef()}_loadComponent(s){this.attachView(s.hostView),this.tick(),this.components.push(s),this._injector.get(Rw,[]).concat(this._bootstrapListeners).forEach(l=>l(s))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(s=>s()),this._views.slice().forEach(s=>s.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(s){return this._destroyListeners.push(s),()=>Gy(this._destroyListeners,s)}destroy(){if(this._destroyed)throw new Ze(406,!1);const s=this._injector;s.destroy&&!s.destroyed&&s.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return n.\u0275fac=function(s){return new(s||n)(wi(Su),wi(rs),wi(cd))},n.\u0275prov=kt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Gy(n,r){const s=n.indexOf(r);s>-1&&n.splice(s,1)}let Kw=!0,Yw=!1;function mD(){return Yw=!0,Kw}function yD(){if(Yw)throw new Error("Cannot enable prod mode after platform setup.");Kw=!1}let vD=(()=>{class n{}return n.__NG_ELEMENT_ID__=_D,n})();function _D(n){return function wD(n,r,s){if(ys(n)&&!s){const a=Wn(n.index,r);return new ll(a,a)}return 47&n.type?new ll(r[16],r):null}(Ur(),ft(),16==(16&n))}class eE{constructor(){}supports(r){return Ud(r)}create(r){return new TD(r)}}const bD=(n,r)=>r;class TD{constructor(r){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=r||bD}forEachItem(r){let s;for(s=this._itHead;null!==s;s=s._next)r(s)}forEachOperation(r){let s=this._itHead,a=this._removalsHead,l=0,h=null;for(;s||a;){const y=!a||s&&s.currentIndex<nE(a,l,h)?s:a,I=nE(y,l,h),T=y.currentIndex;if(y===a)l--,a=a._nextRemoved;else if(s=s._next,null==y.previousIndex)l++;else{h||(h=[]);const U=I-l,Z=T-l;if(U!=Z){for(let Se=0;Se<U;Se++){const $e=Se<h.length?h[Se]:h[Se]=0,_t=$e+Se;Z<=_t&&_t<U&&(h[Se]=$e+1)}h[y.previousIndex]=Z-U}}I!==T&&r(y,I,T)}}forEachPreviousItem(r){let s;for(s=this._previousItHead;null!==s;s=s._nextPrevious)r(s)}forEachAddedItem(r){let s;for(s=this._additionsHead;null!==s;s=s._nextAdded)r(s)}forEachMovedItem(r){let s;for(s=this._movesHead;null!==s;s=s._nextMoved)r(s)}forEachRemovedItem(r){let s;for(s=this._removalsHead;null!==s;s=s._nextRemoved)r(s)}forEachIdentityChange(r){let s;for(s=this._identityChangesHead;null!==s;s=s._nextIdentityChange)r(s)}diff(r){if(null==r&&(r=[]),!Ud(r))throw new Ze(900,!1);return this.check(r)?this:null}onDestroy(){}check(r){this._reset();let l,h,y,s=this._itHead,a=!1;if(Array.isArray(r)){this.length=r.length;for(let I=0;I<this.length;I++)h=r[I],y=this._trackByFn(I,h),null!==s&&Object.is(s.trackById,y)?(a&&(s=this._verifyReinsertion(s,h,y,I)),Object.is(s.item,h)||this._addIdentityChange(s,h)):(s=this._mismatch(s,h,y,I),a=!0),s=s._next}else l=0,function ea(n,r){if(Array.isArray(n))for(let s=0;s<n.length;s++)r(n[s]);else{const s=n[cl()]();let a;for(;!(a=s.next()).done;)r(a.value)}}(r,I=>{y=this._trackByFn(l,I),null!==s&&Object.is(s.trackById,y)?(a&&(s=this._verifyReinsertion(s,I,y,l)),Object.is(s.item,I)||this._addIdentityChange(s,I)):(s=this._mismatch(s,I,y,l),a=!0),s=s._next,l++}),this.length=l;return this._truncate(s),this.collection=r,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let r;for(r=this._previousItHead=this._itHead;null!==r;r=r._next)r._nextPrevious=r._next;for(r=this._additionsHead;null!==r;r=r._nextAdded)r.previousIndex=r.currentIndex;for(this._additionsHead=this._additionsTail=null,r=this._movesHead;null!==r;r=r._nextMoved)r.previousIndex=r.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(r,s,a,l){let h;return null===r?h=this._itTail:(h=r._prev,this._remove(r)),null!==(r=null===this._unlinkedRecords?null:this._unlinkedRecords.get(a,null))?(Object.is(r.item,s)||this._addIdentityChange(r,s),this._reinsertAfter(r,h,l)):null!==(r=null===this._linkedRecords?null:this._linkedRecords.get(a,l))?(Object.is(r.item,s)||this._addIdentityChange(r,s),this._moveAfter(r,h,l)):r=this._addAfter(new SD(s,a),h,l),r}_verifyReinsertion(r,s,a,l){let h=null===this._unlinkedRecords?null:this._unlinkedRecords.get(a,null);return null!==h?r=this._reinsertAfter(h,r._prev,l):r.currentIndex!=l&&(r.currentIndex=l,this._addToMoves(r,l)),r}_truncate(r){for(;null!==r;){const s=r._next;this._addToRemovals(this._unlink(r)),r=s}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(r,s,a){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(r);const l=r._prevRemoved,h=r._nextRemoved;return null===l?this._removalsHead=h:l._nextRemoved=h,null===h?this._removalsTail=l:h._prevRemoved=l,this._insertAfter(r,s,a),this._addToMoves(r,a),r}_moveAfter(r,s,a){return this._unlink(r),this._insertAfter(r,s,a),this._addToMoves(r,a),r}_addAfter(r,s,a){return this._insertAfter(r,s,a),this._additionsTail=null===this._additionsTail?this._additionsHead=r:this._additionsTail._nextAdded=r,r}_insertAfter(r,s,a){const l=null===s?this._itHead:s._next;return r._next=l,r._prev=s,null===l?this._itTail=r:l._prev=r,null===s?this._itHead=r:s._next=r,null===this._linkedRecords&&(this._linkedRecords=new tE),this._linkedRecords.put(r),r.currentIndex=a,r}_remove(r){return this._addToRemovals(this._unlink(r))}_unlink(r){null!==this._linkedRecords&&this._linkedRecords.remove(r);const s=r._prev,a=r._next;return null===s?this._itHead=a:s._next=a,null===a?this._itTail=s:a._prev=s,r}_addToMoves(r,s){return r.previousIndex===s||(this._movesTail=null===this._movesTail?this._movesHead=r:this._movesTail._nextMoved=r),r}_addToRemovals(r){return null===this._unlinkedRecords&&(this._unlinkedRecords=new tE),this._unlinkedRecords.put(r),r.currentIndex=null,r._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=r,r._prevRemoved=null):(r._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=r),r}_addIdentityChange(r,s){return r.item=s,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=r:this._identityChangesTail._nextIdentityChange=r,r}}class SD{constructor(r,s){this.item=r,this.trackById=s,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class AD{constructor(){this._head=null,this._tail=null}add(r){null===this._head?(this._head=this._tail=r,r._nextDup=null,r._prevDup=null):(this._tail._nextDup=r,r._prevDup=this._tail,r._nextDup=null,this._tail=r)}get(r,s){let a;for(a=this._head;null!==a;a=a._nextDup)if((null===s||s<=a.currentIndex)&&Object.is(a.trackById,r))return a;return null}remove(r){const s=r._prevDup,a=r._nextDup;return null===s?this._head=a:s._nextDup=a,null===a?this._tail=s:a._prevDup=s,null===this._head}}class tE{constructor(){this.map=new Map}put(r){const s=r.trackById;let a=this.map.get(s);a||(a=new AD,this.map.set(s,a)),a.add(r)}get(r,s){const l=this.map.get(r);return l?l.get(r,s):null}remove(r){const s=r.trackById;return this.map.get(s).remove(r)&&this.map.delete(s),r}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function nE(n,r,s){const a=n.previousIndex;if(null===a)return a;let l=0;return s&&a<s.length&&(l=s[a]),a+r+l}class rE{constructor(){}supports(r){return r instanceof Map||Ha(r)}create(){return new xD}}class xD{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(r){let s;for(s=this._mapHead;null!==s;s=s._next)r(s)}forEachPreviousItem(r){let s;for(s=this._previousMapHead;null!==s;s=s._nextPrevious)r(s)}forEachChangedItem(r){let s;for(s=this._changesHead;null!==s;s=s._nextChanged)r(s)}forEachAddedItem(r){let s;for(s=this._additionsHead;null!==s;s=s._nextAdded)r(s)}forEachRemovedItem(r){let s;for(s=this._removalsHead;null!==s;s=s._nextRemoved)r(s)}diff(r){if(r){if(!(r instanceof Map||Ha(r)))throw new Ze(900,!1)}else r=new Map;return this.check(r)?this:null}onDestroy(){}check(r){this._reset();let s=this._mapHead;if(this._appendAfter=null,this._forEach(r,(a,l)=>{if(s&&s.key===l)this._maybeAddToChanges(s,a),this._appendAfter=s,s=s._next;else{const h=this._getOrCreateRecordForKey(l,a);s=this._insertBeforeOrAppend(s,h)}}),s){s._prev&&(s._prev._next=null),this._removalsHead=s;for(let a=s;null!==a;a=a._nextRemoved)a===this._mapHead&&(this._mapHead=null),this._records.delete(a.key),a._nextRemoved=a._next,a.previousValue=a.currentValue,a.currentValue=null,a._prev=null,a._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(r,s){if(r){const a=r._prev;return s._next=r,s._prev=a,r._prev=s,a&&(a._next=s),r===this._mapHead&&(this._mapHead=s),this._appendAfter=r,r}return this._appendAfter?(this._appendAfter._next=s,s._prev=this._appendAfter):this._mapHead=s,this._appendAfter=s,null}_getOrCreateRecordForKey(r,s){if(this._records.has(r)){const l=this._records.get(r);this._maybeAddToChanges(l,s);const h=l._prev,y=l._next;return h&&(h._next=y),y&&(y._prev=h),l._next=null,l._prev=null,l}const a=new MD(r);return this._records.set(r,a),a.currentValue=s,this._addToAdditions(a),a}_reset(){if(this.isDirty){let r;for(this._previousMapHead=this._mapHead,r=this._previousMapHead;null!==r;r=r._next)r._nextPrevious=r._next;for(r=this._changesHead;null!==r;r=r._nextChanged)r.previousValue=r.currentValue;for(r=this._additionsHead;null!=r;r=r._nextAdded)r.previousValue=r.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(r,s){Object.is(s,r.currentValue)||(r.previousValue=r.currentValue,r.currentValue=s,this._addToChanges(r))}_addToAdditions(r){null===this._additionsHead?this._additionsHead=this._additionsTail=r:(this._additionsTail._nextAdded=r,this._additionsTail=r)}_addToChanges(r){null===this._changesHead?this._changesHead=this._changesTail=r:(this._changesTail._nextChanged=r,this._changesTail=r)}_forEach(r,s){r instanceof Map?r.forEach(s):Object.keys(r).forEach(a=>s(r[a],a))}}class MD{constructor(r){this.key=r,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function iE(){return new K_([new eE])}let K_=(()=>{class n{constructor(s){this.factories=s}static create(s,a){if(null!=a){const l=a.factories.slice();s=s.concat(l)}return new n(s)}static extend(s){return{provide:n,useFactory:a=>n.create(s,a||iE()),deps:[[n,new Tn,new Nt]]}}find(s){const a=this.factories.find(l=>l.supports(s));if(null!=a)return a;throw new Ze(901,!1)}}return n.\u0275prov=kt({token:n,providedIn:"root",factory:iE}),n})();function sE(){return new Y_([new rE])}let Y_=(()=>{class n{constructor(s){this.factories=s}static create(s,a){if(a){const l=a.factories.slice();s=s.concat(l)}return new n(s)}static extend(s){return{provide:n,useFactory:a=>n.create(s,a||sE()),deps:[[n,new Tn,new Nt]]}}find(s){const a=this.factories.find(l=>l.supports(s));if(a)return a;throw new Ze(901,!1)}}return n.\u0275prov=kt({token:n,providedIn:"root",factory:sE}),n})();const ND=jw(null,"core",[]);let PD=(()=>{class n{constructor(s){}}return n.\u0275fac=function(s){return new(s||n)(wi(Hy))},n.\u0275mod=Vt({type:n}),n.\u0275inj=un({}),n})();function kD(n){return"boolean"==typeof n?n:null!=n&&"false"!==n}},433:(Gt,We,V)=>{V.d(We,{Wl:()=>Ke,Fj:()=>he,NI:()=>ys,u:()=>Vs,cw:()=>ce,sg:()=>Xi,u5:()=>Bs,JJ:()=>Ue,JL:()=>ge,F:()=>er,On:()=>lt,YN:()=>Yr,_:()=>Ks,UX:()=>Po,EJ:()=>Ai,kI:()=>ne,_Y:()=>Dt,Kr:()=>Ro});var p=V(4650),C=V(6895),G=V(8996),be=V(9751),we=V(4742),Me=V(8421),Re=V(7669),Oe=V(5403),ke=V(3268),le=V(1810),Ce=V(4004);let yt=(()=>{class F{constructor(A,K){this._renderer=A,this._elementRef=K,this.onChange=Xe=>{},this.onTouched=()=>{}}setProperty(A,K){this._renderer.setProperty(this._elementRef.nativeElement,A,K)}registerOnTouched(A){this.onTouched=A}registerOnChange(A){this.onChange=A}setDisabledState(A){this.setProperty("disabled",A)}}return F.\u0275fac=function(A){return new(A||F)(p.Y36(p.Qsj),p.Y36(p.SBq))},F.\u0275dir=p.lG2({type:F}),F})(),ot=(()=>{class F extends yt{}return F.\u0275fac=function(){let N;return function(K){return(N||(N=p.n5z(F)))(K||F)}}(),F.\u0275dir=p.lG2({type:F,features:[p.qOj]}),F})();const Ze=new p.OlP("NgValueAccessor"),Ot={provide:Ze,useExisting:(0,p.Gpc)(()=>Ke),multi:!0};let Ke=(()=>{class F extends ot{writeValue(A){this.setProperty("checked",A)}}return F.\u0275fac=function(){let N;return function(K){return(N||(N=p.n5z(F)))(K||F)}}(),F.\u0275dir=p.lG2({type:F,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(A,K){1&A&&p.NdJ("change",function(nn){return K.onChange(nn.target.checked)})("blur",function(){return K.onTouched()})},features:[p._Bn([Ot]),p.qOj]}),F})();const He={provide:Ze,useExisting:(0,p.Gpc)(()=>he),multi:!0},jt=new p.OlP("CompositionEventMode");let he=(()=>{class F extends yt{constructor(A,K,Xe){super(A,K),this._compositionMode=Xe,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function Bt(){const F=(0,C.q)()?(0,C.q)().getUserAgent():"";return/android (\d+)/.test(F.toLowerCase())}())}writeValue(A){this.setProperty("value",A??"")}_handleInput(A){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(A)}_compositionStart(){this._composing=!0}_compositionEnd(A){this._composing=!1,this._compositionMode&&this.onChange(A)}}return F.\u0275fac=function(A){return new(A||F)(p.Y36(p.Qsj),p.Y36(p.SBq),p.Y36(jt,8))},F.\u0275dir=p.lG2({type:F,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(A,K){1&A&&p.NdJ("input",function(nn){return K._handleInput(nn.target.value)})("blur",function(){return K.onTouched()})("compositionstart",function(){return K._compositionStart()})("compositionend",function(nn){return K._compositionEnd(nn.target.value)})},features:[p._Bn([He]),p.qOj]}),F})();function Je(F){return null==F||("string"==typeof F||Array.isArray(F))&&0===F.length}function vt(F){return null!=F&&"number"==typeof F.length}const tt=new p.OlP("NgValidators"),ae=new p.OlP("NgAsyncValidators"),Fe=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class ne{static min(N){return function Ie(F){return N=>{if(Je(N.value)||Je(F))return null;const A=parseFloat(N.value);return!isNaN(A)&&A<F?{min:{min:F,actual:N.value}}:null}}(N)}static max(N){return function de(F){return N=>{if(Je(N.value)||Je(F))return null;const A=parseFloat(N.value);return!isNaN(A)&&A>F?{max:{max:F,actual:N.value}}:null}}(N)}static required(N){return function Ne(F){return Je(F.value)?{required:!0}:null}(N)}static requiredTrue(N){return function dt(F){return!0===F.value?null:{required:!0}}(N)}static email(N){return function wt(F){return Je(F.value)||Fe.test(F.value)?null:{email:!0}}(N)}static minLength(N){return function Ct(F){return N=>Je(N.value)||!vt(N.value)?null:N.value.length<F?{minlength:{requiredLength:F,actualLength:N.value.length}}:null}(N)}static maxLength(N){return function Mt(F){return N=>vt(N.value)&&N.value.length>F?{maxlength:{requiredLength:F,actualLength:N.value.length}}:null}(N)}static pattern(N){return function $t(F){if(!F)return ht;let N,A;return"string"==typeof F?(A="","^"!==F.charAt(0)&&(A+="^"),A+=F,"$"!==F.charAt(F.length-1)&&(A+="$"),N=new RegExp(A)):(A=F.toString(),N=F),K=>{if(Je(K.value))return null;const Xe=K.value;return N.test(Xe)?null:{pattern:{requiredPattern:A,actualValue:Xe}}}}(N)}static nullValidator(N){return null}static compose(N){return $n(N)}static composeAsync(N){return vr(N)}}function ht(F){return null}function tn(F){return null!=F}function Kt(F){return(0,p.QGY)(F)?(0,G.D)(F):F}function on(F){let N={};return F.forEach(A=>{N=null!=A?{...N,...A}:N}),0===Object.keys(N).length?null:N}function kt(F,N){return N.map(A=>A(F))}function un(F){return F.map(N=>function Nn(F){return!F.validate}(N)?N:A=>N.validate(A))}function $n(F){if(!F)return null;const N=F.filter(tn);return 0==N.length?null:function(A){return on(kt(A,N))}}function Wr(F){return null!=F?$n(un(F)):null}function vr(F){if(!F)return null;const N=F.filter(tn);return 0==N.length?null:function(A){return function ue(...F){const N=(0,Re.jO)(F),{args:A,keys:K}=(0,we.D)(F),Xe=new be.y(nn=>{const{length:dr}=A;if(!dr)return void nn.complete();const fs=new Array(dr);let mi=dr,ji=dr;for(let Js=0;Js<dr;Js++){let Xs=!1;(0,Me.Xf)(A[Js]).subscribe((0,Oe.x)(nn,ko=>{Xs||(Xs=!0,ji--),fs[Js]=ko},()=>mi--,void 0,()=>{(!mi||!Xs)&&(ji||nn.next(K?(0,le.n)(K,fs):fs),nn.complete())}))}});return N?Xe.pipe((0,ke.Z)(N)):Xe}(kt(A,N).map(Kt)).pipe((0,Ce.U)(on))}}function _r(F){return null!=F?vr(un(F)):null}function yr(F,N){return null===F?[N]:Array.isArray(F)?[...F,N]:[F,N]}function Ir(F){return F._rawValidators}function qt(F){return F._rawAsyncValidators}function rr(F){return F?Array.isArray(F)?F:[F]:[]}function zn(F,N){return Array.isArray(F)?F.includes(N):F===N}function lr(F,N){const A=rr(N);return rr(F).forEach(Xe=>{zn(A,Xe)||A.push(Xe)}),A}function pt(F,N){return rr(N).filter(A=>!zn(F,A))}class nr{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(N){this._rawValidators=N||[],this._composedValidatorFn=Wr(this._rawValidators)}_setAsyncValidators(N){this._rawAsyncValidators=N||[],this._composedAsyncValidatorFn=_r(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(N){this._onDestroyCallbacks.push(N)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(N=>N()),this._onDestroyCallbacks=[]}reset(N){this.control&&this.control.reset(N)}hasError(N,A){return!!this.control&&this.control.hasError(N,A)}getError(N,A){return this.control?this.control.getError(N,A):null}}class En extends nr{get formDirective(){return null}get path(){return null}}class Hn extends nr{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class ei{constructor(N){this._cd=N}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let Ue=(()=>{class F extends ei{constructor(A){super(A)}}return F.\u0275fac=function(A){return new(A||F)(p.Y36(Hn,2))},F.\u0275dir=p.lG2({type:F,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(A,K){2&A&&p.ekj("ng-untouched",K.isUntouched)("ng-touched",K.isTouched)("ng-pristine",K.isPristine)("ng-dirty",K.isDirty)("ng-valid",K.isValid)("ng-invalid",K.isInvalid)("ng-pending",K.isPending)},features:[p.qOj]}),F})(),ge=(()=>{class F extends ei{constructor(A){super(A)}}return F.\u0275fac=function(A){return new(A||F)(p.Y36(En,10))},F.\u0275dir=p.lG2({type:F,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(A,K){2&A&&p.ekj("ng-untouched",K.isUntouched)("ng-touched",K.isTouched)("ng-pristine",K.isPristine)("ng-dirty",K.isDirty)("ng-valid",K.isValid)("ng-invalid",K.isInvalid)("ng-pending",K.isPending)("ng-submitted",K.isSubmitted)},features:[p.qOj]}),F})();const Vt="VALID",ar="INVALID",gn="PENDING",cr="DISABLED";function Sn(F){return(qr(F)?F.validators:F)||null}function ln(F){return Array.isArray(F)?Wr(F):F||null}function Jn(F,N){return(qr(N)?N.asyncValidators:F)||null}function kn(F){return Array.isArray(F)?_r(F):F||null}function qr(F){return null!=F&&!Array.isArray(F)&&"object"==typeof F}class ve{constructor(N,A){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=N,this._rawAsyncValidators=A,this._composedValidatorFn=ln(this._rawValidators),this._composedAsyncValidatorFn=kn(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(N){this._rawValidators=this._composedValidatorFn=N}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(N){this._rawAsyncValidators=this._composedAsyncValidatorFn=N}get parent(){return this._parent}get valid(){return this.status===Vt}get invalid(){return this.status===ar}get pending(){return this.status==gn}get disabled(){return this.status===cr}get enabled(){return this.status!==cr}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(N){this._rawValidators=N,this._composedValidatorFn=ln(N)}setAsyncValidators(N){this._rawAsyncValidators=N,this._composedAsyncValidatorFn=kn(N)}addValidators(N){this.setValidators(lr(N,this._rawValidators))}addAsyncValidators(N){this.setAsyncValidators(lr(N,this._rawAsyncValidators))}removeValidators(N){this.setValidators(pt(N,this._rawValidators))}removeAsyncValidators(N){this.setAsyncValidators(pt(N,this._rawAsyncValidators))}hasValidator(N){return zn(this._rawValidators,N)}hasAsyncValidator(N){return zn(this._rawAsyncValidators,N)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(N={}){this.touched=!0,this._parent&&!N.onlySelf&&this._parent.markAsTouched(N)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(N=>N.markAllAsTouched())}markAsUntouched(N={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(A=>{A.markAsUntouched({onlySelf:!0})}),this._parent&&!N.onlySelf&&this._parent._updateTouched(N)}markAsDirty(N={}){this.pristine=!1,this._parent&&!N.onlySelf&&this._parent.markAsDirty(N)}markAsPristine(N={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(A=>{A.markAsPristine({onlySelf:!0})}),this._parent&&!N.onlySelf&&this._parent._updatePristine(N)}markAsPending(N={}){this.status=gn,!1!==N.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!N.onlySelf&&this._parent.markAsPending(N)}disable(N={}){const A=this._parentMarkedDirty(N.onlySelf);this.status=cr,this.errors=null,this._forEachChild(K=>{K.disable({...N,onlySelf:!0})}),this._updateValue(),!1!==N.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...N,skipPristineCheck:A}),this._onDisabledChange.forEach(K=>K(!0))}enable(N={}){const A=this._parentMarkedDirty(N.onlySelf);this.status=Vt,this._forEachChild(K=>{K.enable({...N,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:N.emitEvent}),this._updateAncestors({...N,skipPristineCheck:A}),this._onDisabledChange.forEach(K=>K(!1))}_updateAncestors(N){this._parent&&!N.onlySelf&&(this._parent.updateValueAndValidity(N),N.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(N){this._parent=N}getRawValue(){return this.value}updateValueAndValidity(N={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Vt||this.status===gn)&&this._runAsyncValidator(N.emitEvent)),!1!==N.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!N.onlySelf&&this._parent.updateValueAndValidity(N)}_updateTreeValidity(N={emitEvent:!0}){this._forEachChild(A=>A._updateTreeValidity(N)),this.updateValueAndValidity({onlySelf:!0,emitEvent:N.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?cr:Vt}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(N){if(this.asyncValidator){this.status=gn,this._hasOwnPendingAsyncValidator=!0;const A=Kt(this.asyncValidator(this));this._asyncValidationSubscription=A.subscribe(K=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(K,{emitEvent:N})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(N,A={}){this.errors=N,this._updateControlsErrors(!1!==A.emitEvent)}get(N){let A=N;return null==A||(Array.isArray(A)||(A=A.split(".")),0===A.length)?null:A.reduce((K,Xe)=>K&&K._find(Xe),this)}getError(N,A){const K=A?this.get(A):this;return K&&K.errors?K.errors[N]:null}hasError(N,A){return!!this.getError(N,A)}get root(){let N=this;for(;N._parent;)N=N._parent;return N}_updateControlsErrors(N){this.status=this._calculateStatus(),N&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(N)}_initObservables(){this.valueChanges=new p.vpe,this.statusChanges=new p.vpe}_calculateStatus(){return this._allControlsDisabled()?cr:this.errors?ar:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(gn)?gn:this._anyControlsHaveStatus(ar)?ar:Vt}_anyControlsHaveStatus(N){return this._anyControls(A=>A.status===N)}_anyControlsDirty(){return this._anyControls(N=>N.dirty)}_anyControlsTouched(){return this._anyControls(N=>N.touched)}_updatePristine(N={}){this.pristine=!this._anyControlsDirty(),this._parent&&!N.onlySelf&&this._parent._updatePristine(N)}_updateTouched(N={}){this.touched=this._anyControlsTouched(),this._parent&&!N.onlySelf&&this._parent._updateTouched(N)}_registerOnCollectionChange(N){this._onCollectionChange=N}_setUpdateStrategy(N){qr(N)&&null!=N.updateOn&&(this._updateOn=N.updateOn)}_parentMarkedDirty(N){return!N&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(N){return null}}class ce extends ve{constructor(N,A,K){super(Sn(A),Jn(K,A)),this.controls=N,this._initObservables(),this._setUpdateStrategy(A),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(N,A){return this.controls[N]?this.controls[N]:(this.controls[N]=A,A.setParent(this),A._registerOnCollectionChange(this._onCollectionChange),A)}addControl(N,A,K={}){this.registerControl(N,A),this.updateValueAndValidity({emitEvent:K.emitEvent}),this._onCollectionChange()}removeControl(N,A={}){this.controls[N]&&this.controls[N]._registerOnCollectionChange(()=>{}),delete this.controls[N],this.updateValueAndValidity({emitEvent:A.emitEvent}),this._onCollectionChange()}setControl(N,A,K={}){this.controls[N]&&this.controls[N]._registerOnCollectionChange(()=>{}),delete this.controls[N],A&&this.registerControl(N,A),this.updateValueAndValidity({emitEvent:K.emitEvent}),this._onCollectionChange()}contains(N){return this.controls.hasOwnProperty(N)&&this.controls[N].enabled}setValue(N,A={}){(function Dr(F,N,A){F._forEachChild((K,Xe)=>{if(void 0===A[Xe])throw new p.vHH(1002,"")})})(this,0,N),Object.keys(N).forEach(K=>{(function $r(F,N,A){const K=F.controls;if(!(N?Object.keys(K):K).length)throw new p.vHH(1e3,"");if(!K[A])throw new p.vHH(1001,"")})(this,!0,K),this.controls[K].setValue(N[K],{onlySelf:!0,emitEvent:A.emitEvent})}),this.updateValueAndValidity(A)}patchValue(N,A={}){null!=N&&(Object.keys(N).forEach(K=>{const Xe=this.controls[K];Xe&&Xe.patchValue(N[K],{onlySelf:!0,emitEvent:A.emitEvent})}),this.updateValueAndValidity(A))}reset(N={},A={}){this._forEachChild((K,Xe)=>{K.reset(N[Xe],{onlySelf:!0,emitEvent:A.emitEvent})}),this._updatePristine(A),this._updateTouched(A),this.updateValueAndValidity(A)}getRawValue(){return this._reduceChildren({},(N,A,K)=>(N[K]=A.getRawValue(),N))}_syncPendingControls(){let N=this._reduceChildren(!1,(A,K)=>!!K._syncPendingControls()||A);return N&&this.updateValueAndValidity({onlySelf:!0}),N}_forEachChild(N){Object.keys(this.controls).forEach(A=>{const K=this.controls[A];K&&N(K,A)})}_setUpControls(){this._forEachChild(N=>{N.setParent(this),N._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(N){for(const[A,K]of Object.entries(this.controls))if(this.contains(A)&&N(K))return!0;return!1}_reduceValue(){return this._reduceChildren({},(A,K,Xe)=>((K.enabled||this.disabled)&&(A[Xe]=K.value),A))}_reduceChildren(N,A){let K=N;return this._forEachChild((Xe,nn)=>{K=A(K,Xe,nn)}),K}_allControlsDisabled(){for(const N of Object.keys(this.controls))if(this.controls[N].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(N){return this.controls.hasOwnProperty(N)?this.controls[N]:null}}function pn(F,N){return[...N.path,F]}function cn(F,N){In(F,N),N.valueAccessor.writeValue(F.value),F.disabled&&N.valueAccessor.setDisabledState?.(!0),function ms(F,N){N.valueAccessor.registerOnChange(A=>{F._pendingValue=A,F._pendingChange=!0,F._pendingDirty=!0,"change"===F.updateOn&&Fr(F,N)})}(F,N),function Ns(F,N){const A=(K,Xe)=>{N.valueAccessor.writeValue(K),Xe&&N.viewToModelUpdate(K)};F.registerOnChange(A),N._registerOnDestroy(()=>{F._unregisterOnChange(A)})}(F,N),function Li(F,N){N.valueAccessor.registerOnTouched(()=>{F._pendingTouched=!0,"blur"===F.updateOn&&F._pendingChange&&Fr(F,N),"submit"!==F.updateOn&&F.markAsTouched()})}(F,N),function mn(F,N){if(N.valueAccessor.setDisabledState){const A=K=>{N.valueAccessor.setDisabledState(K)};F.registerOnDisabledChange(A),N._registerOnDestroy(()=>{F._unregisterOnDisabledChange(A)})}}(F,N)}function hr(F,N,A=!0){const K=()=>{};N.valueAccessor&&(N.valueAccessor.registerOnChange(K),N.valueAccessor.registerOnTouched(K)),Xn(F,N),F&&(N._invokeOnDestroyCallbacks(),F._registerOnCollectionChange(()=>{}))}function Cr(F,N){F.forEach(A=>{A.registerOnValidatorChange&&A.registerOnValidatorChange(N)})}function In(F,N){const A=Ir(F);null!==N.validator?F.setValidators(yr(A,N.validator)):"function"==typeof A&&F.setValidators([A]);const K=qt(F);null!==N.asyncValidator?F.setAsyncValidators(yr(K,N.asyncValidator)):"function"==typeof K&&F.setAsyncValidators([K]);const Xe=()=>F.updateValueAndValidity();Cr(N._rawValidators,Xe),Cr(N._rawAsyncValidators,Xe)}function Xn(F,N){let A=!1;if(null!==F){if(null!==N.validator){const Xe=Ir(F);if(Array.isArray(Xe)&&Xe.length>0){const nn=Xe.filter(dr=>dr!==N.validator);nn.length!==Xe.length&&(A=!0,F.setValidators(nn))}}if(null!==N.asyncValidator){const Xe=qt(F);if(Array.isArray(Xe)&&Xe.length>0){const nn=Xe.filter(dr=>dr!==N.asyncValidator);nn.length!==Xe.length&&(A=!0,F.setAsyncValidators(nn))}}}const K=()=>{};return Cr(N._rawValidators,K),Cr(N._rawAsyncValidators,K),A}function Fr(F,N){F._pendingDirty&&F.markAsDirty(),F.setValue(F._pendingValue,{emitModelToViewChange:!1}),N.viewToModelUpdate(F._pendingValue),F._pendingChange=!1}function as(F,N){In(F,N)}function Qi(F,N){if(!F.hasOwnProperty("model"))return!1;const A=F.model;return!!A.isFirstChange()||!Object.is(N,A.currentValue)}function Ps(F,N){F._syncPendingControls(),N.forEach(A=>{const K=A.control;"submit"===K.updateOn&&K._pendingChange&&(A.viewToModelUpdate(K._pendingValue),K._pendingChange=!1)})}function Ii(F,N){if(!N)return null;let A,K,Xe;return Array.isArray(N),N.forEach(nn=>{nn.constructor===he?A=nn:function Ti(F){return Object.getPrototypeOf(F.constructor)===ot}(nn)?K=nn:Xe=nn}),Xe||K||A||null}const Ar={provide:En,useExisting:(0,p.Gpc)(()=>er)},us=(()=>Promise.resolve(null))();let er=(()=>{class F extends En{constructor(A,K){super(),this.submitted=!1,this._directives=new Set,this.ngSubmit=new p.vpe,this.form=new ce({},Wr(A),_r(K))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(A){us.then(()=>{const K=this._findContainer(A.path);A.control=K.registerControl(A.name,A.control),cn(A.control,A),A.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(A)})}getControl(A){return this.form.get(A.path)}removeControl(A){us.then(()=>{const K=this._findContainer(A.path);K&&K.removeControl(A.name),this._directives.delete(A)})}addFormGroup(A){us.then(()=>{const K=this._findContainer(A.path),Xe=new ce({});as(Xe,A),K.registerControl(A.name,Xe),Xe.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(A){us.then(()=>{const K=this._findContainer(A.path);K&&K.removeControl(A.name)})}getFormGroup(A){return this.form.get(A.path)}updateModel(A,K){us.then(()=>{this.form.get(A.path).setValue(K)})}setValue(A){this.control.setValue(A)}onSubmit(A){return this.submitted=!0,Ps(this.form,this._directives),this.ngSubmit.emit(A),!1}onReset(){this.resetForm()}resetForm(A){this.form.reset(A),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(A){return A.pop(),A.length?this.form.get(A):this.form}}return F.\u0275fac=function(A){return new(A||F)(p.Y36(tt,10),p.Y36(ae,10))},F.\u0275dir=p.lG2({type:F,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(A,K){1&A&&p.NdJ("submit",function(nn){return K.onSubmit(nn)})("reset",function(){return K.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[p._Bn([Ar]),p.qOj]}),F})();function Kr(F,N){const A=F.indexOf(N);A>-1&&F.splice(A,1)}function Ws(F){return"object"==typeof F&&null!==F&&2===Object.keys(F).length&&"value"in F&&"disabled"in F}const ys=class extends ve{constructor(N=null,A,K){super(Sn(A),Jn(K,A)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(N),this._setUpdateStrategy(A),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),qr(A)&&(A.nonNullable||A.initialValueIsDefault)&&(this.defaultValue=Ws(N)?N.value:N)}setValue(N,A={}){this.value=this._pendingValue=N,this._onChange.length&&!1!==A.emitModelToViewChange&&this._onChange.forEach(K=>K(this.value,!1!==A.emitViewToModelChange)),this.updateValueAndValidity(A)}patchValue(N,A={}){this.setValue(N,A)}reset(N=this.defaultValue,A={}){this._applyFormState(N),this.markAsPristine(A),this.markAsUntouched(A),this.setValue(this.value,A),this._pendingChange=!1}_updateValue(){}_anyControls(N){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(N){this._onChange.push(N)}_unregisterOnChange(N){Kr(this._onChange,N)}registerOnDisabledChange(N){this._onDisabledChange.push(N)}_unregisterOnDisabledChange(N){Kr(this._onDisabledChange,N)}_forEachChild(N){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(N){Ws(N)?(this.value=this._pendingValue=N.value,N.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=N}},Ae={provide:Hn,useExisting:(0,p.Gpc)(()=>lt)},Ve=(()=>Promise.resolve(null))();let lt=(()=>{class F extends Hn{constructor(A,K,Xe,nn,dr){super(),this._changeDetectorRef=dr,this.control=new ys,this._registered=!1,this.update=new p.vpe,this._parent=A,this._setValidators(K),this._setAsyncValidators(Xe),this.valueAccessor=Ii(0,nn)}ngOnChanges(A){if(this._checkForErrors(),!this._registered||"name"in A){if(this._registered&&(this._checkName(),this.formDirective)){const K=A.name.previousValue;this.formDirective.removeControl({name:K,path:this._getPath(K)})}this._setUpControl()}"isDisabled"in A&&this._updateDisabled(A),Qi(A,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(A){this.viewModel=A,this.update.emit(A)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){cn(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(A){Ve.then(()=>{this.control.setValue(A,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(A){const K=A.isDisabled.currentValue,Xe=0!==K&&(0,p.D6c)(K);Ve.then(()=>{Xe&&!this.control.disabled?this.control.disable():!Xe&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(A){return this._parent?pn(A,this._parent):[A]}}return F.\u0275fac=function(A){return new(A||F)(p.Y36(En,9),p.Y36(tt,10),p.Y36(ae,10),p.Y36(Ze,10),p.Y36(p.sBO,8))},F.\u0275dir=p.lG2({type:F,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[p._Bn([Ae]),p.qOj,p.TTD]}),F})(),Dt=(()=>{class F{}return F.\u0275fac=function(A){return new(A||F)},F.\u0275dir=p.lG2({type:F,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),F})();const Er={provide:Ze,useExisting:(0,p.Gpc)(()=>Ks),multi:!0};let fi=(()=>{class F{}return F.\u0275fac=function(A){return new(A||F)},F.\u0275mod=p.oAB({type:F}),F.\u0275inj=p.cJS({}),F})(),vo=(()=>{class F{constructor(){this._accessors=[]}add(A,K){this._accessors.push([A,K])}remove(A){for(let K=this._accessors.length-1;K>=0;--K)if(this._accessors[K][1]===A)return void this._accessors.splice(K,1)}select(A){this._accessors.forEach(K=>{this._isSameGroup(K,A)&&K[1]!==A&&K[1].fireUncheck(A.value)})}_isSameGroup(A,K){return!!A[0].control&&A[0]._parent===K._control._parent&&A[1].name===K.name}}return F.\u0275fac=function(A){return new(A||F)},F.\u0275prov=p.Yz7({token:F,factory:F.\u0275fac,providedIn:fi}),F})(),Ks=(()=>{class F extends ot{constructor(A,K,Xe,nn){super(A,K),this._registry=Xe,this._injector=nn,this.onChange=()=>{}}ngOnInit(){this._control=this._injector.get(Hn),this._checkName(),this._registry.add(this._control,this)}ngOnDestroy(){this._registry.remove(this)}writeValue(A){this._state=A===this.value,this.setProperty("checked",this._state)}registerOnChange(A){this._fn=A,this.onChange=()=>{A(this.value),this._registry.select(this)}}fireUncheck(A){this.writeValue(A)}_checkName(){!this.name&&this.formControlName&&(this.name=this.formControlName)}}return F.\u0275fac=function(A){return new(A||F)(p.Y36(p.Qsj),p.Y36(p.SBq),p.Y36(vo),p.Y36(p.zs3))},F.\u0275dir=p.lG2({type:F,selectors:[["input","type","radio","formControlName",""],["input","type","radio","formControl",""],["input","type","radio","ngModel",""]],hostBindings:function(A,K){1&A&&p.NdJ("change",function(){return K.onChange()})("blur",function(){return K.onTouched()})},inputs:{name:"name",formControlName:"formControlName",value:"value"},features:[p._Bn([Er]),p.qOj]}),F})();const Ni=new p.OlP("NgModelWithFormControlWarning"),Pi={provide:En,useExisting:(0,p.Gpc)(()=>Xi)};let Xi=(()=>{class F extends En{constructor(A,K){super(),this.validators=A,this.asyncValidators=K,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new p.vpe,this._setValidators(A),this._setAsyncValidators(K)}ngOnChanges(A){this._checkFormPresent(),A.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Xn(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(A){const K=this.form.get(A.path);return cn(K,A),K.updateValueAndValidity({emitEvent:!1}),this.directives.push(A),K}getControl(A){return this.form.get(A.path)}removeControl(A){hr(A.control||null,A,!1),function Oi(F,N){const A=F.indexOf(N);A>-1&&F.splice(A,1)}(this.directives,A)}addFormGroup(A){this._setUpFormContainer(A)}removeFormGroup(A){this._cleanUpFormContainer(A)}getFormGroup(A){return this.form.get(A.path)}addFormArray(A){this._setUpFormContainer(A)}removeFormArray(A){this._cleanUpFormContainer(A)}getFormArray(A){return this.form.get(A.path)}updateModel(A,K){this.form.get(A.path).setValue(K)}onSubmit(A){return this.submitted=!0,Ps(this.form,this.directives),this.ngSubmit.emit(A),!1}onReset(){this.resetForm()}resetForm(A){this.form.reset(A),this.submitted=!1}_updateDomValue(){this.directives.forEach(A=>{const K=A.control,Xe=this.form.get(A.path);K!==Xe&&(hr(K||null,A),(F=>F instanceof ys)(Xe)&&(cn(Xe,A),A.control=Xe))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(A){const K=this.form.get(A.path);as(K,A),K.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(A){if(this.form){const K=this.form.get(A.path);K&&function Zr(F,N){return Xn(F,N)}(K,A)&&K.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){In(this.form,this),this._oldForm&&Xn(this._oldForm,this)}_checkFormPresent(){}}return F.\u0275fac=function(A){return new(A||F)(p.Y36(tt,10),p.Y36(ae,10))},F.\u0275dir=p.lG2({type:F,selectors:[["","formGroup",""]],hostBindings:function(A,K){1&A&&p.NdJ("submit",function(nn){return K.onSubmit(nn)})("reset",function(){return K.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[p._Bn([Pi]),p.qOj,p.TTD]}),F})();const _o={provide:Hn,useExisting:(0,p.Gpc)(()=>Vs)};let Vs=(()=>{class F extends Hn{constructor(A,K,Xe,nn,dr){super(),this._ngModelWarningConfig=dr,this._added=!1,this.update=new p.vpe,this._ngModelWarningSent=!1,this._parent=A,this._setValidators(K),this._setAsyncValidators(Xe),this.valueAccessor=Ii(0,nn)}set isDisabled(A){}ngOnChanges(A){this._added||this._setUpControl(),Qi(A,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(A){this.viewModel=A,this.update.emit(A)}get path(){return pn(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}}return F._ngModelWarningSentOnce=!1,F.\u0275fac=function(A){return new(A||F)(p.Y36(En,13),p.Y36(tt,10),p.Y36(ae,10),p.Y36(Ze,10),p.Y36(Ni,8))},F.\u0275dir=p.lG2({type:F,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[p._Bn([_o]),p.qOj,p.TTD]}),F})();const _s={provide:Ze,useExisting:(0,p.Gpc)(()=>Ai),multi:!0};function ii(F,N){return null==F?`${N}`:(N&&"object"==typeof N&&(N="Object"),`${F}: ${N}`.slice(0,50))}let Ai=(()=>{class F extends ot{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(A){this._compareWith=A}writeValue(A){this.value=A;const Xe=ii(this._getOptionId(A),A);this.setProperty("value",Xe)}registerOnChange(A){this.onChange=K=>{this.value=this._getOptionValue(K),A(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(A){for(const K of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(K),A))return K;return null}_getOptionValue(A){const K=function Vi(F){return F.split(":")[0]}(A);return this._optionMap.has(K)?this._optionMap.get(K):A}}return F.\u0275fac=function(){let N;return function(K){return(N||(N=p.n5z(F)))(K||F)}}(),F.\u0275dir=p.lG2({type:F,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(A,K){1&A&&p.NdJ("change",function(nn){return K.onChange(nn.target.value)})("blur",function(){return K.onTouched()})},inputs:{compareWith:"compareWith"},features:[p._Bn([_s]),p.qOj]}),F})(),Yr=(()=>{class F{constructor(A,K,Xe){this._element=A,this._renderer=K,this._select=Xe,this._select&&(this.id=this._select._registerOption())}set ngValue(A){null!=this._select&&(this._select._optionMap.set(this.id,A),this._setElementValue(ii(this.id,A)),this._select.writeValue(this._select.value))}set value(A){this._setElementValue(A),this._select&&this._select.writeValue(this._select.value)}_setElementValue(A){this._renderer.setProperty(this._element.nativeElement,"value",A)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return F.\u0275fac=function(A){return new(A||F)(p.Y36(p.SBq),p.Y36(p.Qsj),p.Y36(Ai,9))},F.\u0275dir=p.lG2({type:F,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),F})();const Vr={provide:Ze,useExisting:(0,p.Gpc)(()=>ds),multi:!0};function wo(F,N){return null==F?`${N}`:("string"==typeof N&&(N=`'${N}'`),N&&"object"==typeof N&&(N="Object"),`${F}: ${N}`.slice(0,50))}let ds=(()=>{class F extends ot{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(A){this._compareWith=A}writeValue(A){let K;if(this.value=A,Array.isArray(A)){const Xe=A.map(nn=>this._getOptionId(nn));K=(nn,dr)=>{nn._setSelected(Xe.indexOf(dr.toString())>-1)}}else K=(Xe,nn)=>{Xe._setSelected(!1)};this._optionMap.forEach(K)}registerOnChange(A){this.onChange=K=>{const Xe=[],nn=K.selectedOptions;if(void 0!==nn){const dr=nn;for(let fs=0;fs<dr.length;fs++){const ji=this._getOptionValue(dr[fs].value);Xe.push(ji)}}else{const dr=K.options;for(let fs=0;fs<dr.length;fs++){const mi=dr[fs];if(mi.selected){const ji=this._getOptionValue(mi.value);Xe.push(ji)}}}this.value=Xe,A(Xe)}}_registerOption(A){const K=(this._idCounter++).toString();return this._optionMap.set(K,A),K}_getOptionId(A){for(const K of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(K)._value,A))return K;return null}_getOptionValue(A){const K=function uo(F){return F.split(":")[0]}(A);return this._optionMap.has(K)?this._optionMap.get(K)._value:A}}return F.\u0275fac=function(){let N;return function(K){return(N||(N=p.n5z(F)))(K||F)}}(),F.\u0275dir=p.lG2({type:F,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(A,K){1&A&&p.NdJ("change",function(nn){return K.onChange(nn.target)})("blur",function(){return K.onTouched()})},inputs:{compareWith:"compareWith"},features:[p._Bn([Vr]),p.qOj]}),F})(),Ro=(()=>{class F{constructor(A,K,Xe){this._element=A,this._renderer=K,this._select=Xe,this._select&&(this.id=this._select._registerOption(this))}set ngValue(A){null!=this._select&&(this._value=A,this._setElementValue(wo(this.id,A)),this._select.writeValue(this._select.value))}set value(A){this._select?(this._value=A,this._setElementValue(wo(this.id,A)),this._select.writeValue(this._select.value)):this._setElementValue(A)}_setElementValue(A){this._renderer.setProperty(this._element.nativeElement,"value",A)}_setSelected(A){this._renderer.setProperty(this._element.nativeElement,"selected",A)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return F.\u0275fac=function(A){return new(A||F)(p.Y36(p.SBq),p.Y36(p.Qsj),p.Y36(ds,9))},F.\u0275dir=p.lG2({type:F,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),F})(),Rn=(()=>{class F{}return F.\u0275fac=function(A){return new(A||F)},F.\u0275mod=p.oAB({type:F}),F.\u0275inj=p.cJS({imports:[fi]}),F})(),Bs=(()=>{class F{}return F.\u0275fac=function(A){return new(A||F)},F.\u0275mod=p.oAB({type:F}),F.\u0275inj=p.cJS({imports:[Rn]}),F})(),Po=(()=>{class F{static withConfig(A){return{ngModule:F,providers:[{provide:Ni,useValue:A.warnOnNgModelWithFormControl}]}}}return F.\u0275fac=function(A){return new(A||F)},F.\u0275mod=p.oAB({type:F}),F.\u0275inj=p.cJS({imports:[Rn]}),F})()},1481:(Gt,We,V)=>{V.d(We,{Dx:()=>Ue,b2:()=>En,q6:()=>zn});var p=V(6895),C=V(4650);class G extends p.w_{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class be extends G{static makeCurrent(){(0,p.HT)(new be)}onAndCancel(ce,re,Le){return ce.addEventListener(re,Le,!1),()=>{ce.removeEventListener(re,Le,!1)}}dispatchEvent(ce,re){ce.dispatchEvent(re)}remove(ce){ce.parentNode&&ce.parentNode.removeChild(ce)}createElement(ce,re){return(re=re||this.getDefaultDocument()).createElement(ce)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(ce){return ce.nodeType===Node.ELEMENT_NODE}isShadowRoot(ce){return ce instanceof DocumentFragment}getGlobalEventTarget(ce,re){return"window"===re?window:"document"===re?ce:"body"===re?ce.body:null}getBaseHref(ce){const re=function Me(){return we=we||document.querySelector("base"),we?we.getAttribute("href"):null}();return null==re?null:function Oe(ve){Re=Re||document.createElement("a"),Re.setAttribute("href",ve);const ce=Re.pathname;return"/"===ce.charAt(0)?ce:`/${ce}`}(re)}resetBaseElement(){we=null}getUserAgent(){return window.navigator.userAgent}getCookie(ce){return(0,p.Mx)(document.cookie,ce)}}let Re,we=null;const ke=new C.OlP("TRANSITION_ID"),ue=[{provide:C.ip1,useFactory:function le(ve,ce,re){return()=>{re.get(C.CZH).donePromise.then(()=>{const Le=(0,p.q)(),at=ce.querySelectorAll(`style[ng-transition="${ve}"]`);for(let Wt=0;Wt<at.length;Wt++)Le.remove(at[Wt])})}},deps:[ke,p.K0,C.zs3],multi:!0}];let yt=(()=>{class ve{build(){return new XMLHttpRequest}}return ve.\u0275fac=function(re){return new(re||ve)},ve.\u0275prov=C.Yz7({token:ve,factory:ve.\u0275fac}),ve})();const ot=new C.OlP("EventManagerPlugins");let Ze=(()=>{class ve{constructor(re,Le){this._zone=Le,this._eventNameToPlugin=new Map,re.forEach(at=>at.manager=this),this._plugins=re.slice().reverse()}addEventListener(re,Le,at){return this._findPluginFor(Le).addEventListener(re,Le,at)}addGlobalEventListener(re,Le,at){return this._findPluginFor(Le).addGlobalEventListener(re,Le,at)}getZone(){return this._zone}_findPluginFor(re){const Le=this._eventNameToPlugin.get(re);if(Le)return Le;const at=this._plugins;for(let Wt=0;Wt<at.length;Wt++){const pn=at[Wt];if(pn.supports(re))return this._eventNameToPlugin.set(re,pn),pn}throw new Error(`No event manager plugin found for event ${re}`)}}return ve.\u0275fac=function(re){return new(re||ve)(C.LFG(ot),C.LFG(C.R0b))},ve.\u0275prov=C.Yz7({token:ve,factory:ve.\u0275fac}),ve})();class Ot{constructor(ce){this._doc=ce}addGlobalEventListener(ce,re,Le){const at=(0,p.q)().getGlobalEventTarget(this._doc,ce);if(!at)throw new Error(`Unsupported event target ${at} for event ${re}`);return this.addEventListener(at,re,Le)}}let Ke=(()=>{class ve{constructor(){this._stylesSet=new Set}addStyles(re){const Le=new Set;re.forEach(at=>{this._stylesSet.has(at)||(this._stylesSet.add(at),Le.add(at))}),this.onStylesAdded(Le)}onStylesAdded(re){}getAllStyles(){return Array.from(this._stylesSet)}}return ve.\u0275fac=function(re){return new(re||ve)},ve.\u0275prov=C.Yz7({token:ve,factory:ve.\u0275fac}),ve})(),He=(()=>{class ve extends Ke{constructor(re){super(),this._doc=re,this._hostNodes=new Map,this._hostNodes.set(re.head,[])}_addStylesToHost(re,Le,at){re.forEach(Wt=>{const pn=this._doc.createElement("style");pn.textContent=Wt,at.push(Le.appendChild(pn))})}addHost(re){const Le=[];this._addStylesToHost(this._stylesSet,re,Le),this._hostNodes.set(re,Le)}removeHost(re){const Le=this._hostNodes.get(re);Le&&Le.forEach(Bt),this._hostNodes.delete(re)}onStylesAdded(re){this._hostNodes.forEach((Le,at)=>{this._addStylesToHost(re,at,Le)})}ngOnDestroy(){this._hostNodes.forEach(re=>re.forEach(Bt))}}return ve.\u0275fac=function(re){return new(re||ve)(C.LFG(p.K0))},ve.\u0275prov=C.Yz7({token:ve,factory:ve.\u0275fac}),ve})();function Bt(ve){(0,p.q)().remove(ve)}const jt={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},he=/%COMP%/g;function ne(ve,ce,re){for(let Le=0;Le<ce.length;Le++){let at=ce[Le];Array.isArray(at)?ne(ve,at,re):(at=at.replace(he,ve),re.push(at))}return re}function Ie(ve){return ce=>{if("__ngUnwrap__"===ce)return ve;!1===ve(ce)&&(ce.preventDefault(),ce.returnValue=!1)}}let Ne=(()=>{class ve{constructor(re,Le,at){this.eventManager=re,this.sharedStylesHost=Le,this.appId=at,this.rendererByCompId=new Map,this.defaultRenderer=new dt(re)}createRenderer(re,Le){if(!re||!Le)return this.defaultRenderer;switch(Le.encapsulation){case C.ifc.Emulated:{let at=this.rendererByCompId.get(Le.id);return at||(at=new $t(this.eventManager,this.sharedStylesHost,Le,this.appId),this.rendererByCompId.set(Le.id,at)),at.applyToHost(re),at}case 1:case C.ifc.ShadowDom:return new ht(this.eventManager,this.sharedStylesHost,re,Le);default:if(!this.rendererByCompId.has(Le.id)){const at=ne(Le.id,Le.styles,[]);this.sharedStylesHost.addStyles(at),this.rendererByCompId.set(Le.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return ve.\u0275fac=function(re){return new(re||ve)(C.LFG(Ze),C.LFG(He),C.LFG(C.AFp))},ve.\u0275prov=C.Yz7({token:ve,factory:ve.\u0275fac}),ve})();class dt{constructor(ce){this.eventManager=ce,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(ce,re){return re?document.createElementNS(jt[re]||re,ce):document.createElement(ce)}createComment(ce){return document.createComment(ce)}createText(ce){return document.createTextNode(ce)}appendChild(ce,re){(Mt(ce)?ce.content:ce).appendChild(re)}insertBefore(ce,re,Le){ce&&(Mt(ce)?ce.content:ce).insertBefore(re,Le)}removeChild(ce,re){ce&&ce.removeChild(re)}selectRootElement(ce,re){let Le="string"==typeof ce?document.querySelector(ce):ce;if(!Le)throw new Error(`The selector "${ce}" did not match any elements`);return re||(Le.textContent=""),Le}parentNode(ce){return ce.parentNode}nextSibling(ce){return ce.nextSibling}setAttribute(ce,re,Le,at){if(at){re=at+":"+re;const Wt=jt[at];Wt?ce.setAttributeNS(Wt,re,Le):ce.setAttribute(re,Le)}else ce.setAttribute(re,Le)}removeAttribute(ce,re,Le){if(Le){const at=jt[Le];at?ce.removeAttributeNS(at,re):ce.removeAttribute(`${Le}:${re}`)}else ce.removeAttribute(re)}addClass(ce,re){ce.classList.add(re)}removeClass(ce,re){ce.classList.remove(re)}setStyle(ce,re,Le,at){at&(C.JOm.DashCase|C.JOm.Important)?ce.style.setProperty(re,Le,at&C.JOm.Important?"important":""):ce.style[re]=Le}removeStyle(ce,re,Le){Le&C.JOm.DashCase?ce.style.removeProperty(re):ce.style[re]=""}setProperty(ce,re,Le){ce[re]=Le}setValue(ce,re){ce.nodeValue=re}listen(ce,re,Le){return"string"==typeof ce?this.eventManager.addGlobalEventListener(ce,re,Ie(Le)):this.eventManager.addEventListener(ce,re,Ie(Le))}}function Mt(ve){return"TEMPLATE"===ve.tagName&&void 0!==ve.content}class $t extends dt{constructor(ce,re,Le,at){super(ce),this.component=Le;const Wt=ne(at+"-"+Le.id,Le.styles,[]);re.addStyles(Wt),this.contentAttr=function ae(ve){return"_ngcontent-%COMP%".replace(he,ve)}(at+"-"+Le.id),this.hostAttr=function Fe(ve){return"_nghost-%COMP%".replace(he,ve)}(at+"-"+Le.id)}applyToHost(ce){super.setAttribute(ce,this.hostAttr,"")}createElement(ce,re){const Le=super.createElement(ce,re);return super.setAttribute(Le,this.contentAttr,""),Le}}class ht extends dt{constructor(ce,re,Le,at){super(ce),this.sharedStylesHost=re,this.hostEl=Le,this.shadowRoot=Le.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const Wt=ne(at.id,at.styles,[]);for(let pn=0;pn<Wt.length;pn++){const cn=document.createElement("style");cn.textContent=Wt[pn],this.shadowRoot.appendChild(cn)}}nodeOrShadowRoot(ce){return ce===this.hostEl?this.shadowRoot:ce}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(ce,re){return super.appendChild(this.nodeOrShadowRoot(ce),re)}insertBefore(ce,re,Le){return super.insertBefore(this.nodeOrShadowRoot(ce),re,Le)}removeChild(ce,re){return super.removeChild(this.nodeOrShadowRoot(ce),re)}parentNode(ce){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(ce)))}}let tn=(()=>{class ve extends Ot{constructor(re){super(re)}supports(re){return!0}addEventListener(re,Le,at){return re.addEventListener(Le,at,!1),()=>this.removeEventListener(re,Le,at)}removeEventListener(re,Le,at){return re.removeEventListener(Le,at)}}return ve.\u0275fac=function(re){return new(re||ve)(C.LFG(p.K0))},ve.\u0275prov=C.Yz7({token:ve,factory:ve.\u0275fac}),ve})();const Kt=["alt","control","meta","shift"],on={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},kt={alt:ve=>ve.altKey,control:ve=>ve.ctrlKey,meta:ve=>ve.metaKey,shift:ve=>ve.shiftKey};let Nn=(()=>{class ve extends Ot{constructor(re){super(re)}supports(re){return null!=ve.parseEventName(re)}addEventListener(re,Le,at){const Wt=ve.parseEventName(Le),pn=ve.eventCallback(Wt.fullKey,at,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,p.q)().onAndCancel(re,Wt.domEventName,pn))}static parseEventName(re){const Le=re.toLowerCase().split("."),at=Le.shift();if(0===Le.length||"keydown"!==at&&"keyup"!==at)return null;const Wt=ve._normalizeKey(Le.pop());let pn="",cn=Le.indexOf("code");if(cn>-1&&(Le.splice(cn,1),pn="code."),Kt.forEach(Cr=>{const mn=Le.indexOf(Cr);mn>-1&&(Le.splice(mn,1),pn+=Cr+".")}),pn+=Wt,0!=Le.length||0===Wt.length)return null;const hr={};return hr.domEventName=at,hr.fullKey=pn,hr}static matchEventFullKeyCode(re,Le){let at=on[re.key]||re.key,Wt="";return Le.indexOf("code.")>-1&&(at=re.code,Wt="code."),!(null==at||!at)&&(at=at.toLowerCase()," "===at?at="space":"."===at&&(at="dot"),Kt.forEach(pn=>{pn!==at&&(0,kt[pn])(re)&&(Wt+=pn+".")}),Wt+=at,Wt===Le)}static eventCallback(re,Le,at){return Wt=>{ve.matchEventFullKeyCode(Wt,re)&&at.runGuarded(()=>Le(Wt))}}static _normalizeKey(re){return"esc"===re?"escape":re}}return ve.\u0275fac=function(re){return new(re||ve)(C.LFG(p.K0))},ve.\u0275prov=C.Yz7({token:ve,factory:ve.\u0275fac}),ve})();const zn=(0,C.eFA)(C._c5,"browser",[{provide:C.Lbi,useValue:p.bD},{provide:C.g9A,useValue:function yr(){be.makeCurrent()},multi:!0},{provide:p.K0,useFactory:function qt(){return(0,C.RDi)(document),document},deps:[]}]),lr=new C.OlP(""),pt=[{provide:C.rWj,useClass:class Ce{addToWindow(ce){C.dqk.getAngularTestability=(Le,at=!0)=>{const Wt=ce.findTestabilityInTree(Le,at);if(null==Wt)throw new Error("Could not find testability for element.");return Wt},C.dqk.getAllAngularTestabilities=()=>ce.getAllTestabilities(),C.dqk.getAllAngularRootElements=()=>ce.getAllRootElements(),C.dqk.frameworkStabilizers||(C.dqk.frameworkStabilizers=[]),C.dqk.frameworkStabilizers.push(Le=>{const at=C.dqk.getAllAngularTestabilities();let Wt=at.length,pn=!1;const cn=function(hr){pn=pn||hr,Wt--,0==Wt&&Le(pn)};at.forEach(function(hr){hr.whenStable(cn)})})}findTestabilityInTree(ce,re,Le){return null==re?null:ce.getTestability(re)??(Le?(0,p.q)().isShadowRoot(re)?this.findTestabilityInTree(ce,re.host,!0):this.findTestabilityInTree(ce,re.parentElement,!0):null)}},deps:[]},{provide:C.lri,useClass:C.dDg,deps:[C.R0b,C.eoX,C.rWj]},{provide:C.dDg,useClass:C.dDg,deps:[C.R0b,C.eoX,C.rWj]}],nr=[{provide:C.zSh,useValue:"root"},{provide:C.qLn,useFactory:function Ir(){return new C.qLn},deps:[]},{provide:ot,useClass:tn,multi:!0,deps:[p.K0,C.R0b,C.Lbi]},{provide:ot,useClass:Nn,multi:!0,deps:[p.K0]},{provide:Ne,useClass:Ne,deps:[Ze,He,C.AFp]},{provide:C.FYo,useExisting:Ne},{provide:Ke,useExisting:He},{provide:He,useClass:He,deps:[p.K0]},{provide:Ze,useClass:Ze,deps:[ot,C.R0b]},{provide:p.JF,useClass:yt,deps:[]},[]];let En=(()=>{class ve{constructor(re){}static withServerTransition(re){return{ngModule:ve,providers:[{provide:C.AFp,useValue:re.appId},{provide:ke,useExisting:C.AFp},ue]}}}return ve.\u0275fac=function(re){return new(re||ve)(C.LFG(lr,12))},ve.\u0275mod=C.oAB({type:ve}),ve.\u0275inj=C.cJS({providers:[...nr,...pt],imports:[p.ez,C.hGG]}),ve})(),Ue=(()=>{class ve{constructor(re){this._doc=re}getTitle(){return this._doc.title}setTitle(re){this._doc.title=re||""}}return ve.\u0275fac=function(re){return new(re||ve)(C.LFG(p.K0))},ve.\u0275prov=C.Yz7({token:ve,factory:function(re){let Le=null;return Le=re?new re:function wr(){return new Ue((0,C.LFG)(p.K0))}(),Le},providedIn:"root"}),ve})();typeof window<"u"&&window},7001:(Gt,We,V)=>{V.d(We,{F0:()=>qi,yS:()=>Pa,Bz:()=>ra,lC:()=>Ui});var p=V(4650),C=V(8996),G=V(9646),be=V(7579);class we extends be.x{constructor(w){super(),this._value=w}get value(){return this.getValue()}_subscribe(w){const v=super._subscribe(w);return!v.closed&&w.next(this._value),v}getValue(){const{hasError:w,thrownError:v,_value:b}=this;if(w)throw v;return this._throwIfClosed(),b}next(w){super.next(this._value=w)}}var Me=V(6805),Re=V(9751),Oe=V(4742),ke=V(4671),le=V(3268),ue=V(7669),Ce=V(1810),yt=V(5403),ot=V(9672);function Ze(..._){const w=(0,ue.yG)(_),v=(0,ue.jO)(_),{args:b,keys:P}=(0,Oe.D)(_);if(0===b.length)return(0,C.D)([],w);const z=new Re.y(function Ot(_,w,v=ke.y){return b=>{Ke(w,()=>{const{length:P}=_,z=new Array(P);let te=P,pe=P;for(let et=0;et<P;et++)Ke(w,()=>{const Rt=(0,C.D)(_[et],w);let rn=!1;Rt.subscribe((0,yt.x)(b,Zt=>{z[et]=Zt,rn||(rn=!0,pe--),pe||b.next(v(z.slice()))},()=>{--te||b.complete()}))},b)},b)}}(b,w,P?te=>(0,Ce.n)(P,te):ke.y));return v?z.pipe((0,le.Z)(v)):z}function Ke(_,w,v){_?(0,ot.f)(v,_,w):w()}var He=V(7272),Bt=V(8421);function jt(_){return new Re.y(w=>{(0,Bt.Xf)(_()).subscribe(w)})}var he=V(9635),rt=V(576);function Je(_,w){const v=(0,rt.m)(_)?_:()=>_,b=P=>P.error(v());return new Re.y(w?P=>w.schedule(b,0,P):b)}var vt=V(515),tt=V(727),ae=V(4482);function Fe(){return(0,ae.e)((_,w)=>{let v=null;_._refCount++;const b=(0,yt.x)(w,void 0,void 0,void 0,()=>{if(!_||_._refCount<=0||0<--_._refCount)return void(v=null);const P=_._connection,z=v;v=null,P&&(!z||P===z)&&P.unsubscribe(),w.unsubscribe()});_.subscribe(b),b.closed||(v=_.connect())})}class ne extends Re.y{constructor(w,v){super(),this.source=w,this.subjectFactory=v,this._subject=null,this._refCount=0,this._connection=null,(0,ae.A)(w)&&(this.lift=w.lift)}_subscribe(w){return this.getSubject().subscribe(w)}getSubject(){const w=this._subject;return(!w||w.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:w}=this;this._subject=this._connection=null,w?.unsubscribe()}connect(){let w=this._connection;if(!w){w=this._connection=new tt.w0;const v=this.getSubject();w.add(this.source.subscribe((0,yt.x)(v,void 0,()=>{this._teardown(),v.complete()},b=>{this._teardown(),v.error(b)},()=>this._teardown()))),w.closed&&(this._connection=null,w=tt.w0.EMPTY)}return w}refCount(){return Fe()(this)}}var Ie=V(6895),de=V(4004),Ne=V(3900),dt=V(5698),wt=V(8675),Ct=V(9300),Mt=V(5577),$t=V(590),ht=V(4351),tn=V(8505);function Kt(_){return(0,ae.e)((w,v)=>{let z,b=null,P=!1;b=w.subscribe((0,yt.x)(v,void 0,void 0,te=>{z=(0,Bt.Xf)(_(te,Kt(_)(w))),b?(b.unsubscribe(),b=null,z.subscribe(v)):P=!0})),P&&(b.unsubscribe(),b=null,z.subscribe(v))})}var on=V(5026);function kt(_){return _<=0?()=>vt.E:(0,ae.e)((w,v)=>{let b=[];w.subscribe((0,yt.x)(v,P=>{b.push(P),_<b.length&&b.shift()},()=>{for(const P of b)v.next(P);v.complete()},void 0,()=>{b=null}))})}var Nn=V(8068),un=V(6590);function $n(_,w){const v=arguments.length>=2;return b=>b.pipe(_?(0,Ct.h)((P,z)=>_(P,z,b)):ke.y,kt(1),v?(0,un.d)(w):(0,Nn.T)(()=>new Me.K))}function _r(_){return(0,ae.e)((w,v)=>{try{w.subscribe(v)}finally{v.add(_)}})}var yr=V(8189),Ir=V(1481);const qt="primary",rr=Symbol("RouteTitle");class zn{constructor(w){this.params=w||{}}has(w){return Object.prototype.hasOwnProperty.call(this.params,w)}get(w){if(this.has(w)){const v=this.params[w];return Array.isArray(v)?v[0]:v}return null}getAll(w){if(this.has(w)){const v=this.params[w];return Array.isArray(v)?v:[v]}return[]}get keys(){return Object.keys(this.params)}}function lr(_){return new zn(_)}function pt(_,w,v){const b=v.path.split("/");if(b.length>_.length||"full"===v.pathMatch&&(w.hasChildren()||b.length<_.length))return null;const P={};for(let z=0;z<b.length;z++){const te=b[z],pe=_[z];if(te.startsWith(":"))P[te.substring(1)]=pe;else if(te!==pe.path)return null}return{consumed:_.slice(0,b.length),posParams:P}}function En(_,w){const v=_?Object.keys(_):void 0,b=w?Object.keys(w):void 0;if(!v||!b||v.length!=b.length)return!1;let P;for(let z=0;z<v.length;z++)if(P=v[z],!Hn(_[P],w[P]))return!1;return!0}function Hn(_,w){if(Array.isArray(_)&&Array.isArray(w)){if(_.length!==w.length)return!1;const v=[..._].sort(),b=[...w].sort();return v.every((P,z)=>b[z]===P)}return _===w}function ei(_){return Array.prototype.concat.apply([],_)}function ti(_){return _.length>0?_[_.length-1]:null}function Ue(_,w){for(const v in _)_.hasOwnProperty(v)&&w(_[v],v)}function ge(_){return(0,p.CqO)(_)?_:(0,p.QGY)(_)?(0,C.D)(Promise.resolve(_)):(0,G.of)(_)}const st={exact:function At(_,w,v){if(!ye(_.segments,w.segments)||!fn(_.segments,w.segments,v)||_.numberOfChildren!==w.numberOfChildren)return!1;for(const b in w.children)if(!_.children[b]||!At(_.children[b],w.children[b],v))return!1;return!0},subset:xn},Lt={exact:function Vn(_,w){return En(_,w)},subset:function ir(_,w){return Object.keys(w).length<=Object.keys(_).length&&Object.keys(w).every(v=>Hn(_[v],w[v]))},ignored:()=>!0};function Ft(_,w,v){return st[v.paths](_.root,w.root,v.matrixParams)&&Lt[v.queryParams](_.queryParams,w.queryParams)&&!("exact"===v.fragment&&_.fragment!==w.fragment)}function xn(_,w,v){return Sr(_,w,w.segments,v)}function Sr(_,w,v,b){if(_.segments.length>v.length){const P=_.segments.slice(0,v.length);return!(!ye(P,v)||w.hasChildren()||!fn(P,v,b))}if(_.segments.length===v.length){if(!ye(_.segments,v)||!fn(_.segments,v,b))return!1;for(const P in w.children)if(!_.children[P]||!xn(_.children[P],w.children[P],b))return!1;return!0}{const P=v.slice(0,_.segments.length),z=v.slice(_.segments.length);return!!(ye(_.segments,P)&&fn(_.segments,P,b)&&_.children[qt])&&Sr(_.children[qt],w,z,b)}}function fn(_,w,v){return w.every((b,P)=>Lt[v](_[P].parameters,b.parameters))}class me{constructor(w,v,b){this.root=w,this.queryParams=v,this.fragment=b}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=lr(this.queryParams)),this._queryParamMap}toString(){return ar.serialize(this)}}class X{constructor(w,v){this.segments=w,this.children=v,this.parent=null,Ue(v,(b,P)=>b.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return gn(this)}}class oe{constructor(w,v){this.path=w,this.parameters=v}get parameterMap(){return this._parameterMap||(this._parameterMap=lr(this.parameters)),this._parameterMap}toString(){return Dr(this)}}function ye(_,w){return _.length===w.length&&_.every((v,b)=>v.path===w[b].path)}let gt=(()=>{class _{}return _.\u0275fac=function(v){return new(v||_)},_.\u0275prov=p.Yz7({token:_,factory:function(){return new Vt},providedIn:"root"}),_})();class Vt{parse(w){const v=new hr(w);return new me(v.parseRootSegment(),v.parseQueryParams(),v.parseFragment())}serialize(w){const v=`/${cr(w.root,!0)}`,b=function ce(_){const w=Object.keys(_).map(v=>{const b=_[v];return Array.isArray(b)?b.map(P=>`${ln(v)}=${ln(P)}`).join("&"):`${ln(v)}=${ln(b)}`}).filter(v=>!!v);return w.length?`?${w.join("&")}`:""}(w.queryParams);return`${v}${b}${"string"==typeof w.fragment?`#${function Jn(_){return encodeURI(_)}(w.fragment)}`:""}`}}const ar=new Vt;function gn(_){return _.segments.map(w=>Dr(w)).join("/")}function cr(_,w){if(!_.hasChildren())return gn(_);if(w){const v=_.children[qt]?cr(_.children[qt],!1):"",b=[];return Ue(_.children,(P,z)=>{z!==qt&&b.push(`${z}:${cr(P,!1)}`)}),b.length>0?`${v}(${b.join("//")})`:v}{const v=function ut(_,w){let v=[];return Ue(_.children,(b,P)=>{P===qt&&(v=v.concat(w(b,P)))}),Ue(_.children,(b,P)=>{P!==qt&&(v=v.concat(w(b,P)))}),v}(_,(b,P)=>P===qt?[cr(_.children[qt],!1)]:[`${P}:${cr(b,!1)}`]);return 1===Object.keys(_.children).length&&null!=_.children[qt]?`${gn(_)}/${v[0]}`:`${gn(_)}/(${v.join("//")})`}}function Sn(_){return encodeURIComponent(_).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function ln(_){return Sn(_).replace(/%3B/gi,";")}function kn(_){return Sn(_).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function qr(_){return decodeURIComponent(_)}function $r(_){return qr(_.replace(/\+/g,"%20"))}function Dr(_){return`${kn(_.path)}${function ve(_){return Object.keys(_).map(w=>`;${kn(w)}=${kn(_[w])}`).join("")}(_.parameters)}`}const re=/^[^\/()?;=#]+/;function Le(_){const w=_.match(re);return w?w[0]:""}const at=/^[^=?&#]+/,pn=/^[^&#]+/;class hr{constructor(w){this.url=w,this.remaining=w}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new X([],{}):new X([],this.parseChildren())}parseQueryParams(){const w={};if(this.consumeOptional("?"))do{this.parseQueryParam(w)}while(this.consumeOptional("&"));return w}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const w=[];for(this.peekStartsWith("(")||w.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),w.push(this.parseSegment());let v={};this.peekStartsWith("/(")&&(this.capture("/"),v=this.parseParens(!0));let b={};return this.peekStartsWith("(")&&(b=this.parseParens(!1)),(w.length>0||Object.keys(v).length>0)&&(b[qt]=new X(w,v)),b}parseSegment(){const w=Le(this.remaining);if(""===w&&this.peekStartsWith(";"))throw new p.vHH(4009,!1);return this.capture(w),new oe(qr(w),this.parseMatrixParams())}parseMatrixParams(){const w={};for(;this.consumeOptional(";");)this.parseParam(w);return w}parseParam(w){const v=Le(this.remaining);if(!v)return;this.capture(v);let b="";if(this.consumeOptional("=")){const P=Le(this.remaining);P&&(b=P,this.capture(b))}w[qr(v)]=qr(b)}parseQueryParam(w){const v=function Wt(_){const w=_.match(at);return w?w[0]:""}(this.remaining);if(!v)return;this.capture(v);let b="";if(this.consumeOptional("=")){const te=function cn(_){const w=_.match(pn);return w?w[0]:""}(this.remaining);te&&(b=te,this.capture(b))}const P=$r(v),z=$r(b);if(w.hasOwnProperty(P)){let te=w[P];Array.isArray(te)||(te=[te],w[P]=te),te.push(z)}else w[P]=z}parseParens(w){const v={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const b=Le(this.remaining),P=this.remaining[b.length];if("/"!==P&&")"!==P&&";"!==P)throw new p.vHH(4010,!1);let z;b.indexOf(":")>-1?(z=b.slice(0,b.indexOf(":")),this.capture(z),this.capture(":")):w&&(z=qt);const te=this.parseChildren();v[z]=1===Object.keys(te).length?te[qt]:new X([],te),this.consumeOptional("//")}return v}peekStartsWith(w){return this.remaining.startsWith(w)}consumeOptional(w){return!!this.peekStartsWith(w)&&(this.remaining=this.remaining.substring(w.length),!0)}capture(w){if(!this.consumeOptional(w))throw new p.vHH(4011,!1)}}function Cr(_){return _.segments.length>0?new X([],{[qt]:_}):_}function mn(_){const w={};for(const b of Object.keys(_.children)){const z=mn(_.children[b]);(z.segments.length>0||z.hasChildren())&&(w[b]=z)}return function In(_){if(1===_.numberOfChildren&&_.children[qt]){const w=_.children[qt];return new X(_.segments.concat(w.segments),w.children)}return _}(new X(_.segments,w))}function Xn(_){return _ instanceof me}function as(_,w,v,b,P){if(0===v.length)return Ri(w.root,w.root,w.root,b,P);const z=function Qi(_){if("string"==typeof _[0]&&1===_.length&&"/"===_[0])return new oo(!0,0,_);let w=0,v=!1;const b=_.reduce((P,z,te)=>{if("object"==typeof z&&null!=z){if(z.outlets){const pe={};return Ue(z.outlets,(et,Rt)=>{pe[Rt]="string"==typeof et?et.split("/"):et}),[...P,{outlets:pe}]}if(z.segmentPath)return[...P,z.segmentPath]}return"string"!=typeof z?[...P,z]:0===te?(z.split("/").forEach((pe,et)=>{0==et&&"."===pe||(0==et&&""===pe?v=!0:".."===pe?w++:""!=pe&&P.push(pe))}),P):[...P,z]},[]);return new oo(v,w,b)}(v);return z.toRoot()?Ri(w.root,w.root,new X([],{}),b,P):function te(et){const Rt=function Ii(_,w,v,b){if(_.isAbsolute)return new Ti(w.root,!0,0);if(-1===b)return new Ti(v,v===w.root,0);return function Oi(_,w,v){let b=_,P=w,z=v;for(;z>P;){if(z-=P,b=b.parent,!b)throw new p.vHH(4005,!1);P=b.segments.length}return new Ti(b,!1,P-z)}(v,b+(Zr(_.commands[0])?0:1),_.numberOfDoubleDots)}(z,w,_.snapshot?._urlSegment,et),rn=Rt.processChildren?us(Rt.segmentGroup,Rt.index,z.commands):Ar(Rt.segmentGroup,Rt.index,z.commands);return Ri(w.root,Rt.segmentGroup,rn,b,P)}(_.snapshot?._lastPathIndex)}function Zr(_){return"object"==typeof _&&null!=_&&!_.outlets&&!_.segmentPath}function Lr(_){return"object"==typeof _&&null!=_&&_.outlets}function Ri(_,w,v,b,P){let te,z={};b&&Ue(b,(et,Rt)=>{z[Rt]=Array.isArray(et)?et.map(rn=>`${rn}`):`${et}`}),te=_===w?v:Mn(_,w,v);const pe=Cr(mn(te));return new me(pe,z,P)}function Mn(_,w,v){const b={};return Ue(_.children,(P,z)=>{b[z]=P===w?v:Mn(P,w,v)}),new X(_.segments,b)}class oo{constructor(w,v,b){if(this.isAbsolute=w,this.numberOfDoubleDots=v,this.commands=b,w&&b.length>0&&Zr(b[0]))throw new p.vHH(4003,!1);const P=b.find(Lr);if(P&&P!==ti(b))throw new p.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Ti{constructor(w,v,b){this.segmentGroup=w,this.processChildren=v,this.index=b}}function Ar(_,w,v){if(_||(_=new X([],{})),0===_.segments.length&&_.hasChildren())return us(_,w,v);const b=function er(_,w,v){let b=0,P=w;const z={match:!1,pathIndex:0,commandIndex:0};for(;P<_.segments.length;){if(b>=v.length)return z;const te=_.segments[P],pe=v[b];if(Lr(pe))break;const et=`${pe}`,Rt=b<v.length-1?v[b+1]:null;if(P>0&&void 0===et)break;if(et&&Rt&&"object"==typeof Rt&&void 0===Rt.outlets){if(!qs(et,Rt,te))return z;b+=2}else{if(!qs(et,{},te))return z;b++}P++}return{match:!0,pathIndex:P,commandIndex:b}}(_,w,v),P=v.slice(b.commandIndex);if(b.match&&b.pathIndex<_.segments.length){const z=new X(_.segments.slice(0,b.pathIndex),{});return z.children[qt]=new X(_.segments.slice(b.pathIndex),_.children),us(z,0,P)}return b.match&&0===P.length?new X(_.segments,{}):b.match&&!_.hasChildren()?Kr(_,w,v):b.match?us(_,0,P):Kr(_,w,v)}function us(_,w,v){if(0===v.length)return new X(_.segments,{});{const b=function Ji(_){return Lr(_[0])?_[0].outlets:{[qt]:_}}(v),P={};return Ue(b,(z,te)=>{"string"==typeof z&&(z=[z]),null!==z&&(P[te]=Ar(_.children[te],w,z))}),Ue(_.children,(z,te)=>{void 0===b[te]&&(P[te]=z)}),new X(_.segments,P)}}function Kr(_,w,v){const b=_.segments.slice(0,w);let P=0;for(;P<v.length;){const z=v[P];if(Lr(z)){const et=Ws(z.outlets);return new X(b,et)}if(0===P&&Zr(v[0])){b.push(new oe(_.segments[w].path,ys(v[0]))),P++;continue}const te=Lr(z)?z.outlets[qt]:`${z}`,pe=P<v.length-1?v[P+1]:null;te&&pe&&Zr(pe)?(b.push(new oe(te,ys(pe))),P+=2):(b.push(new oe(te,{})),P++)}return new X(b,{})}function Ws(_){const w={};return Ue(_,(v,b)=>{"string"==typeof v&&(v=[v]),null!==v&&(w[b]=Kr(new X([],{}),0,v))}),w}function ys(_){const w={};return Ue(_,(v,b)=>w[b]=`${v}`),w}function qs(_,w,v){return _==v.path&&En(w,v.parameters)}class xr{constructor(w,v){this.id=w,this.url=v}}class ni extends xr{constructor(w,v,b="imperative",P=null){super(w,v),this.type=0,this.navigationTrigger=b,this.restoredState=P}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Si extends xr{constructor(w,v,b){super(w,v),this.urlAfterRedirects=b,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Ho extends xr{constructor(w,v,b,P){super(w,v),this.reason=b,this.code=P,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Zs extends xr{constructor(w,v,b,P){super(w,v),this.error=b,this.target=P,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class ks extends xr{constructor(w,v,b,P){super(w,v),this.urlAfterRedirects=b,this.state=P,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ri extends xr{constructor(w,v,b,P){super(w,v),this.urlAfterRedirects=b,this.state=P,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class xe extends xr{constructor(w,v,b,P,z){super(w,v),this.urlAfterRedirects=b,this.state=P,this.shouldActivate=z,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Ae extends xr{constructor(w,v,b,P){super(w,v),this.urlAfterRedirects=b,this.state=P,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ve extends xr{constructor(w,v,b,P){super(w,v),this.urlAfterRedirects=b,this.state=P,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class lt{constructor(w){this.route=w,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Dt{constructor(w){this.route=w,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Xt{constructor(w){this.snapshot=w,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class bn{constructor(w){this.snapshot=w,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Er{constructor(w){this.snapshot=w,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Un{constructor(w){this.snapshot=w,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class fi{constructor(w,v,b){this.routerEvent=w,this.position=v,this.anchor=b,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class Ks{constructor(w){this._root=w}get root(){return this._root.value}parent(w){const v=this.pathFromRoot(w);return v.length>1?v[v.length-2]:null}children(w){const v=Hr(w,this._root);return v?v.children.map(b=>b.value):[]}firstChild(w){const v=Hr(w,this._root);return v&&v.children.length>0?v.children[0].value:null}siblings(w){const v=pi(w,this._root);return v.length<2?[]:v[v.length-2].children.map(P=>P.value).filter(P=>P!==w)}pathFromRoot(w){return pi(w,this._root).map(v=>v.value)}}function Hr(_,w){if(_===w.value)return w;for(const v of w.children){const b=Hr(_,v);if(b)return b}return null}function pi(_,w){if(_===w.value)return[w];for(const v of w.children){const b=pi(_,v);if(b.length)return b.unshift(w),b}return[]}class Ni{constructor(w,v){this.value=w,this.children=v}toString(){return`TreeNode(${this.value})`}}function vs(_){const w={};return _&&_.children.forEach(v=>w[v.value.outlet]=v),w}class ao extends Ks{constructor(w,v){super(w),this.snapshot=v,_o(this,w)}toString(){return this.snapshot.toString()}}function Pi(_,w){const v=function Xi(_,w){const te=new cs([],{},{},"",{},qt,w,null,_.root,-1,{});return new Ls("",new Ni(te,[]))}(_,w),b=new we([new oe("",{})]),P=new we({}),z=new we({}),te=new we({}),pe=new we(""),et=new ki(b,P,te,pe,z,qt,w,v.root);return et.snapshot=v.root,new ao(new Ni(et,[]),v)}class ki{constructor(w,v,b,P,z,te,pe,et){this.url=w,this.params=v,this.queryParams=b,this.fragment=P,this.data=z,this.outlet=te,this.component=pe,this.title=this.data?.pipe((0,de.U)(Rt=>Rt[rr]))??(0,G.of)(void 0),this._futureSnapshot=et}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,de.U)(w=>lr(w)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,de.U)(w=>lr(w)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function ls(_,w="emptyOnly"){const v=_.pathFromRoot;let b=0;if("always"!==w)for(b=v.length-1;b>=1;){const P=v[b],z=v[b-1];if(P.routeConfig&&""===P.routeConfig.path)b--;else{if(z.component)break;b--}}return function Fs(_){return _.reduce((w,v)=>({params:{...w.params,...v.params},data:{...w.data,...v.data},resolve:{...v.data,...w.resolve,...v.routeConfig?.data,...v._resolvedData}}),{params:{},data:{},resolve:{}})}(v.slice(b))}class cs{constructor(w,v,b,P,z,te,pe,et,Rt,rn,Zt,Cn){this.url=w,this.params=v,this.queryParams=b,this.fragment=P,this.data=z,this.outlet=te,this.component=pe,this.title=this.data?.[rr],this.routeConfig=et,this._urlSegment=Rt,this._lastPathIndex=rn,this._correctedLastPathIndex=Cn??rn,this._resolve=Zt}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=lr(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=lr(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(b=>b.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Ls extends Ks{constructor(w,v){super(v),this.url=w,_o(this,v)}toString(){return Vs(this._root)}}function _o(_,w){w.value._routerState=_,w.children.forEach(v=>_o(_,v))}function Vs(_){const w=_.children.length>0?` { ${_.children.map(Vs).join(", ")} } `:"";return`${_.value}${w}`}function _s(_){if(_.snapshot){const w=_.snapshot,v=_._futureSnapshot;_.snapshot=v,En(w.queryParams,v.queryParams)||_.queryParams.next(v.queryParams),w.fragment!==v.fragment&&_.fragment.next(v.fragment),En(w.params,v.params)||_.params.next(v.params),function nr(_,w){if(_.length!==w.length)return!1;for(let v=0;v<_.length;++v)if(!En(_[v],w[v]))return!1;return!0}(w.url,v.url)||_.url.next(v.url),En(w.data,v.data)||_.data.next(v.data)}else _.snapshot=_._futureSnapshot,_.data.next(_._futureSnapshot.data)}function ii(_,w){const v=En(_.params,w.params)&&function Ee(_,w){return ye(_,w)&&_.every((v,b)=>En(v.parameters,w[b].parameters))}(_.url,w.url);return v&&!(!_.parent!=!w.parent)&&(!_.parent||ii(_.parent,w.parent))}function Ai(_,w,v){if(v&&_.shouldReuseRoute(w.value,v.value.snapshot)){const b=v.value;b._futureSnapshot=w.value;const P=function Yr(_,w,v){return w.children.map(b=>{for(const P of v.children)if(_.shouldReuseRoute(b.value,P.value.snapshot))return Ai(_,b,P);return Ai(_,b)})}(_,w,v);return new Ni(b,P)}{if(_.shouldAttach(w.value)){const z=_.retrieve(w.value);if(null!==z){const te=z.route;return te.value._futureSnapshot=w.value,te.children=w.children.map(pe=>Ai(_,pe)),te}}const b=function Vr(_){return new ki(new we(_.url),new we(_.params),new we(_.queryParams),new we(_.fragment),new we(_.data),_.outlet,_.component,_)}(w.value),P=w.children.map(z=>Ai(_,z));return new Ni(b,P)}}const wo="ngNavigationCancelingError";function uo(_,w){const{redirectTo:v,navigationBehaviorOptions:b}=Xn(w)?{redirectTo:w,navigationBehaviorOptions:void 0}:w,P=Mr(!1,0,w);return P.url=v,P.navigationBehaviorOptions=b,P}function Mr(_,w,v){const b=new Error("NavigationCancelingError: "+(_||""));return b[wo]=!0,b.cancellationCode=w,v&&(b.url=v),b}function ds(_){return Ro(_)&&Xn(_.url)}function Ro(_){return _&&_[wo]}class fr{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new si,this.attachRef=null}}let si=(()=>{class _{constructor(){this.contexts=new Map}onChildOutletCreated(v,b){const P=this.getOrCreateContext(v);P.outlet=b,this.contexts.set(v,P)}onChildOutletDestroyed(v){const b=this.getContext(v);b&&(b.outlet=null,b.attachRef=null)}onOutletDeactivated(){const v=this.contexts;return this.contexts=new Map,v}onOutletReAttached(v){this.contexts=v}getOrCreateContext(v){let b=this.getContext(v);return b||(b=new fr,this.contexts.set(v,b)),b}getContext(v){return this.contexts.get(v)||null}}return _.\u0275fac=function(v){return new(v||_)},_.\u0275prov=p.Yz7({token:_,factory:_.\u0275fac,providedIn:"root"}),_})();const es=!1;let Ui=(()=>{class _{constructor(v,b,P,z,te){this.parentContexts=v,this.location=b,this.changeDetector=z,this.environmentInjector=te,this.activated=null,this._activatedRoute=null,this.activateEvents=new p.vpe,this.deactivateEvents=new p.vpe,this.attachEvents=new p.vpe,this.detachEvents=new p.vpe,this.name=P||qt,v.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.getContext(this.name)?.outlet===this&&this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const v=this.parentContexts.getContext(this.name);v&&v.route&&(v.attachRef?this.attach(v.attachRef,v.route):this.activateWith(v.route,v.injector))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new p.vHH(4012,es);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new p.vHH(4012,es);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new p.vHH(4012,es);this.location.detach();const v=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(v.instance),v}attach(v,b){this.activated=v,this._activatedRoute=b,this.location.insert(v.hostView),this.attachEvents.emit(v.instance)}deactivate(){if(this.activated){const v=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(v)}}activateWith(v,b){if(this.isActivated)throw new p.vHH(4013,es);this._activatedRoute=v;const P=this.location,te=v._futureSnapshot.component,pe=this.parentContexts.getOrCreateContext(this.name).children,et=new gi(v,pe,P.injector);if(b&&function Wn(_){return!!_.resolveComponentFactory}(b)){const Rt=b.resolveComponentFactory(te);this.activated=P.createComponent(Rt,P.length,et)}else this.activated=P.createComponent(te,{index:P.length,injector:et,environmentInjector:b??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return _.\u0275fac=function(v){return new(v||_)(p.Y36(si),p.Y36(p.s_b),p.$8M("name"),p.Y36(p.sBO),p.Y36(p.lqb))},_.\u0275dir=p.lG2({type:_,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0}),_})();class gi{constructor(w,v,b){this.route=w,this.childContexts=v,this.parent=b}get(w,v){return w===ki?this.route:w===si?this.childContexts:this.parent.get(w,v)}}let Di=(()=>{class _{}return _.\u0275fac=function(v){return new(v||_)},_.\u0275cmp=p.Xpm({type:_,selectors:[["ng-component"]],standalone:!0,features:[p.jDz],decls:1,vars:0,template:function(v,b){1&v&&p._UZ(0,"router-outlet")},dependencies:[Ui],encapsulation:2}),_})();function ws(_,w){return _.providers&&!_._injector&&(_._injector=(0,p.MMx)(_.providers,w,`Route: ${_.path}`)),_._injector??w}function Qs(_){const w=_.children&&_.children.map(Qs),v=w?{..._,children:w}:{..._};return!v.component&&!v.loadComponent&&(w||v.loadChildren)&&v.outlet&&v.outlet!==qt&&(v.component=Di),v}function Bi(_){return _.outlet||qt}function Es(_,w){const v=_.filter(b=>Bi(b)===w);return v.push(..._.filter(b=>Bi(b)!==w)),v}function Eo(_){if(!_)return null;if(_.routeConfig?._injector)return _.routeConfig._injector;for(let w=_.parent;w;w=w.parent){const v=w.routeConfig;if(v?._loadedInjector)return v._loadedInjector;if(v?._injector)return v._injector}return null}class ft{constructor(w,v,b,P){this.routeReuseStrategy=w,this.futureState=v,this.currState=b,this.forwardEvent=P}activate(w){const v=this.futureState._root,b=this.currState?this.currState._root:null;this.deactivateChildRoutes(v,b,w),_s(this.futureState.root),this.activateChildRoutes(v,b,w)}deactivateChildRoutes(w,v,b){const P=vs(v);w.children.forEach(z=>{const te=z.value.outlet;this.deactivateRoutes(z,P[te],b),delete P[te]}),Ue(P,(z,te)=>{this.deactivateRouteAndItsChildren(z,b)})}deactivateRoutes(w,v,b){const P=w.value,z=v?v.value:null;if(P===z)if(P.component){const te=b.getContext(P.outlet);te&&this.deactivateChildRoutes(w,v,te.children)}else this.deactivateChildRoutes(w,v,b);else z&&this.deactivateRouteAndItsChildren(v,b)}deactivateRouteAndItsChildren(w,v){w.value.component&&this.routeReuseStrategy.shouldDetach(w.value.snapshot)?this.detachAndStoreRouteSubtree(w,v):this.deactivateRouteAndOutlet(w,v)}detachAndStoreRouteSubtree(w,v){const b=v.getContext(w.value.outlet),P=b&&w.value.component?b.children:v,z=vs(w);for(const te of Object.keys(z))this.deactivateRouteAndItsChildren(z[te],P);if(b&&b.outlet){const te=b.outlet.detach(),pe=b.children.onOutletDeactivated();this.routeReuseStrategy.store(w.value.snapshot,{componentRef:te,route:w,contexts:pe})}}deactivateRouteAndOutlet(w,v){const b=v.getContext(w.value.outlet),P=b&&w.value.component?b.children:v,z=vs(w);for(const te of Object.keys(z))this.deactivateRouteAndItsChildren(z[te],P);b&&b.outlet&&(b.outlet.deactivate(),b.children.onOutletDeactivated(),b.attachRef=null,b.resolver=null,b.route=null)}activateChildRoutes(w,v,b){const P=vs(v);w.children.forEach(z=>{this.activateRoutes(z,P[z.value.outlet],b),this.forwardEvent(new Un(z.value.snapshot))}),w.children.length&&this.forwardEvent(new bn(w.value.snapshot))}activateRoutes(w,v,b){const P=w.value,z=v?v.value:null;if(_s(P),P===z)if(P.component){const te=b.getOrCreateContext(P.outlet);this.activateChildRoutes(w,v,te.children)}else this.activateChildRoutes(w,v,b);else if(P.component){const te=b.getOrCreateContext(P.outlet);if(this.routeReuseStrategy.shouldAttach(P.snapshot)){const pe=this.routeReuseStrategy.retrieve(P.snapshot);this.routeReuseStrategy.store(P.snapshot,null),te.children.onOutletReAttached(pe.contexts),te.attachRef=pe.componentRef,te.route=pe.route.value,te.outlet&&te.outlet.attach(pe.componentRef,pe.route.value),_s(pe.route.value),this.activateChildRoutes(w,null,te.children)}else{const pe=Eo(P.snapshot),et=pe?.get(p._Vd)??null;te.attachRef=null,te.route=P,te.resolver=et,te.injector=pe,te.outlet&&te.outlet.activateWith(P,te.injector),this.activateChildRoutes(w,null,te.children)}}else this.activateChildRoutes(w,null,b)}}class Rn{constructor(w){this.path=w,this.route=this.path[this.path.length-1]}}class Bs{constructor(w,v){this.component=w,this.route=v}}function Po(_,w,v){const b=_._root;return Is(b,w?w._root:null,v,[b.value])}function ts(_,w){const v=Symbol(),b=w.get(_,v);return b===v?"function"!=typeof _||(0,p.Z0I)(_)?w.get(_):_:b}function Is(_,w,v,b,P={canDeactivateChecks:[],canActivateChecks:[]}){const z=vs(w);return _.children.forEach(te=>{(function hs(_,w,v,b,P={canDeactivateChecks:[],canActivateChecks:[]}){const z=_.value,te=w?w.value:null,pe=v?v.getContext(_.value.outlet):null;if(te&&z.routeConfig===te.routeConfig){const et=function Io(_,w,v){if("function"==typeof v)return v(_,w);switch(v){case"pathParamsChange":return!ye(_.url,w.url);case"pathParamsOrQueryParamsChange":return!ye(_.url,w.url)||!En(_.queryParams,w.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!ii(_,w)||!En(_.queryParams,w.queryParams);default:return!ii(_,w)}}(te,z,z.routeConfig.runGuardsAndResolvers);et?P.canActivateChecks.push(new Rn(b)):(z.data=te.data,z._resolvedData=te._resolvedData),Is(_,w,z.component?pe?pe.children:null:v,b,P),et&&pe&&pe.outlet&&pe.outlet.isActivated&&P.canDeactivateChecks.push(new Bs(pe.outlet.component,te))}else te&&js(w,pe,P),P.canActivateChecks.push(new Rn(b)),Is(_,null,z.component?pe?pe.children:null:v,b,P)})(te,z[te.value.outlet],v,b.concat([te.value]),P),delete z[te.value.outlet]}),Ue(z,(te,pe)=>js(te,v.getContext(pe),P)),P}function js(_,w,v){const b=vs(_),P=_.value;Ue(b,(z,te)=>{js(z,P.component?w?w.children.getContext(te):null:w,v)}),v.canDeactivateChecks.push(new Bs(P.component&&w&&w.outlet&&w.outlet.isActivated?w.outlet.component:null,P))}function Do(_){return"function"==typeof _}function fs(_){return _ instanceof Me.K||"EmptyError"===_?.name}const mi=Symbol("INITIAL_VALUE");function ji(){return(0,Ne.w)(_=>Ze(_.map(w=>w.pipe((0,dt.q)(1),(0,wt.O)(mi)))).pipe((0,de.U)(w=>{for(const v of w)if(!0!==v){if(v===mi)return mi;if(!1===v||v instanceof me)return v}return!0}),(0,Ct.h)(w=>w!==mi),(0,dt.q)(1)))}function Rs(_){return(0,he.z)((0,tn.b)(w=>{if(Xn(w))throw uo(0,w)}),(0,de.U)(w=>!0===w))}const S={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function $(_,w,v,b,P){const z=R(_,w,v);return z.matched?function ha(_,w,v,b){const P=w.canMatch;if(!P||0===P.length)return(0,G.of)(!0);const z=P.map(te=>{const pe=ts(te,_);return ge(function Xe(_){return _&&Do(_.canMatch)}(pe)?pe.canMatch(w,v):_.runInContext(()=>pe(w,v)))});return(0,G.of)(z).pipe(ji(),Rs())}(b=ws(w,b),w,v).pipe((0,de.U)(te=>!0===te?z:{...S})):(0,G.of)(z)}function R(_,w,v){if(""===w.path)return"full"===w.pathMatch&&(_.hasChildren()||v.length>0)?{...S}:{matched:!0,consumedSegments:[],remainingSegments:v,parameters:{},positionalParamSegments:{}};const P=(w.matcher||pt)(v,_,w);if(!P)return{...S};const z={};Ue(P.posParams,(pe,et)=>{z[et]=pe.path});const te=P.consumed.length>0?{...z,...P.consumed[P.consumed.length-1].parameters}:z;return{matched:!0,consumedSegments:P.consumed,remainingSegments:v.slice(P.consumed.length),parameters:te,positionalParamSegments:P.posParams??{}}}function q(_,w,v,b,P="corrected"){if(v.length>0&&function nt(_,w,v){return v.some(b=>sr(_,w,b)&&Bi(b)!==qt)}(_,v,b)){const te=new X(w,function ze(_,w,v,b){const P={};P[qt]=b,b._sourceSegment=_,b._segmentIndexShift=w.length;for(const z of v)if(""===z.path&&Bi(z)!==qt){const te=new X([],{});te._sourceSegment=_,te._segmentIndexShift=w.length,P[Bi(z)]=te}return P}(_,w,b,new X(v,_.children)));return te._sourceSegment=_,te._segmentIndexShift=w.length,{segmentGroup:te,slicedSegments:[]}}if(0===v.length&&function Jt(_,w,v){return v.some(b=>sr(_,w,b))}(_,v,b)){const te=new X(_.segments,function fe(_,w,v,b,P,z){const te={};for(const pe of b)if(sr(_,v,pe)&&!P[Bi(pe)]){const et=new X([],{});et._sourceSegment=_,et._segmentIndexShift="legacy"===z?_.segments.length:w.length,te[Bi(pe)]=et}return{...P,...te}}(_,w,v,b,_.children,P));return te._sourceSegment=_,te._segmentIndexShift=w.length,{segmentGroup:te,slicedSegments:v}}const z=new X(_.segments,_.children);return z._sourceSegment=_,z._segmentIndexShift=w.length,{segmentGroup:z,slicedSegments:v}}function sr(_,w,v){return(!(_.hasChildren()||w.length>0)||"full"!==v.pathMatch)&&""===v.path}function ur(_,w,v,b){return!!(Bi(_)===b||b!==qt&&sr(w,v,_))&&("**"===_.path||R(w,_,v).matched)}function qn(_,w,v){return 0===w.length&&!_.children[v]}const Zn=!1;class oi{constructor(w){this.segmentGroup=w||null}}class pr{constructor(w){this.urlTree=w}}function Or(_){return Je(new oi(_))}function $s(_){return Je(new pr(_))}class ps{constructor(w,v,b,P,z){this.injector=w,this.configLoader=v,this.urlSerializer=b,this.urlTree=P,this.config=z,this.allowRedirects=!0}apply(){const w=q(this.urlTree.root,[],[],this.config).segmentGroup,v=new X(w.segments,w.children);return this.expandSegmentGroup(this.injector,this.config,v,qt).pipe((0,de.U)(z=>this.createUrlTree(mn(z),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Kt(z=>{if(z instanceof pr)return this.allowRedirects=!1,this.match(z.urlTree);throw z instanceof oi?this.noMatchError(z):z}))}match(w){return this.expandSegmentGroup(this.injector,this.config,w.root,qt).pipe((0,de.U)(P=>this.createUrlTree(mn(P),w.queryParams,w.fragment))).pipe(Kt(P=>{throw P instanceof oi?this.noMatchError(P):P}))}noMatchError(w){return new p.vHH(4002,Zn)}createUrlTree(w,v,b){const P=Cr(w);return new me(P,v,b)}expandSegmentGroup(w,v,b,P){return 0===b.segments.length&&b.hasChildren()?this.expandChildren(w,v,b).pipe((0,de.U)(z=>new X([],z))):this.expandSegment(w,b,v,b.segments,P,!0)}expandChildren(w,v,b){const P=[];for(const z of Object.keys(b.children))"primary"===z?P.unshift(z):P.push(z);return(0,C.D)(P).pipe((0,ht.b)(z=>{const te=b.children[z],pe=Es(v,z);return this.expandSegmentGroup(w,pe,te,z).pipe((0,de.U)(et=>({segment:et,outlet:z})))}),(0,on.R)((z,te)=>(z[te.outlet]=te.segment,z),{}),$n())}expandSegment(w,v,b,P,z,te){return(0,C.D)(b).pipe((0,ht.b)(pe=>this.expandSegmentAgainstRoute(w,v,b,pe,P,z,te).pipe(Kt(Rt=>{if(Rt instanceof oi)return(0,G.of)(null);throw Rt}))),(0,$t.P)(pe=>!!pe),Kt((pe,et)=>{if(fs(pe))return qn(v,P,z)?(0,G.of)(new X([],{})):Or(v);throw pe}))}expandSegmentAgainstRoute(w,v,b,P,z,te,pe){return ur(P,v,z,te)?void 0===P.redirectTo?this.matchSegmentAgainstRoute(w,v,P,z,te):pe&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(w,v,b,P,z,te):Or(v):Or(v)}expandSegmentAgainstRouteUsingRedirect(w,v,b,P,z,te){return"**"===P.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(w,b,P,te):this.expandRegularSegmentAgainstRouteUsingRedirect(w,v,b,P,z,te)}expandWildCardWithParamsAgainstRouteUsingRedirect(w,v,b,P){const z=this.applyRedirectCommands([],b.redirectTo,{});return b.redirectTo.startsWith("/")?$s(z):this.lineralizeSegments(b,z).pipe((0,Mt.z)(te=>{const pe=new X(te,{});return this.expandSegment(w,pe,v,te,P,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(w,v,b,P,z,te){const{matched:pe,consumedSegments:et,remainingSegments:Rt,positionalParamSegments:rn}=R(v,P,z);if(!pe)return Or(v);const Zt=this.applyRedirectCommands(et,P.redirectTo,rn);return P.redirectTo.startsWith("/")?$s(Zt):this.lineralizeSegments(P,Zt).pipe((0,Mt.z)(Cn=>this.expandSegment(w,v,b,Cn.concat(Rt),te,!1)))}matchSegmentAgainstRoute(w,v,b,P,z){return"**"===b.path?(w=ws(b,w),b.loadChildren?(b._loadedRoutes?(0,G.of)({routes:b._loadedRoutes,injector:b._loadedInjector}):this.configLoader.loadChildren(w,b)).pipe((0,de.U)(pe=>(b._loadedRoutes=pe.routes,b._loadedInjector=pe.injector,new X(P,{})))):(0,G.of)(new X(P,{}))):$(v,b,P,w).pipe((0,Ne.w)(({matched:te,consumedSegments:pe,remainingSegments:et})=>te?this.getChildConfig(w=b._injector??w,b,P).pipe((0,Mt.z)(rn=>{const Zt=rn.injector??w,Cn=rn.routes,{segmentGroup:Kn,slicedSegments:po}=q(v,pe,et,Cn),Zi=new X(Kn.segments,Kn.children);if(0===po.length&&Zi.hasChildren())return this.expandChildren(Zt,Cn,Zi).pipe((0,de.U)(Fa=>new X(pe,Fa)));if(0===Cn.length&&0===po.length)return(0,G.of)(new X(pe,{}));const hi=Bi(b)===z;return this.expandSegment(Zt,Zi,Cn,po,hi?qt:z,!0).pipe((0,de.U)(_i=>new X(pe.concat(_i.segments),_i.children)))})):Or(v)))}getChildConfig(w,v,b){return v.children?(0,G.of)({routes:v.children,injector:w}):v.loadChildren?void 0!==v._loadedRoutes?(0,G.of)({routes:v._loadedRoutes,injector:v._loadedInjector}):function da(_,w,v,b){const P=w.canLoad;if(void 0===P||0===P.length)return(0,G.of)(!0);const z=P.map(te=>{const pe=ts(te,_);return ge(function F(_){return _&&Do(_.canLoad)}(pe)?pe.canLoad(w,v):_.runInContext(()=>pe(w,v)))});return(0,G.of)(z).pipe(ji(),Rs())}(w,v,b).pipe((0,Mt.z)(P=>P?this.configLoader.loadChildren(w,v).pipe((0,tn.b)(z=>{v._loadedRoutes=z.routes,v._loadedInjector=z.injector})):function eo(_){return Je(Mr(Zn,3))}())):(0,G.of)({routes:[],injector:w})}lineralizeSegments(w,v){let b=[],P=v.root;for(;;){if(b=b.concat(P.segments),0===P.numberOfChildren)return(0,G.of)(b);if(P.numberOfChildren>1||!P.children[qt])return Je(new p.vHH(4e3,Zn));P=P.children[qt]}}applyRedirectCommands(w,v,b){return this.applyRedirectCreateUrlTree(v,this.urlSerializer.parse(v),w,b)}applyRedirectCreateUrlTree(w,v,b,P){const z=this.createSegmentGroup(w,v.root,b,P);return new me(z,this.createQueryParams(v.queryParams,this.urlTree.queryParams),v.fragment)}createQueryParams(w,v){const b={};return Ue(w,(P,z)=>{if("string"==typeof P&&P.startsWith(":")){const pe=P.substring(1);b[z]=v[pe]}else b[z]=P}),b}createSegmentGroup(w,v,b,P){const z=this.createSegments(w,v.segments,b,P);let te={};return Ue(v.children,(pe,et)=>{te[et]=this.createSegmentGroup(w,pe,b,P)}),new X(z,te)}createSegments(w,v,b,P){return v.map(z=>z.path.startsWith(":")?this.findPosParam(w,z,P):this.findOrReturn(z,b))}findPosParam(w,v,b){const P=b[v.path.substring(1)];if(!P)throw new p.vHH(4001,Zn);return P}findOrReturn(w,v){let b=0;for(const P of v){if(P.path===w.path)return v.splice(b),P;b++}return w}}class j{}class je{constructor(w,v,b,P,z,te,pe,et){this.injector=w,this.rootComponentType=v,this.config=b,this.urlTree=P,this.url=z,this.paramsInheritanceStrategy=te,this.relativeLinkResolution=pe,this.urlSerializer=et}recognize(){const w=q(this.urlTree.root,[],[],this.config.filter(v=>void 0===v.redirectTo),this.relativeLinkResolution).segmentGroup;return this.processSegmentGroup(this.injector,this.config,w,qt).pipe((0,de.U)(v=>{if(null===v)return null;const b=new cs([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},qt,this.rootComponentType,null,this.urlTree.root,-1,{}),P=new Ni(b,v),z=new Ls(this.url,P);return this.inheritParamsAndData(z._root),z}))}inheritParamsAndData(w){const v=w.value,b=ls(v,this.paramsInheritanceStrategy);v.params=Object.freeze(b.params),v.data=Object.freeze(b.data),w.children.forEach(P=>this.inheritParamsAndData(P))}processSegmentGroup(w,v,b,P){return 0===b.segments.length&&b.hasChildren()?this.processChildren(w,v,b):this.processSegment(w,v,b,b.segments,P)}processChildren(w,v,b){return(0,C.D)(Object.keys(b.children)).pipe((0,ht.b)(P=>{const z=b.children[P],te=Es(v,P);return this.processSegmentGroup(w,te,z,P)}),(0,on.R)((P,z)=>P&&z?(P.push(...z),P):null),function Wr(_,w=!1){return(0,ae.e)((v,b)=>{let P=0;v.subscribe((0,yt.x)(b,z=>{const te=_(z,P++);(te||w)&&b.next(z),!te&&b.complete()}))})}(P=>null!==P),(0,un.d)(null),$n(),(0,de.U)(P=>{if(null===P)return null;const z=An(P);return function bt(_){_.sort((w,v)=>w.value.outlet===qt?-1:v.value.outlet===qt?1:w.value.outlet.localeCompare(v.value.outlet))}(z),z}))}processSegment(w,v,b,P,z){return(0,C.D)(v).pipe((0,ht.b)(te=>this.processSegmentAgainstRoute(te._injector??w,te,b,P,z)),(0,$t.P)(te=>!!te),Kt(te=>{if(fs(te))return qn(b,P,z)?(0,G.of)([]):(0,G.of)(null);throw te}))}processSegmentAgainstRoute(w,v,b,P,z){if(v.redirectTo||!ur(v,b,P,z))return(0,G.of)(null);let te;if("**"===v.path){const pe=P.length>0?ti(P).parameters:{},et=Nr(b)+P.length,Rt=new cs(P,pe,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,gr(v),Bi(v),v.component??v._loadedComponent??null,v,Jr(b),et,br(v),et);te=(0,G.of)({snapshot:Rt,consumedSegments:[],remainingSegments:[]})}else te=$(b,v,P,w).pipe((0,de.U)(({matched:pe,consumedSegments:et,remainingSegments:Rt,parameters:rn})=>{if(!pe)return null;const Zt=Nr(b)+et.length;return{snapshot:new cs(et,rn,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,gr(v),Bi(v),v.component??v._loadedComponent??null,v,Jr(b),Zt,br(v),Zt),consumedSegments:et,remainingSegments:Rt}}));return te.pipe((0,Ne.w)(pe=>{if(null===pe)return(0,G.of)(null);const{snapshot:et,consumedSegments:Rt,remainingSegments:rn}=pe;w=v._injector??w;const Zt=v._loadedInjector??w,Cn=function sn(_){return _.children?_.children:_.loadChildren?_._loadedRoutes:[]}(v),{segmentGroup:Kn,slicedSegments:po}=q(b,Rt,rn,Cn.filter(hi=>void 0===hi.redirectTo),this.relativeLinkResolution);if(0===po.length&&Kn.hasChildren())return this.processChildren(Zt,Cn,Kn).pipe((0,de.U)(hi=>null===hi?null:[new Ni(et,hi)]));if(0===Cn.length&&0===po.length)return(0,G.of)([new Ni(et,[])]);const Zi=Bi(v)===z;return this.processSegment(Zt,Cn,Kn,po,Zi?qt:z).pipe((0,de.U)(hi=>null===hi?null:[new Ni(et,hi)]))}))}}function Ut(_){const w=_.value.routeConfig;return w&&""===w.path&&void 0===w.redirectTo}function An(_){const w=[],v=new Set;for(const b of _){if(!Ut(b)){w.push(b);continue}const P=w.find(z=>b.value.routeConfig===z.value.routeConfig);void 0!==P?(P.children.push(...b.children),v.add(P)):w.push(b)}for(const b of v){const P=An(b.children);w.push(new Ni(b.value,P))}return w.filter(b=>!v.has(b))}function Jr(_){let w=_;for(;w._sourceSegment;)w=w._sourceSegment;return w}function Nr(_){let w=_,v=w._segmentIndexShift??0;for(;w._sourceSegment;)w=w._sourceSegment,v+=w._segmentIndexShift??0;return v-1}function gr(_){return _.data||{}}function br(_){return _.resolve||{}}function bo(_){return"string"==typeof _.title||null===_.title}function li(_){return(0,Ne.w)(w=>{const v=_(w);return v?(0,C.D)(v).pipe((0,de.U)(()=>w)):(0,G.of)(w)})}let ns=(()=>{class _{buildTitle(v){let b,P=v.root;for(;void 0!==P;)b=this.getResolvedTitleForRoute(P)??b,P=P.children.find(z=>z.outlet===qt);return b}getResolvedTitleForRoute(v){return v.data[rr]}}return _.\u0275fac=function(v){return new(v||_)},_.\u0275prov=p.Yz7({token:_,factory:function(){return(0,p.f3M)(To)},providedIn:"root"}),_})(),To=(()=>{class _ extends ns{constructor(v){super(),this.title=v}updateTitle(v){const b=this.buildTitle(v);void 0!==b&&this.title.setTitle(b)}}return _.\u0275fac=function(v){return new(v||_)(p.LFG(Ir.Dx))},_.\u0275prov=p.Yz7({token:_,factory:_.\u0275fac,providedIn:"root"}),_})();class Ra{}class ta extends class zi{shouldDetach(w){return!1}store(w,v){}shouldAttach(w){return!1}retrieve(w){return null}shouldReuseRoute(w,v){return w.routeConfig===v.routeConfig}}{}const Oa=new p.OlP("",{providedIn:"root",factory:()=>({})}),Tt=new p.OlP("ROUTES");let Pr=(()=>{class _{constructor(v,b){this.injector=v,this.compiler=b,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(v){if(this.componentLoaders.get(v))return this.componentLoaders.get(v);if(v._loadedComponent)return(0,G.of)(v._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(v);const b=ge(v.loadComponent()).pipe((0,tn.b)(z=>{this.onLoadEndListener&&this.onLoadEndListener(v),v._loadedComponent=z}),_r(()=>{this.componentLoaders.delete(v)})),P=new ne(b,()=>new be.x).pipe(Fe());return this.componentLoaders.set(v,P),P}loadChildren(v,b){if(this.childrenLoaders.get(b))return this.childrenLoaders.get(b);if(b._loadedRoutes)return(0,G.of)({routes:b._loadedRoutes,injector:b._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(b);const z=this.loadModuleFactoryOrRoutes(b.loadChildren).pipe((0,de.U)(pe=>{this.onLoadEndListener&&this.onLoadEndListener(b);let et,Rt,rn=!1;Array.isArray(pe)?Rt=pe:(et=pe.create(v).injector,Rt=ei(et.get(Tt,[],p.XFs.Self|p.XFs.Optional)));return{routes:Rt.map(Qs),injector:et}}),_r(()=>{this.childrenLoaders.delete(b)})),te=new ne(z,()=>new be.x).pipe(Fe());return this.childrenLoaders.set(b,te),te}loadModuleFactoryOrRoutes(v){return ge(v()).pipe((0,Mt.z)(b=>b instanceof p.YKP||Array.isArray(b)?(0,G.of)(b):(0,C.D)(this.compiler.compileModuleAsync(b))))}}return _.\u0275fac=function(v){return new(v||_)(p.LFG(p.zs3),p.LFG(p.Sil))},_.\u0275prov=p.Yz7({token:_,factory:_.\u0275fac,providedIn:"root"}),_})();class Fo{}class za{shouldProcessUrl(w){return!0}extract(w){return w}merge(w,v){return w}}function vn(_){throw _}function Au(_,w,v){return w.parse("/")}const Ht={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Qe={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};function Wi(){const _=(0,p.f3M)(gt),w=(0,p.f3M)(si),v=(0,p.f3M)(Ie.Ye),b=(0,p.f3M)(p.zs3),P=(0,p.f3M)(p.Sil),z=(0,p.f3M)(Tt,{optional:!0})??[],te=(0,p.f3M)(Oa,{optional:!0})??{},pe=(0,p.f3M)(To),et=(0,p.f3M)(ns,{optional:!0}),Rt=(0,p.f3M)(Fo,{optional:!0}),rn=(0,p.f3M)(Ra,{optional:!0}),Zt=new qi(null,_,w,v,b,P,ei(z));return Rt&&(Zt.urlHandlingStrategy=Rt),rn&&(Zt.routeReuseStrategy=rn),Zt.titleStrategy=et??pe,function Et(_,w){_.errorHandler&&(w.errorHandler=_.errorHandler),_.malformedUriErrorHandler&&(w.malformedUriErrorHandler=_.malformedUriErrorHandler),_.onSameUrlNavigation&&(w.onSameUrlNavigation=_.onSameUrlNavigation),_.paramsInheritanceStrategy&&(w.paramsInheritanceStrategy=_.paramsInheritanceStrategy),_.relativeLinkResolution&&(w.relativeLinkResolution=_.relativeLinkResolution),_.urlUpdateStrategy&&(w.urlUpdateStrategy=_.urlUpdateStrategy),_.canceledNavigationResolution&&(w.canceledNavigationResolution=_.canceledNavigationResolution)}(te,Zt),Zt}let qi=(()=>{class _{constructor(v,b,P,z,te,pe,et){this.rootComponentType=v,this.urlSerializer=b,this.rootContexts=P,this.location=z,this.config=et,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new be.x,this.errorHandler=vn,this.malformedUriErrorHandler=Au,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=()=>(0,G.of)(void 0),this.urlHandlingStrategy=new za,this.routeReuseStrategy=new ta,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.configLoader=te.get(Pr),this.configLoader.onLoadEndListener=Cn=>this.triggerEvent(new Dt(Cn)),this.configLoader.onLoadStartListener=Cn=>this.triggerEvent(new lt(Cn)),this.ngModule=te.get(p.h0i),this.console=te.get(p.c2e);const Zt=te.get(p.R0b);this.isNgZoneEnabled=Zt instanceof p.R0b&&p.R0b.isInAngularZone(),this.resetConfig(et),this.currentUrlTree=function Be(){return new me(new X([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=Pi(this.currentUrlTree,this.rootComponentType),this.transitions=new we({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){return this.location.getState()?.\u0275routerPageId}setupNavigations(v){const b=this.events;return v.pipe((0,Ct.h)(P=>0!==P.id),(0,de.U)(P=>({...P,extractedUrl:this.urlHandlingStrategy.extract(P.rawUrl)})),(0,Ne.w)(P=>{let z=!1,te=!1;return(0,G.of)(P).pipe((0,tn.b)(pe=>{this.currentNavigation={id:pe.id,initialUrl:pe.rawUrl,extractedUrl:pe.extractedUrl,trigger:pe.source,extras:pe.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),(0,Ne.w)(pe=>{const et=this.browserUrlTree.toString(),Rt=!this.navigated||pe.extractedUrl.toString()!==et||et!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||Rt)&&this.urlHandlingStrategy.shouldProcessUrl(pe.rawUrl))return Ia(pe.source)&&(this.browserUrlTree=pe.extractedUrl),(0,G.of)(pe).pipe((0,Ne.w)(Zt=>{const Cn=this.transitions.getValue();return b.next(new ni(Zt.id,this.serializeUrl(Zt.extractedUrl),Zt.source,Zt.restoredState)),Cn!==this.transitions.getValue()?vt.E:Promise.resolve(Zt)}),function x(_,w,v,b){return(0,Ne.w)(P=>function Co(_,w,v,b,P){return new ps(_,w,v,b,P).apply()}(_,w,v,P.extractedUrl,b).pipe((0,de.U)(z=>({...P,urlAfterRedirects:z}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,tn.b)(Zt=>{this.currentNavigation={...this.currentNavigation,finalUrl:Zt.urlAfterRedirects},P.urlAfterRedirects=Zt.urlAfterRedirects}),function ui(_,w,v,b,P,z){return(0,Mt.z)(te=>function De(_,w,v,b,P,z,te="emptyOnly",pe="legacy"){return new je(_,w,v,b,P,te,pe,z).recognize().pipe((0,Ne.w)(et=>null===et?function J(_){return new Re.y(w=>w.error(_))}(new j):(0,G.of)(et)))}(_,w,v,te.urlAfterRedirects,b.serialize(te.urlAfterRedirects),b,P,z).pipe((0,de.U)(pe=>({...te,targetSnapshot:pe}))))}(this.ngModule.injector,this.rootComponentType,this.config,this.urlSerializer,this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,tn.b)(Zt=>{if(P.targetSnapshot=Zt.targetSnapshot,"eager"===this.urlUpdateStrategy){if(!Zt.extras.skipLocationChange){const Kn=this.urlHandlingStrategy.merge(Zt.urlAfterRedirects,Zt.rawUrl);this.setBrowserUrl(Kn,Zt)}this.browserUrlTree=Zt.urlAfterRedirects}const Cn=new ks(Zt.id,this.serializeUrl(Zt.extractedUrl),this.serializeUrl(Zt.urlAfterRedirects),Zt.targetSnapshot);b.next(Cn)}));if(Rt&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:Cn,extractedUrl:Kn,source:po,restoredState:Zi,extras:hi}=pe,Ko=new ni(Cn,this.serializeUrl(Kn),po,Zi);b.next(Ko);const _i=Pi(Kn,this.rootComponentType).snapshot;return P={...pe,targetSnapshot:_i,urlAfterRedirects:Kn,extras:{...hi,skipLocationChange:!1,replaceUrl:!1}},(0,G.of)(P)}return this.rawUrlTree=pe.rawUrl,pe.resolve(null),vt.E}),(0,tn.b)(pe=>{const et=new ri(pe.id,this.serializeUrl(pe.extractedUrl),this.serializeUrl(pe.urlAfterRedirects),pe.targetSnapshot);this.triggerEvent(et)}),(0,de.U)(pe=>P={...pe,guards:Po(pe.targetSnapshot,pe.currentSnapshot,this.rootContexts)}),function Js(_,w){return(0,Mt.z)(v=>{const{targetSnapshot:b,currentSnapshot:P,guards:{canActivateChecks:z,canDeactivateChecks:te}}=v;return 0===te.length&&0===z.length?(0,G.of)({...v,guardsResult:!0}):function Xs(_,w,v,b){return(0,C.D)(_).pipe((0,Mt.z)(P=>function Wo(_,w,v,b,P){const z=w&&w.routeConfig?w.routeConfig.canDeactivate:null;if(!z||0===z.length)return(0,G.of)(!0);const te=z.map(pe=>{const et=Eo(w)??P,Rt=ts(pe,et);return ge(function K(_){return _&&Do(_.canDeactivate)}(Rt)?Rt.canDeactivate(_,w,v,b):et.runInContext(()=>Rt(_,w,v,b))).pipe((0,$t.P)())});return(0,G.of)(te).pipe(ji())}(P.component,P.route,v,w,b)),(0,$t.P)(P=>!0!==P,!0))}(te,b,P,_).pipe((0,Mt.z)(pe=>pe&&function ca(_){return"boolean"==typeof _}(pe)?function ko(_,w,v,b){return(0,C.D)(w).pipe((0,ht.b)(P=>(0,He.z)(function co(_,w){return null!==_&&w&&w(new Xt(_)),(0,G.of)(!0)}(P.route.parent,b),function zo(_,w){return null!==_&&w&&w(new Er(_)),(0,G.of)(!0)}(P.route,b),function Rr(_,w,v){const b=w[w.length-1],z=w.slice(0,w.length-1).reverse().map(te=>function Ur(_){const w=_.routeConfig?_.routeConfig.canActivateChild:null;return w&&0!==w.length?{node:_,guards:w}:null}(te)).filter(te=>null!==te).map(te=>jt(()=>{const pe=te.guards.map(et=>{const Rt=Eo(te.node)??v,rn=ts(et,Rt);return ge(function A(_){return _&&Do(_.canActivateChild)}(rn)?rn.canActivateChild(b,_):Rt.runInContext(()=>rn(b,_))).pipe((0,$t.P)())});return(0,G.of)(pe).pipe(ji())}));return(0,G.of)(z).pipe(ji())}(_,P.path,v),function Ea(_,w,v){const b=w.routeConfig?w.routeConfig.canActivate:null;if(!b||0===b.length)return(0,G.of)(!0);const P=b.map(z=>jt(()=>{const te=Eo(w)??v,pe=ts(z,te);return ge(function N(_){return _&&Do(_.canActivate)}(pe)?pe.canActivate(w,_):te.runInContext(()=>pe(w,_))).pipe((0,$t.P)())}));return(0,G.of)(P).pipe(ji())}(_,P.route,v))),(0,$t.P)(P=>!0!==P,!0))}(b,z,_,w):(0,G.of)(pe)),(0,de.U)(pe=>({...v,guardsResult:pe})))})}(this.ngModule.injector,pe=>this.triggerEvent(pe)),(0,tn.b)(pe=>{if(P.guardsResult=pe.guardsResult,Xn(pe.guardsResult))throw uo(0,pe.guardsResult);const et=new xe(pe.id,this.serializeUrl(pe.extractedUrl),this.serializeUrl(pe.urlAfterRedirects),pe.targetSnapshot,!!pe.guardsResult);this.triggerEvent(et)}),(0,Ct.h)(pe=>!!pe.guardsResult||(this.restoreHistory(pe),this.cancelNavigationTransition(pe,"",3),!1)),li(pe=>{if(pe.guards.canActivateChecks.length)return(0,G.of)(pe).pipe((0,tn.b)(et=>{const Rt=new Ae(et.id,this.serializeUrl(et.extractedUrl),this.serializeUrl(et.urlAfterRedirects),et.targetSnapshot);this.triggerEvent(Rt)}),(0,Ne.w)(et=>{let Rt=!1;return(0,G.of)(et).pipe(function $i(_,w){return(0,Mt.z)(v=>{const{targetSnapshot:b,guards:{canActivateChecks:P}}=v;if(!P.length)return(0,G.of)(v);let z=0;return(0,C.D)(P).pipe((0,ht.b)(te=>function Hi(_,w,v,b){const P=_.routeConfig,z=_._resolve;return void 0!==P?.title&&!bo(P)&&(z[rr]=P.title),function xi(_,w,v,b){const P=function Gi(_){return[...Object.keys(_),...Object.getOwnPropertySymbols(_)]}(_);if(0===P.length)return(0,G.of)({});const z={};return(0,C.D)(P).pipe((0,Mt.z)(te=>function ho(_,w,v,b){const P=Eo(w)??b,z=ts(_,P);return ge(z.resolve?z.resolve(w,v):P.runInContext(()=>z(w,v)))}(_[te],w,v,b).pipe((0,$t.P)(),(0,tn.b)(pe=>{z[te]=pe}))),kt(1),function vr(_){return(0,de.U)(()=>_)}(z),Kt(te=>fs(te)?vt.E:Je(te)))}(z,_,w,b).pipe((0,de.U)(te=>(_._resolvedData=te,_.data=ls(_,v).resolve,P&&bo(P)&&(_.data[rr]=P.title),null)))}(te.route,b,_,w)),(0,tn.b)(()=>z++),kt(1),(0,Mt.z)(te=>z===P.length?(0,G.of)(v):vt.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,tn.b)({next:()=>Rt=!0,complete:()=>{Rt||(this.restoreHistory(et),this.cancelNavigationTransition(et,"",2))}}))}),(0,tn.b)(et=>{const Rt=new Ve(et.id,this.serializeUrl(et.extractedUrl),this.serializeUrl(et.urlAfterRedirects),et.targetSnapshot);this.triggerEvent(Rt)}))}),li(pe=>{const et=Rt=>{const rn=[];Rt.routeConfig?.loadComponent&&!Rt.routeConfig._loadedComponent&&rn.push(this.configLoader.loadComponent(Rt.routeConfig).pipe((0,tn.b)(Zt=>{Rt.component=Zt}),(0,de.U)(()=>{})));for(const Zt of Rt.children)rn.push(...et(Zt));return rn};return Ze(et(pe.targetSnapshot.root)).pipe((0,un.d)(),(0,dt.q)(1))}),li(()=>this.afterPreactivation()),(0,de.U)(pe=>{const et=function Vi(_,w,v){const b=Ai(_,w._root,v?v._root:void 0);return new ao(b,w)}(this.routeReuseStrategy,pe.targetSnapshot,pe.currentRouterState);return P={...pe,targetRouterState:et}}),(0,tn.b)(pe=>{this.currentUrlTree=pe.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(pe.urlAfterRedirects,pe.rawUrl),this.routerState=pe.targetRouterState,"deferred"===this.urlUpdateStrategy&&(pe.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,pe),this.browserUrlTree=pe.urlAfterRedirects)}),((_,w,v)=>(0,de.U)(b=>(new ft(w,b.targetRouterState,b.currentRouterState,v).activate(_),b)))(this.rootContexts,this.routeReuseStrategy,pe=>this.triggerEvent(pe)),(0,tn.b)({next(){z=!0},complete(){z=!0}}),_r(()=>{z||te||this.cancelNavigationTransition(P,"",1),this.currentNavigation?.id===P.id&&(this.currentNavigation=null)}),Kt(pe=>{if(te=!0,Ro(pe)){ds(pe)||(this.navigated=!0,this.restoreHistory(P,!0));const et=new Ho(P.id,this.serializeUrl(P.extractedUrl),pe.message,pe.cancellationCode);if(b.next(et),ds(pe)){const Rt=this.urlHandlingStrategy.merge(pe.url,this.rawUrlTree),rn={skipLocationChange:P.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||Ia(P.source)};this.scheduleNavigation(Rt,"imperative",null,rn,{resolve:P.resolve,reject:P.reject,promise:P.promise})}else P.resolve(!1)}else{this.restoreHistory(P,!0);const et=new Zs(P.id,this.serializeUrl(P.extractedUrl),pe,P.targetSnapshot??void 0);b.next(et);try{P.resolve(this.errorHandler(pe))}catch(Rt){P.reject(Rt)}}return vt.E}))}))}resetRootComponentType(v){this.rootComponentType=v,this.routerState.root.component=this.rootComponentType}setTransition(v){this.transitions.next({...this.transitions.value,...v})}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(v=>{const b="popstate"===v.type?"popstate":"hashchange";"popstate"===b&&setTimeout(()=>{const P={replaceUrl:!0},z=v.state?.navigationId?v.state:null;if(z){const pe={...z};delete pe.navigationId,delete pe.\u0275routerPageId,0!==Object.keys(pe).length&&(P.state=pe)}const te=this.parseUrl(v.url);this.scheduleNavigation(te,b,z,P)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(v){this.events.next(v)}resetConfig(v){this.config=v.map(Qs),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(v,b={}){const{relativeTo:P,queryParams:z,fragment:te,queryParamsHandling:pe,preserveFragment:et}=b,Rt=P||this.routerState.root,rn=et?this.currentUrlTree.fragment:te;let Zt=null;switch(pe){case"merge":Zt={...this.currentUrlTree.queryParams,...z};break;case"preserve":Zt=this.currentUrlTree.queryParams;break;default:Zt=z||null}return null!==Zt&&(Zt=this.removeEmptyProps(Zt)),as(Rt,this.currentUrlTree,v,Zt,rn??null)}navigateByUrl(v,b={skipLocationChange:!1}){const P=Xn(v)?v:this.parseUrl(v),z=this.urlHandlingStrategy.merge(P,this.rawUrlTree);return this.scheduleNavigation(z,"imperative",null,b)}navigate(v,b={skipLocationChange:!1}){return function nu(_){for(let w=0;w<_.length;w++){if(null==_[w])throw new p.vHH(4008,false)}}(v),this.navigateByUrl(this.createUrlTree(v,b),b)}serializeUrl(v){return this.urlSerializer.serialize(v)}parseUrl(v){let b;try{b=this.urlSerializer.parse(v)}catch(P){b=this.malformedUriErrorHandler(P,this.urlSerializer,v)}return b}isActive(v,b){let P;if(P=!0===b?{...Ht}:!1===b?{...Qe}:b,Xn(v))return Ft(this.currentUrlTree,v,P);const z=this.parseUrl(v);return Ft(this.currentUrlTree,z,P)}removeEmptyProps(v){return Object.keys(v).reduce((b,P)=>{const z=v[P];return null!=z&&(b[P]=z),b},{})}processNavigations(){this.navigations.subscribe(v=>{this.navigated=!0,this.lastSuccessfulId=v.id,this.currentPageId=v.targetPageId,this.events.next(new Si(v.id,this.serializeUrl(v.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.titleStrategy?.updateTitle(this.routerState.snapshot),v.resolve(!0)},v=>{this.console.warn(`Unhandled Navigation Error: ${v}`)})}scheduleNavigation(v,b,P,z,te){if(this.disposed)return Promise.resolve(!1);let pe,et,Rt;te?(pe=te.resolve,et=te.reject,Rt=te.promise):Rt=new Promise((Cn,Kn)=>{pe=Cn,et=Kn});const rn=++this.navigationId;let Zt;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(P=this.location.getState()),Zt=P&&P.\u0275routerPageId?P.\u0275routerPageId:z.replaceUrl||z.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1):Zt=0,this.setTransition({id:rn,targetPageId:Zt,source:b,restoredState:P,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:v,extras:z,resolve:pe,reject:et,promise:Rt,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),Rt.catch(Cn=>Promise.reject(Cn))}setBrowserUrl(v,b){const P=this.urlSerializer.serialize(v),z={...b.extras.state,...this.generateNgRouterState(b.id,b.targetPageId)};this.location.isCurrentPathEqualTo(P)||b.extras.replaceUrl?this.location.replaceState(P,"",z):this.location.go(P,"",z)}restoreHistory(v,b=!1){if("computed"===this.canceledNavigationResolution){const P=this.currentPageId-v.targetPageId;"popstate"!==v.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.currentNavigation?.finalUrl||0===P?this.currentUrlTree===this.currentNavigation?.finalUrl&&0===P&&(this.resetState(v),this.browserUrlTree=v.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(P)}else"replace"===this.canceledNavigationResolution&&(b&&this.resetState(v),this.resetUrlToCurrentUrlTree())}resetState(v){this.routerState=v.currentRouterState,this.currentUrlTree=v.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,v.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(v,b,P){const z=new Ho(v.id,this.serializeUrl(v.extractedUrl),b,P);this.triggerEvent(z),v.resolve(!1)}generateNgRouterState(v,b){return"computed"===this.canceledNavigationResolution?{navigationId:v,\u0275routerPageId:b}:{navigationId:v}}}return _.\u0275fac=function(v){p.$Z()},_.\u0275prov=p.Yz7({token:_,factory:function(){return Wi()},providedIn:"root"}),_})();function Ia(_){return"imperative"!==_}let Pa=(()=>{class _{constructor(v,b,P){this.router=v,this.route=b,this.locationStrategy=P,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.commands=null,this.href=null,this.onChanges=new be.x,this.subscription=v.events.subscribe(z=>{z instanceof Si&&this.updateTargetUrlAndHref()})}set preserveFragment(v){this._preserveFragment=(0,p.D6c)(v)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(v){this._skipLocationChange=(0,p.D6c)(v)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(v){this._replaceUrl=(0,p.D6c)(v)}get replaceUrl(){return this._replaceUrl}set routerLink(v){this.commands=null!=v?Array.isArray(v)?v:[v]:null}ngOnChanges(v){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(v,b,P,z,te){return!!(0!==v||b||P||z||te||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!1)}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return _.\u0275fac=function(v){return new(v||_)(p.Y36(qi),p.Y36(ki),p.Y36(Ie.S$))},_.\u0275dir=p.lG2({type:_,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(v,b){1&v&&p.NdJ("click",function(z){return b.onClick(z.button,z.ctrlKey,z.shiftKey,z.altKey,z.metaKey)}),2&v&&p.uIk("target",b.target)("href",b.href,p.LSH)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[p.TTD]}),_})();class pa{}let ga=(()=>{class _{constructor(v,b,P,z,te){this.router=v,this.injector=P,this.preloadingStrategy=z,this.loader=te}setUpPreloading(){this.subscription=this.router.events.pipe((0,Ct.h)(v=>v instanceof Si),(0,ht.b)(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(v,b){const P=[];for(const z of b){z.providers&&!z._injector&&(z._injector=(0,p.MMx)(z.providers,v,`Route: ${z.path}`));const te=z._injector??v,pe=z._loadedInjector??te;z.loadChildren&&!z._loadedRoutes&&void 0===z.canLoad||z.loadComponent&&!z._loadedComponent?P.push(this.preloadConfig(te,z)):(z.children||z._loadedRoutes)&&P.push(this.processRoutes(pe,z.children??z._loadedRoutes))}return(0,C.D)(P).pipe((0,yr.J)())}preloadConfig(v,b){return this.preloadingStrategy.preload(b,()=>{let P;P=b.loadChildren&&void 0===b.canLoad?this.loader.loadChildren(v,b):(0,G.of)(null);const z=P.pipe((0,Mt.z)(te=>null===te?(0,G.of)(void 0):(b._loadedRoutes=te.routes,b._loadedInjector=te.injector,this.processRoutes(te.injector??v,te.routes))));if(b.loadComponent&&!b._loadedComponent){const te=this.loader.loadComponent(b);return(0,C.D)([z,te]).pipe((0,yr.J)())}return z})}}return _.\u0275fac=function(v){return new(v||_)(p.LFG(qi),p.LFG(p.Sil),p.LFG(p.lqb),p.LFG(pa),p.LFG(Pr))},_.\u0275prov=p.Yz7({token:_,factory:_.\u0275fac,providedIn:"root"}),_})();const Dn=new p.OlP("");let So=(()=>{class _{constructor(v,b,P={}){this.router=v,this.viewportScroller=b,this.options=P,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},P.scrollPositionRestoration=P.scrollPositionRestoration||"disabled",P.anchorScrolling=P.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(v=>{v instanceof ni?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=v.navigationTrigger,this.restoredId=v.restoredState?v.restoredState.navigationId:0):v instanceof Si&&(this.lastId=v.id,this.scheduleScrollEvent(v,this.router.parseUrl(v.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(v=>{v instanceof fi&&(v.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(v.position):v.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(v.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(v,b){this.router.triggerEvent(new fi(v,"popstate"===this.lastSource?this.store[this.restoredId]:null,b))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return _.\u0275fac=function(v){p.$Z()},_.\u0275prov=p.Yz7({token:_,factory:_.\u0275fac}),_})();function Zo(_,w){return{\u0275kind:_,\u0275providers:w}}function mr(_){return[{provide:Tt,multi:!0,useValue:_}]}function yi(){const _=(0,p.f3M)(p.zs3);return w=>{const v=_.get(p.z2F);if(w!==v.components[0])return;const b=_.get(qi),P=_.get(zt);1===_.get(na)&&b.initialNavigation(),_.get(Da,null,p.XFs.Optional)?.setUpPreloading(),_.get(Dn,null,p.XFs.Optional)?.init(),b.resetRootComponentType(v.componentTypes[0]),P.next(),P.complete()}}const zt=new p.OlP("",{factory:()=>new be.x}),na=new p.OlP("",{providedIn:"root",factory:()=>1});const Da=new p.OlP("");function ka(_){return Zo(0,[{provide:Da,useExisting:ga},{provide:pa,useExisting:_}])}const vi=new p.OlP("ROUTER_FORROOT_GUARD"),ou=[Ie.Ye,{provide:gt,useClass:Vt},{provide:qi,useFactory:Wi},si,{provide:ki,useFactory:function Pn(_){return _.routerState.root},deps:[qi]},Pr];function Ca(){return new p.PXZ("Router",qi)}let ra=(()=>{class _{constructor(v){}static forRoot(v,b){return{ngModule:_,providers:[ou,[],mr(v),{provide:vi,useFactory:ba,deps:[[qi,new p.FiY,new p.tp0]]},{provide:Oa,useValue:b||{}},b?.useHash?{provide:Ie.S$,useClass:Ie.Do}:{provide:Ie.S$,useClass:Ie.b0},{provide:Dn,useFactory:()=>{const _=(0,p.f3M)(qi),w=(0,p.f3M)(Ie.EM),v=(0,p.f3M)(Oa);return v.scrollOffset&&w.setOffset(v.scrollOffset),new So(_,w,v)}},b?.preloadingStrategy?ka(b.preloadingStrategy).\u0275providers:[],{provide:p.PXZ,multi:!0,useFactory:Ca},b?.initialNavigation?Ds(b):[],[{provide:qa,useFactory:yi},{provide:p.tb,multi:!0,useExisting:qa}]]}}static forChild(v){return{ngModule:_,providers:[mr(v)]}}}return _.\u0275fac=function(v){return new(v||_)(p.LFG(vi,8))},_.\u0275mod=p.oAB({type:_}),_.\u0275inj=p.cJS({imports:[Di]}),_})();function ba(_){return"guarded"}function Ds(_){return["disabled"===_.initialNavigation?Zo(3,[{provide:p.ip1,multi:!0,useFactory:()=>{const w=(0,p.f3M)(qi);return()=>{w.setUpLocationChangeListener()}}},{provide:na,useValue:2}]).\u0275providers:[],"enabledBlocking"===_.initialNavigation?Zo(2,[{provide:na,useValue:0},{provide:p.ip1,multi:!0,deps:[p.zs3],useFactory:w=>{const v=w.get(Ie.V_,Promise.resolve(null));let b=!1;return()=>v.then(()=>new Promise(z=>{const te=w.get(qi),pe=w.get(zt);(function P(z){w.get(qi).events.pipe((0,Ct.h)(pe=>pe instanceof Si||pe instanceof Ho||pe instanceof Zs),(0,de.U)(pe=>pe instanceof Si||pe instanceof Ho&&(0===pe.code||1===pe.code)&&null),(0,Ct.h)(pe=>null!==pe),(0,dt.q)(1)).subscribe(()=>{z()})})(()=>{z(!0),b=!0}),te.afterPreactivation=()=>(z(!0),b||pe.closed?(0,G.of)(void 0):pe),te.initialNavigation()}))}}]).\u0275providers:[]]}const qa=new p.OlP("")},3942:(Gt,We,V)=>{V.d(We,{Z:()=>Ze});var p=V(2090),C=V(4859),G=V(9681),be=V(1877);class we{constructor(Ke,He){this._delegate=Ke,this.firebase=He,(0,G._addComponent)(Ke,new C.wA("app-compat",()=>this,"PUBLIC")),this.container=Ke.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Ke){this._delegate.automaticDataCollectionEnabled=Ke}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(Ke=>{this._delegate.checkDestroyed(),Ke()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,G.deleteApp)(this._delegate)))}_getService(Ke,He=G._DEFAULT_ENTRY_NAME){var Bt;this._delegate.checkDestroyed();const jt=this._delegate.container.getProvider(Ke);return!jt.isInitialized()&&"EXPLICIT"===(null===(Bt=jt.getComponent())||void 0===Bt?void 0:Bt.instantiationMode)&&jt.initialize(),jt.getImmediate({identifier:He})}_removeServiceInstance(Ke,He=G._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(Ke).clearInstance(He)}_addComponent(Ke){(0,G._addComponent)(this._delegate,Ke)}_addOrOverwriteComponent(Ke){(0,G._addOrOverwriteComponent)(this._delegate,Ke)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const Re=new p.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),le=function ke(){const Ot=function Oe(Ot){const Ke={},He={__esModule:!0,initializeApp:function he(tt,ae={}){const Fe=G.initializeApp(tt,ae);if((0,p.r3)(Ke,Fe.name))return Ke[Fe.name];const ne=new Ot(Fe,He);return Ke[Fe.name]=ne,ne},app:jt,registerVersion:G.registerVersion,setLogLevel:G.setLogLevel,onLog:G.onLog,apps:null,SDK_VERSION:G.SDK_VERSION,INTERNAL:{registerComponent:function Je(tt){const ae=tt.name,Fe=ae.replace("-compat","");if(G._registerComponent(tt)&&"PUBLIC"===tt.type){const ne=(Ie=jt())=>{if("function"!=typeof Ie[Fe])throw Re.create("invalid-app-argument",{appName:ae});return Ie[Fe]()};void 0!==tt.serviceProps&&(0,p.ZB)(ne,tt.serviceProps),He[Fe]=ne,Ot.prototype[Fe]=function(...Ie){return this._getService.bind(this,ae).apply(this,tt.multipleInstances?Ie:[])}}return"PUBLIC"===tt.type?He[Fe]:null},removeApp:function Bt(tt){delete Ke[tt]},useAsService:function vt(tt,ae){return"serverAuth"===ae?null:ae},modularAPIs:G}};function jt(tt){if(!(0,p.r3)(Ke,tt=tt||G._DEFAULT_ENTRY_NAME))throw Re.create("no-app",{appName:tt});return Ke[tt]}return He.default=He,Object.defineProperty(He,"apps",{get:function rt(){return Object.keys(Ke).map(tt=>Ke[tt])}}),jt.App=Ot,He}(we);return Ot.INTERNAL=Object.assign(Object.assign({},Ot.INTERNAL),{createFirebaseNamespace:ke,extendNamespace:function Ke(He){(0,p.ZB)(Ot,He)},createSubscribe:p.ne,ErrorFactory:p.LL,deepExtend:p.ZB}),Ot}(),ue=new be.Yd("@firebase/app-compat");if((0,p.jU)()&&void 0!==self.firebase){ue.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Ot=self.firebase.SDK_VERSION;Ot&&Ot.indexOf("LITE")>=0&&ue.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Ze=le;!function ot(Ot){(0,G.registerVersion)("@firebase/app-compat","0.1.33",Ot)}()},9681:(Gt,We,V)=>{V.r(We),V.d(We,{FirebaseError:()=>be.ZR,SDK_VERSION:()=>Ir,_DEFAULT_ENTRY_NAME:()=>$t,_addComponent:()=>on,_addOrOverwriteComponent:()=>kt,_apps:()=>tn,_clearComponents:()=>Wr,_components:()=>Kt,_getProvider:()=>un,_registerComponent:()=>Nn,_removeServiceInstance:()=>$n,deleteApp:()=>lr,getApp:()=>rr,getApps:()=>zn,initializeApp:()=>qt,onLog:()=>En,registerVersion:()=>nr,setLogLevel:()=>Hn});var p=V(5861),C=V(4859),G=V(1877),be=V(2090),we=V(8766);class Me{constructor(Ee){this.container=Ee}getPlatformInfoString(){return this.container.getProviders().map(ye=>{if(function Re(oe){return"VERSION"===oe.getComponent()?.type}(ye)){const ut=ye.getImmediate();return`${ut.library}/${ut.version}`}return null}).filter(ye=>ye).join(" ")}}const Oe="@firebase/app",le=new G.Yd("@firebase/app"),$t="[DEFAULT]",ht={[Oe]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},tn=new Map,Kt=new Map;function on(oe,Ee){try{oe.container.addComponent(Ee)}catch(ye){le.debug(`Component ${Ee.name} failed to register with FirebaseApp ${oe.name}`,ye)}}function kt(oe,Ee){oe.container.addOrOverwriteComponent(Ee)}function Nn(oe){const Ee=oe.name;if(Kt.has(Ee))return le.debug(`There were multiple attempts to register component ${Ee}.`),!1;Kt.set(Ee,oe);for(const ye of tn.values())on(ye,oe);return!0}function un(oe,Ee){const ye=oe.container.getProvider("heartbeat").getImmediate({optional:!0});return ye&&ye.triggerHeartbeat(),oe.container.getProvider(Ee)}function $n(oe,Ee,ye=$t){un(oe,Ee).clearInstance(ye)}function Wr(){Kt.clear()}const _r=new be.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class yr{constructor(Ee,ye,ut){this._isDeleted=!1,this._options=Object.assign({},Ee),this._config=Object.assign({},ye),this._name=ye.name,this._automaticDataCollectionEnabled=ye.automaticDataCollectionEnabled,this._container=ut,this.container.addComponent(new C.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Ee){this.checkDestroyed(),this._automaticDataCollectionEnabled=Ee}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Ee){this._isDeleted=Ee}checkDestroyed(){if(this.isDeleted)throw _r.create("app-deleted",{appName:this._name})}}const Ir="9.9.4";function qt(oe,Ee={}){"object"!=typeof Ee&&(Ee={name:Ee});const ye=Object.assign({name:$t,automaticDataCollectionEnabled:!1},Ee),ut=ye.name;if("string"!=typeof ut||!ut)throw _r.create("bad-app-name",{appName:String(ut)});const gt=tn.get(ut);if(gt){if((0,be.vZ)(oe,gt.options)&&(0,be.vZ)(ye,gt.config))return gt;throw _r.create("duplicate-app",{appName:ut})}const Vt=new C.H0(ut);for(const gn of Kt.values())Vt.addComponent(gn);const ar=new yr(oe,ye,Vt);return tn.set(ut,ar),ar}function rr(oe=$t){const Ee=tn.get(oe);if(!Ee)throw _r.create("no-app",{appName:oe});return Ee}function zn(){return Array.from(tn.values())}function lr(oe){return pt.apply(this,arguments)}function pt(){return(pt=(0,p.Z)(function*(oe){const Ee=oe.name;tn.has(Ee)&&(tn.delete(Ee),yield Promise.all(oe.container.getProviders().map(ye=>ye.delete())),oe.isDeleted=!0)})).apply(this,arguments)}function nr(oe,Ee,ye){var ut;let gt=null!==(ut=ht[oe])&&void 0!==ut?ut:oe;ye&&(gt+=`-${ye}`);const Vt=gt.match(/\s|\//),ar=Ee.match(/\s|\//);if(Vt||ar){const gn=[`Unable to register library "${gt}" with version "${Ee}":`];return Vt&&gn.push(`library name "${gt}" contains illegal characters (whitespace or "/")`),Vt&&ar&&gn.push("and"),ar&&gn.push(`version name "${Ee}" contains illegal characters (whitespace or "/")`),void le.warn(gn.join(" "))}Nn(new C.wA(`${gt}-version`,()=>({library:gt,version:Ee}),"VERSION"))}function En(oe,Ee){if(null!==oe&&"function"!=typeof oe)throw _r.create("invalid-log-argument");(0,G.Am)(oe,Ee)}function Hn(oe){(0,G.Ub)(oe)}const wr="firebase-heartbeat-store";let Ue=null;function ge(){return Ue||(Ue=(0,we.X3)("firebase-heartbeat-database",1,{upgrade:(oe,Ee)=>{0===Ee&&oe.createObjectStore(wr)}}).catch(oe=>{throw _r.create("idb-open",{originalErrorMessage:oe.message})})),Ue}function Be(){return(Be=(0,p.Z)(function*(oe){var Ee;try{return(yield ge()).transaction(wr).objectStore(wr).get(Ft(oe))}catch(ye){if(ye instanceof be.ZR)le.warn(ye.message);else{const ut=_r.create("idb-get",{originalErrorMessage:null===(Ee=ye)||void 0===Ee?void 0:Ee.message});le.warn(ut.message)}}})).apply(this,arguments)}function st(oe,Ee){return Lt.apply(this,arguments)}function Lt(){return(Lt=(0,p.Z)(function*(oe,Ee){var ye;try{const gt=(yield ge()).transaction(wr,"readwrite");return yield gt.objectStore(wr).put(Ee,Ft(oe)),gt.done}catch(ut){if(ut instanceof be.ZR)le.warn(ut.message);else{const gt=_r.create("idb-set",{originalErrorMessage:null===(ye=ut)||void 0===ye?void 0:ye.message});le.warn(gt.message)}}})).apply(this,arguments)}function Ft(oe){return`${oe.name}!${oe.options.appId}`}class ir{constructor(Ee){this.container=Ee,this._heartbeatsCache=null;const ye=this.container.getProvider("app").getImmediate();this._storage=new fn(ye),this._heartbeatsCachePromise=this._storage.read().then(ut=>(this._heartbeatsCache=ut,ut))}triggerHeartbeat(){var Ee=this;return(0,p.Z)(function*(){const ut=Ee.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),gt=xn();if(null===Ee._heartbeatsCache&&(Ee._heartbeatsCache=yield Ee._heartbeatsCachePromise),Ee._heartbeatsCache.lastSentHeartbeatDate!==gt&&!Ee._heartbeatsCache.heartbeats.some(Vt=>Vt.date===gt))return Ee._heartbeatsCache.heartbeats.push({date:gt,agent:ut}),Ee._heartbeatsCache.heartbeats=Ee._heartbeatsCache.heartbeats.filter(Vt=>{const ar=new Date(Vt.date).valueOf();return Date.now()-ar<=2592e6}),Ee._storage.overwrite(Ee._heartbeatsCache)})()}getHeartbeatsHeader(){var Ee=this;return(0,p.Z)(function*(){if(null===Ee._heartbeatsCache&&(yield Ee._heartbeatsCachePromise),null===Ee._heartbeatsCache||0===Ee._heartbeatsCache.heartbeats.length)return"";const ye=xn(),{heartbeatsToSend:ut,unsentEntries:gt}=function Sr(oe,Ee=1024){const ye=[];let ut=oe.slice();for(const gt of oe){const Vt=ye.find(ar=>ar.agent===gt.agent);if(Vt){if(Vt.dates.push(gt.date),me(ye)>Ee){Vt.dates.pop();break}}else if(ye.push({agent:gt.agent,dates:[gt.date]}),me(ye)>Ee){ye.pop();break}ut=ut.slice(1)}return{heartbeatsToSend:ye,unsentEntries:ut}}(Ee._heartbeatsCache.heartbeats),Vt=(0,be.L)(JSON.stringify({version:2,heartbeats:ut}));return Ee._heartbeatsCache.lastSentHeartbeatDate=ye,gt.length>0?(Ee._heartbeatsCache.heartbeats=gt,yield Ee._storage.overwrite(Ee._heartbeatsCache)):(Ee._heartbeatsCache.heartbeats=[],Ee._storage.overwrite(Ee._heartbeatsCache)),Vt})()}}function xn(){return(new Date).toISOString().substring(0,10)}class fn{constructor(Ee){this.app=Ee,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,p.Z)(function*(){return!!(0,be.hl)()&&(0,be.eu)().then(()=>!0).catch(()=>!1)})()}read(){var Ee=this;return(0,p.Z)(function*(){return(yield Ee._canUseIndexedDBPromise)&&(yield function se(oe){return Be.apply(this,arguments)}(Ee.app))||{heartbeats:[]}})()}overwrite(Ee){var ye=this;return(0,p.Z)(function*(){var ut;if(yield ye._canUseIndexedDBPromise){const Vt=yield ye.read();return st(ye.app,{lastSentHeartbeatDate:null!==(ut=Ee.lastSentHeartbeatDate)&&void 0!==ut?ut:Vt.lastSentHeartbeatDate,heartbeats:Ee.heartbeats})}})()}add(Ee){var ye=this;return(0,p.Z)(function*(){var ut;if(yield ye._canUseIndexedDBPromise){const Vt=yield ye.read();return st(ye.app,{lastSentHeartbeatDate:null!==(ut=Ee.lastSentHeartbeatDate)&&void 0!==ut?ut:Vt.lastSentHeartbeatDate,heartbeats:[...Vt.heartbeats,...Ee.heartbeats]})}})()}}function me(oe){return(0,be.L)(JSON.stringify({version:2,heartbeats:oe})).length}!function X(oe){Nn(new C.wA("platform-logger",Ee=>new Me(Ee),"PRIVATE")),Nn(new C.wA("heartbeat",Ee=>new ir(Ee),"PRIVATE")),nr(Oe,"0.7.32",oe),nr(Oe,"0.7.32","esm2017"),nr("fire-js","")}("")},4859:(Gt,We,V)=>{V.d(We,{H0:()=>Oe,wA:()=>G});var p=V(5861),C=V(2090);class G{constructor(le,ue,Ce){this.name=le,this.instanceFactory=ue,this.type=Ce,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(le){return this.instantiationMode=le,this}setMultipleInstances(le){return this.multipleInstances=le,this}setServiceProps(le){return this.serviceProps=le,this}setInstanceCreatedCallback(le){return this.onInstanceCreated=le,this}}const be="[DEFAULT]";class we{constructor(le,ue){this.name=le,this.container=ue,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(le){const ue=this.normalizeInstanceIdentifier(le);if(!this.instancesDeferred.has(ue)){const Ce=new C.BH;if(this.instancesDeferred.set(ue,Ce),this.isInitialized(ue)||this.shouldAutoInitialize())try{const yt=this.getOrInitializeService({instanceIdentifier:ue});yt&&Ce.resolve(yt)}catch{}}return this.instancesDeferred.get(ue).promise}getImmediate(le){var ue;const Ce=this.normalizeInstanceIdentifier(le?.identifier),yt=null!==(ue=le?.optional)&&void 0!==ue&&ue;if(!this.isInitialized(Ce)&&!this.shouldAutoInitialize()){if(yt)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:Ce})}catch(ot){if(yt)return null;throw ot}}getComponent(){return this.component}setComponent(le){if(le.name!==this.name)throw Error(`Mismatching Component ${le.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=le,this.shouldAutoInitialize()){if(function Re(ke){return"EAGER"===ke.instantiationMode}(le))try{this.getOrInitializeService({instanceIdentifier:be})}catch{}for(const[ue,Ce]of this.instancesDeferred.entries()){const yt=this.normalizeInstanceIdentifier(ue);try{const ot=this.getOrInitializeService({instanceIdentifier:yt});Ce.resolve(ot)}catch{}}}}clearInstance(le=be){this.instancesDeferred.delete(le),this.instancesOptions.delete(le),this.instances.delete(le)}delete(){var le=this;return(0,p.Z)(function*(){const ue=Array.from(le.instances.values());yield Promise.all([...ue.filter(Ce=>"INTERNAL"in Ce).map(Ce=>Ce.INTERNAL.delete()),...ue.filter(Ce=>"_delete"in Ce).map(Ce=>Ce._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(le=be){return this.instances.has(le)}getOptions(le=be){return this.instancesOptions.get(le)||{}}initialize(le={}){const{options:ue={}}=le,Ce=this.normalizeInstanceIdentifier(le.instanceIdentifier);if(this.isInitialized(Ce))throw Error(`${this.name}(${Ce}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const yt=this.getOrInitializeService({instanceIdentifier:Ce,options:ue});for(const[ot,Ze]of this.instancesDeferred.entries())Ce===this.normalizeInstanceIdentifier(ot)&&Ze.resolve(yt);return yt}onInit(le,ue){var Ce;const yt=this.normalizeInstanceIdentifier(ue),ot=null!==(Ce=this.onInitCallbacks.get(yt))&&void 0!==Ce?Ce:new Set;ot.add(le),this.onInitCallbacks.set(yt,ot);const Ze=this.instances.get(yt);return Ze&&le(Ze,yt),()=>{ot.delete(le)}}invokeOnInitCallbacks(le,ue){const Ce=this.onInitCallbacks.get(ue);if(Ce)for(const yt of Ce)try{yt(le,ue)}catch{}}getOrInitializeService({instanceIdentifier:le,options:ue={}}){let Ce=this.instances.get(le);if(!Ce&&this.component&&(Ce=this.component.instanceFactory(this.container,{instanceIdentifier:(ke=le,ke===be?void 0:ke),options:ue}),this.instances.set(le,Ce),this.instancesOptions.set(le,ue),this.invokeOnInitCallbacks(Ce,le),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,le,Ce)}catch{}var ke;return Ce||null}normalizeInstanceIdentifier(le=be){return this.component?this.component.multipleInstances?le:be:le}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Oe{constructor(le){this.name=le,this.providers=new Map}addComponent(le){const ue=this.getProvider(le.name);if(ue.isComponentSet())throw new Error(`Component ${le.name} has already been registered with ${this.name}`);ue.setComponent(le)}addOrOverwriteComponent(le){this.getProvider(le.name).isComponentSet()&&this.providers.delete(le.name),this.addComponent(le)}getProvider(le){if(this.providers.has(le))return this.providers.get(le);const ue=new we(le,this);return this.providers.set(le,ue),ue}getProviders(){return Array.from(this.providers.values())}}},1877:(Gt,We,V)=>{V.d(We,{Am:()=>ke,Ub:()=>Oe,Yd:()=>Re,in:()=>C});const p=[];var C=(()=>{return(le=C||(C={}))[le.DEBUG=0]="DEBUG",le[le.VERBOSE=1]="VERBOSE",le[le.INFO=2]="INFO",le[le.WARN=3]="WARN",le[le.ERROR=4]="ERROR",le[le.SILENT=5]="SILENT",C;var le})();const G={debug:C.DEBUG,verbose:C.VERBOSE,info:C.INFO,warn:C.WARN,error:C.ERROR,silent:C.SILENT},be=C.INFO,we={[C.DEBUG]:"log",[C.VERBOSE]:"log",[C.INFO]:"info",[C.WARN]:"warn",[C.ERROR]:"error"},Me=(le,ue,...Ce)=>{if(ue<le.logLevel)return;const yt=(new Date).toISOString(),ot=we[ue];if(!ot)throw new Error(`Attempted to log a message with an invalid logType (value: ${ue})`);console[ot](`[${yt}]  ${le.name}:`,...Ce)};class Re{constructor(ue){this.name=ue,this._logLevel=be,this._logHandler=Me,this._userLogHandler=null,p.push(this)}get logLevel(){return this._logLevel}set logLevel(ue){if(!(ue in C))throw new TypeError(`Invalid value "${ue}" assigned to \`logLevel\``);this._logLevel=ue}setLogLevel(ue){this._logLevel="string"==typeof ue?G[ue]:ue}get logHandler(){return this._logHandler}set logHandler(ue){if("function"!=typeof ue)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=ue}get userLogHandler(){return this._userLogHandler}set userLogHandler(ue){this._userLogHandler=ue}debug(...ue){this._userLogHandler&&this._userLogHandler(this,C.DEBUG,...ue),this._logHandler(this,C.DEBUG,...ue)}log(...ue){this._userLogHandler&&this._userLogHandler(this,C.VERBOSE,...ue),this._logHandler(this,C.VERBOSE,...ue)}info(...ue){this._userLogHandler&&this._userLogHandler(this,C.INFO,...ue),this._logHandler(this,C.INFO,...ue)}warn(...ue){this._userLogHandler&&this._userLogHandler(this,C.WARN,...ue),this._logHandler(this,C.WARN,...ue)}error(...ue){this._userLogHandler&&this._userLogHandler(this,C.ERROR,...ue),this._logHandler(this,C.ERROR,...ue)}}function Oe(le){p.forEach(ue=>{ue.setLogLevel(le)})}function ke(le,ue){for(const Ce of p){let yt=null;ue&&ue.level&&(yt=G[ue.level]),Ce.userLogHandler=null===le?null:(ot,Ze,...Ot)=>{const Ke=Ot.map(He=>{if(null==He)return null;if("string"==typeof He)return He;if("number"==typeof He||"boolean"==typeof He)return He.toString();if(He instanceof Error)return He.message;try{return JSON.stringify(He)}catch{return null}}).filter(He=>He).join(" ");Ze>=(yt??ot.logLevel)&&le({level:C[Ze].toLowerCase(),message:Ke,args:Ot,type:ot.name})}}}},8766:(Gt,We,V)=>{V.d(We,{Lj:()=>he,X3:()=>jt});var p=V(5861);let G,be;const Re=new WeakMap,Oe=new WeakMap,ke=new WeakMap,le=new WeakMap,ue=new WeakMap;let ot={get(ae,Fe,ne){if(ae instanceof IDBTransaction){if("done"===Fe)return Oe.get(ae);if("objectStoreNames"===Fe)return ae.objectStoreNames||ke.get(ae);if("store"===Fe)return ne.objectStoreNames[1]?void 0:ne.objectStore(ne.objectStoreNames[0])}return He(ae[Fe])},set:(ae,Fe,ne)=>(ae[Fe]=ne,!0),has:(ae,Fe)=>ae instanceof IDBTransaction&&("done"===Fe||"store"===Fe)||Fe in ae};function Ke(ae){return"function"==typeof ae?function Ot(ae){return ae!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Me(){return be||(be=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(ae)?function(...Fe){return ae.apply(Bt(this),Fe),He(Re.get(this))}:function(...Fe){return He(ae.apply(Bt(this),Fe))}:function(Fe,...ne){const Ie=ae.call(Bt(this),Fe,...ne);return ke.set(Ie,Fe.sort?Fe.sort():[Fe]),He(Ie)}}(ae):(ae instanceof IDBTransaction&&function yt(ae){if(Oe.has(ae))return;const Fe=new Promise((ne,Ie)=>{const de=()=>{ae.removeEventListener("complete",Ne),ae.removeEventListener("error",dt),ae.removeEventListener("abort",dt)},Ne=()=>{ne(),de()},dt=()=>{Ie(ae.error||new DOMException("AbortError","AbortError")),de()};ae.addEventListener("complete",Ne),ae.addEventListener("error",dt),ae.addEventListener("abort",dt)});Oe.set(ae,Fe)}(ae),((ae,Fe)=>Fe.some(ne=>ae instanceof ne))(ae,function we(){return G||(G=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(ae,ot):ae)}function He(ae){if(ae instanceof IDBRequest)return function Ce(ae){const Fe=new Promise((ne,Ie)=>{const de=()=>{ae.removeEventListener("success",Ne),ae.removeEventListener("error",dt)},Ne=()=>{ne(He(ae.result)),de()},dt=()=>{Ie(ae.error),de()};ae.addEventListener("success",Ne),ae.addEventListener("error",dt)});return Fe.then(ne=>{ne instanceof IDBCursor&&Re.set(ne,ae)}).catch(()=>{}),ue.set(Fe,ae),Fe}(ae);if(le.has(ae))return le.get(ae);const Fe=Ke(ae);return Fe!==ae&&(le.set(ae,Fe),ue.set(Fe,ae)),Fe}const Bt=ae=>ue.get(ae);function jt(ae,Fe,{blocked:ne,upgrade:Ie,blocking:de,terminated:Ne}={}){const dt=indexedDB.open(ae,Fe),wt=He(dt);return Ie&&dt.addEventListener("upgradeneeded",Ct=>{Ie(He(dt.result),Ct.oldVersion,Ct.newVersion,He(dt.transaction))}),ne&&dt.addEventListener("blocked",()=>ne()),wt.then(Ct=>{Ne&&Ct.addEventListener("close",()=>Ne()),de&&Ct.addEventListener("versionchange",()=>de())}).catch(()=>{}),wt}function he(ae,{blocked:Fe}={}){const ne=indexedDB.deleteDatabase(ae);return Fe&&ne.addEventListener("blocked",()=>Fe()),He(ne).then(()=>{})}const rt=["get","getKey","getAll","getAllKeys","count"],Je=["put","add","delete","clear"],vt=new Map;function tt(ae,Fe){if(!(ae instanceof IDBDatabase)||Fe in ae||"string"!=typeof Fe)return;if(vt.get(Fe))return vt.get(Fe);const ne=Fe.replace(/FromIndex$/,""),Ie=Fe!==ne,de=Je.includes(ne);if(!(ne in(Ie?IDBIndex:IDBObjectStore).prototype)||!de&&!rt.includes(ne))return;const Ne=function(){var dt=(0,p.Z)(function*(wt,...Ct){const Mt=this.transaction(wt,de?"readwrite":"readonly");let $t=Mt.store;return Ie&&($t=$t.index(Ct.shift())),(yield Promise.all([$t[ne](...Ct),de&&Mt.done]))[0]});return function(Ct){return dt.apply(this,arguments)}}();return vt.set(Fe,Ne),Ne}!function Ze(ae){ot=ae(ot)}(ae=>({...ae,get:(Fe,ne,Ie)=>tt(Fe,ne)||ae.get(Fe,ne,Ie),has:(Fe,ne)=>!!tt(Fe,ne)||ae.has(Fe,ne)}))},5861:(Gt,We,V)=>{function p(G,be,we,Me,Re,Oe,ke){try{var le=G[Oe](ke),ue=le.value}catch(Ce){return void we(Ce)}le.done?be(ue):Promise.resolve(ue).then(Me,Re)}function C(G){return function(){var be=this,we=arguments;return new Promise(function(Me,Re){var Oe=G.apply(be,we);function ke(ue){p(Oe,Me,Re,ke,le,"next",ue)}function le(ue){p(Oe,Me,Re,ke,le,"throw",ue)}ke(void 0)})}}V.d(We,{Z:()=>C})}},Gt=>{Gt(Gt.s=2358)}]);