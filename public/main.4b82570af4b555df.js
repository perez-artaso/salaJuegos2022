"use strict";(self.webpackChunksala_juegos_2022=self.webpackChunksala_juegos_2022||[]).push([[179],{2011:(ot,Se,P)=>{P.d(Se,{Dh:()=>he,GT:()=>de,cc:()=>Me,hO:()=>Le,on:()=>B,pX:()=>re,xv:()=>pe});var f=P(4650),te=P(127),k=P(5813);ot=P.hmd(ot);const oe=["ngOnDestroy"],re=(fe,Ke,nt,Ae={})=>new Proxy(fe,{get:(_e,Ee)=>nt.runOutsideAngular(()=>{var Ue;if(fe[Ee])return!(null===(Ue=Ae?.spy)||void 0===Ue)&&Ue.get&&Ae.spy.get(Ee,fe[Ee]),fe[Ee];if(oe.indexOf(Ee)>-1)return()=>{};const je=Ke.toPromise().then(U=>{const ge=U&&U[Ee];return"function"==typeof ge?ge.bind(U):ge&&ge.then?ge.then(K=>nt.run(()=>K)):nt.run(()=>ge)});return new Proxy(()=>{},{get:(U,ge)=>je[ge],apply:(U,ge,K)=>je.then(ee=>{var ie;const ne=ee&&ee(...K);return!(null===(ie=Ae?.spy)||void 0===ie)&&ie.apply&&Ae.spy.apply(Ee,K,ne),ne})})})}),de=(fe,Ke)=>{Ke.forEach(nt=>{Object.getOwnPropertyNames(nt.prototype||nt).forEach(Ae=>{Object.defineProperty(fe.prototype,Ae,Object.getOwnPropertyDescriptor(nt.prototype||nt,Ae))})})};class le{constructor(Ke){return Ke}}const he=new f.OlP("angularfire2.app.options"),pe=new f.OlP("angularfire2.app.name");function B(fe,Ke,nt){const _e="object"==typeof nt&&nt||{};_e.name=_e.name||"string"==typeof nt&&nt||"[DEFAULT]";const Ue=te.Z.apps.filter(je=>je&&je.name===_e.name)[0]||Ke.runOutsideAngular(()=>te.Z.initializeApp(fe,_e));try{JSON.stringify(fe)!==JSON.stringify(Ue.options)&&$("error",`${Ue.name} Firebase App already initialized with different options${ot.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new le(Ue)}const $=(fe,...Ke)=>{(0,f.X6Q)()&&typeof console<"u"&&console[fe](...Ke)},Q={provide:le,useFactory:B,deps:[he,f.R0b,[new f.FiY,pe]]};let Le=(()=>{class fe{constructor(nt){te.Z.registerVersion("angularfire",k.q4.full,"core"),te.Z.registerVersion("angularfire",k.q4.full,"app-compat"),te.Z.registerVersion("angular",f.q4F.full,nt.toString())}static initializeApp(nt,Ae){return{ngModule:fe,providers:[{provide:he,useValue:nt},{provide:pe,useValue:Ae}]}}}return fe.\u0275fac=function(nt){return new(nt||fe)(f.LFG(f.Lbi))},fe.\u0275mod=f.oAB({type:fe}),fe.\u0275inj=f.cJS({providers:[Q]}),fe})();function Me(fe,Ke,nt,Ae,_e){const[,Ee,Ue]=globalThis.\u0275AngularfireInstanceCache.find(je=>je[0]===fe)||[];if(Ee)return function ve(fe,Ke){try{return fe.toString()===Ke.toString()}catch{return fe===Ke}}(_e,Ue)||(me("error",`${Ke} was already initialized on the ${nt} Firebase App with different settings.${Je?" You may need to reload as Firebase is not HMR aware.":""}`),me("warn",{is:_e,was:Ue})),Ee;{const je=Ae();return globalThis.\u0275AngularfireInstanceCache.push([fe,je,_e]),je}}const Je=!!ot.hot,me=(fe,...Ke)=>{(0,f.X6Q)()&&typeof console<"u"&&console[fe](...Ke)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5813:(ot,Se,P)=>{P.d(Se,{q4:()=>Tr,iC:()=>es,fc:()=>Hl,HU:()=>Mu,vb:()=>zr,JM:()=>ba});var f=P(4650),te=P(5867),k=P(5861),oe=P(9681),re=P(2090),de=P(4859),le=P(1877),he=P(8766);const pe="@firebase/installations",B="0.5.12",Q=`w:${B}`,Le="FIS_v2",Ke=new re.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function nt(D){return D instanceof re.ZR&&D.code.includes("request-failed")}function Ae({projectId:D}){return`https://firebaseinstallations.googleapis.com/v1/projects/${D}/installations`}function _e(D){return{token:D.token,requestStatus:2,expiresIn:ee(D.expiresIn),creationTime:Date.now()}}function Ee(D,C){return Ue.apply(this,arguments)}function Ue(){return(Ue=(0,k.Z)(function*(D,C){const F=(yield C.json()).error;return Ke.create("request-failed",{requestName:D,serverCode:F.code,serverMessage:F.message,serverStatus:F.status})})).apply(this,arguments)}function je({apiKey:D}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":D})}function U(D,{refreshToken:C}){const x=je(D);return x.append("Authorization",function ie(D){return`${Le} ${D}`}(C)),x}function ge(D){return K.apply(this,arguments)}function K(){return(K=(0,k.Z)(function*(D){const C=yield D();return C.status>=500&&C.status<600?D():C})).apply(this,arguments)}function ee(D){return Number(D.replace("s","000"))}function ne(D,C){return Pe.apply(this,arguments)}function Pe(){return(Pe=(0,k.Z)(function*({appConfig:D,heartbeatServiceProvider:C},{fid:x}){const F=Ae(D),X=je(D),ae=C.getImmediate({optional:!0});if(ae){const vt=yield ae.getHeartbeatsHeader();vt&&X.append("x-firebase-client",vt)}const Be={method:"POST",headers:X,body:JSON.stringify({fid:x,authVersion:Le,appId:D.appId,sdkVersion:Q})},at=yield ge(()=>fetch(F,Be));if(at.ok){const vt=yield at.json();return{fid:vt.fid||x,registrationStatus:2,refreshToken:vt.refreshToken,authToken:_e(vt.authToken)}}throw yield Ee("Create Installation",at)})).apply(this,arguments)}function Oe(D){return new Promise(C=>{setTimeout(C,D)})}const Ht=/^[cdef][\w-]{21}$/;function ze(){try{const D=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(D),D[0]=112+D[0]%16;const x=function tn(D){return function ct(D){return btoa(String.fromCharCode(...D)).replace(/\+/g,"-").replace(/\//g,"_")}(D).substr(0,22)}(D);return Ht.test(x)?x:""}catch{return""}}function Sn(D){return`${D.appName}!${D.appId}`}const Wt=new Map;function Zt(D,C){const x=Sn(D);Xt(x,C),function Jo(D,C){const x=function mr(){return!Lr&&"BroadcastChannel"in self&&(Lr=new BroadcastChannel("[Firebase] FID Change"),Lr.onmessage=D=>{Xt(D.data.key,D.data.fid)}),Lr}();x&&x.postMessage({key:D,fid:C}),function Vr(){0===Wt.size&&Lr&&(Lr.close(),Lr=null)}()}(x,C)}function Xt(D,C){const x=Wt.get(D);if(x)for(const F of x)F(C)}let Lr=null;const Ur="firebase-installations-store";let hi=null;function wo(){return hi||(hi=(0,he.X3)("firebase-installations-database",1,{upgrade:(D,C)=>{0===C&&D.createObjectStore(Ur)}})),hi}function We(D,C){return Br.apply(this,arguments)}function Br(){return(Br=(0,k.Z)(function*(D,C){const x=Sn(D),X=(yield wo()).transaction(Ur,"readwrite"),ae=X.objectStore(Ur),De=yield ae.get(x);return yield ae.put(C,x),yield X.done,(!De||De.fid!==C.fid)&&Zt(D,C.fid),C})).apply(this,arguments)}function ji(D){return An.apply(this,arguments)}function An(){return(An=(0,k.Z)(function*(D){const C=Sn(D),F=(yield wo()).transaction(Ur,"readwrite");yield F.objectStore(Ur).delete(C),yield F.done})).apply(this,arguments)}function fi(D,C){return ti.apply(this,arguments)}function ti(){return(ti=(0,k.Z)(function*(D,C){const x=Sn(D),X=(yield wo()).transaction(Ur,"readwrite"),ae=X.objectStore(Ur),De=yield ae.get(x),Be=C(De);return void 0===Be?yield ae.delete(x):yield ae.put(Be,x),yield X.done,Be&&(!De||De.fid!==Be.fid)&&Zt(D,Be.fid),Be})).apply(this,arguments)}function xn(D){return jn.apply(this,arguments)}function jn(){return(jn=(0,k.Z)(function*(D){let C;const x=yield fi(D.appConfig,F=>{const X=ln(F),ae=ft(D,X);return C=ae.registrationPromise,ae.installationEntry});return""===x.fid?{installationEntry:yield C}:{installationEntry:x,registrationPromise:C}})).apply(this,arguments)}function ln(D){return Dt(D||{fid:ze(),registrationStatus:0})}function ft(D,C){if(0===C.registrationStatus){if(!navigator.onLine)return{installationEntry:C,registrationPromise:Promise.reject(Ke.create("app-offline"))};const x={fid:C.fid,registrationStatus:1,registrationTime:Date.now()},F=function st(D,C){return nn.apply(this,arguments)}(D,x);return{installationEntry:x,registrationPromise:F}}return 1===C.registrationStatus?{installationEntry:C,registrationPromise:Xn(D)}:{installationEntry:C}}function nn(){return(nn=(0,k.Z)(function*(D,C){try{const x=yield ne(D,C);return We(D.appConfig,x)}catch(x){throw nt(x)&&409===x.customData.serverCode?yield ji(D.appConfig):yield We(D.appConfig,{fid:C.fid,registrationStatus:0}),x}})).apply(this,arguments)}function Xn(D){return er.apply(this,arguments)}function er(){return(er=(0,k.Z)(function*(D){let C=yield Ir(D.appConfig);for(;1===C.registrationStatus;)yield Oe(100),C=yield Ir(D.appConfig);if(0===C.registrationStatus){const{installationEntry:x,registrationPromise:F}=yield xn(D);return F||x}return C})).apply(this,arguments)}function Ir(D){return fi(D,C=>{if(!C)throw Ke.create("installation-not-found");return Dt(C)})}function Dt(D){return function $i(D){return 1===D.registrationStatus&&D.registrationTime+1e4<Date.now()}(D)?{fid:D.fid,registrationStatus:0}:D}function Kt(D,C){return pi.apply(this,arguments)}function pi(){return(pi=(0,k.Z)(function*({appConfig:D,heartbeatServiceProvider:C},x){const F=Gt(D,x),X=U(D,x),ae=C.getImmediate({optional:!0});if(ae){const vt=yield ae.getHeartbeatsHeader();vt&&X.append("x-firebase-client",vt)}const Be={method:"POST",headers:X,body:JSON.stringify({installation:{sdkVersion:Q,appId:D.appId}})},at=yield ge(()=>fetch(F,Be));if(at.ok)return _e(yield at.json());throw yield Ee("Generate Auth Token",at)})).apply(this,arguments)}function Gt(D,{fid:C}){return`${Ae(D)}/${C}/authTokens:generate`}function Z(D){return j.apply(this,arguments)}function j(){return(j=(0,k.Z)(function*(D,C=!1){let x;const F=yield fi(D.appConfig,ae=>{if(!rt(ae))throw Ke.create("not-registered");const De=ae.authToken;if(!C&&sn(De))return ae;if(1===De.requestStatus)return x=V(D,C),ae;{if(!navigator.onLine)throw Ke.create("app-offline");const Be=$n(ae);return x=be(D,Be),Be}});return x?yield x:F.authToken})).apply(this,arguments)}function V(D,C){return H.apply(this,arguments)}function H(){return(H=(0,k.Z)(function*(D,C){let x=yield q(D.appConfig);for(;1===x.authToken.requestStatus;)yield Oe(100),x=yield q(D.appConfig);const F=x.authToken;return 0===F.requestStatus?Z(D,C):F})).apply(this,arguments)}function q(D){return fi(D,C=>{if(!rt(C))throw Ke.create("not-registered");return function Pt(D){return 1===D.requestStatus&&D.requestTime+1e4<Date.now()}(C.authToken)?Object.assign(Object.assign({},C),{authToken:{requestStatus:0}}):C})}function be(D,C){return Ve.apply(this,arguments)}function Ve(){return(Ve=(0,k.Z)(function*(D,C){try{const x=yield Kt(D,C),F=Object.assign(Object.assign({},C),{authToken:x});return yield We(D.appConfig,F),x}catch(x){if(!nt(x)||401!==x.customData.serverCode&&404!==x.customData.serverCode){const F=Object.assign(Object.assign({},C),{authToken:{requestStatus:0}});yield We(D.appConfig,F)}else yield ji(D.appConfig);throw x}})).apply(this,arguments)}function rt(D){return void 0!==D&&2===D.registrationStatus}function sn(D){return 2===D.requestStatus&&!function Yt(D){const C=Date.now();return C<D.creationTime||D.creationTime+D.expiresIn<C+36e5}(D)}function $n(D){const C={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},D),{authToken:C})}function dn(){return(dn=(0,k.Z)(function*(D){const C=D,{installationEntry:x,registrationPromise:F}=yield xn(C);return F?F.catch(console.error):Z(C).catch(console.error),x.fid})).apply(this,arguments)}function Ci(){return(Ci=(0,k.Z)(function*(D,C=!1){const x=D;return yield br(x),(yield Z(x,C)).token})).apply(this,arguments)}function br(D){return On.apply(this,arguments)}function On(){return(On=(0,k.Z)(function*(D){const{registrationPromise:C}=yield xn(D);C&&(yield C)})).apply(this,arguments)}function _s(D){return Ke.create("missing-app-config-values",{valueName:D})}const Ws="installations",fn=D=>{const C=D.getProvider("app").getImmediate(),x=function hn(D){if(!D||!D.options)throw _s("App Configuration");if(!D.name)throw _s("App Name");const C=["projectId","apiKey","appId"];for(const x of C)if(!D.options[x])throw _s(x);return{appName:D.name,projectId:D.options.projectId,apiKey:D.options.apiKey,appId:D.options.appId}}(C);return{app:C,appConfig:x,heartbeatServiceProvider:(0,oe._getProvider)(C,"heartbeat"),_delete:()=>Promise.resolve()}},Zs=D=>{const C=D.getProvider("app").getImmediate(),x=(0,oe._getProvider)(C,Ws).getImmediate();return{getId:()=>function Mt(D){return dn.apply(this,arguments)}(x),getToken:X=>function Nn(D){return Ci.apply(this,arguments)}(x,X)}};(function fl(){(0,oe._registerComponent)(new de.wA(Ws,fn,"PUBLIC")),(0,oe._registerComponent)(new de.wA("installations-internal",Zs,"PRIVATE"))})(),(0,oe.registerVersion)(pe,B),(0,oe.registerVersion)(pe,B,"esm2017");const Ti="@firebase/remote-config",Pn=new re.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Nh{constructor(C,x,F,X){this.client=C,this.storage=x,this.storageCache=F,this.logger=X}isCachedDataFresh(C,x){if(!x)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const F=Date.now()-x,X=F<=C;return this.logger.debug(`Config fetch cache check. Cache age millis: ${F}. Cache max age millis (minimumFetchIntervalMillis setting): ${C}. Is cache hit: ${X}.`),X}fetch(C){var x=this;return(0,k.Z)(function*(){const[F,X]=yield Promise.all([x.storage.getLastSuccessfulFetchTimestampMillis(),x.storage.getLastSuccessfulFetchResponse()]);if(X&&x.isCachedDataFresh(C.cacheMaxAgeMillis,F))return X;C.eTag=X&&X.eTag;const ae=yield x.client.fetch(C),De=[x.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===ae.status&&De.push(x.storage.setLastSuccessfulFetchResponse(ae)),yield Promise.all(De),ae})()}}function _l(D=navigator){return D.languages&&D.languages[0]||D.language}class vl{constructor(C,x,F,X,ae,De){this.firebaseInstallations=C,this.sdkVersion=x,this.namespace=F,this.projectId=X,this.apiKey=ae,this.appId=De}fetch(C){var x=this;return(0,k.Z)(function*(){var F,X,ae;const[De,Be]=yield Promise.all([x.firebaseInstallations.getId(),x.firebaseInstallations.getToken()]),vt=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${x.projectId}/namespaces/${x.namespace}:fetch?key=${x.apiKey}`,St={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":C.eTag||"*"},dt={sdk_version:x.sdkVersion,app_instance_id:De,app_instance_id_token:Be,app_id:x.appId,language_code:_l()},pn={method:"POST",headers:St,body:JSON.stringify(dt)},sr=fetch(vt,pn),Ms=new Promise((qr,Ns)=>{C.signal.addEventListener(()=>{const Hh=new Error("The operation was aborted.");Hh.name="AbortError",Ns(Hh)})});let ts;try{yield Promise.race([sr,Ms]),ts=yield sr}catch(qr){let Ns="fetch-client-network";throw"AbortError"===(null===(F=qr)||void 0===F?void 0:F.name)&&(Ns="fetch-timeout"),Pn.create(Ns,{originalErrorMessage:null===(X=qr)||void 0===X?void 0:X.message})}let Rs=ts.status;const ho=ts.headers.get("ETag")||void 0;let ns,Dn;if(200===ts.status){let qr;try{qr=yield ts.json()}catch(Ns){throw Pn.create("fetch-client-parse",{originalErrorMessage:null===(ae=Ns)||void 0===ae?void 0:ae.message})}ns=qr.entries,Dn=qr.state}if("INSTANCE_STATE_UNSPECIFIED"===Dn?Rs=500:"NO_CHANGE"===Dn?Rs=304:("NO_TEMPLATE"===Dn||"EMPTY_CONFIG"===Dn)&&(ns={}),304!==Rs&&200!==Rs)throw Pn.create("fetch-status",{httpStatus:Rs});return{status:Rs,eTag:ho,config:ns}})()}}class $p{constructor(C,x){this.client=C,this.storage=x}fetch(C){var x=this;return(0,k.Z)(function*(){const F=(yield x.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return x.attemptFetch(C,F)})()}attemptFetch(C,{throttleEndTimeMillis:x,backoffCount:F}){var X=this;return(0,k.Z)(function*(){yield function Gn(D,C){return new Promise((x,F)=>{const X=Math.max(C-Date.now(),0),ae=setTimeout(x,X);D.addEventListener(()=>{clearTimeout(ae),F(Pn.create("fetch-throttle",{throttleEndTimeMillis:C}))})})}(C.signal,x);try{const ae=yield X.client.fetch(C);return yield X.storage.deleteThrottleMetadata(),ae}catch(ae){if(!function Wc(D){if(!(D instanceof re.ZR&&D.customData))return!1;const C=Number(D.customData.httpStatus);return 429===C||500===C||503===C||504===C}(ae))throw ae;const De={throttleEndTimeMillis:Date.now()+(0,re.$s)(F),backoffCount:F+1};return yield X.storage.setThrottleMetadata(De),X.attemptFetch(C,De)}})()}}class Zc{constructor(C,x,F,X,ae){this.app=C,this._client=x,this._storageCache=F,this._storage=X,this._logger=ae,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function wl(D,C){var x;const F=D.target.error||void 0;return Pn.create(C,{originalErrorMessage:F&&(null===(x=F)||void 0===x?void 0:x.message)})}const Is="app_namespace_store";class qp{constructor(C,x,F,X=function zp(){return new Promise((D,C)=>{var x;try{const F=indexedDB.open("firebase_remote_config",1);F.onerror=X=>{C(wl(X,"storage-open"))},F.onsuccess=X=>{D(X.target.result)},F.onupgradeneeded=X=>{0===X.oldVersion&&X.target.result.createObjectStore(Is,{keyPath:"compositeKey"})}}catch(F){C(Pn.create("storage-open",{originalErrorMessage:null===(x=F)||void 0===x?void 0:x.message}))}})}()){this.appId=C,this.appName=x,this.namespace=F,this.openDbPromise=X}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(C){return this.set("last_fetch_status",C)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(C){return this.set("last_successful_fetch_timestamp_millis",C)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(C){return this.set("last_successful_fetch_response",C)}getActiveConfig(){return this.get("active_config")}setActiveConfig(C){return this.set("active_config",C)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(C){return this.set("active_config_etag",C)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(C){return this.set("throttle_metadata",C)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(C){var x=this;return(0,k.Z)(function*(){const F=yield x.openDbPromise;return new Promise((X,ae)=>{var De;const at=F.transaction([Is],"readonly").objectStore(Is),vt=x.createCompositeKey(C);try{const St=at.get(vt);St.onerror=dt=>{ae(wl(dt,"storage-get"))},St.onsuccess=dt=>{const pn=dt.target.result;X(pn?pn.value:void 0)}}catch(St){ae(Pn.create("storage-get",{originalErrorMessage:null===(De=St)||void 0===De?void 0:De.message}))}})})()}set(C,x){var F=this;return(0,k.Z)(function*(){const X=yield F.openDbPromise;return new Promise((ae,De)=>{var Be;const vt=X.transaction([Is],"readwrite").objectStore(Is),St=F.createCompositeKey(C);try{const dt=vt.put({compositeKey:St,value:x});dt.onerror=pn=>{De(wl(pn,"storage-set"))},dt.onsuccess=()=>{ae()}}catch(dt){De(Pn.create("storage-set",{originalErrorMessage:null===(Be=dt)||void 0===Be?void 0:Be.message}))}})})()}delete(C){var x=this;return(0,k.Z)(function*(){const F=yield x.openDbPromise;return new Promise((X,ae)=>{var De;const at=F.transaction([Is],"readwrite").objectStore(Is),vt=x.createCompositeKey(C);try{const St=at.delete(vt);St.onerror=dt=>{ae(wl(dt,"storage-delete"))},St.onsuccess=()=>{X()}}catch(St){ae(Pn.create("storage-delete",{originalErrorMessage:null===(De=St)||void 0===De?void 0:De.message}))}})})()}createCompositeKey(C){return[this.appId,this.appName,this.namespace,C].join()}}class Yc{constructor(C){this.storage=C}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var C=this;return(0,k.Z)(function*(){const x=C.storage.getLastFetchStatus(),F=C.storage.getLastSuccessfulFetchTimestampMillis(),X=C.storage.getActiveConfig(),ae=yield x;ae&&(C.lastFetchStatus=ae);const De=yield F;De&&(C.lastSuccessfulFetchTimestampMillis=De);const Be=yield X;Be&&(C.activeConfig=Be)})()}setLastFetchStatus(C){return this.lastFetchStatus=C,this.storage.setLastFetchStatus(C)}setLastSuccessfulFetchTimestampMillis(C){return this.lastSuccessfulFetchTimestampMillis=C,this.storage.setLastSuccessfulFetchTimestampMillis(C)}setActiveConfig(C){return this.activeConfig=C,this.storage.setActiveConfig(C)}}function Ja(){return Oh.apply(this,arguments)}function Oh(){return(Oh=(0,k.Z)(function*(){if(!(0,re.hl)())return!1;try{return yield(0,re.eu)()}catch{return!1}})).apply(this,arguments)}!function bs(){(0,oe._registerComponent)(new de.wA("remote-config",function D(C,{instanceIdentifier:x}){const F=C.getProvider("app").getImmediate(),X=C.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw Pn.create("registration-window");if(!(0,re.hl)())throw Pn.create("indexed-db-unavailable");const{projectId:ae,apiKey:De,appId:Be}=F.options;if(!ae)throw Pn.create("registration-project-id");if(!De)throw Pn.create("registration-api-key");if(!Be)throw Pn.create("registration-app-id");const at=new qp(Be,F.name,x=x||"firebase"),vt=new Yc(at),St=new le.Yd(Ti);St.logLevel=le.in.ERROR;const dt=new vl(X,oe.SDK_VERSION,x,ae,De,Be),pn=new $p(dt,at),sr=new Nh(pn,at,vt,St),Ms=new Zc(F,sr,vt,at,St);return function tr(D){const C=(0,re.m9)(D);C._initializePromise||(C._initializePromise=C._storageCache.loadFromStorage().then(()=>{C._isInitializationComplete=!0}))}(Ms),Ms},"PUBLIC").setMultipleInstances(!0)),(0,oe.registerVersion)(Ti,"0.3.11"),(0,oe.registerVersion)(Ti,"0.3.11","esm2017")}();const Si="/firebase-messaging-sw.js",Gi="/firebase-cloud-messaging-push-scope",zi="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",na="google.c.a.c_id",Xa="google.c.a.c_l",El="google.c.a.ts",kh="google.c.a.e";var qi=(()=>{return(D=qi||(qi={})).PUSH_RECEIVED="push-received",D.NOTIFICATION_CLICKED="notification-clicked",qi;var D})();function ri(D){const C=new Uint8Array(D);return btoa(String.fromCharCode(...C)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function jr(D){const x=(D+"=".repeat((4-D.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),F=atob(x),X=new Uint8Array(F.length);for(let ae=0;ae<F.length;++ae)X[ae]=F.charCodeAt(ae);return X}const Io="fcm_token_details_db",hr="fcm_token_object_Store";function Ph(D){return Fh.apply(this,arguments)}function Fh(){return Fh=(0,k.Z)(function*(D){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(ae=>ae.name).includes(Io))return null;let C=null;return(yield(0,he.X3)(Io,5,{upgrade:(F=(0,k.Z)(function*(X,ae,De,Be){var at;if(ae<2||!X.objectStoreNames.contains(hr))return;const vt=Be.objectStore(hr),St=yield vt.index("fcmSenderId").get(D);if(yield vt.clear(),St)if(2===ae){const dt=St;if(!dt.auth||!dt.p256dh||!dt.endpoint)return;C={token:dt.fcmToken,createTime:null!==(at=dt.createTime)&&void 0!==at?at:Date.now(),subscriptionOptions:{auth:dt.auth,p256dh:dt.p256dh,endpoint:dt.endpoint,swScope:dt.swScope,vapidKey:"string"==typeof dt.vapidKey?dt.vapidKey:ri(dt.vapidKey)}}}else if(3===ae){const dt=St;C={token:dt.fcmToken,createTime:dt.createTime,subscriptionOptions:{auth:ri(dt.auth),p256dh:ri(dt.p256dh),endpoint:dt.endpoint,swScope:dt.swScope,vapidKey:ri(dt.vapidKey)}}}else if(4===ae){const dt=St;C={token:dt.fcmToken,createTime:dt.createTime,subscriptionOptions:{auth:ri(dt.auth),p256dh:ri(dt.p256dh),endpoint:dt.endpoint,swScope:dt.swScope,vapidKey:ri(dt.vapidKey)}}}}),function(ae,De,Be,at){return F.apply(this,arguments)})})).close(),yield(0,he.Lj)(Io),yield(0,he.Lj)("fcm_vapid_details_db"),yield(0,he.Lj)("undefined"),vn(C)?C:null;var F}),Fh.apply(this,arguments)}function vn(D){if(!D||!D.subscriptionOptions)return!1;const{subscriptionOptions:C}=D;return"number"==typeof D.createTime&&D.createTime>0&&"string"==typeof D.token&&D.token.length>0&&"string"==typeof C.auth&&C.auth.length>0&&"string"==typeof C.p256dh&&C.p256dh.length>0&&"string"==typeof C.endpoint&&C.endpoint.length>0&&"string"==typeof C.swScope&&C.swScope.length>0&&"string"==typeof C.vapidKey&&C.vapidKey.length>0}const ii="firebase-messaging-store";let Cr=null;function tu(){return Cr||(Cr=(0,he.X3)("firebase-messaging-database",1,{upgrade:(D,C)=>{0===C&&D.createObjectStore(ii)}})),Cr}function Qs(D){return Wi.apply(this,arguments)}function Wi(){return(Wi=(0,k.Z)(function*(D){const C=yi(D),F=yield(yield tu()).transaction(ii).objectStore(ii).get(C);if(F)return F;{const X=yield Ph(D.appConfig.senderId);if(X)return yield jt(D,X),X}})).apply(this,arguments)}function jt(D,C){return ia.apply(this,arguments)}function ia(){return(ia=(0,k.Z)(function*(D,C){const x=yi(D),X=(yield tu()).transaction(ii,"readwrite");return yield X.objectStore(ii).put(C,x),yield X.done,C})).apply(this,arguments)}function Js(D){return nu.apply(this,arguments)}function nu(){return(nu=(0,k.Z)(function*(D){const C=yi(D),F=(yield tu()).transaction(ii,"readwrite");yield F.objectStore(ii).delete(C),yield F.done})).apply(this,arguments)}function yi({appConfig:D}){return D.appId}const mn=new re.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Ct(D,C){return iu.apply(this,arguments)}function iu(){return(iu=(0,k.Z)(function*(D,C){var x;const F=yield bl(D),X=Te(C),ae={method:"POST",headers:F,body:JSON.stringify(X)};let De;try{De=yield(yield fetch(Zi(D.appConfig),ae)).json()}catch(Be){throw mn.create("token-subscribe-failed",{errorInfo:null===(x=Be)||void 0===x?void 0:x.toString()})}if(De.error)throw mn.create("token-subscribe-failed",{errorInfo:De.error.message});if(!De.token)throw mn.create("token-subscribe-no-token");return De.token})).apply(this,arguments)}function Vh(D,C){return su.apply(this,arguments)}function su(){return(su=(0,k.Z)(function*(D,C){var x;const F=yield bl(D),X=Te(C.subscriptionOptions),ae={method:"PATCH",headers:F,body:JSON.stringify(X)};let De;try{De=yield(yield fetch(`${Zi(D.appConfig)}/${C.token}`,ae)).json()}catch(Be){throw mn.create("token-update-failed",{errorInfo:null===(x=Be)||void 0===x?void 0:x.toString()})}if(De.error)throw mn.create("token-update-failed",{errorInfo:De.error.message});if(!De.token)throw mn.create("token-update-no-token");return De.token})).apply(this,arguments)}function ou(D,C){return Il.apply(this,arguments)}function Il(){return(Il=(0,k.Z)(function*(D,C){var x;const X={method:"DELETE",headers:yield bl(D)};try{const De=yield(yield fetch(`${Zi(D.appConfig)}/${C}`,X)).json();if(De.error)throw mn.create("token-unsubscribe-failed",{errorInfo:De.error.message})}catch(ae){throw mn.create("token-unsubscribe-failed",{errorInfo:null===(x=ae)||void 0===x?void 0:x.toString()})}})).apply(this,arguments)}function Zi({projectId:D}){return`https://fcmregistrations.googleapis.com/v1/projects/${D}/registrations`}function bl(D){return sa.apply(this,arguments)}function sa(){return(sa=(0,k.Z)(function*({appConfig:D,installations:C}){const x=yield C.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":D.apiKey,"x-goog-firebase-installations-auth":`FIS ${x}`})})).apply(this,arguments)}function Te({p256dh:D,auth:C,endpoint:x,vapidKey:F}){const X={web:{endpoint:x,auth:C,p256dh:D}};return F!==zi&&(X.web.applicationPubKey=F),X}const Ft=6048e5;function au(D){return uu.apply(this,arguments)}function uu(){return(uu=(0,k.Z)(function*(D){const C=yield Dl(D.swRegistration,D.vapidKey),x={vapidKey:D.vapidKey,swScope:D.swRegistration.scope,endpoint:C.endpoint,auth:ri(C.getKey("auth")),p256dh:ri(C.getKey("p256dh"))},F=yield Qs(D.firebaseDependencies);if(F){if(ed(F.subscriptionOptions,x))return Date.now()>=F.createTime+Ft?bo(D,{token:F.token,createTime:Date.now(),subscriptionOptions:x}):F.token;try{yield ou(D.firebaseDependencies,F.token)}catch(X){console.warn(X)}return oa(D.firebaseDependencies,x)}return oa(D.firebaseDependencies,x)})).apply(this,arguments)}function wn(D){return lu.apply(this,arguments)}function lu(){return(lu=(0,k.Z)(function*(D){const C=yield Qs(D.firebaseDependencies);C&&(yield ou(D.firebaseDependencies,C.token),yield Js(D.firebaseDependencies));const x=yield D.swRegistration.pushManager.getSubscription();return!x||x.unsubscribe()})).apply(this,arguments)}function bo(D,C){return si.apply(this,arguments)}function si(){return(si=(0,k.Z)(function*(D,C){try{const x=yield Vh(D.firebaseDependencies,C),F=Object.assign(Object.assign({},C),{token:x,createTime:Date.now()});return yield jt(D.firebaseDependencies,F),x}catch(x){throw yield wn(D),x}})).apply(this,arguments)}function oa(D,C){return aa.apply(this,arguments)}function aa(){return(aa=(0,k.Z)(function*(D,C){const F={token:yield Ct(D,C),createTime:Date.now(),subscriptionOptions:C};return yield jt(D,F),F.token})).apply(this,arguments)}function Dl(D,C){return Cl.apply(this,arguments)}function Cl(){return(Cl=(0,k.Z)(function*(D,C){return(yield D.pushManager.getSubscription())||D.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:jr(C)})})).apply(this,arguments)}function ed(D,C){return C.vapidKey===D.vapidKey&&C.endpoint===D.endpoint&&C.auth===D.auth&&C.p256dh===D.p256dh}function Xs(D){const C={from:D.from,collapseKey:D.collapse_key,messageId:D.fcmMessageId};return function En(D,C){if(!C.notification)return;D.notification={};const x=C.notification.title;x&&(D.notification.title=x);const F=C.notification.body;F&&(D.notification.body=F);const X=C.notification.image;X&&(D.notification.image=X)}(C,D),function Ai(D,C){!C.data||(D.data=C.data)}(C,D),function Tl(D,C){var x,F,X,ae,De;if(!(C.fcmOptions||null!==(x=C.notification)&&void 0!==x&&x.click_action))return;D.fcmOptions={};const Be=null!==(X=null===(F=C.fcmOptions)||void 0===F?void 0:F.link)&&void 0!==X?X:null===(ae=C.notification)||void 0===ae?void 0:ae.click_action;Be&&(D.fcmOptions.link=Be);const at=null===(De=C.fcmOptions)||void 0===De?void 0:De.analytics_label;at&&(D.fcmOptions.analyticsLabel=at)}(C,D),C}function eo(D){return"object"==typeof D&&!!D&&na in D}function Ki(D,C){const x=[];for(let F=0;F<D.length;F++)x.push(D.charAt(F)),F<C.length&&x.push(C.charAt(F));return x.join("")}function ua(D){return mn.create("missing-app-config-values",{valueName:D})}Ki("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Ki("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Zp{constructor(C,x,F){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const X=function Wp(D){if(!D||!D.options)throw ua("App Configuration Object");if(!D.name)throw ua("App Name");const C=["projectId","apiKey","appId","messagingSenderId"],{options:x}=D;for(const F of C)if(!x[F])throw ua(F);return{appName:D.name,projectId:x.projectId,apiKey:x.apiKey,appId:x.appId,senderId:x.messagingSenderId}}(C);this.firebaseDependencies={app:C,appConfig:X,installations:x,analyticsProvider:F}}_delete(){return Promise.resolve()}}function Sl(D){return cu.apply(this,arguments)}function cu(){return(cu=(0,k.Z)(function*(D){var C;try{D.swRegistration=yield navigator.serviceWorker.register(Si,{scope:Gi}),D.swRegistration.update().catch(()=>{})}catch(x){throw mn.create("failed-service-worker-registration",{browserErrorMessage:null===(C=x)||void 0===C?void 0:C.message})}})).apply(this,arguments)}function la(D,C){return Al.apply(this,arguments)}function Al(){return(Al=(0,k.Z)(function*(D,C){if(!C&&!D.swRegistration&&(yield Sl(D)),C||!D.swRegistration){if(!(C instanceof ServiceWorkerRegistration))throw mn.create("invalid-sw-registration");D.swRegistration=C}})).apply(this,arguments)}function ca(D,C){return xl.apply(this,arguments)}function xl(){return(xl=(0,k.Z)(function*(D,C){C?D.vapidKey=C:D.vapidKey||(D.vapidKey=zi)})).apply(this,arguments)}function hu(){return(hu=(0,k.Z)(function*(D,C){if(!navigator)throw mn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw mn.create("permission-blocked");return yield ca(D,C?.vapidKey),yield la(D,C?.serviceWorkerRegistration),au(D)})).apply(this,arguments)}function Ml(D,C,x){return Rl.apply(this,arguments)}function Rl(){return(Rl=(0,k.Z)(function*(D,C,x){const F=Nl(C);(yield D.firebaseDependencies.analyticsProvider.get()).logEvent(F,{message_id:x[na],message_name:x[Xa],message_time:x[El],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Nl(D){switch(D){case qi.NOTIFICATION_CLICKED:return"notification_open";case qi.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function to(){return(to=(0,k.Z)(function*(D,C){const x=C.data;if(!x.isFirebaseMessaging)return;D.onMessageHandler&&x.messageType===qi.PUSH_RECEIVED&&("function"==typeof D.onMessageHandler?D.onMessageHandler(Xs(x)):D.onMessageHandler.next(Xs(x)));const F=x.data;eo(F)&&"1"===F[kh]&&(yield Ml(D,x.messageType,F))})).apply(this,arguments)}const no="@firebase/messaging",zn=D=>{const C=new Zp(D.getProvider("app").getImmediate(),D.getProvider("installations-internal").getImmediate(),D.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",x=>function td(D,C){return to.apply(this,arguments)}(C,x)),C},$r=D=>{const C=D.getProvider("messaging").getImmediate();return{getToken:F=>function du(D,C){return hu.apply(this,arguments)}(C,F)}};function nd(){return Ol.apply(this,arguments)}function Ol(){return(Ol=(0,k.Z)(function*(){try{yield(0,re.eu)()}catch{return!1}return typeof window<"u"&&(0,re.hl)()&&(0,re.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function cn(){(0,oe._registerComponent)(new de.wA("messaging",zn,"PUBLIC")),(0,oe._registerComponent)(new de.wA("messaging-internal",$r,"PRIVATE")),(0,oe.registerVersion)(no,"0.9.16"),(0,oe.registerVersion)(no,"0.9.16","esm2017")}();const To="analytics",sd="firebase_id",ro="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",gu="https://www.googletagmanager.com/gtag/js",In=new le.Yd("@firebase/analytics");function mu(D){return Promise.all(D.map(C=>C.catch(x=>x)))}function yu(D,C){const x=document.createElement("script");x.src=`${gu}?l=${D}&id=${C}`,x.async=!0,document.head.appendChild(x)}function Bh(D,C,x,F,X,ae){return So.apply(this,arguments)}function So(){return(So=(0,k.Z)(function*(D,C,x,F,X,ae){const De=F[X];try{if(De)yield C[De];else{const at=(yield mu(x)).find(vt=>vt.measurementId===X);at&&(yield C[at.appId])}}catch(Be){In.error(Be)}D("config",X,ae)})).apply(this,arguments)}function Ao(D,C,x,F,X){return io.apply(this,arguments)}function io(){return(io=(0,k.Z)(function*(D,C,x,F,X){try{let ae=[];if(X&&X.send_to){let De=X.send_to;Array.isArray(De)||(De=[De]);const Be=yield mu(x);for(const at of De){const vt=Be.find(dt=>dt.measurementId===at),St=vt&&C[vt.appId];if(!St){ae=[];break}ae.push(St)}}0===ae.length&&(ae=Object.values(C)),yield Promise.all(ae),D("event",F,X||{})}catch(ae){In.error(ae)}})).apply(this,arguments)}function ad(){const D=window.document.getElementsByTagName("script");for(const C of Object.values(D))if(C.src&&C.src.includes(gu))return C;return null}const rr=new re.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),pa=new class xi{constructor(C={},x=1e3){this.throttleMetadata=C,this.intervalMillis=x}getThrottleMetadata(C){return this.throttleMetadata[C]}setThrottleMetadata(C,x){this.throttleMetadata[C]=x}deleteThrottleMetadata(C){delete this.throttleMetadata[C]}};function ld(D){return new Headers({Accept:"application/json","x-goog-api-key":D})}function ga(D){return Fl.apply(this,arguments)}function Fl(){return(Fl=(0,k.Z)(function*(D){var C;const{appId:x,apiKey:F}=D,X={method:"GET",headers:ld(F)},ae=ro.replace("{app-id}",x),De=yield fetch(ae,X);if(200!==De.status&&304!==De.status){let Be="";try{const at=yield De.json();null!==(C=at.error)&&void 0!==C&&C.message&&(Be=at.error.message)}catch{}throw rr.create("config-fetch-failed",{httpStatus:De.status,responseMessage:Be})}return De.json()})).apply(this,arguments)}function Mn(D){return _i.apply(this,arguments)}function _i(){return(_i=(0,k.Z)(function*(D,C=pa,x){const{appId:F,apiKey:X,measurementId:ae}=D.options;if(!F)throw rr.create("no-app-id");if(!X){if(ae)return{measurementId:ae,appId:F};throw rr.create("no-api-key")}const De=C.getThrottleMetadata(F)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Be=new Eu;return setTimeout((0,k.Z)(function*(){Be.abort()}),void 0!==x?x:6e4),vu({appId:F,apiKey:X,measurementId:ae},De,Be,C)})).apply(this,arguments)}function vu(D,C,x){return so.apply(this,arguments)}function so(){return(so=(0,k.Z)(function*(D,{throttleEndTimeMillis:C,backoffCount:x},F,X=pa){var ae,De;const{appId:Be,measurementId:at}=D;try{yield ma(F,C)}catch(vt){if(at)return In.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${at} provided in the "measurementId" field in the local Firebase config. [${null===(ae=vt)||void 0===ae?void 0:ae.message}]`),{appId:Be,measurementId:at};throw vt}try{const vt=yield ga(D);return X.deleteThrottleMetadata(Be),vt}catch(vt){const St=vt;if(!wu(St)){if(X.deleteThrottleMetadata(Be),at)return In.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${at} provided in the "measurementId" field in the local Firebase config. [${St?.message}]`),{appId:Be,measurementId:at};throw vt}const dt=503===Number(null===(De=St?.customData)||void 0===De?void 0:De.httpStatus)?(0,re.$s)(x,X.intervalMillis,30):(0,re.$s)(x,X.intervalMillis),pn={throttleEndTimeMillis:Date.now()+dt,backoffCount:x+1};return X.setThrottleMetadata(Be,pn),In.debug(`Calling attemptFetch again in ${dt} millis`),vu(D,pn,F,X)}})).apply(this,arguments)}function ma(D,C){return new Promise((x,F)=>{const X=Math.max(C-Date.now(),0),ae=setTimeout(x,X);D.addEventListener(()=>{clearTimeout(ae),F(rr.create("fetch-throttle",{throttleEndTimeMillis:C}))})})}function wu(D){if(!(D instanceof re.ZR&&D.customData))return!1;const C=Number(D.customData.httpStatus);return 429===C||500===C||503===C||504===C}class Eu{constructor(){this.listeners=[]}addEventListener(C){this.listeners.push(C)}abort(){this.listeners.forEach(C=>C())}}let Ts,_a;function Ss(){return(Ss=(0,k.Z)(function*(D,C,x,F,X){if(X&&X.global)D("event",x,F);else{const ae=yield C;D("event",x,Object.assign(Object.assign({},F),{send_to:ae}))}})).apply(this,arguments)}function ao(D){_a=D}function Ul(D){Ts=D}function Qi(){return bu.apply(this,arguments)}function bu(){return(bu=(0,k.Z)(function*(){var D;if(!(0,re.hl)())return In.warn(rr.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,re.eu)()}catch(C){return In.warn(rr.create("indexeddb-unavailable",{errorInfo:null===(D=C)||void 0===D?void 0:D.toString()}).message),!1}return!0})).apply(this,arguments)}function Ro(){return(Ro=(0,k.Z)(function*(D,C,x,F,X,ae,De){var Be;const at=Mn(D);at.then(sr=>{x[sr.measurementId]=sr.appId,D.options.measurementId&&sr.measurementId!==D.options.measurementId&&In.warn(`The measurement ID in the local Firebase config (${D.options.measurementId}) does not match the measurement ID fetched from the server (${sr.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(sr=>In.error(sr)),C.push(at);const vt=Qi().then(sr=>{if(sr)return F.getId()}),[St,dt]=yield Promise.all([at,vt]);ad()||yu(ae,St.measurementId),_a&&(X("consent","default",_a),ao(void 0)),X("js",new Date);const pn=null!==(Be=De?.config)&&void 0!==Be?Be:{};return pn.origin="firebase",pn.update=!0,null!=dt&&(pn[sd]=dt),X("config",St.measurementId,pn),Ts&&(X("set",Ts),Ul(void 0)),St.measurementId})).apply(this,arguments)}class Du{constructor(C){this.app=C}_delete(){return delete Hr[this.app.options.appId],Promise.resolve()}}let Hr={},As=[];const No={};let ko,uo,Oo="dataLayer",va=!1;function Iy(D,C,x){!function Kp(){const D=[];if((0,re.ru)()&&D.push("This is a browser extension environment."),(0,re.zI)()||D.push("Cookies are not available."),D.length>0){const C=D.map((F,X)=>`(${X+1}) ${F}`).join(" "),x=rr.create("invalid-analytics-context",{errorInfo:C});In.warn(x.message)}}();const F=D.options.appId;if(!F)throw rr.create("no-app-id");if(!D.options.apiKey){if(!D.options.measurementId)throw rr.create("no-api-key");In.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${D.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Hr[F])throw rr.create("already-exists",{id:F});if(!va){!function od(D){let C=[];Array.isArray(window[D])?C=window[D]:window[D]=C}(Oo);const{wrappedGtag:ae,gtagCore:De}=function da(D,C,x,F,X){let ae=function(...De){window[F].push(arguments)};return window[X]&&"function"==typeof window[X]&&(ae=window[X]),window[X]=function _u(D,C,x,F){function ae(){return(ae=(0,k.Z)(function*(De,Be,at){try{"event"===De?yield Ao(D,C,x,Be,at):"config"===De?yield Bh(D,C,x,F,Be,at):"consent"===De?D("consent","update",at):D("set",Be)}catch(vt){In.error(vt)}})).apply(this,arguments)}return function X(De,Be,at){return ae.apply(this,arguments)}}(ae,D,C,x),{gtagCore:ae,wrappedGtag:window[X]}}(Hr,As,No,Oo,"gtag");uo=ae,ko=De,va=!0}return Hr[F]=function Mo(D,C,x,F,X,ae,De){return Ro.apply(this,arguments)}(D,As,No,C,ko,Oo,x),new Du(D)}function Dy(){return jh.apply(this,arguments)}function jh(){return(jh=(0,k.Z)(function*(){if((0,re.ru)()||!(0,re.zI)()||!(0,re.hl)())return!1;try{return yield(0,re.eu)()}catch{return!1}})).apply(this,arguments)}const $h="@firebase/analytics";!function Gr(){(0,oe._registerComponent)(new de.wA(To,(C,{options:x})=>Iy(C.getProvider("app").getImmediate(),C.getProvider("installations-internal").getImmediate(),x),"PUBLIC")),(0,oe._registerComponent)(new de.wA("analytics-internal",function D(C){try{const x=C.getProvider(To).getImmediate();return{logEvent:(F,X,ae)=>function zt(D,C,x,F){D=(0,re.m9)(D),function cd(D,C,x,F,X){return Ss.apply(this,arguments)}(uo,Hr[D.app.options.appId],C,x,F).catch(X=>In.error(X))}(x,F,X,ae)}}catch(x){throw rr.create("interop-component-reg-failed",{reason:x})}},"PRIVATE")),(0,oe.registerVersion)($h,"0.8.0"),(0,oe.registerVersion)($h,"0.8.0","esm2017")}();var vi=P(4408),Po=P(7565);const Ji=new class wi extends Po.v{}(class jl extends vi.o{constructor(C,x){super(C,x),this.scheduler=C,this.work=x}schedule(C,x=0){return x>0?super.schedule(C,x):(this.delay=x,this.state=C,this.scheduler.flush(this),this)}execute(C,x){return x>0||this.closed?super.execute(C,x):this._execute(C,x)}requestAsyncId(C,x,F=0){return null!=F&&F>0||null==F&&this.delay>0?super.requestAsyncId(C,x,F):C.flush(this)}});var pt=P(4986),Su=P(8505),lo=P(5363),wa=P(9468);const Tr=new f.GfV("7.4.1"),Ea="__angularfire_symbol__analyticsIsSupportedValue",Xi="__angularfire_symbol__analyticsIsSupported",Mi="__angularfire_symbol__remoteConfigIsSupportedValue",Sr="__angularfire_symbol__remoteConfigIsSupported",$l="__angularfire_symbol__messagingIsSupportedValue",Au="__angularfire_symbol__messagingIsSupported";function ba(D,C,x){if(C){if(1===C.length)return C[0];const ae=C.filter(De=>De.app===x);if(1===ae.length)return ae[0]}return x.container.getProvider(D).getImmediate({optional:!0})}globalThis[Xi]||(globalThis[Xi]=Dy().then(D=>globalThis[Ea]=D).catch(()=>globalThis[Ea]=!1)),globalThis[Au]||(globalThis[Au]=nd().then(D=>globalThis[$l]=D).catch(()=>globalThis[$l]=!1)),globalThis[Sr]||(globalThis[Sr]=Ja().then(D=>globalThis[Mi]=D).catch(()=>globalThis[Mi]=!1));const zr=(D,C)=>{const x=C?[C]:(0,te.C6)(),F=[];return x.forEach(X=>{X.container.getProvider(D).instances.forEach(De=>{F.includes(De)||F.push(De)})}),F};function Fo(){}class an{constructor(C,x=Ji){this.zone=C,this.delegate=x}now(){return this.delegate.now()}schedule(C,x,F){const X=this.zone;return this.delegate.schedule(function(De){X.runGuarded(()=>{C.apply(this,[De])})},x,F)}}class Ri{constructor(C){this.zone=C,this.task=null}call(C,x){const F=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Fo,{},Fo,Fo)),x.pipe((0,Su.b)({next:F,complete:F,error:F})).subscribe(C).add(F)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Mu=(()=>{class D{constructor(x){this.ngZone=x,this.outsideAngular=x.runOutsideAngular(()=>new an(Zone.current)),this.insideAngular=x.run(()=>new an(Zone.current,pt.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return D.\u0275fac=function(x){return new(x||D)(f.LFG(f.R0b))},D.\u0275prov=f.Yz7({token:D,factory:D.\u0275fac,providedIn:"root"}),D})();function xs(){const D=globalThis.\u0275AngularFireScheduler;if(!D)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return D}function Hl(D){return D.pipe((0,lo.Q)(xs().outsideAngular))}function es(D){return xs(),function Gl(D){return function(x){return(x=x.lift(new Ri(D.ngZone))).pipe((0,wa.R)(D.outsideAngular),(0,lo.Q)(D.insideAngular))}}(xs())(D)}},2090:(ot,Se,P)=>{P.d(Se,{$s:()=>$i,BH:()=>Le,G6:()=>je,L:()=>he,LL:()=>Pe,Mn:()=>Ee,Sg:()=>Me,UG:()=>me,US:()=>de,ZB:()=>$,ZR:()=>ne,b$:()=>nt,d:()=>Ae,eu:()=>ge,hl:()=>U,jU:()=>fe,m9:()=>Gt,ne:()=>wo,pd:()=>Ur,r3:()=>Er,ru:()=>Ke,tV:()=>pe,uI:()=>Je,vZ:()=>Lr,w1:()=>_e,xO:()=>ys,xb:()=>Xt,z$:()=>ve,zI:()=>K,zd:()=>Di});const oe=function(Z){const j=[];let V=0;for(let H=0;H<Z.length;H++){let q=Z.charCodeAt(H);q<128?j[V++]=q:q<2048?(j[V++]=q>>6|192,j[V++]=63&q|128):55296==(64512&q)&&H+1<Z.length&&56320==(64512&Z.charCodeAt(H+1))?(q=65536+((1023&q)<<10)+(1023&Z.charCodeAt(++H)),j[V++]=q>>18|240,j[V++]=q>>12&63|128,j[V++]=q>>6&63|128,j[V++]=63&q|128):(j[V++]=q>>12|224,j[V++]=q>>6&63|128,j[V++]=63&q|128)}return j},de={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(Z,j){if(!Array.isArray(Z))throw Error("encodeByteArray takes an array as a parameter");this.init_();const V=j?this.byteToCharMapWebSafe_:this.byteToCharMap_,H=[];for(let q=0;q<Z.length;q+=3){const be=Z[q],Ve=q+1<Z.length,rt=Ve?Z[q+1]:0,sn=q+2<Z.length,Yt=sn?Z[q+2]:0;let Mt=(15&rt)<<2|Yt>>6,dn=63&Yt;sn||(dn=64,Ve||(Mt=64)),H.push(V[be>>2],V[(3&be)<<4|rt>>4],V[Mt],V[dn])}return H.join("")},encodeString(Z,j){return this.HAS_NATIVE_SUPPORT&&!j?btoa(Z):this.encodeByteArray(oe(Z),j)},decodeString(Z,j){return this.HAS_NATIVE_SUPPORT&&!j?atob(Z):function(Z){const j=[];let V=0,H=0;for(;V<Z.length;){const q=Z[V++];if(q<128)j[H++]=String.fromCharCode(q);else if(q>191&&q<224){const be=Z[V++];j[H++]=String.fromCharCode((31&q)<<6|63&be)}else if(q>239&&q<365){const sn=((7&q)<<18|(63&Z[V++])<<12|(63&Z[V++])<<6|63&Z[V++])-65536;j[H++]=String.fromCharCode(55296+(sn>>10)),j[H++]=String.fromCharCode(56320+(1023&sn))}else{const be=Z[V++],Ve=Z[V++];j[H++]=String.fromCharCode((15&q)<<12|(63&be)<<6|63&Ve)}}return j.join("")}(this.decodeStringToByteArray(Z,j))},decodeStringToByteArray(Z,j){this.init_();const V=j?this.charToByteMapWebSafe_:this.charToByteMap_,H=[];for(let q=0;q<Z.length;){const be=V[Z.charAt(q++)],rt=q<Z.length?V[Z.charAt(q)]:0;++q;const Yt=q<Z.length?V[Z.charAt(q)]:64;++q;const Pt=q<Z.length?V[Z.charAt(q)]:64;if(++q,null==be||null==rt||null==Yt||null==Pt)throw Error();H.push(be<<2|rt>>4),64!==Yt&&(H.push(rt<<4&240|Yt>>2),64!==Pt&&H.push(Yt<<6&192|Pt))}return H},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let Z=0;Z<this.ENCODED_VALS.length;Z++)this.byteToCharMap_[Z]=this.ENCODED_VALS.charAt(Z),this.charToByteMap_[this.byteToCharMap_[Z]]=Z,this.byteToCharMapWebSafe_[Z]=this.ENCODED_VALS_WEBSAFE.charAt(Z),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[Z]]=Z,Z>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(Z)]=Z,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(Z)]=Z)}}},he=function(Z){return function(Z){const j=oe(Z);return de.encodeByteArray(j,!0)}(Z).replace(/\./g,"")},pe=function(Z){try{return de.decodeString(Z,!0)}catch(j){console.error("base64Decode failed: ",j)}return null};function $(Z,j){if(!(j instanceof Object))return j;switch(j.constructor){case Date:return new Date(j.getTime());case Object:void 0===Z&&(Z={});break;case Array:Z=[];break;default:return j}for(const V in j)!j.hasOwnProperty(V)||!Q(V)||(Z[V]=$(Z[V],j[V]));return Z}function Q(Z){return"__proto__"!==Z}class Le{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((j,V)=>{this.resolve=j,this.reject=V})}wrapCallback(j){return(V,H)=>{V?this.reject(V):this.resolve(H),"function"==typeof j&&(this.promise.catch(()=>{}),1===j.length?j(V):j(V,H))}}}function Me(Z,j){if(Z.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const H=j||"demo-project",q=Z.iat||0,be=Z.sub||Z.user_id;if(!be)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Ve=Object.assign({iss:`https://securetoken.google.com/${H}`,aud:H,iat:q,exp:q+3600,auth_time:q,sub:be,user_id:be,firebase:{sign_in_provider:"custom",identities:{}}},Z);return[he(JSON.stringify({alg:"none",type:"JWT"})),he(JSON.stringify(Ve)),""].join(".")}function ve(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Je(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ve())}function me(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function fe(){return"object"==typeof self&&self.self===self}function Ke(){const Z="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof Z&&void 0!==Z.id}function nt(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Ae(){return ve().indexOf("Electron/")>=0}function _e(){const Z=ve();return Z.indexOf("MSIE ")>=0||Z.indexOf("Trident/")>=0}function Ee(){return ve().indexOf("MSAppHost/")>=0}function je(){return!me()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function U(){return"object"==typeof indexedDB}function ge(){return new Promise((Z,j)=>{try{let V=!0;const H="validate-browser-context-for-indexeddb-analytics-module",q=self.indexedDB.open(H);q.onsuccess=()=>{q.result.close(),V||self.indexedDB.deleteDatabase(H),Z(!0)},q.onupgradeneeded=()=>{V=!1},q.onerror=()=>{var be;j((null===(be=q.error)||void 0===be?void 0:be.message)||"")}}catch(V){j(V)}})}function K(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class ne extends Error{constructor(j,V,H){super(V),this.code=j,this.customData=H,this.name="FirebaseError",Object.setPrototypeOf(this,ne.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Pe.prototype.create)}}class Pe{constructor(j,V,H){this.service=j,this.serviceName=V,this.errors=H}create(j,...V){const H=V[0]||{},q=`${this.service}/${j}`,be=this.errors[j],Ve=be?function Oe(Z,j){return Z.replace(ct,(V,H)=>{const q=j[H];return null!=q?String(q):`<${H}?>`})}(be,H):"Error";return new ne(q,`${this.serviceName}: ${Ve} (${q}).`,H)}}const ct=/\{\$([^}]+)}/g;function Er(Z,j){return Object.prototype.hasOwnProperty.call(Z,j)}function Xt(Z){for(const j in Z)if(Object.prototype.hasOwnProperty.call(Z,j))return!1;return!0}function Lr(Z,j){if(Z===j)return!0;const V=Object.keys(Z),H=Object.keys(j);for(const q of V){if(!H.includes(q))return!1;const be=Z[q],Ve=j[q];if(mr(be)&&mr(Ve)){if(!Lr(be,Ve))return!1}else if(be!==Ve)return!1}for(const q of H)if(!V.includes(q))return!1;return!0}function mr(Z){return null!==Z&&"object"==typeof Z}function ys(Z){const j=[];for(const[V,H]of Object.entries(Z))Array.isArray(H)?H.forEach(q=>{j.push(encodeURIComponent(V)+"="+encodeURIComponent(q))}):j.push(encodeURIComponent(V)+"="+encodeURIComponent(H));return j.length?"&"+j.join("&"):""}function Di(Z){const j={};return Z.replace(/^\?/,"").split("&").forEach(H=>{if(H){const[q,be]=H.split("=");j[decodeURIComponent(q)]=decodeURIComponent(be)}}),j}function Ur(Z){const j=Z.indexOf("?");if(!j)return"";const V=Z.indexOf("#",j);return Z.substring(j,V>0?V:void 0)}function wo(Z,j){const V=new We(Z,j);return V.subscribe.bind(V)}class We{constructor(j,V){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=V,this.task.then(()=>{j(this)}).catch(H=>{this.error(H)})}next(j){this.forEachObserver(V=>{V.next(j)})}error(j){this.forEachObserver(V=>{V.error(j)}),this.close(j)}complete(){this.forEachObserver(j=>{j.complete()}),this.close()}subscribe(j,V,H){let q;if(void 0===j&&void 0===V&&void 0===H)throw new Error("Missing Observer.");q=function ji(Z,j){if("object"!=typeof Z||null===Z)return!1;for(const V of j)if(V in Z&&"function"==typeof Z[V])return!0;return!1}(j,["next","error","complete"])?j:{next:j,error:V,complete:H},void 0===q.next&&(q.next=An),void 0===q.error&&(q.error=An),void 0===q.complete&&(q.complete=An);const be=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?q.error(this.finalError):q.complete()}catch{}}),this.observers.push(q),be}unsubscribeOne(j){void 0===this.observers||void 0===this.observers[j]||(delete this.observers[j],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(j){if(!this.finalized)for(let V=0;V<this.observers.length;V++)this.sendOne(V,j)}sendOne(j,V){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[j])try{V(this.observers[j])}catch(H){typeof console<"u"&&console.error&&console.error(H)}})}close(j){this.finalized||(this.finalized=!0,void 0!==j&&(this.finalError=j),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function An(){}function $i(Z,j=1e3,V=2){const H=j*Math.pow(V,Z),q=Math.round(.5*H*(Math.random()-.5)*2);return Math.min(144e5,H+q)}function Gt(Z){return Z&&Z._delegate?Z._delegate:Z}},2135:(ot,Se,P)=>{var f=P(4650);let te=null;function k(){return te}const le=new f.OlP("DocumentToken");let he=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:function(){return function pe(){return(0,f.LFG)($)}()},providedIn:"platform"}),n})();const B=new f.OlP("Location Initialized");let $=(()=>{class n extends he{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return k().getBaseHref(this._doc)}onPopState(t){const r=k().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=k().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,s){Q()?this._history.pushState(t,r,s):this.location.hash=s}replaceState(t,r,s){Q()?this._history.replaceState(t,r,s):this.location.hash=s}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(le))},n.\u0275prov=f.Yz7({token:n,factory:function(){return function Le(){return new $((0,f.LFG)(le))}()},providedIn:"platform"}),n})();function Q(){return!!window.history.pushState}function Me(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function ve(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function Je(n){return n&&"?"!==n[0]?"?"+n:n}let me=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:function(){return(0,f.f3M)(Ke)},providedIn:"root"}),n})();const fe=new f.OlP("appBaseHref");let Ke=(()=>{class n extends me{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??(0,f.f3M)(le).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Me(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+Je(this._platformLocation.search),s=this._platformLocation.hash;return s&&t?`${r}${s}`:r}pushState(t,r,s,u){const c=this.prepareExternalUrl(s+Je(u));this._platformLocation.pushState(t,r,c)}replaceState(t,r,s,u){const c=this.prepareExternalUrl(s+Je(u));this._platformLocation.replaceState(t,r,c)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(he),f.LFG(fe,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),nt=(()=>{class n extends me{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=Me(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,s,u){let c=this.prepareExternalUrl(s+Je(u));0==c.length&&(c=this._platformLocation.pathname),this._platformLocation.pushState(t,r,c)}replaceState(t,r,s,u){let c=this.prepareExternalUrl(s+Je(u));0==c.length&&(c=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,c)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(he),f.LFG(fe,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})(),Ae=(()=>{class n{constructor(t){this._subject=new f.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._baseHref=ve(Ue(r)),this._locationStrategy.onPopState(s=>{this._subject.emit({url:this.path(!0),pop:!0,state:s.state,type:s.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Je(r))}normalize(t){return n.stripTrailingSlash(function Ee(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,Ue(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",s=null){this._locationStrategy.pushState(s,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Je(r)),s)}replaceState(t,r="",s=null){this._locationStrategy.replaceState(s,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Je(r)),s)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(s=>s(t,r))}subscribe(t,r,s){return this._subject.subscribe({next:t,error:r,complete:s})}}return n.normalizeQueryParams=Je,n.joinWithSlash=Me,n.stripTrailingSlash=ve,n.\u0275fac=function(t){return new(t||n)(f.LFG(me))},n.\u0275prov=f.Yz7({token:n,factory:function(){return function _e(){return new Ae((0,f.LFG)(me))}()},providedIn:"root"}),n})();function Ue(n){return n.replace(/\/index.html$/,"")}function Xo(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[s,u]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(s.trim()===e)return decodeURIComponent(u)}return null}let tr=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new ml,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){nr("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){nr("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.s_b),f.Y36(f.Rgc))},n.\u0275dir=f.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),n})();class ml{constructor(){this.$implicit=null,this.ngIf=null}}function nr(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,f.AaK)(e)}'.`)}let ra=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({}),n})();function hr(n){return"server"===n}let eu=(()=>{class n{}return n.\u0275prov=(0,f.Yz7)({token:n,providedIn:"root",factory:()=>new Lh((0,f.LFG)(le),window)}),n})();class Lh{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function Cr(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let s=r.currentNode;for(;s;){const u=s.shadowRoot;if(u){const c=u.getElementById(e)||u.querySelector(`[name="${e}"]`);if(c)return c}s=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,s=t.top+this.window.pageYOffset,u=this.offset();this.window.scrollTo(r-u[0],s-u[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=ii(this.window.history)||ii(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function ii(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class Qs{}class to extends class td extends class de{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function re(n){te||(te=n)}(new to)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function fu(){return no=no||document.querySelector("base"),no?no.getAttribute("href"):null}();return null==t?null:function $r(n){zn=zn||document.createElement("a"),zn.setAttribute("href",n);const e=zn.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){no=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Xo(document.cookie,e)}}let zn,no=null;const cn=new f.OlP("TRANSITION_ID"),Ol=[{provide:f.ip1,useFactory:function nd(n,e,t){return()=>{t.get(f.CZH).donePromise.then(()=>{const r=k(),s=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let u=0;u<s.length;u++)r.remove(s[u])})}},deps:[cn,le,f.zs3],multi:!0}];let kl=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const pu=new f.OlP("EventManagerPlugins");let rd=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(s=>s.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,s){return this._findPluginFor(r).addEventListener(t,r,s)}addGlobalEventListener(t,r,s){return this._findPluginFor(r).addGlobalEventListener(t,r,s)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const s=this._plugins;for(let u=0;u<s.length;u++){const c=s[u];if(c.supports(t))return this._eventNameToPlugin.set(t,c),c}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(pu),f.LFG(f.R0b))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();class Pl{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const s=k().getGlobalEventTarget(this._doc,e);if(!s)throw new Error(`Unsupported event target ${s} for event ${t}`);return this.addEventListener(s,t,r)}}let Do=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(s=>{this._stylesSet.has(s)||(this._stylesSet.add(s),r.add(s))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})(),Co=(()=>{class n extends Do{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,s){t.forEach(u=>{const c=this._doc.createElement("style");c.textContent=u,s.push(r.appendChild(c))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(id),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,s)=>{this._addStylesToHost(t,s,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(id))}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(le))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();function id(n){k().remove(n)}const To={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},sd=/%COMP%/g;function yu(n,e,t){for(let r=0;r<e.length;r++){let s=e[r];Array.isArray(s)?yu(n,s,t):(s=s.replace(sd,n),t.push(s))}return t}function od(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let So=(()=>{class n{constructor(t,r,s){this.eventManager=t,this.sharedStylesHost=r,this.appId=s,this.rendererByCompId=new Map,this.defaultRenderer=new Ao(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case f.ifc.Emulated:{let s=this.rendererByCompId.get(r.id);return s||(s=new ad(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,s)),s.applyToHost(t),s}case 1:case f.ifc.ShadowDom:return new ud(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const s=yu(r.id,r.styles,[]);this.sharedStylesHost.addStyles(s),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(rd),f.LFG(Co),f.LFG(f.AFp))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();class Ao{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(To[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){(da(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(da(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,s){if(s){t=s+":"+t;const u=To[s];u?e.setAttributeNS(u,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const s=To[r];s?e.removeAttributeNS(s,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,s){s&(f.JOm.DashCase|f.JOm.Important)?e.style.setProperty(t,r,s&f.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&f.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,od(r)):this.eventManager.addEventListener(e,t,od(r))}}function da(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class ad extends Ao{constructor(e,t,r,s){super(e),this.component=r;const u=yu(s+"-"+r.id,r.styles,[]);t.addStyles(u),this.contentAttr=function In(n){return"_ngcontent-%COMP%".replace(sd,n)}(s+"-"+r.id),this.hostAttr=function mu(n){return"_nghost-%COMP%".replace(sd,n)}(s+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class ud extends Ao{constructor(e,t,r,s){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const u=yu(s.id,s.styles,[]);for(let c=0;c<u.length;c++){const m=document.createElement("style");m.textContent=u[c],this.shadowRoot.appendChild(m)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let rr=(()=>{class n extends Pl{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,s){return t.addEventListener(r,s,!1),()=>this.removeEventListener(t,r,s)}removeEventListener(t,r,s){return t.removeEventListener(r,s)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(le))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const ha=["alt","control","meta","shift"],fa={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},xi={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let pa=(()=>{class n extends Pl{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,s){const u=n.parseEventName(r),c=n.eventCallback(u.fullKey,s,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>k().onAndCancel(t,u.domEventName,c))}static parseEventName(t){const r=t.toLowerCase().split("."),s=r.shift();if(0===r.length||"keydown"!==s&&"keyup"!==s)return null;const u=n._normalizeKey(r.pop());let c="",m=r.indexOf("code");if(m>-1&&(r.splice(m,1),c="code."),ha.forEach(b=>{const A=r.indexOf(b);A>-1&&(r.splice(A,1),c+=b+".")}),c+=u,0!=r.length||0===u.length)return null;const v={};return v.domEventName=s,v.fullKey=c,v}static matchEventFullKeyCode(t,r){let s=fa[t.key]||t.key,u="";return r.indexOf("code.")>-1&&(s=t.code,u="code."),!(null==s||!s)&&(s=s.toLowerCase()," "===s?s="space":"."===s&&(s="dot"),ha.forEach(c=>{c!==s&&(0,xi[c])(t)&&(u+=c+".")}),u+=s,u===r)}static eventCallback(t,r,s){return u=>{n.matchEventFullKeyCode(u,t)&&s.runGuarded(()=>r(u))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(le))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const Eu=(0,f.eFA)(f._c5,"browser",[{provide:f.Lbi,useValue:"browser"},{provide:f.g9A,useValue:function vu(){to.makeCurrent()},multi:!0},{provide:le,useFactory:function ma(){return(0,f.RDi)(document),document},deps:[]}]),Ts=new f.OlP(""),cd=[{provide:f.rWj,useClass:class Uh{addToWindow(e){f.dqk.getAngularTestability=(r,s=!0)=>{const u=e.findTestabilityInTree(r,s);if(null==u)throw new Error("Could not find testability for element.");return u},f.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),f.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),f.dqk.frameworkStabilizers||(f.dqk.frameworkStabilizers=[]),f.dqk.frameworkStabilizers.push(r=>{const s=f.dqk.getAllAngularTestabilities();let u=s.length,c=!1;const m=function(v){c=c||v,u--,0==u&&r(c)};s.forEach(function(v){v.whenStable(m)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?k().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:f.lri,useClass:f.dDg,deps:[f.R0b,f.eoX,f.rWj]},{provide:f.dDg,useClass:f.dDg,deps:[f.R0b,f.eoX,f.rWj]}],Ss=[{provide:f.zSh,useValue:"root"},{provide:f.qLn,useFactory:function so(){return new f.qLn},deps:[]},{provide:pu,useClass:rr,multi:!0,deps:[le,f.R0b,f.Lbi]},{provide:pu,useClass:pa,multi:!0,deps:[le]},{provide:So,useClass:So,deps:[rd,Co,f.AFp]},{provide:f.FYo,useExisting:So},{provide:Do,useExisting:Co},{provide:Co,useClass:Co,deps:[le]},{provide:rd,useClass:rd,deps:[pu,f.R0b]},{provide:Qs,useClass:kl,deps:[]},[]];let Ll=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:f.AFp,useValue:t.appId},{provide:cn,useExisting:f.AFp},Ol]}}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Ts,12))},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[...Ss,...cd],imports:[ra,f.hGG]}),n})(),Yi=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(le))},n.\u0275prov=f.Yz7({token:n,factory:function(t){let r=null;return r=t?new t:function xo(){return new Yi((0,f.LFG)(le))}(),r},providedIn:"root"}),n})();typeof window<"u"&&window;var zt=P(8996),fr=P(9751);const{isArray:$h}=Array,{getPrototypeOf:Tu,prototype:Gr,keys:vi}=Object;function jl(n){if(1===n.length){const e=n[0];if($h(e))return{args:e,keys:null};if(function Po(n){return n&&"object"==typeof n&&Tu(n)===Gr}(e)){const t=vi(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}var wi=P(8421),Ji=P(7669),pr=P(5403),pt=P(4004);const{isArray:Su}=Array;function wa(n){return(0,pt.U)(e=>function lo(n,e){return Su(e)?n(...e):n(e)}(n,e))}function Tr(n,e){return n.reduce((t,r,s)=>(t[r]=e[s],t),{})}let Xi=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=s=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.Qsj),f.Y36(f.SBq))},n.\u0275dir=f.lG2({type:n}),n})(),Mi=(()=>{class n extends Xi{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=f.n5z(n)))(r||n)}}(),n.\u0275dir=f.lG2({type:n,features:[f.qOj]}),n})();const Sr=new f.OlP("NgValueAccessor"),Ia={provide:Sr,useExisting:(0,f.Gpc)(()=>xu),multi:!0},hd=new f.OlP("CompositionEventMode");let xu=(()=>{class n extends Xi{constructor(t,r,s){super(t,r),this._compositionMode=s,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function Qp(){const n=k()?k().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.Qsj),f.Y36(f.SBq),f.Y36(hd,8))},n.\u0275dir=f.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&f.NdJ("input",function(u){return r._handleInput(u.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(u){return r._compositionEnd(u.target.value)})},features:[f._Bn([Ia]),f.qOj]}),n})();const an=new f.OlP("NgValidators"),Ri=new f.OlP("NgAsyncValidators");function C(n){return null!=n}function x(n){return(0,f.QGY)(n)?(0,zt.D)(n):n}function F(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function X(n,e){return e.map(t=>t(n))}function De(n){return n.map(e=>function ae(n){return!n.validate}(e)?e:t=>e.validate(t))}function at(n){return null!=n?function Be(n){if(!n)return null;const e=n.filter(C);return 0==e.length?null:function(t){return F(X(t,e))}}(De(n)):null}function St(n){return null!=n?function vt(n){if(!n)return null;const e=n.filter(C);return 0==e.length?null:function(t){return function Ea(...n){const e=(0,Ji.jO)(n),{args:t,keys:r}=jl(n),s=new fr.y(u=>{const{length:c}=t;if(!c)return void u.complete();const m=new Array(c);let v=c,b=c;for(let A=0;A<c;A++){let M=!1;(0,wi.Xf)(t[A]).subscribe((0,pr.x)(u,L=>{M||(M=!0,b--),m[A]=L},()=>v--,void 0,()=>{(!v||!M)&&(b||u.next(r?Tr(r,m):m),u.complete())}))}});return e?s.pipe(wa(e)):s}(X(t,e).map(x)).pipe((0,pt.U)(F))}}(De(n)):null}function dt(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function Ms(n){return n?Array.isArray(n)?n:[n]:[]}function ts(n,e){return Array.isArray(n)?n.includes(e):n===e}function Rs(n,e){const t=Ms(e);return Ms(n).forEach(s=>{ts(t,s)||t.push(s)}),t}function ho(n,e){return Ms(e).filter(t=>!ts(n,t))}class ns{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=at(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=St(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class Dn extends ns{get formDirective(){return null}get path(){return null}}class qr extends ns{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Ns{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let Gh=(()=>{class n extends Ns{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(qr,2))},n.\u0275dir=f.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&f.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[f.qOj]}),n})(),zh=(()=>{class n extends Ns{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(Dn,10))},n.\u0275dir=f.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&f.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},features:[f.qOj]}),n})();const Sa="VALID",Wl="INVALID",Aa="PENDING",Nu="DISABLED";function Ou(n){return(Kl(n)?n.validators:n)||null}function eg(n){return Array.isArray(n)?at(n):n||null}function Zl(n,e){return(Kl(e)?e.asyncValidators:n)||null}function tg(n){return Array.isArray(n)?St(n):n||null}function Kl(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class ku{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=eg(this._rawValidators),this._composedAsyncValidatorFn=tg(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===Sa}get invalid(){return this.status===Wl}get pending(){return this.status==Aa}get disabled(){return this.status===Nu}get enabled(){return this.status!==Nu}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=eg(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=tg(e)}addValidators(e){this.setValidators(Rs(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(Rs(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(ho(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(ho(e,this._rawAsyncValidators))}hasValidator(e){return ts(this._rawValidators,e)}hasAsyncValidator(e){return ts(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Aa,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Nu,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Sa,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Sa||this.status===Aa)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Nu:Sa}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Aa,this._hasOwnPendingAsyncValidator=!0;const t=x(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((r,s)=>r&&r._find(s),this)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new f.vpe,this.statusChanges=new f.vpe}_calculateStatus(){return this._allControlsDisabled()?Nu:this.errors?Wl:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Aa)?Aa:this._anyControlsHaveStatus(Wl)?Wl:Sa}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Kl(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}}class gd extends ku{constructor(e,t,r){super(Ou(t),Zl(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){(function rs(n,e,t){n._forEachChild((r,s)=>{if(void 0===t[s])throw new f.vHH(1002,"")})})(this,0,e),Object.keys(e).forEach(r=>{(function ng(n,e,t){const r=n.controls;if(!(e?Object.keys(r):r).length)throw new f.vHH(1e3,"");if(!r[t])throw new f.vHH(1001,"")})(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{const s=this.controls[r];s&&s.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,s)=>{r.reset(e[s],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,r,s)=>((r.enabled||this.disabled)&&(t[s]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((s,u)=>{r=t(r,s,u)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}function Oi(n,e){Kh(n,e),e.valueAccessor.writeValue(n.value),n.disabled&&e.valueAccessor.setDisabledState?.(!0),function ig(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&Lo(n,e)})}(n,e),function sg(n,e){const t=(r,s)=>{e.valueAccessor.writeValue(r),s&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function Os(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&Lo(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function Zh(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function yd(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function Kh(n,e){const t=function pn(n){return n._rawValidators}(n);null!==e.validator?n.setValidators(dt(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=function sr(n){return n._rawAsyncValidators}(n);null!==e.asyncValidator?n.setAsyncValidators(dt(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const s=()=>n.updateValueAndValidity();yd(e._rawValidators,s),yd(e._rawAsyncValidators,s)}function Lo(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}const Jh={provide:Dn,useExisting:(0,f.Gpc)(()=>Jl)},Ql=(()=>Promise.resolve(null))();let Jl=(()=>{class n extends Dn{constructor(t,r){super(),this.submitted=!1,this._directives=new Set,this.ngSubmit=new f.vpe,this.form=new gd({},at(t),St(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){Ql.then(()=>{const r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),Oi(t.control,t),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){Ql.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){Ql.then(()=>{const r=this._findContainer(t.path),s=new gd({});(function Yh(n,e){Kh(n,e)})(s,t),r.registerControl(t.name,s),s.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){Ql.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){Ql.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,function Qh(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this._directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(an,10),f.Y36(Ri,10))},n.\u0275dir=f.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(t,r){1&t&&f.NdJ("submit",function(u){return r.onSubmit(u)})("reset",function(){return r.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[f._Bn([Jh]),f.qOj]}),n})();function Pu(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function Xl(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const cg=class extends ku{constructor(e=null,t,r){super(Ou(t),Zl(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Kl(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=Xl(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){Pu(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){Pu(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){Xl(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},ky={provide:qr,useExisting:(0,f.Gpc)(()=>wd)},pg=(()=>Promise.resolve(null))();let wd=(()=>{class n extends qr{constructor(t,r,s,u,c){super(),this._changeDetectorRef=c,this.control=new cg,this._registered=!1,this.update=new f.vpe,this._parent=t,this._setValidators(r),this._setAsyncValidators(s),this.valueAccessor=function ag(n,e){if(!e)return null;let t,r,s;return Array.isArray(e),e.forEach(u=>{u.constructor===xu?t=u:function vd(n){return Object.getPrototypeOf(n.constructor)===Mi}(u)?r=u:s=u}),s||r||t||null}(0,u)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),function Yl(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){Oi(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){pg.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){const r=t.isDisabled.currentValue,s=0!==r&&(0,f.D6c)(r);pg.then(()=>{s&&!this.control.disabled?this.control.disable():!s&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?function rg(n,e){return[...e.path,n]}(t,this._parent):[t]}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(Dn,9),f.Y36(an,10),f.Y36(Ri,10),f.Y36(Sr,10),f.Y36(f.sBO,8))},n.\u0275dir=f.lG2({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[f._Bn([ky]),f.qOj,f.TTD]}),n})(),gg=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=f.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})(),ef=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({}),n})(),Eg=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[ef]}),n})(),oc=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[Eg]}),n})();function it(...n){const e=(0,Ji.yG)(n);return(0,zt.D)(n,e)}var Wr=P(5577),Ig=P(576);function ka(n,e){return(0,Ig.m)(e)?(0,Wr.z)(n,e,1):(0,Wr.z)(n,1)}var Zr=P(4482);function ki(n,e){return(0,Zr.e)((t,r)=>{let s=0;t.subscribe((0,pr.x)(r,u=>n.call(e,u,s++)&&r.next(u)))})}class f0{}class bg{}class ss{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?this.lazyInit="string"==typeof e?()=>{this.headers=new Map,e.split("\n").forEach(t=>{const r=t.indexOf(":");if(r>0){const s=t.slice(0,r),u=s.toLowerCase(),c=t.slice(r+1).trim();this.maybeSetNormalizedName(s,u),this.headers.has(u)?this.headers.get(u).push(c):this.headers.set(u,[c])}})}:()=>{this.headers=new Map,Object.keys(e).forEach(t=>{let r=e[t];const s=t.toLowerCase();"string"==typeof r&&(r=[r]),r.length>0&&(this.headers.set(s,r),this.maybeSetNormalizedName(t,s))})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof ss?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new ss;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof ss?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(e.name,t);const s=("a"===e.op?this.headers.get(t):void 0)||[];s.push(...r),this.headers.set(t,s);break;case"d":const u=e.value;if(u){let c=this.headers.get(t);if(!c)return;c=c.filter(m=>-1===u.indexOf(m)),0===c.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,c)}else this.headers.delete(t),this.normalizedNames.delete(t)}}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class BD{encodeKey(e){return g0(e)}encodeValue(e){return g0(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const p0=/%(\d[a-f0-9])/gi,$D={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function g0(n){return encodeURIComponent(n).replace(p0,(e,t)=>$D[t]??e)}function Dg(n){return`${n}`}class Vu{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new BD,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function jD(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(s=>{const u=s.indexOf("="),[c,m]=-1==u?[e.decodeKey(s),""]:[e.decodeKey(s.slice(0,u)),e.decodeValue(s.slice(u+1))],v=t.get(c)||[];v.push(m),t.set(c,v)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const r=e.fromObject[t],s=Array.isArray(r)?r.map(Dg):[Dg(r)];this.map.set(t,s)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(r=>{const s=e[r];Array.isArray(s)?s.forEach(u=>{t.push({param:r,value:u,op:"a"})}):t.push({param:r,value:s,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new Vu({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(Dg(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let r=this.map.get(e.param)||[];const s=r.indexOf(Dg(e.value));-1!==s&&r.splice(s,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class HD{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function y0(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function $y(n){return typeof Blob<"u"&&n instanceof Blob}function _0(n){return typeof FormData<"u"&&n instanceof FormData}class _r{constructor(e,t,r,s){let u;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function GD(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||s?(this.body=void 0!==r?r:null,u=s):u=r,u&&(this.reportProgress=!!u.reportProgress,this.withCredentials=!!u.withCredentials,u.responseType&&(this.responseType=u.responseType),u.headers&&(this.headers=u.headers),u.context&&(this.context=u.context),u.params&&(this.params=u.params)),this.headers||(this.headers=new ss),this.context||(this.context=new HD),this.params){const c=this.params.toString();if(0===c.length)this.urlWithParams=t;else{const m=t.indexOf("?");this.urlWithParams=t+(-1===m?"?":m<t.length-1?"&":"")+c}}else this.params=new Vu,this.urlWithParams=t}serializeBody(){return null===this.body?null:y0(this.body)||$y(this.body)||_0(this.body)||function zD(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof Vu?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||_0(this.body)?null:$y(this.body)?this.body.type||null:y0(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Vu?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){const t=e.method||this.method,r=e.url||this.url,s=e.responseType||this.responseType,u=void 0!==e.body?e.body:this.body,c=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,m=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let v=e.headers||this.headers,b=e.params||this.params;const A=e.context??this.context;return void 0!==e.setHeaders&&(v=Object.keys(e.setHeaders).reduce((M,L)=>M.set(L,e.setHeaders[L]),v)),e.setParams&&(b=Object.keys(e.setParams).reduce((M,L)=>M.set(L,e.setParams[L]),b)),new _r(t,r,u,{params:b,headers:v,context:A,reportProgress:m,responseType:s,withCredentials:c})}}var Wn=(()=>((Wn=Wn||{})[Wn.Sent=0]="Sent",Wn[Wn.UploadProgress=1]="UploadProgress",Wn[Wn.ResponseHeader=2]="ResponseHeader",Wn[Wn.DownloadProgress=3]="DownloadProgress",Wn[Wn.Response=4]="Response",Wn[Wn.User=5]="User",Wn))();class Cg{constructor(e,t=200,r="OK"){this.headers=e.headers||new ss,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class sf extends Cg{constructor(e={}){super(e),this.type=Wn.ResponseHeader}clone(e={}){return new sf({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class vr extends Cg{constructor(e={}){super(e),this.type=Wn.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new vr({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class xd extends Cg{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function af(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let qD=(()=>{class n{constructor(t){this.handler=t}request(t,r,s={}){let u;if(t instanceof _r)u=t;else{let v,b;v=s.headers instanceof ss?s.headers:new ss(s.headers),s.params&&(b=s.params instanceof Vu?s.params:new Vu({fromObject:s.params})),u=new _r(t,r,void 0!==s.body?s.body:null,{headers:v,context:s.context,params:b,reportProgress:s.reportProgress,responseType:s.responseType||"json",withCredentials:s.withCredentials})}const c=it(u).pipe(ka(v=>this.handler.handle(v)));if(t instanceof _r||"events"===s.observe)return c;const m=c.pipe(ki(v=>v instanceof vr));switch(s.observe||"body"){case"body":switch(u.responseType){case"arraybuffer":return m.pipe((0,pt.U)(v=>{if(null!==v.body&&!(v.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return v.body}));case"blob":return m.pipe((0,pt.U)(v=>{if(null!==v.body&&!(v.body instanceof Blob))throw new Error("Response is not a Blob.");return v.body}));case"text":return m.pipe((0,pt.U)(v=>{if(null!==v.body&&"string"!=typeof v.body)throw new Error("Response is not a string.");return v.body}));default:return m.pipe((0,pt.U)(v=>v.body))}case"response":return m;default:throw new Error(`Unreachable: unhandled observe type ${s.observe}}`)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:(new Vu).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,s={}){return this.request("PATCH",t,af(s,r))}post(t,r,s={}){return this.request("POST",t,af(s,r))}put(t,r,s={}){return this.request("PUT",t,af(s,r))}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(f0))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();class v0{constructor(e,t){this.next=e,this.interceptor=t}handle(e){return this.interceptor.intercept(e,this.next)}}const Hy=new f.OlP("HTTP_INTERCEPTORS");let WD=(()=>{class n{intercept(t,r){return r.handle(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const Pa=/^\)\]\}',?\n/;let w0=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new fr.y(r=>{const s=this.xhrFactory.build();if(s.open(t.method,t.urlWithParams),t.withCredentials&&(s.withCredentials=!0),t.headers.forEach((G,J)=>s.setRequestHeader(G,J.join(","))),t.headers.has("Accept")||s.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const G=t.detectContentTypeHeader();null!==G&&s.setRequestHeader("Content-Type",G)}if(t.responseType){const G=t.responseType.toLowerCase();s.responseType="json"!==G?G:"text"}const u=t.serializeBody();let c=null;const m=()=>{if(null!==c)return c;const G=s.statusText||"OK",J=new ss(s.getAllResponseHeaders()),Ie=function YD(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(s)||t.url;return c=new sf({headers:J,status:s.status,statusText:G,url:Ie}),c},v=()=>{let{headers:G,status:J,statusText:Ie,url:Ce}=m(),Ze=null;204!==J&&(Ze=typeof s.response>"u"?s.responseText:s.response),0===J&&(J=Ze?200:0);let ut=J>=200&&J<300;if("json"===t.responseType&&"string"==typeof Ze){const lt=Ze;Ze=Ze.replace(Pa,"");try{Ze=""!==Ze?JSON.parse(Ze):null}catch(tt){Ze=lt,ut&&(ut=!1,Ze={error:tt,text:Ze})}}ut?(r.next(new vr({body:Ze,headers:G,status:J,statusText:Ie,url:Ce||void 0})),r.complete()):r.error(new xd({error:Ze,headers:G,status:J,statusText:Ie,url:Ce||void 0}))},b=G=>{const{url:J}=m(),Ie=new xd({error:G,status:s.status||0,statusText:s.statusText||"Unknown Error",url:J||void 0});r.error(Ie)};let A=!1;const M=G=>{A||(r.next(m()),A=!0);let J={type:Wn.DownloadProgress,loaded:G.loaded};G.lengthComputable&&(J.total=G.total),"text"===t.responseType&&!!s.responseText&&(J.partialText=s.responseText),r.next(J)},L=G=>{let J={type:Wn.UploadProgress,loaded:G.loaded};G.lengthComputable&&(J.total=G.total),r.next(J)};return s.addEventListener("load",v),s.addEventListener("error",b),s.addEventListener("timeout",b),s.addEventListener("abort",b),t.reportProgress&&(s.addEventListener("progress",M),null!==u&&s.upload&&s.upload.addEventListener("progress",L)),s.send(u),r.next({type:Wn.Sent}),()=>{s.removeEventListener("error",b),s.removeEventListener("abort",b),s.removeEventListener("load",v),s.removeEventListener("timeout",b),t.reportProgress&&(s.removeEventListener("progress",M),null!==u&&s.upload&&s.upload.removeEventListener("progress",L)),s.readyState!==s.DONE&&s.abort()}})}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Qs))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const E0=new f.OlP("XSRF_COOKIE_NAME"),I0=new f.OlP("XSRF_HEADER_NAME");class Gy{}let Vx=(()=>{class n{constructor(t,r,s){this.doc=t,this.platform=r,this.cookieName=s,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=Xo(t,this.cookieName),this.lastCookieString=t),this.lastToken}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(le),f.LFG(f.Lbi),f.LFG(E0))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})(),ks=(()=>{class n{constructor(t,r){this.tokenService=t,this.headerName=r}intercept(t,r){const s=t.url.toLowerCase();if("GET"===t.method||"HEAD"===t.method||s.startsWith("http://")||s.startsWith("https://"))return r.handle(t);const u=this.tokenService.getToken();return null!==u&&!t.headers.has(this.headerName)&&(t=t.clone({headers:t.headers.set(this.headerName,u)})),r.handle(t)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Gy),f.LFG(I0))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})(),zy=(()=>{class n{constructor(t,r){this.backend=t,this.injector=r,this.chain=null}handle(t){if(null===this.chain){const r=this.injector.get(Hy,[]);this.chain=r.reduceRight((s,u)=>new v0(s,u),this.backend)}return this.chain.handle(t)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(bg),f.LFG(f.zs3))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})(),D0=(()=>{class n{static disable(){return{ngModule:n,providers:[{provide:ks,useClass:WD}]}}static withOptions(t={}){return{ngModule:n,providers:[t.cookieName?{provide:E0,useValue:t.cookieName}:[],t.headerName?{provide:I0,useValue:t.headerName}:[]]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[ks,{provide:Hy,useExisting:ks,multi:!0},{provide:Gy,useClass:Vx},{provide:E0,useValue:"XSRF-TOKEN"},{provide:I0,useValue:"X-XSRF-TOKEN"}]}),n})(),QD=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[qD,{provide:f0,useClass:zy},w0,{provide:bg,useExisting:w0}],imports:[D0.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]}),n})();var Bo=P(7579);class os extends Bo.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}const lf=(0,P(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var Sg=P(4671),Md=P(9672);function Ag(...n){const e=(0,Ji.yG)(n),t=(0,Ji.jO)(n),{args:r,keys:s}=jl(n);if(0===r.length)return(0,zt.D)([],e);const u=new fr.y(function C0(n,e,t=Sg.y){return r=>{T0(e,()=>{const{length:s}=n,u=new Array(s);let c=s,m=s;for(let v=0;v<s;v++)T0(e,()=>{const b=(0,zt.D)(n[v],e);let A=!1;b.subscribe((0,pr.x)(r,M=>{u[v]=M,A||(A=!0,m--),m||r.next(t(u.slice()))},()=>{--c||r.complete()}))},r)},r)}}(r,e,s?c=>Tr(s,c):Sg.y));return t?u.pipe(wa(t)):u}function T0(n,e,t){n?(0,Md.f)(t,n,e):e()}var ac=P(8189);function Wy(...n){return function JD(){return(0,ac.J)(1)}()((0,zt.D)(n,(0,Ji.yG)(n)))}function S0(n){return new fr.y(e=>{(0,wi.Xf)(n()).subscribe(e)})}var XD=P(9635);function cf(n,e){const t=(0,Ig.m)(n)?n:()=>n,r=s=>s.error(t());return new fr.y(e?s=>e.schedule(r,0,s):r)}var uc=P(515),Zy=P(727);function df(){return(0,Zr.e)((n,e)=>{let t=null;n._refCount++;const r=(0,pr.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const s=n._connection,u=t;t=null,s&&(!u||s===u)&&s.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class Ky extends fr.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,Zr.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Zy.w0;const t=this.getSubject();e.add(this.source.subscribe((0,pr.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Zy.w0.EMPTY)}return e}refCount(){return df()(this)}}function Zn(n,e){return(0,Zr.e)((t,r)=>{let s=null,u=0,c=!1;const m=()=>c&&!s&&r.complete();t.subscribe((0,pr.x)(r,v=>{s?.unsubscribe();let b=0;const A=u++;(0,wi.Xf)(n(v,A)).subscribe(s=(0,pr.x)(r,M=>r.next(e?e(v,M,A,b++):M),()=>{s=null,m()}))},()=>{c=!0,m()}))})}function hf(n){return n<=0?()=>uc.E:(0,Zr.e)((e,t)=>{let r=0;e.subscribe((0,pr.x)(t,s=>{++r<=n&&(t.next(s),n<=r&&t.complete())}))})}function xg(...n){const e=(0,Ji.yG)(n);return(0,Zr.e)((t,r)=>{(e?Wy(n,t,e):Wy(n,t)).subscribe(r)})}function ff(n){return(0,Zr.e)((e,t)=>{let r=!1;e.subscribe((0,pr.x)(t,s=>{r=!0,t.next(s)},()=>{r||t.next(n),t.complete()}))})}function Yy(n=lc){return(0,Zr.e)((e,t)=>{let r=!1;e.subscribe((0,pr.x)(t,s=>{r=!0,t.next(s)},()=>r?t.complete():t.error(n())))})}function lc(){return new lf}function jo(n,e){const t=arguments.length>=2;return r=>r.pipe(n?ki((s,u)=>n(s,u,r)):Sg.y,hf(1),t?ff(e):Yy(()=>new lf))}var Kr=P(8505);function Uu(n){return(0,Zr.e)((e,t)=>{let u,r=null,s=!1;r=e.subscribe((0,pr.x)(t,void 0,void 0,c=>{u=(0,wi.Xf)(n(c,Uu(n)(e))),r?(r.unsubscribe(),r=null,u.subscribe(t)):s=!0})),s&&(r.unsubscribe(),r=null,u.subscribe(t))})}function jx(n,e,t,r,s){return(u,c)=>{let m=t,v=e,b=0;u.subscribe((0,pr.x)(c,A=>{const M=b++;v=m?n(v,A,M):(m=!0,A),r&&c.next(v)},s&&(()=>{m&&c.next(v),c.complete()})))}}function Bu(n,e){return(0,Zr.e)(jx(n,e,arguments.length>=2,!0))}function Qy(n){return n<=0?()=>uc.E:(0,Zr.e)((e,t)=>{let r=[];e.subscribe((0,pr.x)(t,s=>{r.push(s),n<r.length&&r.shift()},()=>{for(const s of r)t.next(s);t.complete()},void 0,()=>{r=null}))})}function Jy(n,e){const t=arguments.length>=2;return r=>r.pipe(n?ki((s,u)=>n(s,u,r)):Sg.y,Qy(1),t?ff(e):Yy(()=>new lf))}function pf(n){return(0,Zr.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}const Lt="primary",ju=Symbol("RouteTitle");class Mg{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function cc(n){return new Mg(n)}function Xy(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const s={};for(let u=0;u<r.length;u++){const c=r[u],m=n[u];if(c.startsWith(":"))s[c.substring(1)]=m;else if(c!==m.path)return null}return{consumed:n.slice(0,r.length),posParams:s}}function Ps(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let s;for(let u=0;u<t.length;u++)if(s=t[u],!Rd(n[s],e[s]))return!1;return!0}function Rd(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((s,u)=>r[u]===s)}return n===e}function R0(n){return Array.prototype.concat.apply([],n)}function e_(n){return n.length>0?n[n.length-1]:null}function Yr(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function Fa(n){return(0,f.CqO)(n)?n:(0,f.QGY)(n)?(0,zt.D)(Promise.resolve(n)):it(n)}const Hx={exact:function P0(n,e,t){if(!$u(n.segments,e.segments)||!mf(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!P0(n.children[r],e.children[r],t))return!1;return!0},subset:Fs},t_={exact:function k0(n,e){return Ps(n,e)},subset:function eC(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>Rd(n[t],e[t]))},ignored:()=>!0};function O0(n,e,t){return Hx[t.paths](n.root,e.root,t.matrixParams)&&t_[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function Fs(n,e,t){return F0(n,e,e.segments,t)}function F0(n,e,t,r){if(n.segments.length>t.length){const s=n.segments.slice(0,t.length);return!(!$u(s,t)||e.hasChildren()||!mf(s,t,r))}if(n.segments.length===t.length){if(!$u(n.segments,t)||!mf(n.segments,t,r))return!1;for(const s in e.children)if(!n.children[s]||!Fs(n.children[s],e.children[s],r))return!1;return!0}{const s=t.slice(0,n.segments.length),u=t.slice(n.segments.length);return!!($u(n.segments,s)&&mf(n.segments,s,r)&&n.children[Lt])&&F0(n.children[Lt],e,u,r)}}function mf(n,e,t){return e.every((r,s)=>t_[t](n[s].parameters,r.parameters))}class dc{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=cc(this.queryParams)),this._queryParamMap}toString(){return Nt.serialize(this)}}class Bt{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Yr(t,(r,s)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return _f(this)}}class yf{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=cc(this.parameters)),this._parameterMap}toString(){return V0(this)}}function $u(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let L0=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:function(){return new n_},providedIn:"root"}),n})();class n_{parse(e){const t=new oC(e);return new dc(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${Nd(e.root,!0)}`,r=function Gx(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(s=>`${Rg(t)}=${Rg(s)}`).join("&"):`${Rg(t)}=${Rg(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function rC(n){return encodeURI(n)}(e.fragment)}`:""}`}}const Nt=new n_;function _f(n){return n.segments.map(e=>V0(e)).join("/")}function Nd(n,e){if(!n.hasChildren())return _f(n);if(e){const t=n.children[Lt]?Nd(n.children[Lt],!1):"",r=[];return Yr(n.children,(s,u)=>{u!==Lt&&r.push(`${u}:${Nd(s,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function nC(n,e){let t=[];return Yr(n.children,(r,s)=>{s===Lt&&(t=t.concat(e(r,s)))}),Yr(n.children,(r,s)=>{s!==Lt&&(t=t.concat(e(r,s)))}),t}(n,(r,s)=>s===Lt?[Nd(n.children[Lt],!1)]:[`${s}:${Nd(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Lt]?`${_f(n)}/${t[0]}`:`${_f(n)}/(${t.join("//")})`}}function r_(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Rg(n){return r_(n).replace(/%3B/gi,";")}function Ng(n){return r_(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Og(n){return decodeURIComponent(n)}function i_(n){return Og(n.replace(/\+/g,"%20"))}function V0(n){return`${Ng(n.path)}${function iC(n){return Object.keys(n).map(e=>`;${Ng(e)}=${Ng(n[e])}`).join("")}(n.parameters)}`}const U0=/^[^\/()?;=#]+/;function vf(n){const e=n.match(U0);return e?e[0]:""}const hc=/^[^=?&#]+/,s_=/^[^&#]+/;class oC{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Bt([],{}):new Bt([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Lt]=new Bt(e,t)),r}parseSegment(){const e=vf(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new f.vHH(4009,!1);return this.capture(e),new yf(Og(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=vf(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const s=vf(this.remaining);s&&(r=s,this.capture(r))}e[Og(t)]=Og(r)}parseQueryParam(e){const t=function sC(n){const e=n.match(hc);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const c=function o_(n){const e=n.match(s_);return e?e[0]:""}(this.remaining);c&&(r=c,this.capture(r))}const s=i_(t),u=i_(r);if(e.hasOwnProperty(s)){let c=e[s];Array.isArray(c)||(c=[c],e[s]=c),c.push(u)}else e[s]=u}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=vf(this.remaining),s=this.remaining[r.length];if("/"!==s&&")"!==s&&";"!==s)throw new f.vHH(4010,!1);let u;r.indexOf(":")>-1?(u=r.slice(0,r.indexOf(":")),this.capture(u),this.capture(":")):e&&(u=Lt);const c=this.parseChildren();t[u]=1===Object.keys(c).length?c[Lt]:new Bt([],c),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new f.vHH(4011,!1)}}function B0(n){return n.segments.length>0?new Bt([],{[Lt]:n}):n}function a_(n){const e={};for(const r of Object.keys(n.children)){const u=a_(n.children[r]);(u.segments.length>0||u.hasChildren())&&(e[r]=u)}return function zx(n){if(1===n.numberOfChildren&&n.children[Lt]){const e=n.children[Lt];return new Bt(n.segments.concat(e.segments),e.children)}return n}(new Bt(n.segments,e))}function fc(n){return n instanceof dc}function uC(n,e,t,r,s){if(0===t.length)return Pd(e.root,e.root,e.root,r,s);const u=function $0(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new j0(!0,0,n);let e=0,t=!1;const r=n.reduce((s,u,c)=>{if("object"==typeof u&&null!=u){if(u.outlets){const m={};return Yr(u.outlets,(v,b)=>{m[b]="string"==typeof v?v.split("/"):v}),[...s,{outlets:m}]}if(u.segmentPath)return[...s,u.segmentPath]}return"string"!=typeof u?[...s,u]:0===c?(u.split("/").forEach((m,v)=>{0==v&&"."===m||(0==v&&""===m?t=!0:".."===m?e++:""!=m&&s.push(m))}),s):[...s,u]},[]);return new j0(t,e,r)}(t);return u.toRoot()?Pd(e.root,e.root,new Bt([],{}),r,s):function c(v){const b=function cC(n,e,t,r){if(n.isAbsolute)return new Fd(e.root,!0,0);if(-1===r)return new Fd(t,t===e.root,0);return function l_(n,e,t){let r=n,s=e,u=t;for(;u>s;){if(u-=s,r=r.parent,!r)throw new f.vHH(4005,!1);s=r.segments.length}return new Fd(r,!1,s-u)}(t,r+(kd(n.commands[0])?0:1),n.numberOfDoubleDots)}(u,e,n.snapshot?._urlSegment,v),A=b.processChildren?Ld(b.segmentGroup,b.index,u.commands):Pg(b.segmentGroup,b.index,u.commands);return Pd(e.root,b.segmentGroup,A,r,s)}(n.snapshot?._lastPathIndex)}function kd(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function Hu(n){return"object"==typeof n&&null!=n&&n.outlets}function Pd(n,e,t,r,s){let c,u={};r&&Yr(r,(v,b)=>{u[b]=Array.isArray(v)?v.map(A=>`${A}`):`${v}`}),c=n===e?t:u_(n,e,t);const m=B0(a_(c));return new dc(m,u,s)}function u_(n,e,t){const r={};return Yr(n.children,(s,u)=>{r[u]=s===e?t:u_(s,e,t)}),new Bt(n.segments,r)}class j0{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&kd(r[0]))throw new f.vHH(4003,!1);const s=r.find(Hu);if(s&&s!==e_(r))throw new f.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Fd{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function Pg(n,e,t){if(n||(n=new Bt([],{})),0===n.segments.length&&n.hasChildren())return Ld(n,e,t);const r=function c_(n,e,t){let r=0,s=e;const u={match:!1,pathIndex:0,commandIndex:0};for(;s<n.segments.length;){if(r>=t.length)return u;const c=n.segments[s],m=t[r];if(Hu(m))break;const v=`${m}`,b=r<t.length-1?t[r+1]:null;if(s>0&&void 0===v)break;if(v&&b&&"object"==typeof b&&void 0===b.outlets){if(!hC(v,b,c))return u;r+=2}else{if(!hC(v,{},c))return u;r++}s++}return{match:!0,pathIndex:s,commandIndex:r}}(n,e,t),s=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const u=new Bt(n.segments.slice(0,r.pathIndex),{});return u.children[Lt]=new Bt(n.segments.slice(r.pathIndex),n.children),Ld(u,0,s)}return r.match&&0===s.length?new Bt(n.segments,{}):r.match&&!n.hasChildren()?H0(n,e,t):r.match?Ld(n,0,s):H0(n,e,t)}function Ld(n,e,t){if(0===t.length)return new Bt(n.segments,{});{const r=function dC(n){return Hu(n[0])?n[0].outlets:{[Lt]:n}}(t),s={};return Yr(r,(u,c)=>{"string"==typeof u&&(u=[u]),null!==u&&(s[c]=Pg(n.children[c],e,u))}),Yr(n.children,(u,c)=>{void 0===r[c]&&(s[c]=u)}),new Bt(n.segments,s)}}function H0(n,e,t){const r=n.segments.slice(0,e);let s=0;for(;s<t.length;){const u=t[s];if(Hu(u)){const v=d_(u.outlets);return new Bt(r,v)}if(0===s&&kd(t[0])){r.push(new yf(n.segments[e].path,G0(t[0]))),s++;continue}const c=Hu(u)?u.outlets[Lt]:`${u}`,m=s<t.length-1?t[s+1]:null;c&&m&&kd(m)?(r.push(new yf(c,G0(m))),s+=2):(r.push(new yf(c,{})),s++)}return new Bt(r,{})}function d_(n){const e={};return Yr(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=H0(new Bt([],{}),0,t))}),e}function G0(n){const e={};return Yr(n,(t,r)=>e[r]=`${t}`),e}function hC(n,e,t){return n==t.path&&Ps(e,t.parameters)}class Pi{constructor(e,t){this.id=e,this.url=t}}class Fg extends Pi{constructor(e,t,r="imperative",s=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=s}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Gu extends Pi{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class pc extends Pi{constructor(e,t,r,s){super(e,t),this.reason=r,this.code=s,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Ls extends Pi{constructor(e,t,r,s){super(e,t),this.error=r,this.target=s,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class z0 extends Pi{constructor(e,t,r,s){super(e,t),this.urlAfterRedirects=r,this.state=s,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class fC extends Pi{constructor(e,t,r,s){super(e,t),this.urlAfterRedirects=r,this.state=s,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class h_ extends Pi{constructor(e,t,r,s,u){super(e,t),this.urlAfterRedirects=r,this.state=s,this.shouldActivate=u,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class La extends Pi{constructor(e,t,r,s){super(e,t),this.urlAfterRedirects=r,this.state=s,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class f_ extends Pi{constructor(e,t,r,s){super(e,t),this.urlAfterRedirects=r,this.state=s,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class q0{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class p_{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class qx{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class W0{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Wx{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Lg{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class wf{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class Vg{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=Ef(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=Ef(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=Z0(e,this._root);return t.length<2?[]:t[t.length-2].children.map(s=>s.value).filter(s=>s!==e)}pathFromRoot(e){return Z0(e,this._root).map(t=>t.value)}}function Ef(n,e){if(n===e.value)return e;for(const t of e.children){const r=Ef(n,t);if(r)return r}return null}function Z0(n,e){if(n===e.value)return[e];for(const t of e.children){const r=Z0(n,t);if(r.length)return r.unshift(e),r}return[]}class Va{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Vd(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class K0 extends Vg{constructor(e,t){super(e),this.snapshot=t,y_(this,e)}toString(){return this.snapshot.toString()}}function Y0(n,e){const t=function Q0(n,e){const c=new If([],{},{},"",{},Lt,e,null,n.root,-1,{});return new m_("",new Va(c,[]))}(n,e),r=new os([new yf("",{})]),s=new os({}),u=new os({}),c=new os({}),m=new os(""),v=new Ud(r,s,c,m,u,Lt,e,t.root);return v.snapshot=t.root,new K0(new Va(v,[]),t)}class Ud{constructor(e,t,r,s,u,c,m,v){this.url=e,this.params=t,this.queryParams=r,this.fragment=s,this.data=u,this.outlet=c,this.component=m,this.title=this.data?.pipe((0,pt.U)(b=>b[ju]))??it(void 0),this._futureSnapshot=v}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,pt.U)(e=>cc(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,pt.U)(e=>cc(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function J0(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const s=t[r],u=t[r-1];if(s.routeConfig&&""===s.routeConfig.path)r--;else{if(u.component)break;r--}}return function Zx(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class If{constructor(e,t,r,s,u,c,m,v,b,A,M,L){this.url=e,this.params=t,this.queryParams=r,this.fragment=s,this.data=u,this.outlet=c,this.component=m,this.title=this.data?.[ju],this.routeConfig=v,this._urlSegment=b,this._lastPathIndex=A,this._correctedLastPathIndex=L??A,this._resolve=M}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=cc(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=cc(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class m_ extends Vg{constructor(e,t){super(t),this.url=e,y_(this,t)}toString(){return Ug(this._root)}}function y_(n,e){e.value._routerState=n,e.children.forEach(t=>y_(n,t))}function Ug(n){const e=n.children.length>0?` { ${n.children.map(Ug).join(", ")} } `:"";return`${n.value}${e}`}function X0(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Ps(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),Ps(e.params,t.params)||n.params.next(t.params),function M0(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Ps(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),Ps(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function eE(n,e){const t=Ps(n.params,e.params)&&function tC(n,e){return $u(n,e)&&n.every((t,r)=>Ps(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||eE(n.parent,e.parent))}function Bg(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const s=function Yx(n,e,t){return e.children.map(r=>{for(const s of t.children)if(n.shouldReuseRoute(r.value,s.value.snapshot))return Bg(n,r,s);return Bg(n,r)})}(n,e,t);return new Va(r,s)}{if(n.shouldAttach(e.value)){const u=n.retrieve(e.value);if(null!==u){const c=u.route;return c.value._futureSnapshot=e.value,c.children=e.children.map(m=>Bg(n,m)),c}}const r=function Qx(n){return new Ud(new os(n.url),new os(n.params),new os(n.queryParams),new os(n.fragment),new os(n.data),n.outlet,n.component,n)}(e.value),s=e.children.map(u=>Bg(n,u));return new Va(r,s)}}const tE="ngNavigationCancelingError";function pC(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=fc(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,s=gC(!1,0,e);return s.url=t,s.navigationBehaviorOptions=r,s}function gC(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[tE]=!0,r.cancellationCode=e,t&&(r.url=t),r}function mC(n){return Ua(n)&&fc(n.url)}function Ua(n){return n&&n[tE]}class __{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new bf,this.attachRef=null}}let bf=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const s=this.getOrCreateContext(t);s.outlet=r,this.contexts.set(t,s)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new __,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Df=!1;let Cf=(()=>{class n{constructor(t,r,s,u,c){this.parentContexts=t,this.location=r,this.changeDetector=u,this.environmentInjector=c,this.activated=null,this._activatedRoute=null,this.activateEvents=new f.vpe,this.deactivateEvents=new f.vpe,this.attachEvents=new f.vpe,this.detachEvents=new f.vpe,this.name=s||Lt,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.getContext(this.name)?.outlet===this&&this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new f.vHH(4012,Df);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new f.vHH(4012,Df);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new f.vHH(4012,Df);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new f.vHH(4013,Df);this._activatedRoute=t;const s=this.location,c=t._futureSnapshot.component,m=this.parentContexts.getOrCreateContext(this.name).children,v=new nE(t,m,s.injector);if(r&&function v_(n){return!!n.resolveComponentFactory}(r)){const b=r.resolveComponentFactory(c);this.activated=s.createComponent(b,s.length,v)}else this.activated=s.createComponent(c,{index:s.length,injector:v,environmentInjector:r??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(bf),f.Y36(f.s_b),f.$8M("name"),f.Y36(f.sBO),f.Y36(f.lqb))},n.\u0275dir=f.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0}),n})();class nE{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Ud?this.route:e===bf?this.childContexts:this.parent.get(e,t)}}let w_=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=f.Xpm({type:n,selectors:[["ng-component"]],standalone:!0,features:[f.jDz],decls:1,vars:0,template:function(t,r){1&t&&f._UZ(0,"router-outlet")},dependencies:[Cf],encapsulation:2}),n})();function Ba(n,e){return n.providers&&!n._injector&&(n._injector=(0,f.MMx)(n.providers,e,`Route: ${n.path}`)),n._injector??e}function Tf(n){const e=n.children&&n.children.map(Tf),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Lt&&(t.component=w_),t}function Qr(n){return n.outlet||Lt}function Sf(n,e){const t=n.filter(r=>Qr(r)===e);return t.push(...n.filter(r=>Qr(r)!==e)),t}function ja(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class rE{constructor(e,t,r,s){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=s}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),X0(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const s=Vd(t);e.children.forEach(u=>{const c=u.value.outlet;this.deactivateRoutes(u,s[c],r),delete s[c]}),Yr(s,(u,c)=>{this.deactivateRouteAndItsChildren(u,r)})}deactivateRoutes(e,t,r){const s=e.value,u=t?t.value:null;if(s===u)if(s.component){const c=r.getContext(s.outlet);c&&this.deactivateChildRoutes(e,t,c.children)}else this.deactivateChildRoutes(e,t,r);else u&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),s=r&&e.value.component?r.children:t,u=Vd(e);for(const c of Object.keys(u))this.deactivateRouteAndItsChildren(u[c],s);if(r&&r.outlet){const c=r.outlet.detach(),m=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:c,route:e,contexts:m})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),s=r&&e.value.component?r.children:t,u=Vd(e);for(const c of Object.keys(u))this.deactivateRouteAndItsChildren(u[c],s);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const s=Vd(t);e.children.forEach(u=>{this.activateRoutes(u,s[u.value.outlet],r),this.forwardEvent(new Lg(u.value.snapshot))}),e.children.length&&this.forwardEvent(new W0(e.value.snapshot))}activateRoutes(e,t,r){const s=e.value,u=t?t.value:null;if(X0(s),s===u)if(s.component){const c=r.getOrCreateContext(s.outlet);this.activateChildRoutes(e,t,c.children)}else this.activateChildRoutes(e,t,r);else if(s.component){const c=r.getOrCreateContext(s.outlet);if(this.routeReuseStrategy.shouldAttach(s.snapshot)){const m=this.routeReuseStrategy.retrieve(s.snapshot);this.routeReuseStrategy.store(s.snapshot,null),c.children.onOutletReAttached(m.contexts),c.attachRef=m.componentRef,c.route=m.route.value,c.outlet&&c.outlet.attach(m.componentRef,m.route.value),X0(m.route.value),this.activateChildRoutes(e,null,c.children)}else{const m=ja(s.snapshot),v=m?.get(f._Vd)??null;c.attachRef=null,c.route=s,c.resolver=v,c.injector=m,c.outlet&&c.outlet.activateWith(s,c.injector),this.activateChildRoutes(e,null,c.children)}}else this.activateChildRoutes(e,null,r)}}class I_{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class jd{constructor(e,t){this.component=e,this.route=t}}function b_(n,e,t){const r=n._root;return Af(r,e?e._root:null,t,[r.value])}function zu(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||(0,f.Z0I)(n)?e.get(n):n:r}function Af(n,e,t,r,s={canDeactivateChecks:[],canActivateChecks:[]}){const u=Vd(e);return n.children.forEach(c=>{(function eM(n,e,t,r,s={canDeactivateChecks:[],canActivateChecks:[]}){const u=n.value,c=e?e.value:null,m=t?t.getContext(n.value.outlet):null;if(c&&u.routeConfig===c.routeConfig){const v=function EC(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!$u(n.url,e.url);case"pathParamsOrQueryParamsChange":return!$u(n.url,e.url)||!Ps(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!eE(n,e)||!Ps(n.queryParams,e.queryParams);default:return!eE(n,e)}}(c,u,u.routeConfig.runGuardsAndResolvers);v?s.canActivateChecks.push(new I_(r)):(u.data=c.data,u._resolvedData=c._resolvedData),Af(n,e,u.component?m?m.children:null:t,r,s),v&&m&&m.outlet&&m.outlet.isActivated&&s.canDeactivateChecks.push(new jd(m.outlet.component,c))}else c&&$d(e,m,s),s.canActivateChecks.push(new I_(r)),Af(n,null,u.component?m?m.children:null:t,r,s)})(c,u[c.value.outlet],t,r.concat([c.value]),s),delete u[c.value.outlet]}),Yr(u,(c,m)=>$d(c,t.getContext(m),s)),s}function $d(n,e,t){const r=Vd(n),s=n.value;Yr(r,(u,c)=>{$d(u,s.component?e?e.children.getContext(c):null:e,t)}),t.canDeactivateChecks.push(new jd(s.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,s))}function xf(n){return"function"==typeof n}function Mf(n){return n instanceof lf||"EmptyError"===n?.name}const Rf=Symbol("INITIAL_VALUE");function Hd(){return Zn(n=>Ag(n.map(e=>e.pipe(hf(1),xg(Rf)))).pipe((0,pt.U)(e=>{for(const t of e)if(!0!==t){if(t===Rf)return Rf;if(!1===t||t instanceof dc)return t}return!0}),ki(e=>e!==Rf),hf(1)))}function hE(n){return(0,XD.z)((0,Kr.b)(e=>{if(fc(e))throw pC(0,e)}),(0,pt.U)(e=>!0===e))}const Nf={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function fE(n,e,t,r,s){const u=D_(n,e,t);return u.matched?function $o(n,e,t,r){const s=e.canMatch;return s&&0!==s.length?it(s.map(c=>{const m=zu(c,n);return Fa(function bC(n){return n&&xf(n.canMatch)}(m)?m.canMatch(e,t):n.runInContext(()=>m(e,t)))})).pipe(Hd(),hE()):it(!0)}(r=Ba(e,r),e,t).pipe((0,pt.U)(c=>!0===c?u:{...Nf})):it(u)}function D_(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...Nf}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const s=(e.matcher||Xy)(t,n,e);if(!s)return{...Nf};const u={};Yr(s.posParams,(m,v)=>{u[v]=m.path});const c=s.consumed.length>0?{...u,...s.consumed[s.consumed.length-1].parameters}:u;return{matched:!0,consumedSegments:s.consumed,remainingSegments:t.slice(s.consumed.length),parameters:c,positionalParamSegments:s.posParams??{}}}function C_(n,e,t,r,s="corrected"){if(t.length>0&&function RC(n,e,t){return t.some(r=>Gd(n,e,r)&&Qr(r)!==Lt)}(n,t,r)){const c=new Bt(e,function MC(n,e,t,r){const s={};s[Lt]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const u of t)if(""===u.path&&Qr(u)!==Lt){const c=new Bt([],{});c._sourceSegment=n,c._segmentIndexShift=e.length,s[Qr(u)]=c}return s}(n,e,r,new Bt(t,n.children)));return c._sourceSegment=n,c._segmentIndexShift=e.length,{segmentGroup:c,slicedSegments:[]}}if(0===t.length&&function NC(n,e,t){return t.some(r=>Gd(n,e,r))}(n,t,r)){const c=new Bt(n.segments,function pE(n,e,t,r,s,u){const c={};for(const m of r)if(Gd(n,t,m)&&!s[Qr(m)]){const v=new Bt([],{});v._sourceSegment=n,v._segmentIndexShift="legacy"===u?n.segments.length:e.length,c[Qr(m)]=v}return{...s,...c}}(n,e,t,r,n.children,s));return c._sourceSegment=n,c._segmentIndexShift=e.length,{segmentGroup:c,slicedSegments:t}}const u=new Bt(n.segments,n.children);return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:t}}function Gd(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function gE(n,e,t,r){return!!(Qr(n)===r||r!==Lt&&Gd(e,t,n))&&("**"===n.path||D_(e,n,t).matched)}function mE(n,e,t){return 0===e.length&&!n.children[t]}const gc=!1;class zd{constructor(e){this.segmentGroup=e||null}}class yE{constructor(e){this.urlTree=e}}function mc(n){return cf(new zd(n))}function T_(n){return cf(new yE(n))}class rM{constructor(e,t,r,s,u){this.injector=e,this.configLoader=t,this.urlSerializer=r,this.urlTree=s,this.config=u,this.allowRedirects=!0}apply(){const e=C_(this.urlTree.root,[],[],this.config).segmentGroup,t=new Bt(e.segments,e.children);return this.expandSegmentGroup(this.injector,this.config,t,Lt).pipe((0,pt.U)(u=>this.createUrlTree(a_(u),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Uu(u=>{if(u instanceof yE)return this.allowRedirects=!1,this.match(u.urlTree);throw u instanceof zd?this.noMatchError(u):u}))}match(e){return this.expandSegmentGroup(this.injector,this.config,e.root,Lt).pipe((0,pt.U)(s=>this.createUrlTree(a_(s),e.queryParams,e.fragment))).pipe(Uu(s=>{throw s instanceof zd?this.noMatchError(s):s}))}noMatchError(e){return new f.vHH(4002,gc)}createUrlTree(e,t,r){const s=B0(e);return new dc(s,t,r)}expandSegmentGroup(e,t,r,s){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,pt.U)(u=>new Bt([],u))):this.expandSegment(e,r,t,r.segments,s,!0)}expandChildren(e,t,r){const s=[];for(const u of Object.keys(r.children))"primary"===u?s.unshift(u):s.push(u);return(0,zt.D)(s).pipe(ka(u=>{const c=r.children[u],m=Sf(t,u);return this.expandSegmentGroup(e,m,c,u).pipe((0,pt.U)(v=>({segment:v,outlet:u})))}),Bu((u,c)=>(u[c.outlet]=c.segment,u),{}),Jy())}expandSegment(e,t,r,s,u,c){return(0,zt.D)(r).pipe(ka(m=>this.expandSegmentAgainstRoute(e,t,r,m,s,u,c).pipe(Uu(b=>{if(b instanceof zd)return it(null);throw b}))),jo(m=>!!m),Uu((m,v)=>{if(Mf(m))return mE(t,s,u)?it(new Bt([],{})):mc(t);throw m}))}expandSegmentAgainstRoute(e,t,r,s,u,c,m){return gE(s,t,u,c)?void 0===s.redirectTo?this.matchSegmentAgainstRoute(e,t,s,u,c):m&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,s,u,c):mc(t):mc(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,s,u,c){return"**"===s.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,s,c):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,s,u,c)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,s){const u=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?T_(u):this.lineralizeSegments(r,u).pipe((0,Wr.z)(c=>{const m=new Bt(c,{});return this.expandSegment(e,m,t,c,s,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,s,u,c){const{matched:m,consumedSegments:v,remainingSegments:b,positionalParamSegments:A}=D_(t,s,u);if(!m)return mc(t);const M=this.applyRedirectCommands(v,s.redirectTo,A);return s.redirectTo.startsWith("/")?T_(M):this.lineralizeSegments(s,M).pipe((0,Wr.z)(L=>this.expandSegment(e,t,r,L.concat(b),c,!1)))}matchSegmentAgainstRoute(e,t,r,s,u){return"**"===r.path?(e=Ba(r,e),r.loadChildren?(r._loadedRoutes?it({routes:r._loadedRoutes,injector:r._loadedInjector}):this.configLoader.loadChildren(e,r)).pipe((0,pt.U)(m=>(r._loadedRoutes=m.routes,r._loadedInjector=m.injector,new Bt(s,{})))):it(new Bt(s,{}))):fE(t,r,s,e).pipe(Zn(({matched:c,consumedSegments:m,remainingSegments:v})=>c?this.getChildConfig(e=r._injector??e,r,s).pipe((0,Wr.z)(A=>{const M=A.injector??e,L=A.routes,{segmentGroup:G,slicedSegments:J}=C_(t,m,v,L),Ie=new Bt(G.segments,G.children);if(0===J.length&&Ie.hasChildren())return this.expandChildren(M,L,Ie).pipe((0,pt.U)(lt=>new Bt(m,lt)));if(0===L.length&&0===J.length)return it(new Bt(m,{}));const Ce=Qr(r)===u;return this.expandSegment(M,Ie,L,J,Ce?Lt:u,!0).pipe((0,pt.U)(ut=>new Bt(m.concat(ut.segments),ut.children)))})):mc(t)))}getChildConfig(e,t,r){return t.children?it({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?it({routes:t._loadedRoutes,injector:t._loadedInjector}):function dE(n,e,t,r){const s=e.canLoad;return void 0===s||0===s.length?it(!0):it(s.map(c=>{const m=zu(c,n);return Fa(function oE(n){return n&&xf(n.canLoad)}(m)?m.canLoad(e,t):n.runInContext(()=>m(e,t)))})).pipe(Hd(),hE())}(e,t,r).pipe((0,Wr.z)(s=>s?this.configLoader.loadChildren(e,t).pipe((0,Kr.b)(u=>{t._loadedRoutes=u.routes,t._loadedInjector=u.injector})):function nM(n){return cf(gC(gc,3))}())):it({routes:[],injector:e})}lineralizeSegments(e,t){let r=[],s=t.root;for(;;){if(r=r.concat(s.segments),0===s.numberOfChildren)return it(r);if(s.numberOfChildren>1||!s.children[Lt])return cf(new f.vHH(4e3,gc));s=s.children[Lt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,s){const u=this.createSegmentGroup(e,t.root,r,s);return new dc(u,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Yr(e,(s,u)=>{if("string"==typeof s&&s.startsWith(":")){const m=s.substring(1);r[u]=t[m]}else r[u]=s}),r}createSegmentGroup(e,t,r,s){const u=this.createSegments(e,t.segments,r,s);let c={};return Yr(t.children,(m,v)=>{c[v]=this.createSegmentGroup(e,m,r,s)}),new Bt(u,c)}createSegments(e,t,r,s){return t.map(u=>u.path.startsWith(":")?this.findPosParam(e,u,s):this.findOrReturn(u,r))}findPosParam(e,t,r){const s=r[t.path.substring(1)];if(!s)throw new f.vHH(4001,gc);return s}findOrReturn(e,t){let r=0;for(const s of t){if(s.path===e.path)return t.splice(r),s;r++}return e}}class vE{}class $a{constructor(e,t,r,s,u,c,m,v){this.injector=e,this.rootComponentType=t,this.config=r,this.urlTree=s,this.url=u,this.paramsInheritanceStrategy=c,this.relativeLinkResolution=m,this.urlSerializer=v}recognize(){const e=C_(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,Lt).pipe((0,pt.U)(t=>{if(null===t)return null;const r=new If([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Lt,this.rootComponentType,null,this.urlTree.root,-1,{}),s=new Va(r,t),u=new m_(this.url,s);return this.inheritParamsAndData(u._root),u}))}inheritParamsAndData(e){const t=e.value,r=J0(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(s=>this.inheritParamsAndData(s))}processSegmentGroup(e,t,r,s){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,s)}processChildren(e,t,r){return(0,zt.D)(Object.keys(r.children)).pipe(ka(s=>{const u=r.children[s],c=Sf(t,s);return this.processSegmentGroup(e,c,u,s)}),Bu((s,u)=>s&&u?(s.push(...u),s):null),function A0(n,e=!1){return(0,Zr.e)((t,r)=>{let s=0;t.subscribe((0,pr.x)(r,u=>{const c=n(u,s++);(c||e)&&r.next(u),!c&&r.complete()}))})}(s=>null!==s),ff(null),Jy(),(0,pt.U)(s=>{if(null===s)return null;const u=EE(s);return function $g(n){n.sort((e,t)=>e.value.outlet===Lt?-1:t.value.outlet===Lt?1:e.value.outlet.localeCompare(t.value.outlet))}(u),u}))}processSegment(e,t,r,s,u){return(0,zt.D)(t).pipe(ka(c=>this.processSegmentAgainstRoute(c._injector??e,c,r,s,u)),jo(c=>!!c),Uu(c=>{if(Mf(c))return mE(r,s,u)?it([]):it(null);throw c}))}processSegmentAgainstRoute(e,t,r,s,u){if(t.redirectTo||!gE(t,r,s,u))return it(null);let c;if("**"===t.path){const m=s.length>0?e_(s).parameters:{},v=IE(r)+s.length;c=it({snapshot:new If(s,m,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,qd(t),Qr(t),t.component??t._loadedComponent??null,t,M_(r),v,DE(t),v),consumedSegments:[],remainingSegments:[]})}else c=fE(r,t,s,e).pipe((0,pt.U)(({matched:m,consumedSegments:v,remainingSegments:b,parameters:A})=>{if(!m)return null;const M=IE(r)+v.length;return{snapshot:new If(v,A,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,qd(t),Qr(t),t.component??t._loadedComponent??null,t,M_(r),M,DE(t),M),consumedSegments:v,remainingSegments:b}}));return c.pipe(Zn(m=>{if(null===m)return it(null);const{snapshot:v,consumedSegments:b,remainingSegments:A}=m;e=t._injector??e;const M=t._loadedInjector??e,L=function Hg(n){return n.children?n.children:n.loadChildren?n._loadedRoutes:[]}(t),{segmentGroup:G,slicedSegments:J}=C_(r,b,A,L.filter(Ce=>void 0===Ce.redirectTo),this.relativeLinkResolution);if(0===J.length&&G.hasChildren())return this.processChildren(M,L,G).pipe((0,pt.U)(Ce=>null===Ce?null:[new Va(v,Ce)]));if(0===L.length&&0===J.length)return it([new Va(v,[])]);const Ie=Qr(t)===u;return this.processSegment(M,L,G,J,Ie?Lt:u).pipe((0,pt.U)(Ce=>null===Ce?null:[new Va(v,Ce)]))}))}}function kf(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function EE(n){const e=[],t=new Set;for(const r of n){if(!kf(r)){e.push(r);continue}const s=e.find(u=>r.value.routeConfig===u.value.routeConfig);void 0!==s?(s.children.push(...r.children),t.add(s)):e.push(r)}for(const r of t){const s=EE(r.children);e.push(new Va(r.value,s))}return e.filter(r=>!t.has(r))}function M_(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function IE(n){let e=n,t=e._segmentIndexShift??0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift??0;return t-1}function qd(n){return n.data||{}}function DE(n){return n.resolve||{}}function CE(n){return"string"==typeof n.title||null===n.title}function Gg(n){return Zn(e=>{const t=n(e);return t?(0,zt.D)(t).pipe((0,pt.U)(()=>e)):it(e)})}let zg=(()=>{class n{buildTitle(t){let r,s=t.root;for(;void 0!==s;)r=this.getResolvedTitleForRoute(s)??r,s=s.children.find(u=>u.outlet===Lt);return r}getResolvedTitleForRoute(t){return t.data[ju]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:function(){return(0,f.f3M)(TE)},providedIn:"root"}),n})(),TE=(()=>{class n extends zg{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Yi))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class LC{}class UC extends class VC{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const qg=new f.OlP("",{providedIn:"root",factory:()=>({})}),Wd=new f.OlP("ROUTES");let Ha=(()=>{class n{constructor(t,r){this.injector=t,this.compiler=r,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return it(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=Fa(t.loadComponent()).pipe((0,Kr.b)(u=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=u}),pf(()=>{this.componentLoaders.delete(t)})),s=new Ky(r,()=>new Bo.x).pipe(df());return this.componentLoaders.set(t,s),s}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return it({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const u=this.loadModuleFactoryOrRoutes(r.loadChildren).pipe((0,pt.U)(m=>{this.onLoadEndListener&&this.onLoadEndListener(r);let v,b,A=!1;Array.isArray(m)?b=m:(v=m.create(t).injector,b=R0(v.get(Wd,[],f.XFs.Self|f.XFs.Optional)));return{routes:b.map(Tf),injector:v}}),pf(()=>{this.childrenLoaders.delete(r)})),c=new Ky(u,()=>new Bo.x).pipe(df());return this.childrenLoaders.set(r,c),c}loadModuleFactoryOrRoutes(t){return Fa(t()).pipe((0,Wr.z)(r=>r instanceof f.YKP||Array.isArray(r)?it(r):(0,zt.D)(this.compiler.compileModuleAsync(r))))}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(f.zs3),f.LFG(f.Sil))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class oM{}class Pf{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function jC(n){throw n}function R_(n,e,t){return e.parse("/")}const $C={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Ho={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};function Jr(){const n=(0,f.f3M)(L0),e=(0,f.f3M)(bf),t=(0,f.f3M)(Ae),r=(0,f.f3M)(f.zs3),s=(0,f.f3M)(f.Sil),u=(0,f.f3M)(Wd,{optional:!0})??[],c=(0,f.f3M)(qg,{optional:!0})??{},m=(0,f.f3M)(TE),v=(0,f.f3M)(zg,{optional:!0}),b=(0,f.f3M)(oM,{optional:!0}),A=(0,f.f3M)(LC,{optional:!0}),M=new yn(null,n,e,t,r,s,R0(u));return b&&(M.urlHandlingStrategy=b),A&&(M.routeReuseStrategy=A),M.titleStrategy=v??m,function Ff(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(c,M),M}let yn=(()=>{class n{constructor(t,r,s,u,c,m,v){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=s,this.location=u,this.config=v,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new Bo.x,this.errorHandler=jC,this.malformedUriErrorHandler=R_,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=()=>it(void 0),this.urlHandlingStrategy=new Pf,this.routeReuseStrategy=new UC,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.configLoader=c.get(Ha),this.configLoader.onLoadEndListener=L=>this.triggerEvent(new p_(L)),this.configLoader.onLoadStartListener=L=>this.triggerEvent(new q0(L)),this.ngModule=c.get(f.h0i),this.console=c.get(f.c2e);const M=c.get(f.R0b);this.isNgZoneEnabled=M instanceof f.R0b&&f.R0b.isInAngularZone(),this.resetConfig(v),this.currentUrlTree=function N0(){return new dc(new Bt([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=Y0(this.currentUrlTree,this.rootComponentType),this.transitions=new os({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){return this.location.getState()?.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(ki(s=>0!==s.id),(0,pt.U)(s=>({...s,extractedUrl:this.urlHandlingStrategy.extract(s.rawUrl)})),Zn(s=>{let u=!1,c=!1;return it(s).pipe((0,Kr.b)(m=>{this.currentNavigation={id:m.id,initialUrl:m.rawUrl,extractedUrl:m.extractedUrl,trigger:m.source,extras:m.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),Zn(m=>{const v=this.browserUrlTree.toString(),b=!this.navigated||m.extractedUrl.toString()!==v||v!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||b)&&this.urlHandlingStrategy.shouldProcessUrl(m.rawUrl))return us(m.source)&&(this.browserUrlTree=m.extractedUrl),it(m).pipe(Zn(M=>{const L=this.transitions.getValue();return r.next(new Fg(M.id,this.serializeUrl(M.extractedUrl),M.source,M.restoredState)),L!==this.transitions.getValue()?uc.E:Promise.resolve(M)}),function _E(n,e,t,r){return Zn(s=>function S_(n,e,t,r,s){return new rM(n,e,t,r,s).apply()}(n,e,t,s.extractedUrl,r).pipe((0,pt.U)(u=>({...s,urlAfterRedirects:u}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,Kr.b)(M=>{this.currentNavigation={...this.currentNavigation,finalUrl:M.urlAfterRedirects},s.urlAfterRedirects=M.urlAfterRedirects}),function iM(n,e,t,r,s,u){return(0,Wr.z)(c=>function A_(n,e,t,r,s,u,c="emptyOnly",m="legacy"){return new $a(n,e,t,r,s,c,m,u).recognize().pipe(Zn(v=>null===v?function wE(n){return new fr.y(e=>e.error(n))}(new vE):it(v)))}(n,e,t,c.urlAfterRedirects,r.serialize(c.urlAfterRedirects),r,s,u).pipe((0,pt.U)(m=>({...c,targetSnapshot:m}))))}(this.ngModule.injector,this.rootComponentType,this.config,this.urlSerializer,this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,Kr.b)(M=>{if(s.targetSnapshot=M.targetSnapshot,"eager"===this.urlUpdateStrategy){if(!M.extras.skipLocationChange){const G=this.urlHandlingStrategy.merge(M.urlAfterRedirects,M.rawUrl);this.setBrowserUrl(G,M)}this.browserUrlTree=M.urlAfterRedirects}const L=new z0(M.id,this.serializeUrl(M.extractedUrl),this.serializeUrl(M.urlAfterRedirects),M.targetSnapshot);r.next(L)}));if(b&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:L,extractedUrl:G,source:J,restoredState:Ie,extras:Ce}=m,Ze=new Fg(L,this.serializeUrl(G),J,Ie);r.next(Ze);const ut=Y0(G,this.rootComponentType).snapshot;return it(s={...m,targetSnapshot:ut,urlAfterRedirects:G,extras:{...Ce,skipLocationChange:!1,replaceUrl:!1}})}return this.rawUrlTree=m.rawUrl,m.resolve(null),uc.E}),(0,Kr.b)(m=>{const v=new fC(m.id,this.serializeUrl(m.extractedUrl),this.serializeUrl(m.urlAfterRedirects),m.targetSnapshot);this.triggerEvent(v)}),(0,pt.U)(m=>s={...m,guards:b_(m.targetSnapshot,m.currentSnapshot,this.rootContexts)}),function CC(n,e){return(0,Wr.z)(t=>{const{targetSnapshot:r,currentSnapshot:s,guards:{canActivateChecks:u,canDeactivateChecks:c}}=t;return 0===c.length&&0===u.length?it({...t,guardsResult:!0}):function TC(n,e,t,r){return(0,zt.D)(n).pipe((0,Wr.z)(s=>function cE(n,e,t,r,s){const u=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return u&&0!==u.length?it(u.map(m=>{const v=ja(e)??s,b=zu(m,v);return Fa(function aE(n){return n&&xf(n.canDeactivate)}(b)?b.canDeactivate(n,e,t,r):v.runInContext(()=>b(n,e,t,r))).pipe(jo())})).pipe(Hd()):it(!0)}(s.component,s.route,t,e,r)),jo(s=>!0!==s,!0))}(c,r,s,n).pipe((0,Wr.z)(m=>m&&function sE(n){return"boolean"==typeof n}(m)?function uE(n,e,t,r){return(0,zt.D)(e).pipe(ka(s=>Wy(function lE(n,e){return null!==n&&e&&e(new qx(n)),it(!0)}(s.route.parent,r),function SC(n,e){return null!==n&&e&&e(new Wx(n)),it(!0)}(s.route,r),function xC(n,e,t){const r=e[e.length-1],u=e.slice(0,e.length-1).reverse().map(c=>function iE(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(c)).filter(c=>null!==c).map(c=>S0(()=>it(c.guards.map(v=>{const b=ja(c.node)??t,A=zu(v,b);return Fa(function as(n){return n&&xf(n.canActivateChild)}(A)?A.canActivateChild(r,n):b.runInContext(()=>A(r,n))).pipe(jo())})).pipe(Hd())));return it(u).pipe(Hd())}(n,s.path,t),function AC(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return it(!0);const s=r.map(u=>S0(()=>{const c=ja(e)??t,m=zu(u,c);return Fa(function IC(n){return n&&xf(n.canActivate)}(m)?m.canActivate(e,n):c.runInContext(()=>m(e,n))).pipe(jo())}));return it(s).pipe(Hd())}(n,s.route,t))),jo(s=>!0!==s,!0))}(r,u,n,e):it(m)),(0,pt.U)(m=>({...t,guardsResult:m})))})}(this.ngModule.injector,m=>this.triggerEvent(m)),(0,Kr.b)(m=>{if(s.guardsResult=m.guardsResult,fc(m.guardsResult))throw pC(0,m.guardsResult);const v=new h_(m.id,this.serializeUrl(m.extractedUrl),this.serializeUrl(m.urlAfterRedirects),m.targetSnapshot,!!m.guardsResult);this.triggerEvent(v)}),ki(m=>!!m.guardsResult||(this.restoreHistory(m),this.cancelNavigationTransition(m,"",3),!1)),Gg(m=>{if(m.guards.canActivateChecks.length)return it(m).pipe((0,Kr.b)(v=>{const b=new La(v.id,this.serializeUrl(v.extractedUrl),this.serializeUrl(v.urlAfterRedirects),v.targetSnapshot);this.triggerEvent(b)}),Zn(v=>{let b=!1;return it(v).pipe(function OC(n,e){return(0,Wr.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:s}}=t;if(!s.length)return it(t);let u=0;return(0,zt.D)(s).pipe(ka(c=>function sM(n,e,t,r){const s=n.routeConfig,u=n._resolve;return void 0!==s?.title&&!CE(s)&&(u[ju]=s.title),function kC(n,e,t,r){const s=function PC(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===s.length)return it({});const u={};return(0,zt.D)(s).pipe((0,Wr.z)(c=>function FC(n,e,t,r){const s=ja(e)??r,u=zu(n,s);return Fa(u.resolve?u.resolve(e,t):s.runInContext(()=>u(e,t)))}(n[c],e,t,r).pipe(jo(),(0,Kr.b)(m=>{u[c]=m}))),Qy(1),function x0(n){return(0,pt.U)(()=>n)}(u),Uu(c=>Mf(c)?uc.E:cf(c)))}(u,n,e,r).pipe((0,pt.U)(c=>(n._resolvedData=c,n.data=J0(n,t).resolve,s&&CE(s)&&(n.data[ju]=s.title),null)))}(c.route,r,n,e)),(0,Kr.b)(()=>u++),Qy(1),(0,Wr.z)(c=>u===s.length?it(t):uc.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,Kr.b)({next:()=>b=!0,complete:()=>{b||(this.restoreHistory(v),this.cancelNavigationTransition(v,"",2))}}))}),(0,Kr.b)(v=>{const b=new f_(v.id,this.serializeUrl(v.extractedUrl),this.serializeUrl(v.urlAfterRedirects),v.targetSnapshot);this.triggerEvent(b)}))}),Gg(m=>{const v=b=>{const A=[];b.routeConfig?.loadComponent&&!b.routeConfig._loadedComponent&&A.push(this.configLoader.loadComponent(b.routeConfig).pipe((0,Kr.b)(M=>{b.component=M}),(0,pt.U)(()=>{})));for(const M of b.children)A.push(...v(M));return A};return Ag(v(m.targetSnapshot.root)).pipe(ff(),hf(1))}),Gg(()=>this.afterPreactivation()),(0,pt.U)(m=>{const v=function Kx(n,e,t){const r=Bg(n,e._root,t?t._root:void 0);return new K0(r,e)}(this.routeReuseStrategy,m.targetSnapshot,m.currentRouterState);return s={...m,targetRouterState:v}}),(0,Kr.b)(m=>{this.currentUrlTree=m.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(m.urlAfterRedirects,m.rawUrl),this.routerState=m.targetRouterState,"deferred"===this.urlUpdateStrategy&&(m.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,m),this.browserUrlTree=m.urlAfterRedirects)}),((n,e,t)=>(0,pt.U)(r=>(new rE(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,m=>this.triggerEvent(m)),(0,Kr.b)({next(){u=!0},complete(){u=!0}}),pf(()=>{u||c||this.cancelNavigationTransition(s,"",1),this.currentNavigation?.id===s.id&&(this.currentNavigation=null)}),Uu(m=>{if(c=!0,Ua(m)){mC(m)||(this.navigated=!0,this.restoreHistory(s,!0));const v=new pc(s.id,this.serializeUrl(s.extractedUrl),m.message,m.cancellationCode);if(r.next(v),mC(m)){const b=this.urlHandlingStrategy.merge(m.url,this.rawUrlTree),A={skipLocationChange:s.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||us(s.source)};this.scheduleNavigation(b,"imperative",null,A,{resolve:s.resolve,reject:s.reject,promise:s.promise})}else s.resolve(!1)}else{this.restoreHistory(s,!0);const v=new Ls(s.id,this.serializeUrl(s.extractedUrl),m,s.targetSnapshot??void 0);r.next(v);try{s.resolve(this.errorHandler(m))}catch(b){s.reject(b)}}return uc.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next({...this.transitions.value,...t})}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{const s={replaceUrl:!0},u=t.state?.navigationId?t.state:null;if(u){const m={...u};delete m.navigationId,delete m.\u0275routerPageId,0!==Object.keys(m).length&&(s.state=m)}const c=this.parseUrl(t.url);this.scheduleNavigation(c,r,u,s)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){this.config=t.map(Tf),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:s,queryParams:u,fragment:c,queryParamsHandling:m,preserveFragment:v}=r,b=s||this.routerState.root,A=v?this.currentUrlTree.fragment:c;let M=null;switch(m){case"merge":M={...this.currentUrlTree.queryParams,...u};break;case"preserve":M=this.currentUrlTree.queryParams;break;default:M=u||null}return null!==M&&(M=this.removeEmptyProps(M)),uC(b,this.currentUrlTree,t,M,A??null)}navigateByUrl(t,r={skipLocationChange:!1}){const s=fc(t)?t:this.parseUrl(t),u=this.urlHandlingStrategy.merge(s,this.rawUrlTree);return this.scheduleNavigation(u,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function Zg(n){for(let e=0;e<n.length;e++){if(null==n[e])throw new f.vHH(4008,false)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(s){r=this.malformedUriErrorHandler(s,this.urlSerializer,t)}return r}isActive(t,r){let s;if(s=!0===r?{...$C}:!1===r?{...Ho}:r,fc(t))return O0(this.currentUrlTree,t,s);const u=this.parseUrl(t);return O0(this.currentUrlTree,u,s)}removeEmptyProps(t){return Object.keys(t).reduce((r,s)=>{const u=t[s];return null!=u&&(r[s]=u),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new Gu(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.titleStrategy?.updateTitle(this.routerState.snapshot),t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,s,u,c){if(this.disposed)return Promise.resolve(!1);let m,v,b;c?(m=c.resolve,v=c.reject,b=c.promise):b=new Promise((L,G)=>{m=L,v=G});const A=++this.navigationId;let M;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(s=this.location.getState()),M=s&&s.\u0275routerPageId?s.\u0275routerPageId:u.replaceUrl||u.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1):M=0,this.setTransition({id:A,targetPageId:M,source:r,restoredState:s,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:u,resolve:m,reject:v,promise:b,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),b.catch(L=>Promise.reject(L))}setBrowserUrl(t,r){const s=this.urlSerializer.serialize(t),u={...r.extras.state,...this.generateNgRouterState(r.id,r.targetPageId)};this.location.isCurrentPathEqualTo(s)||r.extras.replaceUrl?this.location.replaceState(s,"",u):this.location.go(s,"",u)}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const s=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.currentNavigation?.finalUrl||0===s?this.currentUrlTree===this.currentNavigation?.finalUrl&&0===s&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(s)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r,s){const u=new pc(t.id,this.serializeUrl(t.extractedUrl),r,s);this.triggerEvent(u),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){f.$Z()},n.\u0275prov=f.Yz7({token:n,factory:function(){return Jr()},providedIn:"root"}),n})();function us(n){return"imperative"!==n}let Ga=(()=>{class n{constructor(t,r,s){this.router=t,this.route=r,this.locationStrategy=s,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.commands=null,this.href=null,this.onChanges=new Bo.x,this.subscription=t.events.subscribe(u=>{u instanceof Gu&&this.updateTargetUrlAndHref()})}set preserveFragment(t){this._preserveFragment=(0,f.D6c)(t)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(t){this._skipLocationChange=(0,f.D6c)(t)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(t){this._replaceUrl=(0,f.D6c)(t)}get replaceUrl(){return this._replaceUrl}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:null}ngOnChanges(t){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(t,r,s,u,c){return!!(0!==t||r||s||u||c||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!1)}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(yn),f.Y36(Ud),f.Y36(me))},n.\u0275dir=f.lG2({type:n,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(t,r){1&t&&f.NdJ("click",function(u){return r.onClick(u.button,u.ctrlKey,u.shiftKey,u.altKey,u.metaKey)}),2&t&&f.uIk("target",r.target)("href",r.href,f.LSH)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[f.TTD]}),n})();class yc{}let Yd=(()=>{class n{constructor(t,r,s,u,c){this.router=t,this.injector=s,this.preloadingStrategy=u,this.loader=c}setUpPreloading(){this.subscription=this.router.events.pipe(ki(t=>t instanceof Gu),ka(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const s=[];for(const u of r){u.providers&&!u._injector&&(u._injector=(0,f.MMx)(u.providers,t,`Route: ${u.path}`));const c=u._injector??t,m=u._loadedInjector??c;u.loadChildren&&!u._loadedRoutes&&void 0===u.canLoad||u.loadComponent&&!u._loadedComponent?s.push(this.preloadConfig(c,u)):(u.children||u._loadedRoutes)&&s.push(this.processRoutes(m,u.children??u._loadedRoutes))}return(0,zt.D)(s).pipe((0,ac.J)())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let s;s=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):it(null);const u=s.pipe((0,Wr.z)(c=>null===c?it(void 0):(r._loadedRoutes=c.routes,r._loadedInjector=c.injector,this.processRoutes(c.injector??t,c.routes))));if(r.loadComponent&&!r._loadedComponent){const c=this.loader.loadComponent(r);return(0,zt.D)([u,c]).pipe((0,ac.J)())}return u})}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(yn),f.LFG(f.Sil),f.LFG(f.lqb),f.LFG(yc),f.LFG(Ha))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const qu=new f.OlP("");let _c=(()=>{class n{constructor(t,r,s={}){this.router=t,this.viewportScroller=r,this.options=s,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},s.scrollPositionRestoration=s.scrollPositionRestoration||"disabled",s.anchorScrolling=s.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Fg?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Gu&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof wf&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new wf(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){f.$Z()},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();function vc(n,e){return{\u0275kind:n,\u0275providers:e}}function Kg(n){return[{provide:Wd,multi:!0,useValue:n}]}function O_(){const n=(0,f.f3M)(f.zs3);return e=>{const t=n.get(f.z2F);if(e!==t.components[0])return;const r=n.get(yn),s=n.get(k_);1===n.get(Yg)&&r.initialNavigation(),n.get(ME,null,f.XFs.Optional)?.setUpPreloading(),n.get(qu,null,f.XFs.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),s.next(),s.complete()}}const k_=new f.OlP("",{factory:()=>new Bo.x}),Yg=new f.OlP("",{providedIn:"root",factory:()=>1});const ME=new f.OlP("");function RE(n){return vc(0,[{provide:ME,useExisting:Yd},{provide:yc,useExisting:n}])}const jf=new f.OlP("ROUTER_FORROOT_GUARD"),Qg=[Ae,{provide:L0,useClass:n_},{provide:yn,useFactory:Jr},bf,{provide:Ud,useFactory:function N_(n){return n.routerState.root},deps:[yn]},Ha];function P_(){return new f.PXZ("Router",yn)}let OE=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[Qg,[],Kg(t),{provide:jf,useFactory:PE,deps:[[yn,new f.FiY,new f.tp0]]},{provide:qg,useValue:r||{}},r?.useHash?{provide:me,useClass:nt}:{provide:me,useClass:Ke},{provide:qu,useFactory:()=>{const n=(0,f.f3M)(yn),e=(0,f.f3M)(eu),t=(0,f.f3M)(qg);return t.scrollOffset&&e.setOffset(t.scrollOffset),new _c(n,e,t)}},r?.preloadingStrategy?RE(r.preloadingStrategy).\u0275providers:[],{provide:f.PXZ,multi:!0,useFactory:P_},r?.initialNavigation?V_(r):[],[{provide:U_,useFactory:O_},{provide:f.tb,multi:!0,useExisting:U_}]]}}static forChild(t){return{ngModule:n,providers:[Kg(t)]}}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(jf,8))},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[w_]}),n})();function PE(n){return"guarded"}function V_(n){return["disabled"===n.initialNavigation?vc(3,[{provide:f.ip1,multi:!0,useFactory:()=>{const e=(0,f.f3M)(yn);return()=>{e.setUpLocationChangeListener()}}},{provide:Yg,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?vc(2,[{provide:Yg,useValue:0},{provide:f.ip1,multi:!0,deps:[f.zs3],useFactory:e=>{const t=e.get(B,Promise.resolve(null));let r=!1;return()=>t.then(()=>new Promise(u=>{const c=e.get(yn),m=e.get(k_);(function s(u){e.get(yn).events.pipe(ki(m=>m instanceof Gu||m instanceof pc||m instanceof Ls),(0,pt.U)(m=>m instanceof Gu||m instanceof pc&&(0===m.code||1===m.code)&&null),ki(m=>null!==m),hf(1)).subscribe(()=>{u()})})(()=>{u(!0),r=!0}),c.afterPreactivation=()=>(u(!0),r||m.closed?it(void 0):m),c.initialNavigation()}))}}]).\u0275providers:[]]}const U_=new f.OlP("");class VE{constructor(e,t){this.user_email=e,this.timestamp=t}getLiteralObjectRepresentation(){return{user_email:this.user_email,timestamp:this.timestamp}}}var WC=P(6451),$f=P(5363),UE=P(6063);class BE extends Bo.x{constructor(e=1/0,t=1/0,r=UE.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:s,_timestampProvider:u,_windowTime:c}=this;t||(r.push(e),!s&&r.push(u.now()+c)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:s}=this,u=s.slice();for(let c=0;c<u.length&&!e.closed;c+=r?1:2)e.next(u[c]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:s}=this,u=(s?1:2)*e;if(e<1/0&&u<r.length&&r.splice(0,r.length-u),!s){const c=t.now();let m=0;for(let v=1;v<r.length&&r[v]<=c;v+=2)m=v;m&&r.splice(0,m+1)}}}var jE=P(3099);function $E(n,e,t){let r,s=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:s=!1,scheduler:t}=n):r=n??1/0,(0,jE.B)({connector:()=>new BE(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:s})}function HE(n,e){return(0,Ig.m)(e)?Zn(()=>n,e):Zn(()=>n)}var B_=P(9468),Cn=P(5813),Xr=P(2011);P(5867);var ye=P(5861),Vs=P(9681),wc=P(4859),Et=P(2090),Wu=P(1877);const qE=new Map,WE={activated:!1,tokenObservers:[]},tT={initialized:!1,enabled:!1};function wr(n){return qE.get(n)||WE}function Go(n,e){qE.set(n,e)}function Gf(){return tT}class _o{constructor(e,t,r,s,u){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=s,this.upperBound=u,this.pending=null,this.nextErrorWaitInterval=s,s>u)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,ye.Z)(function*(){t.stop();try{t.pending=new Et.BH,yield function ZE(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new Et.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const Ei=new Et.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function YE(n){if(!wr(n).activated)throw Ei.create("use-before-activation",{appName:n.name})}function Ec(n,e){return H_.apply(this,arguments)}function H_(){return(H_=(0,ye.Z)(function*({url:n,body:e},t){var r,s;const u={"Content-Type":"application/json"},c=t.getImmediate({optional:!0});if(c){const G=yield c.getHeartbeatsHeader();G&&(u["X-Firebase-Client"]=G)}const m={method:"POST",body:JSON.stringify(e),headers:u};let v,b;try{v=yield fetch(n,m)}catch(G){throw Ei.create("fetch-network-error",{originalErrorMessage:null===(r=G)||void 0===r?void 0:r.message})}if(200!==v.status)throw Ei.create("fetch-status-error",{httpStatus:v.status});try{b=yield v.json()}catch(G){throw Ei.create("fetch-parse-error",{originalErrorMessage:null===(s=G)||void 0===s?void 0:s.message})}const A=b.ttl.match(/^([\d.]+)(s)$/);if(!A||!A[2]||isNaN(Number(A[1])))throw Ei.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${b.ttl}`});const M=1e3*Number(A[1]),L=Date.now();return{token:b.token,expireTimeMillis:L+M,issuedAtTimeMillis:L}})).apply(this,arguments)}function JE(n,e){const{projectId:t,appId:r,apiKey:s}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${r}:exchangeDebugToken?key=${s}`,body:{debug_token:e}}}const qf="firebase-app-check-store";let Wf=null;function z_(){return Wf||(Wf=new Promise((n,e)=>{var t;try{const r=indexedDB.open("firebase-app-check-database",1);r.onsuccess=s=>{n(s.target.result)},r.onerror=s=>{var u;e(Ei.create("storage-open",{originalErrorMessage:null===(u=s.target.error)||void 0===u?void 0:u.message}))},r.onupgradeneeded=s=>{0===s.oldVersion&&s.target.result.createObjectStore(qf,{keyPath:"compositeKey"})}}catch(r){e(Ei.create("storage-open",{originalErrorMessage:null===(t=r)||void 0===t?void 0:t.message}))}}),Wf)}function nm(){return(nm=(0,ye.Z)(function*(n,e){const r=(yield z_()).transaction(qf,"readwrite"),u=r.objectStore(qf).put({compositeKey:n,value:e});return new Promise((c,m)=>{u.onsuccess=v=>{c()},r.onerror=v=>{var b;m(Ei.create("storage-set",{originalErrorMessage:null===(b=v.target.error)||void 0===b?void 0:b.message}))}})})).apply(this,arguments)}const Zf=new Wu.Yd("@firebase/app-check");function rI(n,e){return(0,Et.hl)()?function eI(n,e){return function q_(n,e){return nm.apply(this,arguments)}(function Z_(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{Zf.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function iI(){return Gf().enabled}function sI(){return Q_.apply(this,arguments)}function Q_(){return(Q_=(0,ye.Z)(function*(){const n=Gf();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const uT={error:"UNKNOWN_ERROR"};function lT(n){return Et.US.encodeString(JSON.stringify(n),!1)}function im(n){return J_.apply(this,arguments)}function J_(){return(J_=(0,ye.Z)(function*(n,e=!1){const t=n.app;YE(t);const r=wr(t);let u,s=r.token;if(!s){const v=yield r.cachedTokenPromise;v&&Kf(v)&&(s=v)}if(!e&&s&&Kf(s))return{token:s.token};let m,c=!1;if(iI()){r.exchangeTokenPromise||(r.exchangeTokenPromise=Ec(JE(t,yield sI()),n.heartbeatServiceProvider).then(b=>(r.exchangeTokenPromise=void 0,b)),c=!0);const v=yield r.exchangeTokenPromise;return yield rI(t,v),Go(t,Object.assign(Object.assign({},r),{token:v})),{token:v.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().then(v=>(r.exchangeTokenPromise=void 0,v)),c=!0),s=yield r.exchangeTokenPromise}catch(v){"appCheck/throttled"===v.code?Zf.warn(v.message):Zf.error(v),u=v}return s?(m={token:s.token},Go(t,Object.assign(Object.assign({},r),{token:s})),yield rI(t,s)):m=aI(u),c&&tv(t,m),m})).apply(this,arguments)}function ev(n,e){const t=wr(n),r=t.tokenObservers.filter(s=>s.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),Go(n,Object.assign(Object.assign({},t),{tokenObservers:r}))}function oI(n){const{app:e}=n,t=wr(e);let r=t.tokenRefresher;r||(r=function cT(n){const{app:e}=n;return new _o((0,ye.Z)(function*(){let r;if(r=wr(e).token?yield im(n,!0):yield im(n),r.error)throw r.error}),()=>!0,()=>{const t=wr(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),Go(e,Object.assign(Object.assign({},t),{tokenRefresher:r}))),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function tv(n,e){const t=wr(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch{}}function Kf(n){return n.expireTimeMillis-Date.now()>0}function aI(n){return{token:lT(uT),error:n}}class uI{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=wr(this.app);for(const t of e)ev(this.app,t.next);return Promise.resolve()}}const sv="app-check-internal";!function EI(){(0,Vs._registerComponent)(new wc.wA("app-check",n=>function lI(n,e){return new uI(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(sv).initialize()})),(0,Vs._registerComponent)(new wc.wA(sv,n=>function cI(n){return{getToken:e=>im(n,e),addTokenListener:e=>function X_(n,e,t,r){const{app:s}=n,u=wr(s),c={next:t,error:r,type:e};if(Go(s,Object.assign(Object.assign({},u),{tokenObservers:[...u.tokenObservers,c]})),u.token&&Kf(u.token)){const m=u.token;Promise.resolve().then(()=>{t({token:m.token}),oI(n)}).catch(()=>{})}u.cachedTokenPromise.then(()=>oI(n))}(n,"INTERNAL",e),removeTokenListener:e=>ev(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Vs.registerVersion)("@firebase/app-check","0.5.12")}();class Yf{constructor(){return(0,Cn.vb)("app-check")}}typeof window<"u"&&window;var Dc=P(127);const bI=new f.OlP("angularfire2.auth.use-emulator"),DI=new f.OlP("angularfire2.auth.settings"),ov=new f.OlP("angularfire2.auth.tenant-id"),av=new f.OlP("angularfire2.auth.langugage-code"),uv=new f.OlP("angularfire2.auth.use-device-language"),CI=new f.OlP("angularfire.auth.persistence"),lv=(n,e,t,r,s,u,c,m)=>(0,Xr.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const v=e.runOutsideAngular(()=>n.auth());if(t&&v.useEmulator(...t),r&&(v.tenantId=r),v.languageCode=s,u&&v.useDeviceLanguage(),c)for(const[b,A]of Object.entries(c))v.settings[b]=A;return m&&v.setPersistence(m),v},[t,r,s,u,c,m]);let cm=(()=>{class n{constructor(t,r,s,u,c,m,v,b,A,M,L,G){const J=new Bo.x,Ie=it(void 0).pipe((0,$f.Q)(c.outsideAngular),Zn(()=>u.runOutsideAngular(()=>Promise.resolve().then(P.bind(P,2274)))),(0,pt.U)(()=>(0,Xr.on)(t,u,r)),(0,pt.U)(Ce=>lv(Ce,u,m,b,A,M,v,L)),$E({bufferSize:1,refCount:!1}));if(hr(s))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=it(null);else{Ie.pipe(jo()).subscribe();const Ze=Ie.pipe(Zn(tt=>tt.getRedirectResult().then(Tt=>Tt,()=>null)),Cn.iC,$E({bufferSize:1,refCount:!1})),ut=Ie.pipe(Zn(tt=>new fr.y(Tt=>({unsubscribe:u.runOutsideAngular(()=>tt.onAuthStateChanged(kt=>Tt.next(kt),kt=>Tt.error(kt),()=>Tt.complete()))})))),lt=Ie.pipe(Zn(tt=>new fr.y(Tt=>({unsubscribe:u.runOutsideAngular(()=>tt.onIdTokenChanged(kt=>Tt.next(kt),kt=>Tt.error(kt),()=>Tt.complete()))}))));this.authState=Ze.pipe(HE(ut),(0,B_.R)(c.outsideAngular),(0,$f.Q)(c.insideAngular)),this.user=Ze.pipe(HE(lt),(0,B_.R)(c.outsideAngular),(0,$f.Q)(c.insideAngular)),this.idToken=this.user.pipe(Zn(tt=>tt?(0,zt.D)(tt.getIdToken()):it(null))),this.idTokenResult=this.user.pipe(Zn(tt=>tt?(0,zt.D)(tt.getIdTokenResult()):it(null))),this.credential=(0,WC.T)(Ze,J,this.authState.pipe(ki(tt=>!tt))).pipe((0,pt.U)(tt=>tt?.user?tt:null),(0,B_.R)(c.outsideAngular),(0,$f.Q)(c.insideAngular))}return(0,Xr.pX)(this,Ie,u,{spy:{apply:(Ce,Ze,ut)=>{(Ce.startsWith("signIn")||Ce.startsWith("createUser"))&&ut.then(lt=>J.next(lt))}}})}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Xr.Dh),f.LFG(Xr.xv,8),f.LFG(f.Lbi),f.LFG(f.R0b),f.LFG(Cn.HU),f.LFG(bI,8),f.LFG(DI,8),f.LFG(ov,8),f.LFG(av,8),f.LFG(uv,8),f.LFG(CI,8),f.LFG(Yf,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),vT=(()=>{class n{constructor(){Dc.Z.registerVersion("angularfire",Cn.q4.full,"auth-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[cm]}),n})(),TI=(()=>{class n{constructor(t){this.auth=t,this.currentUser=null,this.notifier$=new Bo.x}Login(t,r){return this.auth.signInWithEmailAndPassword(t,r)}RegisterUser(t,r){return this.auth.createUserWithEmailAndPassword(t,r)}SetCurrentUser(t){this.currentUser=t,this.Notify()}GetCurrentUserEmail(){return this.currentUser?.email}GetCurrentUserPhotoUrl(){return this.currentUser?.photoURL}GetCurrentUserDisplayName(){return this.currentUser?.displayName}IsUserLoggedIn(){return null!=this.currentUser}LogOut(){this.currentUser=null,this.Notify()}Notify(){this.notifier$.next(this.currentUser)}UserActivity(){return this.notifier$}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(cm))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var wT=P(4986);function SI(){return(0,Zr.e)((n,e)=>{let t,r=!1;n.subscribe((0,pr.x)(e,s=>{const u=t;t=s,r&&e.next([u,s]),r=!0}))})}function AI(n,e){return n===e}P(2274);var Ye,xI=P(3942),ET=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},qo={},dv=dv||{},xt=ET||self;function dm(){}function hv(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function Jf(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var fv="closure_uid_"+(1e9*Math.random()>>>0),IT=0;function th(n,e,t){return n.call.apply(n.bind,arguments)}function bT(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var s=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(s,r),n.apply(e,s)}}return function(){return n.apply(e,arguments)}}function xr(n,e,t){return(xr=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?th:bT).apply(null,arguments)}function hm(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function Mr(n,e){function t(){}t.prototype=e.prototype,n.Z=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Vb=function(r,s,u){for(var c=Array(arguments.length-2),m=2;m<arguments.length;m++)c[m-2]=arguments[m];return e.prototype[s].apply(r,c)}}function Zu(){this.s=this.s,this.o=this.o}var DT={};Zu.prototype.s=!1,Zu.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function MI(n){return Object.prototype.hasOwnProperty.call(n,fv)&&n[fv]||(n[fv]=++IT)}(this);delete DT[n]}},Zu.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const fm=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1},NI=Array.prototype.forEach?function(n,e,t){Array.prototype.forEach.call(n,e,t)}:function(n,e,t){const r=n.length,s="string"==typeof n?n.split(""):n;for(let u=0;u<r;u++)u in s&&e.call(t,s[u],u,n)};function pv(n){return Array.prototype.concat.apply([],arguments)}function gv(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function pm(n){return/^[\s\xa0]*$/.test(n)}var ai,kI=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function ei(n,e){return-1!=n.indexOf(e)}function mv(n,e){return n<e?-1:n>e?1:0}e:{var PI=xt.navigator;if(PI){var FI=PI.userAgent;if(FI){ai=FI;break e}}ai=""}function yv(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function LI(n){const e={};for(const t in n)e[t]=n[t];return e}var VI="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function UI(n,e){let t,r;for(let s=1;s<arguments.length;s++){for(t in r=arguments[s],r)n[t]=r[t];for(let u=0;u<VI.length;u++)t=VI[u],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function _v(n){return _v[" "](n),n}_v[" "]=dm;var gm,n,BI=ei(ai,"Opera"),Cc=ei(ai,"Trident")||ei(ai,"MSIE"),jI=ei(ai,"Edge"),vv=jI||Cc,wv=ei(ai,"Gecko")&&!(ei(ai.toLowerCase(),"webkit")&&!ei(ai,"Edge"))&&!(ei(ai,"Trident")||ei(ai,"MSIE"))&&!ei(ai,"Edge"),TT=ei(ai.toLowerCase(),"webkit")&&!ei(ai,"Edge");function $I(){var n=xt.document;return n?n.documentMode:void 0}e:{var Xf="",ep=(n=ai,wv?/rv:([^\);]+)(\)|;)/.exec(n):jI?/Edge\/([\d\.]+)/.exec(n):Cc?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):TT?/WebKit\/(\S+)/.exec(n):BI?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(ep&&(Xf=ep?ep[1]:""),Cc){var mm=$I();if(null!=mm&&mm>parseFloat(Xf)){gm=String(mm);break e}}gm=Xf}var Ev={};var AT=xt.document&&Cc&&($I()||parseInt(gm,10))||void 0,HI=function(){if(!xt.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{xt.addEventListener("test",dm,e),xt.removeEventListener("test",dm,e)}catch{}return n}();function ar(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}function nh(n,e){if(ar.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(wv){e:{try{_v(e.nodeName);var s=!0;break e}catch{}s=!1}s||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:xT[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&nh.Z.h.call(this)}}ar.prototype.h=function(){this.defaultPrevented=!0},Mr(nh,ar);var xT={2:"touch",3:"pen",4:"mouse"};nh.prototype.h=function(){nh.Z.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var _m="closure_listenable_"+(1e6*Math.random()|0),GI=0;function bv(n,e,t,r,s){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ia=s,this.key=++GI,this.ca=this.fa=!1}function vm(n){n.ca=!0,n.listener=null,n.proxy=null,n.src=null,n.ia=null}function rh(n){this.src=n,this.g={},this.h=0}function Dv(n,e){var t=e.type;if(t in n.g){var u,r=n.g[t],s=fm(r,e);(u=0<=s)&&Array.prototype.splice.call(r,s,1),u&&(vm(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function wm(n,e,t,r){for(var s=0;s<n.length;++s){var u=n[s];if(!u.ca&&u.listener==e&&u.capture==!!t&&u.ia==r)return s}return-1}rh.prototype.add=function(n,e,t,r,s){var u=n.toString();(n=this.g[u])||(n=this.g[u]=[],this.h++);var c=wm(n,e,r,s);return-1<c?(e=n[c],t||(e.fa=!1)):((e=new bv(e,this.src,u,!!r,s)).fa=t,n.push(e)),e};var tp="closure_lm_"+(1e6*Math.random()|0),Em={};function Cv(n,e,t,r,s){if(r&&r.once)return qI(n,e,t,r,s);if(Array.isArray(e)){for(var u=0;u<e.length;u++)Cv(n,e[u],t,r,s);return null}return t=Av(t),n&&n[_m]?n.N(e,t,Jf(r)?!!r.capture:!!r,s):Tv(n,e,t,!1,r,s)}function Tv(n,e,t,r,s,u){if(!e)throw Error("Invalid event type");var c=Jf(s)?!!s.capture:!!s,m=YI(n);if(m||(n[tp]=m=new rh(n)),(t=m.add(e,t,r,c,u)).proxy)return t;if(r=function zI(){var e=KI;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)HI||(s=c),void 0===s&&(s=!1),n.addEventListener(e.toString(),r,s);else if(n.attachEvent)n.attachEvent(ZI(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function qI(n,e,t,r,s){if(Array.isArray(e)){for(var u=0;u<e.length;u++)qI(n,e[u],t,r,s);return null}return t=Av(t),n&&n[_m]?n.O(e,t,Jf(r)?!!r.capture:!!r,s):Tv(n,e,t,!0,r,s)}function WI(n,e,t,r,s){if(Array.isArray(e))for(var u=0;u<e.length;u++)WI(n,e[u],t,r,s);else r=Jf(r)?!!r.capture:!!r,t=Av(t),n&&n[_m]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=wm(u=n.g[e],t,r,s))&&(vm(u[t]),Array.prototype.splice.call(u,t,1),0==u.length&&(delete n.g[e],n.h--))):n&&(n=YI(n))&&(e=n.g[e.toString()],n=-1,e&&(n=wm(e,t,r,s)),(t=-1<n?e[n]:null)&&Sv(t))}function Sv(n){if("number"!=typeof n&&n&&!n.ca){var e=n.src;if(e&&e[_m])Dv(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(ZI(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=YI(e))?(Dv(t,n),0==t.h&&(t.src=null,e[tp]=null)):vm(n)}}}function ZI(n){return n in Em?Em[n]:Em[n]="on"+n}function KI(n,e){if(n.ca)n=!0;else{e=new nh(e,this);var t=n.listener,r=n.ia||n.src;n.fa&&Sv(n),n=t.call(r,e)}return n}function YI(n){return(n=n[tp])instanceof rh?n:null}var Im="__closure_events_fn_"+(1e9*Math.random()>>>0);function Av(n){return"function"==typeof n?n:(n[Im]||(n[Im]=function(e){return n.handleEvent(e)}),n[Im])}function Rr(){Zu.call(this),this.i=new rh(this),this.P=this,this.I=null}function ui(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new ar(e,n);else if(e instanceof ar)e.target=e.target||n;else{var s=e;UI(e=new ar(r,n),s)}if(s=!0,t)for(var u=t.length-1;0<=u;u--){var c=e.g=t[u];s=xv(c,r,!0,e)&&s}if(s=xv(c=e.g=n,r,!0,e)&&s,s=xv(c,r,!1,e)&&s,t)for(u=0;u<t.length;u++)s=xv(c=e.g=t[u],r,!1,e)&&s}function xv(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var s=!0,u=0;u<e.length;++u){var c=e[u];if(c&&!c.ca&&c.capture==t){var m=c.listener,v=c.ia||c.src;c.fa&&Dv(n.i,c),s=!1!==m.call(v,r)&&s}}return s&&!r.defaultPrevented}Mr(Rr,Zu),Rr.prototype[_m]=!0,Rr.prototype.removeEventListener=function(n,e,t,r){WI(this,n,e,t,r)},Rr.prototype.M=function(){if(Rr.Z.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)vm(t[r]);delete n.g[e],n.h--}}this.I=null},Rr.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},Rr.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var Mv=xt.JSON.stringify;function MT(){var n=JI;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var Nv,QI=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new NT,n=>n.reset());class NT{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function OT(n){xt.setTimeout(()=>{throw n},0)}function Rv(n,e){Nv||function kT(){var n=xt.Promise.resolve(void 0);Nv=function(){n.then(PT)}}(),Ov||(Nv(),Ov=!0),JI.add(n,e)}var Ov=!1,JI=new class RT{constructor(){this.h=this.g=null}add(e,t){const r=QI.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function PT(){for(var n;n=MT();){try{n.h.call(n.g)}catch(t){OT(t)}var e=QI;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}Ov=!1}function Ku(n,e){Rr.call(this),this.h=n||1,this.g=e||xt,this.j=xr(this.kb,this),this.l=Date.now()}function bm(n){n.da=!1,n.S&&(n.g.clearTimeout(n.S),n.S=null)}function Dm(n,e,t){if("function"==typeof n)t&&(n=xr(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=xr(n.handleEvent,n)}return 2147483647<Number(e)?-1:xt.setTimeout(n,e||0)}function kv(n){n.g=Dm(()=>{n.g=null,n.i&&(n.i=!1,kv(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}Mr(Ku,Rr),(Ye=Ku.prototype).da=!1,Ye.S=null,Ye.kb=function(){if(this.da){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-n):(this.S&&(this.g.clearTimeout(this.S),this.S=null),ui(this,"tick"),this.da&&(bm(this),this.start()))}},Ye.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Ye.M=function(){Ku.Z.M.call(this),bm(this),delete this.g};class XI extends Zu{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:kv(this)}M(){super.M(),this.g&&(xt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ih(n){Zu.call(this),this.h=n,this.g={}}Mr(ih,Zu);var eb=[];function tb(n,e,t,r){Array.isArray(t)||(t&&(eb[0]=t.toString()),t=eb);for(var s=0;s<t.length;s++){var u=Cv(e,t[s],r||n.handleEvent,!1,n.h||n);if(!u)break;n.g[u.key]=u}}function FT(n){yv(n.g,function(e,t){this.g.hasOwnProperty(t)&&Sv(e)},n),n.g={}}function Cm(){this.g=!0}function sh(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function np(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var s=r[1];if(Array.isArray(s)&&!(1>s.length)){var u=s[0];if("noop"!=u&&"stop"!=u&&"close"!=u)for(var c=1;c<s.length;c++)s[c]=""}}}return Mv(t)}catch{return e}}(n,t)+(r?" "+r:"")})}ih.prototype.M=function(){ih.Z.M.call(this),FT(this)},ih.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Cm.prototype.Aa=function(){this.g=!1},Cm.prototype.info=function(){};var Tc={},Tm=null;function ls(){return Tm=Tm||new Rr}function nb(n){ar.call(this,Tc.Ma,n)}function Sc(n){const e=ls();ui(e,new nb(e,n))}function oh(n,e){ar.call(this,Tc.STAT_EVENT,n),this.stat=e}function Ii(n){const e=ls();ui(e,new oh(e,n))}function rb(n,e){ar.call(this,Tc.Na,n),this.size=e}function rp(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return xt.setTimeout(function(){n()},e)}Tc.Ma="serverreachability",Mr(nb,ar),Tc.STAT_EVENT="statevent",Mr(oh,ar),Tc.Na="timingevent",Mr(rb,ar);var Ac={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},ip={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function Pv(){}function Fv(){}Pv.prototype.h=null;var Lv,ah={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function sp(){ar.call(this,"d")}function Sm(){ar.call(this,"c")}function Am(){}function xm(n,e,t,r){this.l=n,this.j=e,this.m=t,this.X=r||1,this.V=new ih(this),this.P=Vv,this.W=new Ku(n=vv?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new Mm}function Mm(){this.i=null,this.g="",this.h=!1}Mr(sp,ar),Mr(Sm,ar),Mr(Am,Pv),Am.prototype.g=function(){return new XMLHttpRequest},Am.prototype.i=function(){return{}},Lv=new Am;var Vv=45e3,Rm={},uh={};function op(n,e,t){n.K=1,n.v=Ju(za(e)),n.s=t,n.U=!0,sb(n,null)}function sb(n,e){n.F=Date.now(),lh(n),n.A=za(n.v);var t=n.A,r=n.X;Array.isArray(r)||(r=[String(r)]),db(t.h,"t",r),n.C=0,t=n.l.H,n.h=new Mm,n.g=oS(n.l,t?e:null,!n.s),0<n.O&&(n.L=new XI(xr(n.Ia,n,n.g),n.O)),tb(n.V,n.g,"readystatechange",n.gb),e=n.H?LI(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ea(n.A,n.u,n.s,e)):(n.u="GET",n.g.ea(n.A,n.u,null,e)),Sc(1),function LT(n,e,t,r,s,u){n.info(function(){if(n.g)if(u)for(var c="",m=u.split("&"),v=0;v<m.length;v++){var b=m[v].split("=");if(1<b.length){var A=b[0];b=b[1];var M=A.split("_");c=2<=M.length&&"type"==M[1]?c+(A+"=")+b+"&":c+(A+"=redacted&")}}else c=null;else c=u;return"XMLHTTP REQ ("+r+") [attempt "+s+"]: "+e+"\n"+t+"\n"+c})}(n.j,n.u,n.A,n.m,n.X,n.s)}function ob(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Ba}function ab(n,e,t){let s,r=!0;for(;!n.I&&n.C<t.length;){if(s=BT(n,t),s==uh){4==e&&(n.o=4,Ii(14),r=!1),sh(n.j,n.m,null,"[Incomplete Response]");break}if(s==Rm){n.o=4,Ii(15),sh(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}sh(n.j,n.m,s,null),Om(n,s)}ob(n)&&s!=uh&&s!=Rm&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,Ii(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.aa&&(n.aa=!0,(e=n.l).g==n&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+t.length),gh(e),e.L=!0,Ii(11))):(sh(n.j,n.m,t,"[Invalid Chunked Response]"),Yu(n),up(n))}function BT(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?uh:(t=Number(e.substring(t,r)),isNaN(t)?Rm:(r+=1)+t>e.length?uh:(e=e.substr(r,t),n.C=r+t,e))}function lh(n){n.Y=Date.now()+n.P,Nm(n,n.P)}function Nm(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=rp(xr(n.eb,n),e)}function ap(n){n.B&&(xt.clearTimeout(n.B),n.B=null)}function up(n){0==n.l.G||n.I||iS(n.l,n)}function Yu(n){ap(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,bm(n.W),FT(n.V),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function Om(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||fb(t.i,n)))if(t.I=n.N,!n.J&&fb(t.i,n)&&3==t.G){try{var r=t.Ca.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var s=r;if(0==s[0]){e:if(!t.u){if(t.g){if(!(t.g.F+3e3<n.F))break e;Xv(t),fp(t)}Jv(t),Ii(18)}}else t.ta=s[1],0<t.ta-t.U&&37500>s[2]&&t.N&&0==t.A&&!t.v&&(t.v=rp(xr(t.ab,t),6e3));if(1>=hb(t.i)&&t.ka){try{t.ka()}catch{}t.ka=void 0}}else Rc(t,11)}else if((n.J||t.g==n)&&Xv(t),!pm(e))for(s=t.Ca.g.parse(e),e=0;e<s.length;e++){let b=s[e];if(t.U=b[0],b=b[1],2==t.G)if("c"==b[0]){t.J=b[1],t.la=b[2];const A=b[3];null!=A&&(t.ma=A,t.h.info("VER="+t.ma));const M=b[4];null!=M&&(t.za=M,t.h.info("SVER="+t.za));const L=b[5];null!=L&&"number"==typeof L&&0<L&&(t.K=r=1.5*L,t.h.info("backChannelRequestTimeoutMs_="+r)),r=t;const G=n.g;if(G){const J=G.g?G.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(J){var u=r.i;!u.g&&(ei(J,"spdy")||ei(J,"quic")||ei(J,"h2"))&&(u.j=u.l,u.g=new Set,u.h&&(Kv(u,u.h),u.h=null))}if(r.D){const Ie=G.g?G.g.getResponseHeader("X-HTTP-Session-Id"):null;Ie&&(r.sa=Ie,Tn(r.F,r.D,Ie))}}t.G=3,t.j&&t.j.xa(),t.$&&(t.O=Date.now()-n.F,t.h.info("Handshake RTT: "+t.O+"ms"));var c=n;if((r=t).oa=Tb(r,r.H?r.la:null,r.W),c.J){pb(r.i,c);var m=c,v=r.K;v&&m.setTimeout(v),m.B&&(ap(m),lh(m)),r.g=c}else bb(r);0<t.l.length&&gp(t)}else"stop"!=b[0]&&"close"!=b[0]||Rc(t,7);else 3==t.G&&("stop"==b[0]||"close"==b[0]?"stop"==b[0]?Rc(t,7):Bm(t):"noop"!=b[0]&&t.j&&t.j.wa(b),t.A=0)}Sc(4)}catch{}}function km(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(hv(n)||"string"==typeof n)NI(n,e,void 0);else{if(n.T&&"function"==typeof n.T)var t=n.T();else if(n.R&&"function"==typeof n.R)t=void 0;else if(hv(n)||"string"==typeof n){t=[];for(var r=n.length,s=0;s<r;s++)t.push(s)}else for(s in t=[],r=0,n)t[r++]=s;r=function jT(n){if(n.R&&"function"==typeof n.R)return n.R();if("string"==typeof n)return n.split("");if(hv(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),s=r.length;for(var u=0;u<s;u++)e.call(void 0,r[u],t&&t[u],n)}}function xc(n,e){this.h={},this.g=[],this.i=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var r=0;r<t;r+=2)this.set(arguments[r],arguments[r+1])}else if(n)if(n instanceof xc)for(t=n.T(),r=0;r<t.length;r++)this.set(t[r],n.get(t[r]));else for(r in n)this.set(r,n[r])}function Uv(n){if(n.i!=n.g.length){for(var e=0,t=0;e<n.g.length;){var r=n.g[e];Qu(n.h,r)&&(n.g[t++]=r),e++}n.g.length=t}if(n.i!=n.g.length){var s={};for(t=e=0;e<n.g.length;)Qu(s,r=n.g[e])||(n.g[t++]=r,s[r]=1),e++;n.g.length=t}}function Qu(n,e){return Object.prototype.hasOwnProperty.call(n,e)}(Ye=xm.prototype).setTimeout=function(n){this.P=n},Ye.gb=function(n){n=n.target;const e=this.L;e&&3==el(n)?e.l():this.Ia(n)},Ye.Ia=function(n){try{if(n==this.g)e:{const A=el(this.g);var e=this.g.Da();const M=this.g.ba();if(!(3>A)&&(3!=A||vv||this.g&&(this.h.h||this.g.ga()||eS(this.g)))){this.I||4!=A||7==e||Sc(8==e||0>=M?3:2),ap(this);var t=this.g.ba();this.N=t;t:if(ob(this)){var r=eS(this.g);n="";var s=r.length,u=4==el(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Yu(this),up(this);var c="";break t}this.h.i=new xt.TextDecoder}for(e=0;e<s;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:u&&e==s-1});r.splice(0,s),this.h.g+=n,this.C=0,c=this.h.g}else c=this.g.ga();if(this.i=200==t,function VT(n,e,t,r,s,u,c){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+s+"]: "+e+"\n"+t+"\n"+u+" "+c})}(this.j,this.u,this.A,this.m,this.X,A,t),this.i){if(this.$&&!this.J){t:{if(this.g){var m,v=this.g;if((m=v.g?v.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!pm(m)){var b=m;break t}}b=null}if(!(t=b)){this.i=!1,this.o=3,Ii(12),Yu(this),up(this);break e}sh(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Om(this,t)}this.U?(ab(this,A,c),vv&&this.i&&3==A&&(tb(this.V,this.W,"tick",this.fb),this.W.start())):(sh(this.j,this.m,c,null),Om(this,c)),4==A&&Yu(this),this.i&&!this.I&&(4==A?iS(this.l,this):(this.i=!1,lh(this)))}else 400==t&&0<c.indexOf("Unknown SID")?(this.o=3,Ii(12)):(this.o=0,Ii(13)),Yu(this),up(this)}}}catch{}},Ye.fb=function(){if(this.g){var n=el(this.g),e=this.g.ga();this.C<e.length&&(ap(this),ab(this,n,e),this.i&&4!=n&&lh(this))}},Ye.cancel=function(){this.I=!0,Yu(this)},Ye.eb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function UT(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(Sc(3),Ii(17)),Yu(this),this.o=2,up(this)):Nm(this,this.Y-n)},(Ye=xc.prototype).R=function(){Uv(this);for(var n=[],e=0;e<this.g.length;e++)n.push(this.h[this.g[e]]);return n},Ye.T=function(){return Uv(this),this.g.concat()},Ye.get=function(n,e){return Qu(this.h,n)?this.h[n]:e},Ye.set=function(n,e){Qu(this.h,n)||(this.i++,this.g.push(n)),this.h[n]=e},Ye.forEach=function(n,e){for(var t=this.T(),r=0;r<t.length;r++){var s=t[r],u=this.get(s);n.call(e,u,s,this)}};var Bv=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Us(n,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,n instanceof Us){this.g=void 0!==e?e:n.g,Pm(this,n.j),this.s=n.s,jv(this,n.i),$v(this,n.m),this.l=n.l,e=n.h;var t=new Xu;t.i=e.i,e.g&&(t.g=new xc(e.g),t.h=e.h),Hv(this,t),this.o=n.o}else n&&(t=String(n).match(Bv))?(this.g=!!e,Pm(this,t[1]||"",!0),this.s=lp(t[2]||""),jv(this,t[3]||"",!0),$v(this,t[4]),this.l=lp(t[5]||"",!0),Hv(this,t[6]||"",!0),this.o=lp(t[7]||"")):(this.g=!!e,this.h=new Xu(null,this.g))}function za(n){return new Us(n)}function Pm(n,e,t){n.j=t?lp(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function jv(n,e,t){n.i=t?lp(e,!0):e}function $v(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function Hv(n,e,t){e instanceof Xu?(n.h=e,function dh(n,e){e&&!n.j&&(Wo(n),n.i=null,n.g.forEach(function(t,r){var s=r.toLowerCase();r!=s&&(zT(this,r),db(this,s,t))},n)),n.j=e}(n.h,n.g)):(t||(e=ch(e,lb)),n.h=new Xu(e,n.g))}function Tn(n,e,t){n.h.set(e,t)}function Ju(n){return Tn(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function lp(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function ch(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,HT),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function HT(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}Us.prototype.toString=function(){var n=[],e=this.j;e&&n.push(ch(e,ub,!0),":");var t=this.i;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(ch(e,ub,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.i&&"/"!=t.charAt(0)&&n.push("/"),n.push(ch(t,"/"==t.charAt(0)?zv:GT,!0))),(t=this.h.toString())&&n.push("?",t),(t=this.o)&&n.push("#",ch(t,cb)),n.join("")};var ub=/[#\/\?@]/g,GT=/[#\?:]/g,zv=/[#\?]/g,lb=/[#\?@]/g,cb=/#/g;function Xu(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function Wo(n){n.g||(n.g=new xc,n.h=0,n.i&&function bi(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),s=null;if(0<=r){var u=n[t].substring(0,r);s=n[t].substring(r+1)}else u=n[t];e(u,s?decodeURIComponent(s.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function zT(n,e){Wo(n),e=Mc(n,e),Qu(n.g.h,e)&&(n.i=null,n.h-=n.g.get(e).length,Qu((n=n.g).h,e)&&(delete n.h[e],n.i--,n.g.length>2*n.i&&Uv(n)))}function qv(n,e){return Wo(n),e=Mc(n,e),Qu(n.g.h,e)}function db(n,e,t){zT(n,e),0<t.length&&(n.i=null,n.g.set(Mc(n,e),gv(t)),n.h+=t.length)}function Mc(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function Wv(n){this.l=n||Zv,n=xt.PerformanceNavigationTiming?0<(n=xt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(xt.g&&xt.g.Ea&&xt.g.Ea()&&xt.g.Ea().Zb),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(Ye=Xu.prototype).add=function(n,e){Wo(this),this.i=null,n=Mc(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},Ye.forEach=function(n,e){Wo(this),this.g.forEach(function(t,r){NI(t,function(s){n.call(e,s,r,this)},this)},this)},Ye.T=function(){Wo(this);for(var n=this.g.R(),e=this.g.T(),t=[],r=0;r<e.length;r++)for(var s=n[r],u=0;u<s.length;u++)t.push(e[r]);return t},Ye.R=function(n){Wo(this);var e=[];if("string"==typeof n)qv(this,n)&&(e=pv(e,this.g.get(Mc(this,n))));else{n=this.g.R();for(var t=0;t<n.length;t++)e=pv(e,n[t])}return e},Ye.set=function(n,e){return Wo(this),this.i=null,qv(this,n=Mc(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},Ye.get=function(n,e){return n&&0<(n=this.R(n)).length?String(n[0]):e},Ye.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var n=[],e=this.g.T(),t=0;t<e.length;t++){var r=e[t],s=encodeURIComponent(String(r));r=this.R(r);for(var u=0;u<r.length;u++){var c=s;""!==r[u]&&(c+="="+encodeURIComponent(String(r[u]))),n.push(c)}}return this.i=n.join("&")};var Zv=10;function WT(n){return!!n.h||!!n.g&&n.g.size>=n.j}function hb(n){return n.h?1:n.g?n.g.size:0}function fb(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function Kv(n,e){n.g?n.g.add(e):n.h=e}function pb(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function gb(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return gv(n.i)}function Fm(){}function mb(){this.g=new Fm}function ZT(n,e,t){const r=t||"";try{km(n,function(s,u){let c=s;Jf(s)&&(c=Mv(s)),e.push(r+u+"="+encodeURIComponent(c))})}catch(s){throw e.push(r+"type="+encodeURIComponent("_badmap")),s}}function cp(n,e,t,r,s){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,s(r)}catch{}}function dp(n){this.l=n.$b||null,this.j=n.ib||!1}function Lm(n,e){Rr.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=Vm,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Wv.prototype.cancel=function(){if(this.i=gb(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},Fm.prototype.stringify=function(n){return xt.JSON.stringify(n,void 0)},Fm.prototype.parse=function(n){return xt.JSON.parse(n,void 0)},Mr(dp,Pv),dp.prototype.g=function(){return new Lm(this.l,this.j)},dp.prototype.i=function(n){return function(){return n}}({}),Mr(Lm,Rr);var Vm=0;function _b(n){n.j.read().then(n.Sa.bind(n)).catch(n.ha.bind(n))}function hh(n){n.readyState=4,n.l=null,n.j=null,n.A=null,fh(n)}function fh(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(Ye=Lm.prototype).open=function(n,e){if(this.readyState!=Vm)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,fh(this)},Ye.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||xt).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},Ye.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,hh(this)),this.readyState=Vm},Ye.Va=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,fh(this)),this.g&&(this.readyState=3,fh(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(typeof xt.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;_b(this)}else n.text().then(this.Ua.bind(this),this.ha.bind(this))},Ye.Sa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?hh(this):fh(this),3==this.readyState&&_b(this)}},Ye.Ua=function(n){this.g&&(this.response=this.responseText=n,hh(this))},Ye.Ta=function(n){this.g&&(this.response=n,hh(this))},Ye.ha=function(){this.g&&hh(this)},Ye.setRequestHeader=function(n,e){this.v.append(n,e)},Ye.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},Ye.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(Lm.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var vb=xt.JSON.parse;function ur(n){Rr.call(this),this.headers=new xc,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=wb,this.K=this.L=!1}Mr(ur,Rr);var wb="",KT=/^https?$/i,bM=["POST","PUT"];function DM(n){return"content-type"==n.toLowerCase()}function YT(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,QT(n),Yv(n)}function QT(n){n.D||(n.D=!0,ui(n,"complete"),ui(n,"error"))}function JT(n){if(n.h&&typeof dv<"u"&&(!n.C[1]||4!=el(n)||2!=n.ba()))if(n.v&&4==el(n))Dm(n.Fa,0,n);else if(ui(n,"readystatechange"),4==el(n)){n.h=!1;try{const m=n.ba();e:switch(m){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===m){var s=String(n.H).match(Bv)[1]||null;if(!s&&xt.self&&xt.self.location){var u=xt.self.location.protocol;s=u.substr(0,u.length-1)}r=!KT.test(s?s.toLowerCase():"")}t=r}if(t)ui(n,"complete"),ui(n,"success");else{n.m=6;try{var c=2<el(n)?n.g.statusText:""}catch{c=""}n.j=c+" ["+n.ba()+"]",QT(n)}}finally{Yv(n)}}}function Yv(n,e){if(n.g){XT(n);const t=n.g,r=n.C[0]?dm:null;n.g=null,n.C=null,e||ui(n,"ready");try{t.onreadystatechange=r}catch{}}}function XT(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(xt.clearTimeout(n.A),n.A=null)}function el(n){return n.g?n.g.readyState:0}function eS(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case wb:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function Ib(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=function Um(n){let e="";return yv(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):Tn(n,e,t))}function ph(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function hp(n){this.za=0,this.l=[],this.h=new Cm,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=ph("failFast",!1,n),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=ph("baseRetryDelayMs",5e3,n),this.$a=ph("retryDelaySeedMs",1e4,n),this.Ya=ph("forwardChannelMaxRetries",2,n),this.ra=ph("forwardChannelRequestTimeoutMs",2e4,n),this.qa=n&&n.xmlHttpFactory||void 0,this.Ba=n&&n.Yb||!1,this.K=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.J="",this.i=new Wv(n&&n.concurrentRequestLimit),this.Ca=new mb,this.ja=n&&n.fastHandshake||!1,this.Ra=n&&n.Wb||!1,n&&n.Aa&&this.h.Aa(),n&&n.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&n&&n.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!n||!1!==n.Xb}function Bm(n){if(tS(n),3==n.G){var e=n.V++,t=za(n.F);Tn(t,"SID",n.J),Tn(t,"RID",e),Tn(t,"TYPE","terminate"),jm(n,t),(e=new xm(n,n.h,e,void 0)).K=2,e.v=Ju(za(t)),t=!1,xt.navigator&&xt.navigator.sendBeacon&&(t=xt.navigator.sendBeacon(e.v.toString(),"")),!t&&xt.Image&&((new Image).src=e.v,t=!0),t||(e.g=oS(e.l,null),e.g.ea(e.v)),e.F=Date.now(),lh(e)}Cb(n)}function fp(n){n.g&&(gh(n),n.g.cancel(),n.g=null)}function tS(n){fp(n),n.u&&(xt.clearTimeout(n.u),n.u=null),Xv(n),n.i.cancel(),n.m&&("number"==typeof n.m&&xt.clearTimeout(n.m),n.m=null)}function pp(n,e){n.l.push(new class{constructor(n,e){this.h=n,this.g=e}}(n.Za++,e)),3==n.G&&gp(n)}function gp(n){WT(n.i)||n.m||(n.m=!0,Rv(n.Ha,n),n.C=0)}function Qv(n,e){var t;t=e?e.m:n.V++;const r=za(n.F);Tn(r,"SID",n.J),Tn(r,"RID",t),Tn(r,"AID",n.U),jm(n,r),n.o&&n.s&&Ib(r,n.o,n.s),t=new xm(n,n.h,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.l=e.D.concat(n.l)),e=rS(n,t,1e3),t.setTimeout(Math.round(.5*n.ra)+Math.round(.5*n.ra*Math.random())),Kv(n.i,t),op(t,r,e)}function jm(n,e){n.j&&km({},function(t,r){Tn(e,r,t)})}function rS(n,e,t){t=Math.min(n.l.length,t);var r=n.j?xr(n.j.Oa,n.j,n):null;e:{var s=n.l;let u=-1;for(;;){const c=["count="+t];-1==u?0<t?(u=s[0].h,c.push("ofs="+u)):u=0:c.push("ofs="+u);let m=!0;for(let v=0;v<t;v++){let b=s[v].h;const A=s[v].g;if(b-=u,0>b)u=Math.max(0,s[v].h-100),m=!1;else try{ZT(A,c,"req"+b+"_")}catch{r&&r(A)}}if(m){r=c.join("&");break e}}}return n=n.l.splice(0,t),e.D=n,r}function bb(n){n.g||n.u||(n.Y=1,Rv(n.Ga,n),n.A=0)}function Jv(n){return!(n.g||n.u||3<=n.A||(n.Y++,n.u=rp(xr(n.Ga,n),sS(n,n.A)),n.A++,0))}function gh(n){null!=n.B&&(xt.clearTimeout(n.B),n.B=null)}function Db(n){n.g=new xm(n,n.h,"rpc",n.Y),null===n.o&&(n.g.H=n.s),n.g.O=0;var e=za(n.oa);Tn(e,"RID","rpc"),Tn(e,"SID",n.J),Tn(e,"CI",n.N?"0":"1"),Tn(e,"AID",n.U),jm(n,e),Tn(e,"TYPE","xmlhttp"),n.o&&n.s&&Ib(e,n.o,n.s),n.K&&n.g.setTimeout(n.K);var t=n.g;n=n.la,t.K=1,t.v=Ju(za(e)),t.s=null,t.U=!0,sb(t,n)}function Xv(n){null!=n.v&&(xt.clearTimeout(n.v),n.v=null)}function iS(n,e){var t=null;if(n.g==e){Xv(n),gh(n),n.g=null;var r=2}else{if(!fb(n.i,e))return;t=e.D,pb(n.i,e),r=1}if(n.I=e.N,0!=n.G)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var s=n.C;ui(r=ls(),new rb(r,t,e,s)),gp(n)}else bb(n);else if(3==(s=e.o)||0==s&&0<n.I||!(1==r&&function nS(n,e){return!(hb(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.l=e.D.concat(n.l),0):1==n.G||2==n.G||n.C>=(n.Xa?0:n.Ya)||(n.m=rp(xr(n.Ha,n,e),sS(n,n.C)),n.C++,0)))}(n,e)||2==r&&Jv(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),s){case 1:Rc(n,5);break;case 4:Rc(n,10);break;case 3:Rc(n,6);break;default:Rc(n,2)}}function sS(n,e){let t=n.Pa+Math.floor(Math.random()*n.$a);return n.j||(t*=2),t*e}function Rc(n,e){if(n.h.info("Error code "+e),2==e){var t=null;n.j&&(t=null);var r=xr(n.jb,n);t||(t=new Us("//www.google.com/images/cleardot.gif"),xt.location&&"http"==xt.location.protocol||Pm(t,"https"),Ju(t)),function yb(n,e){const t=new Cm;if(xt.Image){const r=new Image;r.onload=hm(cp,t,r,"TestLoadImage: loaded",!0,e),r.onerror=hm(cp,t,r,"TestLoadImage: error",!1,e),r.onabort=hm(cp,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=hm(cp,t,r,"TestLoadImage: timeout",!1,e),xt.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else Ii(2);n.G=0,n.j&&n.j.va(e),Cb(n),tS(n)}function Cb(n){n.G=0,n.I=-1,n.j&&((0!=gb(n.i).length||0!=n.l.length)&&(n.i.i.length=0,gv(n.l),n.l.length=0),n.j.ua())}function Tb(n,e,t){let r=function $T(n){return n instanceof Us?za(n):new Us(n,void 0)}(t);if(""!=r.i)e&&jv(r,e+"."+r.i),$v(r,r.m);else{const s=xt.location;r=function Gv(n,e,t,r){var s=new Us(null,void 0);return n&&Pm(s,n),e&&jv(s,e),t&&$v(s,t),r&&(s.l=r),s}(s.protocol,e?e+"."+s.hostname:s.hostname,+s.port,t)}return n.aa&&yv(n.aa,function(s,u){Tn(r,u,s)}),t=n.sa,(e=n.D)&&t&&Tn(r,e,t),Tn(r,"VER",n.ma),jm(n,r),r}function oS(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new ur(t&&n.Ba&&!n.qa?new dp({ib:!0}):n.qa)).L=n.H,e}function Sb(){}function mp(){if(Cc&&!(10<=Number(AT)))throw Error("Environmental error: no available transport.")}function Fi(n,e){Rr.call(this),this.g=new hp(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.P=n,(n=e&&e.httpHeadersOverwriteParam)&&!pm(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!pm(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new mh(this)}function aS(n){sp.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function Bs(){Sm.call(this),this.status=1}function mh(n){this.g=n}(Ye=ur.prototype).ea=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Lv.g(),this.C=function ib(n){return n.h||(n.h=n.i())}(this.u?this.u:Lv),this.g.onreadystatechange=xr(this.Fa,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(u){return void YT(this,u)}n=t||"";const s=new xc(this.headers);r&&km(r,function(u,c){s.set(c,u)}),r=function OI(n){e:{var e=DM;const t=n.length,r="string"==typeof n?n.split(""):n;for(let s=0;s<t;s++)if(s in r&&e.call(void 0,r[s],s,n)){e=s;break e}e=-1}return 0>e?null:"string"==typeof n?n.charAt(e):n[e]}(s.T()),t=xt.FormData&&n instanceof xt.FormData,!(0<=fm(bM,e))||r||t||s.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),s.forEach(function(u,c){this.g.setRequestHeader(c,u)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{XT(this),0<this.B&&((this.K=function Eb(n){return Cc&&function ST(){return function CT(n){var e=Ev;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=kI(String(gm)).split("."),t=kI("9").split("."),r=Math.max(e.length,t.length);for(let c=0;0==n&&c<r;c++){var s=e[c]||"",u=t[c]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],u=/(\d*)(\D*)(.*)/.exec(u)||["","","",""],0==s[0].length&&0==u[0].length)break;n=mv(0==s[1].length?0:parseInt(s[1],10),0==u[1].length?0:parseInt(u[1],10))||mv(0==s[2].length,0==u[2].length)||mv(s[2],u[2]),s=s[3],u=u[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=xr(this.pa,this)):this.A=Dm(this.pa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(u){YT(this,u)}},Ye.pa=function(){typeof dv<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,ui(this,"timeout"),this.abort(8))},Ye.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,ui(this,"complete"),ui(this,"abort"),Yv(this))},Ye.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Yv(this,!0)),ur.Z.M.call(this)},Ye.Fa=function(){this.s||(this.F||this.v||this.l?JT(this):this.cb())},Ye.cb=function(){JT(this)},Ye.ba=function(){try{return 2<el(this)?this.g.status:-1}catch{return-1}},Ye.ga=function(){try{return this.g?this.g.responseText:""}catch{return""}},Ye.Qa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),vb(e)}},Ye.Da=function(){return this.m},Ye.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(Ye=hp.prototype).ma=8,Ye.G=1,Ye.hb=function(n){try{this.h.info("Origin Trials invoked: "+n)}catch{}},Ye.Ha=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.V=Math.floor(1e5*Math.random()),n=this.V++;const s=new xm(this,this.h,n,void 0);let u=this.s;if(this.P&&(u?(u=LI(u),UI(u,this.P)):u=this.P),null===this.o&&(s.H=u),this.ja)e:{for(var e=0,t=0;t<this.l.length;t++){var r=this.l[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.l.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=rS(this,s,e),Tn(t=za(this.F),"RID",n),Tn(t,"CVER",22),this.D&&Tn(t,"X-HTTP-Session-Id",this.D),jm(this,t),this.o&&u&&Ib(t,this.o,u),Kv(this.i,s),this.Ra&&Tn(t,"TYPE","init"),this.ja?(Tn(t,"$req",e),Tn(t,"SID","null"),s.$=!0,op(s,t,null)):op(s,t,e),this.G=2}}else 3==this.G&&(n?Qv(this,n):0==this.l.length||WT(this.i)||Qv(this))},Ye.Ga=function(){if(this.u=null,Db(this),this.$&&!(this.L||null==this.g||0>=this.O)){var n=2*this.O;this.h.info("BP detection timer enabled: "+n),this.B=rp(xr(this.bb,this),n)}},Ye.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,Ii(10),fp(this),Db(this))},Ye.ab=function(){null!=this.v&&(this.v=null,fp(this),Jv(this),Ii(19))},Ye.jb=function(n){n?(this.h.info("Successfully pinged google.com"),Ii(2)):(this.h.info("Failed to ping google.com"),Ii(1))},(Ye=Sb.prototype).xa=function(){},Ye.wa=function(){},Ye.va=function(){},Ye.ua=function(){},Ye.Oa=function(){},mp.prototype.g=function(n,e){return new Fi(n,e)},Mr(Fi,Rr),Fi.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;n.Wa&&(n.h.info("Origin Trials enabled."),Rv(xr(n.hb,n,e))),Ii(0),n.W=e,n.aa=t||{},n.N=n.X,n.F=Tb(n,null,n.W),gp(n)},Fi.prototype.close=function(){Bm(this.g)},Fi.prototype.u=function(n){if("string"==typeof n){var e={};e.__data__=n,pp(this.g,e)}else this.v?((e={}).__data__=Mv(n),pp(this.g,e)):pp(this.g,n)},Fi.prototype.M=function(){this.g.j=null,delete this.j,Bm(this.g),delete this.g,Fi.Z.M.call(this)},Mr(aS,sp),Mr(Bs,Sm),Mr(mh,Sb),mh.prototype.xa=function(){ui(this.g,"a")},mh.prototype.wa=function(n){ui(this.g,new aS(n))},mh.prototype.va=function(n){ui(this.g,new Bs(n))},mh.prototype.ua=function(){ui(this.g,"b")},mp.prototype.createWebChannel=mp.prototype.g,Fi.prototype.send=Fi.prototype.u,Fi.prototype.open=Fi.prototype.m,Fi.prototype.close=Fi.prototype.close,Ac.NO_ERROR=0,Ac.TIMEOUT=8,Ac.HTTP_ERROR=6,ip.COMPLETE="complete",Fv.EventType=ah,ah.OPEN="a",ah.CLOSE="b",ah.ERROR="c",ah.MESSAGE="d",Rr.prototype.listen=Rr.prototype.N,ur.prototype.listenOnce=ur.prototype.O,ur.prototype.getLastError=ur.prototype.La,ur.prototype.getLastErrorCode=ur.prototype.Da,ur.prototype.getStatus=ur.prototype.ba,ur.prototype.getResponseJson=ur.prototype.Qa,ur.prototype.getResponseText=ur.prototype.ga,ur.prototype.send=ur.prototype.ea;var ew=qo.createWebChannelTransport=function(){return new mp},uS=qo.getStatEventTarget=function(){return ls()},Li=qo.ErrorCode=Ac,lS=qo.EventType=ip,tw=qo.Event=Tc,Ab=qo.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},cS=qo.FetchXmlHttpFactory=dp,yh=qo.WebChannel=Fv,xb=qo.XhrIo=ur;const nw="@firebase/firestore";class Nr{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Nr.UNAUTHENTICATED=new Nr(null),Nr.GOOGLE_CREDENTIALS=new Nr("google-credentials-uid"),Nr.FIRST_PARTY=new Nr("first-party-uid"),Nr.MOCK_USER=new Nr("mock-user");let Nc="9.9.4";const qa=new Wu.Yd("@firebase/firestore");function rw(){return qa.logLevel}function ke(n,...e){if(qa.logLevel<=Wu.in.DEBUG){const t=e.map($m);qa.debug(`Firestore (${Nc}): ${n}`,...t)}}function Vn(n,...e){if(qa.logLevel<=Wu.in.ERROR){const t=e.map($m);qa.error(`Firestore (${Nc}): ${n}`,...t)}}function Vi(n,...e){if(qa.logLevel<=Wu.in.WARN){const t=e.map($m);qa.warn(`Firestore (${Nc}): ${n}`,...t)}}function $m(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function Xe(n="Unexpected state"){const e=`FIRESTORE (${Nc}) INTERNAL ASSERTION FAILED: `+n;throw Vn(e),new Error(e)}function mt(n,e){n||Xe()}function qe(n,e){return n}const ce={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Re extends Et.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Or{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class Rb{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Nb{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Nr.UNAUTHENTICATED))}shutdown(){}}class CM{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class Ob{constructor(e){this.t=e,this.currentUser=Nr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let s=this.i;const u=b=>this.i!==s?(s=this.i,t(b)):Promise.resolve();let c=new Or;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new Or,e.enqueueRetryable(()=>u(this.currentUser))};const m=()=>{const b=c;e.enqueueRetryable((0,ye.Z)(function*(){yield b.promise,yield u(r.currentUser)}))},v=b=>{ke("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=b,this.auth.addAuthTokenListener(this.o),m()};this.t.onInit(b=>v(b)),setTimeout(()=>{if(!this.auth){const b=this.t.getImmediate({optional:!0});b?v(b):(ke("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new Or)}},0),m()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(ke("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(mt("string"==typeof r.accessToken),new Rb(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return mt(null===e||"string"==typeof e),new Nr(e)}}class hS{constructor(e,t,r,s){this.h=e,this.l=t,this.m=r,this.g=s,this.type="FirstParty",this.user=Nr.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(mt(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class kb{constructor(e,t,r,s){this.h=e,this.l=t,this.m=r,this.g=s}getToken(){return Promise.resolve(new hS(this.h,this.l,this.m,this.g))}start(e,t){e.enqueueRetryable(()=>t(Nr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class fS{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class iw{constructor(e){this.T=e,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(e,t){const r=u=>{null!=u.error&&ke("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const c=u.token!==this.A;return this.A=u.token,ke("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable(()=>r(u))};const s=u=>{ke("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.appCheck.addTokenListener(this.o)};this.T.onInit(u=>s(u)),setTimeout(()=>{if(!this.appCheck){const u=this.T.getImmediate({optional:!0});u?s(u):ke("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(mt("string"==typeof t.token),this.A=t.token,new fS(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function Pb(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class sw{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=Pb(40);for(let u=0;u<s.length;++u)r.length<20&&s[u]<t&&(r+=e.charAt(s[u]%e.length))}return r}}function At(n,e){return n<e?-1:n>e?1:0}function Oc(n,e,t){return n.length===e.length&&n.every((r,s)=>t(r,e[s]))}function yp(n){return n+"\0"}class gn{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Re(ce.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Re(ce.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Re(ce.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Re(ce.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return gn.fromMillis(Date.now())}static fromDate(e){return gn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new gn(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?At(this.nanoseconds,e.nanoseconds):At(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class bt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new bt(e)}static min(){return new bt(new gn(0,0))}static max(){return new bt(new gn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class _p{constructor(e,t,r){void 0===t?t=0:t>e.length&&Xe(),void 0===r?r=e.length-t:r>e.length-t&&Xe(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===_p.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof _p?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let s=0;s<r;s++){const u=e.get(s),c=t.get(s);if(u<c)return-1;if(u>c)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class qt extends _p{construct(e,t,r){return new qt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Re(ce.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(s=>s.length>0))}return new qt(t)}static emptyPath(){return new qt([])}}const Fb=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Kn extends _p{construct(e,t,r){return new Kn(e,t,r)}static isValidIdentifier(e){return Fb.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Kn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Kn(["__name__"])}static fromServerFormat(e){const t=[];let r="",s=0;const u=()=>{if(0===r.length)throw new Re(ce.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let c=!1;for(;s<e.length;){const m=e[s];if("\\"===m){if(s+1===e.length)throw new Re(ce.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const v=e[s+1];if("\\"!==v&&"."!==v&&"`"!==v)throw new Re(ce.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=v,s+=2}else"`"===m?(c=!c,s++):"."!==m||c?(r+=m,s++):(u(),s++)}if(u(),c)throw new Re(ce.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Kn(t)}static emptyPath(){return new Kn([])}}class Ge{constructor(e){this.path=e}static fromPath(e){return new Ge(qt.fromString(e))}static fromName(e){return new Ge(qt.fromString(e).popFirst(5))}static empty(){return new Ge(qt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===qt.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return qt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ge(new qt(e.slice()))}}class ow{constructor(e,t,r,s){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=s}}function Lb(n){return n.fields.find(e=>2===e.kind)}function tl(n){return n.fields.filter(e=>2!==e.kind)}ow.UNKNOWN_ID=-1;class Hm{constructor(e,t){this.fieldPath=e,this.kind=t}}class Gm{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Gm(0,js.min())}}function yS(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,s=bt.fromTimestamp(1e9===r?new gn(t+1,0):new gn(t,r));return new js(s,Ge.empty(),e)}function _S(n){return new js(n.readTime,n.key,-1)}class js{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new js(bt.min(),Ge.empty(),-1)}static max(){return new js(bt.max(),Ge.empty(),-1)}}function Vb(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=Ge.comparator(n.documentKey,e.documentKey),0!==t?t:At(n.largestBatchId,e.largestBatchId))}const Ub="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class vp{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function nl(n){return aw.apply(this,arguments)}function aw(){return aw=(0,ye.Z)(function*(n){if(n.code!==ce.FAILED_PRECONDITION||n.message!==Ub)throw n;ke("LocalStore","Unexpectedly lost primary lease")}),aw.apply(this,arguments)}class se{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Xe(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new se((r,s)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(r,s)},this.catchCallback=u=>{this.wrapFailure(t,u).next(r,s)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof se?t:se.resolve(t)}catch(t){return se.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):se.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):se.reject(t)}static resolve(e){return new se((t,r)=>{t(e)})}static reject(e){return new se((t,r)=>{r(e)})}static waitFor(e){return new se((t,r)=>{let s=0,u=0,c=!1;e.forEach(m=>{++s,m.next(()=>{++u,c&&u===s&&t()},v=>r(v))}),c=!0,u===s&&t()})}static or(e){let t=se.resolve(!1);for(const r of e)t=t.next(s=>s?se.resolve(s):r());return t}static forEach(e,t){const r=[];return e.forEach((s,u)=>{r.push(t.call(this,s,u))}),this.waitFor(r)}static mapArray(e,t){return new se((r,s)=>{const u=e.length,c=new Array(u);let m=0;for(let v=0;v<u;v++){const b=v;t(e[b]).next(A=>{c[b]=A,++m,m===u&&r(c)},A=>s(A))}})}static doWhile(e,t){return new se((r,s)=>{const u=()=>{!0===e()?t().next(()=>{u()},s):r()};u()})}}class Zo{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.P=new Or,this.transaction.oncomplete=()=>{this.P.resolve()},this.transaction.onabort=()=>{t.error?this.P.reject(new kc(e,t.error)):this.P.resolve()},this.transaction.onerror=r=>{const s=Bb(r.target.error);this.P.reject(new kc(e,s))}}static open(e,t,r,s){try{return new Zo(t,e.transaction(s,r))}catch(u){throw new kc(t,u)}}get v(){return this.P.promise}abort(e){e&&this.P.reject(e),this.aborted||(ke("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}V(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new lw(t)}}class $s{constructor(e,t,r){this.name=e,this.version=t,this.S=r,12.2===$s.D((0,Et.z$)())&&Vn("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return ke("SimpleDb","Removing database:",e),Wa(window.indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!(0,Et.hl)())return!1;if($s.N())return!0;const e=(0,Et.z$)(),t=$s.D(e),r=0<t&&t<10,s=$s.k(e),u=0<s&&s<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||u)}static N(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.M)}static O(e,t){return e.store(t)}static D(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static k(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}F(e){var t=this;return(0,ye.Z)(function*(){return t.db||(ke("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,s)=>{const u=indexedDB.open(t.name,t.version);u.onsuccess=c=>{r(c.target.result)},u.onblocked=()=>{s(new kc(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},u.onerror=c=>{const m=c.target.error;s("VersionError"===m.name?new Re(ce.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===m.name?new Re(ce.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+m):new kc(e,m))},u.onupgradeneeded=c=>{ke("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',c.oldVersion),t.S.$(c.target.result,u.transaction,c.oldVersion,t.version).next(()=>{ke("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.B&&(t.db.onversionchange=r=>t.B(r)),t.db})()}L(e){this.B=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,s){var u=this;return(0,ye.Z)(function*(){const c="readonly"===t;let m=0;for(;;){++m;try{u.db=yield u.F(e);const v=Zo.open(u.db,e,c?"readonly":"readwrite",r),b=s(v).next(A=>(v.V(),A)).catch(A=>(v.abort(A),se.reject(A))).toPromise();return b.catch(()=>{}),yield v.v,b}catch(v){const b=v,A="FirebaseError"!==b.name&&m<3;if(ke("SimpleDb","Transaction failed with error:",b.message,"Retrying:",A),u.close(),!A)return Promise.reject(b)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class uw{constructor(e){this.U=e,this.q=!1,this.K=null}get isDone(){return this.q}get G(){return this.K}set cursor(e){this.U=e}done(){this.q=!0}j(e){this.K=e}delete(){return Wa(this.U.delete())}}class kc extends Re{constructor(e,t){super(ce.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function rl(n){return"IndexedDbTransactionError"===n.name}class lw{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(ke("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(ke("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Wa(r)}add(e){return ke("SimpleDb","ADD",this.store.name,e,e),Wa(this.store.add(e))}get(e){return Wa(this.store.get(e)).next(t=>(void 0===t&&(t=null),ke("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return ke("SimpleDb","DELETE",this.store.name,e),Wa(this.store.delete(e))}count(){return ke("SimpleDb","COUNT",this.store.name),Wa(this.store.count())}W(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const s=this.cursor(r),u=[];return this.H(s,(c,m)=>{u.push(m)}).next(()=>u)}{const s=this.store.getAll(r.range);return new se((u,c)=>{s.onerror=m=>{c(m.target.error)},s.onsuccess=m=>{u(m.target.result)}})}}J(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new se((s,u)=>{r.onerror=c=>{u(c.target.error)},r.onsuccess=c=>{s(c.target.result)}})}Y(e,t){ke("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.X=!1;const s=this.cursor(r);return this.H(s,(u,c,m)=>m.delete())}Z(e,t){let r;t?r=e:(r={},t=e);const s=this.cursor(r);return this.H(s,t)}tt(e){const t=this.cursor({});return new se((r,s)=>{t.onerror=u=>{const c=Bb(u.target.error);s(c)},t.onsuccess=u=>{const c=u.target.result;c?e(c.primaryKey,c.value).next(m=>{m?c.continue():r()}):r()}})}H(e,t){const r=[];return new se((s,u)=>{e.onerror=c=>{u(c.target.error)},e.onsuccess=c=>{const m=c.target.result;if(!m)return void s();const v=new uw(m),b=t(m.primaryKey,m.value,v);if(b instanceof se){const A=b.catch(M=>(v.done(),se.reject(M)));r.push(A)}v.isDone?s():null===v.G?m.continue():m.continue(v.G)}}).next(()=>se.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.X?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Wa(n){return new se((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const s=Bb(r.target.error);t(s)}})}let wp=!1;function Bb(n){const e=$s.D((0,Et.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Re("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return wp||(wp=!0,setTimeout(()=>{throw r},0)),r}}return n}class TM{constructor(e,t){this.asyncQueue=e,this.et=t,this.task=null}start(){this.nt(15)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}nt(e){var t=this;ke("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,ye.Z)(function*(){t.task=null;try{ke("IndexBackiller",`Documents written: ${yield t.et.st()}`)}catch(r){rl(r)?ke("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield nl(r)}yield t.nt(1)}))}}class SM{constructor(e,t){this.localStore=e,this.persistence=t}st(e=50){var t=this;return(0,ye.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.it(r,e))})()}it(e,t){const r=new Set;let s=t,u=!0;return se.doWhile(()=>!0===u&&s>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(c=>{if(null!==c&&!r.has(c))return ke("IndexBackiller",`Processing collection: ${c}`),this.rt(e,c,s).next(m=>{s-=m,r.add(c)});u=!1})).next(()=>t-s)}rt(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(s=>this.localStore.localDocuments.getNextDocuments(e,t,s,r).next(u=>{const c=u.changes;return this.localStore.indexManager.updateIndexEntries(e,c).next(()=>this.ot(s,u)).next(m=>(ke("IndexBackiller",`Updating offset: ${m}`),this.localStore.indexManager.updateCollectionGroup(e,t,m))).next(()=>c.size)}))}ot(e,t){let r=e;return t.changes.forEach((s,u)=>{const c=_S(u);Vb(c,r)>0&&(r=c)}),new js(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}class cs{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ut(r),this.ct=r=>t.writeSequenceNumber(r))}ut(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ct&&this.ct(e),e}}function cw(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Pc(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function jb(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}cs.at=-1;class Yn{constructor(e,t){this.comparator=e,this.root=t||kr.EMPTY}insert(e,t){return new Yn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,kr.BLACK,null,null))}remove(e){return new Yn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,kr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(0===s)return t+r.left.size;s<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new zm(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new zm(this.root,e,this.comparator,!1)}getReverseIterator(){return new zm(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new zm(this.root,e,this.comparator,!0)}}class zm{constructor(e,t,r,s){this.isReverse=s,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=t?r(e.key,t):1,t&&s&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(0===u){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class kr{constructor(e,t,r,s,u){this.key=e,this.value=t,this.color=r??kr.RED,this.left=s??kr.EMPTY,this.right=u??kr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,s,u){return new kr(e??this.key,t??this.value,r??this.color,s??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let s=this;const u=r(e,s.key);return s=u<0?s.copy(null,null,null,s.left.insert(e,t,r),null):0===u?s.copy(null,t,null,null,null):s.copy(null,null,null,null,s.right.insert(e,t,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return kr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,s=this;if(t(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,t),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),0===t(e,s.key)){if(s.right.isEmpty())return kr.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,t))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,kr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,kr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Xe();const e=this.left.check();if(e!==this.right.check())throw Xe();return e+(this.isRed()?0:1)}}kr.EMPTY=null,kr.RED=!0,kr.BLACK=!1,kr.EMPTY=new class{constructor(){this.size=0}get key(){throw Xe()}get value(){throw Xe()}get color(){throw Xe()}get left(){throw Xe()}get right(){throw Xe()}copy(n,e,t,r,s){return this}insert(n,e,t){return new kr(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class un{constructor(e){this.comparator=e,this.data=new Yn(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;t(s.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new dw(this.data.getIterator())}getIteratorFrom(e){return new dw(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof un)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const s=t.getNext().key,u=r.getNext().key;if(0!==this.comparator(s,u))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new un(this.comparator);return t.data=e,t}}class dw{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function _h(n){return n.hasNext()?n.getNext():void 0}class ds{constructor(e){this.fields=e,e.sort(Kn.comparator)}static empty(){return new ds([])}unionWith(e){let t=new un(Kn.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new ds(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Oc(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class lr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new lr(t)}static fromUint8Array(e){const t=function(r){let s="";for(let u=0;u<r.length;++u)s+=String.fromCharCode(r[u]);return s}(e);return new lr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return At(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}lr.EMPTY_BYTE_STRING=new lr("");const AM=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Za(n){if(mt(!!n),"string"==typeof n){let e=0;const t=AM.exec(n);if(mt(!!t),t[1]){let s=t[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Rn(n.seconds),nanos:Rn(n.nanos)}}function Rn(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Fc(n){return"string"==typeof n?lr.fromBase64String(n):lr.fromUint8Array(n)}function hw(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function vS(n){const e=n.mapValue.fields.__previous_value__;return hw(e)?vS(e):e}function qm(n){const e=Za(n.mapValue.fields.__local_write_time__.timestampValue);return new gn(e.seconds,e.nanos)}class wS{constructor(e,t,r,s,u,c,m,v){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=s,this.ssl=u,this.forceLongPolling=c,this.autoDetectLongPolling=m,this.useFetchStreams=v}}class il{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new il("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof il&&e.projectId===this.projectId&&e.database===this.database}}function Ep(n){return null==n}function Wm(n){return 0===n&&1/n==-1/0}function ES(n){return"number"==typeof n&&Number.isInteger(n)&&!Wm(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}const Lc={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},fw={nullValue:"NULL_VALUE"};function vh(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?hw(n)?4:_(n)?9007199254740991:10:Xe()}function Ko(n,e){if(n===e)return!0;const t=vh(n);if(t!==vh(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return qm(n).isEqual(qm(e));case 3:return function(r,s){if("string"==typeof r.timestampValue&&"string"==typeof s.timestampValue&&r.timestampValue.length===s.timestampValue.length)return r.timestampValue===s.timestampValue;const u=Za(r.timestampValue),c=Za(s.timestampValue);return u.seconds===c.seconds&&u.nanos===c.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return s=e,Fc(n.bytesValue).isEqual(Fc(s.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,s){return Rn(r.geoPointValue.latitude)===Rn(s.geoPointValue.latitude)&&Rn(r.geoPointValue.longitude)===Rn(s.geoPointValue.longitude)}(n,e);case 2:return function(r,s){if("integerValue"in r&&"integerValue"in s)return Rn(r.integerValue)===Rn(s.integerValue);if("doubleValue"in r&&"doubleValue"in s){const u=Rn(r.doubleValue),c=Rn(s.doubleValue);return u===c?Wm(u)===Wm(c):isNaN(u)&&isNaN(c)}return!1}(n,e);case 9:return Oc(n.arrayValue.values||[],e.arrayValue.values||[],Ko);case 10:return function(r,s){const u=r.mapValue.fields||{},c=s.mapValue.fields||{};if(cw(u)!==cw(c))return!1;for(const m in u)if(u.hasOwnProperty(m)&&(void 0===c[m]||!Ko(u[m],c[m])))return!1;return!0}(n,e);default:return Xe()}var s}function Zm(n,e){return void 0!==(n.values||[]).find(t=>Ko(t,e))}function Vc(n,e){if(n===e)return 0;const t=vh(n),r=vh(e);if(t!==r)return At(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return At(n.booleanValue,e.booleanValue);case 2:return function(s,u){const c=Rn(s.integerValue||s.doubleValue),m=Rn(u.integerValue||u.doubleValue);return c<m?-1:c>m?1:c===m?0:isNaN(c)?isNaN(m)?0:-1:1}(n,e);case 3:return IS(n.timestampValue,e.timestampValue);case 4:return IS(qm(n),qm(e));case 5:return At(n.stringValue,e.stringValue);case 6:return function(s,u){const c=Fc(s),m=Fc(u);return c.compareTo(m)}(n.bytesValue,e.bytesValue);case 7:return function(s,u){const c=s.split("/"),m=u.split("/");for(let v=0;v<c.length&&v<m.length;v++){const b=At(c[v],m[v]);if(0!==b)return b}return At(c.length,m.length)}(n.referenceValue,e.referenceValue);case 8:return function(s,u){const c=At(Rn(s.latitude),Rn(u.latitude));return 0!==c?c:At(Rn(s.longitude),Rn(u.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(s,u){const c=s.values||[],m=u.values||[];for(let v=0;v<c.length&&v<m.length;++v){const b=Vc(c[v],m[v]);if(b)return b}return At(c.length,m.length)}(n.arrayValue,e.arrayValue);case 10:return function(s,u){if(s===Lc.mapValue&&u===Lc.mapValue)return 0;if(s===Lc.mapValue)return 1;if(u===Lc.mapValue)return-1;const c=s.fields||{},m=Object.keys(c),v=u.fields||{},b=Object.keys(v);m.sort(),b.sort();for(let A=0;A<m.length&&A<b.length;++A){const M=At(m[A],b[A]);if(0!==M)return M;const L=Vc(c[m[A]],v[b[A]]);if(0!==L)return L}return At(m.length,b.length)}(n.mapValue,e.mapValue);default:throw Xe()}}function IS(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return At(n,e);const t=Za(n),r=Za(e),s=At(t.seconds,r.seconds);return 0!==s?s:At(t.nanos,r.nanos)}function Ip(n){return Hb(n)}function Hb(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const s=Za(r);return`time(${s.seconds},${s.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Fc(n.bytesValue).toBase64():"referenceValue"in n?Ge.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let s="[",u=!0;for(const c of r.values||[])u?u=!1:s+=",",s+=Hb(c);return s+"]"}(n.arrayValue):"mapValue"in n?function(r){const s=Object.keys(r.fields||{}).sort();let u="{",c=!0;for(const m of s)c?c=!1:u+=",",u+=`${m}:${Hb(r.fields[m])}`;return u+"}"}(n.mapValue):Xe();var e}function wh(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function i(n){return!!n&&"integerValue"in n}function o(n){return!!n&&"arrayValue"in n}function a(n){return!!n&&"nullValue"in n}function l(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function d(n){return!!n&&"mapValue"in n}function p(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Pc(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=p(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=p(n.arrayValue.values[t]);return e}return Object.assign({},n)}function _(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function E(n){return"nullValue"in n?fw:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?wh(il.empty(),Ge.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:Xe()}function I(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?wh(il.empty(),Ge.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?Lc:Xe()}function T(n,e){const t=Vc(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function R(n,e){const t=Vc(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class O{constructor(e){this.value=e}static empty(){return new O({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!d(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=p(t)}setAll(e){let t=Kn.emptyPath(),r={},s=[];e.forEach((c,m)=>{if(!t.isImmediateParentOf(m)){const v=this.getFieldsMap(t);this.applyChanges(v,r,s),r={},s=[],t=m.popLast()}c?r[m.lastSegment()]=p(c):s.push(m.lastSegment())});const u=this.getFieldsMap(t);this.applyChanges(u,r,s)}delete(e){const t=this.field(e.popLast());d(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ko(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=t.mapValue.fields[e.get(r)];d(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=s),t=s}return t.mapValue.fields}applyChanges(e,t,r){Pc(t,(s,u)=>e[s]=u);for(const s of r)delete e[s]}clone(){return new O(p(this.value))}}function z(n){const e=[];return Pc(n.fields,(t,r)=>{const s=new Kn([t]);if(d(r)){const u=z(r.mapValue).fields;if(0===u.length)e.push(s);else for(const c of u)e.push(s.child(c))}else e.push(s)}),new ds(e)}class Y{constructor(e,t,r,s,u,c){this.key=e,this.documentType=t,this.version=r,this.readTime=s,this.data=u,this.documentState=c}static newInvalidDocument(e){return new Y(e,0,bt.min(),bt.min(),O.empty(),0)}static newFoundDocument(e,t,r){return new Y(e,1,t,bt.min(),r,0)}static newNoDocument(e,t){return new Y(e,2,t,bt.min(),O.empty(),0)}static newUnknownDocument(e,t){return new Y(e,3,t,bt.min(),O.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=O.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=O.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=bt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Y&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Y(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class we{constructor(e,t=null,r=[],s=[],u=null,c=null,m=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=s,this.limit=u,this.startAt=c,this.endAt=m,this.ht=null}}function Ne(n,e=null,t=[],r=[],s=null,u=null,c=null){return new we(n,e,t,r,s,u,c)}function $e(n){const e=qe(n);if(null===e.ht){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>{return(s=r).field.canonicalString()+s.op.toString()+Ip(s.value);var s}).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(s=r).field.canonicalString()+s.dir;var s}).join(","),Ep(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Ip(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Ip(r)).join(",")),e.ht=t}return e.ht}function _t(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let s=0;s<n.orderBy.length;s++)if(!mk(n.orderBy[s],e.orderBy[s]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let s=0;s<n.filters.length;s++)if((t=n.filters[s]).op!==(r=e.filters[s]).op||!t.field.isEqual(r.field)||!Ko(t.value,r.value))return!1;var t,r;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!MM(n.startAt,e.startAt)&&MM(n.endAt,e.endAt)}function xe(n){return Ge.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function ht(n,e){return n.filters.filter(t=>t instanceof Un&&t.field.isEqual(e))}function $t(n,e,t){let r=fw,s=!0;for(const u of ht(n,e)){let c=fw,m=!0;switch(u.op){case"<":case"<=":c=E(u.value);break;case"==":case"in":case">=":c=u.value;break;case">":c=u.value,m=!1;break;case"!=":case"not-in":c=fw}T({value:r,inclusive:s},{value:c,inclusive:m})<0&&(r=c,s=m)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const c=t.position[u];T({value:r,inclusive:s},{value:c,inclusive:t.inclusive})<0&&(r=c,s=t.inclusive);break}return{value:r,inclusive:s}}function _n(n,e,t){let r=Lc,s=!0;for(const u of ht(n,e)){let c=Lc,m=!0;switch(u.op){case">=":case">":c=I(u.value),m=!1;break;case"==":case"in":case"<=":c=u.value;break;case"<":c=u.value,m=!1;break;case"!=":case"not-in":c=Lc}R({value:r,inclusive:s},{value:c,inclusive:m})>0&&(r=c,s=m)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const c=t.position[u];R({value:r,inclusive:s},{value:c,inclusive:t.inclusive})>0&&(r=c,s=t.inclusive);break}return{value:r,inclusive:s}}class Un extends class{}{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.lt(e,t,r):new pw(e,t,r):"array-contains"===t?new yw(e,r):"in"===t?new _w(e,r):"not-in"===t?new vw(e,r):"array-contains-any"===t?new ww(e,r):new Un(e,t,r)}static lt(e,t,r){return"in"===t?new gw(e,r):new mw(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.ft(Vc(t,this.value)):null!==t&&vh(this.value)===vh(t)&&this.ft(Vc(t,this.value))}ft(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Xe()}}dt(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class pw extends Un{constructor(e,t,r){super(e,t,r),this.key=Ge.fromName(r.referenceValue)}matches(e){const t=Ge.comparator(e.key,this.key);return this.ft(t)}}class gw extends Un{constructor(e,t){super(e,"in",t),this.keys=Km(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class mw extends Un{constructor(e,t){super(e,"not-in",t),this.keys=Km(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Km(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>Ge.fromName(r.referenceValue))}class yw extends Un{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return o(t)&&Zm(t.arrayValue,this.value)}}class _w extends Un{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Zm(this.value.arrayValue,t)}}class vw extends Un{constructor(e,t){super(e,"not-in",t)}matches(e){if(Zm(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Zm(this.value.arrayValue,t)}}class ww extends Un{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!o(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Zm(this.value.arrayValue,r))}}class Yo{constructor(e,t){this.position=e,this.inclusive=t}}class Ym{constructor(e,t="asc"){this.field=e,this.dir=t}}function mk(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function xM(n,e,t){let r=0;for(let s=0;s<n.position.length;s++){const u=e[s],c=n.position[s];if(r=u.field.isKeyField()?Ge.comparator(Ge.fromName(c.referenceValue),t.key):Vc(c,t.data.field(u.field)),"desc"===u.dir&&(r*=-1),0!==r)break}return r}function MM(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Ko(n.position[t],e.position[t]))return!1;return!0}class Uc{constructor(e,t=null,r=[],s=[],u=null,c="F",m=null,v=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=s,this.limit=u,this.limitType=c,this.startAt=m,this.endAt=v,this._t=null,this.wt=null}}function RM(n,e,t,r,s,u,c,m){return new Uc(n,e,t,r,s,u,c,m)}function Qm(n){return new Uc(n)}function NM(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function bS(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function DS(n){for(const e of n.filters)if(e.dt())return e.field;return null}function CS(n){return null!==n.collectionGroup}function Jm(n){const e=qe(n);if(null===e._t){e._t=[];const t=DS(e),r=bS(e);if(null!==t&&null===r)t.isKeyField()||e._t.push(new Ym(t)),e._t.push(new Ym(Kn.keyField(),"asc"));else{let s=!1;for(const u of e.explicitOrderBy)e._t.push(u),u.field.isKeyField()&&(s=!0);if(!s){const u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e._t.push(new Ym(Kn.keyField(),u))}}}return e._t}function Hs(n){const e=qe(n);if(!e.wt)if("F"===e.limitType)e.wt=Ne(e.path,e.collectionGroup,Jm(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const u of Jm(e))t.push(new Ym(u.field,"desc"===u.dir?"asc":"desc"));const r=e.endAt?new Yo(e.endAt.position,e.endAt.inclusive):null,s=e.startAt?new Yo(e.startAt.position,e.startAt.inclusive):null;e.wt=Ne(e.path,e.collectionGroup,t,e.filters,e.limit,r,s)}return e.wt}function Gb(n,e,t){return new Uc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Ew(n,e){return _t(Hs(n),Hs(e))&&n.limitType===e.limitType}function OM(n){return`${$e(Hs(n))}|lt:${n.limitType}`}function TS(n){return`Query(target=${function et(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(r=t).field.canonicalString()} ${r.op} ${Ip(r.value)}`;var r}).join(", ")}]`),Ep(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(r=t).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>Ip(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>Ip(t)).join(",")),`Target(${e})`}(Hs(n))}; limitType=${n.limitType})`}function SS(n,e){return e.isFoundDocument()&&function(t,r){const s=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(s):Ge.isDocumentKey(t.path)?t.path.isEqual(s):t.path.isImmediateParentOf(s)}(n,e)&&function(t,r){for(const s of t.explicitOrderBy)if(!s.field.isKeyField()&&null===r.data.field(s.field))return!1;return!0}(n,e)&&function(t,r){for(const s of t.filters)if(!s.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(s,u,c){const m=xM(s,u,c);return s.inclusive?m<=0:m<0}(t.startAt,Jm(t),r)||t.endAt&&!function(s,u,c){const m=xM(s,u,c);return s.inclusive?m>=0:m>0}(t.endAt,Jm(t),r)));var t,r}function kM(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function PM(n){return(e,t)=>{let r=!1;for(const s of Jm(n)){const u=yk(s,e,t);if(0!==u)return u;r=r||s.field.isKeyField()}return 0}}function yk(n,e,t){const r=n.field.isKeyField()?Ge.comparator(e.key,t.key):function(s,u,c){const m=u.data.field(s),v=c.data.field(s);return null!==m&&null!==v?Vc(m,v):Xe()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Xe()}}function FM(n,e){if(n.gt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Wm(e)?"-0":e}}function LM(n){return{integerValue:""+n}}function VM(n,e){return ES(e)?LM(e):FM(n,e)}class zb{constructor(){this._=void 0}}function _k(n,e,t){return n instanceof Xm?function(r,s){const u={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return s&&(u.fields.__previous_value__=s),{mapValue:u}}(t,e):n instanceof bp?BM(n,e):n instanceof Dp?jM(n,e):function(r,s){const u=UM(r,s),c=$M(u)+$M(r.yt);return i(u)&&i(r.yt)?LM(c):FM(r.It,c)}(n,e)}function vk(n,e,t){return n instanceof bp?BM(n,e):n instanceof Dp?jM(n,e):t}function UM(n,e){return n instanceof ey?i(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class Xm extends zb{}class bp extends zb{constructor(e){super(),this.elements=e}}function BM(n,e){const t=HM(e);for(const r of n.elements)t.some(s=>Ko(s,r))||t.push(r);return{arrayValue:{values:t}}}class Dp extends zb{constructor(e){super(),this.elements=e}}function jM(n,e){let t=HM(e);for(const r of n.elements)t=t.filter(s=>!Ko(s,r));return{arrayValue:{values:t}}}class ey extends zb{constructor(e,t){super(),this.It=e,this.yt=t}}function $M(n){return Rn(n.integerValue||n.doubleValue)}function HM(n){return o(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class Iw{constructor(e,t){this.field=e,this.transform=t}}class Ek{constructor(e,t){this.version=e,this.transformResults=t}}class Qn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Qn}static exists(e){return new Qn(void 0,e)}static updateTime(e){return new Qn(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function qb(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class Wb{}function GM(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new ny(n.key,Qn.none()):new ty(n.key,n.data,Qn.none());{const t=n.data,r=O.empty();let s=new un(Kn.comparator);for(let u of e.fields)if(!s.has(u)){let c=t.field(u);null===c&&u.length>1&&(u=u.popLast(),c=t.field(u)),null===c?r.delete(u):r.set(u,c),s=s.add(u)}return new Bc(n.key,r,new ds(s.toArray()),Qn.none())}}function Ik(n,e,t){n instanceof ty?function(r,s,u){const c=r.value.clone(),m=WM(r.fieldTransforms,s,u.transformResults);c.setAll(m),s.convertToFoundDocument(u.version,c).setHasCommittedMutations()}(n,e,t):n instanceof Bc?function(r,s,u){if(!qb(r.precondition,s))return void s.convertToUnknownDocument(u.version);const c=WM(r.fieldTransforms,s,u.transformResults),m=s.data;m.setAll(qM(r)),m.setAll(c),s.convertToFoundDocument(u.version,m).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function bw(n,e,t,r){return n instanceof ty?function(s,u,c,m){if(!qb(s.precondition,u))return c;const v=s.value.clone(),b=ZM(s.fieldTransforms,m,u);return v.setAll(b),u.convertToFoundDocument(u.version,v).setHasLocalMutations(),null}(n,e,t,r):n instanceof Bc?function(s,u,c,m){if(!qb(s.precondition,u))return c;const v=ZM(s.fieldTransforms,m,u),b=u.data;return b.setAll(qM(s)),b.setAll(v),u.convertToFoundDocument(u.version,b).setHasLocalMutations(),null===c?null:c.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(A=>A.field))}(n,e,t,r):(c=t,qb(n.precondition,u=e)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):c);var u,c}function bk(n,e){let t=null;for(const r of n.fieldTransforms){const s=e.data.field(r.field),u=UM(r.transform,s||null);null!=u&&(null===t&&(t=O.empty()),t.set(r.field,u))}return t||null}function zM(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&Oc(t,r,(s,u)=>function wk(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof bp&&r instanceof bp||t instanceof Dp&&r instanceof Dp?Oc(t.elements,r.elements,Ko):t instanceof ey&&r instanceof ey?Ko(t.yt,r.yt):t instanceof Xm&&r instanceof Xm);var t,r}(s,u))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class ty extends Wb{constructor(e,t,r,s=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Bc extends Wb{constructor(e,t,r,s,u=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=s,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function qM(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function WM(n,e,t){const r=new Map;mt(n.length===t.length);for(let s=0;s<t.length;s++){const u=n[s],c=u.transform,m=e.data.field(u.field);r.set(u.field,vk(c,m,t[s]))}return r}function ZM(n,e,t){const r=new Map;for(const s of n){const u=s.transform,c=t.data.field(s.field);r.set(s.field,_k(u,c,e))}return r}class ny extends Wb{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class AS extends Wb{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Dk{constructor(e){this.count=e}}var Pr,en;function KM(n){switch(n){default:return Xe();case ce.CANCELLED:case ce.UNKNOWN:case ce.DEADLINE_EXCEEDED:case ce.RESOURCE_EXHAUSTED:case ce.INTERNAL:case ce.UNAVAILABLE:case ce.UNAUTHENTICATED:return!1;case ce.INVALID_ARGUMENT:case ce.NOT_FOUND:case ce.ALREADY_EXISTS:case ce.PERMISSION_DENIED:case ce.FAILED_PRECONDITION:case ce.ABORTED:case ce.OUT_OF_RANGE:case ce.UNIMPLEMENTED:case ce.DATA_LOSS:return!0}}function YM(n){if(void 0===n)return Vn("GRPC error has no .code"),ce.UNKNOWN;switch(n){case Pr.OK:return ce.OK;case Pr.CANCELLED:return ce.CANCELLED;case Pr.UNKNOWN:return ce.UNKNOWN;case Pr.DEADLINE_EXCEEDED:return ce.DEADLINE_EXCEEDED;case Pr.RESOURCE_EXHAUSTED:return ce.RESOURCE_EXHAUSTED;case Pr.INTERNAL:return ce.INTERNAL;case Pr.UNAVAILABLE:return ce.UNAVAILABLE;case Pr.UNAUTHENTICATED:return ce.UNAUTHENTICATED;case Pr.INVALID_ARGUMENT:return ce.INVALID_ARGUMENT;case Pr.NOT_FOUND:return ce.NOT_FOUND;case Pr.ALREADY_EXISTS:return ce.ALREADY_EXISTS;case Pr.PERMISSION_DENIED:return ce.PERMISSION_DENIED;case Pr.FAILED_PRECONDITION:return ce.FAILED_PRECONDITION;case Pr.ABORTED:return ce.ABORTED;case Pr.OUT_OF_RANGE:return ce.OUT_OF_RANGE;case Pr.UNIMPLEMENTED:return ce.UNIMPLEMENTED;case Pr.DATA_LOSS:return ce.DATA_LOSS;default:return Xe()}}(en=Pr||(Pr={}))[en.OK=0]="OK",en[en.CANCELLED=1]="CANCELLED",en[en.UNKNOWN=2]="UNKNOWN",en[en.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",en[en.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",en[en.NOT_FOUND=5]="NOT_FOUND",en[en.ALREADY_EXISTS=6]="ALREADY_EXISTS",en[en.PERMISSION_DENIED=7]="PERMISSION_DENIED",en[en.UNAUTHENTICATED=16]="UNAUTHENTICATED",en[en.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",en[en.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",en[en.ABORTED=10]="ABORTED",en[en.OUT_OF_RANGE=11]="OUT_OF_RANGE",en[en.UNIMPLEMENTED=12]="UNIMPLEMENTED",en[en.INTERNAL=13]="INTERNAL",en[en.UNAVAILABLE=14]="UNAVAILABLE",en[en.DATA_LOSS=15]="DATA_LOSS";class Eh{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[s,u]of r)if(this.equalsFn(s,e))return u}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),s=this.inner[r];if(void 0===s)return this.inner[r]=[[e,t]],void this.innerSize++;for(let u=0;u<s.length;u++)if(this.equalsFn(s[u][0],e))return void(s[u]=[e,t]);s.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return 1===r.length?delete this.inner[t]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Pc(this.inner,(t,r)=>{for(const[s,u]of r)e(s,u)})}isEmpty(){return jb(this.inner)}size(){return this.innerSize}}const Ck=new Yn(Ge.comparator);function Gs(){return Ck}const QM=new Yn(Ge.comparator);function Dw(...n){let e=QM;for(const t of n)e=e.insert(t.key,t);return e}function JM(n){let e=QM;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function sl(){return Cw()}function XM(){return Cw()}function Cw(){return new Eh(n=>n.toString(),(n,e)=>n.isEqual(e))}const Tk=new Yn(Ge.comparator),Sk=new un(Ge.comparator);function Vt(...n){let e=Sk;for(const t of n)e=e.add(t);return e}const Ak=new un(At);function Zb(){return Ak}class Tw{constructor(e,t,r,s,u){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,t){const r=new Map;return r.set(e,Sw.createSynthesizedTargetChangeForCurrentChange(e,t)),new Tw(bt.min(),r,Zb(),Gs(),Vt())}}class Sw{constructor(e,t,r,s,u){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,t){return new Sw(lr.EMPTY_BYTE_STRING,t,Vt(),Vt(),Vt())}}class Kb{constructor(e,t,r,s){this.Tt=e,this.removedTargetIds=t,this.key=r,this.Et=s}}class eR{constructor(e,t){this.targetId=e,this.At=t}}class tR{constructor(e,t,r=lr.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=s}}class nR{constructor(){this.Rt=0,this.bt=iR(),this.Pt=lr.EMPTY_BYTE_STRING,this.vt=!1,this.Vt=!0}get current(){return this.vt}get resumeToken(){return this.Pt}get St(){return 0!==this.Rt}get Dt(){return this.Vt}Ct(e){e.approximateByteSize()>0&&(this.Vt=!0,this.Pt=e)}xt(){let e=Vt(),t=Vt(),r=Vt();return this.bt.forEach((s,u)=>{switch(u){case 0:e=e.add(s);break;case 2:t=t.add(s);break;case 1:r=r.add(s);break;default:Xe()}}),new Sw(this.Pt,this.vt,e,t,r)}Nt(){this.Vt=!1,this.bt=iR()}kt(e,t){this.Vt=!0,this.bt=this.bt.insert(e,t)}Mt(e){this.Vt=!0,this.bt=this.bt.remove(e)}Ot(){this.Rt+=1}Ft(){this.Rt-=1}$t(){this.Vt=!0,this.vt=!0}}class xk{constructor(e){this.Bt=e,this.Lt=new Map,this.Ut=Gs(),this.qt=rR(),this.Kt=new un(At)}Gt(e){for(const t of e.Tt)e.Et&&e.Et.isFoundDocument()?this.Qt(t,e.Et):this.jt(t,e.key,e.Et);for(const t of e.removedTargetIds)this.jt(t,e.key,e.Et)}Wt(e){this.forEachTarget(e,t=>{const r=this.zt(t);switch(e.state){case 0:this.Ht(t)&&r.Ct(e.resumeToken);break;case 1:r.Ft(),r.St||r.Nt(),r.Ct(e.resumeToken);break;case 2:r.Ft(),r.St||this.removeTarget(t);break;case 3:this.Ht(t)&&(r.$t(),r.Ct(e.resumeToken));break;case 4:this.Ht(t)&&(this.Jt(t),r.Ct(e.resumeToken));break;default:Xe()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Lt.forEach((r,s)=>{this.Ht(s)&&t(s)})}Yt(e){const t=e.targetId,r=e.At.count,s=this.Xt(t);if(s){const u=s.target;if(xe(u))if(0===r){const c=new Ge(u.path);this.jt(t,c,Y.newNoDocument(c,bt.min()))}else mt(1===r);else this.Zt(t)!==r&&(this.Jt(t),this.Kt=this.Kt.add(t))}}te(e){const t=new Map;this.Lt.forEach((u,c)=>{const m=this.Xt(c);if(m){if(u.current&&xe(m.target)){const v=new Ge(m.target.path);null!==this.Ut.get(v)||this.ee(c,v)||this.jt(c,v,Y.newNoDocument(v,e))}u.Dt&&(t.set(c,u.xt()),u.Nt())}});let r=Vt();this.qt.forEach((u,c)=>{let m=!0;c.forEachWhile(v=>{const b=this.Xt(v);return!b||2===b.purpose||(m=!1,!1)}),m&&(r=r.add(u))}),this.Ut.forEach((u,c)=>c.setReadTime(e));const s=new Tw(e,t,this.Kt,this.Ut,r);return this.Ut=Gs(),this.qt=rR(),this.Kt=new un(At),s}Qt(e,t){if(!this.Ht(e))return;const r=this.ee(e,t.key)?2:0;this.zt(e).kt(t.key,r),this.Ut=this.Ut.insert(t.key,t),this.qt=this.qt.insert(t.key,this.ne(t.key).add(e))}jt(e,t,r){if(!this.Ht(e))return;const s=this.zt(e);this.ee(e,t)?s.kt(t,1):s.Mt(t),this.qt=this.qt.insert(t,this.ne(t).delete(e)),r&&(this.Ut=this.Ut.insert(t,r))}removeTarget(e){this.Lt.delete(e)}Zt(e){const t=this.zt(e).xt();return this.Bt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ot(e){this.zt(e).Ot()}zt(e){let t=this.Lt.get(e);return t||(t=new nR,this.Lt.set(e,t)),t}ne(e){let t=this.qt.get(e);return t||(t=new un(At),this.qt=this.qt.insert(e,t)),t}Ht(e){const t=null!==this.Xt(e);return t||ke("WatchChangeAggregator","Detected inactive target",e),t}Xt(e){const t=this.Lt.get(e);return t&&t.St?null:this.Bt.se(e)}Jt(e){this.Lt.set(e,new nR),this.Bt.getRemoteKeysForTarget(e).forEach(t=>{this.jt(e,t,null)})}ee(e,t){return this.Bt.getRemoteKeysForTarget(e).has(t)}}function rR(){return new Yn(Ge.comparator)}function iR(){return new Yn(Ge.comparator)}const Mk={asc:"ASCENDING",desc:"DESCENDING"},Rk={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class Nk{constructor(e,t){this.databaseId=e,this.gt=t}}function Aw(n,e){return n.gt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function sR(n,e){return n.gt?e.toBase64():e.toUint8Array()}function Ok(n,e){return Aw(n,e.toTimestamp())}function li(n){return mt(!!n),bt.fromTimestamp(function(e){const t=Za(e);return new gn(t.seconds,t.nanos)}(n))}function xS(n,e){return(t=n,new qt(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function oR(n){const e=qt.fromString(n);return mt(gR(e)),e}function xw(n,e){return xS(n.databaseId,e.path)}function ol(n,e){const t=oR(e);if(t.get(1)!==n.databaseId.projectId)throw new Re(ce.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Re(ce.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Ge(uR(t))}function MS(n,e){return xS(n.databaseId,e)}function aR(n){const e=oR(n);return 4===e.length?qt.emptyPath():uR(e)}function Mw(n){return new qt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function uR(n){return mt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function lR(n,e,t){return{name:xw(n,e),fields:t.value.mapValue.fields}}function cR(n,e,t){const r=ol(n,e.name),s=li(e.updateTime),u=new O({mapValue:{fields:e.fields}}),c=Y.newFoundDocument(r,s,u);return t&&c.setHasCommittedMutations(),t?c.setHasCommittedMutations():c}function Rw(n,e){let t;if(e instanceof ty)t={update:lR(n,e.key,e.value)};else if(e instanceof ny)t={delete:xw(n,e.key)};else if(e instanceof Bc)t={update:lR(n,e.key,e.data),updateMask:$k(e.fieldMask)};else{if(!(e instanceof AS))return Xe();t={verify:xw(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(s,u){const c=u.transform;if(c instanceof Xm)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof bp)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof Dp)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof ey)return{fieldPath:u.field.canonicalString(),increment:c.yt};throw Xe()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(s=e.precondition).updateTime?{updateTime:Ok(n,s.updateTime)}:void 0!==s.exists?{exists:s.exists}:Xe()),t;var s}function RS(n,e){const t=e.currentDocument?void 0!==(s=e.currentDocument).updateTime?Qn.updateTime(li(s.updateTime)):void 0!==s.exists?Qn.exists(s.exists):Qn.none():Qn.none(),r=e.updateTransforms?e.updateTransforms.map(s=>function(u,c){let m=null;"setToServerValue"in c?(mt("REQUEST_TIME"===c.setToServerValue),m=new Xm):"appendMissingElements"in c?m=new bp(c.appendMissingElements.values||[]):"removeAllFromArray"in c?m=new Dp(c.removeAllFromArray.values||[]):"increment"in c?m=new ey(u,c.increment):Xe();const v=Kn.fromServerFormat(c.fieldPath);return new Iw(v,m)}(n,s)):[];var s;if(e.update){const s=ol(n,e.update.name),u=new O({mapValue:{fields:e.update.fields}});if(e.updateMask){const c=new ds((e.updateMask.fieldPaths||[]).map(b=>Kn.fromServerFormat(b)));return new Bc(s,u,c,t,r)}return new ty(s,u,t,r)}if(e.delete){const s=ol(n,e.delete);return new ny(s,t)}if(e.verify){const s=ol(n,e.verify);return new AS(s,t)}return Xe()}function dR(n,e){return{documents:[MS(n,e.path)]}}function hR(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=MS(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=MS(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const s=function(v){if(0===v.length)return;const b=v.map(A=>function(M){if("=="===M.op){if(l(M.value))return{unaryFilter:{field:ry(M.field),op:"IS_NAN"}};if(a(M.value))return{unaryFilter:{field:ry(M.field),op:"IS_NULL"}}}else if("!="===M.op){if(l(M.value))return{unaryFilter:{field:ry(M.field),op:"IS_NOT_NAN"}};if(a(M.value))return{unaryFilter:{field:ry(M.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ry(M.field),op:Uk(M.op),value:M.value}}}(A));return 1===b.length?b[0]:{compositeFilter:{op:"AND",filters:b}}}(e.filters);s&&(t.structuredQuery.where=s);const u=function(v){if(0!==v.length)return v.map(b=>{return{field:ry((A=b).field),direction:Vk(A.dir)};var A})}(e.orderBy);u&&(t.structuredQuery.orderBy=u);const c=(b=e.limit,n.gt||Ep(b)?b:{value:b});var b,m,v;return null!==c&&(t.structuredQuery.limit=c),e.startAt&&(t.structuredQuery.startAt={before:(m=e.startAt).inclusive,values:m.position}),e.endAt&&(t.structuredQuery.endAt={before:!(v=e.endAt).inclusive,values:v.position}),t}function fR(n){let e=aR(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let s=null;if(r>0){mt(1===r);const A=t.from[0];A.allDescendants?s=A.collectionId:e=e.child(A.collectionId)}let u=[];t.where&&(u=pR(t.where));let c=[];t.orderBy&&(c=t.orderBy.map(A=>{return new Ym(iy((M=A).field),function(L){switch(L){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(M.direction));var M}));let m=null;t.limit&&(m=function(A){let M;return M="object"==typeof A?A.value:A,Ep(M)?null:M}(t.limit));let v=null;var A;t.startAt&&(v=new Yo((A=t.startAt).values||[],!!A.before));let b=null;return t.endAt&&(b=function(A){return new Yo(A.values||[],!A.before)}(t.endAt)),RM(e,s,c,u,m,"F",v,b)}function pR(n){return n?void 0!==n.unaryFilter?[jk(n)]:void 0!==n.fieldFilter?[Bk(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>pR(e)).reduce((e,t)=>e.concat(t)):Xe():[]}function Vk(n){return Mk[n]}function Uk(n){return Rk[n]}function ry(n){return{fieldPath:n.canonicalString()}}function iy(n){return Kn.fromServerFormat(n.fieldPath)}function Bk(n){return Un.create(iy(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Xe()}}(n.fieldFilter.op),n.fieldFilter.value)}function jk(n){switch(n.unaryFilter.op){case"IS_NAN":const e=iy(n.unaryFilter.field);return Un.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=iy(n.unaryFilter.field);return Un.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=iy(n.unaryFilter.field);return Un.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=iy(n.unaryFilter.field);return Un.create(s,"!=",{nullValue:"NULL_VALUE"});default:return Xe()}}function $k(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function gR(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function hs(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=mR(e)),e=Hk(n.get(t),e);return mR(e)}function Hk(n,e){let t=e;const r=n.length;for(let s=0;s<r;s++){const u=n.charAt(s);switch(u){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=u}}return t}function mR(n){return n+"\x01\x01"}function al(n){const e=n.length;if(mt(e>=2),2===e)return mt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),qt.emptyPath();const t=e-2,r=[];let s="";for(let u=0;u<e;){const c=n.indexOf("\x01",u);switch((c<0||c>t)&&Xe(),n.charAt(c+1)){case"\x01":const m=n.substring(u,c);let v;0===s.length?v=m:(s+=m,v=s,s=""),r.push(v);break;case"\x10":s+=n.substring(u,c),s+="\0";break;case"\x11":s+=n.substring(u,c+1);break;default:Xe()}u=c+2}return new qt(r)}const yR=["userId","batchId"];function Yb(n,e){return[n,hs(e)]}function _R(n,e,t){return[n,hs(e),t]}const Gk={},zk=["prefixPath","collectionGroup","readTime","documentId"],qk=["prefixPath","collectionGroup","documentId"],Wk=["collectionGroup","readTime","prefixPath","documentId"],Zk=["canonicalId","targetId"],Kk=["targetId","path"],Yk=["path","targetId"],Qk=["collectionId","parent"],Jk=["indexId","uid"],Xk=["uid","sequenceNumber"],eP=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],tP=["indexId","uid","orderedDocumentKey"],nP=["userId","collectionPath","documentId"],rP=["userId","collectionPath","largestBatchId"],iP=["userId","collectionGroup","largestBatchId"],vR=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],sP=[...vR,"documentOverlays"],wR=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],ER=wR,oP=[...ER,"indexConfiguration","indexState","indexEntries"];class NS extends vp{constructor(e,t){super(),this.ie=e,this.currentSequenceNumber=t}}function ci(n,e){const t=qe(n);return $s.O(t.ie,e)}class OS{constructor(e,t,r,s){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let s=0;s<this.mutations.length;s++){const u=this.mutations[s];u.key.isEqual(e.key)&&Ik(u,e,r[s])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=bw(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=bw(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=XM();return this.mutations.forEach(s=>{const u=e.get(s.key),c=u.overlayedDocument;let m=this.applyToLocalView(c,u.mutatedFields);m=t.has(s.key)?null:m;const v=GM(c,m);null!==v&&r.set(s.key,v),c.isValidDocument()||c.convertToNoDocument(bt.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Vt())}isEqual(e){return this.batchId===e.batchId&&Oc(this.mutations,e.mutations,(t,r)=>zM(t,r))&&Oc(this.baseMutations,e.baseMutations,(t,r)=>zM(t,r))}}class kS{constructor(e,t,r,s){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=s}static from(e,t,r){mt(e.mutations.length===r.length);let s=Tk;const u=e.mutations;for(let c=0;c<u.length;c++)s=s.insert(u[c].key,r[c].version);return new kS(e,t,r,s)}}class PS{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Ih{constructor(e,t,r,s,u=bt.min(),c=bt.min(),m=lr.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=m}withSequenceNumber(e){return new Ih(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new Ih(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Ih(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class IR{constructor(e){this.re=e}}function bR(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Qb(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:xw(s=n.re,(u=e).key),fields:u.data.value.mapValue.fields,updateTime:Aw(s,u.version.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Cp(e.version)};else{if(!e.isUnknownDocument())return Xe();r.unknownDocument={path:t.path.toArray(),version:Cp(e.version)}}var s,u;return r}function Qb(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Cp(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Tp(n){const e=new gn(n.seconds,n.nanoseconds);return bt.fromTimestamp(e)}function Sp(n,e){const t=(e.baseMutations||[]).map(u=>RS(n.re,u));for(let u=0;u<e.mutations.length-1;++u){const c=e.mutations[u];u+1<e.mutations.length&&void 0!==e.mutations[u+1].transform&&(c.updateTransforms=e.mutations[u+1].transform.fieldTransforms,e.mutations.splice(u+1,1),++u)}const r=e.mutations.map(u=>RS(n.re,u)),s=gn.fromMillis(e.localWriteTimeMs);return new OS(e.batchId,s,t,r)}function Nw(n){const e=Tp(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?Tp(n.lastLimboFreeSnapshotVersion):bt.min();let r;var s;return void 0!==n.query.documents?(mt(1===(s=n.query).documents.length),r=Hs(Qm(aR(s.documents[0])))):r=Hs(fR(n.query)),new Ih(r,n.targetId,0,n.lastListenSequenceNumber,e,t,lr.fromBase64String(n.resumeToken))}function DR(n,e){const t=Cp(e.snapshotVersion),r=Cp(e.lastLimboFreeSnapshotVersion);let s;s=xe(e.target)?dR(n.re,e.target):hR(n.re,e.target);const u=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:$e(e.target),readTime:t,resumeToken:u,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:s}}function FS(n){const e=fR({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?Gb(e,e.limit,"L"):e}function LS(n,e){return new PS(e.largestBatchId,RS(n.re,e.overlayMutation))}function CR(n,e){const t=e.path.lastSegment();return[n,hs(e.path.popLast()),t]}function TR(n,e,t,r){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:Cp(r.readTime),documentKey:hs(r.documentKey.path),largestBatchId:r.largestBatchId}}class uP{getBundleMetadata(e,t){return SR(e).get(t).next(r=>{if(r)return{id:(s=r).bundleId,createTime:Tp(s.createTime),version:s.version};var s})}saveBundleMetadata(e,t){return SR(e).put({bundleId:(r=t).id,createTime:Cp(li(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return AR(e).get(t).next(r=>{if(r)return{name:(s=r).name,query:FS(s.bundledQuery),readTime:Tp(s.readTime)};var s})}saveNamedQuery(e,t){return AR(e).put({name:(r=t).name,readTime:Cp(li(r.readTime)),bundledQuery:r.bundledQuery});var r}}function SR(n){return ci(n,"bundles")}function AR(n){return ci(n,"namedQueries")}class Jb{constructor(e,t){this.It=e,this.userId=t}static oe(e,t){return new Jb(e,t.uid||"")}getOverlay(e,t){return Ow(e).get(CR(this.userId,t)).next(r=>r?LS(this.It,r):null)}getOverlays(e,t){const r=sl();return se.forEach(t,s=>this.getOverlay(e,s).next(u=>{null!==u&&r.set(s,u)})).next(()=>r)}saveOverlays(e,t,r){const s=[];return r.forEach((u,c)=>{const m=new PS(t,c);s.push(this.ue(e,m))}),se.waitFor(s)}removeOverlaysForBatchId(e,t,r){const s=new Set;t.forEach(c=>s.add(hs(c.getCollectionPath())));const u=[];return s.forEach(c=>{const m=IDBKeyRange.bound([this.userId,c,r],[this.userId,c,r+1],!1,!0);u.push(Ow(e).Y("collectionPathOverlayIndex",m))}),se.waitFor(u)}getOverlaysForCollection(e,t,r){const s=sl(),u=hs(t),c=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,Number.POSITIVE_INFINITY],!0);return Ow(e).W("collectionPathOverlayIndex",c).next(m=>{for(const v of m){const b=LS(this.It,v);s.set(b.getKey(),b)}return s})}getOverlaysForCollectionGroup(e,t,r,s){const u=sl();let c;const m=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Ow(e).Z({index:"collectionGroupOverlayIndex",range:m},(v,b,A)=>{const M=LS(this.It,b);u.size()<s||M.largestBatchId===c?(u.set(M.getKey(),M),c=M.largestBatchId):A.done()}).next(()=>u)}ue(e,t){return Ow(e).put(function(r,s,u){const[c,m,v]=CR(s,u.mutation.key);return{userId:s,collectionPath:m,documentId:v,collectionGroup:u.mutation.key.getCollectionGroup(),largestBatchId:u.largestBatchId,overlayMutation:Rw(r.re,u.mutation)}}(this.It,this.userId,t))}}function Ow(n){return ci(n,"documentOverlays")}class Ap{constructor(){}ce(e,t){this.ae(e,t),t.he()}ae(e,t){if("nullValue"in e)this.le(t,5);else if("booleanValue"in e)this.le(t,10),t.fe(e.booleanValue?1:0);else if("integerValue"in e)this.le(t,15),t.fe(Rn(e.integerValue));else if("doubleValue"in e){const r=Rn(e.doubleValue);isNaN(r)?this.le(t,13):(this.le(t,15),Wm(r)?t.fe(0):t.fe(r))}else if("timestampValue"in e){const r=e.timestampValue;this.le(t,20),"string"==typeof r?t.de(r):(t.de(`${r.seconds||""}`),t.fe(r.nanos||0))}else if("stringValue"in e)this._e(e.stringValue,t),this.we(t);else if("bytesValue"in e)this.le(t,30),t.me(Fc(e.bytesValue)),this.we(t);else if("referenceValue"in e)this.ge(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.le(t,45),t.fe(r.latitude||0),t.fe(r.longitude||0)}else"mapValue"in e?_(e)?this.le(t,Number.MAX_SAFE_INTEGER):(this.ye(e.mapValue,t),this.we(t)):"arrayValue"in e?(this.pe(e.arrayValue,t),this.we(t)):Xe()}_e(e,t){this.le(t,25),this.Ie(e,t)}Ie(e,t){t.de(e)}ye(e,t){const r=e.fields||{};this.le(t,55);for(const s of Object.keys(r))this._e(s,t),this.ae(r[s],t)}pe(e,t){const r=e.values||[];this.le(t,50);for(const s of r)this.ae(s,t)}ge(e,t){this.le(t,37),Ge.fromName(e).path.forEach(r=>{this.le(t,60),this.Ie(r,t)})}le(e,t){e.fe(t)}we(e){e.fe(2)}}function lP(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function xR(n){const e=64-function(t){let r=0;for(let s=0;s<8;++s){const u=lP(255&t[s]);if(r+=u,8!==u)break}return r}(n);return Math.ceil(e/8)}Ap.Te=new Ap;class cP{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ee(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ae(r.value),r=t.next();this.Re()}be(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Pe(r.value),r=t.next();this.ve()}Ve(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ae(r);else if(r<2048)this.Ae(960|r>>>6),this.Ae(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ae(480|r>>>12),this.Ae(128|63&r>>>6),this.Ae(128|63&r);else{const s=t.codePointAt(0);this.Ae(240|s>>>18),this.Ae(128|63&s>>>12),this.Ae(128|63&s>>>6),this.Ae(128|63&s)}}this.Re()}Se(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Pe(r);else if(r<2048)this.Pe(960|r>>>6),this.Pe(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Pe(480|r>>>12),this.Pe(128|63&r>>>6),this.Pe(128|63&r);else{const s=t.codePointAt(0);this.Pe(240|s>>>18),this.Pe(128|63&s>>>12),this.Pe(128|63&s>>>6),this.Pe(128|63&s)}}this.ve()}De(e){const t=this.Ce(e),r=xR(t);this.xe(1+r),this.buffer[this.position++]=255&r;for(let s=t.length-r;s<t.length;++s)this.buffer[this.position++]=255&t[s]}Ne(e){const t=this.Ce(e),r=xR(t);this.xe(1+r),this.buffer[this.position++]=~(255&r);for(let s=t.length-r;s<t.length;++s)this.buffer[this.position++]=~(255&t[s])}ke(){this.Me(255),this.Me(255)}Oe(){this.Fe(255),this.Fe(255)}reset(){this.position=0}seed(e){this.xe(e.length),this.buffer.set(e,this.position),this.position+=e.length}$e(){return this.buffer.slice(0,this.position)}Ce(e){const t=function(s){const u=new DataView(new ArrayBuffer(8));return u.setFloat64(0,s,!1),new Uint8Array(u.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let s=1;s<t.length;++s)t[s]^=r?255:0;return t}Ae(e){const t=255&e;0===t?(this.Me(0),this.Me(255)):255===t?(this.Me(255),this.Me(0)):this.Me(t)}Pe(e){const t=255&e;0===t?(this.Fe(0),this.Fe(255)):255===t?(this.Fe(255),this.Fe(0)):this.Fe(e)}Re(){this.Me(0),this.Me(1)}ve(){this.Fe(0),this.Fe(1)}Me(e){this.xe(1),this.buffer[this.position++]=e}Fe(e){this.xe(1),this.buffer[this.position++]=~e}xe(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const s=new Uint8Array(r);s.set(this.buffer),this.buffer=s}}class dP{constructor(e){this.Be=e}me(e){this.Be.Ee(e)}de(e){this.Be.Ve(e)}fe(e){this.Be.De(e)}he(){this.Be.ke()}}class hP{constructor(e){this.Be=e}me(e){this.Be.be(e)}de(e){this.Be.Se(e)}fe(e){this.Be.Ne(e)}he(){this.Be.Oe()}}class kw{constructor(){this.Be=new cP,this.Le=new dP(this.Be),this.Ue=new hP(this.Be)}seed(e){this.Be.seed(e)}qe(e){return 0===e?this.Le:this.Ue}$e(){return this.Be.$e()}reset(){this.Be.reset()}}class xp{constructor(e,t,r,s){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=s}Ke(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new xp(this.indexId,this.documentKey,this.arrayValue,r)}}function Mp(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=MR(n.arrayValue,e.arrayValue),0!==t?t:(t=MR(n.directionalValue,e.directionalValue),0!==t?t:Ge.comparator(n.documentKey,e.documentKey)))}function MR(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class fP{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ge=e.orderBy,this.Qe=[];for(const t of e.filters){const r=t;r.dt()?this.je=r:this.Qe.push(r)}}We(e){const t=Lb(e);if(void 0!==t&&!this.ze(t))return!1;const r=tl(e);let s=0,u=0;for(;s<r.length&&this.ze(r[s]);++s);if(s===r.length)return!0;if(void 0!==this.je){const c=r[s];if(!this.He(this.je,c)||!this.Je(this.Ge[u++],c))return!1;++s}for(;s<r.length;++s){const c=r[s];if(u>=this.Ge.length||!this.Je(this.Ge[u++],c))return!1}return!0}ze(e){for(const t of this.Qe)if(this.He(t,e))return!0;return!1}He(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Je(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class pP{constructor(){this.Ye=new VS}addToCollectionParentIndex(e,t){return this.Ye.add(t),se.resolve()}getCollectionParents(e,t){return se.resolve(this.Ye.getEntries(t))}addFieldIndex(e,t){return se.resolve()}deleteFieldIndex(e,t){return se.resolve()}getDocumentsMatchingTarget(e,t){return se.resolve(null)}getIndexType(e,t){return se.resolve(0)}getFieldIndexes(e,t){return se.resolve([])}getNextCollectionGroupToUpdate(e){return se.resolve(null)}getMinOffset(e,t){return se.resolve(js.min())}getMinOffsetFromCollectionGroup(e,t){return se.resolve(js.min())}updateCollectionGroup(e,t,r){return se.resolve()}updateIndexEntries(e,t){return se.resolve()}}class VS{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t]||new un(qt.comparator),u=!s.has(r);return this.index[t]=s.add(r),u}has(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t];return s&&s.has(r)}getEntries(e){return(this.index[e]||new un(qt.comparator)).toArray()}}const Xb=new Uint8Array(0);class gP{constructor(e,t){this.user=e,this.databaseId=t,this.Xe=new VS,this.Ze=new Eh(r=>$e(r),(r,s)=>_t(r,s)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Xe.has(t)){const r=t.lastSegment(),s=t.popLast();e.addOnCommittedListener(()=>{this.Xe.add(t)});const u={collectionId:r,parent:hs(s)};return RR(e).put(u)}return se.resolve()}getCollectionParents(e,t){const r=[],s=IDBKeyRange.bound([t,""],[yp(t),""],!1,!0);return RR(e).W(s).next(u=>{for(const c of u){if(c.collectionId!==t)break;r.push(al(c.parent))}return r})}addFieldIndex(e,t){const r=eD(e),s={indexId:(c=t).indexId,collectionGroup:c.collectionGroup,fields:c.fields.map(m=>[m.fieldPath.canonicalString(),m.kind])};var c;delete s.indexId;const u=r.add(s);if(t.indexState){const c=Fw(e);return u.next(m=>{c.put(TR(m,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return u.next()}deleteFieldIndex(e,t){const r=eD(e),s=Fw(e),u=Pw(e);return r.delete(t.indexId).next(()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>u.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=Pw(e);let s=!0;const u=new Map;return se.forEach(this.tn(t),c=>this.en(e,c).next(m=>{s&&(s=!!m),u.set(c,m)})).next(()=>{if(s){let c=Vt();const m=[];return se.forEach(u,(v,b)=>{var A;ke("IndexedDbIndexManager",`Using index ${A=v,`id=${A.indexId}|cg=${A.collectionGroup}|f=${A.fields.map(lt=>`${lt.fieldPath}:${lt.kind}`).join(",")}`} to execute ${$e(t)}`);const M=function(lt,tt){const Tt=Lb(tt);if(void 0===Tt)return null;for(const kt of ht(lt,Tt.fieldPath))switch(kt.op){case"array-contains-any":return kt.value.arrayValue.values||[];case"array-contains":return[kt.value]}return null}(b,v),L=function(lt,tt){const Tt=new Map;for(const kt of tl(tt))for(const cr of ht(lt,kt.fieldPath))switch(cr.op){case"==":case"in":Tt.set(kt.fieldPath.canonicalString(),cr.value);break;case"not-in":case"!=":return Tt.set(kt.fieldPath.canonicalString(),cr.value),Array.from(Tt.values())}return null}(b,v),G=function(lt,tt){const Tt=[];let kt=!0;for(const cr of tl(tt)){const Ya=0===cr.kind?$t(lt,cr.fieldPath,lt.startAt):_n(lt,cr.fieldPath,lt.startAt);Tt.push(Ya.value),kt&&(kt=Ya.inclusive)}return new Yo(Tt,kt)}(b,v),J=function(lt,tt){const Tt=[];let kt=!0;for(const cr of tl(tt)){const Ya=0===cr.kind?_n(lt,cr.fieldPath,lt.endAt):$t(lt,cr.fieldPath,lt.endAt);Tt.push(Ya.value),kt&&(kt=Ya.inclusive)}return new Yo(Tt,kt)}(b,v),Ie=this.nn(v,b,G),Ce=this.nn(v,b,J),Ze=this.sn(v,b,L),ut=this.rn(v.indexId,M,Ie,G.inclusive,Ce,J.inclusive,Ze);return se.forEach(ut,lt=>r.J(lt,t.limit).next(tt=>{tt.forEach(Tt=>{const kt=Ge.fromSegments(Tt.documentKey);c.has(kt)||(c=c.add(kt),m.push(kt))})}))}).next(()=>m)}return se.resolve(null)})}tn(e){let t=this.Ze.get(e);return t||(t=[e],this.Ze.set(e,t),t)}rn(e,t,r,s,u,c,m){const v=(null!=t?t.length:1)*Math.max(r.length,u.length),b=v/(null!=t?t.length:1),A=[];for(let M=0;M<v;++M){const L=t?this.on(t[M/b]):Xb,G=this.un(e,L,r[M%b],s),J=this.cn(e,L,u[M%b],c),Ie=m.map(Ce=>this.un(e,L,Ce,!0));A.push(...this.createRange(G,J,Ie))}return A}un(e,t,r,s){const u=new xp(e,Ge.empty(),t,r);return s?u:u.Ke()}cn(e,t,r,s){const u=new xp(e,Ge.empty(),t,r);return s?u.Ke():u}en(e,t){const r=new fP(t),s=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,s).next(u=>{let c=null;for(const m of u)r.We(m)&&(!c||m.fields.length>c.fields.length)&&(c=m);return c})}getIndexType(e,t){let r=2;return se.forEach(this.tn(t),s=>this.en(e,s).next(u=>{u?0!==r&&u.fields.length<function(c){let m=new un(Kn.comparator),v=!1;for(const b of c.filters){const A=b;A.field.isKeyField()||("array-contains"===A.op||"array-contains-any"===A.op?v=!0:m=m.add(A.field))}for(const b of c.orderBy)b.field.isKeyField()||(m=m.add(b.field));return m.size+(v?1:0)}(s)&&(r=1):r=0})).next(()=>r)}an(e,t){const r=new kw;for(const s of tl(e)){const u=t.data.field(s.fieldPath);if(null==u)return null;const c=r.qe(s.kind);Ap.Te.ce(u,c)}return r.$e()}on(e){const t=new kw;return Ap.Te.ce(e,t.qe(0)),t.$e()}hn(e,t){const r=new kw;return Ap.Te.ce(wh(this.databaseId,t),r.qe(function(s){const u=tl(s);return 0===u.length?0:u[u.length-1].kind}(e))),r.$e()}sn(e,t,r){if(null===r)return[];let s=[];s.push(new kw);let u=0;for(const c of tl(e)){const m=r[u++];for(const v of s)if(this.ln(t,c.fieldPath)&&o(m))s=this.fn(s,c,m);else{const b=v.qe(c.kind);Ap.Te.ce(m,b)}}return this.dn(s)}nn(e,t,r){return this.sn(e,t,r.position)}dn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].$e();return t}fn(e,t,r){const s=[...e],u=[];for(const c of r.arrayValue.values||[])for(const m of s){const v=new kw;v.seed(m.$e()),Ap.Te.ce(c,v.qe(t.kind)),u.push(v)}return u}ln(e,t){return!!e.filters.find(r=>r instanceof Un&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=eD(e),s=Fw(e);return(t?r.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.W()).next(u=>{const c=[];return se.forEach(u,m=>s.get([m.indexId,this.uid]).next(v=>{c.push(function(b,A){const M=A?new Gm(A.sequenceNumber,new js(Tp(A.readTime),new Ge(al(A.documentKey)),A.largestBatchId)):Gm.empty(),L=b.fields.map(([G,J])=>new Hm(Kn.fromServerFormat(G),J));return new ow(b.indexId,b.collectionGroup,L,M)}(m,v))})).next(()=>c)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,s)=>{const u=r.indexState.sequenceNumber-s.indexState.sequenceNumber;return 0!==u?u:At(r.collectionGroup,s.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const s=eD(e),u=Fw(e);return this._n(e).next(c=>s.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(m=>se.forEach(m,v=>u.put(TR(v.indexId,this.user,c,r)))))}updateIndexEntries(e,t){const r=new Map;return se.forEach(t,(s,u)=>{const c=r.get(s.collectionGroup);return(c?se.resolve(c):this.getFieldIndexes(e,s.collectionGroup)).next(m=>(r.set(s.collectionGroup,m),se.forEach(m,v=>this.wn(e,s,v).next(b=>{const A=this.mn(u,v);return b.isEqual(A)?se.resolve():this.gn(e,u,v,b,A)}))))})}yn(e,t,r,s){return Pw(e).put({indexId:s.indexId,uid:this.uid,arrayValue:s.arrayValue,directionalValue:s.directionalValue,orderedDocumentKey:this.hn(r,t.key),documentKey:t.key.path.toArray()})}pn(e,t,r,s){return Pw(e).delete([s.indexId,this.uid,s.arrayValue,s.directionalValue,this.hn(r,t.key),t.key.path.toArray()])}wn(e,t,r){const s=Pw(e);let u=new un(Mp);return s.Z({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.hn(r,t)])},(c,m)=>{u=u.add(new xp(r.indexId,t,m.arrayValue,m.directionalValue))}).next(()=>u)}mn(e,t){let r=new un(Mp);const s=this.an(t,e);if(null==s)return r;const u=Lb(t);if(null!=u){const c=e.data.field(u.fieldPath);if(o(c))for(const m of c.arrayValue.values||[])r=r.add(new xp(t.indexId,e.key,this.on(m),s))}else r=r.add(new xp(t.indexId,e.key,Xb,s));return r}gn(e,t,r,s,u){ke("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const c=[];return function(m,v,b,A,M){const L=m.getIterator(),G=v.getIterator();let J=_h(L),Ie=_h(G);for(;J||Ie;){let Ce=!1,Ze=!1;if(J&&Ie){const ut=b(J,Ie);ut<0?Ze=!0:ut>0&&(Ce=!0)}else null!=J?Ze=!0:Ce=!0;Ce?(A(Ie),Ie=_h(G)):Ze?(M(J),J=_h(L)):(J=_h(L),Ie=_h(G))}}(s,u,Mp,m=>{c.push(this.yn(e,t,r,m))},m=>{c.push(this.pn(e,t,r,m))}),se.waitFor(c)}_n(e){let t=1;return Fw(e).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,s,u)=>{u.done(),t=s.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((c,m)=>Mp(c,m)).filter((c,m,v)=>!m||0!==Mp(c,v[m-1]));const s=[];s.push(e);for(const c of r){const m=Mp(c,e),v=Mp(c,t);if(0===m)s[0]=e.Ke();else if(m>0&&v<0)s.push(c),s.push(c.Ke());else if(v>0)break}s.push(t);const u=[];for(let c=0;c<s.length;c+=2)u.push(IDBKeyRange.bound([s[c].indexId,this.uid,s[c].arrayValue,s[c].directionalValue,Xb,[]],[s[c+1].indexId,this.uid,s[c+1].arrayValue,s[c+1].directionalValue,Xb,[]]));return u}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(NR)}getMinOffset(e,t){return se.mapArray(this.tn(t),r=>this.en(e,r).next(s=>s||Xe())).next(NR)}}function RR(n){return ci(n,"collectionParents")}function Pw(n){return ci(n,"indexEntries")}function eD(n){return ci(n,"indexConfiguration")}function Fw(n){return ci(n,"indexState")}function NR(n){mt(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const s=n[r].indexState.offset;Vb(s,e)<0&&(e=s),t<s.largestBatchId&&(t=s.largestBatchId)}return new js(e.readTime,e.documentKey,t)}const OR={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class zs{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new zs(e,zs.DEFAULT_COLLECTION_PERCENTILE,zs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function kR(n,e,t){const r=n.store("mutations"),s=n.store("documentMutations"),u=[],c=IDBKeyRange.only(t.batchId);let m=0;const v=r.Z({range:c},(A,M,L)=>(m++,L.delete()));u.push(v.next(()=>{mt(1===m)}));const b=[];for(const A of t.mutations){const M=_R(e,A.key.path,t.batchId);u.push(s.delete(M)),b.push(A.key)}return se.waitFor(u).next(()=>b)}function tD(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw Xe();e=n.noDocument}return JSON.stringify(e).length}zs.DEFAULT_COLLECTION_PERCENTILE=10,zs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,zs.DEFAULT=new zs(41943040,zs.DEFAULT_COLLECTION_PERCENTILE,zs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),zs.DISABLED=new zs(-1,0,0);class nD{constructor(e,t,r,s){this.userId=e,this.It=t,this.indexManager=r,this.referenceDelegate=s,this.In={}}static oe(e,t,r,s){mt(""!==e.uid);const u=e.isAuthenticated()?e.uid:"";return new nD(u,t,r,s)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return bh(e).Z({index:"userMutationsIndex",range:r},(s,u,c)=>{t=!1,c.done()}).next(()=>t)}addMutationBatch(e,t,r,s){const u=sy(e),c=bh(e);return c.add({}).next(m=>{mt("number"==typeof m);const v=new OS(m,t,r,s),b=function(L,G,J){const Ie=J.baseMutations.map(Ze=>Rw(L.re,Ze)),Ce=J.mutations.map(Ze=>Rw(L.re,Ze));return{userId:G,batchId:J.batchId,localWriteTimeMs:J.localWriteTime.toMillis(),baseMutations:Ie,mutations:Ce}}(this.It,this.userId,v),A=[];let M=new un((L,G)=>At(L.canonicalString(),G.canonicalString()));for(const L of s){const G=_R(this.userId,L.key.path,m);M=M.add(L.key.path.popLast()),A.push(c.put(b)),A.push(u.put(G,Gk))}return M.forEach(L=>{A.push(this.indexManager.addToCollectionParentIndex(e,L))}),e.addOnCommittedListener(()=>{this.In[m]=v.keys()}),se.waitFor(A).next(()=>v)})}lookupMutationBatch(e,t){return bh(e).get(t).next(r=>r?(mt(r.userId===this.userId),Sp(this.It,r)):null)}Tn(e,t){return this.In[t]?se.resolve(this.In[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const s=r.keys();return this.In[t]=s,s}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,s=IDBKeyRange.lowerBound([this.userId,r]);let u=null;return bh(e).Z({index:"userMutationsIndex",range:s},(c,m,v)=>{m.userId===this.userId&&(mt(m.batchId>=r),u=Sp(this.It,m)),v.done()}).next(()=>u)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return bh(e).Z({index:"userMutationsIndex",range:t,reverse:!0},(s,u,c)=>{r=u.batchId,c.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return bh(e).W("userMutationsIndex",t).next(r=>r.map(s=>Sp(this.It,s)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=Yb(this.userId,t.path),s=IDBKeyRange.lowerBound(r),u=[];return sy(e).Z({range:s},(c,m,v)=>{const[b,A,M]=c,L=al(A);if(b===this.userId&&t.path.isEqual(L))return bh(e).get(M).next(G=>{if(!G)throw Xe();mt(G.userId===this.userId),u.push(Sp(this.It,G))});v.done()}).next(()=>u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new un(At);const s=[];return t.forEach(u=>{const c=Yb(this.userId,u.path),m=IDBKeyRange.lowerBound(c),v=sy(e).Z({range:m},(b,A,M)=>{const[L,G,J]=b,Ie=al(G);L===this.userId&&u.path.isEqual(Ie)?r=r.add(J):M.done()});s.push(v)}),se.waitFor(s).next(()=>this.En(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,s=r.length+1,u=Yb(this.userId,r),c=IDBKeyRange.lowerBound(u);let m=new un(At);return sy(e).Z({range:c},(v,b,A)=>{const[M,L,G]=v,J=al(L);M===this.userId&&r.isPrefixOf(J)?J.length===s&&(m=m.add(G)):A.done()}).next(()=>this.En(e,m))}En(e,t){const r=[],s=[];return t.forEach(u=>{s.push(bh(e).get(u).next(c=>{if(null===c)throw Xe();mt(c.userId===this.userId),r.push(Sp(this.It,c))}))}),se.waitFor(s).next(()=>r)}removeMutationBatch(e,t){return kR(e.ie,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.An(t.batchId)}),se.forEach(r,s=>this.referenceDelegate.markPotentiallyOrphaned(e,s))))}An(e){delete this.In[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return se.resolve();const r=IDBKeyRange.lowerBound([this.userId]),s=[];return sy(e).Z({range:r},(u,c,m)=>{if(u[0]===this.userId){const v=al(u[1]);s.push(v)}else m.done()}).next(()=>{mt(0===s.length)})})}containsKey(e,t){return PR(e,this.userId,t)}Rn(e){return FR(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function PR(n,e,t){const r=Yb(e,t.path),s=r[1],u=IDBKeyRange.lowerBound(r);let c=!1;return sy(n).Z({range:u,X:!0},(m,v,b)=>{const[A,M,L]=m;A===e&&M===s&&(c=!0),b.done()}).next(()=>c)}function bh(n){return ci(n,"mutations")}function sy(n){return ci(n,"documentMutations")}function FR(n){return ci(n,"mutationQueues")}class Rp{constructor(e){this.bn=e}next(){return this.bn+=2,this.bn}static Pn(){return new Rp(0)}static vn(){return new Rp(-1)}}class mP{constructor(e,t){this.referenceDelegate=e,this.It=t}allocateTargetId(e){return this.Vn(e).next(t=>{const r=new Rp(t.highestTargetId);return t.highestTargetId=r.next(),this.Sn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Vn(e).next(t=>bt.fromTimestamp(new gn(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Vn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.Vn(e).next(s=>(s.highestListenSequenceNumber=t,r&&(s.lastRemoteSnapshotVersion=r.toTimestamp()),t>s.highestListenSequenceNumber&&(s.highestListenSequenceNumber=t),this.Sn(e,s)))}addTargetData(e,t){return this.Dn(e,t).next(()=>this.Vn(e).next(r=>(r.targetCount+=1,this.Cn(t,r),this.Sn(e,r))))}updateTargetData(e,t){return this.Dn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>oy(e).delete(t.targetId)).next(()=>this.Vn(e)).next(r=>(mt(r.targetCount>0),r.targetCount-=1,this.Sn(e,r)))}removeTargets(e,t,r){let s=0;const u=[];return oy(e).Z((c,m)=>{const v=Nw(m);v.sequenceNumber<=t&&null===r.get(v.targetId)&&(s++,u.push(this.removeTargetData(e,v)))}).next(()=>se.waitFor(u)).next(()=>s)}forEachTarget(e,t){return oy(e).Z((r,s)=>{const u=Nw(s);t(u)})}Vn(e){return LR(e).get("targetGlobalKey").next(t=>(mt(null!==t),t))}Sn(e,t){return LR(e).put("targetGlobalKey",t)}Dn(e,t){return oy(e).put(DR(this.It,t))}Cn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Vn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=$e(t),s=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let u=null;return oy(e).Z({range:s,index:"queryTargetsIndex"},(c,m,v)=>{const b=Nw(m);_t(t,b.target)&&(u=b,v.done())}).next(()=>u)}addMatchingKeys(e,t,r){const s=[],u=Dh(e);return t.forEach(c=>{const m=hs(c.path);s.push(u.put({targetId:r,path:m})),s.push(this.referenceDelegate.addReference(e,r,c))}),se.waitFor(s)}removeMatchingKeys(e,t,r){const s=Dh(e);return se.forEach(t,u=>{const c=hs(u.path);return se.waitFor([s.delete([r,c]),this.referenceDelegate.removeReference(e,r,u)])})}removeMatchingKeysForTargetId(e,t){const r=Dh(e),s=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(s)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),s=Dh(e);let u=Vt();return s.Z({range:r,X:!0},(c,m,v)=>{const b=al(c[1]),A=new Ge(b);u=u.add(A)}).next(()=>u)}containsKey(e,t){const r=hs(t.path),s=IDBKeyRange.bound([r],[yp(r)],!1,!0);let u=0;return Dh(e).Z({index:"documentTargetsIndex",X:!0,range:s},([c,m],v,b)=>{0!==c&&(u++,b.done())}).next(()=>u>0)}se(e,t){return oy(e).get(t).next(r=>r?Nw(r):null)}}function oy(n){return ci(n,"targets")}function LR(n){return ci(n,"targetGlobal")}function Dh(n){return ci(n,"targetDocuments")}function VR([n,e],[t,r]){const s=At(n,t);return 0===s?At(e,r):s}class yP{constructor(e){this.xn=e,this.buffer=new un(VR),this.Nn=0}kn(){return++this.Nn}Mn(e){const t=[e,this.kn()];if(this.buffer.size<this.xn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();VR(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class _P{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.On=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Fn(6e4)}stop(){this.On&&(this.On.cancel(),this.On=null)}get started(){return null!==this.On}Fn(e){var t=this;ke("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.On=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,ye.Z)(function*(){t.On=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){rl(r)?ke("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield nl(r)}yield t.Fn(3e5)}))}}class vP{constructor(e,t){this.$n=e,this.params=t}calculateTargetCount(e,t){return this.$n.Bn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return se.resolve(cs.at);const r=new yP(t);return this.$n.forEachTarget(e,s=>r.Mn(s.sequenceNumber)).next(()=>this.$n.Ln(e,s=>r.Mn(s))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.$n.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.$n.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(ke("LruGarbageCollector","Garbage collection skipped; disabled"),se.resolve(OR)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(ke("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),OR):this.Un(e,t))}getCacheSize(e){return this.$n.getCacheSize(e)}Un(e,t){let r,s,u,c,m,v,b;const A=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(M=>(M>this.params.maximumSequenceNumbersToCollect?(ke("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${M}`),s=this.params.maximumSequenceNumbersToCollect):s=M,c=Date.now(),this.nthSequenceNumber(e,s))).next(M=>(r=M,m=Date.now(),this.removeTargets(e,r,t))).next(M=>(u=M,v=Date.now(),this.removeOrphanedDocuments(e,r))).next(M=>(b=Date.now(),rw()<=Wu.in.DEBUG&&ke("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${c-A}ms\n\tDetermined least recently used ${s} in `+(m-c)+`ms\n\tRemoved ${u} targets in `+(v-m)+`ms\n\tRemoved ${M} documents in `+(b-v)+`ms\nTotal Duration: ${b-A}ms`),se.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:u,documentsRemoved:M})))}}class wP{constructor(e,t){this.db=e,this.garbageCollector=new vP(this,t)}Bn(e){const t=this.qn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(s=>r+s))}qn(e){let t=0;return this.Ln(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Ln(e,t){return this.Kn(e,(r,s)=>t(s))}addReference(e,t,r){return rD(e,r)}removeReference(e,t,r){return rD(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return rD(e,t)}Gn(e,t){return function(r,s){let u=!1;return FR(r).tt(c=>PR(r,c,s).next(m=>(m&&(u=!0),se.resolve(!m)))).next(()=>u)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),s=[];let u=0;return this.Kn(e,(c,m)=>{if(m<=t){const v=this.Gn(e,c).next(b=>{if(!b)return u++,r.getEntry(e,c).next(()=>(r.removeEntry(c,bt.min()),Dh(e).delete([0,hs(c.path)])))});s.push(v)}}).next(()=>se.waitFor(s)).next(()=>r.apply(e)).next(()=>u)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return rD(e,t)}Kn(e,t){const r=Dh(e);let s,u=cs.at;return r.Z({index:"documentTargetsIndex"},([c,m],{path:v,sequenceNumber:b})=>{0===c?(u!==cs.at&&t(new Ge(al(s)),u),u=b,s=v):u=cs.at}).next(()=>{u!==cs.at&&t(new Ge(al(s)),u)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function rD(n,e){return Dh(n).put((r=n.currentSequenceNumber,{targetId:0,path:hs(e.path),sequenceNumber:r}));var r}class UR{constructor(){this.changes=new Eh(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Y.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?se.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class EP{constructor(e){this.It=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Np(e).put(r)}removeEntry(e,t,r){return Np(e).delete(function(s,u){const c=s.path.toArray();return[c.slice(0,c.length-2),c[c.length-2],Qb(u),c[c.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Qn(e,r)))}getEntry(e,t){let r=Y.newInvalidDocument(t);return Np(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(Lw(t))},(s,u)=>{r=this.jn(t,u)}).next(()=>r)}Wn(e,t){let r={size:0,document:Y.newInvalidDocument(t)};return Np(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(Lw(t))},(s,u)=>{r={document:this.jn(t,u),size:tD(u)}}).next(()=>r)}getEntries(e,t){let r=Gs();return this.zn(e,t,(s,u)=>{const c=this.jn(s,u);r=r.insert(s,c)}).next(()=>r)}Hn(e,t){let r=Gs(),s=new Yn(Ge.comparator);return this.zn(e,t,(u,c)=>{const m=this.jn(u,c);r=r.insert(u,m),s=s.insert(u,tD(c))}).next(()=>({documents:r,Jn:s}))}zn(e,t,r){if(t.isEmpty())return se.resolve();let s=new un(HR);t.forEach(v=>s=s.add(v));const u=IDBKeyRange.bound(Lw(s.first()),Lw(s.last())),c=s.getIterator();let m=c.getNext();return Np(e).Z({index:"documentKeyIndex",range:u},(v,b,A)=>{const M=Ge.fromSegments([...b.prefixPath,b.collectionGroup,b.documentId]);for(;m&&HR(m,M)<0;)r(m,null),m=c.getNext();m&&m.isEqual(M)&&(r(m,b),m=c.hasNext()?c.getNext():null),m?A.j(Lw(m)):A.done()}).next(()=>{for(;m;)r(m,null),m=c.hasNext()?c.getNext():null})}getAllFromCollection(e,t,r){const s=[t.popLast().toArray(),t.lastSegment(),Qb(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],u=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Np(e).W(IDBKeyRange.bound(s,u,!0)).next(c=>{let m=Gs();for(const v of c){const b=this.jn(Ge.fromSegments(v.prefixPath.concat(v.collectionGroup,v.documentId)),v);m=m.insert(b.key,b)}return m})}getAllFromCollectionGroup(e,t,r,s){let u=Gs();const c=$R(t,r),m=$R(t,js.max());return Np(e).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(c,m,!0)},(v,b,A)=>{const M=this.jn(Ge.fromSegments(b.prefixPath.concat(b.collectionGroup,b.documentId)),b);u=u.insert(M.key,M),u.size===s&&A.done()}).next(()=>u)}newChangeBuffer(e){return new IP(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return jR(e).get("remoteDocumentGlobalKey").next(t=>(mt(!!t),t))}Qn(e,t){return jR(e).put("remoteDocumentGlobalKey",t)}jn(e,t){if(t){const r=function aP(n,e){let t;if(e.document)t=cR(n.re,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Ge.fromSegments(e.noDocument.path),s=Tp(e.noDocument.readTime);t=Y.newNoDocument(r,s),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return Xe();{const r=Ge.fromSegments(e.unknownDocument.path),s=Tp(e.unknownDocument.version);t=Y.newUnknownDocument(r,s)}}return e.readTime&&t.setReadTime(function(r){const s=new gn(r[0],r[1]);return bt.fromTimestamp(s)}(e.readTime)),t}(this.It,t);if(!r.isNoDocument()||!r.version.isEqual(bt.min()))return r}return Y.newInvalidDocument(e)}}function BR(n){return new EP(n)}class IP extends UR{constructor(e,t){super(),this.Yn=e,this.trackRemovals=t,this.Xn=new Eh(r=>r.toString(),(r,s)=>r.isEqual(s))}applyChanges(e){const t=[];let r=0,s=new un((u,c)=>At(u.canonicalString(),c.canonicalString()));return this.changes.forEach((u,c)=>{const m=this.Xn.get(u);if(t.push(this.Yn.removeEntry(e,u,m.readTime)),c.isValidDocument()){const v=bR(this.Yn.It,c);s=s.add(u.path.popLast()),r+=tD(v)-m.size,t.push(this.Yn.addEntry(e,u,v))}else if(r-=m.size,this.trackRemovals){const v=bR(this.Yn.It,c.convertToNoDocument(bt.min()));t.push(this.Yn.addEntry(e,u,v))}}),s.forEach(u=>{t.push(this.Yn.indexManager.addToCollectionParentIndex(e,u))}),t.push(this.Yn.updateMetadata(e,r)),se.waitFor(t)}getFromCache(e,t){return this.Yn.Wn(e,t).next(r=>(this.Xn.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Yn.Hn(e,t).next(({documents:r,Jn:s})=>(s.forEach((u,c)=>{this.Xn.set(u,{size:c,readTime:r.get(u).readTime})}),r))}}function jR(n){return ci(n,"remoteDocumentGlobal")}function Np(n){return ci(n,"remoteDocumentsV14")}function Lw(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function $R(n,e){const t=e.documentKey.path.toArray();return[n,Qb(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function HR(n,e){const t=n.path.toArray(),r=e.path.toArray();let s=0;for(let u=0;u<t.length-2&&u<r.length-2;++u)if(s=At(t[u],r[u]),s)return s;return s=At(t.length,r.length),s||(s=At(t[t.length-2],r[r.length-2]),s||At(t[t.length-1],r[r.length-1]))}class bP{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class GR{constructor(e,t,r,s){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(s=>(r=s,this.getBaseDocument(e,t,r))).next(s=>(null!==r&&bw(r.mutation,s,ds.empty(),gn.now()),s))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Vt()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Vt()){const s=sl();return this.populateOverlays(e,s,t).next(()=>this.computeViews(e,t,s,r).next(u=>{let c=Dw();return u.forEach((m,v)=>{c=c.insert(m,v.overlayedDocument)}),c}))}getOverlayedDocuments(e,t){const r=sl();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Vt()))}populateOverlays(e,t,r){const s=[];return r.forEach(u=>{t.has(u)||s.push(u)}),this.documentOverlayCache.getOverlays(e,s).next(u=>{u.forEach((c,m)=>{t.set(c,m)})})}computeViews(e,t,r,s){let u=Gs();const c=Cw(),m=Cw();return t.forEach((v,b)=>{const A=r.get(b.key);s.has(b.key)&&(void 0===A||A.mutation instanceof Bc)?u=u.insert(b.key,b):void 0!==A&&(c.set(b.key,A.mutation.getFieldMask()),bw(A.mutation,b,A.mutation.getFieldMask(),gn.now()))}),this.recalculateAndSaveOverlays(e,u).next(v=>(v.forEach((b,A)=>c.set(b,A)),t.forEach((b,A)=>{var M;return m.set(b,new bP(A,null!==(M=c.get(b))&&void 0!==M?M:null))}),m))}recalculateAndSaveOverlays(e,t){const r=Cw();let s=new Yn((c,m)=>c-m),u=Vt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(c=>{for(const m of c)m.keys().forEach(v=>{const b=t.get(v);if(null===b)return;let A=r.get(v)||ds.empty();A=m.applyToLocalView(b,A),r.set(v,A);const M=(s.get(m.batchId)||Vt()).add(v);s=s.insert(m.batchId,M)})}).next(()=>{const c=[],m=s.getReverseIterator();for(;m.hasNext();){const v=m.getNext(),b=v.key,A=v.value,M=XM();A.forEach(L=>{if(!u.has(L)){const G=GM(t.get(L),r.get(L));null!==G&&M.set(L,G),u=u.add(L)}}),c.push(this.documentOverlayCache.saveOverlays(e,b,M))}return se.waitFor(c)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return Ge.isDocumentKey((s=t).path)&&null===s.collectionGroup&&0===s.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):CS(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var s}getNextDocuments(e,t,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,s).next(u=>{const c=s-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,s-u.size):se.resolve(sl());let m=-1,v=u;return c.next(b=>se.forEach(b,(A,M)=>(m<M.largestBatchId&&(m=M.largestBatchId),u.get(A)?se.resolve():this.getBaseDocument(e,A,M).next(L=>{v=v.insert(A,L)}))).next(()=>this.populateOverlays(e,b,u)).next(()=>this.computeViews(e,v,b,Vt())).next(A=>({batchId:m,changes:JM(A)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ge(t)).next(r=>{let s=Dw();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const s=t.collectionGroup;let u=Dw();return this.indexManager.getCollectionParents(e,s).next(c=>se.forEach(c,m=>{const v=(b=t,A=m.child(s),new Uc(A,null,b.explicitOrderBy.slice(),b.filters.slice(),b.limit,b.limitType,b.startAt,b.endAt));var b,A;return this.getDocumentsMatchingCollectionQuery(e,v,r).next(b=>{b.forEach((A,M)=>{u=u.insert(A,M)})})}).next(()=>u))}getDocumentsMatchingCollectionQuery(e,t,r){let s;return this.remoteDocumentCache.getAllFromCollection(e,t.path,r).next(u=>(s=u,this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId))).next(u=>{u.forEach((m,v)=>{const b=v.getKey();null===s.get(b)&&(s=s.insert(b,Y.newInvalidDocument(b)))});let c=Dw();return s.forEach((m,v)=>{const b=u.get(m);void 0!==b&&bw(b.mutation,v,ds.empty(),gn.now()),SS(t,v)&&(c=c.insert(m,v))}),c})}getBaseDocument(e,t,r){return null===r||1===r.mutation.type?this.remoteDocumentCache.getEntry(e,t):se.resolve(Y.newInvalidDocument(t))}}class DP{constructor(e){this.It=e,this.Zn=new Map,this.ts=new Map}getBundleMetadata(e,t){return se.resolve(this.Zn.get(t))}saveBundleMetadata(e,t){var r;return this.Zn.set(t.id,{id:(r=t).id,version:r.version,createTime:li(r.createTime)}),se.resolve()}getNamedQuery(e,t){return se.resolve(this.ts.get(t))}saveNamedQuery(e,t){return this.ts.set(t.name,{name:(r=t).name,query:FS(r.bundledQuery),readTime:li(r.readTime)}),se.resolve();var r}}class CP{constructor(){this.overlays=new Yn(Ge.comparator),this.es=new Map}getOverlay(e,t){return se.resolve(this.overlays.get(t))}getOverlays(e,t){const r=sl();return se.forEach(t,s=>this.getOverlay(e,s).next(u=>{null!==u&&r.set(s,u)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((s,u)=>{this.ue(e,t,u)}),se.resolve()}removeOverlaysForBatchId(e,t,r){const s=this.es.get(r);return void 0!==s&&(s.forEach(u=>this.overlays=this.overlays.remove(u)),this.es.delete(r)),se.resolve()}getOverlaysForCollection(e,t,r){const s=sl(),u=t.length+1,c=new Ge(t.child("")),m=this.overlays.getIteratorFrom(c);for(;m.hasNext();){const v=m.getNext().value,b=v.getKey();if(!t.isPrefixOf(b.path))break;b.path.length===u&&v.largestBatchId>r&&s.set(v.getKey(),v)}return se.resolve(s)}getOverlaysForCollectionGroup(e,t,r,s){let u=new Yn((b,A)=>b-A);const c=this.overlays.getIterator();for(;c.hasNext();){const b=c.getNext().value;if(b.getKey().getCollectionGroup()===t&&b.largestBatchId>r){let A=u.get(b.largestBatchId);null===A&&(A=sl(),u=u.insert(b.largestBatchId,A)),A.set(b.getKey(),b)}}const m=sl(),v=u.getIterator();for(;v.hasNext()&&(v.getNext().value.forEach((b,A)=>m.set(b,A)),!(m.size()>=s)););return se.resolve(m)}ue(e,t,r){const s=this.overlays.get(r.key);if(null!==s){const c=this.es.get(s.largestBatchId).delete(r.key);this.es.set(s.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new PS(t,r));let u=this.es.get(t);void 0===u&&(u=Vt(),this.es.set(t,u)),this.es.set(t,u.add(r.key))}}class US{constructor(){this.ns=new un(di.ss),this.rs=new un(di.os)}isEmpty(){return this.ns.isEmpty()}addReference(e,t){const r=new di(e,t);this.ns=this.ns.add(r),this.rs=this.rs.add(r)}us(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.cs(new di(e,t))}hs(e,t){e.forEach(r=>this.removeReference(r,t))}ls(e){const t=new Ge(new qt([])),r=new di(t,e),s=new di(t,e+1),u=[];return this.rs.forEachInRange([r,s],c=>{this.cs(c),u.push(c.key)}),u}fs(){this.ns.forEach(e=>this.cs(e))}cs(e){this.ns=this.ns.delete(e),this.rs=this.rs.delete(e)}ds(e){const t=new Ge(new qt([])),r=new di(t,e),s=new di(t,e+1);let u=Vt();return this.rs.forEachInRange([r,s],c=>{u=u.add(c.key)}),u}containsKey(e){const t=new di(e,0),r=this.ns.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class di{constructor(e,t){this.key=e,this._s=t}static ss(e,t){return Ge.comparator(e.key,t.key)||At(e._s,t._s)}static os(e,t){return At(e._s,t._s)||Ge.comparator(e.key,t.key)}}class TP{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.ws=1,this.gs=new un(di.ss)}checkEmpty(e){return se.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,s){const u=this.ws;this.ws++;const c=new OS(u,t,r,s);this.mutationQueue.push(c);for(const m of s)this.gs=this.gs.add(new di(m.key,u)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return se.resolve(c)}lookupMutationBatch(e,t){return se.resolve(this.ys(t))}getNextMutationBatchAfterBatchId(e,t){const s=this.ps(t+1),u=s<0?0:s;return se.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return se.resolve(0===this.mutationQueue.length?-1:this.ws-1)}getAllMutationBatches(e){return se.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new di(t,0),s=new di(t,Number.POSITIVE_INFINITY),u=[];return this.gs.forEachInRange([r,s],c=>{const m=this.ys(c._s);u.push(m)}),se.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new un(At);return t.forEach(s=>{const u=new di(s,0),c=new di(s,Number.POSITIVE_INFINITY);this.gs.forEachInRange([u,c],m=>{r=r.add(m._s)})}),se.resolve(this.Is(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,s=r.length+1;let u=r;Ge.isDocumentKey(u)||(u=u.child(""));const c=new di(new Ge(u),0);let m=new un(At);return this.gs.forEachWhile(v=>{const b=v.key.path;return!!r.isPrefixOf(b)&&(b.length===s&&(m=m.add(v._s)),!0)},c),se.resolve(this.Is(m))}Is(e){const t=[];return e.forEach(r=>{const s=this.ys(r);null!==s&&t.push(s)}),t}removeMutationBatch(e,t){mt(0===this.Ts(t.batchId,"removed")),this.mutationQueue.shift();let r=this.gs;return se.forEach(t.mutations,s=>{const u=new di(s.key,t.batchId);return r=r.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.gs=r})}An(e){}containsKey(e,t){const r=new di(t,0),s=this.gs.firstAfterOrEqual(r);return se.resolve(t.isEqual(s&&s.key))}performConsistencyCheck(e){return se.resolve()}Ts(e,t){return this.ps(e)}ps(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}ys(e){const t=this.ps(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class SP{constructor(e){this.Es=e,this.docs=new Yn(Ge.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,s=this.docs.get(r),u=s?s.size:0,c=this.Es(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:c}),this.size+=c-u,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return se.resolve(r?r.document.mutableCopy():Y.newInvalidDocument(t))}getEntries(e,t){let r=Gs();return t.forEach(s=>{const u=this.docs.get(s);r=r.insert(s,u?u.document.mutableCopy():Y.newInvalidDocument(s))}),se.resolve(r)}getAllFromCollection(e,t,r){let s=Gs();const u=new Ge(t.child("")),c=this.docs.getIteratorFrom(u);for(;c.hasNext();){const{key:m,value:{document:v}}=c.getNext();if(!t.isPrefixOf(m.path))break;m.path.length>t.length+1||Vb(_S(v),r)<=0||(s=s.insert(v.key,v.mutableCopy()))}return se.resolve(s)}getAllFromCollectionGroup(e,t,r,s){Xe()}As(e,t){return se.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new AP(this)}getSize(e){return se.resolve(this.size)}}class AP extends UR{constructor(e){super(),this.Yn=e}applyChanges(e){const t=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?t.push(this.Yn.addEntry(e,s)):this.Yn.removeEntry(r)}),se.waitFor(t)}getFromCache(e,t){return this.Yn.getEntry(e,t)}getAllFromCache(e,t){return this.Yn.getEntries(e,t)}}class xP{constructor(e){this.persistence=e,this.Rs=new Eh(t=>$e(t),_t),this.lastRemoteSnapshotVersion=bt.min(),this.highestTargetId=0,this.bs=0,this.Ps=new US,this.targetCount=0,this.vs=Rp.Pn()}forEachTarget(e,t){return this.Rs.forEach((r,s)=>t(s)),se.resolve()}getLastRemoteSnapshotVersion(e){return se.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return se.resolve(this.bs)}allocateTargetId(e){return this.highestTargetId=this.vs.next(),se.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.bs&&(this.bs=t),se.resolve()}Dn(e){this.Rs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.vs=new Rp(t),this.highestTargetId=t),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}addTargetData(e,t){return this.Dn(t),this.targetCount+=1,se.resolve()}updateTargetData(e,t){return this.Dn(t),se.resolve()}removeTargetData(e,t){return this.Rs.delete(t.target),this.Ps.ls(t.targetId),this.targetCount-=1,se.resolve()}removeTargets(e,t,r){let s=0;const u=[];return this.Rs.forEach((c,m)=>{m.sequenceNumber<=t&&null===r.get(m.targetId)&&(this.Rs.delete(c),u.push(this.removeMatchingKeysForTargetId(e,m.targetId)),s++)}),se.waitFor(u).next(()=>s)}getTargetCount(e){return se.resolve(this.targetCount)}getTargetData(e,t){const r=this.Rs.get(t)||null;return se.resolve(r)}addMatchingKeys(e,t,r){return this.Ps.us(t,r),se.resolve()}removeMatchingKeys(e,t,r){this.Ps.hs(t,r);const s=this.persistence.referenceDelegate,u=[];return s&&t.forEach(c=>{u.push(s.markPotentiallyOrphaned(e,c))}),se.waitFor(u)}removeMatchingKeysForTargetId(e,t){return this.Ps.ls(t),se.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Ps.ds(t);return se.resolve(r)}containsKey(e,t){return se.resolve(this.Ps.containsKey(t))}}class zR{constructor(e,t){this.Vs={},this.overlays={},this.Ss=new cs(0),this.Ds=!1,this.Ds=!0,this.referenceDelegate=e(this),this.Cs=new xP(this),this.indexManager=new pP,this.remoteDocumentCache=new SP(r=>this.referenceDelegate.xs(r)),this.It=new IR(t),this.Ns=new DP(this.It)}start(){return Promise.resolve()}shutdown(){return this.Ds=!1,Promise.resolve()}get started(){return this.Ds}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new CP,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Vs[e.toKey()];return r||(r=new TP(t,this.referenceDelegate),this.Vs[e.toKey()]=r),r}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ns}runTransaction(e,t,r){ke("MemoryPersistence","Starting transaction:",e);const s=new MP(this.Ss.next());return this.referenceDelegate.ks(),r(s).next(u=>this.referenceDelegate.Ms(s).next(()=>u)).toPromise().then(u=>(s.raiseOnCommittedEvent(),u))}Os(e,t){return se.or(Object.values(this.Vs).map(r=>()=>r.containsKey(e,t)))}}class MP extends vp{constructor(e){super(),this.currentSequenceNumber=e}}class iD{constructor(e){this.persistence=e,this.Fs=new US,this.$s=null}static Bs(e){return new iD(e)}get Ls(){if(this.$s)return this.$s;throw Xe()}addReference(e,t,r){return this.Fs.addReference(r,t),this.Ls.delete(r.toString()),se.resolve()}removeReference(e,t,r){return this.Fs.removeReference(r,t),this.Ls.add(r.toString()),se.resolve()}markPotentiallyOrphaned(e,t){return this.Ls.add(t.toString()),se.resolve()}removeTarget(e,t){this.Fs.ls(t.targetId).forEach(s=>this.Ls.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(s=>{s.forEach(u=>this.Ls.add(u.toString()))}).next(()=>r.removeTargetData(e,t))}ks(){this.$s=new Set}Ms(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return se.forEach(this.Ls,r=>{const s=Ge.fromPath(r);return this.Us(e,s).next(u=>{u||t.removeEntry(s,bt.min())})}).next(()=>(this.$s=null,t.apply(e)))}updateLimboDocument(e,t){return this.Us(e,t).next(r=>{r?this.Ls.delete(t.toString()):this.Ls.add(t.toString())})}xs(e){return 0}Us(e,t){return se.or([()=>se.resolve(this.Fs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Os(e,t)])}}class RP{constructor(e){this.It=e}$(e,t,r,s){const u=new Zo("createOrUpgrade",t);var m;r<1&&s>=1&&(e.createObjectStore("owner"),(m=e).createObjectStore("mutationQueues",{keyPath:"userId"}),m.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",yR,{unique:!0}),m.createObjectStore("documentMutations"),qR(e),function(m){m.createObjectStore("remoteDocuments")}(e));let c=se.resolve();return r<3&&s>=3&&(0!==r&&(function(m){m.deleteObjectStore("targetDocuments"),m.deleteObjectStore("targets"),m.deleteObjectStore("targetGlobal")}(e),qR(e)),c=c.next(()=>function(m){const v=m.store("targetGlobal"),b={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:bt.min().toTimestamp(),targetCount:0};return v.put("targetGlobalKey",b)}(u))),r<4&&s>=4&&(0!==r&&(c=c.next(()=>function(m,v){return v.store("mutations").W().next(b=>{m.deleteObjectStore("mutations"),m.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",yR,{unique:!0});const A=v.store("mutations"),M=b.map(L=>A.put(L));return se.waitFor(M)})}(e,u))),c=c.next(()=>{!function(m){m.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&s>=5&&(c=c.next(()=>this.qs(u))),r<6&&s>=6&&(c=c.next(()=>(function(m){m.createObjectStore("remoteDocumentGlobal")}(e),this.Ks(u)))),r<7&&s>=7&&(c=c.next(()=>this.Gs(u))),r<8&&s>=8&&(c=c.next(()=>this.Qs(e,u))),r<9&&s>=9&&(c=c.next(()=>{!function(m){m.objectStoreNames.contains("remoteDocumentChanges")&&m.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&s>=10&&(c=c.next(()=>this.js(u))),r<11&&s>=11&&(c=c.next(()=>{(function(m){m.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(m){m.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&s>=12&&(c=c.next(()=>{!function(m){const v=m.createObjectStore("documentOverlays",{keyPath:nP});v.createIndex("collectionPathOverlayIndex",rP,{unique:!1}),v.createIndex("collectionGroupOverlayIndex",iP,{unique:!1})}(e)})),r<13&&s>=13&&(c=c.next(()=>function(m){const v=m.createObjectStore("remoteDocumentsV14",{keyPath:zk});v.createIndex("documentKeyIndex",qk),v.createIndex("collectionGroupIndex",Wk)}(e)).next(()=>this.Ws(e,u)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&s>=14&&(c=c.next(()=>this.zs(e,u))),r<15&&s>=15&&(c=c.next(()=>function(m){m.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),m.createObjectStore("indexState",{keyPath:Jk}).createIndex("sequenceNumberIndex",Xk,{unique:!1}),m.createObjectStore("indexEntries",{keyPath:eP}).createIndex("documentKeyIndex",tP,{unique:!1})}(e))),c}Ks(e){let t=0;return e.store("remoteDocuments").Z((r,s)=>{t+=tD(s)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}qs(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.W().next(s=>se.forEach(s,u=>{const c=IDBKeyRange.bound([u.userId,-1],[u.userId,u.lastAcknowledgedBatchId]);return r.W("userMutationsIndex",c).next(m=>se.forEach(m,v=>{mt(v.userId===u.userId);const b=Sp(this.It,v);return kR(e,u.userId,b).next(()=>{})}))}))}Gs(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(s=>{const u=[];return r.Z((c,m)=>{const v=new qt(c),b=[0,hs(v)];u.push(t.get(b).next(A=>A?se.resolve():t.put({targetId:0,path:hs(v),sequenceNumber:s.highestListenSequenceNumber})))}).next(()=>se.waitFor(u))})}Qs(e,t){e.createObjectStore("collectionParents",{keyPath:Qk});const r=t.store("collectionParents"),s=new VS,u=c=>{if(s.add(c)){const m=c.lastSegment(),v=c.popLast();return r.put({collectionId:m,parent:hs(v)})}};return t.store("remoteDocuments").Z({X:!0},(c,m)=>{const v=new qt(c);return u(v.popLast())}).next(()=>t.store("documentMutations").Z({X:!0},([c,m,v],b)=>{const A=al(m);return u(A.popLast())}))}js(e){const t=e.store("targets");return t.Z((r,s)=>{const u=Nw(s),c=DR(this.It,u);return t.put(c)})}Ws(e,t){const r=t.store("remoteDocuments"),s=[];return r.Z((u,c)=>{const m=t.store("remoteDocumentsV14"),v=(b=c,b.document?new Ge(qt.fromString(b.document.name).popFirst(5)):b.noDocument?Ge.fromSegments(b.noDocument.path):b.unknownDocument?Ge.fromSegments(b.unknownDocument.path):Xe()).path.toArray();var b;const A={prefixPath:v.slice(0,v.length-2),collectionGroup:v[v.length-2],documentId:v[v.length-1],readTime:c.readTime||[0,0],unknownDocument:c.unknownDocument,noDocument:c.noDocument,document:c.document,hasCommittedMutations:!!c.hasCommittedMutations};s.push(m.put(A))}).next(()=>se.waitFor(s))}zs(e,t){const r=t.store("mutations"),s=BR(this.It),u=new zR(iD.Bs,this.It.re);return r.W().next(c=>{const m=new Map;return c.forEach(v=>{var b;let A=null!==(b=m.get(v.userId))&&void 0!==b?b:Vt();Sp(this.It,v).keys().forEach(M=>A=A.add(M)),m.set(v.userId,A)}),se.forEach(m,(v,b)=>{const A=new Nr(b),M=Jb.oe(this.It,A),L=u.getIndexManager(A),G=nD.oe(A,this.It,L,u.referenceDelegate);return new GR(s,G,M,L).recalculateAndSaveOverlaysForDocumentKeys(new NS(t,cs.at),v).next()})})}}function qR(n){n.createObjectStore("targetDocuments",{keyPath:Kk}).createIndex("documentTargetsIndex",Yk,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Zk,{unique:!0}),n.createObjectStore("targetGlobal")}const BS="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class jS{constructor(e,t,r,s,u,c,m,v,b,A,M=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Hs=u,this.window=c,this.document=m,this.Js=b,this.Ys=A,this.Xs=M,this.Ss=null,this.Ds=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Zs=null,this.inForeground=!1,this.ti=null,this.ei=null,this.ni=Number.NEGATIVE_INFINITY,this.si=L=>Promise.resolve(),!jS.C())throw new Re(ce.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new wP(this,s),this.ii=t+"main",this.It=new IR(v),this.ri=new $s(this.ii,this.Xs,new RP(this.It)),this.Cs=new mP(this.referenceDelegate,this.It),this.remoteDocumentCache=BR(this.It),this.Ns=new uP,this.window&&this.window.localStorage?this.oi=this.window.localStorage:(this.oi=null,!1===A&&Vn("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ui().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Re(ce.FAILED_PRECONDITION,BS);return this.ci(),this.ai(),this.hi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Cs.getHighestSequenceNumber(e))}).then(e=>{this.Ss=new cs(e,this.Js)}).then(()=>{this.Ds=!0}).catch(e=>(this.ri&&this.ri.close(),Promise.reject(e)))}li(e){var t=this;return this.si=function(){var r=(0,ye.Z)(function*(s){if(t.started)return e(s)});return function(s){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ri.L(function(){var t=(0,ye.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Hs.enqueueAndForget((0,ye.Z)(function*(){t.started&&(yield t.ui())})))}ui(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>sD(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.fi(e).next(t=>{t||(this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)))})}).next(()=>this.di(e)).next(t=>this.isPrimary&&!t?this._i(e).next(()=>!1):!!t&&this.wi(e).next(()=>!0))).catch(e=>{if(rl(e))return ke("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return ke("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Hs.enqueueRetryable(()=>this.si(e)),this.isPrimary=e})}fi(e){return Vw(e).get("owner").next(t=>se.resolve(this.mi(t)))}gi(e){return sD(e).delete(this.clientId)}yi(){var e=this;return(0,ye.Z)(function*(){if(e.isPrimary&&!e.pi(e.ni,18e5)){e.ni=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const s=ci(r,"clientMetadata");return s.W().next(u=>{const c=e.Ii(u,18e5),m=u.filter(v=>-1===c.indexOf(v));return se.forEach(m,v=>s.delete(v.clientId)).next(()=>m)})}).catch(()=>[]);if(e.oi)for(const r of t)e.oi.removeItem(e.Ti(r.clientId))}})()}hi(){this.ei=this.Hs.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ui().then(()=>this.yi()).then(()=>this.hi()))}mi(e){return!!e&&e.ownerId===this.clientId}di(e){return this.Ys?se.resolve(!0):Vw(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)){if(this.mi(t)&&this.networkEnabled)return!0;if(!this.mi(t)){if(!t.allowTabSynchronization)throw new Re(ce.FAILED_PRECONDITION,BS);return!1}}return!(!this.networkEnabled||!this.inForeground)||sD(e).W().next(r=>void 0===this.Ii(r,5e3).find(s=>{if(this.clientId!==s.clientId){const c=!this.inForeground&&s.inForeground,m=this.networkEnabled===s.networkEnabled;if(!this.networkEnabled&&s.networkEnabled||c&&m)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&ke("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,ye.Z)(function*(){e.Ds=!1,e.Ai(),e.ei&&(e.ei.cancel(),e.ei=null),e.Ri(),e.bi(),yield e.ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new NS(t,cs.at);return e._i(r).next(()=>e.gi(r))}),e.ri.close(),e.Pi()})()}Ii(e,t){return e.filter(r=>this.pi(r.updateTimeMs,t)&&!this.Ei(r.clientId))}vi(){return this.runTransaction("getActiveClients","readonly",e=>sD(e).W().next(t=>this.Ii(t,18e5).map(r=>r.clientId)))}get started(){return this.Ds}getMutationQueue(e,t){return nD.oe(e,this.It,t,this.referenceDelegate)}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new gP(e,this.It.re.databaseId)}getDocumentOverlayCache(e){return Jb.oe(this.It,e)}getBundleCache(){return this.Ns}runTransaction(e,t,r){ke("IndexedDbPersistence","Starting transaction:",e);const s="readonly"===t?"readonly":"readwrite",u=15===(c=this.Xs)?oP:14===c?ER:13===c?wR:12===c?sP:11===c?vR:void Xe();var c;let m;return this.ri.runTransaction(e,s,u,v=>(m=new NS(v,this.Ss?this.Ss.next():cs.at),"readwrite-primary"===t?this.fi(m).next(b=>!!b||this.di(m)).next(b=>{if(!b)throw Vn(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)),new Re(ce.FAILED_PRECONDITION,Ub);return r(m)}).next(b=>this.wi(m).next(()=>b)):this.Vi(m).next(()=>r(m)))).then(v=>(m.raiseOnCommittedEvent(),v))}Vi(e){return Vw(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)&&!this.mi(t)&&!(this.Ys||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Re(ce.FAILED_PRECONDITION,BS)})}wi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Vw(e).put("owner",t)}static C(){return $s.C()}_i(e){const t=Vw(e);return t.get("owner").next(r=>this.mi(r)?(ke("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):se.resolve())}pi(e,t){const r=Date.now();return!(e<r-t||e>r&&(Vn(`Detected an update time that is in the future: ${e} > ${r}`),1))}ci(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ti=()=>{this.Hs.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ui()))},this.document.addEventListener("visibilitychange",this.ti),this.inForeground="visible"===this.document.visibilityState)}Ri(){this.ti&&(this.document.removeEventListener("visibilitychange",this.ti),this.ti=null)}ai(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Zs=()=>{this.Ai(),(0,Et.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Hs.enterRestrictedMode(!0),this.Hs.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Zs))}bi(){this.Zs&&(this.window.removeEventListener("pagehide",this.Zs),this.Zs=null)}Ei(e){var t;try{const r=null!==(null===(t=this.oi)||void 0===t?void 0:t.getItem(this.Ti(e)));return ke("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Vn("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ai(){if(this.oi)try{this.oi.setItem(this.Ti(this.clientId),String(Date.now()))}catch(e){Vn("Failed to set zombie client id.",e)}}Pi(){if(this.oi)try{this.oi.removeItem(this.Ti(this.clientId))}catch{}}Ti(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Vw(n){return ci(n,"owner")}function sD(n){return ci(n,"clientMetadata")}function $S(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class HS{constructor(e,t,r,s){this.targetId=e,this.fromCache=t,this.Si=r,this.Di=s}static Ci(e,t){let r=Vt(),s=Vt();for(const u of t.docChanges)switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:s=s.add(u.doc.key)}return new HS(e,t.fromCache,r,s)}}class WR{constructor(){this.xi=!1}initialize(e,t){this.Ni=e,this.indexManager=t,this.xi=!0}getDocumentsMatchingQuery(e,t,r,s){return this.ki(e,t).next(u=>u||this.Mi(e,t,s,r)).next(u=>u||this.Oi(e,t))}ki(e,t){if(NM(t))return se.resolve(null);let r=Hs(t);return this.indexManager.getIndexType(e,r).next(s=>0===s?null:(null!==t.limit&&1===s&&(t=Gb(t,null,"F"),r=Hs(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(u=>{const c=Vt(...u);return this.Ni.getDocuments(e,c).next(m=>this.indexManager.getMinOffset(e,r).next(v=>{const b=this.Fi(t,m);return this.$i(t,b,c,v.readTime)?this.ki(e,Gb(t,null,"F")):this.Bi(e,b,t,v)}))})))}Mi(e,t,r,s){return NM(t)||s.isEqual(bt.min())?this.Oi(e,t):this.Ni.getDocuments(e,r).next(u=>{const c=this.Fi(t,u);return this.$i(t,c,r,s)?this.Oi(e,t):(rw()<=Wu.in.DEBUG&&ke("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),TS(t)),this.Bi(e,c,t,yS(s,-1)))})}Fi(e,t){let r=new un(PM(e));return t.forEach((s,u)=>{SS(e,u)&&(r=r.add(u))}),r}$i(e,t,r,s){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const u="F"===e.limitType?t.last():t.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(s)>0)}Oi(e,t){return rw()<=Wu.in.DEBUG&&ke("QueryEngine","Using full collection scan to execute query:",TS(t)),this.Ni.getDocumentsMatchingQuery(e,t,js.min())}Bi(e,t,r,s){return this.Ni.getDocumentsMatchingQuery(e,r,s).next(u=>(t.forEach(c=>{u=u.insert(c.key,c)}),u))}}class NP{constructor(e,t,r,s){this.persistence=e,this.Li=t,this.It=s,this.Ui=new Yn(At),this.qi=new Eh(u=>$e(u),_t),this.Ki=new Map,this.Gi=e.getRemoteDocumentCache(),this.Cs=e.getTargetCache(),this.Ns=e.getBundleCache(),this.Qi(r)}Qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new GR(this.Gi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Gi.setIndexManager(this.indexManager),this.Li.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ui))}}function ZR(n,e,t,r){return new NP(n,e,t,r)}function KR(n,e){return GS.apply(this,arguments)}function GS(){return GS=(0,ye.Z)(function*(n,e){const t=qe(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let s;return t.mutationQueue.getAllMutationBatches(r).next(u=>(s=u,t.Qi(e),t.mutationQueue.getAllMutationBatches(r))).next(u=>{const c=[],m=[];let v=Vt();for(const b of s){c.push(b.batchId);for(const A of b.mutations)v=v.add(A.key)}for(const b of u){m.push(b.batchId);for(const A of b.mutations)v=v.add(A.key)}return t.localDocuments.getDocuments(r,v).next(b=>({ji:b,removedBatchIds:c,addedBatchIds:m}))})})}),GS.apply(this,arguments)}function OP(n,e){const t=qe(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),u=t.Gi.newChangeBuffer({trackRemovals:!0});return function(c,m,v,b){const A=v.batch,M=A.keys();let L=se.resolve();return M.forEach(G=>{L=L.next(()=>b.getEntry(m,G)).next(J=>{const Ie=v.docVersions.get(G);mt(null!==Ie),J.version.compareTo(Ie)<0&&(A.applyToRemoteDocument(J,v),J.isValidDocument()&&(J.setReadTime(v.commitVersion),b.addEntry(J)))})}),L.next(()=>c.mutationQueue.removeMutationBatch(m,A))}(t,r,e,u).next(()=>u.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(c){let m=Vt();for(let v=0;v<c.mutationResults.length;++v)c.mutationResults[v].transformResults.length>0&&(m=m.add(c.batch.mutations[v].key));return m}(e))).next(()=>t.localDocuments.getDocuments(r,s))})}function YR(n){const e=qe(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Cs.getLastRemoteSnapshotVersion(t))}function kP(n,e){const t=qe(n),r=e.snapshotVersion;let s=t.Ui;return t.persistence.runTransaction("Apply remote event","readwrite-primary",u=>{const c=t.Gi.newChangeBuffer({trackRemovals:!0});s=t.Ui;const m=[];e.targetChanges.forEach((A,M)=>{const L=s.get(M);if(!L)return;m.push(t.Cs.removeMatchingKeys(u,A.removedDocuments,M).next(()=>t.Cs.addMatchingKeys(u,A.addedDocuments,M)));let G=L.withSequenceNumber(u.currentSequenceNumber);var J,Ie,Ce;e.targetMismatches.has(M)?G=G.withResumeToken(lr.EMPTY_BYTE_STRING,bt.min()).withLastLimboFreeSnapshotVersion(bt.min()):A.resumeToken.approximateByteSize()>0&&(G=G.withResumeToken(A.resumeToken,r)),s=s.insert(M,G),Ie=G,Ce=A,(0===(J=L).resumeToken.approximateByteSize()||Ie.snapshotVersion.toMicroseconds()-J.snapshotVersion.toMicroseconds()>=3e8||Ce.addedDocuments.size+Ce.modifiedDocuments.size+Ce.removedDocuments.size>0)&&m.push(t.Cs.updateTargetData(u,G))});let v=Gs(),b=Vt();if(e.documentUpdates.forEach(A=>{e.resolvedLimboDocuments.has(A)&&m.push(t.persistence.referenceDelegate.updateLimboDocument(u,A))}),m.push(QR(u,c,e.documentUpdates).next(A=>{v=A.Wi,b=A.zi})),!r.isEqual(bt.min())){const A=t.Cs.getLastRemoteSnapshotVersion(u).next(M=>t.Cs.setTargetsMetadata(u,u.currentSequenceNumber,r));m.push(A)}return se.waitFor(m).next(()=>c.apply(u)).next(()=>t.localDocuments.getLocalViewOfDocuments(u,v,b)).next(()=>v)}).then(u=>(t.Ui=s,u))}function QR(n,e,t){let r=Vt(),s=Vt();return t.forEach(u=>r=r.add(u)),e.getEntries(n,r).next(u=>{let c=Gs();return t.forEach((m,v)=>{const b=u.get(m);v.isFoundDocument()!==b.isFoundDocument()&&(s=s.add(m)),v.isNoDocument()&&v.version.isEqual(bt.min())?(e.removeEntry(m,v.readTime),c=c.insert(m,v)):!b.isValidDocument()||v.version.compareTo(b.version)>0||0===v.version.compareTo(b.version)&&b.hasPendingWrites?(e.addEntry(v),c=c.insert(m,v)):ke("LocalStore","Ignoring outdated watch update for ",m,". Current version:",b.version," Watch version:",v.version)}),{Wi:c,zi:s}})}function PP(n,e){const t=qe(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function ay(n,e){const t=qe(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return t.Cs.getTargetData(r,e).next(u=>u?(s=u,se.resolve(s)):t.Cs.allocateTargetId(r).next(c=>(s=new Ih(e,c,0,r.currentSequenceNumber),t.Cs.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=t.Ui.get(r.targetId);return(null===s||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(t.Ui=t.Ui.insert(r.targetId,r),t.qi.set(e,r.targetId)),r})}function uy(n,e,t){return zS.apply(this,arguments)}function zS(){return zS=(0,ye.Z)(function*(n,e,t){const r=qe(n),s=r.Ui.get(e),u=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",u,c=>r.persistence.referenceDelegate.removeTarget(c,s)))}catch(c){if(!rl(c))throw c;ke("LocalStore",`Failed to update sequence numbers for target ${e}: ${c}`)}r.Ui=r.Ui.remove(e),r.qi.delete(s.target)}),zS.apply(this,arguments)}function oD(n,e,t){const r=qe(n);let s=bt.min(),u=Vt();return r.persistence.runTransaction("Execute query","readonly",c=>function(m,v,b){const A=qe(m),M=A.qi.get(b);return void 0!==M?se.resolve(A.Ui.get(M)):A.Cs.getTargetData(v,b)}(r,c,Hs(e)).next(m=>{if(m)return s=m.lastLimboFreeSnapshotVersion,r.Cs.getMatchingKeysForTargetId(c,m.targetId).next(v=>{u=v})}).next(()=>r.Li.getDocumentsMatchingQuery(c,e,t?s:bt.min(),t?u:Vt())).next(m=>(eN(r,kM(e),m),{documents:m,Hi:u})))}function JR(n,e){const t=qe(n),r=qe(t.Cs),s=t.Ui.get(e);return s?Promise.resolve(s.target):t.persistence.runTransaction("Get target data","readonly",u=>r.se(u,e).next(c=>c?c.target:null))}function XR(n,e){const t=qe(n),r=t.Ki.get(e)||bt.min();return t.persistence.runTransaction("Get new document changes","readonly",s=>t.Gi.getAllFromCollectionGroup(s,e,yS(r,-1),Number.MAX_SAFE_INTEGER)).then(s=>(eN(t,e,s),s))}function eN(n,e,t){let r=bt.min();t.forEach((s,u)=>{u.readTime.compareTo(r)>0&&(r=u.readTime)}),n.Ki.set(e,r)}function qS(){return qS=(0,ye.Z)(function*(n,e,t,r){const s=qe(n);let u=Vt(),c=Gs();for(const b of t){const A=e.Ji(b.metadata.name);b.document&&(u=u.add(A));const M=e.Yi(b);M.setReadTime(e.Xi(b.metadata.readTime)),c=c.insert(A,M)}const m=s.Gi.newChangeBuffer({trackRemovals:!0}),v=yield ay(s,(b=r,Hs(Qm(qt.fromString(`__bundle__/docs/${b}`)))));var b;return s.persistence.runTransaction("Apply bundle documents","readwrite",b=>QR(b,m,c).next(A=>(m.apply(b),A)).next(A=>s.Cs.removeMatchingKeysForTargetId(b,v.targetId).next(()=>s.Cs.addMatchingKeys(b,u,v.targetId)).next(()=>s.localDocuments.getLocalViewOfDocuments(b,A.Wi,A.zi)).next(()=>A.Wi)))}),qS.apply(this,arguments)}function LP(n,e){return WS.apply(this,arguments)}function WS(){return WS=(0,ye.Z)(function*(n,e,t=Vt()){const r=yield ay(n,Hs(FS(e.bundledQuery))),s=qe(n);return s.persistence.runTransaction("Save named query","readwrite",u=>{const c=li(e.readTime);if(r.snapshotVersion.compareTo(c)>=0)return s.Ns.saveNamedQuery(u,e);const m=r.withResumeToken(lr.EMPTY_BYTE_STRING,c);return s.Ui=s.Ui.insert(m.targetId,m),s.Cs.updateTargetData(u,m).next(()=>s.Cs.removeMatchingKeysForTargetId(u,r.targetId)).next(()=>s.Cs.addMatchingKeys(u,t,r.targetId)).next(()=>s.Ns.saveNamedQuery(u,e))})}),WS.apply(this,arguments)}function tN(n,e){return`firestore_clients_${n}_${e}`}function nN(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function ZS(n,e){return`firestore_targets_${n}_${e}`}class aD{constructor(e,t,r,s){this.user=e,this.batchId=t,this.state=r,this.error=s}static Zi(e,t,r){const s=JSON.parse(r);let u,c="object"==typeof s&&-1!==["pending","acknowledged","rejected"].indexOf(s.state)&&(void 0===s.error||"object"==typeof s.error);return c&&s.error&&(c="string"==typeof s.error.message&&"string"==typeof s.error.code,c&&(u=new Re(s.error.code,s.error.message))),c?new aD(e,t,s.state,u):(Vn("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Uw{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Zi(e,t){const r=JSON.parse(t);let s,u="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return u&&r.error&&(u="string"==typeof r.error.message&&"string"==typeof r.error.code,u&&(s=new Re(r.error.code,r.error.message))),u?new Uw(e,r.state,s):(Vn("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class uD{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Zi(e,t){const r=JSON.parse(t);let s="object"==typeof r&&r.activeTargetIds instanceof Array,u=Zb();for(let c=0;s&&c<r.activeTargetIds.length;++c)s=ES(r.activeTargetIds[c]),u=u.add(r.activeTargetIds[c]);return s?new uD(e,u):(Vn("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class KS{constructor(e,t){this.clientId=e,this.onlineState=t}static Zi(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new KS(t.clientId,t.onlineState):(Vn("SharedClientState",`Failed to parse online state: ${e}`),null)}}class YS{constructor(){this.activeTargetIds=Zb()}er(e){this.activeTargetIds=this.activeTargetIds.add(e)}nr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}tr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class QS{constructor(e,t,r,s,u){this.window=e,this.Hs=t,this.persistenceKey=r,this.sr=s,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ir=this.rr.bind(this),this.ur=new Yn(At),this.started=!1,this.cr=[];const c=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=u,this.ar=tN(this.persistenceKey,this.sr),this.hr=`firestore_sequence_number_${this.persistenceKey}`,this.ur=this.ur.insert(this.sr,new YS),this.lr=new RegExp(`^firestore_clients_${c}_([^_]*)$`),this.dr=new RegExp(`^firestore_mutations_${c}_(\\d+)(?:_(.*))?$`),this._r=new RegExp(`^firestore_targets_${c}_(\\d+)$`),this.wr=`firestore_online_state_${this.persistenceKey}`,this.mr=function(m){return`firestore_bundle_loaded_v2_${m}`}(this.persistenceKey),this.window.addEventListener("storage",this.ir)}static C(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,ye.Z)(function*(){const t=yield e.syncEngine.vi();for(const s of t){if(s===e.sr)continue;const u=e.getItem(tN(e.persistenceKey,s));if(u){const c=uD.Zi(s,u);c&&(e.ur=e.ur.insert(c.clientId,c))}}e.gr();const r=e.storage.getItem(e.wr);if(r){const s=e.yr(r);s&&e.pr(s)}for(const s of e.cr)e.rr(s);e.cr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.hr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ir(this.ur)}isActiveQueryTarget(e){let t=!1;return this.ur.forEach((r,s)=>{s.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Tr(e,"pending")}updateMutationState(e,t,r){this.Tr(e,t,r),this.Er(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(ZS(this.persistenceKey,e));if(r){const s=Uw.Zi(e,r);s&&(t=s.state)}}return this.Ar.er(e),this.gr(),t}removeLocalQueryTarget(e){this.Ar.nr(e),this.gr()}isLocalQueryTarget(e){return this.Ar.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(ZS(this.persistenceKey,e))}updateQueryState(e,t,r){this.Rr(e,t,r)}handleUserChange(e,t,r){t.forEach(s=>{this.Er(s)}),this.currentUser=e,r.forEach(s=>{this.addPendingMutation(s)})}setOnlineState(e){this.br(e)}notifyBundleLoaded(e){this.Pr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ir),this.removeItem(this.ar),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return ke("SharedClientState","READ",e,t),t}setItem(e,t){ke("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){ke("SharedClientState","REMOVE",e),this.storage.removeItem(e)}rr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(ke("SharedClientState","EVENT",r.key,r.newValue),r.key===this.ar)return void Vn("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Hs.enqueueRetryable((0,ye.Z)(function*(){if(t.started){if(null!==r.key)if(t.lr.test(r.key)){if(null==r.newValue){const s=t.vr(r.key);return t.Vr(s,null)}{const s=t.Sr(r.key,r.newValue);if(s)return t.Vr(s.clientId,s)}}else if(t.dr.test(r.key)){if(null!==r.newValue){const s=t.Dr(r.key,r.newValue);if(s)return t.Cr(s)}}else if(t._r.test(r.key)){if(null!==r.newValue){const s=t.Nr(r.key,r.newValue);if(s)return t.kr(s)}}else if(r.key===t.wr){if(null!==r.newValue){const s=t.yr(r.newValue);if(s)return t.pr(s)}}else if(r.key===t.hr){const s=function(u){let c=cs.at;if(null!=u)try{const m=JSON.parse(u);mt("number"==typeof m),c=m}catch(m){Vn("SharedClientState","Failed to read sequence number from WebStorage",m)}return c}(r.newValue);s!==cs.at&&t.sequenceNumberHandler(s)}else if(r.key===t.mr){const s=t.Mr(r.newValue);yield Promise.all(s.map(u=>t.syncEngine.Or(u)))}}else t.cr.push(r)}))}}get Ar(){return this.ur.get(this.sr)}gr(){this.setItem(this.ar,this.Ar.tr())}Tr(e,t,r){const s=new aD(this.currentUser,e,t,r),u=nN(this.persistenceKey,this.currentUser,e);this.setItem(u,s.tr())}Er(e){const t=nN(this.persistenceKey,this.currentUser,e);this.removeItem(t)}br(e){this.storage.setItem(this.wr,JSON.stringify({clientId:this.sr,onlineState:e}))}Rr(e,t,r){const s=ZS(this.persistenceKey,e),u=new Uw(e,t,r);this.setItem(s,u.tr())}Pr(e){const t=JSON.stringify(Array.from(e));this.setItem(this.mr,t)}vr(e){const t=this.lr.exec(e);return t?t[1]:null}Sr(e,t){const r=this.vr(e);return uD.Zi(r,t)}Dr(e,t){const r=this.dr.exec(e),s=Number(r[1]);return aD.Zi(new Nr(void 0!==r[2]?r[2]:null),s,t)}Nr(e,t){const r=this._r.exec(e),s=Number(r[1]);return Uw.Zi(s,t)}yr(e){return KS.Zi(e)}Mr(e){return JSON.parse(e)}Cr(e){var t=this;return(0,ye.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Fr(e.batchId,e.state,e.error);ke("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}kr(e){return this.syncEngine.$r(e.targetId,e.state,e.error)}Vr(e,t){const r=t?this.ur.insert(e,t):this.ur.remove(e),s=this.Ir(this.ur),u=this.Ir(r),c=[],m=[];return u.forEach(v=>{s.has(v)||c.push(v)}),s.forEach(v=>{u.has(v)||m.push(v)}),this.syncEngine.Br(c,m).then(()=>{this.ur=r})}pr(e){this.ur.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ir(e){let t=Zb();return e.forEach((r,s)=>{t=t.unionWith(s.activeTargetIds)}),t}}class rN{constructor(){this.Lr=new YS,this.Ur={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Lr.er(e),this.Ur[e]||"not-current"}updateQueryState(e,t,r){this.Ur[e]=t}removeLocalQueryTarget(e){this.Lr.nr(e)}isLocalQueryTarget(e){return this.Lr.activeTargetIds.has(e)}clearQueryState(e){delete this.Ur[e]}getAllActiveQueryTargets(){return this.Lr.activeTargetIds}isActiveQueryTarget(e){return this.Lr.activeTargetIds.has(e)}start(){return this.Lr=new YS,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class VP{qr(e){}shutdown(){}}class iN{constructor(){this.Kr=()=>this.Gr(),this.Qr=()=>this.jr(),this.Wr=[],this.zr()}qr(e){this.Wr.push(e)}shutdown(){window.removeEventListener("online",this.Kr),window.removeEventListener("offline",this.Qr)}zr(){window.addEventListener("online",this.Kr),window.addEventListener("offline",this.Qr)}Gr(){ke("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Wr)e(0)}jr(){ke("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Wr)e(1)}static C(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const UP={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class BP{constructor(e){this.Hr=e.Hr,this.Jr=e.Jr}Yr(e){this.Xr=e}Zr(e){this.eo=e}onMessage(e){this.no=e}close(){this.Jr()}send(e){this.Hr(e)}so(){this.Xr()}io(e){this.eo(e)}ro(e){this.no(e)}}class jP extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.oo=(e.ssl?"https":"http")+"://"+e.host,this.uo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}co(e,t,r,s,u){const c=this.ao(e,t);ke("RestConnection","Sending: ",c,r);const m={};return this.ho(m,s,u),this.lo(e,c,m,r).then(v=>(ke("RestConnection","Received: ",v),v),v=>{throw Vi("RestConnection",`${e} failed with error: `,v,"url: ",c,"request:",r),v})}fo(e,t,r,s,u,c){return this.co(e,t,r,s,u)}ho(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+Nc,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((s,u)=>e[u]=s),r&&r.headers.forEach((s,u)=>e[u]=s)}ao(e,t){return`${this.oo}/v1/${t}:${UP[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}lo(e,t,r,s){return new Promise((u,c)=>{const m=new xb;m.listenOnce(lS.COMPLETE,()=>{try{switch(m.getLastErrorCode()){case Li.NO_ERROR:const b=m.getResponseJson();ke("Connection","XHR received:",JSON.stringify(b)),u(b);break;case Li.TIMEOUT:ke("Connection",'RPC "'+e+'" timed out'),c(new Re(ce.DEADLINE_EXCEEDED,"Request time out"));break;case Li.HTTP_ERROR:const A=m.getStatus();if(ke("Connection",'RPC "'+e+'" failed with status:',A,"response text:",m.getResponseText()),A>0){const M=m.getResponseJson().error;if(M&&M.status&&M.message){const L=function(G){const J=G.toLowerCase().replace(/_/g,"-");return Object.values(ce).indexOf(J)>=0?J:ce.UNKNOWN}(M.status);c(new Re(L,M.message))}else c(new Re(ce.UNKNOWN,"Server responded with status "+m.getStatus()))}else c(new Re(ce.UNAVAILABLE,"Connection failed."));break;default:Xe()}}finally{ke("Connection",'RPC "'+e+'" completed.')}});const v=JSON.stringify(s);m.send(t,"POST",v,r,15)})}_o(e,t,r){const s=[this.oo,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=ew(),c=uS(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(m.xmlHttpFactory=new cS({})),this.ho(m.initMessageHeaders,t,r),(0,Et.uI)()||(0,Et.b$)()||(0,Et.d)()||(0,Et.w1)()||(0,Et.Mn)()||(0,Et.ru)()||(m.httpHeadersOverwriteParam="$httpHeaders");const v=s.join("");ke("Connection","Creating WebChannel: "+v,m);const b=u.createWebChannel(v,m);let A=!1,M=!1;const L=new BP({Hr:J=>{M?ke("Connection","Not sending because WebChannel is closed:",J):(A||(ke("Connection","Opening WebChannel transport."),b.open(),A=!0),ke("Connection","WebChannel sending:",J),b.send(J))},Jr:()=>b.close()}),G=(J,Ie,Ce)=>{J.listen(Ie,Ze=>{try{Ce(Ze)}catch(ut){setTimeout(()=>{throw ut},0)}})};return G(b,yh.EventType.OPEN,()=>{M||ke("Connection","WebChannel transport opened.")}),G(b,yh.EventType.CLOSE,()=>{M||(M=!0,ke("Connection","WebChannel transport closed"),L.io())}),G(b,yh.EventType.ERROR,J=>{M||(M=!0,Vi("Connection","WebChannel transport errored:",J),L.io(new Re(ce.UNAVAILABLE,"The operation could not be completed")))}),G(b,yh.EventType.MESSAGE,J=>{var Ie;if(!M){const Ce=J.data[0];mt(!!Ce);const Ze=Ce,ut=Ze.error||(null===(Ie=Ze[0])||void 0===Ie?void 0:Ie.error);if(ut){ke("Connection","WebChannel received error:",ut);const lt=ut.status;let tt=function(kt){const cr=Pr[kt];if(void 0!==cr)return YM(cr)}(lt),Tt=ut.message;void 0===tt&&(tt=ce.INTERNAL,Tt="Unknown error status: "+lt+" with message "+ut.message),M=!0,L.io(new Re(tt,Tt)),b.close()}else ke("Connection","WebChannel received:",Ce),L.ro(Ce)}}),G(c,tw.STAT_EVENT,J=>{J.stat===Ab.PROXY?ke("Connection","Detected buffering proxy"):J.stat===Ab.NOPROXY&&ke("Connection","Detected no buffering proxy")}),setTimeout(()=>{L.so()},0),L}}function sN(){return typeof window<"u"?window:null}function lD(){return typeof document<"u"?document:null}function Bw(n){return new Nk(n,!0)}class JS{constructor(e,t,r=1e3,s=1.5,u=6e4){this.Hs=e,this.timerId=t,this.wo=r,this.mo=s,this.yo=u,this.po=0,this.Io=null,this.To=Date.now(),this.reset()}reset(){this.po=0}Eo(){this.po=this.yo}Ao(e){this.cancel();const t=Math.floor(this.po+this.Ro()),r=Math.max(0,Date.now()-this.To),s=Math.max(0,t-r);s>0&&ke("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.po} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Io=this.Hs.enqueueAfterDelay(this.timerId,s,()=>(this.To=Date.now(),e())),this.po*=this.mo,this.po<this.wo&&(this.po=this.wo),this.po>this.yo&&(this.po=this.yo)}bo(){null!==this.Io&&(this.Io.skipDelay(),this.Io=null)}cancel(){null!==this.Io&&(this.Io.cancel(),this.Io=null)}Ro(){return(Math.random()-.5)*this.po}}class oN{constructor(e,t,r,s,u,c,m,v){this.Hs=e,this.Po=r,this.vo=s,this.Vo=u,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=m,this.listener=v,this.state=0,this.So=0,this.Do=null,this.Co=null,this.stream=null,this.xo=new JS(e,t)}No(){return 1===this.state||5===this.state||this.ko()}ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Mo()}stop(){var e=this;return(0,ye.Z)(function*(){e.No()&&(yield e.close(0))})()}Oo(){this.state=0,this.xo.reset()}Fo(){this.ko()&&null===this.Do&&(this.Do=this.Hs.enqueueAfterDelay(this.Po,6e4,()=>this.$o()))}Bo(e){this.Lo(),this.stream.send(e)}$o(){var e=this;return(0,ye.Z)(function*(){if(e.ko())return e.close(0)})()}Lo(){this.Do&&(this.Do.cancel(),this.Do=null)}Uo(){this.Co&&(this.Co.cancel(),this.Co=null)}close(e,t){var r=this;return(0,ye.Z)(function*(){r.Lo(),r.Uo(),r.xo.cancel(),r.So++,4!==e?r.xo.reset():t&&t.code===ce.RESOURCE_EXHAUSTED?(Vn(t.toString()),Vn("Using maximum backoff delay to prevent overloading the backend."),r.xo.Eo()):t&&t.code===ce.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.qo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Zr(t)})()}qo(){}auth(){this.state=1;const e=this.Ko(this.So),t=this.So;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.So===t&&this.Go(r,s)},r=>{e(()=>{const s=new Re(ce.UNKNOWN,"Fetching auth token failed: "+r.message);return this.Qo(s)})})}Go(e,t){const r=this.Ko(this.So);this.stream=this.jo(e,t),this.stream.Yr(()=>{r(()=>(this.state=2,this.Co=this.Hs.enqueueAfterDelay(this.vo,1e4,()=>(this.ko()&&(this.state=3),Promise.resolve())),this.listener.Yr()))}),this.stream.Zr(s=>{r(()=>this.Qo(s))}),this.stream.onMessage(s=>{r(()=>this.onMessage(s))})}Mo(){var e=this;this.state=5,this.xo.Ao((0,ye.Z)(function*(){e.state=0,e.start()}))}Qo(e){return ke("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Ko(e){return t=>{this.Hs.enqueueAndForget(()=>this.So===e?t():(ke("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class $P extends oN{constructor(e,t,r,s,u,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,s,c),this.It=u}jo(e,t){return this.Vo._o("Listen",e,t)}onMessage(e){this.xo.reset();const t=function Pk(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(v=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===v?1:"REMOVE"===v?2:"CURRENT"===v?3:"RESET"===v?4:Xe(),s=e.targetChange.targetIds||[],u=function(v,b){return v.gt?(mt(void 0===b||"string"==typeof b),lr.fromBase64String(b||"")):(mt(void 0===b||b instanceof Uint8Array),lr.fromUint8Array(b||new Uint8Array))}(n,e.targetChange.resumeToken),c=e.targetChange.cause,m=c&&function(v){const b=void 0===v.code?ce.UNKNOWN:YM(v.code);return new Re(b,v.message||"")}(c);t=new tR(r,s,u,m||null)}else if("documentChange"in e){const r=e.documentChange,s=ol(n,r.document.name),u=li(r.document.updateTime),c=new O({mapValue:{fields:r.document.fields}}),m=Y.newFoundDocument(s,u,c);t=new Kb(r.targetIds||[],r.removedTargetIds||[],m.key,m)}else if("documentDelete"in e){const r=e.documentDelete,s=ol(n,r.document),u=r.readTime?li(r.readTime):bt.min(),c=Y.newNoDocument(s,u);t=new Kb([],r.removedTargetIds||[],c.key,c)}else if("documentRemove"in e){const r=e.documentRemove,s=ol(n,r.document);t=new Kb([],r.removedTargetIds||[],s,null)}else{if(!("filter"in e))return Xe();{const r=e.filter,u=new Dk(r.count||0);t=new eR(r.targetId,u)}}var v;return t}(this.It,e),r=function(s){if(!("targetChange"in s))return bt.min();const u=s.targetChange;return u.targetIds&&u.targetIds.length?bt.min():u.readTime?li(u.readTime):bt.min()}(e);return this.listener.Wo(t,r)}zo(e){const t={};t.database=Mw(this.It),t.addTarget=function(s,u){let c;const m=u.target;return c=xe(m)?{documents:dR(s,m)}:{query:hR(s,m)},c.targetId=u.targetId,u.resumeToken.approximateByteSize()>0?c.resumeToken=sR(s,u.resumeToken):u.snapshotVersion.compareTo(bt.min())>0&&(c.readTime=Aw(s,u.snapshotVersion.toTimestamp())),c}(this.It,e);const r=function Lk(n,e){const t=function(r,s){switch(s){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Xe()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Bo(t)}Ho(e){const t={};t.database=Mw(this.It),t.removeTarget=e,this.Bo(t)}}class HP extends oN{constructor(e,t,r,s,u,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,s,c),this.It=u,this.Jo=!1}get Yo(){return this.Jo}start(){this.Jo=!1,this.lastStreamToken=void 0,super.start()}qo(){this.Jo&&this.Xo([])}jo(e,t){return this.Vo._o("Write",e,t)}onMessage(e){if(mt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Jo){this.xo.reset();const t=function Fk(n,e){return n&&n.length>0?(mt(void 0!==e),n.map(t=>function(r,s){let u=li(r.updateTime?r.updateTime:s);return u.isEqual(bt.min())&&(u=li(s)),new Ek(u,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=li(e.commitTime);return this.listener.Zo(r,t)}return mt(!e.writeResults||0===e.writeResults.length),this.Jo=!0,this.listener.tu()}eu(){const e={};e.database=Mw(this.It),this.Bo(e)}Xo(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>Rw(this.It,r))};this.Bo(t)}}class GP extends class{}{constructor(e,t,r,s){super(),this.authCredentials=e,this.appCheckCredentials=t,this.Vo=r,this.It=s,this.nu=!1}su(){if(this.nu)throw new Re(ce.FAILED_PRECONDITION,"The client has already been terminated.")}co(e,t,r){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,u])=>this.Vo.co(e,t,r,s,u)).catch(s=>{throw"FirebaseError"===s.name?(s.code===ce.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Re(ce.UNKNOWN,s.toString())})}fo(e,t,r,s){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,c])=>this.Vo.fo(e,t,r,u,c,s)).catch(u=>{throw"FirebaseError"===u.name?(u.code===ce.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new Re(ce.UNKNOWN,u.toString())})}terminate(){this.nu=!0}}class zP{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.iu=0,this.ru=null,this.ou=!0}uu(){0===this.iu&&(this.cu("Unknown"),this.ru=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ru=null,this.au("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve())))}hu(e){"Online"===this.state?this.cu("Unknown"):(this.iu++,this.iu>=1&&(this.lu(),this.au(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.cu("Offline")))}set(e){this.lu(),this.iu=0,"Online"===e&&(this.ou=!1),this.cu(e)}cu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}au(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ou?(Vn(t),this.ou=!1):ke("OnlineStateTracker",t)}lu(){null!==this.ru&&(this.ru.cancel(),this.ru=null)}}class qP{constructor(e,t,r,s,u){var c=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.fu=[],this.du=new Map,this._u=new Set,this.wu=[],this.mu=u,this.mu.qr(m=>{r.enqueueAndForget((0,ye.Z)(function*(){var v;Ch(c)&&(ke("RemoteStore","Restarting streams for network reachability change."),yield(v=(0,ye.Z)(function*(b){const A=qe(b);A._u.add(4),yield ly(A),A.gu.set("Unknown"),A._u.delete(4),yield jw(A)}),function(b){return v.apply(this,arguments)})(c))}))}),this.gu=new zP(r,s)}}function jw(n){return XS.apply(this,arguments)}function XS(){return XS=(0,ye.Z)(function*(n){if(Ch(n))for(const e of n.wu)yield e(!0)}),XS.apply(this,arguments)}function ly(n){return eA.apply(this,arguments)}function eA(){return eA=(0,ye.Z)(function*(n){for(const e of n.wu)yield e(!1)}),eA.apply(this,arguments)}function cD(n,e){const t=qe(n);t.du.has(e.targetId)||(t.du.set(e.targetId,e),rA(t)?nA(t):dy(t).ko()&&tA(t,e))}function $w(n,e){const t=qe(n),r=dy(t);t.du.delete(e),r.ko()&&aN(t,e),0===t.du.size&&(r.ko()?r.Fo():Ch(t)&&t.gu.set("Unknown"))}function tA(n,e){n.yu.Ot(e.targetId),dy(n).zo(e)}function aN(n,e){n.yu.Ot(e),dy(n).Ho(e)}function nA(n){n.yu=new xk({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),se:e=>n.du.get(e)||null}),dy(n).start(),n.gu.uu()}function rA(n){return Ch(n)&&!dy(n).No()&&n.du.size>0}function Ch(n){return 0===qe(n)._u.size}function uN(n){n.yu=void 0}function WP(n){return iA.apply(this,arguments)}function iA(){return iA=(0,ye.Z)(function*(n){n.du.forEach((e,t)=>{tA(n,e)})}),iA.apply(this,arguments)}function ZP(n,e){return sA.apply(this,arguments)}function sA(){return sA=(0,ye.Z)(function*(n,e){uN(n),rA(n)?(n.gu.hu(e),nA(n)):n.gu.set("Unknown")}),sA.apply(this,arguments)}function KP(n,e,t){return oA.apply(this,arguments)}function oA(){return oA=(0,ye.Z)(function*(n,e,t){if(n.gu.set("Online"),e instanceof tR&&2===e.state&&e.cause)try{yield(r=(0,ye.Z)(function*(s,u){const c=u.cause;for(const m of u.targetIds)s.du.has(m)&&(yield s.remoteSyncer.rejectListen(m,c),s.du.delete(m),s.yu.removeTarget(m))}),function(s,u){return r.apply(this,arguments)})(n,e)}catch(r){ke("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield dD(n,r)}else if(e instanceof Kb?n.yu.Gt(e):e instanceof eR?n.yu.Yt(e):n.yu.Wt(e),!t.isEqual(bt.min()))try{const r=yield YR(n.localStore);t.compareTo(r)>=0&&(yield function(s,u){const c=s.yu.te(u);return c.targetChanges.forEach((m,v)=>{if(m.resumeToken.approximateByteSize()>0){const b=s.du.get(v);b&&s.du.set(v,b.withResumeToken(m.resumeToken,u))}}),c.targetMismatches.forEach(m=>{const v=s.du.get(m);if(!v)return;s.du.set(m,v.withResumeToken(lr.EMPTY_BYTE_STRING,v.snapshotVersion)),aN(s,m);const b=new Ih(v.target,m,1,v.sequenceNumber);tA(s,b)}),s.remoteSyncer.applyRemoteEvent(c)}(n,t))}catch(r){ke("RemoteStore","Failed to raise snapshot:",r),yield dD(n,r)}var r}),oA.apply(this,arguments)}function dD(n,e,t){return aA.apply(this,arguments)}function aA(){return aA=(0,ye.Z)(function*(n,e,t){if(!rl(e))throw e;n._u.add(1),yield ly(n),n.gu.set("Offline"),t||(t=()=>YR(n.localStore)),n.asyncQueue.enqueueRetryable((0,ye.Z)(function*(){ke("RemoteStore","Retrying IndexedDB access"),yield t(),n._u.delete(1),yield jw(n)}))}),aA.apply(this,arguments)}function lN(n,e){return e().catch(t=>dD(n,t,e))}function cy(n){return uA.apply(this,arguments)}function uA(){return uA=(0,ye.Z)(function*(n){const e=qe(n),t=Th(e);let r=e.fu.length>0?e.fu[e.fu.length-1].batchId:-1;for(;YP(e);)try{const s=yield PP(e.localStore,r);if(null===s){0===e.fu.length&&t.Fo();break}r=s.batchId,QP(e,s)}catch(s){yield dD(e,s)}cN(e)&&dN(e)}),uA.apply(this,arguments)}function YP(n){return Ch(n)&&n.fu.length<10}function QP(n,e){n.fu.push(e);const t=Th(n);t.ko()&&t.Yo&&t.Xo(e.mutations)}function cN(n){return Ch(n)&&!Th(n).No()&&n.fu.length>0}function dN(n){Th(n).start()}function JP(n){return lA.apply(this,arguments)}function lA(){return lA=(0,ye.Z)(function*(n){Th(n).eu()}),lA.apply(this,arguments)}function XP(n){return cA.apply(this,arguments)}function cA(){return cA=(0,ye.Z)(function*(n){const e=Th(n);for(const t of n.fu)e.Xo(t.mutations)}),cA.apply(this,arguments)}function e1(n,e,t){return dA.apply(this,arguments)}function dA(){return dA=(0,ye.Z)(function*(n,e,t){const r=n.fu.shift(),s=kS.from(r,e,t);yield lN(n,()=>n.remoteSyncer.applySuccessfulWrite(s)),yield cy(n)}),dA.apply(this,arguments)}function t1(n,e){return hA.apply(this,arguments)}function hA(){return hA=(0,ye.Z)(function*(n,e){var t;e&&Th(n).Yo&&(yield(t=(0,ye.Z)(function*(r,s){if(KM(u=s.code)&&u!==ce.ABORTED){const c=r.fu.shift();Th(r).Oo(),yield lN(r,()=>r.remoteSyncer.rejectFailedWrite(c.batchId,s)),yield cy(r)}var u}),function(r,s){return t.apply(this,arguments)})(n,e)),cN(n)&&dN(n)}),hA.apply(this,arguments)}function hN(n,e){return fA.apply(this,arguments)}function fA(){return fA=(0,ye.Z)(function*(n,e){const t=qe(n);t.asyncQueue.verifyOperationInProgress(),ke("RemoteStore","RemoteStore received new credentials");const r=Ch(t);t._u.add(3),yield ly(t),r&&t.gu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t._u.delete(3),yield jw(t)}),fA.apply(this,arguments)}function pA(n,e){return gA.apply(this,arguments)}function gA(){return gA=(0,ye.Z)(function*(n,e){const t=qe(n);e?(t._u.delete(2),yield jw(t)):e||(t._u.add(2),yield ly(t),t.gu.set("Unknown"))}),gA.apply(this,arguments)}function dy(n){return n.pu||(n.pu=function(e,t,r){const s=qe(e);return s.su(),new $P(t,s.Vo,s.authCredentials,s.appCheckCredentials,s.It,r)}(n.datastore,n.asyncQueue,{Yr:WP.bind(null,n),Zr:ZP.bind(null,n),Wo:KP.bind(null,n)}),n.wu.push(function(){var e=(0,ye.Z)(function*(t){t?(n.pu.Oo(),rA(n)?nA(n):n.gu.set("Unknown")):(yield n.pu.stop(),uN(n))});return function(t){return e.apply(this,arguments)}}())),n.pu}function Th(n){return n.Iu||(n.Iu=function(e,t,r){const s=qe(e);return s.su(),new HP(t,s.Vo,s.authCredentials,s.appCheckCredentials,s.It,r)}(n.datastore,n.asyncQueue,{Yr:JP.bind(null,n),Zr:t1.bind(null,n),tu:XP.bind(null,n),Zo:e1.bind(null,n)}),n.wu.push(function(){var e=(0,ye.Z)(function*(t){t?(n.Iu.Oo(),yield cy(n)):(yield n.Iu.stop(),n.fu.length>0&&(ke("RemoteStore",`Stopping write stream with ${n.fu.length} pending writes`),n.fu=[]))});return function(t){return e.apply(this,arguments)}}())),n.Iu}class mA{constructor(e,t,r,s,u){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=s,this.removalCallback=u,this.deferred=new Or,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}static createAndSchedule(e,t,r,s,u){const c=Date.now()+r,m=new mA(e,t,c,s,u);return m.start(r),m}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Re(ce.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function hy(n,e){if(Vn("AsyncQueue",`${e}: ${n}`),rl(n))return new Re(ce.UNAVAILABLE,`${e}: ${n}`);throw n}class fy{constructor(e){this.comparator=e?(t,r)=>e(t,r)||Ge.comparator(t.key,r.key):(t,r)=>Ge.comparator(t.key,r.key),this.keyedMap=Dw(),this.sortedSet=new Yn(this.comparator)}static emptySet(e){return new fy(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof fy)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const s=t.getNext().key,u=r.getNext().key;if(!s.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new fy;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class fN{constructor(){this.Tu=new Yn(Ge.comparator)}track(e){const t=e.doc.key,r=this.Tu.get(t);r?0!==e.type&&3===r.type?this.Tu=this.Tu.insert(t,e):3===e.type&&1!==r.type?this.Tu=this.Tu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Tu=this.Tu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Tu=this.Tu.remove(t):1===e.type&&2===r.type?this.Tu=this.Tu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):Xe():this.Tu=this.Tu.insert(t,e)}Eu(){const e=[];return this.Tu.inorderTraversal((t,r)=>{e.push(r)}),e}}class py{constructor(e,t,r,s,u,c,m,v){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=u,this.fromCache=c,this.syncStateChanged=m,this.excludesMetadataChanges=v}static fromInitialDocuments(e,t,r,s){const u=[];return t.forEach(c=>{u.push({type:0,doc:c})}),new py(e,t,fy.emptySet(t),u,r,s,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ew(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let s=0;s<t.length;s++)if(t[s].type!==r[s].type||!t[s].doc.isEqual(r[s].doc))return!1;return!0}}class n1{constructor(){this.Au=void 0,this.listeners=[]}}class r1{constructor(){this.queries=new Eh(e=>OM(e),Ew),this.onlineState="Unknown",this.Ru=new Set}}function yA(n,e){return _A.apply(this,arguments)}function _A(){return _A=(0,ye.Z)(function*(n,e){const t=qe(n),r=e.query;let s=!1,u=t.queries.get(r);if(u||(s=!0,u=new n1),s)try{u.Au=yield t.onListen(r)}catch(c){const m=hy(c,`Initialization of query '${TS(e.query)}' failed`);return void e.onError(m)}t.queries.set(r,u),u.listeners.push(e),e.bu(t.onlineState),u.Au&&e.Pu(u.Au)&&EA(t)}),_A.apply(this,arguments)}function vA(n,e){return wA.apply(this,arguments)}function wA(){return wA=(0,ye.Z)(function*(n,e){const t=qe(n),r=e.query;let s=!1;const u=t.queries.get(r);if(u){const c=u.listeners.indexOf(e);c>=0&&(u.listeners.splice(c,1),s=0===u.listeners.length)}if(s)return t.queries.delete(r),t.onUnlisten(r)}),wA.apply(this,arguments)}function i1(n,e){const t=qe(n);let r=!1;for(const s of e){const c=t.queries.get(s.query);if(c){for(const m of c.listeners)m.Pu(s)&&(r=!0);c.Au=s}}r&&EA(t)}function s1(n,e,t){const r=qe(n),s=r.queries.get(e);if(s)for(const u of s.listeners)u.onError(t);r.queries.delete(e)}function EA(n){n.Ru.forEach(e=>{e.next()})}class IA{constructor(e,t,r){this.query=e,this.vu=t,this.Vu=!1,this.Su=null,this.onlineState="Unknown",this.options=r||{}}Pu(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)3!==s.type&&r.push(s);e=new py(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.Vu?this.Du(e)&&(this.vu.next(e),t=!0):this.Cu(e,this.onlineState)&&(this.xu(e),t=!0),this.Su=e,t}onError(e){this.vu.error(e)}bu(e){this.onlineState=e;let t=!1;return this.Su&&!this.Vu&&this.Cu(this.Su,e)&&(this.xu(this.Su),t=!0),t}Cu(e,t){return!e.fromCache||!(this.options.Nu&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}Du(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Su&&this.Su.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}xu(e){e=py.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.Vu=!0,this.vu.next(e)}}class o1{constructor(e,t){this.payload=e,this.byteLength=t}ku(){return"metadata"in this.payload}}class pN{constructor(e){this.It=e}Ji(e){return ol(this.It,e)}Yi(e){return e.metadata.exists?cR(this.It,e.document,!1):Y.newNoDocument(this.Ji(e.metadata.name),this.Xi(e.metadata.readTime))}Xi(e){return li(e)}}class a1{constructor(e,t,r){this.Mu=e,this.localStore=t,this.It=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=gN(e)}Ou(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;const r=qt.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Fu(e){const t=new Map,r=new pN(this.It);for(const s of e)if(s.metadata.queries){const u=r.Ji(s.metadata.name);for(const c of s.metadata.queries){const m=(t.get(c)||Vt()).add(u);t.set(c,m)}}return t}complete(){var e=this;return(0,ye.Z)(function*(){const t=yield function FP(n,e,t,r){return qS.apply(this,arguments)}(e.localStore,new pN(e.It),e.documents,e.Mu.id),r=e.Fu(e.documents);for(const s of e.queries)yield LP(e.localStore,s,r.get(s.name));return e.progress.taskState="Success",{progress:e.progress,$u:e.collectionGroups,Bu:t}})()}}function gN(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class mN{constructor(e){this.key=e}}class yN{constructor(e){this.key=e}}class _N{constructor(e,t){this.query=e,this.Lu=t,this.Uu=null,this.current=!1,this.qu=Vt(),this.mutatedKeys=Vt(),this.Ku=PM(e),this.Gu=new fy(this.Ku)}get Qu(){return this.Lu}ju(e,t){const r=t?t.Wu:new fN,s=t?t.Gu:this.Gu;let u=t?t.mutatedKeys:this.mutatedKeys,c=s,m=!1;const v="F"===this.query.limitType&&s.size===this.query.limit?s.last():null,b="L"===this.query.limitType&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((A,M)=>{const L=s.get(A),G=SS(this.query,M)?M:null,J=!!L&&this.mutatedKeys.has(L.key),Ie=!!G&&(G.hasLocalMutations||this.mutatedKeys.has(G.key)&&G.hasCommittedMutations);let Ce=!1;L&&G?L.data.isEqual(G.data)?J!==Ie&&(r.track({type:3,doc:G}),Ce=!0):this.zu(L,G)||(r.track({type:2,doc:G}),Ce=!0,(v&&this.Ku(G,v)>0||b&&this.Ku(G,b)<0)&&(m=!0)):!L&&G?(r.track({type:0,doc:G}),Ce=!0):L&&!G&&(r.track({type:1,doc:L}),Ce=!0,(v||b)&&(m=!0)),Ce&&(G?(c=c.add(G),u=Ie?u.add(A):u.delete(A)):(c=c.delete(A),u=u.delete(A)))}),null!==this.query.limit)for(;c.size>this.query.limit;){const A="F"===this.query.limitType?c.last():c.first();c=c.delete(A.key),u=u.delete(A.key),r.track({type:1,doc:A})}return{Gu:c,Wu:r,$i:m,mutatedKeys:u}}zu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const s=this.Gu;this.Gu=e.Gu,this.mutatedKeys=e.mutatedKeys;const u=e.Wu.Eu();u.sort((b,A)=>function(M,L){const G=J=>{switch(J){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Xe()}};return G(M)-G(L)}(b.type,A.type)||this.Ku(b.doc,A.doc)),this.Hu(r);const c=t?this.Ju():[],m=0===this.qu.size&&this.current?1:0,v=m!==this.Uu;return this.Uu=m,0!==u.length||v?{snapshot:new py(this.query,e.Gu,s,u,e.mutatedKeys,0===m,v,!1),Yu:c}:{Yu:c}}bu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Gu:this.Gu,Wu:new fN,mutatedKeys:this.mutatedKeys,$i:!1},!1)):{Yu:[]}}Xu(e){return!this.Lu.has(e)&&!!this.Gu.has(e)&&!this.Gu.get(e).hasLocalMutations}Hu(e){e&&(e.addedDocuments.forEach(t=>this.Lu=this.Lu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Lu=this.Lu.delete(t)),this.current=e.current)}Ju(){if(!this.current)return[];const e=this.qu;this.qu=Vt(),this.Gu.forEach(r=>{this.Xu(r.key)&&(this.qu=this.qu.add(r.key))});const t=[];return e.forEach(r=>{this.qu.has(r)||t.push(new yN(r))}),this.qu.forEach(r=>{e.has(r)||t.push(new mN(r))}),t}Zu(e){this.Lu=e.Hi,this.qu=Vt();const t=this.ju(e.documents);return this.applyChanges(t,!0)}tc(){return py.fromInitialDocuments(this.query,this.Gu,this.mutatedKeys,0===this.Uu)}}class u1{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class l1{constructor(e){this.key=e,this.ec=!1}}class c1{constructor(e,t,r,s,u,c){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=s,this.currentUser=u,this.maxConcurrentLimboResolutions=c,this.nc={},this.sc=new Eh(m=>OM(m),Ew),this.ic=new Map,this.rc=new Set,this.oc=new Yn(Ge.comparator),this.uc=new Map,this.cc=new US,this.ac={},this.hc=new Map,this.lc=Rp.vn(),this.onlineState="Unknown",this.fc=void 0}get isPrimaryClient(){return!0===this.fc}}function d1(n,e){return bA.apply(this,arguments)}function bA(){return bA=(0,ye.Z)(function*(n,e){const t=qA(n);let r,s;const u=t.sc.get(e);if(u)r=u.targetId,t.sharedClientState.addLocalQueryTarget(r),s=u.view.tc();else{const c=yield ay(t.localStore,Hs(e));t.isPrimaryClient&&cD(t.remoteStore,c);const m=t.sharedClientState.addLocalQueryTarget(c.targetId);r=c.targetId,s=yield DA(t,e,r,"current"===m)}return s}),bA.apply(this,arguments)}function DA(n,e,t,r){return CA.apply(this,arguments)}function CA(){return CA=(0,ye.Z)(function*(n,e,t,r){n.dc=(A,M,L)=>{return(G=(0,ye.Z)(function*(J,Ie,Ce,Ze){let ut=Ie.view.ju(Ce);ut.$i&&(ut=yield oD(J.localStore,Ie.query,!1).then(({documents:Tt})=>Ie.view.ju(Tt,ut)));const lt=Ze&&Ze.targetChanges.get(Ie.targetId),tt=Ie.view.applyChanges(ut,J.isPrimaryClient,lt);return PA(J,Ie.targetId,tt.Yu),tt.snapshot}),function(J,Ie,Ce,Ze){return G.apply(this,arguments)})(n,A,M,L);var G};const s=yield oD(n.localStore,e,!0),u=new _N(e,s.Hi),c=u.ju(s.documents),m=Sw.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState),v=u.applyChanges(c,n.isPrimaryClient,m);PA(n,t,v.Yu);const b=new u1(e,t,u);return n.sc.set(e,b),n.ic.has(t)?n.ic.get(t).push(e):n.ic.set(t,[e]),v.snapshot}),CA.apply(this,arguments)}function h1(n,e){return TA.apply(this,arguments)}function TA(){return TA=(0,ye.Z)(function*(n,e){const t=qe(n),r=t.sc.get(e),s=t.ic.get(r.targetId);if(s.length>1)return t.ic.set(r.targetId,s.filter(u=>!Ew(u,e))),void t.sc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield uy(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),$w(t.remoteStore,r.targetId),gy(t,r.targetId)}).catch(nl))):(gy(t,r.targetId),yield uy(t.localStore,r.targetId,!0))}),TA.apply(this,arguments)}function SA(){return SA=(0,ye.Z)(function*(n,e,t){const r=WA(n);try{const s=yield function(u,c){const m=qe(u),v=gn.now(),b=c.reduce((L,G)=>L.add(G.key),Vt());let A,M;return m.persistence.runTransaction("Locally write mutations","readwrite",L=>{let G=Gs(),J=Vt();return m.Gi.getEntries(L,b).next(Ie=>{G=Ie,G.forEach((Ce,Ze)=>{Ze.isValidDocument()||(J=J.add(Ce))})}).next(()=>m.localDocuments.getOverlayedDocuments(L,G)).next(Ie=>{A=Ie;const Ce=[];for(const Ze of c){const ut=bk(Ze,A.get(Ze.key).overlayedDocument);null!=ut&&Ce.push(new Bc(Ze.key,ut,z(ut.value.mapValue),Qn.exists(!0)))}return m.mutationQueue.addMutationBatch(L,v,Ce,c)}).next(Ie=>{M=Ie;const Ce=Ie.applyToLocalDocumentSet(A,J);return m.documentOverlayCache.saveOverlays(L,Ie.batchId,Ce)})}).then(()=>({batchId:M.batchId,changes:JM(A)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(u,c,m){let v=u.ac[u.currentUser.toKey()];v||(v=new Yn(At)),v=v.insert(c,m),u.ac[u.currentUser.toKey()]=v}(r,s.batchId,t),yield jc(r,s.changes),yield cy(r.remoteStore)}catch(s){const u=hy(s,"Failed to persist write");t.reject(u)}}),SA.apply(this,arguments)}function vN(n,e){return AA.apply(this,arguments)}function AA(){return AA=(0,ye.Z)(function*(n,e){const t=qe(n);try{const r=yield kP(t.localStore,e);e.targetChanges.forEach((s,u)=>{const c=t.uc.get(u);c&&(mt(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?c.ec=!0:s.modifiedDocuments.size>0?mt(c.ec):s.removedDocuments.size>0&&(mt(c.ec),c.ec=!1))}),yield jc(t,r,e)}catch(r){yield nl(r)}}),AA.apply(this,arguments)}function wN(n,e,t){const r=qe(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const s=[];r.sc.forEach((u,c)=>{const m=c.view.bu(e);m.snapshot&&s.push(m.snapshot)}),function(u,c){const m=qe(u);m.onlineState=c;let v=!1;m.queries.forEach((b,A)=>{for(const M of A.listeners)M.bu(c)&&(v=!0)}),v&&EA(m)}(r.eventManager,e),s.length&&r.nc.Wo(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function p1(n,e,t){return xA.apply(this,arguments)}function xA(){return xA=(0,ye.Z)(function*(n,e,t){const r=qe(n);r.sharedClientState.updateQueryState(e,"rejected",t);const s=r.uc.get(e),u=s&&s.key;if(u){let c=new Yn(Ge.comparator);c=c.insert(u,Y.newNoDocument(u,bt.min()));const m=Vt().add(u),v=new Tw(bt.min(),new Map,new un(At),c,m);yield vN(r,v),r.oc=r.oc.remove(u),r.uc.delete(e),FA(r)}else yield uy(r.localStore,e,!1).then(()=>gy(r,e,t)).catch(nl)}),xA.apply(this,arguments)}function g1(n,e){return MA.apply(this,arguments)}function MA(){return MA=(0,ye.Z)(function*(n,e){const t=qe(n),r=e.batch.batchId;try{const s=yield OP(t.localStore,e);kA(t,r,null),OA(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield jc(t,s)}catch(s){yield nl(s)}}),MA.apply(this,arguments)}function m1(n,e,t){return RA.apply(this,arguments)}function RA(){return RA=(0,ye.Z)(function*(n,e,t){const r=qe(n);try{const s=yield function(u,c){const m=qe(u);return m.persistence.runTransaction("Reject batch","readwrite-primary",v=>{let b;return m.mutationQueue.lookupMutationBatch(v,c).next(A=>(mt(null!==A),b=A.keys(),m.mutationQueue.removeMutationBatch(v,A))).next(()=>m.mutationQueue.performConsistencyCheck(v)).next(()=>m.documentOverlayCache.removeOverlaysForBatchId(v,b,c)).next(()=>m.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(v,b)).next(()=>m.localDocuments.getDocuments(v,b))})}(r.localStore,e);kA(r,e,t),OA(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield jc(r,s)}catch(s){yield nl(s)}}),RA.apply(this,arguments)}function NA(){return NA=(0,ye.Z)(function*(n,e){const t=qe(n);Ch(t.remoteStore)||ke("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(u){const c=qe(u);return c.persistence.runTransaction("Get highest unacknowledged batch id","readonly",m=>c.mutationQueue.getHighestUnacknowledgedBatchId(m))}(t.localStore);if(-1===r)return void e.resolve();const s=t.hc.get(r)||[];s.push(e),t.hc.set(r,s)}catch(r){const s=hy(r,"Initialization of waitForPendingWrites() operation failed");e.reject(s)}}),NA.apply(this,arguments)}function OA(n,e){(n.hc.get(e)||[]).forEach(t=>{t.resolve()}),n.hc.delete(e)}function kA(n,e,t){const r=qe(n);let s=r.ac[r.currentUser.toKey()];if(s){const u=s.get(e);u&&(t?u.reject(t):u.resolve(),s=s.remove(e)),r.ac[r.currentUser.toKey()]=s}}function gy(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.ic.get(e))n.sc.delete(r),t&&n.nc._c(r,t);n.ic.delete(e),n.isPrimaryClient&&n.cc.ls(e).forEach(r=>{n.cc.containsKey(r)||EN(n,r)})}function EN(n,e){n.rc.delete(e.path.canonicalString());const t=n.oc.get(e);null!==t&&($w(n.remoteStore,t),n.oc=n.oc.remove(e),n.uc.delete(t),FA(n))}function PA(n,e,t){for(const r of t)r instanceof mN?(n.cc.addReference(r.key,e),_1(n,r)):r instanceof yN?(ke("SyncEngine","Document no longer in limbo: "+r.key),n.cc.removeReference(r.key,e),n.cc.containsKey(r.key)||EN(n,r.key)):Xe()}function _1(n,e){const t=e.key,r=t.path.canonicalString();n.oc.get(t)||n.rc.has(r)||(ke("SyncEngine","New document in limbo: "+t),n.rc.add(r),FA(n))}function FA(n){for(;n.rc.size>0&&n.oc.size<n.maxConcurrentLimboResolutions;){const e=n.rc.values().next().value;n.rc.delete(e);const t=new Ge(qt.fromString(e)),r=n.lc.next();n.uc.set(r,new l1(t)),n.oc=n.oc.insert(t,r),cD(n.remoteStore,new Ih(Hs(Qm(t.path)),r,2,cs.at))}}function jc(n,e,t){return LA.apply(this,arguments)}function LA(){return LA=(0,ye.Z)(function*(n,e,t){const r=qe(n),s=[],u=[],c=[];var m;r.sc.isEmpty()||(r.sc.forEach((m,v)=>{c.push(r.dc(v,e,t).then(b=>{if(b){r.isPrimaryClient&&r.sharedClientState.updateQueryState(v.targetId,b.fromCache?"not-current":"current"),s.push(b);const A=HS.Ci(v.targetId,b);u.push(A)}}))}),yield Promise.all(c),r.nc.Wo(s),yield(m=(0,ye.Z)(function*(v,b){const A=qe(v);try{yield A.persistence.runTransaction("notifyLocalViewChanges","readwrite",M=>se.forEach(b,L=>se.forEach(L.Si,G=>A.persistence.referenceDelegate.addReference(M,L.targetId,G)).next(()=>se.forEach(L.Di,G=>A.persistence.referenceDelegate.removeReference(M,L.targetId,G)))))}catch(M){if(!rl(M))throw M;ke("LocalStore","Failed to update sequence numbers: "+M)}for(const M of b){const L=M.targetId;if(!M.fromCache){const G=A.Ui.get(L),Ie=G.withLastLimboFreeSnapshotVersion(G.snapshotVersion);A.Ui=A.Ui.insert(L,Ie)}}}),function(v,b){return m.apply(this,arguments)})(r.localStore,u))}),LA.apply(this,arguments)}function v1(n,e){return VA.apply(this,arguments)}function VA(){return VA=(0,ye.Z)(function*(n,e){const t=qe(n);if(!t.currentUser.isEqual(e)){ke("SyncEngine","User change. New user:",e.toKey());const r=yield KR(t.localStore,e);t.currentUser=e,(s=t).hc.forEach(c=>{c.forEach(m=>{m.reject(new Re(ce.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),s.hc.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield jc(t,r.ji)}var s}),VA.apply(this,arguments)}function w1(n,e){const t=qe(n),r=t.uc.get(e);if(r&&r.ec)return Vt().add(r.key);{let s=Vt();const u=t.ic.get(e);if(!u)return s;for(const c of u){const m=t.sc.get(c);s=s.unionWith(m.view.Qu)}return s}}function E1(n,e){return UA.apply(this,arguments)}function UA(){return UA=(0,ye.Z)(function*(n,e){const t=qe(n),r=yield oD(t.localStore,e.query,!0),s=e.view.Zu(r);return t.isPrimaryClient&&PA(t,e.targetId,s.Yu),s}),UA.apply(this,arguments)}function I1(n,e){return BA.apply(this,arguments)}function BA(){return BA=(0,ye.Z)(function*(n,e){const t=qe(n);return XR(t.localStore,e).then(r=>jc(t,r))}),BA.apply(this,arguments)}function b1(n,e,t,r){return jA.apply(this,arguments)}function jA(){return jA=(0,ye.Z)(function*(n,e,t,r){const s=qe(n),u=yield function(c,m){const v=qe(c),b=qe(v.mutationQueue);return v.persistence.runTransaction("Lookup mutation documents","readonly",A=>b.Tn(A,m).next(M=>M?v.localDocuments.getDocuments(A,M):se.resolve(null)))}(s.localStore,e);var m;null!==u?("pending"===t?yield cy(s.remoteStore):"acknowledged"===t||"rejected"===t?(kA(s,e,r||null),OA(s,e),m=e,qe(qe(s.localStore).mutationQueue).An(m)):Xe(),yield jc(s,u)):ke("SyncEngine","Cannot apply mutation batch with id: "+e)}),jA.apply(this,arguments)}function $A(){return $A=(0,ye.Z)(function*(n,e){const t=qe(n);if(qA(t),WA(t),!0===e&&!0!==t.fc){const r=t.sharedClientState.getAllActiveQueryTargets(),s=yield IN(t,r.toArray());t.fc=!0,yield pA(t.remoteStore,!0);for(const u of s)cD(t.remoteStore,u)}else if(!1===e&&!1!==t.fc){const r=[];let s=Promise.resolve();t.ic.forEach((u,c)=>{t.sharedClientState.isLocalQueryTarget(c)?r.push(c):s=s.then(()=>(gy(t,c),uy(t.localStore,c,!0))),$w(t.remoteStore,c)}),yield s,yield IN(t,r),function(u){const c=qe(u);c.uc.forEach((m,v)=>{$w(c.remoteStore,v)}),c.cc.fs(),c.uc=new Map,c.oc=new Yn(Ge.comparator)}(t),t.fc=!1,yield pA(t.remoteStore,!1)}}),$A.apply(this,arguments)}function IN(n,e,t){return HA.apply(this,arguments)}function HA(){return HA=(0,ye.Z)(function*(n,e,t){const r=qe(n),s=[],u=[];for(const c of e){let m;const v=r.ic.get(c);if(v&&0!==v.length){m=yield ay(r.localStore,Hs(v[0]));for(const b of v){const A=r.sc.get(b),M=yield E1(r,A);M.snapshot&&u.push(M.snapshot)}}else{const b=yield JR(r.localStore,c);m=yield ay(r.localStore,b),yield DA(r,bN(b),c,!1)}s.push(m)}return r.nc.Wo(u),s}),HA.apply(this,arguments)}function bN(n){return RM(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function C1(n){const e=qe(n);return qe(qe(e.localStore).persistence).vi()}function T1(n,e,t,r){return GA.apply(this,arguments)}function GA(){return GA=(0,ye.Z)(function*(n,e,t,r){const s=qe(n);if(s.fc)return void ke("SyncEngine","Ignoring unexpected query state notification.");const u=s.ic.get(e);if(u&&u.length>0)switch(t){case"current":case"not-current":{const c=yield XR(s.localStore,kM(u[0])),m=Tw.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield jc(s,c,m);break}case"rejected":yield uy(s.localStore,e,!0),gy(s,e,r);break;default:Xe()}}),GA.apply(this,arguments)}function S1(n,e,t){return zA.apply(this,arguments)}function zA(){return zA=(0,ye.Z)(function*(n,e,t){const r=qA(n);if(r.fc){for(const s of e){if(r.ic.has(s)){ke("SyncEngine","Adding an already active target "+s);continue}const u=yield JR(r.localStore,s),c=yield ay(r.localStore,u);yield DA(r,bN(u),c.targetId,!1),cD(r.remoteStore,c)}for(const s of t)r.ic.has(s)&&(yield uy(r.localStore,s,!1).then(()=>{$w(r.remoteStore,s),gy(r,s)}).catch(nl))}}),zA.apply(this,arguments)}function qA(n){const e=qe(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=vN.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=w1.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=p1.bind(null,e),e.nc.Wo=i1.bind(null,e.eventManager),e.nc._c=s1.bind(null,e.eventManager),e}function WA(n){const e=qe(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=g1.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=m1.bind(null,e),e}class DN{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,ye.Z)(function*(){t.It=Bw(e.databaseInfo.databaseId),t.sharedClientState=t.mc(e),t.persistence=t.gc(e),yield t.persistence.start(),t.localStore=t.yc(e),t.gcScheduler=t.Ic(e,t.localStore),t.indexBackfillerScheduler=t.Tc(e,t.localStore)})()}Ic(e,t){return null}Tc(e,t){return null}yc(e){return ZR(this.persistence,new WR,e.initialUser,this.It)}gc(e){return new zR(iD.Bs,this.It)}mc(e){return new rN}terminate(){var e=this;return(0,ye.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class CN extends DN{constructor(e,t,r){super(),this.Ec=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,ye.Z)(function*(){yield t().call(r,e),yield r.Ec.initialize(r,e),yield WA(r.Ec.syncEngine),yield cy(r.Ec.remoteStore),yield r.persistence.li(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}yc(e){return ZR(this.persistence,new WR,e.initialUser,this.It)}Ic(e,t){return new _P(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}Tc(e,t){const r=new SM(t,this.persistence);return new TM(e.asyncQueue,r)}gc(e){const t=$S(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?zs.withCacheSize(this.cacheSizeBytes):zs.DEFAULT;return new jS(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,sN(),lD(),this.It,this.sharedClientState,!!this.forceOwnership)}mc(e){return new rN}}class x1 extends CN{constructor(e,t){super(e,t,!1),this.Ec=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,ye.Z)(function*(){yield t().call(r,e);const s=r.Ec.syncEngine;r.sharedClientState instanceof QS&&(r.sharedClientState.syncEngine={Fr:b1.bind(null,s),$r:T1.bind(null,s),Br:S1.bind(null,s),vi:C1.bind(null,s),Or:I1.bind(null,s)},yield r.sharedClientState.start()),yield r.persistence.li(function(){var u=(0,ye.Z)(function*(c){yield function D1(n,e){return $A.apply(this,arguments)}(r.Ec.syncEngine,c),r.gcScheduler&&(c&&!r.gcScheduler.started?r.gcScheduler.start():c||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(c&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():c||r.indexBackfillerScheduler.stop())});return function(c){return u.apply(this,arguments)}}())})()}mc(e){const t=sN();if(!QS.C(t))throw new Re(ce.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=$S(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new QS(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class ZA{initialize(e,t){var r=this;return(0,ye.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=s=>wN(r.syncEngine,s,1),r.remoteStore.remoteSyncer.handleCredentialChange=v1.bind(null,r.syncEngine),yield pA(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new r1}createDatastore(e){const t=Bw(e.databaseInfo.databaseId),r=new jP(e.databaseInfo);return new GP(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,s=e.asyncQueue,u=m=>wN(this.syncEngine,m,0),c=iN.C()?new iN:new VP,new qP(t,r,s,u,c);var t,r,s,u,c}createSyncEngine(e,t){return function(r,s,u,c,m,v,b){const A=new c1(r,s,u,c,m,v);return b&&(A.fc=!0),A}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,ye.Z)(function*(t){const r=qe(t);ke("RemoteStore","RemoteStore shutting down."),r._u.add(5),yield ly(r),r.mu.shutdown(),r.gu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function TN(n,e=10240){let t=0;return{read:()=>(0,ye.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,ye.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class hD{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ac(this.observer.next,e)}error(e){this.observer.error?this.Ac(this.observer.error,e):Vn("Uncaught Error in snapshot listener:",e)}Rc(){this.muted=!0}Ac(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class M1{constructor(e,t){this.bc=e,this.It=t,this.metadata=new Or,this.buffer=new Uint8Array,this.Pc=new TextDecoder("utf-8"),this.vc().then(r=>{r&&r.ku()?this.metadata.resolve(r.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.payload)}`))},r=>this.metadata.reject(r))}close(){return this.bc.cancel()}getMetadata(){var e=this;return(0,ye.Z)(function*(){return e.metadata.promise})()}wc(){var e=this;return(0,ye.Z)(function*(){return yield e.getMetadata(),e.vc()})()}vc(){var e=this;return(0,ye.Z)(function*(){const t=yield e.Vc();if(null===t)return null;const r=e.Pc.decode(t),s=Number(r);isNaN(s)&&e.Sc(`length string (${r}) is not valid number`);const u=yield e.Dc(s);return new o1(JSON.parse(u),t.length+s)})()}Cc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Vc(){var e=this;return(0,ye.Z)(function*(){for(;e.Cc()<0&&!(yield e.xc()););if(0===e.buffer.length)return null;const t=e.Cc();t<0&&e.Sc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}Dc(e){var t=this;return(0,ye.Z)(function*(){for(;t.buffer.length<e;)(yield t.xc())&&t.Sc("Reached the end of bundle when more is expected.");const r=t.Pc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Sc(e){throw this.bc.cancel(),new Error(`Invalid bundle format: ${e}`)}xc(){var e=this;return(0,ye.Z)(function*(){const t=yield e.bc.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class R1{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,ye.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Re(ce.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(s=(0,ye.Z)(function*(u,c){const m=qe(u),v=Mw(m.It)+"/documents",b={documents:c.map(G=>xw(m.It,G))},A=yield m.fo("BatchGetDocuments",v,b,c.length),M=new Map;A.forEach(G=>{const J=function kk(n,e){return"found"in e?function(t,r){mt(!!r.found);const s=ol(t,r.found.name),u=li(r.found.updateTime),c=new O({mapValue:{fields:r.found.fields}});return Y.newFoundDocument(s,u,c)}(n,e):"missing"in e?function(t,r){mt(!!r.missing),mt(!!r.readTime);const s=ol(t,r.missing),u=li(r.readTime);return Y.newNoDocument(s,u)}(n,e):Xe()}(m.It,G);M.set(J.key.toString(),J)});const L=[];return c.forEach(G=>{const J=M.get(G.toString());mt(!!J),L.push(J)}),L}),function(u,c){return s.apply(this,arguments)})(t.datastore,e);var s;return r.forEach(s=>t.recordVersion(s)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new ny(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,ye.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,s)=>{const u=Ge.fromPath(s);e.mutations.push(new AS(u,e.precondition(u)))}),yield(r=(0,ye.Z)(function*(s,u){const c=qe(s),m=Mw(c.It)+"/documents",v={writes:u.map(b=>Rw(c.It,b))};yield c.co("Commit",m,v)}),function(s,u){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Xe();t=bt.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Re(ce.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(bt.min())?Qn.exists(!1):Qn.updateTime(t):Qn.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(bt.min()))throw new Re(ce.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Qn.updateTime(t)}return Qn.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class N1{constructor(e,t,r,s,u){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=s,this.deferred=u,this.Nc=r.maxAttempts,this.xo=new JS(this.asyncQueue,"transaction_retry")}run(){this.Nc-=1,this.kc()}kc(){var e=this;this.xo.Ao((0,ye.Z)(function*(){const t=new R1(e.datastore),r=e.Mc(t);r&&r.then(s=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(s)}).catch(u=>{e.Oc(u)}))}).catch(s=>{e.Oc(s)})}))}Mc(e){try{const t=this.updateFunction(e);return!Ep(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Oc(e){this.Nc>0&&this.Fc(e)?(this.Nc-=1,this.asyncQueue.enqueueAndForget(()=>(this.kc(),Promise.resolve()))):this.deferred.reject(e)}Fc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!KM(t)}return!1}}class O1{constructor(e,t,r,s){var u=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=s,this.user=Nr.UNAUTHENTICATED,this.clientId=sw.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var c=(0,ye.Z)(function*(m){ke("FirestoreClient","Received user=",m.uid),yield u.authCredentialListener(m),u.user=m});return function(m){return c.apply(this,arguments)}}()),this.appCheckCredentials.start(r,c=>(ke("FirestoreClient","Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}getConfiguration(){var e=this;return(0,ye.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Re(ce.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Or;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,ye.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const s=hy(r,"Failed to shutdown persistence");t.reject(s)}})),t.promise}}function SN(n,e){return KA.apply(this,arguments)}function KA(){return KA=(0,ye.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),ke("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var s=(0,ye.Z)(function*(u){r.isEqual(u)||(yield KR(e.localStore,u),r=u)});return function(u){return s.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),KA.apply(this,arguments)}function AN(n,e){return YA.apply(this,arguments)}function YA(){return YA=(0,ye.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield QA(n);ke("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(s=>hN(e.remoteStore,s)),n.setAppCheckTokenChangeListener((s,u)=>hN(e.remoteStore,u)),n.onlineComponents=e}),YA.apply(this,arguments)}function QA(n){return JA.apply(this,arguments)}function JA(){return JA=(0,ye.Z)(function*(n){return n.offlineComponents||(ke("FirestoreClient","Using default OfflineComponentProvider"),yield SN(n,new DN)),n.offlineComponents}),JA.apply(this,arguments)}function fD(n){return XA.apply(this,arguments)}function XA(){return XA=(0,ye.Z)(function*(n){return n.onlineComponents||(ke("FirestoreClient","Using default OnlineComponentProvider"),yield AN(n,new ZA)),n.onlineComponents}),XA.apply(this,arguments)}function xN(n){return QA(n).then(e=>e.persistence)}function pD(n){return QA(n).then(e=>e.localStore)}function MN(n){return fD(n).then(e=>e.remoteStore)}function ex(n){return fD(n).then(e=>e.syncEngine)}function my(n){return tx.apply(this,arguments)}function tx(){return tx=(0,ye.Z)(function*(n){const e=yield fD(n),t=e.eventManager;return t.onListen=d1.bind(null,e.syncEngine),t.onUnlisten=h1.bind(null,e.syncEngine),t}),tx.apply(this,arguments)}function RN(n,e,t={}){const r=new Or;return n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return function(s,u,c,m,v){const b=new hD({next:M=>{u.enqueueAndForget(()=>vA(s,A));const L=M.docs.has(c);!L&&M.fromCache?v.reject(new Re(ce.UNAVAILABLE,"Failed to get document because the client is offline.")):L&&M.fromCache&&m&&"server"===m.source?v.reject(new Re(ce.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):v.resolve(M)},error:M=>v.reject(M)}),A=new IA(Qm(c.path),b,{includeMetadataChanges:!0,Nu:!0});return yA(s,A)}(yield my(n),n.asyncQueue,e,t,r)})),r.promise}function NN(n,e,t={}){const r=new Or;return n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return function(s,u,c,m,v){const b=new hD({next:M=>{u.enqueueAndForget(()=>vA(s,A)),M.fromCache&&"server"===m.source?v.reject(new Re(ce.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):v.resolve(M)},error:M=>v.reject(M)}),A=new IA(c,b,{includeMetadataChanges:!0,Nu:!0});return yA(s,A)}(yield my(n),n.asyncQueue,e,t,r)})),r.promise}const ON=new Map;function nx(n,e,t){if(!t)throw new Re(ce.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function kN(n,e,t,r){if(!0===e&&!0===r)throw new Re(ce.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function PN(n){if(!Ge.isDocumentKey(n))throw new Re(ce.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function FN(n){if(Ge.isDocumentKey(n))throw new Re(ce.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function gD(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":Xe()}function Jt(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Re(ce.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=gD(n);throw new Re(ce.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function LN(n,e){if(e<=0)throw new Re(ce.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class VN{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Re(ce.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Re(ce.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,kN("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Hw{constructor(e,t,r,s){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new VN({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Re(ce.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Re(ce.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new VN(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new Nb;switch(t.type){case"gapi":return new kb(t.client,t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new Re(ce.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=ON.get(e);t&&(ke("ComponentProvider","Removing Datastore"),ON.delete(e),t.terminate())}(this),Promise.resolve()}}class Bn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ul(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Bn(this.firestore,e,this._key)}}class Ui{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Ui(this.firestore,e,this._query)}}class ul extends Ui{constructor(e,t,r){super(e,t,Qm(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Bn(this.firestore,null,new Ge(e))}withConverter(e){return new ul(this.firestore,e,this._path)}}function UN(n,e,...t){if(n=(0,Et.m9)(n),nx("collection","path",e),n instanceof Hw){const r=qt.fromString(e,...t);return FN(r),new ul(n,null,r)}{if(!(n instanceof Bn||n instanceof ul))throw new Re(ce.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(qt.fromString(e,...t));return FN(r),new ul(n.firestore,null,r)}}function mD(n,e,...t){if(n=(0,Et.m9)(n),1===arguments.length&&(e=sw.R()),nx("doc","path",e),n instanceof Hw){const r=qt.fromString(e,...t);return PN(r),new Bn(n,null,new Ge(r))}{if(!(n instanceof Bn||n instanceof ul))throw new Re(ce.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(qt.fromString(e,...t));return PN(r),new Bn(n.firestore,n instanceof ul?n.converter:null,new Ge(r))}}function BN(n,e){return n=(0,Et.m9)(n),e=(0,Et.m9)(e),(n instanceof Bn||n instanceof ul)&&(e instanceof Bn||e instanceof ul)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function jN(n,e){return n=(0,Et.m9)(n),e=(0,Et.m9)(e),n instanceof Ui&&e instanceof Ui&&n.firestore===e.firestore&&Ew(n._query,e._query)&&n.converter===e.converter}class G1{constructor(){this.$c=Promise.resolve(),this.Bc=[],this.Lc=!1,this.Uc=[],this.qc=null,this.Kc=!1,this.Gc=!1,this.Qc=[],this.xo=new JS(this,"async_queue_retry"),this.jc=()=>{const t=lD();t&&ke("AsyncQueue","Visibility state changed to "+t.visibilityState),this.xo.bo()};const e=lD();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.jc)}get isShuttingDown(){return this.Lc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Wc(),this.zc(e)}enterRestrictedMode(e){if(!this.Lc){this.Lc=!0,this.Gc=e||!1;const t=lD();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.jc)}}enqueue(e){if(this.Wc(),this.Lc)return new Promise(()=>{});const t=new Or;return this.zc(()=>this.Lc&&this.Gc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Bc.push(e),this.Hc()))}Hc(){var e=this;return(0,ye.Z)(function*(){if(0!==e.Bc.length){try{yield e.Bc[0](),e.Bc.shift(),e.xo.reset()}catch(t){if(!rl(t))throw t;ke("AsyncQueue","Operation failed with retryable error: "+t)}e.Bc.length>0&&e.xo.Ao(()=>e.Hc())}})()}zc(e){const t=this.$c.then(()=>(this.Kc=!0,e().catch(r=>{throw this.qc=r,this.Kc=!1,Vn("INTERNAL UNHANDLED ERROR: ",function(u){let c=u.message||"";return u.stack&&(c=u.stack.includes(u.message)?u.stack:u.message+"\n"+u.stack),c}(r)),r}).then(r=>(this.Kc=!1,r))));return this.$c=t,t}enqueueAfterDelay(e,t,r){this.Wc(),this.Qc.indexOf(e)>-1&&(t=0);const s=mA.createAndSchedule(this,e,t,r,u=>this.Jc(u));return this.Uc.push(s),s}Wc(){this.qc&&Xe()}verifyOperationInProgress(){}Yc(){var e=this;return(0,ye.Z)(function*(){let t;do{t=e.$c,yield t}while(t!==e.$c)})()}Xc(e){for(const t of this.Uc)if(t.timerId===e)return!0;return!1}Zc(e){return this.Yc().then(()=>{this.Uc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.Uc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Yc()})}ta(e){this.Qc.push(e)}Jc(e){const t=this.Uc.indexOf(e);this.Uc.splice(t,1)}}function rx(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const s of["next","error","complete"])if(s in r&&"function"==typeof r[s])return!0;return!1}(n)}class z1{constructor(){this._progressObserver={},this._taskCompletionResolver=new Or,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Jn extends Hw{constructor(e,t,r,s){super(e,t,r,s),this.type="firestore",this._queue=new G1,this._persistenceKey=s?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||$N(this),this._firestoreClient.terminate()}}function Fr(n){return n._firestoreClient||$N(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function $N(n){var e;const t=n._freezeSettings(),r=(u=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new wS(n._databaseId,u,n._persistenceKey,(m=t).host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,m.useFetchStreams));var u,m;n._firestoreClient=new O1(n._authCredentials,n._appCheckCredentials,n._queue,r)}function HN(n,e,t){const r=new Or;return n.asyncQueue.enqueue((0,ye.Z)(function*(){try{yield SN(n,t),yield AN(n,e),r.resolve()}catch(s){const u=s;if(!("FirebaseError"===(c=u).name?c.code===ce.FAILED_PRECONDITION||c.code===ce.UNIMPLEMENTED:!(typeof DOMException<"u"&&c instanceof DOMException)||22===c.code||20===c.code||11===c.code))throw u;Vi("Error enabling offline persistence. Falling back to persistence disabled: "+u),r.reject(u)}var c})).then(()=>r.promise)}function GN(n){if(n._initialized||n._terminated)throw new Re(ce.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class $c{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Re(ce.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Kn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class ll{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ll(lr.fromBase64String(e))}catch(t){throw new Re(ce.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new ll(lr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Op{constructor(e){this._methodName=e}}class yD{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Re(ce.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Re(ce.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return At(this._lat,e._lat)||At(this._long,e._long)}}const tF=/^__.*__$/;class nF{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new Bc(e,this.data,this.fieldMask,t,this.fieldTransforms):new ty(e,this.data,t,this.fieldTransforms)}}class zN{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Bc(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function qN(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Xe()}}class _D{constructor(e,t,r,s,u,c){this.settings=e,this.databaseId=t,this.It=r,this.ignoreUndefinedProperties=s,void 0===u&&this.ea(),this.fieldTransforms=u||[],this.fieldMask=c||[]}get path(){return this.settings.path}get na(){return this.settings.na}sa(e){return new _D(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.It,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ia(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),s=this.sa({path:r,ra:!1});return s.oa(e),s}ua(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),s=this.sa({path:r,ra:!1});return s.ea(),s}ca(e){return this.sa({path:void 0,ra:!0})}aa(e){return ED(e,this.settings.methodName,this.settings.ha||!1,this.path,this.settings.la)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}ea(){if(this.path)for(let e=0;e<this.path.length;e++)this.oa(this.path.get(e))}oa(e){if(0===e.length)throw this.aa("Document fields must not be empty");if(qN(this.na)&&tF.test(e))throw this.aa('Document fields cannot begin and end with "__"')}}class rF{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.It=r||Bw(e)}fa(e,t,r,s=!1){return new _D({na:e,methodName:t,la:r,path:Kn.emptyPath(),ra:!1,ha:s},this.databaseId,this.It,this.ignoreUndefinedProperties)}}function kp(n){const e=n._freezeSettings(),t=Bw(n._databaseId);return new rF(n._databaseId,!!e.ignoreUndefinedProperties,t)}function vD(n,e,t,r,s,u={}){const c=n.fa(u.merge||u.mergeFields?2:0,e,t,s);ax("Data must be an object, but it was:",c,r);const m=KN(r,c);let v,b;if(u.merge)v=new ds(c.fieldMask),b=c.fieldTransforms;else if(u.mergeFields){const A=[];for(const M of u.mergeFields){const L=ux(e,M,t);if(!c.contains(L))throw new Re(ce.INVALID_ARGUMENT,`Field '${L}' is specified in your field mask but missing from your input data.`);QN(A,L)||A.push(L)}v=new ds(A),b=c.fieldTransforms.filter(M=>v.covers(M.field))}else v=null,b=c.fieldTransforms;return new nF(new O(m),v,b)}class Gw extends Op{_toFieldTransform(e){if(2!==e.na)throw e.aa(1===e.na?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Gw}}function WN(n,e,t){return new _D({na:3,la:e.settings.la,methodName:n._methodName,ra:t},e.databaseId,e.It,e.ignoreUndefinedProperties)}class ix extends Op{_toFieldTransform(e){return new Iw(e.path,new Xm)}isEqual(e){return e instanceof ix}}class iF extends Op{constructor(e,t){super(e),this.da=t}_toFieldTransform(e){const t=WN(this,e,!0),r=this.da.map(u=>Pp(u,t)),s=new bp(r);return new Iw(e.path,s)}isEqual(e){return this===e}}class sF extends Op{constructor(e,t){super(e),this.da=t}_toFieldTransform(e){const t=WN(this,e,!0),r=this.da.map(u=>Pp(u,t)),s=new Dp(r);return new Iw(e.path,s)}isEqual(e){return this===e}}class oF extends Op{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=new ey(e.It,VM(e.It,this._a));return new Iw(e.path,t)}isEqual(e){return this===e}}function sx(n,e,t,r){const s=n.fa(1,e,t);ax("Data must be an object, but it was:",s,r);const u=[],c=O.empty();Pc(r,(v,b)=>{const A=wD(e,v,t);b=(0,Et.m9)(b);const M=s.ua(A);if(b instanceof Gw)u.push(A);else{const L=Pp(b,M);null!=L&&(u.push(A),c.set(A,L))}});const m=new ds(u);return new zN(c,m,s.fieldTransforms)}function ox(n,e,t,r,s,u){const c=n.fa(1,e,t),m=[ux(e,r,t)],v=[s];if(u.length%2!=0)throw new Re(ce.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let L=0;L<u.length;L+=2)m.push(ux(e,u[L])),v.push(u[L+1]);const b=[],A=O.empty();for(let L=m.length-1;L>=0;--L)if(!QN(b,m[L])){const G=m[L];let J=v[L];J=(0,Et.m9)(J);const Ie=c.ua(G);if(J instanceof Gw)b.push(G);else{const Ce=Pp(J,Ie);null!=Ce&&(b.push(G),A.set(G,Ce))}}const M=new ds(b);return new zN(A,M,c.fieldTransforms)}function ZN(n,e,t,r=!1){return Pp(t,n.fa(r?4:3,e))}function Pp(n,e){if(YN(n=(0,Et.m9)(n)))return ax("Unsupported field value:",e,n),KN(n,e);if(n instanceof Op)return function(t,r){if(!qN(r.na))throw r.aa(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.aa(`${t._methodName}() is not currently supported inside arrays`);const s=t._toFieldTransform(r);s&&r.fieldTransforms.push(s)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.ra&&4!==e.na)throw e.aa("Nested arrays are not supported");return function(t,r){const s=[];let u=0;for(const c of t){let m=Pp(c,r.ca(u));null==m&&(m={nullValue:"NULL_VALUE"}),s.push(m),u++}return{arrayValue:{values:s}}}(n,e)}return function(t,r){if(null===(t=(0,Et.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return VM(r.It,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const s=gn.fromDate(t);return{timestampValue:Aw(r.It,s)}}if(t instanceof gn){const s=new gn(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Aw(r.It,s)}}if(t instanceof yD)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof ll)return{bytesValue:sR(r.It,t._byteString)};if(t instanceof Bn){const s=r.databaseId,u=t.firestore._databaseId;if(!u.isEqual(s))throw r.aa(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:xS(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.aa(`Unsupported field value: ${gD(t)}`)}(n,e)}function KN(n,e){const t={};return jb(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Pc(n,(r,s)=>{const u=Pp(s,e.ia(r));null!=u&&(t[r]=u)}),{mapValue:{fields:t}}}function YN(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof gn||n instanceof yD||n instanceof ll||n instanceof Bn||n instanceof Op)}function ax(n,e,t){if(!YN(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=gD(t);throw e.aa("an object"===r?n+" a custom object":n+" "+r)}var r}function ux(n,e,t){if((e=(0,Et.m9)(e))instanceof $c)return e._internalPath;if("string"==typeof e)return wD(n,e);throw ED("Field path arguments must be of type string or ",n,!1,void 0,t)}const aF=new RegExp("[~\\*/\\[\\]]");function wD(n,e,t){if(e.search(aF)>=0)throw ED(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new $c(...e.split("."))._internalPath}catch{throw ED(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function ED(n,e,t,r,s){const u=r&&!r.isEmpty(),c=void 0!==s;let m=`Function ${e}() called with invalid data`;t&&(m+=" (via `toFirestore()`)"),m+=". ";let v="";return(u||c)&&(v+=" (found",u&&(v+=` in field ${r}`),c&&(v+=` in document ${s}`),v+=")"),new Re(ce.INVALID_ARGUMENT,m+n+v)}function QN(n,e){return n.some(t=>t.isEqual(e))}class zw{constructor(e,t,r,s,u){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=s,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new Bn(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new uF(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(ID("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class uF extends zw{data(){return super.data()}}function ID(n,e){return"string"==typeof e?wD(n,e):e instanceof $c?e._internalPath:e._delegate._internalPath}class Fp{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Hc extends zw{constructor(e,t,r,s,u,c){super(e,t,r,s,c),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new qw(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(ID("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class qw extends Hc{data(e={}){return super.data(e)}}class Sh{constructor(e,t,r,s){this._firestore=e,this._userDataWriter=t,this._snapshot=s,this.metadata=new Fp(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new qw(this._firestore,this._userDataWriter,r.key,r,new Fp(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Re(ce.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,s){if(r._snapshot.oldDocs.isEmpty()){let u=0;return r._snapshot.docChanges.map(c=>({type:"added",doc:new qw(r._firestore,r._userDataWriter,c.doc.key,c.doc,new Fp(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:u++}))}{let u=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(c=>s||3!==c.type).map(c=>{const m=new qw(r._firestore,r._userDataWriter,c.doc.key,c.doc,new Fp(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter);let v=-1,b=-1;return 0!==c.type&&(v=u.indexOf(c.doc.key),u=u.delete(c.doc.key)),1!==c.type&&(u=u.add(c.doc),b=u.indexOf(c.doc.key)),{type:lF(c.type),doc:m,oldIndex:v,newIndex:b}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function lF(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Xe()}}function JN(n,e){return n instanceof Hc&&e instanceof Hc?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Sh&&e instanceof Sh&&n._firestore===e._firestore&&jN(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function XN(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Re(ce.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Ww{}function Ah(n,...e){for(const t of e)n=t._apply(n);return n}class cF extends Ww{constructor(e,t,r){super(),this.wa=e,this.ma=t,this.ga=r,this.type="where"}_apply(e){const t=kp(e.firestore),r=function(s,u,c,m,v,b,A){let M;if(v.isKeyField()){if("array-contains"===b||"array-contains-any"===b)throw new Re(ce.INVALID_ARGUMENT,`Invalid Query. You can't perform '${b}' queries on documentId().`);if("in"===b||"not-in"===b){sO(A,b);const G=[];for(const J of A)G.push(iO(m,s,J));M={arrayValue:{values:G}}}else M=iO(m,s,A)}else"in"!==b&&"not-in"!==b&&"array-contains-any"!==b||sO(A,b),M=ZN(c,"where",A,"in"===b||"not-in"===b);const L=Un.create(v,b,M);return function(G,J){if(J.dt()){const Ce=DS(G);if(null!==Ce&&!Ce.isEqual(J.field))throw new Re(ce.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${Ce.toString()}' and '${J.field.toString()}'`);const Ze=bS(G);null!==Ze&&oO(0,J.field,Ze)}const Ie=function(Ce,Ze){for(const ut of Ce.filters)if(Ze.indexOf(ut.op)>=0)return ut.op;return null}(G,function(Ce){switch(Ce){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(J.op));if(null!==Ie)throw new Re(ce.INVALID_ARGUMENT,Ie===J.op?`Invalid query. You cannot use more than one '${J.op.toString()}' filter.`:`Invalid query. You cannot use '${J.op.toString()}' filters with '${Ie.toString()}' filters.`)}(s,L),L}(e._query,0,t,e.firestore._databaseId,this.wa,this.ma,this.ga);return new Ui(e.firestore,e.converter,function(s,u){const c=s.filters.concat([u]);return new Uc(s.path,s.collectionGroup,s.explicitOrderBy.slice(),c,s.limit,s.limitType,s.startAt,s.endAt)}(e._query,r))}}class hF extends Ww{constructor(e,t){super(),this.wa=e,this.ya=t,this.type="orderBy"}_apply(e){const t=function(r,s,u){if(null!==r.startAt)throw new Re(ce.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Re(ce.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const c=new Ym(s,u);return function(m,v){if(null===bS(m)){const b=DS(m);null!==b&&oO(0,b,v.field)}}(r,c),c}(e._query,this.wa,this.ya);return new Ui(e.firestore,e.converter,function(r,s){const u=r.explicitOrderBy.concat([s]);return new Uc(r.path,r.collectionGroup,u,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class eO extends Ww{constructor(e,t,r){super(),this.type=e,this.pa=t,this.Ia=r}_apply(e){return new Ui(e.firestore,e.converter,Gb(e._query,this.pa,this.Ia))}}class tO extends Ww{constructor(e,t,r){super(),this.type=e,this.Ta=t,this.Ea=r}_apply(e){const t=rO(e,this.type,this.Ta,this.Ea);return new Ui(e.firestore,e.converter,(s=t,new Uc((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,s,r.endAt)));var r,s}}class nO extends Ww{constructor(e,t,r){super(),this.type=e,this.Ta=t,this.Ea=r}_apply(e){const t=rO(e,this.type,this.Ta,this.Ea);return new Ui(e.firestore,e.converter,(s=t,new Uc((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,s)));var r,s}}function rO(n,e,t,r){if(t[0]=(0,Et.m9)(t[0]),t[0]instanceof zw)return function(s,u,c,m,v){if(!m)throw new Re(ce.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${c}().`);const b=[];for(const A of Jm(s))if(A.field.isKeyField())b.push(wh(u,m.key));else{const M=m.data.field(A.field);if(hw(M))throw new Re(ce.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+A.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===M){const L=A.field.canonicalString();throw new Re(ce.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${L}' (used as the orderBy) does not exist.`)}b.push(M)}return new Yo(b,v)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const s=kp(n.firestore);return function(u,c,m,v,b,A){const M=u.explicitOrderBy;if(b.length>M.length)throw new Re(ce.INVALID_ARGUMENT,`Too many arguments provided to ${v}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const L=[];for(let G=0;G<b.length;G++){const J=b[G];if(M[G].field.isKeyField()){if("string"!=typeof J)throw new Re(ce.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${v}(), but got a ${typeof J}`);if(!CS(u)&&-1!==J.indexOf("/"))throw new Re(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${v}() must be a plain document ID, but '${J}' contains a slash.`);const Ie=u.path.child(qt.fromString(J));if(!Ge.isDocumentKey(Ie))throw new Re(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${v}() must result in a valid document path, but '${Ie}' is not because it contains an odd number of segments.`);const Ce=new Ge(Ie);L.push(wh(c,Ce))}else{const Ie=ZN(m,v,J);L.push(Ie)}}return new Yo(L,A)}(n._query,n.firestore._databaseId,s,e,t,r)}}function iO(n,e,t){if("string"==typeof(t=(0,Et.m9)(t))){if(""===t)throw new Re(ce.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!CS(e)&&-1!==t.indexOf("/"))throw new Re(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(qt.fromString(t));if(!Ge.isDocumentKey(r))throw new Re(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return wh(n,new Ge(r))}if(t instanceof Bn)return wh(n,t._key);throw new Re(ce.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${gD(t)}.`)}function sO(n,e){if(!Array.isArray(n)||0===n.length)throw new Re(ce.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new Re(ce.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function oO(n,e,t){if(!t.isEqual(e))throw new Re(ce.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}const wF={maxAttempts:5};class lx{convertValue(e,t="none"){switch(vh(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Rn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Fc(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Xe()}}convertObject(e,t){const r={};return Pc(e.fields,(s,u)=>{r[s]=this.convertValue(u,t)}),r}convertGeoPoint(e){return new yD(Rn(e.latitude),Rn(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=vS(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(qm(e));default:return null}}convertTimestamp(e){const t=Za(e);return new gn(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=qt.fromString(e);mt(gR(r));const s=new il(r.get(1),r.get(3)),u=new Ge(r.popFirst(5));return s.isEqual(t)||Vn(`Document ${u} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),u}}function bD(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class EF extends lx{constructor(e){super(),this.firestore=e}convertBytes(e){return new ll(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Bn(this.firestore,null,t)}}class aO{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=kp(e)}set(e,t,r){this._verifyNotCommitted();const s=xh(e,this._firestore),u=bD(s.converter,t,r),c=vD(this._dataReader,"WriteBatch.set",s._key,u,null!==s.converter,r);return this._mutations.push(c.toMutation(s._key,Qn.none())),this}update(e,t,r,...s){this._verifyNotCommitted();const u=xh(e,this._firestore);let c;return c="string"==typeof(t=(0,Et.m9)(t))||t instanceof $c?ox(this._dataReader,"WriteBatch.update",u._key,t,r,s):sx(this._dataReader,"WriteBatch.update",u._key,t),this._mutations.push(c.toMutation(u._key,Qn.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=xh(e,this._firestore);return this._mutations=this._mutations.concat(new ny(t._key,Qn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Re(ce.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function xh(n,e){if((n=(0,Et.m9)(n)).firestore!==e)throw new Re(ce.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class Lp extends lx{constructor(e){super(),this.firestore=e}convertBytes(e){return new ll(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Bn(this.firestore,null,t)}}function uO(n,e,t){n=Jt(n,Bn);const r=Jt(n.firestore,Jn),s=bD(n.converter,e,t);return yy(r,[vD(kp(r),"setDoc",n._key,s,null!==n.converter,t).toMutation(n._key,Qn.none())])}function lO(n,e,t,...r){n=Jt(n,Bn);const s=Jt(n.firestore,Jn),u=kp(s);let c;return c="string"==typeof(e=(0,Et.m9)(e))||e instanceof $c?ox(u,"updateDoc",n._key,e,t,r):sx(u,"updateDoc",n._key,e),yy(s,[c.toMutation(n._key,Qn.exists(!0))])}function cO(n,...e){var t,r,s;n=(0,Et.m9)(n);let u={includeMetadataChanges:!1},c=0;"object"!=typeof e[c]||rx(e[c])||(u=e[c],c++);const m={includeMetadataChanges:u.includeMetadataChanges};if(rx(e[c])){const M=e[c];e[c]=null===(t=M.next)||void 0===t?void 0:t.bind(M),e[c+1]=null===(r=M.error)||void 0===r?void 0:r.bind(M),e[c+2]=null===(s=M.complete)||void 0===s?void 0:s.bind(M)}let v,b,A;if(n instanceof Bn)b=Jt(n.firestore,Jn),A=Qm(n._key.path),v={next:M=>{e[c]&&e[c](cx(b,n,M))},error:e[c+1],complete:e[c+2]};else{const M=Jt(n,Ui);b=Jt(M.firestore,Jn),A=M._query;const L=new Lp(b);v={next:G=>{e[c]&&e[c](new Sh(b,L,M,G))},error:e[c+1],complete:e[c+2]},XN(n._query)}return function(M,L,G,J){const Ie=new hD(J),Ce=new IA(L,Ie,G);return M.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return yA(yield my(M),Ce)})),()=>{Ie.Rc(),M.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return vA(yield my(M),Ce)}))}}(Fr(b),A,m,v)}function yy(n,e){return function(t,r){const s=new Or;return t.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return function f1(n,e,t){return SA.apply(this,arguments)}(yield ex(t),r,s)})),s.promise}(Fr(n),e)}function cx(n,e,t){const r=t.docs.get(e._key),s=new Lp(n);return new Hc(n,s,e._key,r,new Fp(t.hasPendingWrites,t.fromCache),e.converter)}class RF extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=kp(e)}get(e){const t=xh(e,this._firestore),r=new EF(this._firestore);return this._transaction.lookup([t._key]).then(s=>{if(!s||1!==s.length)return Xe();const u=s[0];if(u.isFoundDocument())return new zw(this._firestore,r,u.key,u,t.converter);if(u.isNoDocument())return new zw(this._firestore,r,t._key,null,t.converter);throw Xe()})}set(e,t,r){const s=xh(e,this._firestore),u=bD(s.converter,t,r),c=vD(this._dataReader,"Transaction.set",s._key,u,null!==s.converter,r);return this._transaction.set(s._key,c),this}update(e,t,r,...s){const u=xh(e,this._firestore);let c;return c="string"==typeof(t=(0,Et.m9)(t))||t instanceof $c?ox(this._dataReader,"Transaction.update",u._key,t,r,s):sx(this._dataReader,"Transaction.update",u._key,t),this._transaction.update(u._key,c),this}delete(e){const t=xh(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=xh(e,this._firestore),r=new Lp(this._firestore);return super.get(e).then(s=>new Hc(this._firestore,r,t._key,s._document,new Fp(!1,!1),t.converter))}}function dx(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Re("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function hO(){if(typeof Uint8Array>"u")throw new Re("unimplemented","Uint8Arrays are not available in this environment.")}function fO(){if(!function $b(){return typeof atob<"u"}())throw new Re("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){Nc=Vs.SDK_VERSION,(0,Vs._registerComponent)(new wc.wA("firestore",(t,{instanceIdentifier:r,options:s})=>{const u=t.getProvider("app").getImmediate(),c=new Jn(new Ob(t.getProvider("auth-internal")),new iw(t.getProvider("app-check-internal")),function(m,v){if(!Object.prototype.hasOwnProperty.apply(m.options,["projectId"]))throw new Re(ce.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new il(m.options.projectId,v)}(u,r),u);return s=Object.assign({useFetchStreams:e},s),c._setSettings(s),c},"PUBLIC").setMultipleInstances(!0)),(0,Vs.registerVersion)(nw,"3.4.15",n),(0,Vs.registerVersion)(nw,"3.4.15","esm2017")}();class Zw{constructor(e){this._delegate=e}static fromBase64String(e){return fO(),new Zw(ll.fromBase64String(e))}static fromUint8Array(e){return hO(),new Zw(ll.fromUint8Array(e))}toBase64(){return fO(),this._delegate.toBase64()}toUint8Array(){return hO(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function hx(n){return function BF(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class jF{enableIndexedDbPersistence(e,t){return function W1(n,e){GN(n=Jt(n,Jn));const t=Fr(n),r=n._freezeSettings(),s=new ZA;return HN(t,s,new CN(s,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function Z1(n){GN(n=Jt(n,Jn));const e=Fr(n),t=n._freezeSettings(),r=new ZA;return HN(e,r,new x1(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function K1(n){if(n._initialized&&!n._terminated)throw new Re(ce.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Or;return n._queue.enqueueAndForgetEvenWhileRestricted((0,ye.Z)(function*(){try{yield(t=(0,ye.Z)(function*(r){if(!$s.C())return Promise.resolve();const s=r+"main";yield $s.delete(s)}),function(r){return t.apply(this,arguments)})($S(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class pO{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof il||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Vi("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function $1(n,e,t,r={}){var s;const u=(n=Jt(n,Hw))._getSettings();if("firestore.googleapis.com"!==u.host&&u.host!==e&&Vi("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},u),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let c,m;if("string"==typeof r.mockUserToken)c=r.mockUserToken,m=Nr.MOCK_USER;else{c=(0,Et.Sg)(r.mockUserToken,null===(s=n._app)||void 0===s?void 0:s.options.projectId);const v=r.mockUserToken.sub||r.mockUserToken.user_id;if(!v)throw new Re(ce.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new Nr(v)}n._authCredentials=new CM(new Rb(c,m))}}(this._delegate,e,t,r)}enableNetwork(){return function Q1(n){return function k1(n){return n.asyncQueue.enqueue((0,ye.Z)(function*(){const e=yield xN(n),t=yield MN(n);return e.setNetworkEnabled(!0),function(r){const s=qe(r);return s._u.delete(0),jw(s)}(t)}))}(Fr(n=Jt(n,Jn)))}(this._delegate)}disableNetwork(){return function J1(n){return function P1(n){return n.asyncQueue.enqueue((0,ye.Z)(function*(){const e=yield xN(n),t=yield MN(n);return e.setNetworkEnabled(!1),(r=(0,ye.Z)(function*(s){const u=qe(s);u._u.add(0),yield ly(u),u.gu.set("Offline")}),function(s){return r.apply(this,arguments)})(t);var r}))}(Fr(n=Jt(n,Jn)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,kN("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function Y1(n){return function(e){const t=new Or;return e.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return function y1(n,e){return NA.apply(this,arguments)}(yield ex(e),t)})),t.promise}(Fr(n=Jt(n,Jn)))}(this._delegate)}onSnapshotsInSync(e){return function MF(n,e){return function V1(n,e){const t=new hD(e);return n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return r=yield my(n),s=t,qe(r).Ru.add(s),void s.next();var r,s})),()=>{t.Rc(),n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return r=yield my(n),s=t,void qe(r).Ru.delete(s);var r,s}))}}(Fr(n=Jt(n,Jn)),rx(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Re("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new _y(this,UN(this._delegate,e))}catch(t){throw fs(t,"collection()","Firestore.collection()")}}doc(e){try{return new Qo(this,mD(this._delegate,e))}catch(t){throw fs(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new ps(this,function H1(n,e){if(n=Jt(n,Hw),nx("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Re(ce.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Ui(n,null,(t=e,new Uc(qt.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw fs(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function NF(n,e,t){n=Jt(n,Jn);const r=Object.assign(Object.assign({},wF),t);return function(s){if(s.maxAttempts<1)throw new Re(ce.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function U1(n,e,t){const r=new Or;return n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){const s=yield(u=n,fD(u).then(c=>c.datastore));var u;new N1(n.asyncQueue,s,t,e,r).run()})),r.promise}(Fr(n),s=>e(new RF(n,s)),r)}(this._delegate,t=>e(new gO(this,t)))}batch(){return Fr(this._delegate),new mO(new aO(this._delegate,e=>yy(this._delegate,e)))}loadBundle(e){return function X1(n,e){const t=Fr(n=Jt(n,Jn)),r=new z1;return function B1(n,e,t,r){const s=function(u,c){let m;return m="string"==typeof u?(new TextEncoder).encode(u):u,v=function(v,b){if(v instanceof Uint8Array)return TN(v,b);if(v instanceof ArrayBuffer)return TN(new Uint8Array(v),b);if(v instanceof ReadableStream)return v.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(m),new M1(v,c);var v}(t,Bw(e));n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){!function A1(n,e,t){const r=qe(n);var s;(s=(0,ye.Z)(function*(u,c,m){try{const v=yield c.getMetadata();if(yield function(L,G){const J=qe(L),Ie=li(G.createTime);return J.persistence.runTransaction("hasNewerBundle","readonly",Ce=>J.Ns.getBundleMetadata(Ce,G.id)).then(Ce=>!!Ce&&Ce.createTime.compareTo(Ie)>=0)}(u.localStore,v))return yield c.close(),m._completeWith({taskState:"Success",documentsLoaded:(L=v).totalDocuments,bytesLoaded:L.totalBytes,totalDocuments:L.totalDocuments,totalBytes:L.totalBytes}),Promise.resolve(new Set);m._updateProgress(gN(v));const b=new a1(v,u.localStore,c.It);let A=yield c.wc();for(;A;){const L=yield b.Ou(A);L&&m._updateProgress(L),A=yield c.wc()}const M=yield b.complete();return yield jc(u,M.Bu,void 0),yield function(L,G){const J=qe(L);return J.persistence.runTransaction("Save bundle","readwrite",Ie=>J.Ns.saveBundleMetadata(Ie,G))}(u.localStore,v),m._completeWith(M.progress),Promise.resolve(M.$u)}catch(v){return Vi("SyncEngine",`Loading bundle failed with ${v}`),m._failWith(v),Promise.resolve(new Set)}var L}),function(u,c,m){return s.apply(this,arguments)})(r,e,t).then(s=>{r.sharedClientState.notifyBundleLoaded(s)})}(yield ex(n),s,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function eF(n,e){return function j1(n,e){return n.asyncQueue.enqueue((0,ye.Z)(function*(){return function(t,r){const s=qe(t);return s.persistence.runTransaction("Get named query","readonly",u=>s.Ns.getNamedQuery(u,r))}(yield pD(n),e)}))}(Fr(n=Jt(n,Jn)),e).then(t=>t?new Ui(n,null,t.query):null)}(this._delegate,e).then(t=>t?new ps(this,t):null)}}class DD extends lx{constructor(e){super(),this.firestore=e}convertBytes(e){return new Zw(new ll(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Qo.forKey(t,this.firestore,null)}}class gO{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new DD(e)}get(e){const t=Up(e);return this._delegate.get(t).then(r=>new Kw(this._firestore,new Hc(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const s=Up(e);return r?(dx("Transaction.set",r),this._delegate.set(s,t,r)):this._delegate.set(s,t),this}update(e,t,r,...s){const u=Up(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...s),this}delete(e){const t=Up(e);return this._delegate.delete(t),this}}class mO{constructor(e){this._delegate=e}set(e,t,r){const s=Up(e);return r?(dx("WriteBatch.set",r),this._delegate.set(s,t,r)):this._delegate.set(s,t),this}update(e,t,r,...s){const u=Up(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...s),this}delete(e){const t=Up(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Vp{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new qw(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Yw(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=Vp.INSTANCES;let s=r.get(e);s||(s=new WeakMap,r.set(e,s));let u=s.get(t);return u||(u=new Vp(e,new DD(e),t),s.set(t,u)),u}}Vp.INSTANCES=new WeakMap;class Qo{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new DD(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Re("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Qo(t,new Bn(t._delegate,r,new Ge(e)))}static forKey(e,t,r){return new Qo(t,new Bn(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new _y(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new _y(this.firestore,UN(this._delegate,e))}catch(t){throw fs(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,Et.m9)(e))instanceof Bn&&BN(this._delegate,e)}set(e,t){t=dx("DocumentReference.set",t);try{return t?uO(this._delegate,e,t):uO(this._delegate,e)}catch(r){throw fs(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?lO(this._delegate,e):lO(this._delegate,e,t,...r)}catch(s){throw fs(s,"updateDoc()","DocumentReference.update()")}}delete(){return function AF(n){return yy(Jt(n.firestore,Jn),[new ny(n._key,Qn.none())])}(this._delegate)}onSnapshot(...e){const t=yO(e),r=_O(e,s=>new Kw(this.firestore,new Hc(this.firestore._delegate,this._userDataWriter,s._key,s._document,s.metadata,this._delegate.converter)));return cO(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function bF(n){n=Jt(n,Bn);const e=Jt(n.firestore,Jn),t=Fr(e),r=new Lp(e);return function F1(n,e){const t=new Or;return n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return(r=(0,ye.Z)(function*(s,u,c){try{const m=yield function(v,b){const A=qe(v);return A.persistence.runTransaction("read document","readonly",M=>A.localDocuments.getDocument(M,b))}(s,u);m.isFoundDocument()?c.resolve(m):m.isNoDocument()?c.resolve(null):c.reject(new Re(ce.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(m){const v=hy(m,`Failed to get document '${u} from cache`);c.reject(v)}}),function(s,u,c){return r.apply(this,arguments)})(yield pD(n),e,t);var r})),t.promise}(t,n._key).then(s=>new Hc(e,r,n._key,s,new Fp(null!==s&&s.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function DF(n){n=Jt(n,Bn);const e=Jt(n.firestore,Jn);return RN(Fr(e),n._key,{source:"server"}).then(t=>cx(e,n,t))}(this._delegate):function IF(n){n=Jt(n,Bn);const e=Jt(n.firestore,Jn);return RN(Fr(e),n._key).then(t=>cx(e,n,t))}(this._delegate),t.then(r=>new Kw(this.firestore,new Hc(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new Qo(this.firestore,this._delegate.withConverter(e?Vp.getInstance(this.firestore,e):null))}}function fs(n,e,t){return n.message=n.message.replace(e,t),n}function yO(n){for(const e of n)if("object"==typeof e&&!hx(e))return e;return{}}function _O(n,e){var t,r;let s;return s=hx(n[0])?n[0]:hx(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:u=>{s.next&&s.next(e(u))},error:null===(t=s.error)||void 0===t?void 0:t.bind(s),complete:null===(r=s.complete)||void 0===r?void 0:r.bind(s)}}class Kw{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Qo(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return JN(this._delegate,e._delegate)}}class Yw extends Kw{data(e){const t=this._delegate.data(e);return function dS(n,e){n||Xe()}(void 0!==t),t}}class ps{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new DD(e)}where(e,t,r){try{return new ps(this.firestore,Ah(this._delegate,function dF(n,e,t){const r=e,s=ID("where",n);return new cF(s,r,t)}(e,t,r)))}catch(s){throw fs(s,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new ps(this.firestore,Ah(this._delegate,function fF(n,e="asc"){const t=e,r=ID("orderBy",n);return new hF(r,t)}(e,t)))}catch(r){throw fs(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new ps(this.firestore,Ah(this._delegate,function pF(n){return LN("limit",n),new eO("limit",n,"F")}(e)))}catch(t){throw fs(t,"limit()","Query.limit()")}}limitToLast(e){try{return new ps(this.firestore,Ah(this._delegate,function gF(n){return LN("limitToLast",n),new eO("limitToLast",n,"L")}(e)))}catch(t){throw fs(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new ps(this.firestore,Ah(this._delegate,function mF(...n){return new tO("startAt",n,!0)}(...e)))}catch(t){throw fs(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new ps(this.firestore,Ah(this._delegate,function yF(...n){return new tO("startAfter",n,!1)}(...e)))}catch(t){throw fs(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new ps(this.firestore,Ah(this._delegate,function _F(...n){return new nO("endBefore",n,!1)}(...e)))}catch(t){throw fs(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new ps(this.firestore,Ah(this._delegate,function vF(...n){return new nO("endAt",n,!0)}(...e)))}catch(t){throw fs(t,"endAt()","Query.endAt()")}}isEqual(e){return jN(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function TF(n){n=Jt(n,Ui);const e=Jt(n.firestore,Jn),t=Fr(e),r=new Lp(e);return function L1(n,e){const t=new Or;return n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return(r=(0,ye.Z)(function*(s,u,c){try{const m=yield oD(s,u,!0),v=new _N(u,m.Hi),b=v.ju(m.documents),A=v.applyChanges(b,!1);c.resolve(A.snapshot)}catch(m){const v=hy(m,`Failed to execute query '${u} against cache`);c.reject(v)}}),function(s,u,c){return r.apply(this,arguments)})(yield pD(n),e,t);var r})),t.promise}(t,n._query).then(s=>new Sh(e,r,n,s))}(this._delegate):"server"===e?.source?function SF(n){n=Jt(n,Ui);const e=Jt(n.firestore,Jn),t=Fr(e),r=new Lp(e);return NN(t,n._query,{source:"server"}).then(s=>new Sh(e,r,n,s))}(this._delegate):function CF(n){n=Jt(n,Ui);const e=Jt(n.firestore,Jn),t=Fr(e),r=new Lp(e);return XN(n._query),NN(t,n._query).then(s=>new Sh(e,r,n,s))}(this._delegate),t.then(r=>new fx(this.firestore,new Sh(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=yO(e),r=_O(e,s=>new fx(this.firestore,new Sh(this.firestore._delegate,this._userDataWriter,this._delegate,s._snapshot)));return cO(this._delegate,t,r)}withConverter(e){return new ps(this.firestore,this._delegate.withConverter(e?Vp.getInstance(this.firestore,e):null))}}class HF{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Yw(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class fx{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new ps(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Yw(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new HF(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new Yw(this._firestore,r))})}isEqual(e){return JN(this._delegate,e._delegate)}}class _y extends ps{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Qo(this.firestore,e):null}doc(e){try{return new Qo(this.firestore,void 0===e?mD(this._delegate):mD(this._delegate,e))}catch(t){throw fs(t,"doc()","CollectionReference.doc()")}}add(e){return function xF(n,e){const t=Jt(n.firestore,Jn),r=mD(n),s=bD(n.converter,e);return yy(t,[vD(kp(n.firestore),"addDoc",r._key,s,null!==n.converter,{}).toMutation(r._key,Qn.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new Qo(this.firestore,t))}isEqual(e){return BN(this._delegate,e._delegate)}withConverter(e){return new _y(this.firestore,this._delegate.withConverter(e?Vp.getInstance(this.firestore,e):null))}}function Up(n){return Jt(n,Bn)}class px{constructor(...e){this._delegate=new $c(...e)}static documentId(){return new px(Kn.keyField().canonicalString())}isEqual(e){return(e=(0,Et.m9)(e))instanceof $c&&this._delegate._internalPath.isEqual(e._internalPath)}}class Bp{constructor(e){this._delegate=e}static serverTimestamp(){const e=function kF(){return new ix("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Bp(e)}static delete(){const e=function OF(){return new Gw("deleteField")}();return e._methodName="FieldValue.delete",new Bp(e)}static arrayUnion(...e){const t=function PF(...n){return new iF("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new Bp(t)}static arrayRemove(...e){const t=function FF(...n){return new sF("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new Bp(t)}static increment(e){const t=function LF(n){return new oF("increment",n)}(e);return t._methodName="FieldValue.increment",new Bp(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const GF={Firestore:pO,GeoPoint:yD,Timestamp:gn,Blob:Zw,Transaction:gO,WriteBatch:mO,DocumentReference:Qo,DocumentSnapshot:Kw,Query:ps,QueryDocumentSnapshot:Yw,QuerySnapshot:fx,CollectionReference:_y,FieldPath:px,FieldValue:Bp,setLogLevel:function $F(n){!function Mb(n){qa.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function vO(n,e){return function WF(n,e=wT.z){return new fr.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function gx(n,e){return vO(n,e).pipe((0,pt.U)(t=>({payload:t,type:"query"})))}function CD(n,e){return gx(n,e).pipe(xg(void 0),SI(),(0,pt.U)(([t,r])=>{const s=r.payload.docChanges(),u=s.map(c=>({type:c.type,payload:c}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((c,m)=>{const v=s.find(A=>A.doc.ref.isEqual(c.ref)),b=t?.payload.docs.find(A=>A.ref.isEqual(c.ref));v&&JSON.stringify(v.doc.metadata)===JSON.stringify(c.metadata)||!v&&b&&JSON.stringify(b.metadata)===JSON.stringify(c.metadata)||u.push({type:"modified",payload:{oldIndex:m,newIndex:m,type:"modified",doc:c}})}),u}))}function wO(n,e,t){return CD(n,t).pipe(Bu((r,s)=>function KF(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function YF(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return mx(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return mx(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return mx(n,e.oldIndex,1)}return n}(n,r))}),n}(r,s.map(u=>u.payload),e),[]),function IM(n,e=Sg.y){return n=n??AI,(0,Zr.e)((t,r)=>{let s,u=!0;t.subscribe((0,pr.x)(r,c=>{const m=e(c);(u||!n(s,m))&&(u=!1,s=m,r.next(c))}))})}(),(0,pt.U)(r=>r.map(s=>({type:s.type,payload:s}))))}function mx(n,e,t,...r){const s=n.slice();return s.splice(e,t,...r),s}function EO(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}!function qF(n){(function zF(n,e){n.INTERNAL.registerComponent(new wc.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),s=t.getProvider("firestore").getImmediate();return e(r,s)},"PUBLIC").setServiceProps(Object.assign({},GF)))})(n,(e,t)=>new pO(e,t,new jF)),n.registerVersion("@firebase/firestore-compat","0.1.24")}(xI.Z);class IO{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=CD(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,pt.U)(r=>r.filter(s=>e.indexOf(s.type)>-1)))),t.pipe(xg(void 0),SI(),ki(([r,s])=>s.length>0||!r),(0,pt.U)(([r,s])=>s),Cn.iC)}auditTrail(e){return this.stateChanges(e).pipe(Bu((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=EO(e);return wO(this.query,t,this.afs.schedulers.outsideAngular).pipe(Cn.iC)}valueChanges(e={}){return gx(this.query,this.afs.schedulers.outsideAngular).pipe((0,pt.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),Cn.iC)}get(e){return(0,zt.D)(this.query.get(e)).pipe(Cn.iC)}add(e){return this.ref.add(e)}doc(e){return new bO(this.ref.doc(e),this.afs)}}class bO{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:s,query:u}=TO(r,t);return new IO(s,u,this.afs)}snapshotChanges(){return function ZF(n,e){return vO(n,e).pipe(xg(void 0),SI(),(0,pt.U)(([t,r])=>r.exists?t?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Cn.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,pt.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,zt.D)(this.ref.get(e)).pipe(Cn.iC)}}class QF{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?CD(this.query,this.afs.schedulers.outsideAngular).pipe((0,pt.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),ki(t=>t.length>0),Cn.iC):CD(this.query,this.afs.schedulers.outsideAngular).pipe(Cn.iC)}auditTrail(e){return this.stateChanges(e).pipe(Bu((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=EO(e);return wO(this.query,t,this.afs.schedulers.outsideAngular).pipe(Cn.iC)}valueChanges(e={}){return gx(this.query,this.afs.schedulers.outsideAngular).pipe((0,pt.U)(r=>r.payload.docs.map(s=>e.idField?Object.assign({[e.idField]:s.id},s.data()):s.data())),Cn.iC)}get(e){return(0,zt.D)(this.query.get(e)).pipe(Cn.iC)}}const DO=new f.OlP("angularfire2.enableFirestorePersistence"),CO=new f.OlP("angularfire2.firestore.persistenceSettings"),JF=new f.OlP("angularfire2.firestore.settings"),XF=new f.OlP("angularfire2.firestore.use-emulator");function TO(n,e=(t=>t)){return{query:e(n),ref:n}}let SO=(()=>{class n{constructor(t,r,s,u,c,m,v,b,A,M,L,G,J,Ie,Ce,Ze,ut){this.schedulers=v;const lt=(0,Xr.on)(t,m,r),tt=A;M&&lv(lt,m,L,J,Ie,Ce,G,Ze),[this.firestore,this.persistenceEnabled$]=(0,Xr.cc)(`${lt.name}.firestore`,"AngularFirestore",lt.name,()=>{const Tt=m.runOutsideAngular(()=>lt.firestore());if(u&&Tt.settings(u),tt&&Tt.useEmulator(...tt),s&&!hr(c)){const kt=()=>{try{return(0,zt.D)(Tt.enablePersistence(b||void 0).then(()=>!0,()=>!1))}catch(cr){return typeof console<"u"&&console.warn(cr),it(!1)}};return[Tt,m.runOutsideAngular(kt)]}return[Tt,it(!1)]},[u,tt,s])}collection(t,r){let s;s="string"==typeof t?this.firestore.collection(t):t;const{ref:u,query:c}=TO(s,r),m=this.schedulers.ngZone.run(()=>u);return new IO(m,c,this)}collectionGroup(t,r){const s=r||(c=>c),u=this.firestore.collectionGroup(t);return new QF(s(u),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const s=this.schedulers.ngZone.run(()=>r);return new bO(s,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Xr.Dh),f.LFG(Xr.xv,8),f.LFG(DO,8),f.LFG(JF,8),f.LFG(f.Lbi),f.LFG(f.R0b),f.LFG(Cn.HU),f.LFG(CO,8),f.LFG(XF,8),f.LFG(cm,8),f.LFG(bI,8),f.LFG(DI,8),f.LFG(ov,8),f.LFG(av,8),f.LFG(uv,8),f.LFG(CI,8),f.LFG(Yf,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),eL=(()=>{class n{constructor(){Dc.Z.registerVersion("angularfire",Cn.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:DO,useValue:!0},{provide:CO,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[SO]}),n})(),tL=(()=>{class n{constructor(t){this.firestore=t,this.collectionPath="/login_logs",this.loginLogsCollection=t.collection(this.collectionPath)}addDocument(t){return this.loginLogsCollection.add(t)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(SO))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),AO=(()=>{class n{constructor(t,r,s){this.auth=t,this.loginLogs=r,this.router=s,this._email="",this._password=""}ngOnInit(){}login(){this.auth.Login(this._email,this._password).then(t=>{this.loginLogs.addDocument(new VE(this._email,Date.now().toString()).getLiteralObjectRepresentation()),null!=t.user&&this.auth.SetCurrentUser(t.user),this.router.navigate(["/home"])}).catch(t=>{console.log(t)})}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(TI),f.Y36(tL),f.Y36(yn))},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-login-form"]],decls:16,vars:2,consts:[[1,"login-container","text-center"],[1,"form-signin","w-100","m-auto"],["src","../../../assets/rayo-espacial-logo-grande.png","alt","","width","200","height","200",1,"mb-4"],[1,"form-floating"],["type","email","name","email","id","floatingInput","placeholder","name@example.com",1,"form-control",3,"ngModel","ngModelChange"],["for","floatingInput"],["type","password","name","password","id","floatingPassword","placeholder","Password",1,"form-control",3,"ngModel","ngModelChange"],["for","floatingPassword"],[1,"w-100","btn","btn-lg","btn-primary","mt-4","submit-customization",3,"click"],[1,"mt-5","mb-3","text-muted"]],template:function(t,r){1&t&&(f.TgZ(0,"div",0)(1,"main",1)(2,"form"),f._UZ(3,"img",2),f.TgZ(4,"div",3)(5,"input",4),f.NdJ("ngModelChange",function(u){return r._email=u}),f.qZA(),f.TgZ(6,"label",5),f._uU(7,"Email"),f.qZA()(),f.TgZ(8,"div",3)(9,"input",6),f.NdJ("ngModelChange",function(u){return r._password=u}),f.qZA(),f.TgZ(10,"label",7),f._uU(11,"Password"),f.qZA()(),f.TgZ(12,"button",8),f.NdJ("click",function(){return r.login()}),f._uU(13,"Ingresar"),f.qZA(),f.TgZ(14,"p",9),f._uU(15,"\xa9 Ignacio Perez Artaso - 2022"),f.qZA()()()()),2&t&&(f.xp6(5),f.Q6J("ngModel",r._email),f.xp6(4),f.Q6J("ngModel",r._password))},dependencies:[gg,xu,Gh,zh,wd,Jl],styles:[".login-container[_ngcontent-%COMP%]{display:flex;align-items:center;padding-top:40px;padding-bottom:40px;background-color:#e6e0bb}.form-signin[_ngcontent-%COMP%]{max-width:330px;padding:15px}.form-signin[_ngcontent-%COMP%]   .form-floating[_ngcontent-%COMP%]:focus-within{z-index:2}.form-signin[_ngcontent-%COMP%]   input[type=email][_ngcontent-%COMP%]{margin-bottom:-1px;border-bottom-right-radius:0;border-bottom-left-radius:0}.form-signin[_ngcontent-%COMP%]   input[type=password][_ngcontent-%COMP%]{margin-bottom:10px;border-top-left-radius:0;border-top-right-radius:0}.submit-customization[_ngcontent-%COMP%]{background-color:#0d0f45!important;border:none!important}"]}),n})();const nL=[{path:"",component:AO},{path:"about-me",component:(()=>{class n{constructor(){this.reveal=[!1,!1]}ngOnInit(){}revealElements(t){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-about-me"]],decls:34,vars:0,consts:[[1,"container","mt-4"],[1,"row"],[1,"co-12","col-lg-3","first-reveal"],[1,"card"],["src","../../../assets/micara.webp","alt","Card image cap",1,"card-img-top","img-thumbnail","img-fluid","rounded-pill"],[1,"card-body"],[1,"card-title"],[1,"col","align-self-center","my-sm-4","second-reveal"],[1,"card-text"]],template:function(t,r){1&t&&(f.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),f._UZ(4,"img",4),f.TgZ(5,"div",5)(6,"h5",6),f._uU(7,"Ignacio Perez Artaso"),f.qZA(),f.TgZ(8,"ul")(9,"li"),f._uU(10," DNI: 37124127 "),f.qZA(),f.TgZ(11,"li"),f._uU(12," Legajo Nro. 106134 "),f.qZA(),f.TgZ(13,"li"),f._uU(14," Divisi\xf3n: 4to B "),f.qZA(),f.TgZ(15,"li"),f._uU(16," https://github.com/perez-artaso "),f.qZA(),f.TgZ(17,"li"),f._uU(18,"perez.artaso@gmail.com "),f.qZA()()()()(),f.TgZ(19,"div",7)(20,"div",3)(21,"h1"),f._uU(22,"RayoEspacial"),f.qZA(),f.TgZ(23,"div",5)(24,"h5",6),f._uU(25,"El Camino"),f.qZA(),f.TgZ(26,"p",8),f._uU(27," Mi juego consiste en un tablero en forma de grilla cuadrangular en el que se ense\xf1ar\xe1 al jugador una ruta que conecta una entrada con una salida. Tras unos instantes, se ocultar\xe1 este recorrido y el intr\xe9pido jugador deber\xe1 recordarlo, contando con tres intentos para recorrer correctamente el camino. "),f._UZ(28,"br")(29,"br"),f._uU(30," Cualquier equivocaci\xf3n en la ruta contar\xe1 como un intento fallido. Los recorridos se generar\xe1n proceduralmente al inicio de cada partida, por lo que el desaf\xedo se renovar\xe1 constantemente. "),f._UZ(31,"br")(32,"br"),f._uU(33," El tama\xf1o del tablero ser\xe1 personalizable. Mientras m\xe1s grande, m\xe1s puntos dar\xe1 la victoria. "),f.qZA()()()()()())},styles:["[_ngcontent-%COMP%]:root{--main-color: #E6E0BB;--main-contrast: #0D0F45}.card[_ngcontent-%COMP%]{background-color:#e6e0bb}h1[_ngcontent-%COMP%]{text-align:center}"]}),n})()},{path:"home",component:(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-home"]],decls:2,vars:0,template:function(t,r){1&t&&(f.TgZ(0,"p"),f._uU(1,"home works!"),f.qZA())}}),n})()},{path:"register",component:(()=>{class n{constructor(t,r){this.auth=t,this.router=r,this._email="",this._password="",this._passwordConfirmation=""}ngOnInit(){}Register(){this.auth.RegisterUser(this._email,this._password).then(t=>{this.router.navigate(["/home"])}).catch(t=>console.log(t))}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(TI),f.Y36(yn))},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-register"]],decls:20,vars:3,consts:[[1,"login-container","text-center"],[1,"form-signin","w-100","m-auto"],["src","../../../assets/sign-in-logo.png","alt","","width","200","height","200",1,"mb-4"],[1,"form-floating","mb-2"],["type","email","name","email","id","floatingInput","placeholder","name@example.com",1,"form-control",3,"ngModel","ngModelChange"],["for","floatingInput"],["type","password","name","password","id","floatingPassword","placeholder","Password",1,"form-control",3,"ngModel","ngModelChange"],["for","floatingPassword"],[1,"form-floating"],["type","password","name","passwordConfirmation","id","floatingPassword","placeholder","Password",1,"form-control",3,"ngModel","ngModelChange"],[1,"w-100","btn","btn-lg","btn-primary","mt-4","submit-customization",3,"click"],[1,"mt-5","mb-3","text-muted"]],template:function(t,r){1&t&&(f.TgZ(0,"div",0)(1,"main",1)(2,"form"),f._UZ(3,"img",2),f.TgZ(4,"div",3)(5,"input",4),f.NdJ("ngModelChange",function(u){return r._email=u}),f.qZA(),f.TgZ(6,"label",5),f._uU(7,"Email"),f.qZA()(),f.TgZ(8,"div",3)(9,"input",6),f.NdJ("ngModelChange",function(u){return r._password=u}),f.qZA(),f.TgZ(10,"label",7),f._uU(11,"Nueva Contrase\xf1a"),f.qZA()(),f.TgZ(12,"div",8)(13,"input",9),f.NdJ("ngModelChange",function(u){return r._passwordConfirmation=u}),f.qZA(),f.TgZ(14,"label",7),f._uU(15,"Confirme Su Contrase\xf1a"),f.qZA()(),f.TgZ(16,"button",10),f.NdJ("click",function(){return r.Register()}),f._uU(17,"Registrarse"),f.qZA(),f.TgZ(18,"p",11),f._uU(19,"\xa9 Ignacio Perez Artaso - 2022"),f.qZA()()()()),2&t&&(f.xp6(5),f.Q6J("ngModel",r._email),f.xp6(4),f.Q6J("ngModel",r._password),f.xp6(4),f.Q6J("ngModel",r._passwordConfirmation))},dependencies:[gg,xu,Gh,zh,wd,Jl],styles:[".login-container[_ngcontent-%COMP%]{display:flex;align-items:center;padding-top:40px;padding-bottom:40px;background-color:#e6e0bb}.form-signin[_ngcontent-%COMP%]{max-width:330px;padding:15px}.form-signin[_ngcontent-%COMP%]   .form-floating[_ngcontent-%COMP%]:focus-within{z-index:2}.form-signin[_ngcontent-%COMP%]   input[type=email][_ngcontent-%COMP%]{margin-bottom:-1px;border-bottom-right-radius:0;border-bottom-left-radius:0}.form-signin[_ngcontent-%COMP%]   input[type=password][_ngcontent-%COMP%]{margin-bottom:-1px;border-top-left-radius:0;border-top-right-radius:0}.submit-customization[_ngcontent-%COMP%]{background-color:#0d0f45!important;border:none!important}"]}),n})()},{path:"login",component:AO}];let rL=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[OE.forRoot(nL),OE]}),n})();function iL(n,e){if(1&n){const t=f.EpF();f.TgZ(0,"li",13)(1,"a",14),f._uU(2),f.qZA(),f.TgZ(3,"ul",15)(4,"li")(5,"a",16),f.NdJ("click",function(){f.CHM(t);const s=f.oxw();return f.KtG(s.LogOut())}),f._uU(6,"Salir"),f.qZA()()()()}if(2&n){const t=f.oxw();f.xp6(2),f.hij(" ",t.dropdownLabel," ")}}function sL(n,e){1&n&&(f.TgZ(0,"ul",15)(1,"li")(2,"a",18),f._uU(3,"Login"),f.qZA()(),f._UZ(4,"div",19),f.TgZ(5,"li")(6,"a",20),f._uU(7,"Registrate"),f.qZA()()())}function oL(n,e){if(1&n&&(f.TgZ(0,"li",13)(1,"a",14),f._uU(2),f.qZA(),f.YNc(3,sL,8,0,"ul",17),f.qZA()),2&n){const t=f.oxw();f.xp6(2),f.hij(" ",t.dropdownLabel," "),f.xp6(1),f.Q6J("ngIf",null==t.user)}}let aL=(()=>{class n{constructor(t,r){this.auth=t,this.router=r,this.dropdownLabel="Qui\xe9n Sos",this.user=null}ngOnInit(){this.auth.UserActivity().subscribe(t=>{this.user=t,this.dropdownLabel=t&&null!=t.email?t.email:"Qui\xe9n Sos"})}LogOut(){this.auth.LogOut(),this.router.navigate(["/"])}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(TI),f.Y36(yn))},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-navbar"]],decls:17,vars:2,consts:[[1,"navbar","navbar-expand-lg","navbar-dark","bg-primary","navbar-customization"],[1,"container-fluid"],["routerLink","/",1,"navbar-brand"],["src","../../../assets/rocket-only.png","width","50","height","50","alt","Bootstrap","loading","lazy",1,"d-inline-block","align-top"],["type","button","data-bs-toggle","collapse","data-bs-target","#navbarSupportedContent2","aria-controls","navbarSupportedContent2","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["id","navbarSupportedContent2",1,"collapse","navbar-collapse"],[1,"navbar-nav","me-auto","mb-2","mb-lg-0"],[1,"nav-item"],["aria-current","page","routerLink","/",1,"nav-link","active","nav-link-customization"],["routerLink","/about-me",1,"nav-link","nav-link-customization"],["class","nav-item dropdown",4,"ngIf","ngIfElse"],["noUser",""],[1,"nav-item","dropdown"],["role","button","data-bs-toggle","dropdown","aria-expanded","false",1,"nav-link","dropdown-toggle","nav-link-customization"],[1,"dropdown-menu"],[1,"dropdown-item","nav-link-customization",3,"click"],["class","dropdown-menu",4,"ngIf"],["routerLink","/login",1,"dropdown-item","nav-link-customization"],[1,"dropdown-divider"],["routerLink","/register",1,"dropdown-item","nav-link-customization"]],template:function(t,r){if(1&t&&(f.TgZ(0,"nav",0)(1,"div",1)(2,"a",2),f._UZ(3,"img",3),f.qZA(),f.TgZ(4,"button",4),f._UZ(5,"span",5),f.qZA(),f.TgZ(6,"div",6)(7,"ul",7)(8,"li",8)(9,"a",9),f._uU(10,"Inicio"),f.qZA()(),f.TgZ(11,"li",8)(12,"a",10),f._uU(13,"Qui\xe9n Soy"),f.qZA()(),f.YNc(14,iL,7,1,"li",11),f.YNc(15,oL,4,2,"ng-template",null,12,f.W1O),f.qZA()()()()),2&t){const s=f.MAs(16);f.xp6(14),f.Q6J("ngIf",null!=r.user)("ngIfElse",s)}},dependencies:[tr,Ga],styles:[".navbar-customization[_ngcontent-%COMP%]{background-color:#e6e0bb!important;border-bottom:.1rem solid #0D0F45!important}.nav-link-customization[_ngcontent-%COMP%]{color:#0d0f45}.active[_ngcontent-%COMP%]{color:#0d0f45!important;font-family:orbitron-black}.navbar-toggler[_ngcontent-%COMP%]{background-color:#0d0f45}"]}),n})(),uL=(()=>{class n{constructor(){this.title="sala-juegos-2022"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-root"]],decls:2,vars:0,template:function(t,r){1&t&&f._UZ(0,"app-navbar")(1,"router-outlet")},dependencies:[Cf,aL]}),n})();const xO_firebaseConfig={apiKey:"AIzaSyD0FF-k7oz1RvH525aoPPdGGfo8Y7q_9Rw",authDomain:"salajuegos2022.firebaseapp.com",databaseURL:"https://salajuegos2022-default-rtdb.firebaseio.com",projectId:"salajuegos2022",storageBucket:"salajuegos2022.appspot.com",messagingSenderId:"15910949459",appId:"1:15910949459:web:cdef48d9faa371ab90aca6"},MO="firebasestorage.googleapis.com",RO="storageBucket";class gr extends Et.ZR{constructor(e,t){super(yx(e),`Firebase Storage: ${t} (${yx(e)})`),this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,gr.prototype)}_codeEquals(e){return yx(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}function yx(n){return"storage/"+n}function _x(){return new gr("unknown","An unknown error occurred, please check the error payload for server response.")}function NO(){return new gr("canceled","User canceled the upload/download.")}function OO(){return new gr("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function vy(n){return new gr("invalid-argument",n)}function kO(){return new gr("app-deleted","The Firebase app was deleted.")}function PO(n){return new gr("invalid-root-operation","The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Qw(n,e){return new gr("invalid-format","String does not match format '"+n+"': "+e)}function Jw(n){throw new gr("internal-error","Internal error: "+n)}class Bi{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=Bi.makeFromUrl(e,t)}catch{return new Bi(e,"")}if(""===r.path)return r;throw function vL(n){return new gr("invalid-default-bucket","Invalid default bucket '"+n+"'.")}(e)}static makeFromUrl(e,t){let r=null;const s="([A-Za-z0-9.\\-_]+)",m=new RegExp("^gs://"+s+"(/(.*))?$","i");function b(tt){tt.path_=decodeURIComponent(tt.path)}const M=t.replace(/[.]/g,"\\."),lt=[{regex:m,indices:{bucket:1,path:3},postModify:function u(tt){"/"===tt.path.charAt(tt.path.length-1)&&(tt.path_=tt.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${M}/v[A-Za-z0-9_]+/b/${s}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:b},{regex:new RegExp(`^https?://${t===MO?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${s}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:b}];for(let tt=0;tt<lt.length;tt++){const Tt=lt[tt],kt=Tt.regex.exec(e);if(kt){let Ya=kt[Tt.indices.path];Ya||(Ya=""),r=new Bi(kt[Tt.indices.bucket],Ya),Tt.postModify(r);break}}if(null==r)throw function _L(n){return new gr("invalid-url","Invalid URL '"+n+"'.")}(e);return r}}class bL{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function TD(n){return"string"==typeof n||n instanceof String}function FO(n){return vx()&&n instanceof Blob}function vx(){return typeof Blob<"u"}function wx(n,e,t,r){if(r<e)throw vy(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw vy(`Invalid value for '${n}'. Expected ${t} or less.`)}function Gc(n,e,t){let r=e;return null==t&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function LO(n){const e=encodeURIComponent;let t="?";for(const r in n)n.hasOwnProperty(r)&&(t=t+(e(r)+"=")+e(n[r])+"&");return t=t.slice(0,-1),t}var Mh=(()=>(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"}(Mh||(Mh={})),Mh))();class xL{constructor(e,t,r,s,u,c,m,v,b,A,M){this.url_=e,this.method_=t,this.headers_=r,this.body_=s,this.successCodes_=u,this.additionalRetryCodes_=c,this.callback_=m,this.errorCallback_=v,this.timeout_=b,this.progressCallback_=A,this.connectionFactory_=M,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((L,G)=>{this.resolve_=L,this.reject_=G,this.start_()})}start_(){const t=(r,s)=>{const u=this.resolve_,c=this.reject_,m=s.connection;if(s.wasSuccessCode)try{const v=this.callback_(m,m.getResponse());!function TL(n){return void 0!==n}(v)?u():u(v)}catch(v){c(v)}else if(null!==m){const v=_x();v.serverResponse=m.getErrorText(),c(this.errorCallback_?this.errorCallback_(m,v):v)}else c(s.canceled?this.appDelete_?kO():NO():function yL(){return new gr("retry-limit-exceeded","Max retry time for operation exceeded, please try again.")}())};this.canceled_?t(0,new SD(!1,null,!0)):this.backoffId_=function DL(n,e,t){let r=1,s=null,u=null,c=!1,m=0;function v(){return 2===m}let b=!1;function A(...Ce){b||(b=!0,e.apply(null,Ce))}function M(Ce){s=setTimeout(()=>{s=null,n(G,v())},Ce)}function L(){u&&clearTimeout(u)}function G(Ce,...Ze){if(b)return void L();if(Ce)return L(),void A.call(null,Ce,...Ze);if(v()||c)return L(),void A.call(null,Ce,...Ze);let lt;r<64&&(r*=2),1===m?(m=2,lt=0):lt=1e3*(r+Math.random()),M(lt)}let J=!1;function Ie(Ce){J||(J=!0,L(),!b&&(null!==s?(Ce||(m=2),clearTimeout(s),M(0)):Ce||(m=1)))}return M(0),u=setTimeout(()=>{c=!0,Ie(!0)},t),Ie}((r,s)=>{if(s)return void r(!1,new SD(!1,null,!0));const u=this.connectionFactory_();this.pendingConnection_=u;const c=m=>{null!==this.progressCallback_&&this.progressCallback_(m.loaded,m.lengthComputable?m.total:-1)};null!==this.progressCallback_&&u.addUploadProgressListener(c),u.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&u.removeUploadProgressListener(c),this.pendingConnection_=null;const m=u.getErrorCode()===Mh.NO_ERROR,v=u.getStatus();if(!m||this.isRetryStatusCode_(v)){const A=u.getErrorCode()===Mh.ABORT;return void r(!1,new SD(!1,null,A))}const b=-1!==this.successCodes_.indexOf(v);r(!0,new SD(b,u))})},t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function CL(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}isRetryStatusCode_(e){const t=e>=500&&e<600,s=-1!==[408,429].indexOf(e),u=-1!==this.additionalRetryCodes_.indexOf(e);return t||s||u}}class SD{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function FL(...n){const e=function PL(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}();if(void 0!==e){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}if(vx())return new Blob(n);throw new gr("unsupported-environment","This browser doesn't seem to support creating Blobs")}const vo={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Ex{constructor(e,t){this.data=e,this.contentType=t||null}}function Ix(n,e){switch(n){case vo.RAW:return new Ex(VO(e));case vo.BASE64:case vo.BASE64URL:return new Ex(UO(n,e));case vo.DATA_URL:return new Ex(function BL(n){const e=new BO(n);return e.base64?UO(vo.BASE64,e.rest):function UL(n){let e;try{e=decodeURIComponent(n)}catch{throw Qw(vo.DATA_URL,"Malformed data URL.")}return VO(e)}(e.rest)}(e),function jL(n){return new BO(n).contentType}(e))}throw _x()}function VO(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);r<=127?e.push(r):r<=2047?e.push(192|r>>6,128|63&r):55296==(64512&r)?t<n.length-1&&56320==(64512&n.charCodeAt(t+1))?(r=65536|(1023&r)<<10|1023&n.charCodeAt(++t),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):e.push(239,191,189):56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function UO(n,e){switch(n){case vo.BASE64:{const s=-1!==e.indexOf("-"),u=-1!==e.indexOf("_");if(s||u)throw Qw(n,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case vo.BASE64URL:{const s=-1!==e.indexOf("+"),u=-1!==e.indexOf("/");if(s||u)throw Qw(n,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=function VL(n){return atob(n)}(e)}catch{throw Qw(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let s=0;s<t.length;s++)r[s]=t.charCodeAt(s);return r}class BO{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw Qw(vo.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;null!=r&&(this.base64=function $L(n,e){return n.length>=e.length&&n.substring(n.length-e.length)===e}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}class cl{constructor(e,t){let r=0,s="";FO(e)?(this.data_=e,r=e.size,s=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=s}size(){return this.size_}type(){return this.type_}slice(e,t){if(FO(this.data_)){const s=function LL(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}(this.data_,e,t);return null===s?null:new cl(s)}{const r=new Uint8Array(this.data_.buffer,e,t-e);return new cl(r,!0)}}static getBlob(...e){if(vx()){const t=e.map(r=>r instanceof cl?r.data_:r);return new cl(FL.apply(null,t))}{const t=e.map(c=>TD(c)?Ix(vo.RAW,c).data:c.data_);let r=0;t.forEach(c=>{r+=c.byteLength});const s=new Uint8Array(r);let u=0;return t.forEach(c=>{for(let m=0;m<c.length;m++)s[u++]=c[m]}),new cl(s,!0)}}uploadData(){return this.data_}}function bx(n){let e;try{e=JSON.parse(n)}catch{return null}return function AL(n){return"object"==typeof n&&!Array.isArray(n)}(e)?e:null}function jO(n){const e=n.lastIndexOf("/",n.length-2);return-1===e?n:n.slice(e+1)}function zL(n,e){return e}class gs{constructor(e,t,r,s){this.server=e,this.local=t||e,this.writable=!!r,this.xform=s||zL}}let AD=null;function Xw(){if(AD)return AD;const n=[];n.push(new gs("bucket")),n.push(new gs("generation")),n.push(new gs("metageneration")),n.push(new gs("name","fullPath",!0));const t=new gs("name");t.xform=function e(u,c){return function qL(n){return!TD(n)||n.length<2?n:jO(n)}(c)},n.push(t);const s=new gs("size");return s.xform=function r(u,c){return void 0!==c?Number(c):c},n.push(s),n.push(new gs("timeCreated")),n.push(new gs("updated")),n.push(new gs("md5Hash",null,!0)),n.push(new gs("cacheControl",null,!0)),n.push(new gs("contentDisposition",null,!0)),n.push(new gs("contentEncoding",null,!0)),n.push(new gs("contentLanguage",null,!0)),n.push(new gs("contentType",null,!0)),n.push(new gs("metadata","customMetadata",!0)),AD=n,AD}function $O(n,e,t){const r=bx(e);return null===r?null:function ZL(n,e,t){const r={type:"file"},s=t.length;for(let u=0;u<s;u++){const c=t[u];r[c.local]=c.xform(r,e[c.server])}return function WL(n,e){Object.defineProperty(n,"ref",{get:function t(){const u=new Bi(n.bucket,n.fullPath);return e._makeStorageReference(u)}})}(r,n),r}(n,r,t)}function Dx(n,e){const t={},r=e.length;for(let s=0;s<r;s++){const u=e[s];u.writable&&(t[u.server]=n[u.local])}return JSON.stringify(t)}const HO="prefixes";class dl{constructor(e,t,r,s){this.url=e,this.method=t,this.handler=r,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function hl(n){if(!n)throw _x()}function xD(n,e){return function t(r,s){const u=$O(n,s,e);return hl(null!==u),u}}function wy(n){return function e(t,r){let s;return s=401===t.getStatus()?t.getErrorText().includes("Firebase App Check token is invalid")?function gL(){return new gr("unauthorized-app","This app does not have permission to access Firebase Storage on this project.")}():function pL(){return new gr("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===t.getStatus()?function fL(n){return new gr("quota-exceeded","Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(n.bucket):403===t.getStatus()?function mL(n){return new gr("unauthorized","User does not have permission to access '"+n+"'.")}(n.path):r,s.serverResponse=r.serverResponse,s}}function e0(n){const e=wy(n);return function t(r,s){let u=e(r,s);return 404===r.getStatus()&&(u=function hL(n){return new gr("object-not-found","Object '"+n+"' does not exist.")}(n.path)),u.serverResponse=s.serverResponse,u}}function zO(n,e,t){const s=Gc(e.fullServerUrl(),n.host,n._protocol),c=n.maxOperationRetryTime,m=new dl(s,"GET",xD(n,t),c);return m.errorHandler=e0(e),m}function eV(n,e,t,r,s){const u={};u.prefix=e.isRoot?"":e.path+"/",t&&t.length>0&&(u.delimiter=t),r&&(u.pageToken=r),s&&(u.maxResults=s);const m=Gc(e.bucketOnlyServerUrl(),n.host,n._protocol),b=n.maxOperationRetryTime,A=new dl(m,"GET",function JL(n,e){return function t(r,s){const u=function QL(n,e,t){const r=bx(t);return null===r?null:function YL(n,e,t){const r={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[HO])for(const s of t[HO]){const u=s.replace(/\/$/,""),c=n._makeStorageReference(new Bi(e,u));r.prefixes.push(c)}if(t.items)for(const s of t.items){const u=n._makeStorageReference(new Bi(e,s.name));r.items.push(u)}return r}(n,e,r)}(n,e,s);return hl(null!==u),u}}(n,e.bucket),b);return A.urlParams=u,A.errorHandler=wy(e),A}function WO(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=function iV(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}(null,e)),r}class MD{constructor(e,t,r,s){this.current=e,this.total=t,this.finalized=!!r,this.metadata=s||null}}function Cx(n,e){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch{hl(!1)}return hl(!!t&&-1!==(e||["active"]).indexOf(t)),t}const uV={STATE_CHANGED:"state_changed"},ms={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function Tx(n){switch(n){case"running":case"pausing":case"canceling":return ms.RUNNING;case"paused":return ms.PAUSED;case"success":return ms.SUCCESS;case"canceled":return ms.CANCELED;default:return ms.ERROR}}class lV{constructor(e,t,r){if(function SL(n){return"function"==typeof n}(e)||null!=t||null!=r)this.next=e,this.error=t??void 0,this.complete=r??void 0;else{const u=e;this.next=u.next,this.error=u.error,this.complete=u.complete}}}function Ey(n){return(...e)=>{Promise.resolve().then(()=>n(...e))}}class dV extends class cV{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Mh.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Mh.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Mh.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,s){if(this.sent_)throw Jw("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==s)for(const u in s)s.hasOwnProperty(u)&&this.xhr_.setRequestHeader(u,s[u].toString());return void 0!==r?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Jw("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Jw("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Jw("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Jw("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}{initXhr(){this.xhr_.responseType="text"}}function Ka(){return new dV}class QO{constructor(e,t,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=r,this._mappings=Xw(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=s=>{this._request=void 0,this._chunkMultiplier=1,s._codeEquals("canceled")?(this._needToFetchStatus=!0,this.completeTransitions_()):(this._error=s,this._transition("error"))},this._metadataErrorHandler=s=>{this._request=void 0,s._codeEquals("canceled")?this.completeTransitions_():(this._error=s,this._transition("error"))},this._promise=new Promise((s,u)=>{this._resolve=s,this._reject=u,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,r])=>{switch(this._state){case"running":e(t,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((e,t)=>{const r=function sV(n,e,t,r,s){const u=e.bucketOnlyServerUrl(),c=WO(e,r,s),m={name:c.fullPath},v=Gc(u,n.host,n._protocol),A={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":c.contentType,"Content-Type":"application/json; charset=utf-8"},M=Dx(c,t),J=new dl(v,"POST",function G(Ie){let Ce;Cx(Ie);try{Ce=Ie.getResponseHeader("X-Goog-Upload-URL")}catch{hl(!1)}return hl(TD(Ce)),Ce},n.maxUploadRetryTime);return J.urlParams=m,J.headers=A,J.body=M,J.errorHandler=wy(e),J}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),s=this._ref.storage._makeRequest(r,Ka,e,t);this._request=s,s.getPromise().then(u=>{this._request=void 0,this._uploadUrl=u,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,r)=>{const s=function oV(n,e,t,r){const v=new dl(t,"POST",function u(b){const A=Cx(b,["active","final"]);let M=null;try{M=b.getResponseHeader("X-Goog-Upload-Size-Received")}catch{hl(!1)}M||hl(!1);const L=Number(M);return hl(!isNaN(L)),new MD(L,r.size(),"final"===A)},n.maxUploadRetryTime);return v.headers={"X-Goog-Upload-Command":"query"},v.errorHandler=wy(e),v}(this._ref.storage,this._ref._location,e,this._blob),u=this._ref.storage._makeRequest(s,Ka,t,r);this._request=u,u.getPromise().then(c=>{this._request=void 0,this._updateProgress(c.current),this._needToFetchStatus=!1,c.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=262144*this._chunkMultiplier,t=new MD(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((s,u)=>{let c;try{c=function aV(n,e,t,r,s,u,c,m){const v=new MD(0,0);if(c?(v.current=c.current,v.total=c.total):(v.current=0,v.total=r.size()),r.size()!==v.total)throw function EL(){return new gr("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.")}();const b=v.total-v.current;let A=b;s>0&&(A=Math.min(A,s));const M=v.current,J={"X-Goog-Upload-Command":A===b?"upload, finalize":"upload","X-Goog-Upload-Offset":`${v.current}`},Ie=r.slice(M,M+A);if(null===Ie)throw OO();const lt=new dl(t,"POST",function Ce(tt,Tt){const kt=Cx(tt,["active","final"]),cr=v.current+A,Ya=r.size();let xx;return xx="final"===kt?xD(e,u)(tt,Tt):null,new MD(cr,Ya,"final"===kt,xx)},e.maxUploadRetryTime);return lt.headers=J,lt.body=Ie.uploadData(),lt.progressCallback=m||null,lt.errorHandler=wy(n),lt}(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(v){return this._error=v,void this._transition("error")}const m=this._ref.storage._makeRequest(c,Ka,s,u);this._request=m,m.getPromise().then(v=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(v.current),v.finalized?(this._metadata=v.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const r=zO(this._ref.storage,this._ref._location,this._mappings),s=this._ref.storage._makeRequest(r,Ka,e,t);this._request=s,s.getPromise().then(u=>{this._request=void 0,this._metadata=u,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const r=function ZO(n,e,t,r,s){const u=e.bucketOnlyServerUrl(),c={"X-Goog-Upload-Protocol":"multipart"},v=function m(){let lt="";for(let tt=0;tt<2;tt++)lt+=Math.random().toString().slice(2);return lt}();c["Content-Type"]="multipart/related; boundary="+v;const b=WO(e,r,s),A=Dx(b,t),G=cl.getBlob("--"+v+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+A+"\r\n--"+v+"\r\nContent-Type: "+b.contentType+"\r\n\r\n",r,"\r\n--"+v+"--");if(null===G)throw OO();const J={name:b.fullPath},Ie=Gc(u,n.host,n._protocol),Ze=n.maxUploadRetryTime,ut=new dl(Ie,"POST",xD(n,t),Ze);return ut.urlParams=J,ut.headers=c,ut.body=G.uploadData(),ut.errorHandler=wy(e),ut}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),s=this._ref.storage._makeRequest(r,Ka,e,t);this._request=s,s.getPromise().then(u=>{this._request=void 0,this._metadata=u,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request&&this._request.cancel();break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=NO(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=Tx(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,r,s){const u=new lV(t||void 0,r||void 0,s||void 0);return this._addObserver(u),()=>{this._removeObserver(u)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(Tx(this._state)){case ms.SUCCESS:Ey(this._resolve.bind(null,this.snapshot))();break;case ms.CANCELED:case ms.ERROR:Ey(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(Tx(this._state)){case ms.RUNNING:case ms.PAUSED:e.next&&Ey(e.next.bind(e,this.snapshot))();break;case ms.SUCCESS:e.complete&&Ey(e.complete.bind(e))();break;default:e.error&&Ey(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class jp{constructor(e,t){this._service=e,this._location=t instanceof Bi?t:Bi.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new jp(e,t)}get root(){const e=new Bi(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return jO(this._location.path)}get storage(){return this._service}get parent(){const e=function HL(n){if(0===n.length)return null;const e=n.lastIndexOf("/");return-1===e?"":n.slice(0,e)}(this._location.path);if(null===e)return null;const t=new Bi(this._location.bucket,e);return new jp(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw PO(e)}}function XO(n,e,t){return Sx.apply(this,arguments)}function Sx(){return Sx=(0,ye.Z)(function*(n,e,t){const s=yield ek(n,{pageToken:t});e.prefixes.push(...s.prefixes),e.items.push(...s.items),null!=s.nextPageToken&&(yield XO(n,e,s.nextPageToken))}),Sx.apply(this,arguments)}function ek(n,e){null!=e&&"number"==typeof e.maxResults&&wx("options.maxResults",1,1e3,e.maxResults);const t=e||{},r=eV(n.storage,n._location,"/",t.pageToken,t.maxResults);return n.storage.makeRequestWithTokens(r,Ka)}function bV(n){n._throwIfRoot("getDownloadURL");const e=function tV(n,e,t){const s=Gc(e.fullServerUrl(),n.host,n._protocol),c=n.maxOperationRetryTime,m=new dl(s,"GET",function XL(n,e){return function t(r,s){const u=$O(n,s,e);return hl(null!==u),function KL(n,e,t,r){const s=bx(e);if(null===s||!TD(s.downloadTokens))return null;const u=s.downloadTokens;if(0===u.length)return null;const c=encodeURIComponent;return u.split(",").map(b=>{const M=n.fullPath;return Gc("/b/"+c(n.bucket)+"/o/"+c(M),t,r)+LO({alt:"media",token:b})})[0]}(u,s,n.host,n._protocol)}}(n,t),c);return m.errorHandler=e0(e),m}(n.storage,n._location,Xw());return n.storage.makeRequestWithTokens(e,Ka).then(t=>{if(null===t)throw function IL(){return new gr("no-download-url","The given file does not have any download URLs.")}();return t})}function tk(n,e){const t=function GL(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return 0===n.length?t:n+"/"+t}(n._location.path,e),r=new Bi(n._location.bucket,t);return new jp(n.storage,r)}function nk(n,e){if(n instanceof Ax){const t=n;if(null==t._bucket)throw function wL(){return new gr("no-default-bucket","No default bucket found. Did you set the '"+RO+"' property when initializing the app?")}();const r=new jp(t,t._bucket);return null!=e?nk(r,e):r}return void 0!==e?tk(n,e):n}function SV(n,e){if(e&&function CV(n){return/^[A-Za-z]+:\/\//.test(n)}(e)){if(n instanceof Ax)return function TV(n,e){return new jp(n,e)}(n,e);throw vy("To use ref(service, url), the first argument must be a Storage instance.")}return nk(n,e)}function rk(n,e){const t=e?.[RO];return null==t?null:Bi.makeFromBucketSpec(t,n)}class Ax{constructor(e,t,r,s,u){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=s,this._firebaseVersion=u,this._bucket=null,this._host=MO,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=s?Bi.makeFromBucketSpec(s,this._host):rk(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?Bi.makeFromBucketSpec(this._url,e):rk(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){wx("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){wx("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,ye.Z)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const t=e._authProvider.getImmediate({optional:!0});if(t){const r=yield t.getToken();if(null!==r)return r.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,ye.Z)(function*(){const t=e._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new jp(this,e)}_makeRequest(e,t,r,s){if(this._deleted)return new bL(kO());{const u=function kL(n,e,t,r,s,u){const c=LO(n.urlParams),m=n.url+c,v=Object.assign({},n.headers);return function NL(n,e){e&&(n["X-Firebase-GMPID"]=e)}(v,e),function ML(n,e){null!==e&&e.length>0&&(n.Authorization="Firebase "+e)}(v,t),function RL(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}(v,u),function OL(n,e){null!==e&&(n["X-Firebase-AppCheck"]=e)}(v,r),new xL(m,n.method,v,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,s)}(e,this._appId,r,s,t,this._firebaseVersion);return this._requests.add(u),u.getPromise().then(()=>this._requests.delete(u),()=>this._requests.delete(u)),u}}makeRequestWithTokens(e,t){var r=this;return(0,ye.Z)(function*(){const[s,u]=yield Promise.all([r._getAuthToken(),r._getAppCheckToken()]);return r._makeRequest(e,t,s,u).getPromise()})()}}const ik="@firebase/storage";function ak(n,e){return SV(n=(0,Et.m9)(n),e)}function VV(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),s=n.getProvider("app-check-internal");return new Ax(t,r,s,e,Vs.SDK_VERSION)}!function UV(){(0,Vs._registerComponent)(new wc.wA("storage",VV,"PUBLIC").setMultipleInstances(!0)),(0,Vs.registerVersion)(ik,"0.9.9",""),(0,Vs.registerVersion)(ik,"0.9.9","esm2017")}();class RD{constructor(e,t,r){this._delegate=e,this.task=t,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class uk{constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new RD(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then(r=>{if(e)return e(new RD(r,this,this._ref))},t)}on(e,t,r,s){let u;return t&&(u="function"==typeof t?c=>t(new RD(c,this,this._ref)):{next:t.next?c=>t.next(new RD(c,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,u,r||void 0,s||void 0)}}class lk{constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map(e=>new zc(e,this._service))}get items(){return this._delegate.items.map(e=>new zc(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class zc{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const t=function FV(n,e){return tk(n,e)}(this._delegate,e);return new zc(t,this.storage)}get root(){return new zc(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return null==e?null:new zc(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new uk(function xV(n,e,t){return function _V(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new QO(n,new cl(e),t)}(n=(0,Et.m9)(n),e,t)}(this._delegate,e,t),this)}putString(e,t=vo.RAW,r){this._throwIfRoot("putString");const s=Ix(t,e),u=Object.assign({},r);return null==u.contentType&&null!=s.contentType&&(u.contentType=s.contentType),new uk(new QO(this._delegate,new cl(s.data,!0),u),this)}listAll(){return function OV(n){return function wV(n){const e={prefixes:[],items:[]};return XO(n,e).then(()=>e)}(n=(0,Et.m9)(n))}(this._delegate).then(e=>new lk(e,this.storage))}list(e){return function NV(n,e){return ek(n=(0,Et.m9)(n),e)}(this._delegate,e||void 0).then(t=>new lk(t,this.storage))}getMetadata(){return function MV(n){return function EV(n){n._throwIfRoot("getMetadata");const e=zO(n.storage,n._location,Xw());return n.storage.makeRequestWithTokens(e,Ka)}(n=(0,Et.m9)(n))}(this._delegate)}updateMetadata(e){return function RV(n,e){return function IV(n,e){n._throwIfRoot("updateMetadata");const t=function nV(n,e,t,r){const u=Gc(e.fullServerUrl(),n.host,n._protocol),m=Dx(t,r),b=n.maxOperationRetryTime,A=new dl(u,"PATCH",xD(n,r),b);return A.headers={"Content-Type":"application/json; charset=utf-8"},A.body=m,A.errorHandler=e0(e),A}(n.storage,n._location,e,Xw());return n.storage.makeRequestWithTokens(t,Ka)}(n=(0,Et.m9)(n),e)}(this._delegate,e)}getDownloadURL(){return function kV(n){return bV(n=(0,Et.m9)(n))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function PV(n){return function DV(n){n._throwIfRoot("deleteObject");const e=function rV(n,e){const r=Gc(e.fullServerUrl(),n.host,n._protocol),m=new dl(r,"DELETE",function c(v,b){},n.maxOperationRetryTime);return m.successCodes=[200,204],m.errorHandler=e0(e),m}(n.storage,n._location);return n.storage.makeRequestWithTokens(e,Ka)}(n=(0,Et.m9)(n))}(this._delegate)}_throwIfRoot(e){if(""===this._delegate._location.path)throw PO(e)}}class ck{constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(dk(e))throw vy("ref() expected a child path but got a URL, use refFromURL instead.");return new zc(ak(this._delegate,e),this)}refFromURL(e){if(!dk(e))throw vy("refFromURL() expected a full URL but got a child path, use ref() instead.");try{Bi.makeFromUrl(e,this._delegate.host)}catch{throw vy("refFromUrl() expected a valid full URL but got an invalid one.")}return new zc(ak(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t,r={}){!function LV(n,e,t,r={}){!function AV(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:s}=r;s&&(n._overrideAuthToken="string"==typeof s?s:(0,Et.Sg)(s,n.app.options.projectId))}(n,e,t,r)}(this._delegate,e,t,r)}}function dk(n){return/^[A-Za-z]+:\/\//.test(n)}function HV(n,{instanceIdentifier:e}){const t=n.getProvider("app-compat").getImmediate(),r=n.getProvider("storage").getImmediate({identifier:e});return new ck(t,r)}function hk(n){const e=function zV(n){return new fr.y(e=>{const t=c=>e.next(c);t(n.snapshot);const u=n.on("state_changed",t);return n.then(c=>{t(c),e.complete()},c=>{t(n.snapshot),(c=>{e.error(c)})(c)}),function(){u()}}).pipe(function lL(n,e=wT.z){return(0,Zr.e)((t,r)=>{let s=null,u=null,c=null;const m=()=>{if(s){s.unsubscribe(),s=null;const b=u;u=null,r.next(b)}};function v(){const b=c+n,A=e.now();if(A<b)return s=this.schedule(void 0,b-A),void r.add(s);m()}t.subscribe((0,pr.x)(r,b=>{u=b,c=e.now(),s||(s=e.schedule(v,n),r.add(s))},()=>{m(),r.complete()},void 0,()=>{u=s=null}))})}(0))}(n);return{task:n,then:n.then.bind(n),catch:n.catch.bind(n),pause:n.pause.bind(n),cancel:n.cancel.bind(n),resume:n.resume.bind(n),snapshotChanges:()=>e,percentageChanges:()=>e.pipe((0,pt.U)(t=>t.bytesTransferred/t.totalBytes*100))}}function ND(n){return{getDownloadURL:()=>it(void 0).pipe(Cn.fc,Zn(()=>n.getDownloadURL()),Cn.iC),getMetadata:()=>it(void 0).pipe(Cn.fc,Zn(()=>n.getMetadata()),Cn.iC),delete:()=>(0,zt.D)(n.delete()),child:e=>ND(n.child(e)),updateMetadata:e=>(0,zt.D)(n.updateMetadata(e)),put:(e,t)=>hk(n.put(e,t)),putString:(e,t,r)=>hk(n.putString(e,t,r)),list:e=>(0,zt.D)(n.list(e)),listAll:()=>(0,zt.D)(n.listAll())}}!function GV(n){const e={TaskState:ms,TaskEvent:uV,StringFormat:vo,Storage:ck,Reference:zc};n.INTERNAL.registerComponent(new wc.wA("storage-compat",HV,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),n.registerVersion("@firebase/storage-compat","0.1.17")}(xI.Z);const qV=new f.OlP("angularfire2.storageBucket"),WV=new f.OlP("angularfire2.storage.maxUploadRetryTime"),ZV=new f.OlP("angularfire2.storage.maxOperationRetryTime"),KV=new f.OlP("angularfire2.storage.use-emulator");let YV=(()=>{class n{constructor(t,r,s,u,c,m,v,b,A,M){const L=(0,Xr.on)(t,c,r);this.storage=(0,Xr.cc)(`${L.name}.storage.${s}`,"AngularFireStorage",L.name,()=>{const G=c.runOutsideAngular(()=>L.storage(s||void 0)),J=A;return J&&G.useEmulator(...J),v&&G.setMaxUploadRetryTime(v),b&&G.setMaxOperationRetryTime(b),G},[v,b])}ref(t){return ND(this.storage.ref(t))}refFromURL(t){return ND(this.storage.refFromURL(t))}upload(t,r,s){return ND(this.storage.ref(t)).put(r,s)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Xr.Dh),f.LFG(Xr.xv,8),f.LFG(qV,8),f.LFG(f.Lbi),f.LFG(f.R0b),f.LFG(Cn.HU),f.LFG(WV,8),f.LFG(ZV,8),f.LFG(KV,8),f.LFG(Yf,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),QV=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({}),n})(),JV=(()=>{class n{constructor(){Dc.Z.registerVersion("angularfire",Cn.q4.full,"gcs-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[YV],imports:[QV]}),n})(),XV=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n,bootstrap:[uL]}),n.\u0275inj=f.cJS({imports:[Ll,rL,oc,QD,Xr.hO.initializeApp(xO_firebaseConfig),vT,eL,JV]}),n})();(0,f.G48)(),Eu().bootstrapModule(XV).catch(n=>console.error(n))},5867:(ot,Se,P)=>{P.d(Se,{C6:()=>f.getApps,Mq:()=>f.getApp});var f=P(9681);(0,f.registerVersion)("firebase","9.9.4","app")},127:(ot,Se,P)=>{P.d(Se,{Z:()=>f.Z});var f=P(3942);f.Z.registerVersion("firebase","9.9.4","app-compat")},2274:(ot,Se,P)=>{P.r(Se);var f=P(5861),te=P(3942),k=P(2090),oe=P(9681),re=P(655),de=P(1877),le=P(4859);const ve=function Le(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},Je=function Me(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},me=new k.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Ke=new de.Yd("@firebase/auth");function nt(y,...h){Ke.logLevel<=de.in.ERROR&&Ke.error(`Auth (${oe.SDK_VERSION}): ${y}`,...h)}function Ae(y,...h){throw je(y,...h)}function _e(y,...h){return je(y,...h)}function Ee(y,h,g){const w=Object.assign(Object.assign({},Je()),{[h]:g});return new k.LL("auth","Firebase",w).create(h,{appName:y.name})}function Ue(y,h,g){if(!(h instanceof g))throw g.name!==h.constructor.name&&Ae(y,"argument-error"),Ee(y,"argument-error",`Type of ${h.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function je(y,...h){if("string"!=typeof y){const g=h[0],w=[...h.slice(1)];return w[0]&&(w[0].appName=y.name),y._errorFactory.create(g,...w)}return me.create(y,...h)}function U(y,h,...g){if(!y)throw je(h,...g)}function ge(y){const h="INTERNAL ASSERTION FAILED: "+y;throw nt(h),new Error(h)}function K(y,h){y||ge(h)}const ee=new Map;function ie(y){K(y instanceof Function,"Expected a class definition");let h=ee.get(y);return h?(K(h instanceof y,"Instance stored in cache mismatched with class"),h):(h=new y,ee.set(y,h),h)}function Oe(){var y;return typeof self<"u"&&(null===(y=self.location)||void 0===y?void 0:y.href)||""}function ct(){return"http:"===Ht()||"https:"===Ht()}function Ht(){var y;return typeof self<"u"&&(null===(y=self.location)||void 0===y?void 0:y.protocol)||null}class tn{constructor(h,g){this.shortDelay=h,this.longDelay=g,K(g>h,"Short delay should be less than long delay!"),this.isMobile=(0,k.uI)()||(0,k.b$)()}get(){return function Ut(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(ct()||(0,k.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Sn(y,h){K(y.emulator,"Emulator should always be set here");const{url:g}=y.emulator;return h?`${g}${h.startsWith("/")?h.slice(1):h}`:g}class Wt{static initialize(h,g,w){this.fetchImpl=h,g&&(this.headersImpl=g),w&&(this.responseImpl=w)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void ge("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void ge("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void ge("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Zt={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},Er=new tn(3e4,6e4);function Ot(y,h){return y.tenantId&&!h.tenantId?Object.assign(Object.assign({},h),{tenantId:y.tenantId}):h}function Xt(y,h,g,w){return Jo.apply(this,arguments)}function Jo(){return(Jo=(0,f.Z)(function*(y,h,g,w,S={}){return Lr(y,S,(0,f.Z)(function*(){let N={},W={};w&&("GET"===h?W=w:N={body:JSON.stringify(w)});const ue=(0,k.xO)(Object.assign({key:y.config.apiKey},W)).slice(1),Fe=yield y._getAdditionalHeaders();return Fe["Content-Type"]="application/json",y.languageCode&&(Fe["X-Firebase-Locale"]=y.languageCode),Wt.fetch()(Di(y,y.config.apiHost,g,ue),Object.assign({method:h,headers:Fe,referrerPolicy:"no-referrer"},N))}))})).apply(this,arguments)}function Lr(y,h,g){return mr.apply(this,arguments)}function mr(){return(mr=(0,f.Z)(function*(y,h,g){y._canInitEmulator=!1;const w=Object.assign(Object.assign({},Zt),h);try{const S=new Ur(y),N=yield Promise.race([g(),S.promise]);S.clearNetworkTimeout();const W=yield N.json();if("needConfirmation"in W)throw hi(y,"account-exists-with-different-credential",W);if(N.ok&&!("errorMessage"in W))return W;{const ue=N.ok?W.errorMessage:W.error.message,[Fe,Qe]=ue.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Fe)throw hi(y,"credential-already-in-use",W);if("EMAIL_EXISTS"===Fe)throw hi(y,"email-already-in-use",W);if("USER_DISABLED"===Fe)throw hi(y,"user-disabled",W);const yt=w[Fe]||Fe.toLowerCase().replace(/[_\s]+/g,"-");if(Qe)throw Ee(y,yt,Qe);Ae(y,yt)}}catch(S){if(S instanceof k.ZR)throw S;Ae(y,"network-request-failed")}})).apply(this,arguments)}function Vr(y,h,g,w){return ys.apply(this,arguments)}function ys(){return(ys=(0,f.Z)(function*(y,h,g,w,S={}){const N=yield Xt(y,h,g,w,S);return"mfaPendingCredential"in N&&Ae(y,"multi-factor-auth-required",{_serverResponse:N}),N})).apply(this,arguments)}function Di(y,h,g,w){const S=`${h}${g}?${w}`;return y.config.emulator?Sn(y.config,S):`${y.config.apiScheme}://${S}`}class Ur{constructor(h){this.auth=h,this.timer=null,this.promise=new Promise((g,w)=>{this.timer=setTimeout(()=>w(_e(this.auth,"network-request-failed")),Er.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function hi(y,h,g){const w={appName:y.name};g.email&&(w.email=g.email),g.phoneNumber&&(w.phoneNumber=g.phoneNumber);const S=_e(y,h,w);return S.customData._tokenResponse=g,S}function We(){return(We=(0,f.Z)(function*(y,h){return Xt(y,"POST","/v1/accounts:delete",h)})).apply(this,arguments)}function Br(y,h){return ji.apply(this,arguments)}function ji(){return(ji=(0,f.Z)(function*(y,h){return Xt(y,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function An(y,h){return fi.apply(this,arguments)}function fi(){return(fi=(0,f.Z)(function*(y,h){return Xt(y,"POST","/v1/accounts:lookup",h)})).apply(this,arguments)}function ti(y){if(y)try{const h=new Date(Number(y));if(!isNaN(h.getTime()))return h.toUTCString()}catch{}}function ln(){return(ln=(0,f.Z)(function*(y,h=!1){const g=(0,k.m9)(y),w=yield g.getIdToken(h),S=st(w);U(S&&S.exp&&S.auth_time&&S.iat,g.auth,"internal-error");const N="object"==typeof S.firebase?S.firebase:void 0,W=N?.sign_in_provider;return{claims:S,token:w,authTime:ti(ft(S.auth_time)),issuedAtTime:ti(ft(S.iat)),expirationTime:ti(ft(S.exp)),signInProvider:W||null,signInSecondFactor:N?.sign_in_second_factor||null}})).apply(this,arguments)}function ft(y){return 1e3*Number(y)}function st(y){var h;const[g,w,S]=y.split(".");if(void 0===g||void 0===w||void 0===S)return nt("JWT malformed, contained fewer than 3 sections"),null;try{const N=(0,k.tV)(w);return N?JSON.parse(N):(nt("Failed to decode base64 JWT payload"),null)}catch(N){return nt("Caught error parsing JWT payload as JSON",null===(h=N)||void 0===h?void 0:h.toString()),null}}function Xn(y,h){return er.apply(this,arguments)}function er(){return(er=(0,f.Z)(function*(y,h,g=!1){if(g)return h;try{return yield h}catch(w){throw w instanceof k.ZR&&Ir(w)&&y.auth.currentUser===y&&(yield y.auth.signOut()),w}})).apply(this,arguments)}function Ir({code:y}){return"auth/user-disabled"===y||"auth/user-token-expired"===y}class Dt{constructor(h){this.user=h,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(h){var g;if(h){const w=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),w}{this.errorBackoff=3e4;const S=(null!==(g=this.user.stsTokenManager.expirationTime)&&void 0!==g?g:0)-Date.now()-3e5;return Math.max(0,S)}}schedule(h=!1){var g=this;if(!this.isRunning)return;const w=this.getInterval(h);this.timerId=setTimeout((0,f.Z)(function*(){yield g.iteration()}),w)}iteration(){var h=this;return(0,f.Z)(function*(){var g;try{yield h.user.getIdToken(!0)}catch(w){return void("auth/network-request-failed"===(null===(g=w)||void 0===g?void 0:g.code)&&h.schedule(!0))}h.schedule()})()}}class $i{constructor(h,g){this.createdAt=h,this.lastLoginAt=g,this._initializeTime()}_initializeTime(){this.lastSignInTime=ti(this.lastLoginAt),this.creationTime=ti(this.createdAt)}_copy(h){this.createdAt=h.createdAt,this.lastLoginAt=h.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Kt(y){return pi.apply(this,arguments)}function pi(){return(pi=(0,f.Z)(function*(y){var h;const g=y.auth,w=yield y.getIdToken(),S=yield Xn(y,An(g,{idToken:w}));U(S?.users.length,g,"internal-error");const N=S.users[0];y._notifyReloadListener(N);const W=null!==(h=N.providerUserInfo)&&void 0!==h&&h.length?V(N.providerUserInfo):[],ue=j(y.providerData,W),yt=!!y.isAnonymous&&!(y.email&&N.passwordHash||ue?.length),gt={uid:N.localId,displayName:N.displayName||null,photoURL:N.photoUrl||null,email:N.email||null,emailVerified:N.emailVerified||!1,phoneNumber:N.phoneNumber||null,tenantId:N.tenantId||null,providerData:ue,metadata:new $i(N.createdAt,N.lastLoginAt),isAnonymous:yt};Object.assign(y,gt)})).apply(this,arguments)}function Z(){return(Z=(0,f.Z)(function*(y){const h=(0,k.m9)(y);yield Kt(h),yield h.auth._persistUserIfCurrent(h),h.auth._notifyListenersIfCurrent(h)})).apply(this,arguments)}function j(y,h){return[...y.filter(w=>!h.some(S=>S.providerId===w.providerId)),...h]}function V(y){return y.map(h=>{var{providerId:g}=h,w=(0,re._T)(h,["providerId"]);return{providerId:g,uid:w.rawId||"",displayName:w.displayName||null,email:w.email||null,phoneNumber:w.phoneNumber||null,photoURL:w.photoUrl||null}})}function q(){return(q=(0,f.Z)(function*(y,h){const g=yield Lr(y,{},(0,f.Z)(function*(){const w=(0,k.xO)({grant_type:"refresh_token",refresh_token:h}).slice(1),{tokenApiHost:S,apiKey:N}=y.config,W=Di(y,S,"/v1/token",`key=${N}`),ue=yield y._getAdditionalHeaders();return ue["Content-Type"]="application/x-www-form-urlencoded",Wt.fetch()(W,{method:"POST",headers:ue,body:w})}));return{accessToken:g.access_token,expiresIn:g.expires_in,refreshToken:g.refresh_token}})).apply(this,arguments)}class be{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(h){U(h.idToken,"internal-error"),U(typeof h.idToken<"u","internal-error"),U(typeof h.refreshToken<"u","internal-error");const g="expiresIn"in h&&typeof h.expiresIn<"u"?Number(h.expiresIn):function nn(y){const h=st(y);return U(h,"internal-error"),U(typeof h.exp<"u","internal-error"),U(typeof h.iat<"u","internal-error"),Number(h.exp)-Number(h.iat)}(h.idToken);this.updateTokensAndExpiration(h.idToken,h.refreshToken,g)}getToken(h,g=!1){var w=this;return(0,f.Z)(function*(){return U(!w.accessToken||w.refreshToken,h,"user-token-expired"),g||!w.accessToken||w.isExpired?w.refreshToken?(yield w.refresh(h,w.refreshToken),w.accessToken):null:w.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(h,g){var w=this;return(0,f.Z)(function*(){const{accessToken:S,refreshToken:N,expiresIn:W}=yield function H(y,h){return q.apply(this,arguments)}(h,g);w.updateTokensAndExpiration(S,N,Number(W))})()}updateTokensAndExpiration(h,g,w){this.refreshToken=g||null,this.accessToken=h||null,this.expirationTime=Date.now()+1e3*w}static fromJSON(h,g){const{refreshToken:w,accessToken:S,expirationTime:N}=g,W=new be;return w&&(U("string"==typeof w,"internal-error",{appName:h}),W.refreshToken=w),S&&(U("string"==typeof S,"internal-error",{appName:h}),W.accessToken=S),N&&(U("number"==typeof N,"internal-error",{appName:h}),W.expirationTime=N),W}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(h){this.accessToken=h.accessToken,this.refreshToken=h.refreshToken,this.expirationTime=h.expirationTime}_clone(){return Object.assign(new be,this.toJSON())}_performRefresh(){return ge("not implemented")}}function Ve(y,h){U("string"==typeof y||typeof y>"u","internal-error",{appName:h})}class rt{constructor(h){var{uid:g,auth:w,stsTokenManager:S}=h,N=(0,re._T)(h,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Dt(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=g,this.auth=w,this.stsTokenManager=S,this.accessToken=S.accessToken,this.displayName=N.displayName||null,this.email=N.email||null,this.emailVerified=N.emailVerified||!1,this.phoneNumber=N.phoneNumber||null,this.photoURL=N.photoURL||null,this.isAnonymous=N.isAnonymous||!1,this.tenantId=N.tenantId||null,this.providerData=N.providerData?[...N.providerData]:[],this.metadata=new $i(N.createdAt||void 0,N.lastLoginAt||void 0)}getIdToken(h){var g=this;return(0,f.Z)(function*(){const w=yield Xn(g,g.stsTokenManager.getToken(g.auth,h));return U(w,g.auth,"internal-error"),g.accessToken!==w&&(g.accessToken=w,yield g.auth._persistUserIfCurrent(g),g.auth._notifyListenersIfCurrent(g)),w})()}getIdTokenResult(h){return function jn(y){return ln.apply(this,arguments)}(this,h)}reload(){return function Gt(y){return Z.apply(this,arguments)}(this)}_assign(h){this!==h&&(U(this.uid===h.uid,this.auth,"internal-error"),this.displayName=h.displayName,this.photoURL=h.photoURL,this.email=h.email,this.emailVerified=h.emailVerified,this.phoneNumber=h.phoneNumber,this.isAnonymous=h.isAnonymous,this.tenantId=h.tenantId,this.providerData=h.providerData.map(g=>Object.assign({},g)),this.metadata._copy(h.metadata),this.stsTokenManager._assign(h.stsTokenManager))}_clone(h){return new rt(Object.assign(Object.assign({},this),{auth:h,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(h){U(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=h,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(h){this.reloadListener?this.reloadListener(h):this.reloadUserInfo=h}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(h,g=!1){var w=this;return(0,f.Z)(function*(){let S=!1;h.idToken&&h.idToken!==w.stsTokenManager.accessToken&&(w.stsTokenManager.updateFromServerResponse(h),S=!0),g&&(yield Kt(w)),yield w.auth._persistUserIfCurrent(w),S&&w.auth._notifyListenersIfCurrent(w)})()}delete(){var h=this;return(0,f.Z)(function*(){const g=yield h.getIdToken();return yield Xn(h,function wo(y,h){return We.apply(this,arguments)}(h.auth,{idToken:g})),h.stsTokenManager.clearRefreshToken(),h.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(h=>Object.assign({},h)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(h,g){var w,S,N,W,ue,Fe,Qe,yt;const gt=null!==(w=g.displayName)&&void 0!==w?w:void 0,qn=null!==(S=g.email)&&void 0!==S?S:void 0,is=null!==(N=g.phoneNumber)&&void 0!==N?N:void 0,Lu=null!==(W=g.photoURL)&&void 0!==W?W:void 0,wg=null!==(ue=g.tenantId)&&void 0!==ue?ue:void 0,Sd=null!==(Fe=g._redirectEventId)&&void 0!==Fe?Fe:void 0,Uy=null!==(Qe=g.createdAt)&&void 0!==Qe?Qe:void 0,Eg=null!==(yt=g.lastLoginAt)&&void 0!==yt?yt:void 0,{uid:oc,emailVerified:d0,isAnonymous:By,providerData:Ad,stsTokenManager:h0}=g;U(oc&&h0,h,"internal-error");const VD=be.fromJSON(this.name,h0);U("string"==typeof oc,h,"internal-error"),Ve(gt,h.name),Ve(qn,h.name),U("boolean"==typeof d0,h,"internal-error"),U("boolean"==typeof By,h,"internal-error"),Ve(is,h.name),Ve(Lu,h.name),Ve(wg,h.name),Ve(Sd,h.name),Ve(Uy,h.name),Ve(Eg,h.name);const jy=new rt({uid:oc,auth:h,email:qn,emailVerified:d0,displayName:gt,isAnonymous:By,photoURL:Lu,phoneNumber:is,tenantId:wg,stsTokenManager:VD,createdAt:Uy,lastLoginAt:Eg});return Ad&&Array.isArray(Ad)&&(jy.providerData=Ad.map(UD=>Object.assign({},UD))),Sd&&(jy._redirectEventId=Sd),jy}static _fromIdTokenResponse(h,g,w=!1){return(0,f.Z)(function*(){const S=new be;S.updateFromServerResponse(g);const N=new rt({uid:g.localId,auth:h,stsTokenManager:S,isAnonymous:w});return yield Kt(N),N})()}}const Yt=(()=>{class y{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,f.Z)(function*(){return!0})()}_set(g,w){var S=this;return(0,f.Z)(function*(){S.storage[g]=w})()}_get(g){var w=this;return(0,f.Z)(function*(){const S=w.storage[g];return void 0===S?null:S})()}_remove(g){var w=this;return(0,f.Z)(function*(){delete w.storage[g]})()}_addListener(g,w){}_removeListener(g,w){}}return y.type="NONE",y})();function $n(y,h,g){return`firebase:${y}:${h}:${g}`}class Pt{constructor(h,g,w){this.persistence=h,this.auth=g,this.userKey=w;const{config:S,name:N}=this.auth;this.fullUserKey=$n(this.userKey,S.apiKey,N),this.fullPersistenceKey=$n("persistence",S.apiKey,N),this.boundEventHandler=g._onStorageEvent.bind(g),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(h){return this.persistence._set(this.fullUserKey,h.toJSON())}getCurrentUser(){var h=this;return(0,f.Z)(function*(){const g=yield h.persistence._get(h.fullUserKey);return g?rt._fromJSON(h.auth,g):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(h){var g=this;return(0,f.Z)(function*(){if(g.persistence===h)return;const w=yield g.getCurrentUser();return yield g.removeCurrentUser(),g.persistence=h,w?g.setCurrentUser(w):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(h,g,w="authUser"){return(0,f.Z)(function*(){if(!g.length)return new Pt(ie(Yt),h,w);const S=(yield Promise.all(g.map(function(){var Qe=(0,f.Z)(function*(yt){if(yield yt._isAvailable())return yt});return function(yt){return Qe.apply(this,arguments)}}()))).filter(Qe=>Qe);let N=S[0]||ie(Yt);const W=$n(w,h.config.apiKey,h.name);let ue=null;for(const Qe of g)try{const yt=yield Qe._get(W);if(yt){const gt=rt._fromJSON(h,yt);Qe!==N&&(ue=gt),N=Qe;break}}catch{}const Fe=S.filter(Qe=>Qe._shouldAllowMigration);return N._shouldAllowMigration&&Fe.length?(N=Fe[0],ue&&(yield N._set(W,ue.toJSON())),yield Promise.all(g.map(function(){var Qe=(0,f.Z)(function*(yt){if(yt!==N)try{yield yt._remove(W)}catch{}});return function(yt){return Qe.apply(this,arguments)}}())),new Pt(N,h,w)):new Pt(N,h,w)})()}}function Mt(y){const h=y.toLowerCase();if(h.includes("opera/")||h.includes("opr/")||h.includes("opios/"))return"Opera";if(br(h))return"IEMobile";if(h.includes("msie")||h.includes("trident/"))return"IE";if(h.includes("edge/"))return"Edge";if(dn(h))return"Firefox";if(h.includes("silk/"))return"Silk";if(He(h))return"Blackberry";if(wt(h))return"Webos";if(Nn(h))return"Safari";if((h.includes("chrome/")||Ci(h))&&!h.includes("edge/"))return"Chrome";if(On(h))return"Android";{const w=y.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===w?.length)return w[1]}return"Other"}function dn(y=(0,k.z$)()){return/firefox\//i.test(y)}function Nn(y=(0,k.z$)()){const h=y.toLowerCase();return h.includes("safari/")&&!h.includes("chrome/")&&!h.includes("crios/")&&!h.includes("android")}function Ci(y=(0,k.z$)()){return/crios\//i.test(y)}function br(y=(0,k.z$)()){return/iemobile/i.test(y)}function On(y=(0,k.z$)()){return/android/i.test(y)}function He(y=(0,k.z$)()){return/blackberry/i.test(y)}function wt(y=(0,k.z$)()){return/webos/i.test(y)}function Qt(y=(0,k.z$)()){return/iphone|ipad|ipod/i.test(y)||/macintosh/i.test(y)&&/mobile/i.test(y)}function qs(y=(0,k.z$)()){return Qt(y)||On(y)||wt(y)||He(y)||/windows phone/i.test(y)||br(y)}function _s(y,h=[]){let g;switch(y){case"Browser":g=Mt((0,k.z$)());break;case"Worker":g=`${Mt((0,k.z$)())}-${y}`;break;default:g=y}const w=h.length?h.join(","):"FirebaseCore-web";return`${g}/JsCore/${oe.SDK_VERSION}/${w}`}class Ws{constructor(h){this.auth=h,this.queue=[]}pushCallback(h,g){const w=N=>new Promise((W,ue)=>{try{W(h(N))}catch(Fe){ue(Fe)}});w.onAbort=g,this.queue.push(w);const S=this.queue.length-1;return()=>{this.queue[S]=()=>Promise.resolve()}}runMiddleware(h){var g=this;return(0,f.Z)(function*(){var w;if(g.auth.currentUser===h)return;const S=[];try{for(const N of g.queue)yield N(h),N.onAbort&&S.push(N.onAbort)}catch(N){S.reverse();for(const W of S)try{W()}catch{}throw g.auth._errorFactory.create("login-blocked",{originalMessage:null===(w=N)||void 0===w?void 0:w.message})}})()}}class Rt{constructor(h,g,w){this.app=h,this.heartbeatServiceProvider=g,this.config=w,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Zs(this),this.idTokenSubscription=new Zs(this),this.beforeStateQueue=new Ws(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=me,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=h.name,this.clientVersion=w.sdkClientVersion}_initializeWithPersistence(h,g){var w=this;return g&&(this._popupRedirectResolver=ie(g)),this._initializationPromise=this.queue((0,f.Z)(function*(){var S,N;if(!w._deleted&&(w.persistenceManager=yield Pt.create(w,h),!w._deleted)){if(null!==(S=w._popupRedirectResolver)&&void 0!==S&&S._shouldInitProactively)try{yield w._popupRedirectResolver._initialize(w)}catch{}yield w.initializeCurrentUser(g),w.lastNotifiedUid=(null===(N=w.currentUser)||void 0===N?void 0:N.uid)||null,!w._deleted&&(w._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var h=this;return(0,f.Z)(function*(){if(h._deleted)return;const g=yield h.assertedPersistence.getCurrentUser();if(h.currentUser||g){if(h.currentUser&&g&&h.currentUser.uid===g.uid)return h._currentUser._assign(g),void(yield h.currentUser.getIdToken());yield h._updateCurrentUser(g,!0)}})()}initializeCurrentUser(h){var g=this;return(0,f.Z)(function*(){var w;const S=yield g.assertedPersistence.getCurrentUser();let N=S,W=!1;if(h&&g.config.authDomain){yield g.getOrInitRedirectPersistenceManager();const ue=null===(w=g.redirectUser)||void 0===w?void 0:w._redirectEventId,Fe=N?._redirectEventId,Qe=yield g.tryRedirectSignIn(h);(!ue||ue===Fe)&&Qe?.user&&(N=Qe.user,W=!0)}if(!N)return g.directlySetCurrentUser(null);if(!N._redirectEventId){if(W)try{yield g.beforeStateQueue.runMiddleware(N)}catch(ue){N=S,g._popupRedirectResolver._overrideRedirectResult(g,()=>Promise.reject(ue))}return N?g.reloadAndSetCurrentUserOrClear(N):g.directlySetCurrentUser(null)}return U(g._popupRedirectResolver,g,"argument-error"),yield g.getOrInitRedirectPersistenceManager(),g.redirectUser&&g.redirectUser._redirectEventId===N._redirectEventId?g.directlySetCurrentUser(N):g.reloadAndSetCurrentUserOrClear(N)})()}tryRedirectSignIn(h){var g=this;return(0,f.Z)(function*(){let w=null;try{w=yield g._popupRedirectResolver._completeRedirectFn(g,h,!0)}catch{yield g._setRedirectUser(null)}return w})()}reloadAndSetCurrentUserOrClear(h){var g=this;return(0,f.Z)(function*(){var w;try{yield Kt(h)}catch(S){if("auth/network-request-failed"!==(null===(w=S)||void 0===w?void 0:w.code))return g.directlySetCurrentUser(null)}return g.directlySetCurrentUser(h)})()}useDeviceLanguage(){this.languageCode=function ze(){if(typeof navigator>"u")return null;const y=navigator;return y.languages&&y.languages[0]||y.language||null}()}_delete(){var h=this;return(0,f.Z)(function*(){h._deleted=!0})()}updateCurrentUser(h){var g=this;return(0,f.Z)(function*(){const w=h?(0,k.m9)(h):null;return w&&U(w.auth.config.apiKey===g.config.apiKey,g,"invalid-user-token"),g._updateCurrentUser(w&&w._clone(g))})()}_updateCurrentUser(h,g=!1){var w=this;return(0,f.Z)(function*(){if(!w._deleted)return h&&U(w.tenantId===h.tenantId,w,"tenant-id-mismatch"),g||(yield w.beforeStateQueue.runMiddleware(h)),w.queue((0,f.Z)(function*(){yield w.directlySetCurrentUser(h),w.notifyAuthListeners()}))})()}signOut(){var h=this;return(0,f.Z)(function*(){return yield h.beforeStateQueue.runMiddleware(null),(h.redirectPersistenceManager||h._popupRedirectResolver)&&(yield h._setRedirectUser(null)),h._updateCurrentUser(null,!0)})()}setPersistence(h){var g=this;return this.queue((0,f.Z)(function*(){yield g.assertedPersistence.setPersistence(ie(h))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(h){this._errorFactory=new k.LL("auth","Firebase",h())}onAuthStateChanged(h,g,w){return this.registerStateListener(this.authStateSubscription,h,g,w)}beforeAuthStateChanged(h,g){return this.beforeStateQueue.pushCallback(h,g)}onIdTokenChanged(h,g,w){return this.registerStateListener(this.idTokenSubscription,h,g,w)}toJSON(){var h;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(h=this._currentUser)||void 0===h?void 0:h.toJSON()}}_setRedirectUser(h,g){var w=this;return(0,f.Z)(function*(){const S=yield w.getOrInitRedirectPersistenceManager(g);return null===h?S.removeCurrentUser():S.setCurrentUser(h)})()}getOrInitRedirectPersistenceManager(h){var g=this;return(0,f.Z)(function*(){if(!g.redirectPersistenceManager){const w=h&&ie(h)||g._popupRedirectResolver;U(w,g,"argument-error"),g.redirectPersistenceManager=yield Pt.create(g,[ie(w._redirectPersistence)],"redirectUser"),g.redirectUser=yield g.redirectPersistenceManager.getCurrentUser()}return g.redirectPersistenceManager})()}_redirectUserForId(h){var g=this;return(0,f.Z)(function*(){var w,S;return g._isInitialized&&(yield g.queue((0,f.Z)(function*(){}))),(null===(w=g._currentUser)||void 0===w?void 0:w._redirectEventId)===h?g._currentUser:(null===(S=g.redirectUser)||void 0===S?void 0:S._redirectEventId)===h?g.redirectUser:null})()}_persistUserIfCurrent(h){var g=this;return(0,f.Z)(function*(){if(h===g.currentUser)return g.queue((0,f.Z)(function*(){return g.directlySetCurrentUser(h)}))})()}_notifyListenersIfCurrent(h){h===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var h,g;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const w=null!==(g=null===(h=this.currentUser)||void 0===h?void 0:h.uid)&&void 0!==g?g:null;this.lastNotifiedUid!==w&&(this.lastNotifiedUid=w,this.authStateSubscription.next(this.currentUser))}registerStateListener(h,g,w,S){if(this._deleted)return()=>{};const N="function"==typeof g?g:g.next.bind(g),W=this._isInitialized?Promise.resolve():this._initializationPromise;return U(W,this,"internal-error"),W.then(()=>N(this.currentUser)),"function"==typeof g?h.addObserver(g,w,S):h.addObserver(g)}directlySetCurrentUser(h){var g=this;return(0,f.Z)(function*(){g.currentUser&&g.currentUser!==h&&g._currentUser._stopProactiveRefresh(),h&&g.isProactiveRefreshEnabled&&h._startProactiveRefresh(),g.currentUser=h,h?yield g.assertedPersistence.setCurrentUser(h):yield g.assertedPersistence.removeCurrentUser()})()}queue(h){return this.operations=this.operations.then(h,h),this.operations}get assertedPersistence(){return U(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(h){!h||this.frameworks.includes(h)||(this.frameworks.push(h),this.frameworks.sort(),this.clientVersion=_s(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var h=this;return(0,f.Z)(function*(){var g;const w={"X-Client-Version":h.clientVersion};h.app.options.appId&&(w["X-Firebase-gmpid"]=h.app.options.appId);const S=yield null===(g=h.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===g?void 0:g.getHeartbeatsHeader();return S&&(w["X-Firebase-Client"]=S),w})()}}function fn(y){return(0,k.m9)(y)}class Zs{constructor(h){this.auth=h,this.observer=null,this.addObserver=(0,k.ne)(g=>this.observer=g)}get next(){return U(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Ti(y){const h=y.indexOf(":");return h<0?"":y.substr(0,h+1)}function vs(y){if(!y)return null;const h=Number(y);return isNaN(h)?null:h}class dr{constructor(h,g){this.providerId=h,this.signInMethod=g}toJSON(){return ge("not implemented")}_getIdTokenResponse(h){return ge("not implemented")}_linkToIdToken(h,g){return ge("not implemented")}_getReauthenticationResolver(h){return ge("not implemented")}}function Pn(y,h){return Xo.apply(this,arguments)}function Xo(){return(Xo=(0,f.Z)(function*(y,h){return Xt(y,"POST","/v1/accounts:resetPassword",Ot(y,h))})).apply(this,arguments)}function rn(y,h){return pl.apply(this,arguments)}function pl(){return(pl=(0,f.Z)(function*(y,h){return Xt(y,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function gl(y,h){return Ks.apply(this,arguments)}function Ks(){return(Ks=(0,f.Z)(function*(y,h){return Xt(y,"POST","/v1/accounts:update",Ot(y,h))})).apply(this,arguments)}function Eo(){return(Eo=(0,f.Z)(function*(y,h){return Vr(y,"POST","/v1/accounts:signInWithPassword",Ot(y,h))})).apply(this,arguments)}function Es(y,h){return mi.apply(this,arguments)}function mi(){return(mi=(0,f.Z)(function*(y,h){return Xt(y,"POST","/v1/accounts:sendOobCode",Ot(y,h))})).apply(this,arguments)}function tr(y,h){return ml.apply(this,arguments)}function ml(){return(ml=(0,f.Z)(function*(y,h){return Es(y,h)})).apply(this,arguments)}function nr(y,h){return Dr.apply(this,arguments)}function Dr(){return(Dr=(0,f.Z)(function*(y,h){return Es(y,h)})).apply(this,arguments)}function Qa(y,h){return ta.apply(this,arguments)}function ta(){return(ta=(0,f.Z)(function*(y,h){return Es(y,h)})).apply(this,arguments)}function yl(y,h){return yr.apply(this,arguments)}function yr(){return(yr=(0,f.Z)(function*(y,h){return Es(y,h)})).apply(this,arguments)}function qc(){return(qc=(0,f.Z)(function*(y,h){return Vr(y,"POST","/v1/accounts:signInWithEmailLink",Ot(y,h))})).apply(this,arguments)}function _l(){return(_l=(0,f.Z)(function*(y,h){return Vr(y,"POST","/v1/accounts:signInWithEmailLink",Ot(y,h))})).apply(this,arguments)}class vl extends dr{constructor(h,g,w,S=null){super("password",w),this._email=h,this._password=g,this._tenantId=S}static _fromEmailAndPassword(h,g){return new vl(h,g,"password")}static _fromEmailAndCode(h,g,w=null){return new vl(h,g,"emailLink",w)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(h){const g="string"==typeof h?JSON.parse(h):h;if(g?.email&&g?.password){if("password"===g.signInMethod)return this._fromEmailAndPassword(g.email,g.password);if("emailLink"===g.signInMethod)return this._fromEmailAndCode(g.email,g.password,g.tenantId)}return null}_getIdTokenResponse(h){var g=this;return(0,f.Z)(function*(){switch(g.signInMethod){case"password":return function ea(y,h){return Eo.apply(this,arguments)}(h,{returnSecureToken:!0,email:g._email,password:g._password});case"emailLink":return function Rh(y,h){return qc.apply(this,arguments)}(h,{email:g._email,oobCode:g._password});default:Ae(h,"internal-error")}})()}_linkToIdToken(h,g){var w=this;return(0,f.Z)(function*(){switch(w.signInMethod){case"password":return rn(h,{idToken:g,returnSecureToken:!0,email:w._email,password:w._password});case"emailLink":return function Nh(y,h){return _l.apply(this,arguments)}(h,{idToken:g,email:w._email,oobCode:w._password});default:Ae(h,"internal-error")}})()}_getReauthenticationResolver(h){return this._getIdTokenResponse(h)}}function Gn(y,h){return Wc.apply(this,arguments)}function Wc(){return(Wc=(0,f.Z)(function*(y,h){return Vr(y,"POST","/v1/accounts:signInWithIdp",Ot(y,h))})).apply(this,arguments)}class Hi extends dr{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(h){const g=new Hi(h.providerId,h.signInMethod);return h.idToken||h.accessToken?(h.idToken&&(g.idToken=h.idToken),h.accessToken&&(g.accessToken=h.accessToken),h.nonce&&!h.pendingToken&&(g.nonce=h.nonce),h.pendingToken&&(g.pendingToken=h.pendingToken)):h.oauthToken&&h.oauthTokenSecret?(g.accessToken=h.oauthToken,g.secret=h.oauthTokenSecret):Ae("argument-error"),g}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(h){const g="string"==typeof h?JSON.parse(h):h,{providerId:w,signInMethod:S}=g,N=(0,re._T)(g,["providerId","signInMethod"]);if(!w||!S)return null;const W=new Hi(w,S);return W.idToken=N.idToken||void 0,W.accessToken=N.accessToken||void 0,W.secret=N.secret,W.nonce=N.nonce,W.pendingToken=N.pendingToken||null,W}_getIdTokenResponse(h){return Gn(h,this.buildRequest())}_linkToIdToken(h,g){const w=this.buildRequest();return w.idToken=g,Gn(h,w)}_getReauthenticationResolver(h){const g=this.buildRequest();return g.autoCreate=!1,Gn(h,g)}buildRequest(){const h={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)h.pendingToken=this.pendingToken;else{const g={};this.idToken&&(g.id_token=this.idToken),this.accessToken&&(g.access_token=this.accessToken),this.secret&&(g.oauth_token_secret=this.secret),g.providerId=this.providerId,this.nonce&&!this.pendingToken&&(g.nonce=this.nonce),h.postBody=(0,k.xO)(g)}return h}}function Hp(y,h){return Zc.apply(this,arguments)}function Zc(){return(Zc=(0,f.Z)(function*(y,h){return Xt(y,"POST","/v1/accounts:sendVerificationCode",Ot(y,h))})).apply(this,arguments)}function Is(){return(Is=(0,f.Z)(function*(y,h){return Vr(y,"POST","/v1/accounts:signInWithPhoneNumber",Ot(y,h))})).apply(this,arguments)}function Kc(){return(Kc=(0,f.Z)(function*(y,h){const g=yield Vr(y,"POST","/v1/accounts:signInWithPhoneNumber",Ot(y,h));if(g.temporaryProof)throw hi(y,"account-exists-with-different-credential",g);return g})).apply(this,arguments)}const zp={USER_NOT_FOUND:"user-not-found"};function Yc(){return(Yc=(0,f.Z)(function*(y,h){return Vr(y,"POST","/v1/accounts:signInWithPhoneNumber",Ot(y,Object.assign(Object.assign({},h),{operation:"REAUTH"})),zp)})).apply(this,arguments)}class bs extends dr{constructor(h){super("phone","phone"),this.params=h}static _fromVerification(h,g){return new bs({verificationId:h,verificationCode:g})}static _fromTokenResponse(h,g){return new bs({phoneNumber:h,temporaryProof:g})}_getIdTokenResponse(h){return function wl(y,h){return Is.apply(this,arguments)}(h,this._makeVerificationRequest())}_linkToIdToken(h,g){return function Gp(y,h){return Kc.apply(this,arguments)}(h,Object.assign({idToken:g},this._makeVerificationRequest()))}_getReauthenticationResolver(h){return function qp(y,h){return Yc.apply(this,arguments)}(h,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:h,phoneNumber:g,verificationId:w,verificationCode:S}=this.params;return h&&g?{temporaryProof:h,phoneNumber:g}:{sessionInfo:w,code:S}}toJSON(){const h={providerId:this.providerId};return this.params.phoneNumber&&(h.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(h.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(h.verificationCode=this.params.verificationCode),this.params.verificationId&&(h.verificationId=this.params.verificationId),h}static fromJSON(h){"string"==typeof h&&(h=JSON.parse(h));const{verificationId:g,verificationCode:w,phoneNumber:S,temporaryProof:N}=h;return w||g||S||N?new bs({verificationId:g,verificationCode:w,phoneNumber:S,temporaryProof:N}):null}}class Ja{constructor(h){var g,w,S,N,W,ue;const Fe=(0,k.zd)((0,k.pd)(h)),Qe=null!==(g=Fe.apiKey)&&void 0!==g?g:null,yt=null!==(w=Fe.oobCode)&&void 0!==w?w:null,gt=function Qc(y){switch(y){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(S=Fe.mode)&&void 0!==S?S:null);U(Qe&&yt&&gt,"argument-error"),this.apiKey=Qe,this.operation=gt,this.code=yt,this.continueUrl=null!==(N=Fe.continueUrl)&&void 0!==N?N:null,this.languageCode=null!==(W=Fe.languageCode)&&void 0!==W?W:null,this.tenantId=null!==(ue=Fe.tenantId)&&void 0!==ue?ue:null}static parseLink(h){const g=function Jc(y){const h=(0,k.zd)((0,k.pd)(y)).link,g=h?(0,k.zd)((0,k.pd)(h)).deep_link_id:null,w=(0,k.zd)((0,k.pd)(y)).deep_link_id;return(w?(0,k.zd)((0,k.pd)(w)).link:null)||w||g||h||y}(h);try{return new Ja(g)}catch{return null}}}let Si=(()=>{class y{constructor(){this.providerId=y.PROVIDER_ID}static credential(g,w){return vl._fromEmailAndPassword(g,w)}static credentialWithLink(g,w){const S=Ja.parseLink(w);return U(S,"argument-error"),vl._fromEmailAndCode(g,S.code,S.tenantId)}}return y.PROVIDER_ID="password",y.EMAIL_PASSWORD_SIGN_IN_METHOD="password",y.EMAIL_LINK_SIGN_IN_METHOD="emailLink",y})();class Gi{constructor(h){this.providerId=h,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(h){this.defaultLanguageCode=h}setCustomParameters(h){return this.customParameters=h,this}getCustomParameters(){return this.customParameters}}class zi extends Gi{constructor(){super(...arguments),this.scopes=[]}addScope(h){return this.scopes.includes(h)||this.scopes.push(h),this}getScopes(){return[...this.scopes]}}class Ys extends zi{static credentialFromJSON(h){const g="string"==typeof h?JSON.parse(h):h;return U("providerId"in g&&"signInMethod"in g,"argument-error"),Hi._fromParams(g)}credential(h){return this._credential(Object.assign(Object.assign({},h),{nonce:h.rawNonce}))}_credential(h){return U(h.idToken||h.accessToken,"argument-error"),Hi._fromParams(Object.assign(Object.assign({},h),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(h){return Ys.oauthCredentialFromTaggedObject(h)}static credentialFromError(h){return Ys.oauthCredentialFromTaggedObject(h.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{oauthIdToken:g,oauthAccessToken:w,oauthTokenSecret:S,pendingToken:N,nonce:W,providerId:ue}=h;if(!w&&!S&&!g&&!N||!ue)return null;try{return new Ys(ue)._credential({idToken:g,accessToken:w,nonce:W,pendingToken:N})}catch{return null}}}let na=(()=>{class y extends zi{constructor(){super("facebook.com")}static credential(g){return Hi._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.FACEBOOK_SIGN_IN_METHOD,accessToken:g})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g||!("oauthAccessToken"in g)||!g.oauthAccessToken)return null;try{return y.credential(g.oauthAccessToken)}catch{return null}}}return y.FACEBOOK_SIGN_IN_METHOD="facebook.com",y.PROVIDER_ID="facebook.com",y})(),Xa=(()=>{class y extends zi{constructor(){super("google.com"),this.addScope("profile")}static credential(g,w){return Hi._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GOOGLE_SIGN_IN_METHOD,idToken:g,accessToken:w})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthIdToken:w,oauthAccessToken:S}=g;if(!w&&!S)return null;try{return y.credential(w,S)}catch{return null}}}return y.GOOGLE_SIGN_IN_METHOD="google.com",y.PROVIDER_ID="google.com",y})(),El=(()=>{class y extends zi{constructor(){super("github.com")}static credential(g){return Hi._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GITHUB_SIGN_IN_METHOD,accessToken:g})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g||!("oauthAccessToken"in g)||!g.oauthAccessToken)return null;try{return y.credential(g.oauthAccessToken)}catch{return null}}}return y.GITHUB_SIGN_IN_METHOD="github.com",y.PROVIDER_ID="github.com",y})();class ra extends dr{constructor(h,g){super(h,h),this.pendingToken=g}_getIdTokenResponse(h){return Gn(h,this.buildRequest())}_linkToIdToken(h,g){const w=this.buildRequest();return w.idToken=g,Gn(h,w)}_getReauthenticationResolver(h){const g=this.buildRequest();return g.autoCreate=!1,Gn(h,g)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(h){const g="string"==typeof h?JSON.parse(h):h,{providerId:w,signInMethod:S,pendingToken:N}=g;return w&&S&&N&&w===S?new ra(w,N):null}static _create(h,g){return new ra(h,g)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class ri extends Gi{constructor(h){U(h.startsWith("saml."),"argument-error"),super(h)}static credentialFromResult(h){return ri.samlCredentialFromTaggedObject(h)}static credentialFromError(h){return ri.samlCredentialFromTaggedObject(h.customData||{})}static credentialFromJSON(h){const g=ra.fromJSON(h);return U(g,"argument-error"),g}static samlCredentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{pendingToken:g,providerId:w}=h;if(!g||!w)return null;try{return ra._create(w,g)}catch{return null}}}let jr=(()=>{class y extends zi{constructor(){super("twitter.com")}static credential(g,w){return Hi._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.TWITTER_SIGN_IN_METHOD,oauthToken:g,oauthTokenSecret:w})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthAccessToken:w,oauthTokenSecret:S}=g;if(!w||!S)return null;try{return y.credential(w,S)}catch{return null}}}return y.TWITTER_SIGN_IN_METHOD="twitter.com",y.PROVIDER_ID="twitter.com",y})();function Io(y,h){return Xc.apply(this,arguments)}function Xc(){return(Xc=(0,f.Z)(function*(y,h){return Vr(y,"POST","/v1/accounts:signUp",Ot(y,h))})).apply(this,arguments)}class hr{constructor(h){this.user=h.user,this.providerId=h.providerId,this._tokenResponse=h._tokenResponse,this.operationType=h.operationType}static _fromIdTokenResponse(h,g,w,S=!1){return(0,f.Z)(function*(){const N=yield rt._fromIdTokenResponse(h,w,S),W=Ph(w);return new hr({user:N,providerId:W,_tokenResponse:w,operationType:g})})()}static _forOperation(h,g,w){return(0,f.Z)(function*(){yield h._updateTokensIfNecessary(w,!0);const S=Ph(w);return new hr({user:h,providerId:S,_tokenResponse:w,operationType:g})})()}}function Ph(y){return y.providerId?y.providerId:"phoneNumber"in y?"phone":null}function vn(){return(vn=(0,f.Z)(function*(y){var h;const g=fn(y);if(yield g._initializationPromise,null!==(h=g.currentUser)&&void 0!==h&&h.isAnonymous)return new hr({user:g.currentUser,providerId:null,operationType:"signIn"});const w=yield Io(g,{returnSecureToken:!0}),S=yield hr._fromIdTokenResponse(g,"signIn",w,!0);return yield g._updateCurrentUser(S.user),S})).apply(this,arguments)}class eu extends k.ZR{constructor(h,g,w,S){var N;super(g.code,g.message),this.operationType=w,this.user=S,Object.setPrototypeOf(this,eu.prototype),this.customData={appName:h.name,tenantId:null!==(N=h.tenantId)&&void 0!==N?N:void 0,_serverResponse:g.customData._serverResponse,operationType:w}}static _fromErrorAndOperation(h,g,w,S){return new eu(h,g,w,S)}}function Lh(y,h,g,w){return("reauthenticate"===h?g._getReauthenticationResolver(y):g._getIdTokenResponse(y)).catch(N=>{throw"auth/multi-factor-auth-required"===N.code?eu._fromErrorAndOperation(y,N,h,w):N})}function ii(y){return new Set(y.map(({providerId:h})=>h).filter(h=>!!h))}function tu(){return(tu=(0,f.Z)(function*(y,h){const g=(0,k.m9)(y);yield jt(!0,g,h);const{providerUserInfo:w}=yield Br(g.auth,{idToken:yield g.getIdToken(),deleteProvider:[h]}),S=ii(w||[]);return g.providerData=g.providerData.filter(N=>S.has(N.providerId)),S.has("phone")||(g.phoneNumber=null),yield g.auth._persistUserIfCurrent(g),g})).apply(this,arguments)}function Qs(y,h){return Wi.apply(this,arguments)}function Wi(){return(Wi=(0,f.Z)(function*(y,h,g=!1){const w=yield Xn(y,h._linkToIdToken(y.auth,yield y.getIdToken()),g);return hr._forOperation(y,"link",w)})).apply(this,arguments)}function jt(y,h,g){return ia.apply(this,arguments)}function ia(){return(ia=(0,f.Z)(function*(y,h,g){yield Kt(h);const S=!1===y?"provider-already-linked":"no-such-provider";U(ii(h.providerData).has(g)===y,h.auth,S)})).apply(this,arguments)}function Js(y,h){return nu.apply(this,arguments)}function nu(){return(nu=(0,f.Z)(function*(y,h,g=!1){var w;const{auth:S}=y,N="reauthenticate";try{const W=yield Xn(y,Lh(S,N,h,y),g);U(W.idToken,S,"internal-error");const ue=st(W.idToken);U(ue,S,"internal-error");const{sub:Fe}=ue;return U(y.uid===Fe,S,"user-mismatch"),hr._forOperation(y,N,W)}catch(W){throw"auth/user-not-found"===(null===(w=W)||void 0===w?void 0:w.code)&&Ae(S,"user-mismatch"),W}})).apply(this,arguments)}function yi(y,h){return ru.apply(this,arguments)}function ru(){return(ru=(0,f.Z)(function*(y,h,g=!1){const w="signIn",S=yield Lh(y,w,h),N=yield hr._fromIdTokenResponse(y,w,S);return g||(yield y._updateCurrentUser(N.user)),N})).apply(this,arguments)}function mn(y,h){return Ct.apply(this,arguments)}function Ct(){return(Ct=(0,f.Z)(function*(y,h){return yi(fn(y),h)})).apply(this,arguments)}function iu(y,h){return Vh.apply(this,arguments)}function Vh(){return(Vh=(0,f.Z)(function*(y,h){const g=(0,k.m9)(y);return yield jt(!1,g,h.providerId),Qs(g,h)})).apply(this,arguments)}function su(y,h){return ou.apply(this,arguments)}function ou(){return(ou=(0,f.Z)(function*(y,h){return Js((0,k.m9)(y),h)})).apply(this,arguments)}function Il(y,h){return Zi.apply(this,arguments)}function Zi(){return(Zi=(0,f.Z)(function*(y,h){return Vr(y,"POST","/v1/accounts:signInWithCustomToken",Ot(y,h))})).apply(this,arguments)}function sa(){return(sa=(0,f.Z)(function*(y,h){const g=fn(y),w=yield Il(g,{token:h,returnSecureToken:!0}),S=yield hr._fromIdTokenResponse(g,"signIn",w);return yield g._updateCurrentUser(S.user),S})).apply(this,arguments)}class Te{constructor(h,g){this.factorId=h,this.uid=g.mfaEnrollmentId,this.enrollmentTime=new Date(g.enrolledAt).toUTCString(),this.displayName=g.displayName}static _fromServerResponse(h,g){return"phoneInfo"in g?Ft._fromServerResponse(h,g):Ae(h,"internal-error")}}class Ft extends Te{constructor(h){super("phone",h),this.phoneNumber=h.phoneInfo}static _fromServerResponse(h,g){return new Ft(g)}}function au(y,h,g){var w;U((null===(w=g.url)||void 0===w?void 0:w.length)>0,y,"invalid-continue-uri"),U(typeof g.dynamicLinkDomain>"u"||g.dynamicLinkDomain.length>0,y,"invalid-dynamic-link-domain"),h.continueUrl=g.url,h.dynamicLinkDomain=g.dynamicLinkDomain,h.canHandleCodeInApp=g.handleCodeInApp,g.iOS&&(U(g.iOS.bundleId.length>0,y,"missing-ios-bundle-id"),h.iOSBundleId=g.iOS.bundleId),g.android&&(U(g.android.packageName.length>0,y,"missing-android-pkg-name"),h.androidInstallApp=g.android.installApp,h.androidMinimumVersionCode=g.android.minimumVersion,h.androidPackageName=g.android.packageName)}function wn(){return(wn=(0,f.Z)(function*(y,h,g){const w=(0,k.m9)(y),S={requestType:"PASSWORD_RESET",email:h};g&&au(w,S,g),yield nr(w,S)})).apply(this,arguments)}function bo(){return(bo=(0,f.Z)(function*(y,h,g){yield Pn((0,k.m9)(y),{oobCode:h,newPassword:g})})).apply(this,arguments)}function oa(){return(oa=(0,f.Z)(function*(y,h){yield gl((0,k.m9)(y),{oobCode:h})})).apply(this,arguments)}function aa(y,h){return Dl.apply(this,arguments)}function Dl(){return(Dl=(0,f.Z)(function*(y,h){const g=(0,k.m9)(y),w=yield Pn(g,{oobCode:h}),S=w.requestType;switch(U(S,g,"internal-error"),S){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":U(w.newEmail,g,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":U(w.mfaInfo,g,"internal-error");default:U(w.email,g,"internal-error")}let N=null;return w.mfaInfo&&(N=Te._fromServerResponse(fn(g),w.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===w.requestType?w.newEmail:w.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===w.requestType?w.email:w.newEmail)||null,multiFactorInfo:N},operation:S}})).apply(this,arguments)}function ed(){return(ed=(0,f.Z)(function*(y,h){const{data:g}=yield aa((0,k.m9)(y),h);return g.email})).apply(this,arguments)}function En(){return(En=(0,f.Z)(function*(y,h,g){const w=fn(y),S=yield Io(w,{returnSecureToken:!0,email:h,password:g}),N=yield hr._fromIdTokenResponse(w,"signIn",S);return yield w._updateCurrentUser(N.user),N})).apply(this,arguments)}function eo(){return(eo=(0,f.Z)(function*(y,h,g){const w=(0,k.m9)(y),S={requestType:"EMAIL_SIGNIN",email:h};U(g.handleCodeInApp,w,"argument-error"),g&&au(w,S,g),yield Qa(w,S)})).apply(this,arguments)}function ua(){return(ua=(0,f.Z)(function*(y,h,g){const w=(0,k.m9)(y),S=Si.credentialWithLink(h,g||Oe());return U(S._tenantId===(w.tenantId||null),w,"tenant-id-mismatch"),mn(w,S)})).apply(this,arguments)}function Zp(y,h){return Sl.apply(this,arguments)}function Sl(){return(Sl=(0,f.Z)(function*(y,h){return Xt(y,"POST","/v1/accounts:createAuthUri",Ot(y,h))})).apply(this,arguments)}function la(){return(la=(0,f.Z)(function*(y,h){const w={identifier:h,continueUri:ct()?Oe():"http://localhost"},{signinMethods:S}=yield Zp((0,k.m9)(y),w);return S||[]})).apply(this,arguments)}function ca(){return(ca=(0,f.Z)(function*(y,h){const g=(0,k.m9)(y),S={requestType:"VERIFY_EMAIL",idToken:yield y.getIdToken()};h&&au(g.auth,S,h);const{email:N}=yield tr(g.auth,S);N!==y.email&&(yield y.reload())})).apply(this,arguments)}function du(){return(du=(0,f.Z)(function*(y,h,g){const w=(0,k.m9)(y),N={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield y.getIdToken(),newEmail:h};g&&au(w.auth,N,g);const{email:W}=yield yl(w.auth,N);W!==y.email&&(yield y.reload())})).apply(this,arguments)}function hu(y,h){return Ml.apply(this,arguments)}function Ml(){return(Ml=(0,f.Z)(function*(y,h){return Xt(y,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function Nl(){return(Nl=(0,f.Z)(function*(y,{displayName:h,photoURL:g}){if(void 0===h&&void 0===g)return;const w=(0,k.m9)(y),N={idToken:yield w.getIdToken(),displayName:h,photoUrl:g,returnSecureToken:!0},W=yield Xn(w,hu(w.auth,N));w.displayName=W.displayName||null,w.photoURL=W.photoUrl||null;const ue=w.providerData.find(({providerId:Fe})=>"password"===Fe);ue&&(ue.displayName=w.displayName,ue.photoURL=w.photoURL),yield w._updateTokensIfNecessary(W)})).apply(this,arguments)}function no(y,h,g){return fu.apply(this,arguments)}function fu(){return(fu=(0,f.Z)(function*(y,h,g){const{auth:w}=y,N={idToken:yield y.getIdToken(),returnSecureToken:!0};h&&(N.email=h),g&&(N.password=g);const W=yield Xn(y,rn(w,N));yield y._updateTokensIfNecessary(W,!0)})).apply(this,arguments)}class $r{constructor(h,g,w={}){this.isNewUser=h,this.providerId=g,this.profile=w}}class cn extends $r{constructor(h,g,w,S){super(h,g,w),this.username=S}}class nd extends $r{constructor(h,g){super(h,"facebook.com",g)}}class Ol extends cn{constructor(h,g){super(h,"github.com",g,"string"==typeof g?.login?g?.login:null)}}class Uh extends $r{constructor(h,g){super(h,"google.com",g)}}class kl extends cn{constructor(h,g,w){super(h,"twitter.com",g,w)}}function pu(y){const{user:h,_tokenResponse:g}=y;return h.isAnonymous&&!g?{providerId:null,isNewUser:!1,profile:null}:function zn(y){var h,g;if(!y)return null;const{providerId:w}=y,S=y.rawUserInfo?JSON.parse(y.rawUserInfo):{},N=y.isNewUser||"identitytoolkit#SignupNewUserResponse"===y.kind;if(!w&&y?.idToken){const W=null===(g=null===(h=st(y.idToken))||void 0===h?void 0:h.firebase)||void 0===g?void 0:g.sign_in_provider;if(W)return new $r(N,"anonymous"!==W&&"custom"!==W?W:null)}if(!w)return null;switch(w){case"facebook.com":return new nd(N,S);case"github.com":return new Ol(N,S);case"google.com":return new Uh(N,S);case"twitter.com":return new kl(N,S,y.screenName||null);case"custom":case"anonymous":return new $r(N,null);default:return new $r(N,w,S)}}(g)}class ro{constructor(h,g){this.type=h,this.credential=g}static _fromIdtoken(h){return new ro("enroll",h)}static _fromMfaPendingCredential(h){return new ro("signin",h)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(h){var g,w;if(h?.multiFactorSession){if(null!==(g=h.multiFactorSession)&&void 0!==g&&g.pendingCredential)return ro._fromMfaPendingCredential(h.multiFactorSession.pendingCredential);if(null!==(w=h.multiFactorSession)&&void 0!==w&&w.idToken)return ro._fromIdtoken(h.multiFactorSession.idToken)}return null}}class gu{constructor(h,g,w){this.session=h,this.hints=g,this.signInResolver=w}static _fromError(h,g){const w=fn(h),S=g.customData._serverResponse,N=(S.mfaInfo||[]).map(ue=>Te._fromServerResponse(w,ue));U(S.mfaPendingCredential,w,"internal-error");const W=ro._fromMfaPendingCredential(S.mfaPendingCredential);return new gu(W,N,function(){var ue=(0,f.Z)(function*(Fe){const Qe=yield Fe._process(w,W);delete S.mfaInfo,delete S.mfaPendingCredential;const yt=Object.assign(Object.assign({},S),{idToken:Qe.idToken,refreshToken:Qe.refreshToken});switch(g.operationType){case"signIn":const gt=yield hr._fromIdTokenResponse(w,g.operationType,yt);return yield w._updateCurrentUser(gt.user),gt;case"reauthenticate":return U(g.user,w,"internal-error"),hr._forOperation(g.user,g.operationType,yt);default:Ae(w,"internal-error")}});return function(Fe){return ue.apply(this,arguments)}}())}resolveSignIn(h){var g=this;return(0,f.Z)(function*(){return g.signInResolver(h)})()}}function mu(y,h){return Xt(y,"POST","/v2/accounts/mfaEnrollment:start",Ot(y,h))}class Bh{constructor(h){this.user=h,this.enrolledFactors=[],h._onReload(g=>{g.mfaInfo&&(this.enrolledFactors=g.mfaInfo.map(w=>Te._fromServerResponse(h.auth,w)))})}static _fromUser(h){return new Bh(h)}getSession(){var h=this;return(0,f.Z)(function*(){return ro._fromIdtoken(yield h.user.getIdToken())})()}enroll(h,g){var w=this;return(0,f.Z)(function*(){const S=h,N=yield w.getSession(),W=yield Xn(w.user,S._process(w.user.auth,N,g));return yield w.user._updateTokensIfNecessary(W),w.user.reload()})()}unenroll(h){var g=this;return(0,f.Z)(function*(){var w;const S="string"==typeof h?h:h.uid,N=yield g.user.getIdToken(),W=yield Xn(g.user,function od(y,h){return Xt(y,"POST","/v2/accounts/mfaEnrollment:withdraw",Ot(y,h))}(g.user.auth,{idToken:N,mfaEnrollmentId:S}));g.enrolledFactors=g.enrolledFactors.filter(({uid:ue})=>ue!==S),yield g.user._updateTokensIfNecessary(W);try{yield g.user.reload()}catch(ue){if("auth/user-token-expired"!==(null===(w=ue)||void 0===w?void 0:w.code))throw ue}})()}}const So=new WeakMap,io="__sak";class _u{constructor(h,g){this.storageRetriever=h,this.type=g}_isAvailable(){try{return this.storage?(this.storage.setItem(io,"1"),this.storage.removeItem(io),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(h,g){return this.storage.setItem(h,JSON.stringify(g)),Promise.resolve()}_get(h){const g=this.storage.getItem(h);return Promise.resolve(g?JSON.parse(g):null)}_remove(h){return this.storage.removeItem(h),Promise.resolve()}get storage(){return this.storageRetriever()}}const ha=(()=>{class y extends _u{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(g,w)=>this.onStorageEvent(g,w),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function da(){const y=(0,k.z$)();return Nn(y)||Qt(y)}()&&function hn(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=qs(),this._shouldAllowMigration=!0}forAllChangedKeys(g){for(const w of Object.keys(this.listeners)){const S=this.storage.getItem(w),N=this.localCache[w];S!==N&&g(w,N,S)}}onStorageEvent(g,w=!1){if(!g.key)return void this.forAllChangedKeys((ue,Fe,Qe)=>{this.notifyListeners(ue,Qe)});const S=g.key;if(w?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const ue=this.storage.getItem(S);if(g.newValue!==ue)null!==g.newValue?this.storage.setItem(S,g.newValue):this.storage.removeItem(S);else if(this.localCache[S]===g.newValue&&!w)return}const N=()=>{const ue=this.storage.getItem(S);!w&&this.localCache[S]===ue||this.notifyListeners(S,ue)},W=this.storage.getItem(S);!function Hn(){return(0,k.w1)()&&10===document.documentMode}()||W===g.newValue||g.newValue===g.oldValue?N():setTimeout(N,10)}notifyListeners(g,w){this.localCache[g]=w;const S=this.listeners[g];if(S)for(const N of Array.from(S))N(w&&JSON.parse(w))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((g,w,S)=>{this.onStorageEvent(new StorageEvent("storage",{key:g,oldValue:w,newValue:S}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(g,w){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[g]||(this.listeners[g]=new Set,this.localCache[g]=this.storage.getItem(g)),this.listeners[g].add(w)}_removeListener(g,w){this.listeners[g]&&(this.listeners[g].delete(w),0===this.listeners[g].size&&delete this.listeners[g]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(g,w){var S=()=>super._set,N=this;return(0,f.Z)(function*(){yield S().call(N,g,w),N.localCache[g]=JSON.stringify(w)})()}_get(g){var w=()=>super._get,S=this;return(0,f.Z)(function*(){const N=yield w().call(S,g);return S.localCache[g]=JSON.stringify(N),N})()}_remove(g){var w=()=>super._remove,S=this;return(0,f.Z)(function*(){yield w().call(S,g),delete S.localCache[g]})()}}return y.type="LOCAL",y})(),xi=(()=>{class y extends _u{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(g,w){}_removeListener(g,w){}}return y.type="SESSION",y})();let ld=(()=>{class y{constructor(g){this.eventTarget=g,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(g){const w=this.receivers.find(N=>N.isListeningto(g));if(w)return w;const S=new y(g);return this.receivers.push(S),S}isListeningto(g){return this.eventTarget===g}handleEvent(g){var w=this;return(0,f.Z)(function*(){const S=g,{eventId:N,eventType:W,data:ue}=S.data,Fe=w.handlersMap[W];if(!Fe?.size)return;S.ports[0].postMessage({status:"ack",eventId:N,eventType:W});const Qe=Array.from(Fe).map(function(){var gt=(0,f.Z)(function*(qn){return qn(S.origin,ue)});return function(qn){return gt.apply(this,arguments)}}()),yt=yield function pa(y){return Promise.all(y.map(function(){var h=(0,f.Z)(function*(g){try{return{fulfilled:!0,value:yield g}}catch(w){return{fulfilled:!1,reason:w}}});return function(g){return h.apply(this,arguments)}}()))}(Qe);S.ports[0].postMessage({status:"done",eventId:N,eventType:W,response:yt})})()}_subscribe(g,w){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[g]||(this.handlersMap[g]=new Set),this.handlersMap[g].add(w)}_unsubscribe(g,w){this.handlersMap[g]&&w&&this.handlersMap[g].delete(w),(!w||0===this.handlersMap[g].size)&&delete this.handlersMap[g],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return y.receivers=[],y})();function ga(y="",h=10){let g="";for(let w=0;w<h;w++)g+=Math.floor(10*Math.random());return y+g}class Fl{constructor(h){this.target=h,this.handlers=new Set}removeMessageHandler(h){h.messageChannel&&(h.messageChannel.port1.removeEventListener("message",h.onMessage),h.messageChannel.port1.close()),this.handlers.delete(h)}_send(h,g,w=50){var S=this;return(0,f.Z)(function*(){const N=typeof MessageChannel<"u"?new MessageChannel:null;if(!N)throw new Error("connection_unavailable");let W,ue;return new Promise((Fe,Qe)=>{const yt=ga("",20);N.port1.start();const gt=setTimeout(()=>{Qe(new Error("unsupported_event"))},w);ue={messageChannel:N,onMessage(qn){const is=qn;if(is.data.eventId===yt)switch(is.data.status){case"ack":clearTimeout(gt),W=setTimeout(()=>{Qe(new Error("timeout"))},3e3);break;case"done":clearTimeout(W),Fe(is.data.response);break;default:clearTimeout(gt),clearTimeout(W),Qe(new Error("invalid_response"))}}},S.handlers.add(ue),N.port1.addEventListener("message",ue.onMessage),S.target.postMessage({eventType:h,eventId:yt,data:g},[N.port2])}).finally(()=>{ue&&S.removeMessageHandler(ue)})})()}}function Mn(){return window}function vu(){return typeof Mn().WorkerGlobalScope<"u"&&"function"==typeof Mn().importScripts}function ma(){return(ma=(0,f.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const Ts="firebaseLocalStorageDb",Ss="firebaseLocalStorage",Ll="fbase_key";class oo{constructor(h){this.request=h}toPromise(){return new Promise((h,g)=>{this.request.addEventListener("success",()=>{h(this.request.result)}),this.request.addEventListener("error",()=>{g(this.request.error)})})}}function ya(y,h){return y.transaction([Ss],h?"readwrite":"readonly").objectStore(Ss)}function xo(){const y=indexedDB.open(Ts,1);return new Promise((h,g)=>{y.addEventListener("error",()=>{g(y.error)}),y.addEventListener("upgradeneeded",()=>{const w=y.result;try{w.createObjectStore(Ss,{keyPath:Ll})}catch(S){g(S)}}),y.addEventListener("success",(0,f.Z)(function*(){const w=y.result;w.objectStoreNames.contains(Ss)?h(w):(w.close(),yield function dd(){const y=indexedDB.deleteDatabase(Ts);return new oo(y).toPromise()}(),h(yield xo()))}))})}function Yi(y,h,g){return Vl.apply(this,arguments)}function Vl(){return(Vl=(0,f.Z)(function*(y,h,g){const w=ya(y,!0).put({[Ll]:h,value:g});return new oo(w).toPromise()})).apply(this,arguments)}function _a(){return(_a=(0,f.Z)(function*(y,h){const g=ya(y,!1).get(h),w=yield new oo(g).toPromise();return void 0===w?null:w.value})).apply(this,arguments)}function ao(y,h){const g=ya(y,!0).delete(h);return new oo(g).toPromise()}const Mo=(()=>{class y{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var g=this;return(0,f.Z)(function*(){return g.db||(g.db=yield xo()),g.db})()}_withRetries(g){var w=this;return(0,f.Z)(function*(){let S=0;for(;;)try{const N=yield w._openDb();return yield g(N)}catch(N){if(S++>3)throw N;w.db&&(w.db.close(),w.db=void 0)}})()}initializeServiceWorkerMessaging(){var g=this;return(0,f.Z)(function*(){return vu()?g.initializeReceiver():g.initializeSender()})()}initializeReceiver(){var g=this;return(0,f.Z)(function*(){g.receiver=ld._getInstance(function Eu(){return vu()?self:null}()),g.receiver._subscribe("keyChanged",function(){var w=(0,f.Z)(function*(S,N){return{keyProcessed:(yield g._poll()).includes(N.key)}});return function(S,N){return w.apply(this,arguments)}}()),g.receiver._subscribe("ping",function(){var w=(0,f.Z)(function*(S,N){return["keyChanged"]});return function(S,N){return w.apply(this,arguments)}}())})()}initializeSender(){var g=this;return(0,f.Z)(function*(){var w,S;if(g.activeServiceWorker=yield function so(){return ma.apply(this,arguments)}(),!g.activeServiceWorker)return;g.sender=new Fl(g.activeServiceWorker);const N=yield g.sender._send("ping",{},800);!N||(null===(w=N[0])||void 0===w?void 0:w.fulfilled)&&(null===(S=N[0])||void 0===S?void 0:S.value.includes("keyChanged"))&&(g.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(g){var w=this;return(0,f.Z)(function*(){if(w.sender&&w.activeServiceWorker&&function wu(){var y;return(null===(y=navigator?.serviceWorker)||void 0===y?void 0:y.controller)||null}()===w.activeServiceWorker)try{yield w.sender._send("keyChanged",{key:g},w.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,f.Z)(function*(){try{if(!indexedDB)return!1;const g=yield xo();return yield Yi(g,io,"1"),yield ao(g,io),!0}catch{}return!1})()}_withPendingWrite(g){var w=this;return(0,f.Z)(function*(){w.pendingWrites++;try{yield g()}finally{w.pendingWrites--}})()}_set(g,w){var S=this;return(0,f.Z)(function*(){return S._withPendingWrite((0,f.Z)(function*(){return yield S._withRetries(N=>Yi(N,g,w)),S.localCache[g]=w,S.notifyServiceWorker(g)}))})()}_get(g){var w=this;return(0,f.Z)(function*(){const S=yield w._withRetries(N=>function Iu(y,h){return _a.apply(this,arguments)}(N,g));return w.localCache[g]=S,S})()}_remove(g){var w=this;return(0,f.Z)(function*(){return w._withPendingWrite((0,f.Z)(function*(){return yield w._withRetries(S=>ao(S,g)),delete w.localCache[g],w.notifyServiceWorker(g)}))})()}_poll(){var g=this;return(0,f.Z)(function*(){const w=yield g._withRetries(W=>{const ue=ya(W,!1).getAll();return new oo(ue).toPromise()});if(!w)return[];if(0!==g.pendingWrites)return[];const S=[],N=new Set;for(const{fbase_key:W,value:ue}of w)N.add(W),JSON.stringify(g.localCache[W])!==JSON.stringify(ue)&&(g.notifyListeners(W,ue),S.push(W));for(const W of Object.keys(g.localCache))g.localCache[W]&&!N.has(W)&&(g.notifyListeners(W,null),S.push(W));return S})()}notifyListeners(g,w){this.localCache[g]=w;const S=this.listeners[g];if(S)for(const N of Array.from(S))N(w)}startPolling(){var g=this;this.stopPolling(),this.pollTimer=setInterval((0,f.Z)(function*(){return g._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(g,w){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[g]||(this.listeners[g]=new Set,this._get(g)),this.listeners[g].add(w)}_removeListener(g,w){this.listeners[g]&&(this.listeners[g].delete(w),0===this.listeners[g].size&&delete this.listeners[g]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return y.type="LOCAL",y})();function Ro(y,h){return Xt(y,"POST","/v2/accounts/mfaSignIn:start",Ot(y,h))}function As(){return(As=(0,f.Z)(function*(y){return(yield Xt(y,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Oo(y){return new Promise((h,g)=>{const w=document.createElement("script");w.setAttribute("src",y),w.onload=h,w.onerror=S=>{const N=_e("internal-error");N.customData=S,g(N)},w.type="text/javascript",w.charset="UTF-8",function No(){var y,h;return null!==(h=null===(y=document.getElementsByTagName("head"))||void 0===y?void 0:y[0])&&void 0!==h?h:document}().appendChild(w)})}function Cu(y){return`__${y}${Math.floor(1e6*Math.random())}`}const va=1e12;class on{constructor(h){this.auth=h,this.counter=va,this._widgets=new Map}render(h,g){const w=this.counter;return this._widgets.set(w,new Kp(h,this.auth.name,g||{})),this.counter++,w}reset(h){var g;const w=h||va;null===(g=this._widgets.get(w))||void 0===g||g.delete(),this._widgets.delete(w)}getResponse(h){var g;return(null===(g=this._widgets.get(h||va))||void 0===g?void 0:g.getResponse())||""}execute(h){var g=this;return(0,f.Z)(function*(){var w;return null===(w=g._widgets.get(h||va))||void 0===w||w.execute(),""})()}}class Kp{constructor(h,g,w){this.params=w,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const S="string"==typeof h?document.getElementById(h):h;U(S,"argument-error",{appName:g}),this.container=S,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Iy(y){const h=[],g="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let w=0;w<y;w++)h.push(g.charAt(Math.floor(Math.random()*g.length)));return h.join("")}(50);const{callback:h,"expired-callback":g}=this.params;if(h)try{h(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,g)try{g()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Yp=Cu("rcb"),by=new tn(3e4,6e4);class jh{constructor(){var h;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(h=Mn().grecaptcha)||void 0===h||!h.render)}load(h,g=""){return U(function t0(y){return y.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(y)}(g),h,"argument-error"),this.shouldResolveImmediately(g)?Promise.resolve(Mn().grecaptcha):new Promise((w,S)=>{const N=Mn().setTimeout(()=>{S(_e(h,"network-request-failed"))},by.get());Mn()[Yp]=()=>{Mn().clearTimeout(N),delete Mn()[Yp];const ue=Mn().grecaptcha;if(!ue)return void S(_e(h,"internal-error"));const Fe=ue.render;ue.render=(Qe,yt)=>{const gt=Fe(Qe,yt);return this.counter++,gt},this.hostLanguage=g,w(ue)},Oo(`https://www.google.com/recaptcha/api.js??${(0,k.xO)({onload:Yp,render:"explicit",hl:g})}`).catch(()=>{clearTimeout(N),S(_e(h,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(h){var g;return!(null===(g=Mn().grecaptcha)||void 0===g||!g.render)&&(h===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Bl{load(h){return(0,f.Z)(function*(){return new on(h)})()}clearedOneInstance(){}}const Cy="recaptcha",Ty={theme:"light",type:"image"};class ir{constructor(h,g=Object.assign({},Ty),w){this.parameters=g,this.type=Cy,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=fn(w),this.isInvisible="invisible"===this.parameters.size,U(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const S="string"==typeof h?document.getElementById(h):h;U(S,this.auth,"argument-error"),this.container=S,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Bl:new jh,this.validateStartingState()}verify(){var h=this;return(0,f.Z)(function*(){h.assertNotDestroyed();const g=yield h.render(),w=h.getAssertedRecaptcha();return w.getResponse(g)||new Promise(N=>{const W=ue=>{!ue||(h.tokenChangeListeners.delete(W),N(ue))};h.tokenChangeListeners.add(W),h.isInvisible&&w.execute(g)})})()}render(){try{this.assertNotDestroyed()}catch(h){return Promise.reject(h)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(h=>{throw this.renderPromise=null,h})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(h=>{this.container.removeChild(h)})}validateStartingState(){U(!this.parameters.sitekey,this.auth,"argument-error"),U(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),U(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(h){return g=>{if(this.tokenChangeListeners.forEach(w=>w(g)),"function"==typeof h)h(g);else if("string"==typeof h){const w=Mn()[h];"function"==typeof w&&w(g)}}}assertNotDestroyed(){U(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var h=this;return(0,f.Z)(function*(){if(yield h.init(),!h.widgetId){let g=h.container;if(!h.isInvisible){const w=document.createElement("div");g.appendChild(w),g=w}h.widgetId=h.getAssertedRecaptcha().render(g,h.parameters)}return h.widgetId})()}init(){var h=this;return(0,f.Z)(function*(){U(ct()&&!vu(),h.auth,"internal-error"),yield function zt(){let y=null;return new Promise(h=>{"complete"!==document.readyState?(y=()=>h(),window.addEventListener("load",y)):h()}).catch(h=>{throw y&&window.removeEventListener("load",y),h})}(),h.recaptcha=yield h._recaptchaLoader.load(h.auth,h.auth.languageCode||void 0);const g=yield function Hr(y){return As.apply(this,arguments)}(h.auth);U(g,h.auth,"internal-error"),h.parameters.sitekey=g})()}getAssertedRecaptcha(){return U(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class fr{constructor(h,g){this.verificationId=h,this.onConfirmation=g}confirm(h){const g=bs._fromVerification(this.verificationId,h);return this.onConfirmation(g)}}function Tu(){return(Tu=(0,f.Z)(function*(y,h,g){const w=fn(y),S=yield wi(w,h,(0,k.m9)(g));return new fr(S,N=>mn(w,N))})).apply(this,arguments)}function vi(){return(vi=(0,f.Z)(function*(y,h,g){const w=(0,k.m9)(y);yield jt(!1,w,"phone");const S=yield wi(w.auth,h,(0,k.m9)(g));return new fr(S,N=>iu(w,N))})).apply(this,arguments)}function Po(){return(Po=(0,f.Z)(function*(y,h,g){const w=(0,k.m9)(y),S=yield wi(w.auth,h,(0,k.m9)(g));return new fr(S,N=>su(w,N))})).apply(this,arguments)}function wi(y,h,g){return Ji.apply(this,arguments)}function Ji(){return(Ji=(0,f.Z)(function*(y,h,g){var w;const S=yield g.verify();try{let N;if(U("string"==typeof S,y,"argument-error"),U(g.type===Cy,y,"argument-error"),N="string"==typeof h?{phoneNumber:h}:h,"session"in N){const W=N.session;if("phoneNumber"in N)return U("enroll"===W.type,y,"internal-error"),(yield mu(y,{idToken:W.credential,phoneEnrollmentInfo:{phoneNumber:N.phoneNumber,recaptchaToken:S}})).phoneSessionInfo.sessionInfo;{U("signin"===W.type,y,"internal-error");const ue=(null===(w=N.multiFactorHint)||void 0===w?void 0:w.uid)||N.multiFactorUid;return U(ue,y,"missing-multi-factor-info"),(yield Ro(y,{mfaPendingCredential:W.credential,mfaEnrollmentId:ue,phoneSignInInfo:{recaptchaToken:S}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:W}=yield Hp(y,{phoneNumber:N.phoneNumber,recaptchaToken:S});return W}}finally{g._reset()}})).apply(this,arguments)}function pt(){return(pt=(0,f.Z)(function*(y,h){yield Qs((0,k.m9)(y),h)})).apply(this,arguments)}let Su=(()=>{class y{constructor(g){this.providerId=y.PROVIDER_ID,this.auth=fn(g)}verifyPhoneNumber(g,w){return wi(this.auth,g,(0,k.m9)(w))}static credential(g,w){return bs._fromVerification(g,w)}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{phoneNumber:w,temporaryProof:S}=g;return w&&S?bs._fromTokenResponse(w,S):null}}return y.PROVIDER_ID="phone",y.PHONE_SIGN_IN_METHOD="phone",y})();function lo(y,h){return h?ie(h):(U(y._popupRedirectResolver,y,"argument-error"),y._popupRedirectResolver)}class wa extends dr{constructor(h){super("custom","custom"),this.params=h}_getIdTokenResponse(h){return Gn(h,this._buildIdpRequest())}_linkToIdToken(h,g){return Gn(h,this._buildIdpRequest(g))}_getReauthenticationResolver(h){return Gn(h,this._buildIdpRequest())}_buildIdpRequest(h){const g={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return h&&(g.idToken=h),g}}function Tr(y){return yi(y.auth,new wa(y),y.bypassAuthState)}function Ea(y){const{auth:h,user:g}=y;return U(g,h,"internal-error"),Js(g,new wa(y),y.bypassAuthState)}function Xi(y){return Mi.apply(this,arguments)}function Mi(){return(Mi=(0,f.Z)(function*(y){const{auth:h,user:g}=y;return U(g,h,"internal-error"),Qs(g,new wa(y),y.bypassAuthState)})).apply(this,arguments)}class Sr{constructor(h,g,w,S,N=!1){this.auth=h,this.resolver=w,this.user=S,this.bypassAuthState=N,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(g)?g:[g]}execute(){var h=this;return new Promise(function(){var g=(0,f.Z)(function*(w,S){h.pendingPromise={resolve:w,reject:S};try{h.eventManager=yield h.resolver._initialize(h.auth),yield h.onExecution(),h.eventManager.registerConsumer(h)}catch(N){h.reject(N)}});return function(w,S){return g.apply(this,arguments)}}())}onAuthEvent(h){var g=this;return(0,f.Z)(function*(){const{urlResponse:w,sessionId:S,postBody:N,tenantId:W,error:ue,type:Fe}=h;if(ue)return void g.reject(ue);const Qe={auth:g.auth,requestUri:w,sessionId:S,tenantId:W||void 0,postBody:N||void 0,user:g.user,bypassAuthState:g.bypassAuthState};try{g.resolve(yield g.getIdpTask(Fe)(Qe))}catch(yt){g.reject(yt)}})()}onError(h){this.reject(h)}getIdpTask(h){switch(h){case"signInViaPopup":case"signInViaRedirect":return Tr;case"linkViaPopup":case"linkViaRedirect":return Xi;case"reauthViaPopup":case"reauthViaRedirect":return Ea;default:Ae(this.auth,"internal-error")}}resolve(h){K(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(h),this.unregisterAndCleanUp()}reject(h){K(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(h),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const $l=new tn(2e3,1e4);function Ia(){return(Ia=(0,f.Z)(function*(y,h,g){const w=fn(y);Ue(y,h,Gi);const S=lo(w,g);return new zr(w,"signInViaPopup",h,S).executeNotNull()})).apply(this,arguments)}function hd(){return(hd=(0,f.Z)(function*(y,h,g){const w=(0,k.m9)(y);Ue(w.auth,h,Gi);const S=lo(w.auth,g);return new zr(w.auth,"reauthViaPopup",h,S,w).executeNotNull()})).apply(this,arguments)}function ba(){return(ba=(0,f.Z)(function*(y,h,g){const w=(0,k.m9)(y);Ue(w.auth,h,Gi);const S=lo(w.auth,g);return new zr(w.auth,"linkViaPopup",h,S,w).executeNotNull()})).apply(this,arguments)}let zr=(()=>{class y extends Sr{constructor(g,w,S,N,W){super(g,w,N,W),this.provider=S,this.authWindow=null,this.pollId=null,y.currentPopupAction&&y.currentPopupAction.cancel(),y.currentPopupAction=this}executeNotNull(){var g=this;return(0,f.Z)(function*(){const w=yield g.execute();return U(w,g.auth,"internal-error"),w})()}onExecution(){var g=this;return(0,f.Z)(function*(){K(1===g.filter.length,"Popup operations only handle one event");const w=ga();g.authWindow=yield g.resolver._openPopup(g.auth,g.provider,g.filter[0],w),g.authWindow.associatedEvent=w,g.resolver._originValidation(g.auth).catch(S=>{g.reject(S)}),g.resolver._isIframeWebStorageSupported(g.auth,S=>{S||g.reject(_e(g.auth,"web-storage-unsupported"))}),g.pollUserCancellation()})()}get eventId(){var g;return(null===(g=this.authWindow)||void 0===g?void 0:g.associatedEvent)||null}cancel(){this.reject(_e(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,y.currentPopupAction=null}pollUserCancellation(){const g=()=>{var w,S;this.pollId=null!==(S=null===(w=this.authWindow)||void 0===w?void 0:w.window)&&void 0!==S&&S.closed?window.setTimeout(()=>{this.pollId=null,this.reject(_e(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(g,$l.get())};g()}}return y.currentPopupAction=null,y})();const an=new Map;class Ri extends Sr{constructor(h,g,w=!1){super(h,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],g,void 0,w),this.eventId=null}execute(){var h=()=>super.execute,g=this;return(0,f.Z)(function*(){let w=an.get(g.auth._key());if(!w){try{const N=(yield function Mu(y,h){return xs.apply(this,arguments)}(g.resolver,g.auth))?yield h().call(g):null;w=()=>Promise.resolve(N)}catch(S){w=()=>Promise.reject(S)}an.set(g.auth._key(),w)}return g.bypassAuthState||an.set(g.auth._key(),()=>Promise.resolve(null)),w()})()}onAuthEvent(h){var g=()=>super.onAuthEvent,w=this;return(0,f.Z)(function*(){if("signInViaRedirect"===h.type)return g().call(w,h);if("unknown"!==h.type){if(h.eventId){const S=yield w.auth._redirectUserForId(h.eventId);if(S)return w.user=S,g().call(w,h);w.resolve(null)}}else w.resolve(null)})()}onExecution(){return(0,f.Z)(function*(){})()}cleanUp(){}}function xs(){return(xs=(0,f.Z)(function*(y,h){const g=Gl(h),w=es(y);if(!(yield w._isAvailable()))return!1;const S="true"===(yield w._get(g));return yield w._remove(g),S})).apply(this,arguments)}function Ru(y,h){return Ni.apply(this,arguments)}function Ni(){return(Ni=(0,f.Z)(function*(y,h){return es(y)._set(Gl(h),"true")})).apply(this,arguments)}function co(y,h){an.set(y._key(),h)}function es(y){return ie(y._redirectPersistence)}function Gl(y){return $n("pendingRedirect",y.config.apiKey,y.name)}function D(){return(D=(0,f.Z)(function*(y,h,g){const w=fn(y);Ue(y,h,Gi);const S=lo(w,g);return yield Ru(S,w),S._openRedirect(w,h,"signInViaRedirect")})).apply(this,arguments)}function F(){return(F=(0,f.Z)(function*(y,h,g){const w=(0,k.m9)(y);Ue(w.auth,h,Gi);const S=lo(w.auth,g);yield Ru(S,w.auth);const N=yield dt(w);return S._openRedirect(w.auth,h,"reauthViaRedirect",N)})).apply(this,arguments)}function De(){return(De=(0,f.Z)(function*(y,h,g){const w=(0,k.m9)(y);Ue(w.auth,h,Gi);const S=lo(w.auth,g);yield jt(!1,w,h.providerId),yield Ru(S,w.auth);const N=yield dt(w);return S._openRedirect(w.auth,h,"linkViaRedirect",N)})).apply(this,arguments)}function at(){return(at=(0,f.Z)(function*(y,h){return yield fn(y)._initializationPromise,vt(y,h,!1)})).apply(this,arguments)}function vt(y,h){return St.apply(this,arguments)}function St(){return(St=(0,f.Z)(function*(y,h,g=!1){const w=fn(y),S=lo(w,h),W=yield new Ri(w,S,g).execute();return W&&!g&&(delete W.user._redirectEventId,yield w._persistUserIfCurrent(W.user),yield w._setRedirectUser(null,h)),W})).apply(this,arguments)}function dt(y){return pn.apply(this,arguments)}function pn(){return(pn=(0,f.Z)(function*(y){const h=ga(`${y.uid}:::`);return y._redirectEventId=h,yield y.auth._setRedirectUser(y),yield y.auth._persistUserIfCurrent(y),h})).apply(this,arguments)}class Ms{constructor(h){this.auth=h,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(h){this.consumers.add(h),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,h)&&(this.sendToConsumer(this.queuedRedirectEvent,h),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(h){this.consumers.delete(h)}onEvent(h){if(this.hasEventBeenHandled(h))return!1;let g=!1;return this.consumers.forEach(w=>{this.isEventForConsumer(h,w)&&(g=!0,this.sendToConsumer(h,w),this.saveEventToCache(h))}),this.hasHandledPotentialRedirect||!function ho(y){switch(y.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Rs(y);default:return!1}}(h)||(this.hasHandledPotentialRedirect=!0,g||(this.queuedRedirectEvent=h,g=!0)),g}sendToConsumer(h,g){var w;if(h.error&&!Rs(h)){const S=(null===(w=h.error.code)||void 0===w?void 0:w.split("auth/")[1])||"internal-error";g.onError(_e(this.auth,S))}else g.onAuthEvent(h)}isEventForConsumer(h,g){const w=null===g.eventId||!!h.eventId&&h.eventId===g.eventId;return g.filter.includes(h.type)&&w}hasEventBeenHandled(h){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(ts(h))}saveEventToCache(h){this.cachedEventUids.add(ts(h)),this.lastProcessedEventTime=Date.now()}}function ts(y){return[y.type,y.eventId,y.sessionId,y.tenantId].filter(h=>h).join("-")}function Rs({type:y,error:h}){return"unknown"===y&&"auth/no-auth-event"===h?.code}function ns(y){return Dn.apply(this,arguments)}function Dn(){return(Dn=(0,f.Z)(function*(y,h={}){return Xt(y,"GET","/v1/projects",h)})).apply(this,arguments)}const qr=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Ns=/^https?/;function Sy(){return(Sy=(0,f.Z)(function*(y){if(y.config.emulator)return;const{authorizedDomains:h}=yield ns(y);for(const g of h)try{if(Gh(g))return}catch{}Ae(y,"unauthorized-domain")})).apply(this,arguments)}function Gh(y){const h=Oe(),{protocol:g,hostname:w}=new URL(h);if(y.startsWith("chrome-extension://")){const W=new URL(y);return""===W.hostname&&""===w?"chrome-extension:"===g&&y.replace("chrome-extension://","")===h.replace("chrome-extension://",""):"chrome-extension:"===g&&W.hostname===w}if(!Ns.test(g))return!1;if(qr.test(y))return w===y;const S=y.replace(/\./g,"\\.");return new RegExp("^(.+\\."+S+"|"+S+")$","i").test(w)}const zh=new tn(3e4,6e4);function pd(){const y=Mn().___jsl;if(y?.H)for(const h of Object.keys(y.H))if(y.H[h].r=y.H[h].r||[],y.H[h].L=y.H[h].L||[],y.H[h].r=[...y.H[h].L],y.CP)for(let g=0;g<y.CP.length;g++)y.CP[g]=null}let zl=null;function qh(y){return zl=zl||function Da(y){return new Promise((h,g)=>{var w,S,N;function W(){pd(),gapi.load("gapi.iframes",{callback:()=>{h(gapi.iframes.getContext())},ontimeout:()=>{pd(),g(_e(y,"network-request-failed"))},timeout:zh.get()})}if(null!==(S=null===(w=Mn().gapi)||void 0===w?void 0:w.iframes)&&void 0!==S&&S.Iframe)h(gapi.iframes.getContext());else{if(null===(N=Mn().gapi)||void 0===N||!N.load){const ue=Cu("iframefcb");return Mn()[ue]=()=>{gapi.load?W():g(_e(y,"network-request-failed"))},Oo(`https://apis.google.com/js/api.js?onload=${ue}`).catch(Fe=>g(Fe))}W()}}).catch(h=>{throw zl=null,h})}(y),zl}const Jp=new tn(5e3,15e3),kD={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Xp=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function n0(y){const h=y.config;U(h.authDomain,y,"auth-domain-config-required");const g=h.emulator?Sn(h,"emulator/auth/iframe"):`https://${y.config.authDomain}/__/auth/iframe`,w={apiKey:h.apiKey,appName:y.name,v:oe.SDK_VERSION},S=Xp.get(y.config.apiHost);S&&(w.eid=S);const N=y._getFrameworks();return N.length&&(w.fw=N.join(",")),`${g}?${(0,k.xO)(w).slice(1)}`}function ql(){return ql=(0,f.Z)(function*(y){const h=yield qh(y),g=Mn().gapi;return U(g,y,"internal-error"),h.open({where:document.body,url:n0(y),messageHandlersFilter:g.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:kD,dontclear:!0},w=>new Promise(function(){var S=(0,f.Z)(function*(N,W){yield w.restyle({setHideOnLeave:!1});const ue=_e(y,"network-request-failed"),Fe=Mn().setTimeout(()=>{W(ue)},Jp.get());function Qe(){Mn().clearTimeout(Fe),N(w)}w.ping(Qe).then(Qe,()=>{W(ue)})});return function(N,W){return S.apply(this,arguments)}}()))}),ql.apply(this,arguments)}const Wh={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Ta{constructor(h){this.window=h,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Ou(y,h,g,w,S,N){U(y.config.authDomain,y,"auth-domain-config-required"),U(y.config.apiKey,y,"invalid-api-key");const W={apiKey:y.config.apiKey,appName:y.name,authType:g,redirectUrl:w,v:oe.SDK_VERSION,eventId:S};if(h instanceof Gi){h.setDefaultLanguage(y.languageCode),W.providerId=h.providerId||"",(0,k.xb)(h.getCustomParameters())||(W.customParameters=JSON.stringify(h.getCustomParameters()));for(const[Fe,Qe]of Object.entries(N||{}))W[Fe]=Qe}if(h instanceof zi){const Fe=h.getScopes().filter(Qe=>""!==Qe);Fe.length>0&&(W.scopes=Fe.join(","))}y.tenantId&&(W.tid=y.tenantId);const ue=W;for(const Fe of Object.keys(ue))void 0===ue[Fe]&&delete ue[Fe];return`${function eg({config:y}){return y.emulator?Sn(y,"emulator/auth/handler"):`https://${y.authDomain}/__/auth/handler`}(y)}?${(0,k.xO)(ue).slice(1)}`}const Zl="webStorageSupport";class rs extends class ng{constructor(h){this.factorId=h}_process(h,g,w){switch(g.type){case"enroll":return this._finalizeEnroll(h,g.credential,w);case"signin":return this._finalizeSignIn(h,g.credential);default:return ge("unexpected MultiFactorSessionType")}}}{constructor(h){super("phone"),this.credential=h}static _fromCredential(h){return new rs(h)}_finalizeEnroll(h,g,w){return function yu(y,h){return Xt(y,"POST","/v2/accounts/mfaEnrollment:finalize",Ot(y,h))}(h,{idToken:g,displayName:w,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(h,g){return function Du(y,h){return Xt(y,"POST","/v2/accounts/mfaSignIn:finalize",Ot(y,h))}(h,{mfaPendingCredential:g,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let ku=(()=>{class y{constructor(){}static assertion(g){return rs._fromCredential(g)}}return y.FACTOR_ID="phone",y})();var gd="@firebase/auth";class PD{constructor(h){this.auth=h,this.internalListeners=new Map}getUid(){var h;return this.assertAuthConfigured(),(null===(h=this.auth.currentUser)||void 0===h?void 0:h.uid)||null}getToken(h){var g=this;return(0,f.Z)(function*(){return g.assertAuthConfigured(),yield g.auth._initializationPromise,g.auth.currentUser?{accessToken:yield g.auth.currentUser.getIdToken(h)}:null})()}addAuthTokenListener(h){if(this.assertAuthConfigured(),this.internalListeners.has(h))return;const g=this.auth.onIdTokenChanged(w=>{var S;h((null===(S=w)||void 0===S?void 0:S.stsTokenManager.accessToken)||null)});this.internalListeners.set(h,g),this.updateProactiveRefresh()}removeAuthTokenListener(h){this.assertAuthConfigured();const g=this.internalListeners.get(h);!g||(this.internalListeners.delete(h),g(),this.updateProactiveRefresh())}assertAuthConfigured(){U(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Oi(){return window}function Zh(){return(Zh=(0,f.Z)(function*(y,h,g){var w;const{BuildInfo:S}=Oi();K(h.sessionId,"AuthEvent did not contain a session ID");const N=yield Yh(h.sessionId),W={};return Qt()?W.ibi=S.packageName:On()?W.apn=S.packageName:Ae(y,"operation-not-supported-in-this-environment"),S.displayName&&(W.appDisplayName=S.displayName),W.sessionId=N,Ou(y,g,h.type,void 0,null!==(w=h.eventId)&&void 0!==w?w:void 0,W)})).apply(this,arguments)}function fo(){return(fo=(0,f.Z)(function*(y){const{BuildInfo:h}=Oi(),g={};Qt()?g.iosBundleId=h.packageName:On()?g.androidPackageName=h.packageName:Ae(y,"operation-not-supported-in-this-environment"),yield ns(y,g)})).apply(this,arguments)}function Lo(){return(Lo=(0,f.Z)(function*(y,h,g){const{cordova:w}=Oi();let S=()=>{};try{yield new Promise((N,W)=>{let ue=null;function Fe(){var gt;N();const qn=null===(gt=w.plugins.browsertab)||void 0===gt?void 0:gt.close;"function"==typeof qn&&qn(),"function"==typeof g?.close&&g.close()}function Qe(){ue||(ue=window.setTimeout(()=>{W(_e(y,"redirect-cancelled-by-user"))},2e3))}function yt(){"visible"===document?.visibilityState&&Qe()}h.addPassiveListener(Fe),document.addEventListener("resume",Qe,!1),On()&&document.addEventListener("visibilitychange",yt,!1),S=()=>{h.removePassiveListener(Fe),document.removeEventListener("resume",Qe,!1),document.removeEventListener("visibilitychange",yt,!1),ue&&window.clearTimeout(ue)}})}finally{S()}})).apply(this,arguments)}function Yh(y){return _d.apply(this,arguments)}function _d(){return(_d=(0,f.Z)(function*(y){const h=LD(y),g=yield crypto.subtle.digest("SHA-256",h);return Array.from(new Uint8Array(g)).map(S=>S.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function LD(y){if(K(/[0-9a-zA-Z]+/.test(y),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(y);const h=new ArrayBuffer(y.length),g=new Uint8Array(h);for(let w=0;w<y.length;w++)g[w]=y.charCodeAt(w);return g}!function FD(y){(0,oe._registerComponent)(new le.wA("auth",(h,{options:g})=>{const w=h.getProvider("app").getImmediate(),S=h.getProvider("heartbeat"),{apiKey:N,authDomain:W}=w.options;return((ue,Fe)=>{U(N&&!N.includes(":"),"invalid-api-key",{appName:ue.name}),U(!W?.includes(":"),"argument-error",{appName:ue.name});const Qe={apiKey:N,authDomain:W,clientPlatform:y,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:_s(y)},yt=new Rt(ue,Fe,Qe);return function Pe(y,h){const g=h?.persistence||[],w=(Array.isArray(g)?g:[g]).map(ie);h?.errorMap&&y._updateErrorMap(h.errorMap),y._initializeWithPersistence(w,h?.popupRedirectResolver)}(yt,g),yt})(w,S)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((h,g,w)=>{h.getProvider("auth-internal").initialize()})),(0,oe._registerComponent)(new le.wA("auth-internal",h=>{const g=fn(h.getProvider("auth").getImmediate());return new PD(g)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,oe.registerVersion)(gd,"0.20.6",function o0(y){switch(y){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(y)),(0,oe.registerVersion)(gd,"0.20.6","esm2017")}("Browser");class Ny extends Ms{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(h=>{this.resolveInialized=h})}addPassiveListener(h){this.passiveListeners.add(h)}removePassiveListener(h){this.passiveListeners.delete(h)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(h){return this.resolveInialized(),this.passiveListeners.forEach(g=>g(h)),super.onEvent(h)}initialized(){var h=this;return(0,f.Z)(function*(){yield h.initPromise})()}}function vd(y){return Qh.apply(this,arguments)}function Qh(){return(Qh=(0,f.Z)(function*(y){const h=yield lg()._get(Jh(y));return h&&(yield lg()._remove(Jh(y))),h})).apply(this,arguments)}function ug(){const y=[],h="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let g=0;g<20;g++){const w=Math.floor(Math.random()*h.length);y.push(h.charAt(w))}return y.join("")}function lg(){return ie(ha)}function Jh(y){return $n("authEvent",y.config.apiKey,y.name)}function Pu(y){if(!y?.includes("?"))return{};const[h,...g]=y.split("?");return(0,k.zd)(g.join("?"))}function hg(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:_e("no-auth-event")}}function ec(){var y;return(null===(y=self?.location)||void 0===y?void 0:y.protocol)||null}function Xh(y=(0,k.z$)()){return!("file:"!==ec()&&"ionic:"!==ec()&&"capacitor:"!==ec()||!y.toLowerCase().match(/iphone|ipad|ipod|android/))}function Py(){try{const y=self.localStorage,h=ga();if(y)return y.setItem(h,"1"),y.removeItem(h),!function gg(y=(0,k.z$)()){return function pg(){return(0,k.w1)()&&11===document?.documentMode}()||function wd(y=(0,k.z$)()){return/Edge\/\d+/.test(y)}(y)}()||(0,k.hl)()}catch{return Vo()&&(0,k.hl)()}return!1}function Vo(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function tc(){return(function Oy(){return"http:"===ec()||"https:"===ec()}()||(0,k.ru)()||Xh())&&!function ky(){return(0,k.b$)()||(0,k.UG)()}()&&Py()&&!Vo()}function mg(){return Xh()&&typeof document<"u"}function Ed(){return(Ed=(0,f.Z)(function*(){return!!mg()&&new Promise(y=>{const h=setTimeout(()=>{y(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(h),y(!0)})})})).apply(this,arguments)}const oi={LOCAL:"local",NONE:"none",SESSION:"session"},xa=U,nc="persistence";function Id(y){return rc.apply(this,arguments)}function rc(){return(rc=(0,f.Z)(function*(y){yield y._initializationPromise;const h=tf(),g=$n(nc,y.config.apiKey,y.name);h&&h.setItem(g,y._getPersistence())})).apply(this,arguments)}function tf(){var y;try{return(null===(y=function yg(){return typeof window<"u"?window:null}())||void 0===y?void 0:y.sessionStorage)||null}catch{return null}}const po=U;class Uo{constructor(){this.browserResolver=ie(class tg{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=xi,this._completeRedirectFn=vt,this._overrideRedirectResult=co}_openPopup(h,g,w,S){var N=this;return(0,f.Z)(function*(){var W;K(null===(W=N.eventManagers[h._key()])||void 0===W?void 0:W.manager,"_initialize() not called before _openPopup()");const ue=Ou(h,g,w,Oe(),S);return function Sa(y,h,g,w=500,S=600){const N=Math.max((window.screen.availHeight-S)/2,0).toString(),W=Math.max((window.screen.availWidth-w)/2,0).toString();let ue="";const Fe=Object.assign(Object.assign({},Wh),{width:w.toString(),height:S.toString(),top:N,left:W}),Qe=(0,k.z$)().toLowerCase();g&&(ue=Ci(Qe)?"_blank":g),dn(Qe)&&(h=h||"http://localhost",Fe.scrollbars="yes");const yt=Object.entries(Fe).reduce((qn,[is,Lu])=>`${qn}${is}=${Lu},`,"");if(function gi(y=(0,k.z$)()){var h;return Qt(y)&&!(null===(h=window.navigator)||void 0===h||!h.standalone)}(Qe)&&"_self"!==ue)return function Wl(y,h){const g=document.createElement("a");g.href=y,g.target=h;const w=document.createEvent("MouseEvent");w.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),g.dispatchEvent(w)}(h||"",ue),new Ta(null);const gt=window.open(h||"",ue,yt);U(gt,y,"popup-blocked");try{gt.focus()}catch{}return new Ta(gt)}(h,ue,ga())})()}_openRedirect(h,g,w,S){var N=this;return(0,f.Z)(function*(){return yield N._originValidation(h),function _i(y){Mn().location.href=y}(Ou(h,g,w,Oe(),S)),new Promise(()=>{})})()}_initialize(h){const g=h._key();if(this.eventManagers[g]){const{manager:S,promise:N}=this.eventManagers[g];return S?Promise.resolve(S):(K(N,"If manager is not set, promise should be"),N)}const w=this.initAndGetManager(h);return this.eventManagers[g]={promise:w},w.catch(()=>{delete this.eventManagers[g]}),w}initAndGetManager(h){var g=this;return(0,f.Z)(function*(){const w=yield function xy(y){return ql.apply(this,arguments)}(h),S=new Ms(h);return w.register("authEvent",N=>(U(N?.authEvent,h,"invalid-auth-event"),{status:S.onEvent(N.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),g.eventManagers[h._key()]={manager:S},g.iframes[h._key()]=w,S})()}_isIframeWebStorageSupported(h,g){this.iframes[h._key()].send(Zl,{type:Zl},S=>{var N;const W=null===(N=S?.[0])||void 0===N?void 0:N[Zl];void 0!==W&&g(!!W),Ae(h,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(h){const g=h._key();return this.originValidationPromises[g]||(this.originValidationPromises[g]=function Hh(y){return Sy.apply(this,arguments)}(h)),this.originValidationPromises[g]}get _shouldInitProactively(){return qs()||Nn()||Qt()}}),this.cordovaResolver=ie(class cg{constructor(){this._redirectPersistence=xi,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=vt,this._overrideRedirectResult=co}_initialize(h){var g=this;return(0,f.Z)(function*(){const w=h._key();let S=g.eventManagers.get(w);return S||(S=new Ny(h),g.eventManagers.set(w,S),g.attachCallbackListeners(h,S)),S})()}_openPopup(h){Ae(h,"operation-not-supported-in-this-environment")}_openRedirect(h,g,w,S){var N=this;return(0,f.Z)(function*(){!function sg(y){var h,g,w,S,N,W,ue,Fe,Qe,yt;const gt=Oi();U("function"==typeof(null===(h=gt?.universalLinks)||void 0===h?void 0:h.subscribe),y,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),U(typeof(null===(g=gt?.BuildInfo)||void 0===g?void 0:g.packageName)<"u",y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),U("function"==typeof(null===(N=null===(S=null===(w=gt?.cordova)||void 0===w?void 0:w.plugins)||void 0===S?void 0:S.browsertab)||void 0===N?void 0:N.openUrl),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),U("function"==typeof(null===(Fe=null===(ue=null===(W=gt?.cordova)||void 0===W?void 0:W.plugins)||void 0===ue?void 0:ue.browsertab)||void 0===Fe?void 0:Fe.isAvailable),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),U("function"==typeof(null===(yt=null===(Qe=gt?.cordova)||void 0===Qe?void 0:Qe.InAppBrowser)||void 0===yt?void 0:yt.open),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(h);const W=yield N._initialize(h);yield W.initialized(),W.resetRedirect(),function Hl(){an.clear()}(),yield N._originValidation(h);const ue=function og(y,h,g=null){return{type:h,eventId:g,urlResponse:null,sessionId:ug(),postBody:null,tenantId:y.tenantId,error:_e(y,"no-auth-event")}}(h,w,S);yield function Yl(y,h){return lg()._set(Jh(y),h)}(h,ue);const Fe=yield function yd(y,h,g){return Zh.apply(this,arguments)}(h,ue,g),Qe=yield function ig(y){const{cordova:h}=Oi();return new Promise(g=>{h.plugins.browsertab.isAvailable(w=>{let S=null;w?h.plugins.browsertab.openUrl(y):S=h.InAppBrowser.open(y,function ni(y=(0,k.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(y)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(y)}()?"_blank":"_system","location=yes"),g(S)})})}(Fe);return function Os(y,h,g){return Lo.apply(this,arguments)}(h,W,Qe)})()}_isIframeWebStorageSupported(h,g){throw new Error("Method not implemented.")}_originValidation(h){const g=h._key();return this.originValidationPromises[g]||(this.originValidationPromises[g]=function Kh(y){return fo.apply(this,arguments)}(h)),this.originValidationPromises[g]}attachCallbackListeners(h,g){const{universalLinks:w,handleOpenURL:S,BuildInfo:N}=Oi(),W=setTimeout((0,f.Z)(function*(){yield vd(h),g.onEvent(hg())}),500),ue=function(){var yt=(0,f.Z)(function*(gt){clearTimeout(W);const qn=yield vd(h);let is=null;qn&&gt?.url&&(is=function ag(y,h){var g,w;const S=function Jl(y){const h=Pu(y),g=h.link?decodeURIComponent(h.link):void 0,w=Pu(g).link,S=h.deep_link_id?decodeURIComponent(h.deep_link_id):void 0;return Pu(S).link||S||w||g||y}(h);if(S.includes("/__/auth/callback")){const N=Pu(S),W=N.firebaseError?function Ql(y){try{return JSON.parse(y)}catch{return null}}(decodeURIComponent(N.firebaseError)):null,ue=null===(w=null===(g=W?.code)||void 0===g?void 0:g.split("auth/"))||void 0===w?void 0:w[1],Fe=ue?_e(ue):null;return Fe?{type:y.type,eventId:y.eventId,tenantId:y.tenantId,error:Fe,urlResponse:null,sessionId:null,postBody:null}:{type:y.type,eventId:y.eventId,tenantId:y.tenantId,sessionId:y.sessionId,urlResponse:S,postBody:null}}return null}(qn,gt.url)),g.onEvent(is||hg())});return function(qn){return yt.apply(this,arguments)}}();typeof w<"u"&&"function"==typeof w.subscribe&&w.subscribe(null,ue);const Fe=S,Qe=`${N.packageName.toLowerCase()}://`;Oi().handleOpenURL=function(){var yt=(0,f.Z)(function*(gt){if(gt.toLowerCase().startsWith(Qe)&&ue({url:gt}),"function"==typeof Fe)try{Fe(gt)}catch(qn){console.error(qn)}});return function(gt){return yt.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=xi,this._completeRedirectFn=vt,this._overrideRedirectResult=co}_initialize(h){var g=this;return(0,f.Z)(function*(){return yield g.selectUnderlyingResolver(),g.assertedUnderlyingResolver._initialize(h)})()}_openPopup(h,g,w,S){var N=this;return(0,f.Z)(function*(){return yield N.selectUnderlyingResolver(),N.assertedUnderlyingResolver._openPopup(h,g,w,S)})()}_openRedirect(h,g,w,S){var N=this;return(0,f.Z)(function*(){return yield N.selectUnderlyingResolver(),N.assertedUnderlyingResolver._openRedirect(h,g,w,S)})()}_isIframeWebStorageSupported(h,g){this.assertedUnderlyingResolver._isIframeWebStorageSupported(h,g)}_originValidation(h){return this.assertedUnderlyingResolver._originValidation(h)}get _shouldInitProactively(){return mg()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return po(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var h=this;return(0,f.Z)(function*(){if(h.underlyingResolver)return;const g=yield function ef(){return Ed.apply(this,arguments)}();h.underlyingResolver=g?h.cordovaResolver:h.browserResolver})()}}function Fu(y){return y.unwrap()}function Fy(y){return sc(y)}function sc(y){const{_tokenResponse:h}=y instanceof k.ZR?y.customData:y;if(!h)return null;if(!(y instanceof k.ZR)&&"temporaryProof"in h&&"phoneNumber"in h)return Su.credentialFromResult(y);const g=h.providerId;if(!g||"password"===g)return null;let w;switch(g){case"google.com":w=Xa;break;case"facebook.com":w=na;break;case"github.com":w=El;break;case"twitter.com":w=jr;break;default:const{oauthIdToken:S,oauthAccessToken:N,oauthTokenSecret:W,pendingToken:ue,nonce:Fe}=h;return N||W||S||ue?ue?g.startsWith("saml.")?ra._create(g,ue):Hi._fromParams({providerId:g,signInMethod:g,pendingToken:ue,idToken:S,accessToken:N}):new Ys(g).credential({idToken:S,accessToken:N,rawNonce:Fe}):null}return y instanceof k.ZR?w.credentialFromError(y):w.credentialFromResult(y)}function Ln(y,h){return h.catch(g=>{throw g instanceof k.ZR&&function Dd(y,h){var g,w;const S=null===(g=h.customData)||void 0===g?void 0:g._tokenResponse;if("auth/multi-factor-auth-required"===(null===(w=h)||void 0===w?void 0:w.code))h.resolver=new Ly(y,function In(y,h){var g;const w=(0,k.m9)(y),S=h;return U(h.customData.operationType,w,"argument-error"),U(null===(g=S.customData._serverResponse)||void 0===g?void 0:g.mfaPendingCredential,w,"argument-error"),gu._fromError(w,S)}(y,h));else if(S){const N=sc(h),W=h;N&&(W.credential=N,W.tenantId=S.tenantId||void 0,W.email=S.email||void 0,W.phoneNumber=S.phoneNumber||void 0)}}(y,g),g}).then(g=>{const S=g.user;return{operationType:g.operationType,credential:Fy(g),additionalUserInfo:pu(g),user:go.getOrCreate(S)}})}function Cd(y,h){return Ma.apply(this,arguments)}function Ma(){return(Ma=(0,f.Z)(function*(y,h){const g=yield h;return{verificationId:g.verificationId,confirm:w=>Ln(y,g.confirm(w))}})).apply(this,arguments)}class Ly{constructor(h,g){this.resolver=g,this.auth=function ic(y){return y.wrapped()}(h)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(h){return Ln(Fu(this.auth),this.resolver.resolveSignIn(h))}}class go{constructor(h){this._delegate=h,this.multiFactor=function Ao(y){const h=(0,k.m9)(y);return So.has(h)||So.set(h,Bh._fromUser(h)),So.get(h)}(h)}static getOrCreate(h){return go.USER_MAP.has(h)||go.USER_MAP.set(h,new go(h)),go.USER_MAP.get(h)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(h){return this._delegate.getIdTokenResult(h)}getIdToken(h){return this._delegate.getIdToken(h)}linkAndRetrieveDataWithCredential(h){return this.linkWithCredential(h)}linkWithCredential(h){var g=this;return(0,f.Z)(function*(){return Ln(g.auth,iu(g._delegate,h))})()}linkWithPhoneNumber(h,g){var w=this;return(0,f.Z)(function*(){return Cd(w.auth,function Gr(y,h,g){return vi.apply(this,arguments)}(w._delegate,h,g))})()}linkWithPopup(h){var g=this;return(0,f.Z)(function*(){return Ln(g.auth,function xu(y,h,g){return ba.apply(this,arguments)}(g._delegate,h,Uo))})()}linkWithRedirect(h){var g=this;return(0,f.Z)(function*(){return yield Id(fn(g.auth)),function X(y,h,g){return function ae(y,h,g){return De.apply(this,arguments)}(y,h,g)}(g._delegate,h,Uo)})()}reauthenticateAndRetrieveDataWithCredential(h){return this.reauthenticateWithCredential(h)}reauthenticateWithCredential(h){var g=this;return(0,f.Z)(function*(){return Ln(g.auth,su(g._delegate,h))})()}reauthenticateWithPhoneNumber(h,g){return Cd(this.auth,function jl(y,h,g){return Po.apply(this,arguments)}(this._delegate,h,g))}reauthenticateWithPopup(h){return Ln(this.auth,function Qp(y,h,g){return hd.apply(this,arguments)}(this._delegate,h,Uo))}reauthenticateWithRedirect(h){var g=this;return(0,f.Z)(function*(){return yield Id(fn(g.auth)),function C(y,h,g){return function x(y,h,g){return F.apply(this,arguments)}(y,h,g)}(g._delegate,h,Uo)})()}sendEmailVerification(h){return function Al(y,h){return ca.apply(this,arguments)}(this._delegate,h)}unlink(h){var g=this;return(0,f.Z)(function*(){return yield function Cr(y,h){return tu.apply(this,arguments)}(g._delegate,h),g})()}updateEmail(h){return function td(y,h){return no((0,k.m9)(y),h,null)}(this._delegate,h)}updatePassword(h){return function to(y,h){return no((0,k.m9)(y),null,h)}(this._delegate,h)}updatePhoneNumber(h){return function pr(y,h){return pt.apply(this,arguments)}(this._delegate,h)}updateProfile(h){return function Rl(y,h){return Nl.apply(this,arguments)}(this._delegate,h)}verifyBeforeUpdateEmail(h,g){return function xl(y,h,g){return du.apply(this,arguments)}(this._delegate,h,g)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}go.USER_MAP=new WeakMap;const Ra=U;let Na=(()=>{class y{constructor(g,w){if(this.app=g,w.isInitialized())return this._delegate=w.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:S}=g.options;Ra(S,"invalid-api-key",{appName:g.name}),Ra(S,"invalid-api-key",{appName:g.name});const N=typeof window<"u"?Uo:void 0;this._delegate=w.initialize({options:{persistence:nf(S,g.name),popupRedirectResolver:N}}),this._delegate._updateErrorMap(ve),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?go.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(g){this._delegate.languageCode=g}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(g){this._delegate.tenantId=g}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(g,w){!function fl(y,h,g){const w=fn(y);U(w._canInitEmulator,w,"emulator-config-failed"),U(/^https?:\/\//.test(h),w,"invalid-emulator-scheme");const S=!!g?.disableWarnings,N=Ti(h),{host:W,port:ue}=function kn(y){const h=Ti(y),g=/(\/\/)?([^?#/]+)/.exec(y.substr(h.length));if(!g)return{host:"",port:null};const w=g[2].split("@").pop()||"",S=/^(\[[^\]]+\])(:|$)/.exec(w);if(S){const N=S[1];return{host:N,port:vs(w.substr(N.length+1))}}{const[N,W]=w.split(":");return{host:N,port:vs(W)}}}(h);w.config.emulator={url:`${N}//${W}${null===ue?"":`:${ue}`}/`},w.settings.appVerificationDisabledForTesting=!0,w.emulatorConfig=Object.freeze({host:W,port:ue,protocol:N.replace(":",""),options:Object.freeze({disableWarnings:S})}),S||function ws(){function y(){const h=document.createElement("p"),g=h.style;h.innerText="Running in emulator mode. Do not use with production credentials.",g.position="fixed",g.width="100%",g.backgroundColor="#ffffff",g.border=".1em solid #000000",g.color="#b50000",g.bottom="0px",g.left="0px",g.margin="0px",g.zIndex="10000",g.textAlign="center",h.classList.add("firebase-emulator-warning"),document.body.appendChild(h)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",y):y())}()}(this._delegate,g,w)}applyActionCode(g){return function si(y,h){return oa.apply(this,arguments)}(this._delegate,g)}checkActionCode(g){return aa(this._delegate,g)}confirmPasswordReset(g,w){return function lu(y,h,g){return bo.apply(this,arguments)}(this._delegate,g,w)}createUserWithEmailAndPassword(g,w){var S=this;return(0,f.Z)(function*(){return Ln(S._delegate,function Xs(y,h,g){return En.apply(this,arguments)}(S._delegate,g,w))})()}fetchProvidersForEmail(g){return this.fetchSignInMethodsForEmail(g)}fetchSignInMethodsForEmail(g){return function cu(y,h){return la.apply(this,arguments)}(this._delegate,g)}isSignInWithEmailLink(g){return function Ki(y,h){return"EMAIL_SIGNIN"===Ja.parseLink(h)?.operation}(0,g)}getRedirectResult(){var g=this;return(0,f.Z)(function*(){Ra(tc(),g._delegate,"operation-not-supported-in-this-environment");const w=yield function Be(y,h){return at.apply(this,arguments)}(g._delegate,Uo);return w?Ln(g._delegate,Promise.resolve(w)):{credential:null,user:null}})()}addFrameworkForLogging(g){!function Fn(y,h){fn(y)._logFramework(h)}(this._delegate,g)}onAuthStateChanged(g,w,S){const{next:N,error:W,complete:ue}=Vy(g,w,S);return this._delegate.onAuthStateChanged(N,W,ue)}onIdTokenChanged(g,w,S){const{next:N,error:W,complete:ue}=Vy(g,w,S);return this._delegate.onIdTokenChanged(N,W,ue)}sendSignInLinkToEmail(g,w){return function Tl(y,h,g){return eo.apply(this,arguments)}(this._delegate,g,w)}sendPasswordResetEmail(g,w){return function uu(y,h,g){return wn.apply(this,arguments)}(this._delegate,g,w||void 0)}setPersistence(g){var w=this;return(0,f.Z)(function*(){let S;switch(function c0(y,h){xa(Object.values(oi).includes(h),y,"invalid-persistence-type"),(0,k.b$)()?xa(h!==oi.SESSION,y,"unsupported-persistence-type"):(0,k.UG)()?xa(h===oi.NONE,y,"unsupported-persistence-type"):Vo()?xa(h===oi.NONE||h===oi.LOCAL&&(0,k.hl)(),y,"unsupported-persistence-type"):xa(h===oi.NONE||Py(),y,"unsupported-persistence-type")}(w._delegate,g),g){case oi.SESSION:S=xi;break;case oi.LOCAL:S=(yield ie(Mo)._isAvailable())?Mo:ha;break;case oi.NONE:S=Yt;break;default:return Ae("argument-error",{appName:w._delegate.name})}return w._delegate.setPersistence(S)})()}signInAndRetrieveDataWithCredential(g){return this.signInWithCredential(g)}signInAnonymously(){return Ln(this._delegate,function Fh(y){return vn.apply(this,arguments)}(this._delegate))}signInWithCredential(g){return Ln(this._delegate,mn(this._delegate,g))}signInWithCustomToken(g){return Ln(this._delegate,function bl(y,h){return sa.apply(this,arguments)}(this._delegate,g))}signInWithEmailAndPassword(g,w){return Ln(this._delegate,function Ai(y,h,g){return mn((0,k.m9)(y),Si.credential(h,g))}(this._delegate,g,w))}signInWithEmailLink(g,w){return Ln(this._delegate,function Wp(y,h,g){return ua.apply(this,arguments)}(this._delegate,g,w))}signInWithPhoneNumber(g,w){return Cd(this._delegate,function $h(y,h,g){return Tu.apply(this,arguments)}(this._delegate,g,w))}signInWithPopup(g){var w=this;return(0,f.Z)(function*(){return Ra(tc(),w._delegate,"operation-not-supported-in-this-environment"),Ln(w._delegate,function Au(y,h,g){return Ia.apply(this,arguments)}(w._delegate,g,Uo))})()}signInWithRedirect(g){var w=this;return(0,f.Z)(function*(){return Ra(tc(),w._delegate,"operation-not-supported-in-this-environment"),yield Id(w._delegate),function bn(y,h,g){return function fd(y,h,g){return D.apply(this,arguments)}(y,h,g)}(w._delegate,g,Uo)})()}updateCurrentUser(g){return this._delegate.updateCurrentUser(g)}verifyPasswordResetCode(g){return function Cl(y,h){return ed.apply(this,arguments)}(this._delegate,g)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return y.Persistence=oi,y})();function Vy(y,h,g){let w=y;"function"!=typeof y&&({next:w,error:h,complete:g}=y);const S=w;return{next:W=>S(W&&go.getOrCreate(W)),error:h,complete:g}}function nf(y,h){const g=function bd(y,h){const g=tf();if(!g)return[];const w=$n(nc,y,h);switch(g.getItem(w)){case oi.NONE:return[Yt];case oi.LOCAL:return[Mo,xi];case oi.SESSION:return[xi];default:return[]}}(y,h);if(typeof self<"u"&&!g.includes(Mo)&&g.push(Mo),typeof window<"u")for(const w of[ha,xi])g.includes(w)||g.push(w);return g.includes(Yt)||g.push(Yt),g}class rf{constructor(){this.providerId="phone",this._delegate=new Su(Fu(te.Z.auth()))}static credential(h,g){return Su.credential(h,g)}verifyPhoneNumber(h,g){return this._delegate.verifyPhoneNumber(h,g)}unwrap(){return this._delegate}}rf.PHONE_SIGN_IN_METHOD=Su.PHONE_SIGN_IN_METHOD,rf.PROVIDER_ID=Su.PROVIDER_ID;const _g=U;class Td{constructor(h,g,w=te.Z.app()){var S;_g(null===(S=w.options)||void 0===S?void 0:S.apiKey,"invalid-api-key",{appName:w.name}),this._delegate=new ir(h,g,w.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function vg(y){y.INTERNAL.registerComponent(new le.wA("auth-compat",h=>{const g=h.getProvider("app-compat").getImmediate(),w=h.getProvider("auth");return new Na(g,w)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:Si,FacebookAuthProvider:na,GithubAuthProvider:El,GoogleAuthProvider:Xa,OAuthProvider:Ys,SAMLAuthProvider:ri,PhoneAuthProvider:rf,PhoneMultiFactorGenerator:ku,RecaptchaVerifier:Td,TwitterAuthProvider:jr,Auth:Na,AuthCredential:dr,Error:k.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),y.registerVersion("@firebase/auth-compat","0.2.19")}(te.Z)},9751:(ot,Se,P)=>{P.d(Se,{y:()=>he});var f=P(2961),te=P(727),k=P(8822),oe=P(9635),re=P(2416),de=P(576),le=P(2806);let he=(()=>{class Q{constructor(Me){Me&&(this._subscribe=Me)}lift(Me){const ve=new Q;return ve.source=this,ve.operator=Me,ve}subscribe(Me,ve,Je){const me=function $(Q){return Q&&Q instanceof f.Lv||function B(Q){return Q&&(0,de.m)(Q.next)&&(0,de.m)(Q.error)&&(0,de.m)(Q.complete)}(Q)&&(0,te.Nn)(Q)}(Me)?Me:new f.Hp(Me,ve,Je);return(0,le.x)(()=>{const{operator:fe,source:Ke}=this;me.add(fe?fe.call(me,Ke):Ke?this._subscribe(me):this._trySubscribe(me))}),me}_trySubscribe(Me){try{return this._subscribe(Me)}catch(ve){Me.error(ve)}}forEach(Me,ve){return new(ve=pe(ve))((Je,me)=>{const fe=new f.Hp({next:Ke=>{try{Me(Ke)}catch(nt){me(nt),fe.unsubscribe()}},error:me,complete:Je});this.subscribe(fe)})}_subscribe(Me){var ve;return null===(ve=this.source)||void 0===ve?void 0:ve.subscribe(Me)}[k.L](){return this}pipe(...Me){return(0,oe.U)(Me)(this)}toPromise(Me){return new(Me=pe(Me))((ve,Je)=>{let me;this.subscribe(fe=>me=fe,fe=>Je(fe),()=>ve(me))})}}return Q.create=Le=>new Q(Le),Q})();function pe(Q){var Le;return null!==(Le=Q??re.v.Promise)&&void 0!==Le?Le:Promise}},7579:(ot,Se,P)=>{P.d(Se,{x:()=>le});var f=P(9751),te=P(727);const oe=(0,P(3888).d)(pe=>function(){pe(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var re=P(8737),de=P(2806);let le=(()=>{class pe extends f.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift($){const Q=new he(this,this);return Q.operator=$,Q}_throwIfClosed(){if(this.closed)throw new oe}next($){(0,de.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const Q of this.currentObservers)Q.next($)}})}error($){(0,de.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=$;const{observers:Q}=this;for(;Q.length;)Q.shift().error($)}})}complete(){(0,de.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:$}=this;for(;$.length;)$.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var $;return(null===($=this.observers)||void 0===$?void 0:$.length)>0}_trySubscribe($){return this._throwIfClosed(),super._trySubscribe($)}_subscribe($){return this._throwIfClosed(),this._checkFinalizedStatuses($),this._innerSubscribe($)}_innerSubscribe($){const{hasError:Q,isStopped:Le,observers:Me}=this;return Q||Le?te.Lc:(this.currentObservers=null,Me.push($),new te.w0(()=>{this.currentObservers=null,(0,re.P)(Me,$)}))}_checkFinalizedStatuses($){const{hasError:Q,thrownError:Le,isStopped:Me}=this;Q?$.error(Le):Me&&$.complete()}asObservable(){const $=new f.y;return $.source=this,$}}return pe.create=(B,$)=>new he(B,$),pe})();class he extends le{constructor(B,$){super(),this.destination=B,this.source=$}next(B){var $,Q;null===(Q=null===($=this.destination)||void 0===$?void 0:$.next)||void 0===Q||Q.call($,B)}error(B){var $,Q;null===(Q=null===($=this.destination)||void 0===$?void 0:$.error)||void 0===Q||Q.call($,B)}complete(){var B,$;null===($=null===(B=this.destination)||void 0===B?void 0:B.complete)||void 0===$||$.call(B)}_subscribe(B){var $,Q;return null!==(Q=null===($=this.source)||void 0===$?void 0:$.subscribe(B))&&void 0!==Q?Q:te.Lc}}},2961:(ot,Se,P)=>{P.d(Se,{Hp:()=>Je,Lv:()=>Q});var f=P(576),te=P(727),k=P(2416),oe=P(7849);function re(){}const de=pe("C",void 0,void 0);function pe(Ae,_e,Ee){return{kind:Ae,value:_e,error:Ee}}var B=P(3410),$=P(2806);class Q extends te.w0{constructor(_e){super(),this.isStopped=!1,_e?(this.destination=_e,(0,te.Nn)(_e)&&_e.add(this)):this.destination=nt}static create(_e,Ee,Ue){return new Je(_e,Ee,Ue)}next(_e){this.isStopped?Ke(function he(Ae){return pe("N",Ae,void 0)}(_e),this):this._next(_e)}error(_e){this.isStopped?Ke(function le(Ae){return pe("E",void 0,Ae)}(_e),this):(this.isStopped=!0,this._error(_e))}complete(){this.isStopped?Ke(de,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(_e){this.destination.next(_e)}_error(_e){try{this.destination.error(_e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Le=Function.prototype.bind;function Me(Ae,_e){return Le.call(Ae,_e)}class ve{constructor(_e){this.partialObserver=_e}next(_e){const{partialObserver:Ee}=this;if(Ee.next)try{Ee.next(_e)}catch(Ue){me(Ue)}}error(_e){const{partialObserver:Ee}=this;if(Ee.error)try{Ee.error(_e)}catch(Ue){me(Ue)}else me(_e)}complete(){const{partialObserver:_e}=this;if(_e.complete)try{_e.complete()}catch(Ee){me(Ee)}}}class Je extends Q{constructor(_e,Ee,Ue){let je;if(super(),(0,f.m)(_e)||!_e)je={next:_e??void 0,error:Ee??void 0,complete:Ue??void 0};else{let U;this&&k.v.useDeprecatedNextContext?(U=Object.create(_e),U.unsubscribe=()=>this.unsubscribe(),je={next:_e.next&&Me(_e.next,U),error:_e.error&&Me(_e.error,U),complete:_e.complete&&Me(_e.complete,U)}):je=_e}this.destination=new ve(je)}}function me(Ae){k.v.useDeprecatedSynchronousErrorHandling?(0,$.O)(Ae):(0,oe.h)(Ae)}function Ke(Ae,_e){const{onStoppedNotification:Ee}=k.v;Ee&&B.z.setTimeout(()=>Ee(Ae,_e))}const nt={closed:!0,next:re,error:function fe(Ae){throw Ae},complete:re}},727:(ot,Se,P)=>{P.d(Se,{Lc:()=>de,w0:()=>re,Nn:()=>le});var f=P(576);const k=(0,P(3888).d)(pe=>function($){pe(this),this.message=$?`${$.length} errors occurred during unsubscription:\n${$.map((Q,Le)=>`${Le+1}) ${Q.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=$});var oe=P(8737);class re{constructor(B){this.initialTeardown=B,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let B;if(!this.closed){this.closed=!0;const{_parentage:$}=this;if($)if(this._parentage=null,Array.isArray($))for(const Me of $)Me.remove(this);else $.remove(this);const{initialTeardown:Q}=this;if((0,f.m)(Q))try{Q()}catch(Me){B=Me instanceof k?Me.errors:[Me]}const{_finalizers:Le}=this;if(Le){this._finalizers=null;for(const Me of Le)try{he(Me)}catch(ve){B=B??[],ve instanceof k?B=[...B,...ve.errors]:B.push(ve)}}if(B)throw new k(B)}}add(B){var $;if(B&&B!==this)if(this.closed)he(B);else{if(B instanceof re){if(B.closed||B._hasParent(this))return;B._addParent(this)}(this._finalizers=null!==($=this._finalizers)&&void 0!==$?$:[]).push(B)}}_hasParent(B){const{_parentage:$}=this;return $===B||Array.isArray($)&&$.includes(B)}_addParent(B){const{_parentage:$}=this;this._parentage=Array.isArray($)?($.push(B),$):$?[$,B]:B}_removeParent(B){const{_parentage:$}=this;$===B?this._parentage=null:Array.isArray($)&&(0,oe.P)($,B)}remove(B){const{_finalizers:$}=this;$&&(0,oe.P)($,B),B instanceof re&&B._removeParent(this)}}re.EMPTY=(()=>{const pe=new re;return pe.closed=!0,pe})();const de=re.EMPTY;function le(pe){return pe instanceof re||pe&&"closed"in pe&&(0,f.m)(pe.remove)&&(0,f.m)(pe.add)&&(0,f.m)(pe.unsubscribe)}function he(pe){(0,f.m)(pe)?pe():pe.unsubscribe()}},2416:(ot,Se,P)=>{P.d(Se,{v:()=>f});const f={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(ot,Se,P)=>{P.d(Se,{E:()=>te});const te=new(P(9751).y)(re=>re.complete())},8996:(ot,Se,P)=>{P.d(Se,{D:()=>_e});var f=P(8421),te=P(5363),k=P(9468),de=P(9751),he=P(2202),pe=P(576),B=P(9672);function Q(Ee,Ue){if(!Ee)throw new Error("Iterable cannot be null");return new de.y(je=>{(0,B.f)(je,Ue,()=>{const U=Ee[Symbol.asyncIterator]();(0,B.f)(je,Ue,()=>{U.next().then(ge=>{ge.done?je.complete():je.next(ge.value)})},0,!0)})})}var Le=P(3670),Me=P(8239),ve=P(1144),Je=P(6495),me=P(2206),fe=P(4532),Ke=P(3260);function _e(Ee,Ue){return Ue?function Ae(Ee,Ue){if(null!=Ee){if((0,Le.c)(Ee))return function oe(Ee,Ue){return(0,f.Xf)(Ee).pipe((0,k.R)(Ue),(0,te.Q)(Ue))}(Ee,Ue);if((0,ve.z)(Ee))return function le(Ee,Ue){return new de.y(je=>{let U=0;return Ue.schedule(function(){U===Ee.length?je.complete():(je.next(Ee[U++]),je.closed||this.schedule())})})}(Ee,Ue);if((0,Me.t)(Ee))return function re(Ee,Ue){return(0,f.Xf)(Ee).pipe((0,k.R)(Ue),(0,te.Q)(Ue))}(Ee,Ue);if((0,me.D)(Ee))return Q(Ee,Ue);if((0,Je.T)(Ee))return function $(Ee,Ue){return new de.y(je=>{let U;return(0,B.f)(je,Ue,()=>{U=Ee[he.h](),(0,B.f)(je,Ue,()=>{let ge,K;try{({value:ge,done:K}=U.next())}catch(ee){return void je.error(ee)}K?je.complete():je.next(ge)},0,!0)}),()=>(0,pe.m)(U?.return)&&U.return()})}(Ee,Ue);if((0,Ke.L)(Ee))return function nt(Ee,Ue){return Q((0,Ke.Q)(Ee),Ue)}(Ee,Ue)}throw(0,fe.z)(Ee)}(Ee,Ue):(0,f.Xf)(Ee)}},8421:(ot,Se,P)=>{P.d(Se,{Xf:()=>Le});var f=P(655),te=P(1144),k=P(8239),oe=P(9751),re=P(3670),de=P(2206),le=P(4532),he=P(6495),pe=P(3260),B=P(576),$=P(7849),Q=P(8822);function Le(Ae){if(Ae instanceof oe.y)return Ae;if(null!=Ae){if((0,re.c)(Ae))return function Me(Ae){return new oe.y(_e=>{const Ee=Ae[Q.L]();if((0,B.m)(Ee.subscribe))return Ee.subscribe(_e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Ae);if((0,te.z)(Ae))return function ve(Ae){return new oe.y(_e=>{for(let Ee=0;Ee<Ae.length&&!_e.closed;Ee++)_e.next(Ae[Ee]);_e.complete()})}(Ae);if((0,k.t)(Ae))return function Je(Ae){return new oe.y(_e=>{Ae.then(Ee=>{_e.closed||(_e.next(Ee),_e.complete())},Ee=>_e.error(Ee)).then(null,$.h)})}(Ae);if((0,de.D)(Ae))return fe(Ae);if((0,he.T)(Ae))return function me(Ae){return new oe.y(_e=>{for(const Ee of Ae)if(_e.next(Ee),_e.closed)return;_e.complete()})}(Ae);if((0,pe.L)(Ae))return function Ke(Ae){return fe((0,pe.Q)(Ae))}(Ae)}throw(0,le.z)(Ae)}function fe(Ae){return new oe.y(_e=>{(function nt(Ae,_e){var Ee,Ue,je,U;return(0,f.mG)(this,void 0,void 0,function*(){try{for(Ee=(0,f.KL)(Ae);!(Ue=yield Ee.next()).done;)if(_e.next(Ue.value),_e.closed)return}catch(ge){je={error:ge}}finally{try{Ue&&!Ue.done&&(U=Ee.return)&&(yield U.call(Ee))}finally{if(je)throw je.error}}_e.complete()})})(Ae,_e).catch(Ee=>_e.error(Ee))})}},6451:(ot,Se,P)=>{P.d(Se,{T:()=>de});var f=P(8189),te=P(8421),k=P(515),oe=P(7669),re=P(8996);function de(...le){const he=(0,oe.yG)(le),pe=(0,oe._6)(le,1/0),B=le;return B.length?1===B.length?(0,te.Xf)(B[0]):(0,f.J)(pe)((0,re.D)(B,he)):k.E}},5403:(ot,Se,P)=>{P.d(Se,{x:()=>te});var f=P(2961);function te(oe,re,de,le,he){return new k(oe,re,de,le,he)}class k extends f.Lv{constructor(re,de,le,he,pe,B){super(re),this.onFinalize=pe,this.shouldUnsubscribe=B,this._next=de?function($){try{de($)}catch(Q){re.error(Q)}}:super._next,this._error=he?function($){try{he($)}catch(Q){re.error(Q)}finally{this.unsubscribe()}}:super._error,this._complete=le?function(){try{le()}catch($){re.error($)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var re;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:de}=this;super.unsubscribe(),!de&&(null===(re=this.onFinalize)||void 0===re||re.call(this))}}}},4004:(ot,Se,P)=>{P.d(Se,{U:()=>k});var f=P(4482),te=P(5403);function k(oe,re){return(0,f.e)((de,le)=>{let he=0;de.subscribe((0,te.x)(le,pe=>{le.next(oe.call(re,pe,he++))}))})}},8189:(ot,Se,P)=>{P.d(Se,{J:()=>k});var f=P(5577),te=P(4671);function k(oe=1/0){return(0,f.z)(te.y,oe)}},5577:(ot,Se,P)=>{P.d(Se,{z:()=>he});var f=P(4004),te=P(8421),k=P(4482),oe=P(9672),re=P(5403),le=P(576);function he(pe,B,$=1/0){return(0,le.m)(B)?he((Q,Le)=>(0,f.U)((Me,ve)=>B(Q,Me,Le,ve))((0,te.Xf)(pe(Q,Le))),$):("number"==typeof B&&($=B),(0,k.e)((Q,Le)=>function de(pe,B,$,Q,Le,Me,ve,Je){const me=[];let fe=0,Ke=0,nt=!1;const Ae=()=>{nt&&!me.length&&!fe&&B.complete()},_e=Ue=>fe<Q?Ee(Ue):me.push(Ue),Ee=Ue=>{Me&&B.next(Ue),fe++;let je=!1;(0,te.Xf)($(Ue,Ke++)).subscribe((0,re.x)(B,U=>{Le?.(U),Me?_e(U):B.next(U)},()=>{je=!0},void 0,()=>{if(je)try{for(fe--;me.length&&fe<Q;){const U=me.shift();ve?(0,oe.f)(B,ve,()=>Ee(U)):Ee(U)}Ae()}catch(U){B.error(U)}}))};return pe.subscribe((0,re.x)(B,_e,()=>{nt=!0,Ae()})),()=>{Je?.()}}(Q,Le,pe,$)))}},5363:(ot,Se,P)=>{P.d(Se,{Q:()=>oe});var f=P(9672),te=P(4482),k=P(5403);function oe(re,de=0){return(0,te.e)((le,he)=>{le.subscribe((0,k.x)(he,pe=>(0,f.f)(he,re,()=>he.next(pe),de),()=>(0,f.f)(he,re,()=>he.complete(),de),pe=>(0,f.f)(he,re,()=>he.error(pe),de)))})}},3099:(ot,Se,P)=>{P.d(Se,{B:()=>re});var f=P(8421),te=P(7579),k=P(2961),oe=P(4482);function re(le={}){const{connector:he=(()=>new te.x),resetOnError:pe=!0,resetOnComplete:B=!0,resetOnRefCountZero:$=!0}=le;return Q=>{let Le,Me,ve,Je=0,me=!1,fe=!1;const Ke=()=>{Me?.unsubscribe(),Me=void 0},nt=()=>{Ke(),Le=ve=void 0,me=fe=!1},Ae=()=>{const _e=Le;nt(),_e?.unsubscribe()};return(0,oe.e)((_e,Ee)=>{Je++,!fe&&!me&&Ke();const Ue=ve=ve??he();Ee.add(()=>{Je--,0===Je&&!fe&&!me&&(Me=de(Ae,$))}),Ue.subscribe(Ee),!Le&&Je>0&&(Le=new k.Hp({next:je=>Ue.next(je),error:je=>{fe=!0,Ke(),Me=de(nt,pe,je),Ue.error(je)},complete:()=>{me=!0,Ke(),Me=de(nt,B),Ue.complete()}}),(0,f.Xf)(_e).subscribe(Le))})(Q)}}function de(le,he,...pe){if(!0===he)return void le();if(!1===he)return;const B=new k.Hp({next:()=>{B.unsubscribe(),le()}});return he(...pe).subscribe(B)}},9468:(ot,Se,P)=>{P.d(Se,{R:()=>te});var f=P(4482);function te(k,oe=0){return(0,f.e)((re,de)=>{de.add(k.schedule(()=>re.subscribe(de),oe))})}},8505:(ot,Se,P)=>{P.d(Se,{b:()=>re});var f=P(576),te=P(4482),k=P(5403),oe=P(4671);function re(de,le,he){const pe=(0,f.m)(de)||le||he?{next:de,error:le,complete:he}:de;return pe?(0,te.e)((B,$)=>{var Q;null===(Q=pe.subscribe)||void 0===Q||Q.call(pe);let Le=!0;B.subscribe((0,k.x)($,Me=>{var ve;null===(ve=pe.next)||void 0===ve||ve.call(pe,Me),$.next(Me)},()=>{var Me;Le=!1,null===(Me=pe.complete)||void 0===Me||Me.call(pe),$.complete()},Me=>{var ve;Le=!1,null===(ve=pe.error)||void 0===ve||ve.call(pe,Me),$.error(Me)},()=>{var Me,ve;Le&&(null===(Me=pe.unsubscribe)||void 0===Me||Me.call(pe)),null===(ve=pe.finalize)||void 0===ve||ve.call(pe)}))}):oe.y}},4408:(ot,Se,P)=>{P.d(Se,{o:()=>re});var f=P(727);class te extends f.w0{constructor(le,he){super()}schedule(le,he=0){return this}}const k={setInterval(de,le,...he){const{delegate:pe}=k;return pe?.setInterval?pe.setInterval(de,le,...he):setInterval(de,le,...he)},clearInterval(de){const{delegate:le}=k;return(le?.clearInterval||clearInterval)(de)},delegate:void 0};var oe=P(8737);class re extends te{constructor(le,he){super(le,he),this.scheduler=le,this.work=he,this.pending=!1}schedule(le,he=0){if(this.closed)return this;this.state=le;const pe=this.id,B=this.scheduler;return null!=pe&&(this.id=this.recycleAsyncId(B,pe,he)),this.pending=!0,this.delay=he,this.id=this.id||this.requestAsyncId(B,this.id,he),this}requestAsyncId(le,he,pe=0){return k.setInterval(le.flush.bind(le,this),pe)}recycleAsyncId(le,he,pe=0){if(null!=pe&&this.delay===pe&&!1===this.pending)return he;k.clearInterval(he)}execute(le,he){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const pe=this._execute(le,he);if(pe)return pe;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(le,he){let B,pe=!1;try{this.work(le)}catch($){pe=!0,B=$||new Error("Scheduled action threw falsy error")}if(pe)return this.unsubscribe(),B}unsubscribe(){if(!this.closed){const{id:le,scheduler:he}=this,{actions:pe}=he;this.work=this.state=this.scheduler=null,this.pending=!1,(0,oe.P)(pe,this),null!=le&&(this.id=this.recycleAsyncId(he,le,null)),this.delay=null,super.unsubscribe()}}}},7565:(ot,Se,P)=>{P.d(Se,{v:()=>k});var f=P(6063);class te{constructor(re,de=te.now){this.schedulerActionCtor=re,this.now=de}schedule(re,de=0,le){return new this.schedulerActionCtor(this,re).schedule(le,de)}}te.now=f.l.now;class k extends te{constructor(re,de=te.now){super(re,de),this.actions=[],this._active=!1,this._scheduled=void 0}flush(re){const{actions:de}=this;if(this._active)return void de.push(re);let le;this._active=!0;do{if(le=re.execute(re.state,re.delay))break}while(re=de.shift());if(this._active=!1,le){for(;re=de.shift();)re.unsubscribe();throw le}}}},4986:(ot,Se,P)=>{P.d(Se,{z:()=>k});var f=P(4408);const k=new(P(7565).v)(f.o)},6063:(ot,Se,P)=>{P.d(Se,{l:()=>f});const f={now:()=>(f.delegate||Date).now(),delegate:void 0}},3410:(ot,Se,P)=>{P.d(Se,{z:()=>f});const f={setTimeout(te,k,...oe){const{delegate:re}=f;return re?.setTimeout?re.setTimeout(te,k,...oe):setTimeout(te,k,...oe)},clearTimeout(te){const{delegate:k}=f;return(k?.clearTimeout||clearTimeout)(te)},delegate:void 0}},2202:(ot,Se,P)=>{P.d(Se,{h:()=>te});const te=function f(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(ot,Se,P)=>{P.d(Se,{L:()=>f});const f="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(ot,Se,P)=>{P.d(Se,{_6:()=>de,jO:()=>oe,yG:()=>re});var f=P(576);function k(le){return le[le.length-1]}function oe(le){return(0,f.m)(k(le))?le.pop():void 0}function re(le){return function te(le){return le&&(0,f.m)(le.schedule)}(k(le))?le.pop():void 0}function de(le,he){return"number"==typeof k(le)?le.pop():he}},8737:(ot,Se,P)=>{function f(te,k){if(te){const oe=te.indexOf(k);0<=oe&&te.splice(oe,1)}}P.d(Se,{P:()=>f})},3888:(ot,Se,P)=>{function f(te){const oe=te(re=>{Error.call(re),re.stack=(new Error).stack});return oe.prototype=Object.create(Error.prototype),oe.prototype.constructor=oe,oe}P.d(Se,{d:()=>f})},2806:(ot,Se,P)=>{P.d(Se,{O:()=>oe,x:()=>k});var f=P(2416);let te=null;function k(re){if(f.v.useDeprecatedSynchronousErrorHandling){const de=!te;if(de&&(te={errorThrown:!1,error:null}),re(),de){const{errorThrown:le,error:he}=te;if(te=null,le)throw he}}else re()}function oe(re){f.v.useDeprecatedSynchronousErrorHandling&&te&&(te.errorThrown=!0,te.error=re)}},9672:(ot,Se,P)=>{function f(te,k,oe,re=0,de=!1){const le=k.schedule(function(){oe(),de?te.add(this.schedule(null,re)):this.unsubscribe()},re);if(te.add(le),!de)return le}P.d(Se,{f:()=>f})},4671:(ot,Se,P)=>{function f(te){return te}P.d(Se,{y:()=>f})},1144:(ot,Se,P)=>{P.d(Se,{z:()=>f});const f=te=>te&&"number"==typeof te.length&&"function"!=typeof te},2206:(ot,Se,P)=>{P.d(Se,{D:()=>te});var f=P(576);function te(k){return Symbol.asyncIterator&&(0,f.m)(k?.[Symbol.asyncIterator])}},576:(ot,Se,P)=>{function f(te){return"function"==typeof te}P.d(Se,{m:()=>f})},3670:(ot,Se,P)=>{P.d(Se,{c:()=>k});var f=P(8822),te=P(576);function k(oe){return(0,te.m)(oe[f.L])}},6495:(ot,Se,P)=>{P.d(Se,{T:()=>k});var f=P(2202),te=P(576);function k(oe){return(0,te.m)(oe?.[f.h])}},8239:(ot,Se,P)=>{P.d(Se,{t:()=>te});var f=P(576);function te(k){return(0,f.m)(k?.then)}},3260:(ot,Se,P)=>{P.d(Se,{L:()=>oe,Q:()=>k});var f=P(655),te=P(576);function k(re){return(0,f.FC)(this,arguments,function*(){const le=re.getReader();try{for(;;){const{value:he,done:pe}=yield(0,f.qq)(le.read());if(pe)return yield(0,f.qq)(void 0);yield yield(0,f.qq)(he)}}finally{le.releaseLock()}})}function oe(re){return(0,te.m)(re?.getReader)}},4482:(ot,Se,P)=>{P.d(Se,{A:()=>te,e:()=>k});var f=P(576);function te(oe){return(0,f.m)(oe?.lift)}function k(oe){return re=>{if(te(re))return re.lift(function(de){try{return oe(de,this)}catch(le){this.error(le)}});throw new TypeError("Unable to lift unknown Observable type")}}},9635:(ot,Se,P)=>{P.d(Se,{U:()=>k,z:()=>te});var f=P(4671);function te(...oe){return k(oe)}function k(oe){return 0===oe.length?f.y:1===oe.length?oe[0]:function(de){return oe.reduce((le,he)=>he(le),de)}}},7849:(ot,Se,P)=>{P.d(Se,{h:()=>k});var f=P(2416),te=P(3410);function k(oe){te.z.setTimeout(()=>{const{onUnhandledError:re}=f.v;if(!re)throw oe;re(oe)})}},4532:(ot,Se,P)=>{function f(te){return new TypeError(`You provided ${null!==te&&"object"==typeof te?"an invalid object":`'${te}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}P.d(Se,{z:()=>f})},655:(ot,Se,P)=>{function oe(K,ee){var ie={};for(var ne in K)Object.prototype.hasOwnProperty.call(K,ne)&&ee.indexOf(ne)<0&&(ie[ne]=K[ne]);if(null!=K&&"function"==typeof Object.getOwnPropertySymbols){var Pe=0;for(ne=Object.getOwnPropertySymbols(K);Pe<ne.length;Pe++)ee.indexOf(ne[Pe])<0&&Object.prototype.propertyIsEnumerable.call(K,ne[Pe])&&(ie[ne[Pe]]=K[ne[Pe]])}return ie}function he(K,ee,ie,ne){return new(ie||(ie=Promise))(function(Oe,ct){function Ht(tn){try{ze(ne.next(tn))}catch(Sn){ct(Sn)}}function Ut(tn){try{ze(ne.throw(tn))}catch(Sn){ct(Sn)}}function ze(tn){tn.done?Oe(tn.value):function Pe(Oe){return Oe instanceof ie?Oe:new ie(function(ct){ct(Oe)})}(tn.value).then(Ht,Ut)}ze((ne=ne.apply(K,ee||[])).next())})}function me(K){return this instanceof me?(this.v=K,this):new me(K)}function fe(K,ee,ie){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Pe,ne=ie.apply(K,ee||[]),Oe=[];return Pe={},ct("next"),ct("throw"),ct("return"),Pe[Symbol.asyncIterator]=function(){return this},Pe;function ct(Wt){ne[Wt]&&(Pe[Wt]=function(Zt){return new Promise(function(Er,Ot){Oe.push([Wt,Zt,Er,Ot])>1||Ht(Wt,Zt)})})}function Ht(Wt,Zt){try{!function Ut(Wt){Wt.value instanceof me?Promise.resolve(Wt.value.v).then(ze,tn):Sn(Oe[0][2],Wt)}(ne[Wt](Zt))}catch(Er){Sn(Oe[0][3],Er)}}function ze(Wt){Ht("next",Wt)}function tn(Wt){Ht("throw",Wt)}function Sn(Wt,Zt){Wt(Zt),Oe.shift(),Oe.length&&Ht(Oe[0][0],Oe[0][1])}}function nt(K){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ie,ee=K[Symbol.asyncIterator];return ee?ee.call(K):(K=function Q(K){var ee="function"==typeof Symbol&&Symbol.iterator,ie=ee&&K[ee],ne=0;if(ie)return ie.call(K);if(K&&"number"==typeof K.length)return{next:function(){return K&&ne>=K.length&&(K=void 0),{value:K&&K[ne++],done:!K}}};throw new TypeError(ee?"Object is not iterable.":"Symbol.iterator is not defined.")}(K),ie={},ne("next"),ne("throw"),ne("return"),ie[Symbol.asyncIterator]=function(){return this},ie);function ne(Oe){ie[Oe]=K[Oe]&&function(ct){return new Promise(function(Ht,Ut){!function Pe(Oe,ct,Ht,Ut){Promise.resolve(Ut).then(function(ze){Oe({value:ze,done:Ht})},ct)}(Ht,Ut,(ct=K[Oe](ct)).done,ct.value)})}}}P.d(Se,{FC:()=>fe,KL:()=>nt,_T:()=>oe,mG:()=>he,qq:()=>me})},4650:(ot,Se,P)=>{P.d(Se,{$8M:()=>Du,$Z:()=>Fg,AFp:()=>Bm,AaK:()=>he,CHM:()=>au,CRH:()=>Om,CZH:()=>hp,CqO:()=>FE,D6c:()=>Ep,EJc:()=>Db,EpF:()=>PE,F4k:()=>U_,FYo:()=>yt,FiY:()=>Be,G48:()=>Ge,GfV:()=>Lu,Gpc:()=>$,JOm:()=>ks,KtG:()=>uu,LFG:()=>bn,LSH:()=>fg,Lbi:()=>nS,Lck:()=>xT,MAs:()=>RE,MMx:()=>rh,NdJ:()=>LE,OlP:()=>on,PXZ:()=>Re,Q6J:()=>NE,QGY:()=>V_,QP$:()=>Ci,Qsj:()=>gt,R0b:()=>Li,RDi:()=>n0,Rgc:()=>oh,SBq:()=>ue,Sil:()=>Cb,Suo:()=>Yu,TTD:()=>zi,TgZ:()=>jf,W1O:()=>Bv,X6Q:()=>Kn,XFs:()=>We,Xpm:()=>H,Xts:()=>tc,Y36:()=>Pi,YKP:()=>nh,YNc:()=>xE,Yjl:()=>Pt,Yz7:()=>Zt,Z0I:()=>Jo,ZZ4:()=>lr,_Bn:()=>HI,_UZ:()=>P_,_Vd:()=>S,_c5:()=>wS,_uU:()=>Wf,aQg:()=>Rn,c2e:()=>bb,cJS:()=>Ot,cg1:()=>nv,dDg:()=>rw,dqk:()=>nn,eFA:()=>Ob,ekj:()=>zf,eoX:()=>Mb,f3M:()=>D,g9A:()=>gp,h0i:()=>ar,hGG:()=>il,hij:()=>tm,iGM:()=>ap,ifc:()=>st,ip1:()=>ph,jDz:()=>wm,kL8:()=>_I,lG2:()=>$n,lqb:()=>Ln,lri:()=>Nc,n5z:()=>Qi,oAB:()=>rt,oxw:()=>jE,q4F:()=>wg,qLn:()=>ss,qOj:()=>zg,qZA:()=>Qg,rWj:()=>qa,sBO:()=>gS,sIi:()=>Pf,s_b:()=>ip,soG:()=>gh,tb:()=>Qv,tp0:()=>vt,uIk:()=>Lf,vHH:()=>ve,vpe:()=>ls,wAp:()=>It,xp6:()=>_f,z2F:()=>yp,zSh:()=>Fu,zs3:()=>hc});var f=P(7579),te=P(727),k=P(9751),oe=P(6451),re=P(3099);function de(i){for(let o in i)if(i[o]===de)return o;throw Error("Could not find renamed property on target object.")}function le(i,o){for(const a in o)o.hasOwnProperty(a)&&!i.hasOwnProperty(a)&&(i[a]=o[a])}function he(i){if("string"==typeof i)return i;if(Array.isArray(i))return"["+i.map(he).join(", ")+"]";if(null==i)return""+i;if(i.overriddenName)return`${i.overriddenName}`;if(i.name)return`${i.name}`;const o=i.toString();if(null==o)return""+o;const a=o.indexOf("\n");return-1===a?o:o.substring(0,a)}function pe(i,o){return null==i||""===i?null===o?"":o:null==o||""===o?i:i+" "+o}const B=de({__forward_ref__:de});function $(i){return i.__forward_ref__=$,i.toString=function(){return he(this())},i}function Q(i){return Le(i)?i():i}function Le(i){return"function"==typeof i&&i.hasOwnProperty(B)&&i.__forward_ref__===$}class ve extends Error{constructor(o,a){super(function Je(i,o){return`NG0${Math.abs(i)}${o?": "+o.trim():""}`}(o,a)),this.code=o}}function me(i){return"string"==typeof i?i:null==i?"":String(i)}function _e(i,o){throw new ve(-201,!1)}function Ut(i,o){null==i&&function ze(i,o,a,l){throw new Error(`ASSERTION ERROR: ${i}`+(null==l?"":` [Expected=> ${a} ${l} ${o} <=Actual]`))}(o,i,null,"!=")}function Zt(i){return{token:i.token,providedIn:i.providedIn||null,factory:i.factory,value:void 0}}function Ot(i){return{providers:i.providers||[],imports:i.imports||[]}}function Xt(i){return Lr(i,Di)||Lr(i,hi)}function Jo(i){return null!==Xt(i)}function Lr(i,o){return i.hasOwnProperty(o)?i[o]:null}function ys(i){return i&&(i.hasOwnProperty(Ur)||i.hasOwnProperty(wo))?i[Ur]:null}const Di=de({\u0275prov:de}),Ur=de({\u0275inj:de}),hi=de({ngInjectableDef:de}),wo=de({ngInjectorDef:de});var We=(()=>((We=We||{})[We.Default=0]="Default",We[We.Host=1]="Host",We[We.Self=2]="Self",We[We.SkipSelf=4]="SkipSelf",We[We.Optional=8]="Optional",We))();let Br;function An(i){const o=Br;return Br=i,o}function fi(i,o,a){const l=Xt(i);return l&&"root"==l.providedIn?void 0===l.value?l.value=l.factory():l.value:a&We.Optional?null:void 0!==o?o:void _e(he(i))}function xn(i){return{toString:i}.toString()}var jn=(()=>((jn=jn||{})[jn.OnPush=0]="OnPush",jn[jn.Default=1]="Default",jn))(),st=(()=>{return(i=st||(st={}))[i.Emulated=0]="Emulated",i[i.None=2]="None",i[i.ShadowDom=3]="ShadowDom",st;var i})();const nn=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),Ir={},Dt=[],$i=de({\u0275cmp:de}),Kt=de({\u0275dir:de}),pi=de({\u0275pipe:de}),Gt=de({\u0275mod:de}),Z=de({\u0275fac:de}),j=de({__NG_ELEMENT_ID__:de});let V=0;function H(i){return xn(()=>{const a=!0===i.standalone,l={},d={type:i.type,providersResolver:null,decls:i.decls,vars:i.vars,factory:null,template:i.template||null,consts:i.consts||null,ngContentSelectors:i.ngContentSelectors,hostBindings:i.hostBindings||null,hostVars:i.hostVars||0,hostAttrs:i.hostAttrs||null,contentQueries:i.contentQueries||null,declaredInputs:l,inputs:null,outputs:null,exportAs:i.exportAs||null,onPush:i.changeDetection===jn.OnPush,directiveDefs:null,pipeDefs:null,standalone:a,dependencies:a&&i.dependencies||null,getStandaloneInjector:null,selectors:i.selectors||Dt,viewQuery:i.viewQuery||null,features:i.features||null,data:i.data||{},encapsulation:i.encapsulation||st.Emulated,id:"c"+V++,styles:i.styles||Dt,_:null,setInput:null,schemas:i.schemas||null,tView:null},p=i.dependencies,_=i.features;return d.inputs=Yt(i.inputs,l),d.outputs=Yt(i.outputs),_&&_.forEach(E=>E(d)),d.directiveDefs=p?()=>("function"==typeof p?p():p).map(be).filter(Ve):null,d.pipeDefs=p?()=>("function"==typeof p?p():p).map(Nn).filter(Ve):null,d})}function be(i){return Mt(i)||dn(i)}function Ve(i){return null!==i}function rt(i){return xn(()=>({type:i.type,bootstrap:i.bootstrap||Dt,declarations:i.declarations||Dt,imports:i.imports||Dt,exports:i.exports||Dt,transitiveCompileScopes:null,schemas:i.schemas||null,id:i.id||null}))}function Yt(i,o){if(null==i)return Ir;const a={};for(const l in i)if(i.hasOwnProperty(l)){let d=i[l],p=d;Array.isArray(d)&&(p=d[1],d=d[0]),a[d]=l,o&&(o[d]=p)}return a}const $n=H;function Pt(i){return{type:i.type,name:i.name,factory:null,pure:!1!==i.pure,standalone:!0===i.standalone,onDestroy:i.type.prototype.ngOnDestroy||null}}function Mt(i){return i[$i]||null}function dn(i){return i[Kt]||null}function Nn(i){return i[pi]||null}function Ci(i){const o=Mt(i)||dn(i)||Nn(i);return null!==o&&o.standalone}function br(i,o){const a=i[Gt]||null;if(!a&&!0===o)throw new Error(`Type ${he(i)} does not have '\u0275mod' property.`);return a}function nr(i){return Array.isArray(i)&&"object"==typeof i[1]}function Dr(i){return Array.isArray(i)&&!0===i[1]}function Qa(i){return 0!=(8&i.flags)}function ta(i){return 2==(2&i.flags)}function yl(i){return 1==(1&i.flags)}function yr(i){return null!==i.template}function Rh(i){return 0!=(256&i[2])}function Si(i,o){return i.hasOwnProperty(Z)?i[Z]:null}class Gi{constructor(o,a,l){this.previousValue=o,this.currentValue=a,this.firstChange=l}isFirstChange(){return this.firstChange}}function zi(){return Ys}function Ys(i){return i.type.prototype.ngOnChanges&&(i.setInput=Xa),na}function na(){const i=kh(this),o=i?.current;if(o){const a=i.previous;if(a===Ir)i.previous=o;else for(let l in o)a[l]=o[l];i.current=null,this.ngOnChanges(o)}}function Xa(i,o,a,l){const d=kh(i)||function ra(i,o){return i[El]=o}(i,{previous:Ir,current:null}),p=d.current||(d.current={}),_=d.previous,E=this.declaredInputs[a],I=_[E];p[E]=new Gi(I&&I.currentValue,o,_===Ir),i[l]=o}zi.ngInherit=!0;const El="__ngSimpleChanges__";function kh(i){return i[El]||null}function vn(i){for(;Array.isArray(i);)i=i[0];return i}function ii(i,o){return vn(o[i])}function Cr(i,o){return vn(o[i.index])}function Qs(i,o){return i.data[o]}function jt(i,o){const a=o[i];return nr(a)?a:a[0]}function ia(i){return 4==(4&i[2])}function Js(i){return 64==(64&i[2])}function yi(i,o){return null==o?null:i[o]}function ru(i){i[18]=0}function mn(i,o){i[5]+=o;let a=i,l=i[3];for(;null!==l&&(1===o&&1===a[5]||-1===o&&0===a[5]);)l[5]+=o,a=l,l=l[3]}const Ct={lFrame:Rl(null),bindingsEnabled:!0};function Zi(){return Ct.bindingsEnabled}function Te(){return Ct.lFrame.lView}function Ft(){return Ct.lFrame.tView}function au(i){return Ct.lFrame.contextLView=i,i[8]}function uu(i){return Ct.lFrame.contextLView=null,i}function wn(){let i=lu();for(;null!==i&&64===i.type;)i=i.parent;return i}function lu(){return Ct.lFrame.currentTNode}function si(i,o){const a=Ct.lFrame;a.currentTNode=i,a.isParent=o}function oa(){return Ct.lFrame.isParent}function eo(){return Ct.lFrame.bindingIndex++}function Zp(i,o){const a=Ct.lFrame;a.bindingIndex=a.bindingRootIndex=i,cu(o)}function cu(i){Ct.lFrame.currentDirectiveIndex=i}function Al(){return Ct.lFrame.currentQueryIndex}function ca(i){Ct.lFrame.currentQueryIndex=i}function xl(i){const o=i[1];return 2===o.type?o.declTNode:1===o.type?i[6]:null}function du(i,o,a){if(a&We.SkipSelf){let d=o,p=i;for(;!(d=d.parent,null!==d||a&We.Host||(d=xl(p),null===d||(p=p[15],10&d.type))););if(null===d)return!1;o=d,i=p}const l=Ct.lFrame=Ml();return l.currentTNode=o,l.lView=i,!0}function hu(i){const o=Ml(),a=i[1];Ct.lFrame=o,o.currentTNode=a.firstChild,o.lView=i,o.tView=a,o.contextLView=i,o.bindingIndex=a.bindingStartIndex,o.inI18n=!1}function Ml(){const i=Ct.lFrame,o=null===i?null:i.child;return null===o?Rl(i):o}function Rl(i){const o={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:i,child:null,inI18n:!1};return null!==i&&(i.child=o),o}function Nl(){const i=Ct.lFrame;return Ct.lFrame=i.parent,i.currentTNode=null,i.lView=null,i}const td=Nl;function to(){const i=Nl();i.isParent=!0,i.tView=null,i.selectedIndex=-1,i.contextLView=null,i.elementDepthCount=0,i.currentDirectiveIndex=-1,i.currentNamespace=null,i.bindingRootIndex=-1,i.bindingIndex=-1,i.currentQueryIndex=0}function zn(){return Ct.lFrame.selectedIndex}function $r(i){Ct.lFrame.selectedIndex=i}function cn(){const i=Ct.lFrame;return Qs(i.tView,i.selectedIndex)}function Pl(i,o){for(let a=o.directiveStart,l=o.directiveEnd;a<l;a++){const p=i.data[a].type.prototype,{ngAfterContentInit:_,ngAfterContentChecked:E,ngAfterViewInit:I,ngAfterViewChecked:T,ngOnDestroy:R}=p;_&&(i.contentHooks||(i.contentHooks=[])).push(-a,_),E&&((i.contentHooks||(i.contentHooks=[])).push(a,E),(i.contentCheckHooks||(i.contentCheckHooks=[])).push(a,E)),I&&(i.viewHooks||(i.viewHooks=[])).push(-a,I),T&&((i.viewHooks||(i.viewHooks=[])).push(a,T),(i.viewCheckHooks||(i.viewCheckHooks=[])).push(a,T)),null!=R&&(i.destroyHooks||(i.destroyHooks=[])).push(a,R)}}function Do(i,o,a){To(i,o,3,a)}function Co(i,o,a,l){(3&i[2])===a&&To(i,o,a,l)}function id(i,o){let a=i[2];(3&a)===o&&(a&=2047,a+=1,i[2]=a)}function To(i,o,a,l){const p=l??-1,_=o.length-1;let E=0;for(let I=void 0!==l?65535&i[18]:0;I<_;I++)if("number"==typeof o[I+1]){if(E=o[I],null!=l&&E>=l)break}else o[I]<0&&(i[18]+=65536),(E<p||-1==p)&&(sd(i,a,o,I),i[18]=(4294901760&i[18])+I+2),I++}function sd(i,o,a,l){const d=a[l]<0,p=a[l+1],E=i[d?-a[l]:a[l]];if(d){if(i[2]>>11<i[18]>>16&&(3&i[2])===o){i[2]+=2048;try{p.call(E)}finally{}}}else try{p.call(E)}finally{}}class Cs{constructor(o,a,l){this.factory=o,this.resolving=!1,this.canSeeViewProviders=a,this.injectImpl=l}}function Ao(i,o,a){let l=0;for(;l<a.length;){const d=a[l];if("number"==typeof d){if(0!==d)break;l++;const p=a[l++],_=a[l++],E=a[l++];i.setAttribute(o,_,E,p)}else{const p=d,_=a[++l];_u(p)?i.setProperty(o,p,_):i.setAttribute(o,p,_),l++}}return l}function io(i){return 3===i||4===i||6===i}function _u(i){return 64===i.charCodeAt(0)}function da(i,o){if(null!==o&&0!==o.length)if(null===i||0===i.length)i=o.slice();else{let a=-1;for(let l=0;l<o.length;l++){const d=o[l];"number"==typeof d?a=d:0===a||ad(i,a,d,null,-1===a||2===a?o[++l]:null)}}return i}function ad(i,o,a,l,d){let p=0,_=i.length;if(-1===o)_=-1;else for(;p<i.length;){const E=i[p++];if("number"==typeof E){if(E===o){_=-1;break}if(E>o){_=p-1;break}}}for(;p<i.length;){const E=i[p];if("number"==typeof E)break;if(E===a){if(null===l)return void(null!==d&&(i[p+1]=d));if(l===i[p+1])return void(i[p+2]=d)}p++,null!==l&&p++,null!==d&&p++}-1!==_&&(i.splice(_,0,o),p=_+1),i.splice(p++,0,a),null!==l&&i.splice(p++,0,l),null!==d&&i.splice(p++,0,d)}function ud(i){return-1!==i}function rr(i){return 32767&i}function fa(i,o){let a=function ha(i){return i>>16}(i),l=o;for(;a>0;)l=l[15],a--;return l}let xi=!0;function pa(i){const o=xi;return xi=i,o}let Mn=0;const _i={};function so(i,o){const a=wu(i,o);if(-1!==a)return a;const l=o[1];l.firstCreatePass&&(i.injectorIndex=o.length,ma(l.data,i),ma(o,null),ma(l.blueprint,null));const d=Eu(i,o),p=i.injectorIndex;if(ud(d)){const _=rr(d),E=fa(d,o),I=E[1].data;for(let T=0;T<8;T++)o[p+T]=E[_+T]|I[_+T]}return o[p+8]=d,p}function ma(i,o){i.push(0,0,0,0,0,0,0,0,o)}function wu(i,o){return-1===i.injectorIndex||i.parent&&i.parent.injectorIndex===i.injectorIndex||null===o[i.injectorIndex+8]?-1:i.injectorIndex}function Eu(i,o){if(i.parent&&-1!==i.parent.injectorIndex)return i.parent.injectorIndex;let a=0,l=null,d=o;for(;null!==d;){if(l=Ro(d),null===l)return-1;if(a++,d=d[15],-1!==l.injectorIndex)return l.injectorIndex|a<<16}return-1}function Ts(i,o,a){!function vu(i,o,a){let l;"string"==typeof a?l=a.charCodeAt(0)||0:a.hasOwnProperty(j)&&(l=a[j]),null==l&&(l=a[j]=Mn++);const d=255&l;o.data[i+(d>>5)]|=1<<d}(i,o,a)}function Ss(i,o,a){if(a&We.Optional)return i;_e()}function Ll(i,o,a,l){if(a&We.Optional&&void 0===l&&(l=null),0==(a&(We.Self|We.Host))){const d=i[9],p=An(void 0);try{return d?d.get(o,l,a&We.Optional):fi(o,l,a&We.Optional)}finally{An(p)}}return Ss(l,0,a)}function oo(i,o,a,l=We.Default,d){if(null!==i){if(1024&o[2]){const _=function Mo(i,o,a,l,d){let p=i,_=o;for(;null!==p&&null!==_&&1024&_[2]&&!(256&_[2]);){const E=ya(p,_,a,l|We.Self,_i);if(E!==_i)return E;let I=p.parent;if(!I){const T=_[21];if(T){const R=T.get(a,_i,l);if(R!==_i)return R}I=Ro(_),_=_[15]}p=I}return d}(i,o,a,l,_i);if(_!==_i)return _}const p=ya(i,o,a,l,_i);if(p!==_i)return p}return Ll(o,a,l,d)}function ya(i,o,a,l,d){const p=function Vl(i){if("string"==typeof i)return i.charCodeAt(0)||0;const o=i.hasOwnProperty(j)?i[j]:void 0;return"number"==typeof o?o>=0?255&o:Ul:o}(a);if("function"==typeof p){if(!du(o,i,l))return l&We.Host?Ss(d,0,l):Ll(o,a,l,d);try{const _=p(l);if(null!=_||l&We.Optional)return _;_e()}finally{td()}}else if("number"==typeof p){let _=null,E=wu(i,o),I=-1,T=l&We.Host?o[16][6]:null;for((-1===E||l&We.SkipSelf)&&(I=-1===E?Eu(i,o):o[E+8],-1!==I&&_a(l,!1)?(_=o[1],E=rr(I),o=fa(I,o)):E=-1);-1!==E;){const R=o[1];if(Iu(p,E,R.data)){const O=dd(E,o,a,_,l,T);if(O!==_i)return O}I=o[E+8],-1!==I&&_a(l,o[1].data[E+8]===T)&&Iu(p,E,o)?(_=R,E=rr(I),o=fa(I,o)):E=-1}}return d}function dd(i,o,a,l,d,p){const _=o[1],E=_.data[i+8],R=xo(E,_,a,null==l?ta(E)&&xi:l!=_&&0!=(3&E.type),d&We.Host&&p===E);return null!==R?Yi(o,_,R,E):_i}function xo(i,o,a,l,d){const p=i.providerIndexes,_=o.data,E=1048575&p,I=i.directiveStart,R=p>>20,z=d?E+R:i.directiveEnd;for(let Y=l?E:E+R;Y<z;Y++){const we=_[Y];if(Y<I&&a===we||Y>=I&&we.type===a)return Y}if(d){const Y=_[I];if(Y&&yr(Y)&&Y.type===a)return I}return null}function Yi(i,o,a,l){let d=i[a];const p=o.data;if(function ro(i){return i instanceof Cs}(d)){const _=d;_.resolving&&function Ke(i,o){const a=o?`. Dependency path: ${o.join(" > ")} > ${i}`:"";throw new ve(-200,`Circular dependency in DI detected for ${i}${a}`)}(function fe(i){return"function"==typeof i?i.name||i.toString():"object"==typeof i&&null!=i&&"function"==typeof i.type?i.type.name||i.type.toString():me(i)}(p[a]));const E=pa(_.canSeeViewProviders);_.resolving=!0;const I=_.injectImpl?An(_.injectImpl):null;du(i,l,We.Default);try{d=i[a]=_.factory(void 0,p,i,l),o.firstCreatePass&&a>=l.directiveStart&&function rd(i,o,a){const{ngOnChanges:l,ngOnInit:d,ngDoCheck:p}=o.type.prototype;if(l){const _=Ys(o);(a.preOrderHooks||(a.preOrderHooks=[])).push(i,_),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(i,_)}d&&(a.preOrderHooks||(a.preOrderHooks=[])).push(0-i,d),p&&((a.preOrderHooks||(a.preOrderHooks=[])).push(i,p),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(i,p))}(a,p[a],o)}finally{null!==I&&An(I),pa(E),_.resolving=!1,td()}}return d}function Iu(i,o,a){return!!(a[o+(i>>5)]&1<<i)}function _a(i,o){return!(i&We.Self||i&We.Host&&o)}class ao{constructor(o,a){this._tNode=o,this._lView=a}get(o,a,l){return oo(this._tNode,this._lView,o,l,a)}}function Ul(){return new ao(wn(),Te())}function Qi(i){return xn(()=>{const o=i.prototype.constructor,a=o[Z]||bu(o),l=Object.prototype;let d=Object.getPrototypeOf(i.prototype).constructor;for(;d&&d!==l;){const p=d[Z]||bu(d);if(p&&p!==a)return p;d=Object.getPrototypeOf(d)}return p=>new p})}function bu(i){return Le(i)?()=>{const o=bu(Q(i));return o&&o()}:Si(i)}function Ro(i){const o=i[1],a=o.type;return 2===a?o.declTNode:1===a?i[6]:null}function Du(i){return function cd(i,o){if("class"===o)return i.classes;if("style"===o)return i.styles;const a=i.attrs;if(a){const l=a.length;let d=0;for(;d<l;){const p=a[d];if(io(p))break;if(0===p)d+=2;else if("number"==typeof p)for(d++;d<l&&"string"==typeof a[d];)d++;else{if(p===o)return a[d+1];d+=2}}}return null}(wn(),i)}const As="__parameters__";function ko(i,o,a){return xn(()=>{const l=function Cu(i){return function(...a){if(i){const l=i(...a);for(const d in l)this[d]=l[d]}}}(o);function d(...p){if(this instanceof d)return l.apply(this,p),this;const _=new d(...p);return E.annotation=_,E;function E(I,T,R){const O=I.hasOwnProperty(As)?I[As]:Object.defineProperty(I,As,{value:[]})[As];for(;O.length<=R;)O.push(null);return(O[R]=O[R]||[]).push(_),I}}return a&&(d.prototype=Object.create(a.prototype)),d.prototype.ngMetadataName=i,d.annotationCls=d,d})}class on{constructor(o,a){this._desc=o,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof a?this.__NG_ELEMENT_ID__=a:void 0!==a&&(this.\u0275prov=Zt({token:this,providedIn:a.providedIn||"root",factory:a.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function Gr(i,o){void 0===o&&(o=i);for(let a=0;a<i.length;a++){let l=i[a];Array.isArray(l)?(o===i&&(o=i.slice(0,a)),Gr(l,o)):o!==i&&o.push(l)}return o}function vi(i,o){i.forEach(a=>Array.isArray(a)?vi(a,o):o(a))}function jl(i,o,a){o>=i.length?i.push(a):i.splice(o,0,a)}function Po(i,o){return o>=i.length-1?i.pop():i.splice(o,1)[0]}function Tr(i,o,a){let l=Xi(i,o);return l>=0?i[1|l]=a:(l=~l,function pt(i,o,a,l){let d=i.length;if(d==o)i.push(a,l);else if(1===d)i.push(l,i[0]),i[0]=a;else{for(d--,i.push(i[d-1],i[d]);d>o;)i[d]=i[d-2],d--;i[o]=a,i[o+1]=l}}(i,l,o,a)),l}function Ea(i,o){const a=Xi(i,o);if(a>=0)return i[1|a]}function Xi(i,o){return function Sr(i,o,a){let l=0,d=i.length>>a;for(;d!==l;){const p=l+(d-l>>1),_=i[p<<a];if(o===_)return p<<a;_>o?d=p:l=p+1}return~(d<<a)}(i,o,1)}const an={},Ri="__NG_DI_FLAG__",Mu="ngTempTokenPath",Ru=/\n/gm,Hl="__source";let co;function es(i){const o=co;return co=i,o}function Gl(i,o=We.Default){if(void 0===co)throw new ve(-203,!1);return null===co?fi(i,void 0,o):co.get(i,o&We.Optional?null:void 0,o)}function bn(i,o=We.Default){return(function ji(){return Br}()||Gl)(Q(i),o)}function D(i,o=We.Default){return"number"!=typeof o&&(o=0|(o.optional&&8)|(o.host&&1)|(o.self&&2)|(o.skipSelf&&4)),bn(i,o)}function C(i){const o=[];for(let a=0;a<i.length;a++){const l=Q(i[a]);if(Array.isArray(l)){if(0===l.length)throw new ve(900,!1);let d,p=We.Default;for(let _=0;_<l.length;_++){const E=l[_],I=F(E);"number"==typeof I?-1===I?d=E.token:p|=I:d=E}o.push(bn(d,p))}else o.push(bn(l))}return o}function x(i,o){return i[Ri]=o,i.prototype[Ri]=o,i}function F(i){return i[Ri]}const Be=x(ko("Optional"),8),vt=x(ko("SkipSelf"),4);let Xp;function n0(i){Xp=i}class Ou{constructor(o){this.changingThisBreaksApplicationSecurity=o}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function rs(i){return i instanceof Ou?i.changingThisBreaksApplicationSecurity:i}const Kh=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;var Fn=(()=>((Fn=Fn||{})[Fn.NONE=0]="NONE",Fn[Fn.HTML=1]="HTML",Fn[Fn.STYLE=2]="STYLE",Fn[Fn.SCRIPT=3]="SCRIPT",Fn[Fn.URL=4]="URL",Fn[Fn.RESOURCE_URL=5]="RESOURCE_URL",Fn))();function fg(i){const o=function Vo(){const i=Te();return i&&i[12]}();return o?o.sanitize(Fn.URL,i)||"":function ku(i,o){const a=function gd(i){return i instanceof Ou&&i.getTypeName()||null}(i);if(null!=a&&a!==o){if("ResourceURL"===a&&"URL"===o)return!0;throw new Error(`Required a safe ${o}, got a ${a} (see https://g.co/ng/security#xss)`)}return a===o}(i,"URL")?rs(i):function fo(i){return(i=String(i)).match(Kh)?i:"unsafe:"+i}(me(i))}const tc=new on("ENVIRONMENT_INITIALIZER"),mg=new on("INJECTOR",-1),ef=new on("INJECTOR_DEF_TYPES");class Ed{get(o,a=an){if(a===an){const l=new Error(`NullInjectorError: No provider for ${he(o)}!`);throw l.name="NullInjectorError",l}return a}}function yg(...i){return{\u0275providers:oi(0,i)}}function oi(i,...o){const a=[],l=new Set;let d;return vi(o,p=>{const _=p;nc(_,a,[],l)&&(d||(d=[]),d.push(_))}),void 0!==d&&xa(d,a),a}function xa(i,o){for(let a=0;a<i.length;a++){const{providers:d}=i[a];vi(d,p=>{o.push(p)})}}function nc(i,o,a,l){if(!(i=Q(i)))return!1;let d=null,p=ys(i);const _=!p&&Mt(i);if(p||_){if(_&&!_.standalone)return!1;d=i}else{const I=i.ngModule;if(p=ys(I),!p)return!1;d=I}const E=l.has(d);if(_){if(E)return!1;if(l.add(d),_.dependencies){const I="function"==typeof _.dependencies?_.dependencies():_.dependencies;for(const T of I)nc(T,o,a,l)}}else{if(!p)return!1;{if(null!=p.imports&&!E){let T;l.add(d);try{vi(p.imports,R=>{nc(R,o,a,l)&&(T||(T=[]),T.push(R))})}finally{}void 0!==T&&xa(T,o)}if(!E){const T=Si(d)||(()=>new d);o.push({provide:d,useFactory:T,deps:Dt},{provide:ef,useValue:d,multi:!0},{provide:tc,useValue:()=>bn(d),multi:!0})}const I=p.providers;null==I||E||vi(I,R=>{o.push(R)})}}return d!==i&&void 0!==i.providers}const Id=de({provide:String,useValue:de});function rc(i){return null!==i&&"object"==typeof i&&Id in i}function po(i){return"function"==typeof i}const Fu=new on("Set Injector scope."),ic={},Fy={};let Dd;function sc(){return void 0===Dd&&(Dd=new Ed),Dd}class Ln{}class Cd extends Ln{constructor(o,a,l,d){super(),this.parent=a,this.source=l,this.scopes=d,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Td(o,_=>this.processProvider(_)),this.records.set(mg,Na(void 0,this)),d.has("environment")&&this.records.set(Ln,Na(void 0,this));const p=this.records.get(Fu);null!=p&&"string"==typeof p.value&&this.scopes.add(p.value),this.injectorDefTypes=new Set(this.get(ef.multi,Dt,We.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const o of this._ngOnDestroyHooks)o.ngOnDestroy();for(const o of this._onDestroyHooks)o()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(o){this._onDestroyHooks.push(o)}runInContext(o){this.assertNotDestroyed();const a=es(this),l=An(void 0);try{return o()}finally{es(a),An(l)}}get(o,a=an,l=We.Default){this.assertNotDestroyed();const d=es(this),p=An(void 0);try{if(!(l&We.SkipSelf)){let E=this.records.get(o);if(void 0===E){const I=function rf(i){return"function"==typeof i||"object"==typeof i&&i instanceof on}(o)&&Xt(o);E=I&&this.injectableDefInScope(I)?Na(Ma(o),ic):null,this.records.set(o,E)}if(null!=E)return this.hydrate(o,E)}return(l&We.Self?sc():this.parent).get(o,a=l&We.Optional&&a===an?null:a)}catch(_){if("NullInjectorError"===_.name){if((_[Mu]=_[Mu]||[]).unshift(he(o)),d)throw _;return function X(i,o,a,l){const d=i[Mu];throw o[Hl]&&d.unshift(o[Hl]),i.message=function ae(i,o,a,l=null){i=i&&"\n"===i.charAt(0)&&"\u0275"==i.charAt(1)?i.slice(2):i;let d=he(o);if(Array.isArray(o))d=o.map(he).join(" -> ");else if("object"==typeof o){let p=[];for(let _ in o)if(o.hasOwnProperty(_)){let E=o[_];p.push(_+":"+("string"==typeof E?JSON.stringify(E):he(E)))}d=`{${p.join(", ")}}`}return`${a}${l?"("+l+")":""}[${d}]: ${i.replace(Ru,"\n  ")}`}("\n"+i.message,d,a,l),i.ngTokenPath=d,i[Mu]=null,i}(_,o,"R3InjectorError",this.source)}throw _}finally{An(p),es(d)}}resolveInjectorInitializers(){const o=es(this),a=An(void 0);try{const l=this.get(tc.multi,Dt,We.Self);for(const d of l)d()}finally{es(o),An(a)}}toString(){const o=[],a=this.records;for(const l of a.keys())o.push(he(l));return`R3Injector[${o.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new ve(205,!1)}processProvider(o){let a=po(o=Q(o))?o:Q(o&&o.provide);const l=function go(i){return rc(i)?Na(void 0,i.useValue):Na(Ra(i),ic)}(o);if(po(o)||!0!==o.multi)this.records.get(a);else{let d=this.records.get(a);d||(d=Na(void 0,ic,!0),d.factory=()=>C(d.multi),this.records.set(a,d)),a=o,d.multi.push(o)}this.records.set(a,l)}hydrate(o,a){return a.value===ic&&(a.value=Fy,a.value=a.factory()),"object"==typeof a.value&&a.value&&function nf(i){return null!==i&&"object"==typeof i&&"function"==typeof i.ngOnDestroy}(a.value)&&this._ngOnDestroyHooks.add(a.value),a.value}injectableDefInScope(o){if(!o.providedIn)return!1;const a=Q(o.providedIn);return"string"==typeof a?"any"===a||this.scopes.has(a):this.injectorDefTypes.has(a)}}function Ma(i){const o=Xt(i),a=null!==o?o.factory:Si(i);if(null!==a)return a;if(i instanceof on)throw new ve(204,!1);if(i instanceof Function)return function Ly(i){const o=i.length;if(o>0)throw function wi(i,o){const a=[];for(let l=0;l<i;l++)a.push(o);return a}(o,"?"),new ve(204,!1);const a=function mr(i){const o=i&&(i[Di]||i[hi]);if(o){const a=function Vr(i){if(i.hasOwnProperty("name"))return i.name;const o=(""+i).match(/^function\s*([^\s(]+)/);return null===o?"":o[1]}(i);return console.warn(`DEPRECATED: DI is instantiating a token "${a}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${a}" class.`),o}return null}(i);return null!==a?()=>a.factory(i):()=>new i}(i);throw new ve(204,!1)}function Ra(i,o,a){let l;if(po(i)){const d=Q(i);return Si(d)||Ma(d)}if(rc(i))l=()=>Q(i.useValue);else if(function tf(i){return!(!i||!i.useFactory)}(i))l=()=>i.useFactory(...C(i.deps||[]));else if(function bd(i){return!(!i||!i.useExisting)}(i))l=()=>bn(Q(i.useExisting));else{const d=Q(i&&(i.useClass||i.provide));if(!function Vy(i){return!!i.deps}(i))return Si(d)||Ma(d);l=()=>new d(...C(i.deps))}return l}function Na(i,o,a=!1){return{factory:i,value:o,multi:a?[]:void 0}}function _g(i){return!!i.\u0275providers}function Td(i,o){for(const a of i)Array.isArray(a)?Td(a,o):_g(a)?Td(a.\u0275providers,o):o(a)}class vg{}class w{resolveComponentFactory(o){throw function y(i){const o=Error(`No component factory found for ${he(i)}. Did you add it to @NgModule.entryComponents?`);return o.ngComponent=i,o}(o)}}let S=(()=>{class i{}return i.NULL=new w,i})();function N(){return W(wn(),Te())}function W(i,o){return new ue(Cr(i,o))}let ue=(()=>{class i{constructor(a){this.nativeElement=a}}return i.__NG_ELEMENT_ID__=N,i})();function Fe(i){return i instanceof ue?i.nativeElement:i}class yt{}let gt=(()=>{class i{}return i.__NG_ELEMENT_ID__=()=>function qn(){const i=Te(),a=jt(wn().index,i);return(nr(a)?a:i)[11]}(),i})(),is=(()=>{class i{}return i.\u0275prov=Zt({token:i,providedIn:"root",factory:()=>null}),i})();class Lu{constructor(o){this.full=o,this.major=o.split(".")[0],this.minor=o.split(".")[1],this.patch=o.split(".").slice(2).join(".")}}const wg=new Lu("14.2.0"),Sd={};function bg(i){return i.ngOriginalError}class ss{constructor(){this._console=console}handleError(o){const a=this._findOriginalError(o);this._console.error("ERROR",o),a&&this._console.error("ORIGINAL ERROR",a)}_findOriginalError(o){let a=o&&bg(o);for(;a&&bg(a);)a=bg(a);return a||null}}const m0=new Map;let HD=0;const sf="__ngContext__";function vr(i,o){nr(o)?(i[sf]=o[20],function y0(i){m0.set(i[20],i)}(o)):i[sf]=o}function xd(i){const o=i[sf];return"number"==typeof o?function $y(i){return m0.get(i)||null}(o):o||null}function af(i){const o=xd(i);return o?nr(o)?o:o.lView:null}function Pa(i){return i instanceof Function?i():i}var ks=(()=>((ks=ks||{})[ks.Important=1]="Important",ks[ks.DashCase=2]="DashCase",ks))();function b0(i,o){return undefined(i,o)}function Tg(i){const o=i[3];return Dr(o)?o[3]:o}function os(i){return lf(i[13])}function qy(i){return lf(i[4])}function lf(i){for(;null!==i&&!Dr(i);)i=i[4];return i}function Md(i,o,a,l,d){if(null!=l){let p,_=!1;Dr(l)?p=l:nr(l)&&(_=!0,l=l[0]);const E=vn(l);0===i&&null!==a?null==d?jo(o,a,E):lc(o,a,E,d||null,!0):1===i&&null!==a?lc(o,a,E,d||null,!0):2===i?function M0(i,o,a){const l=Bu(i,o);l&&function Uu(i,o,a,l){i.removeChild(o,a,l)}(i,l,o,a)}(o,E,_):3===i&&o.destroyNode(E),null!=p&&function $x(i,o,a,l,d){const p=a[7];p!==vn(a)&&Md(o,i,l,p,d);for(let E=10;E<a.length;E++){const I=a[E];Rd(I[1],I,i,o,l,p)}}(o,i,p,a,d)}}function ac(i,o,a){return i.createElement(o,a)}function Zy(i,o){const a=i[9],l=a.indexOf(o),d=o[3];512&o[2]&&(o[2]&=-513,mn(d,-1)),a.splice(l,1)}function df(i,o){if(i.length<=10)return;const a=10+o,l=i[a];if(l){const d=l[17];null!==d&&d!==i&&Zy(d,l),o>0&&(i[a-1][4]=l[4]);const p=Po(i,10+o);!function JD(i,o){Rd(i,o,o[11],2,null,null),o[0]=null,o[6]=null}(l[1],l);const _=p[19];null!==_&&_.detachView(p[1]),l[3]=null,l[4]=null,l[2]&=-65}return l}function Ky(i,o){if(!(128&o[2])){const a=o[11];a.destroyNode&&Rd(i,o,a,3,null,null),function XD(i){let o=i[13];if(!o)return Zn(i[1],i);for(;o;){let a=null;if(nr(o))a=o[13];else{const l=o[10];l&&(a=l)}if(!a){for(;o&&!o[4]&&o!==i;)nr(o)&&Zn(o[1],o),o=o[3];null===o&&(o=i),nr(o)&&Zn(o[1],o),a=o&&o[4]}o=a}}(o)}}function Zn(i,o){if(!(128&o[2])){o[2]&=-65,o[2]|=128,function xg(i,o){let a;if(null!=i&&null!=(a=i.destroyHooks))for(let l=0;l<a.length;l+=2){const d=o[a[l]];if(!(d instanceof Cs)){const p=a[l+1];if(Array.isArray(p))for(let _=0;_<p.length;_+=2){const E=d[p[_]],I=p[_+1];try{I.call(E)}finally{}}else try{p.call(d)}finally{}}}}(i,o),function hf(i,o){const a=i.cleanup,l=o[7];let d=-1;if(null!==a)for(let p=0;p<a.length-1;p+=2)if("string"==typeof a[p]){const _=a[p+1],E="function"==typeof _?_(o):vn(o[_]),I=l[d=a[p+2]],T=a[p+3];"boolean"==typeof T?E.removeEventListener(a[p],I,T):T>=0?l[d=T]():l[d=-T].unsubscribe(),p+=2}else{const _=l[d=a[p+1]];a[p].call(_)}if(null!==l){for(let p=d+1;p<l.length;p++)(0,l[p])();o[7]=null}}(i,o),1===o[1].type&&o[11].destroy();const a=o[17];if(null!==a&&Dr(o[3])){a!==o[3]&&Zy(a,o);const l=o[19];null!==l&&l.detachView(i)}!function _0(i){m0.delete(i[20])}(o)}}function ff(i,o,a){return function Yy(i,o,a){let l=o;for(;null!==l&&40&l.type;)l=(o=l).parent;if(null===l)return a[0];if(2&l.flags){const d=i.data[l.directiveStart].encapsulation;if(d===st.None||d===st.Emulated)return null}return Cr(l,a)}(i,o.parent,a)}function lc(i,o,a,l,d){i.insertBefore(o,a,l,d)}function jo(i,o,a){i.appendChild(o,a)}function Kr(i,o,a,l,d){null!==l?lc(i,o,a,l,d):jo(i,o,a)}function Bu(i,o){return i.parentNode(o)}let x0=function A0(i,o,a){return 40&i.type?Cr(i,a):null};function ju(i,o,a,l){const d=ff(i,l,o),p=o[11],E=function Jy(i,o,a){return x0(i,o,a)}(l.parent||o[6],l,o);if(null!=d)if(Array.isArray(a))for(let I=0;I<a.length;I++)Kr(p,d,a[I],E,!1);else Kr(p,d,a,E,!1)}function Mg(i,o){if(null!==o){const a=o.type;if(3&a)return Cr(o,i);if(4&a)return Xy(-1,i[o.index]);if(8&a){const l=o.child;if(null!==l)return Mg(i,l);{const d=i[o.index];return Dr(d)?Xy(-1,d):vn(d)}}if(32&a)return b0(o,i)()||vn(i[o.index]);{const l=cc(i,o);return null!==l?Array.isArray(l)?l[0]:Mg(Tg(i[16]),l):Mg(i,o.next)}}return null}function cc(i,o){return null!==o?i[16][6].projection[o.projection]:null}function Xy(i,o){const a=10+i+1;if(a<o.length){const l=o[a],d=l[1].firstChild;if(null!==d)return Mg(l,d)}return o[7]}function Ps(i,o,a,l,d,p,_){for(;null!=a;){const E=l[a.index],I=a.type;if(_&&0===o&&(E&&vr(vn(E),l),a.flags|=4),64!=(64&a.flags))if(8&I)Ps(i,o,a.child,l,d,p,!1),Md(o,i,d,E,p);else if(32&I){const T=b0(a,l);let R;for(;R=T();)Md(o,i,d,R,p);Md(o,i,d,E,p)}else 16&I?e_(i,o,l,a,d,p):Md(o,i,d,E,p);a=_?a.projectionNext:a.next}}function Rd(i,o,a,l,d,p){Ps(a,l,i.firstChild,o,d,p,!1)}function e_(i,o,a,l,d,p){const _=a[16],I=_[6].projection[l.projection];if(Array.isArray(I))for(let T=0;T<I.length;T++)Md(o,i,d,I[T],p);else Ps(i,o,I,_[3],d,p,!0)}function Fa(i,o,a){i.setAttribute(o,"style",a)}function gf(i,o,a){""===a?i.removeAttribute(o,"class"):i.setAttribute(o,"class",a)}function N0(i,o,a){let l=i.length;for(;;){const d=i.indexOf(o,a);if(-1===d)return d;if(0===d||i.charCodeAt(d-1)<=32){const p=o.length;if(d+p===l||i.charCodeAt(d+p)<=32)return d}a=d+1}}const t_="ng-template";function O0(i,o,a){let l=0;for(;l<i.length;){let d=i[l++];if(a&&"class"===d){if(d=i[l],-1!==N0(d.toLowerCase(),o,0))return!0}else if(1===d){for(;l<i.length&&"string"==typeof(d=i[l++]);)if(d.toLowerCase()===o)return!0;return!1}}return!1}function k0(i){return 4===i.type&&i.value!==t_}function P0(i,o,a){return o===(4!==i.type||a?i.value:t_)}function eC(i,o,a){let l=4;const d=i.attrs||[],p=function Bt(i){for(let o=0;o<i.length;o++)if(io(i[o]))return o;return i.length}(d);let _=!1;for(let E=0;E<o.length;E++){const I=o[E];if("number"!=typeof I){if(!_)if(4&l){if(l=2|1&l,""!==I&&!P0(i,I,a)||""===I&&1===o.length){if(Fs(l))return!1;_=!0}}else{const T=8&l?I:o[++E];if(8&l&&null!==i.attrs){if(!O0(i.attrs,T,a)){if(Fs(l))return!1;_=!0}continue}const O=F0(8&l?"class":I,d,k0(i),a);if(-1===O){if(Fs(l))return!1;_=!0;continue}if(""!==T){let z;z=O>p?"":d[O+1].toLowerCase();const Y=8&l?z:null;if(Y&&-1!==N0(Y,T,0)||2&l&&T!==z){if(Fs(l))return!1;_=!0}}}}else{if(!_&&!Fs(l)&&!Fs(I))return!1;if(_&&Fs(I))continue;_=!1,l=I|1&l}}return Fs(l)||_}function Fs(i){return 0==(1&i)}function F0(i,o,a,l){if(null===o)return-1;let d=0;if(l||!a){let p=!1;for(;d<o.length;){const _=o[d];if(_===i)return d;if(3===_||6===_)p=!0;else{if(1===_||2===_){let E=o[++d];for(;"string"==typeof E;)E=o[++d];continue}if(4===_)break;if(0===_){d+=4;continue}}d+=p?1:2}return-1}return function yf(i,o){let a=i.indexOf(4);if(a>-1)for(a++;a<i.length;){const l=i[a];if("number"==typeof l)return-1;if(l===o)return a;a++}return-1}(o,i)}function mf(i,o,a=!1){for(let l=0;l<o.length;l++)if(eC(i,o[l],a))return!0;return!1}function $u(i,o){return i?":not("+o.trim()+")":o}function nC(i){let o=i[0],a=1,l=2,d="",p=!1;for(;a<i.length;){let _=i[a];if("string"==typeof _)if(2&l){const E=i[++a];d+="["+_+(E.length>0?'="'+E+'"':"")+"]"}else 8&l?d+="."+_:4&l&&(d+=" "+_);else""!==d&&!Fs(_)&&(o+=$u(p,d),d=""),l=_,p=p||!Fs(l);a++}return""!==d&&(o+=$u(p,d)),o}const Nt={};function _f(i){Nd(Ft(),Te(),zn()+i,!1)}function Nd(i,o,a,l){if(!l)if(3==(3&o[2])){const p=i.preOrderCheckHooks;null!==p&&Do(o,p,a)}else{const p=i.preOrderHooks;null!==p&&Co(o,p,0,a)}$r(a)}function U0(i,o=null,a=null,l){const d=vf(i,o,a,l);return d.resolveInjectorInitializers(),d}function vf(i,o=null,a=null,l,d=new Set){const p=[a||Dt,yg(i)];return l=l||("object"==typeof i?void 0:he(i)),new Cd(p,o||sc(),l||null,d)}let hc=(()=>{class i{static create(a,l){if(Array.isArray(a))return U0({name:""},l,a,"");{const d=a.name??"";return U0({name:d},a.parent,a.providers,d)}}}return i.THROW_IF_NOT_FOUND=an,i.NULL=new Ed,i.\u0275prov=Zt({token:i,providedIn:"any",factory:()=>bn(mg)}),i.__NG_ELEMENT_ID__=-1,i})();function Pi(i,o=We.Default){const a=Te();return null===a?bn(i,o):oo(wn(),a,Q(i),o)}function Fg(){throw new Error("invalid")}function pc(i,o){return i<<17|o<<2}function Ls(i){return i>>17&32767}function h_(i){return 2|i}function La(i){return(131068&i)>>2}function f_(i,o){return-131069&i|o<<2}function p_(i){return 1|i}function _C(i,o){const a=i.contentQueries;if(null!==a)for(let l=0;l<a.length;l+=2){const d=a[l],p=a[l+1];if(-1!==p){const _=i.data[p];ca(d),_.contentQueries(2,o[p],p)}}}function jg(i,o,a,l,d,p,_,E,I,T,R){const O=o.blueprint.slice();return O[0]=d,O[2]=76|l,(null!==R||i&&1024&i[2])&&(O[2]|=1024),ru(O),O[3]=O[15]=i,O[8]=a,O[10]=_||i&&i[10],O[11]=E||i&&i[11],O[12]=I||i&&i[12]||null,O[9]=T||i&&i[9]||null,O[6]=p,O[20]=function GD(){return HD++}(),O[21]=R,O[16]=2==o.type?i[16]:O,O}function Bd(i,o,a,l,d){let p=i.data[o];if(null===p)p=function Tf(i,o,a,l,d){const p=lu(),_=oa(),I=i.data[o]=function xf(i,o,a,l,d,p){return{type:a,index:l,insertBeforeIndex:null,injectorIndex:o?o.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:d,attrs:p,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:o,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,_?p:p&&p.parent,a,o,l,d);return null===i.firstChild&&(i.firstChild=I),null!==p&&(_?null==p.child&&null!==I.parent&&(p.child=I):null===p.next&&(p.next=I)),I}(i,o,a,l,d),function Wp(){return Ct.lFrame.inI18n}()&&(p.flags|=64);else if(64&p.type){p.type=a,p.value=l,p.attrs=d;const _=function bo(){const i=Ct.lFrame,o=i.currentTNode;return i.isParent?o:o.parent}();p.injectorIndex=null===_?-1:_.injectorIndex}return si(p,!0),p}function Qr(i,o,a,l){if(0===a)return-1;const d=o.length;for(let p=0;p<a;p++)o.push(l),i.blueprint.push(l),i.data.push(null);return d}function Sf(i,o,a){hu(o);try{const l=i.viewQuery;null!==l&&S_(1,l,a);const d=i.template;null!==d&&rE(i,o,d,1,a),i.firstCreatePass&&(i.firstCreatePass=!1),i.staticContentQueries&&_C(i,o),i.staticViewQueries&&S_(2,i.viewQuery,a);const p=i.components;null!==p&&function vC(i,o){for(let a=0;a<o.length;a++)gE(i,o[a])}(o,p)}catch(l){throw i.firstCreatePass&&(i.incompleteFirstPass=!0,i.firstCreatePass=!1),l}finally{o[2]&=-5,to()}}function ja(i,o,a,l){const d=o[2];if(128!=(128&d)){hu(o);try{ru(o),function Tl(i){return Ct.lFrame.bindingIndex=i}(i.bindingStartIndex),null!==a&&rE(i,o,a,2,l);const _=3==(3&d);if(_){const T=i.preOrderCheckHooks;null!==T&&Do(o,T,null)}else{const T=i.preOrderHooks;null!==T&&Co(o,T,0,null),id(o,0)}if(function RC(i){for(let o=os(i);null!==o;o=qy(o)){if(!o[2])continue;const a=o[9];for(let l=0;l<a.length;l++){const d=a[l],p=d[3];0==(512&d[2])&&mn(p,1),d[2]|=512}}}(o),function MC(i){for(let o=os(i);null!==o;o=qy(o))for(let a=10;a<o.length;a++){const l=o[a],d=l[1];Js(l)&&ja(d,l,d.template,l[8])}}(o),null!==i.contentQueries&&_C(i,o),_){const T=i.contentCheckHooks;null!==T&&Do(o,T)}else{const T=i.contentHooks;null!==T&&Co(o,T,1),id(o,1)}!function Xx(i,o){const a=i.hostBindingOpCodes;if(null!==a)try{for(let l=0;l<a.length;l++){const d=a[l];if(d<0)$r(~d);else{const p=d,_=a[++l],E=a[++l];Zp(_,p),E(2,o[p])}}}finally{$r(-1)}}(i,o);const E=i.components;null!==E&&function E_(i,o){for(let a=0;a<o.length;a++)NC(i,o[a])}(o,E);const I=i.viewQuery;if(null!==I&&S_(2,I,l),_){const T=i.viewCheckHooks;null!==T&&Do(o,T)}else{const T=i.viewHooks;null!==T&&Co(o,T,2),id(o,2)}!0===i.firstUpdatePass&&(i.firstUpdatePass=!1),o[2]&=-41,512&o[2]&&(o[2]&=-513,mn(o[3],-1))}finally{to()}}}function wC(i,o,a,l){const d=o[10],_=ia(o);try{!_&&d.begin&&d.begin(),_&&Sf(i,o,l),ja(i,o,a,l)}finally{!_&&d.end&&d.end()}}function rE(i,o,a,l,d){const p=zn(),_=2&l;try{$r(-1),_&&o.length>22&&Nd(i,o,22,!1),a(l,d)}finally{$r(p)}}function jd(i,o,a){!Zi()||(function CC(i,o,a,l){const d=a.directiveStart,p=a.directiveEnd;i.firstCreatePass||so(a,o),vr(l,o);const _=a.initialInputs;for(let E=d;E<p;E++){const I=i.data[E],T=yr(I);T&&hE(o,a,I);const R=Yi(o,i,E,a);vr(R,o),null!==_&&fE(0,E-d,R,I,0,_),T&&(jt(a.index,o)[8]=R)}}(i,o,a,Cr(a,o)),128==(128&a.flags)&&function TC(i,o,a){const l=a.directiveStart,d=a.directiveEnd,p=a.index,_=function Sl(){return Ct.lFrame.currentDirectiveIndex}();try{$r(p);for(let E=l;E<d;E++){const I=i.data[E],T=o[E];cu(E),(null!==I.hostBindings||0!==I.hostVars||null!==I.hostAttrs)&&uE(I,T)}}finally{$r(-1),cu(_)}}(i,o,a))}function b_(i,o,a=Cr){const l=o.localNames;if(null!==l){let d=o.index+1;for(let p=0;p<l.length;p+=2){const _=l[p+1],E=-1===_?a(o,i):i[_];i[d++]=E}}}function iE(i){const o=i.tView;return null===o||o.incompleteFirstPass?i.tView=zu(1,null,i.template,i.decls,i.vars,i.directiveDefs,i.pipeDefs,i.viewQuery,i.schemas,i.consts):o}function zu(i,o,a,l,d,p,_,E,I,T){const R=22+l,O=R+d,z=function Af(i,o){const a=[];for(let l=0;l<o;l++)a.push(l<i?null:Nt);return a}(R,O),Y="function"==typeof T?T():T;return z[1]={type:i,blueprint:z,template:a,queries:null,viewQuery:E,declTNode:o,data:z.slice().fill(null,R),bindingStartIndex:R,expandoStartIndex:O,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof p?p():p,pipeRegistry:"function"==typeof _?_():_,firstChild:null,schemas:I,consts:Y,incompleteFirstPass:!1}}function $d(i,o,a,l){const d=_E(o);null===a?d.push(l):(d.push(a),i.firstCreatePass&&Of(i).push(l,d.length-1))}function sE(i,o,a){for(let l in i)if(i.hasOwnProperty(l)){const d=i[l];(a=null===a?{}:a).hasOwnProperty(l)?a[l].push(o,d):a[l]=[o,d]}return a}function oE(i,o){const l=o.directiveEnd,d=i.data,p=o.attrs,_=[];let E=null,I=null;for(let T=o.directiveStart;T<l;T++){const R=d[T],O=R.inputs,z=null===p||k0(o)?null:D_(O,p);_.push(z),E=sE(O,T,E),I=sE(R.outputs,T,I)}null!==E&&(E.hasOwnProperty("class")&&(o.flags|=16),E.hasOwnProperty("style")&&(o.flags|=32)),o.initialInputs=_,o.inputs=E,o.outputs=I}function aE(i,o){const a=jt(o,i);16&a[2]||(a[2]|=32)}function Mf(i,o,a,l){let d=!1;if(Zi()){const p=function SC(i,o,a){const l=i.directiveRegistry;let d=null;if(l)for(let p=0;p<l.length;p++){const _=l[p];mf(a,_.selectors,!1)&&(d||(d=[]),Ts(so(a,o),i,_.type),yr(_)?(lE(i,a),d.unshift(_)):d.push(_))}return d}(i,o,a),_=null===l?null:{"":-1};if(null!==p){d=!0,cE(a,i.data.length,p.length);for(let R=0;R<p.length;R++){const O=p[R];O.providersResolver&&O.providersResolver(O)}let E=!1,I=!1,T=Qr(i,o,p.length,null);for(let R=0;R<p.length;R++){const O=p[R];a.mergedAttrs=da(a.mergedAttrs,O.hostAttrs),dE(i,a,o,T,O),xC(T,O,_),null!==O.contentQueries&&(a.flags|=8),(null!==O.hostBindings||null!==O.hostAttrs||0!==O.hostVars)&&(a.flags|=128);const z=O.type.prototype;!E&&(z.ngOnChanges||z.ngOnInit||z.ngDoCheck)&&((i.preOrderHooks||(i.preOrderHooks=[])).push(a.index),E=!0),!I&&(z.ngOnChanges||z.ngDoCheck)&&((i.preOrderCheckHooks||(i.preOrderCheckHooks=[])).push(a.index),I=!0),T++}oE(i,a)}_&&function AC(i,o,a){if(o){const l=i.localNames=[];for(let d=0;d<o.length;d+=2){const p=a[o[d+1]];if(null==p)throw new ve(-301,!1);l.push(o[d],p)}}}(a,l,_)}return a.mergedAttrs=da(a.mergedAttrs,a.attrs),d}function Rf(i,o,a,l,d,p){const _=p.hostBindings;if(_){let E=i.hostBindingOpCodes;null===E&&(E=i.hostBindingOpCodes=[]);const I=~o.index;(function Hd(i){let o=i.length;for(;o>0;){const a=i[--o];if("number"==typeof a&&a<0)return a}return 0})(E)!=I&&E.push(I),E.push(l,d,_)}}function uE(i,o){null!==i.hostBindings&&i.hostBindings(1,o)}function lE(i,o){o.flags|=2,(i.components||(i.components=[])).push(o.index)}function xC(i,o,a){if(a){if(o.exportAs)for(let l=0;l<o.exportAs.length;l++)a[o.exportAs[l]]=i;yr(o)&&(a[""]=i)}}function cE(i,o,a){i.flags|=1,i.directiveStart=o,i.directiveEnd=o+a,i.providerIndexes=o}function dE(i,o,a,l,d){i.data[l]=d;const p=d.factory||(d.factory=Si(d.type)),_=new Cs(p,yr(d),Pi);i.blueprint[l]=_,a[l]=_,Rf(i,o,0,l,Qr(i,a,d.hostVars,Nt),d)}function hE(i,o,a){const l=Cr(o,i),d=iE(a),p=i[10],_=gc(i,jg(i,d,null,a.onPush?32:16,l,o,p,p.createRenderer(l,a),null,null,null));i[o.index]=_}function $o(i,o,a,l,d,p){const _=Cr(i,o);!function Nf(i,o,a,l,d,p,_){if(null==p)i.removeAttribute(o,d,a);else{const E=null==_?me(p):_(p,l||"",d);i.setAttribute(o,d,E,a)}}(o[11],_,p,i.value,a,l,d)}function fE(i,o,a,l,d,p){const _=p[o];if(null!==_){const E=l.setInput;for(let I=0;I<_.length;){const T=_[I++],R=_[I++],O=_[I++];null!==E?l.setInput(a,O,T,R):a[R]=O}}}function D_(i,o){let a=null,l=0;for(;l<o.length;){const d=o[l];if(0!==d)if(5!==d){if("number"==typeof d)break;i.hasOwnProperty(d)&&(null===a&&(a=[]),a.push(d,i[d],o[l+1])),l+=2}else l+=2;else l+=4}return a}function pE(i,o,a,l){return new Array(i,!0,!1,o,null,0,l,a,null,null)}function NC(i,o){const a=jt(o,i);if(Js(a)){const l=a[1];48&a[2]?ja(l,a,l.template,a[8]):a[5]>0&&Gd(a)}}function Gd(i){for(let l=os(i);null!==l;l=qy(l))for(let d=10;d<l.length;d++){const p=l[d];if(Js(p))if(512&p[2]){const _=p[1];ja(_,p,_.template,p[8])}else p[5]>0&&Gd(p)}const a=i[1].components;if(null!==a)for(let l=0;l<a.length;l++){const d=jt(a[l],i);Js(d)&&d[5]>0&&Gd(d)}}function gE(i,o){const a=jt(o,i),l=a[1];(function mE(i,o){for(let a=o.length;a<i.blueprint.length;a++)o.push(i.blueprint[a])})(l,a),Sf(l,a,a[8])}function gc(i,o){return i[13]?i[14][4]=o:i[13]=o,i[14]=o,o}function zd(i){for(;i;){i[2]|=32;const o=Tg(i);if(Rh(i)&&!o)return i;i=o}return null}function S_(i,o,a){ca(0),o(i,a)}function _E(i){return i[7]||(i[7]=[])}function Of(i){return i.cleanup||(i.cleanup=[])}function wE(i,o){const a=i[9],l=a?a.get(ss,null):null;l&&l.handleError(o)}function A_(i,o,a,l,d){for(let p=0;p<a.length;){const _=a[p++],E=a[p++],I=o[_],T=i.data[_];null!==T.setInput?T.setInput(I,d,l,E):I[E]=d}}function $g(i,o,a){let l=a?i.styles:null,d=a?i.classes:null,p=0;if(null!==o)for(let _=0;_<o.length;_++){const E=o[_];"number"==typeof E?p=E:1==p?d=pe(d,E):2==p&&(l=pe(l,E+": "+o[++_]+";"))}a?i.styles=l:i.stylesWithoutHost=l,a?i.classes=d:i.classesWithoutHost=d}function Hg(i,o,a,l,d=!1){for(;null!==a;){const p=o[a.index];if(null!==p&&l.push(vn(p)),Dr(p))for(let E=10;E<p.length;E++){const I=p[E],T=I[1].firstChild;null!==T&&Hg(I[1],I,T,l)}const _=a.type;if(8&_)Hg(i,o,a.child,l);else if(32&_){const E=b0(a,o);let I;for(;I=E();)l.push(I)}else if(16&_){const E=cc(o,a);if(Array.isArray(E))l.push(...E);else{const I=Tg(o[16]);Hg(I[1],I,E,l,!0)}}a=d?a.projectionNext:a.next}return l}class kf{constructor(o,a){this._lView=o,this._cdRefInjectingView=a,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const o=this._lView,a=o[1];return Hg(a,o,a.firstChild,[])}get context(){return this._lView[8]}set context(o){this._lView[8]=o}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const o=this._lView[3];if(Dr(o)){const a=o[8],l=a?a.indexOf(this):-1;l>-1&&(df(o,l),Po(a,l))}this._attachedToViewContainer=!1}Ky(this._lView[1],this._lView)}onDestroy(o){$d(this._lView[1],this._lView,null,o)}markForCheck(){zd(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){!function mc(i,o,a){const l=o[10];l.begin&&l.begin();try{ja(i,o,i.template,a)}catch(d){throw wE(o,d),d}finally{l.end&&l.end()}}(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new ve(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function S0(i,o){Rd(i,o,o[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(o){if(this._attachedToViewContainer)throw new ve(902,!1);this._appRef=o}}class EE extends kf{constructor(o){super(o),this._view=o}detectChanges(){!function T_(i){!function yE(i){for(let o=0;o<i.components.length;o++){const a=i.components[o],l=af(a);if(null!==l){const d=l[1];wC(d,l,d.template,a)}}}(i[8])}(this._view)}checkNoChanges(){}get context(){return null}}class x_ extends S{constructor(o){super(),this.ngModule=o}resolveComponentFactory(o){const a=Mt(o);return new qd(a,this.ngModule)}}function M_(i){const o=[];for(let a in i)i.hasOwnProperty(a)&&o.push({propName:i[a],templateName:a});return o}class bE{constructor(o,a){this.injector=o,this.parentInjector=a}get(o,a,l){const d=this.injector.get(o,Sd,l);return d!==Sd||a===Sd?d:this.parentInjector.get(o,a,l)}}class qd extends vg{constructor(o,a){super(),this.componentDef=o,this.ngModule=a,this.componentType=o.type,this.selector=function L0(i){return i.map(nC).join(",")}(o.selectors),this.ngContentSelectors=o.ngContentSelectors?o.ngContentSelectors:[],this.isBoundToModule=!!a}get inputs(){return M_(this.componentDef.inputs)}get outputs(){return M_(this.componentDef.outputs)}create(o,a,l,d){let p=(d=d||this.ngModule)instanceof Ln?d:d?.injector;p&&null!==this.componentDef.getStandaloneInjector&&(p=this.componentDef.getStandaloneInjector(p)||p);const _=p?new bE(o,p):o,E=_.get(yt,null);if(null===E)throw new ve(407,!1);const I=_.get(is,null),T=E.createRenderer(null,this.componentDef),R=this.componentDef.selectors[0][0]||"div",O=l?function EC(i,o,a){return i.selectRootElement(o,a===st.ShadowDom)}(T,l,this.componentDef.encapsulation):ac(E.createRenderer(null,this.componentDef),R,function IE(i){const o=i.toLowerCase();return"svg"===o?"svg":"math"===o?"math":null}(R)),z=this.componentDef.onPush?288:272,Y={components:[]},we=zu(0,null,null,1,0,null,null,null,null,null),Ne=jg(null,we,Y,z,null,null,E,T,I,_,null);let $e,et;hu(Ne);try{const _t=function kC(i,o,a,l,d,p){const _=a[1];a[22]=i;const I=Bd(_,22,2,"#host",null),T=I.mergedAttrs=o.hostAttrs;null!==T&&($g(I,T,!0),null!==i&&(Ao(d,i,T),null!==I.classes&&gf(d,i,I.classes),null!==I.styles&&Fa(d,i,I.styles)));const R=l.createRenderer(i,o),O=jg(a,iE(o),null,o.onPush?32:16,a[22],I,l,R,p||null,null,null);return _.firstCreatePass&&(Ts(so(I,a),_,o.type),lE(_,I),cE(I,a.length,1)),gc(a,O),a[22]=O}(O,this.componentDef,Ne,E,T);if(O)if(l)Ao(T,O,["ng-version",wg.full]);else{const{attrs:xe,classes:ht}=function n_(i){const o=[],a=[];let l=1,d=2;for(;l<i.length;){let p=i[l];if("string"==typeof p)2===d?""!==p&&o.push(p,i[++l]):8===d&&a.push(p);else{if(!Fs(d))break;d=p}l++}return{attrs:o,classes:a}}(this.componentDef.selectors[0]);xe&&Ao(T,O,xe),ht&&ht.length>0&&gf(T,O,ht.join(" "))}if(et=Qs(we,22),void 0!==a){const xe=et.projection=[];for(let ht=0;ht<this.ngContentSelectors.length;ht++){const $t=a[ht];xe.push(null!=$t?Array.from($t):null)}}$e=function PC(i,o,a,l,d){const p=a[1],_=function DC(i,o,a){const l=wn();i.firstCreatePass&&(a.providersResolver&&a.providersResolver(a),dE(i,l,o,Qr(i,o,1,null),a),oE(i,l));const d=Yi(o,i,l.directiveStart,l);vr(d,o);const p=Cr(l,o);return p&&vr(p,o),d}(p,a,o);if(l.components.push(_),i[8]=_,null!==d)for(const I of d)I(_,o);if(o.contentQueries){const I=wn();o.contentQueries(1,_,I.directiveStart)}const E=wn();return!p.firstCreatePass||null===o.hostBindings&&null===o.hostAttrs||($r(E.index),Rf(a[1],E,0,E.directiveStart,E.directiveEnd,o),uE(o,_)),_}(_t,this.componentDef,Ne,Y,[CE]),Sf(we,Ne,null)}finally{to()}return new OC(this.componentType,$e,W(et,Ne),Ne,et)}}class OC extends class Oa{}{constructor(o,a,l,d,p){super(),this.location=l,this._rootLView=d,this._tNode=p,this.instance=a,this.hostView=this.changeDetectorRef=new EE(d),this.componentType=o}setInput(o,a){const l=this._tNode.inputs;let d;if(null!==l&&(d=l[o])){const p=this._rootLView;A_(p[1],p,d,o,a),aE(p,this._tNode.index)}}get injector(){return new ao(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(o){this.hostView.onDestroy(o)}}function CE(){const i=wn();Pl(Te()[1],i)}function zg(i){let o=function Gg(i){return Object.getPrototypeOf(i.prototype).constructor}(i.type),a=!0;const l=[i];for(;o;){let d;if(yr(i))d=o.\u0275cmp||o.\u0275dir;else{if(o.\u0275cmp)throw new ve(903,!1);d=o.\u0275dir}if(d){if(a){l.push(d);const _=i;_.inputs=SE(i.inputs),_.declaredInputs=SE(i.declaredInputs),_.outputs=SE(i.outputs);const E=d.hostBindings;E&&UC(i,E);const I=d.viewQuery,T=d.contentQueries;if(I&&LC(i,I),T&&VC(i,T),le(i.inputs,d.inputs),le(i.declaredInputs,d.declaredInputs),le(i.outputs,d.outputs),yr(d)&&d.data.animation){const R=i.data;R.animation=(R.animation||[]).concat(d.data.animation)}}const p=d.features;if(p)for(let _=0;_<p.length;_++){const E=p[_];E&&E.ngInherit&&E(i),E===zg&&(a=!1)}}o=Object.getPrototypeOf(o)}!function TE(i){let o=0,a=null;for(let l=i.length-1;l>=0;l--){const d=i[l];d.hostVars=o+=d.hostVars,d.hostAttrs=da(d.hostAttrs,a=da(a,d.hostAttrs))}}(l)}function SE(i){return i===Ir?{}:i===Dt?[]:i}function LC(i,o){const a=i.viewQuery;i.viewQuery=a?(l,d)=>{o(l,d),a(l,d)}:o}function VC(i,o){const a=i.contentQueries;i.contentQueries=a?(l,d,p)=>{o(l,d,p),a(l,d,p)}:o}function UC(i,o){const a=i.hostBindings;i.hostBindings=a?(l,d)=>{o(l,d),a(l,d)}:o}let Wd=null;function Ha(){if(!Wd){const i=nn.Symbol;if(i&&i.iterator)Wd=i.iterator;else{const o=Object.getOwnPropertyNames(Map.prototype);for(let a=0;a<o.length;++a){const l=o[a];"entries"!==l&&"size"!==l&&Map.prototype[l]===Map.prototype.entries&&(Wd=l)}}}return Wd}function Pf(i){return!!R_(i)&&(Array.isArray(i)||!(i instanceof Map)&&Ha()in i)}function R_(i){return null!==i&&("function"==typeof i||"object"==typeof i)}function Jr(i,o,a){return!Object.is(i[o],a)&&(i[o]=a,!0)}function Lf(i,o,a,l){const d=Te();return Jr(d,eo(),o)&&(Ft(),$o(cn(),d,i,o,a,l)),Lf}function xE(i,o,a,l,d,p,_,E){const I=Te(),T=Ft(),R=i+22,O=T.firstCreatePass?function qC(i,o,a,l,d,p,_,E,I){const T=o.consts,R=Bd(o,i,4,_||null,yi(T,E));Mf(o,a,R,yi(T,I)),Pl(o,R);const O=R.tViews=zu(2,R,l,d,p,o.directiveRegistry,o.pipeRegistry,null,o.schemas,T);return null!==o.queries&&(o.queries.template(o,R),O.queries=o.queries.embeddedTView(R)),R}(R,T,I,o,a,l,d,p,_):T.data[R];si(O,!1);const z=I[11].createComment("");ju(T,I,z,O),vr(z,I),gc(I,I[R]=pE(z,I,z,O)),yl(O)&&jd(T,I,O),null!=_&&b_(I,O,E)}function RE(i){return function Wi(i,o){return i[o]}(function Cl(){return Ct.lFrame.contextLView}(),22+i)}function NE(i,o,a){const l=Te();return Jr(l,eo(),o)&&function as(i,o,a,l,d,p,_,E){const I=Cr(o,a);let R,T=o.inputs;!E&&null!=T&&(R=T[l])?(A_(i,a,R,l,d),ta(o)&&aE(a,o.index)):3&o.type&&(l=function IC(i){return"class"===i?"className":"for"===i?"htmlFor":"formaction"===i?"formAction":"innerHtml"===i?"innerHTML":"readonly"===i?"readOnly":"tabindex"===i?"tabIndex":i}(l),d=null!=_?_(d,o.value||"",l):d,p.setProperty(I,l,d))}(Ft(),cn(),l,i,o,l[11],a,!1),NE}function Qd(i,o,a,l,d){const _=d?"class":"style";A_(i,a,o.inputs[_],_,l)}function jf(i,o,a,l){const d=Te(),p=Ft(),_=22+i,E=d[11],I=d[_]=ac(E,o,function pu(){return Ct.lFrame.currentNamespace}()),T=p.firstCreatePass?function aM(i,o,a,l,d,p,_){const E=o.consts,T=Bd(o,i,2,d,yi(E,p));return Mf(o,a,T,yi(E,_)),null!==T.attrs&&$g(T,T.attrs,!1),null!==T.mergedAttrs&&$g(T,T.mergedAttrs,!0),null!==o.queries&&o.queries.elementStart(o,T),T}(_,p,d,0,o,a,l):p.data[_];si(T,!0);const R=T.mergedAttrs;null!==R&&Ao(E,I,R);const O=T.classes;null!==O&&gf(E,I,O);const z=T.styles;return null!==z&&Fa(E,I,z),64!=(64&T.flags)&&ju(p,d,I,T),0===function su(){return Ct.lFrame.elementDepthCount}()&&vr(I,d),function ou(){Ct.lFrame.elementDepthCount++}(),yl(T)&&(jd(p,d,T),function I_(i,o,a){if(Qa(o)){const d=o.directiveEnd;for(let p=o.directiveStart;p<d;p++){const _=i.data[p];_.contentQueries&&_.contentQueries(1,a[p],p)}}}(p,T,d)),null!==l&&b_(d,T),jf}function Qg(){let i=wn();oa()?function aa(){Ct.lFrame.isParent=!1}():(i=i.parent,si(i,!1));const o=i;!function Il(){Ct.lFrame.elementDepthCount--}();const a=Ft();return a.firstCreatePass&&(Pl(a,i),Qa(i)&&a.queries.elementEnd(i)),null!=o.classesWithoutHost&&function yu(i){return 0!=(16&i.flags)}(o)&&Qd(a,o,Te(),o.classesWithoutHost,!0),null!=o.stylesWithoutHost&&function od(i){return 0!=(32&i.flags)}(o)&&Qd(a,o,Te(),o.stylesWithoutHost,!1),Qg}function P_(i,o,a,l){return jf(i,o,a,l),Qg(),P_}function PE(){return Te()}function V_(i){return!!i&&"function"==typeof i.then}function U_(i){return!!i&&"function"==typeof i.subscribe}const FE=U_;function LE(i,o,a,l){const d=Te(),p=Ft(),_=wn();return function $f(i,o,a,l,d,p,_,E){const I=yl(l),R=i.firstCreatePass&&Of(i),O=o[8],z=_E(o);let Y=!0;if(3&l.type||E){const $e=Cr(l,o),et=E?E($e):$e,_t=z.length,xe=E?$t=>E(vn($t[l.index])):l.index;let ht=null;if(!E&&I&&(ht=function WC(i,o,a,l){const d=i.cleanup;if(null!=d)for(let p=0;p<d.length-1;p+=2){const _=d[p];if(_===a&&d[p+1]===l){const E=o[7],I=d[p+2];return E.length>I?E[I]:null}"string"==typeof _&&(p+=2)}return null}(i,o,d,l.index)),null!==ht)(ht.__ngLastListenerFn__||ht).__ngNextListenerFn__=p,ht.__ngLastListenerFn__=p,Y=!1;else{p=BE(l,o,O,p,!1);const $t=a.listen(et,d,p);z.push(p,$t),R&&R.push(d,xe,_t,_t+1)}}else p=BE(l,o,O,p,!1);const we=l.outputs;let Ne;if(Y&&null!==we&&(Ne=we[d])){const $e=Ne.length;if($e)for(let et=0;et<$e;et+=2){const _n=o[Ne[et]][Ne[et+1]].subscribe(p),Un=z.length;z.push(p,_n),R&&R.push(d,l.index,Un,-(Un+1))}}}(p,d,d[11],_,i,o,0,l),LE}function UE(i,o,a,l){try{return!1!==a(l)}catch(d){return wE(i,d),!1}}function BE(i,o,a,l,d){return function p(_){if(_===Function)return l;zd(2&i.flags?jt(i.index,o):o);let I=UE(o,0,l,_),T=p.__ngNextListenerFn__;for(;T;)I=UE(o,0,T,_)&&I,T=T.__ngNextListenerFn__;return d&&!1===I&&(_.preventDefault(),_.returnValue=!1),I}}function jE(i=1){return function no(i){return(Ct.lFrame.contextLView=function fu(i,o){for(;i>0;)o=o[15],i--;return o}(i,Ct.lFrame.contextLView))[8]}(i)}function JC(i,o,a,l,d){const p=i[a+1],_=null===o;let E=l?Ls(p):La(p),I=!1;for(;0!==E&&(!1===I||_);){const R=i[E+1];cM(i[E],o)&&(I=!0,i[E+1]=l?p_(R):h_(R)),E=l?Ls(R):La(R)}I&&(i[a+1]=l?h_(p):p_(p))}function cM(i,o){return null===i||null==o||(Array.isArray(i)?i[1]:i)===o||!(!Array.isArray(i)||"string"!=typeof o)&&Xi(i,o)>=0}function zf(i,o){return function yo(i,o,a,l){const d=Te(),p=Ft(),_=function Ki(i){const o=Ct.lFrame,a=o.bindingIndex;return o.bindingIndex=o.bindingIndex+i,a}(2);p.firstUpdatePass&&function KE(i,o,a,l){const d=i.data;if(null===d[a+1]){const p=d[zn()],_=function ZE(i,o){return o>=i.expandoStartIndex}(i,a);(function G_(i,o){return 0!=(i.flags&(o?16:32))})(p,l)&&null===o&&!_&&(o=!1),o=function Ei(i,o,a,l){const d=function la(i){const o=Ct.lFrame.currentDirectiveIndex;return-1===o?null:i[o]}(i);let p=l?o.residualClasses:o.residualStyles;if(null===d)0===(l?o.classBindings:o.styleBindings)&&(a=Ec(a=Jd(null,i,o,a,l),o.attrs,l),p=null);else{const _=o.directiveStylingLast;if(-1===_||i[_]!==d)if(a=Jd(d,i,o,a,l),null===p){let I=function Xg(i,o,a){const l=a?o.classBindings:o.styleBindings;if(0!==La(l))return i[Ls(l)]}(i,o,l);void 0!==I&&Array.isArray(I)&&(I=Jd(null,i,o,I[1],l),I=Ec(I,o.attrs,l),function YE(i,o,a,l){i[Ls(a?o.classBindings:o.styleBindings)]=l}(i,o,l,I))}else p=function $_(i,o,a){let l;const d=o.directiveEnd;for(let p=1+o.directiveStylingLast;p<d;p++)l=Ec(l,i[p].hostAttrs,a);return Ec(l,o.attrs,a)}(i,o,l)}return void 0!==p&&(l?o.residualClasses=p:o.residualStyles=p),a}(d,p,o,l),function QC(i,o,a,l,d,p){let _=p?o.classBindings:o.styleBindings,E=Ls(_),I=La(_);i[l]=a;let R,T=!1;if(Array.isArray(a)){const O=a;R=O[1],(null===R||Xi(O,R)>0)&&(T=!0)}else R=a;if(d)if(0!==I){const z=Ls(i[E+1]);i[l+1]=pc(z,E),0!==z&&(i[z+1]=f_(i[z+1],l)),i[E+1]=function fC(i,o){return 131071&i|o<<17}(i[E+1],l)}else i[l+1]=pc(E,0),0!==E&&(i[E+1]=f_(i[E+1],l)),E=l;else i[l+1]=pc(I,0),0===E?E=l:i[I+1]=f_(i[I+1],l),I=l;T&&(i[l+1]=h_(i[l+1])),JC(i,R,l,!0),JC(i,R,l,!1),function lM(i,o,a,l,d){const p=d?i.residualClasses:i.residualStyles;null!=p&&"string"==typeof o&&Xi(p,o)>=0&&(a[l+1]=p_(a[l+1]))}(o,R,i,l,p),_=pc(E,I),p?o.classBindings=_:o.styleBindings=_}(d,p,o,a,_,l)}}(p,i,_,l),o!==Nt&&Jr(d,_,o)&&function JE(i,o,a,l,d,p,_,E){if(!(3&o.type))return;const I=i.data,T=I[E+1];em(function q0(i){return 1==(1&i)}(T)?XE(I,o,a,d,La(T),_):void 0)||(em(p)||function z0(i){return 2==(2&i)}(T)&&(p=XE(I,null,a,d,E,_)),function Yr(i,o,a,l,d){if(o)d?i.addClass(a,l):i.removeClass(a,l);else{let p=-1===l.indexOf("-")?void 0:ks.DashCase;null==d?i.removeStyle(a,l,p):("string"==typeof d&&d.endsWith("!important")&&(d=d.slice(0,-10),p|=ks.Important),i.setStyle(a,l,d,p))}}(l,_,ii(zn(),a),d,p))}(p,p.data[zn()],d,d[11],i,d[_+1]=function qf(i,o){return null==i||("string"==typeof o?i+=o:"object"==typeof i&&(i=he(rs(i)))),i}(o,a),l,_)}(i,o,null,!0),zf}function Jd(i,o,a,l,d){let p=null;const _=a.directiveEnd;let E=a.directiveStylingLast;for(-1===E?E=a.directiveStart:E++;E<_&&(p=o[E],l=Ec(l,p.hostAttrs,d),p!==i);)E++;return null!==i&&(a.directiveStylingLast=E),l}function Ec(i,o,a){const l=a?1:2;let d=-1;if(null!==o)for(let p=0;p<o.length;p++){const _=o[p];"number"==typeof _?d=_:d===l&&(Array.isArray(i)||(i=void 0===i?[]:["",i]),Tr(i,_,!!a||o[++p]))}return void 0===i?null:i}function XE(i,o,a,l,d,p){const _=null===o;let E;for(;d>0;){const I=i[d],T=Array.isArray(I),R=T?I[1]:I,O=null===R;let z=a[d+1];z===Nt&&(z=O?Dt:void 0);let Y=O?Ea(z,l):R===l?z:void 0;if(T&&!em(Y)&&(Y=Ea(I,l)),em(Y)&&(E=Y,_))return E;const we=i[d+1];d=_?Ls(we):La(we)}if(null!==o){let I=p?o.residualClasses:o.residualStyles;null!=I&&(E=Ea(I,l))}return E}function em(i){return void 0!==i}function Wf(i,o=""){const a=Te(),l=Ft(),d=i+22,p=l.firstCreatePass?Bd(l,d,1,o,null):l.data[d],_=a[d]=function Ag(i,o){return i.createText(o)}(a[11],o);ju(l,a,_,p),si(p,!1)}function tm(i,o,a){const l=Te(),d=function Zd(i,o,a,l){return Jr(i,eo(),a)?o+me(a)+l:Nt}(l,i,o,a);return d!==Nt&&function $a(i,o,a){const l=ii(o,i);!function C0(i,o,a){i.setValue(o,a)}(i[11],l,a)}(l,zn(),d),tm}const Ic=void 0;var mI=["en",[["a","p"],["AM","PM"],Ic],[["AM","PM"],Ic,Ic],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Ic,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Ic,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Ic,"{1} 'at' {0}",Ic],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function sm(i){const a=Math.floor(Math.abs(i)),l=i.toString().replace(/^[^.]*\.?/,"").length;return 1===a&&0===l?1:5}];let bc={};function nv(i){const o=function vI(i){return i.toLowerCase().replace(/_/g,"-")}(i);let a=rv(o);if(a)return a;const l=o.split("-")[0];if(a=rv(l),a)return a;if("en"===l)return mI;throw new ve(701,!1)}function _I(i){return nv(i)[It.PluralCase]}function rv(i){return i in bc||(bc[i]=nn.ng&&nn.ng.common&&nn.ng.common.locales&&nn.ng.common.locales[i]),bc[i]}var It=(()=>((It=It||{})[It.LocaleId=0]="LocaleId",It[It.DayPeriodsFormat=1]="DayPeriodsFormat",It[It.DayPeriodsStandalone=2]="DayPeriodsStandalone",It[It.DaysFormat=3]="DaysFormat",It[It.DaysStandalone=4]="DaysStandalone",It[It.MonthsFormat=5]="MonthsFormat",It[It.MonthsStandalone=6]="MonthsStandalone",It[It.Eras=7]="Eras",It[It.FirstDayOfWeek=8]="FirstDayOfWeek",It[It.WeekendRange=9]="WeekendRange",It[It.DateFormat=10]="DateFormat",It[It.TimeFormat=11]="TimeFormat",It[It.DateTimeFormat=12]="DateTimeFormat",It[It.NumberSymbols=13]="NumberSymbols",It[It.NumberFormats=14]="NumberFormats",It[It.CurrencyCode=15]="CurrencyCode",It[It.CurrencySymbol=16]="CurrencySymbol",It[It.CurrencyName=17]="CurrencyName",It[It.Currencies=18]="Currencies",It[It.Directionality=19]="Directionality",It[It.PluralCase=20]="PluralCase",It[It.ExtraData=21]="ExtraData",It))();const Xd="en-US";let sv=Xd;function Xf(i,o,a,l,d){if(i=Q(i),Array.isArray(i))for(let p=0;p<i.length;p++)Xf(i[p],o,a,l,d);else{const p=Ft(),_=Te();let E=po(i)?i:Q(i.provide),I=Ra(i);const T=wn(),R=1048575&T.providerIndexes,O=T.directiveStart,z=T.providerIndexes>>20;if(po(i)||!i.multi){const Y=new Cs(I,d,Pi),we=Ev(E,o,d?R:R+z,O);-1===we?(Ts(so(T,_),p,E),ep(p,i,o.length),o.push(E),T.directiveStart++,T.directiveEnd++,d&&(T.providerIndexes+=1048576),a.push(Y),_.push(Y)):(a[we]=Y,_[we]=Y)}else{const Y=Ev(E,o,R+z,O),we=Ev(E,o,R,R+z),Ne=Y>=0&&a[Y],$e=we>=0&&a[we];if(d&&!$e||!d&&!Ne){Ts(so(T,_),p,E);const et=function AT(i,o,a,l,d){const p=new Cs(i,a,Pi);return p.multi=[],p.index=o,p.componentProviders=0,mm(p,d,l&&!a),p}(d?Iv:ST,a.length,d,l,I);!d&&$e&&(a[we].providerFactory=et),ep(p,i,o.length,0),o.push(E),T.directiveStart++,T.directiveEnd++,d&&(T.providerIndexes+=1048576),a.push(et),_.push(et)}else ep(p,i,Y>-1?Y:we,mm(a[d?we:Y],I,!d&&l));!d&&l&&$e&&a[we].componentProviders++}}}function ep(i,o,a,l){const d=po(o),p=function Uo(i){return!!i.useClass}(o);if(d||p){const I=(p?Q(o.useClass):o).prototype.ngOnDestroy;if(I){const T=i.destroyHooks||(i.destroyHooks=[]);if(!d&&o.multi){const R=T.indexOf(a);-1===R?T.push(a,[l,I]):T[R+1].push(l,I)}else T.push(a,I)}}}function mm(i,o,a){return a&&i.componentProviders++,i.multi.push(o)-1}function Ev(i,o,a,l){for(let d=a;d<l;d++)if(o[d]===i)return d;return-1}function ST(i,o,a,l){return ym(this.multi,[])}function Iv(i,o,a,l){const d=this.multi;let p;if(this.providerFactory){const _=this.providerFactory.componentProviders,E=Yi(a,a[1],this.providerFactory.index,l);p=E.slice(0,_),ym(d,p);for(let I=_;I<E.length;I++)p.push(E[I])}else p=[],ym(d,p);return p}function ym(i,o){for(let a=0;a<i.length;a++)o.push((0,i[a])());return o}function HI(i,o=[]){return a=>{a.providersResolver=(l,d)=>function gm(i,o,a){const l=Ft();if(l.firstCreatePass){const d=yr(i);Xf(a,l.data,l.blueprint,d,!0),Xf(o,l.data,l.blueprint,d,!1)}}(l,d?d(i):i,o)}}class ar{}class nh{}function xT(i,o){return new GI(i,o??null)}class GI extends ar{constructor(o,a){super(),this._parent=a,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new x_(this);const l=br(o);this._bootstrapComponents=Pa(l.bootstrap),this._r3Injector=vf(o,a,[{provide:ar,useValue:this},{provide:S,useValue:this.componentFactoryResolver}],he(o),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(o)}get injector(){return this._r3Injector}destroy(){const o=this._r3Injector;!o.destroyed&&o.destroy(),this.destroyCbs.forEach(a=>a()),this.destroyCbs=null}onDestroy(o){this.destroyCbs.push(o)}}class bv extends nh{constructor(o){super(),this.moduleType=o}create(o){return new GI(this.moduleType,o)}}class vm extends ar{constructor(o,a,l){super(),this.componentFactoryResolver=new x_(this),this.instance=null;const d=new Cd([...o,{provide:ar,useValue:this},{provide:S,useValue:this.componentFactoryResolver}],a||sc(),l,new Set(["environment"]));this.injector=d,d.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(o){this.injector.onDestroy(o)}}function rh(i,o,a=null){return new vm(i,o,a).injector}let Dv=(()=>{class i{constructor(a){this._injector=a,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(a){if(!a.standalone)return null;if(!this.cachedInjectors.has(a.id)){const l=oi(0,a.type),d=l.length>0?rh([l],this._injector,`Standalone[${a.type.name}]`):null;this.cachedInjectors.set(a.id,d)}return this.cachedInjectors.get(a.id)}ngOnDestroy(){try{for(const a of this.cachedInjectors.values())null!==a&&a.destroy()}finally{this.cachedInjectors.clear()}}}return i.\u0275prov=Zt({token:i,providedIn:"environment",factory:()=>new i(bn(Ln))}),i})();function wm(i){i.getStandaloneInjector=o=>o.get(Dv).getOrCreateStandaloneInjector(i)}function Tm(i){return o=>{setTimeout(i,void 0,o)}}const ls=class Tc extends f.x{constructor(o=!1){super(),this.__isAsync=o}emit(o){super.next(o)}subscribe(o,a,l){let d=o,p=a||(()=>null),_=l;if(o&&"object"==typeof o){const I=o;d=I.next?.bind(I),p=I.error?.bind(I),_=I.complete?.bind(I)}this.__isAsync&&(p=Tm(p),d&&(d=Tm(d)),_&&(_=Tm(_)));const E=super.subscribe({next:d,error:p,complete:_});return o instanceof te.w0&&o.add(E),E}};function nb(){return this._results[Ha()]()}class Sc{constructor(o=!1){this._emitDistinctChangesOnly=o,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const a=Ha(),l=Sc.prototype;l[a]||(l[a]=nb)}get changes(){return this._changes||(this._changes=new ls)}get(o){return this._results[o]}map(o){return this._results.map(o)}filter(o){return this._results.filter(o)}find(o){return this._results.find(o)}reduce(o,a){return this._results.reduce(o,a)}forEach(o){this._results.forEach(o)}some(o){return this._results.some(o)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(o,a){const l=this;l.dirty=!1;const d=Gr(o);(this._changesDetected=!function Tu(i,o,a){if(i.length!==o.length)return!1;for(let l=0;l<i.length;l++){let d=i[l],p=o[l];if(a&&(d=a(d),p=a(p)),p!==d)return!1}return!0}(l._results,d,a))&&(l._results=d,l.length=d.length,l.last=d[this.length-1],l.first=d[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let oh=(()=>{class i{}return i.__NG_ELEMENT_ID__=rp,i})();const Ii=oh,rb=class extends Ii{constructor(o,a,l){super(),this._declarationLView=o,this._declarationTContainer=a,this.elementRef=l}createEmbeddedView(o,a){const l=this._declarationTContainer.tViews,d=jg(this._declarationLView,l,o,16,null,l.declTNode,null,null,null,null,a||null);d[17]=this._declarationLView[this._declarationTContainer.index];const _=this._declarationLView[19];return null!==_&&(d[19]=_.createEmbeddedView(l)),Sf(l,d,o),new kf(d)}};function rp(){return Ac(wn(),Te())}function Ac(i,o){return 4&i.type?new rb(o,i,W(i,o)):null}let ip=(()=>{class i{}return i.__NG_ELEMENT_ID__=Pv,i})();function Pv(){return Sm(wn(),Te())}const ib=ip,Fv=class extends ib{constructor(o,a,l){super(),this._lContainer=o,this._hostTNode=a,this._hostLView=l}get element(){return W(this._hostTNode,this._hostLView)}get injector(){return new ao(this._hostTNode,this._hostLView)}get parentInjector(){const o=Eu(this._hostTNode,this._hostLView);if(ud(o)){const a=fa(o,this._hostLView),l=rr(o);return new ao(a[1].data[l+8],a)}return new ao(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(o){const a=ah(this._lContainer);return null!==a&&a[o]||null}get length(){return this._lContainer.length-10}createEmbeddedView(o,a,l){let d,p;"number"==typeof l?d=l:null!=l&&(d=l.index,p=l.injector);const _=o.createEmbeddedView(a||{},p);return this.insert(_,d),_}createComponent(o,a,l,d,p){const _=o&&!function fr(i){return"function"==typeof i}(o);let E;if(_)E=a;else{const O=a||{};E=O.index,l=O.injector,d=O.projectableNodes,p=O.environmentInjector||O.ngModuleRef}const I=_?o:new qd(Mt(o)),T=l||this.parentInjector;if(!p&&null==I.ngModule){const z=(_?T:this.parentInjector).get(Ln,null);z&&(p=z)}const R=I.create(T,d,void 0,p);return this.insert(R.hostView,E),R}insert(o,a){const l=o._lView,d=l[1];if(function nu(i){return Dr(i[3])}(l)){const R=this.indexOf(o);if(-1!==R)this.detach(R);else{const O=l[3],z=new Fv(O,O[6],O[3]);z.detach(z.indexOf(o))}}const p=this._adjustIndex(a),_=this._lContainer;!function cf(i,o,a,l){const d=10+l,p=a.length;l>0&&(a[d-1][4]=o),l<p-10?(o[4]=a[d],jl(a,10+l,o)):(a.push(o),o[4]=null),o[3]=a;const _=o[17];null!==_&&a!==_&&function uc(i,o){const a=i[9];o[16]!==o[3][3][16]&&(i[2]=!0),null===a?i[9]=[o]:a.push(o)}(_,o);const E=o[19];null!==E&&E.insertView(i),o[2]|=64}(d,l,_,p);const E=Xy(p,_),I=l[11],T=Bu(I,_[7]);return null!==T&&function Wy(i,o,a,l,d,p){l[0]=d,l[6]=o,Rd(i,l,a,1,d,p)}(d,_[6],I,l,T,E),o.attachToViewContainerRef(),jl(sp(_),p,o),o}move(o,a){return this.insert(o,a)}indexOf(o){const a=ah(this._lContainer);return null!==a?a.indexOf(o):-1}remove(o){const a=this._adjustIndex(o,-1),l=df(this._lContainer,a);l&&(Po(sp(this._lContainer),a),Ky(l[1],l))}detach(o){const a=this._adjustIndex(o,-1),l=df(this._lContainer,a);return l&&null!=Po(sp(this._lContainer),a)?new kf(l):null}_adjustIndex(o,a=0){return o??this.length+a}};function ah(i){return i[8]}function sp(i){return i[8]||(i[8]=[])}function Sm(i,o){let a;const l=o[i.index];if(Dr(l))a=l;else{let d;if(8&i.type)d=vn(l);else{const p=o[11];d=p.createComment("");const _=Cr(i,o);lc(p,Bu(p,_),d,function Qy(i,o){return i.nextSibling(o)}(p,_),!1)}o[i.index]=a=pE(l,o,d,i),gc(o,a)}return new Fv(a,i,o)}class Mm{constructor(o){this.queryList=o,this.matches=null}clone(){return new Mm(this.queryList)}setDirty(){this.queryList.setDirty()}}class Vv{constructor(o=[]){this.queries=o}createEmbeddedView(o){const a=o.queries;if(null!==a){const l=null!==o.contentQueries?o.contentQueries[0]:a.length,d=[];for(let p=0;p<l;p++){const _=a.getByIndex(p);d.push(this.queries[_.indexInDeclarationView].clone())}return new Vv(d)}return null}insertView(o){this.dirtyQueriesWithMatches(o)}detachView(o){this.dirtyQueriesWithMatches(o)}dirtyQueriesWithMatches(o){for(let a=0;a<this.queries.length;a++)null!==Qu(o,a).matches&&this.queries[a].setDirty()}}class Rm{constructor(o,a,l=null){this.predicate=o,this.flags=a,this.read=l}}class uh{constructor(o=[]){this.queries=o}elementStart(o,a){for(let l=0;l<this.queries.length;l++)this.queries[l].elementStart(o,a)}elementEnd(o){for(let a=0;a<this.queries.length;a++)this.queries[a].elementEnd(o)}embeddedTView(o){let a=null;for(let l=0;l<this.length;l++){const d=null!==a?a.length:0,p=this.getByIndex(l).embeddedTView(o,d);p&&(p.indexInDeclarationView=l,null!==a?a.push(p):a=[p])}return null!==a?new uh(a):null}template(o,a){for(let l=0;l<this.queries.length;l++)this.queries[l].template(o,a)}getByIndex(o){return this.queries[o]}get length(){return this.queries.length}track(o){this.queries.push(o)}}class op{constructor(o,a=-1){this.metadata=o,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=a}elementStart(o,a){this.isApplyingToNode(a)&&this.matchTNode(o,a)}elementEnd(o){this._declarationNodeIndex===o.index&&(this._appliesToNextNode=!1)}template(o,a){this.elementStart(o,a)}embeddedTView(o,a){return this.isApplyingToNode(o)?(this.crossesNgTemplate=!0,this.addMatch(-o.index,a),new op(this.metadata)):null}isApplyingToNode(o){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const a=this._declarationNodeIndex;let l=o.parent;for(;null!==l&&8&l.type&&l.index!==a;)l=l.parent;return a===(null!==l?l.index:-1)}return this._appliesToNextNode}matchTNode(o,a){const l=this.metadata.predicate;if(Array.isArray(l))for(let d=0;d<l.length;d++){const p=l[d];this.matchTNodeWithReadOption(o,a,sb(a,p)),this.matchTNodeWithReadOption(o,a,xo(a,o,p,!1,!1))}else l===oh?4&a.type&&this.matchTNodeWithReadOption(o,a,-1):this.matchTNodeWithReadOption(o,a,xo(a,o,l,!1,!1))}matchTNodeWithReadOption(o,a,l){if(null!==l){const d=this.metadata.read;if(null!==d)if(d===ue||d===ip||d===oh&&4&a.type)this.addMatch(a.index,-2);else{const p=xo(a,o,d,!1,!1);null!==p&&this.addMatch(a.index,p)}else this.addMatch(a.index,l)}}addMatch(o,a){null===this.matches?this.matches=[o,a]:this.matches.push(o,a)}}function sb(i,o){const a=i.localNames;if(null!==a)for(let l=0;l<a.length;l+=2)if(a[l]===o)return a[l+1];return null}function ab(i,o,a,l){return-1===a?function ob(i,o){return 11&i.type?W(i,o):4&i.type?Ac(i,o):null}(o,i):-2===a?function BT(i,o,a){return a===ue?W(o,i):a===oh?Ac(o,i):a===ip?Sm(o,i):void 0}(i,o,l):Yi(i,i[1],a,o)}function lh(i,o,a,l){const d=o[19].queries[l];if(null===d.matches){const p=i.data,_=a.matches,E=[];for(let I=0;I<_.length;I+=2){const T=_[I];E.push(T<0?null:ab(o,p[T],_[I+1],a.metadata.read))}d.matches=E}return d.matches}function Nm(i,o,a,l){const d=i.queries.getByIndex(a),p=d.matches;if(null!==p){const _=lh(i,o,d,a);for(let E=0;E<p.length;E+=2){const I=p[E];if(I>0)l.push(_[E/2]);else{const T=p[E+1],R=o[-I];for(let O=10;O<R.length;O++){const z=R[O];z[17]===z[3]&&Nm(z[1],z,T,l)}if(null!==R[9]){const O=R[9];for(let z=0;z<O.length;z++){const Y=O[z];Nm(Y[1],Y,T,l)}}}}}return l}function ap(i){const o=Te(),a=Ft(),l=Al();ca(l+1);const d=Qu(a,l);if(i.dirty&&ia(o)===(2==(2&d.metadata.flags))){if(null===d.matches)i.reset([]);else{const p=d.crossesNgTemplate?Nm(a,o,l,[]):lh(a,o,d,l);i.reset(p,Fe),i.notifyOnChanges()}return!0}return!1}function Yu(i,o,a,l){const d=Ft();if(d.firstCreatePass){const p=wn();(function xc(i,o,a){null===i.queries&&(i.queries=new uh),i.queries.track(new op(o,a))})(d,new Rm(o,a,l),p.index),function Uv(i,o){const a=i.contentQueries||(i.contentQueries=[]);o!==(a.length?a[a.length-1]:-1)&&a.push(i.queries.length-1,o)}(d,i),2==(2&a)&&(d.staticContentQueries=!0)}!function km(i,o,a){const l=new Sc(4==(4&a));$d(i,o,l,l.destroy),null===o[19]&&(o[19]=new Vv),o[19].queries.push(new Mm(l))}(d,Te(),a)}function Om(){return function jT(i,o){return i[19].queries[o].queryList}(Te(),Al())}function Qu(i,o){return i.queries.getByIndex(o)}function Bv(i,o){return Ac(i,o)}function Um(...i){}const ph=new on("Application Initializer");let hp=(()=>{class i{constructor(a){this.appInits=a,this.resolve=Um,this.reject=Um,this.initialized=!1,this.done=!1,this.donePromise=new Promise((l,d)=>{this.resolve=l,this.reject=d})}runInitializers(){if(this.initialized)return;const a=[],l=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let d=0;d<this.appInits.length;d++){const p=this.appInits[d]();if(V_(p))a.push(p);else if(FE(p)){const _=new Promise((E,I)=>{p.subscribe({complete:E,error:I})});a.push(_)}}Promise.all(a).then(()=>{l()}).catch(d=>{this.reject(d)}),0===a.length&&l(),this.initialized=!0}}return i.\u0275fac=function(a){return new(a||i)(bn(ph,8))},i.\u0275prov=Zt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const Bm=new on("AppId",{providedIn:"root",factory:function fp(){return`${pp()}${pp()}${pp()}`}});function pp(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const gp=new on("Platform Initializer"),nS=new on("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),Qv=new on("appBootstrapListener");let bb=(()=>{class i{log(a){console.log(a)}warn(a){console.warn(a)}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Zt({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();const gh=new on("LocaleId",{providedIn:"root",factory:()=>D(gh,We.Optional|We.SkipSelf)||function Jv(){return typeof $localize<"u"&&$localize.locale||Xd}()}),Db=new on("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class Rc{constructor(o,a){this.ngModuleFactory=o,this.componentFactories=a}}let Cb=(()=>{class i{compileModuleSync(a){return new bv(a)}compileModuleAsync(a){return Promise.resolve(this.compileModuleSync(a))}compileModuleAndAllComponentsSync(a){const l=this.compileModuleSync(a),p=Pa(br(a).declarations).reduce((_,E)=>{const I=Mt(E);return I&&_.push(new qd(I)),_},[]);return new Rc(l,p)}compileModuleAndAllComponentsAsync(a){return Promise.resolve(this.compileModuleAndAllComponentsSync(a))}clearCache(){}clearCacheFor(a){}getModuleId(a){}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Zt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const mh=(()=>Promise.resolve(0))();function ew(i){typeof Zone>"u"?mh.then(()=>{i&&i.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",i)}class Li{constructor({enableLongStackTrace:o=!1,shouldCoalesceEventChangeDetection:a=!1,shouldCoalesceRunChangeDetection:l=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new ls(!1),this.onMicrotaskEmpty=new ls(!1),this.onStable=new ls(!1),this.onError=new ls(!1),typeof Zone>"u")throw new ve(908,!1);Zone.assertZonePatched();const d=this;if(d._nesting=0,d._outer=d._inner=Zone.current,Zone.AsyncStackTaggingZoneSpec){const p=Zone.AsyncStackTaggingZoneSpec;d._inner=d._inner.fork(new p("Angular"))}Zone.TaskTrackingZoneSpec&&(d._inner=d._inner.fork(new Zone.TaskTrackingZoneSpec)),o&&Zone.longStackTraceZoneSpec&&(d._inner=d._inner.fork(Zone.longStackTraceZoneSpec)),d.shouldCoalesceEventChangeDetection=!l&&a,d.shouldCoalesceRunChangeDetection=l,d.lastRequestAnimationFrameId=-1,d.nativeRequestAnimationFrame=function uS(){let i=nn.requestAnimationFrame,o=nn.cancelAnimationFrame;if(typeof Zone<"u"&&i&&o){const a=i[Zone.__symbol__("OriginalDelegate")];a&&(i=a);const l=o[Zone.__symbol__("OriginalDelegate")];l&&(o=l)}return{nativeRequestAnimationFrame:i,nativeCancelAnimationFrame:o}}().nativeRequestAnimationFrame,function cS(i){const o=()=>{!function Ab(i){i.isCheckStableRunning||-1!==i.lastRequestAnimationFrameId||(i.lastRequestAnimationFrameId=i.nativeRequestAnimationFrame.call(nn,()=>{i.fakeTopEventTask||(i.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{i.lastRequestAnimationFrameId=-1,yh(i),i.isCheckStableRunning=!0,tw(i),i.isCheckStableRunning=!1},void 0,()=>{},()=>{})),i.fakeTopEventTask.invoke()}),yh(i))}(i)};i._inner=i._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(a,l,d,p,_,E)=>{try{return xb(i),a.invokeTask(d,p,_,E)}finally{(i.shouldCoalesceEventChangeDetection&&"eventTask"===p.type||i.shouldCoalesceRunChangeDetection)&&o(),nw(i)}},onInvoke:(a,l,d,p,_,E,I)=>{try{return xb(i),a.invoke(d,p,_,E,I)}finally{i.shouldCoalesceRunChangeDetection&&o(),nw(i)}},onHasTask:(a,l,d,p)=>{a.hasTask(d,p),l===d&&("microTask"==p.change?(i._hasPendingMicrotasks=p.microTask,yh(i),tw(i)):"macroTask"==p.change&&(i.hasPendingMacrotasks=p.macroTask))},onHandleError:(a,l,d,p)=>(a.handleError(d,p),i.runOutsideAngular(()=>i.onError.emit(p)),!1)})}(d)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Li.isInAngularZone())throw new ve(909,!1)}static assertNotInAngularZone(){if(Li.isInAngularZone())throw new ve(909,!1)}run(o,a,l){return this._inner.run(o,a,l)}runTask(o,a,l,d){const p=this._inner,_=p.scheduleEventTask("NgZoneEvent: "+d,o,lS,Um,Um);try{return p.runTask(_,a,l)}finally{p.cancelTask(_)}}runGuarded(o,a,l){return this._inner.runGuarded(o,a,l)}runOutsideAngular(o){return this._outer.run(o)}}const lS={};function tw(i){if(0==i._nesting&&!i.hasPendingMicrotasks&&!i.isStable)try{i._nesting++,i.onMicrotaskEmpty.emit(null)}finally{if(i._nesting--,!i.hasPendingMicrotasks)try{i.runOutsideAngular(()=>i.onStable.emit(null))}finally{i.isStable=!0}}}function yh(i){i.hasPendingMicrotasks=!!(i._hasPendingMicrotasks||(i.shouldCoalesceEventChangeDetection||i.shouldCoalesceRunChangeDetection)&&-1!==i.lastRequestAnimationFrameId)}function xb(i){i._nesting++,i.isStable&&(i.isStable=!1,i.onUnstable.emit(null))}function nw(i){i._nesting--,tw(i)}class Nr{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new ls,this.onMicrotaskEmpty=new ls,this.onStable=new ls,this.onError=new ls}run(o,a,l){return o.apply(a,l)}runGuarded(o,a,l){return o.apply(a,l)}runOutsideAngular(o){return o()}runTask(o,a,l,d){return o.apply(a,l)}}const Nc=new on(""),qa=new on("");let Vn,rw=(()=>{class i{constructor(a,l,d){this._ngZone=a,this.registry=l,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,Vn||(function ke(i){Vn=i}(d),d.addToWindow(l)),this._watchAngularEvents(),a.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Li.assertNotInAngularZone(),ew(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())ew(()=>{for(;0!==this._callbacks.length;){let a=this._callbacks.pop();clearTimeout(a.timeoutId),a.doneCb(this._didWork)}this._didWork=!1});else{let a=this.getPendingTasks();this._callbacks=this._callbacks.filter(l=>!l.updateCb||!l.updateCb(a)||(clearTimeout(l.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(a=>({source:a.source,creationLocation:a.creationLocation,data:a.data})):[]}addCallback(a,l,d){let p=-1;l&&l>0&&(p=setTimeout(()=>{this._callbacks=this._callbacks.filter(_=>_.timeoutId!==p),a(this._didWork,this.getPendingTasks())},l)),this._callbacks.push({doneCb:a,timeoutId:p,updateCb:d})}whenStable(a,l,d){if(d&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(a,l,d),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(a){this.registry.registerApplication(a,this)}unregisterApplication(a){this.registry.unregisterApplication(a)}findProviders(a,l,d){return[]}}return i.\u0275fac=function(a){return new(a||i)(bn(Li),bn(Mb),bn(qa))},i.\u0275prov=Zt({token:i,factory:i.\u0275fac}),i})(),Mb=(()=>{class i{constructor(){this._applications=new Map}registerApplication(a,l){this._applications.set(a,l)}unregisterApplication(a){this._applications.delete(a)}unregisterAllApplications(){this._applications.clear()}getTestability(a){return this._applications.get(a)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(a,l=!0){return Vn?.findTestabilityInTree(this,a,l)??null}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Zt({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})(),Vi=null;const $m=new on("AllowMultipleToken"),Xe=new on("PlatformDestroyListeners");class Re{constructor(o,a){this.name=o,this.token=a}}function Ob(i,o,a=[]){const l=`Platform: ${o}`,d=new on(l);return(p=[])=>{let _=iw();if(!_||_.injector.get($m,!1)){const E=[...a,...p,{provide:d,useValue:!0}];i?i(E):function Or(i){if(Vi&&!Vi.get($m,!1))throw new ve(400,!1);Vi=i;const o=i.get(pS);(function Nb(i){const o=i.get(gp,null);o&&o.forEach(a=>a())})(i)}(function kb(i=[],o){return hc.create({name:o,providers:[{provide:Fu,useValue:"platform"},{provide:Xe,useValue:new Set([()=>Vi=null])},...i]})}(E,l))}return function hS(i){const o=iw();if(!o)throw new ve(401,!1);return o}()}}function iw(){return Vi?.get(pS)??null}let pS=(()=>{class i{constructor(a){this._injector=a,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(a,l){const d=function sw(i,o){let a;return a="noop"===i?new Nr:("zone.js"===i?void 0:i)||new Li(o),a}(l?.ngZone,function Pb(i){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!i||!i.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!i||!i.ngZoneRunCoalescing)||!1}}(l)),p=[{provide:Li,useValue:d}];return d.run(()=>{const _=hc.create({providers:p,parent:this.injector,name:a.moduleType.name}),E=a.create(_),I=E.injector.get(ss,null);if(!I)throw new ve(402,!1);return d.runOutsideAngular(()=>{const T=d.onError.subscribe({next:R=>{I.handleError(R)}});E.onDestroy(()=>{gn(this._modules,E),T.unsubscribe()})}),function At(i,o,a){try{const l=a();return V_(l)?l.catch(d=>{throw o.runOutsideAngular(()=>i.handleError(d)),d}):l}catch(l){throw o.runOutsideAngular(()=>i.handleError(l)),l}}(I,d,()=>{const T=E.injector.get(hp);return T.runInitializers(),T.donePromise.then(()=>(function EI(i){Ut(i,"Expected localeId to be defined"),"string"==typeof i&&(sv=i.toLowerCase().replace(/_/g,"-"))}(E.injector.get(gh,Xd)||Xd),this._moduleDoBootstrap(E),E))})})}bootstrapModule(a,l=[]){const d=Oc({},l);return function dS(i,o,a){const l=new bv(a);return Promise.resolve(l)}(0,0,a).then(p=>this.bootstrapModuleFactory(p,d))}_moduleDoBootstrap(a){const l=a.injector.get(yp);if(a._bootstrapComponents.length>0)a._bootstrapComponents.forEach(d=>l.bootstrap(d));else{if(!a.instance.ngDoBootstrap)throw new ve(403,!1);a.instance.ngDoBootstrap(l)}this._modules.push(a)}onDestroy(a){this._destroyListeners.push(a)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new ve(404,!1);this._modules.slice().forEach(l=>l.destroy()),this._destroyListeners.forEach(l=>l());const a=this._injector.get(Xe,null);a&&(a.forEach(l=>l()),a.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return i.\u0275fac=function(a){return new(a||i)(bn(hc))},i.\u0275prov=Zt({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();function Oc(i,o){return Array.isArray(o)?o.reduce(Oc,i):{...i,...o}}let yp=(()=>{class i{constructor(a,l,d){this._zone=a,this._injector=l,this._exceptionHandler=d,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const p=new k.y(E=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{E.next(this._stable),E.complete()})}),_=new k.y(E=>{let I;this._zone.runOutsideAngular(()=>{I=this._zone.onStable.subscribe(()=>{Li.assertNotInAngularZone(),ew(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,E.next(!0))})})});const T=this._zone.onUnstable.subscribe(()=>{Li.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{E.next(!1)}))});return()=>{I.unsubscribe(),T.unsubscribe()}});this.isStable=(0,oe.T)(p,_.pipe((0,re.B)()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(a,l){const d=a instanceof vg;if(!this._injector.get(hp).done)throw!d&&Ci(a),new ve(405,false);let _;_=d?a:this._injector.get(S).resolveComponentFactory(a),this.componentTypes.push(_.componentType);const E=function ce(i){return i.isBoundToModule}(_)?void 0:this._injector.get(ar),T=_.create(hc.NULL,[],l||_.selector,E),R=T.location.nativeElement,O=T.injector.get(Nc,null);return O?.registerApplication(R),T.onDestroy(()=>{this.detachView(T.hostView),gn(this.components,T),O?.unregisterApplication(R)}),this._loadComponent(T),T}tick(){if(this._runningTick)throw new ve(101,!1);try{this._runningTick=!0;for(let a of this._views)a.detectChanges()}catch(a){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(a))}finally{this._runningTick=!1}}attachView(a){const l=a;this._views.push(l),l.attachToAppRef(this)}detachView(a){const l=a;gn(this._views,l),l.detachFromAppRef()}_loadComponent(a){this.attachView(a.hostView),this.tick(),this.components.push(a),this._injector.get(Qv,[]).concat(this._bootstrapListeners).forEach(d=>d(a))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(a=>a()),this._views.slice().forEach(a=>a.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(a){return this._destroyListeners.push(a),()=>gn(this._destroyListeners,a)}destroy(){if(this._destroyed)throw new ve(406,!1);const a=this._injector;a.destroy&&!a.destroyed&&a.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return i.\u0275fac=function(a){return new(a||i)(bn(Li),bn(Ln),bn(ss))},i.\u0275prov=Zt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function gn(i,o){const a=i.indexOf(o);a>-1&&i.splice(a,1)}let qt=!0,Fb=!1;function Kn(){return Fb=!0,qt}function Ge(){if(Fb)throw new Error("Cannot enable prod mode after platform setup.");qt=!1}let gS=(()=>{class i{}return i.__NG_ELEMENT_ID__=Hm,i})();function Hm(i){return function mS(i,o,a){if(ta(i)&&!a){const l=jt(i.index,o);return new kf(l,l)}return 47&i.type?new kf(o[16],o):null}(wn(),Te(),16==(16&i))}class cw{constructor(){}supports(o){return Pf(o)}create(o){return new jb(o)}}const Pc=(i,o)=>o;class jb{constructor(o){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=o||Pc}forEachItem(o){let a;for(a=this._itHead;null!==a;a=a._next)o(a)}forEachOperation(o){let a=this._itHead,l=this._removalsHead,d=0,p=null;for(;a||l;){const _=!l||a&&a.currentIndex<un(l,d,p)?a:l,E=un(_,d,p),I=_.currentIndex;if(_===l)d--,l=l._nextRemoved;else if(a=a._next,null==_.previousIndex)d++;else{p||(p=[]);const T=E-d,R=I-d;if(T!=R){for(let z=0;z<T;z++){const Y=z<p.length?p[z]:p[z]=0,we=Y+z;R<=we&&we<T&&(p[z]=Y+1)}p[_.previousIndex]=R-T}}E!==I&&o(_,E,I)}}forEachPreviousItem(o){let a;for(a=this._previousItHead;null!==a;a=a._nextPrevious)o(a)}forEachAddedItem(o){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)o(a)}forEachMovedItem(o){let a;for(a=this._movesHead;null!==a;a=a._nextMoved)o(a)}forEachRemovedItem(o){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)o(a)}forEachIdentityChange(o){let a;for(a=this._identityChangesHead;null!==a;a=a._nextIdentityChange)o(a)}diff(o){if(null==o&&(o=[]),!Pf(o))throw new ve(900,!1);return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let d,p,_,a=this._itHead,l=!1;if(Array.isArray(o)){this.length=o.length;for(let E=0;E<this.length;E++)p=o[E],_=this._trackByFn(E,p),null!==a&&Object.is(a.trackById,_)?(l&&(a=this._verifyReinsertion(a,p,_,E)),Object.is(a.item,p)||this._addIdentityChange(a,p)):(a=this._mismatch(a,p,_,E),l=!0),a=a._next}else d=0,function jC(i,o){if(Array.isArray(i))for(let a=0;a<i.length;a++)o(i[a]);else{const a=i[Ha()]();let l;for(;!(l=a.next()).done;)o(l.value)}}(o,E=>{_=this._trackByFn(d,E),null!==a&&Object.is(a.trackById,_)?(l&&(a=this._verifyReinsertion(a,E,_,d)),Object.is(a.item,E)||this._addIdentityChange(a,E)):(a=this._mismatch(a,E,_,d),l=!0),a=a._next,d++}),this.length=d;return this._truncate(a),this.collection=o,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let o;for(o=this._previousItHead=this._itHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._additionsHead;null!==o;o=o._nextAdded)o.previousIndex=o.currentIndex;for(this._additionsHead=this._additionsTail=null,o=this._movesHead;null!==o;o=o._nextMoved)o.previousIndex=o.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(o,a,l,d){let p;return null===o?p=this._itTail:(p=o._prev,this._remove(o)),null!==(o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null))?(Object.is(o.item,a)||this._addIdentityChange(o,a),this._reinsertAfter(o,p,d)):null!==(o=null===this._linkedRecords?null:this._linkedRecords.get(l,d))?(Object.is(o.item,a)||this._addIdentityChange(o,a),this._moveAfter(o,p,d)):o=this._addAfter(new Yn(a,l),p,d),o}_verifyReinsertion(o,a,l,d){let p=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null);return null!==p?o=this._reinsertAfter(p,o._prev,d):o.currentIndex!=d&&(o.currentIndex=d,this._addToMoves(o,d)),o}_truncate(o){for(;null!==o;){const a=o._next;this._addToRemovals(this._unlink(o)),o=a}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(o,a,l){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(o);const d=o._prevRemoved,p=o._nextRemoved;return null===d?this._removalsHead=p:d._nextRemoved=p,null===p?this._removalsTail=d:p._prevRemoved=d,this._insertAfter(o,a,l),this._addToMoves(o,l),o}_moveAfter(o,a,l){return this._unlink(o),this._insertAfter(o,a,l),this._addToMoves(o,l),o}_addAfter(o,a,l){return this._insertAfter(o,a,l),this._additionsTail=null===this._additionsTail?this._additionsHead=o:this._additionsTail._nextAdded=o,o}_insertAfter(o,a,l){const d=null===a?this._itHead:a._next;return o._next=d,o._prev=a,null===d?this._itTail=o:d._prev=o,null===a?this._itHead=o:a._next=o,null===this._linkedRecords&&(this._linkedRecords=new kr),this._linkedRecords.put(o),o.currentIndex=l,o}_remove(o){return this._addToRemovals(this._unlink(o))}_unlink(o){null!==this._linkedRecords&&this._linkedRecords.remove(o);const a=o._prev,l=o._next;return null===a?this._itHead=l:a._next=l,null===l?this._itTail=a:l._prev=a,o}_addToMoves(o,a){return o.previousIndex===a||(this._movesTail=null===this._movesTail?this._movesHead=o:this._movesTail._nextMoved=o),o}_addToRemovals(o){return null===this._unlinkedRecords&&(this._unlinkedRecords=new kr),this._unlinkedRecords.put(o),o.currentIndex=null,o._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=o,o._prevRemoved=null):(o._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=o),o}_addIdentityChange(o,a){return o.item=a,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=o:this._identityChangesTail._nextIdentityChange=o,o}}class Yn{constructor(o,a){this.item=o,this.trackById=a,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class zm{constructor(){this._head=null,this._tail=null}add(o){null===this._head?(this._head=this._tail=o,o._nextDup=null,o._prevDup=null):(this._tail._nextDup=o,o._prevDup=this._tail,o._nextDup=null,this._tail=o)}get(o,a){let l;for(l=this._head;null!==l;l=l._nextDup)if((null===a||a<=l.currentIndex)&&Object.is(l.trackById,o))return l;return null}remove(o){const a=o._prevDup,l=o._nextDup;return null===a?this._head=l:a._nextDup=l,null===l?this._tail=a:l._prevDup=a,null===this._head}}class kr{constructor(){this.map=new Map}put(o){const a=o.trackById;let l=this.map.get(a);l||(l=new zm,this.map.set(a,l)),l.add(o)}get(o,a){const d=this.map.get(o);return d?d.get(o,a):null}remove(o){const a=o.trackById;return this.map.get(a).remove(o)&&this.map.delete(a),o}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function un(i,o,a){const l=i.previousIndex;if(null===l)return l;let d=0;return a&&l<a.length&&(d=a[l]),l+o+d}class dw{constructor(){}supports(o){return o instanceof Map||R_(o)}create(){return new _h}}class _h{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(o){let a;for(a=this._mapHead;null!==a;a=a._next)o(a)}forEachPreviousItem(o){let a;for(a=this._previousMapHead;null!==a;a=a._nextPrevious)o(a)}forEachChangedItem(o){let a;for(a=this._changesHead;null!==a;a=a._nextChanged)o(a)}forEachAddedItem(o){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)o(a)}forEachRemovedItem(o){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)o(a)}diff(o){if(o){if(!(o instanceof Map||R_(o)))throw new ve(900,!1)}else o=new Map;return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let a=this._mapHead;if(this._appendAfter=null,this._forEach(o,(l,d)=>{if(a&&a.key===d)this._maybeAddToChanges(a,l),this._appendAfter=a,a=a._next;else{const p=this._getOrCreateRecordForKey(d,l);a=this._insertBeforeOrAppend(a,p)}}),a){a._prev&&(a._prev._next=null),this._removalsHead=a;for(let l=a;null!==l;l=l._nextRemoved)l===this._mapHead&&(this._mapHead=null),this._records.delete(l.key),l._nextRemoved=l._next,l.previousValue=l.currentValue,l.currentValue=null,l._prev=null,l._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(o,a){if(o){const l=o._prev;return a._next=o,a._prev=l,o._prev=a,l&&(l._next=a),o===this._mapHead&&(this._mapHead=a),this._appendAfter=o,o}return this._appendAfter?(this._appendAfter._next=a,a._prev=this._appendAfter):this._mapHead=a,this._appendAfter=a,null}_getOrCreateRecordForKey(o,a){if(this._records.has(o)){const d=this._records.get(o);this._maybeAddToChanges(d,a);const p=d._prev,_=d._next;return p&&(p._next=_),_&&(_._prev=p),d._next=null,d._prev=null,d}const l=new ds(o);return this._records.set(o,l),l.currentValue=a,this._addToAdditions(l),l}_reset(){if(this.isDirty){let o;for(this._previousMapHead=this._mapHead,o=this._previousMapHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._changesHead;null!==o;o=o._nextChanged)o.previousValue=o.currentValue;for(o=this._additionsHead;null!=o;o=o._nextAdded)o.previousValue=o.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(o,a){Object.is(a,o.currentValue)||(o.previousValue=o.currentValue,o.currentValue=a,this._addToChanges(o))}_addToAdditions(o){null===this._additionsHead?this._additionsHead=this._additionsTail=o:(this._additionsTail._nextAdded=o,this._additionsTail=o)}_addToChanges(o){null===this._changesHead?this._changesHead=this._changesTail=o:(this._changesTail._nextChanged=o,this._changesTail=o)}_forEach(o,a){o instanceof Map?o.forEach(a):Object.keys(o).forEach(l=>a(o[l],l))}}class ds{constructor(o){this.key=o,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function $b(){return new lr([new cw])}let lr=(()=>{class i{constructor(a){this.factories=a}static create(a,l){if(null!=l){const d=l.factories.slice();a=a.concat(d)}return new i(a)}static extend(a){return{provide:i,useFactory:l=>i.create(a,l||$b()),deps:[[i,new vt,new Be]]}}find(a){const l=this.factories.find(d=>d.supports(a));if(null!=l)return l;throw new ve(901,!1)}}return i.\u0275prov=Zt({token:i,providedIn:"root",factory:$b}),i})();function Za(){return new Rn([new dw])}let Rn=(()=>{class i{constructor(a){this.factories=a}static create(a,l){if(l){const d=l.factories.slice();a=a.concat(d)}return new i(a)}static extend(a){return{provide:i,useFactory:l=>i.create(a,l||Za()),deps:[[i,new vt,new Be]]}}find(a){const l=this.factories.find(d=>d.supports(a));if(l)return l;throw new ve(901,!1)}}return i.\u0275prov=Zt({token:i,providedIn:"root",factory:Za}),i})();const wS=Ob(null,"core",[]);let il=(()=>{class i{constructor(a){}}return i.\u0275fac=function(a){return new(a||i)(bn(yp))},i.\u0275mod=rt({type:i}),i.\u0275inj=Ot({}),i})();function Ep(i){return"boolean"==typeof i?i:null!=i&&"false"!==i}},3942:(ot,Se,P)=>{P.d(Se,{Z:()=>ve});var f=P(2090),te=P(4859),k=P(9681),oe=P(1877);class re{constructor(me,fe){this._delegate=me,this.firebase=fe,(0,k._addComponent)(me,new te.wA("app-compat",()=>this,"PUBLIC")),this.container=me.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(me){this._delegate.automaticDataCollectionEnabled=me}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(me=>{this._delegate.checkDestroyed(),me()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,k.deleteApp)(this._delegate)))}_getService(me,fe=k._DEFAULT_ENTRY_NAME){var Ke;this._delegate.checkDestroyed();const nt=this._delegate.container.getProvider(me);return!nt.isInitialized()&&"EXPLICIT"===(null===(Ke=nt.getComponent())||void 0===Ke?void 0:Ke.instantiationMode)&&nt.initialize(),nt.getImmediate({identifier:fe})}_removeServiceInstance(me,fe=k._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(me).clearInstance(fe)}_addComponent(me){(0,k._addComponent)(this._delegate,me)}_addOrOverwriteComponent(me){(0,k._addOrOverwriteComponent)(this._delegate,me)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const le=new f.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),B=function pe(){const Je=function he(Je){const me={},fe={__esModule:!0,initializeApp:function Ae(je,U={}){const ge=k.initializeApp(je,U);if((0,f.r3)(me,ge.name))return me[ge.name];const K=new Je(ge,fe);return me[ge.name]=K,K},app:nt,registerVersion:k.registerVersion,setLogLevel:k.setLogLevel,onLog:k.onLog,apps:null,SDK_VERSION:k.SDK_VERSION,INTERNAL:{registerComponent:function Ee(je){const U=je.name,ge=U.replace("-compat","");if(k._registerComponent(je)&&"PUBLIC"===je.type){const K=(ee=nt())=>{if("function"!=typeof ee[ge])throw le.create("invalid-app-argument",{appName:U});return ee[ge]()};void 0!==je.serviceProps&&(0,f.ZB)(K,je.serviceProps),fe[ge]=K,Je.prototype[ge]=function(...ee){return this._getService.bind(this,U).apply(this,je.multipleInstances?ee:[])}}return"PUBLIC"===je.type?fe[ge]:null},removeApp:function Ke(je){delete me[je]},useAsService:function Ue(je,U){return"serverAuth"===U?null:U},modularAPIs:k}};function nt(je){if(!(0,f.r3)(me,je=je||k._DEFAULT_ENTRY_NAME))throw le.create("no-app",{appName:je});return me[je]}return fe.default=fe,Object.defineProperty(fe,"apps",{get:function _e(){return Object.keys(me).map(je=>me[je])}}),nt.App=Je,fe}(re);return Je.INTERNAL=Object.assign(Object.assign({},Je.INTERNAL),{createFirebaseNamespace:pe,extendNamespace:function me(fe){(0,f.ZB)(Je,fe)},createSubscribe:f.ne,ErrorFactory:f.LL,deepExtend:f.ZB}),Je}(),$=new oe.Yd("@firebase/app-compat");if((0,f.jU)()&&void 0!==self.firebase){$.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Je=self.firebase.SDK_VERSION;Je&&Je.indexOf("LITE")>=0&&$.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const ve=B;!function Me(Je){(0,k.registerVersion)("@firebase/app-compat","0.1.33",Je)}()},9681:(ot,Se,P)=>{P.r(Se),P.d(Se,{FirebaseError:()=>oe.ZR,SDK_VERSION:()=>ys,_DEFAULT_ENTRY_NAME:()=>Ut,_addComponent:()=>Wt,_addOrOverwriteComponent:()=>Zt,_apps:()=>tn,_clearComponents:()=>Jo,_components:()=>Sn,_getProvider:()=>Ot,_registerComponent:()=>Er,_removeServiceInstance:()=>Xt,deleteApp:()=>wo,getApp:()=>Ur,getApps:()=>hi,initializeApp:()=>Di,onLog:()=>ji,registerVersion:()=>Br,setLogLevel:()=>An});var f=P(5861),te=P(4859),k=P(1877),oe=P(2090),re=P(8766);class de{constructor(H){this.container=H}getPlatformInfoString(){return this.container.getProviders().map(q=>{if(function le(V){return"VERSION"===V.getComponent()?.type}(q)){const be=q.getImmediate();return`${be.library}/${be.version}`}return null}).filter(q=>q).join(" ")}}const he="@firebase/app",B=new k.Yd("@firebase/app"),Ut="[DEFAULT]",ze={[he]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},tn=new Map,Sn=new Map;function Wt(V,H){try{V.container.addComponent(H)}catch(q){B.debug(`Component ${H.name} failed to register with FirebaseApp ${V.name}`,q)}}function Zt(V,H){V.container.addOrOverwriteComponent(H)}function Er(V){const H=V.name;if(Sn.has(H))return B.debug(`There were multiple attempts to register component ${H}.`),!1;Sn.set(H,V);for(const q of tn.values())Wt(q,V);return!0}function Ot(V,H){const q=V.container.getProvider("heartbeat").getImmediate({optional:!0});return q&&q.triggerHeartbeat(),V.container.getProvider(H)}function Xt(V,H,q=Ut){Ot(V,H).clearInstance(q)}function Jo(){Sn.clear()}const mr=new oe.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Vr{constructor(H,q,be){this._isDeleted=!1,this._options=Object.assign({},H),this._config=Object.assign({},q),this._name=q.name,this._automaticDataCollectionEnabled=q.automaticDataCollectionEnabled,this._container=be,this.container.addComponent(new te.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(H){this.checkDestroyed(),this._automaticDataCollectionEnabled=H}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(H){this._isDeleted=H}checkDestroyed(){if(this.isDeleted)throw mr.create("app-deleted",{appName:this._name})}}const ys="9.9.4";function Di(V,H={}){"object"!=typeof H&&(H={name:H});const q=Object.assign({name:Ut,automaticDataCollectionEnabled:!1},H),be=q.name;if("string"!=typeof be||!be)throw mr.create("bad-app-name",{appName:String(be)});const Ve=tn.get(be);if(Ve){if((0,oe.vZ)(V,Ve.options)&&(0,oe.vZ)(q,Ve.config))return Ve;throw mr.create("duplicate-app",{appName:be})}const rt=new te.H0(be);for(const Yt of Sn.values())rt.addComponent(Yt);const sn=new Vr(V,q,rt);return tn.set(be,sn),sn}function Ur(V=Ut){const H=tn.get(V);if(!H)throw mr.create("no-app",{appName:V});return H}function hi(){return Array.from(tn.values())}function wo(V){return We.apply(this,arguments)}function We(){return(We=(0,f.Z)(function*(V){const H=V.name;tn.has(H)&&(tn.delete(H),yield Promise.all(V.container.getProviders().map(q=>q.delete())),V.isDeleted=!0)})).apply(this,arguments)}function Br(V,H,q){var be;let Ve=null!==(be=ze[V])&&void 0!==be?be:V;q&&(Ve+=`-${q}`);const rt=Ve.match(/\s|\//),sn=H.match(/\s|\//);if(rt||sn){const Yt=[`Unable to register library "${Ve}" with version "${H}":`];return rt&&Yt.push(`library name "${Ve}" contains illegal characters (whitespace or "/")`),rt&&sn&&Yt.push("and"),sn&&Yt.push(`version name "${H}" contains illegal characters (whitespace or "/")`),void B.warn(Yt.join(" "))}Er(new te.wA(`${Ve}-version`,()=>({library:Ve,version:H}),"VERSION"))}function ji(V,H){if(null!==V&&"function"!=typeof V)throw mr.create("invalid-log-argument");(0,k.Am)(V,H)}function An(V){(0,k.Ub)(V)}const xn="firebase-heartbeat-store";let jn=null;function ln(){return jn||(jn=(0,re.X3)("firebase-heartbeat-database",1,{upgrade:(V,H)=>{0===H&&V.createObjectStore(xn)}}).catch(V=>{throw mr.create("idb-open",{originalErrorMessage:V.message})})),jn}function st(){return(st=(0,f.Z)(function*(V){var H;try{return(yield ln()).transaction(xn).objectStore(xn).get(er(V))}catch(q){if(q instanceof oe.ZR)B.warn(q.message);else{const be=mr.create("idb-get",{originalErrorMessage:null===(H=q)||void 0===H?void 0:H.message});B.warn(be.message)}}})).apply(this,arguments)}function nn(V,H){return Xn.apply(this,arguments)}function Xn(){return(Xn=(0,f.Z)(function*(V,H){var q;try{const Ve=(yield ln()).transaction(xn,"readwrite");return yield Ve.objectStore(xn).put(H,er(V)),Ve.done}catch(be){if(be instanceof oe.ZR)B.warn(be.message);else{const Ve=mr.create("idb-set",{originalErrorMessage:null===(q=be)||void 0===q?void 0:q.message});B.warn(Ve.message)}}})).apply(this,arguments)}function er(V){return`${V.name}!${V.options.appId}`}class $i{constructor(H){this.container=H,this._heartbeatsCache=null;const q=this.container.getProvider("app").getImmediate();this._storage=new Gt(q),this._heartbeatsCachePromise=this._storage.read().then(be=>(this._heartbeatsCache=be,be))}triggerHeartbeat(){var H=this;return(0,f.Z)(function*(){const be=H.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Ve=Kt();if(null===H._heartbeatsCache&&(H._heartbeatsCache=yield H._heartbeatsCachePromise),H._heartbeatsCache.lastSentHeartbeatDate!==Ve&&!H._heartbeatsCache.heartbeats.some(rt=>rt.date===Ve))return H._heartbeatsCache.heartbeats.push({date:Ve,agent:be}),H._heartbeatsCache.heartbeats=H._heartbeatsCache.heartbeats.filter(rt=>{const sn=new Date(rt.date).valueOf();return Date.now()-sn<=2592e6}),H._storage.overwrite(H._heartbeatsCache)})()}getHeartbeatsHeader(){var H=this;return(0,f.Z)(function*(){if(null===H._heartbeatsCache&&(yield H._heartbeatsCachePromise),null===H._heartbeatsCache||0===H._heartbeatsCache.heartbeats.length)return"";const q=Kt(),{heartbeatsToSend:be,unsentEntries:Ve}=function pi(V,H=1024){const q=[];let be=V.slice();for(const Ve of V){const rt=q.find(sn=>sn.agent===Ve.agent);if(rt){if(rt.dates.push(Ve.date),Z(q)>H){rt.dates.pop();break}}else if(q.push({agent:Ve.agent,dates:[Ve.date]}),Z(q)>H){q.pop();break}be=be.slice(1)}return{heartbeatsToSend:q,unsentEntries:be}}(H._heartbeatsCache.heartbeats),rt=(0,oe.L)(JSON.stringify({version:2,heartbeats:be}));return H._heartbeatsCache.lastSentHeartbeatDate=q,Ve.length>0?(H._heartbeatsCache.heartbeats=Ve,yield H._storage.overwrite(H._heartbeatsCache)):(H._heartbeatsCache.heartbeats=[],H._storage.overwrite(H._heartbeatsCache)),rt})()}}function Kt(){return(new Date).toISOString().substring(0,10)}class Gt{constructor(H){this.app=H,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,f.Z)(function*(){return!!(0,oe.hl)()&&(0,oe.eu)().then(()=>!0).catch(()=>!1)})()}read(){var H=this;return(0,f.Z)(function*(){return(yield H._canUseIndexedDBPromise)&&(yield function ft(V){return st.apply(this,arguments)}(H.app))||{heartbeats:[]}})()}overwrite(H){var q=this;return(0,f.Z)(function*(){var be;if(yield q._canUseIndexedDBPromise){const rt=yield q.read();return nn(q.app,{lastSentHeartbeatDate:null!==(be=H.lastSentHeartbeatDate)&&void 0!==be?be:rt.lastSentHeartbeatDate,heartbeats:H.heartbeats})}})()}add(H){var q=this;return(0,f.Z)(function*(){var be;if(yield q._canUseIndexedDBPromise){const rt=yield q.read();return nn(q.app,{lastSentHeartbeatDate:null!==(be=H.lastSentHeartbeatDate)&&void 0!==be?be:rt.lastSentHeartbeatDate,heartbeats:[...rt.heartbeats,...H.heartbeats]})}})()}}function Z(V){return(0,oe.L)(JSON.stringify({version:2,heartbeats:V})).length}!function j(V){Er(new te.wA("platform-logger",H=>new de(H),"PRIVATE")),Er(new te.wA("heartbeat",H=>new $i(H),"PRIVATE")),Br(he,"0.7.32",V),Br(he,"0.7.32","esm2017"),Br("fire-js","")}("")},4859:(ot,Se,P)=>{P.d(Se,{H0:()=>he,wA:()=>k});var f=P(5861),te=P(2090);class k{constructor(B,$,Q){this.name=B,this.instanceFactory=$,this.type=Q,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(B){return this.instantiationMode=B,this}setMultipleInstances(B){return this.multipleInstances=B,this}setServiceProps(B){return this.serviceProps=B,this}setInstanceCreatedCallback(B){return this.onInstanceCreated=B,this}}const oe="[DEFAULT]";class re{constructor(B,$){this.name=B,this.container=$,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(B){const $=this.normalizeInstanceIdentifier(B);if(!this.instancesDeferred.has($)){const Q=new te.BH;if(this.instancesDeferred.set($,Q),this.isInitialized($)||this.shouldAutoInitialize())try{const Le=this.getOrInitializeService({instanceIdentifier:$});Le&&Q.resolve(Le)}catch{}}return this.instancesDeferred.get($).promise}getImmediate(B){var $;const Q=this.normalizeInstanceIdentifier(B?.identifier),Le=null!==($=B?.optional)&&void 0!==$&&$;if(!this.isInitialized(Q)&&!this.shouldAutoInitialize()){if(Le)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:Q})}catch(Me){if(Le)return null;throw Me}}getComponent(){return this.component}setComponent(B){if(B.name!==this.name)throw Error(`Mismatching Component ${B.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=B,this.shouldAutoInitialize()){if(function le(pe){return"EAGER"===pe.instantiationMode}(B))try{this.getOrInitializeService({instanceIdentifier:oe})}catch{}for(const[$,Q]of this.instancesDeferred.entries()){const Le=this.normalizeInstanceIdentifier($);try{const Me=this.getOrInitializeService({instanceIdentifier:Le});Q.resolve(Me)}catch{}}}}clearInstance(B=oe){this.instancesDeferred.delete(B),this.instancesOptions.delete(B),this.instances.delete(B)}delete(){var B=this;return(0,f.Z)(function*(){const $=Array.from(B.instances.values());yield Promise.all([...$.filter(Q=>"INTERNAL"in Q).map(Q=>Q.INTERNAL.delete()),...$.filter(Q=>"_delete"in Q).map(Q=>Q._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(B=oe){return this.instances.has(B)}getOptions(B=oe){return this.instancesOptions.get(B)||{}}initialize(B={}){const{options:$={}}=B,Q=this.normalizeInstanceIdentifier(B.instanceIdentifier);if(this.isInitialized(Q))throw Error(`${this.name}(${Q}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Le=this.getOrInitializeService({instanceIdentifier:Q,options:$});for(const[Me,ve]of this.instancesDeferred.entries())Q===this.normalizeInstanceIdentifier(Me)&&ve.resolve(Le);return Le}onInit(B,$){var Q;const Le=this.normalizeInstanceIdentifier($),Me=null!==(Q=this.onInitCallbacks.get(Le))&&void 0!==Q?Q:new Set;Me.add(B),this.onInitCallbacks.set(Le,Me);const ve=this.instances.get(Le);return ve&&B(ve,Le),()=>{Me.delete(B)}}invokeOnInitCallbacks(B,$){const Q=this.onInitCallbacks.get($);if(Q)for(const Le of Q)try{Le(B,$)}catch{}}getOrInitializeService({instanceIdentifier:B,options:$={}}){let Q=this.instances.get(B);if(!Q&&this.component&&(Q=this.component.instanceFactory(this.container,{instanceIdentifier:(pe=B,pe===oe?void 0:pe),options:$}),this.instances.set(B,Q),this.instancesOptions.set(B,$),this.invokeOnInitCallbacks(Q,B),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,B,Q)}catch{}var pe;return Q||null}normalizeInstanceIdentifier(B=oe){return this.component?this.component.multipleInstances?B:oe:B}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class he{constructor(B){this.name=B,this.providers=new Map}addComponent(B){const $=this.getProvider(B.name);if($.isComponentSet())throw new Error(`Component ${B.name} has already been registered with ${this.name}`);$.setComponent(B)}addOrOverwriteComponent(B){this.getProvider(B.name).isComponentSet()&&this.providers.delete(B.name),this.addComponent(B)}getProvider(B){if(this.providers.has(B))return this.providers.get(B);const $=new re(B,this);return this.providers.set(B,$),$}getProviders(){return Array.from(this.providers.values())}}},1877:(ot,Se,P)=>{P.d(Se,{Am:()=>pe,Ub:()=>he,Yd:()=>le,in:()=>te});const f=[];var te=(()=>{return(B=te||(te={}))[B.DEBUG=0]="DEBUG",B[B.VERBOSE=1]="VERBOSE",B[B.INFO=2]="INFO",B[B.WARN=3]="WARN",B[B.ERROR=4]="ERROR",B[B.SILENT=5]="SILENT",te;var B})();const k={debug:te.DEBUG,verbose:te.VERBOSE,info:te.INFO,warn:te.WARN,error:te.ERROR,silent:te.SILENT},oe=te.INFO,re={[te.DEBUG]:"log",[te.VERBOSE]:"log",[te.INFO]:"info",[te.WARN]:"warn",[te.ERROR]:"error"},de=(B,$,...Q)=>{if($<B.logLevel)return;const Le=(new Date).toISOString(),Me=re[$];if(!Me)throw new Error(`Attempted to log a message with an invalid logType (value: ${$})`);console[Me](`[${Le}]  ${B.name}:`,...Q)};class le{constructor($){this.name=$,this._logLevel=oe,this._logHandler=de,this._userLogHandler=null,f.push(this)}get logLevel(){return this._logLevel}set logLevel($){if(!($ in te))throw new TypeError(`Invalid value "${$}" assigned to \`logLevel\``);this._logLevel=$}setLogLevel($){this._logLevel="string"==typeof $?k[$]:$}get logHandler(){return this._logHandler}set logHandler($){if("function"!=typeof $)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=$}get userLogHandler(){return this._userLogHandler}set userLogHandler($){this._userLogHandler=$}debug(...$){this._userLogHandler&&this._userLogHandler(this,te.DEBUG,...$),this._logHandler(this,te.DEBUG,...$)}log(...$){this._userLogHandler&&this._userLogHandler(this,te.VERBOSE,...$),this._logHandler(this,te.VERBOSE,...$)}info(...$){this._userLogHandler&&this._userLogHandler(this,te.INFO,...$),this._logHandler(this,te.INFO,...$)}warn(...$){this._userLogHandler&&this._userLogHandler(this,te.WARN,...$),this._logHandler(this,te.WARN,...$)}error(...$){this._userLogHandler&&this._userLogHandler(this,te.ERROR,...$),this._logHandler(this,te.ERROR,...$)}}function he(B){f.forEach($=>{$.setLogLevel(B)})}function pe(B,$){for(const Q of f){let Le=null;$&&$.level&&(Le=k[$.level]),Q.userLogHandler=null===B?null:(Me,ve,...Je)=>{const me=Je.map(fe=>{if(null==fe)return null;if("string"==typeof fe)return fe;if("number"==typeof fe||"boolean"==typeof fe)return fe.toString();if(fe instanceof Error)return fe.message;try{return JSON.stringify(fe)}catch{return null}}).filter(fe=>fe).join(" ");ve>=(Le??Me.logLevel)&&B({level:te[ve].toLowerCase(),message:me,args:Je,type:Me.name})}}}},8766:(ot,Se,P)=>{P.d(Se,{Lj:()=>Ae,X3:()=>nt});var f=P(5861);let k,oe;const le=new WeakMap,he=new WeakMap,pe=new WeakMap,B=new WeakMap,$=new WeakMap;let Me={get(U,ge,K){if(U instanceof IDBTransaction){if("done"===ge)return he.get(U);if("objectStoreNames"===ge)return U.objectStoreNames||pe.get(U);if("store"===ge)return K.objectStoreNames[1]?void 0:K.objectStore(K.objectStoreNames[0])}return fe(U[ge])},set:(U,ge,K)=>(U[ge]=K,!0),has:(U,ge)=>U instanceof IDBTransaction&&("done"===ge||"store"===ge)||ge in U};function me(U){return"function"==typeof U?function Je(U){return U!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function de(){return oe||(oe=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(U)?function(...ge){return U.apply(Ke(this),ge),fe(le.get(this))}:function(...ge){return fe(U.apply(Ke(this),ge))}:function(ge,...K){const ee=U.call(Ke(this),ge,...K);return pe.set(ee,ge.sort?ge.sort():[ge]),fe(ee)}}(U):(U instanceof IDBTransaction&&function Le(U){if(he.has(U))return;const ge=new Promise((K,ee)=>{const ie=()=>{U.removeEventListener("complete",ne),U.removeEventListener("error",Pe),U.removeEventListener("abort",Pe)},ne=()=>{K(),ie()},Pe=()=>{ee(U.error||new DOMException("AbortError","AbortError")),ie()};U.addEventListener("complete",ne),U.addEventListener("error",Pe),U.addEventListener("abort",Pe)});he.set(U,ge)}(U),((U,ge)=>ge.some(K=>U instanceof K))(U,function re(){return k||(k=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(U,Me):U)}function fe(U){if(U instanceof IDBRequest)return function Q(U){const ge=new Promise((K,ee)=>{const ie=()=>{U.removeEventListener("success",ne),U.removeEventListener("error",Pe)},ne=()=>{K(fe(U.result)),ie()},Pe=()=>{ee(U.error),ie()};U.addEventListener("success",ne),U.addEventListener("error",Pe)});return ge.then(K=>{K instanceof IDBCursor&&le.set(K,U)}).catch(()=>{}),$.set(ge,U),ge}(U);if(B.has(U))return B.get(U);const ge=me(U);return ge!==U&&(B.set(U,ge),$.set(ge,U)),ge}const Ke=U=>$.get(U);function nt(U,ge,{blocked:K,upgrade:ee,blocking:ie,terminated:ne}={}){const Pe=indexedDB.open(U,ge),Oe=fe(Pe);return ee&&Pe.addEventListener("upgradeneeded",ct=>{ee(fe(Pe.result),ct.oldVersion,ct.newVersion,fe(Pe.transaction))}),K&&Pe.addEventListener("blocked",()=>K()),Oe.then(ct=>{ne&&ct.addEventListener("close",()=>ne()),ie&&ct.addEventListener("versionchange",()=>ie())}).catch(()=>{}),Oe}function Ae(U,{blocked:ge}={}){const K=indexedDB.deleteDatabase(U);return ge&&K.addEventListener("blocked",()=>ge()),fe(K).then(()=>{})}const _e=["get","getKey","getAll","getAllKeys","count"],Ee=["put","add","delete","clear"],Ue=new Map;function je(U,ge){if(!(U instanceof IDBDatabase)||ge in U||"string"!=typeof ge)return;if(Ue.get(ge))return Ue.get(ge);const K=ge.replace(/FromIndex$/,""),ee=ge!==K,ie=Ee.includes(K);if(!(K in(ee?IDBIndex:IDBObjectStore).prototype)||!ie&&!_e.includes(K))return;const ne=function(){var Pe=(0,f.Z)(function*(Oe,...ct){const Ht=this.transaction(Oe,ie?"readwrite":"readonly");let Ut=Ht.store;return ee&&(Ut=Ut.index(ct.shift())),(yield Promise.all([Ut[K](...ct),ie&&Ht.done]))[0]});return function(ct){return Pe.apply(this,arguments)}}();return Ue.set(ge,ne),ne}!function ve(U){Me=U(Me)}(U=>({...U,get:(ge,K,ee)=>je(ge,K)||U.get(ge,K,ee),has:(ge,K)=>!!je(ge,K)||U.has(ge,K)}))},5861:(ot,Se,P)=>{function f(k,oe,re,de,le,he,pe){try{var B=k[he](pe),$=B.value}catch(Q){return void re(Q)}B.done?oe($):Promise.resolve($).then(de,le)}function te(k){return function(){var oe=this,re=arguments;return new Promise(function(de,le){var he=k.apply(oe,re);function pe($){f(he,de,le,pe,B,"next",$)}function B($){f(he,de,le,pe,B,"throw",$)}pe(void 0)})}}P.d(Se,{Z:()=>te})}},ot=>{ot(ot.s=2135)}]);