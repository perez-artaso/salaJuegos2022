"use strict";(self.webpackChunksala_juegos_2022=self.webpackChunksala_juegos_2022||[]).push([[179],{440:(Gt,qe,U)=>{U.d(qe,{nm:()=>Li});var p=U(5813);U(4650),U(5867);var he=U(5861),it=U(9681),Xe=U(4859),_t=U(2090),nt=U(1877);const ae=new Map,Le={activated:!1,tokenObservers:[]},ne={initialized:!1,enabled:!1};function De(xe){return ae.get(xe)||Le}function de(xe,Ae){ae.set(xe,Ae)}function Ne(){return ne}class tn{constructor(Ae,Ue,ct,Dt,jt){if(this.operation=Ae,this.retryPolicy=Ue,this.getWaitDuration=ct,this.lowerBound=Dt,this.upperBound=jt,this.pending=null,this.nextErrorWaitInterval=Dt,Dt>jt)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(Ae){var Ue=this;return(0,he.Z)(function*(){Ue.stop();try{Ue.pending=new _t.BH,yield function qt(xe){return new Promise(Ae=>{setTimeout(Ae,xe)})}(Ue.getNextRun(Ae)),Ue.pending.resolve(),yield Ue.pending.promise,Ue.pending=new _t.BH,yield Ue.operation(),Ue.pending.resolve(),yield Ue.pending.promise,Ue.process(!0).catch(()=>{})}catch(ct){Ue.retryPolicy(ct)?Ue.process(!1).catch(()=>{}):Ue.stop()}})()}getNextRun(Ae){if(Ae)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const Ue=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),Ue}}}const Ft=new _t.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function an(xe){if(!De(xe).activated)throw Ft.create("use-before-activation",{appName:xe.name})}function Er(xe,Ae){return mr.apply(this,arguments)}function mr(){return(mr=(0,he.Z)(function*({url:xe,body:Ae},Ue){var ct,Dt;const jt={"Content-Type":"application/json"},cn=Ue.getImmediate({optional:!0});if(cn){const Ui=yield cn.getHeartbeatsHeader();Ui&&(jt["X-Firebase-Client"]=Ui)}const ei={method:"POST",body:JSON.stringify(Ae),headers:jt};let ar,Oi;try{ar=yield fetch(xe,ei)}catch(Ui){throw Ft.create("fetch-network-error",{originalErrorMessage:null===(ct=Ui)||void 0===ct?void 0:ct.message})}if(200!==ar.status)throw Ft.create("fetch-status-error",{httpStatus:ar.status});try{Oi=yield ar.json()}catch(Ui){throw Ft.create("fetch-parse-error",{originalErrorMessage:null===(Dt=Ui)||void 0===Dt?void 0:Dt.message})}const ps=Oi.ttl.match(/^([\d.]+)(s)$/);if(!ps||!ps[2]||isNaN(Number(ps[1])))throw Ft.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${Oi.ttl}`});const gs=1e3*Number(ps[1]),gi=Date.now();return{token:Oi.token,expireTimeMillis:gi+gs,issuedAtTimeMillis:gi}})).apply(this,arguments)}function Jt(xe,Ae){const{projectId:Ue,appId:ct,apiKey:Dt}=xe.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${Ue}/apps/${ct}:exchangeDebugToken?key=${Dt}`,body:{debug_token:Ae}}}const lr="firebase-app-check-store";let Bn=null;function Cn(){return Bn||(Bn=new Promise((xe,Ae)=>{var Ue;try{const ct=indexedDB.open("firebase-app-check-database",1);ct.onsuccess=Dt=>{xe(Dt.target.result)},ct.onerror=Dt=>{var jt;Ae(Ft.create("storage-open",{originalErrorMessage:null===(jt=Dt.target.error)||void 0===jt?void 0:jt.message}))},ct.onupgradeneeded=Dt=>{0===Dt.oldVersion&&Dt.target.result.createObjectStore(lr,{keyPath:"compositeKey"})}}catch(ct){Ae(Ft.create("storage-open",{originalErrorMessage:null===(Ue=ct)||void 0===Ue?void 0:Ue.message}))}}),Bn)}function ye(){return(ye=(0,he.Z)(function*(xe,Ae){const ct=(yield Cn()).transaction(lr,"readwrite"),jt=ct.objectStore(lr).put({compositeKey:xe,value:Ae});return new Promise((cn,ei)=>{jt.onsuccess=ar=>{cn()},ct.onerror=ar=>{var Oi;ei(Ft.create("storage-set",{originalErrorMessage:null===(Oi=ar.target.error)||void 0===Oi?void 0:Oi.message}))}})})).apply(this,arguments)}const Lt=new nt.Yd("@firebase/app-check");function At(xe,Ae){return(0,_t.hl)()?function kr(xe,Ae){return function $e(xe,Ae){return ye.apply(this,arguments)}(function We(xe){return`${xe.options.appId}-${xe.name}`}(xe),Ae)}(xe,Ae).catch(Ue=>{Lt.warn(`Failed to write token to IndexedDB. Error: ${Ue}`)}):Promise.resolve()}function Mr(){return Ne().enabled}function pn(){return ge.apply(this,arguments)}function ge(){return(ge=(0,he.Z)(function*(){const xe=Ne();if(xe.enabled&&xe.token)return xe.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const oe={error:"UNKNOWN_ERROR"};function Ee(xe){return _t.US.encodeString(JSON.stringify(xe),!1)}function me(xe){return ut.apply(this,arguments)}function ut(){return(ut=(0,he.Z)(function*(xe,Ae=!1){const Ue=xe.app;an(Ue);const ct=De(Ue);let jt,Dt=ct.token;if(!Dt){const ar=yield ct.cachedTokenPromise;ar&&_n(ar)&&(Dt=ar)}if(!Ae&&Dt&&_n(Dt))return{token:Dt.token};let ei,cn=!1;if(Mr()){ct.exchangeTokenPromise||(ct.exchangeTokenPromise=Er(Jt(Ue,yield pn()),xe.heartbeatServiceProvider).then(Oi=>(ct.exchangeTokenPromise=void 0,Oi)),cn=!0);const ar=yield ct.exchangeTokenPromise;return yield At(Ue,ar),de(Ue,Object.assign(Object.assign({},ct),{token:ar})),{token:ar.token}}try{ct.exchangeTokenPromise||(ct.exchangeTokenPromise=ct.provider.getToken().then(ar=>(ct.exchangeTokenPromise=void 0,ar)),cn=!0),Dt=yield ct.exchangeTokenPromise}catch(ar){"appCheck/throttled"===ar.code?Lt.warn(ar.message):Lt.error(ar),jt=ar}return Dt?(ei={token:Dt.token},de(Ue,Object.assign(Object.assign({},ct),{token:Dt})),yield At(Ue,Dt)):ei=Xt(jt),cn&&er(Ue,ei),ei})).apply(this,arguments)}function Rt(xe,Ae){const Ue=De(xe),ct=Ue.tokenObservers.filter(Dt=>Dt.next!==Ae);0===ct.length&&Ue.tokenRefresher&&Ue.tokenRefresher.isRunning()&&Ue.tokenRefresher.stop(),de(xe,Object.assign(Object.assign({},Ue),{tokenObservers:ct}))}function ir(xe){const{app:Ae}=xe,Ue=De(Ae);let ct=Ue.tokenRefresher;ct||(ct=function Tn(xe){const{app:Ae}=xe;return new tn((0,he.Z)(function*(){let ct;if(ct=De(Ae).token?yield me(xe,!0):yield me(xe),ct.error)throw ct.error}),()=>!0,()=>{const Ue=De(Ae);if(Ue.token){let ct=Ue.token.issuedAtTimeMillis+.5*(Ue.token.expireTimeMillis-Ue.token.issuedAtTimeMillis)+3e5;return ct=Math.min(ct,Ue.token.expireTimeMillis-3e5),Math.max(0,ct-Date.now())}return 0},3e4,96e4)}(xe),de(Ae,Object.assign(Object.assign({},Ue),{tokenRefresher:ct}))),!ct.isRunning()&&Ue.isTokenAutoRefreshEnabled&&ct.start()}function er(xe,Ae){const Ue=De(xe).tokenObservers;for(const ct of Ue)try{"EXTERNAL"===ct.type&&null!=Ae.error?ct.error(Ae.error):ct.next(Ae)}catch{}}function _n(xe){return xe.expireTimeMillis-Date.now()>0}function Xt(xe){return{token:Ee(oe),error:xe}}class cr{constructor(Ae,Ue){this.app=Ae,this.heartbeatServiceProvider=Ue}_delete(){const{tokenObservers:Ae}=De(this.app);for(const Ue of Ae)Rt(this.app,Ue.next);return Promise.resolve()}}const fs="app-check-internal";!function Si(){(0,it._registerComponent)(new Xe.wA("app-check",xe=>function vr(xe,Ae){return new cr(xe,Ae)}(xe.getProvider("app").getImmediate(),xe.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((xe,Ae,Ue)=>{xe.getProvider(fs).initialize()})),(0,it._registerComponent)(new Xe.wA(fs,xe=>function Qr(xe){return{getToken:Ae=>me(xe,Ae),addTokenListener:Ae=>function yt(xe,Ae,Ue,ct){const{app:Dt}=xe,jt=De(Dt),cn={next:Ue,error:ct,type:Ae};if(de(Dt,Object.assign(Object.assign({},jt),{tokenObservers:[...jt.tokenObservers,cn]})),jt.token&&_n(jt.token)){const ei=jt.token;Promise.resolve().then(()=>{Ue({token:ei.token}),ir(xe)}).catch(()=>{})}jt.cachedTokenPromise.then(()=>ir(xe))}(xe,"INTERNAL",Ae),removeTokenListener:Ae=>Rt(xe.app,Ae)}}(xe.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,it.registerVersion)("@firebase/app-check","0.5.12")}();class Li{constructor(){return(0,p.vb)("app-check")}}typeof window<"u"&&window},1205:(Gt,qe,U)=>{U.d(qe,{zQ:()=>dt,ww:()=>wt,rT:()=>ne,f7:()=>de,L6:()=>ae,_Q:()=>Le,lh:()=>De,Qv:()=>nt,nw:()=>Ne});var p=U(4650),C=U(7579),G=U(9646),be=U(9751),we=U(8996),Me=U(6451),Re=U(5363),Oe=U(3900),Fe=U(4004),ce=U(6063);class le extends C.x{constructor(Mt=1/0,$t=1/0,ft=ce.l){super(),this._bufferSize=Mt,this._windowTime=$t,this._timestampProvider=ft,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=$t===1/0,this._bufferSize=Math.max(1,Mt),this._windowTime=Math.max(1,$t)}next(Mt){const{isStopped:$t,_buffer:ft,_infiniteTimeWindow:tn,_timestampProvider:qt,_windowTime:on}=this;$t||(ft.push(Mt),!tn&&ft.push(qt.now()+on)),this._trimBuffer(),super.next(Mt)}_subscribe(Mt){this._throwIfClosed(),this._trimBuffer();const $t=this._innerSubscribe(Mt),{_infiniteTimeWindow:ft,_buffer:tn}=this,qt=tn.slice();for(let on=0;on<qt.length&&!Mt.closed;on+=ft?1:2)Mt.next(qt[on]);return this._checkFinalizedStatuses(Mt),$t}_trimBuffer(){const{_bufferSize:Mt,_timestampProvider:$t,_buffer:ft,_infiniteTimeWindow:tn}=this,qt=(tn?1:2)*Mt;if(Mt<1/0&&qt<ft.length&&ft.splice(0,ft.length-qt),!tn){const on=$t.now();let Ft=0;for(let Mn=1;Mn<ft.length&&ft[Mn]<=on;Mn+=2)Ft=Mn;Ft&&ft.splice(0,Ft+1)}}}var Ce=U(3099);function mt(bt,Mt,$t){let ft,tn=!1;return bt&&"object"==typeof bt?({bufferSize:ft=1/0,windowTime:Mt=1/0,refCount:tn=!1,scheduler:$t}=bt):ft=bt??1/0,(0,Ce.B)({connector:()=>new le(ft,Mt,$t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:tn})}var ot=U(590),Ke=U(576);function Nt(bt,Mt){return(0,Ke.m)(Mt)?(0,Oe.w)(()=>bt,Mt):(0,Oe.w)(()=>bt)}var Ye=U(9468),He=U(9300),Ut=U(5813),Bt=U(2011),he=U(6895),it=U(440),Xe=U(127);const nt=new p.OlP("angularfire2.auth.use-emulator"),ae=new p.OlP("angularfire2.auth.settings"),Le=new p.OlP("angularfire2.auth.tenant-id"),ne=new p.OlP("angularfire2.auth.langugage-code"),De=new p.OlP("angularfire2.auth.use-device-language"),de=new p.OlP("angularfire.auth.persistence"),Ne=(bt,Mt,$t,ft,tn,qt,on,Ft)=>(0,Bt.cc)(`${bt.name}.auth`,"AngularFireAuth",bt.name,()=>{const Mn=Mt.runOutsideAngular(()=>bt.auth());if($t&&Mn.useEmulator(...$t),ft&&(Mn.tenantId=ft),Mn.languageCode=tn,qt&&Mn.useDeviceLanguage(),on)for(const[an,Fn]of Object.entries(on))Mn.settings[an]=Fn;return Ft&&Mn.setPersistence(Ft),Mn},[$t,ft,tn,qt,on,Ft]);let dt=(()=>{class bt{constructor($t,ft,tn,qt,on,Ft,Mn,an,Fn,Ei,Er,mr){const ur=new C.x,Ar=(0,G.of)(void 0).pipe((0,Re.Q)(on.outsideAngular),(0,Oe.w)(()=>qt.runOutsideAngular(()=>Promise.resolve().then(U.bind(U,2274)))),(0,Fe.U)(()=>(0,Bt.on)($t,qt,ft)),(0,Fe.U)(Jt=>Ne(Jt,qt,Ft,an,Fn,Ei,Mn,Er)),mt({bufferSize:1,refCount:!1}));if((0,he.PM)(tn))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,G.of)(null);else{Ar.pipe((0,ot.P)()).subscribe();const nr=Ar.pipe((0,Oe.w)(pt=>pt.getRedirectResult().then(Bn=>Bn,()=>null)),Ut.iC,mt({bufferSize:1,refCount:!1})),$n=Ar.pipe((0,Oe.w)(pt=>new be.y(Bn=>({unsubscribe:qt.runOutsideAngular(()=>pt.onAuthStateChanged(Cn=>Bn.next(Cn),Cn=>Bn.error(Cn),()=>Bn.complete()))})))),lr=Ar.pipe((0,Oe.w)(pt=>new be.y(Bn=>({unsubscribe:qt.runOutsideAngular(()=>pt.onIdTokenChanged(Cn=>Bn.next(Cn),Cn=>Bn.error(Cn),()=>Bn.complete()))}))));this.authState=nr.pipe(Nt($n),(0,Ye.R)(on.outsideAngular),(0,Re.Q)(on.insideAngular)),this.user=nr.pipe(Nt(lr),(0,Ye.R)(on.outsideAngular),(0,Re.Q)(on.insideAngular)),this.idToken=this.user.pipe((0,Oe.w)(pt=>pt?(0,we.D)(pt.getIdToken()):(0,G.of)(null))),this.idTokenResult=this.user.pipe((0,Oe.w)(pt=>pt?(0,we.D)(pt.getIdTokenResult()):(0,G.of)(null))),this.credential=(0,Me.T)(nr,ur,this.authState.pipe((0,He.h)(pt=>!pt))).pipe((0,Fe.U)(pt=>pt?.user?pt:null),(0,Ye.R)(on.outsideAngular),(0,Re.Q)(on.insideAngular))}return(0,Bt.pX)(this,Ar,qt,{spy:{apply:(Jt,nr,$n)=>{(Jt.startsWith("signIn")||Jt.startsWith("createUser"))&&$n.then(lr=>ur.next(lr))}}})}}return bt.\u0275fac=function($t){return new($t||bt)(p.LFG(Bt.Dh),p.LFG(Bt.xv,8),p.LFG(p.Lbi),p.LFG(p.R0b),p.LFG(Ut.HU),p.LFG(nt,8),p.LFG(ae,8),p.LFG(Le,8),p.LFG(ne,8),p.LFG(De,8),p.LFG(de,8),p.LFG(it.nm,8))},bt.\u0275prov=p.Yz7({token:bt,factory:bt.\u0275fac,providedIn:"any"}),bt})(),wt=(()=>{class bt{constructor(){Xe.Z.registerVersion("angularfire",Ut.q4.full,"auth-compat")}}return bt.\u0275fac=function($t){return new($t||bt)},bt.\u0275mod=p.oAB({type:bt}),bt.\u0275inj=p.cJS({providers:[dt]}),bt})()},7566:(Gt,qe,U)=>{U.d(qe,{ST:()=>mv,yb:()=>ky});var p=U(4650),C=U(4986),G=U(9751),be=U(8996),we=U(9646),Me=U(5813),Re=U(8675),Oe=U(4482),Fe=U(5403);function ce(){return(0,Oe.e)((i,e)=>{let t,o=!1;i.subscribe((0,Fe.x)(e,u=>{const d=t;t=u,o&&e.next([d,u]),o=!0}))})}var le=U(4004),Ce=U(5026),mt=U(4671);function Ke(i,e){return i===e}var ne,Nt=U(9300),Ye=U(2011),He=U(6895),Bt=(U(2274),U(3942)),he=U(5861),it=U(9681),Xe=U(4859),_t=U(1877),nt=U(2090),ae=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Le={},De=De||{},de=ae||self;function Ne(){}function dt(i){var e=typeof i;return"array"==(e="object"!=e?e:i?Array.isArray(i)?"array":e:"null")||"object"==e&&"number"==typeof i.length}function wt(i){var e=typeof i;return"object"==e&&null!=i||"function"==e}var Mt="closure_uid_"+(1e9*Math.random()>>>0),$t=0;function ft(i,e,t){return i.call.apply(i.bind,arguments)}function tn(i,e,t){if(!i)throw Error();if(2<arguments.length){var o=Array.prototype.slice.call(arguments,2);return function(){var u=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(u,o),i.apply(e,u)}}return function(){return i.apply(e,arguments)}}function qt(i,e,t){return(qt=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?ft:tn).apply(null,arguments)}function on(i,e){var t=Array.prototype.slice.call(arguments,1);return function(){var o=t.slice();return o.push.apply(o,arguments),i.apply(this,o)}}function Ft(i,e){function t(){}t.prototype=e.prototype,i.Z=e.prototype,i.prototype=new t,i.prototype.constructor=i,i.Vb=function(o,u,d){for(var g=Array(arguments.length-2),D=2;D<arguments.length;D++)g[D-2]=arguments[D];return e.prototype[u].apply(o,g)}}function Mn(){this.s=this.s,this.o=this.o}var Fn={};Mn.prototype.s=!1,Mn.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var i=function bt(i){return Object.prototype.hasOwnProperty.call(i,Mt)&&i[Mt]||(i[Mt]=++$t)}(this);delete Fn[i]}},Mn.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Ei=Array.prototype.indexOf?function(i,e){return Array.prototype.indexOf.call(i,e,void 0)}:function(i,e){if("string"==typeof i)return"string"!=typeof e||1!=e.length?-1:i.indexOf(e,0);for(let t=0;t<i.length;t++)if(t in i&&i[t]===e)return t;return-1},Er=Array.prototype.forEach?function(i,e,t){Array.prototype.forEach.call(i,e,t)}:function(i,e,t){const o=i.length,u="string"==typeof i?i.split(""):i;for(let d=0;d<o;d++)d in u&&e.call(t,u[d],d,i)};function ur(i){return Array.prototype.concat.apply([],arguments)}function Ar(i){const e=i.length;if(0<e){const t=Array(e);for(let o=0;o<e;o++)t[o]=i[o];return t}return[]}function Jt(i){return/^[\s\xa0]*$/.test(i)}var pt,nr=String.prototype.trim?function(i){return i.trim()}:function(i){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(i)[1]};function $n(i,e){return-1!=i.indexOf(e)}function lr(i,e){return i<e?-1:i>e?1:0}e:{var Bn=de.navigator;if(Bn){var Cn=Bn.userAgent;if(Cn){pt=Cn;break e}}pt=""}function Hn(i,e,t){for(const o in i)e.call(t,i[o],o,i)}function kr(i){const e={};for(const t in i)e[t]=i[t];return e}var Ir="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function xr(i,e){let t,o;for(let u=1;u<arguments.length;u++){for(t in o=arguments[u],o)i[t]=o[t];for(let d=0;d<Ir.length;d++)t=Ir[d],Object.prototype.hasOwnProperty.call(o,t)&&(i[t]=o[t])}}function $e(i){return $e[" "](i),i}$e[" "]=Ne;var rr,i,se=$n(pt,"Opera"),Be=$n(pt,"Trident")||$n(pt,"MSIE"),We=$n(pt,"Edge"),Lt=We||Be,un=$n(pt,"Gecko")&&!($n(pt.toLowerCase(),"webkit")&&!$n(pt,"Edge"))&&!($n(pt,"Trident")||$n(pt,"MSIE"))&&!$n(pt,"Edge"),jn=$n(pt.toLowerCase(),"webkit")&&!$n(pt,"Edge");function At(){var i=de.document;return i?i.documentMode:void 0}e:{var Sn="",Mr=(i=pt,un?/rv:([^\);]+)(\)|;)/.exec(i):We?/Edge\/([\d\.]+)/.exec(i):Be?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(i):jn?/WebKit\/(\S+)/.exec(i):se?/(?:Version)[ \/]?(\S+)/.exec(i):void 0);if(Mr&&(Sn=Mr?Mr[1]:""),Be){var pn=At();if(null!=pn&&pn>parseFloat(Sn)){rr=String(pn);break e}}rr=Sn}var ge={};var me=de.document&&Be&&(At()||parseInt(rr,10))||void 0,ut=function(){if(!de.addEventListener||!Object.defineProperty)return!1;var i=!1,e=Object.defineProperty({},"passive",{get:function(){i=!0}});try{de.addEventListener("test",Ne,e),de.removeEventListener("test",Ne,e)}catch{}return i}();function yt(i,e){this.type=i,this.g=this.target=e,this.defaultPrevented=!1}function Rt(i,e){if(yt.call(this,i?i.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,i){var t=this.type=i.type,o=i.changedTouches&&i.changedTouches.length?i.changedTouches[0]:null;if(this.target=i.target||i.srcElement,this.g=e,e=i.relatedTarget){if(un){e:{try{$e(e.nodeName);var u=!0;break e}catch{}u=!1}u||(e=null)}}else"mouseover"==t?e=i.fromElement:"mouseout"==t&&(e=i.toElement);this.relatedTarget=e,o?(this.clientX=void 0!==o.clientX?o.clientX:o.pageX,this.clientY=void 0!==o.clientY?o.clientY:o.pageY,this.screenX=o.screenX||0,this.screenY=o.screenY||0):(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0),this.button=i.button,this.key=i.key||"",this.ctrlKey=i.ctrlKey,this.altKey=i.altKey,this.shiftKey=i.shiftKey,this.metaKey=i.metaKey,this.pointerId=i.pointerId||0,this.pointerType="string"==typeof i.pointerType?i.pointerType:ir[i.pointerType]||"",this.state=i.state,this.i=i,i.defaultPrevented&&Rt.Z.h.call(this)}}yt.prototype.h=function(){this.defaultPrevented=!0},Ft(Rt,yt);var ir={2:"touch",3:"pen",4:"mouse"};Rt.prototype.h=function(){Rt.Z.h.call(this);var i=this.i;i.preventDefault?i.preventDefault():i.returnValue=!1};var Tn="closure_listenable_"+(1e6*Math.random()|0),er=0;function _n(i,e,t,o,u){this.listener=i,this.proxy=null,this.src=e,this.type=t,this.capture=!!o,this.ia=u,this.key=++er,this.ca=this.fa=!1}function Xt(i){i.ca=!0,i.listener=null,i.proxy=null,i.src=null,i.ia=null}function cr(i){this.src=i,this.g={},this.h=0}function vr(i,e){var t=e.type;if(t in i.g){var d,o=i.g[t],u=Ei(o,e);(d=0<=u)&&Array.prototype.splice.call(o,u,1),d&&(Xt(e),0==i.g[t].length&&(delete i.g[t],i.h--))}}function Qr(i,e,t,o){for(var u=0;u<i.length;++u){var d=i[u];if(!d.ca&&d.listener==e&&d.capture==!!t&&d.ia==o)return u}return-1}cr.prototype.add=function(i,e,t,o,u){var d=i.toString();(i=this.g[d])||(i=this.g[d]=[],this.h++);var g=Qr(i,e,o,u);return-1<g?(e=i[g],t||(e.fa=!1)):((e=new _n(e,this.src,d,!!o,u)).fa=t,i.push(e)),e};var $r="closure_lm_"+(1e6*Math.random()|0),Dr={};function _e(i,e,t,o,u){if(o&&o.once)return Ve(i,e,t,o,u);if(Array.isArray(e)){for(var d=0;d<e.length;d++)_e(i,e[d],t,o,u);return null}return t=yn(t),i&&i[Tn]?i.N(e,t,wt(o)?!!o.capture:!!o,u):ue(i,e,t,!1,o,u)}function ue(i,e,t,o,u,d){if(!e)throw Error("Invalid event type");var g=wt(u)?!!u.capture:!!u,D=yr(i);if(D||(i[$r]=D=new cr(i)),(t=D.add(e,t,o,g,d)).proxy)return t;if(o=function re(){var e=dn;return function i(t){return e.call(i.src,i.listener,t)}}(),t.proxy=o,o.src=i,o.listener=t,i.addEventListener)ut||(u=g),void 0===u&&(u=!1),i.addEventListener(e.toString(),o,u);else if(i.attachEvent)i.attachEvent(mn(e.toString()),o);else{if(!i.addListener||!i.removeListener)throw Error("addEventListener and attachEvent are unavailable.");i.addListener(o)}return t}function Ve(i,e,t,o,u){if(Array.isArray(e)){for(var d=0;d<e.length;d++)Ve(i,e[d],t,o,u);return null}return t=yn(t),i&&i[Tn]?i.O(e,t,wt(o)?!!o.capture:!!o,u):ue(i,e,t,!0,o,u)}function at(i,e,t,o,u){if(Array.isArray(e))for(var d=0;d<e.length;d++)at(i,e[d],t,o,u);else o=wt(o)?!!o.capture:!!o,t=yn(t),i&&i[Tn]?(i=i.i,(e=String(e).toString())in i.g&&-1<(t=Qr(d=i.g[e],t,o,u))&&(Xt(d[t]),Array.prototype.splice.call(d,t,1),0==d.length&&(delete i.g[e],i.h--))):i&&(i=yr(i))&&(e=i.g[e.toString()],i=-1,e&&(i=Qr(e,t,o,u)),(t=-1<i?e[i]:null)&&Vt(t))}function Vt(i){if("number"!=typeof i&&i&&!i.ca){var e=i.src;if(e&&e[Tn])vr(e.i,i);else{var t=i.type,o=i.proxy;e.removeEventListener?e.removeEventListener(t,o,i.capture):e.detachEvent?e.detachEvent(mn(t),o):e.addListener&&e.removeListener&&e.removeListener(o),(t=yr(e))?(vr(t,i),0==t.h&&(t.src=null,e[$r]=null)):Xt(i)}}}function mn(i){return i in Dr?Dr[i]:Dr[i]="on"+i}function dn(i,e){if(i.ca)i=!0;else{e=new Rt(e,this);var t=i.listener,o=i.ia||i.src;i.fa&&Vt(i),i=t.call(o,e)}return i}function yr(i){return(i=i[$r])instanceof cr?i:null}var Hr="__closure_events_fn_"+(1e9*Math.random()>>>0);function yn(i){return"function"==typeof i?i:(i[Hr]||(i[Hr]=function(e){return i.handleEvent(e)}),i[Hr])}function An(){Mn.call(this),this.i=new cr(this),this.P=this,this.I=null}function Kn(i,e){var t,o=i.I;if(o)for(t=[];o;o=o.I)t.push(o);if(i=i.P,o=e.type||e,"string"==typeof e)e=new yt(e,i);else if(e instanceof yt)e.target=e.target||i;else{var u=e;xr(e=new yt(o,i),u)}if(u=!0,t)for(var d=t.length-1;0<=d;d--){var g=e.g=t[d];u=hs(g,o,!0,e)&&u}if(u=hs(g=e.g=i,o,!0,e)&&u,u=hs(g,o,!1,e)&&u,t)for(d=0;d<t.length;d++)u=hs(g=e.g=t[d],o,!1,e)&&u}function hs(i,e,t,o){if(!(e=i.i.g[String(e)]))return!0;e=e.concat();for(var u=!0,d=0;d<e.length;++d){var g=e[d];if(g&&!g.ca&&g.capture==t){var D=g.listener,L=g.ia||g.src;g.fa&&vr(i.i,g),u=!1!==D.call(L,o)&&u}}return u&&!o.defaultPrevented}Ft(An,Mn),An.prototype[Tn]=!0,An.prototype.removeEventListener=function(i,e,t,o){at(this,i,e,t,o)},An.prototype.M=function(){if(An.Z.M.call(this),this.i){var e,i=this.i;for(e in i.g){for(var t=i.g[e],o=0;o<t.length;o++)Xt(t[o]);delete i.g[e],i.h--}}this.I=null},An.prototype.N=function(i,e,t,o){return this.i.add(String(i),e,!1,t,o)},An.prototype.O=function(i,e,t,o){return this.i.add(String(i),e,!0,t,o)};var Fi=de.JSON.stringify;function Fr(){var i=Si;let e=null;return i.g&&(e=i.g,i.g=i.g.next,i.g||(i.h=null),e.next=null),e}var Qn,ss=new class{constructor(i,e){this.i=i,this.j=e,this.h=0,this.g=null}get(){let i;return 0<this.h?(this.h--,i=this.g,this.g=i.next,i.next=null):i=this.i(),i}}(()=>new Jr,i=>i.reset());class Jr{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function Yn(i){de.setTimeout(()=>{throw i},0)}function Ii(i,e){Qn||function lo(){var i=de.Promise.resolve(void 0);Qn=function(){i.then(Ms)}}(),fs||(Qn(),fs=!0),Si.add(i,e)}var fs=!1,Si=new class ks{constructor(){this.h=this.g=null}add(e,t){const o=ss.get();o.set(e,t),this.h?this.h.next=o:this.g=o,this.h=o}};function Ms(){for(var i;i=Fr();){try{i.h.call(i.g)}catch(t){Yn(t)}var e=ss;e.j(i),100>e.h&&(e.h++,i.next=e.g,e.g=i)}fs=!1}function Ai(i,e){An.call(this),this.h=i||1,this.g=e||de,this.j=qt(this.kb,this),this.l=Date.now()}function Li(i){i.da=!1,i.S&&(i.g.clearTimeout(i.S),i.S=null)}function Yi(i,e,t){if("function"==typeof i)t&&(i=qt(i,t));else{if(!i||"function"!=typeof i.handleEvent)throw Error("Invalid listener argument");i=qt(i.handleEvent,i)}return 2147483647<Number(e)?-1:de.setTimeout(i,e||0)}function sr(i){i.g=Yi(()=>{i.g=null,i.i&&(i.i=!1,sr(i))},i.j);const e=i.h;i.h=null,i.m.apply(null,e)}Ft(Ai,An),(ne=Ai.prototype).da=!1,ne.S=null,ne.kb=function(){if(this.da){var i=Date.now()-this.l;0<i&&i<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-i):(this.S&&(this.g.clearTimeout(this.S),this.S=null),Kn(this,"tick"),this.da&&(Li(this),this.start()))}},ne.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},ne.M=function(){Ai.Z.M.call(this),Li(this),delete this.g};class Vi extends Mn{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:sr(this)}M(){super.M(),this.g&&(de.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Cr(i){Mn.call(this),this.h=i,this.g={}}Ft(Cr,Mn);var ci=[];function Fs(i,e,t,o){Array.isArray(t)||(t&&(ci[0]=t.toString()),t=ci);for(var u=0;u<t.length;u++){var d=_e(e,t[u],o||i.handleEvent,!1,i.h||i);if(!d)break;i.g[d.key]=d}}function Rs(i){Hn(i.g,function(e,t){this.g.hasOwnProperty(t)&&Vt(e)},i),i.g={}}function Xr(){this.g=!0}function Di(i,e,t,o){i.info(function(){return"XMLHTTP TEXT ("+e+"): "+function Po(i,e){if(!i.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(i=0;i<t.length;i++)if(Array.isArray(t[i])){var o=t[i];if(!(2>o.length)){var u=o[1];if(Array.isArray(u)&&!(1>u.length)){var d=u[0];if("noop"!=d&&"stop"!=d&&"close"!=d)for(var g=1;g<u.length;g++)u[g]=""}}}return Fi(t)}catch{return e}}(i,t)+(o?" "+o:"")})}Cr.prototype.M=function(){Cr.Z.M.call(this),Rs(this)},Cr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Xr.prototype.Aa=function(){this.g=!1},Xr.prototype.info=function(){};var Os={},ri=null;function xe(){return ri=ri||new An}function Ae(i){yt.call(this,Os.Ma,i)}function Ue(i){const e=xe();Kn(e,new Ae(e,i))}function ct(i,e){yt.call(this,Os.STAT_EVENT,i),this.stat=e}function Dt(i){const e=xe();Kn(e,new ct(e,i))}function jt(i,e){yt.call(this,Os.Na,i),this.size=e}function cn(i,e){if("function"!=typeof i)throw Error("Fn must not be null and must be a function");return de.setTimeout(function(){i()},e)}Os.Ma="serverreachability",Ft(Ae,yt),Os.STAT_EVENT="statevent",Ft(ct,yt),Os.Na="timingevent",Ft(jt,yt);var ei={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},ar={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function Oi(){}function gs(){}Oi.prototype.h=null;var ms,gi={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function Ui(){yt.call(this,"d")}function Bi(){yt.call(this,"c")}function ho(){}function Ni(i,e,t,o){this.l=i,this.j=e,this.m=t,this.X=o||1,this.V=new Cr(this),this.P=xi,this.W=new Ai(i=Lt?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new os}function os(){this.i=null,this.g="",this.h=!1}Ft(Ui,yt),Ft(Bi,yt),Ft(ho,Oi),ho.prototype.g=function(){return new XMLHttpRequest},ho.prototype.i=function(){return{}},ms=new ho;var xi=45e3,Qi={},ys={};function Ji(i,e,t){i.K=1,i.v=eo(Rr(e)),i.s=t,i.U=!0,fo(i,null)}function fo(i,e){i.F=Date.now(),di(i),i.A=Rr(i.v);var t=i.A,o=i.X;Array.isArray(o)||(o=[String(o)]),Or(t.h,"t",o),i.C=0,t=i.l.H,i.h=new os,i.g=fi(i.l,t?e:null,!i.s),0<i.O&&(i.L=new Vi(qt(i.Ia,i,i.g),i.O)),Fs(i.V,i.g,"readystatechange",i.gb),e=i.H?kr(i.H):{},i.s?(i.u||(i.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",i.g.ea(i.A,i.u,i.s,e)):(i.u="GET",i.g.ea(i.A,i.u,null,e)),Ue(1),function wr(i,e,t,o,u,d){i.info(function(){if(i.g)if(d)for(var g="",D=d.split("&"),L=0;L<D.length;L++){var H=D[L].split("=");if(1<H.length){var Q=H[0];H=H[1];var ve=Q.split("_");g=2<=ve.length&&"type"==ve[1]?g+(Q+"=")+H+"&":g+(Q+"=redacted&")}}else g=null;else g=d;return"XMLHTTP REQ ("+o+") [attempt "+u+"]: "+e+"\n"+t+"\n"+g})}(i.j,i.u,i.A,i.m,i.X,i.s)}function ko(i){return!!i.g&&"GET"==i.u&&2!=i.K&&i.l.Ba}function Ls(i,e,t){let u,o=!0;for(;!i.I&&i.C<t.length;){if(u=_s(i,t),u==ys){4==e&&(i.o=4,Dt(14),o=!1),Di(i.j,i.m,null,"[Incomplete Response]");break}if(u==Qi){i.o=4,Dt(15),Di(i.j,i.m,t,"[Invalid Chunk]"),o=!1;break}Di(i.j,i.m,u,null),Xs(i,u)}ko(i)&&u!=ys&&u!=Qi&&(i.h.g="",i.C=0),4!=e||0!=t.length||i.h.h||(i.o=1,Dt(16),o=!1),i.i=i.i&&o,o?0<t.length&&!i.aa&&(i.aa=!0,(e=i.l).g==i&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+t.length),ke(e),e.L=!0,Dt(11))):(Di(i.j,i.m,t,"[Invalid Chunked Response]"),br(i),po(i))}function _s(i,e){var t=i.C,o=e.indexOf("\n",t);return-1==o?ys:(t=Number(e.substring(t,o)),isNaN(t)?Qi:(o+=1)+t>e.length?ys:(e=e.substr(o,t),i.C=o+t,e))}function di(i){i.Y=Date.now()+i.P,_r(i,i.P)}function _r(i,e){if(null!=i.B)throw Error("WatchDog timer not null");i.B=cn(qt(i.eb,i),e)}function Ci(i){i.B&&(de.clearTimeout(i.B),i.B=null)}function po(i){0==i.l.G||i.I||Zt(i.l,i)}function br(i){Ci(i);var e=i.L;e&&"function"==typeof e.na&&e.na(),i.L=null,Li(i.W),Rs(i.V),i.g&&(e=i.g,i.g=null,e.abort(),e.na())}function Xs(i,e){try{var t=i.l;if(0!=t.G&&(t.g==i||F(t.i,i)))if(t.I=i.N,!i.J&&F(t.i,i)&&3==t.G){try{var o=t.Ca.g.parse(e)}catch{o=null}if(Array.isArray(o)&&3==o.length){var u=o;if(0==u[0]){e:if(!t.u){if(t.g){if(!(t.g.F+3e3<i.F))break e;sn(t),pr(t)}Ie(t),Dt(18)}}else t.ta=u[1],0<t.ta-t.U&&37500>u[2]&&t.N&&0==t.A&&!t.v&&(t.v=cn(qt(t.ab,t),6e3));if(1>=Qo(t.i)&&t.ka){try{t.ka()}catch{}t.ka=void 0}}else Ln(t,11)}else if((i.J||t.g==i)&&sn(t),!Jt(e))for(u=t.Ca.g.parse(e),e=0;e<u.length;e++){let H=u[e];if(t.U=H[0],H=H[1],2==t.G)if("c"==H[0]){t.J=H[1],t.la=H[2];const Q=H[3];null!=Q&&(t.ma=Q,t.h.info("VER="+t.ma));const ve=H[4];null!=ve&&(t.za=ve,t.h.info("SVER="+t.za));const Ge=H[5];null!=Ge&&"number"==typeof Ge&&0<Ge&&(t.K=o=1.5*Ge,t.h.info("backChannelRequestTimeoutMs_="+o)),o=t;const lt=i.g;if(lt){const gt=lt.g?lt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(gt){var d=o.i;!d.g&&($n(gt,"spdy")||$n(gt,"quic")||$n(gt,"h2"))&&(d.j=d.l,d.g=new Set,d.h&&(N(d,d.h),d.h=null))}if(o.D){const Kt=lt.g?lt.g.getResponseHeader("X-HTTP-Session-Id"):null;Kt&&(o.sa=Kt,Jn(o.F,o.D,Kt))}}t.G=3,t.j&&t.j.xa(),t.$&&(t.O=Date.now()-i.F,t.h.info("Handshake RTT: "+t.O+"ms"));var g=i;if((o=t).oa=Tr(o,o.H?o.la:null,o.W),g.J){A(o.i,g);var D=g,L=o.K;L&&D.setTimeout(L),D.B&&(Ci(D),di(D)),o.g=g}else J(o);0<t.l.length&&Es(t)}else"stop"!=H[0]&&"close"!=H[0]||Ln(t,7);else 3==t.G&&("stop"==H[0]||"close"==H[0]?"stop"==H[0]?Ln(t,7):si(t):"noop"!=H[0]&&t.j&&t.j.wa(H),t.A=0)}Ue(4)}catch{}}function Lr(i,e){if(i.forEach&&"function"==typeof i.forEach)i.forEach(e,void 0);else if(dt(i)||"string"==typeof i)Er(i,e,void 0);else{if(i.T&&"function"==typeof i.T)var t=i.T();else if(i.R&&"function"==typeof i.R)t=void 0;else if(dt(i)||"string"==typeof i){t=[];for(var o=i.length,u=0;u<o;u++)t.push(u)}else for(u in t=[],o=0,i)t[o++]=u;o=function la(i){if(i.R&&"function"==typeof i.R)return i.R();if("string"==typeof i)return i.split("");if(dt(i)){for(var e=[],t=i.length,o=0;o<t;o++)e.push(i[o]);return e}for(o in e=[],t=0,i)e[t++]=i[o];return e}(i),u=o.length;for(var d=0;d<u;d++)e.call(void 0,o[d],t&&t[d],i)}}function Gr(i,e){this.h={},this.g=[],this.i=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var o=0;o<t;o+=2)this.set(arguments[o],arguments[o+1])}else if(i)if(i instanceof Gr)for(t=i.T(),o=0;o<t.length;o++)this.set(t[o],i.get(t[o]));else for(o in i)this.set(o,i[o])}function Fo(i){if(i.i!=i.g.length){for(var e=0,t=0;e<i.g.length;){var o=i.g[e];hi(i.h,o)&&(i.g[t++]=o),e++}i.g.length=t}if(i.i!=i.g.length){var u={};for(t=e=0;e<i.g.length;)hi(u,o=i.g[e])||(i.g[t++]=o,u[o]=1),e++;i.g.length=t}}function hi(i,e){return Object.prototype.hasOwnProperty.call(i,e)}(ne=Ni.prototype).setTimeout=function(i){this.P=i},ne.gb=function(i){i=i.target;const e=this.L;e&&3==rt(i)?e.l():this.Ia(i)},ne.Ia=function(i){try{if(i==this.g)e:{const Q=rt(this.g);var e=this.g.Da();const ve=this.g.ba();if(!(3>Q)&&(3!=Q||Lt||this.g&&(this.h.h||this.g.ga()||Yt(this.g)))){this.I||4!=Q||7==e||Ue(8==e||0>=ve?3:2),Ci(this);var t=this.g.ba();this.N=t;t:if(ko(this)){var o=Yt(this.g);i="";var u=o.length,d=4==rt(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){br(this),po(this);var g="";break t}this.h.i=new de.TextDecoder}for(e=0;e<u;e++)this.h.h=!0,i+=this.h.i.decode(o[e],{stream:d&&e==u-1});o.splice(0,u),this.h.g+=i,this.C=0,g=this.h.g}else g=this.g.ga();if(this.i=200==t,function co(i,e,t,o,u,d,g){i.info(function(){return"XMLHTTP RESP ("+o+") [ attempt "+u+"]: "+e+"\n"+t+"\n"+d+" "+g})}(this.j,this.u,this.A,this.m,this.X,Q,t),this.i){if(this.$&&!this.J){t:{if(this.g){var D,L=this.g;if((D=L.g?L.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Jt(D)){var H=D;break t}}H=null}if(!(t=H)){this.i=!1,this.o=3,Dt(12),br(this),po(this);break e}Di(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Xs(this,t)}this.U?(Ls(this,Q,g),Lt&&this.i&&3==Q&&(Fs(this.V,this.W,"tick",this.fb),this.W.start())):(Di(this.j,this.m,g,null),Xs(this,g)),4==Q&&br(this),this.i&&!this.I&&(4==Q?Zt(this.l,this):(this.i=!1,di(this)))}else 400==t&&0<g.indexOf("Unknown SID")?(this.o=3,Dt(12)):(this.o=0,Dt(13)),br(this),po(this)}}}catch{}},ne.fb=function(){if(this.g){var i=rt(this.g),e=this.g.ga();this.C<e.length&&(Ci(this),Ls(this,i,e),this.i&&4!=i&&di(this))}},ne.cancel=function(){this.I=!0,br(this)},ne.eb=function(){this.B=null;const i=Date.now();0<=i-this.Y?(function No(i,e){i.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(Ue(3),Dt(17)),br(this),this.o=2,po(this)):_r(this,this.Y-i)},(ne=Gr.prototype).R=function(){Fo(this);for(var i=[],e=0;e<this.g.length;e++)i.push(this.h[this.g[e]]);return i},ne.T=function(){return Fo(this),this.g.concat()},ne.get=function(i,e){return hi(this.h,i)?this.h[i]:e},ne.set=function(i,e){hi(this.h,i)||(this.i++,this.g.push(i)),this.h[i]=e},ne.forEach=function(i,e){for(var t=this.T(),o=0;o<t.length;o++){var u=t[o],d=this.get(u);i.call(e,d,u,this)}};var ii=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Pi(i,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,i instanceof Pi){this.g=void 0!==e?e:i.g,qn(this,i.j),this.s=i.s,vs(this,i.i),as(this,i.m),this.l=i.l,e=i.h;var t=new ht;t.i=e.i,e.g&&(t.g=new Gr(e.g),t.h=e.h),Lo(this,t),this.o=i.o}else i&&(t=String(i).match(ii))?(this.g=!!e,qn(this,t[1]||"",!0),this.s=Vs(t[2]||""),vs(this,t[3]||"",!0),as(this,t[4]),this.l=Vs(t[5]||"",!0),Lo(this,t[6]||"",!0),this.o=Vs(t[7]||"")):(this.g=!!e,this.h=new ht(null,this.g))}function Rr(i){return new Pi(i)}function qn(i,e,t){i.j=t?Vs(e,!0):e,i.j&&(i.j=i.j.replace(/:$/,""))}function vs(i,e,t){i.i=t?Vs(e,!0):e}function as(i,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);i.m=e}else i.m=null}function Lo(i,e,t){e instanceof ht?(i.h=e,function Ns(i,e){e&&!i.j&&(Rn(i),i.i=null,i.g.forEach(function(t,o){var u=o.toLowerCase();o!=u&&(Us(this,o),Or(this,u,t))},i)),i.j=e}(i.h,i.g)):(t||(e=go(e,mo)),i.h=new ht(e,i.g))}function Jn(i,e,t){i.h.set(e,t)}function eo(i){return Jn(i,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),i}function Vs(i,e){return i?e?decodeURI(i.replace(/%25/g,"%2525")):decodeURIComponent(i):""}function go(i,e,t){return"string"==typeof i?(i=encodeURI(i).replace(e,Vo),t&&(i=i.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),i):null}function Vo(i){return"%"+((i=i.charCodeAt(0))>>4&15).toString(16)+(15&i).toString(16)}Pi.prototype.toString=function(){var i=[],e=this.j;e&&i.push(go(e,zs,!0),":");var t=this.i;return(t||"file"==e)&&(i.push("//"),(e=this.s)&&i.push(go(e,zs,!0),"@"),i.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&i.push(":",String(t))),(t=this.l)&&(this.i&&"/"!=t.charAt(0)&&i.push("/"),i.push(go(t,"/"==t.charAt(0)?us:ji,!0))),(t=this.h.toString())&&i.push("?",t),(t=this.o)&&i.push("#",go(t,Uo)),i.join("")};var zs=/[#\/\?@]/g,ji=/[#\?:]/g,us=/[#\?]/g,mo=/[#\?@]/g,Uo=/#/g;function ht(i,e){this.h=this.g=null,this.i=i||null,this.j=!!e}function Rn(i){i.g||(i.g=new Gr,i.h=0,i.i&&function Xi(i,e){if(i){i=i.split("&");for(var t=0;t<i.length;t++){var o=i[t].indexOf("="),u=null;if(0<=o){var d=i[t].substring(0,o);u=i[t].substring(o+1)}else d=i[t];e(d,u?decodeURIComponent(u.replace(/\+/g," ")):"")}}}(i.i,function(e,t){i.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function Us(i,e){Rn(i),e=$i(i,e),hi(i.g.h,e)&&(i.i=null,i.h-=i.g.get(e).length,hi((i=i.g).h,e)&&(delete i.h[e],i.i--,i.g.length>2*i.i&&Fo(i)))}function Bo(i,e){return Rn(i),e=$i(i,e),hi(i.g.h,e)}function Or(i,e,t){Us(i,e),0<t.length&&(i.i=null,i.g.set($i(i,e),Ar(t)),i.h+=t.length)}function $i(i,e){return e=String(e),i.j&&(e=e.toLowerCase()),e}function jo(i){this.l=i||to,i=de.PerformanceNavigationTiming?0<(i=de.performance.getEntriesByType("navigation")).length&&("hq"==i[0].nextHopProtocol||"h2"==i[0].nextHopProtocol):!!(de.g&&de.g.Ea&&de.g.Ea()&&de.g.Ea().Zb),this.j=i?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(ne=ht.prototype).add=function(i,e){Rn(this),this.i=null,i=$i(this,i);var t=this.g.get(i);return t||this.g.set(i,t=[]),t.push(e),this.h+=1,this},ne.forEach=function(i,e){Rn(this),this.g.forEach(function(t,o){Er(t,function(u){i.call(e,u,o,this)},this)},this)},ne.T=function(){Rn(this);for(var i=this.g.R(),e=this.g.T(),t=[],o=0;o<e.length;o++)for(var u=i[o],d=0;d<u.length;d++)t.push(e[o]);return t},ne.R=function(i){Rn(this);var e=[];if("string"==typeof i)Bo(this,i)&&(e=ur(e,this.g.get($i(this,i))));else{i=this.g.R();for(var t=0;t<i.length;t++)e=ur(e,i[t])}return e},ne.set=function(i,e){return Rn(this),this.i=null,Bo(this,i=$i(this,i))&&(this.h-=this.g.get(i).length),this.g.set(i,[e]),this.h+=1,this},ne.get=function(i,e){return i&&0<(i=this.R(i)).length?String(i[0]):e},ne.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var i=[],e=this.g.T(),t=0;t<e.length;t++){var o=e[t],u=encodeURIComponent(String(o));o=this.R(o);for(var d=0;d<o.length;d++){var g=u;""!==o[d]&&(g+="="+encodeURIComponent(String(o[d]))),i.push(g)}}return this.i=i.join("&")};var to=10;function yo(i){return!!i.h||!!i.g&&i.g.size>=i.j}function Qo(i){return i.h?1:i.g?i.g.size:0}function F(i,e){return i.h?i.h==e:!!i.g&&i.g.has(e)}function N(i,e){i.g?i.g.add(e):i.h=e}function A(i,e){i.h&&i.h==e?i.h=null:i.g&&i.g.has(e)&&i.g.delete(e)}function K(i){if(null!=i.h)return i.i.concat(i.h.D);if(null!=i.g&&0!==i.g.size){let e=i.i;for(const t of i.g.values())e=e.concat(t.D);return e}return Ar(i.i)}function et(){}function nn(){this.g=new et}function dr(i,e,t){const o=t||"";try{Lr(i,function(u,d){let g=u;wt(u)&&(g=Fi(u)),e.push(o+d+"="+encodeURIComponent(g))})}catch(u){throw e.push(o+"type="+encodeURIComponent("_badmap")),u}}function Mi(i,e,t,o,u){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,u(o)}catch{}}function Hi(i){this.l=i.$b||null,this.j=i.ib||!1}function Ws(i,e){An.call(this),this.D=i,this.u=e,this.m=void 0,this.readyState=no,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}jo.prototype.cancel=function(){if(this.i=K(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const i of this.g.values())i.cancel();this.g.clear()}},et.prototype.stringify=function(i){return de.JSON.stringify(i,void 0)},et.prototype.parse=function(i){return de.JSON.parse(i,void 0)},Ft(Hi,Oi),Hi.prototype.g=function(){return new Ws(this.l,this.j)},Hi.prototype.i=function(i){return function(){return i}}({}),Ft(Ws,An);var no=0;function _o(i){i.j.read().then(i.Sa.bind(i)).catch(i.ha.bind(i))}function Co(i){i.readyState=4,i.l=null,i.j=null,i.A=null,Ps(i)}function Ps(i){i.onreadystatechange&&i.onreadystatechange.call(i)}(ne=Ws.prototype).open=function(i,e){if(this.readyState!=no)throw this.abort(),Error("Error reopening a connection");this.C=i,this.B=e,this.readyState=1,Ps(this)},ne.send=function(i){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};i&&(e.body=i),(this.D||de).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},ne.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Co(this)),this.readyState=no},ne.Va=function(i){if(this.g&&(this.l=i,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=i.headers,this.readyState=2,Ps(this)),this.g&&(this.readyState=3,Ps(this),this.g)))if("arraybuffer"===this.responseType)i.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(typeof de.ReadableStream<"u"&&"body"in i){if(this.j=i.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;_o(this)}else i.text().then(this.Ua.bind(this),this.ha.bind(this))},ne.Sa=function(i){if(this.g){if(this.u&&i.value)this.response.push(i.value);else if(!this.u){var e=i.value?i.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!i.done}))&&(this.response=this.responseText+=e)}i.done?Co(this):Ps(this),3==this.readyState&&_o(this)}},ne.Ua=function(i){this.g&&(this.response=this.responseText=i,Co(this))},ne.Ta=function(i){this.g&&(this.response=i,Co(this))},ne.ha=function(){this.g&&Co(this)},ne.setRequestHeader=function(i,e){this.v.append(i,e)},ne.getResponseHeader=function(i){return this.h&&this.h.get(i.toLowerCase())||""},ne.getAllResponseHeaders=function(){if(!this.h)return"";const i=[],e=this.h.entries();for(var t=e.next();!t.done;)i.push((t=t.value)[0]+": "+t[1]),t=e.next();return i.join("\r\n")},Object.defineProperty(Ws.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(i){this.m=i?"include":"same-origin"}});var ca=de.JSON.parse;function Wr(i){An.call(this),this.headers=new Gr,this.u=i||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=ws,this.K=this.L=!1}Ft(Wr,An);var ws="",da=/^https?$/i,Jo=["POST","PUT"];function S(i){return"content-type"==i.toLowerCase()}function $(i,e){i.h=!1,i.g&&(i.l=!0,i.g.abort(),i.l=!1),i.j=e,i.m=5,M(i),fe(i)}function M(i){i.D||(i.D=!0,Kn(i,"complete"),Kn(i,"error"))}function q(i){if(i.h&&typeof De<"u"&&(!i.C[1]||4!=rt(i)||2!=i.ba()))if(i.v&&4==rt(i))Yi(i.Fa,0,i);else if(Kn(i,"readystatechange"),4==rt(i)){i.h=!1;try{const D=i.ba();e:switch(D){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var o;if(o=0===D){var u=String(i.H).match(ii)[1]||null;if(!u&&de.self&&de.self.location){var d=de.self.location.protocol;u=d.substr(0,d.length-1)}o=!da.test(u?u.toLowerCase():"")}t=o}if(t)Kn(i,"complete"),Kn(i,"success");else{i.m=6;try{var g=2<rt(i)?i.g.statusText:""}catch{g=""}i.j=g+" ["+i.ba()+"]",M(i)}}finally{fe(i)}}}function fe(i,e){if(i.g){ze(i);const t=i.g,o=i.C[0]?Ne:null;i.g=null,i.C=null,e||Kn(i,"ready");try{t.onreadystatechange=o}catch{}}}function ze(i){i.g&&i.K&&(i.g.ontimeout=null),i.A&&(de.clearTimeout(i.A),i.A=null)}function rt(i){return i.g?i.g.readyState:0}function Yt(i){try{if(!i.g)return null;if("response"in i.g)return i.g.response;switch(i.J){case ws:case"text":return i.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in i.g)return i.g.mozResponseArrayBuffer}return null}catch{return null}}function hr(i,e,t){e:{for(o in t){var o=!1;break e}o=!0}o||(t=function Zn(i){let e="";return Hn(i,function(t,o){e+=o,e+=":",e+=t,e+="\r\n"}),e}(t),"string"==typeof i?null!=t&&encodeURIComponent(String(t)):Jn(i,e,t))}function tr(i,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[i]||e}function Gn(i){this.za=0,this.l=[],this.h=new Xr,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=tr("failFast",!1,i),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=tr("baseRetryDelayMs",5e3,i),this.$a=tr("retryDelaySeedMs",1e4,i),this.Ya=tr("forwardChannelMaxRetries",2,i),this.ra=tr("forwardChannelRequestTimeoutMs",2e4,i),this.qa=i&&i.xmlHttpFactory||void 0,this.Ba=i&&i.Yb||!1,this.K=void 0,this.H=i&&i.supportsCrossDomainXhr||!1,this.J="",this.i=new jo(i&&i.concurrentRequestLimit),this.Ca=new nn,this.ja=i&&i.fastHandshake||!1,this.Ra=i&&i.Wb||!1,i&&i.Aa&&this.h.Aa(),i&&i.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&i&&i.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!i||!1!==i.Xb}function si(i){if(Vr(i),3==i.G){var e=i.V++,t=Rr(i.F);Jn(t,"SID",i.J),Jn(t,"RID",e),Jn(t,"TYPE","terminate"),O(i,t),(e=new Ni(i,i.h,e,void 0)).K=2,e.v=eo(Rr(t)),t=!1,de.navigator&&de.navigator.sendBeacon&&(t=de.navigator.sendBeacon(e.v.toString(),"")),!t&&de.Image&&((new Image).src=e.v,t=!0),t||(e.g=fi(e.l,null),e.g.ea(e.v)),e.F=Date.now(),di(e)}qr(i)}function pr(i){i.g&&(ke(i),i.g.cancel(),i.g=null)}function Vr(i){pr(i),i.u&&(de.clearTimeout(i.u),i.u=null),sn(i),i.i.cancel(),i.m&&("number"==typeof i.m&&de.clearTimeout(i.m),i.m=null)}function Bs(i,e){i.l.push(new class{constructor(i,e){this.h=i,this.g=e}}(i.Za++,e)),3==i.G&&Es(i)}function Es(i){yo(i.i)||i.m||(i.m=!0,Ii(i.Ha,i),i.C=0)}function R(i,e){var t;t=e?e.m:i.V++;const o=Rr(i.F);Jn(o,"SID",i.J),Jn(o,"RID",t),Jn(o,"AID",i.U),O(i,o),i.o&&i.s&&hr(o,i.o,i.s),t=new Ni(i,i.h,t,i.C+1),null===i.o&&(t.H=i.s),e&&(i.l=e.D.concat(i.l)),e=j(i,t,1e3),t.setTimeout(Math.round(.5*i.ra)+Math.round(.5*i.ra*Math.random())),N(i.i,t),Ji(t,o,e)}function O(i,e){i.j&&Lr({},function(t,o){Jn(e,o,t)})}function j(i,e,t){t=Math.min(i.l.length,t);var o=i.j?qt(i.j.Oa,i.j,i):null;e:{var u=i.l;let d=-1;for(;;){const g=["count="+t];-1==d?0<t?(d=u[0].h,g.push("ofs="+d)):d=0:g.push("ofs="+d);let D=!0;for(let L=0;L<t;L++){let H=u[L].h;const Q=u[L].g;if(H-=d,0>H)d=Math.max(0,u[L].h-100),D=!1;else try{dr(Q,g,"req"+H+"_")}catch{o&&o(Q)}}if(D){o=g.join("&");break e}}}return i=i.l.splice(0,t),e.D=i,o}function J(i){i.g||i.u||(i.Y=1,Ii(i.Ga,i),i.A=0)}function Ie(i){return!(i.g||i.u||3<=i.A||(i.Y++,i.u=cn(qt(i.Ga,i),Nn(i,i.A)),i.A++,0))}function ke(i){null!=i.B&&(de.clearTimeout(i.B),i.B=null)}function Ct(i){i.g=new Ni(i,i.h,"rpc",i.Y),null===i.o&&(i.g.H=i.s),i.g.O=0;var e=Rr(i.oa);Jn(e,"RID","rpc"),Jn(e,"SID",i.J),Jn(e,"CI",i.N?"0":"1"),Jn(e,"AID",i.U),O(i,e),Jn(e,"TYPE","xmlhttp"),i.o&&i.s&&hr(e,i.o,i.s),i.K&&i.g.setTimeout(i.K);var t=i.g;i=i.la,t.K=1,t.v=eo(Rr(e)),t.s=null,t.U=!0,fo(t,i)}function sn(i){null!=i.v&&(de.clearTimeout(i.v),i.v=null)}function Zt(i,e){var t=null;if(i.g==e){sn(i),ke(i),i.g=null;var o=2}else{if(!F(i.i,e))return;t=e.D,A(i.i,e),o=1}if(i.I=e.N,0!=i.G)if(e.i)if(1==o){t=e.s?e.s.length:0,e=Date.now()-e.F;var u=i.C;Kn(o=xe(),new jt(o,t,e,u)),Es(i)}else J(i);else if(3==(u=e.o)||0==u&&0<i.I||!(1==o&&function qs(i,e){return!(Qo(i.i)>=i.i.j-(i.m?1:0)||(i.m?(i.l=e.D.concat(i.l),0):1==i.G||2==i.G||i.C>=(i.Xa?0:i.Ya)||(i.m=cn(qt(i.Ha,i,e),Nn(i,i.C)),i.C++,0)))}(i,e)||2==o&&Ie(i)))switch(t&&0<t.length&&(e=i.i,e.i=e.i.concat(t)),u){case 1:Ln(i,5);break;case 4:Ln(i,10);break;case 3:Ln(i,6);break;default:Ln(i,2)}}function Nn(i,e){let t=i.Pa+Math.floor(Math.random()*i.$a);return i.j||(t*=2),t*e}function Ln(i,e){if(i.h.info("Error code "+e),2==e){var t=null;i.j&&(t=null);var o=qt(i.jb,i);t||(t=new Pi("//www.google.com/images/cleardot.gif"),de.location&&"http"==de.location.protocol||qn(t,"https"),eo(t)),function cs(i,e){const t=new Xr;if(de.Image){const o=new Image;o.onload=on(Mi,t,o,"TestLoadImage: loaded",!0,e),o.onerror=on(Mi,t,o,"TestLoadImage: error",!1,e),o.onabort=on(Mi,t,o,"TestLoadImage: abort",!1,e),o.ontimeout=on(Mi,t,o,"TestLoadImage: timeout",!1,e),de.setTimeout(function(){o.ontimeout&&o.ontimeout()},1e4),o.src=i}else e(!1)}(t.toString(),o)}else Dt(2);i.G=0,i.j&&i.j.va(e),qr(i),Vr(i)}function qr(i){i.G=0,i.I=-1,i.j&&((0!=K(i.i).length||0!=i.l.length)&&(i.i.i.length=0,Ar(i.l),i.l.length=0),i.j.ua())}function Tr(i,e,t){let o=function zr(i){return i instanceof Pi?Rr(i):new Pi(i,void 0)}(t);if(""!=o.i)e&&vs(o,e+"."+o.i),as(o,o.m);else{const u=de.location;o=function gn(i,e,t,o){var u=new Pi(null,void 0);return i&&qn(u,i),e&&vs(u,e),t&&as(u,t),o&&(u.l=o),u}(u.protocol,e?e+"."+u.hostname:u.hostname,+u.port,t)}return i.aa&&Hn(i.aa,function(u,d){Jn(o,d,u)}),t=i.sa,(e=i.D)&&t&&Jn(o,e,t),Jn(o,"VER",i.ma),O(i,o),o}function fi(i,e,t){if(e&&!i.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Wr(t&&i.Ba&&!i.qa?new Hi({ib:!0}):i.qa)).L=i.H,e}function oi(){}function es(){if(Be&&!(10<=Number(me)))throw Error("Environmental error: no available transport.")}function fr(i,e){An.call(this),this.g=new Gn(e),this.l=i,this.h=e&&e.messageUrlParams||null,i=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(i?i["X-Client-Protocol"]="webchannel":i={"X-Client-Protocol":"webchannel"}),this.g.s=i,i=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(i?i["X-WebChannel-Content-Type"]=e.messageContentType:i={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(i?i["X-WebChannel-Client-Profile"]=e.ya:i={"X-WebChannel-Client-Profile":e.ya}),this.g.P=i,(i=e&&e.httpHeadersOverwriteParam)&&!Jt(i)&&(this.g.o=i),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Jt(e)&&(this.g.D=e,null!==(i=this.h)&&e in i&&e in(i=this.h)&&delete i[e]),this.j=new ti(this)}function Ur(i){Ui.call(this);var e=i.__sm__;if(e){e:{for(const t in e){i=t;break e}i=void 0}(this.i=i)&&(i=this.i,e=null!==e&&i in e?e[i]:void 0),this.data=e}else this.data=i}function js(){Bi.call(this),this.status=1}function ti(i){this.g=i}(ne=Wr.prototype).ea=function(i,e,t,o){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+i);e=e?e.toUpperCase():"GET",this.H=i,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():ms.g(),this.C=function ps(i){return i.h||(i.h=i.i())}(this.u?this.u:ms),this.g.onreadystatechange=qt(this.Fa,this);try{this.F=!0,this.g.open(e,String(i),!0),this.F=!1}catch(d){return void $(this,d)}i=t||"";const u=new Gr(this.headers);o&&Lr(o,function(d,g){u.set(g,d)}),o=function mr(i){e:{var e=S;const t=i.length,o="string"==typeof i?i.split(""):i;for(let u=0;u<t;u++)if(u in o&&e.call(void 0,o[u],u,i)){e=u;break e}e=-1}return 0>e?null:"string"==typeof i?i.charAt(e):i[e]}(u.T()),t=de.FormData&&i instanceof de.FormData,!(0<=Ei(Jo,e))||o||t||u.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),u.forEach(function(d,g){this.g.setRequestHeader(g,d)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{ze(this),0<this.B&&((this.K=function Ea(i){return Be&&function X(){return function ye(i){var e=ge;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=i(9)}(function(){let i=0;const e=nr(String(rr)).split("."),t=nr("9").split("."),o=Math.max(e.length,t.length);for(let g=0;0==i&&g<o;g++){var u=e[g]||"",d=t[g]||"";do{if(u=/(\d*)(\D*)(.*)/.exec(u)||["","","",""],d=/(\d*)(\D*)(.*)/.exec(d)||["","","",""],0==u[0].length&&0==d[0].length)break;i=lr(0==u[1].length?0:parseInt(u[1],10),0==d[1].length?0:parseInt(d[1],10))||lr(0==u[2].length,0==d[2].length)||lr(u[2],d[2]),u=u[3],d=d[3]}while(0==i)}return 0<=i})}()&&"number"==typeof i.timeout&&void 0!==i.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=qt(this.pa,this)):this.A=Yi(this.pa,this.B,this)),this.v=!0,this.g.send(i),this.v=!1}catch(d){$(this,d)}},ne.pa=function(){typeof De<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Kn(this,"timeout"),this.abort(8))},ne.abort=function(i){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=i||7,Kn(this,"complete"),Kn(this,"abort"),fe(this))},ne.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),fe(this,!0)),Wr.Z.M.call(this)},ne.Fa=function(){this.s||(this.F||this.v||this.l?q(this):this.cb())},ne.cb=function(){q(this)},ne.ba=function(){try{return 2<rt(this)?this.g.status:-1}catch{return-1}},ne.ga=function(){try{return this.g?this.g.responseText:""}catch{return""}},ne.Qa=function(i){if(this.g){var e=this.g.responseText;return i&&0==e.indexOf(i)&&(e=e.substring(i.length)),ca(e)}},ne.Da=function(){return this.m},ne.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(ne=Gn.prototype).ma=8,ne.G=1,ne.hb=function(i){try{this.h.info("Origin Trials invoked: "+i)}catch{}},ne.Ha=function(i){if(this.m)if(this.m=null,1==this.G){if(!i){this.V=Math.floor(1e5*Math.random()),i=this.V++;const u=new Ni(this,this.h,i,void 0);let d=this.s;if(this.P&&(d?(d=kr(d),xr(d,this.P)):d=this.P),null===this.o&&(u.H=d),this.ja)e:{for(var e=0,t=0;t<this.l.length;t++){var o=this.l[t];if(void 0===(o="__data__"in o.g&&"string"==typeof(o=o.g.__data__)?o.length:void 0))break;if(4096<(e+=o)){e=t;break e}if(4096===e||t===this.l.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=j(this,u,e),Jn(t=Rr(this.F),"RID",i),Jn(t,"CVER",22),this.D&&Jn(t,"X-HTTP-Session-Id",this.D),O(this,t),this.o&&d&&hr(t,this.o,d),N(this.i,u),this.Ra&&Jn(t,"TYPE","init"),this.ja?(Jn(t,"$req",e),Jn(t,"SID","null"),u.$=!0,Ji(u,t,null)):Ji(u,t,e),this.G=2}}else 3==this.G&&(i?R(this,i):0==this.l.length||yo(this.i)||R(this))},ne.Ga=function(){if(this.u=null,Ct(this),this.$&&!(this.L||null==this.g||0>=this.O)){var i=2*this.O;this.h.info("BP detection timer enabled: "+i),this.B=cn(qt(this.bb,this),i)}},ne.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,Dt(10),pr(this),Ct(this))},ne.ab=function(){null!=this.v&&(this.v=null,pr(this),Ie(this),Dt(19))},ne.jb=function(i){i?(this.h.info("Successfully pinged google.com"),Dt(2)):(this.h.info("Failed to ping google.com"),Dt(1))},(ne=oi.prototype).xa=function(){},ne.wa=function(){},ne.va=function(){},ne.ua=function(){},ne.Oa=function(){},es.prototype.g=function(i,e){return new fr(i,e)},Ft(fr,An),fr.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var i=this.g,e=this.l,t=this.h||void 0;i.Wa&&(i.h.info("Origin Trials enabled."),Ii(qt(i.hb,i,e))),Dt(0),i.W=e,i.aa=t||{},i.N=i.X,i.F=Tr(i,null,i.W),Es(i)},fr.prototype.close=function(){si(this.g)},fr.prototype.u=function(i){if("string"==typeof i){var e={};e.__data__=i,Bs(this.g,e)}else this.v?((e={}).__data__=Fi(i),Bs(this.g,e)):Bs(this.g,i)},fr.prototype.M=function(){this.g.j=null,delete this.j,si(this.g),delete this.g,fr.Z.M.call(this)},Ft(Ur,Ui),Ft(js,Bi),Ft(ti,oi),ti.prototype.xa=function(){Kn(this.g,"a")},ti.prototype.wa=function(i){Kn(this.g,new Ur(i))},ti.prototype.va=function(i){Kn(this.g,new js(i))},ti.prototype.ua=function(){Kn(this.g,"b")},es.prototype.createWebChannel=es.prototype.g,fr.prototype.send=fr.prototype.u,fr.prototype.open=fr.prototype.m,fr.prototype.close=fr.prototype.close,ei.NO_ERROR=0,ei.TIMEOUT=8,ei.HTTP_ERROR=6,ar.COMPLETE="complete",gs.EventType=gi,gi.OPEN="a",gi.CLOSE="b",gi.ERROR="c",gi.MESSAGE="d",An.prototype.listen=An.prototype.N,Wr.prototype.listenOnce=Wr.prototype.O,Wr.prototype.getLastError=Wr.prototype.La,Wr.prototype.getLastErrorCode=Wr.prototype.Da,Wr.prototype.getStatus=Wr.prototype.ba,Wr.prototype.getResponseJson=Wr.prototype.Qa,Wr.prototype.getResponseText=Wr.prototype.ga,Wr.prototype.send=Wr.prototype.ea;var Zr=Le.createWebChannelTransport=function(){return new es},vo=Le.getStatEventTarget=function(){return xe()},Xo=Le.ErrorCode=ei,$o=Le.EventType=ar,bo=Le.Event=Os,ai=Le.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},ro=Le.FetchXmlHttpFactory=Hi,ha=Le.WebChannel=gs,Ma=Le.XhrIo=Wr;const Ra="@firebase/firestore";class Gi{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Gi.UNAUTHENTICATED=new Gi(null),Gi.GOOGLE_CREDENTIALS=new Gi("google-credentials-uid"),Gi.FIRST_PARTY=new Gi("first-party-uid"),Gi.MOCK_USER=new Gi("mock-user");let ea="9.9.4";const Zs=new _t.Yd("@firebase/firestore");function Oa(){return Zs.logLevel}function Tt(i,...e){if(Zs.logLevel<=_t.in.DEBUG){const t=e.map(za);Zs.debug(`Firestore (${ea}): ${i}`,...t)}}function Nr(i,...e){if(Zs.logLevel<=_t.in.ERROR){const t=e.map(za);Zs.error(`Firestore (${ea}): ${i}`,...t)}}function To(i,...e){if(Zs.logLevel<=_t.in.WARN){const t=e.map(za);Zs.warn(`Firestore (${ea}): ${i}`,...t)}}function za(i){if("string"==typeof i)return i;try{return JSON.stringify(i)}catch{return i}}function Qt(i="Unexpected state"){const e=`FIRESTORE (${ea}) INTERNAL ASSERTION FAILED: `+i;throw Nr(e),new Error(e)}function vn(i,e){i||Qt()}function Ht(i,e){return i}const Je={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Et extends nt.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class zi{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class Wi{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class nu{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Gi.UNAUTHENTICATED))}shutdown(){}}class Ia{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class Na{constructor(e){this.t=e,this.currentUser=Gi.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var o=this;let u=this.i;const d=H=>this.i!==u?(u=this.i,t(H)):Promise.resolve();let g=new zi;this.o=()=>{this.i++,this.currentUser=this.u(),g.resolve(),g=new zi,e.enqueueRetryable(()=>d(this.currentUser))};const D=()=>{const H=g;e.enqueueRetryable((0,he.Z)(function*(){yield H.promise,yield d(o.currentUser)}))},L=H=>{Tt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=H,this.auth.addAuthTokenListener(this.o),D()};this.t.onInit(H=>L(H)),setTimeout(()=>{if(!this.auth){const H=this.t.getImmediate({optional:!0});H?L(H):(Tt("FirebaseAuthCredentialsProvider","Auth not yet detected"),g.resolve(),g=new zi)}},0),D()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(o=>this.i!==e?(Tt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):o?(vn("string"==typeof o.accessToken),new Wi(o.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return vn(null===e||"string"==typeof e),new Gi(e)}}class Pa{constructor(e,t,o,u){this.h=e,this.l=t,this.m=o,this.g=u,this.type="FirstParty",this.user=Gi.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(vn(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class Ks{constructor(e,t,o,u){this.h=e,this.l=t,this.m=o,this.g=u}getToken(){return Promise.resolve(new Pa(this.h,this.l,this.m,this.g))}start(e,t){e.enqueueRetryable(()=>t(Gi.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Ho{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class pa{constructor(e){this.T=e,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(e,t){const o=d=>{null!=d.error&&Tt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${d.error.message}`);const g=d.token!==this.A;return this.A=d.token,Tt("FirebaseAppCheckTokenProvider",`Received ${g?"new":"existing"} token.`),g?t(d.token):Promise.resolve()};this.o=d=>{e.enqueueRetryable(()=>o(d))};const u=d=>{Tt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=d,this.appCheck.addTokenListener(this.o)};this.T.onInit(d=>u(d)),setTimeout(()=>{if(!this.appCheck){const d=this.T.getImmediate({optional:!0});d?u(d):Tt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(vn("string"==typeof t.token),this.A=t.token,new Ho(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function iu(i){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(i);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let o=0;o<i;o++)t[o]=Math.floor(256*Math.random());return t}class ga{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let o="";for(;o.length<20;){const u=iu(40);for(let d=0;d<u.length;++d)o.length<20&&u[d]<t&&(o+=e.charAt(u[d]%e.length))}return o}}function In(i,e){return i<e?-1:i>e?1:0}function wo(i,e,t){return i.length===e.length&&i.every((o,u)=>t(o,e[u]))}function Pr(i){return i+"\0"}class Ri{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Et(Je.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Et(Je.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Et(Je.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Et(Je.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Ri.fromMillis(Date.now())}static fromDate(e){return Ri.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),o=Math.floor(1e6*(e-1e3*t));return new Ri(t,o)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?In(this.nanoseconds,e.nanoseconds):In(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class On{constructor(e){this.timestamp=e}static fromTimestamp(e){return new On(e)}static min(){return new On(new Ri(0,0))}static max(){return new On(new Ri(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Go{constructor(e,t,o){void 0===t?t=0:t>e.length&&Qt(),void 0===o?o=e.length-t:o>e.length-t&&Qt(),this.segments=e,this.offset=t,this.len=o}get length(){return this.len}isEqual(e){return 0===Go.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Go?e.forEach(o=>{t.push(o)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,o=this.limit();t<o;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const o=Math.min(e.length,t.length);for(let u=0;u<o;u++){const d=e.get(u),g=t.get(u);if(d<g)return-1;if(d>g)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class gr extends Go{construct(e,t,o){return new gr(e,t,o)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const o of e){if(o.indexOf("//")>=0)throw new Et(Je.INVALID_ARGUMENT,`Invalid segment (${o}). Paths must not contain // in them.`);t.push(...o.split("/").filter(u=>u.length>0))}return new gr(t)}static emptyPath(){return new gr([])}}const Gc=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class mi extends Go{construct(e,t,o){return new mi(e,t,o)}static isValidIdentifier(e){return Gc.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),mi.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new mi(["__name__"])}static fromServerFormat(e){const t=[];let o="",u=0;const d=()=>{if(0===o.length)throw new Et(Je.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(o),o=""};let g=!1;for(;u<e.length;){const D=e[u];if("\\"===D){if(u+1===e.length)throw new Et(Je.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const L=e[u+1];if("\\"!==L&&"."!==L&&"`"!==L)throw new Et(Je.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);o+=L,u+=2}else"`"===D?(g=!g,u++):"."!==D||g?(o+=D,u++):(d(),u++)}if(d(),g)throw new Et(Je.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new mi(t)}static emptyPath(){return new mi([])}}class zt{constructor(e){this.path=e}static fromPath(e){return new zt(gr.fromString(e))}static fromName(e){return new zt(gr.fromString(e).popFirst(5))}static empty(){return new zt(gr.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===gr.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return gr.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new zt(new gr(e.slice()))}}class ta{constructor(e,t,o,u){this.indexId=e,this.collectionGroup=t,this.fields=o,this.indexState=u}}function qu(i){return i.fields.find(e=>2===e.kind)}function Wa(i){return i.fields.filter(e=>2!==e.kind)}ta.UNKNOWN_ID=-1;class Da{constructor(e,t){this.fieldPath=e,this.kind=t}}class su{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new su(0,yi.min())}}function ma(i,e){const t=i.toTimestamp().seconds,o=i.toTimestamp().nanoseconds+1,u=On.fromTimestamp(1e9===o?new Ri(t+1,0):new Ri(t,o));return new yi(u,zt.empty(),e)}function io(i){return new yi(i.readTime,i.key,-1)}class yi{constructor(e,t,o){this.readTime=e,this.documentKey=t,this.largestBatchId=o}static min(){return new yi(On.min(),zt.empty(),-1)}static max(){return new yi(On.max(),zt.empty(),-1)}}function ou(i,e){let t=i.readTime.compareTo(e.readTime);return 0!==t?t:(t=zt.comparator(i.documentKey,e.documentKey),0!==t?t:In(i.largestBatchId,e.largestBatchId))}const Ca="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class na{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function So(i){return Zu.apply(this,arguments)}function Zu(){return Zu=(0,he.Z)(function*(i){if(i.code!==Je.FAILED_PRECONDITION||i.message!==Ca)throw i;Tt("LocalStore","Unexpectedly lost primary lease")}),Zu.apply(this,arguments)}class Ze{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Qt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Ze((o,u)=>{this.nextCallback=d=>{this.wrapSuccess(e,d).next(o,u)},this.catchCallback=d=>{this.wrapFailure(t,d).next(o,u)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof Ze?t:Ze.resolve(t)}catch(t){return Ze.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):Ze.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):Ze.reject(t)}static resolve(e){return new Ze((t,o)=>{t(e)})}static reject(e){return new Ze((t,o)=>{o(e)})}static waitFor(e){return new Ze((t,o)=>{let u=0,d=0,g=!1;e.forEach(D=>{++u,D.next(()=>{++d,g&&d===u&&t()},L=>o(L))}),g=!0,d===u&&t()})}static or(e){let t=Ze.resolve(!1);for(const o of e)t=t.next(u=>u?Ze.resolve(u):o());return t}static forEach(e,t){const o=[];return e.forEach((u,d)=>{o.push(t.call(this,u,d))}),this.waitFor(o)}static mapArray(e,t){return new Ze((o,u)=>{const d=e.length,g=new Array(d);let D=0;for(let L=0;L<d;L++){const H=L;t(e[H]).next(Q=>{g[H]=Q,++D,D===d&&o(g)},Q=>u(Q))}})}static doWhile(e,t){return new Ze((o,u)=>{const d=()=>{!0===e()?t().next(()=>{d()},u):o()};d()})}}class ba{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.P=new zi,this.transaction.oncomplete=()=>{this.P.resolve()},this.transaction.onabort=()=>{t.error?this.P.reject(new Ds(e,t.error)):this.P.resolve()},this.transaction.onerror=o=>{const u=b(o.target.error);this.P.reject(new Ds(e,u))}}static open(e,t,o,u){try{return new ba(t,e.transaction(u,o))}catch(d){throw new Ds(t,d)}}get v(){return this.P.promise}abort(e){e&&this.P.reject(e),this.aborted||(Tt("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}V(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new v(t)}}class Is{constructor(e,t,o){this.name=e,this.version=t,this.S=o,12.2===Is.D((0,nt.z$)())&&Nr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Tt("SimpleDb","Removing database:",e),w(window.indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!(0,nt.hl)())return!1;if(Is.N())return!0;const e=(0,nt.z$)(),t=Is.D(e),o=0<t&&t<10,u=Is.k(e),d=0<u&&u<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||o||d)}static N(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.M)}static O(e,t){return e.store(t)}static D(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),o=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(o)}static k(e){const t=e.match(/Android ([\d.]+)/i),o=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(o)}F(e){var t=this;return(0,he.Z)(function*(){return t.db||(Tt("SimpleDb","Opening database:",t.name),t.db=yield new Promise((o,u)=>{const d=indexedDB.open(t.name,t.version);d.onsuccess=g=>{o(g.target.result)},d.onblocked=()=>{u(new Ds(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},d.onerror=g=>{const D=g.target.error;u("VersionError"===D.name?new Et(Je.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===D.name?new Et(Je.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+D):new Ds(e,D))},d.onupgradeneeded=g=>{Tt("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',g.oldVersion),t.S.$(g.target.result,d.transaction,g.oldVersion,t.version).next(()=>{Tt("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.B&&(t.db.onversionchange=o=>t.B(o)),t.db})()}L(e){this.B=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,o,u){var d=this;return(0,he.Z)(function*(){const g="readonly"===t;let D=0;for(;;){++D;try{d.db=yield d.F(e);const L=ba.open(d.db,e,g?"readonly":"readwrite",o),H=u(L).next(Q=>(L.V(),Q)).catch(Q=>(L.abort(Q),Ze.reject(Q))).toPromise();return H.catch(()=>{}),yield L.v,H}catch(L){const H=L,Q="FirebaseError"!==H.name&&D<3;if(Tt("SimpleDb","Transaction failed with error:",H.message,"Retrying:",Q),d.close(),!Q)return Promise.reject(H)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class qa{constructor(e){this.U=e,this.q=!1,this.K=null}get isDone(){return this.q}get G(){return this.K}set cursor(e){this.U=e}done(){this.q=!0}j(e){this.K=e}delete(){return w(this.U.delete())}}class Ds extends Et{constructor(e,t){super(Je.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Ao(i){return"IndexedDbTransactionError"===i.name}class v{constructor(e){this.store=e}put(e,t){let o;return void 0!==t?(Tt("SimpleDb","PUT",this.store.name,e,t),o=this.store.put(t,e)):(Tt("SimpleDb","PUT",this.store.name,"<auto-key>",e),o=this.store.put(e)),w(o)}add(e){return Tt("SimpleDb","ADD",this.store.name,e,e),w(this.store.add(e))}get(e){return w(this.store.get(e)).next(t=>(void 0===t&&(t=null),Tt("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Tt("SimpleDb","DELETE",this.store.name,e),w(this.store.delete(e))}count(){return Tt("SimpleDb","COUNT",this.store.name),w(this.store.count())}W(e,t){const o=this.options(e,t);if(o.index||"function"!=typeof this.store.getAll){const u=this.cursor(o),d=[];return this.H(u,(g,D)=>{d.push(D)}).next(()=>d)}{const u=this.store.getAll(o.range);return new Ze((d,g)=>{u.onerror=D=>{g(D.target.error)},u.onsuccess=D=>{d(D.target.result)}})}}J(e,t){const o=this.store.getAll(e,null===t?void 0:t);return new Ze((u,d)=>{o.onerror=g=>{d(g.target.error)},o.onsuccess=g=>{u(g.target.result)}})}Y(e,t){Tt("SimpleDb","DELETE ALL",this.store.name);const o=this.options(e,t);o.X=!1;const u=this.cursor(o);return this.H(u,(d,g,D)=>D.delete())}Z(e,t){let o;t?o=e:(o={},t=e);const u=this.cursor(o);return this.H(u,t)}tt(e){const t=this.cursor({});return new Ze((o,u)=>{t.onerror=d=>{const g=b(d.target.error);u(g)},t.onsuccess=d=>{const g=d.target.result;g?e(g.primaryKey,g.value).next(D=>{D?g.continue():o()}):o()}})}H(e,t){const o=[];return new Ze((u,d)=>{e.onerror=g=>{d(g.target.error)},e.onsuccess=g=>{const D=g.target.result;if(!D)return void u();const L=new qa(D),H=t(D.primaryKey,D.value,L);if(H instanceof Ze){const Q=H.catch(ve=>(L.done(),Ze.reject(ve)));o.push(Q)}L.isDone?u():null===L.G?D.continue():D.continue(L.G)}}).next(()=>Ze.waitFor(o))}options(e,t){let o;return void 0!==e&&("string"==typeof e?o=e:t=e),{index:o,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const o=this.store.index(e.index);return e.X?o.openKeyCursor(e.range,t):o.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function w(i){return new Ze((e,t)=>{i.onsuccess=o=>{e(o.target.result)},i.onerror=o=>{const u=b(o.target.error);t(u)}})}let _=!1;function b(i){const e=Is.D((0,nt.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(i.message.indexOf(t)>=0){const o=new Et("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return _||(_=!0,setTimeout(()=>{throw o},0)),o}}return i}class P{constructor(e,t){this.asyncQueue=e,this.et=t,this.task=null}start(){this.nt(15)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}nt(e){var t=this;Tt("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,he.Z)(function*(){t.task=null;try{Tt("IndexBackiller",`Documents written: ${yield t.et.st()}`)}catch(o){Ao(o)?Tt("IndexBackiller","Ignoring IndexedDB error during index backfill: ",o):yield So(o)}yield t.nt(1)}))}}class z{constructor(e,t){this.localStore=e,this.persistence=t}st(e=50){var t=this;return(0,he.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",o=>t.it(o,e))})()}it(e,t){const o=new Set;let u=t,d=!0;return Ze.doWhile(()=>!0===d&&u>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(g=>{if(null!==g&&!o.has(g))return Tt("IndexBackiller",`Processing collection: ${g}`),this.rt(e,g,u).next(D=>{u-=D,o.add(g)});d=!1})).next(()=>t-u)}rt(e,t,o){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(u=>this.localStore.localDocuments.getNextDocuments(e,t,u,o).next(d=>{const g=d.changes;return this.localStore.indexManager.updateIndexEntries(e,g).next(()=>this.ot(u,d)).next(D=>(Tt("IndexBackiller",`Updating offset: ${D}`),this.localStore.indexManager.updateCollectionGroup(e,t,D))).next(()=>g.size)}))}ot(e,t){let o=e;return t.changes.forEach((u,d)=>{const g=io(d);ou(g,o)>0&&(o=g)}),new yi(o.readTime,o.documentKey,Math.max(t.batchId,e.largestBatchId))}}class te{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=o=>this.ut(o),this.ct=o=>t.writeSequenceNumber(o))}ut(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ct&&this.ct(e),e}}function pe(i){let e=0;for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e++;return e}function tt(i,e){for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e(t,i[t])}function Ot(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}te.at=-1;class rn{constructor(e,t){this.comparator=e,this.root=t||Dn.EMPTY}insert(e,t){return new rn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Dn.BLACK,null,null))}remove(e){return new rn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Dn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const o=this.comparator(e,t.key);if(0===o)return t.value;o<0?t=t.left:o>0&&(t=t.right)}return null}indexOf(e){let t=0,o=this.root;for(;!o.isEmpty();){const u=this.comparator(e,o.key);if(0===u)return t+o.left.size;u<0?o=o.left:(t+=o.left.size+1,o=o.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,o)=>(e(t,o),!1))}toString(){const e=[];return this.inorderTraversal((t,o)=>(e.push(`${t}:${o}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Wt(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Wt(this.root,e,this.comparator,!1)}getReverseIterator(){return new Wt(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Wt(this.root,e,this.comparator,!0)}}class Wt{constructor(e,t,o,u){this.isReverse=u,this.nodeStack=[];let d=1;for(;!e.isEmpty();)if(d=t?o(e.key,t):1,t&&u&&(d*=-1),d<0)e=this.isReverse?e.left:e.right;else{if(0===d){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Dn{constructor(e,t,o,u,d){this.key=e,this.value=t,this.color=o??Dn.RED,this.left=u??Dn.EMPTY,this.right=d??Dn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,o,u,d){return new Dn(e??this.key,t??this.value,o??this.color,u??this.left,d??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,o){let u=this;const d=o(e,u.key);return u=d<0?u.copy(null,null,null,u.left.insert(e,t,o),null):0===d?u.copy(null,t,null,null,null):u.copy(null,null,null,null,u.right.insert(e,t,o)),u.fixUp()}removeMin(){if(this.left.isEmpty())return Dn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let o,u=this;if(t(e,u.key)<0)u.left.isEmpty()||u.left.isRed()||u.left.left.isRed()||(u=u.moveRedLeft()),u=u.copy(null,null,null,u.left.remove(e,t),null);else{if(u.left.isRed()&&(u=u.rotateRight()),u.right.isEmpty()||u.right.isRed()||u.right.left.isRed()||(u=u.moveRedRight()),0===t(e,u.key)){if(u.right.isEmpty())return Dn.EMPTY;o=u.right.min(),u=u.copy(o.key,o.value,null,null,u.right.removeMin())}u=u.copy(null,null,null,null,u.right.remove(e,t))}return u.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Dn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Dn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Qt();const e=this.left.check();if(e!==this.right.check())throw Qt();return e+(this.isRed()?0:1)}}Dn.EMPTY=null,Dn.RED=!0,Dn.BLACK=!1,Dn.EMPTY=new class{constructor(){this.size=0}get key(){throw Qt()}get value(){throw Qt()}get color(){throw Qt()}get left(){throw Qt()}get right(){throw Qt()}copy(i,e,t,o,u){return this}insert(i,e,t){return new Dn(i,e)}remove(i,e){return this}isEmpty(){return!0}inorderTraversal(i){return!1}reverseTraversal(i){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class zn{constructor(e){this.comparator=e,this.data=new rn(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,o)=>(e(t),!1))}forEachInRange(e,t){const o=this.data.getIteratorFrom(e[0]);for(;o.hasNext();){const u=o.getNext();if(this.comparator(u.key,e[1])>=0)return;t(u.key)}}forEachWhile(e,t){let o;for(o=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();o.hasNext();)if(!e(o.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new so(this.data.getIterator())}getIteratorFrom(e){return new so(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(o=>{t=t.add(o)}),t}isEqual(e){if(!(e instanceof zn)||this.size!==e.size)return!1;const t=this.data.getIterator(),o=e.data.getIterator();for(;t.hasNext();){const u=t.getNext().key,d=o.getNext().key;if(0!==this.comparator(u,d))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new zn(this.comparator);return t.data=e,t}}class so{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function qi(i){return i.hasNext()?i.getNext():void 0}class pi{constructor(e){this.fields=e,e.sort(mi.comparator)}static empty(){return new pi([])}unionWith(e){let t=new zn(mi.comparator);for(const o of this.fields)t=t.add(o);for(const o of e)t=t.add(o);return new pi(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return wo(this.fields,e.fields,(t,o)=>t.isEqual(o))}}class _i{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new _i(t)}static fromUint8Array(e){const t=function(o){let u="";for(let d=0;d<o.length;++d)u+=String.fromCharCode(o[d]);return u}(e);return new _i(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let o=0;o<e.length;o++)t[o]=e.charCodeAt(o);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return In(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}_i.EMPTY_BYTE_STRING=new _i("");const Fa=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function oo(i){if(vn(!!i),"string"==typeof i){let e=0;const t=Fa.exec(i);if(vn(!!t),t[1]){let u=t[1];u=(u+"000000000").substr(0,9),e=Number(u)}const o=new Date(i);return{seconds:Math.floor(o.getTime()/1e3),nanos:e}}return{seconds:ki(i.seconds),nanos:ki(i.nanos)}}function ki(i){return"number"==typeof i?i:"string"==typeof i?Number(i):0}function vi(i){return"string"==typeof i?_i.fromBase64String(i):_i.fromUint8Array(i)}function vl(i){var e,t;return"server_timestamp"===(null===(t=((null===(e=i?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function x(i){const e=i.mapValue.fields.__previous_value__;return vl(e)?x(e):e}function k(i){const e=oo(i.mapValue.fields.__local_write_time__.timestampValue);return new Ri(e.seconds,e.nanos)}class W{constructor(e,t,o,u,d,g,D,L){this.databaseId=e,this.appId=t,this.persistenceKey=o,this.host=u,this.ssl=d,this.forceLongPolling=g,this.autoDetectLongPolling=D,this.useFetchStreams=L}}class ie{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new ie("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof ie&&e.projectId===this.projectId&&e.database===this.database}}function Pe(i){return null==i}function Qe(i){return 0===i&&1/i==-1/0}function It(i){return"number"==typeof i&&Number.isInteger(i)&&!Qe(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}const Pt={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},wn={nullValue:"NULL_VALUE"};function bn(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?vl(i)?4:zc(i)?9007199254740991:10:Qt()}function Pn(i,e){if(i===e)return!0;const t=bn(i);if(t!==bn(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return k(i).isEqual(k(e));case 3:return function(o,u){if("string"==typeof o.timestampValue&&"string"==typeof u.timestampValue&&o.timestampValue.length===u.timestampValue.length)return o.timestampValue===u.timestampValue;const d=oo(o.timestampValue),g=oo(u.timestampValue);return d.seconds===g.seconds&&d.nanos===g.nanos}(i,e);case 5:return i.stringValue===e.stringValue;case 6:return u=e,vi(i.bytesValue).isEqual(vi(u.bytesValue));case 7:return i.referenceValue===e.referenceValue;case 8:return function(o,u){return ki(o.geoPointValue.latitude)===ki(u.geoPointValue.latitude)&&ki(o.geoPointValue.longitude)===ki(u.geoPointValue.longitude)}(i,e);case 2:return function(o,u){if("integerValue"in o&&"integerValue"in u)return ki(o.integerValue)===ki(u.integerValue);if("doubleValue"in o&&"doubleValue"in u){const d=ki(o.doubleValue),g=ki(u.doubleValue);return d===g?Qe(d)===Qe(g):isNaN(d)&&isNaN(g)}return!1}(i,e);case 9:return wo(i.arrayValue.values||[],e.arrayValue.values||[],Pn);case 10:return function(o,u){const d=o.mapValue.fields||{},g=u.mapValue.fields||{};if(pe(d)!==pe(g))return!1;for(const D in d)if(d.hasOwnProperty(D)&&(void 0===g[D]||!Pn(d[D],g[D])))return!1;return!0}(i,e);default:return Qt()}var u}function En(i,e){return void 0!==(i.values||[]).find(t=>Pn(t,e))}function ni(i,e){if(i===e)return 0;const t=bn(i),o=bn(e);if(t!==o)return In(t,o);switch(t){case 0:case 9007199254740991:return 0;case 1:return In(i.booleanValue,e.booleanValue);case 2:return function(u,d){const g=ki(u.integerValue||u.doubleValue),D=ki(d.integerValue||d.doubleValue);return g<D?-1:g>D?1:g===D?0:isNaN(g)?isNaN(D)?0:-1:1}(i,e);case 3:return $s(i.timestampValue,e.timestampValue);case 4:return $s(k(i),k(e));case 5:return In(i.stringValue,e.stringValue);case 6:return function(u,d){const g=vi(u),D=vi(d);return g.compareTo(D)}(i.bytesValue,e.bytesValue);case 7:return function(u,d){const g=u.split("/"),D=d.split("/");for(let L=0;L<g.length&&L<D.length;L++){const H=In(g[L],D[L]);if(0!==H)return H}return In(g.length,D.length)}(i.referenceValue,e.referenceValue);case 8:return function(u,d){const g=In(ki(u.latitude),ki(d.latitude));return 0!==g?g:In(ki(u.longitude),ki(d.longitude))}(i.geoPointValue,e.geoPointValue);case 9:return function(u,d){const g=u.values||[],D=d.values||[];for(let L=0;L<g.length&&L<D.length;++L){const H=ni(g[L],D[L]);if(H)return H}return In(g.length,D.length)}(i.arrayValue,e.arrayValue);case 10:return function(u,d){if(u===Pt.mapValue&&d===Pt.mapValue)return 0;if(u===Pt.mapValue)return 1;if(d===Pt.mapValue)return-1;const g=u.fields||{},D=Object.keys(g),L=d.fields||{},H=Object.keys(L);D.sort(),H.sort();for(let Q=0;Q<D.length&&Q<H.length;++Q){const ve=In(D[Q],H[Q]);if(0!==ve)return ve;const Ge=ni(g[D[Q]],L[H[Q]]);if(0!==Ge)return Ge}return In(D.length,H.length)}(i.mapValue,e.mapValue);default:throw Qt()}}function $s(i,e){if("string"==typeof i&&"string"==typeof e&&i.length===e.length)return In(i,e);const t=oo(i),o=oo(e),u=In(t.seconds,o.seconds);return 0!==u?u:In(t.nanos,o.nanos)}function ra(i){return La(i)}function La(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?function(o){const u=oo(o);return`time(${u.seconds},${u.nanos})`}(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?vi(i.bytesValue).toBase64():"referenceValue"in i?zt.fromName(i.referenceValue).toString():"geoPointValue"in i?`geo(${(e=i.geoPointValue).latitude},${e.longitude})`:"arrayValue"in i?function(o){let u="[",d=!0;for(const g of o.values||[])d?d=!1:u+=",",u+=La(g);return u+"]"}(i.arrayValue):"mapValue"in i?function(o){const u=Object.keys(o.fields||{}).sort();let d="{",g=!0;for(const D of u)g?g=!1:d+=",",d+=`${D}:${La(o.fields[D])}`;return d+"}"}(i.mapValue):Qt();var e}function xo(i,e){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${e.path.canonicalString()}`}}function Va(i){return!!i&&"integerValue"in i}function Wo(i){return!!i&&"arrayValue"in i}function Ua(i){return!!i&&"nullValue"in i}function Za(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function ya(i){return!!i&&"mapValue"in i}function au(i){if(i.geoPointValue)return{geoPointValue:Object.assign({},i.geoPointValue)};if(i.timestampValue&&"object"==typeof i.timestampValue)return{timestampValue:Object.assign({},i.timestampValue)};if(i.mapValue){const e={mapValue:{fields:{}}};return tt(i.mapValue.fields,(t,o)=>e.mapValue.fields[t]=au(o)),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(i.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=au(i.arrayValue.values[t]);return e}return Object.assign({},i)}function zc(i){return"__max__"===(((i.mapValue||{}).fields||{}).__type__||{}).stringValue}function $f(i){return"nullValue"in i?wn:"booleanValue"in i?{booleanValue:!1}:"integerValue"in i||"doubleValue"in i?{doubleValue:NaN}:"timestampValue"in i?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in i?{stringValue:""}:"bytesValue"in i?{bytesValue:""}:"referenceValue"in i?xo(ie.empty(),zt.empty()):"geoPointValue"in i?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in i?{arrayValue:{}}:"mapValue"in i?{mapValue:{}}:Qt()}function Hf(i){return"nullValue"in i?{booleanValue:!1}:"booleanValue"in i?{doubleValue:NaN}:"integerValue"in i||"doubleValue"in i?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in i?{stringValue:""}:"stringValue"in i?{bytesValue:""}:"bytesValue"in i?xo(ie.empty(),zt.empty()):"referenceValue"in i?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in i?{arrayValue:{}}:"arrayValue"in i?{mapValue:{}}:"mapValue"in i?Pt:Qt()}function Wc(i,e){const t=ni(i.value,e.value);return 0!==t?t:i.inclusive&&!e.inclusive?-1:!i.inclusive&&e.inclusive?1:0}function wl(i,e){const t=ni(i.value,e.value);return 0!==t?t:i.inclusive&&!e.inclusive?1:!i.inclusive&&e.inclusive?-1:0}class Cs{constructor(e){this.value=e}static empty(){return new Cs({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let o=0;o<e.length-1;++o)if(t=(t.mapValue.fields||{})[e.get(o)],!ya(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=au(t)}setAll(e){let t=mi.emptyPath(),o={},u=[];e.forEach((g,D)=>{if(!t.isImmediateParentOf(D)){const L=this.getFieldsMap(t);this.applyChanges(L,o,u),o={},u=[],t=D.popLast()}g?o[D.lastSegment()]=au(g):u.push(D.lastSegment())});const d=this.getFieldsMap(t);this.applyChanges(d,o,u)}delete(e){const t=this.field(e.popLast());ya(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Pn(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let o=0;o<e.length;++o){let u=t.mapValue.fields[e.get(o)];ya(u)&&u.mapValue.fields||(u={mapValue:{fields:{}}},t.mapValue.fields[e.get(o)]=u),t=u}return t.mapValue.fields}applyChanges(e,t,o){tt(t,(u,d)=>e[u]=d);for(const u of o)delete e[u]}clone(){return new Cs(au(this.value))}}function Jd(i){const e=[];return tt(i.fields,(t,o)=>{const u=new mi([t]);if(ya(o)){const d=Jd(o.mapValue).fields;if(0===d.length)e.push(u);else for(const g of d)e.push(u.child(g))}else e.push(u)}),new pi(e)}class bi{constructor(e,t,o,u,d,g){this.key=e,this.documentType=t,this.version=o,this.readTime=u,this.data=d,this.documentState=g}static newInvalidDocument(e){return new bi(e,0,On.min(),On.min(),Cs.empty(),0)}static newFoundDocument(e,t,o){return new bi(e,1,t,On.min(),o,0)}static newNoDocument(e,t){return new bi(e,2,t,On.min(),Cs.empty(),0)}static newUnknownDocument(e,t){return new bi(e,3,t,On.min(),Cs.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Cs.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Cs.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=On.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof bi&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new bi(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Tg{constructor(e,t=null,o=[],u=[],d=null,g=null,D=null){this.path=e,this.collectionGroup=t,this.orderBy=o,this.filters=u,this.limit=d,this.startAt=g,this.endAt=D,this.ht=null}}function qc(i,e=null,t=[],o=[],u=null,d=null,g=null){return new Tg(i,e,t,o,u,d,g)}function Ku(i){const e=Ht(i);if(null===e.ht){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(o=>{return(u=o).field.canonicalString()+u.op.toString()+ra(u.value);var u}).join(","),t+="|ob:",t+=e.orderBy.map(o=>{return(u=o).field.canonicalString()+u.dir;var u}).join(","),Pe(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(o=>ra(o)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(o=>ra(o)).join(",")),e.ht=t}return e.ht}function El(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let u=0;u<i.orderBy.length;u++)if(!zf(i.orderBy[u],e.orderBy[u]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let u=0;u<i.filters.length;u++)if((t=i.filters[u]).op!==(o=e.filters[u]).op||!t.field.isEqual(o.field)||!Pn(t.value,o.value))return!1;var t,o;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!nh(i.startAt,e.startAt)&&nh(i.endAt,e.endAt)}function Il(i){return zt.isDocumentKey(i.path)&&null===i.collectionGroup&&0===i.filters.length}function Ka(i,e){return i.filters.filter(t=>t instanceof ao&&t.field.isEqual(e))}function ac(i,e,t){let o=wn,u=!0;for(const d of Ka(i,e)){let g=wn,D=!0;switch(d.op){case"<":case"<=":g=$f(d.value);break;case"==":case"in":case">=":g=d.value;break;case">":g=d.value,D=!1;break;case"!=":case"not-in":g=wn}Wc({value:o,inclusive:u},{value:g,inclusive:D})<0&&(o=g,u=D)}if(null!==t)for(let d=0;d<i.orderBy.length;++d)if(i.orderBy[d].field.isEqual(e)){const g=t.position[d];Wc({value:o,inclusive:u},{value:g,inclusive:t.inclusive})<0&&(o=g,u=t.inclusive);break}return{value:o,inclusive:u}}function xu(i,e,t){let o=Pt,u=!0;for(const d of Ka(i,e)){let g=Pt,D=!0;switch(d.op){case">=":case">":g=Hf(d.value),D=!1;break;case"==":case"in":case"<=":g=d.value;break;case"<":g=d.value,D=!1;break;case"!=":case"not-in":g=Pt}wl({value:o,inclusive:u},{value:g,inclusive:D})>0&&(o=g,u=D)}if(null!==t)for(let d=0;d<i.orderBy.length;++d)if(i.orderBy[d].field.isEqual(e)){const g=t.position[d];wl({value:o,inclusive:u},{value:g,inclusive:t.inclusive})>0&&(o=g,u=t.inclusive);break}return{value:o,inclusive:u}}class ao extends class{}{constructor(e,t,o){super(),this.field=e,this.op=t,this.value=o}static create(e,t,o){return e.isKeyField()?"in"===t||"not-in"===t?this.lt(e,t,o):new Gf(e,t,o):"array-contains"===t?new Xd(e,o):"in"===t?new eh(e,o):"not-in"===t?new th(e,o):"array-contains-any"===t?new lc(e,o):new ao(e,t,o)}static lt(e,t,o){return"in"===t?new Sg(e,o):new Dl(e,o)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.ft(ni(t,this.value)):null!==t&&bn(this.value)===bn(t)&&this.ft(ni(t,this.value))}ft(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Qt()}}dt(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class Gf extends ao{constructor(e,t,o){super(e,t,o),this.key=zt.fromName(o.referenceValue)}matches(e){const t=zt.comparator(e.key,this.key);return this.ft(t)}}class Sg extends ao{constructor(e,t){super(e,"in",t),this.keys=uc(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class Dl extends ao{constructor(e,t){super(e,"not-in",t),this.keys=uc(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function uc(i,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(o=>zt.fromName(o.referenceValue))}class Xd extends ao{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Wo(t)&&En(t.arrayValue,this.value)}}class eh extends ao{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&En(this.value.arrayValue,t)}}class th extends ao{constructor(e,t){super(e,"not-in",t)}matches(e){if(En(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!En(this.value.arrayValue,t)}}class lc extends ao{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Wo(t)||!t.arrayValue.values)&&t.arrayValue.values.some(o=>En(this.value.arrayValue,o))}}class uu{constructor(e,t){this.position=e,this.inclusive=t}}class lu{constructor(e,t="asc"){this.field=e,this.dir=t}}function zf(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}function Kc(i,e,t){let o=0;for(let u=0;u<i.position.length;u++){const d=e[u],g=i.position[u];if(o=d.field.isKeyField()?zt.comparator(zt.fromName(g.referenceValue),t.key):ni(g,t.data.field(d.field)),"desc"===d.dir&&(o*=-1),0!==o)break}return o}function nh(i,e){if(null===i)return null===e;if(null===e||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let t=0;t<i.position.length;t++)if(!Pn(i.position[t],e.position[t]))return!1;return!0}class Ys{constructor(e,t=null,o=[],u=[],d=null,g="F",D=null,L=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=o,this.filters=u,this.limit=d,this.limitType=g,this.startAt=D,this.endAt=L,this._t=null,this.wt=null}}function Yu(i,e,t,o,u,d,g,D){return new Ys(i,e,t,o,u,d,g,D)}function Mu(i){return new Ys(i)}function rh(i){return 0===i.filters.length&&null===i.limit&&null==i.startAt&&null==i.endAt&&(0===i.explicitOrderBy.length||1===i.explicitOrderBy.length&&i.explicitOrderBy[0].field.isKeyField())}function ih(i){return i.explicitOrderBy.length>0?i.explicitOrderBy[0].field:null}function sh(i){for(const e of i.filters)if(e.dt())return e.field;return null}function oh(i){return null!==i.collectionGroup}function cc(i){const e=Ht(i);if(null===e._t){e._t=[];const t=sh(e),o=ih(e);if(null!==t&&null===o)t.isKeyField()||e._t.push(new lu(t)),e._t.push(new lu(mi.keyField(),"asc"));else{let u=!1;for(const d of e.explicitOrderBy)e._t.push(d),d.field.isKeyField()&&(u=!0);if(!u){const d=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e._t.push(new lu(mi.keyField(),d))}}}return e._t}function bs(i){const e=Ht(i);if(!e.wt)if("F"===e.limitType)e.wt=qc(e.path,e.collectionGroup,cc(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const d of cc(e))t.push(new lu(d.field,"desc"===d.dir?"asc":"desc"));const o=e.endAt?new uu(e.endAt.position,e.endAt.inclusive):null,u=e.startAt?new uu(e.startAt.position,e.startAt.inclusive):null;e.wt=qc(e.path,e.collectionGroup,t,e.filters,e.limit,o,u)}return e.wt}function dc(i,e,t){return new Ys(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,t,i.startAt,i.endAt)}function Cl(i,e){return El(bs(i),bs(e))&&i.limitType===e.limitType}function hc(i){return`${Ku(bs(i))}|lt:${i.limitType}`}function Yc(i){return`Query(target=${function Zc(i){let e=i.path.canonicalString();return null!==i.collectionGroup&&(e+=" collectionGroup="+i.collectionGroup),i.filters.length>0&&(e+=`, filters: [${i.filters.map(t=>{return`${(o=t).field.canonicalString()} ${o.op} ${ra(o.value)}`;var o}).join(", ")}]`),Pe(i.limit)||(e+=", limit: "+i.limit),i.orderBy.length>0&&(e+=`, orderBy: [${i.orderBy.map(t=>{return`${(o=t).field.canonicalString()} (${o.dir})`;var o}).join(", ")}]`),i.startAt&&(e+=", startAt: ",e+=i.startAt.inclusive?"b:":"a:",e+=i.startAt.position.map(t=>ra(t)).join(",")),i.endAt&&(e+=", endAt: ",e+=i.endAt.inclusive?"a:":"b:",e+=i.endAt.position.map(t=>ra(t)).join(",")),`Target(${e})`}(bs(i))}; limitType=${i.limitType})`}function cu(i,e){return e.isFoundDocument()&&function(t,o){const u=o.key.path;return null!==t.collectionGroup?o.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(u):zt.isDocumentKey(t.path)?t.path.isEqual(u):t.path.isImmediateParentOf(u)}(i,e)&&function(t,o){for(const u of t.explicitOrderBy)if(!u.field.isKeyField()&&null===o.data.field(u.field))return!1;return!0}(i,e)&&function(t,o){for(const u of t.filters)if(!u.matches(o))return!1;return!0}(i,e)&&(o=e,!((t=i).startAt&&!function(u,d,g){const D=Kc(u,d,g);return u.inclusive?D<=0:D<0}(t.startAt,cc(t),o)||t.endAt&&!function(u,d,g){const D=Kc(u,d,g);return u.inclusive?D>=0:D>0}(t.endAt,cc(t),o)));var t,o}function Qc(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function Ta(i){return(e,t)=>{let o=!1;for(const u of cc(i)){const d=Ru(u,e,t);if(0!==d)return d;o=o||u.field.isKeyField()}return 0}}function Ru(i,e,t){const o=i.field.isKeyField()?zt.comparator(e.key,t.key):function(u,d,g){const D=d.data.field(u),L=g.data.field(u);return null!==D&&null!==L?ni(D,L):Qt()}(i.field,e,t);switch(i.dir){case"asc":return o;case"desc":return-1*o;default:return Qt()}}function Jc(i,e){if(i.gt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Qe(e)?"-0":e}}function Xc(i){return{integerValue:""+i}}function bl(i,e){return It(e)?Xc(e):Jc(i,e)}class ed{constructor(){this._=void 0}}function Ag(i,e,t){return i instanceof du?function(o,u){const d={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return u&&(d.fields.__previous_value__=u),{mapValue:d}}(t,e):i instanceof Ba?td(i,e):i instanceof Qu?nd(i,e):function(o,u){const d=fc(o,u),g=pc(d)+pc(o.yt);return Va(d)&&Va(o.yt)?Xc(g):Jc(o.It,g)}(i,e)}function xg(i,e,t){return i instanceof Ba?td(i,e):i instanceof Qu?nd(i,e):t}function fc(i,e){return i instanceof hu?Va(t=e)||(o=t)&&"doubleValue"in o?e:{integerValue:0}:null;var o,t}class du extends ed{}class Ba extends ed{constructor(e){super(),this.elements=e}}function td(i,e){const t=ah(e);for(const o of i.elements)t.some(u=>Pn(u,o))||t.push(o);return{arrayValue:{values:t}}}class Qu extends ed{constructor(e){super(),this.elements=e}}function nd(i,e){let t=ah(e);for(const o of i.elements)t=t.filter(u=>!Pn(u,o));return{arrayValue:{values:t}}}class hu extends ed{constructor(e,t){super(),this.It=e,this.yt=t}}function pc(i){return ki(i.integerValue||i.doubleValue)}function ah(i){return Wo(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}class Tl{constructor(e,t){this.field=e,this.transform=t}}class gc{constructor(e,t){this.version=e,this.transformResults=t}}class Zi{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Zi}static exists(e){return new Zi(void 0,e)}static updateTime(e){return new Zi(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Ju(i,e){return void 0!==i.updateTime?e.isFoundDocument()&&e.version.isEqual(i.updateTime):void 0===i.exists||i.exists===e.isFoundDocument()}class Al{}function Ts(i,e){if(!i.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return i.isNoDocument()?new Ml(i.key,Zi.none()):new Xu(i.key,i.data,Zi.none());{const t=i.data,o=Cs.empty();let u=new zn(mi.comparator);for(let d of e.fields)if(!u.has(d)){let g=t.field(d);null===g&&d.length>1&&(d=d.popLast(),g=t.field(d)),null===g?o.delete(d):o.set(d,g),u=u.add(d)}return new ja(i.key,o,new pi(u.toArray()),Zi.none())}}function Wf(i,e,t){i instanceof Xu?function(o,u,d){const g=o.value.clone(),D=lh(o.fieldTransforms,u,d.transformResults);g.setAll(D),u.convertToFoundDocument(d.version,g).setHasCommittedMutations()}(i,e,t):i instanceof ja?function(o,u,d){if(!Ju(o.precondition,u))return void u.convertToUnknownDocument(d.version);const g=lh(o.fieldTransforms,u,d.transformResults),D=u.data;D.setAll(uh(o)),D.setAll(g),u.convertToFoundDocument(d.version,D).setHasCommittedMutations()}(i,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function xl(i,e,t,o){return i instanceof Xu?function(u,d,g,D){if(!Ju(u.precondition,d))return g;const L=u.value.clone(),H=ch(u.fieldTransforms,D,d);return L.setAll(H),d.convertToFoundDocument(d.version,L).setHasLocalMutations(),null}(i,e,t,o):i instanceof ja?function(u,d,g,D){if(!Ju(u.precondition,d))return g;const L=ch(u.fieldTransforms,D,d),H=d.data;return H.setAll(uh(u)),H.setAll(L),d.convertToFoundDocument(d.version,H).setHasLocalMutations(),null===g?null:g.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map(Q=>Q.field))}(i,e,t,o):(g=t,Ju(i.precondition,d=e)?(d.convertToNoDocument(d.version).setHasLocalMutations(),null):g);var d,g}function rd(i,e){let t=null;for(const o of i.fieldTransforms){const u=e.data.field(o.field),d=fc(o.transform,u||null);null!=d&&(null===t&&(t=Cs.empty()),t.set(o.field,d))}return t||null}function Ou(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&(o=e.fieldTransforms,!!(void 0===(t=i.fieldTransforms)&&void 0===o||t&&o&&wo(t,o,(u,d)=>function Sl(i,e){return i.field.isEqual(e.field)&&(o=e.transform,(t=i.transform)instanceof Ba&&o instanceof Ba||t instanceof Qu&&o instanceof Qu?wo(t.elements,o.elements,Pn):t instanceof hu&&o instanceof hu?Pn(t.yt,o.yt):t instanceof du&&o instanceof du);var t,o}(u,d))))&&(0===i.type?i.value.isEqual(e.value):1!==i.type||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask));var t,o}class Xu extends Al{constructor(e,t,o,u=[]){super(),this.key=e,this.value=t,this.precondition=o,this.fieldTransforms=u,this.type=0}getFieldMask(){return null}}class ja extends Al{constructor(e,t,o,u,d=[]){super(),this.key=e,this.data=t,this.fieldMask=o,this.precondition=u,this.fieldTransforms=d,this.type=1}getFieldMask(){return this.fieldMask}}function uh(i){const e=new Map;return i.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const o=i.data.field(t);e.set(t,o)}}),e}function lh(i,e,t){const o=new Map;vn(i.length===t.length);for(let u=0;u<t.length;u++){const d=i[u],g=d.transform,D=e.data.field(d.field);o.set(d.field,xg(g,D,t[u]))}return o}function ch(i,e,t){const o=new Map;for(const u of i){const d=u.transform,g=t.data.field(u.field);o.set(u.field,Ag(d,g,e))}return o}class Ml extends Al{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class id extends Al{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Nu{constructor(e){this.count=e}}var Ki,Sr;function sd(i){switch(i){default:return Qt();case Je.CANCELLED:case Je.UNKNOWN:case Je.DEADLINE_EXCEEDED:case Je.RESOURCE_EXHAUSTED:case Je.INTERNAL:case Je.UNAVAILABLE:case Je.UNAUTHENTICATED:return!1;case Je.INVALID_ARGUMENT:case Je.NOT_FOUND:case Je.ALREADY_EXISTS:case Je.PERMISSION_DENIED:case Je.FAILED_PRECONDITION:case Je.ABORTED:case Je.OUT_OF_RANGE:case Je.UNIMPLEMENTED:case Je.DATA_LOSS:return!0}}function Rl(i){if(void 0===i)return Nr("GRPC error has no .code"),Je.UNKNOWN;switch(i){case Ki.OK:return Je.OK;case Ki.CANCELLED:return Je.CANCELLED;case Ki.UNKNOWN:return Je.UNKNOWN;case Ki.DEADLINE_EXCEEDED:return Je.DEADLINE_EXCEEDED;case Ki.RESOURCE_EXHAUSTED:return Je.RESOURCE_EXHAUSTED;case Ki.INTERNAL:return Je.INTERNAL;case Ki.UNAVAILABLE:return Je.UNAVAILABLE;case Ki.UNAUTHENTICATED:return Je.UNAUTHENTICATED;case Ki.INVALID_ARGUMENT:return Je.INVALID_ARGUMENT;case Ki.NOT_FOUND:return Je.NOT_FOUND;case Ki.ALREADY_EXISTS:return Je.ALREADY_EXISTS;case Ki.PERMISSION_DENIED:return Je.PERMISSION_DENIED;case Ki.FAILED_PRECONDITION:return Je.FAILED_PRECONDITION;case Ki.ABORTED:return Je.ABORTED;case Ki.OUT_OF_RANGE:return Je.OUT_OF_RANGE;case Ki.UNIMPLEMENTED:return Je.UNIMPLEMENTED;case Ki.DATA_LOSS:return Je.DATA_LOSS;default:return Qt()}}(Sr=Ki||(Ki={}))[Sr.OK=0]="OK",Sr[Sr.CANCELLED=1]="CANCELLED",Sr[Sr.UNKNOWN=2]="UNKNOWN",Sr[Sr.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Sr[Sr.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Sr[Sr.NOT_FOUND=5]="NOT_FOUND",Sr[Sr.ALREADY_EXISTS=6]="ALREADY_EXISTS",Sr[Sr.PERMISSION_DENIED=7]="PERMISSION_DENIED",Sr[Sr.UNAUTHENTICATED=16]="UNAUTHENTICATED",Sr[Sr.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Sr[Sr.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Sr[Sr.ABORTED=10]="ABORTED",Sr[Sr.OUT_OF_RANGE=11]="OUT_OF_RANGE",Sr[Sr.UNIMPLEMENTED=12]="UNIMPLEMENTED",Sr[Sr.INTERNAL=13]="INTERNAL",Sr[Sr.UNAVAILABLE=14]="UNAVAILABLE",Sr[Sr.DATA_LOSS=15]="DATA_LOSS";class fu{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),o=this.inner[t];if(void 0!==o)for(const[u,d]of o)if(this.equalsFn(u,e))return d}has(e){return void 0!==this.get(e)}set(e,t){const o=this.mapKeyFn(e),u=this.inner[o];if(void 0===u)return this.inner[o]=[[e,t]],void this.innerSize++;for(let d=0;d<u.length;d++)if(this.equalsFn(u[d][0],e))return void(u[d]=[e,t]);u.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),o=this.inner[t];if(void 0===o)return!1;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return 1===o.length?delete this.inner[t]:o.splice(u,1),this.innerSize--,!0;return!1}forEach(e){tt(this.inner,(t,o)=>{for(const[u,d]of o)e(u,d)})}isEmpty(){return Ot(this.inner)}size(){return this.innerSize}}const qo=new rn(zt.comparator);function Hs(){return qo}const Ol=new rn(zt.comparator);function mc(...i){let e=Ol;for(const t of i)e=e.insert(t.key,t);return e}function yc(i){let e=Ol;return i.forEach((t,o)=>e=e.insert(t,o.overlayedDocument)),e}function Zo(){return Pu()}function od(){return Pu()}function Pu(){return new fu(i=>i.toString(),(i,e)=>i.isEqual(e))}const ku=new rn(zt.comparator),pu=new zn(zt.comparator);function Xn(...i){let e=pu;for(const t of i)e=e.add(t);return e}const _c=new zn(In);function vc(){return _c}class Fu{constructor(e,t,o,u,d){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=o,this.documentUpdates=u,this.resolvedLimboDocuments=d}static createSynthesizedRemoteEventForCurrentChange(e,t){const o=new Map;return o.set(e,Ya.createSynthesizedTargetChangeForCurrentChange(e,t)),new Fu(On.min(),o,vc(),Hs(),Xn())}}class Ya{constructor(e,t,o,u,d){this.resumeToken=e,this.current=t,this.addedDocuments=o,this.modifiedDocuments=u,this.removedDocuments=d}static createSynthesizedTargetChangeForCurrentChange(e,t){return new Ya(_i.EMPTY_BYTE_STRING,t,Xn(),Xn(),Xn())}}class ts{constructor(e,t,o,u){this.Tt=e,this.removedTargetIds=t,this.key=o,this.Et=u}}class Nl{constructor(e,t){this.targetId=e,this.At=t}}class el{constructor(e,t,o=_i.EMPTY_BYTE_STRING,u=null){this.state=e,this.targetIds=t,this.resumeToken=o,this.cause=u}}class dh{constructor(){this.Rt=0,this.bt=gu(),this.Pt=_i.EMPTY_BYTE_STRING,this.vt=!1,this.Vt=!0}get current(){return this.vt}get resumeToken(){return this.Pt}get St(){return 0!==this.Rt}get Dt(){return this.Vt}Ct(e){e.approximateByteSize()>0&&(this.Vt=!0,this.Pt=e)}xt(){let e=Xn(),t=Xn(),o=Xn();return this.bt.forEach((u,d)=>{switch(d){case 0:e=e.add(u);break;case 2:t=t.add(u);break;case 1:o=o.add(u);break;default:Qt()}}),new Ya(this.Pt,this.vt,e,t,o)}Nt(){this.Vt=!1,this.bt=gu()}kt(e,t){this.Vt=!0,this.bt=this.bt.insert(e,t)}Mt(e){this.Vt=!0,this.bt=this.bt.remove(e)}Ot(){this.Rt+=1}Ft(){this.Rt-=1}$t(){this.Vt=!0,this.vt=!0}}class Qa{constructor(e){this.Bt=e,this.Lt=new Map,this.Ut=Hs(),this.qt=Lu(),this.Kt=new zn(In)}Gt(e){for(const t of e.Tt)e.Et&&e.Et.isFoundDocument()?this.Qt(t,e.Et):this.jt(t,e.key,e.Et);for(const t of e.removedTargetIds)this.jt(t,e.key,e.Et)}Wt(e){this.forEachTarget(e,t=>{const o=this.zt(t);switch(e.state){case 0:this.Ht(t)&&o.Ct(e.resumeToken);break;case 1:o.Ft(),o.St||o.Nt(),o.Ct(e.resumeToken);break;case 2:o.Ft(),o.St||this.removeTarget(t);break;case 3:this.Ht(t)&&(o.$t(),o.Ct(e.resumeToken));break;case 4:this.Ht(t)&&(this.Jt(t),o.Ct(e.resumeToken));break;default:Qt()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Lt.forEach((o,u)=>{this.Ht(u)&&t(u)})}Yt(e){const t=e.targetId,o=e.At.count,u=this.Xt(t);if(u){const d=u.target;if(Il(d))if(0===o){const g=new zt(d.path);this.jt(t,g,bi.newNoDocument(g,On.min()))}else vn(1===o);else this.Zt(t)!==o&&(this.Jt(t),this.Kt=this.Kt.add(t))}}te(e){const t=new Map;this.Lt.forEach((d,g)=>{const D=this.Xt(g);if(D){if(d.current&&Il(D.target)){const L=new zt(D.target.path);null!==this.Ut.get(L)||this.ee(g,L)||this.jt(g,L,bi.newNoDocument(L,e))}d.Dt&&(t.set(g,d.xt()),d.Nt())}});let o=Xn();this.qt.forEach((d,g)=>{let D=!0;g.forEachWhile(L=>{const H=this.Xt(L);return!H||2===H.purpose||(D=!1,!1)}),D&&(o=o.add(d))}),this.Ut.forEach((d,g)=>g.setReadTime(e));const u=new Fu(e,t,this.Kt,this.Ut,o);return this.Ut=Hs(),this.qt=Lu(),this.Kt=new zn(In),u}Qt(e,t){if(!this.Ht(e))return;const o=this.ee(e,t.key)?2:0;this.zt(e).kt(t.key,o),this.Ut=this.Ut.insert(t.key,t),this.qt=this.qt.insert(t.key,this.ne(t.key).add(e))}jt(e,t,o){if(!this.Ht(e))return;const u=this.zt(e);this.ee(e,t)?u.kt(t,1):u.Mt(t),this.qt=this.qt.insert(t,this.ne(t).delete(e)),o&&(this.Ut=this.Ut.insert(t,o))}removeTarget(e){this.Lt.delete(e)}Zt(e){const t=this.zt(e).xt();return this.Bt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ot(e){this.zt(e).Ot()}zt(e){let t=this.Lt.get(e);return t||(t=new dh,this.Lt.set(e,t)),t}ne(e){let t=this.qt.get(e);return t||(t=new zn(In),this.qt=this.qt.insert(e,t)),t}Ht(e){const t=null!==this.Xt(e);return t||Tt("WatchChangeAggregator","Detected inactive target",e),t}Xt(e){const t=this.Lt.get(e);return t&&t.St?null:this.Bt.se(e)}Jt(e){this.Lt.set(e,new dh),this.Bt.getRemoteKeysForTarget(e).forEach(t=>{this.jt(e,t,null)})}ee(e,t){return this.Bt.getRemoteKeysForTarget(e).has(t)}}function Lu(){return new rn(zt.comparator)}function gu(){return new rn(zt.comparator)}const hh={asc:"ASCENDING",desc:"DESCENDING"},qf={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class ad{constructor(e,t){this.databaseId=e,this.gt=t}}function Pl(i,e){return i.gt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function wc(i,e){return i.gt?e.toBase64():e.toUint8Array()}function Zf(i,e){return Pl(i,e.toTimestamp())}function Gs(i){return vn(!!i),On.fromTimestamp(function(e){const t=oo(e);return new Ri(t.seconds,t.nanos)}(i))}function m(i,e){return(t=i,new gr(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function c(i){const e=gr.fromString(i);return vn(qy(e)),e}function f(i,e){return m(i.databaseId,e.path)}function E(i,e){const t=c(e);if(t.get(1)!==i.databaseId.projectId)throw new Et(Je.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+i.databaseId.projectId);if(t.get(3)!==i.databaseId.database)throw new Et(Je.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+i.databaseId.database);return new zt(st(t))}function B(i,e){return m(i.databaseId,e)}function Y(i){const e=c(i);return 4===e.length?gr.emptyPath():st(e)}function Te(i){return new gr(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function st(i){return vn(i.length>4&&"documents"===i.get(4)),i.popFirst(5)}function kt(i,e,t){return{name:f(i,e),fields:t.value.mapValue.fields}}function ln(i,e,t){const o=E(i,e.name),u=Gs(e.updateTime),d=new Cs({mapValue:{fields:e.fields}}),g=bi.newFoundDocument(o,u,d);return t&&g.setHasCommittedMutations(),t?g.setHasCommittedMutations():g}function ns(i,e){let t;if(e instanceof Xu)t={update:kt(i,e.key,e.value)};else if(e instanceof Ml)t={delete:f(i,e.key)};else if(e instanceof ja)t={update:kt(i,e.key,e.data),updateMask:Rg(e.fieldMask)};else{if(!(e instanceof id))return Qt();t={verify:f(i,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(o=>function(u,d){const g=d.transform;if(g instanceof du)return{fieldPath:d.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(g instanceof Ba)return{fieldPath:d.field.canonicalString(),appendMissingElements:{values:g.elements}};if(g instanceof Qu)return{fieldPath:d.field.canonicalString(),removeAllFromArray:{values:g.elements}};if(g instanceof hu)return{fieldPath:d.field.canonicalString(),increment:g.yt};throw Qt()}(0,o))),e.precondition.isNone||(t.currentDocument=void 0!==(u=e.precondition).updateTime?{updateTime:Zf(i,u.updateTime)}:void 0!==u.exists?{exists:u.exists}:Qt()),t;var u}function ia(i,e){const t=e.currentDocument?void 0!==(u=e.currentDocument).updateTime?Zi.updateTime(Gs(u.updateTime)):void 0!==u.exists?Zi.exists(u.exists):Zi.none():Zi.none(),o=e.updateTransforms?e.updateTransforms.map(u=>function(d,g){let D=null;"setToServerValue"in g?(vn("REQUEST_TIME"===g.setToServerValue),D=new du):"appendMissingElements"in g?D=new Ba(g.appendMissingElements.values||[]):"removeAllFromArray"in g?D=new Qu(g.removeAllFromArray.values||[]):"increment"in g?D=new hu(d,g.increment):Qt();const L=mi.fromServerFormat(g.fieldPath);return new Tl(L,D)}(i,u)):[];var u;if(e.update){const u=E(i,e.update.name),d=new Cs({mapValue:{fields:e.update.fields}});if(e.updateMask){const g=new pi((e.updateMask.fieldPaths||[]).map(H=>mi.fromServerFormat(H)));return new ja(u,d,g,t,o)}return new Xu(u,d,t,o)}if(e.delete){const u=E(i,e.delete);return new Ml(u,t)}if(e.verify){const u=E(i,e.verify);return new id(u,t)}return Qt()}function Ec(i,e){return{documents:[B(i,e.path)]}}function tl(i,e){const t={structuredQuery:{}},o=e.path;null!==e.collectionGroup?(t.parent=B(i,o),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=B(i,o.popLast()),t.structuredQuery.from=[{collectionId:o.lastSegment()}]);const u=function(L){if(0===L.length)return;const H=L.map(Q=>function(ve){if("=="===ve.op){if(Za(ve.value))return{unaryFilter:{field:$a(ve.field),op:"IS_NAN"}};if(Ua(ve.value))return{unaryFilter:{field:$a(ve.field),op:"IS_NULL"}}}else if("!="===ve.op){if(Za(ve.value))return{unaryFilter:{field:$a(ve.field),op:"IS_NOT_NAN"}};if(Ua(ve.value))return{unaryFilter:{field:$a(ve.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:$a(ve.field),op:Yf(ve.op),value:ve.value}}}(Q));return 1===H.length?H[0]:{compositeFilter:{op:"AND",filters:H}}}(e.filters);u&&(t.structuredQuery.where=u);const d=function(L){if(0!==L.length)return L.map(H=>{return{field:$a((Q=H).field),direction:Kf(Q.dir)};var Q})}(e.orderBy);d&&(t.structuredQuery.orderBy=d);const g=(H=e.limit,i.gt||Pe(H)?H:{value:H});var H,D,L;return null!==g&&(t.structuredQuery.limit=g),e.startAt&&(t.structuredQuery.startAt={before:(D=e.startAt).inclusive,values:D.position}),e.endAt&&(t.structuredQuery.endAt={before:!(L=e.endAt).inclusive,values:L.position}),t}function ud(i){let e=Y(i.parent);const t=i.structuredQuery,o=t.from?t.from.length:0;let u=null;if(o>0){vn(1===o);const Q=t.from[0];Q.allDescendants?u=Q.collectionId:e=e.child(Q.collectionId)}let d=[];t.where&&(d=nl(t.where));let g=[];t.orderBy&&(g=t.orderBy.map(Q=>{return new lu(rl((ve=Q).field),function(Ge){switch(Ge){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(ve.direction));var ve}));let D=null;t.limit&&(D=function(Q){let ve;return ve="object"==typeof Q?Q.value:Q,Pe(ve)?null:ve}(t.limit));let L=null;var Q;t.startAt&&(L=new uu((Q=t.startAt).values||[],!!Q.before));let H=null;return t.endAt&&(H=function(Q){return new uu(Q.values||[],!Q.before)}(t.endAt)),Yu(e,u,g,d,D,"F",L,H)}function nl(i){return i?void 0!==i.unaryFilter?[ph(i)]:void 0!==i.fieldFilter?[Mg(i)]:void 0!==i.compositeFilter?i.compositeFilter.filters.map(e=>nl(e)).reduce((e,t)=>e.concat(t)):Qt():[]}function Kf(i){return hh[i]}function Yf(i){return qf[i]}function $a(i){return{fieldPath:i.canonicalString()}}function rl(i){return mi.fromServerFormat(i.fieldPath)}function Mg(i){return ao.create(rl(i.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Qt()}}(i.fieldFilter.op),i.fieldFilter.value)}function ph(i){switch(i.unaryFilter.op){case"IS_NAN":const e=rl(i.unaryFilter.field);return ao.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=rl(i.unaryFilter.field);return ao.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=rl(i.unaryFilter.field);return ao.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=rl(i.unaryFilter.field);return ao.create(u,"!=",{nullValue:"NULL_VALUE"});default:return Qt()}}function Rg(i){const e=[];return i.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function qy(i){return i.length>=4&&"projects"===i.get(0)&&"databases"===i.get(2)}function sa(i){let e="";for(let t=0;t<i.length;t++)e.length>0&&(e=gh(e)),e=Og(i.get(t),e);return gh(e)}function Og(i,e){let t=e;const o=i.length;for(let u=0;u<o;u++){const d=i.charAt(u);switch(d){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=d}}return t}function gh(i){return i+"\x01\x01"}function Ja(i){const e=i.length;if(vn(e>=2),2===e)return vn("\x01"===i.charAt(0)&&"\x01"===i.charAt(1)),gr.emptyPath();const t=e-2,o=[];let u="";for(let d=0;d<e;){const g=i.indexOf("\x01",d);switch((g<0||g>t)&&Qt(),i.charAt(g+1)){case"\x01":const D=i.substring(d,g);let L;0===u.length?L=D:(u+=D,L=u,u=""),o.push(L);break;case"\x10":u+=i.substring(d,g),u+="\0";break;case"\x11":u+=i.substring(d,g+1);break;default:Qt()}d=g+2}return new gr(o)}const Qf=["userId","batchId"];function ld(i,e){return[i,sa(e)]}function mh(i,e,t){return[i,sa(e),t]}const Zy={},Jf=["prefixPath","collectionGroup","readTime","documentId"],cd=["prefixPath","collectionGroup","documentId"],Ky=["collectionGroup","readTime","prefixPath","documentId"],Yy=["canonicalId","targetId"],Qy=["targetId","path"],Ng=["path","targetId"],Jy=["collectionId","parent"],Xy=["indexId","uid"],e_=["uid","sequenceNumber"],t_=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Xf=["indexId","uid","orderedDocumentKey"],n_=["userId","collectionPath","documentId"],r_=["userId","collectionPath","largestBatchId"],i_=["userId","collectionGroup","largestBatchId"],ep=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],s_=[...ep,"documentOverlays"],Pg=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Ko=Pg,tp=[...Ko,"indexConfiguration","indexState","indexEntries"];class yh extends na{constructor(e,t){super(),this.ie=e,this.currentSequenceNumber=t}}function Qs(i,e){const t=Ht(i);return Is.O(t.ie,e)}class Eo{constructor(e,t,o,u){this.batchId=e,this.localWriteTime=t,this.baseMutations=o,this.mutations=u}applyToRemoteDocument(e,t){const o=t.mutationResults;for(let u=0;u<this.mutations.length;u++){const d=this.mutations[u];d.key.isEqual(e.key)&&Wf(d,e,o[u])}}applyToLocalView(e,t){for(const o of this.baseMutations)o.key.isEqual(e.key)&&(t=xl(o,e,t,this.localWriteTime));for(const o of this.mutations)o.key.isEqual(e.key)&&(t=xl(o,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const o=od();return this.mutations.forEach(u=>{const d=e.get(u.key),g=d.overlayedDocument;let D=this.applyToLocalView(g,d.mutatedFields);D=t.has(u.key)?null:D;const L=Ts(g,D);null!==L&&o.set(u.key,L),g.isValidDocument()||g.convertToNoDocument(On.min())}),o}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Xn())}isEqual(e){return this.batchId===e.batchId&&wo(this.mutations,e.mutations,(t,o)=>Ou(t,o))&&wo(this.baseMutations,e.baseMutations,(t,o)=>Ou(t,o))}}class Fl{constructor(e,t,o,u){this.batch=e,this.commitVersion=t,this.mutationResults=o,this.docVersions=u}static from(e,t,o){vn(e.mutations.length===o.length);let u=ku;const d=e.mutations;for(let g=0;g<d.length;g++)u=u.insert(d[g].key,o[g].version);return new Fl(e,t,o,u)}}class dd{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class il{constructor(e,t,o,u,d=On.min(),g=On.min(),D=_i.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=o,this.sequenceNumber=u,this.snapshotVersion=d,this.lastLimboFreeSnapshotVersion=g,this.resumeToken=D}withSequenceNumber(e){return new il(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new il(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new il(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class kg{constructor(e){this.re=e}}function Lg(i,e){const t=e.key,o={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:hd(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())o.document={name:f(u=i.re,(d=e).key),fields:d.data.value.mapValue.fields,updateTime:Pl(u,d.version.toTimestamp())};else if(e.isNoDocument())o.noDocument={path:t.path.toArray(),readTime:Ll(e.version)};else{if(!e.isUnknownDocument())return Qt();o.unknownDocument={path:t.path.toArray(),version:Ll(e.version)}}var u,d;return o}function hd(i){const e=i.toTimestamp();return[e.seconds,e.nanoseconds]}function Ll(i){const e=i.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function sl(i){const e=new Ri(i.seconds,i.nanoseconds);return On.fromTimestamp(e)}function Vl(i,e){const t=(e.baseMutations||[]).map(d=>ia(i.re,d));for(let d=0;d<e.mutations.length-1;++d){const g=e.mutations[d];d+1<e.mutations.length&&void 0!==e.mutations[d+1].transform&&(g.updateTransforms=e.mutations[d+1].transform.fieldTransforms,e.mutations.splice(d+1,1),++d)}const o=e.mutations.map(d=>ia(i.re,d)),u=Ri.fromMillis(e.localWriteTimeMs);return new Eo(e.batchId,u,t,o)}function fd(i){const e=sl(i.readTime),t=void 0!==i.lastLimboFreeSnapshotVersion?sl(i.lastLimboFreeSnapshotVersion):On.min();let o;var u;return void 0!==i.query.documents?(vn(1===(u=i.query).documents.length),o=bs(Mu(Y(u.documents[0])))):o=bs(ud(i.query)),new il(o,i.targetId,0,i.lastListenSequenceNumber,e,t,_i.fromBase64String(i.resumeToken))}function Vg(i,e){const t=Ll(e.snapshotVersion),o=Ll(e.lastLimboFreeSnapshotVersion);let u;u=Il(e.target)?Ec(i.re,e.target):tl(i.re,e.target);const d=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Ku(e.target),readTime:t,resumeToken:d,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:o,query:u}}function np(i){const e=ud({parent:i.parent,structuredQuery:i.structuredQuery});return"LAST"===i.limitType?dc(e,e.limit,"L"):e}function rp(i,e){return new dd(e.largestBatchId,ia(i.re,e.overlayMutation))}function Ul(i,e){const t=e.path.lastSegment();return[i,sa(e.path.popLast()),t]}function mu(i,e,t,o){return{indexId:i,uid:e.uid||"",sequenceNumber:t,readTime:Ll(o.readTime),documentKey:sa(o.documentKey.path),largestBatchId:o.largestBatchId}}class o_{getBundleMetadata(e,t){return Ug(e).get(t).next(o=>{if(o)return{id:(u=o).bundleId,createTime:sl(u.createTime),version:u.version};var u})}saveBundleMetadata(e,t){return Ug(e).put({bundleId:(o=t).id,createTime:Ll(Gs(o.createTime)),version:o.version});var o}getNamedQuery(e,t){return a_(e).get(t).next(o=>{if(o)return{name:(u=o).name,query:np(u.bundledQuery),readTime:sl(u.readTime)};var u})}saveNamedQuery(e,t){return a_(e).put({name:(o=t).name,readTime:Ll(Gs(o.readTime)),bundledQuery:o.bundledQuery});var o}}function Ug(i){return Qs(i,"bundles")}function a_(i){return Qs(i,"namedQueries")}class ip{constructor(e,t){this.It=e,this.userId=t}static oe(e,t){return new ip(e,t.uid||"")}getOverlay(e,t){return Ic(e).get(Ul(this.userId,t)).next(o=>o?rp(this.It,o):null)}getOverlays(e,t){const o=Zo();return Ze.forEach(t,u=>this.getOverlay(e,u).next(d=>{null!==d&&o.set(u,d)})).next(()=>o)}saveOverlays(e,t,o){const u=[];return o.forEach((d,g)=>{const D=new dd(t,g);u.push(this.ue(e,D))}),Ze.waitFor(u)}removeOverlaysForBatchId(e,t,o){const u=new Set;t.forEach(g=>u.add(sa(g.getCollectionPath())));const d=[];return u.forEach(g=>{const D=IDBKeyRange.bound([this.userId,g,o],[this.userId,g,o+1],!1,!0);d.push(Ic(e).Y("collectionPathOverlayIndex",D))}),Ze.waitFor(d)}getOverlaysForCollection(e,t,o){const u=Zo(),d=sa(t),g=IDBKeyRange.bound([this.userId,d,o],[this.userId,d,Number.POSITIVE_INFINITY],!0);return Ic(e).W("collectionPathOverlayIndex",g).next(D=>{for(const L of D){const H=rp(this.It,L);u.set(H.getKey(),H)}return u})}getOverlaysForCollectionGroup(e,t,o,u){const d=Zo();let g;const D=IDBKeyRange.bound([this.userId,t,o],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Ic(e).Z({index:"collectionGroupOverlayIndex",range:D},(L,H,Q)=>{const ve=rp(this.It,H);d.size()<u||ve.largestBatchId===g?(d.set(ve.getKey(),ve),g=ve.largestBatchId):Q.done()}).next(()=>d)}ue(e,t){return Ic(e).put(function(o,u,d){const[g,D,L]=Ul(u,d.mutation.key);return{userId:u,collectionPath:D,documentId:L,collectionGroup:d.mutation.key.getCollectionGroup(),largestBatchId:d.largestBatchId,overlayMutation:ns(o.re,d.mutation)}}(this.It,this.userId,t))}}function Ic(i){return Qs(i,"documentOverlays")}class Dc{constructor(){}ce(e,t){this.ae(e,t),t.he()}ae(e,t){if("nullValue"in e)this.le(t,5);else if("booleanValue"in e)this.le(t,10),t.fe(e.booleanValue?1:0);else if("integerValue"in e)this.le(t,15),t.fe(ki(e.integerValue));else if("doubleValue"in e){const o=ki(e.doubleValue);isNaN(o)?this.le(t,13):(this.le(t,15),Qe(o)?t.fe(0):t.fe(o))}else if("timestampValue"in e){const o=e.timestampValue;this.le(t,20),"string"==typeof o?t.de(o):(t.de(`${o.seconds||""}`),t.fe(o.nanos||0))}else if("stringValue"in e)this._e(e.stringValue,t),this.we(t);else if("bytesValue"in e)this.le(t,30),t.me(vi(e.bytesValue)),this.we(t);else if("referenceValue"in e)this.ge(e.referenceValue,t);else if("geoPointValue"in e){const o=e.geoPointValue;this.le(t,45),t.fe(o.latitude||0),t.fe(o.longitude||0)}else"mapValue"in e?zc(e)?this.le(t,Number.MAX_SAFE_INTEGER):(this.ye(e.mapValue,t),this.we(t)):"arrayValue"in e?(this.pe(e.arrayValue,t),this.we(t)):Qt()}_e(e,t){this.le(t,25),this.Ie(e,t)}Ie(e,t){t.de(e)}ye(e,t){const o=e.fields||{};this.le(t,55);for(const u of Object.keys(o))this._e(u,t),this.ae(o[u],t)}pe(e,t){const o=e.values||[];this.le(t,50);for(const u of o)this.ae(u,t)}ge(e,t){this.le(t,37),zt.fromName(e).path.forEach(o=>{this.le(t,60),this.Ie(o,t)})}le(e,t){e.fe(t)}we(e){e.fe(2)}}function yu(i){if(0===i)return 8;let e=0;return i>>4==0&&(e+=4,i<<=4),i>>6==0&&(e+=2,i<<=2),i>>7==0&&(e+=1),e}function _h(i){const e=64-function(t){let o=0;for(let u=0;u<8;++u){const d=yu(255&t[u]);if(o+=d,8!==d)break}return o}(i);return Math.ceil(e/8)}Dc.Te=new Dc;class sp{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ee(e){const t=e[Symbol.iterator]();let o=t.next();for(;!o.done;)this.Ae(o.value),o=t.next();this.Re()}be(e){const t=e[Symbol.iterator]();let o=t.next();for(;!o.done;)this.Pe(o.value),o=t.next();this.ve()}Ve(e){for(const t of e){const o=t.charCodeAt(0);if(o<128)this.Ae(o);else if(o<2048)this.Ae(960|o>>>6),this.Ae(128|63&o);else if(t<"\ud800"||"\udbff"<t)this.Ae(480|o>>>12),this.Ae(128|63&o>>>6),this.Ae(128|63&o);else{const u=t.codePointAt(0);this.Ae(240|u>>>18),this.Ae(128|63&u>>>12),this.Ae(128|63&u>>>6),this.Ae(128|63&u)}}this.Re()}Se(e){for(const t of e){const o=t.charCodeAt(0);if(o<128)this.Pe(o);else if(o<2048)this.Pe(960|o>>>6),this.Pe(128|63&o);else if(t<"\ud800"||"\udbff"<t)this.Pe(480|o>>>12),this.Pe(128|63&o>>>6),this.Pe(128|63&o);else{const u=t.codePointAt(0);this.Pe(240|u>>>18),this.Pe(128|63&u>>>12),this.Pe(128|63&u>>>6),this.Pe(128|63&u)}}this.ve()}De(e){const t=this.Ce(e),o=_h(t);this.xe(1+o),this.buffer[this.position++]=255&o;for(let u=t.length-o;u<t.length;++u)this.buffer[this.position++]=255&t[u]}Ne(e){const t=this.Ce(e),o=_h(t);this.xe(1+o),this.buffer[this.position++]=~(255&o);for(let u=t.length-o;u<t.length;++u)this.buffer[this.position++]=~(255&t[u])}ke(){this.Me(255),this.Me(255)}Oe(){this.Fe(255),this.Fe(255)}reset(){this.position=0}seed(e){this.xe(e.length),this.buffer.set(e,this.position),this.position+=e.length}$e(){return this.buffer.slice(0,this.position)}Ce(e){const t=function(u){const d=new DataView(new ArrayBuffer(8));return d.setFloat64(0,u,!1),new Uint8Array(d.buffer)}(e),o=0!=(128&t[0]);t[0]^=o?255:128;for(let u=1;u<t.length;++u)t[u]^=o?255:0;return t}Ae(e){const t=255&e;0===t?(this.Me(0),this.Me(255)):255===t?(this.Me(255),this.Me(0)):this.Me(t)}Pe(e){const t=255&e;0===t?(this.Fe(0),this.Fe(255)):255===t?(this.Fe(255),this.Fe(0)):this.Fe(e)}Re(){this.Me(0),this.Me(1)}ve(){this.Fe(0),this.Fe(1)}Me(e){this.xe(1),this.buffer[this.position++]=e}Fe(e){this.xe(1),this.buffer[this.position++]=~e}xe(e){const t=e+this.position;if(t<=this.buffer.length)return;let o=2*this.buffer.length;o<t&&(o=t);const u=new Uint8Array(o);u.set(this.buffer),this.buffer=u}}class u_{constructor(e){this.Be=e}me(e){this.Be.Ee(e)}de(e){this.Be.Ve(e)}fe(e){this.Be.De(e)}he(){this.Be.ke()}}class Bg{constructor(e){this.Be=e}me(e){this.Be.be(e)}de(e){this.Be.Se(e)}fe(e){this.Be.Ne(e)}he(){this.Be.Oe()}}class pd{constructor(){this.Be=new sp,this.Le=new u_(this.Be),this.Ue=new Bg(this.Be)}seed(e){this.Be.seed(e)}qe(e){return 0===e?this.Le:this.Ue}$e(){return this.Be.$e()}reset(){this.Be.reset()}}class Xa{constructor(e,t,o,u){this.indexId=e,this.documentKey=t,this.arrayValue=o,this.directionalValue=u}Ke(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,o=new Uint8Array(t);return o.set(this.directionalValue,0),t!==e?o.set([0],this.directionalValue.length):++o[o.length-1],new Xa(this.indexId,this.documentKey,this.arrayValue,o)}}function Bl(i,e){let t=i.indexId-e.indexId;return 0!==t?t:(t=jg(i.arrayValue,e.arrayValue),0!==t?t:(t=jg(i.directionalValue,e.directionalValue),0!==t?t:zt.comparator(i.documentKey,e.documentKey)))}function jg(i,e){for(let t=0;t<i.length&&t<e.length;++t){const o=i[t]-e[t];if(0!==o)return o}return i.length-e.length}class op{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ge=e.orderBy,this.Qe=[];for(const t of e.filters){const o=t;o.dt()?this.je=o:this.Qe.push(o)}}We(e){const t=qu(e);if(void 0!==t&&!this.ze(t))return!1;const o=Wa(e);let u=0,d=0;for(;u<o.length&&this.ze(o[u]);++u);if(u===o.length)return!0;if(void 0!==this.je){const g=o[u];if(!this.He(this.je,g)||!this.Je(this.Ge[d++],g))return!1;++u}for(;u<o.length;++u){const g=o[u];if(d>=this.Ge.length||!this.Je(this.Ge[d++],g))return!1}return!0}ze(e){for(const t of this.Qe)if(this.He(t,e))return!0;return!1}He(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Je(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class ap{constructor(){this.Ye=new vh}addToCollectionParentIndex(e,t){return this.Ye.add(t),Ze.resolve()}getCollectionParents(e,t){return Ze.resolve(this.Ye.getEntries(t))}addFieldIndex(e,t){return Ze.resolve()}deleteFieldIndex(e,t){return Ze.resolve()}getDocumentsMatchingTarget(e,t){return Ze.resolve(null)}getIndexType(e,t){return Ze.resolve(0)}getFieldIndexes(e,t){return Ze.resolve([])}getNextCollectionGroupToUpdate(e){return Ze.resolve(null)}getMinOffset(e,t){return Ze.resolve(yi.min())}getMinOffsetFromCollectionGroup(e,t){return Ze.resolve(yi.min())}updateCollectionGroup(e,t,o){return Ze.resolve()}updateIndexEntries(e,t){return Ze.resolve()}}class vh{constructor(){this.index={}}add(e){const t=e.lastSegment(),o=e.popLast(),u=this.index[t]||new zn(gr.comparator),d=!u.has(o);return this.index[t]=u.add(o),d}has(e){const t=e.lastSegment(),o=e.popLast(),u=this.index[t];return u&&u.has(o)}getEntries(e){return(this.index[e]||new zn(gr.comparator)).toArray()}}const up=new Uint8Array(0);class Cc{constructor(e,t){this.user=e,this.databaseId=t,this.Xe=new vh,this.Ze=new fu(o=>Ku(o),(o,u)=>El(o,u)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Xe.has(t)){const o=t.lastSegment(),u=t.popLast();e.addOnCommittedListener(()=>{this.Xe.add(t)});const d={collectionId:o,parent:sa(u)};return wh(e).put(d)}return Ze.resolve()}getCollectionParents(e,t){const o=[],u=IDBKeyRange.bound([t,""],[Pr(t),""],!1,!0);return wh(e).W(u).next(d=>{for(const g of d){if(g.collectionId!==t)break;o.push(Ja(g.parent))}return o})}addFieldIndex(e,t){const o=Eh(e),u={indexId:(g=t).indexId,collectionGroup:g.collectionGroup,fields:g.fields.map(D=>[D.fieldPath.canonicalString(),D.kind])};var g;delete u.indexId;const d=o.add(u);if(t.indexState){const g=jl(e);return d.next(D=>{g.put(mu(D,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return d.next()}deleteFieldIndex(e,t){const o=Eh(e),u=jl(e),d=bc(e);return o.delete(t.indexId).next(()=>u.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>d.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const o=bc(e);let u=!0;const d=new Map;return Ze.forEach(this.tn(t),g=>this.en(e,g).next(D=>{u&&(u=!!D),d.set(g,D)})).next(()=>{if(u){let g=Xn();const D=[];return Ze.forEach(d,(L,H)=>{var Q;Tt("IndexedDbIndexManager",`Using index ${Q=L,`id=${Q.indexId}|cg=${Q.collectionGroup}|f=${Q.fields.map(jr=>`${jr.fieldPath}:${jr.kind}`).join(",")}`} to execute ${Ku(t)}`);const ve=function(jr,As){const li=qu(As);if(void 0===li)return null;for(const wi of Ka(jr,li.fieldPath))switch(wi.op){case"array-contains-any":return wi.value.arrayValue.values||[];case"array-contains":return[wi.value]}return null}(H,L),Ge=function(jr,As){const li=new Map;for(const wi of Wa(As))for(const Js of Ka(jr,wi.fieldPath))switch(Js.op){case"==":case"in":li.set(wi.fieldPath.canonicalString(),Js.value);break;case"not-in":case"!=":return li.set(wi.fieldPath.canonicalString(),Js.value),Array.from(li.values())}return null}(H,L),lt=function(jr,As){const li=[];let wi=!0;for(const Js of Wa(As)){const $c=0===Js.kind?ac(jr,Js.fieldPath,jr.startAt):xu(jr,Js.fieldPath,jr.startAt);li.push($c.value),wi&&(wi=$c.inclusive)}return new uu(li,wi)}(H,L),gt=function(jr,As){const li=[];let wi=!0;for(const Js of Wa(As)){const $c=0===Js.kind?xu(jr,Js.fieldPath,jr.endAt):ac(jr,Js.fieldPath,jr.endAt);li.push($c.value),wi&&(wi=$c.inclusive)}return new uu(li,wi)}(H,L),Kt=this.nn(L,H,lt),fn=this.nn(L,H,gt),Kr=this.sn(L,H,Ge),ui=this.rn(L.indexId,ve,Kt,lt.inclusive,fn,gt.inclusive,Kr);return Ze.forEach(ui,jr=>o.J(jr,t.limit).next(As=>{As.forEach(li=>{const wi=zt.fromSegments(li.documentKey);g.has(wi)||(g=g.add(wi),D.push(wi))})}))}).next(()=>D)}return Ze.resolve(null)})}tn(e){let t=this.Ze.get(e);return t||(t=[e],this.Ze.set(e,t),t)}rn(e,t,o,u,d,g,D){const L=(null!=t?t.length:1)*Math.max(o.length,d.length),H=L/(null!=t?t.length:1),Q=[];for(let ve=0;ve<L;++ve){const Ge=t?this.on(t[ve/H]):up,lt=this.un(e,Ge,o[ve%H],u),gt=this.cn(e,Ge,d[ve%H],g),Kt=D.map(fn=>this.un(e,Ge,fn,!0));Q.push(...this.createRange(lt,gt,Kt))}return Q}un(e,t,o,u){const d=new Xa(e,zt.empty(),t,o);return u?d:d.Ke()}cn(e,t,o,u){const d=new Xa(e,zt.empty(),t,o);return u?d.Ke():d}en(e,t){const o=new op(t),u=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,u).next(d=>{let g=null;for(const D of d)o.We(D)&&(!g||D.fields.length>g.fields.length)&&(g=D);return g})}getIndexType(e,t){let o=2;return Ze.forEach(this.tn(t),u=>this.en(e,u).next(d=>{d?0!==o&&d.fields.length<function(g){let D=new zn(mi.comparator),L=!1;for(const H of g.filters){const Q=H;Q.field.isKeyField()||("array-contains"===Q.op||"array-contains-any"===Q.op?L=!0:D=D.add(Q.field))}for(const H of g.orderBy)H.field.isKeyField()||(D=D.add(H.field));return D.size+(L?1:0)}(u)&&(o=1):o=0})).next(()=>o)}an(e,t){const o=new pd;for(const u of Wa(e)){const d=t.data.field(u.fieldPath);if(null==d)return null;const g=o.qe(u.kind);Dc.Te.ce(d,g)}return o.$e()}on(e){const t=new pd;return Dc.Te.ce(e,t.qe(0)),t.$e()}hn(e,t){const o=new pd;return Dc.Te.ce(xo(this.databaseId,t),o.qe(function(u){const d=Wa(u);return 0===d.length?0:d[d.length-1].kind}(e))),o.$e()}sn(e,t,o){if(null===o)return[];let u=[];u.push(new pd);let d=0;for(const g of Wa(e)){const D=o[d++];for(const L of u)if(this.ln(t,g.fieldPath)&&Wo(D))u=this.fn(u,g,D);else{const H=L.qe(g.kind);Dc.Te.ce(D,H)}}return this.dn(u)}nn(e,t,o){return this.sn(e,t,o.position)}dn(e){const t=[];for(let o=0;o<e.length;++o)t[o]=e[o].$e();return t}fn(e,t,o){const u=[...e],d=[];for(const g of o.arrayValue.values||[])for(const D of u){const L=new pd;L.seed(D.$e()),Dc.Te.ce(g,L.qe(t.kind)),d.push(L)}return d}ln(e,t){return!!e.filters.find(o=>o instanceof ao&&o.field.isEqual(t)&&("in"===o.op||"not-in"===o.op))}getFieldIndexes(e,t){const o=Eh(e),u=jl(e);return(t?o.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):o.W()).next(d=>{const g=[];return Ze.forEach(d,D=>u.get([D.indexId,this.uid]).next(L=>{g.push(function(H,Q){const ve=Q?new su(Q.sequenceNumber,new yi(sl(Q.readTime),new zt(Ja(Q.documentKey)),Q.largestBatchId)):su.empty(),Ge=H.fields.map(([lt,gt])=>new Da(mi.fromServerFormat(lt),gt));return new ta(H.indexId,H.collectionGroup,Ge,ve)}(D,L))})).next(()=>g)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((o,u)=>{const d=o.indexState.sequenceNumber-u.indexState.sequenceNumber;return 0!==d?d:In(o.collectionGroup,u.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,o){const u=Eh(e),d=jl(e);return this._n(e).next(g=>u.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(D=>Ze.forEach(D,L=>d.put(mu(L.indexId,this.user,g,o)))))}updateIndexEntries(e,t){const o=new Map;return Ze.forEach(t,(u,d)=>{const g=o.get(u.collectionGroup);return(g?Ze.resolve(g):this.getFieldIndexes(e,u.collectionGroup)).next(D=>(o.set(u.collectionGroup,D),Ze.forEach(D,L=>this.wn(e,u,L).next(H=>{const Q=this.mn(d,L);return H.isEqual(Q)?Ze.resolve():this.gn(e,d,L,H,Q)}))))})}yn(e,t,o,u){return bc(e).put({indexId:u.indexId,uid:this.uid,arrayValue:u.arrayValue,directionalValue:u.directionalValue,orderedDocumentKey:this.hn(o,t.key),documentKey:t.key.path.toArray()})}pn(e,t,o,u){return bc(e).delete([u.indexId,this.uid,u.arrayValue,u.directionalValue,this.hn(o,t.key),t.key.path.toArray()])}wn(e,t,o){const u=bc(e);let d=new zn(Bl);return u.Z({index:"documentKeyIndex",range:IDBKeyRange.only([o.indexId,this.uid,this.hn(o,t)])},(g,D)=>{d=d.add(new Xa(o.indexId,t,D.arrayValue,D.directionalValue))}).next(()=>d)}mn(e,t){let o=new zn(Bl);const u=this.an(t,e);if(null==u)return o;const d=qu(t);if(null!=d){const g=e.data.field(d.fieldPath);if(Wo(g))for(const D of g.arrayValue.values||[])o=o.add(new Xa(t.indexId,e.key,this.on(D),u))}else o=o.add(new Xa(t.indexId,e.key,up,u));return o}gn(e,t,o,u,d){Tt("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const g=[];return function(D,L,H,Q,ve){const Ge=D.getIterator(),lt=L.getIterator();let gt=qi(Ge),Kt=qi(lt);for(;gt||Kt;){let fn=!1,Kr=!1;if(gt&&Kt){const ui=H(gt,Kt);ui<0?Kr=!0:ui>0&&(fn=!0)}else null!=gt?Kr=!0:fn=!0;fn?(Q(Kt),Kt=qi(lt)):Kr?(ve(gt),gt=qi(Ge)):(gt=qi(Ge),Kt=qi(lt))}}(u,d,Bl,D=>{g.push(this.yn(e,t,o,D))},D=>{g.push(this.pn(e,t,o,D))}),Ze.waitFor(g)}_n(e){let t=1;return jl(e).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(o,u,d)=>{d.done(),t=u.sequenceNumber+1}).next(()=>t)}createRange(e,t,o){o=o.sort((g,D)=>Bl(g,D)).filter((g,D,L)=>!D||0!==Bl(g,L[D-1]));const u=[];u.push(e);for(const g of o){const D=Bl(g,e),L=Bl(g,t);if(0===D)u[0]=e.Ke();else if(D>0&&L<0)u.push(g),u.push(g.Ke());else if(L>0)break}u.push(t);const d=[];for(let g=0;g<u.length;g+=2)d.push(IDBKeyRange.bound([u[g].indexId,this.uid,u[g].arrayValue,u[g].directionalValue,up,[]],[u[g+1].indexId,this.uid,u[g+1].arrayValue,u[g+1].directionalValue,up,[]]));return d}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next($g)}getMinOffset(e,t){return Ze.mapArray(this.tn(t),o=>this.en(e,o).next(u=>u||Qt())).next($g)}}function wh(i){return Qs(i,"collectionParents")}function bc(i){return Qs(i,"indexEntries")}function Eh(i){return Qs(i,"indexConfiguration")}function jl(i){return Qs(i,"indexState")}function $g(i){vn(0!==i.length);let e=i[0].indexState.offset,t=e.largestBatchId;for(let o=1;o<i.length;o++){const u=i[o].indexState.offset;ou(u,e)<0&&(e=u),t<u.largestBatchId&&(t=u.largestBatchId)}return new yi(e.readTime,e.documentKey,t)}const Hg={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class _a{constructor(e,t,o){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=o}static withCacheSize(e){return new _a(e,_a.DEFAULT_COLLECTION_PERCENTILE,_a.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function Gg(i,e,t){const o=i.store("mutations"),u=i.store("documentMutations"),d=[],g=IDBKeyRange.only(t.batchId);let D=0;const L=o.Z({range:g},(Q,ve,Ge)=>(D++,Ge.delete()));d.push(L.next(()=>{vn(1===D)}));const H=[];for(const Q of t.mutations){const ve=mh(e,Q.key.path,t.batchId);d.push(u.delete(ve)),H.push(Q.key)}return Ze.waitFor(d).next(()=>H)}function Ih(i){if(!i)return 0;let e;if(i.document)e=i.document;else if(i.unknownDocument)e=i.unknownDocument;else{if(!i.noDocument)throw Qt();e=i.noDocument}return JSON.stringify(e).length}_a.DEFAULT_COLLECTION_PERCENTILE=10,_a.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,_a.DEFAULT=new _a(41943040,_a.DEFAULT_COLLECTION_PERCENTILE,_a.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),_a.DISABLED=new _a(-1,0,0);class Dh{constructor(e,t,o,u){this.userId=e,this.It=t,this.indexManager=o,this.referenceDelegate=u,this.In={}}static oe(e,t,o,u){vn(""!==e.uid);const d=e.isAuthenticated()?e.uid:"";return new Dh(d,t,o,u)}checkEmpty(e){let t=!0;const o=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return _u(e).Z({index:"userMutationsIndex",range:o},(u,d,g)=>{t=!1,g.done()}).next(()=>t)}addMutationBatch(e,t,o,u){const d=$l(e),g=_u(e);return g.add({}).next(D=>{vn("number"==typeof D);const L=new Eo(D,t,o,u),H=function(Ge,lt,gt){const Kt=gt.baseMutations.map(Kr=>ns(Ge.re,Kr)),fn=gt.mutations.map(Kr=>ns(Ge.re,Kr));return{userId:lt,batchId:gt.batchId,localWriteTimeMs:gt.localWriteTime.toMillis(),baseMutations:Kt,mutations:fn}}(this.It,this.userId,L),Q=[];let ve=new zn((Ge,lt)=>In(Ge.canonicalString(),lt.canonicalString()));for(const Ge of u){const lt=mh(this.userId,Ge.key.path,D);ve=ve.add(Ge.key.path.popLast()),Q.push(g.put(H)),Q.push(d.put(lt,Zy))}return ve.forEach(Ge=>{Q.push(this.indexManager.addToCollectionParentIndex(e,Ge))}),e.addOnCommittedListener(()=>{this.In[D]=L.keys()}),Ze.waitFor(Q).next(()=>L)})}lookupMutationBatch(e,t){return _u(e).get(t).next(o=>o?(vn(o.userId===this.userId),Vl(this.It,o)):null)}Tn(e,t){return this.In[t]?Ze.resolve(this.In[t]):this.lookupMutationBatch(e,t).next(o=>{if(o){const u=o.keys();return this.In[t]=u,u}return null})}getNextMutationBatchAfterBatchId(e,t){const o=t+1,u=IDBKeyRange.lowerBound([this.userId,o]);let d=null;return _u(e).Z({index:"userMutationsIndex",range:u},(g,D,L)=>{D.userId===this.userId&&(vn(D.batchId>=o),d=Vl(this.It,D)),L.done()}).next(()=>d)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let o=-1;return _u(e).Z({index:"userMutationsIndex",range:t,reverse:!0},(u,d,g)=>{o=d.batchId,g.done()}).next(()=>o)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return _u(e).W("userMutationsIndex",t).next(o=>o.map(u=>Vl(this.It,u)))}getAllMutationBatchesAffectingDocumentKey(e,t){const o=ld(this.userId,t.path),u=IDBKeyRange.lowerBound(o),d=[];return $l(e).Z({range:u},(g,D,L)=>{const[H,Q,ve]=g,Ge=Ja(Q);if(H===this.userId&&t.path.isEqual(Ge))return _u(e).get(ve).next(lt=>{if(!lt)throw Qt();vn(lt.userId===this.userId),d.push(Vl(this.It,lt))});L.done()}).next(()=>d)}getAllMutationBatchesAffectingDocumentKeys(e,t){let o=new zn(In);const u=[];return t.forEach(d=>{const g=ld(this.userId,d.path),D=IDBKeyRange.lowerBound(g),L=$l(e).Z({range:D},(H,Q,ve)=>{const[Ge,lt,gt]=H,Kt=Ja(lt);Ge===this.userId&&d.path.isEqual(Kt)?o=o.add(gt):ve.done()});u.push(L)}),Ze.waitFor(u).next(()=>this.En(e,o))}getAllMutationBatchesAffectingQuery(e,t){const o=t.path,u=o.length+1,d=ld(this.userId,o),g=IDBKeyRange.lowerBound(d);let D=new zn(In);return $l(e).Z({range:g},(L,H,Q)=>{const[ve,Ge,lt]=L,gt=Ja(Ge);ve===this.userId&&o.isPrefixOf(gt)?gt.length===u&&(D=D.add(lt)):Q.done()}).next(()=>this.En(e,D))}En(e,t){const o=[],u=[];return t.forEach(d=>{u.push(_u(e).get(d).next(g=>{if(null===g)throw Qt();vn(g.userId===this.userId),o.push(Vl(this.It,g))}))}),Ze.waitFor(u).next(()=>o)}removeMutationBatch(e,t){return Gg(e.ie,this.userId,t).next(o=>(e.addOnCommittedListener(()=>{this.An(t.batchId)}),Ze.forEach(o,u=>this.referenceDelegate.markPotentiallyOrphaned(e,u))))}An(e){delete this.In[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return Ze.resolve();const o=IDBKeyRange.lowerBound([this.userId]),u=[];return $l(e).Z({range:o},(d,g,D)=>{if(d[0]===this.userId){const L=Ja(d[1]);u.push(L)}else D.done()}).next(()=>{vn(0===u.length)})})}containsKey(e,t){return lp(e,this.userId,t)}Rn(e){return Ch(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function lp(i,e,t){const o=ld(e,t.path),u=o[1],d=IDBKeyRange.lowerBound(o);let g=!1;return $l(i).Z({range:d,X:!0},(D,L,H)=>{const[Q,ve,Ge]=D;Q===e&&ve===u&&(g=!0),H.done()}).next(()=>g)}function _u(i){return Qs(i,"mutations")}function $l(i){return Qs(i,"documentMutations")}function Ch(i){return Qs(i,"mutationQueues")}class Hl{constructor(e){this.bn=e}next(){return this.bn+=2,this.bn}static Pn(){return new Hl(0)}static vn(){return new Hl(-1)}}class l_{constructor(e,t){this.referenceDelegate=e,this.It=t}allocateTargetId(e){return this.Vn(e).next(t=>{const o=new Hl(t.highestTargetId);return t.highestTargetId=o.next(),this.Sn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Vn(e).next(t=>On.fromTimestamp(new Ri(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Vn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,o){return this.Vn(e).next(u=>(u.highestListenSequenceNumber=t,o&&(u.lastRemoteSnapshotVersion=o.toTimestamp()),t>u.highestListenSequenceNumber&&(u.highestListenSequenceNumber=t),this.Sn(e,u)))}addTargetData(e,t){return this.Dn(e,t).next(()=>this.Vn(e).next(o=>(o.targetCount+=1,this.Cn(t,o),this.Sn(e,o))))}updateTargetData(e,t){return this.Dn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Gl(e).delete(t.targetId)).next(()=>this.Vn(e)).next(o=>(vn(o.targetCount>0),o.targetCount-=1,this.Sn(e,o)))}removeTargets(e,t,o){let u=0;const d=[];return Gl(e).Z((g,D)=>{const L=fd(D);L.sequenceNumber<=t&&null===o.get(L.targetId)&&(u++,d.push(this.removeTargetData(e,L)))}).next(()=>Ze.waitFor(d)).next(()=>u)}forEachTarget(e,t){return Gl(e).Z((o,u)=>{const d=fd(u);t(d)})}Vn(e){return cp(e).get("targetGlobalKey").next(t=>(vn(null!==t),t))}Sn(e,t){return cp(e).put("targetGlobalKey",t)}Dn(e,t){return Gl(e).put(Vg(this.It,t))}Cn(e,t){let o=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,o=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,o=!0),o}getTargetCount(e){return this.Vn(e).next(t=>t.targetCount)}getTargetData(e,t){const o=Ku(t),u=IDBKeyRange.bound([o,Number.NEGATIVE_INFINITY],[o,Number.POSITIVE_INFINITY]);let d=null;return Gl(e).Z({range:u,index:"queryTargetsIndex"},(g,D,L)=>{const H=fd(D);El(t,H.target)&&(d=H,L.done())}).next(()=>d)}addMatchingKeys(e,t,o){const u=[],d=va(e);return t.forEach(g=>{const D=sa(g.path);u.push(d.put({targetId:o,path:D})),u.push(this.referenceDelegate.addReference(e,o,g))}),Ze.waitFor(u)}removeMatchingKeys(e,t,o){const u=va(e);return Ze.forEach(t,d=>{const g=sa(d.path);return Ze.waitFor([u.delete([o,g]),this.referenceDelegate.removeReference(e,o,d)])})}removeMatchingKeysForTargetId(e,t){const o=va(e),u=IDBKeyRange.bound([t],[t+1],!1,!0);return o.delete(u)}getMatchingKeysForTargetId(e,t){const o=IDBKeyRange.bound([t],[t+1],!1,!0),u=va(e);let d=Xn();return u.Z({range:o,X:!0},(g,D,L)=>{const H=Ja(g[1]),Q=new zt(H);d=d.add(Q)}).next(()=>d)}containsKey(e,t){const o=sa(t.path),u=IDBKeyRange.bound([o],[Pr(o)],!1,!0);let d=0;return va(e).Z({index:"documentTargetsIndex",X:!0,range:u},([g,D],L,H)=>{0!==g&&(d++,H.done())}).next(()=>d>0)}se(e,t){return Gl(e).get(t).next(o=>o?fd(o):null)}}function Gl(i){return Qs(i,"targets")}function cp(i){return Qs(i,"targetGlobal")}function va(i){return Qs(i,"targetDocuments")}function dp([i,e],[t,o]){const u=In(i,t);return 0===u?In(e,o):u}class zg{constructor(e){this.xn=e,this.buffer=new zn(dp),this.Nn=0}kn(){return++this.Nn}Mn(e){const t=[e,this.kn()];if(this.buffer.size<this.xn)this.buffer=this.buffer.add(t);else{const o=this.buffer.last();dp(t,o)<0&&(this.buffer=this.buffer.delete(o).add(t))}}get maxValue(){return this.buffer.last()[0]}}class c_{constructor(e,t,o){this.garbageCollector=e,this.asyncQueue=t,this.localStore=o,this.On=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Fn(6e4)}stop(){this.On&&(this.On.cancel(),this.On=null)}get started(){return null!==this.On}Fn(e){var t=this;Tt("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.On=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,he.Z)(function*(){t.On=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(o){Ao(o)?Tt("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",o):yield So(o)}yield t.Fn(3e5)}))}}class a0{constructor(e,t){this.$n=e,this.params=t}calculateTargetCount(e,t){return this.$n.Bn(e).next(o=>Math.floor(t/100*o))}nthSequenceNumber(e,t){if(0===t)return Ze.resolve(te.at);const o=new zg(t);return this.$n.forEachTarget(e,u=>o.Mn(u.sequenceNumber)).next(()=>this.$n.Ln(e,u=>o.Mn(u))).next(()=>o.maxValue)}removeTargets(e,t,o){return this.$n.removeTargets(e,t,o)}removeOrphanedDocuments(e,t){return this.$n.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Tt("LruGarbageCollector","Garbage collection skipped; disabled"),Ze.resolve(Hg)):this.getCacheSize(e).next(o=>o<this.params.cacheSizeCollectionThreshold?(Tt("LruGarbageCollector",`Garbage collection skipped; Cache size ${o} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Hg):this.Un(e,t))}getCacheSize(e){return this.$n.getCacheSize(e)}Un(e,t){let o,u,d,g,D,L,H;const Q=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(ve=>(ve>this.params.maximumSequenceNumbersToCollect?(Tt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${ve}`),u=this.params.maximumSequenceNumbersToCollect):u=ve,g=Date.now(),this.nthSequenceNumber(e,u))).next(ve=>(o=ve,D=Date.now(),this.removeTargets(e,o,t))).next(ve=>(d=ve,L=Date.now(),this.removeOrphanedDocuments(e,o))).next(ve=>(H=Date.now(),Oa()<=_t.in.DEBUG&&Tt("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${g-Q}ms\n\tDetermined least recently used ${u} in `+(D-g)+`ms\n\tRemoved ${d} targets in `+(L-D)+`ms\n\tRemoved ${ve} documents in `+(H-L)+`ms\nTotal Duration: ${H-Q}ms`),Ze.resolve({didRun:!0,sequenceNumbersCollected:u,targetsRemoved:d,documentsRemoved:ve})))}}class bh{constructor(e,t){this.db=e,this.garbageCollector=new a0(this,t)}Bn(e){const t=this.qn(e);return this.db.getTargetCache().getTargetCount(e).next(o=>t.next(u=>o+u))}qn(e){let t=0;return this.Ln(e,o=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Ln(e,t){return this.Kn(e,(o,u)=>t(u))}addReference(e,t,o){return Th(e,o)}removeReference(e,t,o){return Th(e,o)}removeTargets(e,t,o){return this.db.getTargetCache().removeTargets(e,t,o)}markPotentiallyOrphaned(e,t){return Th(e,t)}Gn(e,t){return function(o,u){let d=!1;return Ch(o).tt(g=>lp(o,g,u).next(D=>(D&&(d=!0),Ze.resolve(!D)))).next(()=>d)}(e,t)}removeOrphanedDocuments(e,t){const o=this.db.getRemoteDocumentCache().newChangeBuffer(),u=[];let d=0;return this.Kn(e,(g,D)=>{if(D<=t){const L=this.Gn(e,g).next(H=>{if(!H)return d++,o.getEntry(e,g).next(()=>(o.removeEntry(g,On.min()),va(e).delete([0,sa(g.path)])))});u.push(L)}}).next(()=>Ze.waitFor(u)).next(()=>o.apply(e)).next(()=>d)}removeTarget(e,t){const o=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,o)}updateLimboDocument(e,t){return Th(e,t)}Kn(e,t){const o=va(e);let u,d=te.at;return o.Z({index:"documentTargetsIndex"},([g,D],{path:L,sequenceNumber:H})=>{0===g?(d!==te.at&&t(new zt(Ja(u)),d),d=H,u=L):d=te.at}).next(()=>{d!==te.at&&t(new zt(Ja(u)),d)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Th(i,e){return va(i).put((o=i.currentSequenceNumber,{targetId:0,path:sa(e.path),sequenceNumber:o}));var o}class hp{constructor(){this.changes=new fu(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,bi.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const o=this.changes.get(t);return void 0!==o?Ze.resolve(o):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Wg{constructor(e){this.It=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,o){return vu(e).put(o)}removeEntry(e,t,o){return vu(e).delete(function(u,d){const g=u.path.toArray();return[g.slice(0,g.length-2),g[g.length-2],hd(d),g[g.length-1]]}(t,o))}updateMetadata(e,t){return this.getMetadata(e).next(o=>(o.byteSize+=t,this.Qn(e,o)))}getEntry(e,t){let o=bi.newInvalidDocument(t);return vu(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(ol(t))},(u,d)=>{o=this.jn(t,d)}).next(()=>o)}Wn(e,t){let o={size:0,document:bi.newInvalidDocument(t)};return vu(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(ol(t))},(u,d)=>{o={document:this.jn(t,d),size:Ih(d)}}).next(()=>o)}getEntries(e,t){let o=Hs();return this.zn(e,t,(u,d)=>{const g=this.jn(u,d);o=o.insert(u,g)}).next(()=>o)}Hn(e,t){let o=Hs(),u=new rn(zt.comparator);return this.zn(e,t,(d,g)=>{const D=this.jn(d,g);o=o.insert(d,D),u=u.insert(d,Ih(g))}).next(()=>({documents:o,Jn:u}))}zn(e,t,o){if(t.isEmpty())return Ze.resolve();let u=new zn(Sh);t.forEach(L=>u=u.add(L));const d=IDBKeyRange.bound(ol(u.first()),ol(u.last())),g=u.getIterator();let D=g.getNext();return vu(e).Z({index:"documentKeyIndex",range:d},(L,H,Q)=>{const ve=zt.fromSegments([...H.prefixPath,H.collectionGroup,H.documentId]);for(;D&&Sh(D,ve)<0;)o(D,null),D=g.getNext();D&&D.isEqual(ve)&&(o(D,H),D=g.hasNext()?g.getNext():null),D?Q.j(ol(D)):Q.done()}).next(()=>{for(;D;)o(D,null),D=g.hasNext()?g.getNext():null})}getAllFromCollection(e,t,o){const u=[t.popLast().toArray(),t.lastSegment(),hd(o.readTime),o.documentKey.path.isEmpty()?"":o.documentKey.path.lastSegment()],d=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return vu(e).W(IDBKeyRange.bound(u,d,!0)).next(g=>{let D=Hs();for(const L of g){const H=this.jn(zt.fromSegments(L.prefixPath.concat(L.collectionGroup,L.documentId)),L);D=D.insert(H.key,H)}return D})}getAllFromCollectionGroup(e,t,o,u){let d=Hs();const g=mp(t,o),D=mp(t,yi.max());return vu(e).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(g,D,!0)},(L,H,Q)=>{const ve=this.jn(zt.fromSegments(H.prefixPath.concat(H.collectionGroup,H.documentId)),H);d=d.insert(ve.key,ve),d.size===u&&Q.done()}).next(()=>d)}newChangeBuffer(e){return new pp(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return gp(e).get("remoteDocumentGlobalKey").next(t=>(vn(!!t),t))}Qn(e,t){return gp(e).put("remoteDocumentGlobalKey",t)}jn(e,t){if(t){const o=function Fg(i,e){let t;if(e.document)t=ln(i.re,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const o=zt.fromSegments(e.noDocument.path),u=sl(e.noDocument.readTime);t=bi.newNoDocument(o,u),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return Qt();{const o=zt.fromSegments(e.unknownDocument.path),u=sl(e.unknownDocument.version);t=bi.newUnknownDocument(o,u)}}return e.readTime&&t.setReadTime(function(o){const u=new Ri(o[0],o[1]);return On.fromTimestamp(u)}(e.readTime)),t}(this.It,t);if(!o.isNoDocument()||!o.version.isEqual(On.min()))return o}return bi.newInvalidDocument(e)}}function fp(i){return new Wg(i)}class pp extends hp{constructor(e,t){super(),this.Yn=e,this.trackRemovals=t,this.Xn=new fu(o=>o.toString(),(o,u)=>o.isEqual(u))}applyChanges(e){const t=[];let o=0,u=new zn((d,g)=>In(d.canonicalString(),g.canonicalString()));return this.changes.forEach((d,g)=>{const D=this.Xn.get(d);if(t.push(this.Yn.removeEntry(e,d,D.readTime)),g.isValidDocument()){const L=Lg(this.Yn.It,g);u=u.add(d.path.popLast()),o+=Ih(L)-D.size,t.push(this.Yn.addEntry(e,d,L))}else if(o-=D.size,this.trackRemovals){const L=Lg(this.Yn.It,g.convertToNoDocument(On.min()));t.push(this.Yn.addEntry(e,d,L))}}),u.forEach(d=>{t.push(this.Yn.indexManager.addToCollectionParentIndex(e,d))}),t.push(this.Yn.updateMetadata(e,o)),Ze.waitFor(t)}getFromCache(e,t){return this.Yn.Wn(e,t).next(o=>(this.Xn.set(t,{size:o.size,readTime:o.document.readTime}),o.document))}getAllFromCache(e,t){return this.Yn.Hn(e,t).next(({documents:o,Jn:u})=>(u.forEach((d,g)=>{this.Xn.set(d,{size:g,readTime:o.get(d).readTime})}),o))}}function gp(i){return Qs(i,"remoteDocumentGlobal")}function vu(i){return Qs(i,"remoteDocumentsV14")}function ol(i){const e=i.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function mp(i,e){const t=e.documentKey.path.toArray();return[i,hd(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function Sh(i,e){const t=i.path.toArray(),o=e.path.toArray();let u=0;for(let d=0;d<t.length-2&&d<o.length-2;++d)if(u=In(t[d],o[d]),u)return u;return u=In(t.length,o.length),u||(u=In(t[t.length-2],o[o.length-2]),u||In(t[t.length-1],o[o.length-1]))}class qg{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class Ah{constructor(e,t,o,u){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=o,this.indexManager=u}getDocument(e,t){let o=null;return this.documentOverlayCache.getOverlay(e,t).next(u=>(o=u,this.getBaseDocument(e,t,o))).next(u=>(null!==o&&xl(o.mutation,u,pi.empty(),Ri.now()),u))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(o=>this.getLocalViewOfDocuments(e,o,Xn()).next(()=>o))}getLocalViewOfDocuments(e,t,o=Xn()){const u=Zo();return this.populateOverlays(e,u,t).next(()=>this.computeViews(e,t,u,o).next(d=>{let g=mc();return d.forEach((D,L)=>{g=g.insert(D,L.overlayedDocument)}),g}))}getOverlayedDocuments(e,t){const o=Zo();return this.populateOverlays(e,o,t).next(()=>this.computeViews(e,t,o,Xn()))}populateOverlays(e,t,o){const u=[];return o.forEach(d=>{t.has(d)||u.push(d)}),this.documentOverlayCache.getOverlays(e,u).next(d=>{d.forEach((g,D)=>{t.set(g,D)})})}computeViews(e,t,o,u){let d=Hs();const g=Pu(),D=Pu();return t.forEach((L,H)=>{const Q=o.get(H.key);u.has(H.key)&&(void 0===Q||Q.mutation instanceof ja)?d=d.insert(H.key,H):void 0!==Q&&(g.set(H.key,Q.mutation.getFieldMask()),xl(Q.mutation,H,Q.mutation.getFieldMask(),Ri.now()))}),this.recalculateAndSaveOverlays(e,d).next(L=>(L.forEach((H,Q)=>g.set(H,Q)),t.forEach((H,Q)=>{var ve;return D.set(H,new qg(Q,null!==(ve=g.get(H))&&void 0!==ve?ve:null))}),D))}recalculateAndSaveOverlays(e,t){const o=Pu();let u=new rn((g,D)=>g-D),d=Xn();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(g=>{for(const D of g)D.keys().forEach(L=>{const H=t.get(L);if(null===H)return;let Q=o.get(L)||pi.empty();Q=D.applyToLocalView(H,Q),o.set(L,Q);const ve=(u.get(D.batchId)||Xn()).add(L);u=u.insert(D.batchId,ve)})}).next(()=>{const g=[],D=u.getReverseIterator();for(;D.hasNext();){const L=D.getNext(),H=L.key,Q=L.value,ve=od();Q.forEach(Ge=>{if(!d.has(Ge)){const lt=Ts(t.get(Ge),o.get(Ge));null!==lt&&ve.set(Ge,lt),d=d.add(Ge)}}),g.push(this.documentOverlayCache.saveOverlays(e,H,ve))}return Ze.waitFor(g)}).next(()=>o)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(o=>this.recalculateAndSaveOverlays(e,o))}getDocumentsMatchingQuery(e,t,o){return zt.isDocumentKey((u=t).path)&&null===u.collectionGroup&&0===u.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):oh(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,o):this.getDocumentsMatchingCollectionQuery(e,t,o);var u}getNextDocuments(e,t,o,u){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,o,u).next(d=>{const g=u-d.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,o.largestBatchId,u-d.size):Ze.resolve(Zo());let D=-1,L=d;return g.next(H=>Ze.forEach(H,(Q,ve)=>(D<ve.largestBatchId&&(D=ve.largestBatchId),d.get(Q)?Ze.resolve():this.getBaseDocument(e,Q,ve).next(Ge=>{L=L.insert(Q,Ge)}))).next(()=>this.populateOverlays(e,H,d)).next(()=>this.computeViews(e,L,H,Xn())).next(Q=>({batchId:D,changes:yc(Q)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new zt(t)).next(o=>{let u=mc();return o.isFoundDocument()&&(u=u.insert(o.key,o)),u})}getDocumentsMatchingCollectionGroupQuery(e,t,o){const u=t.collectionGroup;let d=mc();return this.indexManager.getCollectionParents(e,u).next(g=>Ze.forEach(g,D=>{const L=(H=t,Q=D.child(u),new Ys(Q,null,H.explicitOrderBy.slice(),H.filters.slice(),H.limit,H.limitType,H.startAt,H.endAt));var H,Q;return this.getDocumentsMatchingCollectionQuery(e,L,o).next(H=>{H.forEach((Q,ve)=>{d=d.insert(Q,ve)})})}).next(()=>d))}getDocumentsMatchingCollectionQuery(e,t,o){let u;return this.remoteDocumentCache.getAllFromCollection(e,t.path,o).next(d=>(u=d,this.documentOverlayCache.getOverlaysForCollection(e,t.path,o.largestBatchId))).next(d=>{d.forEach((D,L)=>{const H=L.getKey();null===u.get(H)&&(u=u.insert(H,bi.newInvalidDocument(H)))});let g=mc();return u.forEach((D,L)=>{const H=d.get(D);void 0!==H&&xl(H.mutation,L,pi.empty(),Ri.now()),cu(t,L)&&(g=g.insert(D,L))}),g})}getBaseDocument(e,t,o){return null===o||1===o.mutation.type?this.remoteDocumentCache.getEntry(e,t):Ze.resolve(bi.newInvalidDocument(t))}}class gd{constructor(e){this.It=e,this.Zn=new Map,this.ts=new Map}getBundleMetadata(e,t){return Ze.resolve(this.Zn.get(t))}saveBundleMetadata(e,t){var o;return this.Zn.set(t.id,{id:(o=t).id,version:o.version,createTime:Gs(o.createTime)}),Ze.resolve()}getNamedQuery(e,t){return Ze.resolve(this.ts.get(t))}saveNamedQuery(e,t){return this.ts.set(t.name,{name:(o=t).name,query:np(o.bundledQuery),readTime:Gs(o.readTime)}),Ze.resolve();var o}}class d_{constructor(){this.overlays=new rn(zt.comparator),this.es=new Map}getOverlay(e,t){return Ze.resolve(this.overlays.get(t))}getOverlays(e,t){const o=Zo();return Ze.forEach(t,u=>this.getOverlay(e,u).next(d=>{null!==d&&o.set(u,d)})).next(()=>o)}saveOverlays(e,t,o){return o.forEach((u,d)=>{this.ue(e,t,d)}),Ze.resolve()}removeOverlaysForBatchId(e,t,o){const u=this.es.get(o);return void 0!==u&&(u.forEach(d=>this.overlays=this.overlays.remove(d)),this.es.delete(o)),Ze.resolve()}getOverlaysForCollection(e,t,o){const u=Zo(),d=t.length+1,g=new zt(t.child("")),D=this.overlays.getIteratorFrom(g);for(;D.hasNext();){const L=D.getNext().value,H=L.getKey();if(!t.isPrefixOf(H.path))break;H.path.length===d&&L.largestBatchId>o&&u.set(L.getKey(),L)}return Ze.resolve(u)}getOverlaysForCollectionGroup(e,t,o,u){let d=new rn((H,Q)=>H-Q);const g=this.overlays.getIterator();for(;g.hasNext();){const H=g.getNext().value;if(H.getKey().getCollectionGroup()===t&&H.largestBatchId>o){let Q=d.get(H.largestBatchId);null===Q&&(Q=Zo(),d=d.insert(H.largestBatchId,Q)),Q.set(H.getKey(),H)}}const D=Zo(),L=d.getIterator();for(;L.hasNext()&&(L.getNext().value.forEach((H,Q)=>D.set(H,Q)),!(D.size()>=u)););return Ze.resolve(D)}ue(e,t,o){const u=this.overlays.get(o.key);if(null!==u){const g=this.es.get(u.largestBatchId).delete(o.key);this.es.set(u.largestBatchId,g)}this.overlays=this.overlays.insert(o.key,new dd(t,o));let d=this.es.get(t);void 0===d&&(d=Xn(),this.es.set(t,d)),this.es.set(t,d.add(o.key))}}class xh{constructor(){this.ns=new zn(Io.ss),this.rs=new zn(Io.os)}isEmpty(){return this.ns.isEmpty()}addReference(e,t){const o=new Io(e,t);this.ns=this.ns.add(o),this.rs=this.rs.add(o)}us(e,t){e.forEach(o=>this.addReference(o,t))}removeReference(e,t){this.cs(new Io(e,t))}hs(e,t){e.forEach(o=>this.removeReference(o,t))}ls(e){const t=new zt(new gr([])),o=new Io(t,e),u=new Io(t,e+1),d=[];return this.rs.forEachInRange([o,u],g=>{this.cs(g),d.push(g.key)}),d}fs(){this.ns.forEach(e=>this.cs(e))}cs(e){this.ns=this.ns.delete(e),this.rs=this.rs.delete(e)}ds(e){const t=new zt(new gr([])),o=new Io(t,e),u=new Io(t,e+1);let d=Xn();return this.rs.forEachInRange([o,u],g=>{d=d.add(g.key)}),d}containsKey(e){const t=new Io(e,0),o=this.ns.firstAfterOrEqual(t);return null!==o&&e.isEqual(o.key)}}class Io{constructor(e,t){this.key=e,this._s=t}static ss(e,t){return zt.comparator(e.key,t.key)||In(e._s,t._s)}static os(e,t){return In(e._s,t._s)||zt.comparator(e.key,t.key)}}class h_{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.ws=1,this.gs=new zn(Io.ss)}checkEmpty(e){return Ze.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,o,u){const d=this.ws;this.ws++;const g=new Eo(d,t,o,u);this.mutationQueue.push(g);for(const D of u)this.gs=this.gs.add(new Io(D.key,d)),this.indexManager.addToCollectionParentIndex(e,D.key.path.popLast());return Ze.resolve(g)}lookupMutationBatch(e,t){return Ze.resolve(this.ys(t))}getNextMutationBatchAfterBatchId(e,t){const u=this.ps(t+1),d=u<0?0:u;return Ze.resolve(this.mutationQueue.length>d?this.mutationQueue[d]:null)}getHighestUnacknowledgedBatchId(){return Ze.resolve(0===this.mutationQueue.length?-1:this.ws-1)}getAllMutationBatches(e){return Ze.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const o=new Io(t,0),u=new Io(t,Number.POSITIVE_INFINITY),d=[];return this.gs.forEachInRange([o,u],g=>{const D=this.ys(g._s);d.push(D)}),Ze.resolve(d)}getAllMutationBatchesAffectingDocumentKeys(e,t){let o=new zn(In);return t.forEach(u=>{const d=new Io(u,0),g=new Io(u,Number.POSITIVE_INFINITY);this.gs.forEachInRange([d,g],D=>{o=o.add(D._s)})}),Ze.resolve(this.Is(o))}getAllMutationBatchesAffectingQuery(e,t){const o=t.path,u=o.length+1;let d=o;zt.isDocumentKey(d)||(d=d.child(""));const g=new Io(new zt(d),0);let D=new zn(In);return this.gs.forEachWhile(L=>{const H=L.key.path;return!!o.isPrefixOf(H)&&(H.length===u&&(D=D.add(L._s)),!0)},g),Ze.resolve(this.Is(D))}Is(e){const t=[];return e.forEach(o=>{const u=this.ys(o);null!==u&&t.push(u)}),t}removeMutationBatch(e,t){vn(0===this.Ts(t.batchId,"removed")),this.mutationQueue.shift();let o=this.gs;return Ze.forEach(t.mutations,u=>{const d=new Io(u.key,t.batchId);return o=o.delete(d),this.referenceDelegate.markPotentiallyOrphaned(e,u.key)}).next(()=>{this.gs=o})}An(e){}containsKey(e,t){const o=new Io(t,0),u=this.gs.firstAfterOrEqual(o);return Ze.resolve(t.isEqual(u&&u.key))}performConsistencyCheck(e){return Ze.resolve()}Ts(e,t){return this.ps(e)}ps(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}ys(e){const t=this.ps(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class Zg{constructor(e){this.Es=e,this.docs=new rn(zt.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const o=t.key,u=this.docs.get(o),d=u?u.size:0,g=this.Es(t);return this.docs=this.docs.insert(o,{document:t.mutableCopy(),size:g}),this.size+=g-d,this.indexManager.addToCollectionParentIndex(e,o.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const o=this.docs.get(t);return Ze.resolve(o?o.document.mutableCopy():bi.newInvalidDocument(t))}getEntries(e,t){let o=Hs();return t.forEach(u=>{const d=this.docs.get(u);o=o.insert(u,d?d.document.mutableCopy():bi.newInvalidDocument(u))}),Ze.resolve(o)}getAllFromCollection(e,t,o){let u=Hs();const d=new zt(t.child("")),g=this.docs.getIteratorFrom(d);for(;g.hasNext();){const{key:D,value:{document:L}}=g.getNext();if(!t.isPrefixOf(D.path))break;D.path.length>t.length+1||ou(io(L),o)<=0||(u=u.insert(L.key,L.mutableCopy()))}return Ze.resolve(u)}getAllFromCollectionGroup(e,t,o,u){Qt()}As(e,t){return Ze.forEach(this.docs,o=>t(o))}newChangeBuffer(e){return new yp(this)}getSize(e){return Ze.resolve(this.size)}}class yp extends hp{constructor(e){super(),this.Yn=e}applyChanges(e){const t=[];return this.changes.forEach((o,u)=>{u.isValidDocument()?t.push(this.Yn.addEntry(e,u)):this.Yn.removeEntry(o)}),Ze.waitFor(t)}getFromCache(e,t){return this.Yn.getEntry(e,t)}getAllFromCache(e,t){return this.Yn.getEntries(e,t)}}class Kg{constructor(e){this.persistence=e,this.Rs=new fu(t=>Ku(t),El),this.lastRemoteSnapshotVersion=On.min(),this.highestTargetId=0,this.bs=0,this.Ps=new xh,this.targetCount=0,this.vs=Hl.Pn()}forEachTarget(e,t){return this.Rs.forEach((o,u)=>t(u)),Ze.resolve()}getLastRemoteSnapshotVersion(e){return Ze.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Ze.resolve(this.bs)}allocateTargetId(e){return this.highestTargetId=this.vs.next(),Ze.resolve(this.highestTargetId)}setTargetsMetadata(e,t,o){return o&&(this.lastRemoteSnapshotVersion=o),t>this.bs&&(this.bs=t),Ze.resolve()}Dn(e){this.Rs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.vs=new Hl(t),this.highestTargetId=t),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}addTargetData(e,t){return this.Dn(t),this.targetCount+=1,Ze.resolve()}updateTargetData(e,t){return this.Dn(t),Ze.resolve()}removeTargetData(e,t){return this.Rs.delete(t.target),this.Ps.ls(t.targetId),this.targetCount-=1,Ze.resolve()}removeTargets(e,t,o){let u=0;const d=[];return this.Rs.forEach((g,D)=>{D.sequenceNumber<=t&&null===o.get(D.targetId)&&(this.Rs.delete(g),d.push(this.removeMatchingKeysForTargetId(e,D.targetId)),u++)}),Ze.waitFor(d).next(()=>u)}getTargetCount(e){return Ze.resolve(this.targetCount)}getTargetData(e,t){const o=this.Rs.get(t)||null;return Ze.resolve(o)}addMatchingKeys(e,t,o){return this.Ps.us(t,o),Ze.resolve()}removeMatchingKeys(e,t,o){this.Ps.hs(t,o);const u=this.persistence.referenceDelegate,d=[];return u&&t.forEach(g=>{d.push(u.markPotentiallyOrphaned(e,g))}),Ze.waitFor(d)}removeMatchingKeysForTargetId(e,t){return this.Ps.ls(t),Ze.resolve()}getMatchingKeysForTargetId(e,t){const o=this.Ps.ds(t);return Ze.resolve(o)}containsKey(e,t){return Ze.resolve(this.Ps.containsKey(t))}}class f_{constructor(e,t){this.Vs={},this.overlays={},this.Ss=new te(0),this.Ds=!1,this.Ds=!0,this.referenceDelegate=e(this),this.Cs=new Kg(this),this.indexManager=new ap,this.remoteDocumentCache=new Zg(o=>this.referenceDelegate.xs(o)),this.It=new kg(t),this.Ns=new gd(this.It)}start(){return Promise.resolve()}shutdown(){return this.Ds=!1,Promise.resolve()}get started(){return this.Ds}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new d_,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let o=this.Vs[e.toKey()];return o||(o=new h_(t,this.referenceDelegate),this.Vs[e.toKey()]=o),o}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ns}runTransaction(e,t,o){Tt("MemoryPersistence","Starting transaction:",e);const u=new Yg(this.Ss.next());return this.referenceDelegate.ks(),o(u).next(d=>this.referenceDelegate.Ms(u).next(()=>d)).toPromise().then(d=>(u.raiseOnCommittedEvent(),d))}Os(e,t){return Ze.or(Object.values(this.Vs).map(o=>()=>o.containsKey(e,t)))}}class Yg extends na{constructor(e){super(),this.currentSequenceNumber=e}}class Mh{constructor(e){this.persistence=e,this.Fs=new xh,this.$s=null}static Bs(e){return new Mh(e)}get Ls(){if(this.$s)return this.$s;throw Qt()}addReference(e,t,o){return this.Fs.addReference(o,t),this.Ls.delete(o.toString()),Ze.resolve()}removeReference(e,t,o){return this.Fs.removeReference(o,t),this.Ls.add(o.toString()),Ze.resolve()}markPotentiallyOrphaned(e,t){return this.Ls.add(t.toString()),Ze.resolve()}removeTarget(e,t){this.Fs.ls(t.targetId).forEach(u=>this.Ls.add(u.toString()));const o=this.persistence.getTargetCache();return o.getMatchingKeysForTargetId(e,t.targetId).next(u=>{u.forEach(d=>this.Ls.add(d.toString()))}).next(()=>o.removeTargetData(e,t))}ks(){this.$s=new Set}Ms(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Ze.forEach(this.Ls,o=>{const u=zt.fromPath(o);return this.Us(e,u).next(d=>{d||t.removeEntry(u,On.min())})}).next(()=>(this.$s=null,t.apply(e)))}updateLimboDocument(e,t){return this.Us(e,t).next(o=>{o?this.Ls.delete(t.toString()):this.Ls.add(t.toString())})}xs(e){return 0}Us(e,t){return Ze.or([()=>Ze.resolve(this.Fs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Os(e,t)])}}class Qg{constructor(e){this.It=e}$(e,t,o,u){const d=new ba("createOrUpgrade",t);var D;o<1&&u>=1&&(e.createObjectStore("owner"),(D=e).createObjectStore("mutationQueues",{keyPath:"userId"}),D.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Qf,{unique:!0}),D.createObjectStore("documentMutations"),Jg(e),function(D){D.createObjectStore("remoteDocuments")}(e));let g=Ze.resolve();return o<3&&u>=3&&(0!==o&&(function(D){D.deleteObjectStore("targetDocuments"),D.deleteObjectStore("targets"),D.deleteObjectStore("targetGlobal")}(e),Jg(e)),g=g.next(()=>function(D){const L=D.store("targetGlobal"),H={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:On.min().toTimestamp(),targetCount:0};return L.put("targetGlobalKey",H)}(d))),o<4&&u>=4&&(0!==o&&(g=g.next(()=>function(D,L){return L.store("mutations").W().next(H=>{D.deleteObjectStore("mutations"),D.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Qf,{unique:!0});const Q=L.store("mutations"),ve=H.map(Ge=>Q.put(Ge));return Ze.waitFor(ve)})}(e,d))),g=g.next(()=>{!function(D){D.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),o<5&&u>=5&&(g=g.next(()=>this.qs(d))),o<6&&u>=6&&(g=g.next(()=>(function(D){D.createObjectStore("remoteDocumentGlobal")}(e),this.Ks(d)))),o<7&&u>=7&&(g=g.next(()=>this.Gs(d))),o<8&&u>=8&&(g=g.next(()=>this.Qs(e,d))),o<9&&u>=9&&(g=g.next(()=>{!function(D){D.objectStoreNames.contains("remoteDocumentChanges")&&D.deleteObjectStore("remoteDocumentChanges")}(e)})),o<10&&u>=10&&(g=g.next(()=>this.js(d))),o<11&&u>=11&&(g=g.next(()=>{(function(D){D.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(D){D.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),o<12&&u>=12&&(g=g.next(()=>{!function(D){const L=D.createObjectStore("documentOverlays",{keyPath:n_});L.createIndex("collectionPathOverlayIndex",r_,{unique:!1}),L.createIndex("collectionGroupOverlayIndex",i_,{unique:!1})}(e)})),o<13&&u>=13&&(g=g.next(()=>function(D){const L=D.createObjectStore("remoteDocumentsV14",{keyPath:Jf});L.createIndex("documentKeyIndex",cd),L.createIndex("collectionGroupIndex",Ky)}(e)).next(()=>this.Ws(e,d)).next(()=>e.deleteObjectStore("remoteDocuments"))),o<14&&u>=14&&(g=g.next(()=>this.zs(e,d))),o<15&&u>=15&&(g=g.next(()=>function(D){D.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),D.createObjectStore("indexState",{keyPath:Xy}).createIndex("sequenceNumberIndex",e_,{unique:!1}),D.createObjectStore("indexEntries",{keyPath:t_}).createIndex("documentKeyIndex",Xf,{unique:!1})}(e))),g}Ks(e){let t=0;return e.store("remoteDocuments").Z((o,u)=>{t+=Ih(u)}).next(()=>{const o={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",o)})}qs(e){const t=e.store("mutationQueues"),o=e.store("mutations");return t.W().next(u=>Ze.forEach(u,d=>{const g=IDBKeyRange.bound([d.userId,-1],[d.userId,d.lastAcknowledgedBatchId]);return o.W("userMutationsIndex",g).next(D=>Ze.forEach(D,L=>{vn(L.userId===d.userId);const H=Vl(this.It,L);return Gg(e,d.userId,H).next(()=>{})}))}))}Gs(e){const t=e.store("targetDocuments"),o=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(u=>{const d=[];return o.Z((g,D)=>{const L=new gr(g),H=[0,sa(L)];d.push(t.get(H).next(Q=>Q?Ze.resolve():t.put({targetId:0,path:sa(L),sequenceNumber:u.highestListenSequenceNumber})))}).next(()=>Ze.waitFor(d))})}Qs(e,t){e.createObjectStore("collectionParents",{keyPath:Jy});const o=t.store("collectionParents"),u=new vh,d=g=>{if(u.add(g)){const D=g.lastSegment(),L=g.popLast();return o.put({collectionId:D,parent:sa(L)})}};return t.store("remoteDocuments").Z({X:!0},(g,D)=>{const L=new gr(g);return d(L.popLast())}).next(()=>t.store("documentMutations").Z({X:!0},([g,D,L],H)=>{const Q=Ja(D);return d(Q.popLast())}))}js(e){const t=e.store("targets");return t.Z((o,u)=>{const d=fd(u),g=Vg(this.It,d);return t.put(g)})}Ws(e,t){const o=t.store("remoteDocuments"),u=[];return o.Z((d,g)=>{const D=t.store("remoteDocumentsV14"),L=(H=g,H.document?new zt(gr.fromString(H.document.name).popFirst(5)):H.noDocument?zt.fromSegments(H.noDocument.path):H.unknownDocument?zt.fromSegments(H.unknownDocument.path):Qt()).path.toArray();var H;const Q={prefixPath:L.slice(0,L.length-2),collectionGroup:L[L.length-2],documentId:L[L.length-1],readTime:g.readTime||[0,0],unknownDocument:g.unknownDocument,noDocument:g.noDocument,document:g.document,hasCommittedMutations:!!g.hasCommittedMutations};u.push(D.put(Q))}).next(()=>Ze.waitFor(u))}zs(e,t){const o=t.store("mutations"),u=fp(this.It),d=new f_(Mh.Bs,this.It.re);return o.W().next(g=>{const D=new Map;return g.forEach(L=>{var H;let Q=null!==(H=D.get(L.userId))&&void 0!==H?H:Xn();Vl(this.It,L).keys().forEach(ve=>Q=Q.add(ve)),D.set(L.userId,Q)}),Ze.forEach(D,(L,H)=>{const Q=new Gi(H),ve=ip.oe(this.It,Q),Ge=d.getIndexManager(Q),lt=Dh.oe(Q,this.It,Ge,d.referenceDelegate);return new Ah(u,lt,ve,Ge).recalculateAndSaveOverlaysForDocumentKeys(new yh(t,te.at),L).next()})})}}function Jg(i){i.createObjectStore("targetDocuments",{keyPath:Qy}).createIndex("documentTargetsIndex",Ng,{unique:!0}),i.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Yy,{unique:!0}),i.createObjectStore("targetGlobal")}const _p="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Sa{constructor(e,t,o,u,d,g,D,L,H,Q,ve=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=o,this.Hs=d,this.window=g,this.document=D,this.Js=H,this.Ys=Q,this.Xs=ve,this.Ss=null,this.Ds=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Zs=null,this.inForeground=!1,this.ti=null,this.ei=null,this.ni=Number.NEGATIVE_INFINITY,this.si=Ge=>Promise.resolve(),!Sa.C())throw new Et(Je.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new bh(this,u),this.ii=t+"main",this.It=new kg(L),this.ri=new Is(this.ii,this.Xs,new Qg(this.It)),this.Cs=new l_(this.referenceDelegate,this.It),this.remoteDocumentCache=fp(this.It),this.Ns=new o_,this.window&&this.window.localStorage?this.oi=this.window.localStorage:(this.oi=null,!1===Q&&Nr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ui().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Et(Je.FAILED_PRECONDITION,_p);return this.ci(),this.ai(),this.hi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Cs.getHighestSequenceNumber(e))}).then(e=>{this.Ss=new te(e,this.Js)}).then(()=>{this.Ds=!0}).catch(e=>(this.ri&&this.ri.close(),Promise.reject(e)))}li(e){var t=this;return this.si=function(){var o=(0,he.Z)(function*(u){if(t.started)return e(u)});return function(u){return o.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ri.L(function(){var t=(0,he.Z)(function*(o){null===o.newVersion&&(yield e())});return function(o){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Hs.enqueueAndForget((0,he.Z)(function*(){t.started&&(yield t.ui())})))}ui(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>yd(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.fi(e).next(t=>{t||(this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)))})}).next(()=>this.di(e)).next(t=>this.isPrimary&&!t?this._i(e).next(()=>!1):!!t&&this.wi(e).next(()=>!0))).catch(e=>{if(Ao(e))return Tt("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Tt("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Hs.enqueueRetryable(()=>this.si(e)),this.isPrimary=e})}fi(e){return md(e).get("owner").next(t=>Ze.resolve(this.mi(t)))}gi(e){return yd(e).delete(this.clientId)}yi(){var e=this;return(0,he.Z)(function*(){if(e.isPrimary&&!e.pi(e.ni,18e5)){e.ni=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",o=>{const u=Qs(o,"clientMetadata");return u.W().next(d=>{const g=e.Ii(d,18e5),D=d.filter(L=>-1===g.indexOf(L));return Ze.forEach(D,L=>u.delete(L.clientId)).next(()=>D)})}).catch(()=>[]);if(e.oi)for(const o of t)e.oi.removeItem(e.Ti(o.clientId))}})()}hi(){this.ei=this.Hs.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ui().then(()=>this.yi()).then(()=>this.hi()))}mi(e){return!!e&&e.ownerId===this.clientId}di(e){return this.Ys?Ze.resolve(!0):md(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)){if(this.mi(t)&&this.networkEnabled)return!0;if(!this.mi(t)){if(!t.allowTabSynchronization)throw new Et(Je.FAILED_PRECONDITION,_p);return!1}}return!(!this.networkEnabled||!this.inForeground)||yd(e).W().next(o=>void 0===this.Ii(o,5e3).find(u=>{if(this.clientId!==u.clientId){const g=!this.inForeground&&u.inForeground,D=this.networkEnabled===u.networkEnabled;if(!this.networkEnabled&&u.networkEnabled||g&&D)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&Tt("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,he.Z)(function*(){e.Ds=!1,e.Ai(),e.ei&&(e.ei.cancel(),e.ei=null),e.Ri(),e.bi(),yield e.ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const o=new yh(t,te.at);return e._i(o).next(()=>e.gi(o))}),e.ri.close(),e.Pi()})()}Ii(e,t){return e.filter(o=>this.pi(o.updateTimeMs,t)&&!this.Ei(o.clientId))}vi(){return this.runTransaction("getActiveClients","readonly",e=>yd(e).W().next(t=>this.Ii(t,18e5).map(o=>o.clientId)))}get started(){return this.Ds}getMutationQueue(e,t){return Dh.oe(e,this.It,t,this.referenceDelegate)}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new Cc(e,this.It.re.databaseId)}getDocumentOverlayCache(e){return ip.oe(this.It,e)}getBundleCache(){return this.Ns}runTransaction(e,t,o){Tt("IndexedDbPersistence","Starting transaction:",e);const u="readonly"===t?"readonly":"readwrite",d=15===(g=this.Xs)?tp:14===g?Ko:13===g?Pg:12===g?s_:11===g?ep:void Qt();var g;let D;return this.ri.runTransaction(e,u,d,L=>(D=new yh(L,this.Ss?this.Ss.next():te.at),"readwrite-primary"===t?this.fi(D).next(H=>!!H||this.di(D)).next(H=>{if(!H)throw Nr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)),new Et(Je.FAILED_PRECONDITION,Ca);return o(D)}).next(H=>this.wi(D).next(()=>H)):this.Vi(D).next(()=>o(D)))).then(L=>(D.raiseOnCommittedEvent(),L))}Vi(e){return md(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)&&!this.mi(t)&&!(this.Ys||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Et(Je.FAILED_PRECONDITION,_p)})}wi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return md(e).put("owner",t)}static C(){return Is.C()}_i(e){const t=md(e);return t.get("owner").next(o=>this.mi(o)?(Tt("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):Ze.resolve())}pi(e,t){const o=Date.now();return!(e<o-t||e>o&&(Nr(`Detected an update time that is in the future: ${e} > ${o}`),1))}ci(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ti=()=>{this.Hs.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ui()))},this.document.addEventListener("visibilitychange",this.ti),this.inForeground="visible"===this.document.visibilityState)}Ri(){this.ti&&(this.document.removeEventListener("visibilitychange",this.ti),this.ti=null)}ai(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Zs=()=>{this.Ai(),(0,nt.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Hs.enterRestrictedMode(!0),this.Hs.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Zs))}bi(){this.Zs&&(this.window.removeEventListener("pagehide",this.Zs),this.Zs=null)}Ei(e){var t;try{const o=null!==(null===(t=this.oi)||void 0===t?void 0:t.getItem(this.Ti(e)));return Tt("IndexedDbPersistence",`Client '${e}' ${o?"is":"is not"} zombied in LocalStorage`),o}catch(o){return Nr("IndexedDbPersistence","Failed to get zombied client id.",o),!1}}Ai(){if(this.oi)try{this.oi.setItem(this.Ti(this.clientId),String(Date.now()))}catch(e){Nr("Failed to set zombie client id.",e)}}Pi(){if(this.oi)try{this.oi.removeItem(this.Ti(this.clientId))}catch{}}Ti(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function md(i){return Qs(i,"owner")}function yd(i){return Qs(i,"clientMetadata")}function vp(i,e){let t=i.projectId;return i.isDefaultDatabase||(t+="."+i.database),"firestore/"+e+"/"+t+"/"}class wp{constructor(e,t,o,u){this.targetId=e,this.fromCache=t,this.Si=o,this.Di=u}static Ci(e,t){let o=Xn(),u=Xn();for(const d of t.docChanges)switch(d.type){case 0:o=o.add(d.doc.key);break;case 1:u=u.add(d.doc.key)}return new wp(e,t.fromCache,o,u)}}class Xg{constructor(){this.xi=!1}initialize(e,t){this.Ni=e,this.indexManager=t,this.xi=!0}getDocumentsMatchingQuery(e,t,o,u){return this.ki(e,t).next(d=>d||this.Mi(e,t,u,o)).next(d=>d||this.Oi(e,t))}ki(e,t){if(rh(t))return Ze.resolve(null);let o=bs(t);return this.indexManager.getIndexType(e,o).next(u=>0===u?null:(null!==t.limit&&1===u&&(t=dc(t,null,"F"),o=bs(t)),this.indexManager.getDocumentsMatchingTarget(e,o).next(d=>{const g=Xn(...d);return this.Ni.getDocuments(e,g).next(D=>this.indexManager.getMinOffset(e,o).next(L=>{const H=this.Fi(t,D);return this.$i(t,H,g,L.readTime)?this.ki(e,dc(t,null,"F")):this.Bi(e,H,t,L)}))})))}Mi(e,t,o,u){return rh(t)||u.isEqual(On.min())?this.Oi(e,t):this.Ni.getDocuments(e,o).next(d=>{const g=this.Fi(t,d);return this.$i(t,g,o,u)?this.Oi(e,t):(Oa()<=_t.in.DEBUG&&Tt("QueryEngine","Re-using previous result from %s to execute query: %s",u.toString(),Yc(t)),this.Bi(e,g,t,ma(u,-1)))})}Fi(e,t){let o=new zn(Ta(e));return t.forEach((u,d)=>{cu(e,d)&&(o=o.add(d))}),o}$i(e,t,o,u){if(null===e.limit)return!1;if(o.size!==t.size)return!0;const d="F"===e.limitType?t.last():t.first();return!!d&&(d.hasPendingWrites||d.version.compareTo(u)>0)}Oi(e,t){return Oa()<=_t.in.DEBUG&&Tt("QueryEngine","Using full collection scan to execute query:",Yc(t)),this.Ni.getDocumentsMatchingQuery(e,t,yi.min())}Bi(e,t,o,u){return this.Ni.getDocumentsMatchingQuery(e,o,u).next(d=>(t.forEach(g=>{d=d.insert(g.key,g)}),d))}}class p_{constructor(e,t,o,u){this.persistence=e,this.Li=t,this.It=u,this.Ui=new rn(In),this.qi=new fu(d=>Ku(d),El),this.Ki=new Map,this.Gi=e.getRemoteDocumentCache(),this.Cs=e.getTargetCache(),this.Ns=e.getBundleCache(),this.Qi(o)}Qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Ah(this.Gi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Gi.setIndexManager(this.indexManager),this.Li.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ui))}}function Ep(i,e,t,o){return new p_(i,e,t,o)}function em(i,e){return Ip.apply(this,arguments)}function Ip(){return Ip=(0,he.Z)(function*(i,e){const t=Ht(i);return yield t.persistence.runTransaction("Handle user change","readonly",o=>{let u;return t.mutationQueue.getAllMutationBatches(o).next(d=>(u=d,t.Qi(e),t.mutationQueue.getAllMutationBatches(o))).next(d=>{const g=[],D=[];let L=Xn();for(const H of u){g.push(H.batchId);for(const Q of H.mutations)L=L.add(Q.key)}for(const H of d){D.push(H.batchId);for(const Q of H.mutations)L=L.add(Q.key)}return t.localDocuments.getDocuments(o,L).next(H=>({ji:H,removedBatchIds:g,addedBatchIds:D}))})})}),Ip.apply(this,arguments)}function g_(i,e){const t=Ht(i);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",o=>{const u=e.batch.keys(),d=t.Gi.newChangeBuffer({trackRemovals:!0});return function(g,D,L,H){const Q=L.batch,ve=Q.keys();let Ge=Ze.resolve();return ve.forEach(lt=>{Ge=Ge.next(()=>H.getEntry(D,lt)).next(gt=>{const Kt=L.docVersions.get(lt);vn(null!==Kt),gt.version.compareTo(Kt)<0&&(Q.applyToRemoteDocument(gt,L),gt.isValidDocument()&&(gt.setReadTime(L.commitVersion),H.addEntry(gt)))})}),Ge.next(()=>g.mutationQueue.removeMutationBatch(D,Q))}(t,o,e,d).next(()=>d.apply(o)).next(()=>t.mutationQueue.performConsistencyCheck(o)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(o,u,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(o,function(g){let D=Xn();for(let L=0;L<g.mutationResults.length;++L)g.mutationResults[L].transformResults.length>0&&(D=D.add(g.batch.mutations[L].key));return D}(e))).next(()=>t.localDocuments.getDocuments(o,u))})}function or(i){const e=Ht(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Cs.getLastRemoteSnapshotVersion(t))}function tm(i,e){const t=Ht(i),o=e.snapshotVersion;let u=t.Ui;return t.persistence.runTransaction("Apply remote event","readwrite-primary",d=>{const g=t.Gi.newChangeBuffer({trackRemovals:!0});u=t.Ui;const D=[];e.targetChanges.forEach((Q,ve)=>{const Ge=u.get(ve);if(!Ge)return;D.push(t.Cs.removeMatchingKeys(d,Q.removedDocuments,ve).next(()=>t.Cs.addMatchingKeys(d,Q.addedDocuments,ve)));let lt=Ge.withSequenceNumber(d.currentSequenceNumber);var gt,Kt,fn;e.targetMismatches.has(ve)?lt=lt.withResumeToken(_i.EMPTY_BYTE_STRING,On.min()).withLastLimboFreeSnapshotVersion(On.min()):Q.resumeToken.approximateByteSize()>0&&(lt=lt.withResumeToken(Q.resumeToken,o)),u=u.insert(ve,lt),Kt=lt,fn=Q,(0===(gt=Ge).resumeToken.approximateByteSize()||Kt.snapshotVersion.toMicroseconds()-gt.snapshotVersion.toMicroseconds()>=3e8||fn.addedDocuments.size+fn.modifiedDocuments.size+fn.removedDocuments.size>0)&&D.push(t.Cs.updateTargetData(d,lt))});let L=Hs(),H=Xn();if(e.documentUpdates.forEach(Q=>{e.resolvedLimboDocuments.has(Q)&&D.push(t.persistence.referenceDelegate.updateLimboDocument(d,Q))}),D.push(Dp(d,g,e.documentUpdates).next(Q=>{L=Q.Wi,H=Q.zi})),!o.isEqual(On.min())){const Q=t.Cs.getLastRemoteSnapshotVersion(d).next(ve=>t.Cs.setTargetsMetadata(d,d.currentSequenceNumber,o));D.push(Q)}return Ze.waitFor(D).next(()=>g.apply(d)).next(()=>t.localDocuments.getLocalViewOfDocuments(d,L,H)).next(()=>L)}).then(d=>(t.Ui=u,d))}function Dp(i,e,t){let o=Xn(),u=Xn();return t.forEach(d=>o=o.add(d)),e.getEntries(i,o).next(d=>{let g=Hs();return t.forEach((D,L)=>{const H=d.get(D);L.isFoundDocument()!==H.isFoundDocument()&&(u=u.add(D)),L.isNoDocument()&&L.version.isEqual(On.min())?(e.removeEntry(D,L.readTime),g=g.insert(D,L)):!H.isValidDocument()||L.version.compareTo(H.version)>0||0===L.version.compareTo(H.version)&&H.hasPendingWrites?(e.addEntry(L),g=g.insert(D,L)):Tt("LocalStore","Ignoring outdated watch update for ",D,". Current version:",H.version," Watch version:",L.version)}),{Wi:g,zi:u}})}function nm(i,e){const t=Ht(i);return t.persistence.runTransaction("Get next mutation batch","readonly",o=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(o,e)))}function Tc(i,e){const t=Ht(i);return t.persistence.runTransaction("Allocate target","readwrite",o=>{let u;return t.Cs.getTargetData(o,e).next(d=>d?(u=d,Ze.resolve(u)):t.Cs.allocateTargetId(o).next(g=>(u=new il(e,g,0,o.currentSequenceNumber),t.Cs.addTargetData(o,u).next(()=>u))))}).then(o=>{const u=t.Ui.get(o.targetId);return(null===u||o.snapshotVersion.compareTo(u.snapshotVersion)>0)&&(t.Ui=t.Ui.insert(o.targetId,o),t.qi.set(e,o.targetId)),o})}function Sc(i,e,t){return Rh.apply(this,arguments)}function Rh(){return Rh=(0,he.Z)(function*(i,e,t){const o=Ht(i),u=o.Ui.get(e),d=t?"readwrite":"readwrite-primary";try{t||(yield o.persistence.runTransaction("Release target",d,g=>o.persistence.referenceDelegate.removeTarget(g,u)))}catch(g){if(!Ao(g))throw g;Tt("LocalStore",`Failed to update sequence numbers for target ${e}: ${g}`)}o.Ui=o.Ui.remove(e),o.qi.delete(u.target)}),Rh.apply(this,arguments)}function Oh(i,e,t){const o=Ht(i);let u=On.min(),d=Xn();return o.persistence.runTransaction("Execute query","readonly",g=>function(D,L,H){const Q=Ht(D),ve=Q.qi.get(H);return void 0!==ve?Ze.resolve(Q.Ui.get(ve)):Q.Cs.getTargetData(L,H)}(o,g,bs(e)).next(D=>{if(D)return u=D.lastLimboFreeSnapshotVersion,o.Cs.getMatchingKeysForTargetId(g,D.targetId).next(L=>{d=L})}).next(()=>o.Li.getDocumentsMatchingQuery(g,e,t?u:On.min(),t?d:Xn())).next(D=>(im(o,Qc(e),D),{documents:D,Hi:d})))}function Cp(i,e){const t=Ht(i),o=Ht(t.Cs),u=t.Ui.get(e);return u?Promise.resolve(u.target):t.persistence.runTransaction("Get target data","readonly",d=>o.se(d,e).next(g=>g?g.target:null))}function rm(i,e){const t=Ht(i),o=t.Ki.get(e)||On.min();return t.persistence.runTransaction("Get new document changes","readonly",u=>t.Gi.getAllFromCollectionGroup(u,e,ma(o,-1),Number.MAX_SAFE_INTEGER)).then(u=>(im(t,e,u),u))}function im(i,e,t){let o=On.min();t.forEach((u,d)=>{d.readTime.compareTo(o)>0&&(o=d.readTime)}),i.Ki.set(e,o)}function Nh(){return Nh=(0,he.Z)(function*(i,e,t,o){const u=Ht(i);let d=Xn(),g=Hs();for(const H of t){const Q=e.Ji(H.metadata.name);H.document&&(d=d.add(Q));const ve=e.Yi(H);ve.setReadTime(e.Xi(H.metadata.readTime)),g=g.insert(Q,ve)}const D=u.Gi.newChangeBuffer({trackRemovals:!0}),L=yield Tc(u,(H=o,bs(Mu(gr.fromString(`__bundle__/docs/${H}`)))));var H;return u.persistence.runTransaction("Apply bundle documents","readwrite",H=>Dp(H,D,g).next(Q=>(D.apply(H),Q)).next(Q=>u.Cs.removeMatchingKeysForTargetId(H,L.targetId).next(()=>u.Cs.addMatchingKeys(H,d,L.targetId)).next(()=>u.localDocuments.getLocalViewOfDocuments(H,Q.Wi,Q.zi)).next(()=>Q.Wi)))}),Nh.apply(this,arguments)}function sm(i,e){return Vu.apply(this,arguments)}function Vu(){return Vu=(0,he.Z)(function*(i,e,t=Xn()){const o=yield Tc(i,bs(np(e.bundledQuery))),u=Ht(i);return u.persistence.runTransaction("Save named query","readwrite",d=>{const g=Gs(e.readTime);if(o.snapshotVersion.compareTo(g)>=0)return u.Ns.saveNamedQuery(d,e);const D=o.withResumeToken(_i.EMPTY_BYTE_STRING,g);return u.Ui=u.Ui.insert(D.targetId,D),u.Cs.updateTargetData(d,D).next(()=>u.Cs.removeMatchingKeysForTargetId(d,o.targetId)).next(()=>u.Cs.addMatchingKeys(d,t,o.targetId)).next(()=>u.Ns.saveNamedQuery(d,e))})}),Vu.apply(this,arguments)}function om(i,e){return`firestore_clients_${i}_${e}`}function Ph(i,e,t){let o=`firestore_mutations_${i}_${t}`;return e.isAuthenticated()&&(o+=`_${e.uid}`),o}function _d(i,e){return`firestore_targets_${i}_${e}`}class kh{constructor(e,t,o,u){this.user=e,this.batchId=t,this.state=o,this.error=u}static Zi(e,t,o){const u=JSON.parse(o);let d,g="object"==typeof u&&-1!==["pending","acknowledged","rejected"].indexOf(u.state)&&(void 0===u.error||"object"==typeof u.error);return g&&u.error&&(g="string"==typeof u.error.message&&"string"==typeof u.error.code,g&&(d=new Et(u.error.code,u.error.message))),g?new kh(e,t,u.state,d):(Nr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${o}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Fh{constructor(e,t,o){this.targetId=e,this.state=t,this.error=o}static Zi(e,t){const o=JSON.parse(t);let u,d="object"==typeof o&&-1!==["not-current","current","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return d&&o.error&&(d="string"==typeof o.error.message&&"string"==typeof o.error.code,d&&(u=new Et(o.error.code,o.error.message))),d?new Fh(e,o.state,u):(Nr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class bp{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Zi(e,t){const o=JSON.parse(t);let u="object"==typeof o&&o.activeTargetIds instanceof Array,d=vc();for(let g=0;u&&g<o.activeTargetIds.length;++g)u=It(o.activeTargetIds[g]),d=d.add(o.activeTargetIds[g]);return u?new bp(e,d):(Nr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class am{constructor(e,t){this.clientId=e,this.onlineState=t}static Zi(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new am(t.clientId,t.onlineState):(Nr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class Tp{constructor(){this.activeTargetIds=vc()}er(e){this.activeTargetIds=this.activeTargetIds.add(e)}nr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}tr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Lh{constructor(e,t,o,u,d){this.window=e,this.Hs=t,this.persistenceKey=o,this.sr=u,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ir=this.rr.bind(this),this.ur=new rn(In),this.started=!1,this.cr=[];const g=o.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=d,this.ar=om(this.persistenceKey,this.sr),this.hr=`firestore_sequence_number_${this.persistenceKey}`,this.ur=this.ur.insert(this.sr,new Tp),this.lr=new RegExp(`^firestore_clients_${g}_([^_]*)$`),this.dr=new RegExp(`^firestore_mutations_${g}_(\\d+)(?:_(.*))?$`),this._r=new RegExp(`^firestore_targets_${g}_(\\d+)$`),this.wr=`firestore_online_state_${this.persistenceKey}`,this.mr=function(D){return`firestore_bundle_loaded_v2_${D}`}(this.persistenceKey),this.window.addEventListener("storage",this.ir)}static C(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,he.Z)(function*(){const t=yield e.syncEngine.vi();for(const u of t){if(u===e.sr)continue;const d=e.getItem(om(e.persistenceKey,u));if(d){const g=bp.Zi(u,d);g&&(e.ur=e.ur.insert(g.clientId,g))}}e.gr();const o=e.storage.getItem(e.wr);if(o){const u=e.yr(o);u&&e.pr(u)}for(const u of e.cr)e.rr(u);e.cr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.hr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ir(this.ur)}isActiveQueryTarget(e){let t=!1;return this.ur.forEach((o,u)=>{u.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Tr(e,"pending")}updateMutationState(e,t,o){this.Tr(e,t,o),this.Er(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const o=this.storage.getItem(_d(this.persistenceKey,e));if(o){const u=Fh.Zi(e,o);u&&(t=u.state)}}return this.Ar.er(e),this.gr(),t}removeLocalQueryTarget(e){this.Ar.nr(e),this.gr()}isLocalQueryTarget(e){return this.Ar.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(_d(this.persistenceKey,e))}updateQueryState(e,t,o){this.Rr(e,t,o)}handleUserChange(e,t,o){t.forEach(u=>{this.Er(u)}),this.currentUser=e,o.forEach(u=>{this.addPendingMutation(u)})}setOnlineState(e){this.br(e)}notifyBundleLoaded(e){this.Pr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ir),this.removeItem(this.ar),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Tt("SharedClientState","READ",e,t),t}setItem(e,t){Tt("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Tt("SharedClientState","REMOVE",e),this.storage.removeItem(e)}rr(e){var t=this;const o=e;if(o.storageArea===this.storage){if(Tt("SharedClientState","EVENT",o.key,o.newValue),o.key===this.ar)return void Nr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Hs.enqueueRetryable((0,he.Z)(function*(){if(t.started){if(null!==o.key)if(t.lr.test(o.key)){if(null==o.newValue){const u=t.vr(o.key);return t.Vr(u,null)}{const u=t.Sr(o.key,o.newValue);if(u)return t.Vr(u.clientId,u)}}else if(t.dr.test(o.key)){if(null!==o.newValue){const u=t.Dr(o.key,o.newValue);if(u)return t.Cr(u)}}else if(t._r.test(o.key)){if(null!==o.newValue){const u=t.Nr(o.key,o.newValue);if(u)return t.kr(u)}}else if(o.key===t.wr){if(null!==o.newValue){const u=t.yr(o.newValue);if(u)return t.pr(u)}}else if(o.key===t.hr){const u=function(d){let g=te.at;if(null!=d)try{const D=JSON.parse(d);vn("number"==typeof D),g=D}catch(D){Nr("SharedClientState","Failed to read sequence number from WebStorage",D)}return g}(o.newValue);u!==te.at&&t.sequenceNumberHandler(u)}else if(o.key===t.mr){const u=t.Mr(o.newValue);yield Promise.all(u.map(d=>t.syncEngine.Or(d)))}}else t.cr.push(o)}))}}get Ar(){return this.ur.get(this.sr)}gr(){this.setItem(this.ar,this.Ar.tr())}Tr(e,t,o){const u=new kh(this.currentUser,e,t,o),d=Ph(this.persistenceKey,this.currentUser,e);this.setItem(d,u.tr())}Er(e){const t=Ph(this.persistenceKey,this.currentUser,e);this.removeItem(t)}br(e){this.storage.setItem(this.wr,JSON.stringify({clientId:this.sr,onlineState:e}))}Rr(e,t,o){const u=_d(this.persistenceKey,e),d=new Fh(e,t,o);this.setItem(u,d.tr())}Pr(e){const t=JSON.stringify(Array.from(e));this.setItem(this.mr,t)}vr(e){const t=this.lr.exec(e);return t?t[1]:null}Sr(e,t){const o=this.vr(e);return bp.Zi(o,t)}Dr(e,t){const o=this.dr.exec(e),u=Number(o[1]);return kh.Zi(new Gi(void 0!==o[2]?o[2]:null),u,t)}Nr(e,t){const o=this._r.exec(e),u=Number(o[1]);return Fh.Zi(u,t)}yr(e){return am.Zi(e)}Mr(e){return JSON.parse(e)}Cr(e){var t=this;return(0,he.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Fr(e.batchId,e.state,e.error);Tt("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}kr(e){return this.syncEngine.$r(e.targetId,e.state,e.error)}Vr(e,t){const o=t?this.ur.insert(e,t):this.ur.remove(e),u=this.Ir(this.ur),d=this.Ir(o),g=[],D=[];return d.forEach(L=>{u.has(L)||g.push(L)}),u.forEach(L=>{d.has(L)||D.push(L)}),this.syncEngine.Br(g,D).then(()=>{this.ur=o})}pr(e){this.ur.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ir(e){let t=vc();return e.forEach((o,u)=>{t=t.unionWith(u.activeTargetIds)}),t}}class m_{constructor(){this.Lr=new Tp,this.Ur={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,o){}addLocalQueryTarget(e){return this.Lr.er(e),this.Ur[e]||"not-current"}updateQueryState(e,t,o){this.Ur[e]=t}removeLocalQueryTarget(e){this.Lr.nr(e)}isLocalQueryTarget(e){return this.Lr.activeTargetIds.has(e)}clearQueryState(e){delete this.Ur[e]}getAllActiveQueryTargets(){return this.Lr.activeTargetIds}isActiveQueryTarget(e){return this.Lr.activeTargetIds.has(e)}start(){return this.Lr=new Tp,Promise.resolve()}handleUserChange(e,t,o){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class y_{qr(e){}shutdown(){}}class zl{constructor(){this.Kr=()=>this.Gr(),this.Qr=()=>this.jr(),this.Wr=[],this.zr()}qr(e){this.Wr.push(e)}shutdown(){window.removeEventListener("online",this.Kr),window.removeEventListener("offline",this.Qr)}zr(){window.addEventListener("online",this.Kr),window.addEventListener("offline",this.Qr)}Gr(){Tt("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Wr)e(0)}jr(){Tt("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Wr)e(1)}static C(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const __={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class um{constructor(e){this.Hr=e.Hr,this.Jr=e.Jr}Yr(e){this.Xr=e}Zr(e){this.eo=e}onMessage(e){this.no=e}close(){this.Jr()}send(e){this.Hr(e)}so(){this.Xr()}io(e){this.eo(e)}ro(e){this.no(e)}}class Vh extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.oo=(e.ssl?"https":"http")+"://"+e.host,this.uo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}co(e,t,o,u,d){const g=this.ao(e,t);Tt("RestConnection","Sending: ",g,o);const D={};return this.ho(D,u,d),this.lo(e,g,D,o).then(L=>(Tt("RestConnection","Received: ",L),L),L=>{throw To("RestConnection",`${e} failed with error: `,L,"url: ",g,"request:",o),L})}fo(e,t,o,u,d,g){return this.co(e,t,o,u,d)}ho(e,t,o){e["X-Goog-Api-Client"]="gl-js/ fire/"+ea,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((u,d)=>e[d]=u),o&&o.headers.forEach((u,d)=>e[d]=u)}ao(e,t){return`${this.oo}/v1/${t}:${__[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}lo(e,t,o,u){return new Promise((d,g)=>{const D=new Ma;D.listenOnce($o.COMPLETE,()=>{try{switch(D.getLastErrorCode()){case Xo.NO_ERROR:const H=D.getResponseJson();Tt("Connection","XHR received:",JSON.stringify(H)),d(H);break;case Xo.TIMEOUT:Tt("Connection",'RPC "'+e+'" timed out'),g(new Et(Je.DEADLINE_EXCEEDED,"Request time out"));break;case Xo.HTTP_ERROR:const Q=D.getStatus();if(Tt("Connection",'RPC "'+e+'" failed with status:',Q,"response text:",D.getResponseText()),Q>0){const ve=D.getResponseJson().error;if(ve&&ve.status&&ve.message){const Ge=function(lt){const gt=lt.toLowerCase().replace(/_/g,"-");return Object.values(Je).indexOf(gt)>=0?gt:Je.UNKNOWN}(ve.status);g(new Et(Ge,ve.message))}else g(new Et(Je.UNKNOWN,"Server responded with status "+D.getStatus()))}else g(new Et(Je.UNAVAILABLE,"Connection failed."));break;default:Qt()}}finally{Tt("Connection",'RPC "'+e+'" completed.')}});const L=JSON.stringify(u);D.send(t,"POST",L,o,15)})}_o(e,t,o){const u=[this.oo,"/","google.firestore.v1.Firestore","/",e,"/channel"],d=Zr(),g=vo(),D={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(D.xmlHttpFactory=new ro({})),this.ho(D.initMessageHeaders,t,o),(0,nt.uI)()||(0,nt.b$)()||(0,nt.d)()||(0,nt.w1)()||(0,nt.Mn)()||(0,nt.ru)()||(D.httpHeadersOverwriteParam="$httpHeaders");const L=u.join("");Tt("Connection","Creating WebChannel: "+L,D);const H=d.createWebChannel(L,D);let Q=!1,ve=!1;const Ge=new um({Hr:gt=>{ve?Tt("Connection","Not sending because WebChannel is closed:",gt):(Q||(Tt("Connection","Opening WebChannel transport."),H.open(),Q=!0),Tt("Connection","WebChannel sending:",gt),H.send(gt))},Jr:()=>H.close()}),lt=(gt,Kt,fn)=>{gt.listen(Kt,Kr=>{try{fn(Kr)}catch(ui){setTimeout(()=>{throw ui},0)}})};return lt(H,ha.EventType.OPEN,()=>{ve||Tt("Connection","WebChannel transport opened.")}),lt(H,ha.EventType.CLOSE,()=>{ve||(ve=!0,Tt("Connection","WebChannel transport closed"),Ge.io())}),lt(H,ha.EventType.ERROR,gt=>{ve||(ve=!0,To("Connection","WebChannel transport errored:",gt),Ge.io(new Et(Je.UNAVAILABLE,"The operation could not be completed")))}),lt(H,ha.EventType.MESSAGE,gt=>{var Kt;if(!ve){const fn=gt.data[0];vn(!!fn);const Kr=fn,ui=Kr.error||(null===(Kt=Kr[0])||void 0===Kt?void 0:Kt.error);if(ui){Tt("Connection","WebChannel received error:",ui);const jr=ui.status;let As=function(wi){const Js=Ki[wi];if(void 0!==Js)return Rl(Js)}(jr),li=ui.message;void 0===As&&(As=Je.INTERNAL,li="Unknown error status: "+jr+" with message "+ui.message),ve=!0,Ge.io(new Et(As,li)),H.close()}else Tt("Connection","WebChannel received:",fn),Ge.ro(fn)}}),lt(g,bo.STAT_EVENT,gt=>{gt.stat===ai.PROXY?Tt("Connection","Detected buffering proxy"):gt.stat===ai.NOPROXY&&Tt("Connection","Detected no buffering proxy")}),setTimeout(()=>{Ge.so()},0),Ge}}function lm(){return typeof window<"u"?window:null}function vd(){return typeof document<"u"?document:null}function wd(i){return new ad(i,!0)}class Sp{constructor(e,t,o=1e3,u=1.5,d=6e4){this.Hs=e,this.timerId=t,this.wo=o,this.mo=u,this.yo=d,this.po=0,this.Io=null,this.To=Date.now(),this.reset()}reset(){this.po=0}Eo(){this.po=this.yo}Ao(e){this.cancel();const t=Math.floor(this.po+this.Ro()),o=Math.max(0,Date.now()-this.To),u=Math.max(0,t-o);u>0&&Tt("ExponentialBackoff",`Backing off for ${u} ms (base delay: ${this.po} ms, delay with jitter: ${t} ms, last attempt: ${o} ms ago)`),this.Io=this.Hs.enqueueAfterDelay(this.timerId,u,()=>(this.To=Date.now(),e())),this.po*=this.mo,this.po<this.wo&&(this.po=this.wo),this.po>this.yo&&(this.po=this.yo)}bo(){null!==this.Io&&(this.Io.skipDelay(),this.Io=null)}cancel(){null!==this.Io&&(this.Io.cancel(),this.Io=null)}Ro(){return(Math.random()-.5)*this.po}}class cm{constructor(e,t,o,u,d,g,D,L){this.Hs=e,this.Po=o,this.vo=u,this.Vo=d,this.authCredentialsProvider=g,this.appCheckCredentialsProvider=D,this.listener=L,this.state=0,this.So=0,this.Do=null,this.Co=null,this.stream=null,this.xo=new Sp(e,t)}No(){return 1===this.state||5===this.state||this.ko()}ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Mo()}stop(){var e=this;return(0,he.Z)(function*(){e.No()&&(yield e.close(0))})()}Oo(){this.state=0,this.xo.reset()}Fo(){this.ko()&&null===this.Do&&(this.Do=this.Hs.enqueueAfterDelay(this.Po,6e4,()=>this.$o()))}Bo(e){this.Lo(),this.stream.send(e)}$o(){var e=this;return(0,he.Z)(function*(){if(e.ko())return e.close(0)})()}Lo(){this.Do&&(this.Do.cancel(),this.Do=null)}Uo(){this.Co&&(this.Co.cancel(),this.Co=null)}close(e,t){var o=this;return(0,he.Z)(function*(){o.Lo(),o.Uo(),o.xo.cancel(),o.So++,4!==e?o.xo.reset():t&&t.code===Je.RESOURCE_EXHAUSTED?(Nr(t.toString()),Nr("Using maximum backoff delay to prevent overloading the backend."),o.xo.Eo()):t&&t.code===Je.UNAUTHENTICATED&&3!==o.state&&(o.authCredentialsProvider.invalidateToken(),o.appCheckCredentialsProvider.invalidateToken()),null!==o.stream&&(o.qo(),o.stream.close(),o.stream=null),o.state=e,yield o.listener.Zr(t)})()}qo(){}auth(){this.state=1;const e=this.Ko(this.So),t=this.So;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([o,u])=>{this.So===t&&this.Go(o,u)},o=>{e(()=>{const u=new Et(Je.UNKNOWN,"Fetching auth token failed: "+o.message);return this.Qo(u)})})}Go(e,t){const o=this.Ko(this.So);this.stream=this.jo(e,t),this.stream.Yr(()=>{o(()=>(this.state=2,this.Co=this.Hs.enqueueAfterDelay(this.vo,1e4,()=>(this.ko()&&(this.state=3),Promise.resolve())),this.listener.Yr()))}),this.stream.Zr(u=>{o(()=>this.Qo(u))}),this.stream.onMessage(u=>{o(()=>this.onMessage(u))})}Mo(){var e=this;this.state=5,this.xo.Ao((0,he.Z)(function*(){e.state=0,e.start()}))}Qo(e){return Tt("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Ko(e){return t=>{this.Hs.enqueueAndForget(()=>this.So===e?t():(Tt("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class v_ extends cm{constructor(e,t,o,u,d,g){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,o,u,g),this.It=d}jo(e,t){return this.Vo._o("Listen",e,t)}onMessage(e){this.xo.reset();const t=function xn(i,e){let t;if("targetChange"in e){const o="NO_CHANGE"===(L=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===L?1:"REMOVE"===L?2:"CURRENT"===L?3:"RESET"===L?4:Qt(),u=e.targetChange.targetIds||[],d=function(L,H){return L.gt?(vn(void 0===H||"string"==typeof H),_i.fromBase64String(H||"")):(vn(void 0===H||H instanceof Uint8Array),_i.fromUint8Array(H||new Uint8Array))}(i,e.targetChange.resumeToken),g=e.targetChange.cause,D=g&&function(L){const H=void 0===L.code?Je.UNKNOWN:Rl(L.code);return new Et(H,L.message||"")}(g);t=new el(o,u,d,D||null)}else if("documentChange"in e){const o=e.documentChange,u=E(i,o.document.name),d=Gs(o.document.updateTime),g=new Cs({mapValue:{fields:o.document.fields}}),D=bi.newFoundDocument(u,d,g);t=new ts(o.targetIds||[],o.removedTargetIds||[],D.key,D)}else if("documentDelete"in e){const o=e.documentDelete,u=E(i,o.document),d=o.readTime?Gs(o.readTime):On.min(),g=bi.newNoDocument(u,d);t=new ts([],o.removedTargetIds||[],g.key,g)}else if("documentRemove"in e){const o=e.documentRemove,u=E(i,o.document);t=new ts([],o.removedTargetIds||[],u,null)}else{if(!("filter"in e))return Qt();{const o=e.filter,d=new Nu(o.count||0);t=new Nl(o.targetId,d)}}var L;return t}(this.It,e),o=function(u){if(!("targetChange"in u))return On.min();const d=u.targetChange;return d.targetIds&&d.targetIds.length?On.min():d.readTime?Gs(d.readTime):On.min()}(e);return this.listener.Wo(t,o)}zo(e){const t={};t.database=Te(this.It),t.addTarget=function(u,d){let g;const D=d.target;return g=Il(D)?{documents:Ec(u,D)}:{query:tl(u,D)},g.targetId=d.targetId,d.resumeToken.approximateByteSize()>0?g.resumeToken=wc(u,d.resumeToken):d.snapshotVersion.compareTo(On.min())>0&&(g.readTime=Pl(u,d.snapshotVersion.toTimestamp())),g}(this.It,e);const o=function fh(i,e){const t=function(o,u){switch(u){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Qt()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);o&&(t.labels=o),this.Bo(t)}Ho(e){const t={};t.database=Te(this.It),t.removeTarget=e,this.Bo(t)}}class w_ extends cm{constructor(e,t,o,u,d,g){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,o,u,g),this.It=d,this.Jo=!1}get Yo(){return this.Jo}start(){this.Jo=!1,this.lastStreamToken=void 0,super.start()}qo(){this.Jo&&this.Xo([])}jo(e,t){return this.Vo._o("Write",e,t)}onMessage(e){if(vn(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Jo){this.xo.reset();const t=function kl(i,e){return i&&i.length>0?(vn(void 0!==e),i.map(t=>function(o,u){let d=Gs(o.updateTime?o.updateTime:u);return d.isEqual(On.min())&&(d=Gs(u)),new gc(d,o.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),o=Gs(e.commitTime);return this.listener.Zo(o,t)}return vn(!e.writeResults||0===e.writeResults.length),this.Jo=!0,this.listener.tu()}eu(){const e={};e.database=Te(this.It),this.Bo(e)}Xo(e){const t={streamToken:this.lastStreamToken,writes:e.map(o=>ns(this.It,o))};this.Bo(t)}}class dm extends class{}{constructor(e,t,o,u){super(),this.authCredentials=e,this.appCheckCredentials=t,this.Vo=o,this.It=u,this.nu=!1}su(){if(this.nu)throw new Et(Je.FAILED_PRECONDITION,"The client has already been terminated.")}co(e,t,o){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,d])=>this.Vo.co(e,t,o,u,d)).catch(u=>{throw"FirebaseError"===u.name?(u.code===Je.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new Et(Je.UNKNOWN,u.toString())})}fo(e,t,o,u){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([d,g])=>this.Vo.fo(e,t,o,d,g,u)).catch(d=>{throw"FirebaseError"===d.name?(d.code===Je.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new Et(Je.UNKNOWN,d.toString())})}terminate(){this.nu=!0}}class E_{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.iu=0,this.ru=null,this.ou=!0}uu(){0===this.iu&&(this.cu("Unknown"),this.ru=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ru=null,this.au("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve())))}hu(e){"Online"===this.state?this.cu("Unknown"):(this.iu++,this.iu>=1&&(this.lu(),this.au(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.cu("Offline")))}set(e){this.lu(),this.iu=0,"Online"===e&&(this.ou=!1),this.cu(e)}cu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}au(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ou?(Nr(t),this.ou=!1):Tt("OnlineStateTracker",t)}lu(){null!==this.ru&&(this.ru.cancel(),this.ru=null)}}class hm{constructor(e,t,o,u,d){var g=this;this.localStore=e,this.datastore=t,this.asyncQueue=o,this.remoteSyncer={},this.fu=[],this.du=new Map,this._u=new Set,this.wu=[],this.mu=d,this.mu.qr(D=>{o.enqueueAndForget((0,he.Z)(function*(){var L;Do(g)&&(Tt("RemoteStore","Restarting streams for network reachability change."),yield(L=(0,he.Z)(function*(H){const Q=Ht(H);Q._u.add(4),yield Id(Q),Q.gu.set("Unknown"),Q._u.delete(4),yield Ac(Q)}),function(H){return L.apply(this,arguments)})(g))}))}),this.gu=new E_(o,u)}}function Ac(i){return Ed.apply(this,arguments)}function Ed(){return Ed=(0,he.Z)(function*(i){if(Do(i))for(const e of i.wu)yield e(!0)}),Ed.apply(this,arguments)}function Id(i){return Dd.apply(this,arguments)}function Dd(){return Dd=(0,he.Z)(function*(i){for(const e of i.wu)yield e(!1)}),Dd.apply(this,arguments)}function Uh(i,e){const t=Ht(i);t.du.has(e.targetId)||(t.du.set(e.targetId,e),xc(t)?jh(t):Ad(t).ko()&&al(t,e))}function Bh(i,e){const t=Ht(i),o=Ad(t);t.du.delete(e),o.ko()&&Ap(t,e),0===t.du.size&&(o.ko()?o.Fo():Do(t)&&t.gu.set("Unknown"))}function al(i,e){i.yu.Ot(e.targetId),Ad(i).zo(e)}function Ap(i,e){i.yu.Ot(e),Ad(i).Ho(e)}function jh(i){i.yu=new Qa({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),se:e=>i.du.get(e)||null}),Ad(i).start(),i.gu.uu()}function xc(i){return Do(i)&&!Ad(i).No()&&i.du.size>0}function Do(i){return 0===Ht(i)._u.size}function xp(i){i.yu=void 0}function I_(i){return Cd.apply(this,arguments)}function Cd(){return Cd=(0,he.Z)(function*(i){i.du.forEach((e,t)=>{al(i,e)})}),Cd.apply(this,arguments)}function Uu(i,e){return bd.apply(this,arguments)}function bd(){return bd=(0,he.Z)(function*(i,e){xp(i),xc(i)?(i.gu.hu(e),jh(i)):i.gu.set("Unknown")}),bd.apply(this,arguments)}function fm(i,e,t){return Td.apply(this,arguments)}function Td(){return Td=(0,he.Z)(function*(i,e,t){if(i.gu.set("Online"),e instanceof el&&2===e.state&&e.cause)try{yield(o=(0,he.Z)(function*(u,d){const g=d.cause;for(const D of d.targetIds)u.du.has(D)&&(yield u.remoteSyncer.rejectListen(D,g),u.du.delete(D),u.yu.removeTarget(D))}),function(u,d){return o.apply(this,arguments)})(i,e)}catch(o){Tt("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),o),yield Mp(i,o)}else if(e instanceof ts?i.yu.Gt(e):e instanceof Nl?i.yu.Yt(e):i.yu.Wt(e),!t.isEqual(On.min()))try{const o=yield or(i.localStore);t.compareTo(o)>=0&&(yield function(u,d){const g=u.yu.te(d);return g.targetChanges.forEach((D,L)=>{if(D.resumeToken.approximateByteSize()>0){const H=u.du.get(L);H&&u.du.set(L,H.withResumeToken(D.resumeToken,d))}}),g.targetMismatches.forEach(D=>{const L=u.du.get(D);if(!L)return;u.du.set(D,L.withResumeToken(_i.EMPTY_BYTE_STRING,L.snapshotVersion)),Ap(u,D);const H=new il(L.target,D,1,L.sequenceNumber);al(u,H)}),u.remoteSyncer.applyRemoteEvent(g)}(i,t))}catch(o){Tt("RemoteStore","Failed to raise snapshot:",o),yield Mp(i,o)}var o}),Td.apply(this,arguments)}function Mp(i,e,t){return $h.apply(this,arguments)}function $h(){return $h=(0,he.Z)(function*(i,e,t){if(!Ao(e))throw e;i._u.add(1),yield Id(i),i.gu.set("Offline"),t||(t=()=>or(i.localStore)),i.asyncQueue.enqueueRetryable((0,he.Z)(function*(){Tt("RemoteStore","Retrying IndexedDB access"),yield t(),i._u.delete(1),yield Ac(i)}))}),$h.apply(this,arguments)}function D_(i,e){return e().catch(t=>Mp(i,t,e))}function Bu(i){return Mc.apply(this,arguments)}function Mc(){return Mc=(0,he.Z)(function*(i){const e=Ht(i),t=Wl(e);let o=e.fu.length>0?e.fu[e.fu.length-1].batchId:-1;for(;Rp(e);)try{const u=yield nm(e.localStore,o);if(null===u){0===e.fu.length&&t.Fo();break}o=u.batchId,Op(e,u)}catch(u){yield Mp(e,u)}Hh(e)&&C_(e)}),Mc.apply(this,arguments)}function Rp(i){return Do(i)&&i.fu.length<10}function Op(i,e){i.fu.push(e);const t=Wl(i);t.ko()&&t.Yo&&t.Xo(e.mutations)}function Hh(i){return Do(i)&&!Wl(i).No()&&i.fu.length>0}function C_(i){Wl(i).start()}function b_(i){return Np.apply(this,arguments)}function Np(){return Np=(0,he.Z)(function*(i){Wl(i).eu()}),Np.apply(this,arguments)}function T_(i){return Pp.apply(this,arguments)}function Pp(){return Pp=(0,he.Z)(function*(i){const e=Wl(i);for(const t of i.fu)e.Xo(t.mutations)}),Pp.apply(this,arguments)}function pm(i,e,t){return gm.apply(this,arguments)}function gm(){return gm=(0,he.Z)(function*(i,e,t){const o=i.fu.shift(),u=Fl.from(o,e,t);yield D_(i,()=>i.remoteSyncer.applySuccessfulWrite(u)),yield Bu(i)}),gm.apply(this,arguments)}function S_(i,e){return mm.apply(this,arguments)}function mm(){return mm=(0,he.Z)(function*(i,e){var t;e&&Wl(i).Yo&&(yield(t=(0,he.Z)(function*(o,u){if(sd(d=u.code)&&d!==Je.ABORTED){const g=o.fu.shift();Wl(o).Oo(),yield D_(o,()=>o.remoteSyncer.rejectFailedWrite(g.batchId,u)),yield Bu(o)}var d}),function(o,u){return t.apply(this,arguments)})(i,e)),Hh(i)&&C_(i)}),mm.apply(this,arguments)}function kp(i,e){return Gh.apply(this,arguments)}function Gh(){return Gh=(0,he.Z)(function*(i,e){const t=Ht(i);t.asyncQueue.verifyOperationInProgress(),Tt("RemoteStore","RemoteStore received new credentials");const o=Do(t);t._u.add(3),yield Id(t),o&&t.gu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t._u.delete(3),yield Ac(t)}),Gh.apply(this,arguments)}function Fp(i,e){return Sd.apply(this,arguments)}function Sd(){return Sd=(0,he.Z)(function*(i,e){const t=Ht(i);e?(t._u.delete(2),yield Ac(t)):e||(t._u.add(2),yield Id(t),t.gu.set("Unknown"))}),Sd.apply(this,arguments)}function Ad(i){return i.pu||(i.pu=function(e,t,o){const u=Ht(e);return u.su(),new v_(t,u.Vo,u.authCredentials,u.appCheckCredentials,u.It,o)}(i.datastore,i.asyncQueue,{Yr:I_.bind(null,i),Zr:Uu.bind(null,i),Wo:fm.bind(null,i)}),i.wu.push(function(){var e=(0,he.Z)(function*(t){t?(i.pu.Oo(),xc(i)?jh(i):i.gu.set("Unknown")):(yield i.pu.stop(),xp(i))});return function(t){return e.apply(this,arguments)}}())),i.pu}function Wl(i){return i.Iu||(i.Iu=function(e,t,o){const u=Ht(e);return u.su(),new w_(t,u.Vo,u.authCredentials,u.appCheckCredentials,u.It,o)}(i.datastore,i.asyncQueue,{Yr:b_.bind(null,i),Zr:S_.bind(null,i),tu:T_.bind(null,i),Zo:pm.bind(null,i)}),i.wu.push(function(){var e=(0,he.Z)(function*(t){t?(i.Iu.Oo(),yield Bu(i)):(yield i.Iu.stop(),i.fu.length>0&&(Tt("RemoteStore",`Stopping write stream with ${i.fu.length} pending writes`),i.fu=[]))});return function(t){return e.apply(this,arguments)}}())),i.Iu}class ym{constructor(e,t,o,u,d){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=o,this.op=u,this.removalCallback=d,this.deferred=new zi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(g=>{})}static createAndSchedule(e,t,o,u,d){const g=Date.now()+o,D=new ym(e,t,g,u,d);return D.start(o),D}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Et(Je.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function xd(i,e){if(Nr("AsyncQueue",`${e}: ${i}`),Ao(i))return new Et(Je.UNAVAILABLE,`${e}: ${i}`);throw i}class Md{constructor(e){this.comparator=e?(t,o)=>e(t,o)||zt.comparator(t.key,o.key):(t,o)=>zt.comparator(t.key,o.key),this.keyedMap=mc(),this.sortedSet=new rn(this.comparator)}static emptySet(e){return new Md(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,o)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Md)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),o=e.sortedSet.getIterator();for(;t.hasNext();){const u=t.getNext().key,d=o.getNext().key;if(!u.isEqual(d))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const o=new Md;return o.comparator=this.comparator,o.keyedMap=e,o.sortedSet=t,o}}class A_{constructor(){this.Tu=new rn(zt.comparator)}track(e){const t=e.doc.key,o=this.Tu.get(t);o?0!==e.type&&3===o.type?this.Tu=this.Tu.insert(t,e):3===e.type&&1!==o.type?this.Tu=this.Tu.insert(t,{type:o.type,doc:e.doc}):2===e.type&&2===o.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===o.type?this.Tu=this.Tu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===o.type?this.Tu=this.Tu.remove(t):1===e.type&&2===o.type?this.Tu=this.Tu.insert(t,{type:1,doc:o.doc}):0===e.type&&1===o.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):Qt():this.Tu=this.Tu.insert(t,e)}Eu(){const e=[];return this.Tu.inorderTraversal((t,o)=>{e.push(o)}),e}}class Rd{constructor(e,t,o,u,d,g,D,L){this.query=e,this.docs=t,this.oldDocs=o,this.docChanges=u,this.mutatedKeys=d,this.fromCache=g,this.syncStateChanged=D,this.excludesMetadataChanges=L}static fromInitialDocuments(e,t,o,u){const d=[];return t.forEach(g=>{d.push({type:0,doc:g})}),new Rd(e,t,Md.emptySet(t),d,o,u,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Cl(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,o=e.docChanges;if(t.length!==o.length)return!1;for(let u=0;u<t.length;u++)if(t[u].type!==o[u].type||!t[u].doc.isEqual(o[u].doc))return!1;return!0}}class l0{constructor(){this.Au=void 0,this.listeners=[]}}class c0{constructor(){this.queries=new fu(e=>hc(e),Cl),this.onlineState="Unknown",this.Ru=new Set}}function _m(i,e){return wu.apply(this,arguments)}function wu(){return wu=(0,he.Z)(function*(i,e){const t=Ht(i),o=e.query;let u=!1,d=t.queries.get(o);if(d||(u=!0,d=new l0),u)try{d.Au=yield t.onListen(o)}catch(g){const D=xd(g,`Initialization of query '${Yc(e.query)}' failed`);return void e.onError(D)}t.queries.set(o,d),d.listeners.push(e),e.bu(t.onlineState),d.Au&&e.Pu(d.Au)&&zh(t)}),wu.apply(this,arguments)}function Od(i,e){return Lp.apply(this,arguments)}function Lp(){return Lp=(0,he.Z)(function*(i,e){const t=Ht(i),o=e.query;let u=!1;const d=t.queries.get(o);if(d){const g=d.listeners.indexOf(e);g>=0&&(d.listeners.splice(g,1),u=0===d.listeners.length)}if(u)return t.queries.delete(o),t.onUnlisten(o)}),Lp.apply(this,arguments)}function vm(i,e){const t=Ht(i);let o=!1;for(const u of e){const g=t.queries.get(u.query);if(g){for(const D of g.listeners)D.Pu(u)&&(o=!0);g.Au=u}}o&&zh(t)}function Vp(i,e,t){const o=Ht(i),u=o.queries.get(e);if(u)for(const d of u.listeners)d.onError(t);o.queries.delete(e)}function zh(i){i.Ru.forEach(e=>{e.next()})}class Nd{constructor(e,t,o){this.query=e,this.vu=t,this.Vu=!1,this.Su=null,this.onlineState="Unknown",this.options=o||{}}Pu(e){if(!this.options.includeMetadataChanges){const o=[];for(const u of e.docChanges)3!==u.type&&o.push(u);e=new Rd(e.query,e.docs,e.oldDocs,o,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.Vu?this.Du(e)&&(this.vu.next(e),t=!0):this.Cu(e,this.onlineState)&&(this.xu(e),t=!0),this.Su=e,t}onError(e){this.vu.error(e)}bu(e){this.onlineState=e;let t=!1;return this.Su&&!this.Vu&&this.Cu(this.Su,e)&&(this.xu(this.Su),t=!0),t}Cu(e,t){return!e.fromCache||!(this.options.Nu&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}Du(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Su&&this.Su.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}xu(e){e=Rd.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.Vu=!0,this.vu.next(e)}}class x_{constructor(e,t){this.payload=e,this.byteLength=t}ku(){return"metadata"in this.payload}}class ju{constructor(e){this.It=e}Ji(e){return E(this.It,e)}Yi(e){return e.metadata.exists?ln(this.It,e.document,!1):bi.newNoDocument(this.Ji(e.metadata.name),this.Xi(e.metadata.readTime))}Xi(e){return Gs(e)}}class wm{constructor(e,t,o){this.Mu=e,this.localStore=t,this.It=o,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=Em(e)}Ou(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;const o=gr.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(o.get(o.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Fu(e){const t=new Map,o=new ju(this.It);for(const u of e)if(u.metadata.queries){const d=o.Ji(u.metadata.name);for(const g of u.metadata.queries){const D=(t.get(g)||Xn()).add(d);t.set(g,D)}}return t}complete(){var e=this;return(0,he.Z)(function*(){const t=yield function u0(i,e,t,o){return Nh.apply(this,arguments)}(e.localStore,new ju(e.It),e.documents,e.Mu.id),o=e.Fu(e.documents);for(const u of e.queries)yield sm(e.localStore,u,o.get(u.name));return e.progress.taskState="Success",{progress:e.progress,$u:e.collectionGroups,Bu:t}})()}}function Em(i){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:i.totalDocuments,totalBytes:i.totalBytes}}class Im{constructor(e){this.key=e}}class Up{constructor(e){this.key=e}}class Dm{constructor(e,t){this.query=e,this.Lu=t,this.Uu=null,this.current=!1,this.qu=Xn(),this.mutatedKeys=Xn(),this.Ku=Ta(e),this.Gu=new Md(this.Ku)}get Qu(){return this.Lu}ju(e,t){const o=t?t.Wu:new A_,u=t?t.Gu:this.Gu;let d=t?t.mutatedKeys:this.mutatedKeys,g=u,D=!1;const L="F"===this.query.limitType&&u.size===this.query.limit?u.last():null,H="L"===this.query.limitType&&u.size===this.query.limit?u.first():null;if(e.inorderTraversal((Q,ve)=>{const Ge=u.get(Q),lt=cu(this.query,ve)?ve:null,gt=!!Ge&&this.mutatedKeys.has(Ge.key),Kt=!!lt&&(lt.hasLocalMutations||this.mutatedKeys.has(lt.key)&&lt.hasCommittedMutations);let fn=!1;Ge&&lt?Ge.data.isEqual(lt.data)?gt!==Kt&&(o.track({type:3,doc:lt}),fn=!0):this.zu(Ge,lt)||(o.track({type:2,doc:lt}),fn=!0,(L&&this.Ku(lt,L)>0||H&&this.Ku(lt,H)<0)&&(D=!0)):!Ge&&lt?(o.track({type:0,doc:lt}),fn=!0):Ge&&!lt&&(o.track({type:1,doc:Ge}),fn=!0,(L||H)&&(D=!0)),fn&&(lt?(g=g.add(lt),d=Kt?d.add(Q):d.delete(Q)):(g=g.delete(Q),d=d.delete(Q)))}),null!==this.query.limit)for(;g.size>this.query.limit;){const Q="F"===this.query.limitType?g.last():g.first();g=g.delete(Q.key),d=d.delete(Q.key),o.track({type:1,doc:Q})}return{Gu:g,Wu:o,$i:D,mutatedKeys:d}}zu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,o){const u=this.Gu;this.Gu=e.Gu,this.mutatedKeys=e.mutatedKeys;const d=e.Wu.Eu();d.sort((H,Q)=>function(ve,Ge){const lt=gt=>{switch(gt){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Qt()}};return lt(ve)-lt(Ge)}(H.type,Q.type)||this.Ku(H.doc,Q.doc)),this.Hu(o);const g=t?this.Ju():[],D=0===this.qu.size&&this.current?1:0,L=D!==this.Uu;return this.Uu=D,0!==d.length||L?{snapshot:new Rd(this.query,e.Gu,u,d,e.mutatedKeys,0===D,L,!1),Yu:g}:{Yu:g}}bu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Gu:this.Gu,Wu:new A_,mutatedKeys:this.mutatedKeys,$i:!1},!1)):{Yu:[]}}Xu(e){return!this.Lu.has(e)&&!!this.Gu.has(e)&&!this.Gu.get(e).hasLocalMutations}Hu(e){e&&(e.addedDocuments.forEach(t=>this.Lu=this.Lu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Lu=this.Lu.delete(t)),this.current=e.current)}Ju(){if(!this.current)return[];const e=this.qu;this.qu=Xn(),this.Gu.forEach(o=>{this.Xu(o.key)&&(this.qu=this.qu.add(o.key))});const t=[];return e.forEach(o=>{this.qu.has(o)||t.push(new Up(o))}),this.qu.forEach(o=>{e.has(o)||t.push(new Im(o))}),t}Zu(e){this.Lu=e.Hi,this.qu=Xn();const t=this.ju(e.documents);return this.applyChanges(t,!0)}tc(){return Rd.fromInitialDocuments(this.query,this.Gu,this.mutatedKeys,0===this.Uu)}}class M_{constructor(e,t,o){this.query=e,this.targetId=t,this.view=o}}class Wh{constructor(e){this.key=e,this.ec=!1}}class Rc{constructor(e,t,o,u,d,g){this.localStore=e,this.remoteStore=t,this.eventManager=o,this.sharedClientState=u,this.currentUser=d,this.maxConcurrentLimboResolutions=g,this.nc={},this.sc=new fu(D=>hc(D),Cl),this.ic=new Map,this.rc=new Set,this.oc=new rn(zt.comparator),this.uc=new Map,this.cc=new xh,this.ac={},this.hc=new Map,this.lc=Hl.vn(),this.onlineState="Unknown",this.fc=void 0}get isPrimaryClient(){return!0===this.fc}}function Bp(i,e){return ul.apply(this,arguments)}function ul(){return ul=(0,he.Z)(function*(i,e){const t=Kp(i);let o,u;const d=t.sc.get(e);if(d)o=d.targetId,t.sharedClientState.addLocalQueryTarget(o),u=d.view.tc();else{const g=yield Tc(t.localStore,bs(e));t.isPrimaryClient&&Uh(t.remoteStore,g);const D=t.sharedClientState.addLocalQueryTarget(g.targetId);o=g.targetId,u=yield Oc(t,e,o,"current"===D)}return u}),ul.apply(this,arguments)}function Oc(i,e,t,o){return ql.apply(this,arguments)}function ql(){return ql=(0,he.Z)(function*(i,e,t,o){i.dc=(Q,ve,Ge)=>{return(lt=(0,he.Z)(function*(gt,Kt,fn,Kr){let ui=Kt.view.ju(fn);ui.$i&&(ui=yield Oh(gt.localStore,Kt.query,!1).then(({documents:li})=>Kt.view.ju(li,ui)));const jr=Kr&&Kr.targetChanges.get(Kt.targetId),As=Kt.view.applyChanges(ui,gt.isPrimaryClient,jr);return $p(gt,Kt.targetId,As.Yu),As.snapshot}),function(gt,Kt,fn,Kr){return lt.apply(this,arguments)})(i,Q,ve,Ge);var lt};const u=yield Oh(i.localStore,e,!0),d=new Dm(e,u.Hi),g=d.ju(u.documents),D=Ya.createSynthesizedTargetChangeForCurrentChange(t,o&&"Offline"!==i.onlineState),L=d.applyChanges(g,i.isPrimaryClient,D);$p(i,t,L.Yu);const H=new M_(e,t,d);return i.sc.set(e,H),i.ic.has(t)?i.ic.get(t).push(e):i.ic.set(t,[e]),L.snapshot}),ql.apply(this,arguments)}function R_(i,e){return qh.apply(this,arguments)}function qh(){return qh=(0,he.Z)(function*(i,e){const t=Ht(i),o=t.sc.get(e),u=t.ic.get(o.targetId);if(u.length>1)return t.ic.set(o.targetId,u.filter(d=>!Cl(d,e))),void t.sc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(o.targetId),t.sharedClientState.isActiveQueryTarget(o.targetId)||(yield Sc(t.localStore,o.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(o.targetId),Bh(t.remoteStore,o.targetId),Nc(t,o.targetId)}).catch(So))):(Nc(t,o.targetId),yield Sc(t.localStore,o.targetId,!0))}),qh.apply(this,arguments)}function Pd(){return Pd=(0,he.Z)(function*(i,e,t){const o=Yp(i);try{const u=yield function(d,g){const D=Ht(d),L=Ri.now(),H=g.reduce((Ge,lt)=>Ge.add(lt.key),Xn());let Q,ve;return D.persistence.runTransaction("Locally write mutations","readwrite",Ge=>{let lt=Hs(),gt=Xn();return D.Gi.getEntries(Ge,H).next(Kt=>{lt=Kt,lt.forEach((fn,Kr)=>{Kr.isValidDocument()||(gt=gt.add(fn))})}).next(()=>D.localDocuments.getOverlayedDocuments(Ge,lt)).next(Kt=>{Q=Kt;const fn=[];for(const Kr of g){const ui=rd(Kr,Q.get(Kr.key).overlayedDocument);null!=ui&&fn.push(new ja(Kr.key,ui,Jd(ui.value.mapValue),Zi.exists(!0)))}return D.mutationQueue.addMutationBatch(Ge,L,fn,g)}).next(Kt=>{ve=Kt;const fn=Kt.applyToLocalDocumentSet(Q,gt);return D.documentOverlayCache.saveOverlays(Ge,Kt.batchId,fn)})}).then(()=>({batchId:ve.batchId,changes:yc(Q)}))}(o.localStore,e);o.sharedClientState.addPendingMutation(u.batchId),function(d,g,D){let L=d.ac[d.currentUser.toKey()];L||(L=new rn(In)),L=L.insert(g,D),d.ac[d.currentUser.toKey()]=L}(o,u.batchId,t),yield $u(o,u.changes),yield Bu(o.remoteStore)}catch(u){const d=xd(u,"Failed to persist write");t.reject(d)}}),Pd.apply(this,arguments)}function Zh(i,e){return Kh.apply(this,arguments)}function Kh(){return Kh=(0,he.Z)(function*(i,e){const t=Ht(i);try{const o=yield tm(t.localStore,e);e.targetChanges.forEach((u,d)=>{const g=t.uc.get(d);g&&(vn(u.addedDocuments.size+u.modifiedDocuments.size+u.removedDocuments.size<=1),u.addedDocuments.size>0?g.ec=!0:u.modifiedDocuments.size>0?vn(g.ec):u.removedDocuments.size>0&&(vn(g.ec),g.ec=!1))}),yield $u(t,o,e)}catch(o){yield So(o)}}),Kh.apply(this,arguments)}function Yh(i,e,t){const o=Ht(i);if(o.isPrimaryClient&&0===t||!o.isPrimaryClient&&1===t){const u=[];o.sc.forEach((d,g)=>{const D=g.view.bu(e);D.snapshot&&u.push(D.snapshot)}),function(d,g){const D=Ht(d);D.onlineState=g;let L=!1;D.queries.forEach((H,Q)=>{for(const ve of Q.listeners)ve.bu(g)&&(L=!0)}),L&&zh(D)}(o.eventManager,e),u.length&&o.nc.Wo(u),o.onlineState=e,o.isPrimaryClient&&o.sharedClientState.setOnlineState(e)}}function O_(i,e,t){return bm.apply(this,arguments)}function bm(){return bm=(0,he.Z)(function*(i,e,t){const o=Ht(i);o.sharedClientState.updateQueryState(e,"rejected",t);const u=o.uc.get(e),d=u&&u.key;if(d){let g=new rn(zt.comparator);g=g.insert(d,bi.newNoDocument(d,On.min()));const D=Xn().add(d),L=new Fu(On.min(),new Map,new zn(In),g,D);yield Zh(o,L),o.oc=o.oc.remove(d),o.uc.delete(e),ef(o)}else yield Sc(o.localStore,e,!1).then(()=>Nc(o,e,t)).catch(So)}),bm.apply(this,arguments)}function N_(i,e){return Qh.apply(this,arguments)}function Qh(){return Qh=(0,he.Z)(function*(i,e){const t=Ht(i),o=e.batch.batchId;try{const u=yield g_(t.localStore,e);Xh(t,o,null),oa(t,o),t.sharedClientState.updateMutationState(o,"acknowledged"),yield $u(t,u)}catch(u){yield So(u)}}),Qh.apply(this,arguments)}function P_(i,e,t){return Jh.apply(this,arguments)}function Jh(){return Jh=(0,he.Z)(function*(i,e,t){const o=Ht(i);try{const u=yield function(d,g){const D=Ht(d);return D.persistence.runTransaction("Reject batch","readwrite-primary",L=>{let H;return D.mutationQueue.lookupMutationBatch(L,g).next(Q=>(vn(null!==Q),H=Q.keys(),D.mutationQueue.removeMutationBatch(L,Q))).next(()=>D.mutationQueue.performConsistencyCheck(L)).next(()=>D.documentOverlayCache.removeOverlaysForBatchId(L,H,g)).next(()=>D.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(L,H)).next(()=>D.localDocuments.getDocuments(L,H))})}(o.localStore,e);Xh(o,e,t),oa(o,e),o.sharedClientState.updateMutationState(e,"rejected",t),yield $u(o,u)}catch(u){yield So(u)}}),Jh.apply(this,arguments)}function jp(){return jp=(0,he.Z)(function*(i,e){const t=Ht(i);Do(t.remoteStore)||Tt("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const o=yield function(d){const g=Ht(d);return g.persistence.runTransaction("Get highest unacknowledged batch id","readonly",D=>g.mutationQueue.getHighestUnacknowledgedBatchId(D))}(t.localStore);if(-1===o)return void e.resolve();const u=t.hc.get(o)||[];u.push(e),t.hc.set(o,u)}catch(o){const u=xd(o,"Initialization of waitForPendingWrites() operation failed");e.reject(u)}}),jp.apply(this,arguments)}function oa(i,e){(i.hc.get(e)||[]).forEach(t=>{t.resolve()}),i.hc.delete(e)}function Xh(i,e,t){const o=Ht(i);let u=o.ac[o.currentUser.toKey()];if(u){const d=u.get(e);d&&(t?d.reject(t):d.resolve(),u=u.remove(e)),o.ac[o.currentUser.toKey()]=u}}function Nc(i,e,t=null){i.sharedClientState.removeLocalQueryTarget(e);for(const o of i.ic.get(e))i.sc.delete(o),t&&i.nc._c(o,t);i.ic.delete(e),i.isPrimaryClient&&i.cc.ls(e).forEach(o=>{i.cc.containsKey(o)||k_(i,o)})}function k_(i,e){i.rc.delete(e.path.canonicalString());const t=i.oc.get(e);null!==t&&(Bh(i.remoteStore,t),i.oc=i.oc.remove(e),i.uc.delete(t),ef(i))}function $p(i,e,t){for(const o of t)o instanceof Im?(i.cc.addReference(o.key,e),Hp(i,o)):o instanceof Up?(Tt("SyncEngine","Document no longer in limbo: "+o.key),i.cc.removeReference(o.key,e),i.cc.containsKey(o.key)||k_(i,o.key)):Qt()}function Hp(i,e){const t=e.key,o=t.path.canonicalString();i.oc.get(t)||i.rc.has(o)||(Tt("SyncEngine","New document in limbo: "+t),i.rc.add(o),ef(i))}function ef(i){for(;i.rc.size>0&&i.oc.size<i.maxConcurrentLimboResolutions;){const e=i.rc.values().next().value;i.rc.delete(e);const t=new zt(gr.fromString(e)),o=i.lc.next();i.uc.set(o,new Wh(t)),i.oc=i.oc.insert(t,o),Uh(i.remoteStore,new il(bs(Mu(t.path)),o,2,te.at))}}function $u(i,e,t){return Gp.apply(this,arguments)}function Gp(){return Gp=(0,he.Z)(function*(i,e,t){const o=Ht(i),u=[],d=[],g=[];var D;o.sc.isEmpty()||(o.sc.forEach((D,L)=>{g.push(o.dc(L,e,t).then(H=>{if(H){o.isPrimaryClient&&o.sharedClientState.updateQueryState(L.targetId,H.fromCache?"not-current":"current"),u.push(H);const Q=wp.Ci(L.targetId,H);d.push(Q)}}))}),yield Promise.all(g),o.nc.Wo(u),yield(D=(0,he.Z)(function*(L,H){const Q=Ht(L);try{yield Q.persistence.runTransaction("notifyLocalViewChanges","readwrite",ve=>Ze.forEach(H,Ge=>Ze.forEach(Ge.Si,lt=>Q.persistence.referenceDelegate.addReference(ve,Ge.targetId,lt)).next(()=>Ze.forEach(Ge.Di,lt=>Q.persistence.referenceDelegate.removeReference(ve,Ge.targetId,lt)))))}catch(ve){if(!Ao(ve))throw ve;Tt("LocalStore","Failed to update sequence numbers: "+ve)}for(const ve of H){const Ge=ve.targetId;if(!ve.fromCache){const lt=Q.Ui.get(Ge),Kt=lt.withLastLimboFreeSnapshotVersion(lt.snapshotVersion);Q.Ui=Q.Ui.insert(Ge,Kt)}}}),function(L,H){return D.apply(this,arguments)})(o.localStore,d))}),Gp.apply(this,arguments)}function F_(i,e){return tf.apply(this,arguments)}function tf(){return tf=(0,he.Z)(function*(i,e){const t=Ht(i);if(!t.currentUser.isEqual(e)){Tt("SyncEngine","User change. New user:",e.toKey());const o=yield em(t.localStore,e);t.currentUser=e,(u=t).hc.forEach(g=>{g.forEach(D=>{D.reject(new Et(Je.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),u.hc.clear(),t.sharedClientState.handleUserChange(e,o.removedBatchIds,o.addedBatchIds),yield $u(t,o.ji)}var u}),tf.apply(this,arguments)}function L_(i,e){const t=Ht(i),o=t.uc.get(e);if(o&&o.ec)return Xn().add(o.key);{let u=Xn();const d=t.ic.get(e);if(!d)return u;for(const g of d){const D=t.sc.get(g);u=u.unionWith(D.view.Qu)}return u}}function Sm(i,e){return zp.apply(this,arguments)}function zp(){return zp=(0,he.Z)(function*(i,e){const t=Ht(i),o=yield Oh(t.localStore,e.query,!0),u=e.view.Zu(o);return t.isPrimaryClient&&$p(t,e.targetId,u.Yu),u}),zp.apply(this,arguments)}function V_(i,e){return nf.apply(this,arguments)}function nf(){return nf=(0,he.Z)(function*(i,e){const t=Ht(i);return rm(t.localStore,e).then(o=>$u(t,o))}),nf.apply(this,arguments)}function Am(i,e,t,o){return Wp.apply(this,arguments)}function Wp(){return Wp=(0,he.Z)(function*(i,e,t,o){const u=Ht(i),d=yield function(g,D){const L=Ht(g),H=Ht(L.mutationQueue);return L.persistence.runTransaction("Lookup mutation documents","readonly",Q=>H.Tn(Q,D).next(ve=>ve?L.localDocuments.getDocuments(Q,ve):Ze.resolve(null)))}(u.localStore,e);var D;null!==d?("pending"===t?yield Bu(u.remoteStore):"acknowledged"===t||"rejected"===t?(Xh(u,e,o||null),oa(u,e),D=e,Ht(Ht(u.localStore).mutationQueue).An(D)):Qt(),yield $u(u,d)):Tt("SyncEngine","Cannot apply mutation batch with id: "+e)}),Wp.apply(this,arguments)}function kd(){return kd=(0,he.Z)(function*(i,e){const t=Ht(i);if(Kp(t),Yp(t),!0===e&&!0!==t.fc){const o=t.sharedClientState.getAllActiveQueryTargets(),u=yield xm(t,o.toArray());t.fc=!0,yield Fp(t.remoteStore,!0);for(const d of u)Uh(t.remoteStore,d)}else if(!1===e&&!1!==t.fc){const o=[];let u=Promise.resolve();t.ic.forEach((d,g)=>{t.sharedClientState.isLocalQueryTarget(g)?o.push(g):u=u.then(()=>(Nc(t,g),Sc(t.localStore,g,!0))),Bh(t.remoteStore,g)}),yield u,yield xm(t,o),function(d){const g=Ht(d);g.uc.forEach((D,L)=>{Bh(g.remoteStore,L)}),g.cc.fs(),g.uc=new Map,g.oc=new rn(zt.comparator)}(t),t.fc=!1,yield Fp(t.remoteStore,!1)}}),kd.apply(this,arguments)}function xm(i,e,t){return qp.apply(this,arguments)}function qp(){return qp=(0,he.Z)(function*(i,e,t){const o=Ht(i),u=[],d=[];for(const g of e){let D;const L=o.ic.get(g);if(L&&0!==L.length){D=yield Tc(o.localStore,bs(L[0]));for(const H of L){const Q=o.sc.get(H),ve=yield Sm(o,Q);ve.snapshot&&d.push(ve.snapshot)}}else{const H=yield Cp(o.localStore,g);D=yield Tc(o.localStore,H),yield Oc(o,U_(H),g,!1)}u.push(D)}return o.nc.Wo(d),u}),qp.apply(this,arguments)}function U_(i){return Yu(i.path,i.collectionGroup,i.orderBy,i.filters,i.limit,"F",i.startAt,i.endAt)}function Mm(i){const e=Ht(i);return Ht(Ht(e.localStore).persistence).vi()}function B_(i,e,t,o){return Zp.apply(this,arguments)}function Zp(){return Zp=(0,he.Z)(function*(i,e,t,o){const u=Ht(i);if(u.fc)return void Tt("SyncEngine","Ignoring unexpected query state notification.");const d=u.ic.get(e);if(d&&d.length>0)switch(t){case"current":case"not-current":{const g=yield rm(u.localStore,Qc(d[0])),D=Fu.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield $u(u,g,D);break}case"rejected":yield Sc(u.localStore,e,!0),Nc(u,e,o);break;default:Qt()}}),Zp.apply(this,arguments)}function j_(i,e,t){return Fd.apply(this,arguments)}function Fd(){return Fd=(0,he.Z)(function*(i,e,t){const o=Kp(i);if(o.fc){for(const u of e){if(o.ic.has(u)){Tt("SyncEngine","Adding an already active target "+u);continue}const d=yield Cp(o.localStore,u),g=yield Tc(o.localStore,d);yield Oc(o,U_(d),g.targetId,!1),Uh(o.remoteStore,g)}for(const u of t)o.ic.has(u)&&(yield Sc(o.localStore,u,!1).then(()=>{Bh(o.remoteStore,u),Nc(o,u)}).catch(So))}}),Fd.apply(this,arguments)}function Kp(i){const e=Ht(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=Zh.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=L_.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=O_.bind(null,e),e.nc.Wo=vm.bind(null,e.eventManager),e.nc._c=Vp.bind(null,e.eventManager),e}function Yp(i){const e=Ht(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=N_.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=P_.bind(null,e),e}class sf{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,he.Z)(function*(){t.It=wd(e.databaseInfo.databaseId),t.sharedClientState=t.mc(e),t.persistence=t.gc(e),yield t.persistence.start(),t.localStore=t.yc(e),t.gcScheduler=t.Ic(e,t.localStore),t.indexBackfillerScheduler=t.Tc(e,t.localStore)})()}Ic(e,t){return null}Tc(e,t){return null}yc(e){return Ep(this.persistence,new Xg,e.initialUser,this.It)}gc(e){return new f_(Mh.Bs,this.It)}mc(e){return new m_}terminate(){var e=this;return(0,he.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class Rm extends sf{constructor(e,t,o){super(),this.Ec=e,this.cacheSizeBytes=t,this.forceOwnership=o,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,o=this;return(0,he.Z)(function*(){yield t().call(o,e),yield o.Ec.initialize(o,e),yield Yp(o.Ec.syncEngine),yield Bu(o.Ec.remoteStore),yield o.persistence.li(()=>(o.gcScheduler&&!o.gcScheduler.started&&o.gcScheduler.start(),o.indexBackfillerScheduler&&!o.indexBackfillerScheduler.started&&o.indexBackfillerScheduler.start(),Promise.resolve()))})()}yc(e){return Ep(this.persistence,new Xg,e.initialUser,this.It)}Ic(e,t){return new c_(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}Tc(e,t){const o=new z(t,this.persistence);return new P(e.asyncQueue,o)}gc(e){const t=vp(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),o=void 0!==this.cacheSizeBytes?_a.withCacheSize(this.cacheSizeBytes):_a.DEFAULT;return new Sa(this.synchronizeTabs,t,e.clientId,o,e.asyncQueue,lm(),vd(),this.It,this.sharedClientState,!!this.forceOwnership)}mc(e){return new m_}}class Qp extends Rm{constructor(e,t){super(e,t,!1),this.Ec=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,o=this;return(0,he.Z)(function*(){yield t().call(o,e);const u=o.Ec.syncEngine;o.sharedClientState instanceof Lh&&(o.sharedClientState.syncEngine={Fr:Am.bind(null,u),$r:B_.bind(null,u),Br:j_.bind(null,u),vi:Mm.bind(null,u),Or:V_.bind(null,u)},yield o.sharedClientState.start()),yield o.persistence.li(function(){var d=(0,he.Z)(function*(g){yield function Eu(i,e){return kd.apply(this,arguments)}(o.Ec.syncEngine,g),o.gcScheduler&&(g&&!o.gcScheduler.started?o.gcScheduler.start():g||o.gcScheduler.stop()),o.indexBackfillerScheduler&&(g&&!o.indexBackfillerScheduler.started?o.indexBackfillerScheduler.start():g||o.indexBackfillerScheduler.stop())});return function(g){return d.apply(this,arguments)}}())})()}mc(e){const t=lm();if(!Lh.C(t))throw new Et(Je.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const o=vp(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Lh(t,e.asyncQueue,o,e.clientId,e.initialUser)}}class af{initialize(e,t){var o=this;return(0,he.Z)(function*(){o.localStore||(o.localStore=e.localStore,o.sharedClientState=e.sharedClientState,o.datastore=o.createDatastore(t),o.remoteStore=o.createRemoteStore(t),o.eventManager=o.createEventManager(t),o.syncEngine=o.createSyncEngine(t,!e.synchronizeTabs),o.sharedClientState.onlineStateHandler=u=>Yh(o.syncEngine,u,1),o.remoteStore.remoteSyncer.handleCredentialChange=F_.bind(null,o.syncEngine),yield Fp(o.remoteStore,o.syncEngine.isPrimaryClient))})()}createEventManager(e){return new c0}createDatastore(e){const t=wd(e.databaseInfo.databaseId),o=new Vh(e.databaseInfo);return new dm(e.authCredentials,e.appCheckCredentials,o,t)}createRemoteStore(e){return t=this.localStore,o=this.datastore,u=e.asyncQueue,d=D=>Yh(this.syncEngine,D,0),g=zl.C()?new zl:new y_,new hm(t,o,u,d,g);var t,o,u,d,g}createSyncEngine(e,t){return function(o,u,d,g,D,L,H){const Q=new Rc(o,u,d,g,D,L);return H&&(Q.fc=!0),Q}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,he.Z)(function*(t){const o=Ht(t);Tt("RemoteStore","RemoteStore shutting down."),o._u.add(5),yield Id(o),o.mu.shutdown(),o.gu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function $_(i,e=10240){let t=0;return{read:()=>(0,he.Z)(function*(){if(t<i.byteLength){const o={value:i.slice(t,t+e),done:!1};return t+=e,o}return{done:!0}})(),cancel:()=>(0,he.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class Jp{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ac(this.observer.next,e)}error(e){this.observer.error?this.Ac(this.observer.error,e):Nr("Uncaught Error in snapshot listener:",e)}Rc(){this.muted=!0}Ac(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class Xp{constructor(e,t){this.bc=e,this.It=t,this.metadata=new zi,this.buffer=new Uint8Array,this.Pc=new TextDecoder("utf-8"),this.vc().then(o=>{o&&o.ku()?this.metadata.resolve(o.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(o?.payload)}`))},o=>this.metadata.reject(o))}close(){return this.bc.cancel()}getMetadata(){var e=this;return(0,he.Z)(function*(){return e.metadata.promise})()}wc(){var e=this;return(0,he.Z)(function*(){return yield e.getMetadata(),e.vc()})()}vc(){var e=this;return(0,he.Z)(function*(){const t=yield e.Vc();if(null===t)return null;const o=e.Pc.decode(t),u=Number(o);isNaN(u)&&e.Sc(`length string (${o}) is not valid number`);const d=yield e.Dc(u);return new x_(JSON.parse(d),t.length+u)})()}Cc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Vc(){var e=this;return(0,he.Z)(function*(){for(;e.Cc()<0&&!(yield e.xc()););if(0===e.buffer.length)return null;const t=e.Cc();t<0&&e.Sc("Reached the end of bundle when a length string is expected.");const o=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),o})()}Dc(e){var t=this;return(0,he.Z)(function*(){for(;t.buffer.length<e;)(yield t.xc())&&t.Sc("Reached the end of bundle when more is expected.");const o=t.Pc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),o})()}Sc(e){throw this.bc.cancel(),new Error(`Invalid bundle format: ${e}`)}xc(){var e=this;return(0,he.Z)(function*(){const t=yield e.bc.read();if(!t.done){const o=new Uint8Array(e.buffer.length+t.value.length);o.set(e.buffer),o.set(t.value,e.buffer.length),e.buffer=o}return t.done})()}}class d0{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,he.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Et(Je.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const o=yield(u=(0,he.Z)(function*(d,g){const D=Ht(d),L=Te(D.It)+"/documents",H={documents:g.map(lt=>f(D.It,lt))},Q=yield D.fo("BatchGetDocuments",L,H,g.length),ve=new Map;Q.forEach(lt=>{const gt=function kn(i,e){return"found"in e?function(t,o){vn(!!o.found);const u=E(t,o.found.name),d=Gs(o.found.updateTime),g=new Cs({mapValue:{fields:o.found.fields}});return bi.newFoundDocument(u,d,g)}(i,e):"missing"in e?function(t,o){vn(!!o.missing),vn(!!o.readTime);const u=E(t,o.missing),d=Gs(o.readTime);return bi.newNoDocument(u,d)}(i,e):Qt()}(D.It,lt);ve.set(gt.key.toString(),gt)});const Ge=[];return g.forEach(lt=>{const gt=ve.get(lt.toString());vn(!!gt),Ge.push(gt)}),Ge}),function(d,g){return u.apply(this,arguments)})(t.datastore,e);var u;return o.forEach(u=>t.recordVersion(u)),o})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(o){this.lastWriteError=o}this.writtenDocs.add(e.toString())}delete(e){this.write(new Ml(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,he.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var o;e.mutations.forEach(o=>{t.delete(o.key.toString())}),t.forEach((o,u)=>{const d=zt.fromPath(u);e.mutations.push(new id(d,e.precondition(d)))}),yield(o=(0,he.Z)(function*(u,d){const g=Ht(u),D=Te(g.It)+"/documents",L={writes:d.map(H=>ns(g.It,H))};yield g.co("Commit",D,L)}),function(u,d){return o.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Qt();t=On.min()}const o=this.readVersions.get(e.key.toString());if(o){if(!t.isEqual(o))throw new Et(Je.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(On.min())?Zi.exists(!1):Zi.updateTime(t):Zi.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(On.min()))throw new Et(Je.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Zi.updateTime(t)}return Zi.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class Om{constructor(e,t,o,u,d){this.asyncQueue=e,this.datastore=t,this.options=o,this.updateFunction=u,this.deferred=d,this.Nc=o.maxAttempts,this.xo=new Sp(this.asyncQueue,"transaction_retry")}run(){this.Nc-=1,this.kc()}kc(){var e=this;this.xo.Ao((0,he.Z)(function*(){const t=new d0(e.datastore),o=e.Mc(t);o&&o.then(u=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(u)}).catch(d=>{e.Oc(d)}))}).catch(u=>{e.Oc(u)})}))}Mc(e){try{const t=this.updateFunction(e);return!Pe(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Oc(e){this.Nc>0&&this.Fc(e)?(this.Nc-=1,this.asyncQueue.enqueueAndForget(()=>(this.kc(),Promise.resolve()))):this.deferred.reject(e)}Fc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!sd(t)}return!1}}class Nm{constructor(e,t,o,u){var d=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=o,this.databaseInfo=u,this.user=Gi.UNAUTHENTICATED,this.clientId=ga.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(o,function(){var g=(0,he.Z)(function*(D){Tt("FirestoreClient","Received user=",D.uid),yield d.authCredentialListener(D),d.user=D});return function(D){return g.apply(this,arguments)}}()),this.appCheckCredentials.start(o,g=>(Tt("FirestoreClient","Received new app check token=",g),this.appCheckCredentialListener(g,this.user)))}getConfiguration(){var e=this;return(0,he.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Et(Je.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new zi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,he.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(o){const u=xd(o,"Failed to shutdown persistence");t.reject(u)}})),t.promise}}function eg(i,e){return uf.apply(this,arguments)}function uf(){return uf=(0,he.Z)(function*(i,e){i.asyncQueue.verifyOperationInProgress(),Tt("FirestoreClient","Initializing OfflineComponentProvider");const t=yield i.getConfiguration();yield e.initialize(t);let o=t.initialUser;i.setCredentialChangeListener(function(){var u=(0,he.Z)(function*(d){o.isEqual(d)||(yield em(e.localStore,d),o=d)});return function(d){return u.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>i.terminate()),i.offlineComponents=e}),uf.apply(this,arguments)}function lf(i,e){return eu.apply(this,arguments)}function eu(){return eu=(0,he.Z)(function*(i,e){i.asyncQueue.verifyOperationInProgress();const t=yield Pc(i);Tt("FirestoreClient","Initializing OnlineComponentProvider");const o=yield i.getConfiguration();yield e.initialize(t,o),i.setCredentialChangeListener(u=>kp(e.remoteStore,u)),i.setAppCheckTokenChangeListener((u,d)=>kp(e.remoteStore,d)),i.onlineComponents=e}),eu.apply(this,arguments)}function Pc(i){return kc.apply(this,arguments)}function kc(){return kc=(0,he.Z)(function*(i){return i.offlineComponents||(Tt("FirestoreClient","Using default OfflineComponentProvider"),yield eg(i,new sf)),i.offlineComponents}),kc.apply(this,arguments)}function ll(i){return tg.apply(this,arguments)}function tg(){return tg=(0,he.Z)(function*(i){return i.onlineComponents||(Tt("FirestoreClient","Using default OnlineComponentProvider"),yield lf(i,new af)),i.onlineComponents}),tg.apply(this,arguments)}function cf(i){return Pc(i).then(e=>e.persistence)}function Ld(i){return Pc(i).then(e=>e.localStore)}function Pm(i){return ll(i).then(e=>e.remoteStore)}function ng(i){return ll(i).then(e=>e.syncEngine)}function Iu(i){return rg.apply(this,arguments)}function rg(){return rg=(0,he.Z)(function*(i){const e=yield ll(i),t=e.eventManager;return t.onListen=Bp.bind(null,e.syncEngine),t.onUnlisten=R_.bind(null,e.syncEngine),t}),rg.apply(this,arguments)}function km(i,e,t={}){const o=new zi;return i.asyncQueue.enqueueAndForget((0,he.Z)(function*(){return function(u,d,g,D,L){const H=new Jp({next:ve=>{d.enqueueAndForget(()=>Od(u,Q));const Ge=ve.docs.has(g);!Ge&&ve.fromCache?L.reject(new Et(Je.UNAVAILABLE,"Failed to get document because the client is offline.")):Ge&&ve.fromCache&&D&&"server"===D.source?L.reject(new Et(Je.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):L.resolve(ve)},error:ve=>L.reject(ve)}),Q=new Nd(Mu(g.path),H,{includeMetadataChanges:!0,Nu:!0});return _m(u,Q)}(yield Iu(i),i.asyncQueue,e,t,o)})),o.promise}function Fm(i,e,t={}){const o=new zi;return i.asyncQueue.enqueueAndForget((0,he.Z)(function*(){return function(u,d,g,D,L){const H=new Jp({next:ve=>{d.enqueueAndForget(()=>Od(u,Q)),ve.fromCache&&"server"===D.source?L.reject(new Et(Je.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):L.resolve(ve)},error:ve=>L.reject(ve)}),Q=new Nd(g,H,{includeMetadataChanges:!0,Nu:!0});return _m(u,Q)}(yield Iu(i),i.asyncQueue,e,t,o)})),o.promise}const df=new Map;function sg(i,e,t){if(!t)throw new Et(Je.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function Vm(i,e,t,o){if(!0===e&&!0===o)throw new Et(Je.INVALID_ARGUMENT,`${i} and ${t} cannot be used together.`)}function Um(i){if(!zt.isDocumentKey(i))throw new Et(Je.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function Bm(i){if(zt.isDocumentKey(i))throw new Et(Je.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function hf(i){if(void 0===i)return"undefined";if(null===i)return"null";if("string"==typeof i)return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if("number"==typeof i||"boolean"==typeof i)return""+i;if("object"==typeof i){if(i instanceof Array)return"an array";{const e=(t=i).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof i?"a function":Qt()}function Br(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new Et(Je.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=hf(i);throw new Et(Je.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return i}function Vd(i,e){if(e<=0)throw new Et(Je.INVALID_ARGUMENT,`Function ${i}() requires a positive number, but it was: ${e}.`)}class cl{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Et(Je.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Et(Je.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,Vm("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class ff{constructor(e,t,o,u){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=o,this._app=u,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new cl({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Et(Je.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Et(Je.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new cl(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new nu;switch(t.type){case"gapi":return new Ks(t.client,t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new Et(Je.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=df.get(e);t&&(Tt("ComponentProvider","Removing Datastore"),df.delete(e),t.terminate())}(this),Promise.resolve()}}class rs{constructor(e,t,o){this.converter=t,this._key=o,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ha(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new rs(this.firestore,e,this._key)}}class Yo{constructor(e,t,o){this.converter=t,this._query=o,this.type="query",this.firestore=e}withConverter(e){return new Yo(this.firestore,e,this._query)}}class Ha extends Yo{constructor(e,t,o){super(e,t,Mu(o)),this._path=o,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new rs(this.firestore,null,new zt(e))}withConverter(e){return new Ha(this.firestore,e,this._path)}}function jm(i,e,...t){if(i=(0,nt.m9)(i),sg("collection","path",e),i instanceof ff){const o=gr.fromString(e,...t);return Bm(o),new Ha(i,null,o)}{if(!(i instanceof rs||i instanceof Ha))throw new Et(Je.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const o=i._path.child(gr.fromString(e,...t));return Bm(o),new Ha(i.firestore,null,o)}}function dl(i,e,...t){if(i=(0,nt.m9)(i),1===arguments.length&&(e=ga.R()),sg("doc","path",e),i instanceof ff){const o=gr.fromString(e,...t);return Um(o),new rs(i,null,new zt(o))}{if(!(i instanceof rs||i instanceof Ha))throw new Et(Je.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const o=i._path.child(gr.fromString(e,...t));return Um(o),new rs(i.firestore,i instanceof Ha?i.converter:null,new zt(o))}}function Mo(i,e){return i=(0,nt.m9)(i),e=(0,nt.m9)(e),(i instanceof rs||i instanceof Ha)&&(e instanceof rs||e instanceof Ha)&&i.firestore===e.firestore&&i.path===e.path&&i.converter===e.converter}function hl(i,e){return i=(0,nt.m9)(i),e=(0,nt.m9)(e),i instanceof Yo&&e instanceof Yo&&i.firestore===e.firestore&&Cl(i._query,e._query)&&i.converter===e.converter}class pf{constructor(){this.$c=Promise.resolve(),this.Bc=[],this.Lc=!1,this.Uc=[],this.qc=null,this.Kc=!1,this.Gc=!1,this.Qc=[],this.xo=new Sp(this,"async_queue_retry"),this.jc=()=>{const t=vd();t&&Tt("AsyncQueue","Visibility state changed to "+t.visibilityState),this.xo.bo()};const e=vd();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.jc)}get isShuttingDown(){return this.Lc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Wc(),this.zc(e)}enterRestrictedMode(e){if(!this.Lc){this.Lc=!0,this.Gc=e||!1;const t=vd();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.jc)}}enqueue(e){if(this.Wc(),this.Lc)return new Promise(()=>{});const t=new zi;return this.zc(()=>this.Lc&&this.Gc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Bc.push(e),this.Hc()))}Hc(){var e=this;return(0,he.Z)(function*(){if(0!==e.Bc.length){try{yield e.Bc[0](),e.Bc.shift(),e.xo.reset()}catch(t){if(!Ao(t))throw t;Tt("AsyncQueue","Operation failed with retryable error: "+t)}e.Bc.length>0&&e.xo.Ao(()=>e.Hc())}})()}zc(e){const t=this.$c.then(()=>(this.Kc=!0,e().catch(o=>{throw this.qc=o,this.Kc=!1,Nr("INTERNAL UNHANDLED ERROR: ",function(d){let g=d.message||"";return d.stack&&(g=d.stack.includes(d.message)?d.stack:d.message+"\n"+d.stack),g}(o)),o}).then(o=>(this.Kc=!1,o))));return this.$c=t,t}enqueueAfterDelay(e,t,o){this.Wc(),this.Qc.indexOf(e)>-1&&(t=0);const u=ym.createAndSchedule(this,e,t,o,d=>this.Jc(d));return this.Uc.push(u),u}Wc(){this.qc&&Qt()}verifyOperationInProgress(){}Yc(){var e=this;return(0,he.Z)(function*(){let t;do{t=e.$c,yield t}while(t!==e.$c)})()}Xc(e){for(const t of this.Uc)if(t.timerId===e)return!0;return!1}Zc(e){return this.Yc().then(()=>{this.Uc.sort((t,o)=>t.targetTimeMs-o.targetTimeMs);for(const t of this.Uc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Yc()})}ta(e){this.Qc.push(e)}Jc(e){const t=this.Uc.indexOf(e);this.Uc.splice(t,1)}}function wa(i){return function(e,t){if("object"!=typeof e||null===e)return!1;const o=e;for(const u of["next","error","complete"])if(u in o&&"function"==typeof o[u])return!0;return!1}(i)}class og{constructor(){this._progressObserver={},this._taskCompletionResolver=new zi,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,o){this._progressObserver={next:e,error:t,complete:o}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Ti extends ff{constructor(e,t,o,u){super(e,t,o,u),this.type="firestore",this._queue=new pf,this._persistenceKey=u?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||Zl(this),this._firestoreClient.terminate()}}function is(i){return i._firestoreClient||Zl(i),i._firestoreClient.verifyNotTerminated(),i._firestoreClient}function Zl(i){var e;const t=i._freezeSettings(),o=(d=(null===(e=i._app)||void 0===e?void 0:e.options.appId)||"",new W(i._databaseId,d,i._persistenceKey,(D=t).host,D.ssl,D.experimentalForceLongPolling,D.experimentalAutoDetectLongPolling,D.useFetchStreams));var d,D;i._firestoreClient=new Nm(i._authCredentials,i._appCheckCredentials,i._queue,o)}function Kl(i,e,t){const o=new zi;return i.asyncQueue.enqueue((0,he.Z)(function*(){try{yield eg(i,t),yield lf(i,e),o.resolve()}catch(u){const d=u;if(!("FirebaseError"===(g=d).name?g.code===Je.FAILED_PRECONDITION||g.code===Je.UNIMPLEMENTED:!(typeof DOMException<"u"&&g instanceof DOMException)||22===g.code||20===g.code||11===g.code))throw d;To("Error enabling offline persistence. Falling back to persistence disabled: "+d),o.reject(d)}var g})).then(()=>o.promise)}function ag(i){if(i._initialized||i._terminated)throw new Et(Je.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Cu{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Et(Je.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new mi(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class bu{constructor(e){this._byteString=e}static fromBase64String(e){try{return new bu(_i.fromBase64String(e))}catch(t){throw new Et(Je.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new bu(_i.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class fl{constructor(e){this._methodName=e}}class gf{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Et(Je.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Et(Je.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return In(this._lat,e._lat)||In(this._long,e._long)}}const Zm=/^__.*__$/;class ug{constructor(e,t,o){this.data=e,this.fieldMask=t,this.fieldTransforms=o}toMutation(e,t){return null!==this.fieldMask?new ja(e,this.data,this.fieldMask,t,this.fieldTransforms):new Xu(e,this.data,t,this.fieldTransforms)}}class mf{constructor(e,t,o){this.data=e,this.fieldMask=t,this.fieldTransforms=o}toMutation(e,t){return new ja(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Km(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Qt()}}class Yl{constructor(e,t,o,u,d,g){this.settings=e,this.databaseId=t,this.It=o,this.ignoreUndefinedProperties=u,void 0===d&&this.ea(),this.fieldTransforms=d||[],this.fieldMask=g||[]}get path(){return this.settings.path}get na(){return this.settings.na}sa(e){return new Yl(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.It,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ia(e){var t;const o=null===(t=this.path)||void 0===t?void 0:t.child(e),u=this.sa({path:o,ra:!1});return u.oa(e),u}ua(e){var t;const o=null===(t=this.path)||void 0===t?void 0:t.child(e),u=this.sa({path:o,ra:!1});return u.ea(),u}ca(e){return this.sa({path:void 0,ra:!0})}aa(e){return bf(e,this.settings.methodName,this.settings.ha||!1,this.path,this.settings.la)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}ea(){if(this.path)for(let e=0;e<this.path.length;e++)this.oa(this.path.get(e))}oa(e){if(0===e.length)throw this.aa("Document fields must not be empty");if(Km(this.na)&&Zm.test(e))throw this.aa('Document fields cannot begin and end with "__"')}}class yf{constructor(e,t,o){this.databaseId=e,this.ignoreUndefinedProperties=t,this.It=o||wd(e)}fa(e,t,o,u=!1){return new Yl({na:e,methodName:t,la:o,path:mi.emptyPath(),ra:!1,ha:u},this.databaseId,this.It,this.ignoreUndefinedProperties)}}function Hu(i){const e=i._freezeSettings(),t=wd(i._databaseId);return new yf(i._databaseId,!!e.ignoreUndefinedProperties,t)}function _f(i,e,t,o,u,d={}){const g=i.fa(d.merge||d.mergeFields?2:0,e,t,u);If("Data must be an object, but it was:",g,o);const D=dg(o,g);let L,H;if(d.merge)L=new pi(g.fieldMask),H=g.fieldTransforms;else if(d.mergeFields){const Q=[];for(const ve of d.mergeFields){const Ge=Df(e,ve,t);if(!g.contains(Ge))throw new Et(Je.INVALID_ARGUMENT,`Field '${Ge}' is specified in your field mask but missing from your input data.`);Tf(Q,Ge)||Q.push(Ge)}L=new pi(Q),H=g.fieldTransforms.filter(ve=>L.covers(ve.field))}else L=null,H=g.fieldTransforms;return new ug(new Cs(D),L,H)}class Ql extends fl{_toFieldTransform(e){if(2!==e.na)throw e.aa(1===e.na?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Ql}}function vf(i,e,t){return new Yl({na:3,la:e.settings.la,methodName:i._methodName,ra:t},e.databaseId,e.It,e.ignoreUndefinedProperties)}class wf extends fl{_toFieldTransform(e){return new Tl(e.path,new du)}isEqual(e){return e instanceof wf}}class Ym extends fl{constructor(e,t){super(e),this.da=t}_toFieldTransform(e){const t=vf(this,e,!0),o=this.da.map(d=>Jl(d,t)),u=new Ba(o);return new Tl(e.path,u)}isEqual(e){return this===e}}class lg extends fl{constructor(e,t){super(e),this.da=t}_toFieldTransform(e){const t=vf(this,e,!0),o=this.da.map(d=>Jl(d,t)),u=new Qu(o);return new Tl(e.path,u)}isEqual(e){return this===e}}class Qm extends fl{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=new hu(e.It,bl(e.It,this._a));return new Tl(e.path,t)}isEqual(e){return this===e}}function Ef(i,e,t,o){const u=i.fa(1,e,t);If("Data must be an object, but it was:",u,o);const d=[],g=Cs.empty();tt(o,(L,H)=>{const Q=Cf(e,L,t);H=(0,nt.m9)(H);const ve=u.ua(Q);if(H instanceof Ql)d.push(Q);else{const Ge=Jl(H,ve);null!=Ge&&(d.push(Q),g.set(Q,Ge))}});const D=new pi(d);return new mf(g,D,u.fieldTransforms)}function $d(i,e,t,o,u,d){const g=i.fa(1,e,t),D=[Df(e,o,t)],L=[u];if(d.length%2!=0)throw new Et(Je.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let Ge=0;Ge<d.length;Ge+=2)D.push(Df(e,d[Ge])),L.push(d[Ge+1]);const H=[],Q=Cs.empty();for(let Ge=D.length-1;Ge>=0;--Ge)if(!Tf(H,D[Ge])){const lt=D[Ge];let gt=L[Ge];gt=(0,nt.m9)(gt);const Kt=g.ua(lt);if(gt instanceof Ql)H.push(lt);else{const fn=Jl(gt,Kt);null!=fn&&(H.push(lt),Q.set(lt,fn))}}const ve=new pi(H);return new mf(Q,ve,g.fieldTransforms)}function cg(i,e,t,o=!1){return Jl(t,i.fa(o?4:3,e))}function Jl(i,e){if(hg(i=(0,nt.m9)(i)))return If("Unsupported field value:",e,i),dg(i,e);if(i instanceof fl)return function(t,o){if(!Km(o.na))throw o.aa(`${t._methodName}() can only be used with update() and set()`);if(!o.path)throw o.aa(`${t._methodName}() is not currently supported inside arrays`);const u=t._toFieldTransform(o);u&&o.fieldTransforms.push(u)}(i,e),null;if(void 0===i&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.ra&&4!==e.na)throw e.aa("Nested arrays are not supported");return function(t,o){const u=[];let d=0;for(const g of t){let D=Jl(g,o.ca(d));null==D&&(D={nullValue:"NULL_VALUE"}),u.push(D),d++}return{arrayValue:{values:u}}}(i,e)}return function(t,o){if(null===(t=(0,nt.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return bl(o.It,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const u=Ri.fromDate(t);return{timestampValue:Pl(o.It,u)}}if(t instanceof Ri){const u=new Ri(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Pl(o.It,u)}}if(t instanceof gf)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof bu)return{bytesValue:wc(o.It,t._byteString)};if(t instanceof rs){const u=o.databaseId,d=t.firestore._databaseId;if(!d.isEqual(u))throw o.aa(`Document reference is for database ${d.projectId}/${d.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:m(t.firestore._databaseId||o.databaseId,t._key.path)}}throw o.aa(`Unsupported field value: ${hf(t)}`)}(i,e)}function dg(i,e){const t={};return Ot(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):tt(i,(o,u)=>{const d=Jl(u,e.ia(o));null!=d&&(t[o]=d)}),{mapValue:{fields:t}}}function hg(i){return!("object"!=typeof i||null===i||i instanceof Array||i instanceof Date||i instanceof Ri||i instanceof gf||i instanceof bu||i instanceof rs||i instanceof fl)}function If(i,e,t){if(!hg(t)||"object"!=typeof(o=t)||null===o||Object.getPrototypeOf(o)!==Object.prototype&&null!==Object.getPrototypeOf(o)){const o=hf(t);throw e.aa("an object"===o?i+" a custom object":i+" "+o)}var o}function Df(i,e,t){if((e=(0,nt.m9)(e))instanceof Cu)return e._internalPath;if("string"==typeof e)return Cf(i,e);throw bf("Field path arguments must be of type string or ",i,!1,void 0,t)}const Z_=new RegExp("[~\\*/\\[\\]]");function Cf(i,e,t){if(e.search(Z_)>=0)throw bf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,t);try{return new Cu(...e.split("."))._internalPath}catch{throw bf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,t)}}function bf(i,e,t,o,u){const d=o&&!o.isEmpty(),g=void 0!==u;let D=`Function ${e}() called with invalid data`;t&&(D+=" (via `toFirestore()`)"),D+=". ";let L="";return(d||g)&&(L+=" (found",d&&(L+=` in field ${o}`),g&&(L+=` in document ${u}`),L+=")"),new Et(Je.INVALID_ARGUMENT,D+i+L)}function Tf(i,e){return i.some(t=>t.isEqual(e))}class Xl{constructor(e,t,o,u,d){this._firestore=e,this._userDataWriter=t,this._key=o,this._document=u,this._converter=d}get id(){return this._key.path.lastSegment()}get ref(){return new rs(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Jm(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Hd("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class Jm extends Xl{data(){return super.data()}}function Hd(i,e){return"string"==typeof e?Cf(i,e):e instanceof Cu?e._internalPath:e._delegate._internalPath}class pl{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Tu extends Xl{constructor(e,t,o,u,d,g){super(e,t,o,u,g),this._firestore=e,this._firestoreImpl=e,this.metadata=d}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Uc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const o=this._document.data.field(Hd("DocumentSnapshot.get",e));if(null!==o)return this._userDataWriter.convertValue(o,t.serverTimestamps)}}}class Uc extends Tu{data(e={}){return super.data(e)}}class Gu{constructor(e,t,o,u){this._firestore=e,this._userDataWriter=t,this._snapshot=u,this.metadata=new pl(u.hasPendingWrites,u.fromCache),this.query=o}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(o=>{e.call(t,new Uc(this._firestore,this._userDataWriter,o.key,o,new pl(this._snapshot.mutatedKeys.has(o.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Et(Je.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(o,u){if(o._snapshot.oldDocs.isEmpty()){let d=0;return o._snapshot.docChanges.map(g=>({type:"added",doc:new Uc(o._firestore,o._userDataWriter,g.doc.key,g.doc,new pl(o._snapshot.mutatedKeys.has(g.doc.key),o._snapshot.fromCache),o.query.converter),oldIndex:-1,newIndex:d++}))}{let d=o._snapshot.oldDocs;return o._snapshot.docChanges.filter(g=>u||3!==g.type).map(g=>{const D=new Uc(o._firestore,o._userDataWriter,g.doc.key,g.doc,new pl(o._snapshot.mutatedKeys.has(g.doc.key),o._snapshot.fromCache),o.query.converter);let L=-1,H=-1;return 0!==g.type&&(L=d.indexOf(g.doc.key),d=d.delete(g.doc.key)),1!==g.type&&(d=d.add(g.doc),H=d.indexOf(g.doc.key)),{type:Xm(g.type),doc:D,oldIndex:L,newIndex:H}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function Xm(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Qt()}}function fg(i,e){return i instanceof Tu&&e instanceof Tu?i._firestore===e._firestore&&i._key.isEqual(e._key)&&(null===i._document?null===e._document:i._document.isEqual(e._document))&&i._converter===e._converter:i instanceof Gu&&e instanceof Gu&&i._firestore===e._firestore&&hl(i.query,e.query)&&i.metadata.isEqual(e.metadata)&&i._snapshot.isEqual(e._snapshot)}function K_(i){if("L"===i.limitType&&0===i.explicitOrderBy.length)throw new Et(Je.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Gd{}function gl(i,...e){for(const t of e)i=t._apply(i);return i}class ey extends Gd{constructor(e,t,o){super(),this.wa=e,this.ma=t,this.ga=o,this.type="where"}_apply(e){const t=Hu(e.firestore),o=function(u,d,g,D,L,H,Q){let ve;if(L.isKeyField()){if("array-contains"===H||"array-contains-any"===H)throw new Et(Je.INVALID_ARGUMENT,`Invalid Query. You can't perform '${H}' queries on documentId().`);if("in"===H||"not-in"===H){gg(Q,H);const lt=[];for(const gt of Q)lt.push(ay(D,u,gt));ve={arrayValue:{values:lt}}}else ve=ay(D,u,Q)}else"in"!==H&&"not-in"!==H&&"array-contains-any"!==H||gg(Q,H),ve=cg(g,"where",Q,"in"===H||"not-in"===H);const Ge=ao.create(L,H,ve);return function(lt,gt){if(gt.dt()){const fn=sh(lt);if(null!==fn&&!fn.isEqual(gt.field))throw new Et(Je.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${fn.toString()}' and '${gt.field.toString()}'`);const Kr=ih(lt);null!==Kr&&ev(0,gt.field,Kr)}const Kt=function(fn,Kr){for(const ui of fn.filters)if(Kr.indexOf(ui.op)>=0)return ui.op;return null}(lt,function(fn){switch(fn){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(gt.op));if(null!==Kt)throw new Et(Je.INVALID_ARGUMENT,Kt===gt.op?`Invalid query. You cannot use more than one '${gt.op.toString()}' filter.`:`Invalid query. You cannot use '${gt.op.toString()}' filters with '${Kt.toString()}' filters.`)}(u,Ge),Ge}(e._query,0,t,e.firestore._databaseId,this.wa,this.ma,this.ga);return new Yo(e.firestore,e.converter,function(u,d){const g=u.filters.concat([d]);return new Ys(u.path,u.collectionGroup,u.explicitOrderBy.slice(),g,u.limit,u.limitType,u.startAt,u.endAt)}(e._query,o))}}class uo extends Gd{constructor(e,t){super(),this.wa=e,this.ya=t,this.type="orderBy"}_apply(e){const t=function(o,u,d){if(null!==o.startAt)throw new Et(Je.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==o.endAt)throw new Et(Je.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const g=new lu(u,d);return function(D,L){if(null===ih(D)){const H=sh(D);null!==H&&ev(0,H,L.field)}}(o,g),g}(e._query,this.wa,this.ya);return new Yo(e.firestore,e.converter,function(o,u){const d=o.explicitOrderBy.concat([u]);return new Ys(o.path,o.collectionGroup,d,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)}(e._query,t))}}class ny extends Gd{constructor(e,t,o){super(),this.type=e,this.pa=t,this.Ia=o}_apply(e){return new Yo(e.firestore,e.converter,dc(e._query,this.pa,this.Ia))}}class iy extends Gd{constructor(e,t,o){super(),this.type=e,this.Ta=t,this.Ea=o}_apply(e){const t=pg(e,this.type,this.Ta,this.Ea);return new Yo(e.firestore,e.converter,(u=t,new Ys((o=e._query).path,o.collectionGroup,o.explicitOrderBy.slice(),o.filters.slice(),o.limit,o.limitType,u,o.endAt)));var o,u}}class ec extends Gd{constructor(e,t,o){super(),this.type=e,this.Ta=t,this.Ea=o}_apply(e){const t=pg(e,this.type,this.Ta,this.Ea);return new Yo(e.firestore,e.converter,(u=t,new Ys((o=e._query).path,o.collectionGroup,o.explicitOrderBy.slice(),o.filters.slice(),o.limit,o.limitType,o.startAt,u)));var o,u}}function pg(i,e,t,o){if(t[0]=(0,nt.m9)(t[0]),t[0]instanceof Xl)return function(u,d,g,D,L){if(!D)throw new Et(Je.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${g}().`);const H=[];for(const Q of cc(u))if(Q.field.isKeyField())H.push(xo(d,D.key));else{const ve=D.data.field(Q.field);if(vl(ve))throw new Et(Je.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+Q.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===ve){const Ge=Q.field.canonicalString();throw new Et(Je.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${Ge}' (used as the orderBy) does not exist.`)}H.push(ve)}return new uu(H,L)}(i._query,i.firestore._databaseId,e,t[0]._document,o);{const u=Hu(i.firestore);return function(d,g,D,L,H,Q){const ve=d.explicitOrderBy;if(H.length>ve.length)throw new Et(Je.INVALID_ARGUMENT,`Too many arguments provided to ${L}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const Ge=[];for(let lt=0;lt<H.length;lt++){const gt=H[lt];if(ve[lt].field.isKeyField()){if("string"!=typeof gt)throw new Et(Je.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${L}(), but got a ${typeof gt}`);if(!oh(d)&&-1!==gt.indexOf("/"))throw new Et(Je.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${L}() must be a plain document ID, but '${gt}' contains a slash.`);const Kt=d.path.child(gr.fromString(gt));if(!zt.isDocumentKey(Kt))throw new Et(Je.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${L}() must result in a valid document path, but '${Kt}' is not because it contains an odd number of segments.`);const fn=new zt(Kt);Ge.push(xo(g,fn))}else{const Kt=cg(D,L,gt);Ge.push(Kt)}}return new uu(Ge,Q)}(i._query,i.firestore._databaseId,u,e,t,o)}}function ay(i,e,t){if("string"==typeof(t=(0,nt.m9)(t))){if(""===t)throw new Et(Je.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!oh(e)&&-1!==t.indexOf("/"))throw new Et(Je.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const o=e.path.child(gr.fromString(t));if(!zt.isDocumentKey(o))throw new Et(Je.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${o}' is not because it has an odd number of segments (${o.length}).`);return xo(i,new zt(o))}if(t instanceof rs)return xo(i,t._key);throw new Et(Je.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${hf(t)}.`)}function gg(i,e){if(!Array.isArray(i)||0===i.length)throw new Et(Je.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(i.length>10)throw new Et(Je.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function ev(i,e,t){if(!t.isEqual(e))throw new Et(Je.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}const uy={maxAttempts:5};class zd{convertValue(e,t="none"){switch(bn(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ki(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(vi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Qt()}}convertObject(e,t){const o={};return tt(e.fields,(u,d)=>{o[u]=this.convertValue(d,t)}),o}convertGeoPoint(e){return new gf(ki(e.latitude),ki(e.longitude))}convertArray(e,t){return(e.values||[]).map(o=>this.convertValue(o,t))}convertServerTimestamp(e,t){switch(t){case"previous":const o=x(e);return null==o?null:this.convertValue(o,t);case"estimate":return this.convertTimestamp(k(e));default:return null}}convertTimestamp(e){const t=oo(e);return new Ri(t.seconds,t.nanos)}convertDocumentKey(e,t){const o=gr.fromString(e);vn(qy(o));const u=new ie(o.get(1),o.get(3)),d=new zt(o.popFirst(5));return u.isEqual(t)||Nr(`Document ${d} contains a document reference within a different database (${u.projectId}/${u.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),d}}function Aa(i,e,t){let o;return o=i?t&&(t.merge||t.mergeFields)?i.toFirestore(e,t):i.toFirestore(e):e,o}class tv extends zd{constructor(e){super(),this.firestore=e}convertBytes(e){return new bu(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new rs(this.firestore,null,t)}}class ly{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Hu(e)}set(e,t,o){this._verifyNotCommitted();const u=Ro(e,this._firestore),d=Aa(u.converter,t,o),g=_f(this._dataReader,"WriteBatch.set",u._key,d,null!==u.converter,o);return this._mutations.push(g.toMutation(u._key,Zi.none())),this}update(e,t,o,...u){this._verifyNotCommitted();const d=Ro(e,this._firestore);let g;return g="string"==typeof(t=(0,nt.m9)(t))||t instanceof Cu?$d(this._dataReader,"WriteBatch.update",d._key,t,o,u):Ef(this._dataReader,"WriteBatch.update",d._key,t),this._mutations.push(g.toMutation(d._key,Zi.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Ro(e,this._firestore);return this._mutations=this._mutations.concat(new Ml(t._key,Zi.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Et(Je.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Ro(i,e){if((i=(0,nt.m9)(i)).firestore!==e)throw new Et(Je.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return i}class Oo extends zd{constructor(e){super(),this.firestore=e}convertBytes(e){return new bu(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new rs(this.firestore,null,t)}}function hy(i,e,t){i=Br(i,rs);const o=Br(i.firestore,Ti),u=Aa(i.converter,e,t);return tc(o,[_f(Hu(o),"setDoc",i._key,u,null!==i.converter,t).toMutation(i._key,Zi.none())])}function Sf(i,e,t,...o){i=Br(i,rs);const u=Br(i.firestore,Ti),d=Hu(u);let g;return g="string"==typeof(e=(0,nt.m9)(e))||e instanceof Cu?$d(d,"updateDoc",i._key,e,t,o):Ef(d,"updateDoc",i._key,e),tc(u,[g.toMutation(i._key,Zi.exists(!0))])}function mg(i,...e){var t,o,u;i=(0,nt.m9)(i);let d={includeMetadataChanges:!1},g=0;"object"!=typeof e[g]||wa(e[g])||(d=e[g],g++);const D={includeMetadataChanges:d.includeMetadataChanges};if(wa(e[g])){const ve=e[g];e[g]=null===(t=ve.next)||void 0===t?void 0:t.bind(ve),e[g+1]=null===(o=ve.error)||void 0===o?void 0:o.bind(ve),e[g+2]=null===(u=ve.complete)||void 0===u?void 0:u.bind(ve)}let L,H,Q;if(i instanceof rs)H=Br(i.firestore,Ti),Q=Mu(i._key.path),L={next:ve=>{e[g]&&e[g](Af(H,i,ve))},error:e[g+1],complete:e[g+2]};else{const ve=Br(i,Yo);H=Br(ve.firestore,Ti),Q=ve._query;const Ge=new Oo(H);L={next:lt=>{e[g]&&e[g](new Gu(H,Ge,ve,lt))},error:e[g+1],complete:e[g+2]},K_(i._query)}return function(ve,Ge,lt,gt){const Kt=new Jp(gt),fn=new Nd(Ge,Kt,lt);return ve.asyncQueue.enqueueAndForget((0,he.Z)(function*(){return _m(yield Iu(ve),fn)})),()=>{Kt.Rc(),ve.asyncQueue.enqueueAndForget((0,he.Z)(function*(){return Od(yield Iu(ve),fn)}))}}(is(H),Q,D,L)}function tc(i,e){return function(t,o){const u=new zi;return t.asyncQueue.enqueueAndForget((0,he.Z)(function*(){return function Cm(i,e,t){return Pd.apply(this,arguments)}(yield ng(t),o,u)})),u.promise}(is(i),e)}function Af(i,e,t){const o=t.docs.get(e._key),u=new Oo(i);return new Tu(i,u,e._key,o,new pl(t.hasPendingWrites,t.fromCache),e.converter)}class xf extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Hu(e)}get(e){const t=Ro(e,this._firestore),o=new tv(this._firestore);return this._transaction.lookup([t._key]).then(u=>{if(!u||1!==u.length)return Qt();const d=u[0];if(d.isFoundDocument())return new Xl(this._firestore,o,d.key,d,t.converter);if(d.isNoDocument())return new Xl(this._firestore,o,t._key,null,t.converter);throw Qt()})}set(e,t,o){const u=Ro(e,this._firestore),d=Aa(u.converter,t,o),g=_f(this._dataReader,"Transaction.set",u._key,d,null!==u.converter,o);return this._transaction.set(u._key,g),this}update(e,t,o,...u){const d=Ro(e,this._firestore);let g;return g="string"==typeof(t=(0,nt.m9)(t))||t instanceof Cu?$d(this._dataReader,"Transaction.update",d._key,t,o,u):Ef(this._dataReader,"Transaction.update",d._key,t),this._transaction.update(d._key,g),this}delete(e){const t=Ro(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Ro(e,this._firestore),o=new Oo(this._firestore);return super.get(e).then(u=>new Tu(this._firestore,o,t._key,u._document,new pl(!1,!1),t.converter))}}function Rf(i,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Et("invalid-argument",`Invalid options passed to function ${i}(): You cannot specify both "merge" and "mergeFields".`);return e}function vg(){if(typeof Uint8Array>"u")throw new Et("unimplemented","Uint8Arrays are not available in this environment.")}function _y(){if(!function zo(){return typeof atob<"u"}())throw new Et("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(i,e=!0){ea=it.SDK_VERSION,(0,it._registerComponent)(new Xe.wA("firestore",(t,{instanceIdentifier:o,options:u})=>{const d=t.getProvider("app").getImmediate(),g=new Ti(new Na(t.getProvider("auth-internal")),new pa(t.getProvider("app-check-internal")),function(D,L){if(!Object.prototype.hasOwnProperty.apply(D.options,["projectId"]))throw new Et(Je.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ie(D.options.projectId,L)}(d,o),d);return u=Object.assign({useFetchStreams:e},u),g._setSettings(u),g},"PUBLIC").setMultipleInstances(!0)),(0,it.registerVersion)(Ra,"3.4.15",i),(0,it.registerVersion)(Ra,"3.4.15","esm2017")}();class qd{constructor(e){this._delegate=e}static fromBase64String(e){return _y(),new qd(bu.fromBase64String(e))}static fromUint8Array(e){return vg(),new qd(bu.fromUint8Array(e))}toBase64(){return _y(),this._delegate.toBase64()}toUint8Array(){return vg(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function wg(i){return function cv(i,e){if("object"!=typeof i||null===i)return!1;const t=i;for(const o of e)if(o in t&&"function"==typeof t[o])return!0;return!1}(i,["next","error","complete"])}class dv{enableIndexedDbPersistence(e,t){return function Lc(i,e){ag(i=Br(i,Ti));const t=is(i),o=i._freezeSettings(),u=new af;return Kl(t,u,new Rm(u,o.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function Vc(i){ag(i=Br(i,Ti));const e=is(i),t=i._freezeSettings(),o=new af;return Kl(e,o,new Qp(o,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function $m(i){if(i._initialized&&!i._terminated)throw new Et(Je.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new zi;return i._queue.enqueueAndForgetEvenWhileRestricted((0,he.Z)(function*(){try{yield(t=(0,he.Z)(function*(o){if(!Is.C())return Promise.resolve();const u=o+"main";yield Is.delete(u)}),function(o){return t.apply(this,arguments)})(vp(i._databaseId,i._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class vy{constructor(e,t,o){this._delegate=t,this._persistenceProvider=o,this.INTERNAL={delete:()=>this.terminate()},e instanceof ie||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&To("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,o={}){!function Ud(i,e,t,o={}){var u;const d=(i=Br(i,ff))._getSettings();if("firestore.googleapis.com"!==d.host&&d.host!==e&&To("Host has been set in both settings() and useEmulator(), emulator host will be used"),i._setSettings(Object.assign(Object.assign({},d),{host:`${e}:${t}`,ssl:!1})),o.mockUserToken){let g,D;if("string"==typeof o.mockUserToken)g=o.mockUserToken,D=Gi.MOCK_USER;else{g=(0,nt.Sg)(o.mockUserToken,null===(u=i._app)||void 0===u?void 0:u.options.projectId);const L=o.mockUserToken.sub||o.mockUserToken.user_id;if(!L)throw new Et(Je.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");D=new Gi(L)}i._authCredentials=new Ia(new Wi(g,D))}}(this._delegate,e,t,o)}enableNetwork(){return function Gm(i){return function h0(i){return i.asyncQueue.enqueue((0,he.Z)(function*(){const e=yield cf(i),t=yield Pm(i);return e.setNetworkEnabled(!0),function(o){const u=Ht(o);return u._u.delete(0),Ac(u)}(t)}))}(is(i=Br(i,Ti)))}(this._delegate)}disableNetwork(){return function zm(i){return function H_(i){return i.asyncQueue.enqueue((0,he.Z)(function*(){const e=yield cf(i),t=yield Pm(i);return e.setNetworkEnabled(!1),(o=(0,he.Z)(function*(u){const d=Ht(u);d._u.add(0),yield Id(d),d.gu.set("Offline")}),function(u){return o.apply(this,arguments)})(t);var o}))}(is(i=Br(i,Ti)))}(this._delegate)}enablePersistence(e){let t=!1,o=!1;return e&&(t=!!e.synchronizeTabs,o=!!e.experimentalForceOwningTab,Vm("synchronizeTabs",t,"experimentalForceOwningTab",o)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,o)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function Hm(i){return function(e){const t=new zi;return e.asyncQueue.enqueueAndForget((0,he.Z)(function*(){return function Tm(i,e){return jp.apply(this,arguments)}(yield ng(e),t)})),t.promise}(is(i=Br(i,Ti)))}(this._delegate)}onSnapshotsInSync(e){return function ov(i,e){return function z_(i,e){const t=new Jp(e);return i.asyncQueue.enqueueAndForget((0,he.Z)(function*(){return o=yield Iu(i),u=t,Ht(o).Ru.add(u),void u.next();var o,u})),()=>{t.Rc(),i.asyncQueue.enqueueAndForget((0,he.Z)(function*(){return o=yield Iu(i),u=t,void Ht(o).Ru.delete(u);var o,u}))}}(is(i=Br(i,Ti)),wa(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Et("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new rc(this,jm(this._delegate,e))}catch(t){throw aa(t,"collection()","Firestore.collection()")}}doc(e){try{return new Ga(this,dl(this._delegate,e))}catch(t){throw aa(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new ua(this,function Du(i,e){if(i=Br(i,ff),sg("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Et(Je.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Yo(i,null,(t=e,new Ys(gr.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw aa(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function av(i,e,t){i=Br(i,Ti);const o=Object.assign(Object.assign({},uy),t);return function(u){if(u.maxAttempts<1)throw new Et(Je.INVALID_ARGUMENT,"Max attempts must be at least 1")}(o),function Lm(i,e,t){const o=new zi;return i.asyncQueue.enqueueAndForget((0,he.Z)(function*(){const u=yield(d=i,ll(d).then(g=>g.datastore));var d;new Om(i.asyncQueue,u,t,e,o).run()})),o.promise}(is(i),u=>e(new xf(i,u)),o)}(this._delegate,t=>e(new wy(this,t)))}batch(){return is(this._delegate),new Ey(new ly(this._delegate,e=>tc(this._delegate,e)))}loadBundle(e){return function Wm(i,e){const t=is(i=Br(i,Ti)),o=new og;return function ig(i,e,t,o){const u=function(d,g){let D;return D="string"==typeof d?(new TextEncoder).encode(d):d,L=function(L,H){if(L instanceof Uint8Array)return $_(L,H);if(L instanceof ArrayBuffer)return $_(new Uint8Array(L),H);if(L instanceof ReadableStream)return L.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(D),new Xp(L,g);var L}(t,wd(e));i.asyncQueue.enqueueAndForget((0,he.Z)(function*(){!function rf(i,e,t){const o=Ht(i);var u;(u=(0,he.Z)(function*(d,g,D){try{const L=yield g.getMetadata();if(yield function(Ge,lt){const gt=Ht(Ge),Kt=Gs(lt.createTime);return gt.persistence.runTransaction("hasNewerBundle","readonly",fn=>gt.Ns.getBundleMetadata(fn,lt.id)).then(fn=>!!fn&&fn.createTime.compareTo(Kt)>=0)}(d.localStore,L))return yield g.close(),D._completeWith({taskState:"Success",documentsLoaded:(Ge=L).totalDocuments,bytesLoaded:Ge.totalBytes,totalDocuments:Ge.totalDocuments,totalBytes:Ge.totalBytes}),Promise.resolve(new Set);D._updateProgress(Em(L));const H=new wm(L,d.localStore,g.It);let Q=yield g.wc();for(;Q;){const Ge=yield H.Ou(Q);Ge&&D._updateProgress(Ge),Q=yield g.wc()}const ve=yield H.complete();return yield $u(d,ve.Bu,void 0),yield function(Ge,lt){const gt=Ht(Ge);return gt.persistence.runTransaction("Save bundle","readwrite",Kt=>gt.Ns.saveBundleMetadata(Kt,lt))}(d.localStore,L),D._completeWith(ve.progress),Promise.resolve(ve.$u)}catch(L){return To("SyncEngine",`Loading bundle failed with ${L}`),D._failWith(L),Promise.resolve(new Set)}var Ge}),function(d,g,D){return u.apply(this,arguments)})(o,e,t).then(u=>{o.sharedClientState.notifyBundleLoaded(u)})}(yield ng(i),u,o)}))}(t,i._databaseId,e,o),o}(this._delegate,e)}namedQuery(e){return function qm(i,e){return function W_(i,e){return i.asyncQueue.enqueue((0,he.Z)(function*(){return function(t,o){const u=Ht(t);return u.persistence.runTransaction("Get named query","readonly",d=>u.Ns.getNamedQuery(d,o))}(yield Ld(i),e)}))}(is(i=Br(i,Ti)),e).then(t=>t?new Yo(i,null,t.query):null)}(this._delegate,e).then(t=>t?new ua(this,t):null)}}class Of extends zd{constructor(e){super(),this.firestore=e}convertBytes(e){return new qd(new bu(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Ga.forKey(t,this.firestore,null)}}class wy{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new Of(e)}get(e){const t=ml(e);return this._delegate.get(t).then(o=>new Zd(this._firestore,new Tu(this._firestore._delegate,this._userDataWriter,o._key,o._document,o.metadata,t.converter)))}set(e,t,o){const u=ml(e);return o?(Rf("Transaction.set",o),this._delegate.set(u,t,o)):this._delegate.set(u,t),this}update(e,t,o,...u){const d=ml(e);return 2===arguments.length?this._delegate.update(d,t):this._delegate.update(d,t,o,...u),this}delete(e){const t=ml(e);return this._delegate.delete(t),this}}class Ey{constructor(e){this._delegate=e}set(e,t,o){const u=ml(e);return o?(Rf("WriteBatch.set",o),this._delegate.set(u,t,o)):this._delegate.set(u,t),this}update(e,t,o,...u){const d=ml(e);return 2===arguments.length?this._delegate.update(d,t):this._delegate.update(d,t,o,...u),this}delete(e){const t=ml(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class nc{constructor(e,t,o){this._firestore=e,this._userDataWriter=t,this._delegate=o}fromFirestore(e,t){const o=new Uc(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Kd(this._firestore,o),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const o=nc.INSTANCES;let u=o.get(e);u||(u=new WeakMap,o.set(e,u));let d=u.get(t);return d||(d=new nc(e,new Of(e),t),u.set(t,d)),d}}nc.INSTANCES=new WeakMap;class Ga{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Of(e)}static forPath(e,t,o){if(e.length%2!=0)throw new Et("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Ga(t,new rs(t._delegate,o,new zt(e)))}static forKey(e,t,o){return new Ga(t,new rs(t._delegate,o,e))}get id(){return this._delegate.id}get parent(){return new rc(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new rc(this.firestore,jm(this._delegate,e))}catch(t){throw aa(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,nt.m9)(e))instanceof rs&&Mo(this._delegate,e)}set(e,t){t=Rf("DocumentReference.set",t);try{return t?hy(this._delegate,e,t):hy(this._delegate,e)}catch(o){throw aa(o,"setDoc()","DocumentReference.set()")}}update(e,t,...o){try{return 1===arguments.length?Sf(this._delegate,e):Sf(this._delegate,e,t,...o)}catch(u){throw aa(u,"updateDoc()","DocumentReference.update()")}}delete(){return function Wd(i){return tc(Br(i.firestore,Ti),[new Ml(i._key,Zi.none())])}(this._delegate)}onSnapshot(...e){const t=Iy(e),o=Dy(e,u=>new Zd(this.firestore,new Tu(this.firestore._delegate,this._userDataWriter,u._key,u._document,u.metadata,this._delegate.converter)));return mg(this._delegate,t,o)}get(e){let t;return t="cache"===e?.source?function cy(i){i=Br(i,rs);const e=Br(i.firestore,Ti),t=is(e),o=new Oo(e);return function f0(i,e){const t=new zi;return i.asyncQueue.enqueueAndForget((0,he.Z)(function*(){return(o=(0,he.Z)(function*(u,d,g){try{const D=yield function(L,H){const Q=Ht(L);return Q.persistence.runTransaction("read document","readonly",ve=>Q.localDocuments.getDocument(ve,H))}(u,d);D.isFoundDocument()?g.resolve(D):D.isNoDocument()?g.resolve(null):g.reject(new Et(Je.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(D){const L=xd(D,`Failed to get document '${d} from cache`);g.reject(L)}}),function(u,d,g){return o.apply(this,arguments)})(yield Ld(i),e,t);var o})),t.promise}(t,i._key).then(u=>new Tu(e,o,i._key,u,new pl(null!==u&&u.hasLocalMutations,!0),i.converter))}(this._delegate):"server"===e?.source?function dy(i){i=Br(i,rs);const e=Br(i.firestore,Ti);return km(is(e),i._key,{source:"server"}).then(t=>Af(e,i,t))}(this._delegate):function tu(i){i=Br(i,rs);const e=Br(i.firestore,Ti);return km(is(e),i._key).then(t=>Af(e,i,t))}(this._delegate),t.then(o=>new Zd(this.firestore,new Tu(this.firestore._delegate,this._userDataWriter,o._key,o._document,o.metadata,this._delegate.converter)))}withConverter(e){return new Ga(this.firestore,this._delegate.withConverter(e?nc.getInstance(this.firestore,e):null))}}function aa(i,e,t){return i.message=i.message.replace(e,t),i}function Iy(i){for(const e of i)if("object"==typeof e&&!wg(e))return e;return{}}function Dy(i,e){var t,o;let u;return u=wg(i[0])?i[0]:wg(i[1])?i[1]:"function"==typeof i[0]?{next:i[0],error:i[1],complete:i[2]}:{next:i[1],error:i[2],complete:i[3]},{next:d=>{u.next&&u.next(e(d))},error:null===(t=u.error)||void 0===t?void 0:t.bind(u),complete:null===(o=u.complete)||void 0===o?void 0:o.bind(u)}}class Zd{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Ga(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return fg(this._delegate,e._delegate)}}class Kd extends Zd{data(e){const t=this._delegate.data(e);return function Au(i,e){i||Qt()}(void 0!==t),t}}class ua{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Of(e)}where(e,t,o){try{return new ua(this.firestore,gl(this._delegate,function Y_(i,e,t){const o=e,u=Hd("where",i);return new ey(u,o,t)}(e,t,o)))}catch(u){throw aa(u,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new ua(this.firestore,gl(this._delegate,function ty(i,e="asc"){const t=e,o=Hd("orderBy",i);return new uo(o,t)}(e,t)))}catch(o){throw aa(o,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new ua(this.firestore,gl(this._delegate,function Q_(i){return Vd("limit",i),new ny("limit",i,"F")}(e)))}catch(t){throw aa(t,"limit()","Query.limit()")}}limitToLast(e){try{return new ua(this.firestore,gl(this._delegate,function ry(i){return Vd("limitToLast",i),new ny("limitToLast",i,"L")}(e)))}catch(t){throw aa(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new ua(this.firestore,gl(this._delegate,function sy(...i){return new iy("startAt",i,!0)}(...e)))}catch(t){throw aa(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new ua(this.firestore,gl(this._delegate,function oy(...i){return new iy("startAfter",i,!1)}(...e)))}catch(t){throw aa(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new ua(this.firestore,gl(this._delegate,function J_(...i){return new ec("endBefore",i,!1)}(...e)))}catch(t){throw aa(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new ua(this.firestore,gl(this._delegate,function X_(...i){return new ec("endAt",i,!0)}(...e)))}catch(t){throw aa(t,"endAt()","Query.endAt()")}}isEqual(e){return hl(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function rv(i){i=Br(i,Yo);const e=Br(i.firestore,Ti),t=is(e),o=new Oo(e);return function G_(i,e){const t=new zi;return i.asyncQueue.enqueueAndForget((0,he.Z)(function*(){return(o=(0,he.Z)(function*(u,d,g){try{const D=yield Oh(u,d,!0),L=new Dm(d,D.Hi),H=L.ju(D.documents),Q=L.applyChanges(H,!1);g.resolve(Q.snapshot)}catch(D){const L=xd(D,`Failed to execute query '${d} against cache`);g.reject(L)}}),function(u,d,g){return o.apply(this,arguments)})(yield Ld(i),e,t);var o})),t.promise}(t,i._query).then(u=>new Gu(e,o,i,u))}(this._delegate):"server"===e?.source?function iv(i){i=Br(i,Yo);const e=Br(i.firestore,Ti),t=is(e),o=new Oo(e);return Fm(t,i._query,{source:"server"}).then(u=>new Gu(e,o,i,u))}(this._delegate):function nv(i){i=Br(i,Yo);const e=Br(i.firestore,Ti),t=is(e),o=new Oo(e);return K_(i._query),Fm(t,i._query).then(u=>new Gu(e,o,i,u))}(this._delegate),t.then(o=>new Nf(this.firestore,new Gu(this.firestore._delegate,this._userDataWriter,this._delegate,o._snapshot)))}onSnapshot(...e){const t=Iy(e),o=Dy(e,u=>new Nf(this.firestore,new Gu(this.firestore._delegate,this._userDataWriter,this._delegate,u._snapshot)));return mg(this._delegate,t,o)}withConverter(e){return new ua(this.firestore,this._delegate.withConverter(e?nc.getInstance(this.firestore,e):null))}}class Cy{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Kd(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class Nf{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new ua(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Kd(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new Cy(this._firestore,t))}forEach(e,t){this._delegate.forEach(o=>{e.call(t,new Kd(this._firestore,o))})}isEqual(e){return fg(this._delegate,e._delegate)}}class rc extends ua{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Ga(this.firestore,e):null}doc(e){try{return new Ga(this.firestore,void 0===e?dl(this._delegate):dl(this._delegate,e))}catch(t){throw aa(t,"doc()","CollectionReference.doc()")}}add(e){return function sv(i,e){const t=Br(i.firestore,Ti),o=dl(i),u=Aa(i.converter,e);return tc(t,[_f(Hu(i.firestore),"addDoc",o._key,u,null!==i.converter,{}).toMutation(o._key,Zi.exists(!1))]).then(()=>o)}(this._delegate,e).then(t=>new Ga(this.firestore,t))}isEqual(e){return Mo(this._delegate,e._delegate)}withConverter(e){return new rc(this.firestore,this._delegate.withConverter(e?nc.getInstance(this.firestore,e):null))}}function ml(i){return Br(i,rs)}class Pf{constructor(...e){this._delegate=new Cu(...e)}static documentId(){return new Pf(mi.keyField().canonicalString())}isEqual(e){return(e=(0,nt.m9)(e))instanceof Cu&&this._delegate._internalPath.isEqual(e._internalPath)}}class yl{constructor(e){this._delegate=e}static serverTimestamp(){const e=function py(){return new wf("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new yl(e)}static delete(){const e=function fy(){return new Ql("deleteField")}();return e._methodName="FieldValue.delete",new yl(e)}static arrayUnion(...e){const t=function yg(...i){return new Ym("arrayUnion",i)}(...e);return t._methodName="FieldValue.arrayUnion",new yl(t)}static arrayRemove(...e){const t=function Mf(...i){return new lg("arrayRemove",i)}(...e);return t._methodName="FieldValue.arrayRemove",new yl(t)}static increment(e){const t=function gy(i){return new Qm("increment",i)}(e);return t._methodName="FieldValue.increment",new yl(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const by={Firestore:vy,GeoPoint:gf,Timestamp:Ri,Blob:qd,Transaction:wy,WriteBatch:Ey,DocumentReference:Ga,DocumentSnapshot:Zd,Query:ua,QueryDocumentSnapshot:Kd,QuerySnapshot:Nf,CollectionReference:rc,FieldPath:Pf,FieldValue:yl,setLogLevel:function hv(i){!function fa(i){Zs.setLogLevel(i)}(i)},CACHE_SIZE_UNLIMITED:-1};!function Sy(i){(function Ty(i,e){i.INTERNAL.registerComponent(new Xe.wA("firestore-compat",t=>{const o=t.getProvider("app-compat").getImmediate(),u=t.getProvider("firestore").getImmediate();return e(o,u)},"PUBLIC").setServiceProps(Object.assign({},by)))})(i,(e,t)=>new vy(e,t,new dv)),i.registerVersion("@firebase/firestore-compat","0.1.24")}(Bt.Z);var zu=U(1205),Ay=U(440),ic=U(127);function xy(i,e){return function fv(i,e=C.z){return new G.y(t=>{let o;return null!=e?e.schedule(()=>{o=i.onSnapshot({includeMetadataChanges:!0},t)}):o=i.onSnapshot({includeMetadataChanges:!0},t),()=>{o?.()}})}(i,e)}function My(i,e){return xy(i,e).pipe((0,le.U)(t=>({payload:t,type:"query"})))}function jc(i,e){return My(i,e).pipe((0,Re.O)(void 0),ce(),(0,le.U)(([t,o])=>{const u=o.payload.docChanges(),d=u.map(g=>({type:g.type,payload:g}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(o.payload.metadata)&&o.payload.docs.forEach((g,D)=>{const L=u.find(Q=>Q.doc.ref.isEqual(g.ref)),H=t?.payload.docs.find(Q=>Q.ref.isEqual(g.ref));L&&JSON.stringify(L.doc.metadata)===JSON.stringify(g.metadata)||!L&&H&&JSON.stringify(H.metadata)===JSON.stringify(g.metadata)||d.push({type:"modified",payload:{oldIndex:D,newIndex:D,type:"modified",doc:g}})}),d}))}function pv(i,e,t){return jc(i,t).pipe((0,Ce.R)((o,u)=>function Ry(i,e,t){return e.forEach(o=>{t.indexOf(o.type)>-1&&(i=function g0(i,e){switch(e.type){case"added":if(!i[e.newIndex]||!i[e.newIndex].doc.ref.isEqual(e.doc.ref))return kf(i,e.newIndex,0,e);break;case"modified":if(null==i[e.oldIndex]||i[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=i.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return kf(i,e.newIndex,1,e)}break;case"removed":if(i[e.oldIndex]&&i[e.oldIndex].doc.ref.isEqual(e.doc.ref))return kf(i,e.oldIndex,1)}return i}(i,o))}),i}(o,u.map(d=>d.payload),e),[]),function ot(i,e=mt.y){return i=i??Ke,(0,Oe.e)((t,o)=>{let u,d=!0;t.subscribe((0,Fe.x)(o,g=>{const D=e(g);(d||!i(u,D))&&(d=!1,u=D,o.next(g))}))})}(),(0,le.U)(o=>o.map(u=>({type:u.type,payload:u}))))}function kf(i,e,t,...o){const u=i.slice();return u.splice(e,t,...o),u}function Vn(i){return(!i||0===i.length)&&(i=["added","removed","modified"]),i}class Oy{constructor(e,t,o){this.ref=e,this.query=t,this.afs=o}stateChanges(e){let t=jc(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,le.U)(o=>o.filter(u=>e.indexOf(u.type)>-1)))),t.pipe((0,Re.O)(void 0),ce(),(0,Nt.h)(([o,u])=>u.length>0||!o),(0,le.U)(([o,u])=>u),Me.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,Ce.R)((t,o)=>[...t,...o],[]))}snapshotChanges(e){const t=Vn(e);return pv(this.query,t,this.afs.schedulers.outsideAngular).pipe(Me.iC)}valueChanges(e={}){return My(this.query,this.afs.schedulers.outsideAngular).pipe((0,le.U)(t=>t.payload.docs.map(o=>e.idField?Object.assign(Object.assign({},o.data()),{[e.idField]:o.id}):o.data())),Me.iC)}get(e){return(0,be.D)(this.query.get(e)).pipe(Me.iC)}add(e){return this.ref.add(e)}doc(e){return new Ny(this.ref.doc(e),this.afs)}}class Ny{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const o=this.ref.collection(e),{ref:u,query:d}=Ss(o,t);return new Oy(u,d,this.afs)}snapshotChanges(){return function Bc(i,e){return xy(i,e).pipe((0,Re.O)(void 0),ce(),(0,le.U)(([t,o])=>o.exists?t?.exists?{payload:o,type:"modified"}:{payload:o,type:"added"}:{payload:o,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Me.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,le.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,be.D)(this.ref.get(e)).pipe(Me.iC)}}class gv{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?jc(this.query,this.afs.schedulers.outsideAngular).pipe((0,le.U)(t=>t.filter(o=>e.indexOf(o.type)>-1)),(0,Nt.h)(t=>t.length>0),Me.iC):jc(this.query,this.afs.schedulers.outsideAngular).pipe(Me.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,Ce.R)((t,o)=>[...t,...o],[]))}snapshotChanges(e){const t=Vn(e);return pv(this.query,t,this.afs.schedulers.outsideAngular).pipe(Me.iC)}valueChanges(e={}){return My(this.query,this.afs.schedulers.outsideAngular).pipe((0,le.U)(o=>o.payload.docs.map(u=>e.idField?Object.assign({[e.idField]:u.id},u.data()):u.data())),Me.iC)}get(e){return(0,be.D)(this.query.get(e)).pipe(Me.iC)}}const sc=new p.OlP("angularfire2.enableFirestorePersistence"),Py=new p.OlP("angularfire2.firestore.persistenceSettings"),Ff=new p.OlP("angularfire2.firestore.settings"),Lf=new p.OlP("angularfire2.firestore.use-emulator");function Ss(i,e=(t=>t)){return{query:e(i),ref:i}}let mv=(()=>{class i{constructor(t,o,u,d,g,D,L,H,Q,ve,Ge,lt,gt,Kt,fn,Kr,ui){this.schedulers=L;const jr=(0,Ye.on)(t,D,o),As=Q;ve&&(0,zu.nw)(jr,D,Ge,gt,Kt,fn,lt,Kr),[this.firestore,this.persistenceEnabled$]=(0,Ye.cc)(`${jr.name}.firestore`,"AngularFirestore",jr.name,()=>{const li=D.runOutsideAngular(()=>jr.firestore());if(d&&li.settings(d),As&&li.useEmulator(...As),u&&!(0,He.PM)(g)){const wi=()=>{try{return(0,be.D)(li.enablePersistence(H||void 0).then(()=>!0,()=>!1))}catch(Js){return typeof console<"u"&&console.warn(Js),(0,we.of)(!1)}};return[li,D.runOutsideAngular(wi)]}return[li,(0,we.of)(!1)]},[d,As,u])}collection(t,o){let u;u="string"==typeof t?this.firestore.collection(t):t;const{ref:d,query:g}=Ss(u,o),D=this.schedulers.ngZone.run(()=>d);return new Oy(D,g,this)}collectionGroup(t,o){const u=o||(g=>g),d=this.firestore.collectionGroup(t);return new gv(u(d),this)}doc(t){let o;o="string"==typeof t?this.firestore.doc(t):t;const u=this.schedulers.ngZone.run(()=>o);return new Ny(u,this)}createId(){return this.firestore.collection("_").doc().id}}return i.\u0275fac=function(t){return new(t||i)(p.LFG(Ye.Dh),p.LFG(Ye.xv,8),p.LFG(sc,8),p.LFG(Ff,8),p.LFG(p.Lbi),p.LFG(p.R0b),p.LFG(Me.HU),p.LFG(Py,8),p.LFG(Lf,8),p.LFG(zu.zQ,8),p.LFG(zu.Qv,8),p.LFG(zu.L6,8),p.LFG(zu._Q,8),p.LFG(zu.rT,8),p.LFG(zu.lh,8),p.LFG(zu.f7,8),p.LFG(Ay.nm,8))},i.\u0275prov=p.Yz7({token:i,factory:i.\u0275fac,providedIn:"any"}),i})(),ky=(()=>{class i{constructor(){ic.Z.registerVersion("angularfire",Me.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:i,providers:[{provide:sc,useValue:!0},{provide:Py,useValue:t}]}}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=p.oAB({type:i}),i.\u0275inj=p.cJS({providers:[mv]}),i})()},2011:(Gt,qe,U)=>{U.d(qe,{Dh:()=>Oe,GT:()=>Me,cc:()=>ot,hO:()=>mt,on:()=>ce,pX:()=>we,xv:()=>Fe});var p=U(4650),C=U(127),G=U(5813);Gt=U.hmd(Gt);const be=["ngOnDestroy"],we=(He,Ut,Bt,he={})=>new Proxy(He,{get:(it,Xe)=>Bt.runOutsideAngular(()=>{var _t;if(He[Xe])return!(null===(_t=he?.spy)||void 0===_t)&&_t.get&&he.spy.get(Xe,He[Xe]),He[Xe];if(be.indexOf(Xe)>-1)return()=>{};const nt=Ut.toPromise().then(ae=>{const Le=ae&&ae[Xe];return"function"==typeof Le?Le.bind(ae):Le&&Le.then?Le.then(ne=>Bt.run(()=>ne)):Bt.run(()=>Le)});return new Proxy(()=>{},{get:(ae,Le)=>nt[Le],apply:(ae,Le,ne)=>nt.then(De=>{var de;const Ne=De&&De(...ne);return!(null===(de=he?.spy)||void 0===de)&&de.apply&&he.spy.apply(Xe,ne,Ne),Ne})})})}),Me=(He,Ut)=>{Ut.forEach(Bt=>{Object.getOwnPropertyNames(Bt.prototype||Bt).forEach(he=>{Object.defineProperty(He.prototype,he,Object.getOwnPropertyDescriptor(Bt.prototype||Bt,he))})})};class Re{constructor(Ut){return Ut}}const Oe=new p.OlP("angularfire2.app.options"),Fe=new p.OlP("angularfire2.app.name");function ce(He,Ut,Bt){const it="object"==typeof Bt&&Bt||{};it.name=it.name||"string"==typeof Bt&&Bt||"[DEFAULT]";const _t=C.Z.apps.filter(nt=>nt&&nt.name===it.name)[0]||Ut.runOutsideAngular(()=>C.Z.initializeApp(He,it));try{JSON.stringify(He)!==JSON.stringify(_t.options)&&le("error",`${_t.name} Firebase App already initialized with different options${Gt.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new Re(_t)}const le=(He,...Ut)=>{(0,p.X6Q)()&&typeof console<"u"&&console[He](...Ut)},Ce={provide:Re,useFactory:ce,deps:[Oe,p.R0b,[new p.FiY,Fe]]};let mt=(()=>{class He{constructor(Bt){C.Z.registerVersion("angularfire",G.q4.full,"core"),C.Z.registerVersion("angularfire",G.q4.full,"app-compat"),C.Z.registerVersion("angular",p.q4F.full,Bt.toString())}static initializeApp(Bt,he){return{ngModule:He,providers:[{provide:Oe,useValue:Bt},{provide:Fe,useValue:he}]}}}return He.\u0275fac=function(Bt){return new(Bt||He)(p.LFG(p.Lbi))},He.\u0275mod=p.oAB({type:He}),He.\u0275inj=p.cJS({providers:[Ce]}),He})();function ot(He,Ut,Bt,he,it){const[,Xe,_t]=globalThis.\u0275AngularfireInstanceCache.find(nt=>nt[0]===He)||[];if(Xe)return function Ke(He,Ut){try{return He.toString()===Ut.toString()}catch{return He===Ut}}(it,_t)||(Ye("error",`${Ut} was already initialized on the ${Bt} Firebase App with different settings.${Nt?" You may need to reload as Firebase is not HMR aware.":""}`),Ye("warn",{is:it,was:_t})),Xe;{const nt=he();return globalThis.\u0275AngularfireInstanceCache.push([He,nt,it]),nt}}const Nt=!!Gt.hot,Ye=(He,...Ut)=>{(0,p.X6Q)()&&typeof console<"u"&&console[He](...Ut)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5813:(Gt,qe,U)=>{U.d(qe,{q4:()=>Ds,iC:()=>oo,fc:()=>_i,HU:()=>so,vb:()=>rn,JM:()=>Ot});var p=U(4650),C=U(5867),G=U(5861),be=U(9681),we=U(2090),Me=U(4859),Re=U(1877),Oe=U(8766);const Fe="@firebase/installations",ce="0.5.12",Ce=`w:${ce}`,mt="FIS_v2",Ut=new we.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Bt(x){return x instanceof we.ZR&&x.code.includes("request-failed")}function he({projectId:x}){return`https://firebaseinstallations.googleapis.com/v1/projects/${x}/installations`}function it(x){return{token:x.token,requestStatus:2,expiresIn:De(x.expiresIn),creationTime:Date.now()}}function Xe(x,k){return _t.apply(this,arguments)}function _t(){return(_t=(0,G.Z)(function*(x,k){const ie=(yield k.json()).error;return Ut.create("request-failed",{requestName:x,serverCode:ie.code,serverMessage:ie.message,serverStatus:ie.status})})).apply(this,arguments)}function nt({apiKey:x}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":x})}function ae(x,{refreshToken:k}){const W=nt(x);return W.append("Authorization",function de(x){return`${mt} ${x}`}(k)),W}function Le(x){return ne.apply(this,arguments)}function ne(){return(ne=(0,G.Z)(function*(x){const k=yield x();return k.status>=500&&k.status<600?x():k})).apply(this,arguments)}function De(x){return Number(x.replace("s","000"))}function Ne(x,k){return dt.apply(this,arguments)}function dt(){return(dt=(0,G.Z)(function*({appConfig:x,heartbeatServiceProvider:k},{fid:W}){const ie=he(x),Pe=nt(x),Qe=k.getImmediate({optional:!0});if(Qe){const bn=yield Qe.getHeartbeatsHeader();bn&&Pe.append("x-firebase-client",bn)}const Pt={method:"POST",headers:Pe,body:JSON.stringify({fid:W,authVersion:mt,appId:x.appId,sdkVersion:Ce})},wn=yield Le(()=>fetch(ie,Pt));if(wn.ok){const bn=yield wn.json();return{fid:bn.fid||W,registrationStatus:2,refreshToken:bn.refreshToken,authToken:it(bn.authToken)}}throw yield Xe("Create Installation",wn)})).apply(this,arguments)}function wt(x){return new Promise(k=>{setTimeout(k,x)})}const Mt=/^[cdef][\w-]{21}$/;function ft(){try{const x=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(x),x[0]=112+x[0]%16;const W=function tn(x){return function bt(x){return btoa(String.fromCharCode(...x)).replace(/\+/g,"-").replace(/\//g,"_")}(x).substr(0,22)}(x);return Mt.test(W)?W:""}catch{return""}}function qt(x){return`${x.appName}!${x.appId}`}const on=new Map;function Ft(x,k){const W=qt(x);Fn(W,k),function Ei(x,k){const W=function mr(){return!Er&&"BroadcastChannel"in self&&(Er=new BroadcastChannel("[Firebase] FID Change"),Er.onmessage=x=>{Fn(x.data.key,x.data.fid)}),Er}();W&&W.postMessage({key:x,fid:k}),function ur(){0===on.size&&Er&&(Er.close(),Er=null)}()}(W,k)}function Fn(x,k){const W=on.get(x);if(W)for(const ie of W)ie(k)}let Er=null;const nr="firebase-installations-store";let $n=null;function lr(){return $n||($n=(0,Oe.X3)("firebase-installations-database",1,{upgrade:(x,k)=>{0===k&&x.createObjectStore(nr)}})),$n}function pt(x,k){return Bn.apply(this,arguments)}function Bn(){return(Bn=(0,G.Z)(function*(x,k){const W=qt(x),Pe=(yield lr()).transaction(nr,"readwrite"),Qe=Pe.objectStore(nr),It=yield Qe.get(W);return yield Qe.put(k,W),yield Pe.done,(!It||It.fid!==k.fid)&&Ft(x,k.fid),k})).apply(this,arguments)}function Cn(x){return Hn.apply(this,arguments)}function Hn(){return(Hn=(0,G.Z)(function*(x){const k=qt(x),ie=(yield lr()).transaction(nr,"readwrite");yield ie.objectStore(nr).delete(k),yield ie.done})).apply(this,arguments)}function kr(x,k){return Ir.apply(this,arguments)}function Ir(){return(Ir=(0,G.Z)(function*(x,k){const W=qt(x),Pe=(yield lr()).transaction(nr,"readwrite"),Qe=Pe.objectStore(nr),It=yield Qe.get(W),Pt=k(It);return void 0===Pt?yield Qe.delete(W):yield Qe.put(Pt,W),yield Pe.done,Pt&&(!It||It.fid!==Pt.fid)&&Ft(x,Pt.fid),Pt})).apply(this,arguments)}function xr(x){return $e.apply(this,arguments)}function $e(){return($e=(0,G.Z)(function*(x){let k;const W=yield kr(x.appConfig,ie=>{const Pe=ye(ie),Qe=se(x,Pe);return k=Qe.registrationPromise,Qe.installationEntry});return""===W.fid?{installationEntry:yield k}:{installationEntry:W,registrationPromise:k}})).apply(this,arguments)}function ye(x){return At(x||{fid:ft(),registrationStatus:0})}function se(x,k){if(0===k.registrationStatus){if(!navigator.onLine)return{installationEntry:k,registrationPromise:Promise.reject(Ut.create("app-offline"))};const W={fid:k.fid,registrationStatus:1,registrationTime:Date.now()},ie=function Be(x,k){return We.apply(this,arguments)}(x,W);return{installationEntry:W,registrationPromise:ie}}return 1===k.registrationStatus?{installationEntry:k,registrationPromise:Lt(x)}:{installationEntry:k}}function We(){return(We=(0,G.Z)(function*(x,k){try{const W=yield Ne(x,k);return pt(x.appConfig,W)}catch(W){throw Bt(W)&&409===W.customData.serverCode?yield Cn(x.appConfig):yield pt(x.appConfig,{fid:k.fid,registrationStatus:0}),W}})).apply(this,arguments)}function Lt(x){return un.apply(this,arguments)}function un(){return(un=(0,G.Z)(function*(x){let k=yield jn(x.appConfig);for(;1===k.registrationStatus;)yield wt(100),k=yield jn(x.appConfig);if(0===k.registrationStatus){const{installationEntry:W,registrationPromise:ie}=yield xr(x);return ie||W}return k})).apply(this,arguments)}function jn(x){return kr(x,k=>{if(!k)throw Ut.create("installation-not-found");return At(k)})}function At(x){return function rr(x){return 1===x.registrationStatus&&x.registrationTime+1e4<Date.now()}(x)?{fid:x.fid,registrationStatus:0}:x}function Sn(x,k){return Mr.apply(this,arguments)}function Mr(){return(Mr=(0,G.Z)(function*({appConfig:x,heartbeatServiceProvider:k},W){const ie=pn(x,W),Pe=ae(x,W),Qe=k.getImmediate({optional:!0});if(Qe){const bn=yield Qe.getHeartbeatsHeader();bn&&Pe.append("x-firebase-client",bn)}const Pt={method:"POST",headers:Pe,body:JSON.stringify({installation:{sdkVersion:Ce,appId:x.appId}})},wn=yield Le(()=>fetch(ie,Pt));if(wn.ok)return it(yield wn.json());throw yield Xe("Generate Auth Token",wn)})).apply(this,arguments)}function pn(x,{fid:k}){return`${he(x)}/${k}/authTokens:generate`}function ge(x){return X.apply(this,arguments)}function X(){return(X=(0,G.Z)(function*(x,k=!1){let W;const ie=yield kr(x.appConfig,Qe=>{if(!Rt(Qe))throw Ut.create("not-registered");const It=Qe.authToken;if(!k&&ir(It))return Qe;if(1===It.requestStatus)return W=oe(x,k),Qe;{if(!navigator.onLine)throw Ut.create("app-offline");const Pt=er(Qe);return W=ut(x,Pt),Pt}});return W?yield W:ie.authToken})).apply(this,arguments)}function oe(x,k){return Ee.apply(this,arguments)}function Ee(){return(Ee=(0,G.Z)(function*(x,k){let W=yield me(x.appConfig);for(;1===W.authToken.requestStatus;)yield wt(100),W=yield me(x.appConfig);const ie=W.authToken;return 0===ie.requestStatus?ge(x,k):ie})).apply(this,arguments)}function me(x){return kr(x,k=>{if(!Rt(k))throw Ut.create("not-registered");return function _n(x){return 1===x.requestStatus&&x.requestTime+1e4<Date.now()}(k.authToken)?Object.assign(Object.assign({},k),{authToken:{requestStatus:0}}):k})}function ut(x,k){return yt.apply(this,arguments)}function yt(){return(yt=(0,G.Z)(function*(x,k){try{const W=yield Sn(x,k),ie=Object.assign(Object.assign({},k),{authToken:W});return yield pt(x.appConfig,ie),W}catch(W){if(!Bt(W)||401!==W.customData.serverCode&&404!==W.customData.serverCode){const ie=Object.assign(Object.assign({},k),{authToken:{requestStatus:0}});yield pt(x.appConfig,ie)}else yield Cn(x.appConfig);throw W}})).apply(this,arguments)}function Rt(x){return void 0!==x&&2===x.registrationStatus}function ir(x){return 2===x.requestStatus&&!function Tn(x){const k=Date.now();return k<x.creationTime||x.creationTime+x.expiresIn<k+36e5}(x)}function er(x){const k={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},x),{authToken:k})}function cr(){return(cr=(0,G.Z)(function*(x){const k=x,{installationEntry:W,registrationPromise:ie}=yield xr(k);return ie?ie.catch(console.error):ge(k).catch(console.error),W.fid})).apply(this,arguments)}function Qr(){return(Qr=(0,G.Z)(function*(x,k=!1){const W=x;return yield $r(W),(yield ge(W,k)).token})).apply(this,arguments)}function $r(x){return Dr.apply(this,arguments)}function Dr(){return(Dr=(0,G.Z)(function*(x){const{registrationPromise:k}=yield xr(x);k&&(yield k)})).apply(this,arguments)}function yr(x){return Ut.create("missing-app-config-values",{valueName:x})}const Hr="installations",An=x=>{const k=x.getProvider("app").getImmediate(),W=function dn(x){if(!x||!x.options)throw yr("App Configuration");if(!x.name)throw yr("App Name");const k=["projectId","apiKey","appId"];for(const W of k)if(!x.options[W])throw yr(W);return{appName:x.name,projectId:x.options.projectId,apiKey:x.options.apiKey,appId:x.options.appId}}(k);return{app:k,appConfig:W,heartbeatServiceProvider:(0,be._getProvider)(k,"heartbeat"),_delete:()=>Promise.resolve()}},Kn=x=>{const k=x.getProvider("app").getImmediate(),W=(0,be._getProvider)(k,Hr).getImmediate();return{getId:()=>function Xt(x){return cr.apply(this,arguments)}(W),getToken:Pe=>function vr(x){return Qr.apply(this,arguments)}(W,Pe)}};(function hs(){(0,be._registerComponent)(new Me.wA(Hr,An,"PUBLIC")),(0,be._registerComponent)(new Me.wA("installations-internal",Kn,"PRIVATE"))})(),(0,be.registerVersion)(Fe,ce),(0,be.registerVersion)(Fe,ce,"esm2017");const Fi="@firebase/remote-config",Yn=new we.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class No{constructor(k,W,ie,Pe){this.client=k,this.storage=W,this.storageCache=ie,this.logger=Pe}isCachedDataFresh(k,W){if(!W)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const ie=Date.now()-W,Pe=ie<=k;return this.logger.debug(`Config fetch cache check. Cache age millis: ${ie}. Cache max age millis (minimumFetchIntervalMillis setting): ${k}. Is cache hit: ${Pe}.`),Pe}fetch(k){var W=this;return(0,G.Z)(function*(){const[ie,Pe]=yield Promise.all([W.storage.getLastSuccessfulFetchTimestampMillis(),W.storage.getLastSuccessfulFetchResponse()]);if(Pe&&W.isCachedDataFresh(k.cacheMaxAgeMillis,ie))return Pe;k.eTag=Pe&&Pe.eTag;const Qe=yield W.client.fetch(k),It=[W.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===Qe.status&&It.push(W.storage.setLastSuccessfulFetchResponse(Qe)),yield Promise.all(It),Qe})()}}function Po(x=navigator){return x.languages&&x.languages[0]||x.language}class Os{constructor(k,W,ie,Pe,Qe,It){this.firebaseInstallations=k,this.sdkVersion=W,this.namespace=ie,this.projectId=Pe,this.apiKey=Qe,this.appId=It}fetch(k){var W=this;return(0,G.Z)(function*(){var ie,Pe,Qe;const[It,Pt]=yield Promise.all([W.firebaseInstallations.getId(),W.firebaseInstallations.getToken()]),bn=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${W.projectId}/namespaces/${W.namespace}:fetch?key=${W.apiKey}`,Pn={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":k.eTag||"*"},En={sdk_version:W.sdkVersion,app_instance_id:It,app_instance_id_token:Pt,app_id:W.appId,language_code:Po()},ni={method:"POST",headers:Pn,body:JSON.stringify(En)},$s=fetch(bn,ni),ra=new Promise((Za,ya)=>{k.signal.addEventListener(()=>{const au=new Error("The operation was aborted.");au.name="AbortError",ya(au)})});let La;try{yield Promise.race([$s,ra]),La=yield $s}catch(Za){let ya="fetch-client-network";throw"AbortError"===(null===(ie=Za)||void 0===ie?void 0:ie.name)&&(ya="fetch-timeout"),Yn.create(ya,{originalErrorMessage:null===(Pe=Za)||void 0===Pe?void 0:Pe.message})}let xo=La.status;const Va=La.headers.get("ETag")||void 0;let Wo,Ua;if(200===La.status){let Za;try{Za=yield La.json()}catch(ya){throw Yn.create("fetch-client-parse",{originalErrorMessage:null===(Qe=ya)||void 0===Qe?void 0:Qe.message})}Wo=Za.entries,Ua=Za.state}if("INSTANCE_STATE_UNSPECIFIED"===Ua?xo=500:"NO_CHANGE"===Ua?xo=304:("NO_TEMPLATE"===Ua||"EMPTY_CONFIG"===Ua)&&(Wo={}),304!==xo&&200!==xo)throw Yn.create("fetch-status",{httpStatus:xo});return{status:xo,eTag:Va,config:Wo}})()}}class Ae{constructor(k,W){this.client=k,this.storage=W}fetch(k){var W=this;return(0,G.Z)(function*(){const ie=(yield W.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return W.attemptFetch(k,ie)})()}attemptFetch(k,{throttleEndTimeMillis:W,backoffCount:ie}){var Pe=this;return(0,G.Z)(function*(){yield function ri(x,k){return new Promise((W,ie)=>{const Pe=Math.max(k-Date.now(),0),Qe=setTimeout(W,Pe);x.addEventListener(()=>{clearTimeout(Qe),ie(Yn.create("fetch-throttle",{throttleEndTimeMillis:k}))})})}(k.signal,W);try{const Qe=yield Pe.client.fetch(k);return yield Pe.storage.deleteThrottleMetadata(),Qe}catch(Qe){if(!function xe(x){if(!(x instanceof we.ZR&&x.customData))return!1;const k=Number(x.customData.httpStatus);return 429===k||500===k||503===k||504===k}(Qe))throw Qe;const It={throttleEndTimeMillis:Date.now()+(0,we.$s)(ie),backoffCount:ie+1};return yield Pe.storage.setThrottleMetadata(It),Pe.attemptFetch(k,It)}})()}}class Dt{constructor(k,W,ie,Pe,Qe){this.app=k,this._client=W,this._storageCache=ie,this._storage=Pe,this._logger=Qe,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function jt(x,k){var W;const ie=x.target.error||void 0;return Yn.create(k,{originalErrorMessage:ie&&(null===(W=ie)||void 0===W?void 0:W.message)})}const cn="app_namespace_store";class ps{constructor(k,W,ie,Pe=function Oi(){return new Promise((x,k)=>{var W;try{const ie=indexedDB.open("firebase_remote_config",1);ie.onerror=Pe=>{k(jt(Pe,"storage-open"))},ie.onsuccess=Pe=>{x(Pe.target.result)},ie.onupgradeneeded=Pe=>{0===Pe.oldVersion&&Pe.target.result.createObjectStore(cn,{keyPath:"compositeKey"})}}catch(ie){k(Yn.create("storage-open",{originalErrorMessage:null===(W=ie)||void 0===W?void 0:W.message}))}})}()){this.appId=k,this.appName=W,this.namespace=ie,this.openDbPromise=Pe}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(k){return this.set("last_fetch_status",k)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(k){return this.set("last_successful_fetch_timestamp_millis",k)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(k){return this.set("last_successful_fetch_response",k)}getActiveConfig(){return this.get("active_config")}setActiveConfig(k){return this.set("active_config",k)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(k){return this.set("active_config_etag",k)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(k){return this.set("throttle_metadata",k)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(k){var W=this;return(0,G.Z)(function*(){const ie=yield W.openDbPromise;return new Promise((Pe,Qe)=>{var It;const wn=ie.transaction([cn],"readonly").objectStore(cn),bn=W.createCompositeKey(k);try{const Pn=wn.get(bn);Pn.onerror=En=>{Qe(jt(En,"storage-get"))},Pn.onsuccess=En=>{const ni=En.target.result;Pe(ni?ni.value:void 0)}}catch(Pn){Qe(Yn.create("storage-get",{originalErrorMessage:null===(It=Pn)||void 0===It?void 0:It.message}))}})})()}set(k,W){var ie=this;return(0,G.Z)(function*(){const Pe=yield ie.openDbPromise;return new Promise((Qe,It)=>{var Pt;const bn=Pe.transaction([cn],"readwrite").objectStore(cn),Pn=ie.createCompositeKey(k);try{const En=bn.put({compositeKey:Pn,value:W});En.onerror=ni=>{It(jt(ni,"storage-set"))},En.onsuccess=()=>{Qe()}}catch(En){It(Yn.create("storage-set",{originalErrorMessage:null===(Pt=En)||void 0===Pt?void 0:Pt.message}))}})})()}delete(k){var W=this;return(0,G.Z)(function*(){const ie=yield W.openDbPromise;return new Promise((Pe,Qe)=>{var It;const wn=ie.transaction([cn],"readwrite").objectStore(cn),bn=W.createCompositeKey(k);try{const Pn=wn.delete(bn);Pn.onerror=En=>{Qe(jt(En,"storage-delete"))},Pn.onsuccess=()=>{Pe()}}catch(Pn){Qe(Yn.create("storage-delete",{originalErrorMessage:null===(It=Pn)||void 0===It?void 0:It.message}))}})})()}createCompositeKey(k){return[this.appId,this.appName,this.namespace,k].join()}}class gs{constructor(k){this.storage=k}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var k=this;return(0,G.Z)(function*(){const W=k.storage.getLastFetchStatus(),ie=k.storage.getLastSuccessfulFetchTimestampMillis(),Pe=k.storage.getActiveConfig(),Qe=yield W;Qe&&(k.lastFetchStatus=Qe);const It=yield ie;It&&(k.lastSuccessfulFetchTimestampMillis=It);const Pt=yield Pe;Pt&&(k.activeConfig=Pt)})()}setLastFetchStatus(k){return this.lastFetchStatus=k,this.storage.setLastFetchStatus(k)}setLastSuccessfulFetchTimestampMillis(k){return this.lastSuccessfulFetchTimestampMillis=k,this.storage.setLastSuccessfulFetchTimestampMillis(k)}setActiveConfig(k){return this.activeConfig=k,this.storage.setActiveConfig(k)}}function ms(){return ho.apply(this,arguments)}function ho(){return(ho=(0,G.Z)(function*(){if(!(0,we.hl)())return!1;try{return yield(0,we.eu)()}catch{return!1}})).apply(this,arguments)}!function gi(){(0,be._registerComponent)(new Me.wA("remote-config",function x(k,{instanceIdentifier:W}){const ie=k.getProvider("app").getImmediate(),Pe=k.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw Yn.create("registration-window");if(!(0,we.hl)())throw Yn.create("indexed-db-unavailable");const{projectId:Qe,apiKey:It,appId:Pt}=ie.options;if(!Qe)throw Yn.create("registration-project-id");if(!It)throw Yn.create("registration-api-key");if(!Pt)throw Yn.create("registration-app-id");const wn=new ps(Pt,ie.name,W=W||"firebase"),bn=new gs(wn),Pn=new Re.Yd(Fi);Pn.logLevel=Re.in.ERROR;const En=new Os(Pe,be.SDK_VERSION,W,Qe,It,Pt),ni=new Ae(En,wn),$s=new No(ni,wn,bn,Pn),ra=new Dt(ie,$s,bn,wn,Pn);return function sr(x){const k=(0,we.m9)(x);k._initializePromise||(k._initializePromise=k._storageCache.loadFromStorage().then(()=>{k._isInitializationComplete=!0}))}(ra),ra},"PUBLIC").setMultipleInstances(!0)),(0,be.registerVersion)(Fi,"0.3.11"),(0,be.registerVersion)(Fi,"0.3.11","esm2017")}();const Ni="/firebase-messaging-sw.js",os="/firebase-cloud-messaging-push-scope",xi="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",ys="google.c.a.c_id",Ji="google.c.a.c_l",fo="google.c.a.ts",ko="google.c.a.e";var _s=(()=>{return(x=_s||(_s={})).PUSH_RECEIVED="push-received",x.NOTIFICATION_CLICKED="notification-clicked",_s;var x})();function di(x){const k=new Uint8Array(x);return btoa(String.fromCharCode(...k)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function _r(x){const W=(x+"=".repeat((4-x.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),ie=atob(W),Pe=new Uint8Array(ie.length);for(let Qe=0;Qe<ie.length;++Qe)Pe[Qe]=ie.charCodeAt(Qe);return Pe}const Ci="fcm_token_details_db",br="fcm_token_object_Store";function Xs(x){return la.apply(this,arguments)}function la(){return la=(0,G.Z)(function*(x){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(Qe=>Qe.name).includes(Ci))return null;let k=null;return(yield(0,Oe.X3)(Ci,5,{upgrade:(ie=(0,G.Z)(function*(Pe,Qe,It,Pt){var wn;if(Qe<2||!Pe.objectStoreNames.contains(br))return;const bn=Pt.objectStore(br),Pn=yield bn.index("fcmSenderId").get(x);if(yield bn.clear(),Pn)if(2===Qe){const En=Pn;if(!En.auth||!En.p256dh||!En.endpoint)return;k={token:En.fcmToken,createTime:null!==(wn=En.createTime)&&void 0!==wn?wn:Date.now(),subscriptionOptions:{auth:En.auth,p256dh:En.p256dh,endpoint:En.endpoint,swScope:En.swScope,vapidKey:"string"==typeof En.vapidKey?En.vapidKey:di(En.vapidKey)}}}else if(3===Qe){const En=Pn;k={token:En.fcmToken,createTime:En.createTime,subscriptionOptions:{auth:di(En.auth),p256dh:di(En.p256dh),endpoint:En.endpoint,swScope:En.swScope,vapidKey:di(En.vapidKey)}}}else if(4===Qe){const En=Pn;k={token:En.fcmToken,createTime:En.createTime,subscriptionOptions:{auth:di(En.auth),p256dh:di(En.p256dh),endpoint:En.endpoint,swScope:En.swScope,vapidKey:di(En.vapidKey)}}}}),function(Qe,It,Pt,wn){return ie.apply(this,arguments)})})).close(),yield(0,Oe.Lj)(Ci),yield(0,Oe.Lj)("fcm_vapid_details_db"),yield(0,Oe.Lj)("undefined"),Lr(k)?k:null;var ie}),la.apply(this,arguments)}function Lr(x){if(!x||!x.subscriptionOptions)return!1;const{subscriptionOptions:k}=x;return"number"==typeof x.createTime&&x.createTime>0&&"string"==typeof x.token&&x.token.length>0&&"string"==typeof k.auth&&k.auth.length>0&&"string"==typeof k.p256dh&&k.p256dh.length>0&&"string"==typeof k.endpoint&&k.endpoint.length>0&&"string"==typeof k.swScope&&k.swScope.length>0&&"string"==typeof k.vapidKey&&k.vapidKey.length>0}const hi="firebase-messaging-store";let ii=null;function Xi(){return ii||(ii=(0,Oe.X3)("firebase-messaging-database",1,{upgrade:(x,k)=>{0===k&&x.createObjectStore(hi)}})),ii}function Pi(x){return Rr.apply(this,arguments)}function Rr(){return(Rr=(0,G.Z)(function*(x){const k=Jn(x),ie=yield(yield Xi()).transaction(hi).objectStore(hi).get(k);if(ie)return ie;{const Pe=yield Xs(x.appConfig.senderId);if(Pe)return yield qn(x,Pe),Pe}})).apply(this,arguments)}function qn(x,k){return vs.apply(this,arguments)}function vs(){return(vs=(0,G.Z)(function*(x,k){const W=Jn(x),Pe=(yield Xi()).transaction(hi,"readwrite");return yield Pe.objectStore(hi).put(k,W),yield Pe.done,k})).apply(this,arguments)}function as(x){return Lo.apply(this,arguments)}function Lo(){return(Lo=(0,G.Z)(function*(x){const k=Jn(x),ie=(yield Xi()).transaction(hi,"readwrite");yield ie.objectStore(hi).delete(k),yield ie.done})).apply(this,arguments)}function Jn({appConfig:x}){return x.appId}const zr=new we.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function gn(x,k){return Vs.apply(this,arguments)}function Vs(){return(Vs=(0,G.Z)(function*(x,k){var W;const ie=yield mo(x),Pe=ht(k),Qe={method:"POST",headers:ie,body:JSON.stringify(Pe)};let It;try{It=yield(yield fetch(us(x.appConfig),Qe)).json()}catch(Pt){throw zr.create("token-subscribe-failed",{errorInfo:null===(W=Pt)||void 0===W?void 0:W.toString()})}if(It.error)throw zr.create("token-subscribe-failed",{errorInfo:It.error.message});if(!It.token)throw zr.create("token-subscribe-no-token");return It.token})).apply(this,arguments)}function go(x,k){return Vo.apply(this,arguments)}function Vo(){return(Vo=(0,G.Z)(function*(x,k){var W;const ie=yield mo(x),Pe=ht(k.subscriptionOptions),Qe={method:"PATCH",headers:ie,body:JSON.stringify(Pe)};let It;try{It=yield(yield fetch(`${us(x.appConfig)}/${k.token}`,Qe)).json()}catch(Pt){throw zr.create("token-update-failed",{errorInfo:null===(W=Pt)||void 0===W?void 0:W.toString()})}if(It.error)throw zr.create("token-update-failed",{errorInfo:It.error.message});if(!It.token)throw zr.create("token-update-no-token");return It.token})).apply(this,arguments)}function zs(x,k){return ji.apply(this,arguments)}function ji(){return(ji=(0,G.Z)(function*(x,k){var W;const Pe={method:"DELETE",headers:yield mo(x)};try{const It=yield(yield fetch(`${us(x.appConfig)}/${k}`,Pe)).json();if(It.error)throw zr.create("token-unsubscribe-failed",{errorInfo:It.error.message})}catch(Qe){throw zr.create("token-unsubscribe-failed",{errorInfo:null===(W=Qe)||void 0===W?void 0:W.toString()})}})).apply(this,arguments)}function us({projectId:x}){return`https://fcmregistrations.googleapis.com/v1/projects/${x}/registrations`}function mo(x){return Uo.apply(this,arguments)}function Uo(){return(Uo=(0,G.Z)(function*({appConfig:x,installations:k}){const W=yield k.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":x.apiKey,"x-goog-firebase-installations-auth":`FIS ${W}`})})).apply(this,arguments)}function ht({p256dh:x,auth:k,endpoint:W,vapidKey:ie}){const Pe={web:{endpoint:W,auth:k,p256dh:x}};return ie!==xi&&(Pe.web.applicationPubKey=ie),Pe}const Rn=6048e5;function Us(x){return Bo.apply(this,arguments)}function Bo(){return(Bo=(0,G.Z)(function*(x){const k=yield yo(x.swRegistration,x.vapidKey),W={vapidKey:x.vapidKey,swScope:x.swRegistration.scope,endpoint:k.endpoint,auth:di(k.getKey("auth")),p256dh:di(k.getKey("p256dh"))},ie=yield Pi(x.firebaseDependencies);if(ie){if(F(ie.subscriptionOptions,W))return Date.now()>=ie.createTime+Rn?Ns(x,{token:ie.token,createTime:Date.now(),subscriptionOptions:W}):ie.token;try{yield zs(x.firebaseDependencies,ie.token)}catch(Pe){console.warn(Pe)}return jo(x.firebaseDependencies,W)}return jo(x.firebaseDependencies,W)})).apply(this,arguments)}function Or(x){return $i.apply(this,arguments)}function $i(){return($i=(0,G.Z)(function*(x){const k=yield Pi(x.firebaseDependencies);k&&(yield zs(x.firebaseDependencies,k.token),yield as(x.firebaseDependencies));const W=yield x.swRegistration.pushManager.getSubscription();return!W||W.unsubscribe()})).apply(this,arguments)}function Ns(x,k){return ls.apply(this,arguments)}function ls(){return(ls=(0,G.Z)(function*(x,k){try{const W=yield go(x.firebaseDependencies,k),ie=Object.assign(Object.assign({},k),{token:W,createTime:Date.now()});return yield qn(x.firebaseDependencies,ie),W}catch(W){throw yield Or(x),W}})).apply(this,arguments)}function jo(x,k){return to.apply(this,arguments)}function to(){return(to=(0,G.Z)(function*(x,k){const ie={token:yield gn(x,k),createTime:Date.now(),subscriptionOptions:k};return yield qn(x,ie),ie.token})).apply(this,arguments)}function yo(x,k){return Qo.apply(this,arguments)}function Qo(){return(Qo=(0,G.Z)(function*(x,k){return(yield x.pushManager.getSubscription())||x.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:_r(k)})})).apply(this,arguments)}function F(x,k){return k.vapidKey===x.vapidKey&&k.endpoint===x.endpoint&&k.auth===x.auth&&k.p256dh===x.p256dh}function N(x){const k={from:x.from,collapseKey:x.collapse_key,messageId:x.fcmMessageId};return function A(x,k){if(!k.notification)return;x.notification={};const W=k.notification.title;W&&(x.notification.title=W);const ie=k.notification.body;ie&&(x.notification.body=ie);const Pe=k.notification.image;Pe&&(x.notification.image=Pe)}(k,x),function K(x,k){!k.data||(x.data=k.data)}(k,x),function et(x,k){var W,ie,Pe,Qe,It;if(!(k.fcmOptions||null!==(W=k.notification)&&void 0!==W&&W.click_action))return;x.fcmOptions={};const Pt=null!==(Pe=null===(ie=k.fcmOptions)||void 0===ie?void 0:ie.link)&&void 0!==Pe?Pe:null===(Qe=k.notification)||void 0===Qe?void 0:Qe.click_action;Pt&&(x.fcmOptions.link=Pt);const wn=null===(It=k.fcmOptions)||void 0===It?void 0:It.analytics_label;wn&&(x.fcmOptions.analyticsLabel=wn)}(k,x),k}function nn(x){return"object"==typeof x&&!!x&&ys in x}function dr(x,k){const W=[];for(let ie=0;ie<x.length;ie++)W.push(x.charAt(ie)),ie<k.length&&W.push(k.charAt(ie));return W.join("")}function Mi(x){return zr.create("missing-app-config-values",{valueName:x})}dr("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),dr("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Hi{constructor(k,W,ie){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const Pe=function cs(x){if(!x||!x.options)throw Mi("App Configuration Object");if(!x.name)throw Mi("App Name");const k=["projectId","apiKey","appId","messagingSenderId"],{options:W}=x;for(const ie of k)if(!W[ie])throw Mi(ie);return{appName:x.name,projectId:W.projectId,apiKey:W.apiKey,appId:W.appId,senderId:W.messagingSenderId}}(k);this.firebaseDependencies={app:k,appConfig:Pe,installations:W,analyticsProvider:ie}}_delete(){return Promise.resolve()}}function Ws(x){return no.apply(this,arguments)}function no(){return(no=(0,G.Z)(function*(x){var k;try{x.swRegistration=yield navigator.serviceWorker.register(Ni,{scope:os}),x.swRegistration.update().catch(()=>{})}catch(W){throw zr.create("failed-service-worker-registration",{browserErrorMessage:null===(k=W)||void 0===k?void 0:k.message})}})).apply(this,arguments)}function _o(x,k){return Co.apply(this,arguments)}function Co(){return(Co=(0,G.Z)(function*(x,k){if(!k&&!x.swRegistration&&(yield Ws(x)),k||!x.swRegistration){if(!(k instanceof ServiceWorkerRegistration))throw zr.create("invalid-sw-registration");x.swRegistration=k}})).apply(this,arguments)}function Ps(x,k){return ca.apply(this,arguments)}function ca(){return(ca=(0,G.Z)(function*(x,k){k?x.vapidKey=k:x.vapidKey||(x.vapidKey=xi)})).apply(this,arguments)}function ws(){return(ws=(0,G.Z)(function*(x,k){if(!navigator)throw zr.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw zr.create("permission-blocked");return yield Ps(x,k?.vapidKey),yield _o(x,k?.serviceWorkerRegistration),Us(x)})).apply(this,arguments)}function da(x,k,W){return Jo.apply(this,arguments)}function Jo(){return(Jo=(0,G.Z)(function*(x,k,W){const ie=Ea(k);(yield x.firebaseDependencies.analyticsProvider.get()).logEvent(ie,{message_id:W[ys],message_name:W[Ji],message_time:W[fo],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Ea(x){switch(x){case _s.NOTIFICATION_CLICKED:return"notification_open";case _s.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function $(){return($=(0,G.Z)(function*(x,k){const W=k.data;if(!W.isFirebaseMessaging)return;x.onMessageHandler&&W.messageType===_s.PUSH_RECEIVED&&("function"==typeof x.onMessageHandler?x.onMessageHandler(N(W)):x.onMessageHandler.next(N(W)));const ie=W.data;nn(ie)&&"1"===ie[ko]&&(yield da(x,W.messageType,ie))})).apply(this,arguments)}const M="@firebase/messaging",q="0.9.16",fe=x=>{const k=new Hi(x.getProvider("app").getImmediate(),x.getProvider("installations-internal").getImmediate(),x.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",W=>function S(x,k){return $.apply(this,arguments)}(k,W)),k},ze=x=>{const k=x.getProvider("messaging").getImmediate();return{getToken:ie=>function Wr(x,k){return ws.apply(this,arguments)}(k,ie)}};function Yt(){return Zn.apply(this,arguments)}function Zn(){return(Zn=(0,G.Z)(function*(){try{yield(0,we.eu)()}catch{return!1}return typeof window<"u"&&(0,we.hl)()&&(0,we.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function rt(){(0,be._registerComponent)(new Me.wA("messaging",fe,"PUBLIC")),(0,be._registerComponent)(new Me.wA("messaging-internal",ze,"PRIVATE")),(0,be.registerVersion)(M,q),(0,be.registerVersion)(M,q,"esm2017")}();const qs="analytics",R="firebase_id",O="origin",J="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Ie="https://www.googletagmanager.com/gtag/js",ke=new Re.Yd("@firebase/analytics");function Ct(x){return Promise.all(x.map(k=>k.catch(W=>W)))}function sn(x,k){const W=document.createElement("script");W.src=`${Ie}?l=${x}&id=${k}`,W.async=!0,document.head.appendChild(W)}function Nn(x,k,W,ie,Pe,Qe){return Ln.apply(this,arguments)}function Ln(){return(Ln=(0,G.Z)(function*(x,k,W,ie,Pe,Qe){const It=ie[Pe];try{if(It)yield k[It];else{const wn=(yield Ct(W)).find(bn=>bn.measurementId===Pe);wn&&(yield k[wn.appId])}}catch(Pt){ke.error(Pt)}x("config",Pe,Qe)})).apply(this,arguments)}function qr(x,k,W,ie,Pe){return Tr.apply(this,arguments)}function Tr(){return(Tr=(0,G.Z)(function*(x,k,W,ie,Pe){try{let Qe=[];if(Pe&&Pe.send_to){let It=Pe.send_to;Array.isArray(It)||(It=[It]);const Pt=yield Ct(W);for(const wn of It){const bn=Pt.find(En=>En.measurementId===wn),Pn=bn&&k[bn.appId];if(!Pn){Qe=[];break}Qe.push(Pn)}}0===Qe.length&&(Qe=Object.values(k)),yield Promise.all(Qe),x("event",ie,Pe||{})}catch(Qe){ke.error(Qe)}})).apply(this,arguments)}function es(){const x=window.document.getElementsByTagName("script");for(const k of Object.values(x))if(k.src&&k.src.includes(Ie))return k;return null}const Ur=new we.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),vo=new class Zr{constructor(k={},W=1e3){this.throttleMetadata=k,this.intervalMillis=W}getThrottleMetadata(k){return this.throttleMetadata[k]}setThrottleMetadata(k,W){this.throttleMetadata[k]=W}deleteThrottleMetadata(k){delete this.throttleMetadata[k]}};function Xo(x){return new Headers({Accept:"application/json","x-goog-api-key":x})}function $o(x){return bo.apply(this,arguments)}function bo(){return(bo=(0,G.Z)(function*(x){var k;const{appId:W,apiKey:ie}=x,Pe={method:"GET",headers:Xo(ie)},Qe=J.replace("{app-id}",W),It=yield fetch(Qe,Pe);if(200!==It.status&&304!==It.status){let Pt="";try{const wn=yield It.json();null!==(k=wn.error)&&void 0!==k&&k.message&&(Pt=wn.error.message)}catch{}throw Ur.create("config-fetch-failed",{httpStatus:It.status,responseMessage:Pt})}return It.json()})).apply(this,arguments)}function ai(x){return ro.apply(this,arguments)}function ro(){return(ro=(0,G.Z)(function*(x,k=vo,W){const{appId:ie,apiKey:Pe,measurementId:Qe}=x.options;if(!ie)throw Ur.create("no-app-id");if(!Pe){if(Qe)return{measurementId:Qe,appId:ie};throw Ur.create("no-api-key")}const It=k.getThrottleMetadata(ie)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Pt=new ea;return setTimeout((0,G.Z)(function*(){Pt.abort()}),void 0!==W?W:6e4),ha({appId:ie,apiKey:Pe,measurementId:Qe},It,Pt,k)})).apply(this,arguments)}function ha(x,k,W){return Ma.apply(this,arguments)}function Ma(){return(Ma=(0,G.Z)(function*(x,{throttleEndTimeMillis:k,backoffCount:W},ie,Pe=vo){var Qe,It;const{appId:Pt,measurementId:wn}=x;try{yield Ra(ie,k)}catch(bn){if(wn)return ke.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${wn} provided in the "measurementId" field in the local Firebase config. [${null===(Qe=bn)||void 0===Qe?void 0:Qe.message}]`),{appId:Pt,measurementId:wn};throw bn}try{const bn=yield $o(x);return Pe.deleteThrottleMetadata(Pt),bn}catch(bn){const Pn=bn;if(!Gi(Pn)){if(Pe.deleteThrottleMetadata(Pt),wn)return ke.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${wn} provided in the "measurementId" field in the local Firebase config. [${Pn?.message}]`),{appId:Pt,measurementId:wn};throw bn}const En=503===Number(null===(It=Pn?.customData)||void 0===It?void 0:It.httpStatus)?(0,we.$s)(W,Pe.intervalMillis,30):(0,we.$s)(W,Pe.intervalMillis),ni={throttleEndTimeMillis:Date.now()+En,backoffCount:W+1};return Pe.setThrottleMetadata(Pt,ni),ke.debug(`Calling attemptFetch again in ${En} millis`),ha(x,ni,ie,Pe)}})).apply(this,arguments)}function Ra(x,k){return new Promise((W,ie)=>{const Pe=Math.max(k-Date.now(),0),Qe=setTimeout(W,Pe);x.addEventListener(()=>{clearTimeout(Qe),ie(Ur.create("fetch-throttle",{throttleEndTimeMillis:k}))})})}function Gi(x){if(!(x instanceof we.ZR&&x.customData))return!1;const k=Number(x.customData.httpStatus);return 429===k||500===k||503===k||504===k}class ea{constructor(){this.listeners=[]}addEventListener(k){this.listeners.push(k)}abort(){this.listeners.forEach(k=>k())}}let Zs,Je;function fa(){return(fa=(0,G.Z)(function*(x,k,W,ie,Pe){if(Pe&&Pe.global)x("event",W,ie);else{const Qe=yield k;x("event",W,Object.assign(Object.assign({},ie),{send_to:Qe}))}})).apply(this,arguments)}function Et(x){Je=x}function zi(x){Zs=x}function Wi(){return nu.apply(this,arguments)}function nu(){return(nu=(0,G.Z)(function*(){var x;if(!(0,we.hl)())return ke.warn(Ur.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,we.eu)()}catch(k){return ke.warn(Ur.create("indexeddb-unavailable",{errorInfo:null===(x=k)||void 0===x?void 0:x.toString()}).message),!1}return!0})).apply(this,arguments)}function Na(){return(Na=(0,G.Z)(function*(x,k,W,ie,Pe,Qe,It){var Pt;const wn=ai(x);wn.then($s=>{W[$s.measurementId]=$s.appId,x.options.measurementId&&$s.measurementId!==x.options.measurementId&&ke.warn(`The measurement ID in the local Firebase config (${x.options.measurementId}) does not match the measurement ID fetched from the server (${$s.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch($s=>ke.error($s)),k.push(wn);const bn=Wi().then($s=>{if($s)return ie.getId()}),[Pn,En]=yield Promise.all([wn,bn]);es()||sn(Qe,Pn.measurementId),Je&&(Pe("consent","default",Je),Et(void 0)),Pe("js",new Date);const ni=null!==(Pt=It?.config)&&void 0!==Pt?Pt:{};return ni[O]="firebase",ni.update=!0,null!=En&&(ni[R]=En),Pe("config",Pn.measurementId,ni),Zs&&(Pe("set",Zs),zi(void 0)),Pn.measurementId})).apply(this,arguments)}class Pa{constructor(k){this.app=k}_delete(){return delete Ks[this.app.options.appId],Promise.resolve()}}let Ks={},Ho=[];const pa={};let ga,In,ru="dataLayer",wo=!1;function On(x,k,W){!function Ri(){const x=[];if((0,we.ru)()&&x.push("This is a browser extension environment."),(0,we.zI)()||x.push("Cookies are not available."),x.length>0){const k=x.map((ie,Pe)=>`(${Pe+1}) ${ie}`).join(" "),W=Ur.create("invalid-analytics-context",{errorInfo:k});ke.warn(W.message)}}();const ie=x.options.appId;if(!ie)throw Ur.create("no-app-id");if(!x.options.apiKey){if(!x.options.measurementId)throw Ur.create("no-api-key");ke.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${x.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Ks[ie])throw Ur.create("already-exists",{id:ie});if(!wo){!function Zt(x){let k=[];Array.isArray(window[x])?k=window[x]:window[x]=k}(ru);const{wrappedGtag:Qe,gtagCore:It}=function oi(x,k,W,ie,Pe){let Qe=function(...It){window[ie].push(arguments)};return window[Pe]&&"function"==typeof window[Pe]&&(Qe=window[Pe]),window[Pe]=function fi(x,k,W,ie){function Qe(){return(Qe=(0,G.Z)(function*(It,Pt,wn){try{"event"===It?yield qr(x,k,W,Pt,wn):"config"===It?yield Nn(x,k,W,ie,Pt,wn):"consent"===It?x("consent","update",wn):x("set",Pt)}catch(bn){ke.error(bn)}})).apply(this,arguments)}return function Pe(It,Pt,wn){return Qe.apply(this,arguments)}}(Qe,x,k,W),{gtagCore:Qe,wrappedGtag:window[Pe]}}(Ks,Ho,pa,ru,"gtag");In=Qe,ga=It,wo=!0}return Ks[ie]=function Ia(x,k,W,ie,Pe,Qe,It){return Na.apply(this,arguments)}(x,Ho,pa,k,ga,ru,W),new Pa(x)}function Gc(){return mi.apply(this,arguments)}function mi(){return(mi=(0,G.Z)(function*(){if((0,we.ru)()||!(0,we.zI)()||!(0,we.hl)())return!1;try{return yield(0,we.eu)()}catch{return!1}})).apply(this,arguments)}const su="@firebase/analytics";!function io(){(0,be._registerComponent)(new Me.wA(qs,(k,{options:W})=>On(k.getProvider("app").getImmediate(),k.getProvider("installations-internal").getImmediate(),W),"PUBLIC")),(0,be._registerComponent)(new Me.wA("analytics-internal",function x(k){try{const W=k.getProvider(qs).getImmediate();return{logEvent:(ie,Pe,Qe)=>function Da(x,k,W,ie){x=(0,we.m9)(x),function Oa(x,k,W,ie,Pe){return fa.apply(this,arguments)}(In,Ks[x.app.options.appId],k,W,ie).catch(Pe=>ke.error(Pe))}(W,ie,Pe,Qe)}}catch(W){throw Ur.create("interop-component-reg-failed",{reason:W})}},"PRIVATE")),(0,be.registerVersion)(su,"0.8.0"),(0,be.registerVersion)(su,"0.8.0","esm2017")}();var yi=U(4408),Ca=U(7565);const So=new class na extends Ca.v{}(class ou extends yi.o{constructor(k,W){super(k,W),this.scheduler=k,this.work=W}schedule(k,W=0){return W>0?super.schedule(k,W):(this.delay=W,this.state=k,this.scheduler.flush(this),this)}execute(k,W){return W>0||this.closed?super.execute(k,W):this._execute(k,W)}requestAsyncId(k,W,ie=0){return null!=ie&&ie>0||null==ie&&this.delay>0?super.requestAsyncId(k,W,ie):k.flush(this)}});var Ze=U(4986),ba=U(8505),Is=U(5363),qa=U(9468);const Ds=new p.GfV("7.4.1"),Ao="__angularfire_symbol__analyticsIsSupportedValue",v="__angularfire_symbol__analyticsIsSupported",w="__angularfire_symbol__remoteConfigIsSupportedValue",_="__angularfire_symbol__remoteConfigIsSupported",b="__angularfire_symbol__messagingIsSupportedValue",P="__angularfire_symbol__messagingIsSupported";function Ot(x,k,W){if(k){if(1===k.length)return k[0];const Qe=k.filter(It=>It.app===W);if(1===Qe.length)return Qe[0]}return W.container.getProvider(x).getImmediate({optional:!0})}globalThis[v]||(globalThis[v]=Gc().then(x=>globalThis[Ao]=x).catch(()=>globalThis[Ao]=!1)),globalThis[P]||(globalThis[P]=Yt().then(x=>globalThis[b]=x).catch(()=>globalThis[b]=!1)),globalThis[_]||(globalThis[_]=ms().then(x=>globalThis[w]=x).catch(()=>globalThis[w]=!1));const rn=(x,k)=>{const W=k?[k]:(0,C.C6)(),ie=[];return W.forEach(Pe=>{Pe.container.getProvider(x).instances.forEach(It=>{ie.includes(It)||ie.push(It)})}),ie};function Wt(){}class Dn{constructor(k,W=So){this.zone=k,this.delegate=W}now(){return this.delegate.now()}schedule(k,W,ie){const Pe=this.zone;return this.delegate.schedule(function(It){Pe.runGuarded(()=>{k.apply(this,[It])})},W,ie)}}class zn{constructor(k){this.zone=k,this.task=null}call(k,W){const ie=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Wt,{},Wt,Wt)),W.pipe((0,ba.b)({next:ie,complete:ie,error:ie})).subscribe(k).add(ie)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let so=(()=>{class x{constructor(W){this.ngZone=W,this.outsideAngular=W.runOutsideAngular(()=>new Dn(Zone.current)),this.insideAngular=W.run(()=>new Dn(Zone.current,Ze.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return x.\u0275fac=function(W){return new(W||x)(p.LFG(p.R0b))},x.\u0275prov=p.Yz7({token:x,factory:x.\u0275fac,providedIn:"root"}),x})();function qi(){const x=globalThis.\u0275AngularFireScheduler;if(!x)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return x}function _i(x){return x.pipe((0,Is.Q)(qi().outsideAngular))}function oo(x){return qi(),function ki(x){return function(W){return(W=W.lift(new zn(x.ngZone))).pipe((0,qa.R)(x.outsideAngular),(0,Is.Q)(x.insideAngular))}}(qi())(x)}},2090:(Gt,qe,U)=>{U.d(qe,{$s:()=>rr,BH:()=>mt,G6:()=>nt,L:()=>Oe,LL:()=>dt,Mn:()=>Xe,Sg:()=>ot,UG:()=>Ye,US:()=>Me,ZB:()=>le,ZR:()=>Ne,b$:()=>Bt,d:()=>he,eu:()=>Le,hl:()=>ae,jU:()=>He,m9:()=>pn,ne:()=>lr,pd:()=>nr,r3:()=>Mn,ru:()=>Ut,tV:()=>Fe,uI:()=>Nt,vZ:()=>Er,w1:()=>it,xO:()=>Ar,xb:()=>Fn,z$:()=>Ke,zI:()=>ne,zd:()=>Jt});const be=function(ge){const X=[];let oe=0;for(let Ee=0;Ee<ge.length;Ee++){let me=ge.charCodeAt(Ee);me<128?X[oe++]=me:me<2048?(X[oe++]=me>>6|192,X[oe++]=63&me|128):55296==(64512&me)&&Ee+1<ge.length&&56320==(64512&ge.charCodeAt(Ee+1))?(me=65536+((1023&me)<<10)+(1023&ge.charCodeAt(++Ee)),X[oe++]=me>>18|240,X[oe++]=me>>12&63|128,X[oe++]=me>>6&63|128,X[oe++]=63&me|128):(X[oe++]=me>>12|224,X[oe++]=me>>6&63|128,X[oe++]=63&me|128)}return X},Me={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(ge,X){if(!Array.isArray(ge))throw Error("encodeByteArray takes an array as a parameter");this.init_();const oe=X?this.byteToCharMapWebSafe_:this.byteToCharMap_,Ee=[];for(let me=0;me<ge.length;me+=3){const ut=ge[me],yt=me+1<ge.length,Rt=yt?ge[me+1]:0,ir=me+2<ge.length,Tn=ir?ge[me+2]:0;let Xt=(15&Rt)<<2|Tn>>6,cr=63&Tn;ir||(cr=64,yt||(Xt=64)),Ee.push(oe[ut>>2],oe[(3&ut)<<4|Rt>>4],oe[Xt],oe[cr])}return Ee.join("")},encodeString(ge,X){return this.HAS_NATIVE_SUPPORT&&!X?btoa(ge):this.encodeByteArray(be(ge),X)},decodeString(ge,X){return this.HAS_NATIVE_SUPPORT&&!X?atob(ge):function(ge){const X=[];let oe=0,Ee=0;for(;oe<ge.length;){const me=ge[oe++];if(me<128)X[Ee++]=String.fromCharCode(me);else if(me>191&&me<224){const ut=ge[oe++];X[Ee++]=String.fromCharCode((31&me)<<6|63&ut)}else if(me>239&&me<365){const ir=((7&me)<<18|(63&ge[oe++])<<12|(63&ge[oe++])<<6|63&ge[oe++])-65536;X[Ee++]=String.fromCharCode(55296+(ir>>10)),X[Ee++]=String.fromCharCode(56320+(1023&ir))}else{const ut=ge[oe++],yt=ge[oe++];X[Ee++]=String.fromCharCode((15&me)<<12|(63&ut)<<6|63&yt)}}return X.join("")}(this.decodeStringToByteArray(ge,X))},decodeStringToByteArray(ge,X){this.init_();const oe=X?this.charToByteMapWebSafe_:this.charToByteMap_,Ee=[];for(let me=0;me<ge.length;){const ut=oe[ge.charAt(me++)],Rt=me<ge.length?oe[ge.charAt(me)]:0;++me;const Tn=me<ge.length?oe[ge.charAt(me)]:64;++me;const _n=me<ge.length?oe[ge.charAt(me)]:64;if(++me,null==ut||null==Rt||null==Tn||null==_n)throw Error();Ee.push(ut<<2|Rt>>4),64!==Tn&&(Ee.push(Rt<<4&240|Tn>>2),64!==_n&&Ee.push(Tn<<6&192|_n))}return Ee},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let ge=0;ge<this.ENCODED_VALS.length;ge++)this.byteToCharMap_[ge]=this.ENCODED_VALS.charAt(ge),this.charToByteMap_[this.byteToCharMap_[ge]]=ge,this.byteToCharMapWebSafe_[ge]=this.ENCODED_VALS_WEBSAFE.charAt(ge),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[ge]]=ge,ge>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(ge)]=ge,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(ge)]=ge)}}},Oe=function(ge){return function(ge){const X=be(ge);return Me.encodeByteArray(X,!0)}(ge).replace(/\./g,"")},Fe=function(ge){try{return Me.decodeString(ge,!0)}catch(X){console.error("base64Decode failed: ",X)}return null};function le(ge,X){if(!(X instanceof Object))return X;switch(X.constructor){case Date:return new Date(X.getTime());case Object:void 0===ge&&(ge={});break;case Array:ge=[];break;default:return X}for(const oe in X)!X.hasOwnProperty(oe)||!Ce(oe)||(ge[oe]=le(ge[oe],X[oe]));return ge}function Ce(ge){return"__proto__"!==ge}class mt{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((X,oe)=>{this.resolve=X,this.reject=oe})}wrapCallback(X){return(oe,Ee)=>{oe?this.reject(oe):this.resolve(Ee),"function"==typeof X&&(this.promise.catch(()=>{}),1===X.length?X(oe):X(oe,Ee))}}}function ot(ge,X){if(ge.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const Ee=X||"demo-project",me=ge.iat||0,ut=ge.sub||ge.user_id;if(!ut)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const yt=Object.assign({iss:`https://securetoken.google.com/${Ee}`,aud:Ee,iat:me,exp:me+3600,auth_time:me,sub:ut,user_id:ut,firebase:{sign_in_provider:"custom",identities:{}}},ge);return[Oe(JSON.stringify({alg:"none",type:"JWT"})),Oe(JSON.stringify(yt)),""].join(".")}function Ke(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Nt(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ke())}function Ye(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function He(){return"object"==typeof self&&self.self===self}function Ut(){const ge="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof ge&&void 0!==ge.id}function Bt(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function he(){return Ke().indexOf("Electron/")>=0}function it(){const ge=Ke();return ge.indexOf("MSIE ")>=0||ge.indexOf("Trident/")>=0}function Xe(){return Ke().indexOf("MSAppHost/")>=0}function nt(){return!Ye()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ae(){return"object"==typeof indexedDB}function Le(){return new Promise((ge,X)=>{try{let oe=!0;const Ee="validate-browser-context-for-indexeddb-analytics-module",me=self.indexedDB.open(Ee);me.onsuccess=()=>{me.result.close(),oe||self.indexedDB.deleteDatabase(Ee),ge(!0)},me.onupgradeneeded=()=>{oe=!1},me.onerror=()=>{var ut;X((null===(ut=me.error)||void 0===ut?void 0:ut.message)||"")}}catch(oe){X(oe)}})}function ne(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class Ne extends Error{constructor(X,oe,Ee){super(oe),this.code=X,this.customData=Ee,this.name="FirebaseError",Object.setPrototypeOf(this,Ne.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,dt.prototype.create)}}class dt{constructor(X,oe,Ee){this.service=X,this.serviceName=oe,this.errors=Ee}create(X,...oe){const Ee=oe[0]||{},me=`${this.service}/${X}`,ut=this.errors[X],yt=ut?function wt(ge,X){return ge.replace(bt,(oe,Ee)=>{const me=X[Ee];return null!=me?String(me):`<${Ee}?>`})}(ut,Ee):"Error";return new Ne(me,`${this.serviceName}: ${yt} (${me}).`,Ee)}}const bt=/\{\$([^}]+)}/g;function Mn(ge,X){return Object.prototype.hasOwnProperty.call(ge,X)}function Fn(ge){for(const X in ge)if(Object.prototype.hasOwnProperty.call(ge,X))return!1;return!0}function Er(ge,X){if(ge===X)return!0;const oe=Object.keys(ge),Ee=Object.keys(X);for(const me of oe){if(!Ee.includes(me))return!1;const ut=ge[me],yt=X[me];if(mr(ut)&&mr(yt)){if(!Er(ut,yt))return!1}else if(ut!==yt)return!1}for(const me of Ee)if(!oe.includes(me))return!1;return!0}function mr(ge){return null!==ge&&"object"==typeof ge}function Ar(ge){const X=[];for(const[oe,Ee]of Object.entries(ge))Array.isArray(Ee)?Ee.forEach(me=>{X.push(encodeURIComponent(oe)+"="+encodeURIComponent(me))}):X.push(encodeURIComponent(oe)+"="+encodeURIComponent(Ee));return X.length?"&"+X.join("&"):""}function Jt(ge){const X={};return ge.replace(/^\?/,"").split("&").forEach(Ee=>{if(Ee){const[me,ut]=Ee.split("=");X[decodeURIComponent(me)]=decodeURIComponent(ut)}}),X}function nr(ge){const X=ge.indexOf("?");if(!X)return"";const oe=ge.indexOf("#",X);return ge.substring(X,oe>0?oe:void 0)}function lr(ge,X){const oe=new pt(ge,X);return oe.subscribe.bind(oe)}class pt{constructor(X,oe){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=oe,this.task.then(()=>{X(this)}).catch(Ee=>{this.error(Ee)})}next(X){this.forEachObserver(oe=>{oe.next(X)})}error(X){this.forEachObserver(oe=>{oe.error(X)}),this.close(X)}complete(){this.forEachObserver(X=>{X.complete()}),this.close()}subscribe(X,oe,Ee){let me;if(void 0===X&&void 0===oe&&void 0===Ee)throw new Error("Missing Observer.");me=function Cn(ge,X){if("object"!=typeof ge||null===ge)return!1;for(const oe of X)if(oe in ge&&"function"==typeof ge[oe])return!0;return!1}(X,["next","error","complete"])?X:{next:X,error:oe,complete:Ee},void 0===me.next&&(me.next=Hn),void 0===me.error&&(me.error=Hn),void 0===me.complete&&(me.complete=Hn);const ut=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?me.error(this.finalError):me.complete()}catch{}}),this.observers.push(me),ut}unsubscribeOne(X){void 0===this.observers||void 0===this.observers[X]||(delete this.observers[X],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(X){if(!this.finalized)for(let oe=0;oe<this.observers.length;oe++)this.sendOne(oe,X)}sendOne(X,oe){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[X])try{oe(this.observers[X])}catch(Ee){typeof console<"u"&&console.error&&console.error(Ee)}})}close(X){this.finalized||(this.finalized=!0,void 0!==X&&(this.finalError=X),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Hn(){}function rr(ge,X=1e3,oe=2){const Ee=X*Math.pow(oe,ge),me=Math.round(.5*Ee*(Math.random()-.5)*2);return Math.min(144e5,Ee+me)}function pn(ge){return ge&&ge._delegate?ge._delegate:ge}},2557:(Gt,qe,U)=>{U.d(qe,{e:()=>be});var p=U(7579),C=U(4650),G=U(1205);let be=(()=>{class we{constructor(Re){this.auth=Re,this.currentUser=null,this.notifier$=new p.x}Login(Re,Oe){return this.auth.signInWithEmailAndPassword(Re,Oe)}RegisterUser(Re,Oe){return this.auth.createUserWithEmailAndPassword(Re,Oe)}SetCurrentUser(Re){this.currentUser=Re,this.Notify()}GetCurrentUserEmail(){return this.currentUser?.email}GetCurrentUserPhotoUrl(){return this.currentUser?.photoURL}GetCurrentUserDisplayName(){return this.currentUser?.displayName}GetCurrentUserID(){return this.currentUser?.uid}IsUserLoggedIn(){return null!=this.currentUser}LogOut(){this.currentUser=null,this.Notify()}Notify(){this.notifier$.next(this.currentUser)}UserActivity(){return this.notifier$}}return we.\u0275fac=function(Re){return new(Re||we)(C.LFG(G.zQ))},we.\u0275prov=C.Yz7({token:we,factory:we.\u0275fac,providedIn:"root"}),we})()},2358:(Gt,qe,U)=>{var p=U(1481),C=U(4650),G=U(433),be=U(529),we=U(7001);class Me{constructor(O,j){this.id="",this.user_email=O,this.timestamp=j}getLiteralObjectRepresentation(){return{user_email:this.user_email,timestamp:this.timestamp}}}class Re{constructor(){this.INVALID_EMAIL={ocurred:!1,message:"El formato del email ingresado no es v\xe1lido."},this.WRONG_PASSWORD={ocurred:!1,message:"Contrase\xf1a equivocada."},this.USER_NOT_FOUND={ocurred:!1,message:"Usuario inexistente."},this.EMAIL_REQUIRED={ocurred:!1,message:"Email requerido."},this.PASSWORD_REQUIRED={ocurred:!1,message:"Contrase\xf1a requerida."},this.OTHER={ocurred:!1,message:"Ha ocurrido un error."}}ClearErrors(){Object.entries(this).forEach(([O,j])=>{j.ocurred=!1})}HasError(){let O=!1;return Object.entries(this).forEach(([j,J])=>{1==J.ocurred&&(O=!0)}),O}}var Oe=U(2557),Fe=U(7566);let ce=(()=>{class R{constructor(j){this.firestore=j,this.collectionPath="/login_logs",this.loginLogsCollection=j.collection(this.collectionPath)}getDocuments(){return this.loginLogsCollection.valueChanges({idField:"id"})}addDocument(j){return this.loginLogsCollection.add(j)}updateDocument(j,J){return this.loginLogsCollection.doc(j).update(J)}deleteDocument(j){return this.loginLogsCollection.doc(j).delete()}}return R.\u0275fac=function(j){return new(j||R)(C.LFG(Fe.ST))},R.\u0275prov=C.Yz7({token:R,factory:R.\u0275fac,providedIn:"root"}),R})();var le=U(6895);function Ce(R,O){if(1&R&&(C.TgZ(0,"p",14),C._uU(1),C.qZA()),2&R){const j=C.oxw(2);C.xp6(1),C.hij(" ",j.errors.INVALID_EMAIL.message," ")}}function mt(R,O){if(1&R&&(C.TgZ(0,"p",14),C._uU(1),C.qZA()),2&R){const j=C.oxw(2);C.xp6(1),C.hij(" ",j.errors.WRONG_PASSWORD.message," ")}}function ot(R,O){if(1&R&&(C.TgZ(0,"p",14),C._uU(1),C.qZA()),2&R){const j=C.oxw(2);C.xp6(1),C.hij(" ",j.errors.USER_NOT_FOUND.message," ")}}function Ke(R,O){if(1&R&&(C.TgZ(0,"p",14),C._uU(1),C.qZA()),2&R){const j=C.oxw(2);C.xp6(1),C.hij(" ",j.errors.EMAIL_REQUIRED.message," ")}}function Nt(R,O){if(1&R&&(C.TgZ(0,"p",14),C._uU(1),C.qZA()),2&R){const j=C.oxw(2);C.xp6(1),C.hij(" ",j.errors.PASSWORD_REQUIRED.message," ")}}function Ye(R,O){if(1&R&&(C.TgZ(0,"p",14),C._uU(1),C.qZA()),2&R){const j=C.oxw(2);C.xp6(1),C.hij(" ",j.errors.OTHER.message," ")}}function He(R,O){if(1&R&&(C.TgZ(0,"div",12),C.YNc(1,Ce,2,1,"p",13),C.YNc(2,mt,2,1,"p",13),C.YNc(3,ot,2,1,"p",13),C.YNc(4,Ke,2,1,"p",13),C.YNc(5,Nt,2,1,"p",13),C.YNc(6,Ye,2,1,"p",13),C.qZA()),2&R){const j=C.oxw();C.xp6(1),C.Q6J("ngIf",j.errors.INVALID_EMAIL.ocurred),C.xp6(1),C.Q6J("ngIf",j.errors.WRONG_PASSWORD.ocurred),C.xp6(1),C.Q6J("ngIf",j.errors.USER_NOT_FOUND.ocurred),C.xp6(1),C.Q6J("ngIf",j.errors.EMAIL_REQUIRED.ocurred),C.xp6(1),C.Q6J("ngIf",j.errors.PASSWORD_REQUIRED.ocurred),C.xp6(1),C.Q6J("ngIf",j.errors.OTHER.ocurred)}}let Ut=(()=>{class R{constructor(j,J,Ie){this.auth=j,this.loginLogs=J,this.router=Ie,this._email="",this._password="",this.errors=new Re}ngOnInit(){this.auth.IsUserLoggedIn()&&this.router.navigate(["/home"])}login(){this.auth.Login(this._email,this._password).then(j=>{this.loginLogs.addDocument(new Me(this._email,Date.now().toString()).getLiteralObjectRepresentation()),null!=j.user&&this.auth.SetCurrentUser(j.user),this.router.navigate(["/home"])}).catch(j=>{this.errors.ClearErrors(),this.RequiredFieldsFilled()&&("auth/invalid-email"==j.code?this.errors.INVALID_EMAIL.ocurred=!0:"auth/wrong-password"==j.code?this.errors.WRONG_PASSWORD.ocurred=!0:"auth/user-not-found"==j.code?this.errors.USER_NOT_FOUND.ocurred=!0:(this.errors.OTHER.message=j.message,this.errors.OTHER.ocurred=!0))})}access(){this._email="test_user@rayoespacial.com",this._password="123456"}RequiredFieldsFilled(){return""==this._email?(this.errors.EMAIL_REQUIRED.ocurred=!0,!1):""!=this._password||(this.errors.PASSWORD_REQUIRED.ocurred=!0,!1)}}return R.\u0275fac=function(j){return new(j||R)(C.Y36(Oe.e),C.Y36(ce),C.Y36(we.F0))},R.\u0275cmp=C.Xpm({type:R,selectors:[["app-login-form"]],decls:19,vars:3,consts:[[1,"login-container","text-center"],[1,"form-signin","w-100","m-auto"],["src","../../../assets/rayo-espacial-logo-grande.png","alt","","width","200","height","200",1,"mb-4"],[1,"form-floating"],["type","email","name","email","id","floatingInput","placeholder","name@example.com",1,"form-control",3,"ngModel","ngModelChange"],["for","floatingInput"],["type","password","name","password","id","floatingPassword","placeholder","Password",1,"form-control",3,"ngModel","ngModelChange"],["for","floatingPassword"],[1,"w-100","btn","btn-lg","btn-primary","mt-4","submit-customization",3,"click"],[1,"w-100","btn","btn-lg","btn-primary","mt-1","access-btn-customization",3,"click"],["class","alert alert-danger mt-5","role","alert",4,"ngIf"],[1,"mt-5","mb-3","text-muted"],["role","alert",1,"alert","alert-danger","mt-5"],["class","m-0",4,"ngIf"],[1,"m-0"]],template:function(j,J){1&j&&(C.TgZ(0,"div",0)(1,"main",1)(2,"form"),C._UZ(3,"img",2),C.TgZ(4,"div",3)(5,"input",4),C.NdJ("ngModelChange",function(ke){return J._email=ke}),C.qZA(),C.TgZ(6,"label",5),C._uU(7,"Email"),C.qZA()(),C.TgZ(8,"div",3)(9,"input",6),C.NdJ("ngModelChange",function(ke){return J._password=ke}),C.qZA(),C.TgZ(10,"label",7),C._uU(11,"Password"),C.qZA()(),C.TgZ(12,"button",8),C.NdJ("click",function(){return J.login()}),C._uU(13,"Ingresar"),C.qZA(),C.TgZ(14,"button",9),C.NdJ("click",function(){return J.access()}),C._uU(15,"Acceso R\xe1pido"),C.qZA(),C.YNc(16,He,7,6,"div",10),C.TgZ(17,"p",11),C._uU(18,"\xa9 Ignacio Perez Artaso - 2022"),C.qZA()()()()),2&j&&(C.xp6(5),C.Q6J("ngModel",J._email),C.xp6(4),C.Q6J("ngModel",J._password),C.xp6(7),C.Q6J("ngIf",J.errors.HasError()))},dependencies:[le.O5,G._Y,G.Fj,G.JJ,G.JL,G.On,G.F],styles:[".login-container[_ngcontent-%COMP%]{display:flex;align-items:center;padding-top:40px;padding-bottom:40px;background-color:#e6e0bb}.form-signin[_ngcontent-%COMP%]{max-width:330px;padding:15px}.form-signin[_ngcontent-%COMP%]   .form-floating[_ngcontent-%COMP%]:focus-within{z-index:2}.form-signin[_ngcontent-%COMP%]   input[type=email][_ngcontent-%COMP%]{margin-bottom:-1px;border-bottom-right-radius:0;border-bottom-left-radius:0}.form-signin[_ngcontent-%COMP%]   input[type=password][_ngcontent-%COMP%]{margin-bottom:10px;border-top-left-radius:0;border-top-right-radius:0}.submit-customization[_ngcontent-%COMP%]{background-color:#0d0f45!important;border:none!important}.access-btn-customization[_ngcontent-%COMP%]{background-color:#450d16;border:none}"]}),R})();class Bt{constructor(){this.EMAIL_EXISTS={ocurred:!1,message:"El email ingresado ya se encuentra registrado."},this.WEAK_PASSWORD={ocurred:!1,message:"La contrase\xf1a debe tener al menos seis (6) d\xedgitos."},this.WRONG_PASSWORD_CONFIRMATION={ocurred:!1,message:"Las contrase\xf1as ingresadas no coinciden."},this.EMAIL_REQUIRED={ocurred:!1,message:"Email requerido."},this.PASSWORD_REQUIRED={ocurred:!1,message:"Contrase\xf1a requerida."},this.OTHER={ocurred:!1,message:"Ha ocurrido un error."}}ClearErrors(){Object.entries(this).forEach(([O,j])=>{j.ocurred=!1})}HasError(){let O=!1;return Object.entries(this).forEach(([j,J])=>{1==J.ocurred&&(O=!0)}),O}}function he(R,O){if(1&R&&(C.TgZ(0,"p",15),C._uU(1),C.qZA()),2&R){const j=C.oxw(2);C.xp6(1),C.hij(" ",j.errors.EMAIL_EXISTS.message," ")}}function it(R,O){if(1&R&&(C.TgZ(0,"p",15),C._uU(1),C.qZA()),2&R){const j=C.oxw(2);C.xp6(1),C.hij(" ",j.errors.WEAK_PASSWORD.message," ")}}function Xe(R,O){if(1&R&&(C.TgZ(0,"p",15),C._uU(1),C.qZA()),2&R){const j=C.oxw(2);C.xp6(1),C.hij(" ",j.errors.WRONG_PASSWORD_CONFIRMATION.message," ")}}function _t(R,O){if(1&R&&(C.TgZ(0,"p",15),C._uU(1),C.qZA()),2&R){const j=C.oxw(2);C.xp6(1),C.hij(" ",j.errors.EMAIL_REQUIRED.message," ")}}function nt(R,O){if(1&R&&(C.TgZ(0,"p",15),C._uU(1),C.qZA()),2&R){const j=C.oxw(2);C.xp6(1),C.hij(" ",j.errors.PASSWORD_REQUIRED.message," ")}}function ae(R,O){if(1&R&&(C.TgZ(0,"p",15),C._uU(1),C.qZA()),2&R){const j=C.oxw(2);C.xp6(1),C.hij(" ",j.errors.OTHER.message," ")}}function Le(R,O){if(1&R&&(C.TgZ(0,"div",13),C.YNc(1,he,2,1,"p",14),C.YNc(2,it,2,1,"p",14),C.YNc(3,Xe,2,1,"p",14),C.YNc(4,_t,2,1,"p",14),C.YNc(5,nt,2,1,"p",14),C.YNc(6,ae,2,1,"p",14),C.qZA()),2&R){const j=C.oxw();C.xp6(1),C.Q6J("ngIf",j.errors.EMAIL_EXISTS.ocurred),C.xp6(1),C.Q6J("ngIf",j.errors.WEAK_PASSWORD.ocurred),C.xp6(1),C.Q6J("ngIf",j.errors.WRONG_PASSWORD_CONFIRMATION.ocurred),C.xp6(1),C.Q6J("ngIf",j.errors.EMAIL_REQUIRED.ocurred),C.xp6(1),C.Q6J("ngIf",j.errors.PASSWORD_REQUIRED.ocurred),C.xp6(1),C.Q6J("ngIf",j.errors.OTHER.ocurred)}}let ne=(()=>{class R{constructor(j,J){this.auth=j,this.router=J,this._email="",this._password="",this._passwordConfirmation="",this.errors=new Bt}ngOnInit(){}Register(){this.errors.ClearErrors(),this._password==this._passwordConfirmation?this.auth.RegisterUser(this._email,this._password).then(j=>{null!=j.user&&this.auth.SetCurrentUser(j.user),this.router.navigate(["/home"])}).catch(j=>{this.RequiredFieldsFilled()&&("auth/email-already-in-use"==j.code?this.errors.EMAIL_EXISTS.ocurred=!0:"auth/weak-password"==j.code?this.errors.WEAK_PASSWORD.ocurred=!0:(this.errors.OTHER.message=j.message,this.errors.OTHER.ocurred=!0))}):this.errors.WRONG_PASSWORD_CONFIRMATION.ocurred=!0}RequiredFieldsFilled(){return""==this._email?(this.errors.EMAIL_REQUIRED.ocurred=!0,!1):""!=this._password||(this.errors.PASSWORD_REQUIRED.ocurred=!0,!1)}}return R.\u0275fac=function(j){return new(j||R)(C.Y36(Oe.e),C.Y36(we.F0))},R.\u0275cmp=C.Xpm({type:R,selectors:[["app-register"]],decls:21,vars:4,consts:[[1,"login-container","text-center"],[1,"form-signin","w-100","m-auto"],["src","../../../assets/sign-in-logo.png","alt","","width","200","height","200",1,"mb-4"],[1,"form-floating","mb-2"],["type","email","name","email","id","floatingInput","placeholder","name@example.com",1,"form-control",3,"ngModel","ngModelChange"],["for","floatingInput"],["type","password","name","password","id","floatingPassword","placeholder","Password",1,"form-control",3,"ngModel","ngModelChange"],["for","floatingPassword"],[1,"form-floating"],["type","password","name","passwordConfirmation","id","floatingPassword","placeholder","Password",1,"form-control",3,"ngModel","ngModelChange"],[1,"w-100","btn","btn-lg","btn-primary","mt-4","submit-customization",3,"click"],["class","alert alert-danger mt-5","role","alert",4,"ngIf"],[1,"mt-5","mb-3","text-muted"],["role","alert",1,"alert","alert-danger","mt-5"],["class","m-0",4,"ngIf"],[1,"m-0"]],template:function(j,J){1&j&&(C.TgZ(0,"div",0)(1,"main",1)(2,"form"),C._UZ(3,"img",2),C.TgZ(4,"div",3)(5,"input",4),C.NdJ("ngModelChange",function(ke){return J._email=ke}),C.qZA(),C.TgZ(6,"label",5),C._uU(7,"Email"),C.qZA()(),C.TgZ(8,"div",3)(9,"input",6),C.NdJ("ngModelChange",function(ke){return J._password=ke}),C.qZA(),C.TgZ(10,"label",7),C._uU(11,"Nueva Contrase\xf1a"),C.qZA()(),C.TgZ(12,"div",8)(13,"input",9),C.NdJ("ngModelChange",function(ke){return J._passwordConfirmation=ke}),C.qZA(),C.TgZ(14,"label",7),C._uU(15,"Confirme Su Contrase\xf1a"),C.qZA()(),C.TgZ(16,"button",10),C.NdJ("click",function(){return J.Register()}),C._uU(17,"Registrarse"),C.qZA(),C.YNc(18,Le,7,6,"div",11),C.TgZ(19,"p",12),C._uU(20,"\xa9 Ignacio Perez Artaso - 2022"),C.qZA()()()()),2&j&&(C.xp6(5),C.Q6J("ngModel",J._email),C.xp6(4),C.Q6J("ngModel",J._password),C.xp6(4),C.Q6J("ngModel",J._passwordConfirmation),C.xp6(5),C.Q6J("ngIf",J.errors.HasError()))},dependencies:[le.O5,G._Y,G.Fj,G.JJ,G.JL,G.On,G.F],styles:[".login-container[_ngcontent-%COMP%]{display:flex;align-items:center;padding-top:40px;padding-bottom:40px;background-color:#e6e0bb}.form-signin[_ngcontent-%COMP%]{max-width:330px;padding:15px}.form-signin[_ngcontent-%COMP%]   .form-floating[_ngcontent-%COMP%]:focus-within{z-index:2}.form-signin[_ngcontent-%COMP%]   input[type=email][_ngcontent-%COMP%]{margin-bottom:-1px;border-bottom-right-radius:0;border-bottom-left-radius:0}.form-signin[_ngcontent-%COMP%]   input[type=password][_ngcontent-%COMP%]{margin-bottom:-1px;border-top-left-radius:0;border-top-right-radius:0}.submit-customization[_ngcontent-%COMP%]{background-color:#0d0f45!important;border:none!important}"]}),R})(),De=(()=>{class R{constructor(j,J){this.auth=j,this.router=J}canActivate(j,J){return!!this.auth.IsUserLoggedIn()||this.router.navigate(["/login"]).then(()=>!1)}}return R.\u0275fac=function(j){return new(j||R)(C.LFG(Oe.e),C.LFG(we.F0))},R.\u0275prov=C.Yz7({token:R,factory:R.\u0275fac,providedIn:"root"}),R})(),de=(()=>{class R{constructor(){this.reveal=[!1,!1]}ngOnInit(){}revealElements(j){}}return R.\u0275fac=function(j){return new(j||R)},R.\u0275cmp=C.Xpm({type:R,selectors:[["app-about-me"]],decls:34,vars:0,consts:[[1,"container","mt-4"],[1,"row"],[1,"co-12","col-lg-3","first-reveal"],[1,"card"],["src","../../../assets/micara.webp","alt","Card image cap",1,"card-img-top","img-thumbnail","img-fluid","rounded-pill"],[1,"card-body"],[1,"card-title"],[1,"col","align-self-center","my-sm-4","second-reveal"],[1,"card-text"]],template:function(j,J){1&j&&(C.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),C._UZ(4,"img",4),C.TgZ(5,"div",5)(6,"h5",6),C._uU(7,"Ignacio Perez Artaso"),C.qZA(),C.TgZ(8,"ul")(9,"li"),C._uU(10," DNI: 37124127 "),C.qZA(),C.TgZ(11,"li"),C._uU(12," Legajo Nro. 106134 "),C.qZA(),C.TgZ(13,"li"),C._uU(14," Divisi\xf3n: 4to B "),C.qZA(),C.TgZ(15,"li"),C._uU(16," https://github.com/perez-artaso "),C.qZA(),C.TgZ(17,"li"),C._uU(18,"perez.artaso@gmail.com "),C.qZA()()()()(),C.TgZ(19,"div",7)(20,"div",3)(21,"h1"),C._uU(22,"RayoEspacial"),C.qZA(),C.TgZ(23,"div",5)(24,"h5",6),C._uU(25,"El Camino"),C.qZA(),C.TgZ(26,"p",8),C._uU(27," Mi juego consiste en un tablero en forma de grilla cuadrangular en el que se ense\xf1ar\xe1 al jugador una ruta que conecta una entrada con una salida. Tras unos instantes, se ocultar\xe1 este recorrido y el intr\xe9pido jugador deber\xe1 recordarlo, contando con tres intentos para recorrer correctamente el camino. "),C._UZ(28,"br")(29,"br"),C._uU(30," Cualquier equivocaci\xf3n en la ruta contar\xe1 como un intento fallido. Los recorridos se generar\xe1n proceduralmente al inicio de cada partida, por lo que el desaf\xedo se renovar\xe1 constantemente. "),C._UZ(31,"br")(32,"br"),C._uU(33," El tama\xf1o del tablero ser\xe1 personalizable. Mientras m\xe1s grande, m\xe1s puntos dar\xe1 la victoria. "),C.qZA()()()()()())},styles:["[_ngcontent-%COMP%]:root{--main-color: #E6E0BB;--main-contrast: #0D0F45}.card[_ngcontent-%COMP%]{background-color:#e6e0bb}h1[_ngcontent-%COMP%]{text-align:center}"]}),R})();class Ne{constructor(O,j,J,Ie){this._game_description=J,this._game_url=O,this._photo_url=j,this._game_title=Ie}}function dt(R,O){if(1&R&&(C.TgZ(0,"div",3)(1,"div",4),C._UZ(2,"img",5),C.TgZ(3,"div",6)(4,"p",7),C._uU(5),C.qZA(),C.TgZ(6,"a",8),C._uU(7,"Jugar"),C.qZA()()()()),2&R){const j=O.$implicit;C.xp6(2),C.s9C("src",j._photo_url,C.LSH),C.xp6(3),C.Oqu(j._game_description),C.xp6(1),C.s9C("routerLink",j._game_url)}}const bt=[{path:"",redirectTo:"home",pathMatch:"full"},{path:"about-me",component:de},{path:"home",component:(()=>{class R{constructor(){this.games=[]}ngOnInit(){this.games.push(new Ne("/ahorcado","/assets/ahorcado.png","Adivin\xe1 cada letra de una palabra intergal\xe1ctica. Pero ten\xe9 cuidado: \xa1cada error pone a tu nave un poco m\xe1s cerca del final de su traves\xeda!","Ahorcado espacial"),new Ne("/mayor-o-menor","/assets/mayor-menor.png","Una baraja creada en un planeta lejano. Sacalas de a una. La siguiente: \xbfser\xe1 mayor?, \xbfser\xe1 menor? S\xf3lo un viajero intr\xe9pido conoce la respuesta.","Mayor o menor"),new Ne("/preguntados-banderas","/assets/trivia.png","\xbfCu\xe1nto sab\xe9s de tu propio planeta? Demostralo en esta trivia de banderas.","Trivia gal\xe1ctica"),new Ne("/el-camino","/assets/elcamino.png","Una dense niebla cae sobre la tierra. \xbfSer\xe1 tu memoria la que te salve de un destino fatal? Descubrilo en nuestro nuevo juego: El Camino.","El camino"))}}return R.\u0275fac=function(j){return new(j||R)},R.\u0275cmp=C.Xpm({type:R,selectors:[["app-home"]],decls:3,vars:1,consts:[[1,"container","mt-2"],[1,"row"],["class","col-12",4,"ngFor","ngForOf"],[1,"col-12"],[2,"display","flex","margin-bottom","2rem"],["alt","Acceso a juego",2,"border-radius","5px",3,"src"],[2,"margin-left","2rem","background-color","aliceblue","display","flex","flex-direction","column","justify-content","space-around","padding","1rem 2rem","width","100%"],[1,"card-text",2,"line-height","2rem"],[1,"btn","btn-primary",2,"width","100%",3,"routerLink"]],template:function(j,J){1&j&&(C.TgZ(0,"div",0)(1,"div",1),C.YNc(2,dt,8,3,"div",2),C.qZA()()),2&j&&(C.xp6(2),C.Q6J("ngForOf",J.games))},dependencies:[le.sg,we.yS],styles:["img[_ngcontent-%COMP%]{max-width:200px;background-color:#e6e0bb}"]}),R})(),canActivate:[De]},{path:"register",component:ne},{path:"login",component:Ut},{path:"chat",loadChildren:()=>U.e(505).then(U.bind(U,505)).then(R=>R.ChatModule),canActivate:[De]},{path:"ahorcado",loadChildren:()=>U.e(993).then(U.bind(U,7993)).then(R=>R.AhorcadoModule),canActivate:[De]},{path:"mayor-o-menor",loadChildren:()=>U.e(2).then(U.bind(U,5002)).then(R=>R.MayorOMenorModule),canActivate:[De]},{path:"preguntados-banderas",loadChildren:()=>U.e(302).then(U.bind(U,8302)).then(R=>R.PreguntadosBanderasModule),canActivate:[De]},{path:"el-camino",loadChildren:()=>U.e(627).then(U.bind(U,7627)).then(R=>R.ElCaminoModule),canActivate:[De]}];let Mt=(()=>{class R{}return R.\u0275fac=function(j){return new(j||R)},R.\u0275mod=C.oAB({type:R}),R.\u0275inj=C.cJS({imports:[we.Bz.forRoot(bt,{anchorScrolling:"enabled"}),we.Bz]}),R})();function $t(R,O){1&R&&(C.TgZ(0,"a",15),C._uU(1,"Chat"),C.qZA())}function ft(R,O){1&R&&(C.TgZ(0,"li",16)(1,"a",17),C._uU(2," Juegos "),C.qZA(),C.TgZ(3,"ul",18)(4,"li")(5,"a",19),C._uU(6,"Ahorcado"),C.qZA()(),C.TgZ(7,"li")(8,"a",20),C._uU(9,"Banderas"),C.qZA()(),C.TgZ(10,"li")(11,"a",21),C._uU(12,"Mayor o menor"),C.qZA()(),C.TgZ(13,"li")(14,"a",22),C._uU(15,"El camino"),C.qZA()()()())}function tn(R,O){if(1&R){const j=C.EpF();C.TgZ(0,"li",16)(1,"a",17),C._uU(2),C.qZA(),C.TgZ(3,"ul",18)(4,"li")(5,"a",23),C.NdJ("click",function(){C.CHM(j);const Ie=C.oxw();return C.KtG(Ie.LogOut())}),C._uU(6,"Salir"),C.qZA()()()()}if(2&R){const j=C.oxw();C.xp6(2),C.hij(" ",j.dropdownLabel," ")}}function qt(R,O){1&R&&(C.TgZ(0,"ul",18)(1,"li")(2,"a",25),C._uU(3,"Login"),C.qZA()(),C._UZ(4,"div",26),C.TgZ(5,"li")(6,"a",27),C._uU(7,"Registrate"),C.qZA()()())}function on(R,O){if(1&R&&(C.TgZ(0,"li",16)(1,"a",17),C._uU(2),C.qZA(),C.YNc(3,qt,8,0,"ul",24),C.qZA()),2&R){const j=C.oxw();C.xp6(2),C.hij(" ",j.dropdownLabel," "),C.xp6(1),C.Q6J("ngIf",null==j.user)}}let Ft=(()=>{class R{constructor(j,J){this.auth=j,this.router=J,this.dropdownLabel="Qui\xe9n Sos",this.user=null}ngOnInit(){this.auth.UserActivity().subscribe(j=>{this.user=j,this.dropdownLabel=j&&null!=j.email?j.email:"Qui\xe9n Sos"})}LogOut(){this.auth.LogOut(),this.router.navigate(["/login"])}}return R.\u0275fac=function(j){return new(j||R)(C.Y36(Oe.e),C.Y36(we.F0))},R.\u0275cmp=C.Xpm({type:R,selectors:[["app-navbar"]],decls:20,vars:4,consts:[[1,"navbar","navbar-expand-lg","navbar-dark","bg-primary","navbar-customization"],[1,"container-fluid"],["routerLink","/",1,"navbar-brand"],["src","../../../assets/rocket-only.png","width","50","height","50","alt","Bootstrap","loading","lazy",1,"d-inline-block","align-top"],["type","button","data-bs-toggle","collapse","data-bs-target","#navbarSupportedContent2","aria-controls","navbarSupportedContent2","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["id","navbarSupportedContent2",1,"collapse","navbar-collapse"],[1,"navbar-nav","me-auto","mb-2","mb-lg-0"],[1,"nav-item"],["aria-current","page","routerLink","/",1,"nav-link","active","nav-link-customization"],["routerLink","/about-me",1,"nav-link","nav-link-customization"],["class","nav-link nav-link-customization","routerLink","/chat/chat-room",4,"ngIf"],["class","nav-item dropdown",4,"ngIf"],["class","nav-item dropdown",4,"ngIf","ngIfElse"],["noUser",""],["routerLink","/chat/chat-room",1,"nav-link","nav-link-customization"],[1,"nav-item","dropdown"],["role","button","data-bs-toggle","dropdown","aria-expanded","false",1,"nav-link","dropdown-toggle","nav-link-customization"],[1,"dropdown-menu"],["routerLink","/ahorcado",1,"dropdown-item","nav-link-customization"],["routerLink","/preguntados-banderas",1,"dropdown-item","nav-link-customization"],["routerLink","/mayor-o-menor",1,"dropdown-item","nav-link-customization"],["routerLink","/el-camino",1,"dropdown-item","nav-link-customization"],[1,"dropdown-item","nav-link-customization",3,"click"],["class","dropdown-menu",4,"ngIf"],["routerLink","/login",1,"dropdown-item","nav-link-customization"],[1,"dropdown-divider"],["routerLink","/register",1,"dropdown-item","nav-link-customization"]],template:function(j,J){if(1&j&&(C.TgZ(0,"nav",0)(1,"div",1)(2,"a",2),C._UZ(3,"img",3),C.qZA(),C.TgZ(4,"button",4),C._UZ(5,"span",5),C.qZA(),C.TgZ(6,"div",6)(7,"ul",7)(8,"li",8)(9,"a",9),C._uU(10,"Inicio"),C.qZA()(),C.TgZ(11,"li",8)(12,"a",10),C._uU(13,"Qui\xe9n Soy"),C.qZA()(),C.TgZ(14,"li",8),C.YNc(15,$t,2,0,"a",11),C.qZA(),C.YNc(16,ft,16,0,"li",12),C.YNc(17,tn,7,1,"li",13),C.YNc(18,on,4,2,"ng-template",null,14,C.W1O),C.qZA()()()()),2&j){const Ie=C.MAs(19);C.xp6(15),C.Q6J("ngIf",null!=J.user),C.xp6(1),C.Q6J("ngIf",null!=J.user),C.xp6(1),C.Q6J("ngIf",null!=J.user)("ngIfElse",Ie)}},dependencies:[le.O5,we.yS],styles:[".navbar-customization[_ngcontent-%COMP%]{background-color:#e6e0bb!important;border-bottom:.1rem solid #0D0F45!important}.nav-link-customization[_ngcontent-%COMP%]{color:#0d0f45}.active[_ngcontent-%COMP%]{color:#0d0f45!important;font-family:orbitron-black}.navbar-toggler[_ngcontent-%COMP%]{background-color:#0d0f45}"]}),R})(),Mn=(()=>{class R{constructor(){this.title="sala-juegos-2022"}}return R.\u0275fac=function(j){return new(j||R)},R.\u0275cmp=C.Xpm({type:R,selectors:[["app-root"]],decls:2,vars:0,template:function(j,J){1&j&&C._UZ(0,"app-navbar")(1,"router-outlet")},dependencies:[we.lC,Ft]}),R})();var an=U(2011);const Fn_firebaseConfig={apiKey:"AIzaSyD0FF-k7oz1RvH525aoPPdGGfo8Y7q_9Rw",authDomain:"salajuegos2022.firebaseapp.com",databaseURL:"https://salajuegos2022-default-rtdb.firebaseio.com",projectId:"salajuegos2022",storageBucket:"salajuegos2022.appspot.com",messagingSenderId:"15910949459",appId:"1:15910949459:web:cdef48d9faa371ab90aca6"};var Ei=U(1205),Er=U(9751),mr=U(9646),ur=U(8996),Ar=U(4986),Jt=U(4482),nr=U(5403),lr=U(4004),pt=U(3900),Bn=U(5813),Cn=U(3942),Hn=U(5861),kr=U(9681),Ir=U(2090),xr=U(4859);const $e="firebasestorage.googleapis.com",ye="storageBucket";class We extends Ir.ZR{constructor(O,j){super(Lt(O),`Firebase Storage: ${j} (${Lt(O)})`),this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,We.prototype)}_codeEquals(O){return Lt(O)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(O){this.customData.serverResponse=O,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}function Lt(R){return"storage/"+R}function un(){return new We("unknown","An unknown error occurred, please check the error payload for server response.")}function ge(){return new We("canceled","User canceled the upload/download.")}function me(){return new We("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function Rt(R){return new We("invalid-argument",R)}function ir(){return new We("app-deleted","The Firebase app was deleted.")}function Tn(R){return new We("invalid-root-operation","The operation '"+R+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function er(R,O){return new We("invalid-format","String does not match format '"+R+"': "+O)}function _n(R){throw new We("internal-error","Internal error: "+R)}class Xt{constructor(O,j){this.bucket=O,this.path_=j}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const O=encodeURIComponent;return"/b/"+O(this.bucket)+"/o/"+O(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(O,j){let J;try{J=Xt.makeFromUrl(O,j)}catch{return new Xt(O,"")}if(""===J.path)return J;throw function oe(R){return new We("invalid-default-bucket","Invalid default bucket '"+R+"'.")}(O)}static makeFromUrl(O,j){let J=null;const Ie="([A-Za-z0-9.\\-_]+)",sn=new RegExp("^gs://"+Ie+"(/(.*))?$","i");function Nn(Zr){Zr.path_=decodeURIComponent(Zr.path)}const qr=j.replace(/[.]/g,"\\."),ti=[{regex:sn,indices:{bucket:1,path:3},postModify:function ke(Zr){"/"===Zr.path.charAt(Zr.path.length-1)&&(Zr.path_=Zr.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${qr}/v[A-Za-z0-9_]+/b/${Ie}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:Nn},{regex:new RegExp(`^https?://${j===$e?"(?:storage.googleapis.com|storage.cloud.google.com)":j}/${Ie}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:Nn}];for(let Zr=0;Zr<ti.length;Zr++){const vo=ti[Zr],Xo=vo.regex.exec(O);if(Xo){let bo=Xo[vo.indices.path];bo||(bo=""),J=new Xt(Xo[vo.indices.bucket],bo),vo.postModify(J);break}}if(null==J)throw function X(R){return new We("invalid-url","Invalid URL '"+R+"'.")}(O);return J}}class cr{constructor(O){this.promise_=Promise.reject(O)}getPromise(){return this.promise_}cancel(O=!1){}}function ue(R){return"string"==typeof R||R instanceof String}function re(R){return Ve()&&R instanceof Blob}function Ve(){return typeof Blob<"u"}function at(R,O,j,J){if(J<O)throw Rt(`Invalid value for '${R}'. Expected ${O} or greater.`);if(J>j)throw Rt(`Invalid value for '${R}'. Expected ${j} or less.`)}function Vt(R,O,j){let J=O;return null==j&&(J=`https://${O}`),`${j}://${J}/v0${R}`}function mn(R){const O=encodeURIComponent;let j="?";for(const J in R)R.hasOwnProperty(J)&&(j=j+(O(J)+"=")+O(R[J])+"&");return j=j.slice(0,-1),j}var dn=(()=>{return(R=dn||(dn={}))[R.NO_ERROR=0]="NO_ERROR",R[R.NETWORK_ERROR=1]="NETWORK_ERROR",R[R.ABORT=2]="ABORT",dn;var R})();class yr{constructor(O,j,J,Ie,ke,Ct,sn,Zt,Nn,Ln,qr){this.url_=O,this.method_=j,this.headers_=J,this.body_=Ie,this.successCodes_=ke,this.additionalRetryCodes_=Ct,this.callback_=sn,this.errorCallback_=Zt,this.timeout_=Nn,this.progressCallback_=Ln,this.connectionFactory_=qr,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((Tr,fi)=>{this.resolve_=Tr,this.reject_=fi,this.start_()})}start_(){const j=(J,Ie)=>{const ke=this.resolve_,Ct=this.reject_,sn=Ie.connection;if(Ie.wasSuccessCode)try{const Zt=this.callback_(sn,sn.getResponse());!function $r(R){return void 0!==R}(Zt)?ke():ke(Zt)}catch(Zt){Ct(Zt)}else if(null!==sn){const Zt=un();Zt.serverResponse=sn.getErrorText(),Ct(this.errorCallback_?this.errorCallback_(sn,Zt):Zt)}else Ct(Ie.canceled?this.appDelete_?ir():ge():function pn(){return new We("retry-limit-exceeded","Max retry time for operation exceeded, please try again.")}())};this.canceled_?j(0,new Hr(!1,null,!0)):this.backoffId_=function vr(R,O,j){let J=1,Ie=null,ke=null,Ct=!1,sn=0;function Zt(){return 2===sn}let Nn=!1;function Ln(...fr){Nn||(Nn=!0,O.apply(null,fr))}function qr(fr){Ie=setTimeout(()=>{Ie=null,R(fi,Zt())},fr)}function Tr(){ke&&clearTimeout(ke)}function fi(fr,...Ur){if(Nn)return void Tr();if(fr)return Tr(),void Ln.call(null,fr,...Ur);if(Zt()||Ct)return Tr(),void Ln.call(null,fr,...Ur);let ti;J<64&&(J*=2),1===sn?(sn=2,ti=0):ti=1e3*(J+Math.random()),qr(ti)}let oi=!1;function es(fr){oi||(oi=!0,Tr(),!Nn&&(null!==Ie?(fr||(sn=2),clearTimeout(Ie),qr(0)):fr||(sn=1)))}return qr(0),ke=setTimeout(()=>{Ct=!0,es(!0)},j),es}((J,Ie)=>{if(Ie)return void J(!1,new Hr(!1,null,!0));const ke=this.connectionFactory_();this.pendingConnection_=ke;const Ct=sn=>{null!==this.progressCallback_&&this.progressCallback_(sn.loaded,sn.lengthComputable?sn.total:-1)};null!==this.progressCallback_&&ke.addUploadProgressListener(Ct),ke.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&ke.removeUploadProgressListener(Ct),this.pendingConnection_=null;const sn=ke.getErrorCode()===dn.NO_ERROR,Zt=ke.getStatus();if(!sn||this.isRetryStatusCode_(Zt)){const Ln=ke.getErrorCode()===dn.ABORT;return void J(!1,new Hr(!1,null,Ln))}const Nn=-1!==this.successCodes_.indexOf(Zt);J(!0,new Hr(Nn,ke))})},j,this.timeout_)}getPromise(){return this.promise_}cancel(O){this.canceled_=!0,this.appDelete_=O||!1,null!==this.backoffId_&&function Qr(R){R(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}isRetryStatusCode_(O){const j=O>=500&&O<600,Ie=-1!==[408,429].indexOf(O),ke=-1!==this.additionalRetryCodes_.indexOf(O);return j||Ie||ke}}class Hr{constructor(O,j,J){this.wasSuccessCode=O,this.connection=j,this.canceled=!!J}}function ks(...R){const O=function Fr(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}();if(void 0!==O){const j=new O;for(let J=0;J<R.length;J++)j.append(R[J]);return j.getBlob()}if(Ve())return new Blob(R);throw new We("unsupported-environment","This browser doesn't seem to support creating Blobs")}const Yn={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Ii{constructor(O,j){this.data=O,this.contentType=j||null}}function Qn(R,O){switch(R){case Yn.RAW:return new Ii(lo(O));case Yn.BASE64:case Yn.BASE64URL:return new Ii(Si(R,O));case Yn.DATA_URL:return new Ii(function Ai(R){const O=new Ms(R);return O.base64?Si(Yn.BASE64,O.rest):function fs(R){let O;try{O=decodeURIComponent(R)}catch{throw er(Yn.DATA_URL,"Malformed data URL.")}return lo(O)}(O.rest)}(O),function Li(R){return new Ms(R).contentType}(O))}throw un()}function lo(R){const O=[];for(let j=0;j<R.length;j++){let J=R.charCodeAt(j);J<=127?O.push(J):J<=2047?O.push(192|J>>6,128|63&J):55296==(64512&J)?j<R.length-1&&56320==(64512&R.charCodeAt(j+1))?(J=65536|(1023&J)<<10|1023&R.charCodeAt(++j),O.push(240|J>>18,128|J>>12&63,128|J>>6&63,128|63&J)):O.push(239,191,189):56320==(64512&J)?O.push(239,191,189):O.push(224|J>>12,128|J>>6&63,128|63&J)}return new Uint8Array(O)}function Si(R,O){switch(R){case Yn.BASE64:{const Ie=-1!==O.indexOf("-"),ke=-1!==O.indexOf("_");if(Ie||ke)throw er(R,"Invalid character '"+(Ie?"-":"_")+"' found: is it base64url encoded?");break}case Yn.BASE64URL:{const Ie=-1!==O.indexOf("+"),ke=-1!==O.indexOf("/");if(Ie||ke)throw er(R,"Invalid character '"+(Ie?"+":"/")+"' found: is it base64 encoded?");O=O.replace(/-/g,"+").replace(/_/g,"/");break}}let j;try{j=function Jr(R){return atob(R)}(O)}catch{throw er(R,"Invalid character found")}const J=new Uint8Array(j.length);for(let Ie=0;Ie<j.length;Ie++)J[Ie]=j.charCodeAt(Ie);return J}class Ms{constructor(O){this.base64=!1,this.contentType=null;const j=O.match(/^data:([^,]+)?,/);if(null===j)throw er(Yn.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const J=j[1]||null;null!=J&&(this.base64=function Yi(R,O){return R.length>=O.length&&R.substring(R.length-O.length)===O}(J,";base64"),this.contentType=this.base64?J.substring(0,J.length-7):J),this.rest=O.substring(O.indexOf(",")+1)}}class sr{constructor(O,j){let J=0,Ie="";re(O)?(this.data_=O,J=O.size,Ie=O.type):O instanceof ArrayBuffer?(j?this.data_=new Uint8Array(O):(this.data_=new Uint8Array(O.byteLength),this.data_.set(new Uint8Array(O))),J=this.data_.length):O instanceof Uint8Array&&(j?this.data_=O:(this.data_=new Uint8Array(O.length),this.data_.set(O)),J=O.length),this.size_=J,this.type_=Ie}size(){return this.size_}type(){return this.type_}slice(O,j){if(re(this.data_)){const Ie=function ss(R,O,j){return R.webkitSlice?R.webkitSlice(O,j):R.mozSlice?R.mozSlice(O,j):R.slice?R.slice(O,j):null}(this.data_,O,j);return null===Ie?null:new sr(Ie)}{const J=new Uint8Array(this.data_.buffer,O,j-O);return new sr(J,!0)}}static getBlob(...O){if(Ve()){const j=O.map(J=>J instanceof sr?J.data_:J);return new sr(ks.apply(null,j))}{const j=O.map(Ct=>ue(Ct)?Qn(Yn.RAW,Ct).data:Ct.data_);let J=0;j.forEach(Ct=>{J+=Ct.byteLength});const Ie=new Uint8Array(J);let ke=0;return j.forEach(Ct=>{for(let sn=0;sn<Ct.length;sn++)Ie[ke++]=Ct[sn]}),new sr(Ie,!0)}}uploadData(){return this.data_}}function Vi(R){let O;try{O=JSON.parse(R)}catch{return null}return function _e(R){return"object"==typeof R&&!Array.isArray(R)}(O)?O:null}function Fs(R){const O=R.lastIndexOf("/",R.length-2);return-1===O?R:R.slice(O+1)}function Rs(R,O){return O}class Xr{constructor(O,j,J,Ie){this.server=O,this.local=j||O,this.writable=!!J,this.xform=Ie||Rs}}let wr=null;function Di(){if(wr)return wr;const R=[];R.push(new Xr("bucket")),R.push(new Xr("generation")),R.push(new Xr("metageneration")),R.push(new Xr("name","fullPath",!0));const j=new Xr("name");j.xform=function O(ke,Ct){return function co(R){return!ue(R)||R.length<2?R:Fs(R)}(Ct)},R.push(j);const Ie=new Xr("size");return Ie.xform=function J(ke,Ct){return void 0!==Ct?Number(Ct):Ct},R.push(Ie),R.push(new Xr("timeCreated")),R.push(new Xr("updated")),R.push(new Xr("md5Hash",null,!0)),R.push(new Xr("cacheControl",null,!0)),R.push(new Xr("contentDisposition",null,!0)),R.push(new Xr("contentEncoding",null,!0)),R.push(new Xr("contentLanguage",null,!0)),R.push(new Xr("contentType",null,!0)),R.push(new Xr("metadata","customMetadata",!0)),wr=R,wr}function Os(R,O,j){const J=Vi(O);return null===J?null:function Po(R,O,j){const J={type:"file"},Ie=j.length;for(let ke=0;ke<Ie;ke++){const Ct=j[ke];J[Ct.local]=Ct.xform(J,O[Ct.server])}return function No(R,O){Object.defineProperty(R,"ref",{get:function j(){const ke=new Xt(R.bucket,R.fullPath);return O._makeStorageReference(ke)}})}(J,R),J}(R,J,j)}function xe(R,O){const j={},J=O.length;for(let Ie=0;Ie<J;Ie++){const ke=O[Ie];ke.writable&&(j[ke.server]=R[ke.local])}return JSON.stringify(j)}const Ae="prefixes";class jt{constructor(O,j,J,Ie){this.url=O,this.method=j,this.handler=J,this.timeout=Ie,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function cn(R){if(!R)throw un()}function ei(R,O){return function j(J,Ie){const ke=Os(R,Ie,O);return cn(null!==ke),ke}}function ps(R){return function O(j,J){let Ie;return Ie=401===j.getStatus()?j.getErrorText().includes("Firebase App Check token is invalid")?function Sn(){return new We("unauthorized-app","This app does not have permission to access Firebase Storage on this project.")}():function rr(){return new We("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===j.getStatus()?function At(R){return new We("quota-exceeded","Quota for bucket '"+R+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(R.bucket):403===j.getStatus()?function Mr(R){return new We("unauthorized","User does not have permission to access '"+R+"'.")}(R.path):J,Ie.serverResponse=J.serverResponse,Ie}}function gs(R){const O=ps(R);return function j(J,Ie){let ke=O(J,Ie);return 404===J.getStatus()&&(ke=function jn(R){return new We("object-not-found","Object '"+R+"' does not exist.")}(R.path)),ke.serverResponse=Ie.serverResponse,ke}}function gi(R,O,j){const Ie=Vt(O.fullServerUrl(),R.host,R._protocol),Ct=R.maxOperationRetryTime,sn=new jt(Ie,"GET",ei(R,j),Ct);return sn.errorHandler=gs(O),sn}function Ui(R,O,j,J,Ie){const ke={};ke.prefix=O.isRoot?"":O.path+"/",j&&j.length>0&&(ke.delimiter=j),J&&(ke.pageToken=J),Ie&&(ke.maxResults=Ie);const sn=Vt(O.bucketOnlyServerUrl(),R.host,R._protocol),Nn=R.maxOperationRetryTime,Ln=new jt(sn,"GET",function ar(R,O){return function j(J,Ie){const ke=function Dt(R,O,j){const J=Vi(j);return null===J?null:function ct(R,O,j){const J={prefixes:[],items:[],nextPageToken:j.nextPageToken};if(j[Ae])for(const Ie of j[Ae]){const ke=Ie.replace(/\/$/,""),Ct=R._makeStorageReference(new Xt(O,ke));J.prefixes.push(Ct)}if(j.items)for(const Ie of j.items){const ke=R._makeStorageReference(new Xt(O,Ie.name));J.items.push(ke)}return J}(R,O,J)}(R,O,Ie);return cn(null!==ke),ke}}(R,O.bucket),Nn);return Ln.urlParams=ke,Ln.errorHandler=ps(O),Ln}function xi(R,O,j){const J=Object.assign({},j);return J.fullPath=R.path,J.size=O.size(),J.contentType||(J.contentType=function os(R,O){return R&&R.contentType||O&&O.type()||"application/octet-stream"}(null,O)),J}class ys{constructor(O,j,J,Ie){this.current=O,this.total=j,this.finalized=!!J,this.metadata=Ie||null}}function Ji(R,O){let j=null;try{j=R.getResponseHeader("X-Goog-Upload-Status")}catch{cn(!1)}return cn(!!j&&-1!==(O||["active"]).indexOf(j)),j}const di={STATE_CHANGED:"state_changed"},_r={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function Ci(R){switch(R){case"running":case"pausing":case"canceling":return _r.RUNNING;case"paused":return _r.PAUSED;case"success":return _r.SUCCESS;case"canceled":return _r.CANCELED;default:return _r.ERROR}}class po{constructor(O,j,J){if(function Dr(R){return"function"==typeof R}(O)||null!=j||null!=J)this.next=O,this.error=j??void 0,this.complete=J??void 0;else{const ke=O;this.next=ke.next,this.error=ke.error,this.complete=ke.complete}}}function br(R){return(...O)=>{Promise.resolve().then(()=>R(...O))}}class Lr extends class la{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=dn.NO_ERROR,this.sendPromise_=new Promise(O=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=dn.ABORT,O()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=dn.NETWORK_ERROR,O()}),this.xhr_.addEventListener("load",()=>{O()})})}send(O,j,J,Ie){if(this.sent_)throw _n("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(j,O,!0),void 0!==Ie)for(const ke in Ie)Ie.hasOwnProperty(ke)&&this.xhr_.setRequestHeader(ke,Ie[ke].toString());return void 0!==J?this.xhr_.send(J):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw _n("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw _n("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw _n("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw _n("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(O){return this.xhr_.getResponseHeader(O)}addUploadProgressListener(O){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",O)}removeUploadProgressListener(O){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",O)}}{initXhr(){this.xhr_.responseType="text"}}function Gr(){return new Lr}class Pi{constructor(O,j,J=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=O,this._blob=j,this._metadata=J,this._mappings=Di(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=Ie=>{this._request=void 0,this._chunkMultiplier=1,Ie._codeEquals("canceled")?(this._needToFetchStatus=!0,this.completeTransitions_()):(this._error=Ie,this._transition("error"))},this._metadataErrorHandler=Ie=>{this._request=void 0,Ie._codeEquals("canceled")?this.completeTransitions_():(this._error=Ie,this._transition("error"))},this._promise=new Promise((Ie,ke)=>{this._resolve=Ie,this._reject=ke,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const O=this._transferred;return j=>this._updateProgress(O+j)}_shouldDoResumable(O){return O.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())}_resolveToken(O){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([j,J])=>{switch(this._state){case"running":O(j,J);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((O,j)=>{const J=function fo(R,O,j,J,Ie){const ke=O.bucketOnlyServerUrl(),Ct=xi(O,J,Ie),sn={name:Ct.fullPath},Zt=Vt(ke,R.host,R._protocol),Ln={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${J.size()}`,"X-Goog-Upload-Header-Content-Type":Ct.contentType,"Content-Type":"application/json; charset=utf-8"},qr=xe(Ct,j),oi=new jt(Zt,"POST",function fi(es){let fr;Ji(es);try{fr=es.getResponseHeader("X-Goog-Upload-URL")}catch{cn(!1)}return cn(ue(fr)),fr},R.maxUploadRetryTime);return oi.urlParams=sn,oi.headers=Ln,oi.body=qr,oi.errorHandler=ps(O),oi}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),Ie=this._ref.storage._makeRequest(J,Gr,O,j);this._request=Ie,Ie.getPromise().then(ke=>{this._request=void 0,this._uploadUrl=ke,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const O=this._uploadUrl;this._resolveToken((j,J)=>{const Ie=function ko(R,O,j,J){const Zt=new jt(j,"POST",function ke(Nn){const Ln=Ji(Nn,["active","final"]);let qr=null;try{qr=Nn.getResponseHeader("X-Goog-Upload-Size-Received")}catch{cn(!1)}qr||cn(!1);const Tr=Number(qr);return cn(!isNaN(Tr)),new ys(Tr,J.size(),"final"===Ln)},R.maxUploadRetryTime);return Zt.headers={"X-Goog-Upload-Command":"query"},Zt.errorHandler=ps(O),Zt}(this._ref.storage,this._ref._location,O,this._blob),ke=this._ref.storage._makeRequest(Ie,Gr,j,J);this._request=ke,ke.getPromise().then(Ct=>{this._request=void 0,this._updateProgress(Ct.current),this._needToFetchStatus=!1,Ct.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const O=262144*this._chunkMultiplier,j=new ys(this._transferred,this._blob.size()),J=this._uploadUrl;this._resolveToken((Ie,ke)=>{let Ct;try{Ct=function _s(R,O,j,J,Ie,ke,Ct,sn){const Zt=new ys(0,0);if(Ct?(Zt.current=Ct.current,Zt.total=Ct.total):(Zt.current=0,Zt.total=J.size()),J.size()!==Zt.total)throw function ut(){return new We("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.")}();const Nn=Zt.total-Zt.current;let Ln=Nn;Ie>0&&(Ln=Math.min(Ln,Ie));const qr=Zt.current,oi={"X-Goog-Upload-Command":Ln===Nn?"upload, finalize":"upload","X-Goog-Upload-Offset":`${Zt.current}`},es=J.slice(qr,qr+Ln);if(null===es)throw me();const ti=new jt(j,"POST",function fr(Zr,vo){const Xo=Ji(Zr,["active","final"]),$o=Zt.current+Ln,bo=J.size();let ai;return ai="final"===Xo?ei(O,ke)(Zr,vo):null,new ys($o,bo,"final"===Xo,ai)},O.maxUploadRetryTime);return ti.headers=oi,ti.body=es.uploadData(),ti.progressCallback=sn||null,ti.errorHandler=ps(R),ti}(this._ref._location,this._ref.storage,J,this._blob,O,this._mappings,j,this._makeProgressCallback())}catch(Zt){return this._error=Zt,void this._transition("error")}const sn=this._ref.storage._makeRequest(Ct,Gr,Ie,ke);this._request=sn,sn.getPromise().then(Zt=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(Zt.current),Zt.finalized?(this._metadata=Zt.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((O,j)=>{const J=gi(this._ref.storage,this._ref._location,this._mappings),Ie=this._ref.storage._makeRequest(J,Gr,O,j);this._request=Ie,Ie.getPromise().then(ke=>{this._request=void 0,this._metadata=ke,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((O,j)=>{const J=function Qi(R,O,j,J,Ie){const ke=O.bucketOnlyServerUrl(),Ct={"X-Goog-Upload-Protocol":"multipart"},Zt=function sn(){let ti="";for(let Zr=0;Zr<2;Zr++)ti+=Math.random().toString().slice(2);return ti}();Ct["Content-Type"]="multipart/related; boundary="+Zt;const Nn=xi(O,J,Ie),Ln=xe(Nn,j),fi=sr.getBlob("--"+Zt+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+Ln+"\r\n--"+Zt+"\r\nContent-Type: "+Nn.contentType+"\r\n\r\n",J,"\r\n--"+Zt+"--");if(null===fi)throw me();const oi={name:Nn.fullPath},es=Vt(ke,R.host,R._protocol),Ur=R.maxUploadRetryTime,js=new jt(es,"POST",ei(R,j),Ur);return js.urlParams=oi,js.headers=Ct,js.body=fi.uploadData(),js.errorHandler=ps(O),js}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),Ie=this._ref.storage._makeRequest(J,Gr,O,j);this._request=Ie,Ie.getPromise().then(ke=>{this._request=void 0,this._metadata=ke,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(O){const j=this._transferred;this._transferred=O,this._transferred!==j&&this._notifyObservers()}_transition(O){if(this._state!==O)switch(O){case"canceling":case"pausing":this._state=O,void 0!==this._request&&this._request.cancel();break;case"running":const j="paused"===this._state;this._state=O,j&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=O,this._notifyObservers();break;case"canceled":this._error=ge(),this._state=O,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const O=Ci(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:O,metadata:this._metadata,task:this,ref:this._ref}}on(O,j,J,Ie){const ke=new po(j||void 0,J||void 0,Ie||void 0);return this._addObserver(ke),()=>{this._removeObserver(ke)}}then(O,j){return this._promise.then(O,j)}catch(O){return this.then(null,O)}_addObserver(O){this._observers.push(O),this._notifyObserver(O)}_removeObserver(O){const j=this._observers.indexOf(O);-1!==j&&this._observers.splice(j,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(j=>{this._notifyObserver(j)})}_finishPromise(){if(void 0!==this._resolve){let O=!0;switch(Ci(this._state)){case _r.SUCCESS:br(this._resolve.bind(null,this.snapshot))();break;case _r.CANCELED:case _r.ERROR:br(this._reject.bind(null,this._error))();break;default:O=!1}O&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(O){switch(Ci(this._state)){case _r.RUNNING:case _r.PAUSED:O.next&&br(O.next.bind(O,this.snapshot))();break;case _r.SUCCESS:O.complete&&br(O.complete.bind(O))();break;default:O.error&&br(O.error.bind(O,this._error))()}}resume(){const O="paused"===this._state||"pausing"===this._state;return O&&this._transition("running"),O}pause(){const O="running"===this._state;return O&&this._transition("pausing"),O}cancel(){const O="running"===this._state||"pausing"===this._state;return O&&this._transition("canceling"),O}}class Rr{constructor(O,j){this._service=O,this._location=j instanceof Xt?j:Xt.makeFromUrl(j,O.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(O,j){return new Rr(O,j)}get root(){const O=new Xt(this._location.bucket,"");return this._newRef(this._service,O)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Fs(this._location.path)}get storage(){return this._service}get parent(){const O=function Cr(R){if(0===R.length)return null;const O=R.lastIndexOf("/");return-1===O?"":R.slice(0,O)}(this._location.path);if(null===O)return null;const j=new Xt(this._location.bucket,O);return new Rr(this._service,j)}_throwIfRoot(O){if(""===this._location.path)throw Tn(O)}}function zr(R,O,j){return gn.apply(this,arguments)}function gn(){return(gn=(0,Hn.Z)(function*(R,O,j){const Ie=yield Vs(R,{pageToken:j});O.prefixes.push(...Ie.prefixes),O.items.push(...Ie.items),null!=Ie.nextPageToken&&(yield zr(R,O,Ie.nextPageToken))})).apply(this,arguments)}function Vs(R,O){null!=O&&"number"==typeof O.maxResults&&at("options.maxResults",1,1e3,O.maxResults);const j=O||{},J=Ui(R.storage,R._location,"/",j.pageToken,j.maxResults);return R.storage.makeRequestWithTokens(J,Gr)}function zs(R){R._throwIfRoot("getDownloadURL");const O=function ms(R,O,j){const Ie=Vt(O.fullServerUrl(),R.host,R._protocol),Ct=R.maxOperationRetryTime,sn=new jt(Ie,"GET",function Oi(R,O){return function j(J,Ie){const ke=Os(R,Ie,O);return cn(null!==ke),function ri(R,O,j,J){const Ie=Vi(O);if(null===Ie||!ue(Ie.downloadTokens))return null;const ke=Ie.downloadTokens;if(0===ke.length)return null;const Ct=encodeURIComponent;return ke.split(",").map(Nn=>{const qr=R.fullPath;return Vt("/b/"+Ct(R.bucket)+"/o/"+Ct(qr),j,J)+mn({alt:"media",token:Nn})})[0]}(ke,Ie,R.host,R._protocol)}}(R,j),Ct);return sn.errorHandler=gs(O),sn}(R.storage,R._location,Di());return R.storage.makeRequestWithTokens(O,Gr).then(j=>{if(null===j)throw function yt(){return new We("no-download-url","The given file does not have any download URLs.")}();return j})}function us(R,O){const j=function ci(R,O){const j=O.split("/").filter(J=>J.length>0).join("/");return 0===R.length?j:R+"/"+j}(R._location.path,O),J=new Xt(R._location.bucket,j);return new Rr(R.storage,J)}function ht(R,O){if(R instanceof Or){const j=R;if(null==j._bucket)throw function Ee(){return new We("no-default-bucket","No default bucket found. Did you set the '"+ye+"' property when initializing the app?")}();const J=new Rr(j,j._bucket);return null!=O?ht(J,O):J}return void 0!==O?us(R,O):R}function Rn(R,O){if(O&&function mo(R){return/^[A-Za-z]+:\/\//.test(R)}(O)){if(R instanceof Or)return function Uo(R,O){return new Rr(R,O)}(R,O);throw Rt("To use ref(service, url), the first argument must be a Storage instance.")}return ht(R,O)}function Us(R,O){const j=O?.[ye];return null==j?null:Xt.makeFromBucketSpec(j,R)}class Or{constructor(O,j,J,Ie,ke){this.app=O,this._authProvider=j,this._appCheckProvider=J,this._url=Ie,this._firebaseVersion=ke,this._bucket=null,this._host=$e,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=Ie?Xt.makeFromBucketSpec(Ie,this._host):Us(this._host,this.app.options)}get host(){return this._host}set host(O){this._host=O,this._bucket=null!=this._url?Xt.makeFromBucketSpec(this._url,O):Us(O,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(O){at("time",0,Number.POSITIVE_INFINITY,O),this._maxUploadRetryTime=O}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(O){at("time",0,Number.POSITIVE_INFINITY,O),this._maxOperationRetryTime=O}_getAuthToken(){var O=this;return(0,Hn.Z)(function*(){if(O._overrideAuthToken)return O._overrideAuthToken;const j=O._authProvider.getImmediate({optional:!0});if(j){const J=yield j.getToken();if(null!==J)return J.accessToken}return null})()}_getAppCheckToken(){var O=this;return(0,Hn.Z)(function*(){const j=O._appCheckProvider.getImmediate({optional:!0});return j?(yield j.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(O=>O.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(O){return new Rr(this,O)}_makeRequest(O,j,J,Ie){if(this._deleted)return new cr(ir());{const ke=function Fi(R,O,j,J,Ie,ke){const Ct=mn(R.urlParams),sn=R.url+Ct,Zt=Object.assign({},R.headers);return function Kn(R,O){O&&(R["X-Firebase-GMPID"]=O)}(Zt,O),function yn(R,O){null!==O&&O.length>0&&(R.Authorization="Firebase "+O)}(Zt,j),function An(R,O){R["X-Firebase-Storage-Version"]="webjs/"+(O??"AppManager")}(Zt,ke),function hs(R,O){null!==O&&(R["X-Firebase-AppCheck"]=O)}(Zt,J),new yr(sn,R.method,Zt,R.body,R.successCodes,R.additionalRetryCodes,R.handler,R.errorHandler,R.timeout,R.progressCallback,Ie)}(O,this._appId,J,Ie,j,this._firebaseVersion);return this._requests.add(ke),ke.getPromise().then(()=>this._requests.delete(ke),()=>this._requests.delete(ke)),ke}}makeRequestWithTokens(O,j){var J=this;return(0,Hn.Z)(function*(){const[Ie,ke]=yield Promise.all([J._getAuthToken(),J._getAppCheckToken()]);return J._makeRequest(O,j,Ie,ke).getPromise()})()}}const $i="@firebase/storage";function dr(R,O){return Rn(R=(0,Ir.m9)(R),O)}function _o(R,{instanceIdentifier:O}){const j=R.getProvider("app").getImmediate(),J=R.getProvider("auth-internal"),Ie=R.getProvider("app-check-internal");return new Or(j,J,Ie,O,kr.SDK_VERSION)}!function Co(){(0,kr._registerComponent)(new xr.wA("storage",_o,"PUBLIC").setMultipleInstances(!0)),(0,kr.registerVersion)($i,"0.9.9",""),(0,kr.registerVersion)($i,"0.9.9","esm2017")}();class Ps{constructor(O,j,J){this._delegate=O,this.task=j,this.ref=J}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class ca{constructor(O,j){this._delegate=O,this._ref=j,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new Ps(this._delegate.snapshot,this,this._ref)}then(O,j){return this._delegate.then(J=>{if(O)return O(new Ps(J,this,this._ref))},j)}on(O,j,J,Ie){let ke;return j&&(ke="function"==typeof j?Ct=>j(new Ps(Ct,this,this._ref)):{next:j.next?Ct=>j.next(new Ps(Ct,this,this._ref)):void 0,complete:j.complete||void 0,error:j.error||void 0}),this._delegate.on(O,ke,J||void 0,Ie||void 0)}}class Wr{constructor(O,j){this._delegate=O,this._service=j}get prefixes(){return this._delegate.prefixes.map(O=>new ws(O,this._service))}get items(){return this._delegate.items.map(O=>new ws(O,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class ws{constructor(O,j){this._delegate=O,this.storage=j}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(O){const j=function cs(R,O){return us(R,O)}(this._delegate,O);return new ws(j,this.storage)}get root(){return new ws(this._delegate.root,this.storage)}get parent(){const O=this._delegate.parent;return null==O?null:new ws(O,this.storage)}put(O,j){return this._throwIfRoot("put"),new ca(function Qo(R,O,j){return function Lo(R,O,j){return R._throwIfRoot("uploadBytesResumable"),new Pi(R,new sr(O),j)}(R=(0,Ir.m9)(R),O,j)}(this._delegate,O,j),this)}putString(O,j=Yn.RAW,J){this._throwIfRoot("putString");const Ie=Qn(j,O),ke=Object.assign({},J);return null==ke.contentType&&null!=Ie.contentType&&(ke.contentType=Ie.contentType),new ca(new Pi(this._delegate,new sr(Ie.data,!0),ke),this)}listAll(){return function K(R){return function eo(R){const O={prefixes:[],items:[]};return zr(R,O).then(()=>O)}(R=(0,Ir.m9)(R))}(this._delegate).then(O=>new Wr(O,this.storage))}list(O){return function A(R,O){return Vs(R=(0,Ir.m9)(R),O)}(this._delegate,O||void 0).then(j=>new Wr(j,this.storage))}getMetadata(){return function F(R){return function go(R){R._throwIfRoot("getMetadata");const O=gi(R.storage,R._location,Di());return R.storage.makeRequestWithTokens(O,Gr)}(R=(0,Ir.m9)(R))}(this._delegate)}updateMetadata(O){return function N(R,O){return function Vo(R,O){R._throwIfRoot("updateMetadata");const j=function ho(R,O,j,J){const ke=Vt(O.fullServerUrl(),R.host,R._protocol),sn=xe(j,J),Nn=R.maxOperationRetryTime,Ln=new jt(ke,"PATCH",ei(R,J),Nn);return Ln.headers={"Content-Type":"application/json; charset=utf-8"},Ln.body=sn,Ln.errorHandler=gs(O),Ln}(R.storage,R._location,O,Di());return R.storage.makeRequestWithTokens(j,Gr)}(R=(0,Ir.m9)(R),O)}(this._delegate,O)}getDownloadURL(){return function et(R){return zs(R=(0,Ir.m9)(R))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function nn(R){return function ji(R){R._throwIfRoot("deleteObject");const O=function Ni(R,O){const J=Vt(O.fullServerUrl(),R.host,R._protocol),sn=new jt(J,"DELETE",function Ct(Zt,Nn){},R.maxOperationRetryTime);return sn.successCodes=[200,204],sn.errorHandler=gs(O),sn}(R.storage,R._location);return R.storage.makeRequestWithTokens(O,Gr)}(R=(0,Ir.m9)(R))}(this._delegate)}_throwIfRoot(O){if(""===this._delegate._location.path)throw Tn(O)}}class da{constructor(O,j){this.app=O,this._delegate=j}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(O){if(Jo(O))throw Rt("ref() expected a child path but got a URL, use refFromURL instead.");return new ws(dr(this._delegate,O),this)}refFromURL(O){if(!Jo(O))throw Rt("refFromURL() expected a full URL but got a child path, use ref() instead.");try{Xt.makeFromUrl(O,this._delegate.host)}catch{throw Rt("refFromUrl() expected a valid full URL but got an invalid one.")}return new ws(dr(this._delegate,O),this)}setMaxUploadRetryTime(O){this._delegate.maxUploadRetryTime=O}setMaxOperationRetryTime(O){this._delegate.maxOperationRetryTime=O}useEmulator(O,j,J={}){!function Hi(R,O,j,J={}){!function Bo(R,O,j,J={}){R.host=`${O}:${j}`,R._protocol="http";const{mockUserToken:Ie}=J;Ie&&(R._overrideAuthToken="string"==typeof Ie?Ie:(0,Ir.Sg)(Ie,R.app.options.projectId))}(R,O,j,J)}(this._delegate,O,j,J)}}function Jo(R){return/^[A-Za-z]+:\/\//.test(R)}function M(R,{instanceIdentifier:O}){const j=R.getProvider("app-compat").getImmediate(),J=R.getProvider("storage").getImmediate({identifier:O});return new da(j,J)}!function q(R){const O={TaskState:_r,TaskEvent:di,StringFormat:Yn,Storage:da,Reference:ws};R.INTERNAL.registerComponent(new xr.wA("storage-compat",M,"PUBLIC").setServiceProps(O).setMultipleInstances(!0)),R.registerVersion("@firebase/storage-compat","0.1.17")}(Cn.Z);var fe=U(440),ze=U(127);function Yt(R){const O=function rt(R){return new Er.y(O=>{const j=Ct=>O.next(Ct);j(R.snapshot);const ke=R.on("state_changed",j);return R.then(Ct=>{j(Ct),O.complete()},Ct=>{j(R.snapshot),(Ct=>{O.error(Ct)})(Ct)}),function(){ke()}}).pipe(function $n(R,O=Ar.z){return(0,Jt.e)((j,J)=>{let Ie=null,ke=null,Ct=null;const sn=()=>{if(Ie){Ie.unsubscribe(),Ie=null;const Nn=ke;ke=null,J.next(Nn)}};function Zt(){const Nn=Ct+R,Ln=O.now();if(Ln<Nn)return Ie=this.schedule(void 0,Nn-Ln),void J.add(Ie);sn()}j.subscribe((0,nr.x)(J,Nn=>{ke=Nn,Ct=O.now(),Ie||(Ie=O.schedule(Zt,R),J.add(Ie))},()=>{sn(),J.complete()},void 0,()=>{ke=Ie=null}))})}(0))}(R);return{task:R,then:R.then.bind(R),catch:R.catch.bind(R),pause:R.pause.bind(R),cancel:R.cancel.bind(R),resume:R.resume.bind(R),snapshotChanges:()=>O,percentageChanges:()=>O.pipe((0,lr.U)(j=>j.bytesTransferred/j.totalBytes*100))}}function Zn(R){return{getDownloadURL:()=>(0,mr.of)(void 0).pipe(Bn.fc,(0,pt.w)(()=>R.getDownloadURL()),Bn.iC),getMetadata:()=>(0,mr.of)(void 0).pipe(Bn.fc,(0,pt.w)(()=>R.getMetadata()),Bn.iC),delete:()=>(0,ur.D)(R.delete()),child:O=>Zn(R.child(O)),updateMetadata:O=>(0,ur.D)(R.updateMetadata(O)),put:(O,j)=>Yt(R.put(O,j)),putString:(O,j,J)=>Yt(R.putString(O,j,J)),list:O=>(0,ur.D)(R.list(O)),listAll:()=>(0,ur.D)(R.listAll())}}const hr=new C.OlP("angularfire2.storageBucket"),tr=new C.OlP("angularfire2.storage.maxUploadRetryTime"),Gn=new C.OlP("angularfire2.storage.maxOperationRetryTime"),si=new C.OlP("angularfire2.storage.use-emulator");let pr=(()=>{class R{constructor(j,J,Ie,ke,Ct,sn,Zt,Nn,Ln,qr){const Tr=(0,an.on)(j,Ct,J);this.storage=(0,an.cc)(`${Tr.name}.storage.${Ie}`,"AngularFireStorage",Tr.name,()=>{const fi=Ct.runOutsideAngular(()=>Tr.storage(Ie||void 0)),oi=Ln;return oi&&fi.useEmulator(...oi),Zt&&fi.setMaxUploadRetryTime(Zt),Nn&&fi.setMaxOperationRetryTime(Nn),fi},[Zt,Nn])}ref(j){return Zn(this.storage.ref(j))}refFromURL(j){return Zn(this.storage.refFromURL(j))}upload(j,J,Ie){return Zn(this.storage.ref(j)).put(J,Ie)}}return R.\u0275fac=function(j){return new(j||R)(C.LFG(an.Dh),C.LFG(an.xv,8),C.LFG(hr,8),C.LFG(C.Lbi),C.LFG(C.R0b),C.LFG(Bn.HU),C.LFG(tr,8),C.LFG(Gn,8),C.LFG(si,8),C.LFG(fe.nm,8))},R.\u0275prov=C.Yz7({token:R,factory:R.\u0275fac,providedIn:"any"}),R})(),Bs=(()=>{class R{}return R.\u0275fac=function(j){return new(j||R)},R.\u0275mod=C.oAB({type:R}),R.\u0275inj=C.cJS({}),R})(),Es=(()=>{class R{constructor(){ze.Z.registerVersion("angularfire",Bn.q4.full,"gcs-compat")}}return R.\u0275fac=function(j){return new(j||R)},R.\u0275mod=C.oAB({type:R}),R.\u0275inj=C.cJS({providers:[pr],imports:[Bs]}),R})(),qs=(()=>{class R{}return R.\u0275fac=function(j){return new(j||R)},R.\u0275mod=C.oAB({type:R,bootstrap:[Mn]}),R.\u0275inj=C.cJS({imports:[p.b2,Mt,G.u5,be.JF,an.hO.initializeApp(Fn_firebaseConfig),Ei.ww,Fe.yb,Es]}),R})();(0,C.G48)(),p.q6().bootstrapModule(qs).catch(R=>console.error(R))},5867:(Gt,qe,U)=>{U.d(qe,{C6:()=>p.getApps,Mq:()=>p.getApp});var p=U(9681);(0,p.registerVersion)("firebase","9.9.4","app")},127:(Gt,qe,U)=>{U.d(qe,{Z:()=>p.Z});var p=U(3942);p.Z.registerVersion("firebase","9.9.4","app-compat")},2274:(Gt,qe,U)=>{U.r(qe);var p=U(5861),C=U(3942),G=U(2090),be=U(9681),we=U(655),Me=U(1877),Re=U(4859);const Ke=function mt(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},Nt=function ot(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},Ye=new G.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Ut=new Me.Yd("@firebase/auth");function Bt(m,...c){Ut.logLevel<=Me.in.ERROR&&Ut.error(`Auth (${be.SDK_VERSION}): ${m}`,...c)}function he(m,...c){throw nt(m,...c)}function it(m,...c){return nt(m,...c)}function Xe(m,c,f){const E=Object.assign(Object.assign({},Nt()),{[c]:f});return new G.LL("auth","Firebase",E).create(c,{appName:m.name})}function _t(m,c,f){if(!(c instanceof f))throw f.name!==c.constructor.name&&he(m,"argument-error"),Xe(m,"argument-error",`Type of ${c.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function nt(m,...c){if("string"!=typeof m){const f=c[0],E=[...c.slice(1)];return E[0]&&(E[0].appName=m.name),m._errorFactory.create(f,...E)}return Ye.create(m,...c)}function ae(m,c,...f){if(!m)throw nt(c,...f)}function Le(m){const c="INTERNAL ASSERTION FAILED: "+m;throw Bt(c),new Error(c)}function ne(m,c){m||Le(c)}const De=new Map;function de(m){ne(m instanceof Function,"Expected a class definition");let c=De.get(m);return c?(ne(c instanceof m,"Instance stored in cache mismatched with class"),c):(c=new m,De.set(m,c),c)}function wt(){var m;return typeof self<"u"&&(null===(m=self.location)||void 0===m?void 0:m.href)||""}function bt(){return"http:"===Mt()||"https:"===Mt()}function Mt(){var m;return typeof self<"u"&&(null===(m=self.location)||void 0===m?void 0:m.protocol)||null}class tn{constructor(c,f){this.shortDelay=c,this.longDelay=f,ne(f>c,"Short delay should be less than long delay!"),this.isMobile=(0,G.uI)()||(0,G.b$)()}get(){return function $t(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(bt()||(0,G.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function qt(m,c){ne(m.emulator,"Emulator should always be set here");const{url:f}=m.emulator;return c?`${f}${c.startsWith("/")?c.slice(1):c}`:f}class on{static initialize(c,f,E){this.fetchImpl=c,f&&(this.headersImpl=f),E&&(this.responseImpl=E)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void Le("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void Le("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void Le("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Ft={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},Mn=new tn(3e4,6e4);function an(m,c){return m.tenantId&&!c.tenantId?Object.assign(Object.assign({},c),{tenantId:m.tenantId}):c}function Fn(m,c,f,E){return Ei.apply(this,arguments)}function Ei(){return(Ei=(0,p.Z)(function*(m,c,f,E,B={}){return Er(m,B,(0,p.Z)(function*(){let Y={},Te={};E&&("GET"===c?Te=E:Y={body:JSON.stringify(E)});const st=(0,G.xO)(Object.assign({key:m.config.apiKey},Te)).slice(1),kt=yield m._getAdditionalHeaders();return kt["Content-Type"]="application/json",m.languageCode&&(kt["X-Firebase-Locale"]=m.languageCode),on.fetch()(Jt(m,m.config.apiHost,f,st),Object.assign({method:c,headers:kt,referrerPolicy:"no-referrer"},Y))}))})).apply(this,arguments)}function Er(m,c,f){return mr.apply(this,arguments)}function mr(){return(mr=(0,p.Z)(function*(m,c,f){m._canInitEmulator=!1;const E=Object.assign(Object.assign({},Ft),c);try{const B=new nr(m),Y=yield Promise.race([f(),B.promise]);B.clearNetworkTimeout();const Te=yield Y.json();if("needConfirmation"in Te)throw $n(m,"account-exists-with-different-credential",Te);if(Y.ok&&!("errorMessage"in Te))return Te;{const st=Y.ok?Te.errorMessage:Te.error.message,[kt,ln]=st.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===kt)throw $n(m,"credential-already-in-use",Te);if("EMAIL_EXISTS"===kt)throw $n(m,"email-already-in-use",Te);if("USER_DISABLED"===kt)throw $n(m,"user-disabled",Te);const kn=E[kt]||kt.toLowerCase().replace(/[_\s]+/g,"-");if(ln)throw Xe(m,kn,ln);he(m,kn)}}catch(B){if(B instanceof G.ZR)throw B;he(m,"network-request-failed")}})).apply(this,arguments)}function ur(m,c,f,E){return Ar.apply(this,arguments)}function Ar(){return(Ar=(0,p.Z)(function*(m,c,f,E,B={}){const Y=yield Fn(m,c,f,E,B);return"mfaPendingCredential"in Y&&he(m,"multi-factor-auth-required",{_serverResponse:Y}),Y})).apply(this,arguments)}function Jt(m,c,f,E){const B=`${c}${f}?${E}`;return m.config.emulator?qt(m.config,B):`${m.config.apiScheme}://${B}`}class nr{constructor(c){this.auth=c,this.timer=null,this.promise=new Promise((f,E)=>{this.timer=setTimeout(()=>E(it(this.auth,"network-request-failed")),Mn.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function $n(m,c,f){const E={appName:m.name};f.email&&(E.email=f.email),f.phoneNumber&&(E.phoneNumber=f.phoneNumber);const B=it(m,c,E);return B.customData._tokenResponse=f,B}function pt(){return(pt=(0,p.Z)(function*(m,c){return Fn(m,"POST","/v1/accounts:delete",c)})).apply(this,arguments)}function Bn(m,c){return Cn.apply(this,arguments)}function Cn(){return(Cn=(0,p.Z)(function*(m,c){return Fn(m,"POST","/v1/accounts:update",c)})).apply(this,arguments)}function Hn(m,c){return kr.apply(this,arguments)}function kr(){return(kr=(0,p.Z)(function*(m,c){return Fn(m,"POST","/v1/accounts:lookup",c)})).apply(this,arguments)}function Ir(m){if(m)try{const c=new Date(Number(m));if(!isNaN(c.getTime()))return c.toUTCString()}catch{}}function ye(){return(ye=(0,p.Z)(function*(m,c=!1){const f=(0,G.m9)(m),E=yield f.getIdToken(c),B=Be(E);ae(B&&B.exp&&B.auth_time&&B.iat,f.auth,"internal-error");const Y="object"==typeof B.firebase?B.firebase:void 0,Te=Y?.sign_in_provider;return{claims:B,token:E,authTime:Ir(se(B.auth_time)),issuedAtTime:Ir(se(B.iat)),expirationTime:Ir(se(B.exp)),signInProvider:Te||null,signInSecondFactor:Y?.sign_in_second_factor||null}})).apply(this,arguments)}function se(m){return 1e3*Number(m)}function Be(m){var c;const[f,E,B]=m.split(".");if(void 0===f||void 0===E||void 0===B)return Bt("JWT malformed, contained fewer than 3 sections"),null;try{const Y=(0,G.tV)(E);return Y?JSON.parse(Y):(Bt("Failed to decode base64 JWT payload"),null)}catch(Y){return Bt("Caught error parsing JWT payload as JSON",null===(c=Y)||void 0===c?void 0:c.toString()),null}}function Lt(m,c){return un.apply(this,arguments)}function un(){return(un=(0,p.Z)(function*(m,c,f=!1){if(f)return c;try{return yield c}catch(E){throw E instanceof G.ZR&&jn(E)&&m.auth.currentUser===m&&(yield m.auth.signOut()),E}})).apply(this,arguments)}function jn({code:m}){return"auth/user-disabled"===m||"auth/user-token-expired"===m}class At{constructor(c){this.user=c,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(c){var f;if(c){const E=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),E}{this.errorBackoff=3e4;const B=(null!==(f=this.user.stsTokenManager.expirationTime)&&void 0!==f?f:0)-Date.now()-3e5;return Math.max(0,B)}}schedule(c=!1){var f=this;if(!this.isRunning)return;const E=this.getInterval(c);this.timerId=setTimeout((0,p.Z)(function*(){yield f.iteration()}),E)}iteration(){var c=this;return(0,p.Z)(function*(){var f;try{yield c.user.getIdToken(!0)}catch(E){return void("auth/network-request-failed"===(null===(f=E)||void 0===f?void 0:f.code)&&c.schedule(!0))}c.schedule()})()}}class rr{constructor(c,f){this.createdAt=c,this.lastLoginAt=f,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ir(this.lastLoginAt),this.creationTime=Ir(this.createdAt)}_copy(c){this.createdAt=c.createdAt,this.lastLoginAt=c.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Sn(m){return Mr.apply(this,arguments)}function Mr(){return(Mr=(0,p.Z)(function*(m){var c;const f=m.auth,E=yield m.getIdToken(),B=yield Lt(m,Hn(f,{idToken:E}));ae(B?.users.length,f,"internal-error");const Y=B.users[0];m._notifyReloadListener(Y);const Te=null!==(c=Y.providerUserInfo)&&void 0!==c&&c.length?oe(Y.providerUserInfo):[],st=X(m.providerData,Te),kn=!!m.isAnonymous&&!(m.email&&Y.passwordHash||st?.length),xn={uid:Y.localId,displayName:Y.displayName||null,photoURL:Y.photoUrl||null,email:Y.email||null,emailVerified:Y.emailVerified||!1,phoneNumber:Y.phoneNumber||null,tenantId:Y.tenantId||null,providerData:st,metadata:new rr(Y.createdAt,Y.lastLoginAt),isAnonymous:kn};Object.assign(m,xn)})).apply(this,arguments)}function ge(){return(ge=(0,p.Z)(function*(m){const c=(0,G.m9)(m);yield Sn(c),yield c.auth._persistUserIfCurrent(c),c.auth._notifyListenersIfCurrent(c)})).apply(this,arguments)}function X(m,c){return[...m.filter(E=>!c.some(B=>B.providerId===E.providerId)),...c]}function oe(m){return m.map(c=>{var{providerId:f}=c,E=(0,we._T)(c,["providerId"]);return{providerId:f,uid:E.rawId||"",displayName:E.displayName||null,email:E.email||null,phoneNumber:E.phoneNumber||null,photoURL:E.photoUrl||null}})}function me(){return(me=(0,p.Z)(function*(m,c){const f=yield Er(m,{},(0,p.Z)(function*(){const E=(0,G.xO)({grant_type:"refresh_token",refresh_token:c}).slice(1),{tokenApiHost:B,apiKey:Y}=m.config,Te=Jt(m,B,"/v1/token",`key=${Y}`),st=yield m._getAdditionalHeaders();return st["Content-Type"]="application/x-www-form-urlencoded",on.fetch()(Te,{method:"POST",headers:st,body:E})}));return{accessToken:f.access_token,expiresIn:f.expires_in,refreshToken:f.refresh_token}})).apply(this,arguments)}class ut{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(c){ae(c.idToken,"internal-error"),ae(typeof c.idToken<"u","internal-error"),ae(typeof c.refreshToken<"u","internal-error");const f="expiresIn"in c&&typeof c.expiresIn<"u"?Number(c.expiresIn):function We(m){const c=Be(m);return ae(c,"internal-error"),ae(typeof c.exp<"u","internal-error"),ae(typeof c.iat<"u","internal-error"),Number(c.exp)-Number(c.iat)}(c.idToken);this.updateTokensAndExpiration(c.idToken,c.refreshToken,f)}getToken(c,f=!1){var E=this;return(0,p.Z)(function*(){return ae(!E.accessToken||E.refreshToken,c,"user-token-expired"),f||!E.accessToken||E.isExpired?E.refreshToken?(yield E.refresh(c,E.refreshToken),E.accessToken):null:E.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(c,f){var E=this;return(0,p.Z)(function*(){const{accessToken:B,refreshToken:Y,expiresIn:Te}=yield function Ee(m,c){return me.apply(this,arguments)}(c,f);E.updateTokensAndExpiration(B,Y,Number(Te))})()}updateTokensAndExpiration(c,f,E){this.refreshToken=f||null,this.accessToken=c||null,this.expirationTime=Date.now()+1e3*E}static fromJSON(c,f){const{refreshToken:E,accessToken:B,expirationTime:Y}=f,Te=new ut;return E&&(ae("string"==typeof E,"internal-error",{appName:c}),Te.refreshToken=E),B&&(ae("string"==typeof B,"internal-error",{appName:c}),Te.accessToken=B),Y&&(ae("number"==typeof Y,"internal-error",{appName:c}),Te.expirationTime=Y),Te}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(c){this.accessToken=c.accessToken,this.refreshToken=c.refreshToken,this.expirationTime=c.expirationTime}_clone(){return Object.assign(new ut,this.toJSON())}_performRefresh(){return Le("not implemented")}}function yt(m,c){ae("string"==typeof m||typeof m>"u","internal-error",{appName:c})}class Rt{constructor(c){var{uid:f,auth:E,stsTokenManager:B}=c,Y=(0,we._T)(c,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new At(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=f,this.auth=E,this.stsTokenManager=B,this.accessToken=B.accessToken,this.displayName=Y.displayName||null,this.email=Y.email||null,this.emailVerified=Y.emailVerified||!1,this.phoneNumber=Y.phoneNumber||null,this.photoURL=Y.photoURL||null,this.isAnonymous=Y.isAnonymous||!1,this.tenantId=Y.tenantId||null,this.providerData=Y.providerData?[...Y.providerData]:[],this.metadata=new rr(Y.createdAt||void 0,Y.lastLoginAt||void 0)}getIdToken(c){var f=this;return(0,p.Z)(function*(){const E=yield Lt(f,f.stsTokenManager.getToken(f.auth,c));return ae(E,f.auth,"internal-error"),f.accessToken!==E&&(f.accessToken=E,yield f.auth._persistUserIfCurrent(f),f.auth._notifyListenersIfCurrent(f)),E})()}getIdTokenResult(c){return function $e(m){return ye.apply(this,arguments)}(this,c)}reload(){return function pn(m){return ge.apply(this,arguments)}(this)}_assign(c){this!==c&&(ae(this.uid===c.uid,this.auth,"internal-error"),this.displayName=c.displayName,this.photoURL=c.photoURL,this.email=c.email,this.emailVerified=c.emailVerified,this.phoneNumber=c.phoneNumber,this.isAnonymous=c.isAnonymous,this.tenantId=c.tenantId,this.providerData=c.providerData.map(f=>Object.assign({},f)),this.metadata._copy(c.metadata),this.stsTokenManager._assign(c.stsTokenManager))}_clone(c){return new Rt(Object.assign(Object.assign({},this),{auth:c,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(c){ae(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=c,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(c){this.reloadListener?this.reloadListener(c):this.reloadUserInfo=c}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(c,f=!1){var E=this;return(0,p.Z)(function*(){let B=!1;c.idToken&&c.idToken!==E.stsTokenManager.accessToken&&(E.stsTokenManager.updateFromServerResponse(c),B=!0),f&&(yield Sn(E)),yield E.auth._persistUserIfCurrent(E),B&&E.auth._notifyListenersIfCurrent(E)})()}delete(){var c=this;return(0,p.Z)(function*(){const f=yield c.getIdToken();return yield Lt(c,function lr(m,c){return pt.apply(this,arguments)}(c.auth,{idToken:f})),c.stsTokenManager.clearRefreshToken(),c.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(c=>Object.assign({},c)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(c,f){var E,B,Y,Te,st,kt,ln,kn;const xn=null!==(E=f.displayName)&&void 0!==E?E:void 0,ns=null!==(B=f.email)&&void 0!==B?B:void 0,ia=null!==(Y=f.phoneNumber)&&void 0!==Y?Y:void 0,kl=null!==(Te=f.photoURL)&&void 0!==Te?Te:void 0,Ec=null!==(st=f.tenantId)&&void 0!==st?st:void 0,tl=null!==(kt=f._redirectEventId)&&void 0!==kt?kt:void 0,ud=null!==(ln=f.createdAt)&&void 0!==ln?ln:void 0,fh=null!==(kn=f.lastLoginAt)&&void 0!==kn?kn:void 0,{uid:nl,emailVerified:Kf,isAnonymous:Yf,providerData:$a,stsTokenManager:rl}=f;ae(nl&&rl,c,"internal-error");const Mg=ut.fromJSON(this.name,rl);ae("string"==typeof nl,c,"internal-error"),yt(xn,c.name),yt(ns,c.name),ae("boolean"==typeof Kf,c,"internal-error"),ae("boolean"==typeof Yf,c,"internal-error"),yt(ia,c.name),yt(kl,c.name),yt(Ec,c.name),yt(tl,c.name),yt(ud,c.name),yt(fh,c.name);const ph=new Rt({uid:nl,auth:c,email:ns,emailVerified:Kf,displayName:xn,isAnonymous:Yf,photoURL:kl,phoneNumber:ia,tenantId:Ec,stsTokenManager:Mg,createdAt:ud,lastLoginAt:fh});return $a&&Array.isArray($a)&&(ph.providerData=$a.map(Rg=>Object.assign({},Rg))),tl&&(ph._redirectEventId=tl),ph}static _fromIdTokenResponse(c,f,E=!1){return(0,p.Z)(function*(){const B=new ut;B.updateFromServerResponse(f);const Y=new Rt({uid:f.localId,auth:c,stsTokenManager:B,isAnonymous:E});return yield Sn(Y),Y})()}}const Tn=(()=>{class m{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,p.Z)(function*(){return!0})()}_set(f,E){var B=this;return(0,p.Z)(function*(){B.storage[f]=E})()}_get(f){var E=this;return(0,p.Z)(function*(){const B=E.storage[f];return void 0===B?null:B})()}_remove(f){var E=this;return(0,p.Z)(function*(){delete E.storage[f]})()}_addListener(f,E){}_removeListener(f,E){}}return m.type="NONE",m})();function er(m,c,f){return`firebase:${m}:${c}:${f}`}class _n{constructor(c,f,E){this.persistence=c,this.auth=f,this.userKey=E;const{config:B,name:Y}=this.auth;this.fullUserKey=er(this.userKey,B.apiKey,Y),this.fullPersistenceKey=er("persistence",B.apiKey,Y),this.boundEventHandler=f._onStorageEvent.bind(f),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(c){return this.persistence._set(this.fullUserKey,c.toJSON())}getCurrentUser(){var c=this;return(0,p.Z)(function*(){const f=yield c.persistence._get(c.fullUserKey);return f?Rt._fromJSON(c.auth,f):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(c){var f=this;return(0,p.Z)(function*(){if(f.persistence===c)return;const E=yield f.getCurrentUser();return yield f.removeCurrentUser(),f.persistence=c,E?f.setCurrentUser(E):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(c,f,E="authUser"){return(0,p.Z)(function*(){if(!f.length)return new _n(de(Tn),c,E);const B=(yield Promise.all(f.map(function(){var ln=(0,p.Z)(function*(kn){if(yield kn._isAvailable())return kn});return function(kn){return ln.apply(this,arguments)}}()))).filter(ln=>ln);let Y=B[0]||de(Tn);const Te=er(E,c.config.apiKey,c.name);let st=null;for(const ln of f)try{const kn=yield ln._get(Te);if(kn){const xn=Rt._fromJSON(c,kn);ln!==Y&&(st=xn),Y=ln;break}}catch{}const kt=B.filter(ln=>ln._shouldAllowMigration);return Y._shouldAllowMigration&&kt.length?(Y=kt[0],st&&(yield Y._set(Te,st.toJSON())),yield Promise.all(f.map(function(){var ln=(0,p.Z)(function*(kn){if(kn!==Y)try{yield kn._remove(Te)}catch{}});return function(kn){return ln.apply(this,arguments)}}())),new _n(Y,c,E)):new _n(Y,c,E)})()}}function Xt(m){const c=m.toLowerCase();if(c.includes("opera/")||c.includes("opr/")||c.includes("opios/"))return"Opera";if($r(c))return"IEMobile";if(c.includes("msie")||c.includes("trident/"))return"IE";if(c.includes("edge/"))return"Edge";if(cr(c))return"Firefox";if(c.includes("silk/"))return"Silk";if(_e(c))return"Blackberry";if(ue(c))return"Webos";if(vr(c))return"Safari";if((c.includes("chrome/")||Qr(c))&&!c.includes("edge/"))return"Chrome";if(Dr(c))return"Android";{const E=m.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===E?.length)return E[1]}return"Other"}function cr(m=(0,G.z$)()){return/firefox\//i.test(m)}function vr(m=(0,G.z$)()){const c=m.toLowerCase();return c.includes("safari/")&&!c.includes("chrome/")&&!c.includes("crios/")&&!c.includes("android")}function Qr(m=(0,G.z$)()){return/crios\//i.test(m)}function $r(m=(0,G.z$)()){return/iemobile/i.test(m)}function Dr(m=(0,G.z$)()){return/android/i.test(m)}function _e(m=(0,G.z$)()){return/blackberry/i.test(m)}function ue(m=(0,G.z$)()){return/webos/i.test(m)}function re(m=(0,G.z$)()){return/iphone|ipad|ipod/i.test(m)||/macintosh/i.test(m)&&/mobile/i.test(m)}function mn(m=(0,G.z$)()){return re(m)||Dr(m)||ue(m)||_e(m)||/windows phone/i.test(m)||$r(m)}function yr(m,c=[]){let f;switch(m){case"Browser":f=Xt((0,G.z$)());break;case"Worker":f=`${Xt((0,G.z$)())}-${m}`;break;default:f=m}const E=c.length?c.join(","):"FirebaseCore-web";return`${f}/JsCore/${be.SDK_VERSION}/${E}`}class Hr{constructor(c){this.auth=c,this.queue=[]}pushCallback(c,f){const E=Y=>new Promise((Te,st)=>{try{Te(c(Y))}catch(kt){st(kt)}});E.onAbort=f,this.queue.push(E);const B=this.queue.length-1;return()=>{this.queue[B]=()=>Promise.resolve()}}runMiddleware(c){var f=this;return(0,p.Z)(function*(){var E;if(f.auth.currentUser===c)return;const B=[];try{for(const Y of f.queue)yield Y(c),Y.onAbort&&B.push(Y.onAbort)}catch(Y){B.reverse();for(const Te of B)try{Te()}catch{}throw f.auth._errorFactory.create("login-blocked",{originalMessage:null===(E=Y)||void 0===E?void 0:E.message})}})()}}class yn{constructor(c,f,E){this.app=c,this.heartbeatServiceProvider=f,this.config=E,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Kn(this),this.idTokenSubscription=new Kn(this),this.beforeStateQueue=new Hr(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Ye,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=c.name,this.clientVersion=E.sdkClientVersion}_initializeWithPersistence(c,f){var E=this;return f&&(this._popupRedirectResolver=de(f)),this._initializationPromise=this.queue((0,p.Z)(function*(){var B,Y;if(!E._deleted&&(E.persistenceManager=yield _n.create(E,c),!E._deleted)){if(null!==(B=E._popupRedirectResolver)&&void 0!==B&&B._shouldInitProactively)try{yield E._popupRedirectResolver._initialize(E)}catch{}yield E.initializeCurrentUser(f),E.lastNotifiedUid=(null===(Y=E.currentUser)||void 0===Y?void 0:Y.uid)||null,!E._deleted&&(E._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var c=this;return(0,p.Z)(function*(){if(c._deleted)return;const f=yield c.assertedPersistence.getCurrentUser();if(c.currentUser||f){if(c.currentUser&&f&&c.currentUser.uid===f.uid)return c._currentUser._assign(f),void(yield c.currentUser.getIdToken());yield c._updateCurrentUser(f,!0)}})()}initializeCurrentUser(c){var f=this;return(0,p.Z)(function*(){var E;const B=yield f.assertedPersistence.getCurrentUser();let Y=B,Te=!1;if(c&&f.config.authDomain){yield f.getOrInitRedirectPersistenceManager();const st=null===(E=f.redirectUser)||void 0===E?void 0:E._redirectEventId,kt=Y?._redirectEventId,ln=yield f.tryRedirectSignIn(c);(!st||st===kt)&&ln?.user&&(Y=ln.user,Te=!0)}if(!Y)return f.directlySetCurrentUser(null);if(!Y._redirectEventId){if(Te)try{yield f.beforeStateQueue.runMiddleware(Y)}catch(st){Y=B,f._popupRedirectResolver._overrideRedirectResult(f,()=>Promise.reject(st))}return Y?f.reloadAndSetCurrentUserOrClear(Y):f.directlySetCurrentUser(null)}return ae(f._popupRedirectResolver,f,"argument-error"),yield f.getOrInitRedirectPersistenceManager(),f.redirectUser&&f.redirectUser._redirectEventId===Y._redirectEventId?f.directlySetCurrentUser(Y):f.reloadAndSetCurrentUserOrClear(Y)})()}tryRedirectSignIn(c){var f=this;return(0,p.Z)(function*(){let E=null;try{E=yield f._popupRedirectResolver._completeRedirectFn(f,c,!0)}catch{yield f._setRedirectUser(null)}return E})()}reloadAndSetCurrentUserOrClear(c){var f=this;return(0,p.Z)(function*(){var E;try{yield Sn(c)}catch(B){if("auth/network-request-failed"!==(null===(E=B)||void 0===E?void 0:E.code))return f.directlySetCurrentUser(null)}return f.directlySetCurrentUser(c)})()}useDeviceLanguage(){this.languageCode=function ft(){if(typeof navigator>"u")return null;const m=navigator;return m.languages&&m.languages[0]||m.language||null}()}_delete(){var c=this;return(0,p.Z)(function*(){c._deleted=!0})()}updateCurrentUser(c){var f=this;return(0,p.Z)(function*(){const E=c?(0,G.m9)(c):null;return E&&ae(E.auth.config.apiKey===f.config.apiKey,f,"invalid-user-token"),f._updateCurrentUser(E&&E._clone(f))})()}_updateCurrentUser(c,f=!1){var E=this;return(0,p.Z)(function*(){if(!E._deleted)return c&&ae(E.tenantId===c.tenantId,E,"tenant-id-mismatch"),f||(yield E.beforeStateQueue.runMiddleware(c)),E.queue((0,p.Z)(function*(){yield E.directlySetCurrentUser(c),E.notifyAuthListeners()}))})()}signOut(){var c=this;return(0,p.Z)(function*(){return yield c.beforeStateQueue.runMiddleware(null),(c.redirectPersistenceManager||c._popupRedirectResolver)&&(yield c._setRedirectUser(null)),c._updateCurrentUser(null,!0)})()}setPersistence(c){var f=this;return this.queue((0,p.Z)(function*(){yield f.assertedPersistence.setPersistence(de(c))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(c){this._errorFactory=new G.LL("auth","Firebase",c())}onAuthStateChanged(c,f,E){return this.registerStateListener(this.authStateSubscription,c,f,E)}beforeAuthStateChanged(c,f){return this.beforeStateQueue.pushCallback(c,f)}onIdTokenChanged(c,f,E){return this.registerStateListener(this.idTokenSubscription,c,f,E)}toJSON(){var c;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(c=this._currentUser)||void 0===c?void 0:c.toJSON()}}_setRedirectUser(c,f){var E=this;return(0,p.Z)(function*(){const B=yield E.getOrInitRedirectPersistenceManager(f);return null===c?B.removeCurrentUser():B.setCurrentUser(c)})()}getOrInitRedirectPersistenceManager(c){var f=this;return(0,p.Z)(function*(){if(!f.redirectPersistenceManager){const E=c&&de(c)||f._popupRedirectResolver;ae(E,f,"argument-error"),f.redirectPersistenceManager=yield _n.create(f,[de(E._redirectPersistence)],"redirectUser"),f.redirectUser=yield f.redirectPersistenceManager.getCurrentUser()}return f.redirectPersistenceManager})()}_redirectUserForId(c){var f=this;return(0,p.Z)(function*(){var E,B;return f._isInitialized&&(yield f.queue((0,p.Z)(function*(){}))),(null===(E=f._currentUser)||void 0===E?void 0:E._redirectEventId)===c?f._currentUser:(null===(B=f.redirectUser)||void 0===B?void 0:B._redirectEventId)===c?f.redirectUser:null})()}_persistUserIfCurrent(c){var f=this;return(0,p.Z)(function*(){if(c===f.currentUser)return f.queue((0,p.Z)(function*(){return f.directlySetCurrentUser(c)}))})()}_notifyListenersIfCurrent(c){c===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var c,f;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const E=null!==(f=null===(c=this.currentUser)||void 0===c?void 0:c.uid)&&void 0!==f?f:null;this.lastNotifiedUid!==E&&(this.lastNotifiedUid=E,this.authStateSubscription.next(this.currentUser))}registerStateListener(c,f,E,B){if(this._deleted)return()=>{};const Y="function"==typeof f?f:f.next.bind(f),Te=this._isInitialized?Promise.resolve():this._initializationPromise;return ae(Te,this,"internal-error"),Te.then(()=>Y(this.currentUser)),"function"==typeof f?c.addObserver(f,E,B):c.addObserver(f)}directlySetCurrentUser(c){var f=this;return(0,p.Z)(function*(){f.currentUser&&f.currentUser!==c&&f._currentUser._stopProactiveRefresh(),c&&f.isProactiveRefreshEnabled&&c._startProactiveRefresh(),f.currentUser=c,c?yield f.assertedPersistence.setCurrentUser(c):yield f.assertedPersistence.removeCurrentUser()})()}queue(c){return this.operations=this.operations.then(c,c),this.operations}get assertedPersistence(){return ae(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(c){!c||this.frameworks.includes(c)||(this.frameworks.push(c),this.frameworks.sort(),this.clientVersion=yr(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var c=this;return(0,p.Z)(function*(){var f;const E={"X-Client-Version":c.clientVersion};c.app.options.appId&&(E["X-Firebase-gmpid"]=c.app.options.appId);const B=yield null===(f=c.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===f?void 0:f.getHeartbeatsHeader();return B&&(E["X-Firebase-Client"]=B),E})()}}function An(m){return(0,G.m9)(m)}class Kn{constructor(c){this.auth=c,this.observer=null,this.addObserver=(0,G.ne)(f=>this.observer=f)}get next(){return ae(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Fi(m){const c=m.indexOf(":");return c<0?"":m.substr(0,c+1)}function ks(m){if(!m)return null;const c=Number(m);return isNaN(c)?null:c}class Jr{constructor(c,f){this.providerId=c,this.signInMethod=f}toJSON(){return Le("not implemented")}_getIdTokenResponse(c){return Le("not implemented")}_linkToIdToken(c,f){return Le("not implemented")}_getReauthenticationResolver(c){return Le("not implemented")}}function Yn(m,c){return Ii.apply(this,arguments)}function Ii(){return(Ii=(0,p.Z)(function*(m,c){return Fn(m,"POST","/v1/accounts:resetPassword",an(m,c))})).apply(this,arguments)}function Qn(m,c){return lo.apply(this,arguments)}function lo(){return(lo=(0,p.Z)(function*(m,c){return Fn(m,"POST","/v1/accounts:update",c)})).apply(this,arguments)}function fs(m,c){return Si.apply(this,arguments)}function Si(){return(Si=(0,p.Z)(function*(m,c){return Fn(m,"POST","/v1/accounts:update",an(m,c))})).apply(this,arguments)}function Ai(){return(Ai=(0,p.Z)(function*(m,c){return ur(m,"POST","/v1/accounts:signInWithPassword",an(m,c))})).apply(this,arguments)}function Li(m,c){return Yi.apply(this,arguments)}function Yi(){return(Yi=(0,p.Z)(function*(m,c){return Fn(m,"POST","/v1/accounts:sendOobCode",an(m,c))})).apply(this,arguments)}function sr(m,c){return Vi.apply(this,arguments)}function Vi(){return(Vi=(0,p.Z)(function*(m,c){return Li(m,c)})).apply(this,arguments)}function Cr(m,c){return ci.apply(this,arguments)}function ci(){return(ci=(0,p.Z)(function*(m,c){return Li(m,c)})).apply(this,arguments)}function Fs(m,c){return Rs.apply(this,arguments)}function Rs(){return(Rs=(0,p.Z)(function*(m,c){return Li(m,c)})).apply(this,arguments)}function Xr(m,c){return wr.apply(this,arguments)}function wr(){return(wr=(0,p.Z)(function*(m,c){return Li(m,c)})).apply(this,arguments)}function Di(){return(Di=(0,p.Z)(function*(m,c){return ur(m,"POST","/v1/accounts:signInWithEmailLink",an(m,c))})).apply(this,arguments)}function Po(){return(Po=(0,p.Z)(function*(m,c){return ur(m,"POST","/v1/accounts:signInWithEmailLink",an(m,c))})).apply(this,arguments)}class Os extends Jr{constructor(c,f,E,B=null){super("password",E),this._email=c,this._password=f,this._tenantId=B}static _fromEmailAndPassword(c,f){return new Os(c,f,"password")}static _fromEmailAndCode(c,f,E=null){return new Os(c,f,"emailLink",E)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(c){const f="string"==typeof c?JSON.parse(c):c;if(f?.email&&f?.password){if("password"===f.signInMethod)return this._fromEmailAndPassword(f.email,f.password);if("emailLink"===f.signInMethod)return this._fromEmailAndCode(f.email,f.password,f.tenantId)}return null}_getIdTokenResponse(c){var f=this;return(0,p.Z)(function*(){switch(f.signInMethod){case"password":return function Ms(m,c){return Ai.apply(this,arguments)}(c,{returnSecureToken:!0,email:f._email,password:f._password});case"emailLink":return function co(m,c){return Di.apply(this,arguments)}(c,{email:f._email,oobCode:f._password});default:he(c,"internal-error")}})()}_linkToIdToken(c,f){var E=this;return(0,p.Z)(function*(){switch(E.signInMethod){case"password":return Qn(c,{idToken:f,returnSecureToken:!0,email:E._email,password:E._password});case"emailLink":return function No(m,c){return Po.apply(this,arguments)}(c,{idToken:f,email:E._email,oobCode:E._password});default:he(c,"internal-error")}})()}_getReauthenticationResolver(c){return this._getIdTokenResponse(c)}}function ri(m,c){return xe.apply(this,arguments)}function xe(){return(xe=(0,p.Z)(function*(m,c){return ur(m,"POST","/v1/accounts:signInWithIdp",an(m,c))})).apply(this,arguments)}class Ue extends Jr{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(c){const f=new Ue(c.providerId,c.signInMethod);return c.idToken||c.accessToken?(c.idToken&&(f.idToken=c.idToken),c.accessToken&&(f.accessToken=c.accessToken),c.nonce&&!c.pendingToken&&(f.nonce=c.nonce),c.pendingToken&&(f.pendingToken=c.pendingToken)):c.oauthToken&&c.oauthTokenSecret?(f.accessToken=c.oauthToken,f.secret=c.oauthTokenSecret):he("argument-error"),f}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(c){const f="string"==typeof c?JSON.parse(c):c,{providerId:E,signInMethod:B}=f,Y=(0,we._T)(f,["providerId","signInMethod"]);if(!E||!B)return null;const Te=new Ue(E,B);return Te.idToken=Y.idToken||void 0,Te.accessToken=Y.accessToken||void 0,Te.secret=Y.secret,Te.nonce=Y.nonce,Te.pendingToken=Y.pendingToken||null,Te}_getIdTokenResponse(c){return ri(c,this.buildRequest())}_linkToIdToken(c,f){const E=this.buildRequest();return E.idToken=f,ri(c,E)}_getReauthenticationResolver(c){const f=this.buildRequest();return f.autoCreate=!1,ri(c,f)}buildRequest(){const c={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)c.pendingToken=this.pendingToken;else{const f={};this.idToken&&(f.id_token=this.idToken),this.accessToken&&(f.access_token=this.accessToken),this.secret&&(f.oauth_token_secret=this.secret),f.providerId=this.providerId,this.nonce&&!this.pendingToken&&(f.nonce=this.nonce),c.postBody=(0,G.xO)(f)}return c}}function ct(m,c){return Dt.apply(this,arguments)}function Dt(){return(Dt=(0,p.Z)(function*(m,c){return Fn(m,"POST","/v1/accounts:sendVerificationCode",an(m,c))})).apply(this,arguments)}function cn(){return(cn=(0,p.Z)(function*(m,c){return ur(m,"POST","/v1/accounts:signInWithPhoneNumber",an(m,c))})).apply(this,arguments)}function ar(){return(ar=(0,p.Z)(function*(m,c){const f=yield ur(m,"POST","/v1/accounts:signInWithPhoneNumber",an(m,c));if(f.temporaryProof)throw $n(m,"account-exists-with-different-credential",f);return f})).apply(this,arguments)}const Oi={USER_NOT_FOUND:"user-not-found"};function gs(){return(gs=(0,p.Z)(function*(m,c){return ur(m,"POST","/v1/accounts:signInWithPhoneNumber",an(m,Object.assign(Object.assign({},c),{operation:"REAUTH"})),Oi)})).apply(this,arguments)}class gi extends Jr{constructor(c){super("phone","phone"),this.params=c}static _fromVerification(c,f){return new gi({verificationId:c,verificationCode:f})}static _fromTokenResponse(c,f){return new gi({phoneNumber:c,temporaryProof:f})}_getIdTokenResponse(c){return function jt(m,c){return cn.apply(this,arguments)}(c,this._makeVerificationRequest())}_linkToIdToken(c,f){return function ei(m,c){return ar.apply(this,arguments)}(c,Object.assign({idToken:f},this._makeVerificationRequest()))}_getReauthenticationResolver(c){return function ps(m,c){return gs.apply(this,arguments)}(c,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:c,phoneNumber:f,verificationId:E,verificationCode:B}=this.params;return c&&f?{temporaryProof:c,phoneNumber:f}:{sessionInfo:E,code:B}}toJSON(){const c={providerId:this.providerId};return this.params.phoneNumber&&(c.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(c.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(c.verificationCode=this.params.verificationCode),this.params.verificationId&&(c.verificationId=this.params.verificationId),c}static fromJSON(c){"string"==typeof c&&(c=JSON.parse(c));const{verificationId:f,verificationCode:E,phoneNumber:B,temporaryProof:Y}=c;return E||f||B||Y?new gi({verificationId:f,verificationCode:E,phoneNumber:B,temporaryProof:Y}):null}}class ms{constructor(c){var f,E,B,Y,Te,st;const kt=(0,G.zd)((0,G.pd)(c)),ln=null!==(f=kt.apiKey)&&void 0!==f?f:null,kn=null!==(E=kt.oobCode)&&void 0!==E?E:null,xn=function Ui(m){switch(m){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(B=kt.mode)&&void 0!==B?B:null);ae(ln&&kn&&xn,"argument-error"),this.apiKey=ln,this.operation=xn,this.code=kn,this.continueUrl=null!==(Y=kt.continueUrl)&&void 0!==Y?Y:null,this.languageCode=null!==(Te=kt.languageCode)&&void 0!==Te?Te:null,this.tenantId=null!==(st=kt.tenantId)&&void 0!==st?st:null}static parseLink(c){const f=function Bi(m){const c=(0,G.zd)((0,G.pd)(m)).link,f=c?(0,G.zd)((0,G.pd)(c)).deep_link_id:null,E=(0,G.zd)((0,G.pd)(m)).deep_link_id;return(E?(0,G.zd)((0,G.pd)(E)).link:null)||E||f||c||m}(c);try{return new ms(f)}catch{return null}}}let Ni=(()=>{class m{constructor(){this.providerId=m.PROVIDER_ID}static credential(f,E){return Os._fromEmailAndPassword(f,E)}static credentialWithLink(f,E){const B=ms.parseLink(E);return ae(B,"argument-error"),Os._fromEmailAndCode(f,B.code,B.tenantId)}}return m.PROVIDER_ID="password",m.EMAIL_PASSWORD_SIGN_IN_METHOD="password",m.EMAIL_LINK_SIGN_IN_METHOD="emailLink",m})();class os{constructor(c){this.providerId=c,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(c){this.defaultLanguageCode=c}setCustomParameters(c){return this.customParameters=c,this}getCustomParameters(){return this.customParameters}}class xi extends os{constructor(){super(...arguments),this.scopes=[]}addScope(c){return this.scopes.includes(c)||this.scopes.push(c),this}getScopes(){return[...this.scopes]}}class Qi extends xi{static credentialFromJSON(c){const f="string"==typeof c?JSON.parse(c):c;return ae("providerId"in f&&"signInMethod"in f,"argument-error"),Ue._fromParams(f)}credential(c){return this._credential(Object.assign(Object.assign({},c),{nonce:c.rawNonce}))}_credential(c){return ae(c.idToken||c.accessToken,"argument-error"),Ue._fromParams(Object.assign(Object.assign({},c),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(c){return Qi.oauthCredentialFromTaggedObject(c)}static credentialFromError(c){return Qi.oauthCredentialFromTaggedObject(c.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:c}){if(!c)return null;const{oauthIdToken:f,oauthAccessToken:E,oauthTokenSecret:B,pendingToken:Y,nonce:Te,providerId:st}=c;if(!E&&!B&&!f&&!Y||!st)return null;try{return new Qi(st)._credential({idToken:f,accessToken:E,nonce:Te,pendingToken:Y})}catch{return null}}}let ys=(()=>{class m extends xi{constructor(){super("facebook.com")}static credential(f){return Ue._fromParams({providerId:m.PROVIDER_ID,signInMethod:m.FACEBOOK_SIGN_IN_METHOD,accessToken:f})}static credentialFromResult(f){return m.credentialFromTaggedObject(f)}static credentialFromError(f){return m.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f||!("oauthAccessToken"in f)||!f.oauthAccessToken)return null;try{return m.credential(f.oauthAccessToken)}catch{return null}}}return m.FACEBOOK_SIGN_IN_METHOD="facebook.com",m.PROVIDER_ID="facebook.com",m})(),Ji=(()=>{class m extends xi{constructor(){super("google.com"),this.addScope("profile")}static credential(f,E){return Ue._fromParams({providerId:m.PROVIDER_ID,signInMethod:m.GOOGLE_SIGN_IN_METHOD,idToken:f,accessToken:E})}static credentialFromResult(f){return m.credentialFromTaggedObject(f)}static credentialFromError(f){return m.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{oauthIdToken:E,oauthAccessToken:B}=f;if(!E&&!B)return null;try{return m.credential(E,B)}catch{return null}}}return m.GOOGLE_SIGN_IN_METHOD="google.com",m.PROVIDER_ID="google.com",m})(),fo=(()=>{class m extends xi{constructor(){super("github.com")}static credential(f){return Ue._fromParams({providerId:m.PROVIDER_ID,signInMethod:m.GITHUB_SIGN_IN_METHOD,accessToken:f})}static credentialFromResult(f){return m.credentialFromTaggedObject(f)}static credentialFromError(f){return m.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f||!("oauthAccessToken"in f)||!f.oauthAccessToken)return null;try{return m.credential(f.oauthAccessToken)}catch{return null}}}return m.GITHUB_SIGN_IN_METHOD="github.com",m.PROVIDER_ID="github.com",m})();class Ls extends Jr{constructor(c,f){super(c,c),this.pendingToken=f}_getIdTokenResponse(c){return ri(c,this.buildRequest())}_linkToIdToken(c,f){const E=this.buildRequest();return E.idToken=f,ri(c,E)}_getReauthenticationResolver(c){const f=this.buildRequest();return f.autoCreate=!1,ri(c,f)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(c){const f="string"==typeof c?JSON.parse(c):c,{providerId:E,signInMethod:B,pendingToken:Y}=f;return E&&B&&Y&&E===B?new Ls(E,Y):null}static _create(c,f){return new Ls(c,f)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class di extends os{constructor(c){ae(c.startsWith("saml."),"argument-error"),super(c)}static credentialFromResult(c){return di.samlCredentialFromTaggedObject(c)}static credentialFromError(c){return di.samlCredentialFromTaggedObject(c.customData||{})}static credentialFromJSON(c){const f=Ls.fromJSON(c);return ae(f,"argument-error"),f}static samlCredentialFromTaggedObject({_tokenResponse:c}){if(!c)return null;const{pendingToken:f,providerId:E}=c;if(!f||!E)return null;try{return Ls._create(E,f)}catch{return null}}}let _r=(()=>{class m extends xi{constructor(){super("twitter.com")}static credential(f,E){return Ue._fromParams({providerId:m.PROVIDER_ID,signInMethod:m.TWITTER_SIGN_IN_METHOD,oauthToken:f,oauthTokenSecret:E})}static credentialFromResult(f){return m.credentialFromTaggedObject(f)}static credentialFromError(f){return m.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{oauthAccessToken:E,oauthTokenSecret:B}=f;if(!E||!B)return null;try{return m.credential(E,B)}catch{return null}}}return m.TWITTER_SIGN_IN_METHOD="twitter.com",m.PROVIDER_ID="twitter.com",m})();function Ci(m,c){return po.apply(this,arguments)}function po(){return(po=(0,p.Z)(function*(m,c){return ur(m,"POST","/v1/accounts:signUp",an(m,c))})).apply(this,arguments)}class br{constructor(c){this.user=c.user,this.providerId=c.providerId,this._tokenResponse=c._tokenResponse,this.operationType=c.operationType}static _fromIdTokenResponse(c,f,E,B=!1){return(0,p.Z)(function*(){const Y=yield Rt._fromIdTokenResponse(c,E,B),Te=Xs(E);return new br({user:Y,providerId:Te,_tokenResponse:E,operationType:f})})()}static _forOperation(c,f,E){return(0,p.Z)(function*(){yield c._updateTokensIfNecessary(E,!0);const B=Xs(E);return new br({user:c,providerId:B,_tokenResponse:E,operationType:f})})()}}function Xs(m){return m.providerId?m.providerId:"phoneNumber"in m?"phone":null}function Lr(){return(Lr=(0,p.Z)(function*(m){var c;const f=An(m);if(yield f._initializationPromise,null!==(c=f.currentUser)&&void 0!==c&&c.isAnonymous)return new br({user:f.currentUser,providerId:null,operationType:"signIn"});const E=yield Ci(f,{returnSecureToken:!0}),B=yield br._fromIdTokenResponse(f,"signIn",E,!0);return yield f._updateCurrentUser(B.user),B})).apply(this,arguments)}class Gr extends G.ZR{constructor(c,f,E,B){var Y;super(f.code,f.message),this.operationType=E,this.user=B,Object.setPrototypeOf(this,Gr.prototype),this.customData={appName:c.name,tenantId:null!==(Y=c.tenantId)&&void 0!==Y?Y:void 0,_serverResponse:f.customData._serverResponse,operationType:E}}static _fromErrorAndOperation(c,f,E,B){return new Gr(c,f,E,B)}}function Fo(m,c,f,E){return("reauthenticate"===c?f._getReauthenticationResolver(m):f._getIdTokenResponse(m)).catch(Y=>{throw"auth/multi-factor-auth-required"===Y.code?Gr._fromErrorAndOperation(m,Y,c,E):Y})}function hi(m){return new Set(m.map(({providerId:c})=>c).filter(c=>!!c))}function Xi(){return(Xi=(0,p.Z)(function*(m,c){const f=(0,G.m9)(m);yield qn(!0,f,c);const{providerUserInfo:E}=yield Bn(f.auth,{idToken:yield f.getIdToken(),deleteProvider:[c]}),B=hi(E||[]);return f.providerData=f.providerData.filter(Y=>B.has(Y.providerId)),B.has("phone")||(f.phoneNumber=null),yield f.auth._persistUserIfCurrent(f),f})).apply(this,arguments)}function Pi(m,c){return Rr.apply(this,arguments)}function Rr(){return(Rr=(0,p.Z)(function*(m,c,f=!1){const E=yield Lt(m,c._linkToIdToken(m.auth,yield m.getIdToken()),f);return br._forOperation(m,"link",E)})).apply(this,arguments)}function qn(m,c,f){return vs.apply(this,arguments)}function vs(){return(vs=(0,p.Z)(function*(m,c,f){yield Sn(c);const B=!1===m?"provider-already-linked":"no-such-provider";ae(hi(c.providerData).has(f)===m,c.auth,B)})).apply(this,arguments)}function as(m,c){return Lo.apply(this,arguments)}function Lo(){return(Lo=(0,p.Z)(function*(m,c,f=!1){var E;const{auth:B}=m,Y="reauthenticate";try{const Te=yield Lt(m,Fo(B,Y,c,m),f);ae(Te.idToken,B,"internal-error");const st=Be(Te.idToken);ae(st,B,"internal-error");const{sub:kt}=st;return ae(m.uid===kt,B,"user-mismatch"),br._forOperation(m,Y,Te)}catch(Te){throw"auth/user-not-found"===(null===(E=Te)||void 0===E?void 0:E.code)&&he(B,"user-mismatch"),Te}})).apply(this,arguments)}function Jn(m,c){return eo.apply(this,arguments)}function eo(){return(eo=(0,p.Z)(function*(m,c,f=!1){const E="signIn",B=yield Fo(m,E,c),Y=yield br._fromIdTokenResponse(m,E,B);return f||(yield m._updateCurrentUser(Y.user)),Y})).apply(this,arguments)}function zr(m,c){return gn.apply(this,arguments)}function gn(){return(gn=(0,p.Z)(function*(m,c){return Jn(An(m),c)})).apply(this,arguments)}function Vs(m,c){return go.apply(this,arguments)}function go(){return(go=(0,p.Z)(function*(m,c){const f=(0,G.m9)(m);return yield qn(!1,f,c.providerId),Pi(f,c)})).apply(this,arguments)}function Vo(m,c){return zs.apply(this,arguments)}function zs(){return(zs=(0,p.Z)(function*(m,c){return as((0,G.m9)(m),c)})).apply(this,arguments)}function ji(m,c){return us.apply(this,arguments)}function us(){return(us=(0,p.Z)(function*(m,c){return ur(m,"POST","/v1/accounts:signInWithCustomToken",an(m,c))})).apply(this,arguments)}function Uo(){return(Uo=(0,p.Z)(function*(m,c){const f=An(m),E=yield ji(f,{token:c,returnSecureToken:!0}),B=yield br._fromIdTokenResponse(f,"signIn",E);return yield f._updateCurrentUser(B.user),B})).apply(this,arguments)}class ht{constructor(c,f){this.factorId=c,this.uid=f.mfaEnrollmentId,this.enrollmentTime=new Date(f.enrolledAt).toUTCString(),this.displayName=f.displayName}static _fromServerResponse(c,f){return"phoneInfo"in f?Rn._fromServerResponse(c,f):he(c,"internal-error")}}class Rn extends ht{constructor(c){super("phone",c),this.phoneNumber=c.phoneInfo}static _fromServerResponse(c,f){return new Rn(f)}}function Us(m,c,f){var E;ae((null===(E=f.url)||void 0===E?void 0:E.length)>0,m,"invalid-continue-uri"),ae(typeof f.dynamicLinkDomain>"u"||f.dynamicLinkDomain.length>0,m,"invalid-dynamic-link-domain"),c.continueUrl=f.url,c.dynamicLinkDomain=f.dynamicLinkDomain,c.canHandleCodeInApp=f.handleCodeInApp,f.iOS&&(ae(f.iOS.bundleId.length>0,m,"missing-ios-bundle-id"),c.iOSBundleId=f.iOS.bundleId),f.android&&(ae(f.android.packageName.length>0,m,"missing-android-pkg-name"),c.androidInstallApp=f.android.installApp,c.androidMinimumVersionCode=f.android.minimumVersion,c.androidPackageName=f.android.packageName)}function Or(){return(Or=(0,p.Z)(function*(m,c,f){const E=(0,G.m9)(m),B={requestType:"PASSWORD_RESET",email:c};f&&Us(E,B,f),yield Cr(E,B)})).apply(this,arguments)}function Ns(){return(Ns=(0,p.Z)(function*(m,c,f){yield Yn((0,G.m9)(m),{oobCode:c,newPassword:f})})).apply(this,arguments)}function jo(){return(jo=(0,p.Z)(function*(m,c){yield fs((0,G.m9)(m),{oobCode:c})})).apply(this,arguments)}function to(m,c){return yo.apply(this,arguments)}function yo(){return(yo=(0,p.Z)(function*(m,c){const f=(0,G.m9)(m),E=yield Yn(f,{oobCode:c}),B=E.requestType;switch(ae(B,f,"internal-error"),B){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":ae(E.newEmail,f,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":ae(E.mfaInfo,f,"internal-error");default:ae(E.email,f,"internal-error")}let Y=null;return E.mfaInfo&&(Y=ht._fromServerResponse(An(f),E.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.newEmail:E.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.email:E.newEmail)||null,multiFactorInfo:Y},operation:B}})).apply(this,arguments)}function F(){return(F=(0,p.Z)(function*(m,c){const{data:f}=yield to((0,G.m9)(m),c);return f.email})).apply(this,arguments)}function A(){return(A=(0,p.Z)(function*(m,c,f){const E=An(m),B=yield Ci(E,{returnSecureToken:!0,email:c,password:f}),Y=yield br._fromIdTokenResponse(E,"signIn",B);return yield E._updateCurrentUser(Y.user),Y})).apply(this,arguments)}function nn(){return(nn=(0,p.Z)(function*(m,c,f){const E=(0,G.m9)(m),B={requestType:"EMAIL_SIGNIN",email:c};ae(f.handleCodeInApp,E,"argument-error"),f&&Us(E,B,f),yield Fs(E,B)})).apply(this,arguments)}function Mi(){return(Mi=(0,p.Z)(function*(m,c,f){const E=(0,G.m9)(m),B=Ni.credentialWithLink(c,f||wt());return ae(B._tenantId===(E.tenantId||null),E,"tenant-id-mismatch"),zr(E,B)})).apply(this,arguments)}function Hi(m,c){return Ws.apply(this,arguments)}function Ws(){return(Ws=(0,p.Z)(function*(m,c){return Fn(m,"POST","/v1/accounts:createAuthUri",an(m,c))})).apply(this,arguments)}function _o(){return(_o=(0,p.Z)(function*(m,c){const E={identifier:c,continueUri:bt()?wt():"http://localhost"},{signinMethods:B}=yield Hi((0,G.m9)(m),E);return B||[]})).apply(this,arguments)}function Ps(){return(Ps=(0,p.Z)(function*(m,c){const f=(0,G.m9)(m),B={requestType:"VERIFY_EMAIL",idToken:yield m.getIdToken()};c&&Us(f.auth,B,c);const{email:Y}=yield sr(f.auth,B);Y!==m.email&&(yield m.reload())})).apply(this,arguments)}function Wr(){return(Wr=(0,p.Z)(function*(m,c,f){const E=(0,G.m9)(m),Y={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield m.getIdToken(),newEmail:c};f&&Us(E.auth,Y,f);const{email:Te}=yield Xr(E.auth,Y);Te!==m.email&&(yield m.reload())})).apply(this,arguments)}function ws(m,c){return da.apply(this,arguments)}function da(){return(da=(0,p.Z)(function*(m,c){return Fn(m,"POST","/v1/accounts:update",c)})).apply(this,arguments)}function Ea(){return(Ea=(0,p.Z)(function*(m,{displayName:c,photoURL:f}){if(void 0===c&&void 0===f)return;const E=(0,G.m9)(m),Y={idToken:yield E.getIdToken(),displayName:c,photoUrl:f,returnSecureToken:!0},Te=yield Lt(E,ws(E.auth,Y));E.displayName=Te.displayName||null,E.photoURL=Te.photoUrl||null;const st=E.providerData.find(({providerId:kt})=>"password"===kt);st&&(st.displayName=E.displayName,st.photoURL=E.photoURL),yield E._updateTokensIfNecessary(Te)})).apply(this,arguments)}function M(m,c,f){return q.apply(this,arguments)}function q(){return(q=(0,p.Z)(function*(m,c,f){const{auth:E}=m,Y={idToken:yield m.getIdToken(),returnSecureToken:!0};c&&(Y.email=c),f&&(Y.password=f);const Te=yield Lt(m,Qn(E,Y));yield m._updateTokensIfNecessary(Te,!0)})).apply(this,arguments)}class ze{constructor(c,f,E={}){this.isNewUser=c,this.providerId=f,this.profile=E}}class rt extends ze{constructor(c,f,E,B){super(c,f,E),this.username=B}}class Yt extends ze{constructor(c,f){super(c,"facebook.com",f)}}class Zn extends rt{constructor(c,f){super(c,"github.com",f,"string"==typeof f?.login?f?.login:null)}}class hr extends ze{constructor(c,f){super(c,"google.com",f)}}class tr extends rt{constructor(c,f,E){super(c,"twitter.com",f,E)}}function Gn(m){const{user:c,_tokenResponse:f}=m;return c.isAnonymous&&!f?{providerId:null,isNewUser:!1,profile:null}:function fe(m){var c,f;if(!m)return null;const{providerId:E}=m,B=m.rawUserInfo?JSON.parse(m.rawUserInfo):{},Y=m.isNewUser||"identitytoolkit#SignupNewUserResponse"===m.kind;if(!E&&m?.idToken){const Te=null===(f=null===(c=Be(m.idToken))||void 0===c?void 0:c.firebase)||void 0===f?void 0:f.sign_in_provider;if(Te)return new ze(Y,"anonymous"!==Te&&"custom"!==Te?Te:null)}if(!E)return null;switch(E){case"facebook.com":return new Yt(Y,B);case"github.com":return new Zn(Y,B);case"google.com":return new hr(Y,B);case"twitter.com":return new tr(Y,B,m.screenName||null);case"custom":case"anonymous":return new ze(Y,null);default:return new ze(Y,E,B)}}(f)}class J{constructor(c,f){this.type=c,this.credential=f}static _fromIdtoken(c){return new J("enroll",c)}static _fromMfaPendingCredential(c){return new J("signin",c)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(c){var f,E;if(c?.multiFactorSession){if(null!==(f=c.multiFactorSession)&&void 0!==f&&f.pendingCredential)return J._fromMfaPendingCredential(c.multiFactorSession.pendingCredential);if(null!==(E=c.multiFactorSession)&&void 0!==E&&E.idToken)return J._fromIdtoken(c.multiFactorSession.idToken)}return null}}class Ie{constructor(c,f,E){this.session=c,this.hints=f,this.signInResolver=E}static _fromError(c,f){const E=An(c),B=f.customData._serverResponse,Y=(B.mfaInfo||[]).map(st=>ht._fromServerResponse(E,st));ae(B.mfaPendingCredential,E,"internal-error");const Te=J._fromMfaPendingCredential(B.mfaPendingCredential);return new Ie(Te,Y,function(){var st=(0,p.Z)(function*(kt){const ln=yield kt._process(E,Te);delete B.mfaInfo,delete B.mfaPendingCredential;const kn=Object.assign(Object.assign({},B),{idToken:ln.idToken,refreshToken:ln.refreshToken});switch(f.operationType){case"signIn":const xn=yield br._fromIdTokenResponse(E,f.operationType,kn);return yield E._updateCurrentUser(xn.user),xn;case"reauthenticate":return ae(f.user,E,"internal-error"),br._forOperation(f.user,f.operationType,kn);default:he(E,"internal-error")}});return function(kt){return st.apply(this,arguments)}}())}resolveSignIn(c){var f=this;return(0,p.Z)(function*(){return f.signInResolver(c)})()}}function Ct(m,c){return Fn(m,"POST","/v2/accounts/mfaEnrollment:start",an(m,c))}class Nn{constructor(c){this.user=c,this.enrolledFactors=[],c._onReload(f=>{f.mfaInfo&&(this.enrolledFactors=f.mfaInfo.map(E=>ht._fromServerResponse(c.auth,E)))})}static _fromUser(c){return new Nn(c)}getSession(){var c=this;return(0,p.Z)(function*(){return J._fromIdtoken(yield c.user.getIdToken())})()}enroll(c,f){var E=this;return(0,p.Z)(function*(){const B=c,Y=yield E.getSession(),Te=yield Lt(E.user,B._process(E.user.auth,Y,f));return yield E.user._updateTokensIfNecessary(Te),E.user.reload()})()}unenroll(c){var f=this;return(0,p.Z)(function*(){var E;const B="string"==typeof c?c:c.uid,Y=yield f.user.getIdToken(),Te=yield Lt(f.user,function Zt(m,c){return Fn(m,"POST","/v2/accounts/mfaEnrollment:withdraw",an(m,c))}(f.user.auth,{idToken:Y,mfaEnrollmentId:B}));f.enrolledFactors=f.enrolledFactors.filter(({uid:st})=>st!==B),yield f.user._updateTokensIfNecessary(Te);try{yield f.user.reload()}catch(st){if("auth/user-token-expired"!==(null===(E=st)||void 0===E?void 0:E.code))throw st}})()}}const Ln=new WeakMap,Tr="__sak";class fi{constructor(c,f){this.storageRetriever=c,this.type=f}_isAvailable(){try{return this.storage?(this.storage.setItem(Tr,"1"),this.storage.removeItem(Tr),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(c,f){return this.storage.setItem(c,JSON.stringify(f)),Promise.resolve()}_get(c){const f=this.storage.getItem(c);return Promise.resolve(f?JSON.parse(f):null)}_remove(c){return this.storage.removeItem(c),Promise.resolve()}get storage(){return this.storageRetriever()}}const js=(()=>{class m extends fi{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(f,E)=>this.onStorageEvent(f,E),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function oi(){const m=(0,G.z$)();return vr(m)||re(m)}()&&function dn(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=mn(),this._shouldAllowMigration=!0}forAllChangedKeys(f){for(const E of Object.keys(this.listeners)){const B=this.storage.getItem(E),Y=this.localCache[E];B!==Y&&f(E,Y,B)}}onStorageEvent(f,E=!1){if(!f.key)return void this.forAllChangedKeys((st,kt,ln)=>{this.notifyListeners(st,ln)});const B=f.key;if(E?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const st=this.storage.getItem(B);if(f.newValue!==st)null!==f.newValue?this.storage.setItem(B,f.newValue):this.storage.removeItem(B);else if(this.localCache[B]===f.newValue&&!E)return}const Y=()=>{const st=this.storage.getItem(B);!E&&this.localCache[B]===st||this.notifyListeners(B,st)},Te=this.storage.getItem(B);!function Vt(){return(0,G.w1)()&&10===document.documentMode}()||Te===f.newValue||f.newValue===f.oldValue?Y():setTimeout(Y,10)}notifyListeners(f,E){this.localCache[f]=E;const B=this.listeners[f];if(B)for(const Y of Array.from(B))Y(E&&JSON.parse(E))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((f,E,B)=>{this.onStorageEvent(new StorageEvent("storage",{key:f,oldValue:E,newValue:B}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(f,E){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[f]||(this.listeners[f]=new Set,this.localCache[f]=this.storage.getItem(f)),this.listeners[f].add(E)}_removeListener(f,E){this.listeners[f]&&(this.listeners[f].delete(E),0===this.listeners[f].size&&delete this.listeners[f]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(f,E){var B=()=>super._set,Y=this;return(0,p.Z)(function*(){yield B().call(Y,f,E),Y.localCache[f]=JSON.stringify(E)})()}_get(f){var E=()=>super._get,B=this;return(0,p.Z)(function*(){const Y=yield E().call(B,f);return B.localCache[f]=JSON.stringify(Y),Y})()}_remove(f){var E=()=>super._remove,B=this;return(0,p.Z)(function*(){yield E().call(B,f),delete B.localCache[f]})()}}return m.type="LOCAL",m})(),Zr=(()=>{class m extends fi{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(f,E){}_removeListener(f,E){}}return m.type="SESSION",m})();let Xo=(()=>{class m{constructor(f){this.eventTarget=f,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(f){const E=this.receivers.find(Y=>Y.isListeningto(f));if(E)return E;const B=new m(f);return this.receivers.push(B),B}isListeningto(f){return this.eventTarget===f}handleEvent(f){var E=this;return(0,p.Z)(function*(){const B=f,{eventId:Y,eventType:Te,data:st}=B.data,kt=E.handlersMap[Te];if(!kt?.size)return;B.ports[0].postMessage({status:"ack",eventId:Y,eventType:Te});const ln=Array.from(kt).map(function(){var xn=(0,p.Z)(function*(ns){return ns(B.origin,st)});return function(ns){return xn.apply(this,arguments)}}()),kn=yield function vo(m){return Promise.all(m.map(function(){var c=(0,p.Z)(function*(f){try{return{fulfilled:!0,value:yield f}}catch(E){return{fulfilled:!1,reason:E}}});return function(f){return c.apply(this,arguments)}}()))}(ln);B.ports[0].postMessage({status:"done",eventId:Y,eventType:Te,response:kn})})()}_subscribe(f,E){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[f]||(this.handlersMap[f]=new Set),this.handlersMap[f].add(E)}_unsubscribe(f,E){this.handlersMap[f]&&E&&this.handlersMap[f].delete(E),(!E||0===this.handlersMap[f].size)&&delete this.handlersMap[f],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return m.receivers=[],m})();function $o(m="",c=10){let f="";for(let E=0;E<c;E++)f+=Math.floor(10*Math.random());return m+f}class bo{constructor(c){this.target=c,this.handlers=new Set}removeMessageHandler(c){c.messageChannel&&(c.messageChannel.port1.removeEventListener("message",c.onMessage),c.messageChannel.port1.close()),this.handlers.delete(c)}_send(c,f,E=50){var B=this;return(0,p.Z)(function*(){const Y=typeof MessageChannel<"u"?new MessageChannel:null;if(!Y)throw new Error("connection_unavailable");let Te,st;return new Promise((kt,ln)=>{const kn=$o("",20);Y.port1.start();const xn=setTimeout(()=>{ln(new Error("unsupported_event"))},E);st={messageChannel:Y,onMessage(ns){const ia=ns;if(ia.data.eventId===kn)switch(ia.data.status){case"ack":clearTimeout(xn),Te=setTimeout(()=>{ln(new Error("timeout"))},3e3);break;case"done":clearTimeout(Te),kt(ia.data.response);break;default:clearTimeout(xn),clearTimeout(Te),ln(new Error("invalid_response"))}}},B.handlers.add(st),Y.port1.addEventListener("message",st.onMessage),B.target.postMessage({eventType:c,eventId:kn,data:f},[Y.port2])}).finally(()=>{st&&B.removeMessageHandler(st)})})()}}function ai(){return window}function ha(){return typeof ai().WorkerGlobalScope<"u"&&"function"==typeof ai().importScripts}function Ra(){return(Ra=(0,p.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const Zs="firebaseLocalStorageDb",fa="firebaseLocalStorage",Tt="fbase_key";class Nr{constructor(c){this.request=c}toPromise(){return new Promise((c,f)=>{this.request.addEventListener("success",()=>{c(this.request.result)}),this.request.addEventListener("error",()=>{f(this.request.error)})})}}function To(m,c){return m.transaction([fa],c?"readwrite":"readonly").objectStore(fa)}function Qt(){const m=indexedDB.open(Zs,1);return new Promise((c,f)=>{m.addEventListener("error",()=>{f(m.error)}),m.addEventListener("upgradeneeded",()=>{const E=m.result;try{E.createObjectStore(fa,{keyPath:Tt})}catch(B){f(B)}}),m.addEventListener("success",(0,p.Z)(function*(){const E=m.result;E.objectStoreNames.contains(fa)?c(E):(E.close(),yield function za(){const m=indexedDB.deleteDatabase(Zs);return new Nr(m).toPromise()}(),c(yield Qt()))}))})}function vn(m,c,f){return Au.apply(this,arguments)}function Au(){return(Au=(0,p.Z)(function*(m,c,f){const E=To(m,!0).put({[Tt]:c,value:f});return new Nr(E).toPromise()})).apply(this,arguments)}function Je(){return(Je=(0,p.Z)(function*(m,c){const f=To(m,!1).get(c),E=yield new Nr(f).toPromise();return void 0===E?null:E.value})).apply(this,arguments)}function Et(m,c){const f=To(m,!0).delete(c);return new Nr(f).toPromise()}const Ia=(()=>{class m{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var f=this;return(0,p.Z)(function*(){return f.db||(f.db=yield Qt()),f.db})()}_withRetries(f){var E=this;return(0,p.Z)(function*(){let B=0;for(;;)try{const Y=yield E._openDb();return yield f(Y)}catch(Y){if(B++>3)throw Y;E.db&&(E.db.close(),E.db=void 0)}})()}initializeServiceWorkerMessaging(){var f=this;return(0,p.Z)(function*(){return ha()?f.initializeReceiver():f.initializeSender()})()}initializeReceiver(){var f=this;return(0,p.Z)(function*(){f.receiver=Xo._getInstance(function ea(){return ha()?self:null}()),f.receiver._subscribe("keyChanged",function(){var E=(0,p.Z)(function*(B,Y){return{keyProcessed:(yield f._poll()).includes(Y.key)}});return function(B,Y){return E.apply(this,arguments)}}()),f.receiver._subscribe("ping",function(){var E=(0,p.Z)(function*(B,Y){return["keyChanged"]});return function(B,Y){return E.apply(this,arguments)}}())})()}initializeSender(){var f=this;return(0,p.Z)(function*(){var E,B;if(f.activeServiceWorker=yield function Ma(){return Ra.apply(this,arguments)}(),!f.activeServiceWorker)return;f.sender=new bo(f.activeServiceWorker);const Y=yield f.sender._send("ping",{},800);!Y||(null===(E=Y[0])||void 0===E?void 0:E.fulfilled)&&(null===(B=Y[0])||void 0===B?void 0:B.value.includes("keyChanged"))&&(f.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(f){var E=this;return(0,p.Z)(function*(){if(E.sender&&E.activeServiceWorker&&function Gi(){var m;return(null===(m=navigator?.serviceWorker)||void 0===m?void 0:m.controller)||null}()===E.activeServiceWorker)try{yield E.sender._send("keyChanged",{key:f},E.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,p.Z)(function*(){try{if(!indexedDB)return!1;const f=yield Qt();return yield vn(f,Tr,"1"),yield Et(f,Tr),!0}catch{}return!1})()}_withPendingWrite(f){var E=this;return(0,p.Z)(function*(){E.pendingWrites++;try{yield f()}finally{E.pendingWrites--}})()}_set(f,E){var B=this;return(0,p.Z)(function*(){return B._withPendingWrite((0,p.Z)(function*(){return yield B._withRetries(Y=>vn(Y,f,E)),B.localCache[f]=E,B.notifyServiceWorker(f)}))})()}_get(f){var E=this;return(0,p.Z)(function*(){const B=yield E._withRetries(Y=>function Ht(m,c){return Je.apply(this,arguments)}(Y,f));return E.localCache[f]=B,B})()}_remove(f){var E=this;return(0,p.Z)(function*(){return E._withPendingWrite((0,p.Z)(function*(){return yield E._withRetries(B=>Et(B,f)),delete E.localCache[f],E.notifyServiceWorker(f)}))})()}_poll(){var f=this;return(0,p.Z)(function*(){const E=yield f._withRetries(Te=>{const st=To(Te,!1).getAll();return new Nr(st).toPromise()});if(!E)return[];if(0!==f.pendingWrites)return[];const B=[],Y=new Set;for(const{fbase_key:Te,value:st}of E)Y.add(Te),JSON.stringify(f.localCache[Te])!==JSON.stringify(st)&&(f.notifyListeners(Te,st),B.push(Te));for(const Te of Object.keys(f.localCache))f.localCache[Te]&&!Y.has(Te)&&(f.notifyListeners(Te,null),B.push(Te));return B})()}notifyListeners(f,E){this.localCache[f]=E;const B=this.listeners[f];if(B)for(const Y of Array.from(B))Y(E)}startPolling(){var f=this;this.stopPolling(),this.pollTimer=setInterval((0,p.Z)(function*(){return f._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(f,E){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[f]||(this.listeners[f]=new Set,this._get(f)),this.listeners[f].add(E)}_removeListener(f,E){this.listeners[f]&&(this.listeners[f].delete(E),0===this.listeners[f].size&&delete this.listeners[f]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return m.type="LOCAL",m})();function Na(m,c){return Fn(m,"POST","/v2/accounts/mfaSignIn:start",an(m,c))}function Ho(){return(Ho=(0,p.Z)(function*(m){return(yield Fn(m,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function ru(m){return new Promise((c,f)=>{const E=document.createElement("script");E.setAttribute("src",m),E.onload=c,E.onerror=B=>{const Y=it("internal-error");Y.customData=B,f(Y)},E.type="text/javascript",E.charset="UTF-8",function pa(){var m,c;return null!==(c=null===(m=document.getElementsByTagName("head"))||void 0===m?void 0:m[0])&&void 0!==c?c:document}().appendChild(E)})}function iu(m){return`__${m}${Math.floor(1e6*Math.random())}`}const wo=1e12;class Pr{constructor(c){this.auth=c,this.counter=wo,this._widgets=new Map}render(c,f){const E=this.counter;return this._widgets.set(E,new Ri(c,this.auth.name,f||{})),this.counter++,E}reset(c){var f;const E=c||wo;null===(f=this._widgets.get(E))||void 0===f||f.delete(),this._widgets.delete(E)}getResponse(c){var f;return(null===(f=this._widgets.get(c||wo))||void 0===f?void 0:f.getResponse())||""}execute(c){var f=this;return(0,p.Z)(function*(){var E;return null===(E=f._widgets.get(c||wo))||void 0===E||E.execute(),""})()}}class Ri{constructor(c,f,E){this.params=E,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const B="string"==typeof c?document.getElementById(c):c;ae(B,"argument-error",{appName:f}),this.container=B,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function On(m){const c=[],f="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let E=0;E<m;E++)c.push(f.charAt(Math.floor(Math.random()*f.length)));return c.join("")}(50);const{callback:c,"expired-callback":f}=this.params;if(c)try{c(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,f)try{f()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Go=iu("rcb"),gr=new tn(3e4,6e4);class mi{constructor(){var c;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(c=ai().grecaptcha)||void 0===c||!c.render)}load(c,f=""){return ae(function zt(m){return m.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(m)}(f),c,"argument-error"),this.shouldResolveImmediately(f)?Promise.resolve(ai().grecaptcha):new Promise((E,B)=>{const Y=ai().setTimeout(()=>{B(it(c,"network-request-failed"))},gr.get());ai()[Go]=()=>{ai().clearTimeout(Y),delete ai()[Go];const st=ai().grecaptcha;if(!st)return void B(it(c,"internal-error"));const kt=st.render;st.render=(ln,kn)=>{const xn=kt(ln,kn);return this.counter++,xn},this.hostLanguage=f,E(st)},ru(`https://www.google.com/recaptcha/api.js??${(0,G.xO)({onload:Go,render:"explicit",hl:f})}`).catch(()=>{clearTimeout(Y),B(it(c,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(c){var f;return!(null===(f=ai().grecaptcha)||void 0===f||!f.render)&&(c===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class ta{load(c){return(0,p.Z)(function*(){return new Pr(c)})()}clearedOneInstance(){}}const qu="recaptcha",Wa={theme:"light",type:"image"};class ds{constructor(c,f=Object.assign({},Wa),E){this.parameters=f,this.type=qu,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=An(E),this.isInvisible="invisible"===this.parameters.size,ae(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const B="string"==typeof c?document.getElementById(c):c;ae(B,this.auth,"argument-error"),this.container=B,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new ta:new mi,this.validateStartingState()}verify(){var c=this;return(0,p.Z)(function*(){c.assertNotDestroyed();const f=yield c.render(),E=c.getAssertedRecaptcha();return E.getResponse(f)||new Promise(Y=>{const Te=st=>{!st||(c.tokenChangeListeners.delete(Te),Y(st))};c.tokenChangeListeners.add(Te),c.isInvisible&&E.execute(f)})})()}render(){try{this.assertNotDestroyed()}catch(c){return Promise.reject(c)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(c=>{throw this.renderPromise=null,c})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(c=>{this.container.removeChild(c)})}validateStartingState(){ae(!this.parameters.sitekey,this.auth,"argument-error"),ae(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),ae(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(c){return f=>{if(this.tokenChangeListeners.forEach(E=>E(f)),"function"==typeof c)c(f);else if("string"==typeof c){const E=ai()[c];"function"==typeof E&&E(f)}}}assertNotDestroyed(){ae(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var c=this;return(0,p.Z)(function*(){if(yield c.init(),!c.widgetId){let f=c.container;if(!c.isInvisible){const E=document.createElement("div");f.appendChild(E),f=E}c.widgetId=c.getAssertedRecaptcha().render(f,c.parameters)}return c.widgetId})()}init(){var c=this;return(0,p.Z)(function*(){ae(bt()&&!ha(),c.auth,"internal-error"),yield function Da(){let m=null;return new Promise(c=>{"complete"!==document.readyState?(m=()=>c(),window.addEventListener("load",m)):c()}).catch(c=>{throw m&&window.removeEventListener("load",m),c})}(),c.recaptcha=yield c._recaptchaLoader.load(c.auth,c.auth.languageCode||void 0);const f=yield function Ks(m){return Ho.apply(this,arguments)}(c.auth);ae(f,c.auth,"internal-error"),c.parameters.sitekey=f})()}getAssertedRecaptcha(){return ae(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class ka{constructor(c,f){this.verificationId=c,this.onConfirmation=f}confirm(c){const f=gi._fromVerification(this.verificationId,c);return this.onConfirmation(f)}}function ma(){return(ma=(0,p.Z)(function*(m,c,f){const E=An(m),B=yield na(E,c,(0,G.m9)(f));return new ka(B,Y=>zr(E,Y))})).apply(this,arguments)}function yi(){return(yi=(0,p.Z)(function*(m,c,f){const E=(0,G.m9)(m);yield qn(!1,E,"phone");const B=yield na(E.auth,c,(0,G.m9)(f));return new ka(B,Y=>Vs(E,Y))})).apply(this,arguments)}function Ca(){return(Ca=(0,p.Z)(function*(m,c,f){const E=(0,G.m9)(m),B=yield na(E.auth,c,(0,G.m9)(f));return new ka(B,Y=>Vo(E,Y))})).apply(this,arguments)}function na(m,c,f){return So.apply(this,arguments)}function So(){return(So=(0,p.Z)(function*(m,c,f){var E;const B=yield f.verify();try{let Y;if(ae("string"==typeof B,m,"argument-error"),ae(f.type===qu,m,"argument-error"),Y="string"==typeof c?{phoneNumber:c}:c,"session"in Y){const Te=Y.session;if("phoneNumber"in Y)return ae("enroll"===Te.type,m,"internal-error"),(yield Ct(m,{idToken:Te.credential,phoneEnrollmentInfo:{phoneNumber:Y.phoneNumber,recaptchaToken:B}})).phoneSessionInfo.sessionInfo;{ae("signin"===Te.type,m,"internal-error");const st=(null===(E=Y.multiFactorHint)||void 0===E?void 0:E.uid)||Y.multiFactorUid;return ae(st,m,"missing-multi-factor-info"),(yield Na(m,{mfaPendingCredential:Te.credential,mfaEnrollmentId:st,phoneSignInInfo:{recaptchaToken:B}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:Te}=yield ct(m,{phoneNumber:Y.phoneNumber,recaptchaToken:B});return Te}}finally{f._reset()}})).apply(this,arguments)}function Ze(){return(Ze=(0,p.Z)(function*(m,c){yield Pi((0,G.m9)(m),c)})).apply(this,arguments)}let ba=(()=>{class m{constructor(f){this.providerId=m.PROVIDER_ID,this.auth=An(f)}verifyPhoneNumber(f,E){return na(this.auth,f,(0,G.m9)(E))}static credential(f,E){return gi._fromVerification(f,E)}static credentialFromResult(f){return m.credentialFromTaggedObject(f)}static credentialFromError(f){return m.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{phoneNumber:E,temporaryProof:B}=f;return E&&B?gi._fromTokenResponse(E,B):null}}return m.PROVIDER_ID="phone",m.PHONE_SIGN_IN_METHOD="phone",m})();function Is(m,c){return c?de(c):(ae(m._popupRedirectResolver,m,"argument-error"),m._popupRedirectResolver)}class qa extends Jr{constructor(c){super("custom","custom"),this.params=c}_getIdTokenResponse(c){return ri(c,this._buildIdpRequest())}_linkToIdToken(c,f){return ri(c,this._buildIdpRequest(f))}_getReauthenticationResolver(c){return ri(c,this._buildIdpRequest())}_buildIdpRequest(c){const f={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return c&&(f.idToken=c),f}}function Ds(m){return Jn(m.auth,new qa(m),m.bypassAuthState)}function Ao(m){const{auth:c,user:f}=m;return ae(f,c,"internal-error"),as(f,new qa(m),m.bypassAuthState)}function v(m){return w.apply(this,arguments)}function w(){return(w=(0,p.Z)(function*(m){const{auth:c,user:f}=m;return ae(f,c,"internal-error"),Pi(f,new qa(m),m.bypassAuthState)})).apply(this,arguments)}class _{constructor(c,f,E,B,Y=!1){this.auth=c,this.resolver=E,this.user=B,this.bypassAuthState=Y,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(f)?f:[f]}execute(){var c=this;return new Promise(function(){var f=(0,p.Z)(function*(E,B){c.pendingPromise={resolve:E,reject:B};try{c.eventManager=yield c.resolver._initialize(c.auth),yield c.onExecution(),c.eventManager.registerConsumer(c)}catch(Y){c.reject(Y)}});return function(E,B){return f.apply(this,arguments)}}())}onAuthEvent(c){var f=this;return(0,p.Z)(function*(){const{urlResponse:E,sessionId:B,postBody:Y,tenantId:Te,error:st,type:kt}=c;if(st)return void f.reject(st);const ln={auth:f.auth,requestUri:E,sessionId:B,tenantId:Te||void 0,postBody:Y||void 0,user:f.user,bypassAuthState:f.bypassAuthState};try{f.resolve(yield f.getIdpTask(kt)(ln))}catch(kn){f.reject(kn)}})()}onError(c){this.reject(c)}getIdpTask(c){switch(c){case"signInViaPopup":case"signInViaRedirect":return Ds;case"linkViaPopup":case"linkViaRedirect":return v;case"reauthViaPopup":case"reauthViaRedirect":return Ao;default:he(this.auth,"internal-error")}}resolve(c){ne(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(c),this.unregisterAndCleanUp()}reject(c){ne(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(c),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const b=new tn(2e3,1e4);function z(){return(z=(0,p.Z)(function*(m,c,f){const E=An(m);_t(m,c,os);const B=Is(E,f);return new rn(E,"signInViaPopup",c,B).executeNotNull()})).apply(this,arguments)}function pe(){return(pe=(0,p.Z)(function*(m,c,f){const E=(0,G.m9)(m);_t(E.auth,c,os);const B=Is(E.auth,f);return new rn(E.auth,"reauthViaPopup",c,B,E).executeNotNull()})).apply(this,arguments)}function Ot(){return(Ot=(0,p.Z)(function*(m,c,f){const E=(0,G.m9)(m);_t(E.auth,c,os);const B=Is(E.auth,f);return new rn(E.auth,"linkViaPopup",c,B,E).executeNotNull()})).apply(this,arguments)}let rn=(()=>{class m extends _{constructor(f,E,B,Y,Te){super(f,E,Y,Te),this.provider=B,this.authWindow=null,this.pollId=null,m.currentPopupAction&&m.currentPopupAction.cancel(),m.currentPopupAction=this}executeNotNull(){var f=this;return(0,p.Z)(function*(){const E=yield f.execute();return ae(E,f.auth,"internal-error"),E})()}onExecution(){var f=this;return(0,p.Z)(function*(){ne(1===f.filter.length,"Popup operations only handle one event");const E=$o();f.authWindow=yield f.resolver._openPopup(f.auth,f.provider,f.filter[0],E),f.authWindow.associatedEvent=E,f.resolver._originValidation(f.auth).catch(B=>{f.reject(B)}),f.resolver._isIframeWebStorageSupported(f.auth,B=>{B||f.reject(it(f.auth,"web-storage-unsupported"))}),f.pollUserCancellation()})()}get eventId(){var f;return(null===(f=this.authWindow)||void 0===f?void 0:f.associatedEvent)||null}cancel(){this.reject(it(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,m.currentPopupAction=null}pollUserCancellation(){const f=()=>{var E,B;this.pollId=null!==(B=null===(E=this.authWindow)||void 0===E?void 0:E.window)&&void 0!==B&&B.closed?window.setTimeout(()=>{this.pollId=null,this.reject(it(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(f,b.get())};f()}}return m.currentPopupAction=null,m})();const Dn=new Map;class zn extends _{constructor(c,f,E=!1){super(c,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],f,void 0,E),this.eventId=null}execute(){var c=()=>super.execute,f=this;return(0,p.Z)(function*(){let E=Dn.get(f.auth._key());if(!E){try{const Y=(yield function so(m,c){return qi.apply(this,arguments)}(f.resolver,f.auth))?yield c().call(f):null;E=()=>Promise.resolve(Y)}catch(B){E=()=>Promise.reject(B)}Dn.set(f.auth._key(),E)}return f.bypassAuthState||Dn.set(f.auth._key(),()=>Promise.resolve(null)),E()})()}onAuthEvent(c){var f=()=>super.onAuthEvent,E=this;return(0,p.Z)(function*(){if("signInViaRedirect"===c.type)return f().call(E,c);if("unknown"!==c.type){if(c.eventId){const B=yield E.auth._redirectUserForId(c.eventId);if(B)return E.user=B,f().call(E,c);E.resolve(null)}}else E.resolve(null)})()}onExecution(){return(0,p.Z)(function*(){})()}cleanUp(){}}function qi(){return(qi=(0,p.Z)(function*(m,c){const f=ki(c),E=oo(m);if(!(yield E._isAvailable()))return!1;const B="true"===(yield E._get(f));return yield E._remove(f),B})).apply(this,arguments)}function pi(m,c){return zo.apply(this,arguments)}function zo(){return(zo=(0,p.Z)(function*(m,c){return oo(m)._set(ki(c),"true")})).apply(this,arguments)}function Fa(m,c){Dn.set(m._key(),c)}function oo(m){return de(m._redirectPersistence)}function ki(m){return er("pendingRedirect",m.config.apiKey,m.name)}function x(){return(x=(0,p.Z)(function*(m,c,f){const E=An(m);_t(m,c,os);const B=Is(E,f);return yield pi(B,E),B._openRedirect(E,c,"signInViaRedirect")})).apply(this,arguments)}function ie(){return(ie=(0,p.Z)(function*(m,c,f){const E=(0,G.m9)(m);_t(E.auth,c,os);const B=Is(E.auth,f);yield pi(B,E.auth);const Y=yield En(E);return B._openRedirect(E.auth,c,"reauthViaRedirect",Y)})).apply(this,arguments)}function It(){return(It=(0,p.Z)(function*(m,c,f){const E=(0,G.m9)(m);_t(E.auth,c,os);const B=Is(E.auth,f);yield qn(!1,E,c.providerId),yield pi(B,E.auth);const Y=yield En(E);return B._openRedirect(E.auth,c,"linkViaRedirect",Y)})).apply(this,arguments)}function wn(){return(wn=(0,p.Z)(function*(m,c){return yield An(m)._initializationPromise,bn(m,c,!1)})).apply(this,arguments)}function bn(m,c){return Pn.apply(this,arguments)}function Pn(){return(Pn=(0,p.Z)(function*(m,c,f=!1){const E=An(m),B=Is(E,c),Te=yield new zn(E,B,f).execute();return Te&&!f&&(delete Te.user._redirectEventId,yield E._persistUserIfCurrent(Te.user),yield E._setRedirectUser(null,c)),Te})).apply(this,arguments)}function En(m){return ni.apply(this,arguments)}function ni(){return(ni=(0,p.Z)(function*(m){const c=$o(`${m.uid}:::`);return m._redirectEventId=c,yield m.auth._setRedirectUser(m),yield m.auth._persistUserIfCurrent(m),c})).apply(this,arguments)}class ra{constructor(c){this.auth=c,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(c){this.consumers.add(c),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,c)&&(this.sendToConsumer(this.queuedRedirectEvent,c),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(c){this.consumers.delete(c)}onEvent(c){if(this.hasEventBeenHandled(c))return!1;let f=!1;return this.consumers.forEach(E=>{this.isEventForConsumer(c,E)&&(f=!0,this.sendToConsumer(c,E),this.saveEventToCache(c))}),this.hasHandledPotentialRedirect||!function Va(m){switch(m.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return xo(m);default:return!1}}(c)||(this.hasHandledPotentialRedirect=!0,f||(this.queuedRedirectEvent=c,f=!0)),f}sendToConsumer(c,f){var E;if(c.error&&!xo(c)){const B=(null===(E=c.error.code)||void 0===E?void 0:E.split("auth/")[1])||"internal-error";f.onError(it(this.auth,B))}else f.onAuthEvent(c)}isEventForConsumer(c,f){const E=null===f.eventId||!!c.eventId&&c.eventId===f.eventId;return f.filter.includes(c.type)&&E}hasEventBeenHandled(c){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(La(c))}saveEventToCache(c){this.cachedEventUids.add(La(c)),this.lastProcessedEventTime=Date.now()}}function La(m){return[m.type,m.eventId,m.sessionId,m.tenantId].filter(c=>c).join("-")}function xo({type:m,error:c}){return"unknown"===m&&"auth/no-auth-event"===c?.code}function Wo(m){return Ua.apply(this,arguments)}function Ua(){return(Ua=(0,p.Z)(function*(m,c={}){return Fn(m,"GET","/v1/projects",c)})).apply(this,arguments)}const Za=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ya=/^https?/;function zc(){return(zc=(0,p.Z)(function*(m){if(m.config.emulator)return;const{authorizedDomains:c}=yield Wo(m);for(const f of c)try{if($f(f))return}catch{}he(m,"unauthorized-domain")})).apply(this,arguments)}function $f(m){const c=wt(),{protocol:f,hostname:E}=new URL(c);if(m.startsWith("chrome-extension://")){const Te=new URL(m);return""===Te.hostname&&""===E?"chrome-extension:"===f&&m.replace("chrome-extension://","")===c.replace("chrome-extension://",""):"chrome-extension:"===f&&Te.hostname===E}if(!ya.test(f))return!1;if(Za.test(m))return E===m;const B=m.replace(/\./g,"\\.");return new RegExp("^(.+\\."+B+"|"+B+")$","i").test(E)}const Hf=new tn(3e4,6e4);function Wc(){const m=ai().___jsl;if(m?.H)for(const c of Object.keys(m.H))if(m.H[c].r=m.H[c].r||[],m.H[c].L=m.H[c].L||[],m.H[c].r=[...m.H[c].L],m.CP)for(let f=0;f<m.CP.length;f++)m.CP[f]=null}let Cs=null;function Jd(m){return Cs=Cs||function wl(m){return new Promise((c,f)=>{var E,B,Y;function Te(){Wc(),gapi.load("gapi.iframes",{callback:()=>{c(gapi.iframes.getContext())},ontimeout:()=>{Wc(),f(it(m,"network-request-failed"))},timeout:Hf.get()})}if(null!==(B=null===(E=ai().gapi)||void 0===E?void 0:E.iframes)&&void 0!==B&&B.Iframe)c(gapi.iframes.getContext());else{if(null===(Y=ai().gapi)||void 0===Y||!Y.load){const st=iu("iframefcb");return ai()[st]=()=>{gapi.load?Te():f(it(m,"network-request-failed"))},ru(`https://apis.google.com/js/api.js?onload=${st}`).catch(kt=>f(kt))}Te()}}).catch(c=>{throw Cs=null,c})}(m),Cs}const bi=new tn(5e3,15e3),Ku={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Zc=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function El(m){const c=m.config;ae(c.authDomain,m,"auth-domain-config-required");const f=c.emulator?qt(c,"emulator/auth/iframe"):`https://${m.config.authDomain}/__/auth/iframe`,E={apiKey:c.apiKey,appName:m.name,v:be.SDK_VERSION},B=Zc.get(m.config.apiHost);B&&(E.eid=B);const Y=m._getFrameworks();return Y.length&&(E.fw=Y.join(",")),`${f}?${(0,G.xO)(E).slice(1)}`}function Ka(){return Ka=(0,p.Z)(function*(m){const c=yield Jd(m),f=ai().gapi;return ae(f,m,"internal-error"),c.open({where:document.body,url:El(m),messageHandlersFilter:f.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Ku,dontclear:!0},E=>new Promise(function(){var B=(0,p.Z)(function*(Y,Te){yield E.restyle({setHideOnLeave:!1});const st=it(m,"network-request-failed"),kt=ai().setTimeout(()=>{Te(st)},bi.get());function ln(){ai().clearTimeout(kt),Y(E)}E.ping(ln).then(ln,()=>{Te(st)})});return function(Y,Te){return B.apply(this,arguments)}}()))}),Ka.apply(this,arguments)}const ac={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Dl{constructor(c){this.window=c,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function lc(m,c,f,E,B,Y){ae(m.config.authDomain,m,"auth-domain-config-required"),ae(m.config.apiKey,m,"invalid-api-key");const Te={apiKey:m.config.apiKey,appName:m.name,authType:f,redirectUrl:E,v:be.SDK_VERSION,eventId:B};if(c instanceof os){c.setDefaultLanguage(m.languageCode),Te.providerId=c.providerId||"",(0,G.xb)(c.getCustomParameters())||(Te.customParameters=JSON.stringify(c.getCustomParameters()));for(const[kt,ln]of Object.entries(Y||{}))Te[kt]=ln}if(c instanceof xi){const kt=c.getScopes().filter(ln=>""!==ln);kt.length>0&&(Te.scopes=kt.join(","))}m.tenantId&&(Te.tid=m.tenantId);const st=Te;for(const kt of Object.keys(st))void 0===st[kt]&&delete st[kt];return`${function uu({config:m}){return m.emulator?qt(m,"emulator/auth/handler"):`https://${m.authDomain}/__/auth/handler`}(m)}?${(0,G.xO)(st).slice(1)}`}const lu="webStorageSupport";class Ys extends class nh{constructor(c){this.factorId=c}_process(c,f,E){switch(f.type){case"enroll":return this._finalizeEnroll(c,f.credential,E);case"signin":return this._finalizeSignIn(c,f.credential);default:return Le("unexpected MultiFactorSessionType")}}}{constructor(c){super("phone"),this.credential=c}static _fromCredential(c){return new Ys(c)}_finalizeEnroll(c,f,E){return function sn(m,c){return Fn(m,"POST","/v2/accounts/mfaEnrollment:finalize",an(m,c))}(c,{idToken:f,displayName:E,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(c,f){return function Pa(m,c){return Fn(m,"POST","/v2/accounts/mfaSignIn:finalize",an(m,c))}(c,{mfaPendingCredential:f,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Yu=(()=>{class m{constructor(){}static assertion(f){return Ys._fromCredential(f)}}return m.FACTOR_ID="phone",m})();var Mu="@firebase/auth";class ih{constructor(c){this.auth=c,this.internalListeners=new Map}getUid(){var c;return this.assertAuthConfigured(),(null===(c=this.auth.currentUser)||void 0===c?void 0:c.uid)||null}getToken(c){var f=this;return(0,p.Z)(function*(){return f.assertAuthConfigured(),yield f.auth._initializationPromise,f.auth.currentUser?{accessToken:yield f.auth.currentUser.getIdToken(c)}:null})()}addAuthTokenListener(c){if(this.assertAuthConfigured(),this.internalListeners.has(c))return;const f=this.auth.onIdTokenChanged(E=>{var B;c((null===(B=E)||void 0===B?void 0:B.stsTokenManager.accessToken)||null)});this.internalListeners.set(c,f),this.updateProactiveRefresh()}removeAuthTokenListener(c){this.assertAuthConfigured();const f=this.internalListeners.get(c);!f||(this.internalListeners.delete(c),f(),this.updateProactiveRefresh())}assertAuthConfigured(){ae(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function bs(){return window}function hc(){return(hc=(0,p.Z)(function*(m,c,f){var E;const{BuildInfo:B}=bs();ne(c.sessionId,"AuthEvent did not contain a session ID");const Y=yield Xc(c.sessionId),Te={};return re()?Te.ibi=B.packageName:Dr()?Te.apn=B.packageName:he(m,"operation-not-supported-in-this-environment"),B.displayName&&(Te.appDisplayName=B.displayName),Te.sessionId=Y,lc(m,f,c.type,void 0,null!==(E=c.eventId)&&void 0!==E?E:void 0,Te)})).apply(this,arguments)}function cu(){return(cu=(0,p.Z)(function*(m){const{BuildInfo:c}=bs(),f={};re()?f.iosBundleId=c.packageName:Dr()?f.androidPackageName=c.packageName:he(m,"operation-not-supported-in-this-environment"),yield Wo(m,f)})).apply(this,arguments)}function Ru(){return(Ru=(0,p.Z)(function*(m,c,f){const{cordova:E}=bs();let B=()=>{};try{yield new Promise((Y,Te)=>{let st=null;function kt(){var xn;Y();const ns=null===(xn=E.plugins.browsertab)||void 0===xn?void 0:xn.close;"function"==typeof ns&&ns(),"function"==typeof f?.close&&f.close()}function ln(){st||(st=window.setTimeout(()=>{Te(it(m,"redirect-cancelled-by-user"))},2e3))}function kn(){"visible"===document?.visibilityState&&ln()}c.addPassiveListener(kt),document.addEventListener("resume",ln,!1),Dr()&&document.addEventListener("visibilitychange",kn,!1),B=()=>{c.removePassiveListener(kt),document.removeEventListener("resume",ln,!1),document.removeEventListener("visibilitychange",kn,!1),st&&window.clearTimeout(st)}})}finally{B()}})).apply(this,arguments)}function Xc(m){return bl.apply(this,arguments)}function bl(){return(bl=(0,p.Z)(function*(m){const c=ed(m),f=yield crypto.subtle.digest("SHA-256",c);return Array.from(new Uint8Array(f)).map(B=>B.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function ed(m){if(ne(/[0-9a-zA-Z]+/.test(m),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(m);const c=new ArrayBuffer(m.length),f=new Uint8Array(c);for(let E=0;E<m.length;E++)f[E]=m.charCodeAt(E);return f}!function oh(m){(0,be._registerComponent)(new Re.wA("auth",(c,{options:f})=>{const E=c.getProvider("app").getImmediate(),B=c.getProvider("heartbeat"),{apiKey:Y,authDomain:Te}=E.options;return((st,kt)=>{ae(Y&&!Y.includes(":"),"invalid-api-key",{appName:st.name}),ae(!Te?.includes(":"),"argument-error",{appName:st.name});const ln={apiKey:Y,authDomain:Te,clientPlatform:m,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:yr(m)},kn=new yn(st,kt,ln);return function dt(m,c){const f=c?.persistence||[],E=(Array.isArray(f)?f:[f]).map(de);c?.errorMap&&m._updateErrorMap(c.errorMap),m._initializeWithPersistence(E,c?.popupRedirectResolver)}(kn,f),kn})(E,B)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((c,f,E)=>{c.getProvider("auth-internal").initialize()})),(0,be._registerComponent)(new Re.wA("auth-internal",c=>{const f=An(c.getProvider("auth").getImmediate());return new ih(f)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,be.registerVersion)(Mu,"0.20.6",function sh(m){switch(m){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(m)),(0,be.registerVersion)(Mu,"0.20.6","esm2017")}("Browser");class xg extends ra{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(c=>{this.resolveInialized=c})}addPassiveListener(c){this.passiveListeners.add(c)}removePassiveListener(c){this.passiveListeners.delete(c)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(c){return this.resolveInialized(),this.passiveListeners.forEach(f=>f(c)),super.onEvent(c)}initialized(){var c=this;return(0,p.Z)(function*(){yield c.initPromise})()}}function Ba(m){return td.apply(this,arguments)}function td(){return(td=(0,p.Z)(function*(m){const c=yield hu()._get(pc(m));return c&&(yield hu()._remove(pc(m))),c})).apply(this,arguments)}function nd(){const m=[],c="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let f=0;f<20;f++){const E=Math.floor(Math.random()*c.length);m.push(c.charAt(E))}return m.join("")}function hu(){return de(js)}function pc(m){return er("authEvent",m.config.apiKey,m.name)}function Sl(m){if(!m?.includes("?"))return{};const[c,...f]=m.split("?");return(0,G.zd)(f.join("?"))}function Al(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:it("no-auth-event")}}function Ou(){var m;return(null===(m=self?.location)||void 0===m?void 0:m.protocol)||null}function ja(m=(0,G.z$)()){return!("file:"!==Ou()&&"ionic:"!==Ou()&&"capacitor:"!==Ou()||!m.toLowerCase().match(/iphone|ipad|ipod|android/))}function id(){try{const m=self.localStorage,c=$o();if(m)return m.setItem(c,"1"),m.removeItem(c),!function Ml(m=(0,G.z$)()){return function lh(){return(0,G.w1)()&&11===document?.documentMode}()||function ch(m=(0,G.z$)()){return/Edge\/\d+/.test(m)}(m)}()||(0,G.hl)()}catch{return Nu()&&(0,G.hl)()}return!1}function Nu(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Ki(){return(function Xu(){return"http:"===Ou()||"https:"===Ou()}()||(0,G.ru)()||ja())&&!function uh(){return(0,G.b$)()||(0,G.UG)()}()&&id()&&!Nu()}function Sr(){return ja()&&typeof document<"u"}function Rl(){return(Rl=(0,p.Z)(function*(){return!!Sr()&&new Promise(m=>{const c=setTimeout(()=>{m(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(c),m(!0)})})})).apply(this,arguments)}const qo={LOCAL:"local",NONE:"none",SESSION:"session"},Hs=ae,Ol="persistence";function yc(m){return Zo.apply(this,arguments)}function Zo(){return(Zo=(0,p.Z)(function*(m){yield m._initializationPromise;const c=Pu(),f=er(Ol,m.config.apiKey,m.name);c&&c.setItem(f,m._getPersistence())})).apply(this,arguments)}function Pu(){var m;try{return(null===(m=function fu(){return typeof window<"u"?window:null}())||void 0===m?void 0:m.sessionStorage)||null}catch{return null}}const ku=ae;class pu{constructor(){this.browserResolver=de(class zf{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Zr,this._completeRedirectFn=bn,this._overrideRedirectResult=Fa}_openPopup(c,f,E,B){var Y=this;return(0,p.Z)(function*(){var Te;ne(null===(Te=Y.eventManagers[c._key()])||void 0===Te?void 0:Te.manager,"_initialize() not called before _openPopup()");const st=lc(c,f,E,wt(),B);return function uc(m,c,f,E=500,B=600){const Y=Math.max((window.screen.availHeight-B)/2,0).toString(),Te=Math.max((window.screen.availWidth-E)/2,0).toString();let st="";const kt=Object.assign(Object.assign({},ac),{width:E.toString(),height:B.toString(),top:Y,left:Te}),ln=(0,G.z$)().toLowerCase();f&&(st=Qr(ln)?"_blank":f),cr(ln)&&(c=c||"http://localhost",kt.scrollbars="yes");const kn=Object.entries(kt).reduce((ns,[ia,kl])=>`${ns}${ia}=${kl},`,"");if(function at(m=(0,G.z$)()){var c;return re(m)&&!(null===(c=window.navigator)||void 0===c||!c.standalone)}(ln)&&"_self"!==st)return function Xd(m,c){const f=document.createElement("a");f.href=m,f.target=c;const E=document.createEvent("MouseEvent");E.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),f.dispatchEvent(E)}(c||"",st),new Dl(null);const xn=window.open(c||"",st,kn);ae(xn,m,"popup-blocked");try{xn.focus()}catch{}return new Dl(xn)}(c,st,$o())})()}_openRedirect(c,f,E,B){var Y=this;return(0,p.Z)(function*(){return yield Y._originValidation(c),function ro(m){ai().location.href=m}(lc(c,f,E,wt(),B)),new Promise(()=>{})})()}_initialize(c){const f=c._key();if(this.eventManagers[f]){const{manager:B,promise:Y}=this.eventManagers[f];return B?Promise.resolve(B):(ne(Y,"If manager is not set, promise should be"),Y)}const E=this.initAndGetManager(c);return this.eventManagers[f]={promise:E},E.catch(()=>{delete this.eventManagers[f]}),E}initAndGetManager(c){var f=this;return(0,p.Z)(function*(){const E=yield function Il(m){return Ka.apply(this,arguments)}(c),B=new ra(c);return E.register("authEvent",Y=>(ae(Y?.authEvent,c,"invalid-auth-event"),{status:B.onEvent(Y.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),f.eventManagers[c._key()]={manager:B},f.iframes[c._key()]=E,B})()}_isIframeWebStorageSupported(c,f){this.iframes[c._key()].send(lu,{type:lu},B=>{var Y;const Te=null===(Y=B?.[0])||void 0===Y?void 0:Y[lu];void 0!==Te&&f(!!Te),he(c,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(c){const f=c._key();return this.originValidationPromises[f]||(this.originValidationPromises[f]=function au(m){return zc.apply(this,arguments)}(c)),this.originValidationPromises[f]}get _shouldInitProactively(){return mn()||vr()||re()}}),this.cordovaResolver=de(class Zi{constructor(){this._redirectPersistence=Zr,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=bn,this._overrideRedirectResult=Fa}_initialize(c){var f=this;return(0,p.Z)(function*(){const E=c._key();let B=f.eventManagers.get(E);return B||(B=new xg(c),f.eventManagers.set(E,B),f.attachCallbackListeners(c,B)),B})()}_openPopup(c){he(c,"operation-not-supported-in-this-environment")}_openRedirect(c,f,E,B){var Y=this;return(0,p.Z)(function*(){!function Jc(m){var c,f,E,B,Y,Te,st,kt,ln,kn;const xn=bs();ae("function"==typeof(null===(c=xn?.universalLinks)||void 0===c?void 0:c.subscribe),m,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),ae(typeof(null===(f=xn?.BuildInfo)||void 0===f?void 0:f.packageName)<"u",m,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),ae("function"==typeof(null===(Y=null===(B=null===(E=xn?.cordova)||void 0===E?void 0:E.plugins)||void 0===B?void 0:B.browsertab)||void 0===Y?void 0:Y.openUrl),m,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),ae("function"==typeof(null===(kt=null===(st=null===(Te=xn?.cordova)||void 0===Te?void 0:Te.plugins)||void 0===st?void 0:st.browsertab)||void 0===kt?void 0:kt.isAvailable),m,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),ae("function"==typeof(null===(kn=null===(ln=xn?.cordova)||void 0===ln?void 0:ln.InAppBrowser)||void 0===kn?void 0:kn.open),m,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(c);const Te=yield Y._initialize(c);yield Te.initialized(),Te.resetRedirect(),function _i(){Dn.clear()}(),yield Y._originValidation(c);const st=function fc(m,c,f=null){return{type:c,eventId:f,urlResponse:null,sessionId:nd(),postBody:null,tenantId:m.tenantId,error:it(m,"no-auth-event")}}(c,E,B);yield function du(m,c){return hu()._set(pc(m),c)}(c,st);const kt=yield function Cl(m,c,f){return hc.apply(this,arguments)}(c,st,f),ln=yield function Qc(m){const{cordova:c}=bs();return new Promise(f=>{c.plugins.browsertab.isAvailable(E=>{let B=null;E?c.plugins.browsertab.openUrl(m):B=c.InAppBrowser.open(m,function Ve(m=(0,G.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(m)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(m)}()?"_blank":"_system","location=yes"),f(B)})})}(kt);return function Ta(m,c,f){return Ru.apply(this,arguments)}(c,Te,ln)})()}_isIframeWebStorageSupported(c,f){throw new Error("Method not implemented.")}_originValidation(c){const f=c._key();return this.originValidationPromises[f]||(this.originValidationPromises[f]=function Yc(m){return cu.apply(this,arguments)}(c)),this.originValidationPromises[f]}attachCallbackListeners(c,f){const{universalLinks:E,handleOpenURL:B,BuildInfo:Y}=bs(),Te=setTimeout((0,p.Z)(function*(){yield Ba(c),f.onEvent(Al())}),500),st=function(){var kn=(0,p.Z)(function*(xn){clearTimeout(Te);const ns=yield Ba(c);let ia=null;ns&&xn?.url&&(ia=function Qu(m,c){var f,E;const B=function Tl(m){const c=Sl(m),f=c.link?decodeURIComponent(c.link):void 0,E=Sl(f).link,B=c.deep_link_id?decodeURIComponent(c.deep_link_id):void 0;return Sl(B).link||B||E||f||m}(c);if(B.includes("/__/auth/callback")){const Y=Sl(B),Te=Y.firebaseError?function ah(m){try{return JSON.parse(m)}catch{return null}}(decodeURIComponent(Y.firebaseError)):null,st=null===(E=null===(f=Te?.code)||void 0===f?void 0:f.split("auth/"))||void 0===E?void 0:E[1],kt=st?it(st):null;return kt?{type:m.type,eventId:m.eventId,tenantId:m.tenantId,error:kt,urlResponse:null,sessionId:null,postBody:null}:{type:m.type,eventId:m.eventId,tenantId:m.tenantId,sessionId:m.sessionId,urlResponse:B,postBody:null}}return null}(ns,xn.url)),f.onEvent(ia||Al())});return function(ns){return kn.apply(this,arguments)}}();typeof E<"u"&&"function"==typeof E.subscribe&&E.subscribe(null,st);const kt=B,ln=`${Y.packageName.toLowerCase()}://`;bs().handleOpenURL=function(){var kn=(0,p.Z)(function*(xn){if(xn.toLowerCase().startsWith(ln)&&st({url:xn}),"function"==typeof kt)try{kt(xn)}catch(ns){console.error(ns)}});return function(xn){return kn.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=Zr,this._completeRedirectFn=bn,this._overrideRedirectResult=Fa}_initialize(c){var f=this;return(0,p.Z)(function*(){return yield f.selectUnderlyingResolver(),f.assertedUnderlyingResolver._initialize(c)})()}_openPopup(c,f,E,B){var Y=this;return(0,p.Z)(function*(){return yield Y.selectUnderlyingResolver(),Y.assertedUnderlyingResolver._openPopup(c,f,E,B)})()}_openRedirect(c,f,E,B){var Y=this;return(0,p.Z)(function*(){return yield Y.selectUnderlyingResolver(),Y.assertedUnderlyingResolver._openRedirect(c,f,E,B)})()}_isIframeWebStorageSupported(c,f){this.assertedUnderlyingResolver._isIframeWebStorageSupported(c,f)}_originValidation(c){return this.assertedUnderlyingResolver._originValidation(c)}get _shouldInitProactively(){return Sr()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return ku(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var c=this;return(0,p.Z)(function*(){if(c.underlyingResolver)return;const f=yield function sd(){return Rl.apply(this,arguments)}();c.underlyingResolver=f?c.cordovaResolver:c.browserResolver})()}}function Xn(m){return m.unwrap()}function vc(m){return Ya(m)}function Ya(m){const{_tokenResponse:c}=m instanceof G.ZR?m.customData:m;if(!c)return null;if(!(m instanceof G.ZR)&&"temporaryProof"in c&&"phoneNumber"in c)return ba.credentialFromResult(m);const f=c.providerId;if(!f||"password"===f)return null;let E;switch(f){case"google.com":E=Ji;break;case"facebook.com":E=ys;break;case"github.com":E=fo;break;case"twitter.com":E=_r;break;default:const{oauthIdToken:B,oauthAccessToken:Y,oauthTokenSecret:Te,pendingToken:st,nonce:kt}=c;return Y||Te||B||st?st?f.startsWith("saml.")?Ls._create(f,st):Ue._fromParams({providerId:f,signInMethod:f,pendingToken:st,idToken:B,accessToken:Y}):new Qi(f).credential({idToken:B,accessToken:Y,rawNonce:kt}):null}return m instanceof G.ZR?E.credentialFromError(m):E.credentialFromResult(m)}function ts(m,c){return c.catch(f=>{throw f instanceof G.ZR&&function Fu(m,c){var f,E;const B=null===(f=c.customData)||void 0===f?void 0:f._tokenResponse;if("auth/multi-factor-auth-required"===(null===(E=c)||void 0===E?void 0:E.code))c.resolver=new dh(m,function ke(m,c){var f;const E=(0,G.m9)(m),B=c;return ae(c.customData.operationType,E,"argument-error"),ae(null===(f=B.customData._serverResponse)||void 0===f?void 0:f.mfaPendingCredential,E,"argument-error"),Ie._fromError(E,B)}(m,c));else if(B){const Y=Ya(c),Te=c;Y&&(Te.credential=Y,Te.tenantId=B.tenantId||void 0,Te.email=B.email||void 0,Te.phoneNumber=B.phoneNumber||void 0)}}(m,f),f}).then(f=>{const B=f.user;return{operationType:f.operationType,credential:vc(f),additionalUserInfo:Gn(f),user:Qa.getOrCreate(B)}})}function Nl(m,c){return el.apply(this,arguments)}function el(){return(el=(0,p.Z)(function*(m,c){const f=yield c;return{verificationId:f.verificationId,confirm:E=>ts(m,f.confirm(E))}})).apply(this,arguments)}class dh{constructor(c,f){this.resolver=f,this.auth=function _c(m){return m.wrapped()}(c)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(c){return ts(Xn(this.auth),this.resolver.resolveSignIn(c))}}class Qa{constructor(c){this._delegate=c,this.multiFactor=function qr(m){const c=(0,G.m9)(m);return Ln.has(c)||Ln.set(c,Nn._fromUser(c)),Ln.get(c)}(c)}static getOrCreate(c){return Qa.USER_MAP.has(c)||Qa.USER_MAP.set(c,new Qa(c)),Qa.USER_MAP.get(c)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(c){return this._delegate.getIdTokenResult(c)}getIdToken(c){return this._delegate.getIdToken(c)}linkAndRetrieveDataWithCredential(c){return this.linkWithCredential(c)}linkWithCredential(c){var f=this;return(0,p.Z)(function*(){return ts(f.auth,Vs(f._delegate,c))})()}linkWithPhoneNumber(c,f){var E=this;return(0,p.Z)(function*(){return Nl(E.auth,function io(m,c,f){return yi.apply(this,arguments)}(E._delegate,c,f))})()}linkWithPopup(c){var f=this;return(0,p.Z)(function*(){return ts(f.auth,function tt(m,c,f){return Ot.apply(this,arguments)}(f._delegate,c,pu))})()}linkWithRedirect(c){var f=this;return(0,p.Z)(function*(){return yield yc(An(f.auth)),function Pe(m,c,f){return function Qe(m,c,f){return It.apply(this,arguments)}(m,c,f)}(f._delegate,c,pu)})()}reauthenticateAndRetrieveDataWithCredential(c){return this.reauthenticateWithCredential(c)}reauthenticateWithCredential(c){var f=this;return(0,p.Z)(function*(){return ts(f.auth,Vo(f._delegate,c))})()}reauthenticateWithPhoneNumber(c,f){return Nl(this.auth,function ou(m,c,f){return Ca.apply(this,arguments)}(this._delegate,c,f))}reauthenticateWithPopup(c){return ts(this.auth,function te(m,c,f){return pe.apply(this,arguments)}(this._delegate,c,pu))}reauthenticateWithRedirect(c){var f=this;return(0,p.Z)(function*(){return yield yc(An(f.auth)),function k(m,c,f){return function W(m,c,f){return ie.apply(this,arguments)}(m,c,f)}(f._delegate,c,pu)})()}sendEmailVerification(c){return function Co(m,c){return Ps.apply(this,arguments)}(this._delegate,c)}unlink(c){var f=this;return(0,p.Z)(function*(){return yield function ii(m,c){return Xi.apply(this,arguments)}(f._delegate,c),f})()}updateEmail(c){return function S(m,c){return M((0,G.m9)(m),c,null)}(this._delegate,c)}updatePassword(c){return function $(m,c){return M((0,G.m9)(m),null,c)}(this._delegate,c)}updatePhoneNumber(c){return function Zu(m,c){return Ze.apply(this,arguments)}(this._delegate,c)}updateProfile(c){return function Jo(m,c){return Ea.apply(this,arguments)}(this._delegate,c)}verifyBeforeUpdateEmail(c,f){return function ca(m,c,f){return Wr.apply(this,arguments)}(this._delegate,c,f)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Qa.USER_MAP=new WeakMap;const Lu=ae;let gu=(()=>{class m{constructor(f,E){if(this.app=f,E.isInitialized())return this._delegate=E.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:B}=f.options;Lu(B,"invalid-api-key",{appName:f.name}),Lu(B,"invalid-api-key",{appName:f.name});const Y=typeof window<"u"?pu:void 0;this._delegate=E.initialize({options:{persistence:qf(B,f.name),popupRedirectResolver:Y}}),this._delegate._updateErrorMap(Ke),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Qa.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(f){this._delegate.languageCode=f}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(f){this._delegate.tenantId=f}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(f,E){!function hs(m,c,f){const E=An(m);ae(E._canInitEmulator,E,"emulator-config-failed"),ae(/^https?:\/\//.test(c),E,"invalid-emulator-scheme");const B=!!f?.disableWarnings,Y=Fi(c),{host:Te,port:st}=function Fr(m){const c=Fi(m),f=/(\/\/)?([^?#/]+)/.exec(m.substr(c.length));if(!f)return{host:"",port:null};const E=f[2].split("@").pop()||"",B=/^(\[[^\]]+\])(:|$)/.exec(E);if(B){const Y=B[1];return{host:Y,port:ks(E.substr(Y.length+1))}}{const[Y,Te]=E.split(":");return{host:Y,port:ks(Te)}}}(c);E.config.emulator={url:`${Y}//${Te}${null===st?"":`:${st}`}/`},E.settings.appVerificationDisabledForTesting=!0,E.emulatorConfig=Object.freeze({host:Te,port:st,protocol:Y.replace(":",""),options:Object.freeze({disableWarnings:B})}),B||function ss(){function m(){const c=document.createElement("p"),f=c.style;c.innerText="Running in emulator mode. Do not use with production credentials.",f.position="fixed",f.width="100%",f.backgroundColor="#ffffff",f.border=".1em solid #000000",f.color="#b50000",f.bottom="0px",f.left="0px",f.margin="0px",f.zIndex="10000",f.textAlign="center",c.classList.add("firebase-emulator-warning"),document.body.appendChild(c)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",m):m())}()}(this._delegate,f,E)}applyActionCode(f){return function ls(m,c){return jo.apply(this,arguments)}(this._delegate,f)}checkActionCode(f){return to(this._delegate,f)}confirmPasswordReset(f,E){return function $i(m,c,f){return Ns.apply(this,arguments)}(this._delegate,f,E)}createUserWithEmailAndPassword(f,E){var B=this;return(0,p.Z)(function*(){return ts(B._delegate,function N(m,c,f){return A.apply(this,arguments)}(B._delegate,f,E))})()}fetchProvidersForEmail(f){return this.fetchSignInMethodsForEmail(f)}fetchSignInMethodsForEmail(f){return function no(m,c){return _o.apply(this,arguments)}(this._delegate,f)}isSignInWithEmailLink(f){return function dr(m,c){return"EMAIL_SIGNIN"===ms.parseLink(c)?.operation}(0,f)}getRedirectResult(){var f=this;return(0,p.Z)(function*(){Lu(Ki(),f._delegate,"operation-not-supported-in-this-environment");const E=yield function Pt(m,c){return wn.apply(this,arguments)}(f._delegate,pu);return E?ts(f._delegate,Promise.resolve(E)):{credential:null,user:null}})()}addFrameworkForLogging(f){!function Ts(m,c){An(m)._logFramework(c)}(this._delegate,f)}onAuthStateChanged(f,E,B){const{next:Y,error:Te,complete:st}=hh(f,E,B);return this._delegate.onAuthStateChanged(Y,Te,st)}onIdTokenChanged(f,E,B){const{next:Y,error:Te,complete:st}=hh(f,E,B);return this._delegate.onIdTokenChanged(Y,Te,st)}sendSignInLinkToEmail(f,E){return function et(m,c,f){return nn.apply(this,arguments)}(this._delegate,f,E)}sendPasswordResetEmail(f,E){return function Bo(m,c,f){return Or.apply(this,arguments)}(this._delegate,f,E||void 0)}setPersistence(f){var E=this;return(0,p.Z)(function*(){let B;switch(function mc(m,c){Hs(Object.values(qo).includes(c),m,"invalid-persistence-type"),(0,G.b$)()?Hs(c!==qo.SESSION,m,"unsupported-persistence-type"):(0,G.UG)()?Hs(c===qo.NONE,m,"unsupported-persistence-type"):Nu()?Hs(c===qo.NONE||c===qo.LOCAL&&(0,G.hl)(),m,"unsupported-persistence-type"):Hs(c===qo.NONE||id(),m,"unsupported-persistence-type")}(E._delegate,f),f){case qo.SESSION:B=Zr;break;case qo.LOCAL:B=(yield de(Ia)._isAvailable())?Ia:js;break;case qo.NONE:B=Tn;break;default:return he("argument-error",{appName:E._delegate.name})}return E._delegate.setPersistence(B)})()}signInAndRetrieveDataWithCredential(f){return this.signInWithCredential(f)}signInAnonymously(){return ts(this._delegate,function la(m){return Lr.apply(this,arguments)}(this._delegate))}signInWithCredential(f){return ts(this._delegate,zr(this._delegate,f))}signInWithCustomToken(f){return ts(this._delegate,function mo(m,c){return Uo.apply(this,arguments)}(this._delegate,f))}signInWithEmailAndPassword(f,E){return ts(this._delegate,function K(m,c,f){return zr((0,G.m9)(m),Ni.credential(c,f))}(this._delegate,f,E))}signInWithEmailLink(f,E){return ts(this._delegate,function cs(m,c,f){return Mi.apply(this,arguments)}(this._delegate,f,E))}signInWithPhoneNumber(f,E){return Nl(this._delegate,function su(m,c,f){return ma.apply(this,arguments)}(this._delegate,f,E))}signInWithPopup(f){var E=this;return(0,p.Z)(function*(){return Lu(Ki(),E._delegate,"operation-not-supported-in-this-environment"),ts(E._delegate,function P(m,c,f){return z.apply(this,arguments)}(E._delegate,f,pu))})()}signInWithRedirect(f){var E=this;return(0,p.Z)(function*(){return Lu(Ki(),E._delegate,"operation-not-supported-in-this-environment"),yield yc(E._delegate),function vi(m,c,f){return function vl(m,c,f){return x.apply(this,arguments)}(m,c,f)}(E._delegate,f,pu)})()}updateCurrentUser(f){return this._delegate.updateCurrentUser(f)}verifyPasswordResetCode(f){return function Qo(m,c){return F.apply(this,arguments)}(this._delegate,f)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return m.Persistence=qo,m})();function hh(m,c,f){let E=m;"function"!=typeof m&&({next:E,error:c,complete:f}=m);const B=E;return{next:Te=>B(Te&&Qa.getOrCreate(Te)),error:c,complete:f}}function qf(m,c){const f=function od(m,c){const f=Pu();if(!f)return[];const E=er(Ol,m,c);switch(f.getItem(E)){case qo.NONE:return[Tn];case qo.LOCAL:return[Ia,Zr];case qo.SESSION:return[Zr];default:return[]}}(m,c);if(typeof self<"u"&&!f.includes(Ia)&&f.push(Ia),typeof window<"u")for(const E of[js,Zr])f.includes(E)||f.push(E);return f.includes(Tn)||f.push(Tn),f}class ad{constructor(){this.providerId="phone",this._delegate=new ba(Xn(C.Z.auth()))}static credential(c,f){return ba.credential(c,f)}verifyPhoneNumber(c,f){return this._delegate.verifyPhoneNumber(c,f)}unwrap(){return this._delegate}}ad.PHONE_SIGN_IN_METHOD=ba.PHONE_SIGN_IN_METHOD,ad.PROVIDER_ID=ba.PROVIDER_ID;const Pl=ae;class wc{constructor(c,f,E=C.Z.app()){var B;Pl(null===(B=E.options)||void 0===B?void 0:B.apiKey,"invalid-api-key",{appName:E.name}),this._delegate=new ds(c,f,E.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function Gs(m){m.INTERNAL.registerComponent(new Re.wA("auth-compat",c=>{const f=c.getProvider("app-compat").getImmediate(),E=c.getProvider("auth");return new gu(f,E)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:Ni,FacebookAuthProvider:ys,GithubAuthProvider:fo,GoogleAuthProvider:Ji,OAuthProvider:Qi,SAMLAuthProvider:di,PhoneAuthProvider:ad,PhoneMultiFactorGenerator:Yu,RecaptchaVerifier:wc,TwitterAuthProvider:_r,Auth:gu,AuthCredential:Jr,Error:G.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),m.registerVersion("@firebase/auth-compat","0.2.19")}(C.Z)},9751:(Gt,qe,U)=>{U.d(qe,{y:()=>Oe});var p=U(2961),C=U(727),G=U(8822),be=U(9635),we=U(2416),Me=U(576),Re=U(2806);let Oe=(()=>{class Ce{constructor(ot){ot&&(this._subscribe=ot)}lift(ot){const Ke=new Ce;return Ke.source=this,Ke.operator=ot,Ke}subscribe(ot,Ke,Nt){const Ye=function le(Ce){return Ce&&Ce instanceof p.Lv||function ce(Ce){return Ce&&(0,Me.m)(Ce.next)&&(0,Me.m)(Ce.error)&&(0,Me.m)(Ce.complete)}(Ce)&&(0,C.Nn)(Ce)}(ot)?ot:new p.Hp(ot,Ke,Nt);return(0,Re.x)(()=>{const{operator:He,source:Ut}=this;Ye.add(He?He.call(Ye,Ut):Ut?this._subscribe(Ye):this._trySubscribe(Ye))}),Ye}_trySubscribe(ot){try{return this._subscribe(ot)}catch(Ke){ot.error(Ke)}}forEach(ot,Ke){return new(Ke=Fe(Ke))((Nt,Ye)=>{const He=new p.Hp({next:Ut=>{try{ot(Ut)}catch(Bt){Ye(Bt),He.unsubscribe()}},error:Ye,complete:Nt});this.subscribe(He)})}_subscribe(ot){var Ke;return null===(Ke=this.source)||void 0===Ke?void 0:Ke.subscribe(ot)}[G.L](){return this}pipe(...ot){return(0,be.U)(ot)(this)}toPromise(ot){return new(ot=Fe(ot))((Ke,Nt)=>{let Ye;this.subscribe(He=>Ye=He,He=>Nt(He),()=>Ke(Ye))})}}return Ce.create=mt=>new Ce(mt),Ce})();function Fe(Ce){var mt;return null!==(mt=Ce??we.v.Promise)&&void 0!==mt?mt:Promise}},7579:(Gt,qe,U)=>{U.d(qe,{x:()=>Re});var p=U(9751),C=U(727);const be=(0,U(3888).d)(Fe=>function(){Fe(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var we=U(8737),Me=U(2806);let Re=(()=>{class Fe extends p.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(le){const Ce=new Oe(this,this);return Ce.operator=le,Ce}_throwIfClosed(){if(this.closed)throw new be}next(le){(0,Me.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const Ce of this.currentObservers)Ce.next(le)}})}error(le){(0,Me.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=le;const{observers:Ce}=this;for(;Ce.length;)Ce.shift().error(le)}})}complete(){(0,Me.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:le}=this;for(;le.length;)le.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var le;return(null===(le=this.observers)||void 0===le?void 0:le.length)>0}_trySubscribe(le){return this._throwIfClosed(),super._trySubscribe(le)}_subscribe(le){return this._throwIfClosed(),this._checkFinalizedStatuses(le),this._innerSubscribe(le)}_innerSubscribe(le){const{hasError:Ce,isStopped:mt,observers:ot}=this;return Ce||mt?C.Lc:(this.currentObservers=null,ot.push(le),new C.w0(()=>{this.currentObservers=null,(0,we.P)(ot,le)}))}_checkFinalizedStatuses(le){const{hasError:Ce,thrownError:mt,isStopped:ot}=this;Ce?le.error(mt):ot&&le.complete()}asObservable(){const le=new p.y;return le.source=this,le}}return Fe.create=(ce,le)=>new Oe(ce,le),Fe})();class Oe extends Re{constructor(ce,le){super(),this.destination=ce,this.source=le}next(ce){var le,Ce;null===(Ce=null===(le=this.destination)||void 0===le?void 0:le.next)||void 0===Ce||Ce.call(le,ce)}error(ce){var le,Ce;null===(Ce=null===(le=this.destination)||void 0===le?void 0:le.error)||void 0===Ce||Ce.call(le,ce)}complete(){var ce,le;null===(le=null===(ce=this.destination)||void 0===ce?void 0:ce.complete)||void 0===le||le.call(ce)}_subscribe(ce){var le,Ce;return null!==(Ce=null===(le=this.source)||void 0===le?void 0:le.subscribe(ce))&&void 0!==Ce?Ce:C.Lc}}},2961:(Gt,qe,U)=>{U.d(qe,{Hp:()=>Nt,Lv:()=>Ce});var p=U(576),C=U(727),G=U(2416),be=U(7849);function we(){}const Me=Fe("C",void 0,void 0);function Fe(he,it,Xe){return{kind:he,value:it,error:Xe}}var ce=U(3410),le=U(2806);class Ce extends C.w0{constructor(it){super(),this.isStopped=!1,it?(this.destination=it,(0,C.Nn)(it)&&it.add(this)):this.destination=Bt}static create(it,Xe,_t){return new Nt(it,Xe,_t)}next(it){this.isStopped?Ut(function Oe(he){return Fe("N",he,void 0)}(it),this):this._next(it)}error(it){this.isStopped?Ut(function Re(he){return Fe("E",void 0,he)}(it),this):(this.isStopped=!0,this._error(it))}complete(){this.isStopped?Ut(Me,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(it){this.destination.next(it)}_error(it){try{this.destination.error(it)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const mt=Function.prototype.bind;function ot(he,it){return mt.call(he,it)}class Ke{constructor(it){this.partialObserver=it}next(it){const{partialObserver:Xe}=this;if(Xe.next)try{Xe.next(it)}catch(_t){Ye(_t)}}error(it){const{partialObserver:Xe}=this;if(Xe.error)try{Xe.error(it)}catch(_t){Ye(_t)}else Ye(it)}complete(){const{partialObserver:it}=this;if(it.complete)try{it.complete()}catch(Xe){Ye(Xe)}}}class Nt extends Ce{constructor(it,Xe,_t){let nt;if(super(),(0,p.m)(it)||!it)nt={next:it??void 0,error:Xe??void 0,complete:_t??void 0};else{let ae;this&&G.v.useDeprecatedNextContext?(ae=Object.create(it),ae.unsubscribe=()=>this.unsubscribe(),nt={next:it.next&&ot(it.next,ae),error:it.error&&ot(it.error,ae),complete:it.complete&&ot(it.complete,ae)}):nt=it}this.destination=new Ke(nt)}}function Ye(he){G.v.useDeprecatedSynchronousErrorHandling?(0,le.O)(he):(0,be.h)(he)}function Ut(he,it){const{onStoppedNotification:Xe}=G.v;Xe&&ce.z.setTimeout(()=>Xe(he,it))}const Bt={closed:!0,next:we,error:function He(he){throw he},complete:we}},727:(Gt,qe,U)=>{U.d(qe,{Lc:()=>Me,w0:()=>we,Nn:()=>Re});var p=U(576);const G=(0,U(3888).d)(Fe=>function(le){Fe(this),this.message=le?`${le.length} errors occurred during unsubscription:\n${le.map((Ce,mt)=>`${mt+1}) ${Ce.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=le});var be=U(8737);class we{constructor(ce){this.initialTeardown=ce,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let ce;if(!this.closed){this.closed=!0;const{_parentage:le}=this;if(le)if(this._parentage=null,Array.isArray(le))for(const ot of le)ot.remove(this);else le.remove(this);const{initialTeardown:Ce}=this;if((0,p.m)(Ce))try{Ce()}catch(ot){ce=ot instanceof G?ot.errors:[ot]}const{_finalizers:mt}=this;if(mt){this._finalizers=null;for(const ot of mt)try{Oe(ot)}catch(Ke){ce=ce??[],Ke instanceof G?ce=[...ce,...Ke.errors]:ce.push(Ke)}}if(ce)throw new G(ce)}}add(ce){var le;if(ce&&ce!==this)if(this.closed)Oe(ce);else{if(ce instanceof we){if(ce.closed||ce._hasParent(this))return;ce._addParent(this)}(this._finalizers=null!==(le=this._finalizers)&&void 0!==le?le:[]).push(ce)}}_hasParent(ce){const{_parentage:le}=this;return le===ce||Array.isArray(le)&&le.includes(ce)}_addParent(ce){const{_parentage:le}=this;this._parentage=Array.isArray(le)?(le.push(ce),le):le?[le,ce]:ce}_removeParent(ce){const{_parentage:le}=this;le===ce?this._parentage=null:Array.isArray(le)&&(0,be.P)(le,ce)}remove(ce){const{_finalizers:le}=this;le&&(0,be.P)(le,ce),ce instanceof we&&ce._removeParent(this)}}we.EMPTY=(()=>{const Fe=new we;return Fe.closed=!0,Fe})();const Me=we.EMPTY;function Re(Fe){return Fe instanceof we||Fe&&"closed"in Fe&&(0,p.m)(Fe.remove)&&(0,p.m)(Fe.add)&&(0,p.m)(Fe.unsubscribe)}function Oe(Fe){(0,p.m)(Fe)?Fe():Fe.unsubscribe()}},2416:(Gt,qe,U)=>{U.d(qe,{v:()=>p});const p={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},7272:(Gt,qe,U)=>{U.d(qe,{z:()=>we});var p=U(8189),G=U(7669),be=U(8996);function we(...Me){return function C(){return(0,p.J)(1)}()((0,be.D)(Me,(0,G.yG)(Me)))}},515:(Gt,qe,U)=>{U.d(qe,{E:()=>C});const C=new(U(9751).y)(we=>we.complete())},8996:(Gt,qe,U)=>{U.d(qe,{D:()=>it});var p=U(8421),C=U(5363),G=U(9468),Me=U(9751),Oe=U(2202),Fe=U(576),ce=U(9672);function Ce(Xe,_t){if(!Xe)throw new Error("Iterable cannot be null");return new Me.y(nt=>{(0,ce.f)(nt,_t,()=>{const ae=Xe[Symbol.asyncIterator]();(0,ce.f)(nt,_t,()=>{ae.next().then(Le=>{Le.done?nt.complete():nt.next(Le.value)})},0,!0)})})}var mt=U(3670),ot=U(8239),Ke=U(1144),Nt=U(6495),Ye=U(2206),He=U(4532),Ut=U(3260);function it(Xe,_t){return _t?function he(Xe,_t){if(null!=Xe){if((0,mt.c)(Xe))return function be(Xe,_t){return(0,p.Xf)(Xe).pipe((0,G.R)(_t),(0,C.Q)(_t))}(Xe,_t);if((0,Ke.z)(Xe))return function Re(Xe,_t){return new Me.y(nt=>{let ae=0;return _t.schedule(function(){ae===Xe.length?nt.complete():(nt.next(Xe[ae++]),nt.closed||this.schedule())})})}(Xe,_t);if((0,ot.t)(Xe))return function we(Xe,_t){return(0,p.Xf)(Xe).pipe((0,G.R)(_t),(0,C.Q)(_t))}(Xe,_t);if((0,Ye.D)(Xe))return Ce(Xe,_t);if((0,Nt.T)(Xe))return function le(Xe,_t){return new Me.y(nt=>{let ae;return(0,ce.f)(nt,_t,()=>{ae=Xe[Oe.h](),(0,ce.f)(nt,_t,()=>{let Le,ne;try{({value:Le,done:ne}=ae.next())}catch(De){return void nt.error(De)}ne?nt.complete():nt.next(Le)},0,!0)}),()=>(0,Fe.m)(ae?.return)&&ae.return()})}(Xe,_t);if((0,Ut.L)(Xe))return function Bt(Xe,_t){return Ce((0,Ut.Q)(Xe),_t)}(Xe,_t)}throw(0,He.z)(Xe)}(Xe,_t):(0,p.Xf)(Xe)}},8421:(Gt,qe,U)=>{U.d(qe,{Xf:()=>mt});var p=U(655),C=U(1144),G=U(8239),be=U(9751),we=U(3670),Me=U(2206),Re=U(4532),Oe=U(6495),Fe=U(3260),ce=U(576),le=U(7849),Ce=U(8822);function mt(he){if(he instanceof be.y)return he;if(null!=he){if((0,we.c)(he))return function ot(he){return new be.y(it=>{const Xe=he[Ce.L]();if((0,ce.m)(Xe.subscribe))return Xe.subscribe(it);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(he);if((0,C.z)(he))return function Ke(he){return new be.y(it=>{for(let Xe=0;Xe<he.length&&!it.closed;Xe++)it.next(he[Xe]);it.complete()})}(he);if((0,G.t)(he))return function Nt(he){return new be.y(it=>{he.then(Xe=>{it.closed||(it.next(Xe),it.complete())},Xe=>it.error(Xe)).then(null,le.h)})}(he);if((0,Me.D)(he))return He(he);if((0,Oe.T)(he))return function Ye(he){return new be.y(it=>{for(const Xe of he)if(it.next(Xe),it.closed)return;it.complete()})}(he);if((0,Fe.L)(he))return function Ut(he){return He((0,Fe.Q)(he))}(he)}throw(0,Re.z)(he)}function He(he){return new be.y(it=>{(function Bt(he,it){var Xe,_t,nt,ae;return(0,p.mG)(this,void 0,void 0,function*(){try{for(Xe=(0,p.KL)(he);!(_t=yield Xe.next()).done;)if(it.next(_t.value),it.closed)return}catch(Le){nt={error:Le}}finally{try{_t&&!_t.done&&(ae=Xe.return)&&(yield ae.call(Xe))}finally{if(nt)throw nt.error}}it.complete()})})(he,it).catch(Xe=>it.error(Xe))})}},6451:(Gt,qe,U)=>{U.d(qe,{T:()=>Me});var p=U(8189),C=U(8421),G=U(515),be=U(7669),we=U(8996);function Me(...Re){const Oe=(0,be.yG)(Re),Fe=(0,be._6)(Re,1/0),ce=Re;return ce.length?1===ce.length?(0,C.Xf)(ce[0]):(0,p.J)(Fe)((0,we.D)(ce,Oe)):G.E}},9646:(Gt,qe,U)=>{U.d(qe,{of:()=>G});var p=U(7669),C=U(8996);function G(...be){const we=(0,p.yG)(be);return(0,C.D)(be,we)}},5403:(Gt,qe,U)=>{U.d(qe,{x:()=>C});var p=U(2961);function C(be,we,Me,Re,Oe){return new G(be,we,Me,Re,Oe)}class G extends p.Lv{constructor(we,Me,Re,Oe,Fe,ce){super(we),this.onFinalize=Fe,this.shouldUnsubscribe=ce,this._next=Me?function(le){try{Me(le)}catch(Ce){we.error(Ce)}}:super._next,this._error=Oe?function(le){try{Oe(le)}catch(Ce){we.error(Ce)}finally{this.unsubscribe()}}:super._error,this._complete=Re?function(){try{Re()}catch(le){we.error(le)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var we;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:Me}=this;super.unsubscribe(),!Me&&(null===(we=this.onFinalize)||void 0===we||we.call(this))}}}},4351:(Gt,qe,U)=>{U.d(qe,{b:()=>G});var p=U(5577),C=U(576);function G(be,we){return(0,C.m)(we)?(0,p.z)(be,we,1):(0,p.z)(be,1)}},6590:(Gt,qe,U)=>{U.d(qe,{d:()=>G});var p=U(4482),C=U(5403);function G(be){return(0,p.e)((we,Me)=>{let Re=!1;we.subscribe((0,C.x)(Me,Oe=>{Re=!0,Me.next(Oe)},()=>{Re||Me.next(be),Me.complete()}))})}},9300:(Gt,qe,U)=>{U.d(qe,{h:()=>G});var p=U(4482),C=U(5403);function G(be,we){return(0,p.e)((Me,Re)=>{let Oe=0;Me.subscribe((0,C.x)(Re,Fe=>be.call(we,Fe,Oe++)&&Re.next(Fe)))})}},590:(Gt,qe,U)=>{U.d(qe,{P:()=>Re});var p=U(6805),C=U(9300),G=U(5698),be=U(6590),we=U(8068),Me=U(4671);function Re(Oe,Fe){const ce=arguments.length>=2;return le=>le.pipe(Oe?(0,C.h)((Ce,mt)=>Oe(Ce,mt,le)):Me.y,(0,G.q)(1),ce?(0,be.d)(Fe):(0,we.T)(()=>new p.K))}},4004:(Gt,qe,U)=>{U.d(qe,{U:()=>G});var p=U(4482),C=U(5403);function G(be,we){return(0,p.e)((Me,Re)=>{let Oe=0;Me.subscribe((0,C.x)(Re,Fe=>{Re.next(be.call(we,Fe,Oe++))}))})}},8189:(Gt,qe,U)=>{U.d(qe,{J:()=>G});var p=U(5577),C=U(4671);function G(be=1/0){return(0,p.z)(C.y,be)}},5577:(Gt,qe,U)=>{U.d(qe,{z:()=>Oe});var p=U(4004),C=U(8421),G=U(4482),be=U(9672),we=U(5403),Re=U(576);function Oe(Fe,ce,le=1/0){return(0,Re.m)(ce)?Oe((Ce,mt)=>(0,p.U)((ot,Ke)=>ce(Ce,ot,mt,Ke))((0,C.Xf)(Fe(Ce,mt))),le):("number"==typeof ce&&(le=ce),(0,G.e)((Ce,mt)=>function Me(Fe,ce,le,Ce,mt,ot,Ke,Nt){const Ye=[];let He=0,Ut=0,Bt=!1;const he=()=>{Bt&&!Ye.length&&!He&&ce.complete()},it=_t=>He<Ce?Xe(_t):Ye.push(_t),Xe=_t=>{ot&&ce.next(_t),He++;let nt=!1;(0,C.Xf)(le(_t,Ut++)).subscribe((0,we.x)(ce,ae=>{mt?.(ae),ot?it(ae):ce.next(ae)},()=>{nt=!0},void 0,()=>{if(nt)try{for(He--;Ye.length&&He<Ce;){const ae=Ye.shift();Ke?(0,be.f)(ce,Ke,()=>Xe(ae)):Xe(ae)}he()}catch(ae){ce.error(ae)}}))};return Fe.subscribe((0,we.x)(ce,it,()=>{Bt=!0,he()})),()=>{Nt?.()}}(Ce,mt,Fe,le)))}},5363:(Gt,qe,U)=>{U.d(qe,{Q:()=>be});var p=U(9672),C=U(4482),G=U(5403);function be(we,Me=0){return(0,C.e)((Re,Oe)=>{Re.subscribe((0,G.x)(Oe,Fe=>(0,p.f)(Oe,we,()=>Oe.next(Fe),Me),()=>(0,p.f)(Oe,we,()=>Oe.complete(),Me),Fe=>(0,p.f)(Oe,we,()=>Oe.error(Fe),Me)))})}},5026:(Gt,qe,U)=>{U.d(qe,{R:()=>be});var p=U(4482),C=U(5403);function G(we,Me,Re,Oe,Fe){return(ce,le)=>{let Ce=Re,mt=Me,ot=0;ce.subscribe((0,C.x)(le,Ke=>{const Nt=ot++;mt=Ce?we(mt,Ke,Nt):(Ce=!0,Ke),Oe&&le.next(mt)},Fe&&(()=>{Ce&&le.next(mt),le.complete()})))}}function be(we,Me){return(0,p.e)(G(we,Me,arguments.length>=2,!0))}},3099:(Gt,qe,U)=>{U.d(qe,{B:()=>we});var p=U(8421),C=U(7579),G=U(2961),be=U(4482);function we(Re={}){const{connector:Oe=(()=>new C.x),resetOnError:Fe=!0,resetOnComplete:ce=!0,resetOnRefCountZero:le=!0}=Re;return Ce=>{let mt,ot,Ke,Nt=0,Ye=!1,He=!1;const Ut=()=>{ot?.unsubscribe(),ot=void 0},Bt=()=>{Ut(),mt=Ke=void 0,Ye=He=!1},he=()=>{const it=mt;Bt(),it?.unsubscribe()};return(0,be.e)((it,Xe)=>{Nt++,!He&&!Ye&&Ut();const _t=Ke=Ke??Oe();Xe.add(()=>{Nt--,0===Nt&&!He&&!Ye&&(ot=Me(he,le))}),_t.subscribe(Xe),!mt&&Nt>0&&(mt=new G.Hp({next:nt=>_t.next(nt),error:nt=>{He=!0,Ut(),ot=Me(Bt,Fe,nt),_t.error(nt)},complete:()=>{Ye=!0,Ut(),ot=Me(Bt,ce),_t.complete()}}),(0,p.Xf)(it).subscribe(mt))})(Ce)}}function Me(Re,Oe,...Fe){if(!0===Oe)return void Re();if(!1===Oe)return;const ce=new G.Hp({next:()=>{ce.unsubscribe(),Re()}});return Oe(...Fe).subscribe(ce)}},8675:(Gt,qe,U)=>{U.d(qe,{O:()=>be});var p=U(7272),C=U(7669),G=U(4482);function be(...we){const Me=(0,C.yG)(we);return(0,G.e)((Re,Oe)=>{(Me?(0,p.z)(we,Re,Me):(0,p.z)(we,Re)).subscribe(Oe)})}},9468:(Gt,qe,U)=>{U.d(qe,{R:()=>C});var p=U(4482);function C(G,be=0){return(0,p.e)((we,Me)=>{Me.add(G.schedule(()=>we.subscribe(Me),be))})}},3900:(Gt,qe,U)=>{U.d(qe,{w:()=>be});var p=U(8421),C=U(4482),G=U(5403);function be(we,Me){return(0,C.e)((Re,Oe)=>{let Fe=null,ce=0,le=!1;const Ce=()=>le&&!Fe&&Oe.complete();Re.subscribe((0,G.x)(Oe,mt=>{Fe?.unsubscribe();let ot=0;const Ke=ce++;(0,p.Xf)(we(mt,Ke)).subscribe(Fe=(0,G.x)(Oe,Nt=>Oe.next(Me?Me(mt,Nt,Ke,ot++):Nt),()=>{Fe=null,Ce()}))},()=>{le=!0,Ce()}))})}},5698:(Gt,qe,U)=>{U.d(qe,{q:()=>be});var p=U(515),C=U(4482),G=U(5403);function be(we){return we<=0?()=>p.E:(0,C.e)((Me,Re)=>{let Oe=0;Me.subscribe((0,G.x)(Re,Fe=>{++Oe<=we&&(Re.next(Fe),we<=Oe&&Re.complete())}))})}},8505:(Gt,qe,U)=>{U.d(qe,{b:()=>we});var p=U(576),C=U(4482),G=U(5403),be=U(4671);function we(Me,Re,Oe){const Fe=(0,p.m)(Me)||Re||Oe?{next:Me,error:Re,complete:Oe}:Me;return Fe?(0,C.e)((ce,le)=>{var Ce;null===(Ce=Fe.subscribe)||void 0===Ce||Ce.call(Fe);let mt=!0;ce.subscribe((0,G.x)(le,ot=>{var Ke;null===(Ke=Fe.next)||void 0===Ke||Ke.call(Fe,ot),le.next(ot)},()=>{var ot;mt=!1,null===(ot=Fe.complete)||void 0===ot||ot.call(Fe),le.complete()},ot=>{var Ke;mt=!1,null===(Ke=Fe.error)||void 0===Ke||Ke.call(Fe,ot),le.error(ot)},()=>{var ot,Ke;mt&&(null===(ot=Fe.unsubscribe)||void 0===ot||ot.call(Fe)),null===(Ke=Fe.finalize)||void 0===Ke||Ke.call(Fe)}))}):be.y}},8068:(Gt,qe,U)=>{U.d(qe,{T:()=>be});var p=U(6805),C=U(4482),G=U(5403);function be(Me=we){return(0,C.e)((Re,Oe)=>{let Fe=!1;Re.subscribe((0,G.x)(Oe,ce=>{Fe=!0,Oe.next(ce)},()=>Fe?Oe.complete():Oe.error(Me())))})}function we(){return new p.K}},4408:(Gt,qe,U)=>{U.d(qe,{o:()=>we});var p=U(727);class C extends p.w0{constructor(Re,Oe){super()}schedule(Re,Oe=0){return this}}const G={setInterval(Me,Re,...Oe){const{delegate:Fe}=G;return Fe?.setInterval?Fe.setInterval(Me,Re,...Oe):setInterval(Me,Re,...Oe)},clearInterval(Me){const{delegate:Re}=G;return(Re?.clearInterval||clearInterval)(Me)},delegate:void 0};var be=U(8737);class we extends C{constructor(Re,Oe){super(Re,Oe),this.scheduler=Re,this.work=Oe,this.pending=!1}schedule(Re,Oe=0){if(this.closed)return this;this.state=Re;const Fe=this.id,ce=this.scheduler;return null!=Fe&&(this.id=this.recycleAsyncId(ce,Fe,Oe)),this.pending=!0,this.delay=Oe,this.id=this.id||this.requestAsyncId(ce,this.id,Oe),this}requestAsyncId(Re,Oe,Fe=0){return G.setInterval(Re.flush.bind(Re,this),Fe)}recycleAsyncId(Re,Oe,Fe=0){if(null!=Fe&&this.delay===Fe&&!1===this.pending)return Oe;G.clearInterval(Oe)}execute(Re,Oe){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const Fe=this._execute(Re,Oe);if(Fe)return Fe;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(Re,Oe){let ce,Fe=!1;try{this.work(Re)}catch(le){Fe=!0,ce=le||new Error("Scheduled action threw falsy error")}if(Fe)return this.unsubscribe(),ce}unsubscribe(){if(!this.closed){const{id:Re,scheduler:Oe}=this,{actions:Fe}=Oe;this.work=this.state=this.scheduler=null,this.pending=!1,(0,be.P)(Fe,this),null!=Re&&(this.id=this.recycleAsyncId(Oe,Re,null)),this.delay=null,super.unsubscribe()}}}},7565:(Gt,qe,U)=>{U.d(qe,{v:()=>G});var p=U(6063);class C{constructor(we,Me=C.now){this.schedulerActionCtor=we,this.now=Me}schedule(we,Me=0,Re){return new this.schedulerActionCtor(this,we).schedule(Re,Me)}}C.now=p.l.now;class G extends C{constructor(we,Me=C.now){super(we,Me),this.actions=[],this._active=!1,this._scheduled=void 0}flush(we){const{actions:Me}=this;if(this._active)return void Me.push(we);let Re;this._active=!0;do{if(Re=we.execute(we.state,we.delay))break}while(we=Me.shift());if(this._active=!1,Re){for(;we=Me.shift();)we.unsubscribe();throw Re}}}},4986:(Gt,qe,U)=>{U.d(qe,{z:()=>G});var p=U(4408);const G=new(U(7565).v)(p.o)},6063:(Gt,qe,U)=>{U.d(qe,{l:()=>p});const p={now:()=>(p.delegate||Date).now(),delegate:void 0}},3410:(Gt,qe,U)=>{U.d(qe,{z:()=>p});const p={setTimeout(C,G,...be){const{delegate:we}=p;return we?.setTimeout?we.setTimeout(C,G,...be):setTimeout(C,G,...be)},clearTimeout(C){const{delegate:G}=p;return(G?.clearTimeout||clearTimeout)(C)},delegate:void 0}},2202:(Gt,qe,U)=>{U.d(qe,{h:()=>C});const C=function p(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(Gt,qe,U)=>{U.d(qe,{L:()=>p});const p="function"==typeof Symbol&&Symbol.observable||"@@observable"},6805:(Gt,qe,U)=>{U.d(qe,{K:()=>C});const C=(0,U(3888).d)(G=>function(){G(this),this.name="EmptyError",this.message="no elements in sequence"})},7669:(Gt,qe,U)=>{U.d(qe,{_6:()=>Me,jO:()=>be,yG:()=>we});var p=U(576);function G(Re){return Re[Re.length-1]}function be(Re){return(0,p.m)(G(Re))?Re.pop():void 0}function we(Re){return function C(Re){return Re&&(0,p.m)(Re.schedule)}(G(Re))?Re.pop():void 0}function Me(Re,Oe){return"number"==typeof G(Re)?Re.pop():Oe}},4742:(Gt,qe,U)=>{U.d(qe,{D:()=>we});const{isArray:p}=Array,{getPrototypeOf:C,prototype:G,keys:be}=Object;function we(Re){if(1===Re.length){const Oe=Re[0];if(p(Oe))return{args:Oe,keys:null};if(function Me(Re){return Re&&"object"==typeof Re&&C(Re)===G}(Oe)){const Fe=be(Oe);return{args:Fe.map(ce=>Oe[ce]),keys:Fe}}}return{args:Re,keys:null}}},8737:(Gt,qe,U)=>{function p(C,G){if(C){const be=C.indexOf(G);0<=be&&C.splice(be,1)}}U.d(qe,{P:()=>p})},3888:(Gt,qe,U)=>{function p(C){const be=C(we=>{Error.call(we),we.stack=(new Error).stack});return be.prototype=Object.create(Error.prototype),be.prototype.constructor=be,be}U.d(qe,{d:()=>p})},1810:(Gt,qe,U)=>{function p(C,G){return C.reduce((be,we,Me)=>(be[we]=G[Me],be),{})}U.d(qe,{n:()=>p})},2806:(Gt,qe,U)=>{U.d(qe,{O:()=>be,x:()=>G});var p=U(2416);let C=null;function G(we){if(p.v.useDeprecatedSynchronousErrorHandling){const Me=!C;if(Me&&(C={errorThrown:!1,error:null}),we(),Me){const{errorThrown:Re,error:Oe}=C;if(C=null,Re)throw Oe}}else we()}function be(we){p.v.useDeprecatedSynchronousErrorHandling&&C&&(C.errorThrown=!0,C.error=we)}},9672:(Gt,qe,U)=>{function p(C,G,be,we=0,Me=!1){const Re=G.schedule(function(){be(),Me?C.add(this.schedule(null,we)):this.unsubscribe()},we);if(C.add(Re),!Me)return Re}U.d(qe,{f:()=>p})},4671:(Gt,qe,U)=>{function p(C){return C}U.d(qe,{y:()=>p})},1144:(Gt,qe,U)=>{U.d(qe,{z:()=>p});const p=C=>C&&"number"==typeof C.length&&"function"!=typeof C},2206:(Gt,qe,U)=>{U.d(qe,{D:()=>C});var p=U(576);function C(G){return Symbol.asyncIterator&&(0,p.m)(G?.[Symbol.asyncIterator])}},576:(Gt,qe,U)=>{function p(C){return"function"==typeof C}U.d(qe,{m:()=>p})},3670:(Gt,qe,U)=>{U.d(qe,{c:()=>G});var p=U(8822),C=U(576);function G(be){return(0,C.m)(be[p.L])}},6495:(Gt,qe,U)=>{U.d(qe,{T:()=>G});var p=U(2202),C=U(576);function G(be){return(0,C.m)(be?.[p.h])}},8239:(Gt,qe,U)=>{U.d(qe,{t:()=>C});var p=U(576);function C(G){return(0,p.m)(G?.then)}},3260:(Gt,qe,U)=>{U.d(qe,{L:()=>be,Q:()=>G});var p=U(655),C=U(576);function G(we){return(0,p.FC)(this,arguments,function*(){const Re=we.getReader();try{for(;;){const{value:Oe,done:Fe}=yield(0,p.qq)(Re.read());if(Fe)return yield(0,p.qq)(void 0);yield yield(0,p.qq)(Oe)}}finally{Re.releaseLock()}})}function be(we){return(0,C.m)(we?.getReader)}},4482:(Gt,qe,U)=>{U.d(qe,{A:()=>C,e:()=>G});var p=U(576);function C(be){return(0,p.m)(be?.lift)}function G(be){return we=>{if(C(we))return we.lift(function(Me){try{return be(Me,this)}catch(Re){this.error(Re)}});throw new TypeError("Unable to lift unknown Observable type")}}},3268:(Gt,qe,U)=>{U.d(qe,{Z:()=>be});var p=U(4004);const{isArray:C}=Array;function be(we){return(0,p.U)(Me=>function G(we,Me){return C(Me)?we(...Me):we(Me)}(we,Me))}},9635:(Gt,qe,U)=>{U.d(qe,{U:()=>G,z:()=>C});var p=U(4671);function C(...be){return G(be)}function G(be){return 0===be.length?p.y:1===be.length?be[0]:function(Me){return be.reduce((Re,Oe)=>Oe(Re),Me)}}},7849:(Gt,qe,U)=>{U.d(qe,{h:()=>G});var p=U(2416),C=U(3410);function G(be){C.z.setTimeout(()=>{const{onUnhandledError:we}=p.v;if(!we)throw be;we(be)})}},4532:(Gt,qe,U)=>{function p(C){return new TypeError(`You provided ${null!==C&&"object"==typeof C?"an invalid object":`'${C}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}U.d(qe,{z:()=>p})},655:(Gt,qe,U)=>{function be(ne,De){var de={};for(var Ne in ne)Object.prototype.hasOwnProperty.call(ne,Ne)&&De.indexOf(Ne)<0&&(de[Ne]=ne[Ne]);if(null!=ne&&"function"==typeof Object.getOwnPropertySymbols){var dt=0;for(Ne=Object.getOwnPropertySymbols(ne);dt<Ne.length;dt++)De.indexOf(Ne[dt])<0&&Object.prototype.propertyIsEnumerable.call(ne,Ne[dt])&&(de[Ne[dt]]=ne[Ne[dt]])}return de}function Oe(ne,De,de,Ne){return new(de||(de=Promise))(function(wt,bt){function Mt(tn){try{ft(Ne.next(tn))}catch(qt){bt(qt)}}function $t(tn){try{ft(Ne.throw(tn))}catch(qt){bt(qt)}}function ft(tn){tn.done?wt(tn.value):function dt(wt){return wt instanceof de?wt:new de(function(bt){bt(wt)})}(tn.value).then(Mt,$t)}ft((Ne=Ne.apply(ne,De||[])).next())})}function Ye(ne){return this instanceof Ye?(this.v=ne,this):new Ye(ne)}function He(ne,De,de){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var dt,Ne=de.apply(ne,De||[]),wt=[];return dt={},bt("next"),bt("throw"),bt("return"),dt[Symbol.asyncIterator]=function(){return this},dt;function bt(on){Ne[on]&&(dt[on]=function(Ft){return new Promise(function(Mn,an){wt.push([on,Ft,Mn,an])>1||Mt(on,Ft)})})}function Mt(on,Ft){try{!function $t(on){on.value instanceof Ye?Promise.resolve(on.value.v).then(ft,tn):qt(wt[0][2],on)}(Ne[on](Ft))}catch(Mn){qt(wt[0][3],Mn)}}function ft(on){Mt("next",on)}function tn(on){Mt("throw",on)}function qt(on,Ft){on(Ft),wt.shift(),wt.length&&Mt(wt[0][0],wt[0][1])}}function Bt(ne){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var de,De=ne[Symbol.asyncIterator];return De?De.call(ne):(ne=function Ce(ne){var De="function"==typeof Symbol&&Symbol.iterator,de=De&&ne[De],Ne=0;if(de)return de.call(ne);if(ne&&"number"==typeof ne.length)return{next:function(){return ne&&Ne>=ne.length&&(ne=void 0),{value:ne&&ne[Ne++],done:!ne}}};throw new TypeError(De?"Object is not iterable.":"Symbol.iterator is not defined.")}(ne),de={},Ne("next"),Ne("throw"),Ne("return"),de[Symbol.asyncIterator]=function(){return this},de);function Ne(wt){de[wt]=ne[wt]&&function(bt){return new Promise(function(Mt,$t){!function dt(wt,bt,Mt,$t){Promise.resolve($t).then(function(ft){wt({value:ft,done:Mt})},bt)}(Mt,$t,(bt=ne[wt](bt)).done,bt.value)})}}}U.d(qe,{FC:()=>He,KL:()=>Bt,_T:()=>be,mG:()=>Oe,qq:()=>Ye})},6895:(Gt,qe,U)=>{U.d(qe,{Do:()=>Bt,EM:()=>Gr,HT:()=>we,JF:()=>Pi,K0:()=>Re,Mx:()=>Ii,O5:()=>sr,PM:()=>br,S$:()=>Ye,V_:()=>ce,Ye:()=>he,b0:()=>Ut,bD:()=>_s,ez:()=>Ls,mk:()=>Qn,q:()=>G,sg:()=>Ai,w_:()=>Me});var p=U(4650);let C=null;function G(){return C}function we(S){C||(C=S)}class Me{}const Re=new p.OlP("DocumentToken");let Oe=(()=>{class S{historyGo(M){throw new Error("Not implemented")}}return S.\u0275fac=function(M){return new(M||S)},S.\u0275prov=p.Yz7({token:S,factory:function(){return function Fe(){return(0,p.LFG)(le)}()},providedIn:"platform"}),S})();const ce=new p.OlP("Location Initialized");let le=(()=>{class S extends Oe{constructor(M){super(),this._doc=M,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return G().getBaseHref(this._doc)}onPopState(M){const q=G().getGlobalEventTarget(this._doc,"window");return q.addEventListener("popstate",M,!1),()=>q.removeEventListener("popstate",M)}onHashChange(M){const q=G().getGlobalEventTarget(this._doc,"window");return q.addEventListener("hashchange",M,!1),()=>q.removeEventListener("hashchange",M)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(M){this.location.pathname=M}pushState(M,q,fe){Ce()?this._history.pushState(M,q,fe):this.location.hash=fe}replaceState(M,q,fe){Ce()?this._history.replaceState(M,q,fe):this.location.hash=fe}forward(){this._history.forward()}back(){this._history.back()}historyGo(M=0){this._history.go(M)}getState(){return this._history.state}}return S.\u0275fac=function(M){return new(M||S)(p.LFG(Re))},S.\u0275prov=p.Yz7({token:S,factory:function(){return function mt(){return new le((0,p.LFG)(Re))}()},providedIn:"platform"}),S})();function Ce(){return!!window.history.pushState}function ot(S,$){if(0==S.length)return $;if(0==$.length)return S;let M=0;return S.endsWith("/")&&M++,$.startsWith("/")&&M++,2==M?S+$.substring(1):1==M?S+$:S+"/"+$}function Ke(S){const $=S.match(/#|\?|$/),M=$&&$.index||S.length;return S.slice(0,M-("/"===S[M-1]?1:0))+S.slice(M)}function Nt(S){return S&&"?"!==S[0]?"?"+S:S}let Ye=(()=>{class S{historyGo(M){throw new Error("Not implemented")}}return S.\u0275fac=function(M){return new(M||S)},S.\u0275prov=p.Yz7({token:S,factory:function(){return(0,p.f3M)(Ut)},providedIn:"root"}),S})();const He=new p.OlP("appBaseHref");let Ut=(()=>{class S extends Ye{constructor(M,q){super(),this._platformLocation=M,this._removeListenerFns=[],this._baseHref=q??this._platformLocation.getBaseHrefFromDOM()??(0,p.f3M)(Re).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(M){this._removeListenerFns.push(this._platformLocation.onPopState(M),this._platformLocation.onHashChange(M))}getBaseHref(){return this._baseHref}prepareExternalUrl(M){return ot(this._baseHref,M)}path(M=!1){const q=this._platformLocation.pathname+Nt(this._platformLocation.search),fe=this._platformLocation.hash;return fe&&M?`${q}${fe}`:q}pushState(M,q,fe,ze){const rt=this.prepareExternalUrl(fe+Nt(ze));this._platformLocation.pushState(M,q,rt)}replaceState(M,q,fe,ze){const rt=this.prepareExternalUrl(fe+Nt(ze));this._platformLocation.replaceState(M,q,rt)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(M=0){this._platformLocation.historyGo?.(M)}}return S.\u0275fac=function(M){return new(M||S)(p.LFG(Oe),p.LFG(He,8))},S.\u0275prov=p.Yz7({token:S,factory:S.\u0275fac,providedIn:"root"}),S})(),Bt=(()=>{class S extends Ye{constructor(M,q){super(),this._platformLocation=M,this._baseHref="",this._removeListenerFns=[],null!=q&&(this._baseHref=q)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(M){this._removeListenerFns.push(this._platformLocation.onPopState(M),this._platformLocation.onHashChange(M))}getBaseHref(){return this._baseHref}path(M=!1){let q=this._platformLocation.hash;return null==q&&(q="#"),q.length>0?q.substring(1):q}prepareExternalUrl(M){const q=ot(this._baseHref,M);return q.length>0?"#"+q:q}pushState(M,q,fe,ze){let rt=this.prepareExternalUrl(fe+Nt(ze));0==rt.length&&(rt=this._platformLocation.pathname),this._platformLocation.pushState(M,q,rt)}replaceState(M,q,fe,ze){let rt=this.prepareExternalUrl(fe+Nt(ze));0==rt.length&&(rt=this._platformLocation.pathname),this._platformLocation.replaceState(M,q,rt)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(M=0){this._platformLocation.historyGo?.(M)}}return S.\u0275fac=function(M){return new(M||S)(p.LFG(Oe),p.LFG(He,8))},S.\u0275prov=p.Yz7({token:S,factory:S.\u0275fac}),S})(),he=(()=>{class S{constructor(M){this._subject=new p.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=M;const q=this._locationStrategy.getBaseHref();this._baseHref=Ke(_t(q)),this._locationStrategy.onPopState(fe=>{this._subject.emit({url:this.path(!0),pop:!0,state:fe.state,type:fe.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(M=!1){return this.normalize(this._locationStrategy.path(M))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(M,q=""){return this.path()==this.normalize(M+Nt(q))}normalize(M){return S.stripTrailingSlash(function Xe(S,$){return S&&$.startsWith(S)?$.substring(S.length):$}(this._baseHref,_t(M)))}prepareExternalUrl(M){return M&&"/"!==M[0]&&(M="/"+M),this._locationStrategy.prepareExternalUrl(M)}go(M,q="",fe=null){this._locationStrategy.pushState(fe,"",M,q),this._notifyUrlChangeListeners(this.prepareExternalUrl(M+Nt(q)),fe)}replaceState(M,q="",fe=null){this._locationStrategy.replaceState(fe,"",M,q),this._notifyUrlChangeListeners(this.prepareExternalUrl(M+Nt(q)),fe)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(M=0){this._locationStrategy.historyGo?.(M)}onUrlChange(M){return this._urlChangeListeners.push(M),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(q=>{this._notifyUrlChangeListeners(q.url,q.state)})),()=>{const q=this._urlChangeListeners.indexOf(M);this._urlChangeListeners.splice(q,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(M="",q){this._urlChangeListeners.forEach(fe=>fe(M,q))}subscribe(M,q,fe){return this._subject.subscribe({next:M,error:q,complete:fe})}}return S.normalizeQueryParams=Nt,S.joinWithSlash=ot,S.stripTrailingSlash=Ke,S.\u0275fac=function(M){return new(M||S)(p.LFG(Ye))},S.\u0275prov=p.Yz7({token:S,factory:function(){return function it(){return new he((0,p.LFG)(Ye))}()},providedIn:"root"}),S})();function _t(S){return S.replace(/\/index.html$/,"")}function Ii(S,$){$=encodeURIComponent($);for(const M of S.split(";")){const q=M.indexOf("="),[fe,ze]=-1==q?[M,""]:[M.slice(0,q),M.slice(q+1)];if(fe.trim()===$)return decodeURIComponent(ze)}return null}let Qn=(()=>{class S{constructor(M,q,fe,ze){this._iterableDiffers=M,this._keyValueDiffers=q,this._ngEl=fe,this._renderer=ze,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(M){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof M?M.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(M){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof M?M.split(/\s+/):M,this._rawClass&&((0,p.sIi)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const M=this._iterableDiffer.diff(this._rawClass);M&&this._applyIterableChanges(M)}else if(this._keyValueDiffer){const M=this._keyValueDiffer.diff(this._rawClass);M&&this._applyKeyValueChanges(M)}}_applyKeyValueChanges(M){M.forEachAddedItem(q=>this._toggleClass(q.key,q.currentValue)),M.forEachChangedItem(q=>this._toggleClass(q.key,q.currentValue)),M.forEachRemovedItem(q=>{q.previousValue&&this._toggleClass(q.key,!1)})}_applyIterableChanges(M){M.forEachAddedItem(q=>{if("string"!=typeof q.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${(0,p.AaK)(q.item)}`);this._toggleClass(q.item,!0)}),M.forEachRemovedItem(q=>this._toggleClass(q.item,!1))}_applyClasses(M){M&&(Array.isArray(M)||M instanceof Set?M.forEach(q=>this._toggleClass(q,!0)):Object.keys(M).forEach(q=>this._toggleClass(q,!!M[q])))}_removeClasses(M){M&&(Array.isArray(M)||M instanceof Set?M.forEach(q=>this._toggleClass(q,!1)):Object.keys(M).forEach(q=>this._toggleClass(q,!1)))}_toggleClass(M,q){(M=M.trim())&&M.split(/\s+/g).forEach(fe=>{q?this._renderer.addClass(this._ngEl.nativeElement,fe):this._renderer.removeClass(this._ngEl.nativeElement,fe)})}}return S.\u0275fac=function(M){return new(M||S)(p.Y36(p.ZZ4),p.Y36(p.aQg),p.Y36(p.SBq),p.Y36(p.Qsj))},S.\u0275dir=p.lG2({type:S,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0}),S})();class Ms{constructor($,M,q,fe){this.$implicit=$,this.ngForOf=M,this.index=q,this.count=fe}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Ai=(()=>{class S{constructor(M,q,fe){this._viewContainer=M,this._template=q,this._differs=fe,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(M){this._ngForOf=M,this._ngForOfDirty=!0}set ngForTrackBy(M){this._trackByFn=M}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(M){M&&(this._template=M)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const M=this._ngForOf;!this._differ&&M&&(this._differ=this._differs.find(M).create(this.ngForTrackBy))}if(this._differ){const M=this._differ.diff(this._ngForOf);M&&this._applyChanges(M)}}_applyChanges(M){const q=this._viewContainer;M.forEachOperation((fe,ze,rt)=>{if(null==fe.previousIndex)q.createEmbeddedView(this._template,new Ms(fe.item,this._ngForOf,-1,-1),null===rt?void 0:rt);else if(null==rt)q.remove(null===ze?void 0:ze);else if(null!==ze){const Yt=q.get(ze);q.move(Yt,rt),Li(Yt,fe)}});for(let fe=0,ze=q.length;fe<ze;fe++){const Yt=q.get(fe).context;Yt.index=fe,Yt.count=ze,Yt.ngForOf=this._ngForOf}M.forEachIdentityChange(fe=>{Li(q.get(fe.currentIndex),fe)})}static ngTemplateContextGuard(M,q){return!0}}return S.\u0275fac=function(M){return new(M||S)(p.Y36(p.s_b),p.Y36(p.Rgc),p.Y36(p.ZZ4))},S.\u0275dir=p.lG2({type:S,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),S})();function Li(S,$){S.context.$implicit=$.item}let sr=(()=>{class S{constructor(M,q){this._viewContainer=M,this._context=new Vi,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=q}set ngIf(M){this._context.$implicit=this._context.ngIf=M,this._updateView()}set ngIfThen(M){Cr("ngIfThen",M),this._thenTemplateRef=M,this._thenViewRef=null,this._updateView()}set ngIfElse(M){Cr("ngIfElse",M),this._elseTemplateRef=M,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(M,q){return!0}}return S.\u0275fac=function(M){return new(M||S)(p.Y36(p.s_b),p.Y36(p.Rgc))},S.\u0275dir=p.lG2({type:S,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),S})();class Vi{constructor(){this.$implicit=null,this.ngIf=null}}function Cr(S,$){if($&&!$.createEmbeddedView)throw new Error(`${S} must be a TemplateRef, but received '${(0,p.AaK)($)}'.`)}let Ls=(()=>{class S{}return S.\u0275fac=function(M){return new(M||S)},S.\u0275mod=p.oAB({type:S}),S.\u0275inj=p.cJS({}),S})();const _s="browser";function br(S){return"server"===S}let Gr=(()=>{class S{}return S.\u0275prov=(0,p.Yz7)({token:S,providedIn:"root",factory:()=>new Fo((0,p.LFG)(Re),window)}),S})();class Fo{constructor($,M){this.document=$,this.window=M,this.offset=()=>[0,0]}setOffset($){this.offset=Array.isArray($)?()=>$:$}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition($){this.supportsScrolling()&&this.window.scrollTo($[0],$[1])}scrollToAnchor($){if(!this.supportsScrolling())return;const M=function ii(S,$){const M=S.getElementById($)||S.getElementsByName($)[0];if(M)return M;if("function"==typeof S.createTreeWalker&&S.body&&(S.body.createShadowRoot||S.body.attachShadow)){const q=S.createTreeWalker(S.body,NodeFilter.SHOW_ELEMENT);let fe=q.currentNode;for(;fe;){const ze=fe.shadowRoot;if(ze){const rt=ze.getElementById($)||ze.querySelector(`[name="${$}"]`);if(rt)return rt}fe=q.nextNode()}}return null}(this.document,$);M&&(this.scrollToElement(M),M.focus())}setHistoryScrollRestoration($){if(this.supportScrollRestoration()){const M=this.window.history;M&&M.scrollRestoration&&(M.scrollRestoration=$)}}scrollToElement($){const M=$.getBoundingClientRect(),q=M.left+this.window.pageXOffset,fe=M.top+this.window.pageYOffset,ze=this.offset();this.window.scrollTo(q-ze[0],fe-ze[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const $=hi(this.window.history)||hi(Object.getPrototypeOf(this.window.history));return!(!$||!$.writable&&!$.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function hi(S){return Object.getOwnPropertyDescriptor(S,"scrollRestoration")}class Pi{}},529:(Gt,qe,U)=>{U.d(qe,{JF:()=>kr,eN:()=>wt});var p=U(6895),C=U(4650),G=U(9646),be=U(9751),we=U(4351),Me=U(9300),Re=U(4004);class Oe{}class Fe{}class ce{constructor(ye){this.normalizedNames=new Map,this.lazyUpdate=null,ye?this.lazyInit="string"==typeof ye?()=>{this.headers=new Map,ye.split("\n").forEach(se=>{const Be=se.indexOf(":");if(Be>0){const We=se.slice(0,Be),Lt=We.toLowerCase(),un=se.slice(Be+1).trim();this.maybeSetNormalizedName(We,Lt),this.headers.has(Lt)?this.headers.get(Lt).push(un):this.headers.set(Lt,[un])}})}:()=>{this.headers=new Map,Object.keys(ye).forEach(se=>{let Be=ye[se];const We=se.toLowerCase();"string"==typeof Be&&(Be=[Be]),Be.length>0&&(this.headers.set(We,Be),this.maybeSetNormalizedName(se,We))})}:this.headers=new Map}has(ye){return this.init(),this.headers.has(ye.toLowerCase())}get(ye){this.init();const se=this.headers.get(ye.toLowerCase());return se&&se.length>0?se[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(ye){return this.init(),this.headers.get(ye.toLowerCase())||null}append(ye,se){return this.clone({name:ye,value:se,op:"a"})}set(ye,se){return this.clone({name:ye,value:se,op:"s"})}delete(ye,se){return this.clone({name:ye,value:se,op:"d"})}maybeSetNormalizedName(ye,se){this.normalizedNames.has(se)||this.normalizedNames.set(se,ye)}init(){this.lazyInit&&(this.lazyInit instanceof ce?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(ye=>this.applyUpdate(ye)),this.lazyUpdate=null))}copyFrom(ye){ye.init(),Array.from(ye.headers.keys()).forEach(se=>{this.headers.set(se,ye.headers.get(se)),this.normalizedNames.set(se,ye.normalizedNames.get(se))})}clone(ye){const se=new ce;return se.lazyInit=this.lazyInit&&this.lazyInit instanceof ce?this.lazyInit:this,se.lazyUpdate=(this.lazyUpdate||[]).concat([ye]),se}applyUpdate(ye){const se=ye.name.toLowerCase();switch(ye.op){case"a":case"s":let Be=ye.value;if("string"==typeof Be&&(Be=[Be]),0===Be.length)return;this.maybeSetNormalizedName(ye.name,se);const We=("a"===ye.op?this.headers.get(se):void 0)||[];We.push(...Be),this.headers.set(se,We);break;case"d":const Lt=ye.value;if(Lt){let un=this.headers.get(se);if(!un)return;un=un.filter(jn=>-1===Lt.indexOf(jn)),0===un.length?(this.headers.delete(se),this.normalizedNames.delete(se)):this.headers.set(se,un)}else this.headers.delete(se),this.normalizedNames.delete(se)}}forEach(ye){this.init(),Array.from(this.normalizedNames.keys()).forEach(se=>ye(this.normalizedNames.get(se),this.headers.get(se)))}}class Ce{encodeKey(ye){return Nt(ye)}encodeValue(ye){return Nt(ye)}decodeKey(ye){return decodeURIComponent(ye)}decodeValue(ye){return decodeURIComponent(ye)}}const ot=/%(\d[a-f0-9])/gi,Ke={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function Nt($e){return encodeURIComponent($e).replace(ot,(ye,se)=>Ke[se]??ye)}function Ye($e){return`${$e}`}class He{constructor(ye={}){if(this.updates=null,this.cloneFrom=null,this.encoder=ye.encoder||new Ce,ye.fromString){if(ye.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function mt($e,ye){const se=new Map;return $e.length>0&&$e.replace(/^\?/,"").split("&").forEach(We=>{const Lt=We.indexOf("="),[un,jn]=-1==Lt?[ye.decodeKey(We),""]:[ye.decodeKey(We.slice(0,Lt)),ye.decodeValue(We.slice(Lt+1))],At=se.get(un)||[];At.push(jn),se.set(un,At)}),se}(ye.fromString,this.encoder)}else ye.fromObject?(this.map=new Map,Object.keys(ye.fromObject).forEach(se=>{const Be=ye.fromObject[se],We=Array.isArray(Be)?Be.map(Ye):[Ye(Be)];this.map.set(se,We)})):this.map=null}has(ye){return this.init(),this.map.has(ye)}get(ye){this.init();const se=this.map.get(ye);return se?se[0]:null}getAll(ye){return this.init(),this.map.get(ye)||null}keys(){return this.init(),Array.from(this.map.keys())}append(ye,se){return this.clone({param:ye,value:se,op:"a"})}appendAll(ye){const se=[];return Object.keys(ye).forEach(Be=>{const We=ye[Be];Array.isArray(We)?We.forEach(Lt=>{se.push({param:Be,value:Lt,op:"a"})}):se.push({param:Be,value:We,op:"a"})}),this.clone(se)}set(ye,se){return this.clone({param:ye,value:se,op:"s"})}delete(ye,se){return this.clone({param:ye,value:se,op:"d"})}toString(){return this.init(),this.keys().map(ye=>{const se=this.encoder.encodeKey(ye);return this.map.get(ye).map(Be=>se+"="+this.encoder.encodeValue(Be)).join("&")}).filter(ye=>""!==ye).join("&")}clone(ye){const se=new He({encoder:this.encoder});return se.cloneFrom=this.cloneFrom||this,se.updates=(this.updates||[]).concat(ye),se}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(ye=>this.map.set(ye,this.cloneFrom.map.get(ye))),this.updates.forEach(ye=>{switch(ye.op){case"a":case"s":const se=("a"===ye.op?this.map.get(ye.param):void 0)||[];se.push(Ye(ye.value)),this.map.set(ye.param,se);break;case"d":if(void 0===ye.value){this.map.delete(ye.param);break}{let Be=this.map.get(ye.param)||[];const We=Be.indexOf(Ye(ye.value));-1!==We&&Be.splice(We,1),Be.length>0?this.map.set(ye.param,Be):this.map.delete(ye.param)}}}),this.cloneFrom=this.updates=null)}}class Bt{constructor(){this.map=new Map}set(ye,se){return this.map.set(ye,se),this}get(ye){return this.map.has(ye)||this.map.set(ye,ye.defaultValue()),this.map.get(ye)}delete(ye){return this.map.delete(ye),this}has(ye){return this.map.has(ye)}keys(){return this.map.keys()}}function it($e){return typeof ArrayBuffer<"u"&&$e instanceof ArrayBuffer}function Xe($e){return typeof Blob<"u"&&$e instanceof Blob}function _t($e){return typeof FormData<"u"&&$e instanceof FormData}class ae{constructor(ye,se,Be,We){let Lt;if(this.url=se,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=ye.toUpperCase(),function he($e){switch($e){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||We?(this.body=void 0!==Be?Be:null,Lt=We):Lt=Be,Lt&&(this.reportProgress=!!Lt.reportProgress,this.withCredentials=!!Lt.withCredentials,Lt.responseType&&(this.responseType=Lt.responseType),Lt.headers&&(this.headers=Lt.headers),Lt.context&&(this.context=Lt.context),Lt.params&&(this.params=Lt.params)),this.headers||(this.headers=new ce),this.context||(this.context=new Bt),this.params){const un=this.params.toString();if(0===un.length)this.urlWithParams=se;else{const jn=se.indexOf("?");this.urlWithParams=se+(-1===jn?"?":jn<se.length-1?"&":"")+un}}else this.params=new He,this.urlWithParams=se}serializeBody(){return null===this.body?null:it(this.body)||Xe(this.body)||_t(this.body)||function nt($e){return typeof URLSearchParams<"u"&&$e instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof He?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||_t(this.body)?null:Xe(this.body)?this.body.type||null:it(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof He?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(ye={}){const se=ye.method||this.method,Be=ye.url||this.url,We=ye.responseType||this.responseType,Lt=void 0!==ye.body?ye.body:this.body,un=void 0!==ye.withCredentials?ye.withCredentials:this.withCredentials,jn=void 0!==ye.reportProgress?ye.reportProgress:this.reportProgress;let At=ye.headers||this.headers,rr=ye.params||this.params;const Sn=ye.context??this.context;return void 0!==ye.setHeaders&&(At=Object.keys(ye.setHeaders).reduce((Mr,pn)=>Mr.set(pn,ye.setHeaders[pn]),At)),ye.setParams&&(rr=Object.keys(ye.setParams).reduce((Mr,pn)=>Mr.set(pn,ye.setParams[pn]),rr)),new ae(se,Be,Lt,{params:rr,headers:At,context:Sn,reportProgress:jn,responseType:We,withCredentials:un})}}var Le=(()=>((Le=Le||{})[Le.Sent=0]="Sent",Le[Le.UploadProgress=1]="UploadProgress",Le[Le.ResponseHeader=2]="ResponseHeader",Le[Le.DownloadProgress=3]="DownloadProgress",Le[Le.Response=4]="Response",Le[Le.User=5]="User",Le))();class ne{constructor(ye,se=200,Be="OK"){this.headers=ye.headers||new ce,this.status=void 0!==ye.status?ye.status:se,this.statusText=ye.statusText||Be,this.url=ye.url||null,this.ok=this.status>=200&&this.status<300}}class De extends ne{constructor(ye={}){super(ye),this.type=Le.ResponseHeader}clone(ye={}){return new De({headers:ye.headers||this.headers,status:void 0!==ye.status?ye.status:this.status,statusText:ye.statusText||this.statusText,url:ye.url||this.url||void 0})}}class de extends ne{constructor(ye={}){super(ye),this.type=Le.Response,this.body=void 0!==ye.body?ye.body:null}clone(ye={}){return new de({body:void 0!==ye.body?ye.body:this.body,headers:ye.headers||this.headers,status:void 0!==ye.status?ye.status:this.status,statusText:ye.statusText||this.statusText,url:ye.url||this.url||void 0})}}class Ne extends ne{constructor(ye){super(ye,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${ye.url||"(unknown url)"}`:`Http failure response for ${ye.url||"(unknown url)"}: ${ye.status} ${ye.statusText}`,this.error=ye.error||null}}function dt($e,ye){return{body:ye,headers:$e.headers,context:$e.context,observe:$e.observe,params:$e.params,reportProgress:$e.reportProgress,responseType:$e.responseType,withCredentials:$e.withCredentials}}let wt=(()=>{class $e{constructor(se){this.handler=se}request(se,Be,We={}){let Lt;if(se instanceof ae)Lt=se;else{let At,rr;At=We.headers instanceof ce?We.headers:new ce(We.headers),We.params&&(rr=We.params instanceof He?We.params:new He({fromObject:We.params})),Lt=new ae(se,Be,void 0!==We.body?We.body:null,{headers:At,context:We.context,params:rr,reportProgress:We.reportProgress,responseType:We.responseType||"json",withCredentials:We.withCredentials})}const un=(0,G.of)(Lt).pipe((0,we.b)(At=>this.handler.handle(At)));if(se instanceof ae||"events"===We.observe)return un;const jn=un.pipe((0,Me.h)(At=>At instanceof de));switch(We.observe||"body"){case"body":switch(Lt.responseType){case"arraybuffer":return jn.pipe((0,Re.U)(At=>{if(null!==At.body&&!(At.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return At.body}));case"blob":return jn.pipe((0,Re.U)(At=>{if(null!==At.body&&!(At.body instanceof Blob))throw new Error("Response is not a Blob.");return At.body}));case"text":return jn.pipe((0,Re.U)(At=>{if(null!==At.body&&"string"!=typeof At.body)throw new Error("Response is not a string.");return At.body}));default:return jn.pipe((0,Re.U)(At=>At.body))}case"response":return jn;default:throw new Error(`Unreachable: unhandled observe type ${We.observe}}`)}}delete(se,Be={}){return this.request("DELETE",se,Be)}get(se,Be={}){return this.request("GET",se,Be)}head(se,Be={}){return this.request("HEAD",se,Be)}jsonp(se,Be){return this.request("JSONP",se,{params:(new He).append(Be,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(se,Be={}){return this.request("OPTIONS",se,Be)}patch(se,Be,We={}){return this.request("PATCH",se,dt(We,Be))}post(se,Be,We={}){return this.request("POST",se,dt(We,Be))}put(se,Be,We={}){return this.request("PUT",se,dt(We,Be))}}return $e.\u0275fac=function(se){return new(se||$e)(C.LFG(Oe))},$e.\u0275prov=C.Yz7({token:$e,factory:$e.\u0275fac}),$e})();class bt{constructor(ye,se){this.next=ye,this.interceptor=se}handle(ye){return this.interceptor.intercept(ye,this.next)}}const Mt=new C.OlP("HTTP_INTERCEPTORS");let $t=(()=>{class $e{intercept(se,Be){return Be.handle(se)}}return $e.\u0275fac=function(se){return new(se||$e)},$e.\u0275prov=C.Yz7({token:$e,factory:$e.\u0275fac}),$e})();const Er=/^\)\]\}',?\n/;let ur=(()=>{class $e{constructor(se){this.xhrFactory=se}handle(se){if("JSONP"===se.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new be.y(Be=>{const We=this.xhrFactory.build();if(We.open(se.method,se.urlWithParams),se.withCredentials&&(We.withCredentials=!0),se.headers.forEach((ge,X)=>We.setRequestHeader(ge,X.join(","))),se.headers.has("Accept")||We.setRequestHeader("Accept","application/json, text/plain, */*"),!se.headers.has("Content-Type")){const ge=se.detectContentTypeHeader();null!==ge&&We.setRequestHeader("Content-Type",ge)}if(se.responseType){const ge=se.responseType.toLowerCase();We.responseType="json"!==ge?ge:"text"}const Lt=se.serializeBody();let un=null;const jn=()=>{if(null!==un)return un;const ge=We.statusText||"OK",X=new ce(We.getAllResponseHeaders()),oe=function mr($e){return"responseURL"in $e&&$e.responseURL?$e.responseURL:/^X-Request-URL:/m.test($e.getAllResponseHeaders())?$e.getResponseHeader("X-Request-URL"):null}(We)||se.url;return un=new De({headers:X,status:We.status,statusText:ge,url:oe}),un},At=()=>{let{headers:ge,status:X,statusText:oe,url:Ee}=jn(),me=null;204!==X&&(me=typeof We.response>"u"?We.responseText:We.response),0===X&&(X=me?200:0);let ut=X>=200&&X<300;if("json"===se.responseType&&"string"==typeof me){const yt=me;me=me.replace(Er,"");try{me=""!==me?JSON.parse(me):null}catch(Rt){me=yt,ut&&(ut=!1,me={error:Rt,text:me})}}ut?(Be.next(new de({body:me,headers:ge,status:X,statusText:oe,url:Ee||void 0})),Be.complete()):Be.error(new Ne({error:me,headers:ge,status:X,statusText:oe,url:Ee||void 0}))},rr=ge=>{const{url:X}=jn(),oe=new Ne({error:ge,status:We.status||0,statusText:We.statusText||"Unknown Error",url:X||void 0});Be.error(oe)};let Sn=!1;const Mr=ge=>{Sn||(Be.next(jn()),Sn=!0);let X={type:Le.DownloadProgress,loaded:ge.loaded};ge.lengthComputable&&(X.total=ge.total),"text"===se.responseType&&!!We.responseText&&(X.partialText=We.responseText),Be.next(X)},pn=ge=>{let X={type:Le.UploadProgress,loaded:ge.loaded};ge.lengthComputable&&(X.total=ge.total),Be.next(X)};return We.addEventListener("load",At),We.addEventListener("error",rr),We.addEventListener("timeout",rr),We.addEventListener("abort",rr),se.reportProgress&&(We.addEventListener("progress",Mr),null!==Lt&&We.upload&&We.upload.addEventListener("progress",pn)),We.send(Lt),Be.next({type:Le.Sent}),()=>{We.removeEventListener("error",rr),We.removeEventListener("abort",rr),We.removeEventListener("load",At),We.removeEventListener("timeout",rr),se.reportProgress&&(We.removeEventListener("progress",Mr),null!==Lt&&We.upload&&We.upload.removeEventListener("progress",pn)),We.readyState!==We.DONE&&We.abort()}})}}return $e.\u0275fac=function(se){return new(se||$e)(C.LFG(p.JF))},$e.\u0275prov=C.Yz7({token:$e,factory:$e.\u0275fac}),$e})();const Ar=new C.OlP("XSRF_COOKIE_NAME"),Jt=new C.OlP("XSRF_HEADER_NAME");class nr{}let $n=(()=>{class $e{constructor(se,Be,We){this.doc=se,this.platform=Be,this.cookieName=We,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const se=this.doc.cookie||"";return se!==this.lastCookieString&&(this.parseCount++,this.lastToken=(0,p.Mx)(se,this.cookieName),this.lastCookieString=se),this.lastToken}}return $e.\u0275fac=function(se){return new(se||$e)(C.LFG(p.K0),C.LFG(C.Lbi),C.LFG(Ar))},$e.\u0275prov=C.Yz7({token:$e,factory:$e.\u0275fac}),$e})(),lr=(()=>{class $e{constructor(se,Be){this.tokenService=se,this.headerName=Be}intercept(se,Be){const We=se.url.toLowerCase();if("GET"===se.method||"HEAD"===se.method||We.startsWith("http://")||We.startsWith("https://"))return Be.handle(se);const Lt=this.tokenService.getToken();return null!==Lt&&!se.headers.has(this.headerName)&&(se=se.clone({headers:se.headers.set(this.headerName,Lt)})),Be.handle(se)}}return $e.\u0275fac=function(se){return new(se||$e)(C.LFG(nr),C.LFG(Jt))},$e.\u0275prov=C.Yz7({token:$e,factory:$e.\u0275fac}),$e})(),pt=(()=>{class $e{constructor(se,Be){this.backend=se,this.injector=Be,this.chain=null}handle(se){if(null===this.chain){const Be=this.injector.get(Mt,[]);this.chain=Be.reduceRight((We,Lt)=>new bt(We,Lt),this.backend)}return this.chain.handle(se)}}return $e.\u0275fac=function(se){return new(se||$e)(C.LFG(Fe),C.LFG(C.zs3))},$e.\u0275prov=C.Yz7({token:$e,factory:$e.\u0275fac}),$e})(),Hn=(()=>{class $e{static disable(){return{ngModule:$e,providers:[{provide:lr,useClass:$t}]}}static withOptions(se={}){return{ngModule:$e,providers:[se.cookieName?{provide:Ar,useValue:se.cookieName}:[],se.headerName?{provide:Jt,useValue:se.headerName}:[]]}}}return $e.\u0275fac=function(se){return new(se||$e)},$e.\u0275mod=C.oAB({type:$e}),$e.\u0275inj=C.cJS({providers:[lr,{provide:Mt,useExisting:lr,multi:!0},{provide:nr,useClass:$n},{provide:Ar,useValue:"XSRF-TOKEN"},{provide:Jt,useValue:"X-XSRF-TOKEN"}]}),$e})(),kr=(()=>{class $e{}return $e.\u0275fac=function(se){return new(se||$e)},$e.\u0275mod=C.oAB({type:$e}),$e.\u0275inj=C.cJS({providers:[wt,{provide:Oe,useClass:pt},ur,{provide:Fe,useExisting:ur}],imports:[Hn.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]}),$e})()},4650:(Gt,qe,U)=>{U.d(qe,{$8M:()=>Pa,$Z:()=>Ap,AFp:()=>Aw,ALo:()=>Z0,AaK:()=>Oe,CHM:()=>Us,CRH:()=>iw,CZH:()=>jy,CqO:()=>Ef,D6c:()=>kD,EJc:()=>YI,EpF:()=>Ym,F4k:()=>Qm,FYo:()=>kn,FiY:()=>Pt,G48:()=>yD,Gf:()=>nw,GfV:()=>kl,Gpc:()=>le,JOm:()=>yu,KtG:()=>Bo,LFG:()=>vi,LSH:()=>rd,Lbi:()=>qI,Lck:()=>HE,MAs:()=>Zm,MMx:()=>Cv,NdJ:()=>$d,OlP:()=>Pr,Oqu:()=>yg,PXZ:()=>dD,Q6J:()=>ug,QGY:()=>lg,QP$:()=>Qr,Qsj:()=>xn,R0b:()=>Su,RDi:()=>El,Rgc:()=>Cg,SBq:()=>st,Sil:()=>JI,Suo:()=>rw,TTD:()=>xi,TgZ:()=>Yl,VKq:()=>j0,W1O:()=>uw,WLB:()=>$0,X6Q:()=>mD,XFs:()=>pt,Xpm:()=>Ee,Xts:()=>Ki,Y36:()=>al,YKP:()=>O0,YNc:()=>fl,Yjl:()=>_n,Yz7:()=>Ft,Z0I:()=>Ei,ZZ4:()=>Kv,_Bn:()=>R0,_UZ:()=>Hu,_Vd:()=>B,_c5:()=>ND,_uU:()=>py,aQg:()=>Yv,c2e:()=>ZI,cJS:()=>an,cg1:()=>jc,dDg:()=>aD,dqk:()=>We,eFA:()=>jw,ekj:()=>zd,eoX:()=>Vw,f3M:()=>x,g9A:()=>Mw,h0i:()=>Uf,hGG:()=>PD,hij:()=>Mf,iGM:()=>tw,ifc:()=>Be,ip1:()=>Sw,jDz:()=>P0,kL8:()=>Ry,lG2:()=>er,lcZ:()=>K0,lqb:()=>ts,lri:()=>Fw,n5z:()=>Wi,oAB:()=>Rt,oxw:()=>Df,q4F:()=>Ec,qLn:()=>cd,qOj:()=>ig,qZA:()=>yf,rWj:()=>Lw,s9C:()=>Tf,sBO:()=>_D,sIi:()=>Ud,s_b:()=>Vy,soG:()=>$y,tb:()=>Rw,tp0:()=>bn,uIk:()=>og,vHH:()=>Ke,vpe:()=>_l,wAp:()=>Vn,xp6:()=>tm,z2F:()=>Hy,zSh:()=>Xn,zs3:()=>Vu});var p=U(7579),C=U(727),G=U(9751),be=U(6451),we=U(3099);function Me(n){for(let r in n)if(n[r]===Me)return r;throw Error("Could not find renamed property on target object.")}function Re(n,r){for(const s in r)r.hasOwnProperty(s)&&!n.hasOwnProperty(s)&&(n[s]=r[s])}function Oe(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(Oe).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const r=n.toString();if(null==r)return""+r;const s=r.indexOf("\n");return-1===s?r:r.substring(0,s)}function Fe(n,r){return null==n||""===n?null===r?"":r:null==r||""===r?n:n+" "+r}const ce=Me({__forward_ref__:Me});function le(n){return n.__forward_ref__=le,n.toString=function(){return Oe(this())},n}function Ce(n){return mt(n)?n():n}function mt(n){return"function"==typeof n&&n.hasOwnProperty(ce)&&n.__forward_ref__===le}class Ke extends Error{constructor(r,s){super(function Nt(n,r){return`NG0${Math.abs(n)}${r?": "+r.trim():""}`}(r,s)),this.code=r}}function Ye(n){return"string"==typeof n?n:null==n?"":String(n)}function it(n,r){throw new Ke(-201,!1)}function $t(n,r){null==n&&function ft(n,r,s,a){throw new Error(`ASSERTION ERROR: ${n}`+(null==a?"":` [Expected=> ${s} ${a} ${r} <=Actual]`))}(r,n,null,"!=")}function Ft(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function an(n){return{providers:n.providers||[],imports:n.imports||[]}}function Fn(n){return Er(n,Jt)||Er(n,$n)}function Ei(n){return null!==Fn(n)}function Er(n,r){return n.hasOwnProperty(r)?n[r]:null}function Ar(n){return n&&(n.hasOwnProperty(nr)||n.hasOwnProperty(lr))?n[nr]:null}const Jt=Me({\u0275prov:Me}),nr=Me({\u0275inj:Me}),$n=Me({ngInjectableDef:Me}),lr=Me({ngInjectorDef:Me});var pt=(()=>((pt=pt||{})[pt.Default=0]="Default",pt[pt.Host=1]="Host",pt[pt.Self=2]="Self",pt[pt.SkipSelf=4]="SkipSelf",pt[pt.Optional=8]="Optional",pt))();let Bn;function Hn(n){const r=Bn;return Bn=n,r}function kr(n,r,s){const a=Fn(n);return a&&"root"==a.providedIn?void 0===a.value?a.value=a.factory():a.value:s&pt.Optional?null:void 0!==r?r:void it(Oe(n))}function xr(n){return{toString:n}.toString()}var $e=(()=>(($e=$e||{})[$e.OnPush=0]="OnPush",$e[$e.Default=1]="Default",$e))(),Be=(()=>{return(n=Be||(Be={}))[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",Be;var n})();const We=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),jn={},At=[],rr=Me({\u0275cmp:Me}),Sn=Me({\u0275dir:Me}),Mr=Me({\u0275pipe:Me}),pn=Me({\u0275mod:Me}),ge=Me({\u0275fac:Me}),X=Me({__NG_ELEMENT_ID__:Me});let oe=0;function Ee(n){return xr(()=>{const s=!0===n.standalone,a={},l={type:n.type,providersResolver:null,decls:n.decls,vars:n.vars,factory:null,template:n.template||null,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:a,inputs:null,outputs:null,exportAs:n.exportAs||null,onPush:n.changeDetection===$e.OnPush,directiveDefs:null,pipeDefs:null,standalone:s,dependencies:s&&n.dependencies||null,getStandaloneInjector:null,selectors:n.selectors||At,viewQuery:n.viewQuery||null,features:n.features||null,data:n.data||{},encapsulation:n.encapsulation||Be.Emulated,id:"c"+oe++,styles:n.styles||At,_:null,setInput:null,schemas:n.schemas||null,tView:null},h=n.dependencies,y=n.features;return l.inputs=Tn(n.inputs,a),l.outputs=Tn(n.outputs),y&&y.forEach(I=>I(l)),l.directiveDefs=h?()=>("function"==typeof h?h():h).map(ut).filter(yt):null,l.pipeDefs=h?()=>("function"==typeof h?h():h).map(vr).filter(yt):null,l})}function ut(n){return Xt(n)||cr(n)}function yt(n){return null!==n}function Rt(n){return xr(()=>({type:n.type,bootstrap:n.bootstrap||At,declarations:n.declarations||At,imports:n.imports||At,exports:n.exports||At,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function Tn(n,r){if(null==n)return jn;const s={};for(const a in n)if(n.hasOwnProperty(a)){let l=n[a],h=l;Array.isArray(l)&&(h=l[1],l=l[0]),s[l]=a,r&&(r[l]=h)}return s}const er=Ee;function _n(n){return{type:n.type,name:n.name,factory:null,pure:!1!==n.pure,standalone:!0===n.standalone,onDestroy:n.type.prototype.ngOnDestroy||null}}function Xt(n){return n[rr]||null}function cr(n){return n[Sn]||null}function vr(n){return n[Mr]||null}function Qr(n){const r=Xt(n)||cr(n)||vr(n);return null!==r&&r.standalone}function $r(n,r){const s=n[pn]||null;if(!s&&!0===r)throw new Error(`Type ${Oe(n)} does not have '\u0275mod' property.`);return s}function Cr(n){return Array.isArray(n)&&"object"==typeof n[1]}function ci(n){return Array.isArray(n)&&!0===n[1]}function Fs(n){return 0!=(8&n.flags)}function Rs(n){return 2==(2&n.flags)}function Xr(n){return 1==(1&n.flags)}function wr(n){return null!==n.template}function co(n){return 0!=(256&n[2])}function Ni(n,r){return n.hasOwnProperty(ge)?n[ge]:null}class os{constructor(r,s,a){this.previousValue=r,this.currentValue=s,this.firstChange=a}isFirstChange(){return this.firstChange}}function xi(){return Qi}function Qi(n){return n.type.prototype.ngOnChanges&&(n.setInput=Ji),ys}function ys(){const n=ko(this),r=n?.current;if(r){const s=n.previous;if(s===jn)n.previous=r;else for(let a in r)s[a]=r[a];n.current=null,this.ngOnChanges(r)}}function Ji(n,r,s,a){const l=ko(n)||function Ls(n,r){return n[fo]=r}(n,{previous:jn,current:null}),h=l.current||(l.current={}),y=l.previous,I=this.declaredInputs[s],T=y[I];h[I]=new os(T&&T.currentValue,r,y===jn),n[a]=r}xi.ngInherit=!0;const fo="__ngSimpleChanges__";function ko(n){return n[fo]||null}function Lr(n){for(;Array.isArray(n);)n=n[0];return n}function hi(n,r){return Lr(r[n])}function ii(n,r){return Lr(r[n.index])}function Pi(n,r){return n.data[r]}function Rr(n,r){return n[r]}function qn(n,r){const s=r[n];return Cr(s)?s:s[0]}function vs(n){return 4==(4&n[2])}function as(n){return 64==(64&n[2])}function Jn(n,r){return null==r?null:n[r]}function eo(n){n[18]=0}function zr(n,r){n[5]+=r;let s=n,a=n[3];for(;null!==a&&(1===r&&1===s[5]||-1===r&&0===s[5]);)a[5]+=r,s=a,a=a[3]}const gn={lFrame:Jo(null),bindingsEnabled:!0};function us(){return gn.bindingsEnabled}function ht(){return gn.lFrame.lView}function Rn(){return gn.lFrame.tView}function Us(n){return gn.lFrame.contextLView=n,n[8]}function Bo(n){return gn.lFrame.contextLView=null,n}function Or(){let n=$i();for(;null!==n&&64===n.type;)n=n.parent;return n}function $i(){return gn.lFrame.currentTNode}function ls(n,r){const s=gn.lFrame;s.currentTNode=n,s.isParent=r}function jo(){return gn.lFrame.isParent}function A(){const n=gn.lFrame;let r=n.bindingRootIndex;return-1===r&&(r=n.bindingRootIndex=n.tView.bindingStartIndex),r}function nn(){return gn.lFrame.bindingIndex++}function Hi(n,r){const s=gn.lFrame;s.bindingIndex=s.bindingRootIndex=n,no(r)}function no(n){gn.lFrame.currentDirectiveIndex=n}function Co(){return gn.lFrame.currentQueryIndex}function Ps(n){gn.lFrame.currentQueryIndex=n}function ca(n){const r=n[1];return 2===r.type?r.declTNode:1===r.type?n[6]:null}function Wr(n,r,s){if(s&pt.SkipSelf){let l=r,h=n;for(;!(l=l.parent,null!==l||s&pt.Host||(l=ca(h),null===l||(h=h[15],10&l.type))););if(null===l)return!1;r=l,n=h}const a=gn.lFrame=da();return a.currentTNode=r,a.lView=n,!0}function ws(n){const r=da(),s=n[1];gn.lFrame=r,r.currentTNode=s.firstChild,r.lView=n,r.tView=s,r.contextLView=n,r.bindingIndex=s.bindingStartIndex,r.inI18n=!1}function da(){const n=gn.lFrame,r=null===n?null:n.child;return null===r?Jo(n):r}function Jo(n){const r={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=r),r}function Ea(){const n=gn.lFrame;return gn.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const S=Ea;function $(){const n=Ea();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function fe(){return gn.lFrame.selectedIndex}function ze(n){gn.lFrame.selectedIndex=n}function rt(){const n=gn.lFrame;return Pi(n.tView,n.selectedIndex)}function pr(n,r){for(let s=r.directiveStart,a=r.directiveEnd;s<a;s++){const h=n.data[s].type.prototype,{ngAfterContentInit:y,ngAfterContentChecked:I,ngAfterViewInit:T,ngAfterViewChecked:V,ngOnDestroy:Z}=h;y&&(n.contentHooks||(n.contentHooks=[])).push(-s,y),I&&((n.contentHooks||(n.contentHooks=[])).push(s,I),(n.contentCheckHooks||(n.contentCheckHooks=[])).push(s,I)),T&&(n.viewHooks||(n.viewHooks=[])).push(-s,T),V&&((n.viewHooks||(n.viewHooks=[])).push(s,V),(n.viewCheckHooks||(n.viewCheckHooks=[])).push(s,V)),null!=Z&&(n.destroyHooks||(n.destroyHooks=[])).push(s,Z)}}function Vr(n,r,s){qs(n,r,3,s)}function Bs(n,r,s,a){(3&n[2])===s&&qs(n,r,s,a)}function Es(n,r){let s=n[2];(3&s)===r&&(s&=2047,s+=1,n[2]=s)}function qs(n,r,s,a){const h=a??-1,y=r.length-1;let I=0;for(let T=void 0!==a?65535&n[18]:0;T<y;T++)if("number"==typeof r[T+1]){if(I=r[T],null!=a&&I>=a)break}else r[T]<0&&(n[18]+=65536),(I<h||-1==h)&&(R(n,s,r,T),n[18]=(4294901760&n[18])+T+2),T++}function R(n,r,s,a){const l=s[a]<0,h=s[a+1],I=n[l?-s[a]:s[a]];if(l){if(n[2]>>11<n[18]>>16&&(3&n[2])===r){n[2]+=2048;try{h.call(I)}finally{}}}else try{h.call(I)}finally{}}const O=-1;class j{constructor(r,s,a){this.factory=r,this.resolving=!1,this.canSeeViewProviders=s,this.injectImpl=a}}function qr(n,r,s){let a=0;for(;a<s.length;){const l=s[a];if("number"==typeof l){if(0!==l)break;a++;const h=s[a++],y=s[a++],I=s[a++];n.setAttribute(r,y,I,h)}else{const h=l,y=s[++a];fi(h)?n.setProperty(r,h,y):n.setAttribute(r,h,y),a++}}return a}function Tr(n){return 3===n||4===n||6===n}function fi(n){return 64===n.charCodeAt(0)}function oi(n,r){if(null!==r&&0!==r.length)if(null===n||0===n.length)n=r.slice();else{let s=-1;for(let a=0;a<r.length;a++){const l=r[a];"number"==typeof l?s=l:0===s||es(n,s,l,null,-1===s||2===s?r[++a]:null)}}return n}function es(n,r,s,a,l){let h=0,y=n.length;if(-1===r)y=-1;else for(;h<n.length;){const I=n[h++];if("number"==typeof I){if(I===r){y=-1;break}if(I>r){y=h-1;break}}}for(;h<n.length;){const I=n[h];if("number"==typeof I)break;if(I===s){if(null===a)return void(null!==l&&(n[h+1]=l));if(a===n[h+1])return void(n[h+2]=l)}h++,null!==a&&h++,null!==l&&h++}-1!==y&&(n.splice(y,0,r),h=y+1),n.splice(h++,0,s),null!==a&&n.splice(h++,0,a),null!==l&&n.splice(h++,0,l)}function fr(n){return n!==O}function Ur(n){return 32767&n}function ti(n,r){let s=function js(n){return n>>16}(n),a=r;for(;s>0;)a=a[15],s--;return a}let Zr=!0;function vo(n){const r=Zr;return Zr=n,r}let ai=0;const ro={};function Ma(n,r){const s=Gi(n,r);if(-1!==s)return s;const a=r[1];a.firstCreatePass&&(n.injectorIndex=r.length,Ra(a.data,n),Ra(r,null),Ra(a.blueprint,null));const l=ea(n,r),h=n.injectorIndex;if(fr(l)){const y=Ur(l),I=ti(l,r),T=I[1].data;for(let V=0;V<8;V++)r[h+V]=I[y+V]|T[y+V]}return r[h+8]=l,h}function Ra(n,r){n.push(0,0,0,0,0,0,0,0,r)}function Gi(n,r){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===r[n.injectorIndex+8]?-1:n.injectorIndex}function ea(n,r){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let s=0,a=null,l=r;for(;null!==l;){if(a=Na(l),null===a)return O;if(s++,l=l[15],-1!==a.injectorIndex)return a.injectorIndex|s<<16}return O}function Zs(n,r,s){!function ha(n,r,s){let a;"string"==typeof s?a=s.charCodeAt(0)||0:s.hasOwnProperty(X)&&(a=s[X]),null==a&&(a=s[X]=ai++);const l=255&a;r.data[n+(l>>5)]|=1<<l}(n,r,s)}function fa(n,r,s){if(s&pt.Optional)return n;it()}function Tt(n,r,s,a){if(s&pt.Optional&&void 0===a&&(a=null),0==(s&(pt.Self|pt.Host))){const l=n[9],h=Hn(void 0);try{return l?l.get(r,a,s&pt.Optional):kr(r,a,s&pt.Optional)}finally{Hn(h)}}return fa(a,0,s)}function Nr(n,r,s,a=pt.Default,l){if(null!==n){if(1024&r[2]){const y=function Ia(n,r,s,a,l){let h=n,y=r;for(;null!==h&&null!==y&&1024&y[2]&&!(256&y[2]);){const I=To(h,y,s,a|pt.Self,ro);if(I!==ro)return I;let T=h.parent;if(!T){const V=y[21];if(V){const Z=V.get(s,ro,a);if(Z!==ro)return Z}T=Na(y),y=y[15]}h=T}return l}(n,r,s,a,ro);if(y!==ro)return y}const h=To(n,r,s,a,ro);if(h!==ro)return h}return Tt(r,s,a,l)}function To(n,r,s,a,l){const h=function Au(n){if("string"==typeof n)return n.charCodeAt(0)||0;const r=n.hasOwnProperty(X)?n[X]:void 0;return"number"==typeof r?r>=0?255&r:zi:r}(s);if("function"==typeof h){if(!Wr(r,n,a))return a&pt.Host?fa(l,0,a):Tt(r,s,a,l);try{const y=h(a);if(null!=y||a&pt.Optional)return y;it()}finally{S()}}else if("number"==typeof h){let y=null,I=Gi(n,r),T=O,V=a&pt.Host?r[16][6]:null;for((-1===I||a&pt.SkipSelf)&&(T=-1===I?ea(n,r):r[I+8],T!==O&&Je(a,!1)?(y=r[1],I=Ur(T),r=ti(T,r)):I=-1);-1!==I;){const Z=r[1];if(Ht(h,I,Z.data)){const ee=za(I,r,s,y,a,V);if(ee!==ro)return ee}T=r[I+8],T!==O&&Je(a,r[1].data[I+8]===V)&&Ht(h,I,r)?(y=Z,I=Ur(T),r=ti(T,r)):I=-1}}return l}function za(n,r,s,a,l,h){const y=r[1],I=y.data[n+8],Z=Qt(I,y,s,null==a?Rs(I)&&Zr:a!=y&&0!=(3&I.type),l&pt.Host&&h===I);return null!==Z?vn(r,y,Z,I):ro}function Qt(n,r,s,a,l){const h=n.providerIndexes,y=r.data,I=1048575&h,T=n.directiveStart,Z=h>>20,Se=l?I+Z:n.directiveEnd;for(let je=a?I:I+Z;je<Se;je++){const vt=y[je];if(je<T&&s===vt||je>=T&&vt.type===s)return je}if(l){const je=y[T];if(je&&wr(je)&&je.type===s)return T}return null}function vn(n,r,s,a){let l=n[s];const h=r.data;if(function J(n){return n instanceof j}(l)){const y=l;y.resolving&&function Ut(n,r){const s=r?`. Dependency path: ${r.join(" > ")} > ${n}`:"";throw new Ke(-200,`Circular dependency in DI detected for ${n}${s}`)}(function He(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():Ye(n)}(h[s]));const I=vo(y.canSeeViewProviders);y.resolving=!0;const T=y.injectImpl?Hn(y.injectImpl):null;Wr(n,a,pt.Default);try{l=n[s]=y.factory(void 0,h,n,a),r.firstCreatePass&&s>=a.directiveStart&&function si(n,r,s){const{ngOnChanges:a,ngOnInit:l,ngDoCheck:h}=r.type.prototype;if(a){const y=Qi(r);(s.preOrderHooks||(s.preOrderHooks=[])).push(n,y),(s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(n,y)}l&&(s.preOrderHooks||(s.preOrderHooks=[])).push(0-n,l),h&&((s.preOrderHooks||(s.preOrderHooks=[])).push(n,h),(s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(n,h))}(s,h[s],r)}finally{null!==T&&Hn(T),vo(I),y.resolving=!1,S()}}return l}function Ht(n,r,s){return!!(s[r+(n>>5)]&1<<n)}function Je(n,r){return!(n&pt.Self||n&pt.Host&&r)}class Et{constructor(r,s){this._tNode=r,this._lView=s}get(r,s,a){return Nr(this._tNode,this._lView,r,a,s)}}function zi(){return new Et(Or(),ht())}function Wi(n){return xr(()=>{const r=n.prototype.constructor,s=r[ge]||nu(r),a=Object.prototype;let l=Object.getPrototypeOf(n.prototype).constructor;for(;l&&l!==a;){const h=l[ge]||nu(l);if(h&&h!==s)return h;l=Object.getPrototypeOf(l)}return h=>new h})}function nu(n){return mt(n)?()=>{const r=nu(Ce(n));return r&&r()}:Ni(n)}function Na(n){const r=n[1],s=r.type;return 2===s?r.declTNode:1===s?n[6]:null}function Pa(n){return function Oa(n,r){if("class"===r)return n.classes;if("style"===r)return n.styles;const s=n.attrs;if(s){const a=s.length;let l=0;for(;l<a;){const h=s[l];if(Tr(h))break;if(0===h)l+=2;else if("number"==typeof h)for(l++;l<a&&"string"==typeof s[l];)l++;else{if(h===r)return s[l+1];l+=2}}}return null}(Or(),n)}const Ho="__parameters__";function ga(n,r,s){return xr(()=>{const a=function iu(n){return function(...s){if(n){const a=n(...s);for(const l in a)this[l]=a[l]}}}(r);function l(...h){if(this instanceof l)return a.apply(this,h),this;const y=new l(...h);return I.annotation=y,I;function I(T,V,Z){const ee=T.hasOwnProperty(Ho)?T[Ho]:Object.defineProperty(T,Ho,{value:[]})[Ho];for(;ee.length<=Z;)ee.push(null);return(ee[Z]=ee[Z]||[]).push(y),T}}return s&&(l.prototype=Object.create(s.prototype)),l.prototype.ngMetadataName=n,l.annotationCls=l,l})}class Pr{constructor(r,s){this._desc=r,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof s?this.__NG_ELEMENT_ID__=s:void 0!==s&&(this.\u0275prov=Ft({token:this,providedIn:s.providedIn||"root",factory:s.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function io(n,r){void 0===r&&(r=n);for(let s=0;s<n.length;s++){let a=n[s];Array.isArray(a)?(r===n&&(r=n.slice(0,s)),io(a,r)):r!==n&&r.push(a)}return r}function yi(n,r){n.forEach(s=>Array.isArray(s)?yi(s,r):r(s))}function ou(n,r,s){r>=n.length?n.push(s):n.splice(r,0,s)}function Ca(n,r){return r>=n.length-1?n.pop():n.splice(r,1)[0]}function Ds(n,r,s){let a=v(n,r);return a>=0?n[1|a]=s:(a=~a,function Ze(n,r,s,a){let l=n.length;if(l==r)n.push(s,a);else if(1===l)n.push(a,n[0]),n[0]=s;else{for(l--,n.push(n[l-1],n[l]);l>r;)n[l]=n[l-2],l--;n[r]=s,n[r+1]=a}}(n,a,r,s)),a}function Ao(n,r){const s=v(n,r);if(s>=0)return n[1|s]}function v(n,r){return function _(n,r,s){let a=0,l=n.length>>s;for(;l!==a;){const h=a+(l-a>>1),y=n[h<<s];if(r===y)return h<<s;y>r?l=h:a=h+1}return~(l<<s)}(n,r,1)}const Dn={},zn="__NG_DI_FLAG__",so="ngTempTokenPath",pi=/\n/gm,_i="__source";let Fa;function oo(n){const r=Fa;return Fa=n,r}function ki(n,r=pt.Default){if(void 0===Fa)throw new Ke(-203,!1);return null===Fa?kr(n,void 0,r):Fa.get(n,r&pt.Optional?null:void 0,r)}function vi(n,r=pt.Default){return(function Cn(){return Bn}()||ki)(Ce(n),r)}function x(n,r=pt.Default){return"number"!=typeof r&&(r=0|(r.optional&&8)|(r.host&&1)|(r.self&&2)|(r.skipSelf&&4)),vi(n,r)}function k(n){const r=[];for(let s=0;s<n.length;s++){const a=Ce(n[s]);if(Array.isArray(a)){if(0===a.length)throw new Ke(900,!1);let l,h=pt.Default;for(let y=0;y<a.length;y++){const I=a[y],T=ie(I);"number"==typeof T?-1===T?l=I.token:h|=T:l=I}r.push(vi(l,h))}else r.push(vi(a))}return r}function W(n,r){return n[zn]=r,n.prototype[zn]=r,n}function ie(n){return n[zn]}const Pt=W(ga("Optional"),8),bn=W(ga("SkipSelf"),4);let Zc;function El(n){Zc=n}class lc{constructor(r){this.changingThisBreaksApplicationSecurity=r}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function Ys(n){return n instanceof lc?n.changingThisBreaksApplicationSecurity:n}const Yc=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;var Ts=(()=>((Ts=Ts||{})[Ts.NONE=0]="NONE",Ts[Ts.HTML=1]="HTML",Ts[Ts.STYLE=2]="STYLE",Ts[Ts.SCRIPT=3]="SCRIPT",Ts[Ts.URL=4]="URL",Ts[Ts.RESOURCE_URL=5]="RESOURCE_URL",Ts))();function rd(n){const r=function Nu(){const n=ht();return n&&n[12]}();return r?r.sanitize(Ts.URL,n)||"":function Yu(n,r){const s=function Mu(n){return n instanceof lc&&n.getTypeName()||null}(n);if(null!=s&&s!==r){if("ResourceURL"===s&&"URL"===r)return!0;throw new Error(`Required a safe ${r}, got a ${s} (see https://g.co/ng/security#xss)`)}return s===r}(n,"URL")?Ys(n):function cu(n){return(n=String(n)).match(Yc)?n:"unsafe:"+n}(Ye(n))}const Ki=new Pr("ENVIRONMENT_INITIALIZER"),Sr=new Pr("INJECTOR",-1),sd=new Pr("INJECTOR_DEF_TYPES");class Rl{get(r,s=Dn){if(s===Dn){const a=new Error(`NullInjectorError: No provider for ${Oe(r)}!`);throw a.name="NullInjectorError",a}return s}}function fu(...n){return{\u0275providers:qo(0,n)}}function qo(n,...r){const s=[],a=new Set;let l;return yi(r,h=>{const y=h;Ol(y,s,[],a)&&(l||(l=[]),l.push(y))}),void 0!==l&&Hs(l,s),s}function Hs(n,r){for(let s=0;s<n.length;s++){const{providers:l}=n[s];yi(l,h=>{r.push(h)})}}function Ol(n,r,s,a){if(!(n=Ce(n)))return!1;let l=null,h=Ar(n);const y=!h&&Xt(n);if(h||y){if(y&&!y.standalone)return!1;l=n}else{const T=n.ngModule;if(h=Ar(T),!h)return!1;l=T}const I=a.has(l);if(y){if(I)return!1;if(a.add(l),y.dependencies){const T="function"==typeof y.dependencies?y.dependencies():y.dependencies;for(const V of T)Ol(V,r,s,a)}}else{if(!h)return!1;{if(null!=h.imports&&!I){let V;a.add(l);try{yi(h.imports,Z=>{Ol(Z,r,s,a)&&(V||(V=[]),V.push(Z))})}finally{}void 0!==V&&Hs(V,r)}if(!I){const V=Ni(l)||(()=>new l);r.push({provide:l,useFactory:V,deps:At},{provide:sd,useValue:l,multi:!0},{provide:Ki,useValue:()=>vi(l),multi:!0})}const T=h.providers;null==T||I||yi(T,Z=>{r.push(Z)})}}return l!==n&&void 0!==n.providers}const yc=Me({provide:String,useValue:Me});function Zo(n){return null!==n&&"object"==typeof n&&yc in n}function ku(n){return"function"==typeof n}const Xn=new Pr("Set Injector scope."),_c={},vc={};let Fu;function Ya(){return void 0===Fu&&(Fu=new Rl),Fu}class ts{}class Nl extends ts{constructor(r,s,a,l){super(),this.parent=s,this.source=a,this.scopes=l,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,wc(r,y=>this.processProvider(y)),this.records.set(Sr,gu(void 0,this)),l.has("environment")&&this.records.set(ts,gu(void 0,this));const h=this.records.get(Xn);null!=h&&"string"==typeof h.value&&this.scopes.add(h.value),this.injectorDefTypes=new Set(this.get(sd.multi,At,pt.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const r of this._ngOnDestroyHooks)r.ngOnDestroy();for(const r of this._onDestroyHooks)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(r){this._onDestroyHooks.push(r)}runInContext(r){this.assertNotDestroyed();const s=oo(this),a=Hn(void 0);try{return r()}finally{oo(s),Hn(a)}}get(r,s=Dn,a=pt.Default){this.assertNotDestroyed();const l=oo(this),h=Hn(void 0);try{if(!(a&pt.SkipSelf)){let I=this.records.get(r);if(void 0===I){const T=function ad(n){return"function"==typeof n||"object"==typeof n&&n instanceof Pr}(r)&&Fn(r);I=T&&this.injectableDefInScope(T)?gu(el(r),_c):null,this.records.set(r,I)}if(null!=I)return this.hydrate(r,I)}return(a&pt.Self?Ya():this.parent).get(r,s=a&pt.Optional&&s===Dn?null:s)}catch(y){if("NullInjectorError"===y.name){if((y[so]=y[so]||[]).unshift(Oe(r)),l)throw y;return function Pe(n,r,s,a){const l=n[so];throw r[_i]&&l.unshift(r[_i]),n.message=function Qe(n,r,s,a=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.slice(2):n;let l=Oe(r);if(Array.isArray(r))l=r.map(Oe).join(" -> ");else if("object"==typeof r){let h=[];for(let y in r)if(r.hasOwnProperty(y)){let I=r[y];h.push(y+":"+("string"==typeof I?JSON.stringify(I):Oe(I)))}l=`{${h.join(", ")}}`}return`${s}${a?"("+a+")":""}[${l}]: ${n.replace(pi,"\n  ")}`}("\n"+n.message,l,s,a),n.ngTokenPath=l,n[so]=null,n}(y,r,"R3InjectorError",this.source)}throw y}finally{Hn(h),oo(l)}}resolveInjectorInitializers(){const r=oo(this),s=Hn(void 0);try{const a=this.get(Ki.multi,At,pt.Self);for(const l of a)l()}finally{oo(r),Hn(s)}}toString(){const r=[],s=this.records;for(const a of s.keys())r.push(Oe(a));return`R3Injector[${r.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Ke(205,!1)}processProvider(r){let s=ku(r=Ce(r))?r:Ce(r&&r.provide);const a=function Qa(n){return Zo(n)?gu(void 0,n.useValue):gu(Lu(n),_c)}(r);if(ku(r)||!0!==r.multi)this.records.get(s);else{let l=this.records.get(s);l||(l=gu(void 0,_c,!0),l.factory=()=>k(l.multi),this.records.set(s,l)),s=r,l.multi.push(r)}this.records.set(s,a)}hydrate(r,s){return s.value===_c&&(s.value=vc,s.value=s.factory()),"object"==typeof s.value&&s.value&&function qf(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(s.value)&&this._ngOnDestroyHooks.add(s.value),s.value}injectableDefInScope(r){if(!r.providedIn)return!1;const s=Ce(r.providedIn);return"string"==typeof s?"any"===s||this.scopes.has(s):this.injectorDefTypes.has(s)}}function el(n){const r=Fn(n),s=null!==r?r.factory:Ni(n);if(null!==s)return s;if(n instanceof Pr)throw new Ke(204,!1);if(n instanceof Function)return function dh(n){const r=n.length;if(r>0)throw function na(n,r){const s=[];for(let a=0;a<n;a++)s.push(r);return s}(r,"?"),new Ke(204,!1);const s=function mr(n){const r=n&&(n[Jt]||n[$n]);if(r){const s=function ur(n){if(n.hasOwnProperty("name"))return n.name;const r=(""+n).match(/^function\s*([^\s(]+)/);return null===r?"":r[1]}(n);return console.warn(`DEPRECATED: DI is instantiating a token "${s}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${s}" class.`),r}return null}(n);return null!==s?()=>s.factory(n):()=>new n}(n);throw new Ke(204,!1)}function Lu(n,r,s){let a;if(ku(n)){const l=Ce(n);return Ni(l)||el(l)}if(Zo(n))a=()=>Ce(n.useValue);else if(function Pu(n){return!(!n||!n.useFactory)}(n))a=()=>n.useFactory(...k(n.deps||[]));else if(function od(n){return!(!n||!n.useExisting)}(n))a=()=>vi(Ce(n.useExisting));else{const l=Ce(n&&(n.useClass||n.provide));if(!function hh(n){return!!n.deps}(n))return Ni(l)||el(l);a=()=>new l(...k(n.deps))}return a}function gu(n,r,s=!1){return{factory:n,value:r,multi:s?[]:void 0}}function Pl(n){return!!n.\u0275providers}function wc(n,r){for(const s of n)Array.isArray(s)?wc(s,r):Pl(s)?wc(s.\u0275providers,r):r(s)}class Gs{}class E{resolveComponentFactory(r){throw function m(n){const r=Error(`No component factory found for ${Oe(n)}. Did you add it to @NgModule.entryComponents?`);return r.ngComponent=n,r}(r)}}let B=(()=>{class n{}return n.NULL=new E,n})();function Y(){return Te(Or(),ht())}function Te(n,r){return new st(ii(n,r))}let st=(()=>{class n{constructor(s){this.nativeElement=s}}return n.__NG_ELEMENT_ID__=Y,n})();function kt(n){return n instanceof st?n.nativeElement:n}class kn{}let xn=(()=>{class n{}return n.__NG_ELEMENT_ID__=()=>function ns(){const n=ht(),s=qn(Or().index,n);return(Cr(s)?s:n)[11]}(),n})(),ia=(()=>{class n{}return n.\u0275prov=Ft({token:n,providedIn:"root",factory:()=>null}),n})();class kl{constructor(r){this.full=r,this.major=r.split(".")[0],this.minor=r.split(".")[1],this.patch=r.split(".").slice(2).join(".")}}const Ec=new kl("14.2.0"),tl={};function Jf(n){return n.ngOriginalError}class cd{constructor(){this._console=console}handleError(r){const s=this._findOriginalError(r);this._console.error("ERROR",r),s&&this._console.error("ORIGINAL ERROR",s)}_findOriginalError(r){let s=r&&Jf(r);for(;s&&Jf(s);)s=Jf(s);return s||null}}const Xf=new Map;let n_=0;const Qs="__ngContext__";function Eo(n,r){Cr(r)?(n[Qs]=r[20],function i_(n){Xf.set(n[20],n)}(r)):n[Qs]=r}function Fl(n){const r=n[Qs];return"number"==typeof r?function ep(n){return Xf.get(n)||null}(r):r||null}function dd(n){const r=Fl(n);return r?Cr(r)?r:r.lView:null}function mu(n){return n instanceof Function?n():n}var yu=(()=>((yu=yu||{})[yu.Important=1]="Important",yu[yu.DashCase=2]="DashCase",yu))();function sp(n,r){return undefined(n,r)}function Xa(n){const r=n[3];return ci(r)?r[3]:r}function op(n){return vh(n[13])}function ap(n){return vh(n[4])}function vh(n){for(;null!==n&&!ci(n);)n=n[4];return n}function Cc(n,r,s,a,l){if(null!=a){let h,y=!1;ci(a)?h=a:Cr(a)&&(y=!0,a=a[0]);const I=Lr(a);0===n&&null!==s?null==l?dp(r,s,I):va(r,s,I,l||null,!0):1===n&&null!==s?va(r,s,I,l||null,!0):2===n?function qg(n,r,s){const a=bh(n,r);a&&function c_(n,r,s,a){n.removeChild(r,s,a)}(n,a,r,s)}(r,I,y):3===n&&r.destroyNode(I),null!=h&&function Io(n,r,s,a,l){const h=s[7];h!==Lr(s)&&Cc(r,n,a,h,l);for(let I=10;I<s.length;I++){const T=s[I];gd(T[1],T,n,r,a,h)}}(r,n,h,s,l)}}function jl(n,r,s){return n.createElement(r,s)}function lp(n,r){const s=n[9],a=s.indexOf(r),l=r[3];512&r[2]&&(r[2]&=-513,zr(l,-1)),s.splice(a,1)}function _u(n,r){if(n.length<=10)return;const s=10+r,a=n[s];if(a){const l=a[17];null!==l&&l!==n&&lp(l,a),r>0&&(n[s-1][4]=a[4]);const h=Ca(n,10+r);!function $g(n,r){gd(n,r,r[11],2,null,null),r[0]=null,r[6]=null}(a[1],a);const y=h[19];null!==y&&y.detachView(h[1]),a[3]=null,a[4]=null,a[2]&=-65}return a}function $l(n,r){if(!(128&r[2])){const s=r[11];s.destroyNode&&gd(n,r,s,3,null,null),function Gg(n){let r=n[13];if(!r)return Ch(n[1],n);for(;r;){let s=null;if(Cr(r))s=r[13];else{const a=r[10];a&&(s=a)}if(!s){for(;r&&!r[4]&&r!==n;)Cr(r)&&Ch(r[1],r),r=r[3];null===r&&(r=n),Cr(r)&&Ch(r[1],r),s=r&&r[4]}r=s}}(r)}}function Ch(n,r){if(!(128&r[2])){r[2]&=-65,r[2]|=128,function l_(n,r){let s;if(null!=n&&null!=(s=n.destroyHooks))for(let a=0;a<s.length;a+=2){const l=r[s[a]];if(!(l instanceof j)){const h=s[a+1];if(Array.isArray(h))for(let y=0;y<h.length;y+=2){const I=l[h[y]],T=h[y+1];try{T.call(I)}finally{}}else try{h.call(l)}finally{}}}}(n,r),function Hl(n,r){const s=n.cleanup,a=r[7];let l=-1;if(null!==s)for(let h=0;h<s.length-1;h+=2)if("string"==typeof s[h]){const y=s[h+1],I="function"==typeof y?y(r):Lr(r[y]),T=a[l=s[h+2]],V=s[h+3];"boolean"==typeof V?I.removeEventListener(s[h],T,V):V>=0?a[l=V]():a[l=-V].unsubscribe(),h+=2}else{const y=a[l=s[h+1]];s[h].call(y)}if(null!==a){for(let h=l+1;h<a.length;h++)(0,a[h])();r[7]=null}}(n,r),1===r[1].type&&r[11].destroy();const s=r[17];if(null!==s&&ci(r[3])){s!==r[3]&&lp(s,r);const a=r[19];null!==a&&a.detachView(n)}!function s_(n){Xf.delete(n[20])}(r)}}function Gl(n,r,s){return function cp(n,r,s){let a=r;for(;null!==a&&40&a.type;)a=(r=a).parent;if(null===a)return s[0];if(2&a.flags){const l=n.data[a.directiveStart].encapsulation;if(l===Be.None||l===Be.Emulated)return null}return ii(a,s)}(n,r.parent,s)}function va(n,r,s,a,l){n.insertBefore(r,s,a,l)}function dp(n,r,s){n.appendChild(r,s)}function zg(n,r,s,a,l){null!==a?va(n,r,s,a,l):dp(n,r,s)}function bh(n,r){return n.parentNode(r)}let fp=function Wg(n,r,s){return 40&n.type?ii(n,s):null};function vu(n,r,s,a){const l=Gl(n,a,r),h=r[11],I=function hp(n,r,s){return fp(n,r,s)}(a.parent||r[6],a,r);if(null!=l)if(Array.isArray(s))for(let T=0;T<s.length;T++)zg(h,l,s[T],I,!1);else zg(h,l,s,I,!1)}function ol(n,r){if(null!==r){const s=r.type;if(3&s)return ii(r,n);if(4&s)return Sh(-1,n[r.index]);if(8&s){const a=r.child;if(null!==a)return ol(n,a);{const l=n[r.index];return ci(l)?Sh(-1,l):Lr(l)}}if(32&s)return sp(r,n)()||Lr(n[r.index]);{const a=mp(n,r);return null!==a?Array.isArray(a)?a[0]:ol(Xa(n[16]),a):ol(n,r.next)}}return null}function mp(n,r){return null!==r?n[16][6].projection[r.projection]:null}function Sh(n,r){const s=10+n+1;if(s<r.length){const a=r[s],l=a[1].firstChild;if(null!==l)return ol(a,l)}return r[7]}function Ah(n,r,s,a,l,h,y){for(;null!=s;){const I=a[s.index],T=s.type;if(y&&0===r&&(I&&Eo(Lr(I),a),s.flags|=4),64!=(64&s.flags))if(8&T)Ah(n,r,s.child,a,l,h,!1),Cc(r,n,l,I,h);else if(32&T){const V=sp(s,a);let Z;for(;Z=V();)Cc(r,n,l,Z,h);Cc(r,n,l,I,h)}else 16&T?xh(n,r,a,s,l,h):Cc(r,n,l,I,h);s=y?s.projectionNext:s.next}}function gd(n,r,s,a,l,h){Ah(s,a,n.firstChild,r,l,h,!1)}function xh(n,r,s,a,l,h){const y=s[16],T=y[6].projection[a.projection];if(Array.isArray(T))for(let V=0;V<T.length;V++)Cc(r,n,l,T[V],h);else Ah(n,r,T,y[3],l,h,!0)}function Zg(n,r,s){n.setAttribute(r,"style",s)}function yp(n,r,s){""===s?n.removeAttribute(r,"class"):n.setAttribute(r,"class",s)}function Kg(n,r,s){let a=n.length;for(;;){const l=n.indexOf(r,s);if(-1===l)return l;if(0===l||n.charCodeAt(l-1)<=32){const h=r.length;if(l+h===a||n.charCodeAt(l+h)<=32)return l}s=l+1}}const Yg="ng-template";function Mh(n,r,s){let a=0;for(;a<n.length;){let l=n[a++];if(s&&"class"===l){if(l=n[a],-1!==Kg(l.toLowerCase(),r,0))return!0}else if(1===l){for(;a<n.length&&"string"==typeof(l=n[a++]);)if(l.toLowerCase()===r)return!0;return!1}}return!1}function Qg(n){return 4===n.type&&n.value!==Yg}function Jg(n,r,s){return r===(4!==n.type||s?n.value:Yg)}function _p(n,r,s){let a=4;const l=n.attrs||[],h=function wp(n){for(let r=0;r<n.length;r++)if(Tr(n[r]))return r;return n.length}(l);let y=!1;for(let I=0;I<r.length;I++){const T=r[I];if("number"!=typeof T){if(!y)if(4&a){if(a=2|1&a,""!==T&&!Jg(n,T,s)||""===T&&1===r.length){if(Sa(a))return!1;y=!0}}else{const V=8&a?T:r[++I];if(8&a&&null!==n.attrs){if(!Mh(n.attrs,V,s)){if(Sa(a))return!1;y=!0}continue}const ee=md(8&a?"class":T,l,Qg(n),s);if(-1===ee){if(Sa(a))return!1;y=!0;continue}if(""!==V){let Se;Se=ee>h?"":l[ee+1].toLowerCase();const je=8&a?Se:null;if(je&&-1!==Kg(je,V,0)||2&a&&V!==Se){if(Sa(a))return!1;y=!0}}}}else{if(!y&&!Sa(a)&&!Sa(T))return!1;if(y&&Sa(T))continue;y=!1,a=T|1&a}}return Sa(a)||y}function Sa(n){return 0==(1&n)}function md(n,r,s,a){if(null===r)return-1;let l=0;if(a||!s){let h=!1;for(;l<r.length;){const y=r[l];if(y===n)return l;if(3===y||6===y)h=!0;else{if(1===y||2===y){let I=r[++l];for(;"string"==typeof I;)I=r[++l];continue}if(4===y)break;if(0===y){l+=4;continue}}l+=h?1:2}return-1}return function Xg(n,r){let s=n.indexOf(4);if(s>-1)for(s++;s<n.length;){const a=n[s];if("number"==typeof a)return-1;if(a===r)return s;s++}return-1}(r,n)}function yd(n,r,s=!1){for(let a=0;a<r.length;a++)if(_p(n,r[a],s))return!0;return!1}function Ep(n,r){return n?":not("+r.trim()+")":r}function em(n){let r=n[0],s=1,a=2,l="",h=!1;for(;s<n.length;){let y=n[s];if("string"==typeof y)if(2&a){const I=n[++s];l+="["+y+(I.length>0?'="'+I+'"':"")+"]"}else 8&a?l+="."+y:4&a&&(l+=" "+y);else""!==l&&!Sa(y)&&(r+=Ep(h,l),l=""),a=y,h=h||!Sa(a);s++}return""!==l&&(r+=Ep(h,l)),r}const or={};function tm(n){Dp(Rn(),ht(),fe()+n,!1)}function Dp(n,r,s,a){if(!a)if(3==(3&r[2])){const h=n.preOrderCheckHooks;null!==h&&Vr(r,h,s)}else{const h=n.preOrderHooks;null!==h&&Bs(r,h,0,s)}ze(s)}function Nh(n,r=null,s=null,a){const l=sm(n,r,s,a);return l.resolveInjectorInitializers(),l}function sm(n,r=null,s=null,a,l=new Set){const h=[s||At,fu(n)];return a=a||("object"==typeof n?void 0:Oe(n)),new Nl(h,r||Ya(),a||null,l)}let Vu=(()=>{class n{static create(s,a){if(Array.isArray(s))return Nh({name:""},a,s,"");{const l=s.name??"";return Nh({name:l},s.parent,s.providers,l)}}}return n.THROW_IF_NOT_FOUND=Dn,n.NULL=new Rl,n.\u0275prov=Ft({token:n,providedIn:"any",factory:()=>vi(Sr)}),n.__NG_ELEMENT_ID__=-1,n})();function al(n,r=pt.Default){const s=ht();return null===s?vi(n,r):Nr(Or(),s,Ce(n),r)}function Ap(){throw new Error("invalid")}function xc(n,r){return n<<17|r<<2}function Do(n){return n>>17&32767}function Cd(n){return 2|n}function Uu(n){return(131068&n)>>2}function bd(n,r){return-131069&n|r<<2}function Td(n){return 1|n}function Up(n,r){const s=n.contentQueries;if(null!==s)for(let a=0;a<s.length;a+=2){const l=s[a],h=s[a+1];if(-1!==h){const y=n.data[h];Ps(l),y.contentQueries(2,r[h],h)}}}function Wh(n,r,s,a,l,h,y,I,T,V,Z){const ee=r.blueprint.slice();return ee[0]=l,ee[2]=76|a,(null!==Z||n&&1024&n[2])&&(ee[2]|=1024),eo(ee),ee[3]=ee[15]=n,ee[8]=s,ee[10]=y||n&&n[10],ee[11]=I||n&&n[11],ee[12]=T||n&&n[12]||null,ee[9]=V||n&&n[9]||null,ee[6]=h,ee[20]=function r_(){return n_++}(),ee[21]=Z,ee[16]=2==r.type?n[16]:ee,ee}function Rc(n,r,s,a,l){let h=n.data[r];if(null===h)h=function Bp(n,r,s,a,l){const h=$i(),y=jo(),T=n.data[r]=function P_(n,r,s,a,l,h){return{type:s,index:a,insertBeforeIndex:null,injectorIndex:r?r.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:l,attrs:h,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:r,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,y?h:h&&h.parent,s,r,a,l);return null===n.firstChild&&(n.firstChild=T),null!==h&&(y?null==h.child&&null!==T.parent&&(h.child=T):null===h.next&&(h.next=T)),T}(n,r,s,a,l),function cs(){return gn.lFrame.inI18n}()&&(h.flags|=64);else if(64&h.type){h.type=s,h.value=a,h.attrs=l;const y=function Ns(){const n=gn.lFrame,r=n.currentTNode;return n.isParent?r:r.parent}();h.injectorIndex=null===y?-1:y.injectorIndex}return ls(h,!0),h}function ul(n,r,s,a){if(0===s)return-1;const l=r.length;for(let h=0;h<s;h++)r.push(a),n.blueprint.push(a),n.data.push(null);return l}function Oc(n,r,s){ws(r);try{const a=n.viewQuery;null!==a&&Xp(1,a,s);const l=n.template;null!==l&&qh(n,r,l,1,s),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&Up(n,r),n.staticViewQueries&&Xp(2,n.viewQuery,s);const h=n.components;null!==h&&function M_(n,r){for(let s=0;s<r.length;s++)Kp(n,r[s])}(r,h)}catch(a){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),a}finally{r[2]&=-5,$()}}function ql(n,r,s,a){const l=r[2];if(128!=(128&l)){ws(r);try{eo(r),function et(n){return gn.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==s&&qh(n,r,s,2,a);const y=3==(3&l);if(y){const V=n.preOrderCheckHooks;null!==V&&Vr(r,V,null)}else{const V=n.preOrderHooks;null!==V&&Bs(r,V,0,null),Es(r,0)}if(function Zp(n){for(let r=op(n);null!==r;r=ap(r)){if(!r[2])continue;const s=r[9];for(let a=0;a<s.length;a++){const l=s[a],h=l[3];0==(512&l[2])&&zr(h,1),l[2]|=512}}}(r),function B_(n){for(let r=op(n);null!==r;r=ap(r))for(let s=10;s<r.length;s++){const a=r[s],l=a[1];as(a)&&ql(l,a,l.template,a[8])}}(r),null!==n.contentQueries&&Up(n,r),y){const V=n.contentCheckHooks;null!==V&&Vr(r,V)}else{const V=n.contentHooks;null!==V&&Bs(r,V,1),Es(r,1)}!function Im(n,r){const s=n.hostBindingOpCodes;if(null!==s)try{for(let a=0;a<s.length;a++){const l=s[a];if(l<0)ze(~l);else{const h=l,y=s[++a],I=s[++a];Hi(y,h),I(2,r[h])}}}finally{ze(-1)}}(n,r);const I=n.components;null!==I&&function Dm(n,r){for(let s=0;s<r.length;s++)j_(n,r[s])}(r,I);const T=n.viewQuery;if(null!==T&&Xp(2,T,a),y){const V=n.viewCheckHooks;null!==V&&Vr(r,V)}else{const V=n.viewHooks;null!==V&&Bs(r,V,2),Es(r,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),r[2]&=-41,512&r[2]&&(r[2]&=-513,zr(r[3],-1))}finally{$()}}}function R_(n,r,s,a){const l=r[10],y=vs(r);try{!y&&l.begin&&l.begin(),y&&Oc(n,r,a),ql(n,r,s,a)}finally{!y&&l.end&&l.end()}}function qh(n,r,s,a,l){const h=fe(),y=2&a;try{ze(-1),y&&r.length>22&&Dp(n,r,22,!1),s(a,l)}finally{ze(h)}}function Pd(n,r,s){!us()||(function Gp(n,r,s,a){const l=s.directiveStart,h=s.directiveEnd;n.firstCreatePass||Ma(s,r),Eo(a,r);const y=s.initialInputs;for(let I=l;I<h;I++){const T=n.data[I],V=wr(T);V&&Wp(r,s,T);const Z=vn(r,n,I,s);Eo(Z,r),null!==y&&xm(0,I-l,Z,T,0,y),V&&(qn(s.index,r)[8]=Z)}}(n,r,s,ii(s,r)),128==(128&s.flags)&&function F_(n,r,s){const a=s.directiveStart,l=s.directiveEnd,h=s.index,y=function Ws(){return gn.lFrame.currentDirectiveIndex}();try{ze(h);for(let I=a;I<l;I++){const T=n.data[I],V=r[I];no(I),(null!==T.hostBindings||0!==T.hostVars||null!==T.hostAttrs)&&tf(T,V)}}finally{ze(-1),no(y)}}(n,r,s))}function Zh(n,r,s=ii){const a=r.localNames;if(null!==a){let l=r.index+1;for(let h=0;h<a.length;h+=2){const y=a[h+1],I=-1===y?s(r,n):n[y];n[l++]=I}}}function Kh(n){const r=n.tView;return null===r||r.incompleteFirstPass?n.tView=Yh(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts):r}function Yh(n,r,s,a,l,h,y,I,T,V){const Z=22+a,ee=Z+l,Se=function O_(n,r){const s=[];for(let a=0;a<r;a++)s.push(a<n?null:or);return s}(Z,ee),je="function"==typeof V?V():V;return Se[1]={type:n,blueprint:Se,template:s,queries:null,viewQuery:I,declTNode:r,data:Se.slice().fill(null,Z),bindingStartIndex:Z,expandoStartIndex:ee,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof h?h():h,pipeRegistry:"function"==typeof y?y():y,firstChild:null,schemas:T,consts:je,incompleteFirstPass:!1}}function Qh(n,r,s,a){const l=Om(r);null===s?l.push(a):(l.push(s),n.firstCreatePass&&Nm(n).push(a,l.length-1))}function Jh(n,r,s){for(let a in n)if(n.hasOwnProperty(a)){const l=n[a];(s=null===s?{}:s).hasOwnProperty(a)?s[a].push(r,l):s[a]=[r,l]}return s}function Tm(n,r){const a=r.directiveEnd,l=n.data,h=r.attrs,y=[];let I=null,T=null;for(let V=r.directiveStart;V<a;V++){const Z=l[V],ee=Z.inputs,Se=null===h||Qg(r)?null:qp(ee,h);y.push(Se),I=Jh(ee,V,I),T=Jh(Z.outputs,V,T)}null!==I&&(I.hasOwnProperty("class")&&(r.flags|=16),I.hasOwnProperty("style")&&(r.flags|=32)),r.initialInputs=y,r.inputs=I,r.outputs=T}function oa(n,r,s,a,l,h,y,I){const T=ii(r,s);let Z,V=r.inputs;!I&&null!=V&&(Z=V[a])?(lf(n,s,Z,a,l),Rs(r)&&Xh(s,r.index)):3&r.type&&(a=function jp(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(a),l=null!=y?y(l,r.value||"",a):l,h.setProperty(T,a,l))}function Xh(n,r){const s=qn(r,n);16&s[2]||(s[2]|=32)}function Hp(n,r,s,a){let l=!1;if(us()){const h=function L_(n,r,s){const a=n.directiveRegistry;let l=null;if(a)for(let h=0;h<a.length;h++){const y=a[h];yd(s,y.selectors,!1)&&(l||(l=[]),Zs(Ma(s,r),n,y.type),wr(y)?(Sm(n,s),l.unshift(y)):l.push(y))}return l}(n,r,s),y=null===a?null:{"":-1};if(null!==h){l=!0,nf(s,n.data.length,h.length);for(let Z=0;Z<h.length;Z++){const ee=h[Z];ee.providersResolver&&ee.providersResolver(ee)}let I=!1,T=!1,V=ul(n,r,h.length,null);for(let Z=0;Z<h.length;Z++){const ee=h[Z];s.mergedAttrs=oi(s.mergedAttrs,ee.hostAttrs),Am(n,s,r,V,ee),V_(V,ee,y),null!==ee.contentQueries&&(s.flags|=8),(null!==ee.hostBindings||null!==ee.hostAttrs||0!==ee.hostVars)&&(s.flags|=128);const Se=ee.type.prototype;!I&&(Se.ngOnChanges||Se.ngOnInit||Se.ngDoCheck)&&((n.preOrderHooks||(n.preOrderHooks=[])).push(s.index),I=!0),!T&&(Se.ngOnChanges||Se.ngDoCheck)&&((n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(s.index),T=!0),V++}Tm(n,s)}y&&function zp(n,r,s){if(r){const a=n.localNames=[];for(let l=0;l<r.length;l+=2){const h=s[r[l+1]];if(null==h)throw new Ke(-301,!1);a.push(r[l],h)}}}(s,a,y)}return s.mergedAttrs=oi(s.mergedAttrs,s.attrs),l}function ef(n,r,s,a,l,h){const y=h.hostBindings;if(y){let I=n.hostBindingOpCodes;null===I&&(I=n.hostBindingOpCodes=[]);const T=~r.index;(function $u(n){let r=n.length;for(;r>0;){const s=n[--r];if("number"==typeof s&&s<0)return s}return 0})(I)!=T&&I.push(T),I.push(a,l,y)}}function tf(n,r){null!==n.hostBindings&&n.hostBindings(1,r)}function Sm(n,r){r.flags|=2,(n.components||(n.components=[])).push(r.index)}function V_(n,r,s){if(s){if(r.exportAs)for(let a=0;a<r.exportAs.length;a++)s[r.exportAs[a]]=n;wr(r)&&(s[""]=n)}}function nf(n,r,s){n.flags|=1,n.directiveStart=r,n.directiveEnd=r+s,n.providerIndexes=r}function Am(n,r,s,a,l){n.data[a]=l;const h=l.factory||(l.factory=Ni(l.type)),y=new j(h,wr(l),al);n.blueprint[a]=y,s[a]=y,ef(n,r,0,a,ul(n,s,l.hostVars,or),l)}function Wp(n,r,s){const a=ii(r,n),l=Kh(s),h=n[10],y=rf(n,Wh(n,l,null,s.onPush?32:16,a,r,h,h.createRenderer(a,s),null,null,null));n[r.index]=y}function Eu(n,r,s,a,l,h){const y=ii(n,r);!function kd(n,r,s,a,l,h,y){if(null==h)n.removeAttribute(r,l,s);else{const I=null==y?Ye(h):y(h,a||"",l);n.setAttribute(r,l,I,s)}}(r[11],y,h,n.value,s,a,l)}function xm(n,r,s,a,l,h){const y=h[r];if(null!==y){const I=a.setInput;for(let T=0;T<y.length;){const V=y[T++],Z=y[T++],ee=y[T++];null!==I?a.setInput(s,ee,V,Z):s[Z]=ee}}}function qp(n,r){let s=null,a=0;for(;a<r.length;){const l=r[a];if(0!==l)if(5!==l){if("number"==typeof l)break;n.hasOwnProperty(l)&&(null===s&&(s=[]),s.push(l,n[l],r[a+1])),a+=2}else a+=2;else a+=4}return s}function Mm(n,r,s,a){return new Array(n,!0,!1,r,null,0,a,s,null,null)}function j_(n,r){const s=qn(r,n);if(as(s)){const a=s[1];48&s[2]?ql(a,s,a.template,s[8]):s[5]>0&&Fd(s)}}function Fd(n){for(let a=op(n);null!==a;a=ap(a))for(let l=10;l<a.length;l++){const h=a[l];if(as(h))if(512&h[2]){const y=h[1];ql(y,h,y.template,h[8])}else h[5]>0&&Fd(h)}const s=n[1].components;if(null!==s)for(let a=0;a<s.length;a++){const l=qn(s[a],n);as(l)&&l[5]>0&&Fd(l)}}function Kp(n,r){const s=qn(r,n),a=s[1];(function Yp(n,r){for(let s=r.length;s<n.blueprint.length;s++)r.push(n.blueprint[s])})(a,s),Oc(a,s,s[8])}function rf(n,r){return n[13]?n[14][4]=r:n[13]=r,n[14]=r,r}function sf(n){for(;n;){n[2]|=32;const r=Xa(n);if(co(n)&&!r)return n;n=r}return null}function Xp(n,r,s){Ps(0),r(n,s)}function Om(n){return n[7]||(n[7]=[])}function Nm(n){return n.cleanup||(n.cleanup=[])}function uf(n,r){const s=n[9],a=s?s.get(cd,null):null;a&&a.handleError(r)}function lf(n,r,s,a,l){for(let h=0;h<s.length;){const y=s[h++],I=s[h++],T=r[y],V=n.data[y];null!==V.setInput?V.setInput(T,l,a,I):T[I]=l}}function Pc(n,r,s){let a=s?n.styles:null,l=s?n.classes:null,h=0;if(null!==r)for(let y=0;y<r.length;y++){const I=r[y];"number"==typeof I?h=I:1==h?l=Fe(l,I):2==h&&(a=Fe(a,I+": "+r[++y]+";"))}s?n.styles=a:n.stylesWithoutHost=a,s?n.classes=l:n.classesWithoutHost=l}function kc(n,r,s,a,l=!1){for(;null!==s;){const h=r[s.index];if(null!==h&&a.push(Lr(h)),ci(h))for(let I=10;I<h.length;I++){const T=h[I],V=T[1].firstChild;null!==V&&kc(T[1],T,V,a)}const y=s.type;if(8&y)kc(n,r,s.child,a);else if(32&y){const I=sp(s,r);let T;for(;T=I();)a.push(T)}else if(16&y){const I=mp(r,s);if(Array.isArray(I))a.push(...I);else{const T=Xa(r[16]);kc(T[1],T,I,a,!0)}}s=l?s.projectionNext:s.next}return a}class ll{constructor(r,s){this._lView=r,this._cdRefInjectingView=s,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const r=this._lView,s=r[1];return kc(s,r,s.firstChild,[])}get context(){return this._lView[8]}set context(r){this._lView[8]=r}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const r=this._lView[3];if(ci(r)){const s=r[8],a=s?s.indexOf(this):-1;a>-1&&(_u(r,a),Ca(s,a))}this._attachedToViewContainer=!1}$l(this._lView[1],this._lView)}onDestroy(r){Qh(this._lView[1],this._lView,null,r)}markForCheck(){sf(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){!function Qp(n,r,s){const a=r[10];a.begin&&a.begin();try{ql(n,r,n.template,s)}catch(l){throw uf(r,l),l}finally{a.end&&a.end()}}(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Ke(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function _a(n,r){gd(n,r,r[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(r){if(this._attachedToViewContainer)throw new Ke(902,!1);this._appRef=r}}class tg extends ll{constructor(r){super(r),this._view=r}detectChanges(){!function af(n){!function Rm(n){for(let r=0;r<n.components.length;r++){const s=n.components[r],a=dd(s);if(null!==a){const l=a[1];R_(l,a,l.template,s)}}}(n[8])}(this._view)}checkNoChanges(){}get context(){return null}}class cf extends B{constructor(r){super(),this.ngModule=r}resolveComponentFactory(r){const s=Xt(r);return new Iu(s,this.ngModule)}}function Ld(n){const r=[];for(let s in n)n.hasOwnProperty(s)&&r.push({propName:n[s],templateName:s});return r}class ng{constructor(r,s){this.injector=r,this.parentInjector=s}get(r,s,a){const l=this.injector.get(r,tl,a);return l!==tl||s===tl?l:this.parentInjector.get(r,s,a)}}class Iu extends Gs{constructor(r,s){super(),this.componentDef=r,this.ngModule=s,this.componentType=r.type,this.selector=function Ip(n){return n.map(em).join(",")}(r.selectors),this.ngContentSelectors=r.ngContentSelectors?r.ngContentSelectors:[],this.isBoundToModule=!!s}get inputs(){return Ld(this.componentDef.inputs)}get outputs(){return Ld(this.componentDef.outputs)}create(r,s,a,l){let h=(l=l||this.ngModule)instanceof ts?l:l?.injector;h&&null!==this.componentDef.getStandaloneInjector&&(h=this.componentDef.getStandaloneInjector(h)||h);const y=h?new ng(r,h):r,I=y.get(kn,null);if(null===I)throw new Ke(407,!1);const T=y.get(ia,null),V=I.createRenderer(null,this.componentDef),Z=this.componentDef.selectors[0][0]||"div",ee=a?function N_(n,r,s){return n.selectRootElement(r,s===Be.ShadowDom)}(V,a,this.componentDef.encapsulation):jl(I.createRenderer(null,this.componentDef),Z,function Pm(n){const r=n.toLowerCase();return"svg"===r?"svg":"math"===r?"math":null}(Z)),Se=this.componentDef.onPush?288:272,je={components:[]},vt=Yh(0,null,null,1,0,null,null,null,null,null),xt=Wh(null,vt,je,Se,null,null,I,V,T,y,null);let en,hn;ws(xt);try{const Wn=function km(n,r,s,a,l,h){const y=s[1];s[22]=n;const T=Rc(y,22,2,"#host",null),V=T.mergedAttrs=r.hostAttrs;null!==V&&(Pc(T,V,!0),null!==n&&(qr(l,n,V),null!==T.classes&&yp(l,n,T.classes),null!==T.styles&&Zg(l,n,T.styles)));const Z=a.createRenderer(n,r),ee=Wh(s,Kh(r),null,r.onPush?32:16,s[22],T,a,Z,h||null,null,null);return y.firstCreatePass&&(Zs(Ma(T,s),y,r.type),Sm(y,T),nf(T,s.length,1)),rf(s,ee),s[22]=ee}(ee,this.componentDef,xt,I,V);if(ee)if(a)qr(V,ee,["ng-version",Ec.full]);else{const{attrs:St,classes:Un}=function g_(n){const r=[],s=[];let a=1,l=2;for(;a<n.length;){let h=n[a];if("string"==typeof h)2===l?""!==h&&r.push(h,n[++a]):8===l&&s.push(h);else{if(!Sa(l))break;l=h}a++}return{attrs:r,classes:s}}(this.componentDef.selectors[0]);St&&qr(V,ee,St),Un&&Un.length>0&&yp(V,ee,Un.join(" "))}if(hn=Pi(vt,22),void 0!==s){const St=hn.projection=[];for(let Un=0;Un<this.ngContentSelectors.length;Un++){const Yr=s[Un];St.push(null!=Yr?Array.from(Yr):null)}}en=function G_(n,r,s,a,l){const h=s[1],y=function $p(n,r,s){const a=Or();n.firstCreatePass&&(s.providersResolver&&s.providersResolver(s),Am(n,a,r,ul(n,r,1,null),s),Tm(n,a));const l=vn(r,n,a.directiveStart,a);Eo(l,r);const h=ii(a,r);return h&&Eo(h,r),l}(h,s,r);if(a.components.push(y),n[8]=y,null!==l)for(const T of l)T(y,r);if(r.contentQueries){const T=Or();r.contentQueries(1,y,T.directiveStart)}const I=Or();return!h.firstCreatePass||null===r.hostBindings&&null===r.hostAttrs||(ze(I.index),ef(s[1],I,0,I.directiveStart,I.directiveEnd,r),tf(r,y)),y}(Wn,this.componentDef,xt,je,[z_]),Oc(vt,xt,null)}finally{$()}return new H_(this.componentType,en,Te(hn,xt),xt,hn)}}class H_ extends class Zf{}{constructor(r,s,a,l,h){super(),this.location=a,this._rootLView=l,this._tNode=h,this.instance=s,this.hostView=this.changeDetectorRef=new tg(l),this.componentType=r}setInput(r,s){const a=this._tNode.inputs;let l;if(null!==a&&(l=a[r])){const h=this._rootLView;lf(h[1],h,l,r,s),Xh(h,this._tNode.index)}}get injector(){return new Et(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(r){this.hostView.onDestroy(r)}}function z_(){const n=Or();pr(ht()[1],n)}function ig(n){let r=function Lm(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),s=!0;const a=[n];for(;r;){let l;if(wr(n))l=r.\u0275cmp||r.\u0275dir;else{if(r.\u0275cmp)throw new Ke(903,!1);l=r.\u0275dir}if(l){if(s){a.push(l);const y=n;y.inputs=df(n.inputs),y.declaredInputs=df(n.declaredInputs),y.outputs=df(n.outputs);const I=l.hostBindings;I&&Um(n,I);const T=l.viewQuery,V=l.contentQueries;if(T&&sg(n,T),V&&Vm(n,V),Re(n.inputs,l.inputs),Re(n.declaredInputs,l.declaredInputs),Re(n.outputs,l.outputs),wr(l)&&l.data.animation){const Z=n.data;Z.animation=(Z.animation||[]).concat(l.data.animation)}}const h=l.features;if(h)for(let y=0;y<h.length;y++){const I=h[y];I&&I.ngInherit&&I(n),I===ig&&(s=!1)}}r=Object.getPrototypeOf(r)}!function W_(n){let r=0,s=null;for(let a=n.length-1;a>=0;a--){const l=n[a];l.hostVars=r+=l.hostVars,l.hostAttrs=oi(l.hostAttrs,s=oi(s,l.hostAttrs))}}(a)}function df(n){return n===jn?{}:n===At?[]:n}function sg(n,r){const s=n.viewQuery;n.viewQuery=s?(a,l)=>{r(a,l),s(a,l)}:r}function Vm(n,r){const s=n.contentQueries;n.contentQueries=s?(a,l,h)=>{r(a,l,h),s(a,l,h)}:r}function Um(n,r){const s=n.hostBindings;n.hostBindings=s?(a,l)=>{r(a,l),s(a,l)}:r}let Vd=null;function cl(){if(!Vd){const n=We.Symbol;if(n&&n.iterator)Vd=n.iterator;else{const r=Object.getOwnPropertyNames(Map.prototype);for(let s=0;s<r.length;++s){const a=r[s];"entries"!==a&&"size"!==a&&Map.prototype[a]===Map.prototype.entries&&(Vd=a)}}}return Vd}function Ud(n){return!!Ha(n)&&(Array.isArray(n)||!(n instanceof Map)&&cl()in n)}function Ha(n){return null!==n&&("function"==typeof n||"object"==typeof n)}function Du(n,r,s){return n[r]=s}function Mo(n,r,s){return!Object.is(n[r],s)&&(n[r]=s,!0)}function og(n,r,s,a){const l=ht();return Mo(l,nn(),r)&&(Rn(),Eu(rt(),l,n,r,s,a)),og}function Ti(n,r,s,a){return Mo(n,nn(),s)?r+Ye(s)+a:or}function fl(n,r,s,a,l,h,y,I){const T=ht(),V=Rn(),Z=n+22,ee=V.firstCreatePass?function bu(n,r,s,a,l,h,y,I,T){const V=r.consts,Z=Rc(r,n,4,y||null,Jn(V,I));Hp(r,s,Z,Jn(V,T)),pr(r,Z);const ee=Z.tViews=Yh(2,Z,a,l,h,r.directiveRegistry,r.pipeRegistry,null,r.schemas,V);return null!==r.queries&&(r.queries.template(r,Z),ee.queries=r.queries.embeddedTView(Z)),Z}(Z,V,T,r,s,a,l,h,y):V.data[Z];ls(ee,!1);const Se=T[11].createComment("");vu(V,T,Se,ee),Eo(Se,T),rf(T,T[Z]=Mm(Se,T,Se,ee)),Xr(ee)&&Pd(V,T,ee),null!=y&&Zh(T,ee,I)}function Zm(n){return Rr(function Qo(){return gn.lFrame.contextLView}(),22+n)}function ug(n,r,s){const a=ht();return Mo(a,nn(),r)&&oa(Rn(),rt(),a,n,r,a[11],s,!1),ug}function mf(n,r,s,a,l){const y=l?"class":"style";lf(n,s,r.inputs[y],y,a)}function Yl(n,r,s,a){const l=ht(),h=Rn(),y=22+n,I=l[11],T=l[y]=jl(I,r,function Gn(){return gn.lFrame.currentNamespace}()),V=h.firstCreatePass?function Km(n,r,s,a,l,h,y){const I=r.consts,V=Rc(r,n,2,l,Jn(I,h));return Hp(r,s,V,Jn(I,y)),null!==V.attrs&&Pc(V,V.attrs,!1),null!==V.mergedAttrs&&Pc(V,V.mergedAttrs,!0),null!==r.queries&&r.queries.elementStart(r,V),V}(y,h,l,0,r,s,a):h.data[y];ls(V,!0);const Z=V.mergedAttrs;null!==Z&&qr(I,T,Z);const ee=V.classes;null!==ee&&yp(I,T,ee);const Se=V.styles;return null!==Se&&Zg(I,T,Se),64!=(64&V.flags)&&vu(h,l,T,V),0===function Vo(){return gn.lFrame.elementDepthCount}()&&Eo(T,l),function zs(){gn.lFrame.elementDepthCount++}(),Xr(V)&&(Pd(h,l,V),function Cm(n,r,s){if(Fs(r)){const l=r.directiveEnd;for(let h=r.directiveStart;h<l;h++){const y=n.data[h];y.contentQueries&&y.contentQueries(1,s[h],h)}}}(h,V,l)),null!==a&&Zh(l,V),Yl}function yf(){let n=Or();jo()?function to(){gn.lFrame.isParent=!1}():(n=n.parent,ls(n,!1));const r=n;!function ji(){gn.lFrame.elementDepthCount--}();const s=Rn();return s.firstCreatePass&&(pr(s,n),Fs(n)&&s.queries.elementEnd(n)),null!=r.classesWithoutHost&&function sn(n){return 0!=(16&n.flags)}(r)&&mf(s,r,ht(),r.classesWithoutHost,!0),null!=r.stylesWithoutHost&&function Zt(n){return 0!=(32&n.flags)}(r)&&mf(s,r,ht(),r.stylesWithoutHost,!1),yf}function Hu(n,r,s,a){return Yl(n,r,s,a),yf(),Hu}function Ym(){return ht()}function lg(n){return!!n&&"function"==typeof n.then}function Qm(n){return!!n&&"function"==typeof n.subscribe}const Ef=Qm;function $d(n,r,s,a){const l=ht(),h=Rn(),y=Or();return function dg(n,r,s,a,l,h,y,I){const T=Xr(a),Z=n.firstCreatePass&&Nm(n),ee=r[8],Se=Om(r);let je=!0;if(3&a.type||I){const en=ii(a,r),hn=I?I(en):en,Wn=Se.length,St=I?Yr=>I(Lr(Yr[a.index])):a.index;let Un=null;if(!I&&T&&(Un=function Jl(n,r,s,a){const l=n.cleanup;if(null!=l)for(let h=0;h<l.length-1;h+=2){const y=l[h];if(y===s&&l[h+1]===a){const I=r[7],T=l[h+2];return I.length>T?I[T]:null}"string"==typeof y&&(h+=2)}return null}(n,r,l,a.index)),null!==Un)(Un.__ngLastListenerFn__||Un).__ngNextListenerFn__=h,Un.__ngLastListenerFn__=h,je=!1;else{h=If(a,r,ee,h,!1);const Yr=s.listen(hn,l,h);Se.push(h,Yr),Z&&Z.push(l,St,Wn,Wn+1)}}else h=If(a,r,ee,h,!1);const vt=a.outputs;let xt;if(je&&null!==vt&&(xt=vt[l])){const en=xt.length;if(en)for(let hn=0;hn<en;hn+=2){const xs=r[xt[hn]][xt[hn+1]].subscribe(h),Qd=Se.length;Se.push(h,xs),Z&&Z.push(l,a.index,Qd,-(Qd+1))}}}(h,l,l[11],y,n,r,0,a),$d}function hg(n,r,s,a){try{return!1!==s(a)}catch(l){return uf(n,l),!1}}function If(n,r,s,a,l){return function h(y){if(y===Function)return a;sf(2&n.flags?qn(n.index,r):r);let T=hg(r,0,a,y),V=h.__ngNextListenerFn__;for(;V;)T=hg(r,0,V,y)&&T,V=V.__ngNextListenerFn__;return l&&!1===T&&(y.preventDefault(),y.returnValue=!1),T}}function Df(n=1){return function M(n){return(gn.lFrame.contextLView=function q(n,r){for(;n>0;)r=r[15],n--;return r}(n,gn.lFrame.contextLView))[8]}(n)}function Tf(n,r,s){return Xl(n,"",r,"",s),Tf}function Xl(n,r,s,a,l){const h=ht(),y=Ti(h,r,s,a);return y!==or&&oa(Rn(),rt(),h,n,y,h[11],l,!1),Xl}function ey(n,r,s,a,l){const h=n[s+1],y=null===r;let I=a?Do(h):Uu(h),T=!1;for(;0!==I&&(!1===T||y);){const Z=n[I+1];Y_(n[I],r)&&(T=!0,n[I+1]=a?Td(Z):Cd(Z)),I=a?Do(Z):Uu(Z)}T&&(n[s+1]=a?Cd(h):Td(h))}function Y_(n,r){return null===n||null==r||(Array.isArray(n)?n[1]:n)===r||!(!Array.isArray(n)||"string"!=typeof r)&&v(n,r)>=0}function zd(n,r){return function tu(n,r,s,a){const l=ht(),h=Rn(),y=function dr(n){const r=gn.lFrame,s=r.bindingIndex;return r.bindingIndex=r.bindingIndex+n,s}(2);h.firstUpdatePass&&function dy(n,r,s,a){const l=n.data;if(null===l[s+1]){const h=l[fe()],y=function cy(n,r){return r>=n.expandoStartIndex}(n,s);(function fy(n,r){return 0!=(n.flags&(r?16:32))})(h,a)&&null===r&&!y&&(r=!1),r=function nv(n,r,s,a){const l=function _o(n){const r=gn.lFrame.currentDirectiveIndex;return-1===r?null:n[r]}(n);let h=a?r.residualClasses:r.residualStyles;if(null===l)0===(a?r.classBindings:r.styleBindings)&&(s=Wd(s=Sf(null,n,r,s,a),r.attrs,a),h=null);else{const y=r.directiveStylingLast;if(-1===y||n[y]!==l)if(s=Sf(l,n,r,s,a),null===h){let T=function rv(n,r,s){const a=s?r.classBindings:r.styleBindings;if(0!==Uu(a))return n[Do(a)]}(n,r,a);void 0!==T&&Array.isArray(T)&&(T=Sf(null,n,r,T[1],a),T=Wd(T,r.attrs,a),function iv(n,r,s,a){n[Do(s?r.classBindings:r.styleBindings)]=a}(n,r,a,T))}else h=function hy(n,r,s){let a;const l=r.directiveEnd;for(let h=1+r.directiveStylingLast;h<l;h++)a=Wd(a,n[h].hostAttrs,s);return Wd(a,r.attrs,s)}(n,r,a)}return void 0!==h&&(a?r.residualClasses=h:r.residualStyles=h),s}(l,h,r,a),function Gd(n,r,s,a,l,h){let y=h?r.classBindings:r.styleBindings,I=Do(y),T=Uu(y);n[a]=s;let Z,V=!1;if(Array.isArray(s)){const ee=s;Z=ee[1],(null===Z||v(ee,Z)>0)&&(V=!0)}else Z=s;if(l)if(0!==T){const Se=Do(n[I+1]);n[a+1]=xc(Se,I),0!==Se&&(n[Se+1]=bd(n[Se+1],a)),n[I+1]=function I_(n,r){return 131071&n|r<<17}(n[I+1],a)}else n[a+1]=xc(I,0),0!==I&&(n[I+1]=bd(n[I+1],a)),I=a;else n[a+1]=xc(T,0),0===I?I=a:n[T+1]=bd(n[T+1],a),T=a;V&&(n[a+1]=Cd(n[a+1])),ey(n,Z,a,!0),ey(n,Z,a,!1),function gl(n,r,s,a,l){const h=l?n.residualClasses:n.residualStyles;null!=h&&"string"==typeof r&&v(h,r)>=0&&(s[a+1]=Td(s[a+1]))}(r,Z,n,a,h),y=xc(I,T),h?r.classBindings=y:r.styleBindings=y}(l,h,r,s,y,a)}}(h,n,y,a),r!==or&&Mo(l,y,r)&&function tc(n,r,s,a,l,h,y,I){if(!(3&r.type))return;const T=n.data,V=T[I+1];xf(function fm(n){return 1==(1&n)}(V)?Af(T,r,s,l,Uu(V),y):void 0)||(xf(h)||function xp(n){return 2==(2&n)}(V)&&(h=Af(T,null,s,l,I,y)),function h_(n,r,s,a,l){if(r)l?n.addClass(s,a):n.removeClass(s,a);else{let h=-1===a.indexOf("-")?void 0:yu.DashCase;null==l?n.removeStyle(s,a,h):("string"==typeof l&&l.endsWith("!important")&&(l=l.slice(0,-10),h|=yu.Important),n.setStyle(s,a,l,h))}}(a,y,hi(fe(),s),l,h))}(h,h.data[fe()],l,l[11],n,l[y+1]=function av(n,r){return null==n||("string"==typeof r?n+=r:"object"==typeof n&&(n=Oe(Ys(n)))),n}(r,s),a,y)}(n,r,null,!0),zd}function Sf(n,r,s,a,l){let h=null;const y=s.directiveEnd;let I=s.directiveStylingLast;for(-1===I?I=s.directiveStart:I++;I<y&&(h=r[I],a=Wd(a,h.hostAttrs,l),h!==n);)I++;return null!==n&&(s.directiveStylingLast=I),a}function Wd(n,r,s){const a=s?1:2;let l=-1;if(null!==r)for(let h=0;h<r.length;h++){const y=r[h];"number"==typeof y?l=y:l===a&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),Ds(n,y,!!s||r[++h]))}return void 0===n?null:n}function Af(n,r,s,a,l,h){const y=null===r;let I;for(;l>0;){const T=n[l],V=Array.isArray(T),Z=V?T[1]:T,ee=null===Z;let Se=s[l+1];Se===or&&(Se=ee?At:void 0);let je=ee?Ao(Se,a):Z===a?Se:void 0;if(V&&!xf(je)&&(je=Ao(T,a)),xf(je)&&(I=je,y))return I;const vt=n[l+1];l=y?Do(vt):Uu(vt)}if(null!==r){let T=h?r.residualClasses:r.residualStyles;null!=T&&(I=Ao(T,a))}return I}function xf(n){return void 0!==n}function py(n,r=""){const s=ht(),a=Rn(),l=n+22,h=a.firstCreatePass?Rc(a,l,1,r,null):a.data[l],y=s[l]=function wh(n,r){return n.createText(r)}(s[11],r);vu(a,s,y,h),ls(h,!1)}function yg(n){return Mf("",n,""),yg}function Mf(n,r,s){const a=ht(),l=Ti(a,n,r,s);return l!==or&&function eu(n,r,s){const a=hi(r,n);!function bc(n,r,s){n.setValue(r,s)}(n[11],a,s)}(a,fe(),l),Mf}const ic=void 0;var xy=["en",[["a","p"],["AM","PM"],ic],[["AM","PM"],ic,ic],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],ic,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],ic,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",ic,"{1} 'at' {0}",ic],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function fv(n){const s=Math.floor(Math.abs(n)),a=n.toString().replace(/^[^.]*\.?/,"").length;return 1===s&&0===a?1:5}];let Bc={};function jc(n){const r=function Oy(n){return n.toLowerCase().replace(/_/g,"-")}(n);let s=kf(r);if(s)return s;const a=r.split("-")[0];if(s=kf(a),s)return s;if("en"===a)return xy;throw new Ke(701,!1)}function Ry(n){return jc(n)[Vn.PluralCase]}function kf(n){return n in Bc||(Bc[n]=We.ng&&We.ng.common&&We.ng.common.locales&&We.ng.common.locales[n]),Bc[n]}var Vn=(()=>((Vn=Vn||{})[Vn.LocaleId=0]="LocaleId",Vn[Vn.DayPeriodsFormat=1]="DayPeriodsFormat",Vn[Vn.DayPeriodsStandalone=2]="DayPeriodsStandalone",Vn[Vn.DaysFormat=3]="DaysFormat",Vn[Vn.DaysStandalone=4]="DaysStandalone",Vn[Vn.MonthsFormat=5]="MonthsFormat",Vn[Vn.MonthsStandalone=6]="MonthsStandalone",Vn[Vn.Eras=7]="Eras",Vn[Vn.FirstDayOfWeek=8]="FirstDayOfWeek",Vn[Vn.WeekendRange=9]="WeekendRange",Vn[Vn.DateFormat=10]="DateFormat",Vn[Vn.TimeFormat=11]="TimeFormat",Vn[Vn.DateTimeFormat=12]="DateTimeFormat",Vn[Vn.NumberSymbols=13]="NumberSymbols",Vn[Vn.NumberFormats=14]="NumberFormats",Vn[Vn.CurrencyCode=15]="CurrencyCode",Vn[Vn.CurrencySymbol=16]="CurrencySymbol",Vn[Vn.CurrencyName=17]="CurrencyName",Vn[Vn.Currencies=18]="Currencies",Vn[Vn.Directionality=19]="Directionality",Vn[Vn.PluralCase=20]="PluralCase",Vn[Vn.ExtraData=21]="ExtraData",Vn))();const sc="en-US";let ky=sc;function vv(n,r,s,a,l){if(n=Ce(n),Array.isArray(n))for(let h=0;h<n.length;h++)vv(n[h],r,s,a,l);else{const h=Rn(),y=ht();let I=ku(n)?n:Ce(n.provide),T=Lu(n);const V=Or(),Z=1048575&V.providerIndexes,ee=V.directiveStart,Se=V.providerIndexes>>20;if(ku(n)||!n.multi){const je=new j(T,l,al),vt=Ev(I,r,l?Z:Z+Se,ee);-1===vt?(Zs(Ma(V,y),h,I),wv(h,n,r.length),r.push(I),V.directiveStart++,V.directiveEnd++,l&&(V.providerIndexes+=1048576),s.push(je),y.push(je)):(s[vt]=je,y[vt]=je)}else{const je=Ev(I,r,Z+Se,ee),vt=Ev(I,r,Z,Z+Se),xt=je>=0&&s[je],en=vt>=0&&s[vt];if(l&&!en||!l&&!xt){Zs(Ma(V,y),h,I);const hn=function $E(n,r,s,a,l){const h=new j(n,s,al);return h.multi=[],h.index=r,h.componentProviders=0,M0(h,l,a&&!s),h}(l?jE:BE,s.length,l,a,T);!l&&en&&(s[vt].providerFactory=hn),wv(h,n,r.length,0),r.push(I),V.directiveStart++,V.directiveEnd++,l&&(V.providerIndexes+=1048576),s.push(hn),y.push(hn)}else wv(h,n,je>-1?je:vt,M0(s[l?vt:je],T,!l&&a));!l&&a&&en&&s[vt].componentProviders++}}}function wv(n,r,s,a){const l=ku(r),h=function pu(n){return!!n.useClass}(r);if(l||h){const T=(h?Ce(r.useClass):r).prototype.ngOnDestroy;if(T){const V=n.destroyHooks||(n.destroyHooks=[]);if(!l&&r.multi){const Z=V.indexOf(s);-1===Z?V.push(s,[a,T]):V[Z+1].push(a,T)}else V.push(s,T)}}}function M0(n,r,s){return s&&n.componentProviders++,n.multi.push(r)-1}function Ev(n,r,s,a){for(let l=s;l<a;l++)if(r[l]===n)return l;return-1}function BE(n,r,s,a){return Iv(this.multi,[])}function jE(n,r,s,a){const l=this.multi;let h;if(this.providerFactory){const y=this.providerFactory.componentProviders,I=vn(s,s[1],this.providerFactory.index,a);h=I.slice(0,y),Iv(l,h);for(let T=y;T<I.length;T++)h.push(I[T])}else h=[],Iv(l,h);return h}function Iv(n,r){for(let s=0;s<n.length;s++)r.push((0,n[s])());return r}function R0(n,r=[]){return s=>{s.providersResolver=(a,l)=>function UE(n,r,s){const a=Rn();if(a.firstCreatePass){const l=wr(n);vv(s,a.data,a.blueprint,l,!0),vv(r,a.data,a.blueprint,l,!1)}}(a,l?l(n):n,r)}}class Uf{}class O0{}function HE(n,r){return new N0(n,r??null)}class N0 extends Uf{constructor(r,s){super(),this._parent=s,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new cf(this);const a=$r(r);this._bootstrapComponents=mu(a.bootstrap),this._r3Injector=sm(r,s,[{provide:Uf,useValue:this},{provide:B,useValue:this.componentFactoryResolver}],Oe(r),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(r)}get injector(){return this._r3Injector}destroy(){const r=this._r3Injector;!r.destroyed&&r.destroy(),this.destroyCbs.forEach(s=>s()),this.destroyCbs=null}onDestroy(r){this.destroyCbs.push(r)}}class Dv extends O0{constructor(r){super(),this.moduleType=r}create(r){return new N0(this.moduleType,r)}}class GE extends Uf{constructor(r,s,a){super(),this.componentFactoryResolver=new cf(this),this.instance=null;const l=new Nl([...r,{provide:Uf,useValue:this},{provide:B,useValue:this.componentFactoryResolver}],s||Ya(),a,new Set(["environment"]));this.injector=l,l.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(r){this.injector.onDestroy(r)}}function Cv(n,r,s=null){return new GE(n,r,s).injector}let zE=(()=>{class n{constructor(s){this._injector=s,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(s){if(!s.standalone)return null;if(!this.cachedInjectors.has(s.id)){const a=qo(0,s.type),l=a.length>0?Cv([a],this._injector,`Standalone[${s.type.name}]`):null;this.cachedInjectors.set(s.id,l)}return this.cachedInjectors.get(s.id)}ngOnDestroy(){try{for(const s of this.cachedInjectors.values())null!==s&&s.destroy()}finally{this.cachedInjectors.clear()}}}return n.\u0275prov=Ft({token:n,providedIn:"environment",factory:()=>new n(vi(ts))}),n})();function P0(n){n.getStandaloneInjector=r=>r.get(zE).getOrCreateStandaloneInjector(n)}function j0(n,r,s,a){return H0(ht(),A(),n,r,s,a)}function $0(n,r,s,a,l){return function G0(n,r,s,a,l,h,y){const I=r+s;return function hl(n,r,s,a){const l=Mo(n,r,s);return Mo(n,r+1,a)||l}(n,I,l,h)?Du(n,I+2,y?a.call(y,l,h):a(l,h)):Ig(n,I+2)}(ht(),A(),n,r,s,a,l)}function Ig(n,r){const s=n[r];return s===or?void 0:s}function H0(n,r,s,a,l,h){const y=r+s;return Mo(n,y,l)?Du(n,y+1,h?a.call(h,l):a(l)):Ig(n,y+1)}function Z0(n,r){const s=Rn();let a;const l=n+22;s.firstCreatePass?(a=function uI(n,r){if(r)for(let s=r.length-1;s>=0;s--){const a=r[s];if(n===a.name)return a}}(r,s.pipeRegistry),s.data[l]=a,a.onDestroy&&(s.destroyHooks||(s.destroyHooks=[])).push(l,a.onDestroy)):a=s.data[l];const h=a.factory||(a.factory=Ni(a.type)),y=Hn(al);try{const I=vo(!1),T=h();return vo(I),function gf(n,r,s,a){s>=n.data.length&&(n.data[s]=null,n.blueprint[s]=null),r[s]=a}(s,ht(),l,T),T}finally{Hn(y)}}function K0(n,r,s){const a=n+22,l=ht(),h=Rr(l,a);return function Dg(n,r){return n[1].data[r].pure}(l,a)?H0(l,A(),r,h.transform,s,h):h.transform(s)}function Tv(n){return r=>{setTimeout(n,void 0,r)}}const _l=class fI extends p.x{constructor(r=!1){super(),this.__isAsync=r}emit(r){super.next(r)}subscribe(r,s,a){let l=r,h=s||(()=>null),y=a;if(r&&"object"==typeof r){const T=r;l=T.next?.bind(T),h=T.error?.bind(T),y=T.complete?.bind(T)}this.__isAsync&&(h=Tv(h),l&&(l=Tv(l)),y&&(y=Tv(y)));const I=super.subscribe({next:l,error:h,complete:y});return r instanceof C.w0&&r.add(I),I}};function pI(){return this._results[cl()]()}class Sv{constructor(r=!1){this._emitDistinctChangesOnly=r,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const s=cl(),a=Sv.prototype;a[s]||(a[s]=pI)}get changes(){return this._changes||(this._changes=new _l)}get(r){return this._results[r]}map(r){return this._results.map(r)}filter(r){return this._results.filter(r)}find(r){return this._results.find(r)}reduce(r,s){return this._results.reduce(r,s)}forEach(r){this._results.forEach(r)}some(r){return this._results.some(r)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(r,s){const a=this;a.dirty=!1;const l=io(r);(this._changesDetected=!function ma(n,r,s){if(n.length!==r.length)return!1;for(let a=0;a<n.length;a++){let l=n[a],h=r[a];if(s&&(l=s(l),h=s(h)),h!==l)return!1}return!0}(a._results,l,s))&&(a._results=l,a.length=l.length,a.last=l[this.length-1],a.first=l[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let Cg=(()=>{class n{}return n.__NG_ELEMENT_ID__=yI,n})();const gI=Cg,mI=class extends gI{constructor(r,s,a){super(),this._declarationLView=r,this._declarationTContainer=s,this.elementRef=a}createEmbeddedView(r,s){const a=this._declarationTContainer.tViews,l=Wh(this._declarationLView,a,r,16,null,a.declTNode,null,null,null,null,s||null);l[17]=this._declarationLView[this._declarationTContainer.index];const y=this._declarationLView[19];return null!==y&&(l[19]=y.createEmbeddedView(a)),Oc(a,l,r),new ll(l)}};function yI(){return Ly(Or(),ht())}function Ly(n,r){return 4&n.type?new mI(r,n,Te(n,r)):null}let Vy=(()=>{class n{}return n.__NG_ELEMENT_ID__=_I,n})();function _I(){return J0(Or(),ht())}const vI=Vy,Y0=class extends vI{constructor(r,s,a){super(),this._lContainer=r,this._hostTNode=s,this._hostLView=a}get element(){return Te(this._hostTNode,this._hostLView)}get injector(){return new Et(this._hostTNode,this._hostLView)}get parentInjector(){const r=ea(this._hostTNode,this._hostLView);if(fr(r)){const s=ti(r,this._hostLView),a=Ur(r);return new Et(s[1].data[a+8],s)}return new Et(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(r){const s=Q0(this._lContainer);return null!==s&&s[r]||null}get length(){return this._lContainer.length-10}createEmbeddedView(r,s,a){let l,h;"number"==typeof a?l=a:null!=a&&(l=a.index,h=a.injector);const y=r.createEmbeddedView(s||{},h);return this.insert(y,l),y}createComponent(r,s,a,l,h){const y=r&&!function ka(n){return"function"==typeof n}(r);let I;if(y)I=s;else{const ee=s||{};I=ee.index,a=ee.injector,l=ee.projectableNodes,h=ee.environmentInjector||ee.ngModuleRef}const T=y?r:new Iu(Xt(r)),V=a||this.parentInjector;if(!h&&null==T.ngModule){const Se=(y?V:this.parentInjector).get(ts,null);Se&&(h=Se)}const Z=T.create(V,l,void 0,h);return this.insert(Z.hostView,I),Z}insert(r,s){const a=r._lView,l=a[1];if(function Lo(n){return ci(n[3])}(a)){const Z=this.indexOf(r);if(-1!==Z)this.detach(Z);else{const ee=a[3],Se=new Y0(ee,ee[6],ee[3]);Se.detach(Se.indexOf(r))}}const h=this._adjustIndex(s),y=this._lContainer;!function Ih(n,r,s,a){const l=10+a,h=s.length;a>0&&(s[l-1][4]=r),a<h-10?(r[4]=s[l],ou(s,10+a,r)):(s.push(r),r[4]=null),r[3]=s;const y=r[17];null!==y&&s!==y&&function Dh(n,r){const s=n[9];r[16]!==r[3][3][16]&&(n[2]=!0),null===s?n[9]=[r]:s.push(r)}(y,r);const I=r[19];null!==I&&I.insertView(n),r[2]|=64}(l,a,y,h);const I=Sh(h,y),T=a[11],V=bh(T,y[7]);return null!==V&&function Hg(n,r,s,a,l,h){a[0]=l,a[6]=r,gd(n,a,s,1,l,h)}(l,y[6],T,a,V,I),r.attachToViewContainerRef(),ou(Av(y),h,r),r}move(r,s){return this.insert(r,s)}indexOf(r){const s=Q0(this._lContainer);return null!==s?s.indexOf(r):-1}remove(r){const s=this._adjustIndex(r,-1),a=_u(this._lContainer,s);a&&(Ca(Av(this._lContainer),s),$l(a[1],a))}detach(r){const s=this._adjustIndex(r,-1),a=_u(this._lContainer,s);return a&&null!=Ca(Av(this._lContainer),s)?new ll(a):null}_adjustIndex(r,s=0){return r??this.length+s}};function Q0(n){return n[8]}function Av(n){return n[8]||(n[8]=[])}function J0(n,r){let s;const a=r[n.index];if(ci(a))s=a;else{let l;if(8&n.type)l=Lr(a);else{const h=r[11];l=h.createComment("");const y=ii(n,r);va(h,bh(h,y),l,function Th(n,r){return n.nextSibling(r)}(h,y),!1)}r[n.index]=s=Mm(a,r,l,n),rf(r,s)}return new Y0(s,n,r)}class xv{constructor(r){this.queryList=r,this.matches=null}clone(){return new xv(this.queryList)}setDirty(){this.queryList.setDirty()}}class Mv{constructor(r=[]){this.queries=r}createEmbeddedView(r){const s=r.queries;if(null!==s){const a=null!==r.contentQueries?r.contentQueries[0]:s.length,l=[];for(let h=0;h<a;h++){const y=s.getByIndex(h);l.push(this.queries[y.indexInDeclarationView].clone())}return new Mv(l)}return null}insertView(r){this.dirtyQueriesWithMatches(r)}detachView(r){this.dirtyQueriesWithMatches(r)}dirtyQueriesWithMatches(r){for(let s=0;s<this.queries.length;s++)null!==aw(r,s).matches&&this.queries[s].setDirty()}}class X0{constructor(r,s,a=null){this.predicate=r,this.flags=s,this.read=a}}class Rv{constructor(r=[]){this.queries=r}elementStart(r,s){for(let a=0;a<this.queries.length;a++)this.queries[a].elementStart(r,s)}elementEnd(r){for(let s=0;s<this.queries.length;s++)this.queries[s].elementEnd(r)}embeddedTView(r){let s=null;for(let a=0;a<this.length;a++){const l=null!==s?s.length:0,h=this.getByIndex(a).embeddedTView(r,l);h&&(h.indexInDeclarationView=a,null!==s?s.push(h):s=[h])}return null!==s?new Rv(s):null}template(r,s){for(let a=0;a<this.queries.length;a++)this.queries[a].template(r,s)}getByIndex(r){return this.queries[r]}get length(){return this.queries.length}track(r){this.queries.push(r)}}class Ov{constructor(r,s=-1){this.metadata=r,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=s}elementStart(r,s){this.isApplyingToNode(s)&&this.matchTNode(r,s)}elementEnd(r){this._declarationNodeIndex===r.index&&(this._appliesToNextNode=!1)}template(r,s){this.elementStart(r,s)}embeddedTView(r,s){return this.isApplyingToNode(r)?(this.crossesNgTemplate=!0,this.addMatch(-r.index,s),new Ov(this.metadata)):null}isApplyingToNode(r){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const s=this._declarationNodeIndex;let a=r.parent;for(;null!==a&&8&a.type&&a.index!==s;)a=a.parent;return s===(null!==a?a.index:-1)}return this._appliesToNextNode}matchTNode(r,s){const a=this.metadata.predicate;if(Array.isArray(a))for(let l=0;l<a.length;l++){const h=a[l];this.matchTNodeWithReadOption(r,s,II(s,h)),this.matchTNodeWithReadOption(r,s,Qt(s,r,h,!1,!1))}else a===Cg?4&s.type&&this.matchTNodeWithReadOption(r,s,-1):this.matchTNodeWithReadOption(r,s,Qt(s,r,a,!1,!1))}matchTNodeWithReadOption(r,s,a){if(null!==a){const l=this.metadata.read;if(null!==l)if(l===st||l===Vy||l===Cg&&4&s.type)this.addMatch(s.index,-2);else{const h=Qt(s,r,l,!1,!1);null!==h&&this.addMatch(s.index,h)}else this.addMatch(s.index,a)}}addMatch(r,s){null===this.matches?this.matches=[r,s]:this.matches.push(r,s)}}function II(n,r){const s=n.localNames;if(null!==s)for(let a=0;a<s.length;a+=2)if(s[a]===r)return s[a+1];return null}function CI(n,r,s,a){return-1===s?function DI(n,r){return 11&n.type?Te(n,r):4&n.type?Ly(n,r):null}(r,n):-2===s?function bI(n,r,s){return s===st?Te(r,n):s===Cg?Ly(r,n):s===Vy?J0(r,n):void 0}(n,r,a):vn(n,n[1],s,r)}function ew(n,r,s,a){const l=r[19].queries[a];if(null===l.matches){const h=n.data,y=s.matches,I=[];for(let T=0;T<y.length;T+=2){const V=y[T];I.push(V<0?null:CI(r,h[V],y[T+1],s.metadata.read))}l.matches=I}return l.matches}function Nv(n,r,s,a){const l=n.queries.getByIndex(s),h=l.matches;if(null!==h){const y=ew(n,r,l,s);for(let I=0;I<h.length;I+=2){const T=h[I];if(T>0)a.push(y[I/2]);else{const V=h[I+1],Z=r[-T];for(let ee=10;ee<Z.length;ee++){const Se=Z[ee];Se[17]===Se[3]&&Nv(Se[1],Se,V,a)}if(null!==Z[9]){const ee=Z[9];for(let Se=0;Se<ee.length;Se++){const je=ee[Se];Nv(je[1],je,V,a)}}}}}return a}function tw(n){const r=ht(),s=Rn(),a=Co();Ps(a+1);const l=aw(s,a);if(n.dirty&&vs(r)===(2==(2&l.metadata.flags))){if(null===l.matches)n.reset([]);else{const h=l.crossesNgTemplate?Nv(s,r,a,[]):ew(s,r,l,a);n.reset(h,kt),n.notifyOnChanges()}return!0}return!1}function nw(n,r,s){const a=Rn();a.firstCreatePass&&(ow(a,new X0(n,r,s),-1),2==(2&r)&&(a.staticViewQueries=!0)),sw(a,ht(),r)}function rw(n,r,s,a){const l=Rn();if(l.firstCreatePass){const h=Or();ow(l,new X0(r,s,a),h.index),function SI(n,r){const s=n.contentQueries||(n.contentQueries=[]);r!==(s.length?s[s.length-1]:-1)&&s.push(n.queries.length-1,r)}(l,n),2==(2&s)&&(l.staticContentQueries=!0)}sw(l,ht(),s)}function iw(){return function TI(n,r){return n[19].queries[r].queryList}(ht(),Co())}function sw(n,r,s){const a=new Sv(4==(4&s));Qh(n,r,a,a.destroy),null===r[19]&&(r[19]=new Mv),r[19].queries.push(new xv(a))}function ow(n,r,s){null===n.queries&&(n.queries=new Rv),n.queries.track(new Ov(r,s))}function aw(n,r){return n.queries.getByIndex(r)}function uw(n,r){return Ly(n,r)}function By(...n){}const Sw=new Pr("Application Initializer");let jy=(()=>{class n{constructor(s){this.appInits=s,this.resolve=By,this.reject=By,this.initialized=!1,this.done=!1,this.donePromise=new Promise((a,l)=>{this.resolve=a,this.reject=l})}runInitializers(){if(this.initialized)return;const s=[],a=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let l=0;l<this.appInits.length;l++){const h=this.appInits[l]();if(lg(h))s.push(h);else if(Ef(h)){const y=new Promise((I,T)=>{h.subscribe({complete:I,error:T})});s.push(y)}}Promise.all(s).then(()=>{a()}).catch(l=>{this.reject(l)}),0===s.length&&a(),this.initialized=!0}}return n.\u0275fac=function(s){return new(s||n)(vi(Sw,8))},n.\u0275prov=Ft({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Aw=new Pr("AppId",{providedIn:"root",factory:function xw(){return`${Vv()}${Vv()}${Vv()}`}});function Vv(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Mw=new Pr("Platform Initializer"),qI=new Pr("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),Rw=new Pr("appBootstrapListener");let ZI=(()=>{class n{log(s){console.log(s)}warn(s){console.warn(s)}}return n.\u0275fac=function(s){return new(s||n)},n.\u0275prov=Ft({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();const $y=new Pr("LocaleId",{providedIn:"root",factory:()=>x($y,pt.Optional|pt.SkipSelf)||function KI(){return typeof $localize<"u"&&$localize.locale||sc}()}),YI=new Pr("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class QI{constructor(r,s){this.ngModuleFactory=r,this.componentFactories=s}}let JI=(()=>{class n{compileModuleSync(s){return new Dv(s)}compileModuleAsync(s){return Promise.resolve(this.compileModuleSync(s))}compileModuleAndAllComponentsSync(s){const a=this.compileModuleSync(s),h=mu($r(s).declarations).reduce((y,I)=>{const T=Xt(I);return T&&y.push(new Iu(T)),y},[]);return new QI(a,h)}compileModuleAndAllComponentsAsync(s){return Promise.resolve(this.compileModuleAndAllComponentsSync(s))}clearCache(){}clearCacheFor(s){}getModuleId(s){}}return n.\u0275fac=function(s){return new(s||n)},n.\u0275prov=Ft({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const tD=(()=>Promise.resolve(0))();function Uv(n){typeof Zone>"u"?tD.then(()=>{n&&n.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",n)}class Su{constructor({enableLongStackTrace:r=!1,shouldCoalesceEventChangeDetection:s=!1,shouldCoalesceRunChangeDetection:a=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new _l(!1),this.onMicrotaskEmpty=new _l(!1),this.onStable=new _l(!1),this.onError=new _l(!1),typeof Zone>"u")throw new Ke(908,!1);Zone.assertZonePatched();const l=this;if(l._nesting=0,l._outer=l._inner=Zone.current,Zone.AsyncStackTaggingZoneSpec){const h=Zone.AsyncStackTaggingZoneSpec;l._inner=l._inner.fork(new h("Angular"))}Zone.TaskTrackingZoneSpec&&(l._inner=l._inner.fork(new Zone.TaskTrackingZoneSpec)),r&&Zone.longStackTraceZoneSpec&&(l._inner=l._inner.fork(Zone.longStackTraceZoneSpec)),l.shouldCoalesceEventChangeDetection=!a&&s,l.shouldCoalesceRunChangeDetection=a,l.lastRequestAnimationFrameId=-1,l.nativeRequestAnimationFrame=function nD(){let n=We.requestAnimationFrame,r=We.cancelAnimationFrame;if(typeof Zone<"u"&&n&&r){const s=n[Zone.__symbol__("OriginalDelegate")];s&&(n=s);const a=r[Zone.__symbol__("OriginalDelegate")];a&&(r=a)}return{nativeRequestAnimationFrame:n,nativeCancelAnimationFrame:r}}().nativeRequestAnimationFrame,function sD(n){const r=()=>{!function iD(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(We,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,jv(n),n.isCheckStableRunning=!0,Bv(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),jv(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(s,a,l,h,y,I)=>{try{return Pw(n),s.invokeTask(l,h,y,I)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===h.type||n.shouldCoalesceRunChangeDetection)&&r(),kw(n)}},onInvoke:(s,a,l,h,y,I,T)=>{try{return Pw(n),s.invoke(l,h,y,I,T)}finally{n.shouldCoalesceRunChangeDetection&&r(),kw(n)}},onHasTask:(s,a,l,h)=>{s.hasTask(l,h),a===l&&("microTask"==h.change?(n._hasPendingMicrotasks=h.microTask,jv(n),Bv(n)):"macroTask"==h.change&&(n.hasPendingMacrotasks=h.macroTask))},onHandleError:(s,a,l,h)=>(s.handleError(l,h),n.runOutsideAngular(()=>n.onError.emit(h)),!1)})}(l)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Su.isInAngularZone())throw new Ke(909,!1)}static assertNotInAngularZone(){if(Su.isInAngularZone())throw new Ke(909,!1)}run(r,s,a){return this._inner.run(r,s,a)}runTask(r,s,a,l){const h=this._inner,y=h.scheduleEventTask("NgZoneEvent: "+l,r,rD,By,By);try{return h.runTask(y,s,a)}finally{h.cancelTask(y)}}runGuarded(r,s,a){return this._inner.runGuarded(r,s,a)}runOutsideAngular(r){return this._outer.run(r)}}const rD={};function Bv(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function jv(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function Pw(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function kw(n){n._nesting--,Bv(n)}class oD{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new _l,this.onMicrotaskEmpty=new _l,this.onStable=new _l,this.onError=new _l}run(r,s,a){return r.apply(s,a)}runGuarded(r,s,a){return r.apply(s,a)}runOutsideAngular(r){return r()}runTask(r,s,a,l){return r.apply(s,a)}}const Fw=new Pr(""),Lw=new Pr("");let $v,aD=(()=>{class n{constructor(s,a,l){this._ngZone=s,this.registry=a,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,$v||(function uD(n){$v=n}(l),l.addToWindow(a)),this._watchAngularEvents(),s.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Su.assertNotInAngularZone(),Uv(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Uv(()=>{for(;0!==this._callbacks.length;){let s=this._callbacks.pop();clearTimeout(s.timeoutId),s.doneCb(this._didWork)}this._didWork=!1});else{let s=this.getPendingTasks();this._callbacks=this._callbacks.filter(a=>!a.updateCb||!a.updateCb(s)||(clearTimeout(a.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(s=>({source:s.source,creationLocation:s.creationLocation,data:s.data})):[]}addCallback(s,a,l){let h=-1;a&&a>0&&(h=setTimeout(()=>{this._callbacks=this._callbacks.filter(y=>y.timeoutId!==h),s(this._didWork,this.getPendingTasks())},a)),this._callbacks.push({doneCb:s,timeoutId:h,updateCb:l})}whenStable(s,a,l){if(l&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(s,a,l),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(s){this.registry.registerApplication(s,this)}unregisterApplication(s){this.registry.unregisterApplication(s)}findProviders(s,a,l){return[]}}return n.\u0275fac=function(s){return new(s||n)(vi(Su),vi(Vw),vi(Lw))},n.\u0275prov=Ft({token:n,factory:n.\u0275fac}),n})(),Vw=(()=>{class n{constructor(){this._applications=new Map}registerApplication(s,a){this._applications.set(s,a)}unregisterApplication(s){this._applications.delete(s)}unregisterAllApplications(){this._applications.clear()}getTestability(s){return this._applications.get(s)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(s,a=!0){return $v?.findTestabilityInTree(this,s,a)??null}}return n.\u0275fac=function(s){return new(s||n)},n.\u0275prov=Ft({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})(),Hc=null;const Uw=new Pr("AllowMultipleToken"),Hv=new Pr("PlatformDestroyListeners");class dD{constructor(r,s){this.name=r,this.token=s}}function jw(n,r,s=[]){const a=`Platform: ${r}`,l=new Pr(a);return(h=[])=>{let y=Gv();if(!y||y.injector.get(Uw,!1)){const I=[...s,...h,{provide:l,useValue:!0}];n?n(I):function hD(n){if(Hc&&!Hc.get(Uw,!1))throw new Ke(400,!1);Hc=n;const r=n.get(Hw);(function Bw(n){const r=n.get(Mw,null);r&&r.forEach(s=>s())})(n)}(function $w(n=[],r){return Vu.create({name:r,providers:[{provide:Xn,useValue:"platform"},{provide:Hv,useValue:new Set([()=>Hc=null])},...n]})}(I,a))}return function pD(n){const r=Gv();if(!r)throw new Ke(401,!1);return r}()}}function Gv(){return Hc?.get(Hw)??null}let Hw=(()=>{class n{constructor(s){this._injector=s,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(s,a){const l=function zw(n,r){let s;return s="noop"===n?new oD:("zone.js"===n?void 0:n)||new Su(r),s}(a?.ngZone,function Gw(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!n||!n.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!n||!n.ngZoneRunCoalescing)||!1}}(a)),h=[{provide:Su,useValue:l}];return l.run(()=>{const y=Vu.create({providers:h,parent:this.injector,name:s.moduleType.name}),I=s.create(y),T=I.injector.get(cd,null);if(!T)throw new Ke(402,!1);return l.runOutsideAngular(()=>{const V=l.onError.subscribe({next:Z=>{T.handleError(Z)}});I.onDestroy(()=>{Gy(this._modules,I),V.unsubscribe()})}),function Ww(n,r,s){try{const a=s();return lg(a)?a.catch(l=>{throw r.runOutsideAngular(()=>n.handleError(l)),l}):a}catch(a){throw r.runOutsideAngular(()=>n.handleError(a)),a}}(T,l,()=>{const V=I.injector.get(jy);return V.runInitializers(),V.donePromise.then(()=>(function i(n){$t(n,"Expected localeId to be defined"),"string"==typeof n&&(ky=n.toLowerCase().replace(/_/g,"-"))}(I.injector.get($y,sc)||sc),this._moduleDoBootstrap(I),I))})})}bootstrapModule(s,a=[]){const l=qw({},a);return function lD(n,r,s){const a=new Dv(s);return Promise.resolve(a)}(0,0,s).then(h=>this.bootstrapModuleFactory(h,l))}_moduleDoBootstrap(s){const a=s.injector.get(Hy);if(s._bootstrapComponents.length>0)s._bootstrapComponents.forEach(l=>a.bootstrap(l));else{if(!s.instance.ngDoBootstrap)throw new Ke(403,!1);s.instance.ngDoBootstrap(a)}this._modules.push(s)}onDestroy(s){this._destroyListeners.push(s)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Ke(404,!1);this._modules.slice().forEach(a=>a.destroy()),this._destroyListeners.forEach(a=>a());const s=this._injector.get(Hv,null);s&&(s.forEach(a=>a()),s.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return n.\u0275fac=function(s){return new(s||n)(vi(Vu))},n.\u0275prov=Ft({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();function qw(n,r){return Array.isArray(r)?r.reduce(qw,n):{...n,...r}}let Hy=(()=>{class n{constructor(s,a,l){this._zone=s,this._injector=a,this._exceptionHandler=l,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const h=new G.y(I=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{I.next(this._stable),I.complete()})}),y=new G.y(I=>{let T;this._zone.runOutsideAngular(()=>{T=this._zone.onStable.subscribe(()=>{Su.assertNotInAngularZone(),Uv(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,I.next(!0))})})});const V=this._zone.onUnstable.subscribe(()=>{Su.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{I.next(!1)}))});return()=>{T.unsubscribe(),V.unsubscribe()}});this.isStable=(0,be.T)(h,y.pipe((0,we.B)()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(s,a){const l=s instanceof Gs;if(!this._injector.get(jy).done)throw!l&&Qr(s),new Ke(405,false);let y;y=l?s:this._injector.get(B).resolveComponentFactory(s),this.componentTypes.push(y.componentType);const I=function cD(n){return n.isBoundToModule}(y)?void 0:this._injector.get(Uf),V=y.create(Vu.NULL,[],a||y.selector,I),Z=V.location.nativeElement,ee=V.injector.get(Fw,null);return ee?.registerApplication(Z),V.onDestroy(()=>{this.detachView(V.hostView),Gy(this.components,V),ee?.unregisterApplication(Z)}),this._loadComponent(V),V}tick(){if(this._runningTick)throw new Ke(101,!1);try{this._runningTick=!0;for(let s of this._views)s.detectChanges()}catch(s){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(s))}finally{this._runningTick=!1}}attachView(s){const a=s;this._views.push(a),a.attachToAppRef(this)}detachView(s){const a=s;Gy(this._views,a),a.detachFromAppRef()}_loadComponent(s){this.attachView(s.hostView),this.tick(),this.components.push(s),this._injector.get(Rw,[]).concat(this._bootstrapListeners).forEach(l=>l(s))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(s=>s()),this._views.slice().forEach(s=>s.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(s){return this._destroyListeners.push(s),()=>Gy(this._destroyListeners,s)}destroy(){if(this._destroyed)throw new Ke(406,!1);const s=this._injector;s.destroy&&!s.destroyed&&s.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return n.\u0275fac=function(s){return new(s||n)(vi(Su),vi(ts),vi(cd))},n.\u0275prov=Ft({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Gy(n,r){const s=n.indexOf(r);s>-1&&n.splice(s,1)}let Kw=!0,Yw=!1;function mD(){return Yw=!0,Kw}function yD(){if(Yw)throw new Error("Cannot enable prod mode after platform setup.");Kw=!1}let _D=(()=>{class n{}return n.__NG_ELEMENT_ID__=vD,n})();function vD(n){return function wD(n,r,s){if(Rs(n)&&!s){const a=qn(n.index,r);return new ll(a,a)}return 47&n.type?new ll(r[16],r):null}(Or(),ht(),16==(16&n))}class eE{constructor(){}supports(r){return Ud(r)}create(r){return new TD(r)}}const bD=(n,r)=>r;class TD{constructor(r){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=r||bD}forEachItem(r){let s;for(s=this._itHead;null!==s;s=s._next)r(s)}forEachOperation(r){let s=this._itHead,a=this._removalsHead,l=0,h=null;for(;s||a;){const y=!a||s&&s.currentIndex<nE(a,l,h)?s:a,I=nE(y,l,h),T=y.currentIndex;if(y===a)l--,a=a._nextRemoved;else if(s=s._next,null==y.previousIndex)l++;else{h||(h=[]);const V=I-l,Z=T-l;if(V!=Z){for(let Se=0;Se<V;Se++){const je=Se<h.length?h[Se]:h[Se]=0,vt=je+Se;Z<=vt&&vt<V&&(h[Se]=je+1)}h[y.previousIndex]=Z-V}}I!==T&&r(y,I,T)}}forEachPreviousItem(r){let s;for(s=this._previousItHead;null!==s;s=s._nextPrevious)r(s)}forEachAddedItem(r){let s;for(s=this._additionsHead;null!==s;s=s._nextAdded)r(s)}forEachMovedItem(r){let s;for(s=this._movesHead;null!==s;s=s._nextMoved)r(s)}forEachRemovedItem(r){let s;for(s=this._removalsHead;null!==s;s=s._nextRemoved)r(s)}forEachIdentityChange(r){let s;for(s=this._identityChangesHead;null!==s;s=s._nextIdentityChange)r(s)}diff(r){if(null==r&&(r=[]),!Ud(r))throw new Ke(900,!1);return this.check(r)?this:null}onDestroy(){}check(r){this._reset();let l,h,y,s=this._itHead,a=!1;if(Array.isArray(r)){this.length=r.length;for(let I=0;I<this.length;I++)h=r[I],y=this._trackByFn(I,h),null!==s&&Object.is(s.trackById,y)?(a&&(s=this._verifyReinsertion(s,h,y,I)),Object.is(s.item,h)||this._addIdentityChange(s,h)):(s=this._mismatch(s,h,y,I),a=!0),s=s._next}else l=0,function Yo(n,r){if(Array.isArray(n))for(let s=0;s<n.length;s++)r(n[s]);else{const s=n[cl()]();let a;for(;!(a=s.next()).done;)r(a.value)}}(r,I=>{y=this._trackByFn(l,I),null!==s&&Object.is(s.trackById,y)?(a&&(s=this._verifyReinsertion(s,I,y,l)),Object.is(s.item,I)||this._addIdentityChange(s,I)):(s=this._mismatch(s,I,y,l),a=!0),s=s._next,l++}),this.length=l;return this._truncate(s),this.collection=r,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let r;for(r=this._previousItHead=this._itHead;null!==r;r=r._next)r._nextPrevious=r._next;for(r=this._additionsHead;null!==r;r=r._nextAdded)r.previousIndex=r.currentIndex;for(this._additionsHead=this._additionsTail=null,r=this._movesHead;null!==r;r=r._nextMoved)r.previousIndex=r.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(r,s,a,l){let h;return null===r?h=this._itTail:(h=r._prev,this._remove(r)),null!==(r=null===this._unlinkedRecords?null:this._unlinkedRecords.get(a,null))?(Object.is(r.item,s)||this._addIdentityChange(r,s),this._reinsertAfter(r,h,l)):null!==(r=null===this._linkedRecords?null:this._linkedRecords.get(a,l))?(Object.is(r.item,s)||this._addIdentityChange(r,s),this._moveAfter(r,h,l)):r=this._addAfter(new SD(s,a),h,l),r}_verifyReinsertion(r,s,a,l){let h=null===this._unlinkedRecords?null:this._unlinkedRecords.get(a,null);return null!==h?r=this._reinsertAfter(h,r._prev,l):r.currentIndex!=l&&(r.currentIndex=l,this._addToMoves(r,l)),r}_truncate(r){for(;null!==r;){const s=r._next;this._addToRemovals(this._unlink(r)),r=s}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(r,s,a){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(r);const l=r._prevRemoved,h=r._nextRemoved;return null===l?this._removalsHead=h:l._nextRemoved=h,null===h?this._removalsTail=l:h._prevRemoved=l,this._insertAfter(r,s,a),this._addToMoves(r,a),r}_moveAfter(r,s,a){return this._unlink(r),this._insertAfter(r,s,a),this._addToMoves(r,a),r}_addAfter(r,s,a){return this._insertAfter(r,s,a),this._additionsTail=null===this._additionsTail?this._additionsHead=r:this._additionsTail._nextAdded=r,r}_insertAfter(r,s,a){const l=null===s?this._itHead:s._next;return r._next=l,r._prev=s,null===l?this._itTail=r:l._prev=r,null===s?this._itHead=r:s._next=r,null===this._linkedRecords&&(this._linkedRecords=new tE),this._linkedRecords.put(r),r.currentIndex=a,r}_remove(r){return this._addToRemovals(this._unlink(r))}_unlink(r){null!==this._linkedRecords&&this._linkedRecords.remove(r);const s=r._prev,a=r._next;return null===s?this._itHead=a:s._next=a,null===a?this._itTail=s:a._prev=s,r}_addToMoves(r,s){return r.previousIndex===s||(this._movesTail=null===this._movesTail?this._movesHead=r:this._movesTail._nextMoved=r),r}_addToRemovals(r){return null===this._unlinkedRecords&&(this._unlinkedRecords=new tE),this._unlinkedRecords.put(r),r.currentIndex=null,r._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=r,r._prevRemoved=null):(r._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=r),r}_addIdentityChange(r,s){return r.item=s,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=r:this._identityChangesTail._nextIdentityChange=r,r}}class SD{constructor(r,s){this.item=r,this.trackById=s,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class AD{constructor(){this._head=null,this._tail=null}add(r){null===this._head?(this._head=this._tail=r,r._nextDup=null,r._prevDup=null):(this._tail._nextDup=r,r._prevDup=this._tail,r._nextDup=null,this._tail=r)}get(r,s){let a;for(a=this._head;null!==a;a=a._nextDup)if((null===s||s<=a.currentIndex)&&Object.is(a.trackById,r))return a;return null}remove(r){const s=r._prevDup,a=r._nextDup;return null===s?this._head=a:s._nextDup=a,null===a?this._tail=s:a._prevDup=s,null===this._head}}class tE{constructor(){this.map=new Map}put(r){const s=r.trackById;let a=this.map.get(s);a||(a=new AD,this.map.set(s,a)),a.add(r)}get(r,s){const l=this.map.get(r);return l?l.get(r,s):null}remove(r){const s=r.trackById;return this.map.get(s).remove(r)&&this.map.delete(s),r}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function nE(n,r,s){const a=n.previousIndex;if(null===a)return a;let l=0;return s&&a<s.length&&(l=s[a]),a+r+l}class rE{constructor(){}supports(r){return r instanceof Map||Ha(r)}create(){return new xD}}class xD{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(r){let s;for(s=this._mapHead;null!==s;s=s._next)r(s)}forEachPreviousItem(r){let s;for(s=this._previousMapHead;null!==s;s=s._nextPrevious)r(s)}forEachChangedItem(r){let s;for(s=this._changesHead;null!==s;s=s._nextChanged)r(s)}forEachAddedItem(r){let s;for(s=this._additionsHead;null!==s;s=s._nextAdded)r(s)}forEachRemovedItem(r){let s;for(s=this._removalsHead;null!==s;s=s._nextRemoved)r(s)}diff(r){if(r){if(!(r instanceof Map||Ha(r)))throw new Ke(900,!1)}else r=new Map;return this.check(r)?this:null}onDestroy(){}check(r){this._reset();let s=this._mapHead;if(this._appendAfter=null,this._forEach(r,(a,l)=>{if(s&&s.key===l)this._maybeAddToChanges(s,a),this._appendAfter=s,s=s._next;else{const h=this._getOrCreateRecordForKey(l,a);s=this._insertBeforeOrAppend(s,h)}}),s){s._prev&&(s._prev._next=null),this._removalsHead=s;for(let a=s;null!==a;a=a._nextRemoved)a===this._mapHead&&(this._mapHead=null),this._records.delete(a.key),a._nextRemoved=a._next,a.previousValue=a.currentValue,a.currentValue=null,a._prev=null,a._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(r,s){if(r){const a=r._prev;return s._next=r,s._prev=a,r._prev=s,a&&(a._next=s),r===this._mapHead&&(this._mapHead=s),this._appendAfter=r,r}return this._appendAfter?(this._appendAfter._next=s,s._prev=this._appendAfter):this._mapHead=s,this._appendAfter=s,null}_getOrCreateRecordForKey(r,s){if(this._records.has(r)){const l=this._records.get(r);this._maybeAddToChanges(l,s);const h=l._prev,y=l._next;return h&&(h._next=y),y&&(y._prev=h),l._next=null,l._prev=null,l}const a=new MD(r);return this._records.set(r,a),a.currentValue=s,this._addToAdditions(a),a}_reset(){if(this.isDirty){let r;for(this._previousMapHead=this._mapHead,r=this._previousMapHead;null!==r;r=r._next)r._nextPrevious=r._next;for(r=this._changesHead;null!==r;r=r._nextChanged)r.previousValue=r.currentValue;for(r=this._additionsHead;null!=r;r=r._nextAdded)r.previousValue=r.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(r,s){Object.is(s,r.currentValue)||(r.previousValue=r.currentValue,r.currentValue=s,this._addToChanges(r))}_addToAdditions(r){null===this._additionsHead?this._additionsHead=this._additionsTail=r:(this._additionsTail._nextAdded=r,this._additionsTail=r)}_addToChanges(r){null===this._changesHead?this._changesHead=this._changesTail=r:(this._changesTail._nextChanged=r,this._changesTail=r)}_forEach(r,s){r instanceof Map?r.forEach(s):Object.keys(r).forEach(a=>s(r[a],a))}}class MD{constructor(r){this.key=r,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function iE(){return new Kv([new eE])}let Kv=(()=>{class n{constructor(s){this.factories=s}static create(s,a){if(null!=a){const l=a.factories.slice();s=s.concat(l)}return new n(s)}static extend(s){return{provide:n,useFactory:a=>n.create(s,a||iE()),deps:[[n,new bn,new Pt]]}}find(s){const a=this.factories.find(l=>l.supports(s));if(null!=a)return a;throw new Ke(901,!1)}}return n.\u0275prov=Ft({token:n,providedIn:"root",factory:iE}),n})();function sE(){return new Yv([new rE])}let Yv=(()=>{class n{constructor(s){this.factories=s}static create(s,a){if(a){const l=a.factories.slice();s=s.concat(l)}return new n(s)}static extend(s){return{provide:n,useFactory:a=>n.create(s,a||sE()),deps:[[n,new bn,new Pt]]}}find(s){const a=this.factories.find(l=>l.supports(s));if(a)return a;throw new Ke(901,!1)}}return n.\u0275prov=Ft({token:n,providedIn:"root",factory:sE}),n})();const ND=jw(null,"core",[]);let PD=(()=>{class n{constructor(s){}}return n.\u0275fac=function(s){return new(s||n)(vi(Hy))},n.\u0275mod=Rt({type:n}),n.\u0275inj=an({}),n})();function kD(n){return"boolean"==typeof n?n:null!=n&&"false"!==n}},433:(Gt,qe,U)=>{U.d(qe,{Fj:()=>he,u5:()=>Us,JJ:()=>$e,JL:()=>ye,F:()=>Cr,On:()=>ct,_Y:()=>Dt});var p=U(4650),C=U(6895),G=U(8996),be=U(9751),we=U(4742),Me=U(8421),Re=U(7669),Oe=U(5403),Fe=U(3268),ce=U(1810),Ce=U(4004);let mt=(()=>{class F{constructor(A,K){this._renderer=A,this._elementRef=K,this.onChange=et=>{},this.onTouched=()=>{}}setProperty(A,K){this._renderer.setProperty(this._elementRef.nativeElement,A,K)}registerOnTouched(A){this.onTouched=A}registerOnChange(A){this.onChange=A}setDisabledState(A){this.setProperty("disabled",A)}}return F.\u0275fac=function(A){return new(A||F)(p.Y36(p.Qsj),p.Y36(p.SBq))},F.\u0275dir=p.lG2({type:F}),F})(),ot=(()=>{class F extends mt{}return F.\u0275fac=function(){let N;return function(K){return(N||(N=p.n5z(F)))(K||F)}}(),F.\u0275dir=p.lG2({type:F,features:[p.qOj]}),F})();const Ke=new p.OlP("NgValueAccessor"),He={provide:Ke,useExisting:(0,p.Gpc)(()=>he),multi:!0},Bt=new p.OlP("CompositionEventMode");let he=(()=>{class F extends mt{constructor(A,K,et){super(A,K),this._compositionMode=et,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function Ut(){const F=(0,C.q)()?(0,C.q)().getUserAgent():"";return/android (\d+)/.test(F.toLowerCase())}())}writeValue(A){this.setProperty("value",A??"")}_handleInput(A){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(A)}_compositionStart(){this._composing=!0}_compositionEnd(A){this._composing=!1,this._compositionMode&&this.onChange(A)}}return F.\u0275fac=function(A){return new(A||F)(p.Y36(p.Qsj),p.Y36(p.SBq),p.Y36(Bt,8))},F.\u0275dir=p.lG2({type:F,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(A,K){1&A&&p.NdJ("input",function(nn){return K._handleInput(nn.target.value)})("blur",function(){return K.onTouched()})("compositionstart",function(){return K._compositionStart()})("compositionend",function(nn){return K._compositionEnd(nn.target.value)})},features:[p._Bn([He]),p.qOj]}),F})();const nt=new p.OlP("NgValidators"),ae=new p.OlP("NgAsyncValidators");function tn(F){return null!=F}function qt(F){return(0,p.QGY)(F)?(0,G.D)(F):F}function on(F){let N={};return F.forEach(A=>{N=null!=A?{...N,...A}:N}),0===Object.keys(N).length?null:N}function Ft(F,N){return N.map(A=>A(F))}function an(F){return F.map(N=>function Mn(F){return!F.validate}(N)?N:A=>N.validate(A))}function Ei(F){return null!=F?function Fn(F){if(!F)return null;const N=F.filter(tn);return 0==N.length?null:function(A){return on(Ft(A,N))}}(an(F)):null}function mr(F){return null!=F?function Er(F){if(!F)return null;const N=F.filter(tn);return 0==N.length?null:function(A){return function le(...F){const N=(0,Re.jO)(F),{args:A,keys:K}=(0,we.D)(F),et=new be.y(nn=>{const{length:dr}=A;if(!dr)return void nn.complete();const cs=new Array(dr);let Mi=dr,Hi=dr;for(let Ws=0;Ws<dr;Ws++){let no=!1;(0,Me.Xf)(A[Ws]).subscribe((0,Oe.x)(nn,_o=>{no||(no=!0,Hi--),cs[Ws]=_o},()=>Mi--,void 0,()=>{(!Mi||!no)&&(Hi||nn.next(K?(0,ce.n)(K,cs):cs),nn.complete())}))}});return N?et.pipe((0,Fe.Z)(N)):et}(Ft(A,N).map(qt)).pipe((0,Ce.U)(on))}}(an(F)):null}function ur(F,N){return null===F?[N]:Array.isArray(F)?[...F,N]:[F,N]}function nr(F){return F?Array.isArray(F)?F:[F]:[]}function $n(F,N){return Array.isArray(F)?F.includes(N):F===N}function lr(F,N){const A=nr(N);return nr(F).forEach(et=>{$n(A,et)||A.push(et)}),A}function pt(F,N){return nr(N).filter(A=>!$n(F,A))}class Bn{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(N){this._rawValidators=N||[],this._composedValidatorFn=Ei(this._rawValidators)}_setAsyncValidators(N){this._rawAsyncValidators=N||[],this._composedAsyncValidatorFn=mr(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(N){this._onDestroyCallbacks.push(N)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(N=>N()),this._onDestroyCallbacks=[]}reset(N){this.control&&this.control.reset(N)}hasError(N,A){return!!this.control&&this.control.hasError(N,A)}getError(N,A){return this.control?this.control.getError(N,A):null}}class Cn extends Bn{get formDirective(){return null}get path(){return null}}class Hn extends Bn{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class kr{constructor(N){this._cd=N}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let $e=(()=>{class F extends kr{constructor(A){super(A)}}return F.\u0275fac=function(A){return new(A||F)(p.Y36(Hn,2))},F.\u0275dir=p.lG2({type:F,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(A,K){2&A&&p.ekj("ng-untouched",K.isUntouched)("ng-touched",K.isTouched)("ng-pristine",K.isPristine)("ng-dirty",K.isDirty)("ng-valid",K.isValid)("ng-invalid",K.isInvalid)("ng-pending",K.isPending)},features:[p.qOj]}),F})(),ye=(()=>{class F extends kr{constructor(A){super(A)}}return F.\u0275fac=function(A){return new(A||F)(p.Y36(Cn,10))},F.\u0275dir=p.lG2({type:F,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(A,K){2&A&&p.ekj("ng-untouched",K.isUntouched)("ng-touched",K.isTouched)("ng-pristine",K.isPristine)("ng-dirty",K.isDirty)("ng-valid",K.isValid)("ng-invalid",K.isInvalid)("ng-pending",K.isPending)("ng-submitted",K.isSubmitted)},features:[p.qOj]}),F})();const Rt="VALID",ir="INVALID",Tn="PENDING",er="DISABLED";function _n(F){return(Qr(F)?F.validators:F)||null}function Xt(F){return Array.isArray(F)?Ei(F):F||null}function cr(F,N){return(Qr(N)?N.asyncValidators:F)||null}function vr(F){return Array.isArray(F)?mr(F):F||null}function Qr(F){return null!=F&&!Array.isArray(F)&&"object"==typeof F}class _e{constructor(N,A){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=N,this._rawAsyncValidators=A,this._composedValidatorFn=Xt(this._rawValidators),this._composedAsyncValidatorFn=vr(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(N){this._rawValidators=this._composedValidatorFn=N}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(N){this._rawAsyncValidators=this._composedAsyncValidatorFn=N}get parent(){return this._parent}get valid(){return this.status===Rt}get invalid(){return this.status===ir}get pending(){return this.status==Tn}get disabled(){return this.status===er}get enabled(){return this.status!==er}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(N){this._rawValidators=N,this._composedValidatorFn=Xt(N)}setAsyncValidators(N){this._rawAsyncValidators=N,this._composedAsyncValidatorFn=vr(N)}addValidators(N){this.setValidators(lr(N,this._rawValidators))}addAsyncValidators(N){this.setAsyncValidators(lr(N,this._rawAsyncValidators))}removeValidators(N){this.setValidators(pt(N,this._rawValidators))}removeAsyncValidators(N){this.setAsyncValidators(pt(N,this._rawAsyncValidators))}hasValidator(N){return $n(this._rawValidators,N)}hasAsyncValidator(N){return $n(this._rawAsyncValidators,N)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(N={}){this.touched=!0,this._parent&&!N.onlySelf&&this._parent.markAsTouched(N)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(N=>N.markAllAsTouched())}markAsUntouched(N={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(A=>{A.markAsUntouched({onlySelf:!0})}),this._parent&&!N.onlySelf&&this._parent._updateTouched(N)}markAsDirty(N={}){this.pristine=!1,this._parent&&!N.onlySelf&&this._parent.markAsDirty(N)}markAsPristine(N={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(A=>{A.markAsPristine({onlySelf:!0})}),this._parent&&!N.onlySelf&&this._parent._updatePristine(N)}markAsPending(N={}){this.status=Tn,!1!==N.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!N.onlySelf&&this._parent.markAsPending(N)}disable(N={}){const A=this._parentMarkedDirty(N.onlySelf);this.status=er,this.errors=null,this._forEachChild(K=>{K.disable({...N,onlySelf:!0})}),this._updateValue(),!1!==N.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...N,skipPristineCheck:A}),this._onDisabledChange.forEach(K=>K(!0))}enable(N={}){const A=this._parentMarkedDirty(N.onlySelf);this.status=Rt,this._forEachChild(K=>{K.enable({...N,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:N.emitEvent}),this._updateAncestors({...N,skipPristineCheck:A}),this._onDisabledChange.forEach(K=>K(!1))}_updateAncestors(N){this._parent&&!N.onlySelf&&(this._parent.updateValueAndValidity(N),N.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(N){this._parent=N}getRawValue(){return this.value}updateValueAndValidity(N={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Rt||this.status===Tn)&&this._runAsyncValidator(N.emitEvent)),!1!==N.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!N.onlySelf&&this._parent.updateValueAndValidity(N)}_updateTreeValidity(N={emitEvent:!0}){this._forEachChild(A=>A._updateTreeValidity(N)),this.updateValueAndValidity({onlySelf:!0,emitEvent:N.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?er:Rt}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(N){if(this.asyncValidator){this.status=Tn,this._hasOwnPendingAsyncValidator=!0;const A=qt(this.asyncValidator(this));this._asyncValidationSubscription=A.subscribe(K=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(K,{emitEvent:N})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(N,A={}){this.errors=N,this._updateControlsErrors(!1!==A.emitEvent)}get(N){let A=N;return null==A||(Array.isArray(A)||(A=A.split(".")),0===A.length)?null:A.reduce((K,et)=>K&&K._find(et),this)}getError(N,A){const K=A?this.get(A):this;return K&&K.errors?K.errors[N]:null}hasError(N,A){return!!this.getError(N,A)}get root(){let N=this;for(;N._parent;)N=N._parent;return N}_updateControlsErrors(N){this.status=this._calculateStatus(),N&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(N)}_initObservables(){this.valueChanges=new p.vpe,this.statusChanges=new p.vpe}_calculateStatus(){return this._allControlsDisabled()?er:this.errors?ir:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Tn)?Tn:this._anyControlsHaveStatus(ir)?ir:Rt}_anyControlsHaveStatus(N){return this._anyControls(A=>A.status===N)}_anyControlsDirty(){return this._anyControls(N=>N.dirty)}_anyControlsTouched(){return this._anyControls(N=>N.touched)}_updatePristine(N={}){this.pristine=!this._anyControlsDirty(),this._parent&&!N.onlySelf&&this._parent._updatePristine(N)}_updateTouched(N={}){this.touched=this._anyControlsTouched(),this._parent&&!N.onlySelf&&this._parent._updateTouched(N)}_registerOnCollectionChange(N){this._onCollectionChange=N}_setUpdateStrategy(N){Qr(N)&&null!=N.updateOn&&(this._updateOn=N.updateOn)}_parentMarkedDirty(N){return!N&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(N){return null}}class ue extends _e{constructor(N,A,K){super(_n(A),cr(K,A)),this.controls=N,this._initObservables(),this._setUpdateStrategy(A),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(N,A){return this.controls[N]?this.controls[N]:(this.controls[N]=A,A.setParent(this),A._registerOnCollectionChange(this._onCollectionChange),A)}addControl(N,A,K={}){this.registerControl(N,A),this.updateValueAndValidity({emitEvent:K.emitEvent}),this._onCollectionChange()}removeControl(N,A={}){this.controls[N]&&this.controls[N]._registerOnCollectionChange(()=>{}),delete this.controls[N],this.updateValueAndValidity({emitEvent:A.emitEvent}),this._onCollectionChange()}setControl(N,A,K={}){this.controls[N]&&this.controls[N]._registerOnCollectionChange(()=>{}),delete this.controls[N],A&&this.registerControl(N,A),this.updateValueAndValidity({emitEvent:K.emitEvent}),this._onCollectionChange()}contains(N){return this.controls.hasOwnProperty(N)&&this.controls[N].enabled}setValue(N,A={}){(function Dr(F,N,A){F._forEachChild((K,et)=>{if(void 0===A[et])throw new p.vHH(1002,"")})})(this,0,N),Object.keys(N).forEach(K=>{(function $r(F,N,A){const K=F.controls;if(!(N?Object.keys(K):K).length)throw new p.vHH(1e3,"");if(!K[A])throw new p.vHH(1001,"")})(this,!0,K),this.controls[K].setValue(N[K],{onlySelf:!0,emitEvent:A.emitEvent})}),this.updateValueAndValidity(A)}patchValue(N,A={}){null!=N&&(Object.keys(N).forEach(K=>{const et=this.controls[K];et&&et.patchValue(N[K],{onlySelf:!0,emitEvent:A.emitEvent})}),this.updateValueAndValidity(A))}reset(N={},A={}){this._forEachChild((K,et)=>{K.reset(N[et],{onlySelf:!0,emitEvent:A.emitEvent})}),this._updatePristine(A),this._updateTouched(A),this.updateValueAndValidity(A)}getRawValue(){return this._reduceChildren({},(N,A,K)=>(N[K]=A.getRawValue(),N))}_syncPendingControls(){let N=this._reduceChildren(!1,(A,K)=>!!K._syncPendingControls()||A);return N&&this.updateValueAndValidity({onlySelf:!0}),N}_forEachChild(N){Object.keys(this.controls).forEach(A=>{const K=this.controls[A];K&&N(K,A)})}_setUpControls(){this._forEachChild(N=>{N.setParent(this),N._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(N){for(const[A,K]of Object.entries(this.controls))if(this.contains(A)&&N(K))return!0;return!1}_reduceValue(){return this._reduceChildren({},(A,K,et)=>((K.enabled||this.disabled)&&(A[et]=K.value),A))}_reduceChildren(N,A){let K=N;return this._forEachChild((et,nn)=>{K=A(K,et,nn)}),K}_allControlsDisabled(){for(const N of Object.keys(this.controls))if(this.controls[N].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(N){return this.controls.hasOwnProperty(N)?this.controls[N]:null}}function dn(F,N){An(F,N),N.valueAccessor.writeValue(F.value),F.disabled&&N.valueAccessor.setDisabledState?.(!0),function hs(F,N){N.valueAccessor.registerOnChange(A=>{F._pendingValue=A,F._pendingChange=!0,F._pendingDirty=!0,"change"===F.updateOn&&Fr(F,N)})}(F,N),function ks(F,N){const A=(K,et)=>{N.valueAccessor.writeValue(K),et&&N.viewToModelUpdate(K)};F.registerOnChange(A),N._registerOnDestroy(()=>{F._unregisterOnChange(A)})}(F,N),function Fi(F,N){N.valueAccessor.registerOnTouched(()=>{F._pendingTouched=!0,"blur"===F.updateOn&&F._pendingChange&&Fr(F,N),"submit"!==F.updateOn&&F.markAsTouched()})}(F,N),function yn(F,N){if(N.valueAccessor.setDisabledState){const A=K=>{N.valueAccessor.setDisabledState(K)};F.registerOnDisabledChange(A),N._registerOnDestroy(()=>{F._unregisterOnDisabledChange(A)})}}(F,N)}function Hr(F,N){F.forEach(A=>{A.registerOnValidatorChange&&A.registerOnValidatorChange(N)})}function An(F,N){const A=function Ar(F){return F._rawValidators}(F);null!==N.validator?F.setValidators(ur(A,N.validator)):"function"==typeof A&&F.setValidators([A]);const K=function Jt(F){return F._rawAsyncValidators}(F);null!==N.asyncValidator?F.setAsyncValidators(ur(K,N.asyncValidator)):"function"==typeof K&&F.setAsyncValidators([K]);const et=()=>F.updateValueAndValidity();Hr(N._rawValidators,et),Hr(N._rawAsyncValidators,et)}function Fr(F,N){F._pendingDirty&&F.markAsDirty(),F.setValue(F._pendingValue,{emitModelToViewChange:!1}),N.viewToModelUpdate(F._pendingValue),F._pendingChange=!1}const sr={provide:Cn,useExisting:(0,p.Gpc)(()=>Cr)},Vi=(()=>Promise.resolve(null))();let Cr=(()=>{class F extends Cn{constructor(A,K){super(),this.submitted=!1,this._directives=new Set,this.ngSubmit=new p.vpe,this.form=new ue({},Ei(A),mr(K))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(A){Vi.then(()=>{const K=this._findContainer(A.path);A.control=K.registerControl(A.name,A.control),dn(A.control,A),A.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(A)})}getControl(A){return this.form.get(A.path)}removeControl(A){Vi.then(()=>{const K=this._findContainer(A.path);K&&K.removeControl(A.name),this._directives.delete(A)})}addFormGroup(A){Vi.then(()=>{const K=this._findContainer(A.path),et=new ue({});(function ss(F,N){An(F,N)})(et,A),K.registerControl(A.name,et),et.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(A){Vi.then(()=>{const K=this._findContainer(A.path);K&&K.removeControl(A.name)})}getFormGroup(A){return this.form.get(A.path)}updateModel(A,K){Vi.then(()=>{this.form.get(A.path).setValue(K)})}setValue(A){this.control.setValue(A)}onSubmit(A){return this.submitted=!0,function Ms(F,N){F._syncPendingControls(),N.forEach(A=>{const K=A.control;"submit"===K.updateOn&&K._pendingChange&&(A.viewToModelUpdate(K._pendingValue),K._pendingChange=!1)})}(this.form,this._directives),this.ngSubmit.emit(A),!1}onReset(){this.resetForm()}resetForm(A){this.form.reset(A),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(A){return A.pop(),A.length?this.form.get(A):this.form}}return F.\u0275fac=function(A){return new(A||F)(p.Y36(nt,10),p.Y36(ae,10))},F.\u0275dir=p.lG2({type:F,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(A,K){1&A&&p.NdJ("submit",function(nn){return K.onSubmit(nn)})("reset",function(){return K.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[p._Bn([sr]),p.qOj]}),F})();function ci(F,N){const A=F.indexOf(N);A>-1&&F.splice(A,1)}function Fs(F){return"object"==typeof F&&null!==F&&2===Object.keys(F).length&&"value"in F&&"disabled"in F}const Rs=class extends _e{constructor(N=null,A,K){super(_n(A),cr(K,A)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(N),this._setUpdateStrategy(A),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Qr(A)&&(A.nonNullable||A.initialValueIsDefault)&&(this.defaultValue=Fs(N)?N.value:N)}setValue(N,A={}){this.value=this._pendingValue=N,this._onChange.length&&!1!==A.emitModelToViewChange&&this._onChange.forEach(K=>K(this.value,!1!==A.emitViewToModelChange)),this.updateValueAndValidity(A)}patchValue(N,A={}){this.setValue(N,A)}reset(N=this.defaultValue,A={}){this._applyFormState(N),this.markAsPristine(A),this.markAsUntouched(A),this.setValue(this.value,A),this._pendingChange=!1}_updateValue(){}_anyControls(N){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(N){this._onChange.push(N)}_unregisterOnChange(N){ci(this._onChange,N)}registerOnDisabledChange(N){this._onDisabledChange.push(N)}_unregisterOnDisabledChange(N){ci(this._onDisabledChange,N)}_forEachChild(N){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(N){Fs(N)?(this.value=this._pendingValue=N.value,N.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=N}},Ae={provide:Hn,useExisting:(0,p.Gpc)(()=>ct)},Ue=(()=>Promise.resolve(null))();let ct=(()=>{class F extends Hn{constructor(A,K,et,nn,dr){super(),this._changeDetectorRef=dr,this.control=new Rs,this._registered=!1,this.update=new p.vpe,this._parent=A,this._setValidators(K),this._setAsyncValidators(et),this.valueAccessor=function Ai(F,N){if(!N)return null;let A,K,et;return Array.isArray(N),N.forEach(nn=>{nn.constructor===he?A=nn:function Si(F){return Object.getPrototypeOf(F.constructor)===ot}(nn)?K=nn:et=nn}),et||K||A||null}(0,nn)}ngOnChanges(A){if(this._checkForErrors(),!this._registered||"name"in A){if(this._registered&&(this._checkName(),this.formDirective)){const K=A.name.previousValue;this.formDirective.removeControl({name:K,path:this._getPath(K)})}this._setUpControl()}"isDisabled"in A&&this._updateDisabled(A),function fs(F,N){if(!F.hasOwnProperty("model"))return!1;const A=F.model;return!!A.isFirstChange()||!Object.is(N,A.currentValue)}(A,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(A){this.viewModel=A,this.update.emit(A)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){dn(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(A){Ue.then(()=>{this.control.setValue(A,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(A){const K=A.isDisabled.currentValue,et=0!==K&&(0,p.D6c)(K);Ue.then(()=>{et&&!this.control.disabled?this.control.disable():!et&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(A){return this._parent?function mn(F,N){return[...N.path,F]}(A,this._parent):[A]}}return F.\u0275fac=function(A){return new(A||F)(p.Y36(Cn,9),p.Y36(nt,10),p.Y36(ae,10),p.Y36(Ke,10),p.Y36(p.sBO,8))},F.\u0275dir=p.lG2({type:F,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[p._Bn([Ae]),p.qOj,p.TTD]}),F})(),Dt=(()=>{class F{}return F.\u0275fac=function(A){return new(A||F)},F.\u0275dir=p.lG2({type:F,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),F})(),Oi=(()=>{class F{}return F.\u0275fac=function(A){return new(A||F)},F.\u0275mod=p.oAB({type:F}),F.\u0275inj=p.cJS({}),F})(),Rn=(()=>{class F{}return F.\u0275fac=function(A){return new(A||F)},F.\u0275mod=p.oAB({type:F}),F.\u0275inj=p.cJS({imports:[Oi]}),F})(),Us=(()=>{class F{}return F.\u0275fac=function(A){return new(A||F)},F.\u0275mod=p.oAB({type:F}),F.\u0275inj=p.cJS({imports:[Rn]}),F})()},1481:(Gt,qe,U)=>{U.d(qe,{Dx:()=>$e,b2:()=>Cn,q6:()=>$n});var p=U(6895),C=U(4650);class G extends p.w_{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class be extends G{static makeCurrent(){(0,p.HT)(new be)}onAndCancel(ue,re,Ve){return ue.addEventListener(re,Ve,!1),()=>{ue.removeEventListener(re,Ve,!1)}}dispatchEvent(ue,re){ue.dispatchEvent(re)}remove(ue){ue.parentNode&&ue.parentNode.removeChild(ue)}createElement(ue,re){return(re=re||this.getDefaultDocument()).createElement(ue)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(ue){return ue.nodeType===Node.ELEMENT_NODE}isShadowRoot(ue){return ue instanceof DocumentFragment}getGlobalEventTarget(ue,re){return"window"===re?window:"document"===re?ue:"body"===re?ue.body:null}getBaseHref(ue){const re=function Me(){return we=we||document.querySelector("base"),we?we.getAttribute("href"):null}();return null==re?null:function Oe(_e){Re=Re||document.createElement("a"),Re.setAttribute("href",_e);const ue=Re.pathname;return"/"===ue.charAt(0)?ue:`/${ue}`}(re)}resetBaseElement(){we=null}getUserAgent(){return window.navigator.userAgent}getCookie(ue){return(0,p.Mx)(document.cookie,ue)}}let Re,we=null;const Fe=new C.OlP("TRANSITION_ID"),le=[{provide:C.ip1,useFactory:function ce(_e,ue,re){return()=>{re.get(C.CZH).donePromise.then(()=>{const Ve=(0,p.q)(),at=ue.querySelectorAll(`style[ng-transition="${_e}"]`);for(let Vt=0;Vt<at.length;Vt++)Ve.remove(at[Vt])})}},deps:[Fe,p.K0,C.zs3],multi:!0}];let mt=(()=>{class _e{build(){return new XMLHttpRequest}}return _e.\u0275fac=function(re){return new(re||_e)},_e.\u0275prov=C.Yz7({token:_e,factory:_e.\u0275fac}),_e})();const ot=new C.OlP("EventManagerPlugins");let Ke=(()=>{class _e{constructor(re,Ve){this._zone=Ve,this._eventNameToPlugin=new Map,re.forEach(at=>at.manager=this),this._plugins=re.slice().reverse()}addEventListener(re,Ve,at){return this._findPluginFor(Ve).addEventListener(re,Ve,at)}addGlobalEventListener(re,Ve,at){return this._findPluginFor(Ve).addGlobalEventListener(re,Ve,at)}getZone(){return this._zone}_findPluginFor(re){const Ve=this._eventNameToPlugin.get(re);if(Ve)return Ve;const at=this._plugins;for(let Vt=0;Vt<at.length;Vt++){const mn=at[Vt];if(mn.supports(re))return this._eventNameToPlugin.set(re,mn),mn}throw new Error(`No event manager plugin found for event ${re}`)}}return _e.\u0275fac=function(re){return new(re||_e)(C.LFG(ot),C.LFG(C.R0b))},_e.\u0275prov=C.Yz7({token:_e,factory:_e.\u0275fac}),_e})();class Nt{constructor(ue){this._doc=ue}addGlobalEventListener(ue,re,Ve){const at=(0,p.q)().getGlobalEventTarget(this._doc,ue);if(!at)throw new Error(`Unsupported event target ${at} for event ${re}`);return this.addEventListener(at,re,Ve)}}let Ye=(()=>{class _e{constructor(){this._stylesSet=new Set}addStyles(re){const Ve=new Set;re.forEach(at=>{this._stylesSet.has(at)||(this._stylesSet.add(at),Ve.add(at))}),this.onStylesAdded(Ve)}onStylesAdded(re){}getAllStyles(){return Array.from(this._stylesSet)}}return _e.\u0275fac=function(re){return new(re||_e)},_e.\u0275prov=C.Yz7({token:_e,factory:_e.\u0275fac}),_e})(),He=(()=>{class _e extends Ye{constructor(re){super(),this._doc=re,this._hostNodes=new Map,this._hostNodes.set(re.head,[])}_addStylesToHost(re,Ve,at){re.forEach(Vt=>{const mn=this._doc.createElement("style");mn.textContent=Vt,at.push(Ve.appendChild(mn))})}addHost(re){const Ve=[];this._addStylesToHost(this._stylesSet,re,Ve),this._hostNodes.set(re,Ve)}removeHost(re){const Ve=this._hostNodes.get(re);Ve&&Ve.forEach(Ut),this._hostNodes.delete(re)}onStylesAdded(re){this._hostNodes.forEach((Ve,at)=>{this._addStylesToHost(re,at,Ve)})}ngOnDestroy(){this._hostNodes.forEach(re=>re.forEach(Ut))}}return _e.\u0275fac=function(re){return new(re||_e)(C.LFG(p.K0))},_e.\u0275prov=C.Yz7({token:_e,factory:_e.\u0275fac}),_e})();function Ut(_e){(0,p.q)().remove(_e)}const Bt={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},he=/%COMP%/g;function ne(_e,ue,re){for(let Ve=0;Ve<ue.length;Ve++){let at=ue[Ve];Array.isArray(at)?ne(_e,at,re):(at=at.replace(he,_e),re.push(at))}return re}function De(_e){return ue=>{if("__ngUnwrap__"===ue)return _e;!1===_e(ue)&&(ue.preventDefault(),ue.returnValue=!1)}}let Ne=(()=>{class _e{constructor(re,Ve,at){this.eventManager=re,this.sharedStylesHost=Ve,this.appId=at,this.rendererByCompId=new Map,this.defaultRenderer=new dt(re)}createRenderer(re,Ve){if(!re||!Ve)return this.defaultRenderer;switch(Ve.encapsulation){case C.ifc.Emulated:{let at=this.rendererByCompId.get(Ve.id);return at||(at=new $t(this.eventManager,this.sharedStylesHost,Ve,this.appId),this.rendererByCompId.set(Ve.id,at)),at.applyToHost(re),at}case 1:case C.ifc.ShadowDom:return new ft(this.eventManager,this.sharedStylesHost,re,Ve);default:if(!this.rendererByCompId.has(Ve.id)){const at=ne(Ve.id,Ve.styles,[]);this.sharedStylesHost.addStyles(at),this.rendererByCompId.set(Ve.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return _e.\u0275fac=function(re){return new(re||_e)(C.LFG(Ke),C.LFG(He),C.LFG(C.AFp))},_e.\u0275prov=C.Yz7({token:_e,factory:_e.\u0275fac}),_e})();class dt{constructor(ue){this.eventManager=ue,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(ue,re){return re?document.createElementNS(Bt[re]||re,ue):document.createElement(ue)}createComment(ue){return document.createComment(ue)}createText(ue){return document.createTextNode(ue)}appendChild(ue,re){(Mt(ue)?ue.content:ue).appendChild(re)}insertBefore(ue,re,Ve){ue&&(Mt(ue)?ue.content:ue).insertBefore(re,Ve)}removeChild(ue,re){ue&&ue.removeChild(re)}selectRootElement(ue,re){let Ve="string"==typeof ue?document.querySelector(ue):ue;if(!Ve)throw new Error(`The selector "${ue}" did not match any elements`);return re||(Ve.textContent=""),Ve}parentNode(ue){return ue.parentNode}nextSibling(ue){return ue.nextSibling}setAttribute(ue,re,Ve,at){if(at){re=at+":"+re;const Vt=Bt[at];Vt?ue.setAttributeNS(Vt,re,Ve):ue.setAttribute(re,Ve)}else ue.setAttribute(re,Ve)}removeAttribute(ue,re,Ve){if(Ve){const at=Bt[Ve];at?ue.removeAttributeNS(at,re):ue.removeAttribute(`${Ve}:${re}`)}else ue.removeAttribute(re)}addClass(ue,re){ue.classList.add(re)}removeClass(ue,re){ue.classList.remove(re)}setStyle(ue,re,Ve,at){at&(C.JOm.DashCase|C.JOm.Important)?ue.style.setProperty(re,Ve,at&C.JOm.Important?"important":""):ue.style[re]=Ve}removeStyle(ue,re,Ve){Ve&C.JOm.DashCase?ue.style.removeProperty(re):ue.style[re]=""}setProperty(ue,re,Ve){ue[re]=Ve}setValue(ue,re){ue.nodeValue=re}listen(ue,re,Ve){return"string"==typeof ue?this.eventManager.addGlobalEventListener(ue,re,De(Ve)):this.eventManager.addEventListener(ue,re,De(Ve))}}function Mt(_e){return"TEMPLATE"===_e.tagName&&void 0!==_e.content}class $t extends dt{constructor(ue,re,Ve,at){super(ue),this.component=Ve;const Vt=ne(at+"-"+Ve.id,Ve.styles,[]);re.addStyles(Vt),this.contentAttr=function ae(_e){return"_ngcontent-%COMP%".replace(he,_e)}(at+"-"+Ve.id),this.hostAttr=function Le(_e){return"_nghost-%COMP%".replace(he,_e)}(at+"-"+Ve.id)}applyToHost(ue){super.setAttribute(ue,this.hostAttr,"")}createElement(ue,re){const Ve=super.createElement(ue,re);return super.setAttribute(Ve,this.contentAttr,""),Ve}}class ft extends dt{constructor(ue,re,Ve,at){super(ue),this.sharedStylesHost=re,this.hostEl=Ve,this.shadowRoot=Ve.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const Vt=ne(at.id,at.styles,[]);for(let mn=0;mn<Vt.length;mn++){const dn=document.createElement("style");dn.textContent=Vt[mn],this.shadowRoot.appendChild(dn)}}nodeOrShadowRoot(ue){return ue===this.hostEl?this.shadowRoot:ue}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(ue,re){return super.appendChild(this.nodeOrShadowRoot(ue),re)}insertBefore(ue,re,Ve){return super.insertBefore(this.nodeOrShadowRoot(ue),re,Ve)}removeChild(ue,re){return super.removeChild(this.nodeOrShadowRoot(ue),re)}parentNode(ue){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(ue)))}}let tn=(()=>{class _e extends Nt{constructor(re){super(re)}supports(re){return!0}addEventListener(re,Ve,at){return re.addEventListener(Ve,at,!1),()=>this.removeEventListener(re,Ve,at)}removeEventListener(re,Ve,at){return re.removeEventListener(Ve,at)}}return _e.\u0275fac=function(re){return new(re||_e)(C.LFG(p.K0))},_e.\u0275prov=C.Yz7({token:_e,factory:_e.\u0275fac}),_e})();const qt=["alt","control","meta","shift"],on={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Ft={alt:_e=>_e.altKey,control:_e=>_e.ctrlKey,meta:_e=>_e.metaKey,shift:_e=>_e.shiftKey};let Mn=(()=>{class _e extends Nt{constructor(re){super(re)}supports(re){return null!=_e.parseEventName(re)}addEventListener(re,Ve,at){const Vt=_e.parseEventName(Ve),mn=_e.eventCallback(Vt.fullKey,at,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,p.q)().onAndCancel(re,Vt.domEventName,mn))}static parseEventName(re){const Ve=re.toLowerCase().split("."),at=Ve.shift();if(0===Ve.length||"keydown"!==at&&"keyup"!==at)return null;const Vt=_e._normalizeKey(Ve.pop());let mn="",dn=Ve.indexOf("code");if(dn>-1&&(Ve.splice(dn,1),mn="code."),qt.forEach(Hr=>{const yn=Ve.indexOf(Hr);yn>-1&&(Ve.splice(yn,1),mn+=Hr+".")}),mn+=Vt,0!=Ve.length||0===Vt.length)return null;const yr={};return yr.domEventName=at,yr.fullKey=mn,yr}static matchEventFullKeyCode(re,Ve){let at=on[re.key]||re.key,Vt="";return Ve.indexOf("code.")>-1&&(at=re.code,Vt="code."),!(null==at||!at)&&(at=at.toLowerCase()," "===at?at="space":"."===at&&(at="dot"),qt.forEach(mn=>{mn!==at&&(0,Ft[mn])(re)&&(Vt+=mn+".")}),Vt+=at,Vt===Ve)}static eventCallback(re,Ve,at){return Vt=>{_e.matchEventFullKeyCode(Vt,re)&&at.runGuarded(()=>Ve(Vt))}}static _normalizeKey(re){return"esc"===re?"escape":re}}return _e.\u0275fac=function(re){return new(re||_e)(C.LFG(p.K0))},_e.\u0275prov=C.Yz7({token:_e,factory:_e.\u0275fac}),_e})();const $n=(0,C.eFA)(C._c5,"browser",[{provide:C.Lbi,useValue:p.bD},{provide:C.g9A,useValue:function ur(){be.makeCurrent()},multi:!0},{provide:p.K0,useFactory:function Jt(){return(0,C.RDi)(document),document},deps:[]}]),lr=new C.OlP(""),pt=[{provide:C.rWj,useClass:class Ce{addToWindow(ue){C.dqk.getAngularTestability=(Ve,at=!0)=>{const Vt=ue.findTestabilityInTree(Ve,at);if(null==Vt)throw new Error("Could not find testability for element.");return Vt},C.dqk.getAllAngularTestabilities=()=>ue.getAllTestabilities(),C.dqk.getAllAngularRootElements=()=>ue.getAllRootElements(),C.dqk.frameworkStabilizers||(C.dqk.frameworkStabilizers=[]),C.dqk.frameworkStabilizers.push(Ve=>{const at=C.dqk.getAllAngularTestabilities();let Vt=at.length,mn=!1;const dn=function(yr){mn=mn||yr,Vt--,0==Vt&&Ve(mn)};at.forEach(function(yr){yr.whenStable(dn)})})}findTestabilityInTree(ue,re,Ve){return null==re?null:ue.getTestability(re)??(Ve?(0,p.q)().isShadowRoot(re)?this.findTestabilityInTree(ue,re.host,!0):this.findTestabilityInTree(ue,re.parentElement,!0):null)}},deps:[]},{provide:C.lri,useClass:C.dDg,deps:[C.R0b,C.eoX,C.rWj]},{provide:C.dDg,useClass:C.dDg,deps:[C.R0b,C.eoX,C.rWj]}],Bn=[{provide:C.zSh,useValue:"root"},{provide:C.qLn,useFactory:function Ar(){return new C.qLn},deps:[]},{provide:ot,useClass:tn,multi:!0,deps:[p.K0,C.R0b,C.Lbi]},{provide:ot,useClass:Mn,multi:!0,deps:[p.K0]},{provide:Ne,useClass:Ne,deps:[Ke,He,C.AFp]},{provide:C.FYo,useExisting:Ne},{provide:Ye,useExisting:He},{provide:He,useClass:He,deps:[p.K0]},{provide:Ke,useClass:Ke,deps:[ot,C.R0b]},{provide:p.JF,useClass:mt,deps:[]},[]];let Cn=(()=>{class _e{constructor(re){}static withServerTransition(re){return{ngModule:_e,providers:[{provide:C.AFp,useValue:re.appId},{provide:Fe,useExisting:C.AFp},le]}}}return _e.\u0275fac=function(re){return new(re||_e)(C.LFG(lr,12))},_e.\u0275mod=C.oAB({type:_e}),_e.\u0275inj=C.cJS({providers:[...Bn,...pt],imports:[p.ez,C.hGG]}),_e})(),$e=(()=>{class _e{constructor(re){this._doc=re}getTitle(){return this._doc.title}setTitle(re){this._doc.title=re||""}}return _e.\u0275fac=function(re){return new(re||_e)(C.LFG(p.K0))},_e.\u0275prov=C.Yz7({token:_e,factory:function(re){let Ve=null;return Ve=re?new re:function xr(){return new $e((0,C.LFG)(p.K0))}(),Ve},providedIn:"root"}),_e})();typeof window<"u"&&window},7001:(Gt,qe,U)=>{U.d(qe,{F0:()=>Wi,yS:()=>Pa,Bz:()=>na,lC:()=>Pi});var p=U(4650),C=U(8996),G=U(9646),be=U(7579);class we extends be.x{constructor(w){super(),this._value=w}get value(){return this.getValue()}_subscribe(w){const _=super._subscribe(w);return!_.closed&&w.next(this._value),_}getValue(){const{hasError:w,thrownError:_,_value:b}=this;if(w)throw _;return this._throwIfClosed(),b}next(w){super.next(this._value=w)}}var Me=U(6805),Re=U(9751),Oe=U(4742),Fe=U(4671),ce=U(3268),le=U(7669),Ce=U(1810),mt=U(5403),ot=U(9672);function Ke(...v){const w=(0,le.yG)(v),_=(0,le.jO)(v),{args:b,keys:P}=(0,Oe.D)(v);if(0===b.length)return(0,C.D)([],w);const z=new Re.y(function Nt(v,w,_=Fe.y){return b=>{Ye(w,()=>{const{length:P}=v,z=new Array(P);let te=P,pe=P;for(let tt=0;tt<P;tt++)Ye(w,()=>{const Ot=(0,C.D)(v[tt],w);let rn=!1;Ot.subscribe((0,mt.x)(b,Wt=>{z[tt]=Wt,rn||(rn=!0,pe--),pe||b.next(_(z.slice()))},()=>{--te||b.complete()}))},b)},b)}}(b,w,P?te=>(0,Ce.n)(P,te):Fe.y));return _?z.pipe((0,ce.Z)(_)):z}function Ye(v,w,_){v?(0,ot.f)(_,v,w):w()}var He=U(7272),Ut=U(8421);function Bt(v){return new Re.y(w=>{(0,Ut.Xf)(v()).subscribe(w)})}var he=U(9635),it=U(576);function Xe(v,w){const _=(0,it.m)(v)?v:()=>v,b=P=>P.error(_());return new Re.y(w?P=>w.schedule(b,0,P):b)}var _t=U(515),nt=U(727),ae=U(4482);function Le(){return(0,ae.e)((v,w)=>{let _=null;v._refCount++;const b=(0,mt.x)(w,void 0,void 0,void 0,()=>{if(!v||v._refCount<=0||0<--v._refCount)return void(_=null);const P=v._connection,z=_;_=null,P&&(!z||P===z)&&P.unsubscribe(),w.unsubscribe()});v.subscribe(b),b.closed||(_=v.connect())})}class ne extends Re.y{constructor(w,_){super(),this.source=w,this.subjectFactory=_,this._subject=null,this._refCount=0,this._connection=null,(0,ae.A)(w)&&(this.lift=w.lift)}_subscribe(w){return this.getSubject().subscribe(w)}getSubject(){const w=this._subject;return(!w||w.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:w}=this;this._subject=this._connection=null,w?.unsubscribe()}connect(){let w=this._connection;if(!w){w=this._connection=new nt.w0;const _=this.getSubject();w.add(this.source.subscribe((0,mt.x)(_,void 0,()=>{this._teardown(),_.complete()},b=>{this._teardown(),_.error(b)},()=>this._teardown()))),w.closed&&(this._connection=null,w=nt.w0.EMPTY)}return w}refCount(){return Le()(this)}}var De=U(6895),de=U(4004),Ne=U(3900),dt=U(5698),wt=U(8675),bt=U(9300),Mt=U(5577),$t=U(590),ft=U(4351),tn=U(8505);function qt(v){return(0,ae.e)((w,_)=>{let z,b=null,P=!1;b=w.subscribe((0,mt.x)(_,void 0,void 0,te=>{z=(0,Ut.Xf)(v(te,qt(v)(w))),b?(b.unsubscribe(),b=null,z.subscribe(_)):P=!0})),P&&(b.unsubscribe(),b=null,z.subscribe(_))})}var on=U(5026);function Ft(v){return v<=0?()=>_t.E:(0,ae.e)((w,_)=>{let b=[];w.subscribe((0,mt.x)(_,P=>{b.push(P),v<b.length&&b.shift()},()=>{for(const P of b)_.next(P);_.complete()},void 0,()=>{b=null}))})}var Mn=U(8068),an=U(6590);function Fn(v,w){const _=arguments.length>=2;return b=>b.pipe(v?(0,bt.h)((P,z)=>v(P,z,b)):Fe.y,Ft(1),_?(0,an.d)(w):(0,Mn.T)(()=>new Me.K))}function mr(v){return(0,ae.e)((w,_)=>{try{w.subscribe(_)}finally{_.add(v)}})}var ur=U(8189),Ar=U(1481);const Jt="primary",nr=Symbol("RouteTitle");class $n{constructor(w){this.params=w||{}}has(w){return Object.prototype.hasOwnProperty.call(this.params,w)}get(w){if(this.has(w)){const _=this.params[w];return Array.isArray(_)?_[0]:_}return null}getAll(w){if(this.has(w)){const _=this.params[w];return Array.isArray(_)?_:[_]}return[]}get keys(){return Object.keys(this.params)}}function lr(v){return new $n(v)}function pt(v,w,_){const b=_.path.split("/");if(b.length>v.length||"full"===_.pathMatch&&(w.hasChildren()||b.length<v.length))return null;const P={};for(let z=0;z<b.length;z++){const te=b[z],pe=v[z];if(te.startsWith(":"))P[te.substring(1)]=pe;else if(te!==pe.path)return null}return{consumed:v.slice(0,b.length),posParams:P}}function Cn(v,w){const _=v?Object.keys(v):void 0,b=w?Object.keys(w):void 0;if(!_||!b||_.length!=b.length)return!1;let P;for(let z=0;z<_.length;z++)if(P=_[z],!Hn(v[P],w[P]))return!1;return!0}function Hn(v,w){if(Array.isArray(v)&&Array.isArray(w)){if(v.length!==w.length)return!1;const _=[...v].sort(),b=[...w].sort();return _.every((P,z)=>b[z]===P)}return v===w}function kr(v){return Array.prototype.concat.apply([],v)}function Ir(v){return v.length>0?v[v.length-1]:null}function $e(v,w){for(const _ in v)v.hasOwnProperty(_)&&w(v[_],_)}function ye(v){return(0,p.CqO)(v)?v:(0,p.QGY)(v)?(0,C.D)(Promise.resolve(v)):(0,G.of)(v)}const We={exact:function At(v,w,_){if(!me(v.segments,w.segments)||!pn(v.segments,w.segments,_)||v.numberOfChildren!==w.numberOfChildren)return!1;for(const b in w.children)if(!v.children[b]||!At(v.children[b],w.children[b],_))return!1;return!0},subset:Sn},Lt={exact:function jn(v,w){return Cn(v,w)},subset:function rr(v,w){return Object.keys(w).length<=Object.keys(v).length&&Object.keys(w).every(_=>Hn(v[_],w[_]))},ignored:()=>!0};function un(v,w,_){return We[_.paths](v.root,w.root,_.matrixParams)&&Lt[_.queryParams](v.queryParams,w.queryParams)&&!("exact"===_.fragment&&v.fragment!==w.fragment)}function Sn(v,w,_){return Mr(v,w,w.segments,_)}function Mr(v,w,_,b){if(v.segments.length>_.length){const P=v.segments.slice(0,_.length);return!(!me(P,_)||w.hasChildren()||!pn(P,_,b))}if(v.segments.length===_.length){if(!me(v.segments,_)||!pn(v.segments,_,b))return!1;for(const P in w.children)if(!v.children[P]||!Sn(v.children[P],w.children[P],b))return!1;return!0}{const P=_.slice(0,v.segments.length),z=_.slice(v.segments.length);return!!(me(v.segments,P)&&pn(v.segments,P,b)&&v.children[Jt])&&Mr(v.children[Jt],w,z,b)}}function pn(v,w,_){return w.every((b,P)=>Lt[_](v[P].parameters,b.parameters))}class ge{constructor(w,_,b){this.root=w,this.queryParams=_,this.fragment=b}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=lr(this.queryParams)),this._queryParamMap}toString(){return ir.serialize(this)}}class X{constructor(w,_){this.segments=w,this.children=_,this.parent=null,$e(_,(b,P)=>b.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Tn(this)}}class oe{constructor(w,_){this.path=w,this.parameters=_}get parameterMap(){return this._parameterMap||(this._parameterMap=lr(this.parameters)),this._parameterMap}toString(){return Dr(this)}}function me(v,w){return v.length===w.length&&v.every((_,b)=>_.path===w[b].path)}let yt=(()=>{class v{}return v.\u0275fac=function(_){return new(_||v)},v.\u0275prov=p.Yz7({token:v,factory:function(){return new Rt},providedIn:"root"}),v})();class Rt{parse(w){const _=new yr(w);return new ge(_.parseRootSegment(),_.parseQueryParams(),_.parseFragment())}serialize(w){const _=`/${er(w.root,!0)}`,b=function ue(v){const w=Object.keys(v).map(_=>{const b=v[_];return Array.isArray(b)?b.map(P=>`${Xt(_)}=${Xt(P)}`).join("&"):`${Xt(_)}=${Xt(b)}`}).filter(_=>!!_);return w.length?`?${w.join("&")}`:""}(w.queryParams);return`${_}${b}${"string"==typeof w.fragment?`#${function cr(v){return encodeURI(v)}(w.fragment)}`:""}`}}const ir=new Rt;function Tn(v){return v.segments.map(w=>Dr(w)).join("/")}function er(v,w){if(!v.hasChildren())return Tn(v);if(w){const _=v.children[Jt]?er(v.children[Jt],!1):"",b=[];return $e(v.children,(P,z)=>{z!==Jt&&b.push(`${z}:${er(P,!1)}`)}),b.length>0?`${_}(${b.join("//")})`:_}{const _=function ut(v,w){let _=[];return $e(v.children,(b,P)=>{P===Jt&&(_=_.concat(w(b,P)))}),$e(v.children,(b,P)=>{P!==Jt&&(_=_.concat(w(b,P)))}),_}(v,(b,P)=>P===Jt?[er(v.children[Jt],!1)]:[`${P}:${er(b,!1)}`]);return 1===Object.keys(v.children).length&&null!=v.children[Jt]?`${Tn(v)}/${_[0]}`:`${Tn(v)}/(${_.join("//")})`}}function _n(v){return encodeURIComponent(v).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Xt(v){return _n(v).replace(/%3B/gi,";")}function vr(v){return _n(v).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Qr(v){return decodeURIComponent(v)}function $r(v){return Qr(v.replace(/\+/g,"%20"))}function Dr(v){return`${vr(v.path)}${function _e(v){return Object.keys(v).map(w=>`;${vr(w)}=${vr(v[w])}`).join("")}(v.parameters)}`}const re=/^[^\/()?;=#]+/;function Ve(v){const w=v.match(re);return w?w[0]:""}const at=/^[^=?&#]+/,mn=/^[^&#]+/;class yr{constructor(w){this.url=w,this.remaining=w}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new X([],{}):new X([],this.parseChildren())}parseQueryParams(){const w={};if(this.consumeOptional("?"))do{this.parseQueryParam(w)}while(this.consumeOptional("&"));return w}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const w=[];for(this.peekStartsWith("(")||w.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),w.push(this.parseSegment());let _={};this.peekStartsWith("/(")&&(this.capture("/"),_=this.parseParens(!0));let b={};return this.peekStartsWith("(")&&(b=this.parseParens(!1)),(w.length>0||Object.keys(_).length>0)&&(b[Jt]=new X(w,_)),b}parseSegment(){const w=Ve(this.remaining);if(""===w&&this.peekStartsWith(";"))throw new p.vHH(4009,!1);return this.capture(w),new oe(Qr(w),this.parseMatrixParams())}parseMatrixParams(){const w={};for(;this.consumeOptional(";");)this.parseParam(w);return w}parseParam(w){const _=Ve(this.remaining);if(!_)return;this.capture(_);let b="";if(this.consumeOptional("=")){const P=Ve(this.remaining);P&&(b=P,this.capture(b))}w[Qr(_)]=Qr(b)}parseQueryParam(w){const _=function Vt(v){const w=v.match(at);return w?w[0]:""}(this.remaining);if(!_)return;this.capture(_);let b="";if(this.consumeOptional("=")){const te=function dn(v){const w=v.match(mn);return w?w[0]:""}(this.remaining);te&&(b=te,this.capture(b))}const P=$r(_),z=$r(b);if(w.hasOwnProperty(P)){let te=w[P];Array.isArray(te)||(te=[te],w[P]=te),te.push(z)}else w[P]=z}parseParens(w){const _={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const b=Ve(this.remaining),P=this.remaining[b.length];if("/"!==P&&")"!==P&&";"!==P)throw new p.vHH(4010,!1);let z;b.indexOf(":")>-1?(z=b.slice(0,b.indexOf(":")),this.capture(z),this.capture(":")):w&&(z=Jt);const te=this.parseChildren();_[z]=1===Object.keys(te).length?te[Jt]:new X([],te),this.consumeOptional("//")}return _}peekStartsWith(w){return this.remaining.startsWith(w)}consumeOptional(w){return!!this.peekStartsWith(w)&&(this.remaining=this.remaining.substring(w.length),!0)}capture(w){if(!this.consumeOptional(w))throw new p.vHH(4011,!1)}}function Hr(v){return v.segments.length>0?new X([],{[Jt]:v}):v}function yn(v){const w={};for(const b of Object.keys(v.children)){const z=yn(v.children[b]);(z.segments.length>0||z.hasChildren())&&(w[b]=z)}return function An(v){if(1===v.numberOfChildren&&v.children[Jt]){const w=v.children[Jt];return new X(v.segments.concat(w.segments),w.children)}return v}(new X(v.segments,w))}function Kn(v){return v instanceof ge}function ss(v,w,_,b,P){if(0===_.length)return Ii(w.root,w.root,w.root,b,P);const z=function fs(v){if("string"==typeof v[0]&&1===v.length&&"/"===v[0])return new lo(!0,0,v);let w=0,_=!1;const b=v.reduce((P,z,te)=>{if("object"==typeof z&&null!=z){if(z.outlets){const pe={};return $e(z.outlets,(tt,Ot)=>{pe[Ot]="string"==typeof tt?tt.split("/"):tt}),[...P,{outlets:pe}]}if(z.segmentPath)return[...P,z.segmentPath]}return"string"!=typeof z?[...P,z]:0===te?(z.split("/").forEach((pe,tt)=>{0==tt&&"."===pe||(0==tt&&""===pe?_=!0:".."===pe?w++:""!=pe&&P.push(pe))}),P):[...P,z]},[]);return new lo(_,w,b)}(_);return z.toRoot()?Ii(w.root,w.root,new X([],{}),b,P):function te(tt){const Ot=function Ai(v,w,_,b){if(v.isAbsolute)return new Si(w.root,!0,0);if(-1===b)return new Si(_,_===w.root,0);return function Li(v,w,_){let b=v,P=w,z=_;for(;z>P;){if(z-=P,b=b.parent,!b)throw new p.vHH(4005,!1);P=b.segments.length}return new Si(b,!1,P-z)}(_,b+(Jr(v.commands[0])?0:1),v.numberOfDoubleDots)}(z,w,v.snapshot?._urlSegment,tt),rn=Ot.processChildren?Vi(Ot.segmentGroup,Ot.index,z.commands):sr(Ot.segmentGroup,Ot.index,z.commands);return Ii(w.root,Ot.segmentGroup,rn,b,P)}(v.snapshot?._lastPathIndex)}function Jr(v){return"object"==typeof v&&null!=v&&!v.outlets&&!v.segmentPath}function Yn(v){return"object"==typeof v&&null!=v&&v.outlets}function Ii(v,w,_,b,P){let te,z={};b&&$e(b,(tt,Ot)=>{z[Ot]=Array.isArray(tt)?tt.map(rn=>`${rn}`):`${tt}`}),te=v===w?_:Qn(v,w,_);const pe=Hr(yn(te));return new ge(pe,z,P)}function Qn(v,w,_){const b={};return $e(v.children,(P,z)=>{b[z]=P===w?_:Qn(P,w,_)}),new X(v.segments,b)}class lo{constructor(w,_,b){if(this.isAbsolute=w,this.numberOfDoubleDots=_,this.commands=b,w&&b.length>0&&Jr(b[0]))throw new p.vHH(4003,!1);const P=b.find(Yn);if(P&&P!==Ir(b))throw new p.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Si{constructor(w,_,b){this.segmentGroup=w,this.processChildren=_,this.index=b}}function sr(v,w,_){if(v||(v=new X([],{})),0===v.segments.length&&v.hasChildren())return Vi(v,w,_);const b=function Cr(v,w,_){let b=0,P=w;const z={match:!1,pathIndex:0,commandIndex:0};for(;P<v.segments.length;){if(b>=_.length)return z;const te=v.segments[P],pe=_[b];if(Yn(pe))break;const tt=`${pe}`,Ot=b<_.length-1?_[b+1]:null;if(P>0&&void 0===tt)break;if(tt&&Ot&&"object"==typeof Ot&&void 0===Ot.outlets){if(!Xr(tt,Ot,te))return z;b+=2}else{if(!Xr(tt,{},te))return z;b++}P++}return{match:!0,pathIndex:P,commandIndex:b}}(v,w,_),P=_.slice(b.commandIndex);if(b.match&&b.pathIndex<v.segments.length){const z=new X(v.segments.slice(0,b.pathIndex),{});return z.children[Jt]=new X(v.segments.slice(b.pathIndex),v.children),Vi(z,0,P)}return b.match&&0===P.length?new X(v.segments,{}):b.match&&!v.hasChildren()?ci(v,w,_):b.match?Vi(v,0,P):ci(v,w,_)}function Vi(v,w,_){if(0===_.length)return new X(v.segments,{});{const b=function Yi(v){return Yn(v[0])?v[0].outlets:{[Jt]:v}}(_),P={};return $e(b,(z,te)=>{"string"==typeof z&&(z=[z]),null!==z&&(P[te]=sr(v.children[te],w,z))}),$e(v.children,(z,te)=>{void 0===b[te]&&(P[te]=z)}),new X(v.segments,P)}}function ci(v,w,_){const b=v.segments.slice(0,w);let P=0;for(;P<_.length;){const z=_[P];if(Yn(z)){const tt=Fs(z.outlets);return new X(b,tt)}if(0===P&&Jr(_[0])){b.push(new oe(v.segments[w].path,Rs(_[0]))),P++;continue}const te=Yn(z)?z.outlets[Jt]:`${z}`,pe=P<_.length-1?_[P+1]:null;te&&pe&&Jr(pe)?(b.push(new oe(te,Rs(pe))),P+=2):(b.push(new oe(te,{})),P++)}return new X(b,{})}function Fs(v){const w={};return $e(v,(_,b)=>{"string"==typeof _&&(_=[_]),null!==_&&(w[b]=ci(new X([],{}),0,_))}),w}function Rs(v){const w={};return $e(v,(_,b)=>w[b]=`${_}`),w}function Xr(v,w,_){return v==_.path&&Cn(w,_.parameters)}class wr{constructor(w,_){this.id=w,this.url=_}}class co extends wr{constructor(w,_,b="imperative",P=null){super(w,_),this.type=0,this.navigationTrigger=b,this.restoredState=P}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Di extends wr{constructor(w,_,b){super(w,_),this.urlAfterRedirects=b,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class No extends wr{constructor(w,_,b,P){super(w,_),this.reason=b,this.code=P,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Po extends wr{constructor(w,_,b,P){super(w,_),this.error=b,this.target=P,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Os extends wr{constructor(w,_,b,P){super(w,_),this.urlAfterRedirects=b,this.state=P,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ri extends wr{constructor(w,_,b,P){super(w,_),this.urlAfterRedirects=b,this.state=P,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class xe extends wr{constructor(w,_,b,P,z){super(w,_),this.urlAfterRedirects=b,this.state=P,this.shouldActivate=z,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Ae extends wr{constructor(w,_,b,P){super(w,_),this.urlAfterRedirects=b,this.state=P,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ue extends wr{constructor(w,_,b,P){super(w,_),this.urlAfterRedirects=b,this.state=P,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ct{constructor(w){this.route=w,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Dt{constructor(w){this.route=w,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class jt{constructor(w){this.snapshot=w,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class cn{constructor(w){this.snapshot=w,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ei{constructor(w){this.snapshot=w,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ar{constructor(w){this.snapshot=w,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Oi{constructor(w,_,b){this.routerEvent=w,this.position=_,this.anchor=b,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class gs{constructor(w){this._root=w}get root(){return this._root.value}parent(w){const _=this.pathFromRoot(w);return _.length>1?_[_.length-2]:null}children(w){const _=gi(w,this._root);return _?_.children.map(b=>b.value):[]}firstChild(w){const _=gi(w,this._root);return _&&_.children.length>0?_.children[0].value:null}siblings(w){const _=Ui(w,this._root);return _.length<2?[]:_[_.length-2].children.map(P=>P.value).filter(P=>P!==w)}pathFromRoot(w){return Ui(w,this._root).map(_=>_.value)}}function gi(v,w){if(v===w.value)return w;for(const _ of w.children){const b=gi(v,_);if(b)return b}return null}function Ui(v,w){if(v===w.value)return[w];for(const _ of w.children){const b=Ui(v,_);if(b.length)return b.unshift(w),b}return[]}class Bi{constructor(w,_){this.value=w,this.children=_}toString(){return`TreeNode(${this.value})`}}function ms(v){const w={};return v&&v.children.forEach(_=>w[_.value.outlet]=_),w}class ho extends gs{constructor(w,_){super(w),this.snapshot=_,ko(this,w)}toString(){return this.snapshot.toString()}}function Ni(v,w){const _=function os(v,w){const te=new Ji([],{},{},"",{},Jt,w,null,v.root,-1,{});return new fo("",new Bi(te,[]))}(v,w),b=new we([new oe("",{})]),P=new we({}),z=new we({}),te=new we({}),pe=new we(""),tt=new xi(b,P,te,pe,z,Jt,w,_.root);return tt.snapshot=_.root,new ho(new Bi(tt,[]),_)}class xi{constructor(w,_,b,P,z,te,pe,tt){this.url=w,this.params=_,this.queryParams=b,this.fragment=P,this.data=z,this.outlet=te,this.component=pe,this.title=this.data?.pipe((0,de.U)(Ot=>Ot[nr]))??(0,G.of)(void 0),this._futureSnapshot=tt}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,de.U)(w=>lr(w)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,de.U)(w=>lr(w)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Qi(v,w="emptyOnly"){const _=v.pathFromRoot;let b=0;if("always"!==w)for(b=_.length-1;b>=1;){const P=_[b],z=_[b-1];if(P.routeConfig&&""===P.routeConfig.path)b--;else{if(z.component)break;b--}}return function ys(v){return v.reduce((w,_)=>({params:{...w.params,..._.params},data:{...w.data,..._.data},resolve:{..._.data,...w.resolve,..._.routeConfig?.data,..._._resolvedData}}),{params:{},data:{},resolve:{}})}(_.slice(b))}class Ji{constructor(w,_,b,P,z,te,pe,tt,Ot,rn,Wt,Dn){this.url=w,this.params=_,this.queryParams=b,this.fragment=P,this.data=z,this.outlet=te,this.component=pe,this.title=this.data?.[nr],this.routeConfig=tt,this._urlSegment=Ot,this._lastPathIndex=rn,this._correctedLastPathIndex=Dn??rn,this._resolve=Wt}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=lr(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=lr(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(b=>b.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class fo extends gs{constructor(w,_){super(_),this.url=w,ko(this,_)}toString(){return Ls(this._root)}}function ko(v,w){w.value._routerState=v,w.children.forEach(_=>ko(v,_))}function Ls(v){const w=v.children.length>0?` { ${v.children.map(Ls).join(", ")} } `:"";return`${v.value}${w}`}function _s(v){if(v.snapshot){const w=v.snapshot,_=v._futureSnapshot;v.snapshot=_,Cn(w.queryParams,_.queryParams)||v.queryParams.next(_.queryParams),w.fragment!==_.fragment&&v.fragment.next(_.fragment),Cn(w.params,_.params)||v.params.next(_.params),function Bn(v,w){if(v.length!==w.length)return!1;for(let _=0;_<v.length;++_)if(!Cn(v[_],w[_]))return!1;return!0}(w.url,_.url)||v.url.next(_.url),Cn(w.data,_.data)||v.data.next(_.data)}else v.snapshot=v._futureSnapshot,v.data.next(v._futureSnapshot.data)}function di(v,w){const _=Cn(v.params,w.params)&&function Ee(v,w){return me(v,w)&&v.every((_,b)=>Cn(_.parameters,w[b].parameters))}(v.url,w.url);return _&&!(!v.parent!=!w.parent)&&(!v.parent||di(v.parent,w.parent))}function Ci(v,w,_){if(_&&v.shouldReuseRoute(w.value,_.value.snapshot)){const b=_.value;b._futureSnapshot=w.value;const P=function po(v,w,_){return w.children.map(b=>{for(const P of _.children)if(v.shouldReuseRoute(b.value,P.value.snapshot))return Ci(v,b,P);return Ci(v,b)})}(v,w,_);return new Bi(b,P)}{if(v.shouldAttach(w.value)){const z=v.retrieve(w.value);if(null!==z){const te=z.route;return te.value._futureSnapshot=w.value,te.children=w.children.map(pe=>Ci(v,pe)),te}}const b=function br(v){return new xi(new we(v.url),new we(v.params),new we(v.queryParams),new we(v.fragment),new we(v.data),v.outlet,v.component,v)}(w.value),P=w.children.map(z=>Ci(v,z));return new Bi(b,P)}}const Xs="ngNavigationCancelingError";function la(v,w){const{redirectTo:_,navigationBehaviorOptions:b}=Kn(w)?{redirectTo:w,navigationBehaviorOptions:void 0}:w,P=Lr(!1,0,w);return P.url=_,P.navigationBehaviorOptions=b,P}function Lr(v,w,_){const b=new Error("NavigationCancelingError: "+(v||""));return b[Xs]=!0,b.cancellationCode=w,_&&(b.url=_),b}function Gr(v){return Fo(v)&&Kn(v.url)}function Fo(v){return v&&v[Xs]}class hi{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new ii,this.attachRef=null}}let ii=(()=>{class v{constructor(){this.contexts=new Map}onChildOutletCreated(_,b){const P=this.getOrCreateContext(_);P.outlet=b,this.contexts.set(_,P)}onChildOutletDestroyed(_){const b=this.getContext(_);b&&(b.outlet=null,b.attachRef=null)}onOutletDeactivated(){const _=this.contexts;return this.contexts=new Map,_}onOutletReAttached(_){this.contexts=_}getOrCreateContext(_){let b=this.getContext(_);return b||(b=new hi,this.contexts.set(_,b)),b}getContext(_){return this.contexts.get(_)||null}}return v.\u0275fac=function(_){return new(_||v)},v.\u0275prov=p.Yz7({token:v,factory:v.\u0275fac,providedIn:"root"}),v})();const Xi=!1;let Pi=(()=>{class v{constructor(_,b,P,z,te){this.parentContexts=_,this.location=b,this.changeDetector=z,this.environmentInjector=te,this.activated=null,this._activatedRoute=null,this.activateEvents=new p.vpe,this.deactivateEvents=new p.vpe,this.attachEvents=new p.vpe,this.detachEvents=new p.vpe,this.name=P||Jt,_.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.getContext(this.name)?.outlet===this&&this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const _=this.parentContexts.getContext(this.name);_&&_.route&&(_.attachRef?this.attach(_.attachRef,_.route):this.activateWith(_.route,_.injector))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new p.vHH(4012,Xi);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new p.vHH(4012,Xi);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new p.vHH(4012,Xi);this.location.detach();const _=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(_.instance),_}attach(_,b){this.activated=_,this._activatedRoute=b,this.location.insert(_.hostView),this.attachEvents.emit(_.instance)}deactivate(){if(this.activated){const _=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(_)}}activateWith(_,b){if(this.isActivated)throw new p.vHH(4013,Xi);this._activatedRoute=_;const P=this.location,te=_._futureSnapshot.component,pe=this.parentContexts.getOrCreateContext(this.name).children,tt=new Rr(_,pe,P.injector);if(b&&function qn(v){return!!v.resolveComponentFactory}(b)){const Ot=b.resolveComponentFactory(te);this.activated=P.createComponent(Ot,P.length,tt)}else this.activated=P.createComponent(te,{index:P.length,injector:tt,environmentInjector:b??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return v.\u0275fac=function(_){return new(_||v)(p.Y36(ii),p.Y36(p.s_b),p.$8M("name"),p.Y36(p.sBO),p.Y36(p.lqb))},v.\u0275dir=p.lG2({type:v,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0}),v})();class Rr{constructor(w,_,b){this.route=w,this.childContexts=_,this.parent=b}get(w,_){return w===xi?this.route:w===ii?this.childContexts:this.parent.get(w,_)}}let vs=(()=>{class v{}return v.\u0275fac=function(_){return new(_||v)},v.\u0275cmp=p.Xpm({type:v,selectors:[["ng-component"]],standalone:!0,features:[p.jDz],decls:1,vars:0,template:function(_,b){1&_&&p._UZ(0,"router-outlet")},dependencies:[Pi],encapsulation:2}),v})();function as(v,w){return v.providers&&!v._injector&&(v._injector=(0,p.MMx)(v.providers,w,`Route: ${v.path}`)),v._injector??w}function zs(v){const w=v.children&&v.children.map(zs),_=w?{...v,children:w}:{...v};return!_.component&&!_.loadComponent&&(w||_.loadChildren)&&_.outlet&&_.outlet!==Jt&&(_.component=vs),_}function ji(v){return v.outlet||Jt}function us(v,w){const _=v.filter(b=>ji(b)===w);return _.push(...v.filter(b=>ji(b)!==w)),_}function mo(v){if(!v)return null;if(v.routeConfig?._injector)return v.routeConfig._injector;for(let w=v.parent;w;w=w.parent){const _=w.routeConfig;if(_?._loadedInjector)return _._loadedInjector;if(_?._injector)return _._injector}return null}class ht{constructor(w,_,b,P){this.routeReuseStrategy=w,this.futureState=_,this.currState=b,this.forwardEvent=P}activate(w){const _=this.futureState._root,b=this.currState?this.currState._root:null;this.deactivateChildRoutes(_,b,w),_s(this.futureState.root),this.activateChildRoutes(_,b,w)}deactivateChildRoutes(w,_,b){const P=ms(_);w.children.forEach(z=>{const te=z.value.outlet;this.deactivateRoutes(z,P[te],b),delete P[te]}),$e(P,(z,te)=>{this.deactivateRouteAndItsChildren(z,b)})}deactivateRoutes(w,_,b){const P=w.value,z=_?_.value:null;if(P===z)if(P.component){const te=b.getContext(P.outlet);te&&this.deactivateChildRoutes(w,_,te.children)}else this.deactivateChildRoutes(w,_,b);else z&&this.deactivateRouteAndItsChildren(_,b)}deactivateRouteAndItsChildren(w,_){w.value.component&&this.routeReuseStrategy.shouldDetach(w.value.snapshot)?this.detachAndStoreRouteSubtree(w,_):this.deactivateRouteAndOutlet(w,_)}detachAndStoreRouteSubtree(w,_){const b=_.getContext(w.value.outlet),P=b&&w.value.component?b.children:_,z=ms(w);for(const te of Object.keys(z))this.deactivateRouteAndItsChildren(z[te],P);if(b&&b.outlet){const te=b.outlet.detach(),pe=b.children.onOutletDeactivated();this.routeReuseStrategy.store(w.value.snapshot,{componentRef:te,route:w,contexts:pe})}}deactivateRouteAndOutlet(w,_){const b=_.getContext(w.value.outlet),P=b&&w.value.component?b.children:_,z=ms(w);for(const te of Object.keys(z))this.deactivateRouteAndItsChildren(z[te],P);b&&b.outlet&&(b.outlet.deactivate(),b.children.onOutletDeactivated(),b.attachRef=null,b.resolver=null,b.route=null)}activateChildRoutes(w,_,b){const P=ms(_);w.children.forEach(z=>{this.activateRoutes(z,P[z.value.outlet],b),this.forwardEvent(new ar(z.value.snapshot))}),w.children.length&&this.forwardEvent(new cn(w.value.snapshot))}activateRoutes(w,_,b){const P=w.value,z=_?_.value:null;if(_s(P),P===z)if(P.component){const te=b.getOrCreateContext(P.outlet);this.activateChildRoutes(w,_,te.children)}else this.activateChildRoutes(w,_,b);else if(P.component){const te=b.getOrCreateContext(P.outlet);if(this.routeReuseStrategy.shouldAttach(P.snapshot)){const pe=this.routeReuseStrategy.retrieve(P.snapshot);this.routeReuseStrategy.store(P.snapshot,null),te.children.onOutletReAttached(pe.contexts),te.attachRef=pe.componentRef,te.route=pe.route.value,te.outlet&&te.outlet.attach(pe.componentRef,pe.route.value),_s(pe.route.value),this.activateChildRoutes(w,null,te.children)}else{const pe=mo(P.snapshot),tt=pe?.get(p._Vd)??null;te.attachRef=null,te.route=P,te.resolver=tt,te.injector=pe,te.outlet&&te.outlet.activateWith(P,te.injector),this.activateChildRoutes(w,null,te.children)}}else this.activateChildRoutes(w,null,b)}}class Rn{constructor(w){this.path=w,this.route=this.path[this.path.length-1]}}class Us{constructor(w,_){this.component=w,this.route=_}}function Bo(v,w,_){const b=v._root;return Ns(b,w?w._root:null,_,[b.value])}function $i(v,w){const _=Symbol(),b=w.get(v,_);return b===_?"function"!=typeof v||(0,p.Z0I)(v)?w.get(v):v:b}function Ns(v,w,_,b,P={canDeactivateChecks:[],canActivateChecks:[]}){const z=ms(w);return v.children.forEach(te=>{(function ls(v,w,_,b,P={canDeactivateChecks:[],canActivateChecks:[]}){const z=v.value,te=w?w.value:null,pe=_?_.getContext(v.value.outlet):null;if(te&&z.routeConfig===te.routeConfig){const tt=function jo(v,w,_){if("function"==typeof _)return _(v,w);switch(_){case"pathParamsChange":return!me(v.url,w.url);case"pathParamsOrQueryParamsChange":return!me(v.url,w.url)||!Cn(v.queryParams,w.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!di(v,w)||!Cn(v.queryParams,w.queryParams);default:return!di(v,w)}}(te,z,z.routeConfig.runGuardsAndResolvers);tt?P.canActivateChecks.push(new Rn(b)):(z.data=te.data,z._resolvedData=te._resolvedData),Ns(v,w,z.component?pe?pe.children:null:_,b,P),tt&&pe&&pe.outlet&&pe.outlet.isActivated&&P.canDeactivateChecks.push(new Us(pe.outlet.component,te))}else te&&to(w,pe,P),P.canActivateChecks.push(new Rn(b)),Ns(v,null,z.component?pe?pe.children:null:_,b,P)})(te,z[te.value.outlet],_,b.concat([te.value]),P),delete z[te.value.outlet]}),$e(z,(te,pe)=>to(te,_.getContext(pe),P)),P}function to(v,w,_){const b=ms(v),P=v.value;$e(b,(z,te)=>{to(z,P.component?w?w.children.getContext(te):null:w,_)}),_.canDeactivateChecks.push(new Us(P.component&&w&&w.outlet&&w.outlet.isActivated?w.outlet.component:null,P))}function yo(v){return"function"==typeof v}function cs(v){return v instanceof Me.K||"EmptyError"===v?.name}const Mi=Symbol("INITIAL_VALUE");function Hi(){return(0,Ne.w)(v=>Ke(v.map(w=>w.pipe((0,dt.q)(1),(0,wt.O)(Mi)))).pipe((0,de.U)(w=>{for(const _ of w)if(!0!==_){if(_===Mi)return Mi;if(!1===_||_ instanceof ge)return _}return!0}),(0,bt.h)(w=>w!==Mi),(0,dt.q)(1)))}function Jo(v){return(0,he.z)((0,tn.b)(w=>{if(Kn(w))throw la(0,w)}),(0,de.U)(w=>!0===w))}const S={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function $(v,w,_,b,P){const z=M(v,w,_);return z.matched?function Ea(v,w,_,b){const P=w.canMatch;if(!P||0===P.length)return(0,G.of)(!0);const z=P.map(te=>{const pe=$i(te,v);return ye(function et(v){return v&&yo(v.canMatch)}(pe)?pe.canMatch(w,_):v.runInContext(()=>pe(w,_)))});return(0,G.of)(z).pipe(Hi(),Jo())}(b=as(w,b),w,_).pipe((0,de.U)(te=>!0===te?z:{...S})):(0,G.of)(z)}function M(v,w,_){if(""===w.path)return"full"===w.pathMatch&&(v.hasChildren()||_.length>0)?{...S}:{matched:!0,consumedSegments:[],remainingSegments:_,parameters:{},positionalParamSegments:{}};const P=(w.matcher||pt)(_,v,w);if(!P)return{...S};const z={};$e(P.posParams,(pe,tt)=>{z[tt]=pe.path});const te=P.consumed.length>0?{...z,...P.consumed[P.consumed.length-1].parameters}:z;return{matched:!0,consumedSegments:P.consumed,remainingSegments:_.slice(P.consumed.length),parameters:te,positionalParamSegments:P.posParams??{}}}function q(v,w,_,b,P="corrected"){if(_.length>0&&function rt(v,w,_){return _.some(b=>Zn(v,w,b)&&ji(b)!==Jt)}(v,_,b)){const te=new X(w,function ze(v,w,_,b){const P={};P[Jt]=b,b._sourceSegment=v,b._segmentIndexShift=w.length;for(const z of _)if(""===z.path&&ji(z)!==Jt){const te=new X([],{});te._sourceSegment=v,te._segmentIndexShift=w.length,P[ji(z)]=te}return P}(v,w,b,new X(_,v.children)));return te._sourceSegment=v,te._segmentIndexShift=w.length,{segmentGroup:te,slicedSegments:[]}}if(0===_.length&&function Yt(v,w,_){return _.some(b=>Zn(v,w,b))}(v,_,b)){const te=new X(v.segments,function fe(v,w,_,b,P,z){const te={};for(const pe of b)if(Zn(v,_,pe)&&!P[ji(pe)]){const tt=new X([],{});tt._sourceSegment=v,tt._segmentIndexShift="legacy"===z?v.segments.length:w.length,te[ji(pe)]=tt}return{...P,...te}}(v,w,_,b,v.children,P));return te._sourceSegment=v,te._segmentIndexShift=w.length,{segmentGroup:te,slicedSegments:_}}const z=new X(v.segments,v.children);return z._sourceSegment=v,z._segmentIndexShift=w.length,{segmentGroup:z,slicedSegments:_}}function Zn(v,w,_){return(!(v.hasChildren()||w.length>0)||"full"!==_.pathMatch)&&""===_.path}function hr(v,w,_,b){return!!(ji(v)===b||b!==Jt&&Zn(w,_,v))&&("**"===v.path||M(w,v,_).matched)}function tr(v,w,_){return 0===w.length&&!v.children[_]}const Gn=!1;class si{constructor(w){this.segmentGroup=w||null}}class pr{constructor(w){this.urlTree=w}}function Vr(v){return Xe(new si(v))}function Bs(v){return Xe(new pr(v))}class O{constructor(w,_,b,P,z){this.injector=w,this.configLoader=_,this.urlSerializer=b,this.urlTree=P,this.config=z,this.allowRedirects=!0}apply(){const w=q(this.urlTree.root,[],[],this.config).segmentGroup,_=new X(w.segments,w.children);return this.expandSegmentGroup(this.injector,this.config,_,Jt).pipe((0,de.U)(z=>this.createUrlTree(yn(z),this.urlTree.queryParams,this.urlTree.fragment))).pipe(qt(z=>{if(z instanceof pr)return this.allowRedirects=!1,this.match(z.urlTree);throw z instanceof si?this.noMatchError(z):z}))}match(w){return this.expandSegmentGroup(this.injector,this.config,w.root,Jt).pipe((0,de.U)(P=>this.createUrlTree(yn(P),w.queryParams,w.fragment))).pipe(qt(P=>{throw P instanceof si?this.noMatchError(P):P}))}noMatchError(w){return new p.vHH(4002,Gn)}createUrlTree(w,_,b){const P=Hr(w);return new ge(P,_,b)}expandSegmentGroup(w,_,b,P){return 0===b.segments.length&&b.hasChildren()?this.expandChildren(w,_,b).pipe((0,de.U)(z=>new X([],z))):this.expandSegment(w,b,_,b.segments,P,!0)}expandChildren(w,_,b){const P=[];for(const z of Object.keys(b.children))"primary"===z?P.unshift(z):P.push(z);return(0,C.D)(P).pipe((0,ft.b)(z=>{const te=b.children[z],pe=us(_,z);return this.expandSegmentGroup(w,pe,te,z).pipe((0,de.U)(tt=>({segment:tt,outlet:z})))}),(0,on.R)((z,te)=>(z[te.outlet]=te.segment,z),{}),Fn())}expandSegment(w,_,b,P,z,te){return(0,C.D)(b).pipe((0,ft.b)(pe=>this.expandSegmentAgainstRoute(w,_,b,pe,P,z,te).pipe(qt(Ot=>{if(Ot instanceof si)return(0,G.of)(null);throw Ot}))),(0,$t.P)(pe=>!!pe),qt((pe,tt)=>{if(cs(pe))return tr(_,P,z)?(0,G.of)(new X([],{})):Vr(_);throw pe}))}expandSegmentAgainstRoute(w,_,b,P,z,te,pe){return hr(P,_,z,te)?void 0===P.redirectTo?this.matchSegmentAgainstRoute(w,_,P,z,te):pe&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(w,_,b,P,z,te):Vr(_):Vr(_)}expandSegmentAgainstRouteUsingRedirect(w,_,b,P,z,te){return"**"===P.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(w,b,P,te):this.expandRegularSegmentAgainstRouteUsingRedirect(w,_,b,P,z,te)}expandWildCardWithParamsAgainstRouteUsingRedirect(w,_,b,P){const z=this.applyRedirectCommands([],b.redirectTo,{});return b.redirectTo.startsWith("/")?Bs(z):this.lineralizeSegments(b,z).pipe((0,Mt.z)(te=>{const pe=new X(te,{});return this.expandSegment(w,pe,_,te,P,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(w,_,b,P,z,te){const{matched:pe,consumedSegments:tt,remainingSegments:Ot,positionalParamSegments:rn}=M(_,P,z);if(!pe)return Vr(_);const Wt=this.applyRedirectCommands(tt,P.redirectTo,rn);return P.redirectTo.startsWith("/")?Bs(Wt):this.lineralizeSegments(P,Wt).pipe((0,Mt.z)(Dn=>this.expandSegment(w,_,b,Dn.concat(Ot),te,!1)))}matchSegmentAgainstRoute(w,_,b,P,z){return"**"===b.path?(w=as(b,w),b.loadChildren?(b._loadedRoutes?(0,G.of)({routes:b._loadedRoutes,injector:b._loadedInjector}):this.configLoader.loadChildren(w,b)).pipe((0,de.U)(pe=>(b._loadedRoutes=pe.routes,b._loadedInjector=pe.injector,new X(P,{})))):(0,G.of)(new X(P,{}))):$(_,b,P,w).pipe((0,Ne.w)(({matched:te,consumedSegments:pe,remainingSegments:tt})=>te?this.getChildConfig(w=b._injector??w,b,P).pipe((0,Mt.z)(rn=>{const Wt=rn.injector??w,Dn=rn.routes,{segmentGroup:zn,slicedSegments:so}=q(_,pe,tt,Dn),qi=new X(zn.segments,zn.children);if(0===so.length&&qi.hasChildren())return this.expandChildren(Wt,Dn,qi).pipe((0,de.U)(Fa=>new X(pe,Fa)));if(0===Dn.length&&0===so.length)return(0,G.of)(new X(pe,{}));const pi=ji(b)===z;return this.expandSegment(Wt,qi,Dn,so,pi?Jt:z,!0).pipe((0,de.U)(_i=>new X(pe.concat(_i.segments),_i.children)))})):Vr(_)))}getChildConfig(w,_,b){return _.children?(0,G.of)({routes:_.children,injector:w}):_.loadChildren?void 0!==_._loadedRoutes?(0,G.of)({routes:_._loadedRoutes,injector:_._loadedInjector}):function da(v,w,_,b){const P=w.canLoad;if(void 0===P||0===P.length)return(0,G.of)(!0);const z=P.map(te=>{const pe=$i(te,v);return ye(function F(v){return v&&yo(v.canLoad)}(pe)?pe.canLoad(w,_):v.runInContext(()=>pe(w,_)))});return(0,G.of)(z).pipe(Hi(),Jo())}(w,_,b).pipe((0,Mt.z)(P=>P?this.configLoader.loadChildren(w,_).pipe((0,tn.b)(z=>{_._loadedRoutes=z.routes,_._loadedInjector=z.injector})):function qs(v){return Xe(Lr(Gn,3))}())):(0,G.of)({routes:[],injector:w})}lineralizeSegments(w,_){let b=[],P=_.root;for(;;){if(b=b.concat(P.segments),0===P.numberOfChildren)return(0,G.of)(b);if(P.numberOfChildren>1||!P.children[Jt])return Xe(new p.vHH(4e3,Gn));P=P.children[Jt]}}applyRedirectCommands(w,_,b){return this.applyRedirectCreateUrlTree(_,this.urlSerializer.parse(_),w,b)}applyRedirectCreateUrlTree(w,_,b,P){const z=this.createSegmentGroup(w,_.root,b,P);return new ge(z,this.createQueryParams(_.queryParams,this.urlTree.queryParams),_.fragment)}createQueryParams(w,_){const b={};return $e(w,(P,z)=>{if("string"==typeof P&&P.startsWith(":")){const pe=P.substring(1);b[z]=_[pe]}else b[z]=P}),b}createSegmentGroup(w,_,b,P){const z=this.createSegments(w,_.segments,b,P);let te={};return $e(_.children,(pe,tt)=>{te[tt]=this.createSegmentGroup(w,pe,b,P)}),new X(z,te)}createSegments(w,_,b,P){return _.map(z=>z.path.startsWith(":")?this.findPosParam(w,z,P):this.findOrReturn(z,b))}findPosParam(w,_,b){const P=b[_.path.substring(1)];if(!P)throw new p.vHH(4001,Gn);return P}findOrReturn(w,_){let b=0;for(const P of _){if(P.path===w.path)return _.splice(b),P;b++}return w}}class Ie{}class sn{constructor(w,_,b,P,z,te,pe,tt){this.injector=w,this.rootComponentType=_,this.config=b,this.urlTree=P,this.url=z,this.paramsInheritanceStrategy=te,this.relativeLinkResolution=pe,this.urlSerializer=tt}recognize(){const w=q(this.urlTree.root,[],[],this.config.filter(_=>void 0===_.redirectTo),this.relativeLinkResolution).segmentGroup;return this.processSegmentGroup(this.injector,this.config,w,Jt).pipe((0,de.U)(_=>{if(null===_)return null;const b=new Ji([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Jt,this.rootComponentType,null,this.urlTree.root,-1,{}),P=new Bi(b,_),z=new fo(this.url,P);return this.inheritParamsAndData(z._root),z}))}inheritParamsAndData(w){const _=w.value,b=Qi(_,this.paramsInheritanceStrategy);_.params=Object.freeze(b.params),_.data=Object.freeze(b.data),w.children.forEach(P=>this.inheritParamsAndData(P))}processSegmentGroup(w,_,b,P){return 0===b.segments.length&&b.hasChildren()?this.processChildren(w,_,b):this.processSegment(w,_,b,b.segments,P)}processChildren(w,_,b){return(0,C.D)(Object.keys(b.children)).pipe((0,ft.b)(P=>{const z=b.children[P],te=us(_,P);return this.processSegmentGroup(w,te,z,P)}),(0,on.R)((P,z)=>P&&z?(P.push(...z),P):null),function Ei(v,w=!1){return(0,ae.e)((_,b)=>{let P=0;_.subscribe((0,mt.x)(b,z=>{const te=v(z,P++);(te||w)&&b.next(z),!te&&b.complete()}))})}(P=>null!==P),(0,an.d)(null),Fn(),(0,de.U)(P=>{if(null===P)return null;const z=qr(P);return function Zt(v){v.sort((w,_)=>w.value.outlet===Jt?-1:_.value.outlet===Jt?1:w.value.outlet.localeCompare(_.value.outlet))}(z),z}))}processSegment(w,_,b,P,z){return(0,C.D)(_).pipe((0,ft.b)(te=>this.processSegmentAgainstRoute(te._injector??w,te,b,P,z)),(0,$t.P)(te=>!!te),qt(te=>{if(cs(te))return tr(b,P,z)?(0,G.of)([]):(0,G.of)(null);throw te}))}processSegmentAgainstRoute(w,_,b,P,z){if(_.redirectTo||!hr(_,b,P,z))return(0,G.of)(null);let te;if("**"===_.path){const pe=P.length>0?Ir(P).parameters:{},tt=oi(b)+P.length,Ot=new Ji(P,pe,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,fr(_),ji(_),_.component??_._loadedComponent??null,_,fi(b),tt,Ur(_),tt);te=(0,G.of)({snapshot:Ot,consumedSegments:[],remainingSegments:[]})}else te=$(b,_,P,w).pipe((0,de.U)(({matched:pe,consumedSegments:tt,remainingSegments:Ot,parameters:rn})=>{if(!pe)return null;const Wt=oi(b)+tt.length;return{snapshot:new Ji(tt,rn,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,fr(_),ji(_),_.component??_._loadedComponent??null,_,fi(b),Wt,Ur(_),Wt),consumedSegments:tt,remainingSegments:Ot}}));return te.pipe((0,Ne.w)(pe=>{if(null===pe)return(0,G.of)(null);const{snapshot:tt,consumedSegments:Ot,remainingSegments:rn}=pe;w=_._injector??w;const Wt=_._loadedInjector??w,Dn=function Nn(v){return v.children?v.children:v.loadChildren?v._loadedRoutes:[]}(_),{segmentGroup:zn,slicedSegments:so}=q(b,Ot,rn,Dn.filter(pi=>void 0===pi.redirectTo),this.relativeLinkResolution);if(0===so.length&&zn.hasChildren())return this.processChildren(Wt,Dn,zn).pipe((0,de.U)(pi=>null===pi?null:[new Bi(tt,pi)]));if(0===Dn.length&&0===so.length)return(0,G.of)([new Bi(tt,[])]);const qi=ji(_)===z;return this.processSegment(Wt,Dn,zn,so,qi?Jt:z).pipe((0,de.U)(pi=>null===pi?null:[new Bi(tt,pi)]))}))}}function Ln(v){const w=v.value.routeConfig;return w&&""===w.path&&void 0===w.redirectTo}function qr(v){const w=[],_=new Set;for(const b of v){if(!Ln(b)){w.push(b);continue}const P=w.find(z=>b.value.routeConfig===z.value.routeConfig);void 0!==P?(P.children.push(...b.children),_.add(P)):w.push(b)}for(const b of _){const P=qr(b.children);w.push(new Bi(b.value,P))}return w.filter(b=>!_.has(b))}function fi(v){let w=v;for(;w._sourceSegment;)w=w._sourceSegment;return w}function oi(v){let w=v,_=w._segmentIndexShift??0;for(;w._sourceSegment;)w=w._sourceSegment,_+=w._segmentIndexShift??0;return _-1}function fr(v){return v.data||{}}function Ur(v){return v.resolve||{}}function bo(v){return"string"==typeof v.title||null===v.title}function ai(v){return(0,Ne.w)(w=>{const _=v(w);return _?(0,C.D)(_).pipe((0,de.U)(()=>w)):(0,G.of)(w)})}let ro=(()=>{class v{buildTitle(_){let b,P=_.root;for(;void 0!==P;)b=this.getResolvedTitleForRoute(P)??b,P=P.children.find(z=>z.outlet===Jt);return b}getResolvedTitleForRoute(_){return _.data[nr]}}return v.\u0275fac=function(_){return new(_||v)},v.\u0275prov=p.Yz7({token:v,factory:function(){return(0,p.f3M)(ha)},providedIn:"root"}),v})(),ha=(()=>{class v extends ro{constructor(_){super(),this.title=_}updateTitle(_){const b=this.buildTitle(_);void 0!==b&&this.title.setTitle(b)}}return v.\u0275fac=function(_){return new(_||v)(p.LFG(Ar.Dx))},v.\u0275prov=p.Yz7({token:v,factory:v.\u0275fac,providedIn:"root"}),v})();class Ra{}class ea extends class Gi{shouldDetach(w){return!1}store(w,_){}shouldAttach(w){return!1}retrieve(w){return null}shouldReuseRoute(w,_){return w.routeConfig===_.routeConfig}}{}const Oa=new p.OlP("",{providedIn:"root",factory:()=>({})}),Tt=new p.OlP("ROUTES");let Nr=(()=>{class v{constructor(_,b){this.injector=_,this.compiler=b,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(_){if(this.componentLoaders.get(_))return this.componentLoaders.get(_);if(_._loadedComponent)return(0,G.of)(_._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(_);const b=ye(_.loadComponent()).pipe((0,tn.b)(z=>{this.onLoadEndListener&&this.onLoadEndListener(_),_._loadedComponent=z}),mr(()=>{this.componentLoaders.delete(_)})),P=new ne(b,()=>new be.x).pipe(Le());return this.componentLoaders.set(_,P),P}loadChildren(_,b){if(this.childrenLoaders.get(b))return this.childrenLoaders.get(b);if(b._loadedRoutes)return(0,G.of)({routes:b._loadedRoutes,injector:b._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(b);const z=this.loadModuleFactoryOrRoutes(b.loadChildren).pipe((0,de.U)(pe=>{this.onLoadEndListener&&this.onLoadEndListener(b);let tt,Ot,rn=!1;Array.isArray(pe)?Ot=pe:(tt=pe.create(_).injector,Ot=kr(tt.get(Tt,[],p.XFs.Self|p.XFs.Optional)));return{routes:Ot.map(zs),injector:tt}}),mr(()=>{this.childrenLoaders.delete(b)})),te=new ne(z,()=>new be.x).pipe(Le());return this.childrenLoaders.set(b,te),te}loadModuleFactoryOrRoutes(_){return ye(_()).pipe((0,Mt.z)(b=>b instanceof p.YKP||Array.isArray(b)?(0,G.of)(b):(0,C.D)(this.compiler.compileModuleAsync(b))))}}return v.\u0275fac=function(_){return new(_||v)(p.LFG(p.zs3),p.LFG(p.Sil))},v.\u0275prov=p.Yz7({token:v,factory:v.\u0275fac,providedIn:"root"}),v})();class To{}class za{shouldProcessUrl(w){return!0}extract(w){return w}merge(w,_){return w}}function vn(v){throw v}function Au(v,w,_){return w.parse("/")}const Ht={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Je={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};function zi(){const v=(0,p.f3M)(yt),w=(0,p.f3M)(ii),_=(0,p.f3M)(De.Ye),b=(0,p.f3M)(p.zs3),P=(0,p.f3M)(p.Sil),z=(0,p.f3M)(Tt,{optional:!0})??[],te=(0,p.f3M)(Oa,{optional:!0})??{},pe=(0,p.f3M)(ha),tt=(0,p.f3M)(ro,{optional:!0}),Ot=(0,p.f3M)(To,{optional:!0}),rn=(0,p.f3M)(Ra,{optional:!0}),Wt=new Wi(null,v,w,_,b,P,kr(z));return Ot&&(Wt.urlHandlingStrategy=Ot),rn&&(Wt.routeReuseStrategy=rn),Wt.titleStrategy=tt??pe,function Et(v,w){v.errorHandler&&(w.errorHandler=v.errorHandler),v.malformedUriErrorHandler&&(w.malformedUriErrorHandler=v.malformedUriErrorHandler),v.onSameUrlNavigation&&(w.onSameUrlNavigation=v.onSameUrlNavigation),v.paramsInheritanceStrategy&&(w.paramsInheritanceStrategy=v.paramsInheritanceStrategy),v.relativeLinkResolution&&(w.relativeLinkResolution=v.relativeLinkResolution),v.urlUpdateStrategy&&(w.urlUpdateStrategy=v.urlUpdateStrategy),v.canceledNavigationResolution&&(w.canceledNavigationResolution=v.canceledNavigationResolution)}(te,Wt),Wt}let Wi=(()=>{class v{constructor(_,b,P,z,te,pe,tt){this.rootComponentType=_,this.urlSerializer=b,this.rootContexts=P,this.location=z,this.config=tt,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new be.x,this.errorHandler=vn,this.malformedUriErrorHandler=Au,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=()=>(0,G.of)(void 0),this.urlHandlingStrategy=new za,this.routeReuseStrategy=new ea,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.configLoader=te.get(Nr),this.configLoader.onLoadEndListener=Dn=>this.triggerEvent(new Dt(Dn)),this.configLoader.onLoadStartListener=Dn=>this.triggerEvent(new ct(Dn)),this.ngModule=te.get(p.h0i),this.console=te.get(p.c2e);const Wt=te.get(p.R0b);this.isNgZoneEnabled=Wt instanceof p.R0b&&p.R0b.isInAngularZone(),this.resetConfig(tt),this.currentUrlTree=function Be(){return new ge(new X([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=Ni(this.currentUrlTree,this.rootComponentType),this.transitions=new we({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){return this.location.getState()?.\u0275routerPageId}setupNavigations(_){const b=this.events;return _.pipe((0,bt.h)(P=>0!==P.id),(0,de.U)(P=>({...P,extractedUrl:this.urlHandlingStrategy.extract(P.rawUrl)})),(0,Ne.w)(P=>{let z=!1,te=!1;return(0,G.of)(P).pipe((0,tn.b)(pe=>{this.currentNavigation={id:pe.id,initialUrl:pe.rawUrl,extractedUrl:pe.extractedUrl,trigger:pe.source,extras:pe.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),(0,Ne.w)(pe=>{const tt=this.browserUrlTree.toString(),Ot=!this.navigated||pe.extractedUrl.toString()!==tt||tt!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||Ot)&&this.urlHandlingStrategy.shouldProcessUrl(pe.rawUrl))return Ia(pe.source)&&(this.browserUrlTree=pe.extractedUrl),(0,G.of)(pe).pipe((0,Ne.w)(Wt=>{const Dn=this.transitions.getValue();return b.next(new co(Wt.id,this.serializeUrl(Wt.extractedUrl),Wt.source,Wt.restoredState)),Dn!==this.transitions.getValue()?_t.E:Promise.resolve(Wt)}),function j(v,w,_,b){return(0,Ne.w)(P=>function R(v,w,_,b,P){return new O(v,w,_,b,P).apply()}(v,w,_,P.extractedUrl,b).pipe((0,de.U)(z=>({...P,urlAfterRedirects:z}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,tn.b)(Wt=>{this.currentNavigation={...this.currentNavigation,finalUrl:Wt.urlAfterRedirects},P.urlAfterRedirects=Wt.urlAfterRedirects}),function js(v,w,_,b,P,z){return(0,Mt.z)(te=>function Ct(v,w,_,b,P,z,te="emptyOnly",pe="legacy"){return new sn(v,w,_,b,P,te,pe,z).recognize().pipe((0,Ne.w)(tt=>null===tt?function ke(v){return new Re.y(w=>w.error(v))}(new Ie):(0,G.of)(tt)))}(v,w,_,te.urlAfterRedirects,b.serialize(te.urlAfterRedirects),b,P,z).pipe((0,de.U)(pe=>({...te,targetSnapshot:pe}))))}(this.ngModule.injector,this.rootComponentType,this.config,this.urlSerializer,this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,tn.b)(Wt=>{if(P.targetSnapshot=Wt.targetSnapshot,"eager"===this.urlUpdateStrategy){if(!Wt.extras.skipLocationChange){const zn=this.urlHandlingStrategy.merge(Wt.urlAfterRedirects,Wt.rawUrl);this.setBrowserUrl(zn,Wt)}this.browserUrlTree=Wt.urlAfterRedirects}const Dn=new Os(Wt.id,this.serializeUrl(Wt.extractedUrl),this.serializeUrl(Wt.urlAfterRedirects),Wt.targetSnapshot);b.next(Dn)}));if(Ot&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:Dn,extractedUrl:zn,source:so,restoredState:qi,extras:pi}=pe,zo=new co(Dn,this.serializeUrl(zn),so,qi);b.next(zo);const _i=Ni(zn,this.rootComponentType).snapshot;return P={...pe,targetSnapshot:_i,urlAfterRedirects:zn,extras:{...pi,skipLocationChange:!1,replaceUrl:!1}},(0,G.of)(P)}return this.rawUrlTree=pe.rawUrl,pe.resolve(null),_t.E}),(0,tn.b)(pe=>{const tt=new ri(pe.id,this.serializeUrl(pe.extractedUrl),this.serializeUrl(pe.urlAfterRedirects),pe.targetSnapshot);this.triggerEvent(tt)}),(0,de.U)(pe=>P={...pe,guards:Bo(pe.targetSnapshot,pe.currentSnapshot,this.rootContexts)}),function Ws(v,w){return(0,Mt.z)(_=>{const{targetSnapshot:b,currentSnapshot:P,guards:{canActivateChecks:z,canDeactivateChecks:te}}=_;return 0===te.length&&0===z.length?(0,G.of)({..._,guardsResult:!0}):function no(v,w,_,b){return(0,C.D)(v).pipe((0,Mt.z)(P=>function ws(v,w,_,b,P){const z=w&&w.routeConfig?w.routeConfig.canDeactivate:null;if(!z||0===z.length)return(0,G.of)(!0);const te=z.map(pe=>{const tt=mo(w)??P,Ot=$i(pe,tt);return ye(function K(v){return v&&yo(v.canDeactivate)}(Ot)?Ot.canDeactivate(v,w,_,b):tt.runInContext(()=>Ot(v,w,_,b))).pipe((0,$t.P)())});return(0,G.of)(te).pipe(Hi())}(P.component,P.route,_,w,b)),(0,$t.P)(P=>!0!==P,!0))}(te,b,P,v).pipe((0,Mt.z)(pe=>pe&&function Qo(v){return"boolean"==typeof v}(pe)?function _o(v,w,_,b){return(0,C.D)(w).pipe((0,ft.b)(P=>(0,He.z)(function Ps(v,w){return null!==v&&w&&w(new jt(v)),(0,G.of)(!0)}(P.route.parent,b),function Co(v,w){return null!==v&&w&&w(new ei(v)),(0,G.of)(!0)}(P.route,b),function Wr(v,w,_){const b=w[w.length-1],z=w.slice(0,w.length-1).reverse().map(te=>function Or(v){const w=v.routeConfig?v.routeConfig.canActivateChild:null;return w&&0!==w.length?{node:v,guards:w}:null}(te)).filter(te=>null!==te).map(te=>Bt(()=>{const pe=te.guards.map(tt=>{const Ot=mo(te.node)??_,rn=$i(tt,Ot);return ye(function A(v){return v&&yo(v.canActivateChild)}(rn)?rn.canActivateChild(b,v):Ot.runInContext(()=>rn(b,v))).pipe((0,$t.P)())});return(0,G.of)(pe).pipe(Hi())}));return(0,G.of)(z).pipe(Hi())}(v,P.path,_),function ca(v,w,_){const b=w.routeConfig?w.routeConfig.canActivate:null;if(!b||0===b.length)return(0,G.of)(!0);const P=b.map(z=>Bt(()=>{const te=mo(w)??_,pe=$i(z,te);return ye(function N(v){return v&&yo(v.canActivate)}(pe)?pe.canActivate(w,v):te.runInContext(()=>pe(w,v))).pipe((0,$t.P)())}));return(0,G.of)(P).pipe(Hi())}(v,P.route,_))),(0,$t.P)(P=>!0!==P,!0))}(b,z,v,w):(0,G.of)(pe)),(0,de.U)(pe=>({..._,guardsResult:pe})))})}(this.ngModule.injector,pe=>this.triggerEvent(pe)),(0,tn.b)(pe=>{if(P.guardsResult=pe.guardsResult,Kn(pe.guardsResult))throw la(0,pe.guardsResult);const tt=new xe(pe.id,this.serializeUrl(pe.extractedUrl),this.serializeUrl(pe.urlAfterRedirects),pe.targetSnapshot,!!pe.guardsResult);this.triggerEvent(tt)}),(0,bt.h)(pe=>!!pe.guardsResult||(this.restoreHistory(pe),this.cancelNavigationTransition(pe,"",3),!1)),ai(pe=>{if(pe.guards.canActivateChecks.length)return(0,G.of)(pe).pipe((0,tn.b)(tt=>{const Ot=new Ae(tt.id,this.serializeUrl(tt.extractedUrl),this.serializeUrl(tt.urlAfterRedirects),tt.targetSnapshot);this.triggerEvent(Ot)}),(0,Ne.w)(tt=>{let Ot=!1;return(0,G.of)(tt).pipe(function ti(v,w){return(0,Mt.z)(_=>{const{targetSnapshot:b,guards:{canActivateChecks:P}}=_;if(!P.length)return(0,G.of)(_);let z=0;return(0,C.D)(P).pipe((0,ft.b)(te=>function Zr(v,w,_,b){const P=v.routeConfig,z=v._resolve;return void 0!==P?.title&&!bo(P)&&(z[nr]=P.title),function vo(v,w,_,b){const P=function Xo(v){return[...Object.keys(v),...Object.getOwnPropertySymbols(v)]}(v);if(0===P.length)return(0,G.of)({});const z={};return(0,C.D)(P).pipe((0,Mt.z)(te=>function $o(v,w,_,b){const P=mo(w)??b,z=$i(v,P);return ye(z.resolve?z.resolve(w,_):P.runInContext(()=>z(w,_)))}(v[te],w,_,b).pipe((0,$t.P)(),(0,tn.b)(pe=>{z[te]=pe}))),Ft(1),function Er(v){return(0,de.U)(()=>v)}(z),qt(te=>cs(te)?_t.E:Xe(te)))}(z,v,w,b).pipe((0,de.U)(te=>(v._resolvedData=te,v.data=Qi(v,_).resolve,P&&bo(P)&&(v.data[nr]=P.title),null)))}(te.route,b,v,w)),(0,tn.b)(()=>z++),Ft(1),(0,Mt.z)(te=>z===P.length?(0,G.of)(_):_t.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,tn.b)({next:()=>Ot=!0,complete:()=>{Ot||(this.restoreHistory(tt),this.cancelNavigationTransition(tt,"",2))}}))}),(0,tn.b)(tt=>{const Ot=new Ue(tt.id,this.serializeUrl(tt.extractedUrl),this.serializeUrl(tt.urlAfterRedirects),tt.targetSnapshot);this.triggerEvent(Ot)}))}),ai(pe=>{const tt=Ot=>{const rn=[];Ot.routeConfig?.loadComponent&&!Ot.routeConfig._loadedComponent&&rn.push(this.configLoader.loadComponent(Ot.routeConfig).pipe((0,tn.b)(Wt=>{Ot.component=Wt}),(0,de.U)(()=>{})));for(const Wt of Ot.children)rn.push(...tt(Wt));return rn};return Ke(tt(pe.targetSnapshot.root)).pipe((0,an.d)(),(0,dt.q)(1))}),ai(()=>this.afterPreactivation()),(0,de.U)(pe=>{const tt=function _r(v,w,_){const b=Ci(v,w._root,_?_._root:void 0);return new ho(b,w)}(this.routeReuseStrategy,pe.targetSnapshot,pe.currentRouterState);return P={...pe,targetRouterState:tt}}),(0,tn.b)(pe=>{this.currentUrlTree=pe.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(pe.urlAfterRedirects,pe.rawUrl),this.routerState=pe.targetRouterState,"deferred"===this.urlUpdateStrategy&&(pe.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,pe),this.browserUrlTree=pe.urlAfterRedirects)}),((v,w,_)=>(0,de.U)(b=>(new ht(w,b.targetRouterState,b.currentRouterState,_).activate(v),b)))(this.rootContexts,this.routeReuseStrategy,pe=>this.triggerEvent(pe)),(0,tn.b)({next(){z=!0},complete(){z=!0}}),mr(()=>{z||te||this.cancelNavigationTransition(P,"",1),this.currentNavigation?.id===P.id&&(this.currentNavigation=null)}),qt(pe=>{if(te=!0,Fo(pe)){Gr(pe)||(this.navigated=!0,this.restoreHistory(P,!0));const tt=new No(P.id,this.serializeUrl(P.extractedUrl),pe.message,pe.cancellationCode);if(b.next(tt),Gr(pe)){const Ot=this.urlHandlingStrategy.merge(pe.url,this.rawUrlTree),rn={skipLocationChange:P.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||Ia(P.source)};this.scheduleNavigation(Ot,"imperative",null,rn,{resolve:P.resolve,reject:P.reject,promise:P.promise})}else P.resolve(!1)}else{this.restoreHistory(P,!0);const tt=new Po(P.id,this.serializeUrl(P.extractedUrl),pe,P.targetSnapshot??void 0);b.next(tt);try{P.resolve(this.errorHandler(pe))}catch(Ot){P.reject(Ot)}}return _t.E}))}))}resetRootComponentType(_){this.rootComponentType=_,this.routerState.root.component=this.rootComponentType}setTransition(_){this.transitions.next({...this.transitions.value,..._})}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(_=>{const b="popstate"===_.type?"popstate":"hashchange";"popstate"===b&&setTimeout(()=>{const P={replaceUrl:!0},z=_.state?.navigationId?_.state:null;if(z){const pe={...z};delete pe.navigationId,delete pe.\u0275routerPageId,0!==Object.keys(pe).length&&(P.state=pe)}const te=this.parseUrl(_.url);this.scheduleNavigation(te,b,z,P)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(_){this.events.next(_)}resetConfig(_){this.config=_.map(zs),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(_,b={}){const{relativeTo:P,queryParams:z,fragment:te,queryParamsHandling:pe,preserveFragment:tt}=b,Ot=P||this.routerState.root,rn=tt?this.currentUrlTree.fragment:te;let Wt=null;switch(pe){case"merge":Wt={...this.currentUrlTree.queryParams,...z};break;case"preserve":Wt=this.currentUrlTree.queryParams;break;default:Wt=z||null}return null!==Wt&&(Wt=this.removeEmptyProps(Wt)),ss(Ot,this.currentUrlTree,_,Wt,rn??null)}navigateByUrl(_,b={skipLocationChange:!1}){const P=Kn(_)?_:this.parseUrl(_),z=this.urlHandlingStrategy.merge(P,this.rawUrlTree);return this.scheduleNavigation(z,"imperative",null,b)}navigate(_,b={skipLocationChange:!1}){return function nu(v){for(let w=0;w<v.length;w++){if(null==v[w])throw new p.vHH(4008,false)}}(_),this.navigateByUrl(this.createUrlTree(_,b),b)}serializeUrl(_){return this.urlSerializer.serialize(_)}parseUrl(_){let b;try{b=this.urlSerializer.parse(_)}catch(P){b=this.malformedUriErrorHandler(P,this.urlSerializer,_)}return b}isActive(_,b){let P;if(P=!0===b?{...Ht}:!1===b?{...Je}:b,Kn(_))return un(this.currentUrlTree,_,P);const z=this.parseUrl(_);return un(this.currentUrlTree,z,P)}removeEmptyProps(_){return Object.keys(_).reduce((b,P)=>{const z=_[P];return null!=z&&(b[P]=z),b},{})}processNavigations(){this.navigations.subscribe(_=>{this.navigated=!0,this.lastSuccessfulId=_.id,this.currentPageId=_.targetPageId,this.events.next(new Di(_.id,this.serializeUrl(_.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.titleStrategy?.updateTitle(this.routerState.snapshot),_.resolve(!0)},_=>{this.console.warn(`Unhandled Navigation Error: ${_}`)})}scheduleNavigation(_,b,P,z,te){if(this.disposed)return Promise.resolve(!1);let pe,tt,Ot;te?(pe=te.resolve,tt=te.reject,Ot=te.promise):Ot=new Promise((Dn,zn)=>{pe=Dn,tt=zn});const rn=++this.navigationId;let Wt;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(P=this.location.getState()),Wt=P&&P.\u0275routerPageId?P.\u0275routerPageId:z.replaceUrl||z.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1):Wt=0,this.setTransition({id:rn,targetPageId:Wt,source:b,restoredState:P,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:_,extras:z,resolve:pe,reject:tt,promise:Ot,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),Ot.catch(Dn=>Promise.reject(Dn))}setBrowserUrl(_,b){const P=this.urlSerializer.serialize(_),z={...b.extras.state,...this.generateNgRouterState(b.id,b.targetPageId)};this.location.isCurrentPathEqualTo(P)||b.extras.replaceUrl?this.location.replaceState(P,"",z):this.location.go(P,"",z)}restoreHistory(_,b=!1){if("computed"===this.canceledNavigationResolution){const P=this.currentPageId-_.targetPageId;"popstate"!==_.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.currentNavigation?.finalUrl||0===P?this.currentUrlTree===this.currentNavigation?.finalUrl&&0===P&&(this.resetState(_),this.browserUrlTree=_.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(P)}else"replace"===this.canceledNavigationResolution&&(b&&this.resetState(_),this.resetUrlToCurrentUrlTree())}resetState(_){this.routerState=_.currentRouterState,this.currentUrlTree=_.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,_.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(_,b,P){const z=new No(_.id,this.serializeUrl(_.extractedUrl),b,P);this.triggerEvent(z),_.resolve(!1)}generateNgRouterState(_,b){return"computed"===this.canceledNavigationResolution?{navigationId:_,\u0275routerPageId:b}:{navigationId:_}}}return v.\u0275fac=function(_){p.$Z()},v.\u0275prov=p.Yz7({token:v,factory:function(){return zi()},providedIn:"root"}),v})();function Ia(v){return"imperative"!==v}let Pa=(()=>{class v{constructor(_,b,P){this.router=_,this.route=b,this.locationStrategy=P,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.commands=null,this.href=null,this.onChanges=new be.x,this.subscription=_.events.subscribe(z=>{z instanceof Di&&this.updateTargetUrlAndHref()})}set preserveFragment(_){this._preserveFragment=(0,p.D6c)(_)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(_){this._skipLocationChange=(0,p.D6c)(_)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(_){this._replaceUrl=(0,p.D6c)(_)}get replaceUrl(){return this._replaceUrl}set routerLink(_){this.commands=null!=_?Array.isArray(_)?_:[_]:null}ngOnChanges(_){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(_,b,P,z,te){return!!(0!==_||b||P||z||te||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!1)}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return v.\u0275fac=function(_){return new(_||v)(p.Y36(Wi),p.Y36(xi),p.Y36(De.S$))},v.\u0275dir=p.lG2({type:v,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(_,b){1&_&&p.NdJ("click",function(z){return b.onClick(z.button,z.ctrlKey,z.shiftKey,z.altKey,z.metaKey)}),2&_&&p.uIk("target",b.target)("href",b.href,p.LSH)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[p.TTD]}),v})();class pa{}let ga=(()=>{class v{constructor(_,b,P,z,te){this.router=_,this.injector=P,this.preloadingStrategy=z,this.loader=te}setUpPreloading(){this.subscription=this.router.events.pipe((0,bt.h)(_=>_ instanceof Di),(0,ft.b)(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(_,b){const P=[];for(const z of b){z.providers&&!z._injector&&(z._injector=(0,p.MMx)(z.providers,_,`Route: ${z.path}`));const te=z._injector??_,pe=z._loadedInjector??te;z.loadChildren&&!z._loadedRoutes&&void 0===z.canLoad||z.loadComponent&&!z._loadedComponent?P.push(this.preloadConfig(te,z)):(z.children||z._loadedRoutes)&&P.push(this.processRoutes(pe,z.children??z._loadedRoutes))}return(0,C.D)(P).pipe((0,ur.J)())}preloadConfig(_,b){return this.preloadingStrategy.preload(b,()=>{let P;P=b.loadChildren&&void 0===b.canLoad?this.loader.loadChildren(_,b):(0,G.of)(null);const z=P.pipe((0,Mt.z)(te=>null===te?(0,G.of)(void 0):(b._loadedRoutes=te.routes,b._loadedInjector=te.injector,this.processRoutes(te.injector??_,te.routes))));if(b.loadComponent&&!b._loadedComponent){const te=this.loader.loadComponent(b);return(0,C.D)([z,te]).pipe((0,ur.J)())}return z})}}return v.\u0275fac=function(_){return new(_||v)(p.LFG(Wi),p.LFG(p.Sil),p.LFG(p.lqb),p.LFG(pa),p.LFG(Nr))},v.\u0275prov=p.Yz7({token:v,factory:v.\u0275fac,providedIn:"root"}),v})();const In=new p.OlP("");let wo=(()=>{class v{constructor(_,b,P={}){this.router=_,this.viewportScroller=b,this.options=P,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},P.scrollPositionRestoration=P.scrollPositionRestoration||"disabled",P.anchorScrolling=P.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(_=>{_ instanceof co?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=_.navigationTrigger,this.restoredId=_.restoredState?_.restoredState.navigationId:0):_ instanceof Di&&(this.lastId=_.id,this.scheduleScrollEvent(_,this.router.parseUrl(_.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(_=>{_ instanceof Oi&&(_.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(_.position):_.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(_.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(_,b){this.router.triggerEvent(new Oi(_,"popstate"===this.lastSource?this.store[this.restoredId]:null,b))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return v.\u0275fac=function(_){p.$Z()},v.\u0275prov=p.Yz7({token:v,factory:v.\u0275fac}),v})();function Go(v,w){return{\u0275kind:v,\u0275providers:w}}function gr(v){return[{provide:Tt,multi:!0,useValue:v}]}function mi(){const v=(0,p.f3M)(p.zs3);return w=>{const _=v.get(p.z2F);if(w!==_.components[0])return;const b=v.get(Wi),P=v.get(zt);1===v.get(ta)&&b.initialNavigation(),v.get(Da,null,p.XFs.Optional)?.setUpPreloading(),v.get(In,null,p.XFs.Optional)?.init(),b.resetRootComponentType(_.componentTypes[0]),P.next(),P.complete()}}const zt=new p.OlP("",{factory:()=>new be.x}),ta=new p.OlP("",{providedIn:"root",factory:()=>1});const Da=new p.OlP("");function ka(v){return Go(0,[{provide:Da,useExisting:ga},{provide:pa,useExisting:v}])}const yi=new p.OlP("ROUTER_FORROOT_GUARD"),ou=[De.Ye,{provide:yt,useClass:Rt},{provide:Wi,useFactory:zi},ii,{provide:xi,useFactory:function On(v){return v.routerState.root},deps:[Wi]},Nr];function Ca(){return new p.PXZ("Router",Wi)}let na=(()=>{class v{constructor(_){}static forRoot(_,b){return{ngModule:v,providers:[ou,[],gr(_),{provide:yi,useFactory:ba,deps:[[Wi,new p.FiY,new p.tp0]]},{provide:Oa,useValue:b||{}},b?.useHash?{provide:De.S$,useClass:De.Do}:{provide:De.S$,useClass:De.b0},{provide:In,useFactory:()=>{const v=(0,p.f3M)(Wi),w=(0,p.f3M)(De.EM),_=(0,p.f3M)(Oa);return _.scrollOffset&&w.setOffset(_.scrollOffset),new wo(v,w,_)}},b?.preloadingStrategy?ka(b.preloadingStrategy).\u0275providers:[],{provide:p.PXZ,multi:!0,useFactory:Ca},b?.initialNavigation?Is(b):[],[{provide:qa,useFactory:mi},{provide:p.tb,multi:!0,useExisting:qa}]]}}static forChild(_){return{ngModule:v,providers:[gr(_)]}}}return v.\u0275fac=function(_){return new(_||v)(p.LFG(yi,8))},v.\u0275mod=p.oAB({type:v}),v.\u0275inj=p.cJS({imports:[vs]}),v})();function ba(v){return"guarded"}function Is(v){return["disabled"===v.initialNavigation?Go(3,[{provide:p.ip1,multi:!0,useFactory:()=>{const w=(0,p.f3M)(Wi);return()=>{w.setUpLocationChangeListener()}}},{provide:ta,useValue:2}]).\u0275providers:[],"enabledBlocking"===v.initialNavigation?Go(2,[{provide:ta,useValue:0},{provide:p.ip1,multi:!0,deps:[p.zs3],useFactory:w=>{const _=w.get(De.V_,Promise.resolve(null));let b=!1;return()=>_.then(()=>new Promise(z=>{const te=w.get(Wi),pe=w.get(zt);(function P(z){w.get(Wi).events.pipe((0,bt.h)(pe=>pe instanceof Di||pe instanceof No||pe instanceof Po),(0,de.U)(pe=>pe instanceof Di||pe instanceof No&&(0===pe.code||1===pe.code)&&null),(0,bt.h)(pe=>null!==pe),(0,dt.q)(1)).subscribe(()=>{z()})})(()=>{z(!0),b=!0}),te.afterPreactivation=()=>(z(!0),b||pe.closed?(0,G.of)(void 0):pe),te.initialNavigation()}))}}]).\u0275providers:[]]}const qa=new p.OlP("")},3942:(Gt,qe,U)=>{U.d(qe,{Z:()=>Ke});var p=U(2090),C=U(4859),G=U(9681),be=U(1877);class we{constructor(Ye,He){this._delegate=Ye,this.firebase=He,(0,G._addComponent)(Ye,new C.wA("app-compat",()=>this,"PUBLIC")),this.container=Ye.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Ye){this._delegate.automaticDataCollectionEnabled=Ye}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(Ye=>{this._delegate.checkDestroyed(),Ye()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,G.deleteApp)(this._delegate)))}_getService(Ye,He=G._DEFAULT_ENTRY_NAME){var Ut;this._delegate.checkDestroyed();const Bt=this._delegate.container.getProvider(Ye);return!Bt.isInitialized()&&"EXPLICIT"===(null===(Ut=Bt.getComponent())||void 0===Ut?void 0:Ut.instantiationMode)&&Bt.initialize(),Bt.getImmediate({identifier:He})}_removeServiceInstance(Ye,He=G._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(Ye).clearInstance(He)}_addComponent(Ye){(0,G._addComponent)(this._delegate,Ye)}_addOrOverwriteComponent(Ye){(0,G._addOrOverwriteComponent)(this._delegate,Ye)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const Re=new p.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),ce=function Fe(){const Nt=function Oe(Nt){const Ye={},He={__esModule:!0,initializeApp:function he(nt,ae={}){const Le=G.initializeApp(nt,ae);if((0,p.r3)(Ye,Le.name))return Ye[Le.name];const ne=new Nt(Le,He);return Ye[Le.name]=ne,ne},app:Bt,registerVersion:G.registerVersion,setLogLevel:G.setLogLevel,onLog:G.onLog,apps:null,SDK_VERSION:G.SDK_VERSION,INTERNAL:{registerComponent:function Xe(nt){const ae=nt.name,Le=ae.replace("-compat","");if(G._registerComponent(nt)&&"PUBLIC"===nt.type){const ne=(De=Bt())=>{if("function"!=typeof De[Le])throw Re.create("invalid-app-argument",{appName:ae});return De[Le]()};void 0!==nt.serviceProps&&(0,p.ZB)(ne,nt.serviceProps),He[Le]=ne,Nt.prototype[Le]=function(...De){return this._getService.bind(this,ae).apply(this,nt.multipleInstances?De:[])}}return"PUBLIC"===nt.type?He[Le]:null},removeApp:function Ut(nt){delete Ye[nt]},useAsService:function _t(nt,ae){return"serverAuth"===ae?null:ae},modularAPIs:G}};function Bt(nt){if(!(0,p.r3)(Ye,nt=nt||G._DEFAULT_ENTRY_NAME))throw Re.create("no-app",{appName:nt});return Ye[nt]}return He.default=He,Object.defineProperty(He,"apps",{get:function it(){return Object.keys(Ye).map(nt=>Ye[nt])}}),Bt.App=Nt,He}(we);return Nt.INTERNAL=Object.assign(Object.assign({},Nt.INTERNAL),{createFirebaseNamespace:Fe,extendNamespace:function Ye(He){(0,p.ZB)(Nt,He)},createSubscribe:p.ne,ErrorFactory:p.LL,deepExtend:p.ZB}),Nt}(),le=new be.Yd("@firebase/app-compat");if((0,p.jU)()&&void 0!==self.firebase){le.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Nt=self.firebase.SDK_VERSION;Nt&&Nt.indexOf("LITE")>=0&&le.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Ke=ce;!function ot(Nt){(0,G.registerVersion)("@firebase/app-compat","0.1.33",Nt)}()},9681:(Gt,qe,U)=>{U.r(qe),U.d(qe,{FirebaseError:()=>be.ZR,SDK_VERSION:()=>Ar,_DEFAULT_ENTRY_NAME:()=>$t,_addComponent:()=>on,_addOrOverwriteComponent:()=>Ft,_apps:()=>tn,_clearComponents:()=>Ei,_components:()=>qt,_getProvider:()=>an,_registerComponent:()=>Mn,_removeServiceInstance:()=>Fn,deleteApp:()=>lr,getApp:()=>nr,getApps:()=>$n,initializeApp:()=>Jt,onLog:()=>Cn,registerVersion:()=>Bn,setLogLevel:()=>Hn});var p=U(5861),C=U(4859),G=U(1877),be=U(2090),we=U(8766);class Me{constructor(Ee){this.container=Ee}getPlatformInfoString(){return this.container.getProviders().map(me=>{if(function Re(oe){return"VERSION"===oe.getComponent()?.type}(me)){const ut=me.getImmediate();return`${ut.library}/${ut.version}`}return null}).filter(me=>me).join(" ")}}const Oe="@firebase/app",ce=new G.Yd("@firebase/app"),$t="[DEFAULT]",ft={[Oe]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},tn=new Map,qt=new Map;function on(oe,Ee){try{oe.container.addComponent(Ee)}catch(me){ce.debug(`Component ${Ee.name} failed to register with FirebaseApp ${oe.name}`,me)}}function Ft(oe,Ee){oe.container.addOrOverwriteComponent(Ee)}function Mn(oe){const Ee=oe.name;if(qt.has(Ee))return ce.debug(`There were multiple attempts to register component ${Ee}.`),!1;qt.set(Ee,oe);for(const me of tn.values())on(me,oe);return!0}function an(oe,Ee){const me=oe.container.getProvider("heartbeat").getImmediate({optional:!0});return me&&me.triggerHeartbeat(),oe.container.getProvider(Ee)}function Fn(oe,Ee,me=$t){an(oe,Ee).clearInstance(me)}function Ei(){qt.clear()}const mr=new be.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class ur{constructor(Ee,me,ut){this._isDeleted=!1,this._options=Object.assign({},Ee),this._config=Object.assign({},me),this._name=me.name,this._automaticDataCollectionEnabled=me.automaticDataCollectionEnabled,this._container=ut,this.container.addComponent(new C.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Ee){this.checkDestroyed(),this._automaticDataCollectionEnabled=Ee}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Ee){this._isDeleted=Ee}checkDestroyed(){if(this.isDeleted)throw mr.create("app-deleted",{appName:this._name})}}const Ar="9.9.4";function Jt(oe,Ee={}){"object"!=typeof Ee&&(Ee={name:Ee});const me=Object.assign({name:$t,automaticDataCollectionEnabled:!1},Ee),ut=me.name;if("string"!=typeof ut||!ut)throw mr.create("bad-app-name",{appName:String(ut)});const yt=tn.get(ut);if(yt){if((0,be.vZ)(oe,yt.options)&&(0,be.vZ)(me,yt.config))return yt;throw mr.create("duplicate-app",{appName:ut})}const Rt=new C.H0(ut);for(const Tn of qt.values())Rt.addComponent(Tn);const ir=new ur(oe,me,Rt);return tn.set(ut,ir),ir}function nr(oe=$t){const Ee=tn.get(oe);if(!Ee)throw mr.create("no-app",{appName:oe});return Ee}function $n(){return Array.from(tn.values())}function lr(oe){return pt.apply(this,arguments)}function pt(){return(pt=(0,p.Z)(function*(oe){const Ee=oe.name;tn.has(Ee)&&(tn.delete(Ee),yield Promise.all(oe.container.getProviders().map(me=>me.delete())),oe.isDeleted=!0)})).apply(this,arguments)}function Bn(oe,Ee,me){var ut;let yt=null!==(ut=ft[oe])&&void 0!==ut?ut:oe;me&&(yt+=`-${me}`);const Rt=yt.match(/\s|\//),ir=Ee.match(/\s|\//);if(Rt||ir){const Tn=[`Unable to register library "${yt}" with version "${Ee}":`];return Rt&&Tn.push(`library name "${yt}" contains illegal characters (whitespace or "/")`),Rt&&ir&&Tn.push("and"),ir&&Tn.push(`version name "${Ee}" contains illegal characters (whitespace or "/")`),void ce.warn(Tn.join(" "))}Mn(new C.wA(`${yt}-version`,()=>({library:yt,version:Ee}),"VERSION"))}function Cn(oe,Ee){if(null!==oe&&"function"!=typeof oe)throw mr.create("invalid-log-argument");(0,G.Am)(oe,Ee)}function Hn(oe){(0,G.Ub)(oe)}const xr="firebase-heartbeat-store";let $e=null;function ye(){return $e||($e=(0,we.X3)("firebase-heartbeat-database",1,{upgrade:(oe,Ee)=>{0===Ee&&oe.createObjectStore(xr)}}).catch(oe=>{throw mr.create("idb-open",{originalErrorMessage:oe.message})})),$e}function Be(){return(Be=(0,p.Z)(function*(oe){var Ee;try{return(yield ye()).transaction(xr).objectStore(xr).get(un(oe))}catch(me){if(me instanceof be.ZR)ce.warn(me.message);else{const ut=mr.create("idb-get",{originalErrorMessage:null===(Ee=me)||void 0===Ee?void 0:Ee.message});ce.warn(ut.message)}}})).apply(this,arguments)}function We(oe,Ee){return Lt.apply(this,arguments)}function Lt(){return(Lt=(0,p.Z)(function*(oe,Ee){var me;try{const yt=(yield ye()).transaction(xr,"readwrite");return yield yt.objectStore(xr).put(Ee,un(oe)),yt.done}catch(ut){if(ut instanceof be.ZR)ce.warn(ut.message);else{const yt=mr.create("idb-set",{originalErrorMessage:null===(me=ut)||void 0===me?void 0:me.message});ce.warn(yt.message)}}})).apply(this,arguments)}function un(oe){return`${oe.name}!${oe.options.appId}`}class rr{constructor(Ee){this.container=Ee,this._heartbeatsCache=null;const me=this.container.getProvider("app").getImmediate();this._storage=new pn(me),this._heartbeatsCachePromise=this._storage.read().then(ut=>(this._heartbeatsCache=ut,ut))}triggerHeartbeat(){var Ee=this;return(0,p.Z)(function*(){const ut=Ee.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),yt=Sn();if(null===Ee._heartbeatsCache&&(Ee._heartbeatsCache=yield Ee._heartbeatsCachePromise),Ee._heartbeatsCache.lastSentHeartbeatDate!==yt&&!Ee._heartbeatsCache.heartbeats.some(Rt=>Rt.date===yt))return Ee._heartbeatsCache.heartbeats.push({date:yt,agent:ut}),Ee._heartbeatsCache.heartbeats=Ee._heartbeatsCache.heartbeats.filter(Rt=>{const ir=new Date(Rt.date).valueOf();return Date.now()-ir<=2592e6}),Ee._storage.overwrite(Ee._heartbeatsCache)})()}getHeartbeatsHeader(){var Ee=this;return(0,p.Z)(function*(){if(null===Ee._heartbeatsCache&&(yield Ee._heartbeatsCachePromise),null===Ee._heartbeatsCache||0===Ee._heartbeatsCache.heartbeats.length)return"";const me=Sn(),{heartbeatsToSend:ut,unsentEntries:yt}=function Mr(oe,Ee=1024){const me=[];let ut=oe.slice();for(const yt of oe){const Rt=me.find(ir=>ir.agent===yt.agent);if(Rt){if(Rt.dates.push(yt.date),ge(me)>Ee){Rt.dates.pop();break}}else if(me.push({agent:yt.agent,dates:[yt.date]}),ge(me)>Ee){me.pop();break}ut=ut.slice(1)}return{heartbeatsToSend:me,unsentEntries:ut}}(Ee._heartbeatsCache.heartbeats),Rt=(0,be.L)(JSON.stringify({version:2,heartbeats:ut}));return Ee._heartbeatsCache.lastSentHeartbeatDate=me,yt.length>0?(Ee._heartbeatsCache.heartbeats=yt,yield Ee._storage.overwrite(Ee._heartbeatsCache)):(Ee._heartbeatsCache.heartbeats=[],Ee._storage.overwrite(Ee._heartbeatsCache)),Rt})()}}function Sn(){return(new Date).toISOString().substring(0,10)}class pn{constructor(Ee){this.app=Ee,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,p.Z)(function*(){return!!(0,be.hl)()&&(0,be.eu)().then(()=>!0).catch(()=>!1)})()}read(){var Ee=this;return(0,p.Z)(function*(){return(yield Ee._canUseIndexedDBPromise)&&(yield function se(oe){return Be.apply(this,arguments)}(Ee.app))||{heartbeats:[]}})()}overwrite(Ee){var me=this;return(0,p.Z)(function*(){var ut;if(yield me._canUseIndexedDBPromise){const Rt=yield me.read();return We(me.app,{lastSentHeartbeatDate:null!==(ut=Ee.lastSentHeartbeatDate)&&void 0!==ut?ut:Rt.lastSentHeartbeatDate,heartbeats:Ee.heartbeats})}})()}add(Ee){var me=this;return(0,p.Z)(function*(){var ut;if(yield me._canUseIndexedDBPromise){const Rt=yield me.read();return We(me.app,{lastSentHeartbeatDate:null!==(ut=Ee.lastSentHeartbeatDate)&&void 0!==ut?ut:Rt.lastSentHeartbeatDate,heartbeats:[...Rt.heartbeats,...Ee.heartbeats]})}})()}}function ge(oe){return(0,be.L)(JSON.stringify({version:2,heartbeats:oe})).length}!function X(oe){Mn(new C.wA("platform-logger",Ee=>new Me(Ee),"PRIVATE")),Mn(new C.wA("heartbeat",Ee=>new rr(Ee),"PRIVATE")),Bn(Oe,"0.7.32",oe),Bn(Oe,"0.7.32","esm2017"),Bn("fire-js","")}("")},4859:(Gt,qe,U)=>{U.d(qe,{H0:()=>Oe,wA:()=>G});var p=U(5861),C=U(2090);class G{constructor(ce,le,Ce){this.name=ce,this.instanceFactory=le,this.type=Ce,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(ce){return this.instantiationMode=ce,this}setMultipleInstances(ce){return this.multipleInstances=ce,this}setServiceProps(ce){return this.serviceProps=ce,this}setInstanceCreatedCallback(ce){return this.onInstanceCreated=ce,this}}const be="[DEFAULT]";class we{constructor(ce,le){this.name=ce,this.container=le,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(ce){const le=this.normalizeInstanceIdentifier(ce);if(!this.instancesDeferred.has(le)){const Ce=new C.BH;if(this.instancesDeferred.set(le,Ce),this.isInitialized(le)||this.shouldAutoInitialize())try{const mt=this.getOrInitializeService({instanceIdentifier:le});mt&&Ce.resolve(mt)}catch{}}return this.instancesDeferred.get(le).promise}getImmediate(ce){var le;const Ce=this.normalizeInstanceIdentifier(ce?.identifier),mt=null!==(le=ce?.optional)&&void 0!==le&&le;if(!this.isInitialized(Ce)&&!this.shouldAutoInitialize()){if(mt)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:Ce})}catch(ot){if(mt)return null;throw ot}}getComponent(){return this.component}setComponent(ce){if(ce.name!==this.name)throw Error(`Mismatching Component ${ce.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=ce,this.shouldAutoInitialize()){if(function Re(Fe){return"EAGER"===Fe.instantiationMode}(ce))try{this.getOrInitializeService({instanceIdentifier:be})}catch{}for(const[le,Ce]of this.instancesDeferred.entries()){const mt=this.normalizeInstanceIdentifier(le);try{const ot=this.getOrInitializeService({instanceIdentifier:mt});Ce.resolve(ot)}catch{}}}}clearInstance(ce=be){this.instancesDeferred.delete(ce),this.instancesOptions.delete(ce),this.instances.delete(ce)}delete(){var ce=this;return(0,p.Z)(function*(){const le=Array.from(ce.instances.values());yield Promise.all([...le.filter(Ce=>"INTERNAL"in Ce).map(Ce=>Ce.INTERNAL.delete()),...le.filter(Ce=>"_delete"in Ce).map(Ce=>Ce._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(ce=be){return this.instances.has(ce)}getOptions(ce=be){return this.instancesOptions.get(ce)||{}}initialize(ce={}){const{options:le={}}=ce,Ce=this.normalizeInstanceIdentifier(ce.instanceIdentifier);if(this.isInitialized(Ce))throw Error(`${this.name}(${Ce}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const mt=this.getOrInitializeService({instanceIdentifier:Ce,options:le});for(const[ot,Ke]of this.instancesDeferred.entries())Ce===this.normalizeInstanceIdentifier(ot)&&Ke.resolve(mt);return mt}onInit(ce,le){var Ce;const mt=this.normalizeInstanceIdentifier(le),ot=null!==(Ce=this.onInitCallbacks.get(mt))&&void 0!==Ce?Ce:new Set;ot.add(ce),this.onInitCallbacks.set(mt,ot);const Ke=this.instances.get(mt);return Ke&&ce(Ke,mt),()=>{ot.delete(ce)}}invokeOnInitCallbacks(ce,le){const Ce=this.onInitCallbacks.get(le);if(Ce)for(const mt of Ce)try{mt(ce,le)}catch{}}getOrInitializeService({instanceIdentifier:ce,options:le={}}){let Ce=this.instances.get(ce);if(!Ce&&this.component&&(Ce=this.component.instanceFactory(this.container,{instanceIdentifier:(Fe=ce,Fe===be?void 0:Fe),options:le}),this.instances.set(ce,Ce),this.instancesOptions.set(ce,le),this.invokeOnInitCallbacks(Ce,ce),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,ce,Ce)}catch{}var Fe;return Ce||null}normalizeInstanceIdentifier(ce=be){return this.component?this.component.multipleInstances?ce:be:ce}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Oe{constructor(ce){this.name=ce,this.providers=new Map}addComponent(ce){const le=this.getProvider(ce.name);if(le.isComponentSet())throw new Error(`Component ${ce.name} has already been registered with ${this.name}`);le.setComponent(ce)}addOrOverwriteComponent(ce){this.getProvider(ce.name).isComponentSet()&&this.providers.delete(ce.name),this.addComponent(ce)}getProvider(ce){if(this.providers.has(ce))return this.providers.get(ce);const le=new we(ce,this);return this.providers.set(ce,le),le}getProviders(){return Array.from(this.providers.values())}}},1877:(Gt,qe,U)=>{U.d(qe,{Am:()=>Fe,Ub:()=>Oe,Yd:()=>Re,in:()=>C});const p=[];var C=(()=>{return(ce=C||(C={}))[ce.DEBUG=0]="DEBUG",ce[ce.VERBOSE=1]="VERBOSE",ce[ce.INFO=2]="INFO",ce[ce.WARN=3]="WARN",ce[ce.ERROR=4]="ERROR",ce[ce.SILENT=5]="SILENT",C;var ce})();const G={debug:C.DEBUG,verbose:C.VERBOSE,info:C.INFO,warn:C.WARN,error:C.ERROR,silent:C.SILENT},be=C.INFO,we={[C.DEBUG]:"log",[C.VERBOSE]:"log",[C.INFO]:"info",[C.WARN]:"warn",[C.ERROR]:"error"},Me=(ce,le,...Ce)=>{if(le<ce.logLevel)return;const mt=(new Date).toISOString(),ot=we[le];if(!ot)throw new Error(`Attempted to log a message with an invalid logType (value: ${le})`);console[ot](`[${mt}]  ${ce.name}:`,...Ce)};class Re{constructor(le){this.name=le,this._logLevel=be,this._logHandler=Me,this._userLogHandler=null,p.push(this)}get logLevel(){return this._logLevel}set logLevel(le){if(!(le in C))throw new TypeError(`Invalid value "${le}" assigned to \`logLevel\``);this._logLevel=le}setLogLevel(le){this._logLevel="string"==typeof le?G[le]:le}get logHandler(){return this._logHandler}set logHandler(le){if("function"!=typeof le)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=le}get userLogHandler(){return this._userLogHandler}set userLogHandler(le){this._userLogHandler=le}debug(...le){this._userLogHandler&&this._userLogHandler(this,C.DEBUG,...le),this._logHandler(this,C.DEBUG,...le)}log(...le){this._userLogHandler&&this._userLogHandler(this,C.VERBOSE,...le),this._logHandler(this,C.VERBOSE,...le)}info(...le){this._userLogHandler&&this._userLogHandler(this,C.INFO,...le),this._logHandler(this,C.INFO,...le)}warn(...le){this._userLogHandler&&this._userLogHandler(this,C.WARN,...le),this._logHandler(this,C.WARN,...le)}error(...le){this._userLogHandler&&this._userLogHandler(this,C.ERROR,...le),this._logHandler(this,C.ERROR,...le)}}function Oe(ce){p.forEach(le=>{le.setLogLevel(ce)})}function Fe(ce,le){for(const Ce of p){let mt=null;le&&le.level&&(mt=G[le.level]),Ce.userLogHandler=null===ce?null:(ot,Ke,...Nt)=>{const Ye=Nt.map(He=>{if(null==He)return null;if("string"==typeof He)return He;if("number"==typeof He||"boolean"==typeof He)return He.toString();if(He instanceof Error)return He.message;try{return JSON.stringify(He)}catch{return null}}).filter(He=>He).join(" ");Ke>=(mt??ot.logLevel)&&ce({level:C[Ke].toLowerCase(),message:Ye,args:Nt,type:ot.name})}}}},8766:(Gt,qe,U)=>{U.d(qe,{Lj:()=>he,X3:()=>Bt});var p=U(5861);let G,be;const Re=new WeakMap,Oe=new WeakMap,Fe=new WeakMap,ce=new WeakMap,le=new WeakMap;let ot={get(ae,Le,ne){if(ae instanceof IDBTransaction){if("done"===Le)return Oe.get(ae);if("objectStoreNames"===Le)return ae.objectStoreNames||Fe.get(ae);if("store"===Le)return ne.objectStoreNames[1]?void 0:ne.objectStore(ne.objectStoreNames[0])}return He(ae[Le])},set:(ae,Le,ne)=>(ae[Le]=ne,!0),has:(ae,Le)=>ae instanceof IDBTransaction&&("done"===Le||"store"===Le)||Le in ae};function Ye(ae){return"function"==typeof ae?function Nt(ae){return ae!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Me(){return be||(be=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(ae)?function(...Le){return ae.apply(Ut(this),Le),He(Re.get(this))}:function(...Le){return He(ae.apply(Ut(this),Le))}:function(Le,...ne){const De=ae.call(Ut(this),Le,...ne);return Fe.set(De,Le.sort?Le.sort():[Le]),He(De)}}(ae):(ae instanceof IDBTransaction&&function mt(ae){if(Oe.has(ae))return;const Le=new Promise((ne,De)=>{const de=()=>{ae.removeEventListener("complete",Ne),ae.removeEventListener("error",dt),ae.removeEventListener("abort",dt)},Ne=()=>{ne(),de()},dt=()=>{De(ae.error||new DOMException("AbortError","AbortError")),de()};ae.addEventListener("complete",Ne),ae.addEventListener("error",dt),ae.addEventListener("abort",dt)});Oe.set(ae,Le)}(ae),((ae,Le)=>Le.some(ne=>ae instanceof ne))(ae,function we(){return G||(G=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(ae,ot):ae)}function He(ae){if(ae instanceof IDBRequest)return function Ce(ae){const Le=new Promise((ne,De)=>{const de=()=>{ae.removeEventListener("success",Ne),ae.removeEventListener("error",dt)},Ne=()=>{ne(He(ae.result)),de()},dt=()=>{De(ae.error),de()};ae.addEventListener("success",Ne),ae.addEventListener("error",dt)});return Le.then(ne=>{ne instanceof IDBCursor&&Re.set(ne,ae)}).catch(()=>{}),le.set(Le,ae),Le}(ae);if(ce.has(ae))return ce.get(ae);const Le=Ye(ae);return Le!==ae&&(ce.set(ae,Le),le.set(Le,ae)),Le}const Ut=ae=>le.get(ae);function Bt(ae,Le,{blocked:ne,upgrade:De,blocking:de,terminated:Ne}={}){const dt=indexedDB.open(ae,Le),wt=He(dt);return De&&dt.addEventListener("upgradeneeded",bt=>{De(He(dt.result),bt.oldVersion,bt.newVersion,He(dt.transaction))}),ne&&dt.addEventListener("blocked",()=>ne()),wt.then(bt=>{Ne&&bt.addEventListener("close",()=>Ne()),de&&bt.addEventListener("versionchange",()=>de())}).catch(()=>{}),wt}function he(ae,{blocked:Le}={}){const ne=indexedDB.deleteDatabase(ae);return Le&&ne.addEventListener("blocked",()=>Le()),He(ne).then(()=>{})}const it=["get","getKey","getAll","getAllKeys","count"],Xe=["put","add","delete","clear"],_t=new Map;function nt(ae,Le){if(!(ae instanceof IDBDatabase)||Le in ae||"string"!=typeof Le)return;if(_t.get(Le))return _t.get(Le);const ne=Le.replace(/FromIndex$/,""),De=Le!==ne,de=Xe.includes(ne);if(!(ne in(De?IDBIndex:IDBObjectStore).prototype)||!de&&!it.includes(ne))return;const Ne=function(){var dt=(0,p.Z)(function*(wt,...bt){const Mt=this.transaction(wt,de?"readwrite":"readonly");let $t=Mt.store;return De&&($t=$t.index(bt.shift())),(yield Promise.all([$t[ne](...bt),de&&Mt.done]))[0]});return function(bt){return dt.apply(this,arguments)}}();return _t.set(Le,Ne),Ne}!function Ke(ae){ot=ae(ot)}(ae=>({...ae,get:(Le,ne,De)=>nt(Le,ne)||ae.get(Le,ne,De),has:(Le,ne)=>!!nt(Le,ne)||ae.has(Le,ne)}))},5861:(Gt,qe,U)=>{function p(G,be,we,Me,Re,Oe,Fe){try{var ce=G[Oe](Fe),le=ce.value}catch(Ce){return void we(Ce)}ce.done?be(le):Promise.resolve(le).then(Me,Re)}function C(G){return function(){var be=this,we=arguments;return new Promise(function(Me,Re){var Oe=G.apply(be,we);function Fe(le){p(Oe,Me,Re,Fe,ce,"next",le)}function ce(le){p(Oe,Me,Re,Fe,ce,"throw",le)}Fe(void 0)})}}U.d(qe,{Z:()=>C})}},Gt=>{Gt(Gt.s=2358)}]);