"use strict";(self.webpackChunksala_juegos_2022=self.webpackChunksala_juegos_2022||[]).push([[993],{7993:(M,l,c)=>{c.r(l),c.d(l,{AhorcadoModule:()=>G});var a=c(6895),u=c(7001);class h{constructor(s,t,o){this.id="",this.user_id=s,this.score=t,this.timestamp=o}getLiteralObjectRepresentation(){return{user_id:this.user_id,score:this.score,timestamp:this.timestamp}}}class m{constructor(){this.words=[""],this.initialize()}initialize(){this.words="\n        serie lleg\xf3\n        organizaci\xf3n lleva\n        nuevas llevar\n        calidad lo\n        econom\xeda local\n        car\xe1cter l\xf3pez\n        jefe los\n        estamos lucha\n        prensa luego\n        control lugar\n        sociales luis\n        universidad luz\n        militar m\n        cabo madre\n        diez madrid\n        fuerzas mal\n        congreso manera\n        \xe9sta mano\n        hijos manos\n        justicia mantener\n        mundial manuel\n        d\xf3lares ma\xf1ana\n        juego mar\n        econ\xf3mica marcha\n        pol\xedticos marco\n        duda mar\xeda\n        recursos mart\xedn\n        p\xfablica marzo\n        crisis m\xe1s\n        cuales ministerio\n        manuel minutos\n        contrario ministro\n        garc\xeda mira\n        fuerte mirada\n        sol mis\n        j\xf3venes misma\n        apoyo mismo\n        habr\xeda mismos\n        civil mitad\n        miguel modelo\n        pedro modo\n        partidos momento\n        libre momentos\n        fuentes movimiento\n        administraci\xf3n mucha\n        com\xfan muchas\n        dejar mucho\n        cine muchos\n        salir muerte\n        comunicaci\xf3n muerto\n        b muestra\n        experiencia mujer\n        demasiado mujeres\n        plan mundial\n        respuesta mundo        \n        ".split(" ")}getRandomWord(){return this.words[Math.floor(Math.random()*this.words.length)].trim()}getWord(){let s=this.getRandomWord();for(;!this.accepted(s);)s=this.getRandomWord();return s}accepted(s){return!(s.includes("\xe9")||s.includes("\xe1")||s.includes("\xed")||s.includes("\xf3")||s.includes("\xfa")||s.includes("\xf1"))&&s.length>3}}var e=c(4650),p=c(7566);let g=(()=>{class n{constructor(t){this.firestore=t,this.collectionPath="/ahorcado_scores",this.ahorcadoScoresCollection=t.collection(this.collectionPath)}getDocuments(){return this.ahorcadoScoresCollection.valueChanges({idField:"id"})}addDocument(t){return this.ahorcadoScoresCollection.add(t)}updateDocument(t,o){return this.ahorcadoScoresCollection.doc(t).update(o)}deleteDocument(t){return this.ahorcadoScoresCollection.doc(t).delete()}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(p.ST))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var y=c(2557);const f=function(n){return{"space-bar":n}};let _=(()=>{class n{constructor(){this.keyValue="",this.onKeyPressed=new e.vpe,this.isSpaceBar=!1}keyPressed(){this.onKeyPressed.emit(this.keyValue)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["key"]],inputs:{keyValue:"keyValue",isSpaceBar:"isSpaceBar"},outputs:{onKeyPressed:"onKeyPressed"},decls:2,vars:4,consts:[["id","key-container",3,"ngClass","click"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0),e.NdJ("click",function(){return o.keyPressed()}),e._uU(1),e.qZA()),2&t&&(e.Q6J("ngClass",e.VKq(2,f,o.isSpaceBar)),e.xp6(1),e.hij(" ",o.keyValue,"\n"))},dependencies:[a.mk],styles:["@media (min-width: 480px){#key-container[_ngcontent-%COMP%]{padding:1vw 0vw;border:1px solid grey;display:flex;justify-content:center;align-items:center;min-width:5vw;border-radius:1rem;box-shadow:.1rem .1rem #0d6efd;cursor:pointer;-webkit-user-select:none;user-select:none}#key-container[_ngcontent-%COMP%]:active{transform:scale(.9)}.space-bar[_ngcontent-%COMP%]{margin:0 auto!important;width:25vw!important}}@media (max-width: 480px){#key-container[_ngcontent-%COMP%]{padding:.5vw 4vw;border:1px solid grey;display:flex;justify-content:center;align-items:center;min-width:5vw;min-height:8vw;border-radius:100%;box-shadow:.1rem .1rem #0d6efd;cursor:pointer;-webkit-user-select:none;user-select:none}#key-container[_ngcontent-%COMP%]:active{transform:scale(.9)}}"]}),n})();function v(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"key",3),e.NdJ("onKeyPressed",function(r){e.CHM(t);const i=e.oxw();return e.KtG(i.emitKey(r))}),e.qZA()}2&n&&e.Q6J("keyValue",s.$implicit)}let w=(()=>{class n{constructor(){this.keys=[],this.onKeyPressed=new e.vpe}ngOnInit(){this.populateKeys()}populateKeys(){for(let t=97;t<123;t++)this.keys.push(String.fromCharCode(t));this.keys.push("borrar")}emitKey(t){this.onKeyPressed.emit(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["onscreen-keyboard"]],outputs:{onKeyPressed:"onKeyPressed"},decls:4,vars:3,consts:[[3,"keyValue","onKeyPressed",4,"ngFor","ngForOf"],["id","flex-line-break"],[2,"flex-grow","2","margin-top","1.2vw",3,"keyValue","isSpaceBar","onKeyPressed"],[3,"keyValue","onKeyPressed"]],template:function(t,o){1&t&&(e.TgZ(0,"div"),e.YNc(1,v,1,1,"key",0),e._UZ(2,"div",1),e.TgZ(3,"key",2),e.NdJ("onKeyPressed",function(i){return o.emitKey(i)}),e.qZA()()),2&t&&(e.xp6(1),e.Q6J("ngForOf",o.keys),e.xp6(2),e.Q6J("keyValue"," ")("isSpaceBar",!0))},dependencies:[a.sg,_],styles:["div[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap}key[_ngcontent-%COMP%]{margin:0rem 1rem .5rem 0rem}#space-bar[_ngcontent-%COMP%]{margin:0 auto}#flex-line-break[_ngcontent-%COMP%]{flex-basis:100%;height:0}"]}),n})();function C(n,s){if(1&n&&e._uU(0),2&n){const t=e.oxw();e.hij(" ",t.exposedStr," ")}}function S(n,s){if(1&n&&e._uU(0),2&n){const t=e.oxw();e.hij(" ",t.stringToGuess," ")}}function x(n,s){if(1&n&&(e.TgZ(0,"div",9),e._uU(1),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.hij(" Chances: ",t.chances-t.wrongGuesses," ")}}function k(n,s){if(1&n&&(e.TgZ(0,"div",13),e._uU(1),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.hij(" \xa1Felicidades! Ganaste con ",t.chances-t.wrongGuesses," chances restantes. ")}}function b(n,s){1&n&&(e.TgZ(0,"div",13),e._uU(1," \xa1Perdiste! "),e._UZ(2,"img",14),e.qZA())}function A(n,s){if(1&n){const t=e.EpF();e.YNc(0,k,2,1,"div",10),e.YNc(1,b,3,0,"ng-template",null,11,e.W1O),e.TgZ(3,"button",12),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.reset())}),e._uU(4," Volver A Jugar "),e.qZA()}if(2&n){const t=e.MAs(2),o=e.oxw();e.Q6J("ngIf",o.won)("ngIfElse",t)}}function O(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"div",15)(1,"onscreen-keyboard",16),e.NdJ("onKeyPressed",function(r){e.CHM(t);const i=e.oxw();return e.KtG(i.makeGuess(r))}),e.qZA()()}}const P=function(n){return{"display-block":n}},K=[{path:"",children:[{path:"",component:(()=>{class n{constructor(t,o){this.scores=t,this.auth=o,this.playerScore={},this.stringToGuess="",this.notGuessed="",this.wrongGuesses=0,this.chances=5,this.exposedStr="",this.inputEnabled=!0,this.gameOver=!1,this.won=!1,this.wordBag=new m,this.stringToGuess=this.wordBag.getWord(),this.notGuessed=this.stringToGuess,this.setExposedStr()}ngOnInit(){this.initScore()}makeGuess(t){this.inputEnabled=!1,this.notGuessed.includes(t)?(this.notGuessed=this.notGuessed.split(t).join(""),this.revealChars(t,this.charPositionsInStr(this.stringToGuess,t,[]))):this.wrongGuesses++,this.wrongGuesses==this.chances&&this.defeat(),""==this.notGuessed&&this.victory(),this.gameOver||(this.inputEnabled=!0)}initScore(){this.scores.getDocuments().subscribe(t=>{const o=t.filter(r=>r.user_id==this.auth.GetCurrentUserID());if(0==o.length){const r=new h(this.auth.GetCurrentUserID(),0,Date.now().toString());this.scores.addDocument(r.getLiteralObjectRepresentation()).then(()=>this.playerScore=r)}else this.playerScore=o[0]})}defeat(){this.gameOver=!0,this.playerScore.score=this.playerScore.score-5,this.updateScore()}setExposedStr(){for(let t=0;t<this.stringToGuess.length;t++)this.exposedStr+="_"}revealChars(t,o){o.forEach(r=>{this.exposedStr=this.exposedStr.slice(0,r)+t+this.exposedStr.slice(r+1)})}charPositionsInStr(t,o,r,i=-1){const d=t.indexOf(o);return-1!==d?this.charPositionsInStr(t.slice(d+1),o,r.concat([d+(i+1)]),d):r}reset(){this.wordBag=new m,this.stringToGuess=this.wordBag.getWord(),this.chances=5,this.wrongGuesses=0,this.notGuessed=this.stringToGuess,this.exposedStr="",this.inputEnabled=!0,this.gameOver=!1,this.won=!1,this.setExposedStr()}victory(){this.gameOver=!0,this.won=!0,this.playerScore.score=this.playerScore.score+this.chances-this.wrongGuesses,this.updateScore()}updateScore(){this.playerScore.timestamp=Date.now().toString(),this.scores.updateDocument(this.playerScore.id,this.playerScore)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(g),e.Y36(y.e))},n.\u0275cmp=e.Xpm({type:n,selectors:[["ahorcado"]],decls:13,vars:9,consts:[["id","hangman-container",1,"mt-5",3,"ngClass"],["id","word-and-chances",1,"align-items-center","justify-content-center"],["id","word"],[3,"ngIf","ngIfElse"],["showWord",""],["id","chances",4,"ngIf","ngIfElse"],["gameOverBlock",""],[1,"row","mt-5","justify-content-center","align-items-center"],["id","input-zone",4,"ngIf"],["id","chances"],["style","font-size: 3rem;",4,"ngIf","ngIfElse"],["loseBlock",""],[1,"btn","btn-primary","mt-3",3,"click"],[2,"font-size","3rem"],["src","assets/hanged.gif"],["id","input-zone"],[3,"onKeyPressed"]],template:function(t,o){if(1&t&&(e.TgZ(0,"div",0)(1,"h5"),e._uU(2),e.qZA(),e.TgZ(3,"div",1)(4,"div",2),e.YNc(5,C,1,1,"ng-template",3),e.YNc(6,S,1,1,"ng-template",null,4,e.W1O),e.qZA(),e.YNc(8,x,2,1,"div",5),e.YNc(9,A,5,2,"ng-template",null,6,e.W1O),e.qZA(),e.TgZ(11,"div",7),e.YNc(12,O,2,0,"div",8),e.qZA()()),2&t){const r=e.MAs(7),i=e.MAs(10);e.Q6J("ngClass",e.VKq(7,P,o.gameOver)),e.xp6(2),e.hij("Puntuaci\xf3n: ",o.playerScore.score,""),e.xp6(3),e.Q6J("ngIf",!o.gameOver)("ngIfElse",r),e.xp6(3),e.Q6J("ngIf",!o.gameOver)("ngIfElse",i),e.xp6(4),e.Q6J("ngIf",o.inputEnabled)}},dependencies:[a.mk,a.O5,w],styles:["#word-and-chances[_ngcontent-%COMP%]{display:flex;justify-content:space-around;flex-direction:column;align-items:center}#word[_ngcontent-%COMP%], #chances[_ngcontent-%COMP%]{font-size:3rem}#input-zone[_ngcontent-%COMP%]{width:40%}.display-block[_ngcontent-%COMP%]{display:block!important}"]}),n})()}]}];let T=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[u.Bz.forChild(K),u.Bz]}),n})(),G=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[a.ez,T]}),n})()}}]);