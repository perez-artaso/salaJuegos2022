"use strict";(self.webpackChunksala_juegos_2022=self.webpackChunksala_juegos_2022||[]).push([[395],{8395:(P,d,i)=>{i.r(d),i.d(d,{PreguntadosBanderasModule:()=>x});var a=i(6895),p=i(7001);class g{constructor(r,e,o,s){this.id="",this.user_id=r,this.user_email=e,this.score=o,this.timestamp=s}getLiteralObjectRepresentation(){return{user_id:this.user_id,user_email:this.user_email,score:this.score,timestamp:this.timestamp}}}var t=i(4650),h=i(529);let m=(()=>{class n{constructor(e){this.http=e,this.url="https://restcountries.com/v3.1/all"}getCountries(){return this.http.get(this.url)}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(h.eN))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var f=i(873),v=i(2557);const C=function(n,r){return{correct:n,incorrect:r}};function O(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"div",9),t.NdJ("click",function(){const u=t.CHM(e).index,l=t.oxw(2);return t.KtG(l.onSelectedOption(null==l.options[u]?null:l.options[u].optionObject.name.common))}),t._uU(1),t.qZA()}if(2&n){const e=r.$implicit,o=r.index,s=t.oxw(2);t.Q6J("ngClass",t.WLB(2,C,1==(null==e?null:e.status),2==(null==e?null:e.status))),t.xp6(1),t.hij(" ",null==s.options[o]?null:s.options[o].optionObject.name.common," ")}}function _(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"div",2)(1,"div",3)(2,"button",10),t.NdJ("click",function(){t.CHM(e);const s=t.oxw(2);return t.KtG(s.newTry())}),t._uU(3,"SIGUIENTE"),t.qZA()(),t.TgZ(4,"div",3)(5,"h5",11),t._uU(6,"Cr\xe9ditos Espaciales"),t.qZA()(),t.TgZ(7,"div",3)(8,"h4",12),t._uU(9),t.qZA()()()}if(2&n){const e=t.oxw(2);t.xp6(9),t.Oqu(e.playerScore.score)}}function y(n,r){if(1&n&&(t.TgZ(0,"div",1)(1,"div",2)(2,"div",3),t._UZ(3,"img",4),t.qZA()(),t.TgZ(4,"div",5)(5,"div",6),t.YNc(6,O,2,5,"div",7),t.qZA()(),t.YNc(7,_,10,1,"div",8),t.qZA()),2&n){const e=t.oxw();t.xp6(3),t.Q6J("src",null==e.selectedOption?null:e.selectedOption.optionObject.flags.png,t.LSH),t.xp6(3),t.Q6J("ngForOf",e.options),t.xp6(1),t.Q6J("ngIf",0!=e.options[0].status)}}var c=(()=>{return(n=c||(c={}))[n.pendant=0]="pendant",n[n.isCorrect=1]="isCorrect",n[n.isIncorrect=2]="isIncorrect",c;var n})();const S=[{path:"",children:[{path:"",component:(()=>{class n{constructor(e,o,s){this.countryService=e,this.scores=o,this.auth=s,this.countries=[],this.options=[],this.selectedOption={},this.winFlag=!1,this.playerScore={}}ngOnInit(){this.countryService.getCountries().subscribe(e=>{this.countries=e,this.setOptions(this.countries.map(o=>o),3,0)}),this.initScore()}setOptions(e,o,s){o>s?(this.options[-1*(o-s-o)]={optionObject:e.splice(this.getRandomIntInRange(0,e.length-1),1)[0],status:c.pendant},this.setOptions(e,o,++s)):this.selectedOption=this.options[this.getRandomIntInRange(0,this.options.length-1)]}getOption(e){return e[this.getRandomIntInRange(0,e.length-1)]}getRandomCountry(){return this.countries[this.getRandomIntInRange(0,this.countries.length-1)]}getRandomIntInRange(e,o){return Math.floor(Math.random()*(o-e+1))+e}onSelectedOption(e){this.updateOptions(),e==this.selectedOption?.optionObject.name.common?(this.winFlag=!0,this.playerScore.score++,this.updateScore()):(this.playerScore.score--,this.updateScore())}newTry(){this.winFlag=!1,this.setOptions(this.countries.map(e=>e),3,0)}updateOptions(){this.options.forEach(e=>{e&&(e.status=e?.optionObject.name.common==this.selectedOption?.optionObject.name.common?c.isCorrect:c.isIncorrect)})}selectRandomFlag(){return this.options[this.getRandomIntInRange(0,this.options.length-1)]?.optionObject.flags.png}initScore(){this.scores.getDocuments().subscribe(e=>{const o=e.filter(s=>s.user_id==this.auth.GetCurrentUserID());if(0==o.length){const s=new g(this.auth.GetCurrentUserID(),this.auth.GetCurrentUserEmail(),0,Date.now().toString());this.scores.addDocument(s.getLiteralObjectRepresentation()).then(u=>this.playerScore=s)}else this.playerScore=o[0]})}updateScore(){this.playerScore.timestamp=Date.now().toString(),this.scores.updateDocument(this.playerScore.id,this.playerScore)}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(m),t.Y36(f.Y),t.Y36(v.e))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-preguntados"]],decls:1,vars:1,consts:[["class","container mt-5",4,"ngIf"],[1,"container","mt-5"],[1,"row"],[1,"col-12","flagContainer"],["alt","flag-to-guess",3,"src"],[1,"row","align-items-center","justify-content-center"],[1,"container"],["class","game-opt",3,"ngClass","click",4,"ngFor","ngForOf"],["class","row",4,"ngIf"],[1,"game-opt",3,"ngClass","click"],[1,"btn","btn-success",3,"click"],[1,"mt-5"],[1,"alert","alert-info","mt-1"]],template:function(e,o){1&e&&t.YNc(0,y,8,3,"div",0),2&e&&t.Q6J("ngIf",null!=o.options[0])},dependencies:[a.mk,a.sg,a.O5],styles:[".game-opt[_ngcontent-%COMP%]{text-align:center;font-size:large;border-radius:5px;background-color:#0d0f45;color:#fff;width:65%;margin:1.5rem auto}.game-opt[_ngcontent-%COMP%]:hover{cursor:pointer}.game-opt[_ngcontent-%COMP%]:active{transform:scale(.8)}.flagContainer[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}.correct[_ngcontent-%COMP%]{background-color:#267f26}.incorrect[_ngcontent-%COMP%]{background-color:#933131}"]}),n})()}]}];let I=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[p.Bz.forChild(S),p.Bz]}),n})(),x=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[a.ez,I]}),n})()}}]);